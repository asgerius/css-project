[{"tags": ["c", "button", "icons", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 1, "creation_date": 1498694526, "post_id": 44814314, "comment_id": 76609158, "body": "Thanks! Is there a way of doing this with glade? Also, is the icon file a .png or what?"}, {"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "reply_to_user": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1498694690, "post_id": 44814314, "comment_id": 76609193, "body": "You can get button widget via <code>button=GTK_WIDGET (gtk_builder_get_object(builder,&quot;button1&quot;));</code> that defined by glade as button1."}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1498695370, "post_id": 44814314, "comment_id": 76609355, "body": "thanks, but still does not work. I have updated my question. Would you mind having a look at it?"}, {"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "reply_to_user": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1498695732, "post_id": 44814314, "comment_id": 76609434, "body": "try to use <code>gtk_button_set_image</code>"}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1498696154, "post_id": 44814314, "comment_id": 76609540, "body": "should I write gtk_button_set_image(button,&quot;document-new-symbolic.png&quot;); after button = gtk_builder_get_object (builder, &quot;start_button&quot;);?"}, {"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "reply_to_user": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1498696552, "post_id": 44814314, "comment_id": 76609650, "body": "<code>GtkWidget *image = gtk_image_new_from_file(&quot;xxx&quot;);</code> and  <code>gtk_button_set_image(button, image);</code>"}], "tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": true, "score": 1, "last_activity_date": 1498780873, "last_edit_date": 1498780873, "creation_date": 1498694398, "answer_id": 44814314, "question_id": 44814276, "link": "https://stackoverflow.com/questions/44814276/how-to-add-an-icon-to-a-button-in-gtk3/44814314#44814314", "title": "How to add an icon to a button in GTK3?", "body": "<p>Try   </p>\n\n<pre><code>GtkWidget *image = gtk_image_new_from_file(\"document-new-symbolic.png\");\ngtk_button_set_image(button, image);\n</code></pre>\n"}], "owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1834, "favorite_count": 0, "accepted_answer_id": 44814314, "answer_count": 1, "score": 0, "last_activity_date": 1498780873, "creation_date": 1498694074, "last_edit_date": 1498695324, "question_id": 44814276, "link": "https://stackoverflow.com/questions/44814276/how-to-add-an-icon-to-a-button-in-gtk3", "title": "How to add an icon to a button in GTK3?", "body": "<p>I am using Glade to generate C-based GUI's. I have a GtkButton in my UI and would like to display an icon on it. </p>\n\n<p>In glade there seems to be an option on the General properties of the GtkButton called 'Label with optional image'. However, I can't get this to work.</p>\n\n<p>On the main() I have:</p>\n\n<pre><code>button = gtk_builder_get_object (builder, \"start_button\");\nbutton = gtk_button_new_from_icon_name (\"document-new-symbolic\", GTK_ICON_SIZE_BUTTON);\n</code></pre>\n\n<p>In the same folder where i run the binary file, I have a small document-new-symbolic.png. On the <a href=\"https://developer.gnome.org/gtk3/stable/GtkButton.html\" rel=\"nofollow noreferrer\">docs</a> it says that \"If the icon name isn\u2019t known, a \u201cbroken image\u201d icon will be displayed instead.\" However, in my case, just the normal button appears without any icon.</p>\n\n<p>What is going on? Why is the icon not displayed?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 4, "creation_date": 1498693754, "post_id": 44814206, "comment_id": 76608985, "body": "Posted code has <code>return 0;</code> within the loop body."}, {"owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "edited": false, "score": 1, "creation_date": 1498693848, "post_id": 44814206, "comment_id": 76609006, "body": "The posted code is invalid and won&#39;t even compile."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498693976, "post_id": 44814206, "comment_id": 76609037, "body": "<code>getchar</code> returns an <code>int</code>, not a <code>char</code> for good reasons! The result does not fit into a <code>char</code> (unless both types have the same range)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498712113, "post_id": 44814206, "comment_id": 76613287, "body": "&quot; it only print the first character and exit the while loop&quot; + <code>printf(&quot;%c\\n&quot;,ch);     return 0;</code> == makes sense, code prints and then exits.  Recommend to move <code>return</code> statement to outside the loop."}], "answers": [{"tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": false, "score": 0, "last_activity_date": 1498694251, "creation_date": 1498694251, "answer_id": 44814292, "question_id": 44814206, "link": "https://stackoverflow.com/questions/44814206/reading-only-the-first-character-of-a-line-with-while-loop/44814292#44814292", "title": "Reading Only the First Character of a Line with while loop", "body": "<p>Use <code>getch</code> instead of <code>getchar</code> if you don't want displaying feedback to screen. But this is non-standard API.</p>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 8191020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d6afbf3b5b67bc24e77d661ff1af31?s=128&d=identicon&r=PG", "display_name": "Aditya Banerjee", "link": "https://stackoverflow.com/users/8191020/aditya-banerjee"}, "is_accepted": false, "score": 0, "last_activity_date": 1498782429, "creation_date": 1498782429, "answer_id": 44836902, "question_id": 44814206, "link": "https://stackoverflow.com/questions/44814206/reading-only-the-first-character-of-a-line-with-while-loop/44836902#44836902", "title": "Reading Only the First Character of a Line with while loop", "body": "<pre><code>return 0;\n</code></pre>\n\n<p>Should be outside the while loop, plus you're missing the closing bracket of main function. </p>\n"}], "owner": {"reputation": 25, "user_id": 7636779, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251372364918131/picture?type=large", "display_name": "Yuan Cao", "link": "https://stackoverflow.com/users/7636779/yuan-cao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498782429, "creation_date": 1498693439, "question_id": 44814206, "link": "https://stackoverflow.com/questions/44814206/reading-only-the-first-character-of-a-line-with-while-loop", "title": "Reading Only the First Character of a Line with while loop", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n   char ch;\n   int count;\n   while ((ch = getchar()) != '#')\n{\n//if('\\n' == ch)\n//continue;\n    printf(\"%c\\n\",ch);\n    return 0;\n}\n</code></pre>\n\n<p>for input like \"abc/n\"\nWith out if statment, it only print the first character and exit the while loop.\nwith the if statment, it also only print the first character and stay in the while loop.\nwhy only print first letter? why exit the while loop even I didn't input'#'?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1498693576, "post_id": 44814186, "comment_id": 76608946, "body": "<code>1</code> is <code>int</code>, so <code>a+1</code> is <code>int</code> passed as <code>int</code>. The result of <code>a+1</code> is not assigned to <code>char</code> at any point."}, {"owner": {"reputation": 73, "user_id": 8226587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3cb6de1b891bbcbf635f0889b0998b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani", "link": "https://stackoverflow.com/users/8226587/shivani"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498694014, "post_id": 44814186, "comment_id": 76609051, "body": "so is a impliciltly converted to int when 1 is encountered? @Weather Vane"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1498694135, "post_id": 44814186, "comment_id": 76609087, "body": "Please see the answer from @AnT."}, {"owner": {"reputation": 73, "user_id": 8226587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3cb6de1b891bbcbf635f0889b0998b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani", "link": "https://stackoverflow.com/users/8226587/shivani"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498694594, "post_id": 44814186, "comment_id": 76609167, "body": "Yes.noted @WeatherVane"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498717926, "post_id": 44814186, "comment_id": 76615644, "body": "As a side note, <code>char</code> is not necessarily signed. <a href=\"https://stackoverflow.com/questions/2054939/is-char-signed-or-unsigned-by-default\" title=\"is char signed or unsigned by default\">stackoverflow.com/questions/2054939/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 1, "creation_date": 1498720746, "post_id": 44814235, "comment_id": 76617351, "body": "Just for completeness the <code>%d</code> format in <code>printf(&quot;%d\\n&quot;,++i);</code> then works because the <code>char</code> is then promoted back to an <code>int</code> as a default promotion in the variadic argument rules!"}, {"owner": {"reputation": 73, "user_id": 8226587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3cb6de1b891bbcbf635f0889b0998b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani", "link": "https://stackoverflow.com/users/8226587/shivani"}, "edited": false, "score": 0, "creation_date": 1498837008, "post_id": 44814235, "comment_id": 76680923, "body": "@AnT, citing to what you said, I have a doubt in (a+1).                               &quot;All calculations are performed in the domain of int and the result has int type. 127 + 1 is 128, which is what you see printed.&quot; I am convinced of this;but consider next increment of a=128.(a+1 again).The output prints as -127; not 129, as you consider should happen for a."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 73, "user_id": 8226587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3cb6de1b891bbcbf635f0889b0998b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani", "link": "https://stackoverflow.com/users/8226587/shivani"}, "edited": false, "score": 0, "creation_date": 1498837469, "post_id": 44814235, "comment_id": 76681246, "body": "@Shivani: This fails at the very beginning. <code>a=128</code> is already out of range with implementation-defined behavior. In your implementation <code>a = 128</code> is equivalent to <code>a = -128</code>. Only after that <code>a + 1</code> is calculated as I described above and expectedly produces <code>-127</code> result."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 8, "last_activity_date": 1498694333, "last_edit_date": 1498694333, "creation_date": 1498693701, "answer_id": 44814235, "question_id": 44814186, "link": "https://stackoverflow.com/questions/44814186/increment-operation-behaviour-on-signed-char-in-c/44814235#44814235", "title": "Increment operation behaviour on signed char in C", "body": "<p>When used with arithmetic operators, all small integer types (<code>bool</code>, <code>char</code>, <code>short</code>) are subjected to <em>integer promotions</em> before any arithmetic is perfomed on them. In the <code>a + 1</code> expression your <code>a</code> is promoted to <code>int</code> meaning that this expression is actually interpreted as <code>(int) a + 1</code>. The range of <code>char</code> plays no role here. All calculations are performed in the domain of <code>int</code> and the result has <code>int</code> type. <code>127 + 1</code> is <code>128</code>, which is what you see printed.</p>\n\n<p>Your <code>++i</code> is defined as <code>i = i + 1</code>. For the same reasons the right-hand side is calculated as <code>(int) i + 1</code>, meaning that in this case the addition is performed in the domain of <code>int</code> as well. Later the result is converted back to <code>char</code> and stored back into <code>i</code>. The addition itself does not overflow and produces <code>128</code>, but the subsequent conversion back to <code>char</code> \"overflows\", which produces <em>implementation-defined behavior</em>. In your case that implementation-defined behavior produced the value of <code>-128</code> as <code>char</code> result.</p>\n"}], "owner": {"reputation": 73, "user_id": 8226587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3cb6de1b891bbcbf635f0889b0998b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani", "link": "https://stackoverflow.com/users/8226587/shivani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 44814235, "answer_count": 1, "score": 2, "last_activity_date": 1498726289, "creation_date": 1498693286, "last_edit_date": 1498710318, "question_id": 44814186, "link": "https://stackoverflow.com/questions/44814186/increment-operation-behaviour-on-signed-char-in-c", "title": "Increment operation behaviour on signed char in C", "body": "<p>For signed char in C, the range is from -128 to 127. How can <code>a+1</code> (as in the code), produce 128 and not -128? The subsequent increment is normal (-127 for both <code>a</code> and <code>i</code>).</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    char i=127,a=127;\n    printf(\"%d\\n\",++i);//output is -128\n    printf(\"%d\\n\",a+1);//output is 128\n    //subsequent increment after this is -127 for a and i.\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sorting", "mergesort"], "comments": [{"owner": {"reputation": 2160, "user_id": 4025659, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/4WeB0.jpg?s=128&g=1", "display_name": "wbadart", "link": "https://stackoverflow.com/users/4025659/wbadart"}, "edited": false, "score": 1, "creation_date": 1498693014, "post_id": 44814122, "comment_id": 76608813, "body": "Just out of curiosity, how does this relate to javascript or java?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498693156, "post_id": 44814122, "comment_id": 76608846, "body": "funny example of generic msort. <a href=\"https://stackoverflow.com/a/41436080/7076153\">stackoverflow.com/a/41436080/7076153</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "edited": false, "score": 0, "creation_date": 1498733363, "post_id": 44814601, "comment_id": 76625849, "body": "Appreciated. But if I enter this sequence: -1 10 0 9 1 7 2 3 3 4"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "edited": false, "score": 0, "creation_date": 1498736581, "post_id": 44814601, "comment_id": 76628110, "body": "@Yasmin12 - I copied / pasted the wrong pointer version, it&#39;s fixed now. The data copy version was working."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "edited": false, "score": 0, "creation_date": 1498778004, "post_id": 44814601, "comment_id": 76653210, "body": "@Yasmin12 - At the end of my answer, I added one more variation of sort_intervals for the sort the data example, that does a single allocation for the data space."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 1, "last_activity_date": 1498777908, "last_edit_date": 1498777908, "creation_date": 1498696735, "answer_id": 44814601, "question_id": 44814122, "link": "https://stackoverflow.com/questions/44814122/merge-sort-intervals-reccursion/44814601#44814601", "title": "Merge Sort Intervals Reccursion", "body": "<p>The memcpy won't work since the code is sorting the data and not the pointers. You need a loop to copy the n pairs of integers.</p>\n\n<p>All of the instances of a[ib][...] need to be changed to b[ib][...].</p>\n\n<p>Changes noted in comments:</p>\n\n<pre><code>#include &lt;malloc.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid msort(int** intervals, int n,int** helper_array);\nvoid merge(int** a,int a_length,int** b,int b_length,int** c);\n\nvoid sort_intervals(int** intervals, int n)\n{\nint **temp_arr = (int **)malloc(n * sizeof(int*));\\\nint i;                                  /* c not c++ */\n    for(i=0;i&lt;n;i++)                    /* c not c++ */\n    {\n        temp_arr[i] = (int*) malloc(2*sizeof(int));\n    }\n    msort(intervals,n,temp_arr);\n    for(i=0;i&lt;n;i++)                    /* c not c++ */\n    {\n        free(temp_arr[i]);\n    }\n    free(temp_arr);\n}\n\nvoid msort(int** intervals, int n,int** helper_array)\n{\n    int left = n / 2;\n    int right = n-left;\n    int i;                              /* fix */\n    if (n &lt; 2)\n        return;\n    msort(intervals, left, helper_array);\n    msort(intervals + left, right, helper_array);\n    merge(intervals, left, intervals + left, right, helper_array);\n    for(i = 0; i &lt; n; i++)              /* fix */\n    {\n        intervals[i][0] = helper_array[i][0];\n        intervals[i][1] = helper_array[i][1];\n    }\n}\n\nvoid merge(int** a,int a_length,int** b,int b_length,int** c)\n{   int ia=0,ib=0,ic=0;\n    while(ia&lt;a_length &amp;&amp; ib&lt;b_length)\n    {\n       if(a[ia][0]&lt;b[ib][0])\n       {\n           c[ic][0]=a[ia][0];\n           c[ic][1]=a[ia][1];\n           ia++;\n       }\n       else if(a[ia][0]&gt;b[ib][0])\n       {\n           c[ic][0]=b[ib][0];           /* fix */\n           c[ic][1]=b[ib][1];           /* fix */\n           ib++;\n       }\n       else if(a[ia][1]&gt;b[ib][1])       /* clean up */\n       {\n           c[ic][0]=b[ib][0];           /* fix */\n           c[ic][1]=b[ib][1];           /* fix */\n           ib++;\n       }\n       else\n       {\n           c[ic][0]=a[ia][0];\n           c[ic][1]=a[ia][1];\n           ia++;\n       }\n       ic++;\n    }\n    for(;ia&lt;a_length;ia++,ic++)\n    {\n        c[ic][0]=a[ia][0];\n        c[ic][1]=a[ia][1];\n    }\n    for(;ib&lt;b_length;ib++,ic++)\n    {\n        c[ic][0]=b[ib][0];              /* fix */\n        c[ic][1]=b[ib][1];              /* fix */\n    }\n}\n\nint main()\n{\nint a[8][2] = {{7,5},{3,4},{1,2},{1,1},{7,3},{2,2},{3,5},{2,3}};\nint *pa[8] = {a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]};\nint i;\n\n    sort_intervals(pa, sizeof(pa)/sizeof(pa[0]));\n    for(i = 0; i &lt; sizeof(pa)/sizeof(pa[0]); i++)\n        printf(\"%1d %1d\\n\", pa[i][0], pa[i][1]);\n    return 0;\n}\n</code></pre>\n\n<p>or you could sort the pointers:</p>\n\n<pre><code>#include &lt;malloc.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid msort(int** intervals, int n,int** helper_array);\nvoid merge(int** a,int a_length,int** b,int b_length,int** c);\n\nvoid sort_intervals(int** intervals, int n)\n{\n    int **temp_arr = (int **)malloc(n * sizeof(int*));\n    msort(intervals,n,temp_arr);\n    free(temp_arr);\n}\n\nvoid msort(int** intervals, int n,int** helper_array)\n{\n    int left = n / 2;\n    int right = n-left;\n    if (n &lt; 2)\n        return;\n    msort(intervals, left, helper_array);\n    msort(intervals + left, right, helper_array);\n    merge(intervals, left, intervals + left, right, helper_array);\n    memcpy(intervals, helper_array, n*sizeof(int*));\n}\n\nvoid merge(int** a,int a_length,int** b,int b_length,int** c)\n{\nint ia=0,ib=0,ic=0;\n    while(ia&lt;a_length &amp;&amp; ib&lt;b_length)\n    {\n       if(a[ia][0] &lt; b[ib][0])\n           c[ic] = a[ia++];\n       else if(a[ia][0] &gt; b[ib][0])\n           c[ic] = b[ib++];\n       else if(a[ia][1] &lt;= b[ib][1])\n           c[ic] = a[ia++];\n       else\n           c[ic] = b[ib++];\n       ic++;\n    }\n    while(ia &lt; a_length)\n        c[ic++] = a[ia++];\n    while(ib &lt; b_length)\n        c[ic++] = b[ib++];\n}\n\nint main()\n{\nint a[8][2] = {{7,5},{3,4},{1,2},{1,1},{7,3},{2,2},{3,5},{2,3}};\nint *pa[8] = {a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]};\nint i;\n\n    sort_intervals(pa, sizeof(pa)/sizeof(pa[0]));\n    for(i = 0; i &lt; sizeof(pa)/sizeof(pa[0]); i++)\n        printf(\"%1d %1d\\n\", pa[i][0], pa[i][1]);\n    return 0;\n}\n</code></pre>\n\n<p>This sequence is working for both cases:</p>\n\n<pre><code>int main()\n{\nint a[5][2] = {{-1,10},{0,9},{1,7},{2,3},{3,4}};\nint *pa[5] = {a[0],a[1],a[2],a[3],a[4]};\nint i;\n\n    sort_intervals(pa, sizeof(pa)/sizeof(pa[0]));\n    for(i = 0; i &lt; sizeof(pa)/sizeof(pa[0]); i++)\n        printf(\"%3d %3d\\n\", pa[i][0], pa[i][1]);\n    return 0;\n}\n</code></pre>\n\n<p>For the sort data (instead of sort pointers) example, a single allocation could be used for all of the data instead of <code>n</code> allocations. For this specific case, the code could have allocated and freed the data space using temp_arr[0] (or *temp_arr) instead of temp_bfr, but using temp_bfr is a more generic way of doing this that would not be affected if temp_arr was sorted or otherwise modified.</p>\n\n<pre><code>void sort_intervals(int** intervals, int n)\n{\n/* allocate space for array of pointers */\nint **temp_arr = (int **)malloc(n * sizeof(int*));\n/* allocate space for data */\nint *temp_bfr  = (int *)malloc(n * 2 * sizeof(int));\nint i;\n    for(i=0;i&lt;n;i++)\n        temp_arr[i] = temp_bfr + 2*i;\n    msort(intervals,n,temp_arr);\n    free(temp_bfr);                     /* free data space */\n    free(temp_arr);                     /* free array of pointer space */\n}\n</code></pre>\n"}], "owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 44814601, "answer_count": 1, "score": 0, "last_activity_date": 1498777908, "creation_date": 1498692855, "last_edit_date": 1498717847, "question_id": 44814122, "link": "https://stackoverflow.com/questions/44814122/merge-sort-intervals-reccursion", "title": "Merge Sort Intervals Reccursion", "body": "<p>The following code is supposed to sort  2d array which size is: <strong>NX2</strong> </p>\n\n<p>The first column represents coordinate x.\nThe second one represents coordinate y.</p>\n\n<p>The conditions are the following:</p>\n\n<p>if <strong>c>d</strong>: <strong>[c,a]>[d,b]</strong> </p>\n\n<p>if <strong>c=d and a>b</strong>: <strong>[c,a]>[d,b]</strong></p>\n\n<p>I think that I have a fault when I call the function memcopy. But I'm not sure why.</p>\n\n<pre><code>void sort_intervals(int** intervals, int n)\n{\n    int **temp_arr = (int **)malloc(n * sizeof(int*));\n    for(int i=0;i&lt;n;i++)\n    {\n        temp_arr[i] = (int*) malloc(2*sizeof(int));\n    }\n    msort(intervals,n,temp_arr);\n        for(int i=0;i&lt;n;i++)\n    {\n        free(temp_arr[i]);\n    }\n    free(temp_arr);\n}\n\nvoid msort(int** intervals, int n,int** helper_array)\n{\n    int left = n / 2;\n    int right = n-left;\n    if (n &lt; 2)\n        return;\n    msort(intervals, left, helper_array);\n    msort(intervals + left, right, helper_array);\n    merge(intervals, left, intervals + left, right, helper_array);\n    memcpy(*intervals, *helper_array, n*sizeof(int*));\n}\n\nvoid merge(int** a,int a_length,int** b,int b_length,int** c)\n{   int ia=0,ib=0,ic=0;\n    while(ia&lt;a_length &amp;&amp; ib&lt;b_length)\n    {\n       if(a[ia][0]&lt;b[ib][0])\n       {\n           c[ic][0]=a[ia][0];\n           c[ic][1]=a[ia][1];\n           ia++;\n       }\n\n       else if(a[ia][0]&gt;b[ib][0])\n       {\n           c[ic][0]=a[ib][0];\n           c[ic][1]=a[ib][1];\n           ib++;\n       }\n       else if(a[ia][0]==b[ib][0])\n       {\n           if(a[ia][1]&gt;b[ib][1])\n       {\n           c[ic][0]=a[ib][0];\n           c[ic][1]=a[ib][1];\n           ib++;\n       }\n           else\n       {\n           c[ic][0]=a[ia][0];\n           c[ic][1]=a[ia][1];\n           ia++;\n       }\n\n       }\n\n       ic++;\n\n    }\n    for(;ia&lt;a_length;ia++,ic++)\n    {\n        c[ic][0]=a[ia][0];\n        c[ic][1]=a[ia][1];\n    }\n    for(;ib&lt;b_length;ib++,ic++)\n    {\n        c[ic][0]=a[ib][0];\n        c[ic][1]=a[ib][1];\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "ffmpeg", "linker", "windows-10"], "comments": [{"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 1, "creation_date": 1498721862, "post_id": 44814055, "comment_id": 76618041, "body": "Are you using #ifdef __cplusplus extern &quot;C&quot; { #endif to include the headers?"}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1498735055, "post_id": 44814055, "comment_id": 76626949, "body": "Thanks, but it doesn&#39;t change a thing, I get the same error. I&#39;m trying to build everything from scratch on a Raspberry and see if I can build it. If I do succeed, I&#39;ll try from scratch on Windows. Thanks again! :)  PS: Here&#39;s the code I&#39;m trying to build: <a href=\"https://pastebin.com/07jvxMfP\" rel=\"nofollow noreferrer\">pastebin.com/07jvxMfP</a>"}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 2, "creation_date": 1498739602, "post_id": 44814055, "comment_id": 76630514, "body": "The order in which the libraries are loaded or linked is also important (dependent on static or shared), as they need to ref dependencies from other ffmpeg libs."}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1498749591, "post_id": 44814055, "comment_id": 76638638, "body": "I didn&#39;t know that! :) How do I know what order I should put the dependencies?"}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 1, "creation_date": 1498750748, "post_id": 44814055, "comment_id": 76639510, "body": "This is the order from a Qt Android project: -lswscale -lswresample -lavutil -lavcodec -lavformat -lpostproc -lavfilter"}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1498762860, "post_id": 44814055, "comment_id": 76646599, "body": "It still doesn&#39;t work. But I finally built FFmpeg on the Raspberry and installed it (it&#39;s the first version, it took me the whole afternoon). Now I&#39;ll be trying to build examples by hand on the RPi. Thanks for helping me! :)"}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 1, "creation_date": 1498763805, "post_id": 44814055, "comment_id": 76647104, "body": "I use the Odroid (similar but more powerful than the Pi) with both android and linux and also use ffmpeg with them. It&#39;s a great learning curve. Enjoy."}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1498765098, "post_id": 44814055, "comment_id": 76647774, "body": "Great! :) So I successfully build the metadata.c example on the Pi with this command: gcc metadata.c -o metadata -lavdevice -lavformat -lavfilter -lavcodec -lswresample -lswscale -lavutil -lm -lz -lpthread -lx264. So I guess I&#39;ll try to build it on Win and try again. And it that doesn&#39;t work, I&#39;ll play with it in a VM or the Pi. Thanks a lot!"}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1498765154, "post_id": 44814055, "comment_id": 76647803, "body": "By the way, how easy is it to learn to use the library versus just calling the FFmpeg binaries? And can I do more with the libraries than the binaries? Thanks again!"}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 1, "creation_date": 1498772373, "post_id": 44814055, "comment_id": 76651329, "body": "The CLI is much easier to use because feedback is instant, but I&#39;m a programmer, I like to dabble and make magic happen :-) Either way, it&#39;s all trial and error. Good to hear you got it working..."}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1498774028, "post_id": 44814055, "comment_id": 76652013, "body": "Thanks you! Have a nice day!"}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1498844179, "post_id": 44814055, "comment_id": 76684900, "body": "Ok I&#39;m coming back to you because I found what I did wrong! Please check my edit above! :)"}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 1, "creation_date": 1498855909, "post_id": 44814055, "comment_id": 76690189, "body": "I mainly use Linux which makes building ffmpeg so easy with ./configure and make. I believe windows has cygwin which is similar but fiddly to get used to. Nice one for getting it done. I hope you&#39;ve made notes on the steps you took to get there :-)"}, {"owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "reply_to_user": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 1, "creation_date": 1498856263, "post_id": 44814055, "comment_id": 76690305, "body": "Yes, it was way easier to build it on the Pi even though it took the whole afternoon. Building it on Windows is another thing with Cygwin or MinGW or Visual Studio, and they all work differently. Have a nice day! :)"}], "owner": {"reputation": 693, "user_id": 1508689, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a88ec6192085bb9c8f3886a245183107?s=128&d=identicon&r=PG", "display_name": "Tiwenty", "link": "https://stackoverflow.com/users/1508689/tiwenty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 542, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498844417, "creation_date": 1498692311, "last_edit_date": 1498844417, "question_id": 44814055, "link": "https://stackoverflow.com/questions/44814055/linker-error-with-ffmpeg-on-windows", "title": "Linker error with FFmpeg on Windows", "body": "<p>I'm trying to link FFmpeg libraries to a C program on Windows, but I can't successfully link the libraries. I downloaded the Dev archive from <a href=\"https://ffmpeg.zeranoe.com/builds/\" rel=\"nofollow noreferrer\">Zeranoe</a> and put it into my project folder. (EDIT: The 64-bits version). The compilation works well but when I'm trying to link libraries, I get some undefined reference errors. Here is the command I'm trying:</p>\n\n<p><code>gcc -o .\\metadata.exe .\\metadata.o -L .\\ffmpeg-20170628-c1d1274-win64-dev\\lib\\ -lavutil -lavformat -lavdevice -lavfilter -lavcodec -lswresample -lswscale -lm</code></p>\n\n<p>It then outputs me:</p>\n\n<p><code>.\\metadata.o:metadata.c:(.text+0x44): undefined reference to 'av_register_all'\n.\\metadata.o:metadata.c:(.text+0x6c): undefined reference to 'avformat_open_input'\n.\\metadata.o:metadata.c:(.text+0xc8): undefined reference to 'av_dict_get'\n.\\metadata.o:metadata.c:(.text+0xdf): undefined reference to 'avformat_close_input'</code></p>\n\n<p>Paths are good because if I change the -libs parameters or the -L parameter I get files not found errors. Finally, I took those libraries from the Makefile in the examples' folder.</p>\n\n<p>What is the source of the error? Thanks in advance, have a nice day!</p>\n\n<p>EDIT: Okay so I found what was the problem. As I'm using MinGW, it includes a 32-bits compiler. So as I downloaded the 64-bits, something was off. I tried downloading the 32-bits builds and it built and linked successfully with only -lavformat and -lavutil parameters. And to run the program I needed the DLL which can be found in the Shared build (and 32-bits of course) on Zeranoe's website. Thanks!</p>\n"}, {"tags": ["c", "data-structures", "struct", "linked-list"], "comments": [{"owner": {"reputation": 1548, "user_id": 4124887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32c7d781b18ed038d6cb2ff54bcbb0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/4124887/tony"}, "edited": false, "score": 1, "creation_date": 1498693048, "post_id": 44813917, "comment_id": 76608821, "body": "Secondary issue: in your INSERT function you are trying to compare two strings using the <code>&gt;</code> operator.  Probably you want something like <code>strcmp(name1, name2)</code> instead, with the sign of the result determining which is alphabetically first."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498769851, "post_id": 44813917, "comment_id": 76650283, "body": "using all CAPS for function names makes the code much more difficult to understand.  All CAPS is (by convention) only used for macro names, const names.   In C, that means that <code>#define ALL_CAPS_NAME 1</code>  is expected, but not function names.  For function names suggest either <code>lowerCamelCase()</code> or <code>snake_name()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498770082, "post_id": 44813917, "comment_id": 76650371, "body": "the posted code contains several &#39;magic&#39; numbers.  &#39;magic&#39; number are numbers with no basis. I.E. 2, 5, 15, 29, 39, 49.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc. Suggest using a <code>enum</code> statement or <code>#define</code> statements to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498770275, "post_id": 44813917, "comment_id": 76650467, "body": "in general, it is best when performing a <code>==</code> comparison to place the literal on the left, then some keypunch error like using <code>=</code> rather than <code>==</code> will be caught by the compiler rather than you getting gray hairs and lots of frustration trying to debug the problem"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498770366, "post_id": 44813917, "comment_id": 76650513, "body": "the returned value from a call to <code>fgets()</code> should be checked to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498770610, "post_id": 44813917, "comment_id": 76650620, "body": "this statement: <code>if((strcmp(input, &quot;List&quot;) == 0) || (strcmp(input, &quot;list&quot;) == 0))         {</code>  will not catch when the user enters a mixed case input.  And how is the user to know what the valid commands are?  the code should be displaying a menu, then ask for the input.  With a menu the commands could be reduced to single character, then the checking would be via: `switch( tolower(input) ) { case ..... }"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498770736, "post_id": 44813917, "comment_id": 76650677, "body": "for the &#39;INSERT()&#39; values, the posted code is using a format string in a call to <code>scanf()</code> that has embedded &#39;-&#39; but nothing is telling the user that is how to format the input"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498771160, "post_id": 44813917, "comment_id": 76650816, "body": "this line: <code>newEmployee = (struct data*)malloc(sizeof(emp))</code> has a few problems.  1) the returned type is <code>void*</code> so can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc.  2) when  calling any of the heap allocation functions (malloc, calloc, realloc), always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498771359, "post_id": 44813917, "comment_id": 76650885, "body": "there is a major oops in the code.  The pointer <code>head</code> is being used to point to the first entry in the linked list AND being used for the receiving area from the call to <code>scanf()</code>  This will not work as implemented."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498771593, "post_id": 44813917, "comment_id": 76650975, "body": "in function: <code>INSERT()</code>, the line: <code>temp = temp-&gt;next;</code> will not work for the first entry because the field in <code>head.next</code> has not been initialized to NULL."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498771790, "post_id": 44813917, "comment_id": 76651063, "body": "when calling <code>scanf()</code>, with the input format specifier: &#39;%s&#39;, always include a MAX CHARACTERS modifier that is one less than the length of the input buffer to avoid overflow.  As written, the call to <code>scanf()</code> will input all the user input into the first field which will cause a buffer overflow.  Such overflow is undefined behavior and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498772003, "post_id": 44813917, "comment_id": 76651141, "body": "for ease of readability and understanding: 1) separate all code blocks (for, if, else, while, do...while, switch, case, default) via a single blank line. 2) separate functions by 2 or 3 blank lines (be consistent) 3) consistently indent the code.  Indent after every opening brace &#39;{&#39;.  unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498772100, "post_id": 44813917, "comment_id": 76651183, "body": "your compiler should have output about 1/2 dozen warning messages. You should fix those problems.  Note: when a prototype is written for a function that takes no parameters, place <code>void</code> between the parens"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498772272, "post_id": 44813917, "comment_id": 76651280, "body": "appropriate horizontal spacing, for instance inside parens and after comma and semicolons makes the code much easier to read.  The compiler doesn&#39;t care, but us humans do."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498772456, "post_id": 44813917, "comment_id": 76651365, "body": "the code contains a lot of unused parameters, for instance in function: <code>INSERT()</code>, the parameter: <code>struct address addr</code>  (which should have been passed as a pointer) is not used, so should be removed.  Similar considerations exist for the <code>float salary</code> parameter"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498772741, "post_id": 44813917, "comment_id": 76651504, "body": "in function: <code>DELETE()</code>, the parameter: <code>char *name</code> is not used.   The lines: <code>char del[39];     scanf(&quot;%39s&quot;, del);</code> is not correct, the MAX characters modifier must be one less than the length of the <code>del[]</code> buffer, because of the name was 39 characters long the <code>scanf()</code> would still append a NUL byte, resulting in a buffer overflow I.E. undefined behavior, which can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498772993, "post_id": 44813917, "comment_id": 76651606, "body": "in the function: <code>DELETE()</code>, this line: <code>while (strcmp(del, temp-&gt;name) == 0)</code> will cause the delete operation to fail (unless the very first entry, in <code>head</code> matches, but that is not part of the linked list entries. and you really do not want to delete/free <code>head</code>  Suggest: <code>while( temp-&gt;next != NULL )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498773167, "post_id": 44813917, "comment_id": 76651678, "body": "this logic: <code>printf(&quot;RECORD DELETED\\n&quot;);         }         temp = temp-&gt;next;         printf(&quot;RECORD NOT FOUND\\n&quot;);</code> is not correct as it can output both messages"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498773303, "post_id": 44813917, "comment_id": 76651732, "body": "regarding: <code>printf(&quot;total payroll: %f&quot;, total);</code>  in almost all cases, when calling <code>printf()</code>, the format string should end with &#39;\\n&#39;, so the message is immediately passed through to the terminal"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498773848, "post_id": 44813917, "comment_id": 76651950, "body": "in function: <code>INSERT()</code>, the field <code>newEmployee-&gt;next</code> is not being initialized to NULL, so the <code>while()</code> statement will (probably) never find an instance where <code>temp-&gt;next</code> is NULL.   This is undefined behavior and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498774238, "post_id": 44813917, "comment_id": 76652085, "body": "regarding: <code>newEmployee-&gt;next = temp-&gt;next;     temp-&gt;next = newEmployee;</code>   this eliminates all from the linked list (which results, amongst other things, in a memory leak) except the <code>head-&gt;next</code> and the <code>newEmployee</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498774391, "post_id": 44813917, "comment_id": 76652132, "body": "in function: <code>DELETE()</code>, the <code>while()</code> loop, if ever entered, (or corrected) will not stop when it encounters a <code>temp-&gt;next</code> field that contains NULL"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498774676, "post_id": 44813917, "comment_id": 76652225, "body": "in the <code>EDIT()</code> function (and others) this line: <code>temp = temp-&gt;next;</code> is outside the <code>while()</code> loop, and will modify the contents of the node pointed to by <code>head</code> and no other.  However, that is the container for the input fields, so the code will be copying the data over itself."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498774777, "post_id": 44813917, "comment_id": 76652261, "body": "in function: <code>CALCPAYROLL()</code>,  the variable <code>float total;</code> is not initialized, so this line: <code>total += temp-&gt;salary;</code> will be adding to some random value rather than starting at <code>0.0f</code>   This line: <code>struct data* temp = head;</code> should be accessing the first node, not the input fields, so it should be: <code>struct data* temp = head-&gt;next;</code>   There are other instances of this same error elsewhere in the code"}], "answers": [{"comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498693326, "post_id": 44814099, "comment_id": 76608887, "body": "insert adds the new employee at the end of the list."}, {"owner": {"reputation": 25, "user_id": 7648172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f442235c1d03d4d30c8224601371325?s=128&d=identicon&r=PG&f=1", "display_name": "pino", "link": "https://stackoverflow.com/users/7648172/pino"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498693970, "post_id": 44814099, "comment_id": 76609035, "body": "No. He&#39;s making an ordered list, there&#39;s a while that he use for searching where to put the new element. However, also if want to append all the element at the end of the list he has to modify head&#39;s content the first time, so my explanation is still valid."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1498696248, "post_id": 44814099, "comment_id": 76609563, "body": "As an alternative to using a double pointer, INSERT could return a pointer to the first node (return the head of the linked list)."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498696488, "post_id": 44814099, "comment_id": 76609634, "body": "That doesn&#39;t work.  If malloc fails in INSERT, the caller could lose the entire list"}, {"owner": {"reputation": 25, "user_id": 7648172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f442235c1d03d4d30c8224601371325?s=128&d=identicon&r=PG&f=1", "display_name": "pino", "link": "https://stackoverflow.com/users/7648172/pino"}, "edited": false, "score": 0, "creation_date": 1498719796, "post_id": 44814099, "comment_id": 76616782, "body": "So, in your solution where you talk about while(temp-&gt;next &amp;&amp; name &gt; newEmployee-&gt;name) {temp = temp-&gt;next;} he is not finding where to insert the element. This is terrible...... (Of course he has to change the &quot;&gt;&quot; with strcmp() in the while)"}], "tags": [], "owner": {"reputation": 25, "user_id": 7648172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f442235c1d03d4d30c8224601371325?s=128&d=identicon&r=PG&f=1", "display_name": "pino", "link": "https://stackoverflow.com/users/7648172/pino"}, "is_accepted": false, "score": 0, "last_activity_date": 1498692655, "creation_date": 1498692655, "answer_id": 44814099, "question_id": 44813917, "link": "https://stackoverflow.com/questions/44813917/c-structs-and-linked-lists-struggle/44814099#44814099", "title": "C structs and linked lists struggle", "body": "<p>You can't access to the data because in INSERT function head must be a <em>double pointer</em>, because when you want to insert something in the head of a linked list you have to change the address stored in head. In your code you're modifying a <em>copy</em> of head. remember that in C <em>everything is passed  for value</em>. This mean that for modify the address content in a pointer you have to pass <em>the address of the pointer</em> at your function.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8228808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155542573982049/picture?type=large", "display_name": "Albert Tran", "link": "https://stackoverflow.com/users/8228808/albert-tran"}, "edited": false, "score": 0, "creation_date": 1498698290, "post_id": 44814508, "comment_id": 76610016, "body": "Thanks for the help. I&#39;m applying everything right now!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498774066, "post_id": 44814508, "comment_id": 76652022, "body": "this answer is not quite correct because the code is only using the <code>-&gt;next</code> field in the linked list and using where <code>head</code> points as input fields, filled by the user.  So the contents of the <code>head</code> pointer are not changed."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498783607, "post_id": 44814508, "comment_id": 76654643, "body": "?? &#39;head&#39; changes at statement <code>head = head-&gt;next;</code>. <code>head</code> is used as the pointer to walk the list.  There is no change needed to the list itself, this is just a read-only find()."}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": false, "score": 1, "last_activity_date": 1498697115, "last_edit_date": 1498697115, "creation_date": 1498696003, "answer_id": 44814508, "question_id": 44813917, "link": "https://stackoverflow.com/questions/44813917/c-structs-and-linked-lists-struggle/44814508#44814508", "title": "C structs and linked lists struggle", "body": "<p>First of all, I have to commend you for a very neat presentation.  The code is readable and easy to follow.  The only fault I find with it is that all uppercase names are usually reserved for macros and constants declared with <code>#define</code>.</p>\n\n<p>Here:</p>\n\n<pre><code>struct data{\n    char name[39];\n    struct address addy;\n    float salary;\n    struct data *next;\n} emp;                  // declaring a variable at the same time as the structure? Not very nice.\n</code></pre>\n\n<p>I see an issue that happens when you create your first list item, the head.  Insert must have a way to modify the <code>head</code> parameter.  This needs an extra  level of indirection.  INSERT should also return an error code, in case malloc fails, a common way to do this is to return a negative value (-1) on error.</p>\n\n<pre><code>void INSERT(struct data* head, char* name, struct address addr, float salary)\n\n// should be \nint INSERT(struct data** head, char* name, struct address addr, float salary)\n</code></pre>\n\n<p>You'll have to change the logic a little bit to set <code>head</code> with the newly allocated buffer when <code>head</code> is NULL on entry.  Calling INSERT then becomes.</p>\n\n<pre><code>   if (INSERT(&amp;head, name, &amp;addr, salary) &lt; 0)\n   {\n      // error !\n   }\n</code></pre>\n\n<p>I see a problem in data allocation in INSERT.</p>\n\n<pre><code>struct data* newEmployee = NULL;\n//newEmployee = (struct data*)malloc(sizeof(emp)); // ?? you allocate a struct data, what's emp?\n// should read\nnewEmployee = (struct data*)malloc(sizeof(struct data)); \n</code></pre>\n\n<p>DELETE and EDIT do not work. They cannot find the employee as written. You should consider using a find() function, something like this:</p>\n\n<pre><code>data* FindEmployeeData(data* head, const char* name)\n{\n   while (head)\n   {\n      if (strcmp(head-&gt;name, name) == 0)\n        break;\n      head = head-&gt;next;\n   }\n   return head;\n}\n</code></pre>\n\n<p>This could be a time saver when writing new operations on employees.</p>\n\n<p>In INSERT:</p>\n\n<pre><code>while(temp-&gt;next &amp;&amp; temp-&gt;next-&gt;name &gt; newEmployee-&gt;name) \n</code></pre>\n\n<p>I thought strings were supposed to be compared with <code>strcmp()</code>...</p>\n\n<p>In DELETE: same as for INSERT, the function could change the head of the list</p>\n\n<pre><code>int DELETE(data** head, const char* name); // returns -1 on error.\n</code></pre>\n\n<p>Here:</p>\n\n<pre><code>scanf(\"%s-%s-%s-%s-%s-%f\", head-&gt;name, head-&gt;addy.street, head-&gt;addy.city, head-&gt;addy.state, head-&gt;addy.zip, &amp;head-&gt;salary);\n</code></pre>\n\n<p>Terrible things <strong>will</strong> happen when the user enters a name, address, state, street, city or zip that are too long for the space you have allocated.</p>\n"}], "owner": {"reputation": 1, "user_id": 8228808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155542573982049/picture?type=large", "display_name": "Albert Tran", "link": "https://stackoverflow.com/users/8228808/albert-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498697115, "creation_date": 1498691367, "question_id": 44813917, "link": "https://stackoverflow.com/questions/44813917/c-structs-and-linked-lists-struggle", "title": "C structs and linked lists struggle", "body": "<p>So, we just started learning linked lists and data structures in my online class, but I have been really struggling with this topic. I have a general understanding of pointers but when you combine everything, I get completely lost. </p>\n\n<p>So for this program, I am supposed to process employee data and access it through the use of structs and pointers. However, I think I am not passing the correct values into the functions because the data is not being saved and I can't access it. Any help would be appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct address {\n    char street[49];\n    char city[29];\n    char state[2];\n    char zip[5];\n};\n\nstruct data{\n    char name[39];\n    struct address addy;\n    float salary;\n    struct data *next;\n} emp;\n\nvoid LIST(struct data* head);\nvoid INSERT(struct data* head, char* name, struct address addr, float salary);\nvoid DELETE(char* name, struct data* head);\nvoid EDIT(struct data* head, char* name, struct address addr, float salary);\nvoid CALCPAYROLL(struct data* head);\nvoid HELP();\n\nint main()\n{\n    char input[15];\n    int quitter = 1;\n    struct data *head = NULL;\n    head = malloc(sizeof(emp));\n    if (head == NULL){\n        return 1;\n    }\n\n    while(quitter == 1)\n    {\n        printf(\" enter command:  \\n\");\n        fgets(input,15, stdin);\n        input[strlen(input) -1] = '\\0';\n        if((strcmp(input, \"List\") == 0) || (strcmp(input, \"list\") == 0))\n        {\n            LIST(head);\n        }\n        if((strcmp(input, \"Insert\") == 0) || (strcmp(input, \"insert\") == 0))\n        {\n            scanf(\"%s-%s-%s-%s-%s-%f\", head-&gt;name, head-&gt;addy.street, head-&gt;addy.city, head-&gt;addy.state, head-&gt;addy.zip, &amp;head-&gt;salary);\n            INSERT(head, head-&gt;name, head-&gt;addy, head-&gt;salary);\n        }\n        if ((strcmp(input, \"Delete\") == 0) || (strcmp(input, \"delete\") == 0))\n        {\n            DELETE(head-&gt;name, head);\n        }\n        if ((strcmp(input, \"Edit\") == 0) || (strcmp(input, \"edit\") == 0))\n        {\n            EDIT(head, head-&gt;name, head-&gt;addy, head-&gt;salary);\n        }\n        if ((strcmp(input, \"Payroll\") == 0) || (strcmp(input, \"payroll\") == 0))\n        {\n            CALCPAYROLL(head);\n        }\n        if ((strcmp(input, \"Help\") == 0) || (strcmp(input, \"help\") == 0))\n        {\n            HELP();\n        }\n        if ((strcmp(input, \"Quit\") == 0) || (strcmp(input, \"quit\") == 0))\n        {\n            printf(\"============\\nGood bye!\\n\");\n            quitter = 0;\n        }\n    }\n    return 0;\n}\n\nvoid LIST(struct data* head)\n{\n    struct data* temp = head;\n    while (temp) {\n        printf(\"%s\\n%s\\n%s, %2s %5s\\n%9.2f\\n-----\\n\", temp-&gt;name, temp-&gt;addy.street, temp-&gt;addy.city, temp-&gt;addy.state, temp-&gt;addy.zip, temp-&gt;salary);\n        temp = temp-&gt;next;\n        printf(\"%s\\n%s\\n%s, %2s %5s\\n%9.2f\\n-----\\n\", temp-&gt;name, temp-&gt;addy.street, temp-&gt;addy.city, temp-&gt;addy.state, temp-&gt;addy.zip, temp-&gt;salary);\n        temp = temp-&gt;next;\n    }\n}\n\nvoid INSERT(struct data* head, char* name, struct address addr, float salary)\n{\n    struct data* newEmployee = NULL;\n    newEmployee = (struct data*)malloc(sizeof(emp));\n\n    strcpy(newEmployee-&gt;name, head-&gt;name);\n    newEmployee-&gt;salary = head-&gt;salary;\n\n    strcpy(newEmployee-&gt;addy.street, head-&gt;addy.street);\n\n    strcpy(newEmployee-&gt;addy.city, head-&gt;addy.city);\n\n    strcpy(newEmployee-&gt;addy.state, head-&gt;addy.state);\n\n    strcpy(newEmployee-&gt;addy.zip, head-&gt;addy.zip);\n    struct data* temp = head;\n    while(temp-&gt;next &amp;&amp; temp-&gt;next-&gt;name &gt; newEmployee-&gt;name) \n    {\n        temp = temp-&gt;next;\n    }\n    newEmployee-&gt;next = temp-&gt;next;\n    temp-&gt;next = newEmployee;\n\n}\n\nvoid DELETE(char* name, struct data* head)\n{\n    char del[39];\n    scanf(\"%39s\", del);\n    struct data * toBeDeleted = NULL;\n    struct data * temp = head;\n    while (strcmp(del, temp-&gt;name) == 0) \n        {\n           strcpy(temp-&gt;next-&gt;name, temp-&gt;name);\n\n           temp-&gt;addy = temp-&gt;next-&gt;addy;\n           temp-&gt;salary = temp-&gt;next-&gt;salary;\n           toBeDeleted = temp-&gt;next;\n           temp-&gt;next = temp-&gt;next-&gt;next;\n           free(toBeDeleted);\n           printf(\"RECORD DELETED\\n\");\n        }\n        temp = temp-&gt;next;\n        printf(\"RECORD NOT FOUND\\n\");\n}\n\nvoid EDIT(struct data* head, char* name, struct address addr, float salary)\n{\n    char edit[39];\n    scanf(\"%39s\", edit);\n    struct data* temp = head;\n    while (strcmp(edit, temp-&gt;name) == 0) \n        {\n            temp-&gt;addy = addr;\n            temp-&gt;salary = salary;\n\n            printf(\"RECORD EDITED\\n\");\n            return;\n        }\n        temp = temp-&gt;next;\n    printf(\"RECORD NOT FOUND\\n\");\n}\n\nvoid CALCPAYROLL(struct data* head)\n{\n    struct data* temp = head;\n    float total;\n    while (temp) \n    {\n        total += temp-&gt;salary;\n        temp = temp-&gt;next;\n    }\n    printf(\"total payroll: %f\", total);\n}\n\nvoid HELP()\n{\n    printf(\"commands:\\n\");\n    printf(\"List - shows the list of employees\\n\");\n    printf(\"Insert - Creates a new employee record\\n\");\n    printf(\"Delete - Deletes an existing employee record\\n\");\n    printf(\"Edit - Modifies the contents of an employee record\\n\");\n    printf(\"Payroll - Calculates and displays the total payroll\\n\");\n    printf(\"Help - Displays the set of available commands\\n\");\n    printf(\"Quit - Prints the message \"\"good bye!\"\" and exits the program\" );\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "file"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1498690991, "post_id": 44813821, "comment_id": 76608285, "body": "For a 8080 emulator, I would just use a 64K file, and mmap() it."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1498691001, "post_id": 44813821, "comment_id": 76608291, "body": "Can you please provide some code, even pseudo-code, which demonstrates how you want to call the operations and give examples of input and desired output?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498691231, "post_id": 44813821, "comment_id": 76608343, "body": "Just a well meant recommendation: if you ask such a question, I somehow doubt you are fit to write an CPU emulator. Start with a less challenging project, e.g. work through a good C book about modern C (not K&amp;R, not C90 - learn C99, better standard C11). Any textbook will explain the file functions and all other facilities you need."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1498751179, "post_id": 44813821, "comment_id": 76639800, "body": "his question is not, how to write a char array to a file. His question is &#39;can I use a memory array as a file&#39; A totally different question - take a look at <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/&hellip;</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1498751331, "post_id": 44813821, "comment_id": 76639913, "body": "thats fmemopen. see <a href=\"https://stackoverflow.com/questions/5135854/make-a-file-pointer-read-write-to-an-in-memory-location\" title=\"make a file pointer read write to an in memory location\">stackoverflow.com/questions/5135854/&hellip;</a>"}], "owner": {"reputation": 25, "user_id": 8210220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BaYF.jpg?s=128&g=1", "display_name": "ZarWare", "link": "https://stackoverflow.com/users/8210220/zarware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "closed_date": 1498691770, "answer_count": 0, "score": 0, "last_activity_date": 1498690950, "creation_date": 1498690703, "last_edit_date": 1498690950, "question_id": 44813821, "link": "https://stackoverflow.com/questions/44813821/c-perform-file-operations-with-array", "closed_reason": "Duplicate", "title": "C, perform file operations with array", "body": "<p>I want to perform file operations(<em>fread, fwrite... etc</em>) with a array(<em>char*, but if is possible with any type also will be good</em>).</p>\n\n<p>I know that i can do it with sprintf and sscanf, but i no want use these.\nWhy? i are writing a Intel 8080 emulator, and i are writing the RAM, so i will read more that individual chars, read ints and so on.</p>\n\n<p>I want use fread and fwrite because you can give them the size of the elements, with sprintf and sscanf you can use format, but i must write code for every type.</p>\n\n<p>At this moment i don't have any issues, nor much code, i only want know if my question has a answer, else i will see how convert a array of char to other data type...</p>\n\n<p>Resuming, i can use char* as FILE* ?.</p>\n\n<hr>\n\n<p><em>Sorry for my bat English...</em></p>\n"}, {"tags": ["c", "function", "pointers", "function-pointers"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498688515, "post_id": 44813405, "comment_id": 76607568, "body": "use the <code>cdecl</code> program"}, {"owner": {"reputation": 1563, "user_id": 3404040, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JrNTUKgimeo/AAAAAAAAAAI/AAAAAAAAACw/-9QAfnVSUDs/photo.jpg?sz=128", "display_name": "Take_Care_", "link": "https://stackoverflow.com/users/3404040/take-care"}, "edited": false, "score": 0, "creation_date": 1498688810, "post_id": 44813405, "comment_id": 76607662, "body": "use <code>auto</code> from c++11 xD"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1563, "user_id": 3404040, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JrNTUKgimeo/AAAAAAAAAAI/AAAAAAAAACw/-9QAfnVSUDs/photo.jpg?sz=128", "display_name": "Take_Care_", "link": "https://stackoverflow.com/users/3404040/take-care"}, "edited": false, "score": 0, "creation_date": 1498689418, "post_id": 44813405, "comment_id": 76607871, "body": "@Take_Care_: The question is tagged C, not C++! And that is hardly the lesson."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498689449, "post_id": 44813405, "comment_id": 76607883, "body": "We are not a &quot;do my homework&quot; service."}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498690116, "post_id": 44813405, "comment_id": 76608079, "body": "I know you&#39;re not, hence why I&#39;m only posting those that i struggle with. You don&#39;t have to help if you don&#39;t want to. Cheers"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498691736, "post_id": 44813544, "comment_id": 76608483, "body": "Thanks! You&#39;ve helped me a lot! That website is awesome, however I have no idea how did you make it show you the specific proplem output. What should I input for it to solve a problem like this: int TAB[4][6], d=TAB[2]?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498691947, "post_id": 44813544, "comment_id": 76608536, "body": "well, it doesn&#39;t directly in <i>all</i> cases, but if <code>int TAB[4][6]</code> is an <i>array 4 of array 6 of int</i> (use <code>explain int TAB[4][6]</code> as the command), then naturally indexing the first array, the <i>array 4</i>, you get <i>array 6 of int</i> - and arrays decays to pointers to the first element, so that will decay to <i>pointer to int</i>, thus that&#39;s what you want to give to the service: <code>declare d as pointer to int</code>. cdecl is very handy when you need to make sense of complicated declarations or produce them."}, {"owner": {"reputation": 7691, "user_id": 152016, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61e75a9dfee755b5a3d1104d4d3c104a?s=128&d=identicon&r=PG", "display_name": "Niloct", "link": "https://stackoverflow.com/users/152016/niloct"}, "edited": false, "score": 0, "creation_date": 1498692238, "post_id": 44813544, "comment_id": 76608620, "body": "The first appendix from K&amp;R is very useful to learn to interpret precedence in type declarators, I&#39;m having fun reading it :) Nevertheless  +1 for the <code>cdecl</code> tool."}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498692640, "post_id": 44813544, "comment_id": 76608736, "body": "Oh, ok.  Thank you for the thorough explanation! I&#39;ve read the precedence rules few times already but it still get&#39;s very confusing. I think I&#39;ll print it out and just stick to my laptop or something :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498693684, "post_id": 44813544, "comment_id": 76608975, "body": "I strongly disagree. A professional knows which types he needs, so he does the declarations himself. A good C programmer does not write overly complex declarators, but uses intermediate aliases to make the code more readable (and because those <code>typedef</code>ed names are needed anyway). There very rarely (if ever) is need for <code>cdecl</code> once one has understood the C syntax. Said that: <code>cdecl</code> has its uses to work through bad code, e.g. for maintenance work."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498721511, "post_id": 44813544, "comment_id": 76617827, "body": "@Olaf I wouldn&#39;t even try to decipher <code>int (*FF(int k))[3];</code> because I might get it wrong. At first as I glimpsed at it, I thought it was a pointer to a function. One should spend one&#39;s limited brain capacity onto things that matter. If a tool can do the thing for me faster, then I use the tool, and spend my brain capacity for something else. Naturally, I&#39;d personally never use cdecl to write definitions for <i>my</i> code."}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498725154, "post_id": 44813544, "comment_id": 76620150, "body": "@Olaf, ofc this is gibberish but these r stuff I revise before my exam. I can&#39;t imagine having to use cdecl in the future at work for example. I&#39;d rather use declarations I know and imprement it in a clear way."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498735892, "post_id": 44813544, "comment_id": 76627568, "body": "@AnttiHaapala: The more brain capacity you &quot;off-load&quot; to computers, the less brain capacity one has. The brain is more like muscles in that aspect: if degrades if you don&#39;t train it. (there are a lot of studies about that - more modern show the smartphone-effect). Such stuff is a good training. But my point actually was: a good programmer will not use such complex declarator syntax. And don&#39;t worry: we will never exhaust our brain-capacity."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498736172, "post_id": 44813544, "comment_id": 76627809, "body": "@Mike.e87: As I wrote: such tasks are a good training. A lot of stuff you learn at school won&#39;t be used lateron, but it is the meta-knowledge which is trained by such things. If you don&#39;t have such stuff as homework permanemtly, I&#39;d recommend to read about the &quot;spiral rule&quot; and figure out yourself. Only if you want to really lean, of course. It will eventually pop up once in a time in your job and you don&#39;t always have cdecl available."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 4, "last_activity_date": 1498692218, "last_edit_date": 1498692218, "creation_date": 1498689017, "answer_id": 44813544, "question_id": 44813405, "link": "https://stackoverflow.com/questions/44813405/assign-appropriate-variables-so-that-these-declarations-are-correct/44813544#44813544", "title": "Assign appropriate variables so that these declarations are correct", "body": "<p>Here I show how you solve these annoying declaration puzzles like a professional: <strong>cheat</strong>. Use the <code>cdecl</code> program, which can be found as a <a href=\"https://cdecl.org/\" rel=\"nofollow noreferrer\">service</a> too. </p>\n\n<p>For example:</p>\n\n<pre><code>cdecl&gt; explain double T[][2];\ndeclare T as array of array 2 of double\n</code></pre>\n\n<p>Thus, the declaration <code>double T[][2];</code> declares <code>T</code> as <em>array of array 2 of double</em>. If you use <code>&amp;</code> to take an <em>address of something</em>, the type of that address is <em>pointer to something</em>. Thus since the value of <code>&amp;T</code> is assigned to <code>a</code>, <code>a</code> should be declared as a <strong><em>pointer to</strong> array of array 2 of double</em>:</p>\n\n<pre><code>cdecl&gt; declare a as pointer to array of array 2 of double;\ndouble (*a)[][2]\n</code></pre>\n\n<hr>\n\n<p>Likewise for <code>FF</code>:</p>\n\n<pre><code>cdecl&gt; explain int (*FF(int))[3];\ndeclare FF as function (int) returning pointer to array 3 of int\n</code></pre>\n\n<p>so <code>FF</code> is a function. Now, to have a <em>variable</em> where it could be assigned. The name of a function decays to a <em>pointer</em> to the function - so here we need to use a <em>pointer</em> to function:</p>\n\n<pre><code>cdecl&gt; declare b as pointer to function (int) returning pointer to array 3 of int\nint (*(*b)(int ))[3]\n</code></pre>\n\n<hr>\n\n<p>For <code>c</code>, since <code>FF</code> is a <em>function (int) returing pointer to array 3 of int</em>, if you call <code>FF</code> with an <code>int</code> (9)  as the argument, it returns a <em>pointer to array 3 of int</em>:</p>\n\n<pre><code>cdecl&gt; declare c as pointer to array 3 of int\nint (*c)[3]\n</code></pre>\n\n<p>And for <code>e</code> we dereference the pointer with the indexing operator, so we get an lvalue of type <em>array of 3 int</em>. One <em>cannot</em> assign arrays to variables, but array lvalues decay into pointers to the <em>first</em> element, so an <em>array of 3 int</em> decays into a <em>pointer to int</em>. Well, you know for sure how to declare a pointer to int, but I am lazy and want to do no mistake, so I just paste stuff into <code>cdecl</code>:</p>\n\n<pre><code>cdecl&gt; declare e as pointer to int;\nint *e;\n</code></pre>\n\n<hr>\n\n<p>Thus finally we get:</p>\n\n<pre><code>int TAB[4][6];\nint (*FF(int k))[3];\nchar *NAP[]={\"nap1\", \"nap2\", \"nap3\"};\ndouble T[][2]={{1.0,1.0},{0.},{2.0,3.0}};\n\nint main(void) {\n    double (*a)[][2];\n    int (*(*b)(int ))[3];\n    int (*c)[3];\n    int *d;\n    int *e;\n    char *f;\n    char g;\n\n    a = &amp;T;\n    b = FF;\n    c = FF(9);\n    d = TAB[2];\n    e = FF(9)[1];\n    f = *NAP+1;\n    g = *NAP[1]++;\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1498713737, "accepted_answer_id": 44813544, "answer_count": 1, "score": 4, "last_activity_date": 1498692218, "creation_date": 1498688159, "last_edit_date": 1498688833, "question_id": 44813405, "link": "https://stackoverflow.com/questions/44813405/assign-appropriate-variables-so-that-these-declarations-are-correct", "closed_reason": "Needs more focus", "title": "Assign appropriate variables so that these declarations are correct", "body": "<p>I was given a following code:</p>\n\n<pre><code>int TAB[4][6];\nint (*FF(int k))[3];\nchar *NAP[]={\"nap1\", \"nap2\", \"nap3\"};\ndouble T[][2]={{1.0,1.0},{0.},{2.0,3.0}};\n</code></pre>\n\n<p>and I'm supposed to make these declarations correct (so that they don't return any errors in a compiler):</p>\n\n<pre><code>a = &amp;T;\nb = FF;\nc = FF(9);\nd = TAB[2];\ne = FF(9)[1];\nf = *NAP+1;\ng = *NAP[1]++;\n</code></pre>\n\n<p>I only managed to do few. My compiler (xCode) didn't return any errors for these, but I have no idea how to declare the remaining 3...</p>\n\n<p>What I managed to do:</p>\n\n<pre><code>1.int (*c)[3]= FF(9); \n2.int *d = TAB[2];\n3.char *f = *NAP+1;\n4.char g = *NAP[1]++;\n</code></pre>\n\n<ol>\n<li>The <code>FF</code> function returns a pointer to a 3-element array, so we need a pointer to 3-element array?</li>\n<li>Since <code>TAB[2]</code> is a second subarray then just a pointer is enough ?</li>\n<li><code>*NAP+1</code> is pointing to the address of the <code>\"a\"</code> character of the first word in the array <code>NAP</code> so we need a pointer to store that address?</li>\n<li>This time <code>*NAP[1]++</code> is actually pointing to a value so just a variable will do the job?</li>\n</ol>\n"}, {"tags": ["c", "static-libraries", "static-linking", "linkage", "relocation"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 1, "creation_date": 1498696515, "post_id": 44813349, "comment_id": 76609642, "body": "Have you tried removing the indirect (<code>*</code>) from the <code>jmp</code> instruction? That should make a relative jump instead, which looks like what you want."}], "answers": [{"comments": [{"owner": {"reputation": 6631, "user_id": 1488533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e063fcfd88a6af736427025f7ac14649?s=128&d=identicon&r=PG&f=1", "display_name": "lllllllllllll", "link": "https://stackoverflow.com/users/1488533/lllllllllllll"}, "edited": false, "score": 0, "creation_date": 1498693142, "post_id": 44813545, "comment_id": 76608842, "body": "Well mostly I think it is due to the <code>label</code>. The reason is that when I comment out <code>&quot;jmp    *S_401a70\\n\\t&quot;</code>, the building process becomes correct."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 1, "last_activity_date": 1498689035, "creation_date": 1498689035, "answer_id": 44813545, "question_id": 44813349, "link": "https://stackoverflow.com/questions/44813349/relocation-r-x86-64-32s-against-text-can-not-be-used-when-making-a-shared-obj/44813545#44813545", "title": "relocation R_X86_64_32S against `.text&#39; can not be used when making a shared object", "body": "<p>It is not a tool issue. First of all <code>-fPIC</code> affects only C code. And affects it in such way that generated code won't contain absolute addresses of referred data/code and won't rely on its own address in memory (it is a somewhat simplified explanation). Next - it has nothing to do with assembly inlines. Since here code was generated by programmer. And if it is written in a way that introduces absolute addresses or some stuff that introduces dependency on its memory location - compiler can't help with it.</p>\n\n<p>P.S. You may built static library even with position-dependent code but it won't be accepted by linker if someone will try to link it into shared library, since resulting shared library should be position-independent. </p>\n"}], "owner": {"reputation": 6631, "user_id": 1488533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e063fcfd88a6af736427025f7ac14649?s=128&d=identicon&r=PG&f=1", "display_name": "lllllllllllll", "link": "https://stackoverflow.com/users/1488533/lllllllllllll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498689035, "creation_date": 1498687841, "question_id": 44813349, "link": "https://stackoverflow.com/questions/44813349/relocation-r-x86-64-32s-against-text-can-not-be-used-when-making-a-shared-obj", "title": "relocation R_X86_64_32S against `.text&#39; can not be used when making a shared object", "body": "<p>I am compiling a static library, which leverages some inline assembly code.</p>\n\n<p>I notice that when I use labels for the <code>jmp</code> instruction:</p>\n\n<pre><code>int foo(){\n\n asm volatile\n (\n    \"mov    0x60(%r8),%r11d\\n\\t\"\n    \"jmp    *S_401a70\\n\\t\"\n    ...\n    \"S_401a70: xor %rax, %rax\\n\\t\"\n    ...\n )\n}\n</code></pre>\n\n<p>and compile the code into a static library with the following flags:</p>\n\n<pre><code>-Wl,--no-undefined -nostdlib -nodefaultlibs -nostartfiles -L$(SOME_LIBRARY_PATH) \\\n-Wl,--whole-archive -l$(SOME_Library_Name) -Wl,--no-whole-archive \\\n-Wl,-Bstatic -Wl,-Bsymbolic -Wl,--no-undefined \\\n-Wl,-pie,-eenclave_entry -Wl,--export-dynamic  \\\n-Wl,--defsym,__ImageBase=0 \n</code></pre>\n\n<p>I would get some errors like:</p>\n\n<pre><code>/usr/bin/ld: Enclave/libtest.o: relocation R_X86_64_32S against `.text' can not be used when making a shared object; recompile with -fPIC\n</code></pre>\n\n<p>However, since I am compiling into a static library, I don't think <code>-fPIC</code> would make sense. I tried so, but it doesn't work at all.</p>\n\n<p>This seems like an issue with the <code>gcc assembly extension</code>, but I am not sure. Could anyone shed some lights on this? Thank you!</p>\n"}, {"tags": ["c", "atoi"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1498684627, "post_id": 44812661, "comment_id": 76605955, "body": "You&#39;re using the <b>pow</b> function. Don&#39;t. Instead multiply the multiplier by 10..."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498684840, "post_id": 44812661, "comment_id": 76606064, "body": "I.e. <code>pow(10, 2)</code> rounds to 99 on your platform (a particular bad <code>pow</code> implementation)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1498685019, "post_id": 44812661, "comment_id": 76606150, "body": "Also, you&#39;re not allowed to define your own function by name <i><code>atoi</code></i> as it clashes with the standard library function - you <i>must</i> name it something else. Also, return the value, with <code>return count;</code>, do not store it into a global variable."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498685176, "post_id": 44812661, "comment_id": 76606239, "body": "Also, your algorithm doesn&#39;t work properly recursively, as <code>power</code> is static state... - your second <code>atoi</code> invocation is going to fail"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498686896, "post_id": 44812661, "comment_id": 76606960, "body": "Side note: Consider <code>if(*next != &#39;\\0&#39; &amp;&amp; next != NULL){</code> and the <i>second</i> test of <code>next != NULL</code>.  If <code>next was </code>NULL<code>, the prior </code>*next` likely would have caused trouble like killed the program.  IOWs, the test was too late."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498688808, "post_id": 44812661, "comment_id": 76607661, "body": "@AnttiHaapala - it&#39;s common practice to shadow standard library functions with optimized implementations... <code>malloc</code> is the perfect example (<code>atoi</code> is a poor example). It might not be a smart idea, but it&#39;s allowed (or should be allowed) and mostly supported by using <code>weak</code> symbols in the standard library."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1498689482, "post_id": 44812661, "comment_id": 76607896, "body": "@Myst this is specifically listed as undefined behaviour in C standard. Naturally if you replaced it with a completely compatible implementation, then it could just work. Here - not even, because the <code>atoi</code> is clearly not even compatible with the existing one."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498690585, "post_id": 44812661, "comment_id": 76608196, "body": "@AnttiHaapala I wasn&#39;t aware that this is &quot;Undefined Behavior&quot;. My memory must be playing tricks on me lately. I&#39;ll look it up. And yes, OP&#39;s <code>atoi</code> doesn&#39;t even return an <code>int</code> - it&#39;s all <code>a</code> no <code>i</code>, so it will probably break any standard function (such as <code>printf</code> that uses <code>atoi</code> internally... :-)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1498691727, "post_id": 44812661, "comment_id": 76608472, "body": "@Myst &quot;All identifiers with external linkage in any of the following subclauses are reserved for use as identifiers with external linkage if any of them are used by the program. None of them are reserved if none of them are used.&quot; and J.2. says &quot;The program declares or defines a reserved identifier, other than as allowed by [7.1.3 or 7.1.4]&quot;"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498692915, "post_id": 44812661, "comment_id": 76608796, "body": "@AnttiHaapala thanks!"}], "owner": {"reputation": 1, "user_id": 8228448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa1f8f6f27f18d2fc4538148b819695?s=128&d=identicon&r=PG&f=1", "display_name": "Rebec", "link": "https://stackoverflow.com/users/8228448/rebec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "closed_date": 1498685166, "answer_count": 0, "score": 0, "last_activity_date": 1498684558, "creation_date": 1498684558, "question_id": 44812661, "link": "https://stackoverflow.com/questions/44812661/recursive-implementation-of-atoi", "closed_reason": "Duplicate", "title": "recursive implementation of atoi", "body": "<p>I'm trying to implement atoi function in C. However, whenever i use a test string \"856\" the resulting int will be 855. I tried many test cases but the outcome will be the same (e.g \"4756\"->4755). Below code is my incorrect solution.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\nint count = 0;\nvoid atoi(char * str){\n    static int power = 0;\n    char * next = str;\n    next++;\n    if(*next != '\\0' &amp;&amp; next != NULL){\n        atoi(next);\n        power++;\n        //printf(\"%f\\n\",((*str) - '0') * pow(10, power)); \n        count += ((*str) - '0') * pow(10, power);\n    }\n    else{\n        //printf(\"%f\\n\",((*str) - '0') * pow(10, power));\n        count += ((*str) - '0') * pow(10, power);\n    }\n}\nint main(){\n    char * string = (char *)malloc(sizeof(char)*3);\n    string = \"457\";\n    atoi(string);\n    printf(\"%d\",count);\n}\n</code></pre>\n\n<p>Could you please check why did this happen? </p>\n"}, {"tags": ["c", "gcc", "time", "glibc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498683913, "post_id": 44812472, "comment_id": 76605665, "body": "In your env, is <code>_POSIX_TIMERS</code> defined in <code>&lt;unistd.h&gt;</code>?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1498683955, "post_id": 44812472, "comment_id": 76605680, "body": "probably time.h should be included after unistd"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1498683962, "post_id": 44812472, "comment_id": 76605684, "body": "Try adding <code>-lrt</code> to the <i>end</i> of the command line."}, {"owner": {"reputation": 924, "user_id": 2873201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZTyhS.jpg?s=128&g=1", "display_name": "sqr163", "link": "https://stackoverflow.com/users/2873201/sqr163"}, "edited": false, "score": 0, "creation_date": 1498684215, "post_id": 44812472, "comment_id": 76605797, "body": "Try pass <code>--verbose</code> to the linker. Did you consider using <code>gcc</code> instead of <code>cc</code> directly?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498684289, "post_id": 44812472, "comment_id": 76605831, "body": "I believe @EugeneSh. got it, <a href=\"https://stackoverflow.com/a/43052080/2173917\">see this</a>."}, {"owner": {"reputation": 6669, "user_id": 486504, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XWsKp.png?s=128&g=1", "display_name": "user", "link": "https://stackoverflow.com/users/486504/user"}, "reply_to_user": {"reputation": 924, "user_id": 2873201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZTyhS.jpg?s=128&g=1", "display_name": "sqr163", "link": "https://stackoverflow.com/users/2873201/sqr163"}, "edited": false, "score": 0, "creation_date": 1498684306, "post_id": 44812472, "comment_id": 76605835, "body": "@sqrt163 I did, and it didn&#39;t seem to make any difference. However, if I run the preprocessor manually, <i>then</i> feed <i>that</i> output to <code>cc -o time -Wall -std=c11 -lrt time-prep.c</code>, <b>which is the same as I did before</b>, now it works!"}], "answers": [{"comments": [{"owner": {"reputation": 6669, "user_id": 486504, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XWsKp.png?s=128&g=1", "display_name": "user", "link": "https://stackoverflow.com/users/486504/user"}, "edited": false, "score": 0, "creation_date": 1498684859, "post_id": 44812655, "comment_id": 76606076, "body": "<i>Thank you!</i> This did the trick. I&#39;ll want to consider the effects of it a bit, but at least this solved the immediate issue. It also works in the real code; or at least, adding it cleared up a bundle of errors relating to the newly added timing code, leaving only what looks like legitimate errors (some of which are expected, since I&#39;ve changed a few method signatures in the process)."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1498684511, "creation_date": 1498684511, "answer_id": 44812655, "question_id": 44812472, "link": "https://stackoverflow.com/questions/44812472/why-does-gcc-claim-clock-gettime-implicitly-declared-but-the-preprocessor-is/44812655#44812655", "title": "Why does GCC claim clock_gettime() implicitly declared, but the preprocessor is perfectly happy with a related macro?", "body": "<p>The Linux documentation for <code>clock_gettime()</code> specifies a feature-test requirement:</p>\n\n<pre><code>_POSIX_C_SOURCE &gt;= 199309L\n</code></pre>\n\n<p>You could consider fulfilling that directly, perhaps via a <code>#define</code> directive at the very beginning of your code, since the code in fact does depend on it.</p>\n\n<p>If you do not provide such a <code>#define</code>, then <code>gcc</code> may nevertheless do it for you, depending on the options you specify to it.  By default, it will do.  Likewise with <code>-std=gnu99</code> or <code>-std=gnu11</code>.  But you attempted to compile with <code>-std=c11</code>, which asks for strict(ish) compliance with C11.  C11 does not define the needed POSIX feature-test macro.</p>\n"}, {"tags": [], "owner": {"reputation": 445, "user_id": 7104681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ZtMiO.jpg?s=128&g=1", "display_name": "Dennis V.R.", "link": "https://stackoverflow.com/users/7104681/dennis-v-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1541149546, "creation_date": 1541149546, "answer_id": 53115537, "question_id": 44812472, "link": "https://stackoverflow.com/questions/44812472/why-does-gcc-claim-clock-gettime-implicitly-declared-but-the-preprocessor-is/53115537#53115537", "title": "Why does GCC claim clock_gettime() implicitly declared, but the preprocessor is perfectly happy with a related macro?", "body": "<p>You can define _GNU_SOURCE <strong>above</strong> any #include. There is an example:</p>\n\n<p>$cat ./main.c</p>\n\n<pre><code>// Need for clock_gettime()\n// Have to be at the begining of the file\n#define _GNU_SOURCE\n\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 6669, "user_id": 486504, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/XWsKp.png?s=128&g=1", "display_name": "user", "link": "https://stackoverflow.com/users/486504/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1514, "favorite_count": 0, "accepted_answer_id": 44812655, "answer_count": 2, "score": 3, "last_activity_date": 1541149546, "creation_date": 1498683663, "question_id": 44812472, "link": "https://stackoverflow.com/questions/44812472/why-does-gcc-claim-clock-gettime-implicitly-declared-but-the-preprocessor-is", "title": "Why does GCC claim clock_gettime() implicitly declared, but the preprocessor is perfectly happy with a related macro?", "body": "<p>I'm trying to measure the amount of time an operation is taking, as accurately as possible. My research led me to believe that <code>clock_gettime()</code> and friends is what I want.</p>\n\n<p>However, I can't for the life of me get it to work. Consider this seemingly trivial example:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n    struct timespec t;\n    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &amp;t);\n    return 0;\n}\n</code></pre>\n\n<p>If I run that through the preprocessor, everything looks like it's just fine:</p>\n\n<pre><code>$ cpp time.c | tail -n10\n# 1163 \"/usr/include/unistd.h\" 3 4\n\n# 3 \"time.c\" 2\n\nint main(void)\n{\n struct timespec t;\n clock_gettime(2, &amp;t);\n return 0;\n}\n</code></pre>\n\n<p>However, if I try to compile the preprocessed code, it won't:</p>\n\n<pre><code>$ cpp time.c &gt; time-prep.c\n$ cc -o time -Wall -std=c11 -lrt time-prep.c\n/tmp/user/1000/cc00SdhB.o: In function `main':\ntime-prep.c:(.text+0x15): undefined reference to `clock_gettime'\ncollect2: error: ld returned 1 exit status\n$ \n</code></pre>\n\n<p>If I try to compile the original, it doesn't go any better:</p>\n\n<pre><code>$ cc -o time -Wall -std=c11 -lrt time.c\ntime.c: In function \u2018main\u2019:\ntime.c:6:18: error: storage size of \u2018t\u2019 isn\u2019t known\ntime.c:7:2: warning: implicit declaration of function \u2018clock_gettime\u2019 [-Wimplicit-function-declaration]\ntime.c:7:16: error: \u2018CLOCK_PROCESS_CPUTIME_ID\u2019 undeclared (first use in this function)\ntime.c:7:16: note: each undeclared identifier is reported only once for each function it appears in\ntime.c:6:18: warning: unused variable \u2018t\u2019 [-Wunused-variable]\n$ \n</code></pre>\n\n<p>The man page for clock_gettime says that I need to</p>\n\n<blockquote>\n  <p>Link with <code>-lrt</code> (only for glibc versions before 2.17).</p>\n</blockquote>\n\n<p>but as you can see, I'm already doing that. Adding or removing <code>-lrt</code> to <code>cc</code> doesn't seem to make any difference whatsoever in my case.</p>\n\n<p>I have looked at <code>/usr/include/time.h</code> but don't see anything obvious that I am missing.</p>\n\n<p><strong>What (presumably trivial) incantation is missing for me to be able to use clock_gettime() in my code?</strong></p>\n"}, {"tags": ["c", "string", "file", "uppercase", "fseek"], "comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 4, "creation_date": 1498684080, "post_id": 44812443, "comment_id": 76605738, "body": "<code>if(zeichen == &#39; &#39;)</code> &lt;= you only write something different, if the character is a space. Otherwise you simply rewrite the original character. And might I introduce you to the wonderful <a href=\"http://www.cplusplus.com/reference/cctype/toupper/\" rel=\"nofollow noreferrer\"><code>toupper()</code></a>?"}, {"owner": {"reputation": 104, "user_id": 8019577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4da31819046615d4507dbe07bcaa475?s=128&d=identicon&r=PG&f=1", "display_name": "Manu W.", "link": "https://stackoverflow.com/users/8019577/manu-w"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1498684429, "post_id": 44812443, "comment_id": 76605884, "body": "My intention was to check if the char is space, if yes, go one char forward and print it at the same place as a capital letter."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498684553, "post_id": 44812443, "comment_id": 76605927, "body": "It&#39;s not obvious you need the <code>else { fputc(zeichen, fp);</code> }` clause."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498684573, "post_id": 44812443, "comment_id": 76605933, "body": "Look at <code>if(zeichen == &#39; &#39;){             fseek(fp, 1L, SEEK_CUR);             if((&#39;a&#39; &lt;= zeichen) &amp;&amp; (zeichen &lt;= &#39;z&#39;)){</code>   ,  <code>zeichen</code> does not change after the first <code>if()</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1498684818, "post_id": 44812443, "comment_id": 76606050, "body": "in general this is an odd ting to do on text files (read and write), normally the file is read and a new one is written making changes as you go along (as you seem to try to do with your else clause). And then rename the new file to the old file. Also note that yr code is wrong as dhke points out, you only look at chars if they are &#39; &#39;"}, {"owner": {"reputation": 104, "user_id": 8019577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4da31819046615d4507dbe07bcaa475?s=128&d=identicon&r=PG&f=1", "display_name": "Manu W.", "link": "https://stackoverflow.com/users/8019577/manu-w"}, "edited": false, "score": 0, "creation_date": 1498742231, "post_id": 44812443, "comment_id": 76632715, "body": "Thank you, I used toupper() now, didn&#39;t know about this before. I think i need else { fputc(zeichen, fp); } because with this i will write all lowercase letters. I tried it with two files and it works, thank you for that hint."}, {"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "edited": false, "score": 0, "creation_date": 1498811721, "post_id": 44812443, "comment_id": 76664331, "body": "@ManuW., if you feel that any of answers solved your issue, don&#39;t forget to mark it as accepted to help future users finding the best solution to the same problem."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498686541, "post_id": 44812790, "comment_id": 76606814, "body": "Trivia: If <code>ch</code> is a  letter <code>A-Z,a-z</code>, <code>ch ^= &#39;A&#39; ^ &#39;a&#39;;</code> will change the case in <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">ASCII</a>, <a href=\"https://en.wikipedia.org/wiki/EBCDIC\" rel=\"nofollow noreferrer\">EBCDIC</a> and most unicorn encodings. which have a consistent bit difference between the case of letters."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1498685818, "last_edit_date": 1498685818, "creation_date": 1498685117, "answer_id": 44812790, "question_id": 44812443, "link": "https://stackoverflow.com/questions/44812443/c-change-words-beginning-with-lowercase-to-capital-in-text-file/44812790#44812790", "title": "C change words beginning with lowercase to capital in text file", "body": "<p>Let us say a <em>word</em> begins with a letter after a space (or white-space) or at file beginning.</p>\n\n<p>Look for the pattern <code>&lt;space&gt;&lt;lowercase&gt;</code></p>\n\n<p>Seeking relative to <code>SEEK_CUR</code> should be avoided for text files.</p>\n\n<pre><code>bool previous_space = true;\nlong offset = ftell(fp);  // remember where we are\nwhile(offset != -1 &amp;&amp; (zeichen = fgetc(fp)) != EOF) {\n  if (previous_space &amp;&amp; islower(zeichen)) {\n    fseek(fp, offset, SEEK_SET); \n    fputc(toupper(zeichen), fp);\n  }\n  previous_space = isspace(zeichen);\n  offset = ftell(fp);\n}\n</code></pre>\n\n<hr>\n\n<p>OP's code had trouble as <code>fseek()</code> was not needed and <code>('a' &lt;= zeichen) &amp;&amp; (zeichen &lt;= 'z')</code> is always false (in ASCII) as <code>' '</code> is not between <code>'a'</code> and <code>'z'</code>.</p>\n\n<pre><code>    if(zeichen == ' '){\n        fseek(fp, 1L, SEEK_CUR);\n        if(('a' &lt;= zeichen) &amp;&amp; (zeichen &lt;= 'z')){\n            zeichen = fgetc(fp);\n            fputc(toupper(zeichen), fp);\n        }\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498686098, "post_id": 44812916, "comment_id": 76606630, "body": "Will not <code>fgets(buffer[count], LEN, fp)</code> split words like &quot;hijk&quot; in &quot;abcd efg hijk\\n&quot;`."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498686169, "post_id": 44812916, "comment_id": 76606659, "body": "But OP said that the file contains words @chux. Except if the case is that the file contains text and he means every single word in general. In that case yes, and your answer should be followed (I am out of votes). :/"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1498685661, "creation_date": 1498685661, "answer_id": 44812916, "question_id": 44812443, "link": "https://stackoverflow.com/questions/44812443/c-change-words-beginning-with-lowercase-to-capital-in-text-file/44812916#44812916", "title": "C change words beginning with lowercase to capital in text file", "body": "<p>Your code is a bit of an overkill, let alone some things I am not that smart to understand (for example why you are checking for the space character, why the condition of checking for a lowercase is <code>('a' &lt;= zeichen) &amp;&amp; (zeichen &lt;= 'z')</code> and not <code>'a' &gt;= ...</code>). Moreover the non-universal language makes it tough for me. Some of them are already explained in the comments, so I will try to explain what I would do. </p>\n\n<p>I wouldn't try to <code>fseek()</code> all the time, I would read the file once and then write the data once again. Here is my algorithm:</p>\n\n<ol>\n<li>Read file line by line.</li>\n<li>Store every word in a 2D array.</li>\n<li>Check if a word starts with a lowercase, and if so swap that\nlowercase letter with an uppercase one.</li>\n<li>Now the array holds all the data I need to write to the file.</li>\n<li>Set the file pointer to the start of the file.</li>\n<li>Iterate over the stored words in the array and write them to file.</li>\n</ol>\n\n<hr>\n\n<p>Here is my implementation:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n#define MAX 5   // max number of words to be read\n#define LEN 10  // max lenght of a word allowed\n\nint main(void)\n{\n    FILE* fp = fopen(\"test.txt\", \"r+\");\n    char buffer[MAX][LEN]; // read up to 5 words, of at most 10 characters\n    if (fp == NULL)\n        exit(EXIT_FAILURE);\n    int count = 0;\n    while(count &lt; MAX &amp;&amp; fgets(buffer[count], LEN, fp)) {\n        if(buffer[count][strlen(buffer[count]) - 1] == '\\n') buffer[count][strl$\n        //printf(\"%s\\n\", buffer[count]);\n        if(islower(buffer[count][0]))\n            buffer[count][0] = (char)toupper(buffer[count][0]);\n        //printf(\"%s\\n\", buffer[count]);\n        count++;\n    }\n\n    fseek(fp, 0, SEEK_SET);\n    for(int i = 0; i &lt; count; ++i)\n        fprintf(fp, \"%s\\n\", buffer[i]);\n\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>which will overwrite the contents of this file:</p>\n\n<pre><code>Manu\nSamaras\nsmall\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>Manu\nSamaras\nSmall\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 2565246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad97245affee1d5f38a619b853d8f45?s=128&d=identicon&r=PG", "display_name": "n3wb", "link": "https://stackoverflow.com/users/2565246/n3wb"}, "is_accepted": true, "score": 1, "last_activity_date": 1498688869, "creation_date": 1498688869, "answer_id": 44813509, "question_id": 44812443, "link": "https://stackoverflow.com/questions/44812443/c-change-words-beginning-with-lowercase-to-capital-in-text-file/44813509#44813509", "title": "C change words beginning with lowercase to capital in text file", "body": "<pre><code>FILE *fp;\nint zeichen;\n\nfp = fopen(\"test.txt\", \"r+\");\n\nif (fp == NULL) {\n    printf(\"Die Datei konnte nicht geoeffnet werden.\\n\");\n    exit(EXIT_FAILURE);\n}\n\n// upper first charcter\nzeichen = getc(fp);\nif (zeichen != EOF) putchar(toupper(zeichen));\n\n// scan rest of chars\nwhile ((zeichen = getc(fp)) != EOF) {\n    putchar(zeichen);\n    if (zeichen == ' ' &amp;&amp; zeichen != EOF) {\n        char c_upper = getc(fp);\n        putchar(toupper(c_upper));\n    }\n}\nfclose(fp);\nreturn 0;\n</code></pre>\n\n<p>you can use std out redirection ./main > output.txt</p>\n"}, {"tags": [], "owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "is_accepted": false, "score": 0, "last_activity_date": 1498690881, "last_edit_date": 1498690881, "creation_date": 1498689792, "answer_id": 44813672, "question_id": 44812443, "link": "https://stackoverflow.com/questions/44812443/c-change-words-beginning-with-lowercase-to-capital-in-text-file/44813672#44813672", "title": "C change words beginning with lowercase to capital in text file", "body": "<p>Apart from that focusing on words you can achieve more secure results, if your file contains only space separated words, you can rely on first letter after space character.</p>\n\n<p>You tried to use the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fseek.html\" rel=\"nofollow noreferrer\"><code>fseek</code></a> which is not not bad at all but I would use it differently:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint main() {\n    FILE* fp;\n    int zeichen;\n\n    fp = fopen(\"test.txt\", \"r+\");\n    if(fp == NULL) {\n        printf(\"Die Datei konnte nicht geoeffnet werden.\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    while((zeichen = fgetc(fp)) != EOF) {\n        if(zeichen == ' ') {\n            zeichen = fgetc(fp);\n            fseek(fp, -1, SEEK_CUR);\n            fputc(toupper(zeichen), fp);\n        }\n    }\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>Stepping back after reading the first letter next to a space is important, because <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fgetc.html\" rel=\"nofollow noreferrer\"><code>fgetc</code></a> (and <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fputc.html\" rel=\"nofollow noreferrer\"><code>fputc</code></a> too) autmatically step the cursor forward after reading. So, to rewrite the current letter to its upper case counterpart, you have to step back the cursor.</p>\n\n<p>The shortcomings of my example are that it won't change the first letter of the first word in a file and it's important to the file should not end with a space but with a word.</p>\n"}], "owner": {"reputation": 104, "user_id": 8019577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4da31819046615d4507dbe07bcaa475?s=128&d=identicon&r=PG&f=1", "display_name": "Manu W.", "link": "https://stackoverflow.com/users/8019577/manu-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 44813509, "answer_count": 4, "score": 0, "last_activity_date": 1499149402, "creation_date": 1498683509, "last_edit_date": 1499149402, "question_id": 44812443, "link": "https://stackoverflow.com/questions/44812443/c-change-words-beginning-with-lowercase-to-capital-in-text-file", "title": "C change words beginning with lowercase to capital in text file", "body": "<p>Well I try to read a file and change every word that's beginning with a lowercase to the same word beginning with an uppercase.</p>\n\n<p>This is what i got:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\nFILE *fp;\nint zeichen;\n\nfp = fopen(\"test.txt\", \"r+\");\n\nif(fp == NULL){\n    printf(\"Die Datei konnte nicht geoeffnet werden.\\n\");\n}\nelse{\n    fseek(fp, 0L, SEEK_SET);\n    zeichen = fgetc(fp);\n    while(zeichen != EOF){\n        if(zeichen == ' '){\n            fseek(fp, 1L, SEEK_CUR);\n            if(('a' &lt;= zeichen) &amp;&amp; (zeichen &lt;= 'z')){\n                zeichen = fgetc(fp);\n                fputc(toupper(zeichen), fp);\n            }\n        }\n        zeichen = fgetc(fp);\n    }\n    zeichen = fgetc(fp);\n    fclose(fp);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>My test.txt file does not change at all.</p>\n\n<p>Any suggestions what i am doing wrong?</p>\n\n<p>EDIT:</p>\n\n<p>Thank you for the different ways to achieve my task.</p>\n\n<p>Most of them where using stuff i didn't learn yet, so i tried it by copying the characters from one file to another + making the first letter of each word an uppercase by toupper() cause it's indeed easy to use. Then deleting the old file + rename the new one.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n    FILE *fp, *neu;\n    int zeichen;\n\n    fp = fopen(\"test.txt\", \"r\");\n    neu = fopen(\"new.txt\", \"w\");\n\n    if(fp == NULL) {\n        printf(\"Die Datei konnte nicht geoeffnet werden.\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    while((zeichen = fgetc(fp)) != EOF) {\n        if(zeichen == ' ') {\n            fputc(zeichen, neu);\n            zeichen = fgetc(fp);\n            zeichen = toupper(zeichen);\n            fputc(zeichen, neu);\n        }\n        else{\n            fputc(zeichen, neu);\n        }\n    }\n    fclose(fp);\n    fclose(neu);\n    remove(\"test.txt\");\n    rename(\"new.txt\", \"test.txt\");\n    printf(\"File has been changed.\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "recursion", "tree", "nodes"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1498683238, "post_id": 44812325, "comment_id": 76605316, "body": "<code>if(!root-&gt;left){</code> means if it is a <code>NULL</code> pointer, so you are only calling the function with <code>NULL</code> pointer and dereference it at the begin."}, {"owner": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1498683378, "post_id": 44812325, "comment_id": 76605398, "body": "@mch oh, yeap! That fixed it. Confused myself there. Thanks!"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1498683418, "post_id": 44812325, "comment_id": 76605427, "body": "The <code>else</code> would seem counterproductive if your task is to visit all nodes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498684710, "post_id": 44812325, "comment_id": 76605992, "body": "I much prefer <code>if (root-&gt;left == NULL)</code> and <code>if (root-&gt;left != NULL)</code> because people don&#39;t make mistakes when written out in full."}, {"owner": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498684919, "post_id": 44812325, "comment_id": 76606105, "body": "@JonathanLeffler Yea, i tried to get fancy instead of keeping it simple and readable. Lessons learned! That being said, if you look at my comments for Vlad&#39;s answer, for some reason equating <code>root</code> to <code>null</code> or <code>NULL</code> didnt compile, so im not sure what else i would do or why it happened."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "edited": false, "score": 0, "creation_date": 1498684032, "post_id": 44812466, "comment_id": 76605710, "body": "I just tried it and it crashed, but it did compile."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "edited": false, "score": 0, "creation_date": 1498684135, "post_id": 44812466, "comment_id": 76605762, "body": "@dorojevets The reason can be that the nodes are incorrectly added to the tree or the tree is too big."}, {"owner": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "edited": false, "score": 0, "creation_date": 1498684257, "post_id": 44812466, "comment_id": 76605814, "body": "I tried the second version and got this: &quot;error: use of undeclared identifier &quot;NULL&quot; <code>return root == NULL ? 0</code>&quot;. I also tried <code>null</code> but still didnt work. Am i missing something??"}, {"owner": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "edited": false, "score": 0, "creation_date": 1498684666, "post_id": 44812466, "comment_id": 76605969, "body": "Changing it from <code>root == NULL</code> to <code>!root</code> worked. Not sure why <code>NULL</code> or <code>null</code> didnt compile though."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "edited": false, "score": 0, "creation_date": 1498684859, "post_id": 44812466, "comment_id": 76606075, "body": "@dorojevets: If you run into problems with NULL not being defined, it means you didn&#39;t include a header that defined NULL.  The standard headers that do define it are <code>&lt;stddef.h&gt;</code>, <code>&lt;stdio.h&gt;</code>, <code>&lt;stdlib.h&gt;</code>, <code>&lt;string.h&gt;</code>, <code>&lt;time.h&gt;</code> and <code>&lt;wchar.h&gt;</code> \u2014 it might also be defined by a few others.  Any one of those will do, but <code>&lt;stddef.h&gt;</code> is the smallest."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1498685039, "last_edit_date": 1498685039, "creation_date": 1498683630, "answer_id": 44812466, "question_id": 44812325, "link": "https://stackoverflow.com/questions/44812325/tree-recursion-compiles-but-crashes-on-execution/44812466#44812466", "title": "Tree recursion compiles, but crashes on execution", "body": "<p>For starters the structure in C has to be declared like</p>\n\n<pre><code>struct node\n{\n    int value;\n    struct node *left;\n    struct node *right;\n};\n</code></pre>\n\n<p>The condition in this if statement</p>\n\n<pre><code>if(!root-&gt;left){\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>if( root-&gt;left == NULL ){\n</code></pre>\n\n<p>So the function is recursively called for the left and right nodes when they are equal to NULL. However inside the function there is no check that <code>root</code> is equal to <code>NULL</code>. So the function has undefined behavior.</p>\n\n<p>Also it does not make sense to enclose the calls of the function for the left and the right nodes in the if-else statement.</p>\n\n<p>The function can be defined the following way</p>\n\n<pre><code>long long int sumTheTreeValues( struct node *root )\n{\n    long long int sum = 0;\n\n    if ( root )\n    {\n        sum = root-&gt;value + \n              sumTheTreeValues( root-&gt;left ) + \n              sumTheTreeValues( root-&gt;right );\n    }\n\n    return sum;\n}\n</code></pre>\n\n<p>Or like</p>\n\n<pre><code>long long int sumTheTreeValues( struct node *root )\n{\n    return root == NULL ? 0\n                        : root-&gt;value + sumTheTreeValues( root-&gt;left ) \n                                      + sumTheTreeValues( root-&gt;right );\n}\n</code></pre>\n\n<p>Here is a demonstrative program with two recursive functions.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node\n{\n    int value;\n    struct node *left;\n    struct node *right;\n};\n\nvoid insert( struct node **head, int value )\n{\n    if ( *head == NULL )\n    {\n        *head = malloc( sizeof( struct node ) );\n        ( *head )-&gt;value = value;\n        ( *head )-&gt;left = NULL;\n        ( *head )-&gt;right = NULL;\n    }\n    else if ( value &lt; ( *head )-&gt;value )\n    {\n        insert( &amp;( *head )-&gt;left, value );\n    }\n    else\n    {\n        insert( &amp;( *head )-&gt;right, value );\n    }\n}\n\nlong long int sumTheTreeValues( struct node *root )\n{\n    return root == NULL ? 0\n                        : root-&gt;value + sumTheTreeValues( root-&gt;left ) \n                                      + sumTheTreeValues( root-&gt;right );\n}\n\nint main(void) \n{\n    struct node *head = NULL;\n    const int N = 10;\n\n    for ( int i = 1; i &lt; N; i++ )\n    {\n        insert( &amp;head, i );\n    }\n\n    printf( \"%lld\\n\", sumTheTreeValues( head ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>45\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8227280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3add02323510c1993c1d8a29cb1af?s=128&d=identicon&r=PG&f=1", "display_name": "dorojevets", "link": "https://stackoverflow.com/users/8227280/dorojevets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 44812466, "answer_count": 1, "score": 1, "last_activity_date": 1498685167, "creation_date": 1498683032, "last_edit_date": 1498685167, "question_id": 44812325, "link": "https://stackoverflow.com/questions/44812325/tree-recursion-compiles-but-crashes-on-execution", "title": "Tree recursion compiles, but crashes on execution", "body": "<p>I'm writing a program to traverse a pre-built tree. I don't know anything about the tree structure as far as number of nodes, location of nodes, etc, but I need to traverse all the nodes and sum the values of the nodes.</p>\n\n<p>The node is defined as</p>\n\n<pre><code>struct node\n{\n  int value;\n  node* left;\n  node* right;\n}\n</code></pre>\n\n<p>And my recursive function is the following:</p>\n\n<pre><code>int sumTheTreeValues(struct node* root)\n{\n  int sum = root-&gt;value;\n    if(!root-&gt;left){\n    sum = sum + sumTheTreeValues(root-&gt;left);\n  }\n    else if(!root-&gt;right){\n      sum = sum + sumTheTreeValues(root-&gt;right);\n  }\n  return sum;\n}\n</code></pre>\n\n<p>The compiler throws no error, but if I try to run it it just crashes with no messages. Just to sanity check I printed the node value to make sure the root is not <code>null</code>. I have a hunch that it might be related to recursion termination, but I'm not quite sure what else to add since I am checking for <code>null</code> children. </p>\n"}, {"tags": ["c", "intel", "simd"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1498680650, "post_id": 44811620, "comment_id": 76603921, "body": "Is this 32-bit code? What operating system are you targeting? The ABI probably doesn&#39;t let you return values in AVX registers. I <i>assume</i> there is a <code>return</code> statement there in the <code>&#47;* code snipet *&#47;</code> part that you&#39;ve hidden from us."}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1498680793, "post_id": 44811620, "comment_id": 76603984, "body": "One more thing to add ... I&#39;m transforming my code from 128b vector to a 256b vector and I haven&#39;t change the alignment could be that the problem!!? Also I made an in-place code so there is no return."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1498681189, "post_id": 44811620, "comment_id": 76604244, "body": "@A.nechi AVX relaxes the alignment requirements compared to SSE, but <code>_mm256_load_ps()</code> is an explicitly aligned load (<code>MOVAPS</code>), which <i>does</i> require 32-bit alignment."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1498716242, "post_id": 44811620, "comment_id": 76614814, "body": "Can we see the actual build commands that are emitted when you type <code>make</code> ?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1498717234, "post_id": 44811620, "comment_id": 76615257, "body": "@EOF: <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_load_ps&amp;expand=3073\" rel=\"nofollow noreferrer\"><code>_mm256_load_ps()</code> requires 32 <i>byte</i> alignment.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1498729972, "post_id": 44817974, "comment_id": 76623599, "body": "The code looks good on GCC 6.3 when targeting 64-bit, but when you switch to 32-bit, <a href=\"https://godbolt.org/g/v1ypgb\" rel=\"nofollow noreferrer\">the optimizer goes stupid</a>. What is that <code>LEA</code> instruction doing there?! Other compilers get it correct, so this looks like a GCC code-gen bug, still not fixed in the trunk."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1498734126, "post_id": 44817974, "comment_id": 76626387, "body": "@CodyGray: yuck.  The save/restore of <code>ecx</code> is also insane.  This is different from (but reminds me of) older gcc emitting code to 32B-align the stack even after optimizing away all spills of <code>__m256</code> variables.  Hmm, <a href=\"https://godbolt.org/g/9b6Uyj\" rel=\"nofollow noreferrer\">the <code>-O1</code> code</a> maybe sheds a tiny bit of light on it: it uses <code>lea ecx, [esp+8]</code> / <code>mov edx, [ecx]</code> / <code>mov eax, [ecx+4]</code> to load the pointer args from the stack.  It looks like gcc is still &quot;thinking&quot; that (for some crazy reason) but then optimizing away some of it.  Have you reported it upstream yet?  If not, I will."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1498812454, "post_id": 44817974, "comment_id": 76664799, "body": "Thanks, @Cody. I usually have to guess what component to pick, since I&#39;m not an expert on the under-the-hood stuff so IDK which things are RTL and which are middle-end or whatever.  In this case it looks x86-specific, so &quot;target&quot; is a good choice.  If I wasn&#39;t sure, I&#39;d mention that in the text so a gcc dev could re-tag it if necessary."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1498976971, "post_id": 44817974, "comment_id": 76715252, "body": "Okay, finally made time to report this: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81274\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=81274</a>. Perhaps a bit too detailed, but I am used to reporting bugs on MSVC, where 90% of them go over the head of first-tier staff."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1498730211, "last_edit_date": 1498730211, "creation_date": 1498718251, "answer_id": 44817974, "question_id": 44811620, "link": "https://stackoverflow.com/questions/44811620/error-when-using-mm256-load-ps-intel-intrinsic/44817974#44817974", "title": "Error when using _mm256_load_ps() Intel intrinsic", "body": "<p>Your Makefile or something else in your build is broken.  <code>-O5 -mavx</code> definitely enables AVX, so that warning tells us your compiler isn't seeing those options.</p>\n\n<p>Presumably, your code doesn't compile at all, and there are error messages later. <code>_mm256_load_ps</code> isn't recognized without AVX support enabled.</p>\n\n<p>This code:</p>\n\n<pre><code>#include &lt;immintrin.h&gt;\n\n__m256 foo(const float *a, const float *b)\n{\n   __m256 a_vec = _mm256_load_ps(&amp;a[0]);  // assumes a and b are 32-byte aligned.\n   __m256 b_vec = _mm256_load_ps(&amp;b[0]);\n   __m256 res   = _mm256_addsub_ps(a_vec, b_vec);\n   return res;\n}\n</code></pre>\n\n<p>compiles just fine for me, with <code>gcc -march=haswell -O3</code> (<code>-march=haswell</code> implies <code>-mavx</code>).  <a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:&#39;%23include+%3Cimmintrin.h%3E%0A%0A__m256+foo(const+float+*a,+const+float+*b)%0A%7B%0A+++__m256+a_vec+%3D+_mm256_load_ps(%26a%5B0%5D)%3B++//+assumes+a+and+b+are+aligned.%0A+++__m256+b_vec+%3D+_mm256_load_ps(%26b%5B0%5D)%3B%0A+++__m256+res+++%3D+_mm256_addsub_ps(a_vec,+b_vec)%3B%0A+++return+res%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:44.74730266893812,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:g63,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;-xc+-O3+-std%3Dgnu11+-Wall+-march%3Dhaswell+-ffast-math&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+6.3+(Editor+%231,+Compiler+%231)&#39;,t:&#39;0&#39;)),k:47.786189304033755,l:&#39;4&#39;,m:70.01034126163393,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+gcc+6.3&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:29.989658738366074,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:55.25269733106191,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">The asm output is</a>:</p>\n\n<pre><code>    vmovaps       ymm0, YMMWORD PTR [rdi]\n    vaddsubps     ymm0, ymm0, YMMWORD PTR [rsi]\n    ret\n</code></pre>\n\n<hr>\n\n<p>Note that <code>-c</code> should not be part of <code>CFLAGS</code> in a normal Makefile setup.  It should be part of the <code>.c</code> to <code>.o</code> pattern rule.</p>\n\n<p>Also, you'll get better results from using a more modern compiler.  Ubuntu 12.04 is over 5 years old, and came out while AVX was still very new.  Newer compilers do a better job with recent CPU extensions.  gcc6.3 is a good choice.  gcc7.1 is out, but it's still very new.</p>\n"}], "owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1466, "favorite_count": 0, "closed_date": 1499424085, "accepted_answer_id": 44817974, "answer_count": 1, "score": -4, "last_activity_date": 1498730211, "creation_date": 1498680269, "last_edit_date": 1498683288, "question_id": 44811620, "link": "https://stackoverflow.com/questions/44811620/error-when-using-mm256-load-ps-intel-intrinsic", "closed_reason": "Not suitable for this site", "title": "Error when using _mm256_load_ps() Intel intrinsic", "body": "<p>I've tried to use the _mm256_load_ps() intrinsic to make my program run faster. Meaning that I want to load 8 floats at a time and store them in a 266b vector to use them for further computations. </p>\n\n<pre><code>/* code snipet */\na_vec = _mm256_load_ps(&amp;a[0])\nb_vec = _mm256_load_ps(&amp;b[0])\nres   = _mm256_addsub_ps(a,b)\n/* code snipet */\n</code></pre>\n\n<p>Also, I used these flags in my makefile:</p>\n\n<pre><code>CC=gcc\nCFLAGS=-g -c -Wall -O5 -mavx -mfma -ffast-math\n</code></pre>\n\n<p>And I've made sure that my processor supports AVX extensions. But when I compile my code, I keep getting this warning:</p>\n\n<p><strong>warning: AVX vector return without AVX enabled changes the ABI [-Wpsabi]</strong></p>\n\n<p>PS : I'm using Ubuntu 12.04 LTS 64bits </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498707407, "post_id": 44811579, "comment_id": 76612026, "body": "Note that your list is a <i>stack</i>, last-in, first-out."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498779579, "post_id": 44811579, "comment_id": 76653639, "body": "when outputting an error message, it should be output to <code>stderr</code>, not <code>stdout</code>.   It is always a good idea when outputting an error message that is about a problem indicated by a system function that the displayed output include the reason the system thinks the call to the function failed.  The best way to do that is with <code>perror()</code>  although <code>fprintf( stderr, &quot;...&quot; );</code> will also do the job if the returned value from <code>strerror()</code> is also output.  So this line: <code>printf(&quot;Kunde inte l&#228;sa filen &#39;textfil.txt&#39;.\\n&quot;);</code> should be: <code>perror(&quot;Kunde inte l&#228;sa filen &#39;textfil.txt&#39;&quot;);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498779716, "post_id": 44811579, "comment_id": 76653685, "body": "when calling any of the heap allocation functions (malloc, calloc, realloc) always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498779916, "post_id": 44811579, "comment_id": 76653741, "body": "the function: <code>fgets()</code> will also include an trailing newline in the input, so that newline should (usually) be replaced with a &#39;\\0&#39;.  One way to do that is: char *newline = NULL;  if( NULL != (newline = strchr( a.robot, &#39;\\n&#39; ) ) { *newline = &#39;\\0&#39;; }`"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498780068, "post_id": 44811579, "comment_id": 76653781, "body": "when calling any of the <code>scanf()</code> family of functions, including <code>fscanf()</code>, always check the returned value (not the parameter values) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498780270, "post_id": 44811579, "comment_id": 76653836, "body": "this code: <code>temp-&gt;next = first;         first = temp;</code> results in a circular entry I.E. it points to itself.  it also, on subsequent entries, places the new entry at the beginning of the list."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498780436, "post_id": 44811579, "comment_id": 76653888, "body": "this statement: <code>while (p != NULL)</code> will always be true because a circular list was created, no non of the entries contains a NULL <code>next</code> field"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498780537, "post_id": 44811579, "comment_id": 76653909, "body": "this function: <code>getch();</code> is non standard.  much better to use: <code>int ch; while( (ch = getchar() ) != EOF &amp;&amp; &#39;\\n&#39; != ch );  getchar();</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498780869, "post_id": 44811579, "comment_id": 76653985, "body": "However, the function: <code>fgets()</code> does not stop at a space char, so the input will be corrupted.  Suggest declaring an array that is long enough to hold the longest line in the file, use fgets() to read the line from the file into that array, then use <code>strtok()</code> to extract each item in the line."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498689830, "post_id": 44811785, "comment_id": 76607991, "body": "Off by one: <code>char robot[12]; char terminatortyp[10]; ... &quot;%12s %10s %d&quot;</code> --&gt; <code>&quot;%11s %9s %d&quot;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498690023, "post_id": 44811785, "comment_id": 76608051, "body": "Rather than <code>strcpy(temp-&gt;robot, a.robot);     strcpy(temp-&gt;terminatortyp, a.terminatortyp);     temp-&gt;idnr = a.idnr; </code>, could use <code>*temp = a;</code> or the like."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498690649, "post_id": 44811785, "comment_id": 76608212, "body": "@chux: right, thanks! adapted the answer and added a short description for the width-specifier. Concerning <code>strcpy</code> vs <code>*temp=a</code>: thanks for the valuable comment. Just wanted to not change OPs code for other aspects than initially asked, so I did not add it to the answer."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1498690725, "last_edit_date": 1498690725, "creation_date": 1498680878, "answer_id": 44811785, "question_id": 44811579, "link": "https://stackoverflow.com/questions/44811579/reading-from-txt-file-to-linked-list-need-help-correcting-code/44811785#44811785", "title": "Reading from txt.file to linked list, need help correcting code", "body": "<p>You are using <code>fgets</code> as if it would read in a single string until the next whitespace. Yet <code>fgets</code> reads in a complete line until it detects new line character <code>'\\n'</code> or reaches the end of the file.</p>\n\n<p>So after statement <code>fgets(a.robot, sizeof a.robot, tsin)</code>, the value of <code>a.robot</code> is probably <code>TERMINATOR T-800 17\\n</code> and not <code>TERMINATOR</code>. This leads to a buffer overflow on the one hand, and with repeated <code>fgets</code> statements in the loop you actually read in complete lines into the current <code>temp</code> object.</p>\n\n<pre><code>while (fscanf(tsin, \"%11s %9s %d\", a.robot, a.terminatortyp, &amp;a.idnr) == 3)\n{\n    temp = malloc(sizeof(Link));\n    strcpy(temp-&gt;robot, a.robot);\n    strcpy(temp-&gt;terminatortyp, a.terminatortyp);\n    temp-&gt;idnr = a.idnr;\n\n    temp-&gt;next = first;\n    first = temp;\n\n    ++antal;\n}\n</code></pre>\n\n<p>Note the maximum field width specifier <code>%11s</code>, which makes sure that at most 11 characters are read in (+ one additional string termination character), such that the scan fits into a buffer of size 12. Confer, for example, <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">cppreference/scanf</a>:</p>\n\n<blockquote>\n  <p>%11s: If width specifier is used, matches up to width or until the first\n  whitespace character, whichever appears first. Always stores a null\n  character in addition to the characters matched (so the argument array\n  must have room for at least width+1 characters)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1498707348, "last_edit_date": 1498707348, "creation_date": 1498706656, "answer_id": 44815866, "question_id": 44811579, "link": "https://stackoverflow.com/questions/44811579/reading-from-txt-file-to-linked-list-need-help-correcting-code/44815866#44815866", "title": "Reading from txt.file to linked list, need help correcting code", "body": "<p>Use <code>fgets()</code> to read a <em>line</em>, not a word.</p>\n\n<pre><code>char line[100];\nwhile (fgets(line, sizeof line, tsin) != NULL) {\n</code></pre>\n\n<p>Now parse the line.  Use <code>%n</code> to save the offset of the scan - if it got that far.  Be sure to limit the maximum width of characters acceptable for the members.  Additional checks are possible.  This will get you started.</p>\n\n<pre><code>  struct Link entry = { 0 }; // zero fill members\n  int n = 0;\n  int lead;\n  sscanf(line,\" %n%11s%9s%d %n\",&amp;lead, entry.robot, entry.terminatortyp, &amp;entry.idnr, &amp;n);\n  // All specifiers scanned and no extra junk? \n  if (n == 0 || line[n]) {\n    printf(\"Bad line &lt;%s&gt;\\n\", line);\n    continue;\n  }\n  if (lead &gt; 0) {\n    printf(\"leading spaces &lt;%s&gt;\\n\", line);\n    continue;\n  }\n</code></pre>\n\n<p>Add sanity checks on members as desired.</p>\n\n<pre><code>  if (entry.idnr &lt; 1 || entry.idnr &gt; 9999) {\n    printf(\"Bad index &lt;%s&gt;\\n\", line);\n    continue;\n  }\n</code></pre>\n\n<p>Success, now allocate </p>\n\n<pre><code>  struct Link *node = malloc(sizeof *node);\n  if (node == NULL) {\n    printf(\"Out of memory at line &lt;%s&gt;\\n\", line);\n    break;\n  }\n  *node = entry;\n  node-&gt;next = first;\n  first = node;\n}\n</code></pre>\n\n<blockquote>\n  <p>Any suggestions?</p>\n</blockquote>\n\n<p>@imanoob, du \u00e4r inte en noob</p>\n"}], "owner": {"reputation": 25, "user_id": 8212272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NjNp3.png?s=128&g=1", "display_name": "imanoob", "link": "https://stackoverflow.com/users/8212272/imanoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 44815866, "answer_count": 2, "score": 2, "last_activity_date": 1498707348, "creation_date": 1498680110, "last_edit_date": 1498680294, "question_id": 44811579, "link": "https://stackoverflow.com/questions/44811579/reading-from-txt-file-to-linked-list-need-help-correcting-code", "title": "Reading from txt.file to linked list, need help correcting code", "body": "<p>I'm having problems getting a proper output, the list gets messed up.</p>\n\n<p>1.I've been told to break my while loop down in smaller parts would help, but i can't seem to get it right.\nproblem: a number \"1\" pops up between some of the colums when printing, further down the code it's replaced with \"-858993460\". <strong><em>Why is this happening?</em></strong></p>\n\n<p>My goal: \"robot\" \"Termintortyp\" \"idnr\" \\n</p>\n\n<p>AKA: \"Termintor\" \"T-800/T-1000\" \"1-100\"</p>\n\n<p>2.I also want to add an errorcheck:</p>\n\n<p>If an error appears-> print an error message and then the code should continue till the linked list has run out. example: between 11 and 12th line it says \"FEL FEL FEL\" or row 16 \"_____TERMINATOR T-1000 16\".If the problem can be identified while reading the txt.file into the linked list and somehow replace that \"incorrect termintor\"-line with an error message would solve my problem, but i don't know how to do it proper. <strong><em>Any suggestions?</em></strong></p>\n\n<p>Appreciating all the help i can get!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nstruct Link {\nchar robot[12];\nchar terminatortyp[10];\nint idnr;\nstruct Link *next;\n};\ntypedef struct Link Link;\nLink *first = NULL;\n\nint main(void) {\nint antal = 0;\nLink a;\nFILE *tsin = fopen(\"textfil1R.txt\", \"r\");\nif (tsin == NULL) {\n    printf(\"Kunde inte l\u00e4sa filen 'textfil.txt'.\\n\");\n    exit(EXIT_FAILURE);\n}\n\nLink *temp;\n\nwhile (fgets(a.robot, sizeof a.robot, tsin) != NULL)\n{\n    temp = malloc(sizeof(Link));\n    strcpy(temp-&gt;robot, a.robot);\n\n    fgets(a.terminatortyp, sizeof a.terminatortyp, tsin);\n    strcpy(temp-&gt;terminatortyp, a.terminatortyp);\n\n\n        fscanf(tsin, \"%d\", &amp;a.idnr);\n        temp-&gt;idnr = a.idnr;\n\n        temp-&gt;next = first;\n        first = temp;\n\n        ++antal;\n\n    }\nfclose(tsin);\n\n\n    Link *p = first;\n    while (p != NULL)\n    {\n        //printf(\"%d\\n\", p-&gt;idnr);\n        printf(\"%s\", p-&gt;robot);\n        printf(\"%s\", p-&gt;terminatortyp);\n        printf(\"%d\\n\", p-&gt;idnr);\n        p = p-&gt;next;\n\n    }\n    printf(\"%d\", antal);\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>The textfile im reading this from:</p>\n\n<pre><code>TERMINATOR T-800 1\nTERMINATOR T-1000 2\nTERMINATOR T-800 3\nTERMINATOR T-800 4\nTERMINATOR T-1000 5\nTERMINATOR T-800 6\nTERMINATOR T-800 7\nTERMINATOR T-800 8\nTERMINATOR T-1000 9\nTERMINATOR T-800 10\nTORMONUTTUR T-800 101\nTERMINATOR T-800 11\nFEL FEL FEL\nTERMINATOR T-1000 12\nTERMINATOR T-800 13\nTERMINATOR T-800 14\nTERMINATOR           T-800         15\n       TERMINATOR T-1000 16\nTERMINATOR T-800 17                       \nTERMINATOR T-800 18\nTERMINATOR T-1000 19\nTERMINATOR T-800 20\nTERMINATOR T-800 21\nTERMINATOR T-800 22\nTERMINATOR T-1000 23\nTERMINATOR T-800 24\nTERMINATOR T-800 25\nTERMINATOR T-1000 26\nTERMINATOR T-800 27\nTERMINATOR T-800 28\nTERMINATOR T-800 29\nTERMINATOR T-1000 30\nTERMINATOR T-800 31\nTERMINATOR T-800 32\nTERMINATOR T-1000 33\nTERMINATOR T-800 34\nTERMINATOR T-800 35\nTERMINATOR T-800 36\nTERMINATOR T-1000 37\nTERMINATOR T-800 38\nTERMINATOR T-800 39\nTERMINATOR T-1000 40\nTERMINATOR T-800 41\nTERMINATOR T-800 42\nTERMINATOR T-800 43\nTERMINATOR T-1000 44\nTERMINATOR T-800 45\nTERMINATOR T-800 46\nTERMINATOR T-1000 47\nTERMINATOR T-800 48\nTERMINATOR T-800 49\nTERMINATOR T-800 50\nTERMINATOR T-1000 51\nTERMINATOR T-800 52\nTERMINATOR T-800 53\nTERMINATOR T-1000 54\nTERMINATOR T-800 55\nTERMINATOR T-800 56\nTERMINATOR T-800 57\nTERMINATOR T-1000 58\nTERMINATOR T-800 59\nTERMINATOR T-800 60\nTERMINATOR T-1000 61\nTERMINATOR T-800 62\nTERMINATOR T-800 63\nTERMINATOR T-800 64\nTERMINATOR T-1000 65\nTERMINATOR T-800 66\nTERMINATOR T-800 67\nTERMINATOR T-1000 68\nTERMINATOR T-800 69\nTERMINATOR T-800 70\nTERMINATOR T-800 71\nTERMINATOR T-1000 72\nTERMINATOR T-800 73\nTERMINATOR T-800 74\nTERMINATOR T-1000 75\nTERMINATOR T-800 76\nTERMINATOR T-800 77\nTERMINATOR T-800 78\nTERMINATOR T-1000 79\nTERMINATOR T-800 80\nTERMINATOR T-800 81\nTERMINATOR T-1000 82\nTERMINATOR T-800 83\nTERMINATOR T-1001 84\nTERMINATOR T-800 85\nTERMINATOR T-1000 86\nTERMINATOR T-800 87\nTERMINATOR T-800 88\nTERMINATOR T-1000 89\nTERMINATOR T-800 90\nTERMINATOR T-800 91\nTERMINATOR T-800 92\nTERMINATOR T-1000 93\nTERMINATOR T-850 94\nTERMINATOR T-800 95\nTERMINATOR T-1000 96\nTERMINATOR T-800 97\nTERMINATOR T-800 98\nTERMINATOR T-800 99\nTERMINATOR T-1000 100\n</code></pre>\n"}, {"tags": ["c", "pointers", "data-structures", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498829482, "post_id": 44811368, "comment_id": 76675826, "body": "for ease of readability and understanding:: 1) separate code blocks (for, if, else, while, do...while, switch, case, default) via a single blank line  2) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498829534, "post_id": 44811368, "comment_id": 76675860, "body": "when calling <code>scanf()</code>, always check the returned value (not the parameter values) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498829670, "post_id": 44811368, "comment_id": 76675962, "body": "when calling any of the heap allocation functions (malloc, calloc, realloc), 1) always check (!=NULL) the returned value to assure the operation was successful.  2) the returned type is <code>void*</code> so can be assigned to any pointer.  Casting just clutters the code, making it much more difficult to understand, debug, etc."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "edited": false, "score": 0, "creation_date": 1498680133, "post_id": 44811436, "comment_id": 76603605, "body": "while(temp!=NULL){temp=temp-&gt;next;} temp=new_node;  this worked."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "edited": false, "score": 0, "creation_date": 1498681119, "post_id": 44811436, "comment_id": 76604191, "body": "@EshanPandey I think you should follow my solution, since I tested it works nicely. Your approach doesn&#39;t connect the nodes."}, {"owner": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "edited": false, "score": 0, "creation_date": 1498681550, "post_id": 44811436, "comment_id": 76604470, "body": "It is not like I did not like your solution, just that I came up with my own. Obviously, your answer helped. You pointed out what I was doing wrong, which helped me. @gsamaras Thanks. BTW still struggling with print() function."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "edited": false, "score": 0, "creation_date": 1498681723, "post_id": 44811436, "comment_id": 76604566, "body": "Yes because you <b>do not link the nodes</b>. The <code>next</code> member of every node of yours points to <code>NULL</code> with your solution, while with mine&#39;s, every node points to its next node. That&#39;s why you can&#39;t print your list @EshanPandey."}, {"owner": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "edited": false, "score": 0, "creation_date": 1498681979, "post_id": 44811436, "comment_id": 76604706, "body": "Yes, I think you are right. My approach does not connect the nodes and therefore the entire list is not printed.. only 1st element. But I don&#39;t understand this completely. Can you help (explain)"}, {"owner": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "edited": false, "score": 0, "creation_date": 1498682033, "post_id": 44811436, "comment_id": 76604736, "body": "Thanks.. @gsamaras got it now."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "edited": false, "score": 0, "creation_date": 1498682084, "post_id": 44811436, "comment_id": 76604759, "body": "@EshanPandey get a piece of paper and <b>draw</b> what your code does, that will help! With your approach the <code>next</code> member of every node points to <code>NULL</code>, thus when you try to print the list (thus iterate over it), you ask for the <code>next</code> member, which is <code>NULL</code>, thus your first node thinks that it is the last as well (because it&#39;s <code>next</code> is <code>NULL</code> incorrectly!)."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 5, "last_activity_date": 1498679550, "creation_date": 1498679550, "answer_id": 44811436, "question_id": 44811368, "link": "https://stackoverflow.com/questions/44811368/linked-list-implementation-in-c-run-time-error/44811436#44811436", "title": "Linked list implementation in c, run time error", "body": "<blockquote>\n  <p>Maybe there is some logical error?</p>\n</blockquote>\n\n<p>Yes!</p>\n\n<p>Here:</p>\n\n<pre><code>while(temp!=NULL) { temp=temp-&gt;next; }\n(*temp).next=new_node;\n</code></pre>\n\n<p>you will loop until <code>temp</code> is actually <code>NULL</code> and then request its <code>next</code> member, so you are asking for <code>next</code> of <code>NULL</code>, thus you are asking for trouble (the program crashes)!</p>\n\n<p>Try doing this instead:</p>\n\n<pre><code>while(temp-&gt;next != NULL) { temp=temp-&gt;next; }\n</code></pre>\n\n<p>where you are looping until <code>temp</code> points to the <em>last</em> node of your list. With that change your code should work fine.</p>\n\n<hr>\n\n<p>PS: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a> No!</p>\n"}], "owner": {"reputation": 55, "user_id": 6130729, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-l3wg2uLNPxE/AAAAAAAAAAI/AAAAAAAAA_E/lb6pi9nFXqQ/photo.jpg?sz=128", "display_name": "Eshan Pandey", "link": "https://stackoverflow.com/users/6130729/eshan-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 44811436, "answer_count": 1, "score": 1, "last_activity_date": 1498679843, "creation_date": 1498679321, "last_edit_date": 1498679843, "question_id": 44811368, "link": "https://stackoverflow.com/questions/44811368/linked-list-implementation-in-c-run-time-error", "title": "Linked list implementation in c, run time error", "body": "<p>There is no error when I compile the code, but the program crashes at runtime after two inputs. Maybe there is some logical error that I can not make out. I'm trying to insert nodes at the tail of linked lists while only maintaining head position.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct Node{\n\n    int data;\n    struct Node* next;\n};\n\nstruct Node *head;\n\n//print the element of the lists\nvoid print(){\n    printf(\"\\nThe list from head to tail is as follows \\n\");\n    struct Node* temp = head;\n    while(temp!=NULL){\n        printf(\"\\n %d \",(*temp).data);\n        temp = (*temp).next;\n    }\n}\n\n//insert a node at the tail of the linked list\nvoid insert_at_tail(int data){\n    struct Node* temp = head;\n    struct Node* new_node = (struct Node*)malloc(sizeof(struct Node));\n    new_node-&gt;data=data;\n    new_node-&gt;next=NULL;\n\n    if(temp==NULL){\n        head=new_node;\n    }\n    else{\n        while(temp!=NULL){temp=temp-&gt;next;}\n        (*temp).next=new_node;\n    }\n}\nint main(){\n\n    head = NULL;\n    int i,data;\n    for(i=0;i&lt;5;i++){\n        scanf(\"%d\",&amp;data);\n        insert_at_tail(data);\n    }\n    print();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "unions"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498679890, "post_id": 44811328, "comment_id": 76603460, "body": "This is a surprisingly hard problem. See <a href=\"https://stackoverflow.com/questions/30945121/dealing-with-data-serialization-without-violating-the-strict-aliasing-rule\">the related question of mine</a> on the topic"}], "answers": [{"comments": [{"owner": {"reputation": 1952, "user_id": 3037766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/PPfnV.png?s=128&g=1", "display_name": "slightlynybbled", "link": "https://stackoverflow.com/users/3037766/slightlynybbled"}, "edited": false, "score": 0, "creation_date": 1498680794, "post_id": 44811651, "comment_id": 76603986, "body": "I should have added this to my post.  I&#39;m writing this for a microcontroller and it does not have access to the network library.  I will add this information to my initial post and read through your reference.  Thank you!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1952, "user_id": 3037766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/PPfnV.png?s=128&g=1", "display_name": "slightlynybbled", "link": "https://stackoverflow.com/users/3037766/slightlynybbled"}, "edited": false, "score": 0, "creation_date": 1498681080, "post_id": 44811651, "comment_id": 76604164, "body": "@slightlynybbled See my edit.  You can use bit operations to extract the relevant bytes to write to the correct place."}, {"owner": {"reputation": 1952, "user_id": 3037766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/PPfnV.png?s=128&g=1", "display_name": "slightlynybbled", "link": "https://stackoverflow.com/users/3037766/slightlynybbled"}, "edited": false, "score": 0, "creation_date": 1498681242, "post_id": 44811651, "comment_id": 76604271, "body": "is this something that can be done at compile time?  Your example appears to occur at run time."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1952, "user_id": 3037766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/PPfnV.png?s=128&g=1", "display_name": "slightlynybbled", "link": "https://stackoverflow.com/users/3037766/slightlynybbled"}, "edited": false, "score": 0, "creation_date": 1498681473, "post_id": 44811651, "comment_id": 76604415, "body": "@slightlynybbled Unless you plan on setting constant data, it has to be done at run time.  Bitwise operations are pretty cheap, so I would think using them wouldn&#39;t be a concern."}, {"owner": {"reputation": 1952, "user_id": 3037766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/PPfnV.png?s=128&g=1", "display_name": "slightlynybbled", "link": "https://stackoverflow.com/users/3037766/slightlynybbled"}, "edited": false, "score": 0, "creation_date": 1498681666, "post_id": 44811651, "comment_id": 76604533, "body": "You are right, not a concern.  I was just hoping for something more elegant, thank you for your time!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1498680992, "last_edit_date": 1498680992, "creation_date": 1498680357, "answer_id": 44811651, "question_id": 44811328, "link": "https://stackoverflow.com/questions/44811328/changing-endianness-or-byte-order-within-a-union/44811651#44811651", "title": "Changing endianness or byte order within a union", "body": "<p>One thing you can do is to use <code>htons</code> and <code>ntohs</code> to convert the 16 bit values between host byte order (machine dependent) and network byte order (big endian).  When writing the 16 bit values, pass them through <code>htons</code> to put the bytes in the right order.</p>\n\n<pre><code>myunion.RtuRxFields.numberOfRegisters = htons(5);\n</code></pre>\n\n<p>If you don't have access to these functions, you can use bit shifting to get the high and low bytes and write them individually in the relevant fields:</p>\n\n<pre><code>uint16_t registers = 5;\n...\nmyunion.RtuRxFieldBytes.numberOfRegistersHi = (registers &gt;&gt; 8) &amp; 0xff;\nmyunion.RtuRxFieldBytes.numberOfRegistersLo = registers &amp; 0xff;\n</code></pre>\n\n<p>Sending a struct over a network can be problematic due to structure padding.  Two different compilers on two different machines could make the same struct have different sizes on each.  See <a href=\"http://www.catb.org/esr/structure-packing/\" rel=\"nofollow noreferrer\">this guide</a> for more details.</p>\n"}], "owner": {"reputation": 1952, "user_id": 3037766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/PPfnV.png?s=128&g=1", "display_name": "slightlynybbled", "link": "https://stackoverflow.com/users/3037766/slightlynybbled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 44811651, "answer_count": 1, "score": 1, "last_activity_date": 1547037973, "creation_date": 1498679176, "last_edit_date": 1547037973, "question_id": 44811328, "link": "https://stackoverflow.com/questions/44811328/changing-endianness-or-byte-order-within-a-union", "title": "Changing endianness or byte order within a union", "body": "<p>I am working on a project involving communications. I would like to be able to take a struct and typecast it into bytes in preparation for transmission.  Unfortunately, endianness is not working out for me.</p>\n\n<p>The standard that I'm working with has the following definition:</p>\n\n<pre><code>uint8_t address;\nuint8_t function;\nuint8_t startAddressHi;\nuint8_t startAddressLo;\nuint8_t numberOfRegistersHi;\nuint8_t numberOfRegistersLo;\n</code></pre>\n\n<p>It would be nice to be able to type cast to <code>uint8_t</code> and simply transmit the entire struct in one go, but the problem is that the <code>Hi</code> bytes of the <code>startAddress</code> and <code>numberOfRegisters</code> is at a lower index.  I am hoping that there is some little-known method of changing the byte order of the definition:</p>\n\n<pre><code>typedef union{\n\n    struct rturxfields{\n        /* header */\n        uint8_t address;\n        uint8_t function;\n\n        /* data */\n        uint16_t startAddress;   // &lt;= needs some special sauce\n        uint16_t numberOfRegisters;\n    }RtuRxFields;\n\n    struct rturxfieldbytes{\n        /* header */\n        uint8_t address;\n        uint8_t function;\n\n        /* data */\n        uint8_t startAddressHi;\n        uint8_t startAddressLo;\n        uint8_t numberOfRegistersHi;\n        uint8_t numberOfRegistersLo;\n    }RtuRxFieldBytes;\n\n    uint8_t array[RX_FRAME_LENGTH];\n}RtuRxFrame;\n</code></pre>\n\n<p>Again, as defined, my union, the endianness is off.</p>\n\n<p>I won't have access to <code>htons()</code> and similar from the networking library.  After doing more reading, I think I will simply get rid of the <code>RtuRxFields</code> struct and create utility functions <code>getStartAddress(RtuRxFrame* frame)</code> to retrieve the address cleanly.</p>\n"}, {"tags": ["c", "recursion", "count", "binary-search-tree", "inorder"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1498680599, "post_id": 44810989, "comment_id": 76603891, "body": "First, run in a debugger."}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1498683263, "post_id": 44810989, "comment_id": 76605334, "body": "What is <code>FUNC</code>&#39;s declaration ? Do you have the definition too ? I think you would want to <code>return NULL</code> at the end of the function <code>COUNT_INORDER</code>."}], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 8062035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7LDF.jpg?s=128&g=1", "display_name": "Julian Broudy", "link": "https://stackoverflow.com/users/8062035/julian-broudy"}, "edited": false, "score": 0, "creation_date": 1498681114, "post_id": 44811667, "comment_id": 76604188, "body": "you can&#39;t use a variable in a recursive function, because it will reset in each recursion, I did some changes and got to better answer, but for some reason building the tree with : 9 3 1 7 8 20 does work &amp; i get the right answer but it program crashes if i add some other numbers from the right subtree, i&#39;ll update the code now"}, {"owner": {"reputation": 684, "user_id": 2243184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3c3d532ae26d2aab62b89440ad21a8c?s=128&d=identicon&r=PG", "display_name": "physicist", "link": "https://stackoverflow.com/users/2243184/physicist"}, "reply_to_user": {"reputation": 168, "user_id": 8062035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7LDF.jpg?s=128&g=1", "display_name": "Julian Broudy", "link": "https://stackoverflow.com/users/8062035/julian-broudy"}, "edited": false, "score": 0, "creation_date": 1498681143, "post_id": 44811667, "comment_id": 76604209, "body": "you can use static variable. they are not reset"}, {"owner": {"reputation": 684, "user_id": 2243184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3c3d532ae26d2aab62b89440ad21a8c?s=128&d=identicon&r=PG", "display_name": "physicist", "link": "https://stackoverflow.com/users/2243184/physicist"}, "reply_to_user": {"reputation": 168, "user_id": 8062035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7LDF.jpg?s=128&g=1", "display_name": "Julian Broudy", "link": "https://stackoverflow.com/users/8062035/julian-broudy"}, "edited": false, "score": 0, "creation_date": 1498681493, "post_id": 44811667, "comment_id": 76604431, "body": "The count variable will increase at every inorder traversal of a node. And if the key of the node matches with nkey then ret is replaced by count otherwise ret is always -1. Let me know if this worked."}, {"owner": {"reputation": 168, "user_id": 8062035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7LDF.jpg?s=128&g=1", "display_name": "Julian Broudy", "link": "https://stackoverflow.com/users/8062035/julian-broudy"}, "edited": false, "score": 0, "creation_date": 1498682525, "post_id": 44811667, "comment_id": 76604965, "body": "im sorry, what i meant is we are not allowed to use static variables.. but u should have a look at the edited post again, i found a way, it works.. but i don&#39;t get why it crashes at the fprintf line if the counter is bigger than 6."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498689385, "post_id": 44811667, "comment_id": 76607862, "body": "In C90 and pre-standard C, you get away with <code>static count=0;</code>.  In C from the current millennium, you should write <code>static int count=0;</code> explicitly specifying the type, not using &#39;implicit <code>int</code>&#39;.  If your compiler isn&#39;t griping about it, you aren&#39;t using it correctly (or it is so ancient you should upgrade to a modern one)."}, {"owner": {"reputation": 684, "user_id": 2243184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3c3d532ae26d2aab62b89440ad21a8c?s=128&d=identicon&r=PG", "display_name": "physicist", "link": "https://stackoverflow.com/users/2243184/physicist"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498690839, "post_id": 44811667, "comment_id": 76608252, "body": "@JonathanLeffler  I did not compile :)  it is a typo really"}], "tags": [], "owner": {"reputation": 684, "user_id": 2243184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3c3d532ae26d2aab62b89440ad21a8c?s=128&d=identicon&r=PG", "display_name": "physicist", "link": "https://stackoverflow.com/users/2243184/physicist"}, "is_accepted": true, "score": 0, "last_activity_date": 1498680414, "creation_date": 1498680414, "answer_id": 44811667, "question_id": 44810989, "link": "https://stackoverflow.com/questions/44810989/count-bst-subtrees-until-finding-specific-given-key-inorder-traversal/44811667#44811667", "title": "COUNT BST subtrees until finding specific given key (inorder traversal)", "body": "<p>Not sure if this is correct. Try to go inorder and increase count in a static variable. Once key is found put that as the return variable, otherwise the default return is -1 for key not found. </p>\n\n<pre><code>int COUNT_INORDER(PTN TRoot, nkey, FUNC )     \n   {\n    static count=0;\n    int ret=-1;\n\n    ret= COUNT_INORDER(TRoot-&gt;left, nkey, FUNC);\n\n    count++;\n    if (FUNC(TRoot-&gt;key, nkey) == 0)\n        ret = count;\n\n    if(ret == -1)\n        ret= COUNT_INORDER(TRoot-&gt;right, nkey, FUNC);\n\n\n     return ret;\n    }\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 8062035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7LDF.jpg?s=128&g=1", "display_name": "Julian Broudy", "link": "https://stackoverflow.com/users/8062035/julian-broudy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 44811667, "answer_count": 1, "score": 0, "last_activity_date": 1498689125, "creation_date": 1498678031, "last_edit_date": 1498689125, "question_id": 44810989, "link": "https://stackoverflow.com/questions/44810989/count-bst-subtrees-until-finding-specific-given-key-inorder-traversal", "title": "COUNT BST subtrees until finding specific given key (inorder traversal)", "body": "<p>Homework assignment</p>\n\n<p>I need to count how many subtrees I went through (inorder) until found the given key,</p>\n\n<p>for example: if I have a tree, &amp; it's <strong>inorder</strong> traversal is: 1,3,7,8,9,10,11,15,20\nwhen given key:9, I need to return 5, when given key:3, I need to return 2.\nI have been all over the internet trying to find some help &amp; couldn't find.</p>\n\n<p>What I got so far is:</p>\n\n<p>(The \"FUNC\" is a specific function that compares integers or whatever, it works)</p>\n\n<pre><code>    void PRINT_KEY_ORDER(PTN TRoot, void *nkey, CMP_KEYS FUNC)  // prints keys place (inorder)\n{\n    int counter = 1;\n    fprintf(stdout, \"%d\", *(COUNT_INORDER(TRoot, nkey, FUNC, &amp;counter)));   // prints counter which is always INT\n}\n\nint* COUNT_INORDER(PTN TRoot, void *nkey, CMP_KEYS FUNC, int *counter)      // counts times until reaches wanted key\n{\n    if (TRoot != NULL)\n    {\n        COUNT_INORDER(TRoot-&gt;left, nkey, FUNC, counter);\n        if (FUNC(TRoot-&gt;key, nkey) == 0)\n            return counter;\n        (*counter)++;\n        COUNT_INORDER(TRoot-&gt;right, nkey, FUNC, counter);\n    }\n}\n</code></pre>\n\n<p>this code works.</p>\n\n<p>Counts correctly but for some reason crashes on the fprintf line if I use more than these: 9 3 1 7 8 20</p>\n"}, {"tags": ["c", "file", "fopen", "fwrite", "fread"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498678008, "post_id": 44810948, "comment_id": 76602405, "body": "Endianess issue?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498678042, "post_id": 44810948, "comment_id": 76602426, "body": "1) You are assuming a certain endianness here. Why? Have you tried the opposite? 2) How do you print the <code>time</code> value? And why do you think <code>-6624</code> is incorrect?"}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 1, "creation_date": 1498678267, "post_id": 44810948, "comment_id": 76602552, "body": "<code>fwrite(fwrite(&amp;time, 4, 1, file);</code> typo?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1498678418, "post_id": 44810948, "comment_id": 76602628, "body": "&quot;application I read the first 3 bytes, and then I read the next 4 bytes&quot; &lt;- you don&#39;t show the code for this, just the code to read 40 bytes - you should start with symmetrical writing and reading."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 1, "creation_date": 1498678460, "post_id": 44810948, "comment_id": 76602650, "body": "btw better to put it in a struct, it is easier to handle that way, then u just read and write the struct"}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "reply_to_user": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1498678827, "post_id": 44810948, "comment_id": 76602845, "body": "@AndersK. I fixed it! Thanks for letting me know."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679049, "post_id": 44810948, "comment_id": 76602957, "body": "@Logan Curious, why does code use <code>4</code> in <code>fwrite(&amp;time, 4, 1, file);</code> versus <code>fwrite(&amp;time, sizeof time, 1, file);</code>?  Does code want to write 4 bytes here or write all the bytes of <code>time</code>, what ever size it may be?  There are  reasons for either - it depends on coding goals."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498679100, "post_id": 44810948, "comment_id": 76602975, "body": "@EugeneSh. I saw this algorithm online, which is why I&#39;m using it. I also tried changing the order by switching index 6 with 3 and 5 with 4. (I assume that&#39;s the opposite). 2) I believe this is incorrect because when I write the timestamp to the file I print the number first, and it was: 551992286"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679143, "post_id": 44810948, "comment_id": 76602999, "body": "@Logan <code>uint32_t timestamp</code> should <i>never</i> get printed out as <code>-6624</code>, a negative number.  Post the code that did the printing."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679157, "post_id": 44810948, "comment_id": 76603010, "body": "@chux  The question is updated with the print statement ---- So I could&#39;ve also done sizeof(time) (which I checked is also 4). But for the specifications of my program, I need it to print 4, which is why I set it to 4."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679274, "post_id": 44810948, "comment_id": 76603087, "body": "Was the file opened in binary or text mode for the read/write?  That affect various translations."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679329, "post_id": 44810948, "comment_id": 76603127, "body": "@chux file = fopen(filename, &quot;r&quot;);"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679341, "post_id": 44810948, "comment_id": 76603137, "body": "Save time (for us too), a good compiler with all warnings enabled will warn about <code>printf(&quot;Testing timestamp = %d\\n&quot;, timestamp);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498679342, "post_id": 44810948, "comment_id": 76603138, "body": "Re the recent question edit: <code>uint32_t</code> does not match the <code>printf</code> format specifier <code>%d</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679397, "post_id": 44810948, "comment_id": 76603164, "body": "In addition to <a href=\"https://stackoverflow.com/a/44811091/2410359\">@dbush fine answer</a>, open in binary mode."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679490, "post_id": 44810948, "comment_id": 76603216, "body": "@chux how do you open in binary mode? And what is the difference between binary mode and a regular read mode?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679632, "post_id": 44810948, "comment_id": 76603302, "body": "@logan see <a href=\"https://stackoverflow.com/q/229924/2410359\">stackoverflow.com/q/229924/2410359</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498679925, "post_id": 44810948, "comment_id": 76603492, "body": "@Logan 1)  If code is mixing text with potential line feeds and binary data in the same file, there are additional issues.  2) &quot;But this prints out -6624&quot; --&gt; what was expected. 3)  What was the values of <code>recordNum, charva, time</code>?"}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498680063, "post_id": 44810948, "comment_id": 76603569, "body": "@chux So basically I expected time to be 551995007 (as this is the value printed in the other file). The value of recordNum is 1, and charva is 0."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498680220, "post_id": 44810948, "comment_id": 76603659, "body": "@Logan <code>551995007</code> --&gt; <code>0x20E6C67F</code> and <code>-6624</code> --&gt; <code>FFFFFE620</code> so certainly there is at least an endian issue."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498781389, "post_id": 44810948, "comment_id": 76654125, "body": "there is no need, in the posted code, to use anything but <code>rawtime</code> so the call to <code>localtime()</code> and the struct tm are not needed/should be removed.  This line: <code>int time = (int)rawtime;</code> is modifying the actual <code>rawtime</code> to be an integer.  It is very poor programming practice to have a variable the same name as a system function."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498781590, "post_id": 44810948, "comment_id": 76654179, "body": "this line: <code>fwrite(&amp;time, 4, 1, file);</code> is error prone.  better to use: `fwrite( &amp;rawtime, sizeof( time_t ), file );"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498781943, "post_id": 44810948, "comment_id": 76654278, "body": "this line: <code>uint32_t timestamp =(uint32_t)record[6] | (uint32_t)record[5] &lt;&lt; 8 | (uint32_t)record[4] &lt;&lt; 16 | (uint32_t)record[3] &lt;&lt; 24;</code> (probably) will not recover the timestamp.  Strongly suggest  generating a struct that contains the 3 fields, declare it &#39;packed&#39;, then extract the third field, which should have type <code>time_t</code>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498678679, "post_id": 44811091, "comment_id": 76602774, "body": "@EugeneSh. <code>fread(&amp;time, sizeof(time), 1, file);</code> is better iff <code>fwrite(fwrite(&amp;time, sizeof(time), 1, file);</code> is used.  Else code should used <code>time = 0; fread(&amp;time, sizeof(time), 1, file);</code>  <code>fread&#47;fwrite</code> has various concerns about type sizes.  Suggest <code>(u)intn_t</code> types."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498678740, "post_id": 44811091, "comment_id": 76602797, "body": "@chux Sure. Just lazy to stuff it into the comment."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498679482, "post_id": 44811091, "comment_id": 76603213, "body": "@dbush Thank you, I will try this and see how it goes."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498682749, "post_id": 44811091, "comment_id": 76605075, "body": "@dbush So I tried your method, but I&#39;m having some issues. Is this statement okay? uint32_t timestamp; fread(&amp;timestamp, sizeof(timestamp), 1, file);"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498683035, "post_id": 44811091, "comment_id": 76605209, "body": "@Logan That should work, assuming you read the prior 3 bytes first."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498683656, "post_id": 44811091, "comment_id": 76605542, "body": "@dbush so something weird is happening, the first byte is read fine. It is a 1. The next byte, should have the following value 0b11000000. However, it is actually a 0 when I print it.. Here is how I write it: unsigned int i = 0b11000000; unsigned char charval = i; fwrite(&amp;charval, 1, 1, file);                          Sorry this formatting is terrible because I don&#39;t know how to make code snippets in comments."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 1, "creation_date": 1498683776, "post_id": 44811091, "comment_id": 76605594, "body": "@Logan You shouldn&#39;t be reading 1 byte for the first value.  You should be reading 2, just like you&#39;re writing 2."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498684189, "post_id": 44811091, "comment_id": 76605784, "body": "@dbush It&#39;s been a long exhausting day.. Thanks haha"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1498678629, "last_edit_date": 1498678629, "creation_date": 1498678387, "answer_id": 44811091, "question_id": 44810948, "link": "https://stackoverflow.com/questions/44810948/writing-a-byte-to-a-file-and-then-reading-the-same-byte-are-not-the-same/44811091#44811091", "title": "Writing a byte to a file and then reading the same byte are not the same", "body": "<p>You write the time at once with <code>fwrite</code>, which uses the native byte ordering, then you explicitly read the individual bytes in big-endian format (most significant byte first).  Your machine is likely using little-endian format for byte ordering, which would explain the difference.</p>\n\n<p>You need to read/write in a consistent manner.  The simplest way to do this is to <code>fread</code> one variable at a time, just like you're writing:</p>\n\n<pre><code>fread(&amp;recordNum, sizeof(recordNum), 1, file); \nfread(&amp;charval, sizeof(charval), 1, file); \nfread(&amp;time, sizeof(time), 1, file);\n</code></pre>\n\n<p>Also note the use of <code>sizeof</code> to calculate the size.</p>\n"}, {"comments": [{"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498681453, "post_id": 44811898, "comment_id": 76604411, "body": "Thanks for your reply. Yes I would use time_t if I could, but unfortunately I only have 4 bytes for the timestamp, and I believe that time_t is much bigger than that. So I had to convert it to seconds.  I will try what you said and get back to you. Thanks!"}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498681487, "post_id": 44811898, "comment_id": 76604423, "body": "Also, I have another question. Can you specify what endianness you want to use?"}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "reply_to_user": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498682015, "post_id": 44811898, "comment_id": 76604726, "body": "No, you can&#39;t specify endian-ness, it is based on the type of processor.  If you want to make sure your data is always the same endian-ness on disk, use (for a 32 bit int) <code>htonl()</code> before writing the value to disk, and <code>ntohl()</code> when reading it back from the disk to memory.  And that way, your data will always be big-endian on disk and the functions will do any conversion necessary bringing it in and out of memory (if you are on a big-endian machine, the functions do nothing, if you are on a little-endian machine, they will reverse the order)."}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "reply_to_user": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498682222, "post_id": 44811898, "comment_id": 76604818, "body": "And yea, I do believe that time_t is 64 bits on most operating systems now.  The old 32 bit epoch time was doomed to run out of space in 2038.. so it&#39;s been slowly moving to 64 bits.  It&#39;s likely that humanity won&#39;t exist anymore when that runs out...."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498683088, "post_id": 44811898, "comment_id": 76605239, "body": "So suppose I wanted to use these htonl() and ntohl() functions.. Before I write anything to a file I would first need to call one of these functions on that variable? And secondly, what about uint8_t variables? I imagine you wouldn&#39;t need to call any of those functions on it?"}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "reply_to_user": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498686333, "post_id": 44811898, "comment_id": 76606726, "body": "No, uint8_t being a single byte under any circumstances you would likely encounter, does not have endian-ness issues.  However, these functions I am telling you about are at least 30 years old, maybe older, and therefore there&#39;s no 64 bit function I know of.. but someone must have added one by now.  You&#39;ll have to do a bit of looking around if you need to save 64 bit integers."}, {"owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "edited": false, "score": 0, "creation_date": 1498693893, "post_id": 44811898, "comment_id": 76609015, "body": "Luckily I&#39;m not using any 64 bit integers. Only 32 bit."}], "tags": [], "owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "is_accepted": true, "score": 2, "last_activity_date": 1499188121, "last_edit_date": 1499188121, "creation_date": 1498681346, "answer_id": 44811898, "question_id": 44810948, "link": "https://stackoverflow.com/questions/44810948/writing-a-byte-to-a-file-and-then-reading-the-same-byte-are-not-the-same/44811898#44811898", "title": "Writing a byte to a file and then reading the same byte are not the same", "body": "<p>You problem is probably right here:</p>\n\n<pre><code>uint32_t timestamp =(uint32_t)record[6] | (uint32_t)record[5] &lt;&lt; 8 | (uint32_t)record[4] &lt;&lt; 16 | (uint32_t)record[3] &lt;&lt; 24;\nprintf(\"Testing timestamp = %d\\n\", timestamp);\n</code></pre>\n\n<p>You've used fwrite to write out a 32 bit integer.. in whatever order the processor stored it in memory.. and you don't actually know what byte ordering (endian-ness) the machine used.  Maybe the first byte written out is the lowest byte of the integer, or maybe it's the highest byte of the integer. </p>\n\n<p>If you're reading and writing the data on the same machine, or on different machines with the same architecture, you don't need to care about that.. it will work.  But if the data is written on an architecture with one byte ordering, and potentially read in on an architecture with another byte ordering, it will be wrong:  Your code needs to know what order the bytes should be in memory and what order they will be read/written on disk.</p>\n\n<p>In this case, in your code, you are doing a mix of both: You write them out in whatever endian-ness the machine uses natively.. then when you read them in, you start shifting the bits around as if you know what order they were originally in.. but you don't, because you didn't pay attention to the order when you wrote them out.</p>\n\n<p>So if you're writing and reading the file on the same machine, or identical machine (same processor, OS, compiler, etc), just write them out in the native order (without worrying about what that is) and then read them back in exactly as you wrote them out.  If you write them and read them on the same machine, it'll work.</p>\n\n<p>So if your timestamp is located at offset 3 through 6 of your record, just do this:</p>\n\n<pre><code>uint_32t timestamp;\nmemcpy(&amp;timestamp, record+3, sizeof(timestamp);\n</code></pre>\n\n<p>Note that you cannot directly cast <code>record+3</code> to a uint32_t pointer because it might violate the systems word alignment requirements.</p>\n\n<p>Note also that you should probably be using <code>time_t</code> type to hold the timestamp, if you're on a unix-like system, that'll be the natural type supplied to hold epoch time values.</p>\n\n<p>But if you are planning to move this file to another machine at any point and try to read it there, you could easily end up with your data on a system that has different endian-ness or different size for time_t.  Simply writing bytes in and out of a file with no thought to the endian-ness or size of types on different operating systems is just fine for temporary files or for files which are meant to be used on one computer only and which will never be moved to other types of system.</p>\n\n<p>Making data files that are portable between systems is a whole subject in itself.  But the first thing you should do, if you care about that, is to look at functions <code>htons()</code>, <code>ntonhs()</code>, <code>htonl()</code>, <code>ntonhl()</code>, and their ilk.. which convert to and from the system native endian-ness to a known (big) endian-ness which is the standard for internet communications and generally used for interoperability (even though Intel processors are little-endian and dominate the market these days).  These function do something similar to what you were doing with your bit-shifting but since someone else wrote it, you don't have to.  It's a lot easier to use the library functions for this!</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main() {\n\n    uint32_t x = 1234, y, z;\n\n    // open a file for writing, convert x from native to big endian, write it.\n    FILE *file = fopen(\"foo.txt\", \"w\");\n    z = htonl(x);\n    fwrite(&amp;z, sizeof(z), 1, file);\n    fclose(file);\n\n    file = fopen(\"foo.txt\", \"r\");\n    fread(&amp;z, sizeof(z), 1, file);\n    x = ntohl(z);\n    fclose(file);        \n\n    printf(\"%d\\n\", x);\n</code></pre>\n\n<p>}</p>\n\n<p>NOTE I am NOT CHECKING FOR ERRORS in this code, it is just an example.. do not use functions like fopen, fread etc without checking for errors.</p>\n\n<p>By using these functions both when writing the data out to disk and when reading it back, you guarantee that the data on disk is always big-endian.. eg <code>htonl()</code> when on a big-endian platform does nothing, when on a little-endian platform it does the conversion from bit to little endian.  And <code>ntohl()</code> does the opposite.  So your data on disk will always be read in correctly.</p>\n"}], "owner": {"reputation": 887, "user_id": 5408344, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2afdcc914aa274f5e3442ac6ceb0d60c?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/5408344/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 44811898, "answer_count": 2, "score": 2, "last_activity_date": 1499188121, "creation_date": 1498677817, "last_edit_date": 1498679997, "question_id": 44810948, "link": "https://stackoverflow.com/questions/44810948/writing-a-byte-to-a-file-and-then-reading-the-same-byte-are-not-the-same", "title": "Writing a byte to a file and then reading the same byte are not the same", "body": "<p>Basically I have a file, and in this file I am writing 3 bytes, and then I'm writing a 4 byte integer. In another application I read the first 3 bytes, and then I read the next 4 bytes and convert them to an integer.</p>\n\n<p>When I print out the value, I have very different results... </p>\n\n<pre><code>fwrite(&amp;recordNum, 2, 1, file);    //The first 2 bytes (recordNum is a short int)\nfwrite(&amp;charval, 1, 1, file);      //charval is a single byte char\nfwrite(&amp;time, 4, 1, file);\n// I continue writing a total of 40 bytes\n</code></pre>\n\n<p>Here is how time was calculated:</p>\n\n<pre><code>time_t rawtime;\nstruct tm * timeinfo;\n\ntime(&amp;rawtime);\ntimeinfo = localtime(&amp;rawtime);\n\nint time = (int)rawtime;\n</code></pre>\n\n<p>I have tested to see that sizeof(time) is 4 bytes, and it is. I have also tested using an epoch converter to make sure this is the correct time (in seconds) and it is. </p>\n\n<p>Now, in another file I read the 40 bytes to a char buffer:</p>\n\n<pre><code>char record[40];\nfread(record, 1, 40, file);\n\n// Then I convert those 4 bytes into an uint32_t\nuint32_t timestamp =(uint32_t)record[6] | (uint32_t)record[5] &lt;&lt; 8 | (uint32_t)record[4] &lt;&lt; 16 | (uint32_t)record[3] &lt;&lt; 24;\n\nprintf(\"Testing timestamp = %d\\n\", timestamp);\n</code></pre>\n\n<p>But this prints out -6624. The expected value is 551995007.</p>\n\n<hr>\n\n<p>EDIT</p>\n\n<p>To be clear, everything else that I am reading from the char buffer is correct. After this timestamp I have text, which I simply print and it runs fine. </p>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 2, "creation_date": 1498675395, "post_id": 44810247, "comment_id": 76600880, "body": "<code>&quot;\\0&quot;</code> is not 2 characters, but one (it gets translated to 1), in memory. So 7 alphabetical characters, and 2 <code>\\0</code> (one in the middle, one at the end) makes 9. In memory it would be <code>67 64 62 00 65 61 68 72 00</code>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1498675536, "post_id": 44810247, "comment_id": 76600983, "body": "<code>\\0</code>, <code>\\n</code>, <code>\\t</code>, <code>\\a</code>, <code>\\x42</code>, ... are only 1 char each"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1498675614, "post_id": 44810247, "comment_id": 76601036, "body": "<code>sizeof</code> does not count the number of bytes in your source code ... It gives you the size of a C data structure."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1498675932, "post_id": 44810247, "comment_id": 76601218, "body": "See <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.4\" rel=\"nofollow noreferrer\">6.4.4.4 in the C11 standard</a>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1498676366, "post_id": 44810247, "comment_id": 76601509, "body": "You should use the right specifier. =&gt;&gt; <code>%zu</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498677189, "post_id": 44810247, "comment_id": 76601985, "body": "1) C does not have a string type. 2) An array is not a string (but a C string is an array)."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498675695, "post_id": 44810327, "comment_id": 76601087, "body": "so if I understand correctly: &quot;\\&quot; doesn&#39;t count as a string element?"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "reply_to_user": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 1, "creation_date": 1498675745, "post_id": 44810327, "comment_id": 76601113, "body": "@Mike.e87 It&#39;s an escape character. If you want one in a string, you have to escape it: <code>&quot;\\\\&quot;</code>."}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498676257, "post_id": 44810327, "comment_id": 76601438, "body": "@tilz0R, ok that&#39;s clear now. Is &quot;\\0&quot; treated as an escaped 0 ( an escape character that doesn&#39;t count and a 0 followed by?)or as a NULL character (in this case in the middle of the char array)"}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498676290, "post_id": 44810327, "comment_id": 76601461, "body": "<code>\\0</code> is treated as <code>0</code> number itself."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498676473, "post_id": 44810327, "comment_id": 76601572, "body": "@Mike.e87 why did you change correct answer like twice already?"}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498676605, "post_id": 44810327, "comment_id": 76601648, "body": "uh sorry... I&#39;m new to Stackoverflow and this is my first post. I didn&#39;t really know how it worked so I ticked all of the answers as all of them were very helpful. Sorry again for the mess"}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498676656, "post_id": 44810327, "comment_id": 76601678, "body": "@Mike.e87 so, be kind and mark correct answer as it was at first place, from dbush."}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1498676638, "last_edit_date": 1498676638, "creation_date": 1498675607, "answer_id": 44810327, "question_id": 44810247, "link": "https://stackoverflow.com/questions/44810247/sizeofstring-not-including-a-sign/44810327#44810327", "title": "sizeof(string) not including a &quot;\\&quot; sign", "body": "<p>Why should <code>char str[]=\"gdb\\0eahr\";</code> be <code>10</code> bytes with <code>sizeof</code> operator? It is 9 bytes because there are <code>8</code> string elements + <em>trailing zero</em>.</p>\n\n<p><code>\\0</code> is only 1 character, not 2. <code>\\</code>'s purpose is to escape characters, therefore you might see some of these: <code>\\t</code>, <code>\\n</code>, <code>\\\\</code> and others.</p>\n\n<p>Strlen returns 3 because you have <em>string termination</em> at position <code>str[3]</code>.</p>\n\n<p>Single sequence of <code>\\</code> acts as <em>escape character</em> and is not part of string size. If you want to literally use <code>\\</code> in your string, you have to write it twice in sequence like <code>\\\\</code>, then this is single <code>char</code> of <code>\\</code> printable char.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498676064, "post_id": 44810342, "comment_id": 76601308, "body": "I get it now! Thanks man, You&#39;re a Legend! I had no idea that two of these are translated into a null character! thanks!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1498676146, "post_id": 44810342, "comment_id": 76601366, "body": "@Mike.e87 Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1498675667, "creation_date": 1498675667, "answer_id": 44810342, "question_id": 44810247, "link": "https://stackoverflow.com/questions/44810247/sizeofstring-not-including-a-sign/44810342#44810342", "title": "sizeof(string) not including a &quot;\\&quot; sign", "body": "<p>It seems you already have the answer:</p>\n\n<blockquote>\n  <p>At first I was pretty sure that 2 separate characters \"\\\" followed by \"0\" wouldn't actually act as a NULL \"\\0\" but I managed to figure that it does.</p>\n</blockquote>\n\n<p>The sequence <code>\\0</code> is an octal escape sequence for the byte 0.  So while there are two characters in the code to denote this, it translated to a single byte in the string.</p>\n\n<p>So you have 7 alphabetic characters, a null byte in the middle, and a null byte at the end.  That's 9 bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1498676258, "creation_date": 1498676258, "answer_id": 44810508, "question_id": 44810247, "link": "https://stackoverflow.com/questions/44810247/sizeofstring-not-including-a-sign/44810508#44810508", "title": "sizeof(string) not including a &quot;\\&quot; sign", "body": "<p>In a character or string constant, the <code>\\</code> character marks the beginning of an <em>escape sequence</em>, used to represent character values for which there isn't a symbol in the source character set.  For example, the escape sequence <code>\\n</code> represents the newline character, <code>\\b</code> represents the backspace character, <code>\\0</code> represents the zero-valued character (which is also the string terminator), etc. </p>\n\n<p>In the string literal <code>\"gdb\\0eahr\"</code>, the escape sequence <code>\\0</code> maps to a single 0-valued character; the actual contents of <code>str</code> are <code>{'g', 'd', 'b', 0, 'e', 'a', 'h', 'r', 0}</code>.  </p>\n"}, {"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 0, "last_activity_date": 1498683718, "last_edit_date": 1498683718, "creation_date": 1498678484, "answer_id": 44811135, "question_id": 44810247, "link": "https://stackoverflow.com/questions/44810247/sizeofstring-not-including-a-sign/44811135#44811135", "title": "sizeof(string) not including a &quot;\\&quot; sign", "body": "<p>The C compiler scans text strings as a part of compiling the source code and during the scan any special, escape sequences of characters are turned into a single character. The symbol backslash (\\) is used to indicate the start of an escape sequence.</p>\n\n<p>There are several formats for escape sequences. The most basic is a backslash followed by one of several special letters. These two characters are then translated into a single character. Some of these are:</p>\n\n<ul>\n<li>'\\n' is turned into a line feed character (0x0A or decimal 10)</li>\n<li>'\\t' is turned into a tab character (0x09 or decimal 9)</li>\n<li>'\\r' is turned into a carriage return character (0x0D or decimal 13)</li>\n<li>'\\\\' is turned into a backslash character (0x5C)</li>\n</ul>\n\n<p>This escape sequence idea was used back in the old days so that when a line of text was printed to a teletype machine or printer or a CRT terminal, the programmer could use these and other special command code characters to set where the next character would be printed or to cause the device to do some physical action like ring a bell or feed the paper to the next line.</p>\n\n<p>The escape character also allowed you to embed a double quote (\") or a single quote (') into a text string so that you could print text that contain quote marks.</p>\n\n<p>In addition to the above special sequences of backslash followed by a letter there was also a way to specify any character by using a backslash followed by one up to three octal digits (0 through 7). So you could specify a line feed character by either using '\\n' or you could use '\\12' where 12 is the octal representation of the hexadecimal value A or the decimal value 10.</p>\n\n<p>Then the ability to use a hexadecimal escape sequence was introduced with the backslash followed by the letter x followed by one or more hexadecimal digits. So you can write a line feed character with '\\n' or '\\12' or '\\xa'.</p>\n\n<p>See also <a href=\"https://en.wikipedia.org/wiki/Escape_sequences_in_C\" rel=\"nofollow noreferrer\">Escape sequences in C in Wikipedia</a>.</p>\n"}], "owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 44810342, "answer_count": 4, "score": 0, "last_activity_date": 1498683718, "creation_date": 1498675327, "last_edit_date": 1498676541, "question_id": 44810247, "link": "https://stackoverflow.com/questions/44810247/sizeofstring-not-including-a-sign", "title": "sizeof(string) not including a &quot;\\&quot; sign", "body": "<p>I've been going through <code>strlen</code> and <code>sizeof</code> for strings (char arrays) and I don't quite get one thing.\nI have the following code:</p>\n\n<pre><code>int main() {\n    char str[]=\"gdb\\0eahr\";\n    printf(\"sizeof=%u\\n\",sizeof(str));\n    printf(\"strlen=%u\\n\",strlen(str));\n    return 0;\n}\n</code></pre>\n\n<p>the output of the code is:</p>\n\n<pre><code>sizeof=9  \nstrlen=3\n</code></pre>\n\n<p>At first I was pretty sure that 2 separate characters <code>\\</code> followed by <code>0</code> wouldn't actually act as a <code>NUL</code> (<code>\\0</code>) but I managed to figure that it does. \nThe thing is that I have no idea why <code>sizeof</code> shows 9 and not 10.\nSince <code>sizeof</code> counts the amount of used bytes by the data type why doesn't it count the byte for the <code>\\</code>? </p>\n\n<p>In a following example:</p>\n\n<pre><code>char str[]=\"abc\";\nprintf(\"sizeof=%u\\n\",sizeof(str));\n</code></pre>\n\n<p>that would print out \"4\" because of the <code>NUL</code> value terminating the array so why is <code>\\</code> being not counted? </p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 3, "creation_date": 1498675348, "post_id": 44810228, "comment_id": 76600857, "body": "You&#39;re incrementing <code>i</code> twice inside the loop."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1498675356, "post_id": 44810228, "comment_id": 76600861, "body": "you&#39;re incrementing i twice"}, {"owner": {"reputation": 13, "user_id": 8185629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpItc.jpg?s=128&g=1", "display_name": "Mark0n1", "link": "https://stackoverflow.com/users/8185629/mark0n1"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498675634, "post_id": 44810228, "comment_id": 76601045, "body": "@Jean-Fran&#231;oisFabre that is so stupid from me,i missed that, what a uselles question now i see,thanks"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498677866, "post_id": 44810228, "comment_id": 76602331, "body": "Note: Don&#39;t state the obvious in your comments. Such comments don&#39;t make your code anything better readable, but just add pointless noise. Write what you intend instead! If you have to comment every single line, your code is wrong."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498677952, "post_id": 44810228, "comment_id": 76602382, "body": "And <code>main()</code> is an invalid signature and not even standard. Implicit <code>int</code> is not allowed!"}, {"owner": {"reputation": 13, "user_id": 8185629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpItc.jpg?s=128&g=1", "display_name": "Mark0n1", "link": "https://stackoverflow.com/users/8185629/mark0n1"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498678728, "post_id": 44810228, "comment_id": 76602790, "body": "@Olaf Ok i will listen your advice in the next post for the comments thanks"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8185629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpItc.jpg?s=128&g=1", "display_name": "Mark0n1", "link": "https://stackoverflow.com/users/8185629/mark0n1"}, "edited": false, "score": 0, "creation_date": 1498675814, "post_id": 44810319, "comment_id": 76601156, "body": "I thought the counter will be incremented just ones.. thanks"}], "tags": [], "owner": {"reputation": 1559, "user_id": 3741900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RUtHI.jpg?s=128&g=1", "display_name": "Cornel Raiu", "link": "https://stackoverflow.com/users/3741900/cornel-raiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1498675586, "creation_date": 1498675586, "answer_id": 44810319, "question_id": 44810228, "link": "https://stackoverflow.com/questions/44810228/what-will-be-the-result-of-next-function-and-array-in-main/44810319#44810319", "title": "What will be the result of next function and array in main?", "body": "<p>replace </p>\n\n<pre><code>printf(\"%d\",a[i++]);// printing on the screen integers (a[i],i=i+1)//\n</code></pre>\n\n<p>with</p>\n\n<pre><code>printf(\"%d\",a[i]);// printing on the screen integers (a[i],i=i+1)//\n</code></pre>\n\n<p>in your code you were incrementing i twice. Once in the while and once in the a[i++]</p>\n"}, {"comments": [{"owner": {"reputation": 1559, "user_id": 3741900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RUtHI.jpg?s=128&g=1", "display_name": "Cornel Raiu", "link": "https://stackoverflow.com/users/3741900/cornel-raiu"}, "edited": false, "score": 0, "creation_date": 1498676042, "post_id": 44810354, "comment_id": 76601292, "body": "Maybe the OP also wants a new line after each number. So braces in the for loop that would hod both printf() functions or mix it into a single printf(&quot;%d \\n&quot;,a[i]); would look even nicer."}, {"owner": {"reputation": 13, "user_id": 8185629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpItc.jpg?s=128&g=1", "display_name": "Mark0n1", "link": "https://stackoverflow.com/users/8185629/mark0n1"}, "edited": false, "score": 0, "creation_date": 1498676378, "post_id": 44810354, "comment_id": 76601517, "body": "Thanks a lot,also i had a problem with newline i tought that the function will print on the screen numbers each one in newline but now i see that it will be mixed into the one printf"}, {"owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "reply_to_user": {"reputation": 1559, "user_id": 3741900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RUtHI.jpg?s=128&g=1", "display_name": "Cornel Raiu", "link": "https://stackoverflow.com/users/3741900/cornel-raiu"}, "edited": false, "score": 1, "creation_date": 1498676483, "post_id": 44810354, "comment_id": 76601581, "body": "You&#39;re welcome. You can either do it in one statement, or do it like for(i = 0; i &lt; n; i++){         printf(&quot;%d&quot;,a[i]);     printf(&quot;\\n&quot;); } @cornel.raiu turns out you&#39;re right :)"}, {"owner": {"reputation": 1559, "user_id": 3741900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RUtHI.jpg?s=128&g=1", "display_name": "Cornel Raiu", "link": "https://stackoverflow.com/users/3741900/cornel-raiu"}, "edited": false, "score": 0, "creation_date": 1498676701, "post_id": 44810354, "comment_id": 76601710, "body": "@Vlad Dinev Guessed so :)"}], "tags": [], "owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "is_accepted": true, "score": 1, "last_activity_date": 1498675697, "creation_date": 1498675697, "answer_id": 44810354, "question_id": 44810228, "link": "https://stackoverflow.com/questions/44810228/what-will-be-the-result-of-next-function-and-array-in-main/44810354#44810354", "title": "What will be the result of next function and array in main?", "body": "<p>Please make sure you are posting properly formatted valid C code. </p>\n\n<p>Note that what you get is not one hundred and thirty five, but one, three, and five. You get that because you are incrementing the loop counter twice.\nHere's a working, more readable version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid function(int a[],int n)\n{\n    int i;\n    for(i = 0; i &lt; n; i++)\n        printf(\"%d \",a[i]);\n    printf(\"\\n\");\n}\n\nint main(void)\n{\n    int a[]={1,2,3,4,5,6,7};\n    int n=5;\n    function(a,n); \n\n    return 0;\n}  \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8185629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpItc.jpg?s=128&g=1", "display_name": "Mark0n1", "link": "https://stackoverflow.com/users/8185629/mark0n1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1498681717, "accepted_answer_id": 44810354, "answer_count": 2, "score": -5, "last_activity_date": 1498675697, "creation_date": 1498675252, "last_edit_date": 1498675421, "question_id": 44810228, "link": "https://stackoverflow.com/questions/44810228/what-will-be-the-result-of-next-function-and-array-in-main", "closed_reason": "Not suitable for this site", "title": "What will be the result of next function and array in main?", "body": "<p>today i tried to do something new,but i didn't do that correct.Would anyone be able to do that and explain why is it so like that? Thank you in advance</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid function(int a[],int n)/*The definition of function with void type,with parameters\nint a[],int n */\n{\n  int i;// declared count,type integer//\n\n  for(i=0;i&lt;n;i++)//count goes from 0,to &lt;n,and increment all time while goes//\n      printf(\"%d\",a[i++]);// printing on the screen integers (a[i],i=i+1)//\n  printf(\"\\n\");// printing the newline //\n}\n\nmain()\n{\n  int a[]={1,2,3,4,5,6,7}; // declaration of array with 7 elements //\n  int n=5;// declaration of variable n type integer value of 5 //\n\n  function(a,n) // calling the function with parametres a,n//\n} // end of sequence //\n</code></pre>\n\n<p>In my case i got the result of the <strong>1,2,3,4</strong>,because i tought that the count goes from 1,to the one number less than n=5,but the IDE show the result of <strong>135</strong> ,i think the problem in my way is with counter...but all advices are welcome,thanks</p>\n"}, {"tags": ["android", "c", "build", "openjdk"], "comments": [{"owner": {"reputation": 15397, "user_id": 3290339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMy5l.jpg?s=128&g=1", "display_name": "Onik", "link": "https://stackoverflow.com/users/3290339/onik"}, "edited": false, "score": 0, "creation_date": 1503790024, "post_id": 44810008, "comment_id": 78759880, "body": "Under the assumption OpenJDK is OK and if remember correctly, you should also update <code>javah</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 8216351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1924a6bd80575731b3bfe903c853b7ac?s=128&d=identicon&r=PG&f=1", "display_name": "iamJP", "link": "https://stackoverflow.com/users/8216351/iamjp"}, "is_accepted": false, "score": 1, "last_activity_date": 1498774939, "last_edit_date": 1498774939, "creation_date": 1498773795, "answer_id": 44835691, "question_id": 44810008, "link": "https://stackoverflow.com/questions/44810008/unable-to-build-android-due-to-incorrect-java/44835691#44835691", "title": "Unable to build android due to incorrect java", "body": "<p>You need to get the Sun/Oracle JDK, and you are currently using the OpenJDK.</p>\n\n<p>Sun/Oracle JDK is the JDK supported. (Sun is owned by Oracle)</p>\n\n<p>The makefile output answered your question.  It must be checking and enforcing the use of Sun/Oracle JDK.</p>\n\n<blockquote>\n  <p>You use OpenJDK but only Sun/Oracle JDK is supported.</p>\n  \n  <p>Please follow the machine setup instructions at\n      <a href=\"https://source.android.com/source/download.html\" rel=\"nofollow noreferrer\">https://source.android.com/source/download.html</a></p>\n</blockquote>\n\n<p>You need to install the Sun/Oracle JDK and then run </p>\n\n<pre><code>sudo update-alternatives --config java\n</code></pre>\n\n<p>Pick the newly installed version.</p>\n"}, {"tags": [], "owner": {"reputation": 6189, "user_id": 1074998, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f8b11e39cecf2f221e62e508b8c2a354?s=128&d=identicon&r=PG&f=1", "display_name": "Fruit", "link": "https://stackoverflow.com/users/1074998/fruit"}, "is_accepted": false, "score": 0, "last_activity_date": 1534443288, "creation_date": 1534443288, "answer_id": 51883092, "question_id": 44810008, "link": "https://stackoverflow.com/questions/44810008/unable-to-build-android-due-to-incorrect-java/51883092#51883092", "title": "Unable to build android due to incorrect java", "body": "<p>I thought I solve this error by reboot computer, <code>make</code> again and the error is gone by unknown reason. But now I just found myself very ridiculous when I try to start the emulator.</p>\n\n<p>Need to re-source to make emulator run with correct environment, <a href=\"https://stackoverflow.com/a/12909497/1074998\">see here</a></p>\n\n<pre><code>xb@dnxb:~/Downloads/android_src/hole$ . build/envsetup.sh\nxb@dnxb:~/Downloads/android_src/hole$ lunch aosp_bullhead-userdebug\n</code></pre>\n\n<p>Now run the emulator:</p>\n\n<pre><code>xb@dnxb:~/Downloads/android_src/hole$ emulator -sysdir out/target/product/generic/ -system out/target/product/generic/system.img -ramdisk out/target/product/generic/ramdisk.img -data out/target/product/generic/userdata.img -kernel prebuilts/qemu-kernel/arm/kernel-qemu-armv7 -memory 2048\nemulator: ERROR: Can't access ANDROID_PRODUCT_OUT as '/home/xiaobai/Downloads/android_src/hole/out/target/product/bullhead'\nYou need to build the Android system before launching the emulator\nxb@dnxb:~/Downloads/android_src/hole$\n</code></pre>\n\n<p>I just realized I only has <code>/home/xiaobai/Downloads/android_src/hole/out/target/product/generic/</code>, no such <code>bullhead</code>  (Nexus 5X). </p>\n\n<p>Now I know the reason why I success last time after reboot, this is because of it build with default generic lunch menu <code>aosp_arm-eng</code>, since I didn't redo the steps <code>. build/envsetup.sh</code> and <code>lunch aosp_bullhead-userdebug</code> before rerun <code>make</code>.</p>\n\n<p>And I can see my <code>/etc/environment</code> has this <code>JAVA_HOME</code> set, so <code>sudo update-alternatives --config java</code> never work since <code>/usr/lib/jvm/jdk1.8.0_131/</code> is Oracle/Sun, not Open JDK (my case is difference with OP,  whether requires one of Oracle/Sun or OpenJDK depends on lunch menu):</p>\n\n<pre><code>$ cat /etc/environment\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:$PATH\"\nJAVA_HOME=\"/usr/lib/jvm/jdk1.8.0_131/\"\n</code></pre>\n\n<p>Modify the <code>/etc/environment</code> to openjdk path (In Ubuntu, it can be download with <code>sudo apt-get install openjdk-8-jdk</code>, then use <code>dpkg -L openjdk-8-jdk</code> to locate the path ), open a new tab shell session, redo the <code>. build/envsetup.sh</code>, <code>lunch aosp_bullhead-userdebug</code>, and <code>make</code>, now it works without jdk error.</p>\n"}], "owner": {"reputation": 143, "user_id": 7753137, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/357532dc4822398d6ce77fb382f8ef0a?s=128&d=identicon&r=PG&f=1", "display_name": "acidlategamer", "link": "https://stackoverflow.com/users/7753137/acidlategamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1534443288, "creation_date": 1498674446, "last_edit_date": 1498718012, "question_id": 44810008, "link": "https://stackoverflow.com/questions/44810008/unable-to-build-android-due-to-incorrect-java", "title": "Unable to build android due to incorrect java", "body": "<p>I have ubuntu 14.04 and I am trying to build android for BBB. I got BBB android and visited this site to get the correct java.</p>\n\n<p>I took android source from this site</p>\n\n<p><a href=\"http://bbbandroid.sourceforge.net/build.html\" rel=\"nofollow noreferrer\">http://bbbandroid.sourceforge.net/build.html</a></p>\n\n<p>then followed steps for java from this site,</p>\n\n<p><a href=\"https://source.android.com/source/initializing#for-ubuntu-14-04\" rel=\"nofollow noreferrer\">https://source.android.com/source/initializing#for-ubuntu-14-04</a></p>\n\n<p>I did as the site said. </p>\n\n<p>then <strong>make -j4</strong> gave this build error,</p>\n\n<pre><code>============================================\nChecking build tools versions...\n************************************************************\nYou are attempting to build with an unsupported JDK.\n\nYou use OpenJDK but only Sun/Oracle JDK is supported.\nPlease follow the machine setup instructions at\n    https://source.android.com/source/download.html\n************************************************************\nbuild/core/main.mk:152: *** stop.  Stop.\n</code></pre>\n\n<p>Then I did this</p>\n\n<pre><code>**java -version**\nopenjdk version \"1.8.0_45-internal\"\nOpenJDK Runtime Environment (build 1.8.0_45-internal-b14)\nOpenJDK 64-Bit Server VM (build 25.45-b02, mixed mode)\n\n**sudo update-alternatives --config java**\n\nThere are 3 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                            Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      auto mode\n  1            /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java   1061      manual mode\n  2            /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java   1071      manual mode\n* 3            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\n\nPress enter to keep the current choice[*], or type selection number: 3\n\n**sudo update-alternatives --config javac**\nThere are 2 choices for the alternative javac (providing /usr/bin/javac).\n\n  Selection    Path                                         Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/java-8-openjdk-amd64/bin/javac   1081      auto mode\n  1            /usr/lib/jvm/java-6-openjdk-amd64/bin/javac   1061      manual mode\n* 2            /usr/lib/jvm/java-8-openjdk-amd64/bin/javac   1081      manual mode\n\nPress enter to keep the current choice[*], or type selection number: 2\n</code></pre>\n\n<p>again I checked the <strong>java -version</strong></p>\n\n<pre><code>openjdk version \"1.8.0_45-internal\"\nOpenJDK Runtime Environment (build 1.8.0_45-internal-b14)\nOpenJDK 64-Bit Server VM (build 25.45-b02, mixed mode)\n</code></pre>\n\n<p>Its still same as previously.</p>\n\n<ol>\n<li>What is the problem here?</li>\n<li>What exactly is supported by google's android, oracle jdk, sun jdk or open jdk?</li>\n</ol>\n"}, {"tags": ["c", "linux", "gcc", "pthreads", "c11"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498674239, "post_id": 44809769, "comment_id": 76600256, "body": "There is a <a href=\"https://en.wikipedia.org/wiki/Monitor_%28synchronization%29#Condition_variables\" rel=\"nofollow noreferrer\">Wiki article</a> discussing the exact question."}, {"owner": {"reputation": 179, "user_id": 1558176, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/489aa73936b86767aa4bd7b83f808f07?s=128&d=identicon&r=PG", "display_name": "John Green", "link": "https://stackoverflow.com/users/1558176/john-green"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498674676, "post_id": 44809769, "comment_id": 76600486, "body": "I think it is a bit different, just for comsumer/producer implementation. Indeed, I usie queue and wait conditions, but how to interrupt long task?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1498675048, "post_id": 44809769, "comment_id": 76600684, "body": "BTW, C11 has simple an <code>_Atomic</code> qualification for data types that does the trick. <code>sig_atomic_t</code> is never appropriate, its only guarantees are with respect to signal handlers, and there it only guarantees indivisibility, not the other memory consistency properties that you&#39;d want to have."}, {"owner": {"reputation": 179, "user_id": 1558176, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/489aa73936b86767aa4bd7b83f808f07?s=128&d=identicon&r=PG", "display_name": "John Green", "link": "https://stackoverflow.com/users/1558176/john-green"}, "edited": false, "score": 0, "creation_date": 1498675362, "post_id": 44809769, "comment_id": 76600865, "body": "I wrote about atomic in C11. I supposed to use sig_atomic_t when we have single working thread and edit it only in signal handler of current thread"}], "answers": [{"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": false, "score": 2, "last_activity_date": 1498697072, "creation_date": 1498697072, "answer_id": 44814631, "question_id": 44809769, "link": "https://stackoverflow.com/questions/44809769/posix-threads-the-best-interruption-method/44814631#44814631", "title": "POSIX threads: the best interruption method", "body": "<p>An alternative is to use a reader-writer lock (<code>pthread_rwlock_t</code>) to protect the flag, as your worker threads need to frequently read it but it is only written once.</p>\n\n<p>As long as the chunk that is processed in between checks of the flag isn't too small, the overhead will be insignificant.</p>\n"}], "owner": {"reputation": 179, "user_id": 1558176, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/489aa73936b86767aa4bd7b83f808f07?s=128&d=identicon&r=PG", "display_name": "John Green", "link": "https://stackoverflow.com/users/1558176/john-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498697072, "creation_date": 1498673544, "last_edit_date": 1498673724, "question_id": 44809769, "link": "https://stackoverflow.com/questions/44809769/posix-threads-the-best-interruption-method", "title": "POSIX threads: the best interruption method", "body": "<p>The first thing, which I was told when had started working with pthreads, was - you should avoid force thread cancelation, like pthread_cancel. Instead we should use thread cancel notification via threads communication channel. </p>\n\n<p>If we have a really long task to run in the thread, we split this task into small chunks and check the cancelation flag after each chunk processing. Like this:</p>\n\n<pre><code>loop {\n    process_chunk();\n    if (check_cancel_flag())\n        break;\n}\n</code></pre>\n\n<p>But what is the best approach for implementation of this check_cancel_flag() function?</p>\n\n<p>With all my experience in c and linux, I can remember only those methods:</p>\n\n<ol>\n<li><p>(If you have only one working thread) You can use sig_atomic_t as a type for the cancelation flag. Check it in check_cancel_flag() function and mark it as true in the thread` signal handler. Then just call pthread_kill from the main thread.</p></li>\n<li><p>Use any POD type for cancelation flag and protect it with a mutex. In this case you will get overhead with calling lock too often.</p></li>\n<li><p>Use mutex as cancelation flag. Check it with pthread_mutex_trylock call. If the main thread releases this mutex, it is time to shutdown for the worker thread.</p></li>\n<li><p>(For C11) Use gcc _atomic built-in functions (or another asm atomic library) to set and check cancelation flag.</p></li>\n</ol>\n\n<p>I could not remember nothing else.</p>\n\n<p>The question: How to choose correct approach?\nDo you know any bench mark about this problem?</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1498671286, "post_id": 44809159, "comment_id": 76598516, "body": "<code>gameRuntime(counter);</code> -&gt; <code>gameRuntime(&amp;counter);</code> Voting to close as a typo."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1498671349, "post_id": 44809159, "comment_id": 76598551, "body": "If your compiler didn&#39;t tell you exactly what the problem is, get a new compiler! Mine spits out several warnings that point directly to the problem."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1498671361, "post_id": 44809159, "comment_id": 76598559, "body": "A good way to avoid errors like that is to enable all compiler warnings, and fix them before running your code."}, {"owner": {"reputation": 386, "user_id": 5251592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYJJt.jpg?s=128&g=1", "display_name": "TSungur", "link": "https://stackoverflow.com/users/5251592/tsungur"}, "edited": false, "score": 1, "creation_date": 1498671683, "post_id": 44809159, "comment_id": 76598730, "body": "Besides compiler errors there are also logic errors in your code. Leaving everything aside, the reason your code did not work as expected without pointers (&quot;I tried to pass just the variable counter through gameRuntime()...&quot;) is that you ran the function gameRuntime(counter) but did not save/assign the return value (processed new value of counter) of this function and didn&#39;t use this new value in your code. Just revert your code to the state before using pointers and instead of gameRuntime(counter) use counter=gameRuntime(counter);"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1498671228, "creation_date": 1498671228, "answer_id": 44809174, "question_id": 44809159, "link": "https://stackoverflow.com/questions/44809159/running-into-a-segfault-when-referencing-pointer/44809174#44809174", "title": "Running into a segfault when referencing pointer", "body": "<p>Change</p>\n\n<pre><code>gameRuntime(counter);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>gameRuntime(&amp;counter);\n</code></pre>\n\n<p>You are passing the value of <code>counter</code>, and then you used it like if it was the address of something (<em>you dereferenced the pointer</em>). It does compile because pointers and <code>int</code>s are interchangeable in c, but that doesn't mean that the behavior is defined. It should however, generate a warning about pointer to <code>int</code> conversion. You can also, convert all warnings to errors to prevent compilation in case of a warning.</p>\n\n<p>Warnings can be ignored in very rare cases, so as a rule of thumb make your compiler warn about everything it can and if possible, let it treat warnings as errors.</p>\n\n<p>By applying the suggested fix, you pass the address of <code>counter</code>, which is a pointer holding the location of <code>counter</code> in memory, thus you can then affect the value at that location by dereferencing the pointer.</p>\n"}], "owner": {"reputation": 148, "user_id": 8195210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2aa132c70a4eb3b467ce8a3368a82c1c?s=128&d=identicon&r=PG&f=1", "display_name": "displayName", "link": "https://stackoverflow.com/users/8195210/displayname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498671228, "creation_date": 1498671157, "question_id": 44809159, "link": "https://stackoverflow.com/questions/44809159/running-into-a-segfault-when-referencing-pointer", "title": "Running into a segfault when referencing pointer", "body": "<p>I'm taking an intro to C programming course, and I'm trying to understand pointers, and how exactly they work. I tried to pass just the variable <code>counter</code> through <code>gameRuntime();</code>, but <code>counter</code> wasn't being returned towards after the while loop. So, I opted to use a pointer. And now I'm in a bigger mess than I started. </p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint *gameRuntime(int *counter)\n{\n    srand(time(NULL));\n    int random = rand() % 100 + 1;\n    printf(\"&gt; %d &lt;\\n\", random);\n        int guess;\n        *counter = 1;\n        int local_counter = (*counter);\n        while ((guess != random) &amp;&amp; (local_counter &lt;= 10))\n        {\n            printf(\"\\n-----------------------\\n\");\n            printf(\"What is your guess?\\n-----------------------\\n&gt; \");\n            scanf(\"%d\", &amp;guess);\n\n            if ((guess &gt; 100) || (guess &lt; 1))\n            {\n                printf(\"Please choose a number between 1 and 100\\n\");\n            }\n            else if (guess &lt; random)\n            {\n                printf(\"My number is larger than %d!\\n\", guess);\n                    local_counter++;\n                printf(\"%d guesses left!\\n\", (11 - local_counter));\n            }\n            else if (guess &gt; random)\n            {\n                printf(\"My number is less than %d!\\n\", guess);\n                    local_counter++;\n                printf(\"%d guesses left!\\n\", (11 - local_counter));\n            }\n            else if (guess == random)\n            {\n                printf(\"You guessed it! My number was %d!\\n\", random);\n                printf(\"You found it with just %d guess(es)!\\n\", local_counter);\n            }\n        }\n        (*counter) = local_counter;\n        return counter;\n}\n\nint main()\n{\n    char quit;\n    int counter;\n    int random;\n\n    printf(\"Welcome to the Number Guess Game!\\n\");\n    printf(\"I chose a number between 1 and 100 and you have only 10 chances to guess it!\\n\\n\");\n    printf(\"Continue? [Y\\\\N]\\n\\n&gt; \");\n    scanf(\"%c\", &amp;quit);\n    if ((quit == 'n') || (quit == 'N'))\n    {\n        printf(\"Exiting....\");\n            return 0;\n    }\n    else\n    {\n        printf(\"\\n=*=+=*=+=*=+=*==*=+=*=+=*=+=*==*=+=*=+=*=+=*==*=+=*=+=+*\\n\");\n        printf(\"   ~       ~       ~       Ready?       ~       ~       ~   \\n\");\n        printf(\"=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*=+=*\\n\");\n        printf(\"\\n\");\n        printf(\"\\n-----------------------\");\n        printf(\"\\nOk, I've made up my mind!\\n\");\n        printf(\"-----------------------\\n\");\n    }\n\n    gameRuntime(counter);\n    printf(\"\\n---%d---\\n\", counter);\n\n    char continueGame;\n    while ((continueGame != 'N') || (continueGame != 'n'))\n    {\n        printf(\"\\n---%d---\\n\", counter);\n        if (counter &gt;= 10)\n        {\n            printf(\"SORRY! You could not find my number with 10 guesses!\\n\");\n            printf(\"My number was %d\\n\", random);\n            printf(\"Maybe next time!\\n\");\n            printf(\"\\nTry again? [Y\\\\N]\\n\");\n            scanf(\" %c\", &amp;continueGame);\n\n            if ((continueGame == 'Y') || (continueGame == 'y'))\n            {\n                gameRuntime(counter);\n            }\n            else\n            {\n                printf(\"Thanks for playing! See you later!\");\n                    return 0;\n            }\n        }\n        else\n        {\n            printf(\"Play again? [Y\\\\N]\\n&gt; \");\n            scanf(\" %c\", &amp;continueGame);\n\n            if ((continueGame == 'Y') || (continueGame == 'y'))\n            {\n                gameRuntime(counter);\n            }\n            else\n            {\n                printf(\"\\nThanks for playing! See you later!\");\n                    return 0;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Any help would be much appreciated, TIA</p>\n"}, {"tags": ["c", "taylor-series"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1498668754, "post_id": 44808441, "comment_id": 76596965, "body": "Hm... Parentheses around the division?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1498669432, "post_id": 44808441, "comment_id": 76597386, "body": "&quot;I have no idea why he wants it done this way&quot; - Did you ask?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498669631, "post_id": 44808441, "comment_id": 76597495, "body": "Gotta love the &quot;haven&#39;t taken math in +6 years so its turning the gears in my brain pretty hard&quot; as I have not taken math in 6*6 years, yet the gears seem OK."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498669764, "post_id": 44808441, "comment_id": 76597588, "body": "@chux Gears require some periodic maintenance."}, {"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1498670158, "post_id": 44808441, "comment_id": 76597831, "body": "You can optimize this a bit by calculating the exponent once, rather than in both the <code>power</code> and <code>fract</code> calls.  For instance in <code>mySin</code>, <code>int exp = 2 * i + 1;</code>  <code>sum = sum + sign * (power(x, exp) &#47; fact(exp));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498670330, "post_id": 44808663, "comment_id": 76597935, "body": "This approach may lead to numerical problems: adding very small numbers to a potentially large one loses precision quite early. Better do computation &quot;inside out&quot;, aka <a href=\"https://en.wikipedia.org/wiki/Horner%27s_method\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Horner%27s_method</a>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498670500, "post_id": 44808663, "comment_id": 76598028, "body": "@user58697 That&#39;s part of the trick I mentioned.  Each successive term gets smaller until adding the term results in no change.  That&#39;s when you stop."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498671133, "post_id": 44808663, "comment_id": 76598397, "body": "I think you miss my point. The sum of large and <i>very</i> small number is inaccurate due to floating point underflow while normalizing. You should start summation adding small numbers first, that is right to left. The Horner method avoids dealing with very small numbers whatsoever."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498671592, "post_id": 44808663, "comment_id": 76598683, "body": "@user58697 but using this method, there are no large numbers, since the power and factorial calculations are not needed."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498671959, "post_id": 44808663, "comment_id": 76598884, "body": "@user58697 ...although I see what you mean. Perhaps the terms can be stored in an array and afterwards summed from right to left."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1498672125, "post_id": 44808663, "comment_id": 76598987, "body": "@WeatherVane If the function internally uses a larger type like <code>long double</code> (assuming it&#39;s larger) but returns a <code>double</code>, any precision error will be removed when cast to the smaller type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1498674013, "post_id": 44808663, "comment_id": 76600100, "body": "@user58697 Adding right to left does help, but not by that much with <code>cos()</code>. I do  prefer to use that order.  I expect about 0.5 bit improvement - if that.  The trick, e.g. <code>cos()</code> is that even an early term like <code>x*x&#47;2</code> contains a 0.5 <a href=\"https://en.wikipedia.org/wiki/Unit_in_the_last_place\" rel=\"nofollow noreferrer\">ULP</a> error which is not recoverable using the &quot;L-R&quot; order.  I have tried various approaches with little improvement based on order.   With trig, I find reducing to the [0...pi/4] range a more useful improvement."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1498669448, "creation_date": 1498669448, "answer_id": 44808663, "question_id": 44808441, "link": "https://stackoverflow.com/questions/44808441/alternative-way-to-do-taylor-series-in-c/44808663#44808663", "title": "Alternative way to do Taylor series in C", "body": "<p>The use of the power and factorial functions is inefficient.  For each term, you're calculating the same set of products each time.  You're also building large numbers that can lead to loss of precision.</p>\n\n<p>Take a look at the definition of each series (here <code>^</code> denotes power and <code>!</code> denotes factorial):</p>\n\n<pre><code>e^x = 1 + x + x^2/2! + x^3/3! + x^4/4! + ...\nsin(x) = x - x^3/3! + x^5/5! - + x^7/7! + ...\ncos(x) = 1 - x^2/2! + x^4/4! - + x^6/6! + ...\n</code></pre>\n\n<p>For <code>e^x</code>, each term is <code>x/n</code> times the last, where <code>n</code> is the term number.  Similarly, for <code>sin(x)</code> and <code>cos(x)</code>, each term is <code>- x^2/((2n-1)*2n)</code> times the last.  Use that instead of a power function and a factorial function to compute each successive term.</p>\n\n<p>There's also a nice trick which involves a comparison which mathematically doesn't make sense but works because of the limited precision of floating point numbers to know when to stop calculating terms.  See if you can figure it out. </p>\n"}], "owner": {"reputation": 31, "user_id": 8227404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40231de14cc228977cdef4b1acae72e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hutch", "link": "https://stackoverflow.com/users/8227404/hutch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1498673338, "creation_date": 1498668680, "last_edit_date": 1498671197, "question_id": 44808441, "link": "https://stackoverflow.com/questions/44808441/alternative-way-to-do-taylor-series-in-c", "title": "Alternative way to do Taylor series in C", "body": "<p>In my class my professor wants us to use functions to solve a Taylor series for sinX, cosX and expX. </p>\n\n<p>I solved it relatively fast but when I went to turn it in he said he wanted me to use division first instead of multiplication, basically combining my <code>power</code> and <code>fact</code> functions. I have no idea why he wants it done this way because I am getting the correct answer but he won't accept the assignment until I do it. </p>\n\n<p>I tried several times to get my head around the solution but I'm not a Comp Sci major, and haven't taken math in 6+ years so its turning the gears in my brain pretty hard. Any help would be much appreciated.</p>\n\n<pre><code>double power(double x, int n)\n{\n    int     i = 0;\n    double  prod = 1.;\n\n    for ( ; i++ &lt; n; )\n        prod = prod * x;\n\n    return prod;\n}\n\ndouble fact (int n)\n{\n    int     i;\n    double prod = 1.;\n\n    for (i = 1; i &lt;= n; i++)\n        prod = prod * i;\n\n    return prod;\n}\n\ndouble mySin(double x)\n{\n    int     i, sign;\n    double  sum = 0;\n\n    for (i = 0, sign = 1; i &lt; 21; i++, sign = -sign)\n        sum = sum + sign * power(x, 2 * i + 1)/ fact(2 * i + 1);\n    return sum;\n}\n\ndouble myCos(double x)\n{\n    int     i, sign;\n    double  sum = 0;\n\n    for(i = 0, sign = 1; i &lt; 21; i++, sign = -sign)\n        sum = sum + sign *power(x,2 * i)/ fact(2 * i);\n    return sum;\n}\n\ndouble myExp(double x)\n{\n    int     i, sign;\n    double  sum = 0;\n\n    for(i = 0, sign = 1; i &lt; 21; i++, sign = sign)\n        sum = sum + sign * power(x, i)/ fact(i);\n    return sum;\n }\n</code></pre>\n"}, {"tags": ["c", "extern", "linkage"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1498665303, "post_id": 44807376, "comment_id": 76594764, "body": "The second one won&#39;t work. Actually none will work because of this mysterious <code>studio</code>..."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1498674133, "post_id": 44807376, "comment_id": 76600173, "body": "There&#39;s no such thing as &quot;external storage class&quot;. You&#39;re probably thinking of &quot;external linkage&quot;. See <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.2\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.2.2</a> (linkage) and <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.4\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.2.4</a> (storage duration). Note that linkage applies to <i>identifiers</i> while storage duration applies to <i>objects</i>; the difference is important."}], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 8216303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06fe902da0b8f3c637f121bc6bc97fd?s=128&d=identicon&r=PG&f=1", "display_name": "daya", "link": "https://stackoverflow.com/users/8216303/daya"}, "edited": false, "score": 0, "creation_date": 1498666824, "post_id": 44807700, "comment_id": 76595778, "body": "can you please tell me what is &#39;file scope&#39;?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 144, "user_id": 8216303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06fe902da0b8f3c637f121bc6bc97fd?s=128&d=identicon&r=PG&f=1", "display_name": "daya", "link": "https://stackoverflow.com/users/8216303/daya"}, "edited": false, "score": 1, "creation_date": 1498666999, "post_id": 44807700, "comment_id": 76595881, "body": "@daya Outside of any function or struct. Not in between any pair of curly braces."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 2, "last_activity_date": 1498666302, "creation_date": 1498666302, "answer_id": 44807700, "question_id": 44807376, "link": "https://stackoverflow.com/questions/44807376/cant-understand-difference-between-a-global-variable-and-a-variable-having-exte/44807700#44807700", "title": "Can&#39;t understand difference between a global variable and a variable having external storage class?", "body": "<p>None of my compilers (tcc, gcc, clang) accepts <code>extern int a = 10;</code> (with an initializer (=10)) at block scope. It's legal at file scope, as evidenced by an <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.9.2p4\" rel=\"nofollow noreferrer\">example from the standard</a>:</p>\n\n<pre><code>int i1 = 1;                    // definition, external linkage\nstatic int i2 = 2;             // definition, internal linkage\nextern int i3 = 3;             // definition, external linkage\nint i4;                        // tentative definition, external linkage\nstatic int i5;                 // tentative definition, internal linkage\nint   i1;                      // valid tentative definition, refers to previous\nint   i2;                      // 6.2.2 renders undefined, linkage disagreement\nint   i3;                      // valid tentative definition, refers to previous\nint   i4;                      // valid tentative definition, refers to previous\nint   i5;                      // 6.2.2 renders undefined, linkage disagreement\nextern    int   i1;            // refers to previous, whose linkage is external\nextern    int   i2;            // refers to previous, whose linkage is internal\nextern    int   i3;            // refers to previous, whose linkage is external\nextern    int   i4;            // refers to previous, whose linkage is external\nextern    int   i5;            // refers to previous, whose linkage is internal\n</code></pre>\n\n<p>where it is no different from <code>int a = 10;</code>, but both clang and gcc warn against it.</p>\n\n<p>Usually <code>extern</code> is used to refer to data objects defined elsewhere (it's optional with functions). Using it with definitions, though legal, is unusal. </p>\n"}, {"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": -1, "last_activity_date": 1498666448, "creation_date": 1498666448, "answer_id": 44807746, "question_id": 44807376, "link": "https://stackoverflow.com/questions/44807376/cant-understand-difference-between-a-global-variable-and-a-variable-having-exte/44807746#44807746", "title": "Can&#39;t understand difference between a global variable and a variable having external storage class?", "body": "<p>One difference I can think of is redeclaring variables. When declaring a global <code>a</code> it's OK to declare inside a function another local <code>a</code>. The compiler will use the local variable and there will be no compilation errors.</p>\n\n<p>However, using <code>extern int a</code> and then redeclaring <code>int a</code> will cause a compilation error. </p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1498667697, "last_edit_date": 1498667697, "creation_date": 1498667376, "answer_id": 44808057, "question_id": 44807376, "link": "https://stackoverflow.com/questions/44807376/cant-understand-difference-between-a-global-variable-and-a-variable-having-exte/44808057#44808057", "title": "Can&#39;t understand difference between a global variable and a variable having external storage class?", "body": "<p>As others have pointed out, your second example does not compile.  But this variation does:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint a = 10;\n\nint main(void) {\n    extern int a;\n    printf (\"%d\", a); \n}\n</code></pre>\n\n<p>Since I take you to be asking about the effect of the <code>extern</code> storage-class specifier, let's talk about this version of the code.</p>\n\n<p>By default, block-scoped variable declarations have no linkage and declare objects with automatic storage duration.  Such a variable is specific to one execution of the innermost containing block, and it cannot be directly accessed from outside.  If we declare a block-scope variable <code>extern</code>, however, we are declaring that in that scope we are using the identifier of a variable with external linkage.  That's probably what you mean by a \"global variable\".</p>\n\n<p>But a block-scope <code>extern</code> declaration is not permitted to be a <em>definition</em> of the object it declares.  For a variable, that means it must not include an initializer, and that it does not reserve any storage for such an object.  It merely declares that you intend to refer to an object defined elsewhere.  That's pretty pointless in a single-file example, but it is potentially useful for accessing an external variable provided by a different file, without making it accessible to every function in the current file.</p>\n\n<p>Example:</p>\n\n<h3>main.c:</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    extern int a;\n    printf(\"%d\\n\", a); \n    return 0;\n}\n</code></pre>\n\n<h3>other.c</h3>\n\n<pre><code>int a = 10;\n</code></pre>\n\n<p>If these separate source files are compiled and linked together then the resulting program has well-defined behavior: it prints \"10\" followed by a newline to its standard output.</p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 8216303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06fe902da0b8f3c637f121bc6bc97fd?s=128&d=identicon&r=PG&f=1", "display_name": "daya", "link": "https://stackoverflow.com/users/8216303/daya"}, "edited": false, "score": 0, "creation_date": 1498711311, "post_id": 44808531, "comment_id": 76613034, "body": "thanks your explanantion has completely cleared my doubt"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1498669012, "creation_date": 1498669012, "answer_id": 44808531, "question_id": 44807376, "link": "https://stackoverflow.com/questions/44807376/cant-understand-difference-between-a-global-variable-and-a-variable-having-exte/44808531#44808531", "title": "Can&#39;t understand difference between a global variable and a variable having external storage class?", "body": "<p>For starters according to the C Standard the function main without parameters shall be declared like</p>\n\n<pre><code>int main( void ) \n</code></pre>\n\n<p>This program</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain ( )    \n{\n    extern int a=10; \n    printf (\"%d\", a); \n}\n</code></pre>\n\n<p>is incorrect. According to the C Standard (6.7.9 Initialization)</p>\n\n<blockquote>\n  <p>5 If the declaration of an identifier has block scope, and the\n  identifier has external or internal linkage, the declaration <strong>shall\n  have no initializer for the identifier</strong>.</p>\n</blockquote>\n\n<p>However if you will remove the initializer as for example</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain ( )    \n{\n    extern int a; \n    printf (\"%d\", a); \n}\n</code></pre>\n\n<p>nevertheless the program will have undefined behavior. According to the C Standard (6.9 External definitions)</p>\n\n<blockquote>\n  <p>5 An external definition is an external declaration that is also a\n  definition of a function (other than an inline definition) or an\n  object. <strong>If an identifier declared with external linkage is used in\n  an expression (other than as part of the operand of a sizeof operator\n  whose result is an integer constant), somewhere in the entire program\n  there shall be exactly one external definition for the identifier</strong>;\n  otherwise, there shall be no more than one.</p>\n</blockquote>\n\n<p>Take into account that in the program above the identifier <code>a</code> has external linkage (6.2.2 Linkages of identifiers)</p>\n\n<blockquote>\n  <p>4 For an identifier declared with the storage-class specifier extern\n  in a scope in which a prior declaration of that identifier is\n  visible,31) if the prior declaration specifies internal or external\n  linkage, the linkage of the identifier at the later declaration is the\n  same as the linkage specified at the prior declaration. <strong>If no prior\n  declaration is visible, or if the prior declaration specifies no\n  linkage, then the identifier has external linkage.</strong></p>\n</blockquote>\n\n<p>A correct program can look like for example the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    extern int a;\n    printf( \"a = %d\\n\", a );\n\n    return 0;\n}\n\nint a = 10;\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>a = 10\n</code></pre>\n\n<p>In this program there is external definition of the identifier <code>a</code> with external linkage</p>\n\n<pre><code>int a = 10;\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 8216303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06fe902da0b8f3c637f121bc6bc97fd?s=128&d=identicon&r=PG&f=1", "display_name": "daya", "link": "https://stackoverflow.com/users/8216303/daya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 44808531, "answer_count": 4, "score": 0, "last_activity_date": 1498670879, "creation_date": 1498665225, "last_edit_date": 1498665312, "question_id": 44807376, "link": "https://stackoverflow.com/questions/44807376/cant-understand-difference-between-a-global-variable-and-a-variable-having-exte", "title": "Can&#39;t understand difference between a global variable and a variable having external storage class?", "body": "<p>What is the difference when I write:-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint a=10; \n\nmain( )\n{\n     printf (\"%d\", a);\n}  \n</code></pre>\n\n<p>And the other one is:-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain ( )    \n{\n    extern int a=10; \n    printf (\"%d\", a); \n}\n</code></pre>\n"}, {"tags": ["ios", "c", "macos", "timer", "macos-sierra"], "comments": [{"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1498666583, "post_id": 44807302, "comment_id": 76595632, "body": "<a href=\"https://unix.stackexchange.com/questions/194480/why-is-timer-t-defined-in-time-h-on-linux-but-not-os-x\" title=\"why is timer t defined in time h on linux but not os x\">unix.stackexchange.com/questions/194480/&hellip;</a>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1498666669, "post_id": 44807302, "comment_id": 76595697, "body": "You should be able to use <code>getitimer</code> and <code>setitimer</code>."}, {"owner": {"reputation": 169, "user_id": 4187460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-e7iT0JTT1AI/AAAAAAAAAAI/AAAAAAAAAT4/R5plZ_JbYNc/photo.jpg?sz=128", "display_name": "Oriol Mari", "link": "https://stackoverflow.com/users/4187460/oriol-mari"}, "reply_to_user": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1498667005, "post_id": 44807302, "comment_id": 76595887, "body": "@JonnySchubert I read that link before post this question. Don&#39;t solve my question."}, {"owner": {"reputation": 169, "user_id": 4187460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-e7iT0JTT1AI/AAAAAAAAAAI/AAAAAAAAAT4/R5plZ_JbYNc/photo.jpg?sz=128", "display_name": "Oriol Mari", "link": "https://stackoverflow.com/users/4187460/oriol-mari"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1498667259, "post_id": 44807302, "comment_id": 76596057, "body": "@jxh thanks, yes I know it and i&#39;m trying to use it."}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 1, "creation_date": 1498667532, "post_id": 44807302, "comment_id": 76596213, "body": "Have a look here: <a href=\"https://developer.apple.com/library/content/technotes/tn2169/_index.html\" rel=\"nofollow noreferrer\">developer.apple.com/library/content/technotes/tn2169/&hellip;</a>"}, {"owner": {"reputation": 169, "user_id": 4187460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-e7iT0JTT1AI/AAAAAAAAAAI/AAAAAAAAAT4/R5plZ_JbYNc/photo.jpg?sz=128", "display_name": "Oriol Mari", "link": "https://stackoverflow.com/users/4187460/oriol-mari"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1498668621, "post_id": 44807302, "comment_id": 76596898, "body": "@jxh the problem with that functions is that i don&#39;t know how to specify the event that should be notified when the timer expires"}, {"owner": {"reputation": 169, "user_id": 4187460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-e7iT0JTT1AI/AAAAAAAAAAI/AAAAAAAAAT4/R5plZ_JbYNc/photo.jpg?sz=128", "display_name": "Oriol Mari", "link": "https://stackoverflow.com/users/4187460/oriol-mari"}, "reply_to_user": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1498669151, "post_id": 44807302, "comment_id": 76597223, "body": "@JonnySchubert thanks, but I need some method to be able to create a timer and define what event should trigger when timer expires... I&#39;m searching for the alternative of timer_create method of linux time.h class."}, {"owner": {"reputation": 768, "user_id": 7419656, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/232d47a20e2ca36fd17ca7833c513f3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ssswift", "link": "https://stackoverflow.com/users/7419656/ssswift"}, "edited": false, "score": 0, "creation_date": 1498753824, "post_id": 44807302, "comment_id": 76641491, "body": "If you look at the source of NSTimer.swift, you&#39;ll see it wraps CFRunLoopTimer, so then the question is: do you still have a CFRunLoop, or are you writing a bare C program?  If you don&#39;t have a run loop, then the answer to &quot;how to specify the event&quot; is simply: it&#39;s the function that you put after the &quot;wait&quot; call -- or you have to design your own run loop system, or build an equivalent with threads (like n3wb did below).  Just how much of the Mac infrastructure do you want to reinvent yourself?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1572752929, "post_id": 44807302, "comment_id": 103655346, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/10263856/608639\">How do you create asynchronous timers in OS X C code?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4187460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-e7iT0JTT1AI/AAAAAAAAAAI/AAAAAAAAAT4/R5plZ_JbYNc/photo.jpg?sz=128", "display_name": "Oriol Mari", "link": "https://stackoverflow.com/users/4187460/oriol-mari"}, "edited": false, "score": 0, "creation_date": 1499182430, "post_id": 44814430, "comment_id": 76796088, "body": "Thanks for your answer, but I need to use it in a timer wheel and I think that sleep have some limitations in my project."}], "tags": [], "owner": {"reputation": 919, "user_id": 2565246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad97245affee1d5f38a619b853d8f45?s=128&d=identicon&r=PG", "display_name": "n3wb", "link": "https://stackoverflow.com/users/2565246/n3wb"}, "is_accepted": false, "score": 4, "last_activity_date": 1498695809, "last_edit_date": 1498695809, "creation_date": 1498695295, "answer_id": 44814430, "question_id": 44807302, "link": "https://stackoverflow.com/questions/44807302/create-c-timer-in-macos/44814430#44814430", "title": "Create C timer in macOS", "body": "<p>You can use pthreads for macOS, with some combination of sleep and time</p>\n\n<pre><code> typedef struct Timer {\n        void (*fn)(void);\n        bool (*timer_delegate)(pthread_t, unsigned int, unsigned int);\n        unsigned int seconds;\n } Timer;\n\nvoid* timer_run(void *t) {\n\n    unsigned int start_time = time(NULL);\n    while(1) {\n        Timer tmr = *((Timer *) t);\n        bool should_kill_thread = tmr.timer_delegate(pthread_self(), start_time, time(NULL));\n        if (should_kill_thread) pthread_cancel(pthread_self());\n        tmr.fn();\n\n        sleep(tmr.seconds);\n    }\n}\n\nbool should_kill_thread(pthread_t t, unsigned int start_time, unsigned int utime_new) {\n    printf(\"the start time was %d and the new time is %d \\n\", start_time, utime_new);\n\n    if (utime_new - start_time &gt;= 9) {\n        return true;\n    }\n\n    return false;\n}\n\nvoid hello_world() {\n    printf(\"%s\\n\", \"Hello, World!\");\n}\n\nint main(int argc, char const *argv[])\n{\n    pthread_t t1;\n    Timer args;\n    args.fn = &amp;hello_world;\n    args.timer_delegate = should_kill_thread;\n    args.seconds = 1; // call every 1 second\n\n    int id = pthread_create(&amp;t1, NULL, timer_run, &amp;args);\n    if (id) {\n       printf(\"ERROR; return code from pthread_create() is %d\\n\", id);\n       exit(EXIT_FAILURE);\n    }\n\n    pthread_join(t1, NULL); // blocks main thread\n    printf(\"%s\\n\", \"DONE\"); // never reached until t1 is killed\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 2066010, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RrcxN.png?s=128&g=1", "display_name": "b degnan", "link": "https://stackoverflow.com/users/2066010/b-degnan"}, "is_accepted": false, "score": 7, "last_activity_date": 1593788672, "last_edit_date": 1593788672, "creation_date": 1540038793, "answer_id": 52905687, "question_id": 44807302, "link": "https://stackoverflow.com/questions/44807302/create-c-timer-in-macos/52905687#52905687", "title": "Create C timer in macOS", "body": "<p>After updating the link for <a href=\"https://en.wikipedia.org/wiki/Grand_Central_Dispatch\" rel=\"nofollow noreferrer\">Grand Central Dispatch</a> timers (<a href=\"https://developer.apple.com/documentation/dispatch\" rel=\"nofollow noreferrer\">Apple's page</a>) on a previous answer, I created some example code for two timers.  It should be noted that this works on FreeBSD and MacOS, but not Linux (without GCD support).  The example creates two event timers, one that fires 0.2sec and one that fires 0.5sec over a total of 20 times.  There is a 1 second delay that exists before execution starts.  The <code>sleep()</code> functions are not used.</p>\n<pre><code>#include &lt;dispatch/dispatch.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint i = 0;\ndispatch_queue_t queue;\ndispatch_source_t timer1;\ndispatch_source_t timer2;\n\n\nvoid sigtrap(int sig)\n{\n    dispatch_source_cancel(timer1);\n    dispatch_source_cancel(timer2);\n    printf(&quot;CTRL-C received, exiting program\\n&quot;);\n    exit(EXIT_SUCCESS);\n}\n\nvoid vector1(dispatch_source_t timer)\n{\n        printf(&quot;a: %d\\n&quot;, i);\n        i++;\n        if (i &gt;= 20) \n        {\n            dispatch_source_cancel(timer);\n        }   \n}\nvoid vector2(dispatch_source_t timer)\n{\n        printf(&quot;b: %d\\n&quot;, i);\n        i++;\n        if (i &gt;= 20)  //at 20 count cancel the \n        {\n            dispatch_source_cancel(timer);\n        }   \n}\n\nint main(int argc, const char* argv[]) {\n\n    signal(SIGINT, &amp;sigtrap);   //catch the cntl-c\n    queue = dispatch_queue_create(&quot;timerQueue&quot;, 0);\n\n    // Create dispatch timer source\n    timer1 = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);\n    timer2 = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);\n    \n    // Set block for dispatch source when catched events\n    dispatch_source_set_event_handler(timer1, ^{vector1(timer1);});\n    dispatch_source_set_event_handler(timer2, ^{vector2(timer2);});\n\n    // Set block for dispatch source when cancel source\n    dispatch_source_set_cancel_handler(timer1, ^{\n        dispatch_release(timer1);\n        dispatch_release(queue);\n        printf(&quot;end\\n&quot;);\n        exit(0);\n    });\n    dispatch_source_set_cancel_handler(timer2, ^{\n        dispatch_release(timer2);\n        dispatch_release(queue);\n        printf(&quot;end\\n&quot;);\n        exit(0);\n    }); \n\n    dispatch_time_t start = dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC); // after 1 sec\n\n    // Set timer\n    dispatch_source_set_timer(timer1, start, NSEC_PER_SEC / 5, 0);  // 0.2 sec\n    dispatch_source_set_timer(timer2, start, NSEC_PER_SEC / 2, 0);  // 0.5 sec\n    printf(&quot;start\\n&quot;);    \n    dispatch_resume(timer1);\n    dispatch_resume(timer2);\n    while(1)\n    {\n        ;;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4187460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-e7iT0JTT1AI/AAAAAAAAAAI/AAAAAAAAAT4/R5plZ_JbYNc/photo.jpg?sz=128", "display_name": "Oriol Mari", "link": "https://stackoverflow.com/users/4187460/oriol-mari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1863, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1593788672, "creation_date": 1498665050, "last_edit_date": 1498669425, "question_id": 44807302, "link": "https://stackoverflow.com/questions/44807302/create-c-timer-in-macos", "title": "Create C timer in macOS", "body": "<p>I would like to know how to create a timer in macOS / iOS. In linux you can create it using timer_create() function of time.h class but in macOS / iOS this function don't exist.</p>\n\n<p>Something like NSTimer (objective-c) but in C.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "ibm-mq"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1498664142, "post_id": 44806933, "comment_id": 76593881, "body": "is <code>sQueues</code> part of the library? Because it&#39;s not declared in there. Also, how is the function called? What&#39;s <code>qd</code>&#39;s value?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498664216, "post_id": 44806933, "comment_id": 76593924, "body": "Check if <code>qd</code> isn&#39;t out of range."}, {"owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "edited": false, "score": 0, "creation_date": 1498665058, "post_id": 44806933, "comment_id": 76594566, "body": "I added calling program and in function all variables declared. Please check again"}, {"owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "edited": false, "score": 0, "creation_date": 1498665451, "post_id": 44806933, "comment_id": 76594875, "body": "the value of qd = -1"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "edited": false, "score": 0, "creation_date": 1498665460, "post_id": 44806933, "comment_id": 76594883, "body": "If your question is related to IBM MQ please use the [ibm-mq] tag, not the [mq] tag."}, {"owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "edited": false, "score": 0, "creation_date": 1498665941, "post_id": 44806933, "comment_id": 76595246, "body": "ok, but can you help me to find the problem?"}, {"owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "edited": false, "score": 0, "creation_date": 1498666551, "post_id": 44806933, "comment_id": 76595614, "body": "Looks like segmentation fault is on MQPUT. Can somebody help me with this? is the problem with sQueues[qd].handle?"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "edited": false, "score": 0, "creation_date": 1498667496, "post_id": 44806933, "comment_id": 76596191, "body": "qd should not = -1.  QD is supposed to be the MQHOBJ to the queue from the call to dteMqOpen.  Does dteMqOpen initialize sQueues for qd?"}, {"owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "edited": false, "score": 0, "creation_date": 1498667659, "post_id": 44806933, "comment_id": 76596289, "body": "yes, but it is separate function. It doesn&#39;t return qd. Should I change it to another value?"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "edited": false, "score": 0, "creation_date": 1498667943, "post_id": 44806933, "comment_id": 76596480, "body": "It must be the value returned by the MQOPEN.  You can&#39;t go directly to MQPUT without first getting a handle from MQOPEN."}, {"owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "edited": false, "score": 0, "creation_date": 1498668004, "post_id": 44806933, "comment_id": 76596518, "body": "by my code I make qd = -1, but send it to MQOPEN and MQOPEN make it +1. Then I make dteMqSend(qd,*TmpBuf,buflen); It qd should be changed to +1, but it still -1, and in the program it is int"}, {"owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "edited": false, "score": 0, "creation_date": 1498668090, "post_id": 44806933, "comment_id": 76596568, "body": "*qd = i;  sQueues[i].handle = hObj;  It is in my MQOPEN. It just returns ok or nor OK. Should I change to return OK and qd?"}, {"owner": {"reputation": 8737, "user_id": 7264620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbebce2451f4d9f7abdebb6b2db7b618?s=128&d=identicon&r=PG&f=1", "display_name": "JoshMc", "link": "https://stackoverflow.com/users/7264620/joshmc"}, "edited": false, "score": 0, "creation_date": 1498671998, "post_id": 44806933, "comment_id": 76598913, "body": "qd when passed to MQPUT should be the value returned by MQOPEN not -1 or +1 either of those would be invalid for MQPUT."}], "answers": [{"tags": [], "owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "is_accepted": false, "score": 0, "last_activity_date": 1498673014, "creation_date": 1498673014, "answer_id": 44809624, "question_id": 44806933, "link": "https://stackoverflow.com/questions/44806933/segmentation-fault-error-in-c-program-using-mqput/44809624#44809624", "title": "Segmentation fault error in C program using MQPUT", "body": "<p>I analyzed my program and check MQ. SSL didn't let me connect to MQ, that is why I couldn't change qd. The program is very old, and when failed, return value was set up as 0, 1 is success. I never did it like that. 0 is always success.  </p>\n\n<p>Thanks     </p>\n"}, {"tags": [], "owner": {"reputation": 6263, "user_id": 1431734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ex16s.gif?s=128&g=1", "display_name": "Roger", "link": "https://stackoverflow.com/users/1431734/roger"}, "is_accepted": false, "score": 0, "last_activity_date": 1498691017, "creation_date": 1498691017, "answer_id": 44813866, "question_id": 44806933, "link": "https://stackoverflow.com/questions/44806933/segmentation-fault-error-in-c-program-using-mqput/44813866#44813866", "title": "Segmentation fault error in C program using MQPUT", "body": "<p>This is some bad code.</p>\n\n<pre><code>typedef struct tagDTE_QUEUE_DESCRIPTOR\n{\n    MQHOBJ handle;\n    int    IsSyncpointControled;\n} DTE_QUEUE_DESCRIPTOR, *PDTE_QUEUE_DESCRIPTOR;\n\nstatic PDTE_QUEUE_DESCRIPTOR sQueues = NULL;\n\nif(sQueues[qd].IsSyncpointControled)\n</code></pre>\n\n<p>In the code that you have posted, 'sQueues' is never set, so that is why it is throwing segmentation fault on the 'if' statement. And if 'qd' is really '-1' as per your comment, then I have to wonder what in the world you are doing.  </p>\n\n<pre><code>dteretinit = dteMqInit(QMgrName,hostname,channelName);\n</code></pre>\n\n<p>How come you don't pass the port number into the dteMqInit subroutine?</p>\n"}], "owner": {"reputation": 92, "user_id": 8173145, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50d7cb3abf50b1e4a276059cd42caf49?s=128&d=identicon&r=PG&f=1", "display_name": "SamOl", "link": "https://stackoverflow.com/users/8173145/samol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498691017, "creation_date": 1498664027, "last_edit_date": 1498665431, "question_id": 44806933, "link": "https://stackoverflow.com/questions/44806933/segmentation-fault-error-in-c-program-using-mqput", "title": "Segmentation fault error in C program using MQPUT", "body": "<p>I have a program below    </p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n#include &lt;cmqc.h&gt;    \n#include &lt;cmqxc.h&gt;    \n#include \"dte_mq.h\"    \n#include &lt;string.h&gt;    \n#include &lt;stdlib.h&gt;    \n\ntypedef struct tagDTE_QUEUE_DESCRIPTOR    \n{    \n    MQHOBJ handle;    \n    int    IsSyncpointControled;    \n} DTE_QUEUE_DESCRIPTOR, *PDTE_QUEUE_DESCRIPTOR;    \nstatic MQHCONN sHConn = 0;    \nstatic MQLONG  sCompCode = MQCC_OK;    \nstatic MQLONG  sReason = MQRC_NONE;    \nstatic int     sNumOpenQueues = 0;    \nstatic PDTE_QUEUE_DESCRIPTOR sQueues = NULL;   \nMQLONG   OpenCode;    \nMQOD     od = {MQOD_DEFAULT};    /* Object Descriptor */    \nMQMD     md = {MQMD_DEFAULT};    \nMQPMO    pmo = {MQPMO_DEFAULT};    \nMQLONG   O_options;    \nMQLONG   C_options;     \nMQGMO   gmo = {MQGMO_DEFAULT};    \n/* MQCONNX options */    \nMQCNO   Connect_options = {MQCNO_DEFAULT};    \n/* Client connection channel */    \nMQCD    ClientConn = {MQCD_CLIENT_CONN_DEFAULT};    \n\nDTE_MQ_RESULT dteMqSend(int qd, void *buf, int len)    \n{   \nprintf(\"oleg\\n\");    \n/* memcpy(md.Format, MQFMT_STRING, MQ_FORMAT_LENGTH); */    \n    md.MsgType  = MQMT_DATAGRAM;    \nprintf(\"oleg1\\n\");    \n   memcpy(md.MsgId, MQMI_NONE, sizeof(md.MsgId));    \nprintf(\"oleg2\\n\");    \n   memcpy(md.CorrelId, MQCI_NONE, sizeof(md.CorrelId));    \nprintf(\"oleg3\\n\");    \n   memcpy(md.Format, MQFMT_STRING, (size_t)MQ_FORMAT_LENGTH);    \nprintf(\"oleg4\\n\");    \n\n   if(sQueues[qd].IsSyncpointControled)    \n      pmo.Options |= MQPMO_SYNCPOINT;    \nprintf(\"oleg5\\n\");    \n   MQPUT(sHConn, sQueues[qd].handle, &amp;md, &amp;pmo, len, buf, &amp;sCompCode, &amp;sReason);    \n   printf(\"MQput CC=%ld RC=%ld\\n\", sCompCode, sReason);    \n   if (sCompCode != MQCC_OK) return DTE_MQR_FAILED;    \n\n   return DTE_MQR_OK;    \n}    \n</code></pre>\n\n<p>I put print statement and found out that after printf(\"oleg4\\n\";) I get error<br>\n    Segmentation fault    </p>\n\n<p>Could you please help me top debug the program? Do I have to use malloc for the structure? It is written in C and using MQPUT    </p>\n\n<p>Below is a program, where above function is called   </p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n#include &lt;stdlib.h&gt;    \n#include &lt;string.h&gt;    \n\n#include &lt;cmqc.h&gt;            /* includes for MQI          */    \n#include &lt;cmqxc.h&gt;    \n\n\nint main(int argc, char **argv)    \n{    \n    MQLONG   messlen;                /* message length received       */    \n\n    char     QMgrName[MQ_Q_MGR_NAME_LENGTH+1];    \n    char     QName[MQ_Q_NAME_LENGTH+1];    \n    char     channelName[MQ_CHANNEL_NAME_LENGTH+1];    \n    char     hostname[1024];    \n    char     port[4];    \n    MQLONG   buflen;    \n    MQBYTE   TmpBuf[65536] = \"This is a simple test message.\";    \n    int msgsToGet;    \n    int msgsGot;    \n    int dteretinit;    \n    int dteretdeinit;    \n    int dteretopen;    \n    int dteretclose;    \n    int qd;    \n    int dteretput;    \n\n    if (argc != 6)    \n    {  \n        printf(\"Usage: NewMQTest QMgrName ChlName hostname port  QName\\n\");    \n        exit(-1);    \n    }    \n\n\n    strncpy(QMgrName, argv[1], MQ_Q_MGR_NAME_LENGTH);    \n    QMgrName[MQ_Q_MGR_NAME_LENGTH] = '\\0';    \n\n    strncpy(channelName, argv[2], MQ_CHANNEL_NAME_LENGTH);    \n    channelName[MQ_CHANNEL_NAME_LENGTH] = '\\0';    \n\n    strncpy(hostname, argv[3], 1023);    \n    hostname[1023] = '\\0';    \n\n    strncpy(port,argv[4],4);    \n\n    strncpy(QName, argv[5], MQ_Q_NAME_LENGTH);    \n    QName[MQ_Q_NAME_LENGTH] = '\\0';    \n\n    dteretinit = dteMqInit(QMgrName,hostname,channelName);    \n    printf(\"Return code from dteMqInit = %d\\n\",dteretinit);    \n    qd = -1;    \n    dteretopen = dteMqOpen(QName, qd);    \n    printf (\"Return code from dteMqOpen = %d\\n\",dteretopen);    \n\n   if (dteretopen == 0 )    \n   {    \n       buflen = strlen(TmpBuf);    \n       TmpBuf[buflen + 1] = '\\0';    \n       dteretput = dteMqSend(qd,*TmpBuf,buflen);    \n       printf(\"return mqput %d\\n\",dteretput);    \n   }    \n   dteretclose = dteMqClose(qd);    \n   printf(\"Return code from dteMqClose = %d\\n\",dteretclose);    \n\n   dteretdeinit = dteMqDeinit();    \n   printf(\"Return code from dteMqDeinit = %d\\n\",dteretdeinit);    \n }     \n</code></pre>\n"}, {"tags": ["c", "stack", "structure"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1498664612, "creation_date": 1498664612, "answer_id": 44807150, "question_id": 44806886, "link": "https://stackoverflow.com/questions/44806886/what-is-the-difference-between-these-two-different-implementations-of-stacktop-f/44807150#44807150", "title": "What is the difference between these two different implementations of StackTop function?", "body": "<p>Either one can be used.  The main difference is the number of copies done.</p>\n\n<p>In the first case the resulting value is written directly to the target variable via a pointer dereference.  In the second case the value is (in most implementations) put on the stack, then copied to the variable receiving the return value, assuming the return value is assigned.  </p>\n\n<p>For the return value case, given that a struct is being returned, the compiler is probably not copying the return value to the stack but to some other location and putting a pointer to that location on the stack.  This is entirely up to the implementation however.  In either case, the struct data is being copied twice.  If the struct is relatively small there shouldn't be a measurable difference, although it could become significant if the struct is several megabytes large.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1498666309, "last_edit_date": 1498666309, "creation_date": 1498665777, "answer_id": 44807540, "question_id": 44806886, "link": "https://stackoverflow.com/questions/44806886/what-is-the-difference-between-these-two-different-implementations-of-stacktop-f/44807540#44807540", "title": "What is the difference between these two different implementations of StackTop function?", "body": "<p>The both functions have no good design. The problem of the both functions is that the stack can be empty. In this case the functions have undefined behavior and it is difficult to determine whether it is the case.</p>\n\n<p>In C a better function definition can look like</p>\n\n<pre><code>int StackTop( Stack *ps, StackEntry *pe )\n{\n    int success = ps-&gt;top != 0;\n\n    if ( success )\n    {\n        *pe = ps-&gt;entry[ps-&gt;top-1];\n    }\n\n    return success;\n}\n</code></pre>\n\n<p>If you do not bother about the undefined behavior of the functions because there is one more function that reports whether the stack is empty then you should consider one more function implementation that will allow to change the value stored in the stack. Such a function can look like</p>\n\n<pre><code>StackEntry * StackTop(Stack *ps)\n{\n\n    return &amp;ps-&gt;entry[ps-&gt;top-1];\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4421628, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100004654088076/picture?type=large", "display_name": "Amr Mustafa", "link": "https://stackoverflow.com/users/4421628/amr-mustafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 44807150, "answer_count": 2, "score": 2, "last_activity_date": 1498677674, "creation_date": 1498663886, "last_edit_date": 1498677674, "question_id": 44806886, "link": "https://stackoverflow.com/questions/44806886/what-is-the-difference-between-these-two-different-implementations-of-stacktop-f", "title": "What is the difference between these two different implementations of StackTop function?", "body": "<p>I am studying a course on data structures and currently I am stuck with something in stacks. In the implementation of <code>StackTop</code> function (which makes a copy or \"<em>returns in a sense</em>\" the top element in the stack without affecting the stack.) The below code is the implementation of it and it is clear,</p>\n\n<pre><code>void StackTop(StackEntry *pe, Stack *ps){\n    *pe=ps-&gt;entry[ps-&gt;top-1];\n}\n</code></pre>\n\n<p>but as long as we want to give the user the value of top element in the stack couldn't we make the function like this ? And if so then what's the difference between these two implementations ?</p>\n\n<pre><code>StackEntry StackTop(Stack *ps){\n    return ps-&gt;entry[ps-&gt;top-1];\n}\n</code></pre>\n\n<p>Keep in mind that <code>StackEntry</code> is a user-defined data type.</p>\n"}, {"tags": ["c", "pcre", "capture-group"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498664938, "post_id": 44806472, "comment_id": 76594463, "body": "Curious requirement.  I&#39;m fairly sure the answer is &quot;No&quot;, but I&#39;m puzzled about how you&#39;d be modifying the code using the REs to use the extension yet not need to know what&#39;s going on.  It feels a bit like an <a href=\"http://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">XY Problem</a> \u2014 though not as definitively XY-ish as many.  I think there ought to be another way to handle it, but I&#39;m not sure since you haven&#39;t illustrated with actual code what you need.  (Think MCVE \u2014 <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>!)"}, {"owner": {"reputation": 940, "user_id": 1275256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5cd12beabbb9d483c03d843cc504e5c0?s=128&d=identicon&r=PG", "display_name": "gxtaillon", "link": "https://stackoverflow.com/users/1275256/gxtaillon"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498665991, "post_id": 44806472, "comment_id": 76595275, "body": "@Jonathan Leffler Let me rephrase. For the purposes here, assume the code is buried somewhere dark. The program consumes a string, and a regular expression (libpcre) and outputs the values of the expression&#39;s capture groups matched on the data. Normally, whatever is in the capture group is fine. For the use case here, I want to replace or add a capture group with a predetermined value that is not present in the data and that must not have a effect on the behavior of the rest of the expression. (ie, With &quot;abc&quot; =~ /(abc)/, I want $1==&quot;0&quot;, instead of $1==&quot;abc&quot;)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498666210, "post_id": 44806472, "comment_id": 76595399, "body": "The extra information clarifies \u2014 but would be best put into the question.  I still think the answer is &quot;No&quot;.  AFAIK, not even Perl manages that with pure match regexes, though it would get close with the <code>x</code> modifier for the replacement part of a <code>s&#47;&#47;&#47;</code> expression."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1498731944, "post_id": 44806472, "comment_id": 76624983, "body": "Unfortunately there&#39;s no PCRE feature implemented to define a default value or whatsoever for a capturing group. You are in need of a programming language."}], "owner": {"reputation": 940, "user_id": 1275256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5cd12beabbb9d483c03d843cc504e5c0?s=128&d=identicon&r=PG", "display_name": "gxtaillon", "link": "https://stackoverflow.com/users/1275256/gxtaillon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498775371, "creation_date": 1498662795, "last_edit_date": 1498775371, "question_id": 44806472, "link": "https://stackoverflow.com/questions/44806472/is-it-possible-to-set-the-final-value-of-a-capture-group", "title": "Is it possible to set the final value of a capture group?", "body": "<p>I have a very specific use case where a system is using REs to extract data and in this case I would prefer to not return the matched value but an arbitrary value. This would be more convenient than updating the underlying software.</p>\n\n<p>I was wondering if this was achievable by somehow setting the value of a capture group without affecting the matching behavior. I thought maybe something like a \"constant\" callout that would do something like an <code>(?(*ACCEPT))</code> and return whatever it is passed as text.</p>\n\n<p>If group <code>1</code> matches, then return <code>OK</code> else <code>NOT OK</code>: </p>\n\n<pre><code>(.*)(?(1)(?CC\"OK\")|(?CC\"NOT OK\"))\n</code></pre>\n\n<p><em>(<code>CC</code> is the magic I need)</em></p>\n\n<p>I've been reading <a href=\"http://www.pcre.org/original/doc/html/pcrepattern.html\" rel=\"nofollow noreferrer\">this</a> and <a href=\"http://www.pcre.org/current/doc/html/pcre2syntax.html\" rel=\"nofollow noreferrer\">this</a> but haven't found anything of the sort.</p>\n"}, {"tags": ["c", "opencv"], "comments": [{"owner": {"reputation": 5579, "user_id": 7456923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaf0e019051e15265ad4d19eddce0521?s=128&d=identicon&r=PG&f=1", "display_name": "gdelab", "link": "https://stackoverflow.com/users/7456923/gdelab"}, "edited": false, "score": 1, "creation_date": 1498662847, "post_id": 44806425, "comment_id": 76592854, "body": "I don&#39;t think blur() exists in C, you probably have to write it yourself..."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1498663104, "post_id": 44806425, "comment_id": 76593061, "body": "Your comment in the code is <code>not working</code>.  Define <code>not working</code>.  Also, since opencv is open source, why not get the <code>c++</code> source, find the blur function and port it to <code>c</code>?"}, {"owner": {"reputation": 39, "user_id": 8226662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886474a6d8cb527900e0ec44a0385fef?s=128&d=identicon&r=PG&f=1", "display_name": "Inbal", "link": "https://stackoverflow.com/users/8226662/inbal"}, "reply_to_user": {"reputation": 5579, "user_id": 7456923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaf0e019051e15265ad4d19eddce0521?s=128&d=identicon&r=PG&f=1", "display_name": "gdelab", "link": "https://stackoverflow.com/users/7456923/gdelab"}, "edited": false, "score": 0, "creation_date": 1498663131, "post_id": 44806425, "comment_id": 76593081, "body": "Can you please send a link to how to write it? @gdelab"}, {"owner": {"reputation": 39, "user_id": 8226662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886474a6d8cb527900e0ec44a0385fef?s=128&d=identicon&r=PG&f=1", "display_name": "Inbal", "link": "https://stackoverflow.com/users/8226662/inbal"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1498663328, "post_id": 44806425, "comment_id": 76593243, "body": "@KevinDTimm by not working I mean not compiling - a LNK error. I&#39;ll edit my post."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1498669748, "post_id": 44806425, "comment_id": 76597576, "body": "You could use <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/filtering.html#filter2d\" rel=\"nofollow noreferrer\"><code>cvFilter2D</code></a> -- see the <a href=\"http://docs.opencv.org/3.1.0/d4/d13/tutorial_py_filtering.html\" rel=\"nofollow noreferrer\">OpenCV Image Smoothing tutorial</a> for details."}, {"owner": {"reputation": 39, "user_id": 8226662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886474a6d8cb527900e0ec44a0385fef?s=128&d=identicon&r=PG&f=1", "display_name": "Inbal", "link": "https://stackoverflow.com/users/8226662/inbal"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1498721064, "post_id": 44806425, "comment_id": 76617544, "body": "Thanks @DanMa\u0161ek I read about it and figured out how to do blur!"}, {"owner": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 2, "creation_date": 1498738663, "post_id": 44806425, "comment_id": 76629749, "body": "The equivalent of <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/filtering.html?highlight=blur#blur\" rel=\"nofollow noreferrer\"><code>cv::blur</code></a> in C interface is <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/filtering.html#smooth\" rel=\"nofollow noreferrer\"><code>cvSmooth</code></a> with <code>CV_BLUR</code> as 3rd parameter."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 8226662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886474a6d8cb527900e0ec44a0385fef?s=128&d=identicon&r=PG&f=1", "display_name": "Inbal", "link": "https://stackoverflow.com/users/8226662/inbal"}, "is_accepted": false, "score": 0, "last_activity_date": 1498721708, "creation_date": 1498721708, "answer_id": 44818989, "question_id": 44806425, "link": "https://stackoverflow.com/questions/44806425/how-to-blur-an-image-by-opencv-in-c/44818989#44818989", "title": "How to blur an image by opencv in C?", "body": "<p>Since blur() doesn't exist in C (only in C++ or Python) I used <code>cvPyrDown</code> and <code>cvPyrUp</code>.</p>\n\n<p>Using down function and then up the image got the effect of blur (like decreasing size of image what downsize the resolution save it and then resize it to normal).</p>\n\n<p>How to use cvPyrDown <a href=\"https://books.google.co.il/books?id=seAgiOfu2EIC&amp;pg=PA24&amp;lpg=PA24&amp;dq=cvpyrdown+example&amp;source=bl&amp;ots=hTM8cgjGNb&amp;sig=a7SeA2ZkEP96RCsDXd0D-_knIgM&amp;hl=iw&amp;sa=X&amp;ved=0ahUKEwj9p6r9ueLUAhWJmbQKHa49A3kQ6AEILTAB#v=onepage&amp;q=cvpyrdown%20example&amp;f=false\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The code:</p>\n\n<pre><code>void blurImage(void)\n{\n    IplImage* imageSrc = cvLoadImage(\"&lt;Image path&gt;\", 1);\n    IplImage* imageDst;\n    if (!imageSrc)//The image is empty.\n    {\n        printf(\"could not open or find image\");\n    }\n    else\n    {\n        imageDst = cvCreateImage(cvSize(imageSrc-&gt;width/2,imageSrc-&gt;height/2), imageSrc-&gt;depth, imageSrc-&gt;nChannels);\n        cvPyrDown(imageSrc, imageDst, CV_GAUSSIAN_5x5); //Down size\n        cvPyrUp(imageDst, imageSrc, CV_GAUSSIAN_5x5); // Up size\n        cvShowImage(\"Display window\", imageSrc); // Display the blurred image\n        cvWaitKey(1000); // Wait for 1000 milliseconds\n        cvReleaseImage(&amp;imageDst);\n        cvReleaseImage(&amp;imageSrc);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 8226662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886474a6d8cb527900e0ec44a0385fef?s=128&d=identicon&r=PG&f=1", "display_name": "Inbal", "link": "https://stackoverflow.com/users/8226662/inbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 777, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1498721708, "creation_date": 1498662686, "last_edit_date": 1498663374, "question_id": 44806425, "link": "https://stackoverflow.com/questions/44806425/how-to-blur-an-image-by-opencv-in-c", "title": "How to blur an image by opencv in C?", "body": "<p>I'm using opencv in C for a project of mine, and I need to blur an image.</p>\n\n<p>This is what I've tried so far:</p>\n\n<pre><code>/*\nFunction displays the blurred image of the frame\nInput: frame\nOutput: none\n*/\nvoid blurImage(link_t* frame)\n{\n    IplImage* imageSrc = cvLoadImage(frame-&gt;frame-&gt;path, 1); // frame-&gt;frame-&gt;path is the path of the image\n    int i = 0;\n    if (!imageSrc)//The image is empty.\n    {\n        printf(\"could not open or find image\");\n    }\n    else\n    {\n        for (i = 1; i &lt; 51; i += 2)\n        {\n            blur(imageSrc, imageSrc, Size(i, i)); // Not compiling - LNK error\n        }\n        cvShowImage(\"Display window\", imageSrc); //display the blurred image\n    }\n}\n</code></pre>\n\n<p>I've read a lot online about this and all the answers I'm finding are at c++/python so they aren't helping me.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 744, "user_id": 1615306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ffd6b4036258af5ace945b390c699a?s=128&d=identicon&r=PG", "display_name": "Julian Jocque", "link": "https://stackoverflow.com/users/1615306/julian-jocque"}, "edited": false, "score": 0, "creation_date": 1498662331, "post_id": 44806226, "comment_id": 76592457, "body": "Why do you want to use C rather than a batch file?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498662409, "post_id": 44806226, "comment_id": 76592514, "body": "<a href=\"https://superuser.com/questions/914782/how-do-you-list-all-processes-on-the-command-line-in-windows\" title=\"how do you list all processes on the command line in windows\">superuser.com/questions/914782/&hellip;</a>"}, {"owner": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "edited": false, "score": 0, "creation_date": 1498662477, "post_id": 44806226, "comment_id": 76592567, "body": "Yes i want to use C , because I started developing my program and some of functions must verfiy the status of chrome process ."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498662676, "post_id": 44806226, "comment_id": 76592722, "body": "Which Platform? Windows, Linux, MacOS,...?"}, {"owner": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "edited": false, "score": 0, "creation_date": 1498662803, "post_id": 44806226, "comment_id": 76592828, "body": "Sorry , but I prefer the use of defined Functions not Tasklist ."}, {"owner": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "edited": false, "score": 0, "creation_date": 1498662849, "post_id": 44806226, "comment_id": 76592857, "body": "I mention that i use windows in the description"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498662947, "post_id": 44806226, "comment_id": 76592932, "body": "Why not use <code>tasklist</code> if you are already using <code>taskkil</code>?"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498662957, "post_id": 44806226, "comment_id": 76592937, "body": "&#39;verfiy the status of chrome process&#39; - it&#39;s Chrome - just assume it&#39;s broken:("}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 2, "creation_date": 1498663195, "post_id": 44806226, "comment_id": 76593136, "body": "Just issue the <code>taskkill</code> ... if Chrome&#39;s not running, it won&#39;t do anything."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1498663757, "post_id": 44806226, "comment_id": 76593570, "body": "If Chrome is running <b><i>where</i></b>? Somewhere in the universe? Inside the same physical machine case? On the same Windows instance? As the same user? With the same user profile? What you&#39;re asking to do simply does not make sense."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "edited": false, "score": 0, "creation_date": 1498662998, "post_id": 44806492, "comment_id": 76592983, "body": "Sorry , Can you suggest method that use defined function In C"}, {"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "reply_to_user": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "edited": false, "score": 0, "creation_date": 1498663553, "post_id": 44806492, "comment_id": 76593427, "body": "Sorry, this was joke."}], "tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": false, "score": 1, "last_activity_date": 1498662850, "creation_date": 1498662850, "answer_id": 44806492, "question_id": 44806226, "link": "https://stackoverflow.com/questions/44806226/verify-if-chrome-is-running-using-c-program/44806492#44806492", "title": "Verify if chrome is running using C Program", "body": "<p>Yes, We can.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint\nchrome_is_running() {\n  char buf[BUFSIZ];\n  int r = system(\"tasklist /FI \\\"IMAGENAME eq chrome.exe\\\" &gt; .out\");\n  FILE *fp = fopen(\".out\", \"r\");\n  int found = 0;\n  while (fgets(buf, sizeof(buf), fp)) {\n    if (strncasecmp(buf, \"chrome.exe\", 10) == 0) {\n      found = 1;\n      break;\n    }\n  }\n  unlink(\".out\");\n  return found;\n}\n\nint\nmain(int argc, char* argv[]) {\n  if (chrome_is_running())\n    system(\"taskkill /F /IM chrome.exe\");\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": true, "score": 0, "last_activity_date": 1498663574, "creation_date": 1498663574, "answer_id": 44806780, "question_id": 44806226, "link": "https://stackoverflow.com/questions/44806226/verify-if-chrome-is-running-using-c-program/44806780#44806780", "title": "Verify if chrome is running using C Program", "body": "<p>Okay, how about this?</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\nint\nchrome_is_running() {\n  return FindWindow(\"Chrome_WidgetWin_1\", NULL) != NULL;\n}\n\nint\nmain(int argc, char* argv[]) {\n  if (chrome_is_running())\n    system(\"taskkill /F /IM chrome.exe\");\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 1, "accepted_answer_id": 44806780, "answer_count": 2, "score": -1, "last_activity_date": 1498663574, "creation_date": 1498662168, "question_id": 44806226, "link": "https://stackoverflow.com/questions/44806226/verify-if-chrome-is-running-using-c-program", "title": "Verify if chrome is running using C Program", "body": "<p>I want to develop a function in C that do some treatement  but it depends of the status of chrome Process .So if chrome is running then , I should kill the process to make the program executes correctly  </p>\n\n<pre><code>If(chrome is running )\nsystem(\"taskkill /IM chrome.exe /F\");\nOperation 1\noperation 2\n..........\n</code></pre>\n\n<p>So how can i translate the line if(chrome is running ) in c\nI use windows </p>\n"}, {"tags": ["c", "inheritance", "c-preprocessor"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1498662253, "post_id": 44806131, "comment_id": 76592389, "body": "This is not a good fit for SO as our purpose here is to solve specific problems, not discuss how to shove a square peg into a round hole.  The short answer to you question is that Obj-C, C++ and C# were developed for this exact purpose.  C has been (fortunately) left alone in regards to these &#39;enhancements&#39;"}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 2, "creation_date": 1498662253, "post_id": 44806131, "comment_id": 76592391, "body": "One of the software development skills is to choose the right tool for particular tasks. No one can prohibit you to clean your ears with a screwdriver, but don&#39;t be surprised if your broad experience and findings in this area won&#39;t be cheered by the community. Simple as that."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1498662264, "post_id": 44806131, "comment_id": 76592407, "body": "Well, there&#39;s a bit more to inheritance in most object-oriented languages than this. Anyway, you can achieve the same effect more cleanlty via by embedding an anonymous structure instance of the base &quot;class&quot;, assuming C11 or a decent compiler.  Better yet wrap it in anonymous union together with the explicit parent and you can pass direct parent pointers without casting."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1498662668, "post_id": 44806131, "comment_id": 76592717, "body": "As in <code>struct kid { union { struct dad; struct dad parent; }; diaper_t diaper };</code> allowing the <code>dad</code> member to be omitted while accessing parent fields from the child object, while also forwarding a parent object if desired. A perfectly reasonable an useful little kludge, though naming it inheritance is perhaps a needless distraction."}, {"owner": {"reputation": 117, "user_id": 7893856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198fd92b6eddb8baae2a9c5bf140bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "user7893856", "link": "https://stackoverflow.com/users/7893856/user7893856"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1498663261, "post_id": 44806131, "comment_id": 76593183, "body": "@KevinDTimm Pretty sure this question has very good chances of being answered in a way most people would consider &quot;objective&quot;. Again, I wasn&#39;t asking HOW to shove a square peg into a round hole, I&#39;m asking WHY the peg is considered square in the first place."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1498664137, "post_id": 44806131, "comment_id": 76593876, "body": "IMHO I wouldn&#39;t recommend trying to emulate inheritance in C by jumping through hoops, instead switch to C++ if you really need inheritance. After all, C++ was invented for that purpose (among others)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1498664420, "post_id": 44806131, "comment_id": 76594038, "body": "Adding a member in a parent can break a child. Don&#39;t do this."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1498664702, "post_id": 44806131, "comment_id": 76594271, "body": "@n.m.: While not explicitly stated I should assume that the common include is used to define the parent as well."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1498666440, "post_id": 44806131, "comment_id": 76595546, "body": "Also casting from struct kid to struct dad is UB. Upcasting is really fundamental to OO so you can&#39;t get around this."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1498666498, "post_id": 44806131, "comment_id": 76595577, "body": "@doynax I can infer this much from the design."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 7893856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198fd92b6eddb8baae2a9c5bf140bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "user7893856", "link": "https://stackoverflow.com/users/7893856/user7893856"}, "edited": false, "score": 0, "creation_date": 1498663590, "post_id": 44806728, "comment_id": 76593456, "body": "Yeah that&#39;s an alternative, although #include &quot;super.interface&quot; makes the intent a little clearer and you don&#39;t have to use annoying backslashes :)"}, {"owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "reply_to_user": {"reputation": 117, "user_id": 7893856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198fd92b6eddb8baae2a9c5bf140bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "user7893856", "link": "https://stackoverflow.com/users/7893856/user7893856"}, "edited": false, "score": 0, "creation_date": 1498663689, "post_id": 44806728, "comment_id": 76593515, "body": "True, but then you&#39;d have a tone of include files to manage. I find a convention easier to deal with. Neat #include trick, though."}, {"owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "edited": false, "score": 0, "creation_date": 1498664991, "post_id": 44806728, "comment_id": 76594517, "body": "As @JohnBollinger mentioned padding will be an issue. Quick check with gcc and std=c11 showed that small change might help <code>#define myclass_members struct { int a; void (*f)(void); }</code> ."}, {"owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "reply_to_user": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "edited": false, "score": 0, "creation_date": 1498665684, "post_id": 44806728, "comment_id": 76595069, "body": "@tgregory Yeah, I have considered the padding problem, but in my experience when the structs get word aligned everything falls in place. Somewhere, in some implementation, it pretty well may not work, idk. Does the anonymous struct expansion somehow ensure the alignment?"}, {"owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "edited": false, "score": 0, "creation_date": 1498666060, "post_id": 44806728, "comment_id": 76595312, "body": "@VladDinev yes. Tested on linux x64 gcc <code>struct parent_s { parent; };</code> <code>struct child_s { parent; int d; }</code>. If <code>#define parent int a; double b; int c</code> <code>sizeof(parent_s) = 24</code> <code>sizeof(child_s) = 24</code> <code>offsetof(child_s, d) = 20</code>. If <code>#define parent struct { int a; double b; int c; }</code> <code>sizeof(parent_s) = 24</code> <code>sizeof(child_s) = 32</code> <code>offsetof(child_s, d) = 24</code>."}, {"owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "reply_to_user": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "edited": false, "score": 0, "creation_date": 1498666846, "post_id": 44806728, "comment_id": 76595787, "body": "@tgregory I see. Thank you for the example. In both cases though, you can have a parent_s * point to child_s and it looks like it&#39;ll point to a valid parent_s struct, regardless of the exact padding because the parent_s members are first anyway. Is that so or am I missing something?"}, {"owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "edited": false, "score": 0, "creation_date": 1498667663, "post_id": 44806728, "comment_id": 76596295, "body": "You won&#39;t be able to do polymorphic block copies using functions such as <code>memcpy</code> since this will overwrite members which happened to fall into padding (remember <code>sizeof(parent_s)</code> returns more memory than actualy belong to an embedded <code>parent_s</code>."}, {"owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "reply_to_user": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "edited": false, "score": 0, "creation_date": 1498671156, "post_id": 44806728, "comment_id": 76598422, "body": "@tgregory Got that. Thank you for the clarification."}], "tags": [], "owner": {"reputation": 432, "user_id": 8175532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b19ebcb5aae7892c7c218dee95d8f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Dinev", "link": "https://stackoverflow.com/users/8175532/vlad-dinev"}, "is_accepted": true, "score": 2, "last_activity_date": 1498719146, "last_edit_date": 1498719146, "creation_date": 1498663448, "answer_id": 44806728, "question_id": 44806131, "link": "https://stackoverflow.com/questions/44806131/emulating-inheritance-with-c-preprocessor/44806728#44806728", "title": "Emulating inheritance with C preprocessor", "body": "<p>You can do it like this:</p>\n\n<pre><code>#define myclass_members int a;\\\n                void (*f)(void)\n\nstruct myclass {\n    myclass_members;\n};\n\n#define derived_cls_members myclass_members;\\\n                            double d;\\\n                            void (*g)(void)\n\nstruct derived_cls {\n    derived_cls_members;\n};\n</code></pre>\n\n<p>If you are interested, you can check out a whole framework based on this <a href=\"https://github.com/vladcc/object-oriented-c\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Edit: turns out this approach may work, but as others have pointed out it's dubious. A better option would be to use the anonymous struct expansion added in c11, which can still be used with the preprocessor as @tgregory pointed out.</p>\n\n<pre><code>#define myclass_members struct { int a; void (*f)(void); }\n</code></pre>\n\n<p>Edit 2: A further look into this reveals that the first approach (with only the preprocessor) should practically work. So if you are not concerned about the mentioned in the comment assignment issues, or the issues that may come up with using functions like memset()/memcpy(), it should be fine.</p>\n\n<p>Sources:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19804655/are-c-structs-with-the-same-members-types-guaranteed-to-have-the-same-layout-in\">Are C-structs with the same members types guaranteed to have the same layout in memory?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">What is the strict aliasing rule?</a></p>\n\n<p>Edit 3: To not get something optimized away, you'd want to compile with the -fno-strict-aliasing flag if compiling with optimization.</p>\n\n<p>Bottom line: it's dirty, it's a hack, but should work in practice.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498664479, "post_id": 44806852, "comment_id": 76594081, "body": "&#167;6.5.2.3 &#182;6 says: <i>One special guarantee is made in order to simplify the use of unions: if a union contains several structures that share a common initial sequence (see below), and if the union object currently contains one of these structures, it is permitted to inspect the common initial part of any of them anywhere that a declaration of the completed type of the union is visible. Tw o structures share a common initial sequence if corresponding members have compatible types (and, for bit-fields, the same widths) for a sequence of one or more initial members.</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498664569, "post_id": 44806852, "comment_id": 76594147, "body": "Since the compiler cannot tell whether two structure types will, or will not, be used in a union in different compilation units (or later in the current one), it means that the layout of structures with a common initial sequence must be the same."}, {"owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498664966, "post_id": 44806852, "comment_id": 76594493, "body": "@JonathanLeffler Unfortunately this is not the case for their size. <code>struct a { int a; double b; int c; }</code> and <code>struct b { int a; double b; int c; int d; }</code> have the same size on linux x64 with gcc. This may cause bugs while attempting to use polymorphicaly functions like this <code>void zero(struct a *p) { memset(p, 0, sizeof(*p)); }</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498665532, "post_id": 44806852, "comment_id": 76594940, "body": "I said &quot;it means that the layout of structures with a common initial sequence must be the same&quot;.  I should have said: &quot;it means that the layout of structures with a common initial sequence must be the same for the members in the common initial sequence&quot;.  There&#39;s a caveat elsewhere (&#167;6.2.6.1, footnote 51): 51) <i>Thus, for example, structure assignment need not copy any padding bits.</i>  Your example is discussing a variation on assignment; my comment applies to member access and layout.  Those are different.  Your example shows that you can&#39;t rely on assignment working \u2014 that&#39;s a valid caveat."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498665601, "post_id": 44806852, "comment_id": 76594998, "body": "@JonathanLeffler, you are correct <i>vis a vis</i>  my comments as I first wrote them.  I have revised that point in terms of violations of the strict aliasing rule, which I think holds up better."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498665852, "post_id": 44806852, "comment_id": 76595190, "body": "@JohnBollinger: Your edited version is an improvement.  Do you want me to remove my commentary?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498665935, "post_id": 44806852, "comment_id": 76595239, "body": "I leave it at your discretion, @JonathanLeffler.  Although your comments do not bear directly on the answer in its present form, they still have some relevance to the general topic."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498667779, "post_id": 44806852, "comment_id": 76596376, "body": "@JonathanLeffler I think that this rule about common initial sequence applies only if the union is visible in the current compilation unit. Otherwise compiler can suppose that such a union does not exists."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 1, "creation_date": 1498668237, "post_id": 44806852, "comment_id": 76596675, "body": "@Marian: I don&#39;t think that&#39;s valid. There are rules about equivalent (compatible) types for cross-TU compilations which require the same structure definition to have the same meaning everywhere."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1498665486, "last_edit_date": 1498665486, "creation_date": 1498663786, "answer_id": 44806852, "question_id": 44806131, "link": "https://stackoverflow.com/questions/44806131/emulating-inheritance-with-c-preprocessor/44806852#44806852", "title": "Emulating inheritance with C preprocessor", "body": "<p>Since you pose the question in the context of inheritance, I suppose a more complete (and correct) example would be this:</p>\n\n<h3>file: dad.interface</h3>\n\n<pre><code>arm_t right_arm;\narm_t left_arm;\n</code></pre>\n\n<h3>file dad.h</h3>\n\n<pre><code>struct dad {\n    #include \"dad.interface\"\n};\n</code></pre>\n\n<h3>file: kid.h</h3>\n\n<pre><code>struct kid {\n    #include \"dad.interface\"\n    diaper_t diaper;\n};\n</code></pre>\n\n<p>There are several problems with this, among them:</p>\n\n<ol>\n<li><p>It's not really inheritance -- it's merely two structures that happen to have matching initial members.  <code>struct kid</code> has no other relationship with <code>struct dad</code>, and the former certainly does not inherit anything from the latter.  From <code>struct kid</code>s perspective, it's not even clear that a <code>struct dad</code> exists.</p></li>\n<li><p>Although you did not use the term, it is common (albeit unwarranted) for people to assume that <em>polymorphism</em> goes hand-in-hand with inheritance.  You don't get that with your approach.  Despite sharing a common initial sequence of members, the two structure types are incompatible, and pointers to those types are incompatible, as that term is used by the standard.  In particular, accessing a <code>struct kid</code> via a pointer of type <code>struct dad *</code> violates the strict aliasing rule, and therefore produces undefined behavior.  (The same does not apply when <code>struct kid</code> embeds a <code>struct dad</code> as its first member.)</p></li>\n<li><p>The approach has poor extensibility.  For example, suppose you want to add <code>struct son</code> and <code>struct daughter</code> inheriting from <code>struct kid</code>.  Now you have to pull out <code>struct kid</code>'s members into its own separate header, too.  I guess you could do that preemptively if you can predict which structure types anyone might ever want to inherit from, or if you just do it to every single structure type.  Yikes, what a mess.</p></li>\n</ol>\n"}], "owner": {"reputation": 117, "user_id": 7893856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/198fd92b6eddb8baae2a9c5bf140bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "user7893856", "link": "https://stackoverflow.com/users/7893856/user7893856"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 44806728, "answer_count": 2, "score": 3, "last_activity_date": 1498719146, "creation_date": 1498661947, "last_edit_date": 1498662722, "question_id": 44806131, "link": "https://stackoverflow.com/questions/44806131/emulating-inheritance-with-c-preprocessor", "title": "Emulating inheritance with C preprocessor", "body": "<p>I had an idea about how to implement interfaces in C. The idea is really simple, but when searching for questions discussing this, I did not see it mentioned. </p>\n\n<p>So, the \"standard\" inheritance emulation method in C is essentially</p>\n\n<pre><code>struct dad {\n   arm_t right_arm;\n   arm_t left_arm;\n}\n\nstruct kid {\n   struct dad parent;\n   diaper_t diaper;\n}\n</code></pre>\n\n<p>Which I think is ugly, <code>because kid.parent.right_arm</code> just makes less sense than <code>kid.right_arm</code>. There is another way apparently, if you don't mind using gcc-exclusive flags, which is something like</p>\n\n<pre><code>struct kid {\n    struct dad;\n    diaper_t diaper;\n}\n</code></pre>\n\n<p>but this is not portable. What is portable, however, is</p>\n\n<pre><code>// file: dad.interface\narm_t right_arm;\narm_t left_arm;\n\n// file: kid.h\nstruct kid {\n    #include dad.interface\n    diaper_t diaper;\n}\n</code></pre>\n\n<p>For the purposes of this question, I'm not interested in suggestions for alternatives.  My question is simply this: what, if anything, is wrong with this approach?</p>\n"}, {"tags": ["c", "avr", "i2c"], "comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1498668833, "post_id": 44806066, "comment_id": 76597022, "body": "You are essentially reading the SDA line on the rising edge of the SCL line; perhaps your device is not ready then yet? Have you tried reading SDA closer to the falling edge instead? That is, <code>SIGNAL_HIGH(PORT_SCL); _delay_us(1); B = (B &lt;&lt; 1) | !!(PINB &amp; (1 &lt;&lt; PB0)); SIGNAL_LOW(PORT_SCL); _delay_us(1);</code> (repeated eight times)?"}], "answers": [{"tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": true, "score": 1, "last_activity_date": 1498772464, "last_edit_date": 1498772464, "creation_date": 1498771730, "answer_id": 44835265, "question_id": 44806066, "link": "https://stackoverflow.com/questions/44806066/i2c-bizarre-delay-issue-when-reading/44835265#44835265", "title": "I2C bizarre delay issue when reading", "body": "<p>I2c defines a number of minimum timings for signals - Important here are the HIGH and LOW time of SCL - the amount of time SCL should be stable before the next transition to the opposite state is allowed.\nThese timings are typical ~5\u00b5s, exact figures should be taken from the datasheet.</p>\n\n<p>The loop-around at the end of your <code>read</code> loop takes somewhat between 2 and 3 instructions, depending on what the compiler does. An AVR instruction, depending on your clock rate, roughly takes ~200ns, so (without a delay) SCL is low for approximately 600ns, give or take - which is way too short, at least apparently for your specific \"other-end-device\". </p>\n\n<p>When you inserted a function call and a port access in the called function, you inserted enough instructions to keep SCL LOW for long enough to properly work.</p>\n\n<p>In your code, the HIGH time is not so much the problem, because you let the AVR execute more instructions while SCL is high - Apparently, enough time goes by to keep your SCL HIGH for long enough.</p>\n\n<p>The fact that you are toggling a port pin in your delay function is not relevant here - The only relevance is that you need to spend some time while SCL is low. Obviously, what you currently do is a waste of a port pin to just spend some time waiting - Use <code>delay_us</code>, experimenting with the delay instead of that. But check \"the other end's\" data sheet for the exact timing needed, 4-5\u00b5s should be fine.</p>\n\n<p>Why your delay loop didn't work? It was most probably optimized away by the compiler that recognised you didn't do something relevant in that empty loop.</p>\n\n<p>Ideally, you should try and read SDA in about the middle of the HIGH phase of SCL - with an un-rolled loop for 8 bits and some <code>delay_us</code> spread in that should work perfectly.</p>\n"}], "owner": {"reputation": 113, "user_id": 8166291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8655760bd9e23243742766923c161f?s=128&d=identicon&r=PG&f=1", "display_name": "Kristian", "link": "https://stackoverflow.com/users/8166291/kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 44835265, "answer_count": 1, "score": 0, "last_activity_date": 1498772464, "creation_date": 1498661799, "last_edit_date": 1498666007, "question_id": 44806066, "link": "https://stackoverflow.com/questions/44806066/i2c-bizarre-delay-issue-when-reading", "title": "I2C bizarre delay issue when reading", "body": "<p>I've been trying to get my ATTINY85 to bit-bang I2C (read/write). I have the following configuration:</p>\n\n<pre><code>PB0 = SDA\nPB1 = LED\nPB2 = SCL\n</code></pre>\n\n<p>I'm able to write without any problems, but reading only works if I have my 'delay()' function inside the read loop, so far so good:</p>\n\n<pre><code>char i2c_read(void)\n{\n    uint8_t B = 0;\n    DDRB &amp;= 0b11111110; // switch PB0 to input\n\n    for ( int bit = 0; bit &lt; 0x08; bit++ )\n    {        \n        delay(); // &lt;--!!!!!!!!! the root of all evil\n\n        SIGNAL_HIGH( PORT_SCL );\n\n        B &lt;&lt;= 1;\n\n        if( PINB &amp; (1 &lt;&lt; PB0 ) )\n        {\n            B |= 1;              \n        } \n        else\n        {\n            B |= 0;              \n        }\n\n        SIGNAL_LOW( PORT_SCL );\n    }\n\n    DDRB |= 0b00000001; // switch PB0 as output\n\n    i2c_nack();\n\n    return B;\n}\n</code></pre>\n\n<p>If I remove the delay(), I2C no longer works and I cannot read from the device (device doesn't respond). Seems logical, but the reason I want to remove the delay() is because it's not actually an 'true' delay, it simply turns on and off an LED which is on a different pin (PB1), I2C lines are on PB0 and PB2.</p>\n\n<p>The _delay_ms was too slow, so I just turned PB1 pin on and off in order to make a tiny delay and that's the only way it works. Here are the contents of my delay function, everything works great if I leave it like this:</p>\n\n<pre><code>void delay()\n{\n    LED_ON();\n    LED_OFF();\n}\n\nvoid LED_ON( void )\n{\n    PORTB |= 0b00000010; // PB1\n}\n\nvoid LED_OFF( void )\n{\n    PORTB &amp;= 0b11111101; // PB1\n}\n</code></pre>\n\n<p>I suspected that I probably 'nailed' a perfect delay which creates the appropriate signal length expected by the other device, so I tried to make the same delay using the for loop and oscilloscope:</p>\n\n<pre><code>void delay()\n{\n   for( int i=0; i&lt;20; i++){ }\n}\n</code></pre>\n\n<p>No luck, I2C reading stops working..</p>\n\n<p>Then I decided to switch the LED to another PIN and leave the PB1 completely alone to see if it's delay related or pin/circuit related:</p>\n\n<pre><code>void delay()\n{\n    LED_ON();\n    LED_OFF();\n}\n\nvoid LED_ON( void )\n{\n    PORTB |= 0b00001000; // PB3\n}\n\n\nvoid LED_OFF( void )\n{\n    PORTB &amp;= 0b11110111; // PB3\n}\n</code></pre>\n\n<p>And strangely I2C stopped working again! It only works if I put PB1 high/low. I still can't understand if I just happened to nail the perfect delay required and it just happens to be that turning PB1 on takes less time than turning the PB3 or it has something do with the circuit itself and LED doing some kind of pull-up/pull-down functionality (forgive my ignorance, I'm a beginner) on the I2C, but then again PB1 is not connected to the I2C lines at all.</p>\n\n<p>Can anyone please shed some light on why is it only working when I turn on PB1 on/off, instead of doing a real delay? Thanks!</p>\n\n<p>The full source:</p>\n\n<pre><code>#define PORT_SDA PB0\n#define PORT_SCL PB2\n\n#define SIGNAL_HIGH(PORT) PORTB |=  ( 1 &lt;&lt; PORT )\n#define SIGNAL_LOW(PORT)  PORTB &amp;= ~( 1 &lt;&lt; PORT )\n\nvoid delay();\nvoid LED_ON(void);\nvoid LED_OFF(void);\n\nvoid i2c_init(void);\nvoid i2c_start(void);\nchar i2c_read(void);\nvoid i2c_stop(void);\nvoid i2c_nack(void);\nvoid i2c_ack(void);\nvoid i2c_ack_slave(void);\nvoid i2c_write(uint8_t byte);\n\nvoid i2c_init()\n{\n    DDRB = 0b00000010; // TODO: should be removed once the weird delay issue is solved\n    DDRB |= ( 1 &lt;&lt; PORT_SDA );\n    DDRB |= ( 1 &lt;&lt; PORT_SCL );\n}\n\nvoid i2c_start( void )\n{\n    SIGNAL_LOW(  PORT_SCL );\n    SIGNAL_HIGH( PORT_SDA );\n    SIGNAL_HIGH( PORT_SCL );\n    SIGNAL_LOW(  PORT_SDA );\n    SIGNAL_LOW(  PORT_SCL );\n}\n\nvoid i2c_stop( void )\n{\n    SIGNAL_LOW(  PORT_SCL );\n    SIGNAL_LOW(  PORT_SDA );\n    SIGNAL_HIGH( PORT_SCL );\n    SIGNAL_HIGH( PORT_SDA );\n}\n\nvoid i2c_ack(void)\n{\n   SIGNAL_LOW(  PORT_SDA );\n   SIGNAL_HIGH( PORT_SCL );\n   SIGNAL_LOW(  PORT_SCL );\n   SIGNAL_HIGH( PORT_SDA );\n}\n\nvoid i2c_nack(void)\n{\n   SIGNAL_HIGH( PORT_SDA );\n   SIGNAL_HIGH( PORT_SCL );\n   SIGNAL_LOW(  PORT_SCL );\n}\n\nvoid i2c_ack_slave(void)\n{\n    SIGNAL_HIGH( PORT_SCL );\n    SIGNAL_LOW( PORT_SCL );\n}\n\nvoid i2c_write(uint8_t byte)\n{\n    uint8_t bit;\n\n    for ( bit = 0; bit &lt; 0x08; bit++ )\n    {\n        if( ( byte &lt;&lt; bit ) &amp; 0x80 )\n            SIGNAL_HIGH( PORT_SDA );\n        else\n            SIGNAL_LOW( PORT_SDA );\n\n        SIGNAL_HIGH( PORT_SCL );\n        SIGNAL_LOW( PORT_SCL );\n    }\n\n    // Clear both lines (needed?)\n    SIGNAL_LOW( PORT_SCL );\n    SIGNAL_LOW( PORT_SDA );\n\n    i2c_ack();\n}\n\nchar i2c_read(void)\n{\n    uint8_t B = 0;\n    DDRB &amp;= 0b11111110; // switch PB0 to input\n\n    for ( int bit = 0; bit &lt; 0x08; bit++ )\n    {        \n        delay(); // &lt;-- the root of all evil\n\n        SIGNAL_HIGH( PORT_SCL );\n\n        B &lt;&lt;= 1;\n\n        if( PINB &amp; (1 &lt;&lt; PB0 ) )\n        {\n            B |= 1;              \n        } \n        else\n        {\n            B |= 0;              \n        }\n\n        SIGNAL_LOW( PORT_SCL );\n    }\n\n    DDRB |= 0b00000001; // switch PB0 as output\n\n    i2c_nack();\n\n    return B;\n}\n\n\nvoid delay()\n{\n    LED_ON();\n    LED_OFF();\n}\n\n\nvoid LED_ON( void )\n{\n    PORTB |= 0b00000010;\n}\n\n\nvoid LED_OFF( void )\n{\n    PORTB &amp;= 0b11111101;\n}\n</code></pre>\n"}, {"tags": ["c", "variables", "range"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 5, "creation_date": 1498658010, "post_id": 44804477, "comment_id": 76588928, "body": "You can&#39;t short of modeling this with something &quot;private&quot; and writing your own accessor functions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "edited": false, "score": 0, "creation_date": 1498658071, "post_id": 44804477, "comment_id": 76588998, "body": "@AndriyBerestovskyy what &quot;don&#39;t you think&quot;?"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 1, "creation_date": 1498658090, "post_id": 44804477, "comment_id": 76589020, "body": "C language hasn&#39;t this feature!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498658227, "post_id": 44804477, "comment_id": 76589146, "body": "And what should happen when an illegal assignment happening?"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1498658429, "post_id": 44804477, "comment_id": 76589338, "body": "Maybe using C++ you might write a class able to manage this problem!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1498659694, "post_id": 44804477, "comment_id": 76590372, "body": "You can&#39;t do this in C. In C++ it&#39;s possible."}, {"owner": {"reputation": 57, "user_id": 11101827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48e5f191905080ac4d03399742e5f82b?s=128&d=identicon&r=PG&f=1", "display_name": "trail99", "link": "https://stackoverflow.com/users/11101827/trail99"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1590259696, "post_id": 44804477, "comment_id": 109616523, "body": "@Jabberwocky how would I do it in c++?"}], "answers": [{"comments": [{"owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "edited": false, "score": 0, "creation_date": 1498658302, "post_id": 44804591, "comment_id": 76589215, "body": "But with this I can&#39;t assign value in between 20 and 520, right ?"}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498658538, "post_id": 44804591, "comment_id": 76589425, "body": "There is no such option in C directly. You need if statements to check values. Direct option does not exists."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498658541, "post_id": 44804591, "comment_id": 76589427, "body": "<code>MySpecialEnum foo = -1;</code> (not my downvote, but maybe for this ... enum doesn&#39;t enforce anything) -- I see you edited it in :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1498658787, "post_id": 44804591, "comment_id": 76589631, "body": "How is that different from checking the integer range directly? It only obfuscates the code. Also enum constants are <code>int</code> only."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498658864, "post_id": 44804591, "comment_id": 76589699, "body": "@Olaf: I thought I&#39;d explained its limitations and usefulness in the answer?"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1498659018, "last_edit_date": 1498659018, "creation_date": 1498658213, "answer_id": 44804591, "question_id": 44804477, "link": "https://stackoverflow.com/questions/44804477/variable-in-c-with-limited-range-of-acceptable-values/44804591#44804591", "title": "Variable in C with limited range of acceptable values", "body": "<p>Well you sort of can:</p>\n\n<pre><code>typedef enum {\n    F_FIRST = 20,\n    E_LAST = 520\n} MySpecialEnum;\n</code></pre>\n\n<p>However this range will not be enforced, either at compile-time or at run-time, but you can use it for explicit range-checking, and as an aid to self-documenting code.\n<hr>\nRemember this is C, a low level language. If you want run-time checking of variables with user-defined ranges then consider a language such as Pascal, where you can declare a <em>subrange</em> variable like this:</p>\n\n<pre class=\"lang-pascal prettyprint-override\"><code>PROGRAM test;\n\nVAR\n  x : 20 .. 520;\n\nBEGIN\n  x := 20;   // OK\n  x := 1000; // error\nEND.\n</code></pre>\n\n<p>and then you get range-checking at run-time without any explicit code. Of course there is a performance penalty of this.</p>\n"}, {"comments": [{"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 0, "creation_date": 1498658273, "post_id": 44804595, "comment_id": 76589182, "body": "Of course you can. You can simply use opaque structures and accessors. It&#39;s a terrible solution, but it is possible."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 1, "creation_date": 1498658351, "post_id": 44804595, "comment_id": 76589261, "body": "@kay well.. to an extent. You can&#39;t force the compiler to typecheck it for you."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498658526, "post_id": 44804595, "comment_id": 76589419, "body": "kay I meant to say what @EugeneSh. said."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 5, "last_activity_date": 1498658812, "last_edit_date": 1498658812, "creation_date": 1498658221, "answer_id": 44804595, "question_id": 44804477, "link": "https://stackoverflow.com/questions/44804477/variable-in-c-with-limited-range-of-acceptable-values/44804595#44804595", "title": "Variable in C with limited range of acceptable values", "body": "<blockquote>\n  <p>How can I have a variable in C whose value should lie only between 20 to 520 ?</p>\n</blockquote>\n\n<p><em>There is not such a data type in C.</em></p>\n\n<p>Even if the range was something close to the limits of some types, the danger of underflowing or overflowing would be still be a thing (imagine an <code>unsigned int</code> for example, where you want the lower bound to be 0, but someone can excess that bound).</p>\n\n<hr>\n\n<p>What you <em>can</em> do though is to write your own structures, accessors and/or enum(s) to achieve that. If you are interested read Paul R's answer. However I don't encourage you to do so.</p>\n\n<p>I would do this, if for example the variable was to be filled by the user:</p>\n\n<pre><code>int v;\ndo {\n    scanf(\"%d\", &amp;v);\n} while(!(v &gt;= 20 &amp;&amp; v &lt;= 520));\n</code></pre>\n\n<p>so that the user will be prompted again and again, until his input match the criteria.</p>\n\n<hr>\n\n<p>PS: This sounds like an XY question.</p>\n"}, {"comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498658424, "post_id": 44804657, "comment_id": 76589332, "body": "A <code>typedef unsigned int foo</code> would save the <code>-&gt;</code> or <code>.</code> operator wouldn&#39;t it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498658493, "post_id": 44804657, "comment_id": 76589395, "body": "Huh? That would typedef <code>foobar</code> as an alias to <code>int</code> ... what do you mean?"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1498658550, "post_id": 44804657, "comment_id": 76589430, "body": "Instead of using a structure why not using a typedef...?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 4, "creation_date": 1498658620, "post_id": 44804657, "comment_id": 76589474, "body": "Because a) a struct is what you will probably have in a non-trivial program and b) it allows you to use an opaque pointer to <i>really</i> enforce usage of your custom accessor."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 9, "last_activity_date": 1498658346, "creation_date": 1498658346, "answer_id": 44804657, "question_id": 44804477, "link": "https://stackoverflow.com/questions/44804477/variable-in-c-with-limited-range-of-acceptable-values/44804657#44804657", "title": "Variable in C with limited range of acceptable values", "body": "<p>C doesn't have a way to <em>directly</em> express what you want. Note that even an <code>enum</code> doesn't <strong>enforce</strong> valid values. You can assign <em>any</em> value of the underlying type of an <code>enum</code>.</p>\n\n<p>You could always come up with your own logic, e.g. if this is part of an object you model as a struct:</p>\n\n<pre><code>struct foo\n{\n    unsigned bar;\n};\n\n// [...]\n\nint foo_setBar(struct foo *self, unsigned val)\n{\n    if (val &lt; 20 || val &gt; 520) return -1;\n    self-&gt;bar = val;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 5, "last_activity_date": 1498678355, "last_edit_date": 1498678355, "creation_date": 1498658861, "answer_id": 44804869, "question_id": 44804477, "link": "https://stackoverflow.com/questions/44804477/variable-in-c-with-limited-range-of-acceptable-values/44804869#44804869", "title": "Variable in C with limited range of acceptable values", "body": "<p>Unfortunately, C does not provide access control to struct members. So bad luck at first.</p>\n\n<p>You have to (try to?) work around this limitation in any suitable way. One could be hiding away the data from the user:</p>\n\n<p>type.h:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nstruct TheType;\ntypedef struct TheType TheType;\n\nunsigned short get(TheType const* type);\nbool set(TheType* type, unsigned short value);\n</code></pre>\n\n<p>type.c:</p>\n\n<pre><code>struct TheType\n{\n    unsigned short value;\n}\n\nunsigned short get(TheType const* type)\n{\n    return type-&gt;value;\n}\n\nbool set(TheType* type, unsigned short value)\n{\n    if(value &lt; 20 || value &gt; 520)\n        return false;\n    type-&gt;value = value;\n    return true;\n}\n</code></pre>\n\n<p>This comes with another drawback, though, as other features such as <code>sizeof</code> get unusable, too... We'd probably have to provide at least a function <code>size_t sizeofTheType()</code> allowing the user to allocate appropriate amount of memory and possibly other stuff, too.</p>\n"}, {"tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": false, "score": 1, "last_activity_date": 1499158922, "last_edit_date": 1499158922, "creation_date": 1498661454, "answer_id": 44805914, "question_id": 44804477, "link": "https://stackoverflow.com/questions/44804477/variable-in-c-with-limited-range-of-acceptable-values/44805914#44805914", "title": "Variable in C with limited range of acceptable values", "body": "<p>It may be possible in C++. But as far as using C syntax, it's impossible. So you will have to use ugly DSL like below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n\n#define DEFINE_VAR(x) int ____________________ ## x = 0;\n\n#define VARIDATE_VAR(x) \\\n  assert(20 &lt;= ____________________ ## x &amp;&amp; ____________________ ## x &lt;= 520);\n\n#define SET_VAR(x, y) { \\\n  ____________________ ## x = y; \\\n  VARIDATE_VAR(x) \\\n  }\n\n#define GET_VAR(x) ____________________ ## x\n\n\nint\nmain(int argc, char* argv[]) {\n  DEFINE_VAR(n);\n  SET_VAR(n, 30);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5467, "favorite_count": 1, "answer_count": 5, "score": 5, "last_activity_date": 1578755429, "creation_date": 1498657934, "last_edit_date": 1578755429, "question_id": 44804477, "link": "https://stackoverflow.com/questions/44804477/variable-in-c-with-limited-range-of-acceptable-values", "title": "Variable in C with limited range of acceptable values", "body": "<p>How can I have a variable in C whose value should lie only between 20 to 520? I want to restrict that variable assignment to values between 20 to 520?\nIn case I take an enum whose value shall start from 20, I still need to define another 519 values inside enum.</p>\n"}, {"tags": ["c", "arrays", "generics"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1498656753, "post_id": 44803964, "comment_id": 76587870, "body": "Have two arguments: One is the array itself (a pointer to the first element), and the second is the size (in number of elements) of the array."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498660117, "post_id": 44803964, "comment_id": 76590735, "body": "It sounds like you have a poor design and seek ways to make it worse... What is the actual problem you are trying to solve? Why do you have variables with horrible names such as <code>name1, name2, name3</code>? Make an array of arrays or an array of structs instead. And what are those variables, globals? Smells very fishy."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1498657881, "creation_date": 1498657881, "answer_id": 44804444, "question_id": 44803964, "link": "https://stackoverflow.com/questions/44803964/generic-function-for-multiple-arrays-of-same-datatypes-in-c/44804444#44804444", "title": "Generic function for multiple arrays of same datatypes in c?", "body": "<p>Your function will need to know about each array and select one based on the number.  If you have a small fixed number of global arrays as in your example, you can use <code>switch</code> to select one:</p>\n\n<pre><code>void func(int array_number)\n{\n    int *arr;\n    int len, i;\n\n    switch (array_number) {\n    case 1:\n       arr = arr1;\n       len = sizeof(arr1) / sizeof(arr1[0]);\n       break;\n    case 2:\n       arr = arr2;\n       len = sizeof(arr2) / sizeof(arr2[0]);\n       break;\n    case 3:\n       arr = arr3;\n       len = sizeof(arr3) / sizeof(arr3[0]);\n       break;\n    default:\n       return;\n    }\n\n    for(int i=0; i&lt;len; i++)\n    {\n      arr[i] = i;\n    }\n}\n</code></pre>\n\n<p>Of course, the most flexible thing to do is to change the function to take the array (a pointer to the first element technically) and the length.</p>\n\n<pre><code>void func(int *arr, int len)\n{\n    for(int i=0; i&lt;len; i++)\n    {\n      arr[i] = i;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1498668555, "creation_date": 1498668555, "answer_id": 44808409, "question_id": 44803964, "link": "https://stackoverflow.com/questions/44803964/generic-function-for-multiple-arrays-of-same-datatypes-in-c/44808409#44808409", "title": "Generic function for multiple arrays of same datatypes in c?", "body": "<p>Consider a helper function that accepts <code>int *</code> and <code>size_t</code> to do the incremental assignments.</p>\n\n<pre><code>void func_helper(int *arr, size_t length) {\n  for (size_t i = 0; i &lt; length; i++) {\n    arr[i] = (int) i;\n  }\n}\n</code></pre>\n\n<p>... and another function to translate the index into a the array pointer and length.</p>\n\n<p>No use of a long chain of <code>if-else</code> statements</p>\n\n<pre><code>int arr1[10], arr2[15], arr3[20];\n\nvoid func(int array_index) {\n  const struct xx {\n    int *ptr;\n    size_t length;\n  } arrays[] = { //\n      { arr1, sizeof arr1 / sizeof arr1[0] }, //\n      { arr2, sizeof arr2 / sizeof arr2[0] }, //\n      { arr3, sizeof arr3 / sizeof arr3[0] } };\n  const size_t n = sizeof arrays / sizeof arrays[0];\n\n  // Test array_index validity\n  if (array_index &gt; 0 &amp;&amp; array_index &lt;= n) {\n    array_index--;\n    func_helper(arrays[array_index].ptr, arrays[array_index].length);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 8155040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2a3afe4c6c8d8bc56641f0fc351aa0f?s=128&d=identicon&r=PG&f=1", "display_name": "User_890", "link": "https://stackoverflow.com/users/8155040/user-890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 44804444, "answer_count": 2, "score": -1, "last_activity_date": 1498668555, "creation_date": 1498656650, "last_edit_date": 1498656907, "question_id": 44803964, "link": "https://stackoverflow.com/questions/44803964/generic-function-for-multiple-arrays-of-same-datatypes-in-c", "title": "Generic function for multiple arrays of same datatypes in c?", "body": "<p>I want to have a generic function that can operates on multiple arrays of different size but same datatypes and takes array number only as an argument. Let's consider three arrays <code>arr1[10]</code>, <code>arr2[15]</code>, <code>arr3[20]</code>. The generic function should be like:</p>\n\n<pre><code>void func(int array_number)\n{\n   for(int i=0; i&lt;y; i++)\n   {\n     arrz[i] = i;\n   }\n}\n</code></pre>\n\n<p>Here array size <code>y</code> will be selected based on <code>array_number</code> (argument) and <code>z</code> in <code>arrz[i]</code> should be the <code>array_number</code> (argument of <code>func</code>) so that <code>func</code> puts data in respective array. Is it possible in c language?\nI know one solution is to send some number as argument during function call for diffrentiating arrays but I actually do not want to use if-else in <code>func</code> to avoid lengthy code.</p>\n"}, {"tags": ["c", "struct", "openmp"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498655931, "post_id": 44803621, "comment_id": 76587193, "body": "Please apply proper formatting..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498656691, "post_id": 44803621, "comment_id": 76587818, "body": "Adjusted formatting myself - please be aware that I allowed myself (as apparently not related to your actual problem) changing <code>int flag == 1;</code> to <code>int flag = 1;</code>, too."}, {"owner": {"reputation": 59, "user_id": 7951325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6a761d1d3e72d30f42c36d7143fdcaa7?s=128&d=identicon&r=PG&f=1", "display_name": "Sarmad", "link": "https://stackoverflow.com/users/7951325/sarmad"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498657082, "post_id": 44803621, "comment_id": 76588105, "body": "@Aconcagua Thanks , I wrote super fast so made silly mistakes."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1498657307, "post_id": 44803621, "comment_id": 76588307, "body": "Not related to your problem, but instead of the additional pointer array you could simply have used <code>rt_OneStep(Array_m + k);</code>"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1498657362, "post_id": 44803621, "comment_id": 76588358, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> carefully. +&quot;it is crashing&quot; is a super vague error description."}, {"owner": {"reputation": 59, "user_id": 7951325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6a761d1d3e72d30f42c36d7143fdcaa7?s=128&d=identicon&r=PG&f=1", "display_name": "Sarmad", "link": "https://stackoverflow.com/users/7951325/sarmad"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1498657932, "post_id": 44803621, "comment_id": 76588845, "body": "@zulan further clearified. there is no error description, program simply stops working."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1498657956, "creation_date": 1498657956, "answer_id": 44804484, "question_id": 44803621, "link": "https://stackoverflow.com/questions/44803621/array-of-structs-in-openmp-in-c/44804484#44804484", "title": "Array of Structs in OpenMP in C", "body": "<p>Problem is quite obvious: <code>pl3phPWM_M-&gt;Timing.t</code> is a pointer: <code>time_T* t;</code></p>\n\n<p>Nowhere in your code, you initialise this pointer, but as you use global objects, the entire structs get default initialised, which means the pointer is set to <code>NULL</code>.</p>\n\n<p>By <code>pl3phPWM_M-&gt;Timing.t[0]</code> (or equivalent: <code>*pl3phPWM_M-&gt;Timing.t</code>), you dereference this null pointer, trying to assign something to it - thus the crash. I assume <code>rtsiGetT</code> returns a time_T struct (not a pointer to), so you could just remove the pointer in your struct: <code>time_T t;</code>. If you cannot do this for whatever reason, you need first assign it a value to:</p>\n\n<pre><code>if(!pl3phPWM_M-&gt;Timing.t)\n{\n    pl3phPWM_M-&gt;Timing.t = (time_T*) malloc(sizeof(time_T));\n    if(!pl3phPWM_M-&gt;Timing.t)\n    {\n        // malloc failed! you need appropriate error handling!\n    }\n}\n</code></pre>\n\n<p>Now you <em>can</em> do your assignment as was. I would prefer to initialise the pointers right within the main function before entering the loop (you wouldn't need the outer if then - but still check the result of malloc!).</p>\n"}], "owner": {"reputation": 59, "user_id": 7951325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6a761d1d3e72d30f42c36d7143fdcaa7?s=128&d=identicon&r=PG&f=1", "display_name": "Sarmad", "link": "https://stackoverflow.com/users/7951325/sarmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1498657956, "creation_date": 1498655805, "last_edit_date": 1498657825, "question_id": 44803621, "link": "https://stackoverflow.com/questions/44803621/array-of-structs-in-openmp-in-c", "title": "Array of Structs in OpenMP in C", "body": "<p>I have very large code with Mulitple files, below is the snippet to only Show my issue. I am trying to run code on all processors independently (not conventional way of OpenMP , where some variables are shared). </p>\n\n<p>please Forget about Header files. all necessary are included.</p>\n\n<p>Main.c</p>\n\n<pre><code>static RT_MODEL_pl3phPWM_T pl3phPWM_M_;\nRT_MODEL_pl3phPWM_T Array_m[4];\nstatic RT_MODEL_pl3phPWM_T * const pl3phPWM_M_array[4] = { &amp;Array_m[0], &amp;Array_m[1], &amp;Array_m[2], &amp;Array_m[3] };\n\nint main()\n{\n    int flag = 1;\n    StartTime();   // in anotherfile\n#pragma omp parallel num_threads(4)\n    while(flag == 1)\n    {\n        rt_OneStep(pl3phPWM_M_array[k]);\n        flag = EndTime();  //returns 2 when time &gt; 15 seconds\n    }\n\n    return 0;\n}\n\n\nvoid rt_OneStep(RT_MODEL_pl3phPWM_T *const pl3phPWM_M)\n{\n    // here some other steps running OK. \n\n    pl3phPWM_M-&gt;Timing.t[0] = rtsiGetT(&amp;pl3phPWM_M-&gt;solverInfo);  // Error Line, program stops working.\n}\n</code></pre>\n\n<p>Step.h   // only the Struct part shown here, not complete file copied here. Header file is created correctly and working fine. </p>\n\n<pre><code>// Macro which is being used in error line \n\n#define rtsiSetTPtr(S,tp) ((S)-&gt;tPtr = (tp))\n#define rtsiSetT(S,t)     ((*((S)-&gt;tPtr))[0] = (t))\n#define rtsiGetT(S)       (*((S)-&gt;tPtr))[0]\n\n// few other structs here  \n\nstruct RT_MODEL_pl3phPWM_T\n{\n    const char_T *errorStatus;\n    RTWSolverInfo solverInfo;\n\n    /*\n     * Timing:\n     * The following substructure contains information regarding\n     * the timing information for the model.\n     */\n    struct\n    {\n        SimTimeStep simTimeStep;\n        boolean_T stopRequestedFlag;\n        time_T *t;                        // Problem when using this pointer;\n        time_T tArray[5];\n    } Timing;\n};\n</code></pre>\n\n<p>Error line shown in Main.c works fine when compiled sequentially, but for parallel cores, it is stops working. I hope I have given enough info, but if something missing, please let me know. </p>\n"}, {"tags": ["c", "gcc", "arm", "gnu-arm"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 14, "creation_date": 1498652983, "post_id": 44802390, "comment_id": 76584792, "body": "This might be some name mangling issue in the debugger, causing it to trick you. Instead of trusting the debugger, try to print the variables&#39; addresses and values from inside their respective translation units."}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 2, "creation_date": 1498653062, "post_id": 44802390, "comment_id": 76584853, "body": "Well, it is possible that identical naming of your variables in different modules screw up the debugger symbol resolution. Consider taking a look at <code>someFooFunc</code>, <code>someBarFunc</code> and <code>someBazFunc</code> assembler codes - this might give you a hint on either these variables actually share the same address (which should not be true)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498654137, "post_id": 44802390, "comment_id": 76585695, "body": "Why do you use the C frontend for compiling, but g++ for linking?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1498654388, "post_id": 44802390, "comment_id": 76585887, "body": "Make your program so that the behaviour would differ if the variables did or did not have separate storage, and confirm output by running the program.  Perhaps the linker detects  that it can do what it&#39;s doing because it doesn&#39;t affect the program."}, {"owner": {"reputation": 263, "user_id": 7791353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758b931074f0c3840119fa80269cde6e?s=128&d=identicon&r=PG", "display_name": "helsmore", "link": "https://stackoverflow.com/users/7791353/helsmore"}, "edited": false, "score": 0, "creation_date": 1498654518, "post_id": 44802390, "comment_id": 76586013, "body": "I&#39;m using the GCC ARM Embedded toolchain, called from Eclipse running the GNU ARM Eclipse plug-ins. This setup uses <code>arm-none-eabi-g++</code> for linking."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498654559, "post_id": 44802390, "comment_id": 76586044, "body": "Which addresses do you get qualifying the variable names with the filenames?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1498663453, "post_id": 44802390, "comment_id": 76593344, "body": "Note that there are features of C++ that would solve your problem for you, and that mostly using the C subset of C++ may work for your code base."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 2, "creation_date": 1498665438, "post_id": 44802390, "comment_id": 76594861, "body": "<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Variables.html\" rel=\"nofollow noreferrer\">GDB&#39;s manual on program variables</a> describe how to resolve the particular variable.  One is <code>bar.c::myVar</code> and the other is <code>foo.c::myVar</code>.  Also, recommends using <code>-gstabs</code> if available and hopefully you don&#39;t have a class <code>foo</code> with member <code>c</code>."}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 7791353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758b931074f0c3840119fa80269cde6e?s=128&d=identicon&r=PG", "display_name": "helsmore", "link": "https://stackoverflow.com/users/7791353/helsmore"}, "edited": false, "score": 1, "creation_date": 1498655562, "post_id": 44802841, "comment_id": 76586915, "body": "<code>printf</code> is not easily available to me (cross compiling for an embedded target), but storing the return values from <code>someFooFunc</code> and <code>someBarFunc</code> and checking them with the debugger gives me <code>3</code> and <code>4</code> as in your example, so as you said, it looks like it&#39;s the debugger getting confused by the identical variable names. Thanks for your help!"}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "reply_to_user": {"reputation": 263, "user_id": 7791353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758b931074f0c3840119fa80269cde6e?s=128&d=identicon&r=PG", "display_name": "helsmore", "link": "https://stackoverflow.com/users/7791353/helsmore"}, "edited": false, "score": 0, "creation_date": 1498655650, "post_id": 44802841, "comment_id": 76586991, "body": "@helsmore well, I used <code>printf</code> as an example, and you figured out the rest :) In fact, <code>printf</code> is just a fancy decorator, as you might see I did not use it to obtain any low-level information. Cheers!"}], "tags": [], "owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "is_accepted": true, "score": 23, "last_activity_date": 1498664832, "last_edit_date": 1498664832, "creation_date": 1498653866, "answer_id": 44802841, "question_id": 44802390, "link": "https://stackoverflow.com/questions/44802390/different-static-global-variables-share-the-same-memory-address/44802841#44802841", "title": "Different Static Global Variables Share the Same Memory Address", "body": "<p><em>NOTE: I do understand that OP's target platform is ARM, but nevertheless I'm still posting an answer in terms of x86. The reason is, I have no ARM backend in handy, while the question is not limited to a particular architecture.</em></p>\n\n<p>Here's a simple test stand. Note that I'm using <code>int</code> instead of custom <code>enum</code> typedef, since it should not matter at all.</p>\n\n<p><strong>foo.c</strong></p>\n\n<pre><code>static int myVar = 1;\n\nint someFooFunc(void)\n{\n        myVar += 2;\n        return myVar;\n}\n</code></pre>\n\n<p><strong>bar.c</strong></p>\n\n<pre><code>static int myVar = 1;\n\nint someBarFunc(void)\n{\n        myVar += 3;\n        return myVar;\n}\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint someFooFunc(void);\nint someBarFunc(void);\n\nint main(int argc, char* argv[])\n{\n        printf(\"%d\\n\", someFooFunc());\n        printf(\"%d\\n\", someBarFunc());\n        return 0;\n}\n</code></pre>\n\n<p>I'm compiling it on x86_64 Ubuntu 14.04 with GCC 4.8.4:</p>\n\n<pre><code>$ g++ main.c foo.c bar.c\n$ ./a.out\n3\n4\n</code></pre>\n\n<p>Obtaining such results effectively means that <code>myVar</code> variables in <code>foo.c</code> and <code>bar.c</code> are different. If you look at the disassembly (by <code>objdump -D ./a.out</code>):</p>\n\n<pre><code>000000000040052d &lt;_Z11someFooFuncv&gt;:\n  40052d:       55                      push   %rbp\n  40052e:       48 89 e5                mov    %rsp,%rbp\n  400531:       8b 05 09 0b 20 00       mov    0x200b09(%rip),%eax        # 601040 &lt;_ZL5myVar&gt;\n  400537:       83 c0 02                add    $0x2,%eax\n  40053a:       89 05 00 0b 20 00       mov    %eax,0x200b00(%rip)        # 601040 &lt;_ZL5myVar&gt;\n  400540:       8b 05 fa 0a 20 00       mov    0x200afa(%rip),%eax        # 601040 &lt;_ZL5myVar&gt;\n  400546:       5d                      pop    %rbp\n  400547:       c3                      retq\n\n0000000000400548 &lt;_Z11someBarFuncv&gt;:\n  400548:       55                      push   %rbp\n  400549:       48 89 e5                mov    %rsp,%rbp\n  40054c:       8b 05 f2 0a 20 00       mov    0x200af2(%rip),%eax        # 601044 &lt;_ZL5myVar&gt;\n  400552:       83 c0 03                add    $0x3,%eax\n  400555:       89 05 e9 0a 20 00       mov    %eax,0x200ae9(%rip)        # 601044 &lt;_ZL5myVar&gt;\n  40055b:       8b 05 e3 0a 20 00       mov    0x200ae3(%rip),%eax        # 601044 &lt;_ZL5myVar&gt;\n  400561:       5d                      pop    %rbp\n  400562:       c3                      retq   \n</code></pre>\n\n<p>You can see that the actual addresses of static variables in different modules are indeed different: <code>0x601040</code> for <code>foo.c</code> and <code>0x601044</code> for <code>bar.c</code>. However, they are associated with a single symbol <code>_ZL5myVar</code>, which really screws up GDB logic.</p>\n\n<p>You can double-check that by means of <code>objdump -t ./a.out</code>:</p>\n\n<pre><code>0000000000601040 l     O .data  0000000000000004              _ZL5myVar\n0000000000601044 l     O .data  0000000000000004              _ZL5myVar\n</code></pre>\n\n<p>Yet again, different addresses, same symbols. How GDB will resolve this conflict is purely implementation-dependent.</p>\n\n<p>I strongly believe that it's your case as well. However, to be double sure, you might want to try these steps in your environment.</p>\n"}, {"tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 3, "last_activity_date": 1498660000, "creation_date": 1498660000, "answer_id": 44805374, "question_id": 44802390, "link": "https://stackoverflow.com/questions/44802390/different-static-global-variables-share-the-same-memory-address/44805374#44805374", "title": "Different Static Global Variables Share the Same Memory Address", "body": "<p>so.s make the linker happy</p>\n\n<pre><code>.globl _start\n_start: b _start\n</code></pre>\n\n<p>one.c</p>\n\n<pre><code>static unsigned int hello = 4;\nstatic unsigned int one = 5;\nvoid fun1 ( void )\n{\n    hello=5;\n    one=6;\n}\n</code></pre>\n\n<p>two.c</p>\n\n<pre><code>static unsigned int hello = 4;\nstatic unsigned int two = 5;\nvoid fun2 ( void )\n{\n    hello=5;\n    two=6;\n}\n</code></pre>\n\n<p>three.c</p>\n\n<pre><code>static unsigned int hello = 4;\nstatic unsigned int three = 5;\nvoid fun3 ( void )\n{\n    hello=5;\n    three=6;\n}\n</code></pre>\n\n<p>first off if you optimize then this is completely dead code and you should not expect to see any of these variables.  The functions are not static so they dont disappear:</p>\n\n<pre><code>Disassembly of section .text:\n\n08000000 &lt;_start&gt;:\n 8000000:   eafffffe    b   8000000 &lt;_start&gt;\n\n08000004 &lt;fun1&gt;:\n 8000004:   e12fff1e    bx  lr\n\n08000008 &lt;fun2&gt;:\n 8000008:   e12fff1e    bx  lr\n\n0800000c &lt;fun3&gt;:\n 800000c:   e12fff1e    bx  lr\n</code></pre>\n\n<p>If you dont optimize then</p>\n\n<pre><code>08000000 &lt;_start&gt;:\n 8000000:   eafffffe    b   8000000 &lt;_start&gt;\n\n08000004 &lt;fun1&gt;:\n 8000004:   e52db004    push    {r11}       ; (str r11, [sp, #-4]!)\n 8000008:   e28db000    add r11, sp, #0\n 800000c:   e59f3020    ldr r3, [pc, #32]   ; 8000034 &lt;fun1+0x30&gt;\n 8000010:   e3a02005    mov r2, #5\n 8000014:   e5832000    str r2, [r3]\n 8000018:   e59f3018    ldr r3, [pc, #24]   ; 8000038 &lt;fun1+0x34&gt;\n 800001c:   e3a02006    mov r2, #6\n 8000020:   e5832000    str r2, [r3]\n 8000024:   e1a00000    nop         ; (mov r0, r0)\n 8000028:   e28bd000    add sp, r11, #0\n 800002c:   e49db004    pop {r11}       ; (ldr r11, [sp], #4)\n 8000030:   e12fff1e    bx  lr\n 8000034:   20000000    andcs   r0, r0, r0\n 8000038:   20000004    andcs   r0, r0, r4\n\n0800003c &lt;fun2&gt;:\n 800003c:   e52db004    push    {r11}       ; (str r11, [sp, #-4]!)\n 8000040:   e28db000    add r11, sp, #0\n 8000044:   e59f3020    ldr r3, [pc, #32]   ; 800006c &lt;fun2+0x30&gt;\n 8000048:   e3a02005    mov r2, #5\n 800004c:   e5832000    str r2, [r3]\n 8000050:   e59f3018    ldr r3, [pc, #24]   ; 8000070 &lt;fun2+0x34&gt;\n 8000054:   e3a02006    mov r2, #6\n 8000058:   e5832000    str r2, [r3]\n 800005c:   e1a00000    nop         ; (mov r0, r0)\n 8000060:   e28bd000    add sp, r11, #0\n 8000064:   e49db004    pop {r11}       ; (ldr r11, [sp], #4)\n 8000068:   e12fff1e    bx  lr\n 800006c:   20000008    andcs   r0, r0, r8\n 8000070:   2000000c    andcs   r0, r0, r12\n\n08000074 &lt;fun3&gt;:\n 8000074:   e52db004    push    {r11}       ; (str r11, [sp, #-4]!)\n 8000078:   e28db000    add r11, sp, #0\n 800007c:   e59f3020    ldr r3, [pc, #32]   ; 80000a4 &lt;fun3+0x30&gt;\n 8000080:   e3a02005    mov r2, #5\n 8000084:   e5832000    str r2, [r3]\n 8000088:   e59f3018    ldr r3, [pc, #24]   ; 80000a8 &lt;fun3+0x34&gt;\n 800008c:   e3a02006    mov r2, #6\n 8000090:   e5832000    str r2, [r3]\n 8000094:   e1a00000    nop         ; (mov r0, r0)\n 8000098:   e28bd000    add sp, r11, #0\n 800009c:   e49db004    pop {r11}       ; (ldr r11, [sp], #4)\n 80000a0:   e12fff1e    bx  lr\n 80000a4:   20000010    andcs   r0, r0, r0, lsl r0\n 80000a8:   20000014    andcs   r0, r0, r4, lsl r0\n\nDisassembly of section .data:\n\n20000000 &lt;hello&gt;:\n20000000:   00000004    andeq   r0, r0, r4\n\n20000004 &lt;one&gt;:\n20000004:   00000005    andeq   r0, r0, r5\n\n20000008 &lt;hello&gt;:\n20000008:   00000004    andeq   r0, r0, r4\n\n2000000c &lt;two&gt;:\n2000000c:   00000005    andeq   r0, r0, r5\n\n20000010 &lt;hello&gt;:\n20000010:   00000004    andeq   r0, r0, r4\n</code></pre>\n\n<p>there are three hello variables created (you should notice by now that there is no reason to start up the debugger this can all be answered by simply examining the compiler and linker output, the debugger just gets in the way)</p>\n\n<pre><code> 800000c:   e59f3020    ldr r3, [pc, #32]   ; 8000034 &lt;fun1+0x30&gt;\n\n 8000034:   20000000    andcs   r0, r0, r0\n\n 8000044:   e59f3020    ldr r3, [pc, #32]   ; 800006c &lt;fun2+0x30&gt;\n\n 800006c:   20000008    andcs   r0, r0, r8\n\n 800007c:   e59f3020    ldr r3, [pc, #32]   ; 80000a4 &lt;fun3+0x30&gt;\n\n 80000a4:   20000010    andcs   r0, r0, r0, lsl r0\n\n20000000 &lt;hello&gt;:\n20000000:   00000004    andeq   r0, r0, r4\n\n20000008 &lt;hello&gt;:\n20000008:   00000004    andeq   r0, r0, r4\n\n20000010 &lt;hello&gt;:\n20000010:   00000004    andeq   r0, r0, r4\n</code></pre>\n\n<p>each function is accessing its own separate version of the static global.  They are not combined into one shared global.</p>\n"}, {"tags": [], "owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "is_accepted": false, "score": 3, "last_activity_date": 1498678752, "creation_date": 1498678752, "answer_id": 44811207, "question_id": 44802390, "link": "https://stackoverflow.com/questions/44802390/different-static-global-variables-share-the-same-memory-address/44811207#44811207", "title": "Different Static Global Variables Share the Same Memory Address", "body": "<p>The answers thus far have demonstrated that it <em>should</em> work as written, but the actual answer is only in the comments so I will post it as an answer.</p>\n\n<p>What you\u2019re seeing is a debugger artifact, not the real situation.  In my experience, this should be your first guess of any truely wierd observation within the debugger.  Verify the observation <em>in the actual running program</em> before going on. E.g. an old fashioned debug printf statement.</p>\n"}], "owner": {"reputation": 263, "user_id": 7791353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758b931074f0c3840119fa80269cde6e?s=128&d=identicon&r=PG", "display_name": "helsmore", "link": "https://stackoverflow.com/users/7791353/helsmore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 3, "accepted_answer_id": 44802841, "answer_count": 3, "score": 26, "last_activity_date": 1498678752, "creation_date": 1498652792, "last_edit_date": 1498655776, "question_id": 44802390, "link": "https://stackoverflow.com/questions/44802390/different-static-global-variables-share-the-same-memory-address", "title": "Different Static Global Variables Share the Same Memory Address", "body": "<h2>Summary</h2>\n\n<p>I have several C source files that all declare individual identically named static global variables. My understanding is that the static global variable in each file should be visible only within that file and should not have external linkage applied, but in fact I can see when debugging that the identically named variables share the same memory address.</p>\n\n<p>It is like the <code>static</code> keyword is being ignored and the global variables are being treated as <code>extern</code> instead. Why is this?</p>\n\n<h2>Example Code</h2>\n\n<p>foo.c:</p>\n\n<pre><code>/* Private variables -----------------------------------*/\nstatic myEnumType myVar = VALUE_A;\n\n/* Exported functions ----------------------------------*/\nvoid someFooFunc(void) {\n    myVar = VALUE_B;\n}\n</code></pre>\n\n<p>bar.c:</p>\n\n<pre><code>/* Private variables -----------------------------------*/\nstatic myEnumType myVar = VALUE_A;\n\n/* Exported functions ----------------------------------*/\nvoid someBarFunc(void) {\n    myVar = VALUE_C;\n}\n</code></pre>\n\n<p>baz.c:</p>\n\n<pre><code>/* Private variables -----------------------------------*/\nstatic myEnumType myVar = VALUE_A;\n\n/* Exported functions ----------------------------------*/\nvoid someBazFunc(void) {\n    myVar = VALUE_D;\n}\n</code></pre>\n\n<h2>Debugging Observations</h2>\n\n<ol>\n<li>Set breakpoints on the <code>myVar = ...</code> line inside each function.</li>\n<li>Call <code>someFooFunc</code>, <code>someBarFunc</code>, and <code>someBazFunc</code> in that order from main.</li>\n<li>Inside <code>someFooFunc</code> <code>myVar</code> initially is set to <code>VALUE_A</code>, after stepping over the line it is set to <code>VALUE_B</code>.</li>\n<li>Inside <code>someBarFunc</code> <code>myVar</code> is for some reason initally set to <code>VALUE_B</code> before stepping over the line, not <code>VALUE_A</code> as I'd expect, indicating the linker may have merged the separate global variables based on them having an identical name.</li>\n<li>The same goes for <code>someBazFunc</code> when it is called.</li>\n<li>If I use the debugger to evaluate the value of <code>&amp;myVar</code> when at each breakpoint the same address is given.</li>\n</ol>\n\n<h2>Tools &amp; Flags</h2>\n\n<p>Toolchain: GNU ARM GCC (6.2 2016q4)</p>\n\n<p>Compiler options:</p>\n\n<pre><code>arm-none-eabi-gcc -mcpu=cortex-m4 -mthumb -mlong-calls -O1 -fmessage-length=0 -fsigned-char -ffunction-sections -fdata-sections -ffreestanding -fno-move-loop-invariants -Wall -Wextra  -g3 -DDEBUG -DTRACE -DOS_USE_TRACE_ITM -DSTM32L476xx -I\"../include\" -I\"../system/include\" -I\"../system/include/cmsis\" -I\"../system/include/stm32l4xx\" -I\"../system/include/cmsis/device\" -I\"../foo/inc\" -std=gnu11 -MMD -MP -MF\"foo/src/foo.d\" -MT\"foo/src/foo.o\" -c -o \"foo/src/foo.o\" \"../foo/src/foo.c\"\n</code></pre>\n\n<p>Linker options:</p>\n\n<pre><code>arm-none-eabi-g++ -mcpu=cortex-m4 -mthumb -mlong-calls -O1 -fmessage-length=0 -fsigned-char -ffunction-sections -fdata-sections -ffreestanding -fno-move-loop-invariants -Wall -Wextra  -g3 -T mem.ld -T libs.ld -T sections.ld -nostartfiles -Xlinker --gc-sections -L\"../ldscripts\" -Wl,-Map,\"myProj.map\" --specs=nano.specs -o ...\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498652191, "post_id": 44802112, "comment_id": 76584244, "body": "Maybe you should read the documentation? It should be there how you write to the display. How else did you find out how to initialize the display?"}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498652499, "post_id": 44802112, "comment_id": 76584435, "body": "I read the data sheet of the stm8l and initialized control registers accordingly. But they haven&#39;t mentioned about writing to the display.Here&#39;s the link to the datasheet: <a href=\"http://www.st.com/content/ccc/resource/technical/document/reference_manual/2e/3b/8c/8f/60/af/4b/2c/CD00218714.pdf/files/CD00218714.pdf/jcr:content/translations/en.CD00218714.pdf\" rel=\"nofollow noreferrer\">st.com/content/ccc/resource/technical/document/reference_man&zwnj;&#8203;ual/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498653159, "post_id": 44802112, "comment_id": 76584927, "body": "How about experimenting with the &quot;LCD display memory (LCD_RAM)&quot;?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498653198, "post_id": 44802112, "comment_id": 76584961, "body": "The question is too broad. This would entirely depend on the type of the LCD. Most often they use SPI but UART or parallel are also common. Or does this particular STM have a display driver on-chip?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498655075, "post_id": 44802112, "comment_id": 76586479, "body": "We are not a tutoring site, nor a datasheet repo."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1498660507, "post_id": 44802112, "comment_id": 76591022, "body": "@ABHI: You seem to be attempting to interface a character LCD module with the built-in LCD driver of your MCU. This won&#39;t work, this part has insufficient columns/rows to address such a screen and more to the point the module will its own built-in driver to use. The end result will likely be something along the lines of writing ASCII characters to a data register, though not knowing the specific part and schematic it is impossible to offer any details."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498661199, "post_id": 44802112, "comment_id": 76591550, "body": "Umm.. when @Someprogrammerdude commented &#39;Maybe you should read the documentation?&#39; - s/he meant the LCD display module docs, not anything to do with your controller.  If the LCD module has a controller itself, (black epoxy blobs on back of PCB), then you are in for some fun."}, {"owner": {"reputation": 563, "user_id": 2541267, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/GKg1g.jpg?s=128&g=1", "display_name": "madD7", "link": "https://stackoverflow.com/users/2541267/madd7"}, "edited": false, "score": 0, "creation_date": 1498664896, "post_id": 44802112, "comment_id": 76594424, "body": "Have you checked on web for any tutorials? <a href=\"https://www.8051projects.net/lcd-interfacing/introduction.php\" rel=\"nofollow noreferrer\">Here</a> is one such tutorial."}, {"owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1498734673, "post_id": 44802112, "comment_id": 76626746, "body": "@doynax I&#39;m using the GDM0801 lcd module. I tried to pass characters to the LCD_RAMx registers and I found that the corresponding ASCII values of the characters I pass get stored properly. How should I obtain the output on the display"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1498739905, "post_id": 44802112, "comment_id": 76630788, "body": "@AHBI: That module has a 4 or 8-bit parallel interface which you will want to bit-bang through the I/O ports of your MCU. The details will depend on the schematic of your PCB. The built-in LCD controller and its registers accessed in the are <i>not</i> involved however."}], "owner": {"reputation": 29, "user_id": 8148754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71d53a83a307d1bf033a896f67957d7?s=128&d=identicon&r=PG&f=1", "display_name": "ABHI", "link": "https://stackoverflow.com/users/8148754/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 569, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498652057, "creation_date": 1498652057, "question_id": 44802112, "link": "https://stackoverflow.com/questions/44802112/lcd-interfacing-with-stm8", "title": "LCD interfacing with stm8", "body": "<p>I'm trying to interface a 16x2 LCD with the stm8l. I'm done the initialization part. Is there a data register analogous to the USART_DR register where data to be displayed on the lcd is written? Also do I have to write a function to convert all the 26 alphabets and 10 digits to their respective ASCII values separately or the lcd controller does it on its own? Here's the initialization part:</p>\n\n<pre><code>void lcdinit(void)\n{\nLCD_CR1 = 0X06;\nLCD_CR2 = 0X26;\nLCD_FRQ = 0X00;\nLCD_CR3 = 0X00;\nLCD_PM0 = 0XFF;\nLCD_PM1 = 0XFF;\nLCD_PM2 = 0XFF;\nLCD_CR3 = 1&lt;&lt;6;\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1498651915, "post_id": 44801980, "comment_id": 76584004, "body": "The error should really say it all. The initializers of the structure members must be compile-time constants. You can&#39;t use other structures members as they are not compile-time constants."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1498651971, "post_id": 44801980, "comment_id": 76584051, "body": "&quot;<i>whats a better solution</i>&quot; -- probably a better <i>design</i>, but it&#39;s hard to suggest something without knowing more about the current design and the purpose of the application... In general, it&#39;s good to have <i>one</i> place for a given value."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498651983, "post_id": 44801980, "comment_id": 76584060, "body": "Also, even if the two structures shares common values at initialization, they are still not <i>linked</i>. If you in code change <code>UI_AREA_1.x</code> then <code>UI_AREA_2.x</code> will not automatically change."}, {"owner": {"reputation": 1, "user_id": 4601542, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S_2lBwBj5Hs/AAAAAAAAAAI/AAAAAAAACk8/7hao4cHmC6I/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4601542/frank"}, "edited": false, "score": 0, "creation_date": 1498652628, "post_id": 44801980, "comment_id": 76584535, "body": "I forgot to mention that I want to have constants in compile time. So I will not change AreaDefinition while runtime. The intention is to create a user interfaace with area defintions and edit only one file to change the gui. So area1 and area2 have same x value. Area3 has x value of Area1+5 , Area4 has same x value like Area3 but other y.. etc."}, {"owner": {"reputation": 1, "user_id": 4601542, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S_2lBwBj5Hs/AAAAAAAAAAI/AAAAAAAACk8/7hao4cHmC6I/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4601542/frank"}, "edited": false, "score": 0, "creation_date": 1498652734, "post_id": 44801980, "comment_id": 76584622, "body": "In runtime a user pushes a button and i want to create gui with PrintArea(TArea* area)..."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 1, "user_id": 4601542, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S_2lBwBj5Hs/AAAAAAAAAAI/AAAAAAAACk8/7hao4cHmC6I/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4601542/frank"}, "edited": false, "score": 0, "creation_date": 1498719496, "post_id": 44802070, "comment_id": 76616579, "body": "@Frank C++ is a completely different language with completely different set of rules. If I recall correctly, C++ had an exception to rules that allowed use in integer expressions."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1498651941, "creation_date": 1498651941, "answer_id": 44802070, "question_id": 44801980, "link": "https://stackoverflow.com/questions/44801980/create-struct-depending-on-other-struct-member/44802070#44802070", "title": "Create struct depending on other struct member", "body": "<p>When initializing a variable, the initializer cannot be the value of another variable, even if that variable is defined <code>const</code>.  It must be a constant value.</p>\n\n<p>The best you can do is what your second example does: use a <code>#define</code> to initialize certain variables to the same value.</p>\n"}], "owner": {"reputation": 1, "user_id": 4601542, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S_2lBwBj5Hs/AAAAAAAAAAI/AAAAAAAACk8/7hao4cHmC6I/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4601542/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1498717827, "creation_date": 1498651668, "last_edit_date": 1498717827, "question_id": 44801980, "link": "https://stackoverflow.com/questions/44801980/create-struct-depending-on-other-struct-member", "title": "Create struct depending on other struct member", "body": "<p>I have a struct defined with typedef</p>\n\n<pre><code>typedef struct \n{\n   uint16_t x;\n   uint16_t y;\n   uint16_t width;\n   uint16_t height;\n}TArea;\n</code></pre>\n\n<p>Now I want to create some areas that depends on each other.\nSomething like </p>\n\n<p><strong>AreaDefs.h</strong></p>\n\n<pre><code>extern TArea UI_AREA_1;\nextern TArea UI_AREA_2;    \n</code></pre>\n\n<p><strong>AreaDefs.c</strong></p>\n\n<pre><code>TArea UI_AREA_1 = {.x = 0, .y = 0, .width = 5, .height = 10};\nTArea UI_AREA_2 = {.x = UI_AREA_1.x, .y = 200, .width = 5, .height = 10};\n</code></pre>\n\n<p>Why do i get \"Error: expression must have a constant value\" and whats a better solution? I dotn want to make something like </p>\n\n<pre><code>#define X_VAL 0\nTArea UI_AREA_1 = {.x = X_VAL, .y = 0, .width = 5, .height = 10};\nTArea UI_AREA_2 = {.x = X_VAL, .y = 200, .width = 5, .height = 10};\n</code></pre>\n\n<p>because of in my real application I have more than this two areas that depends on each other.</p>\n"}, {"tags": ["c", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1498650017, "post_id": 44801327, "comment_id": 76582531, "body": "What have you <i>tried</i>? Have you experimented with the bitwise operators before? Have you tried using the bitwise shift and bitwise or operators? I suggest you do that, experimenting with shifting and bitwise oring some values and see what you get."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1498650079, "post_id": 44801327, "comment_id": 76582572, "body": "Try with <i><code>unsigned</code></i> first, it is simpler."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1498650479, "post_id": 44801327, "comment_id": 76582873, "body": "Question makes no sense: <code>991231</code> does not fit into 16 bits."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1498650654, "post_id": 44801327, "comment_id": 76583015, "body": "@ShreedharHegde try <code>a*10000 + b*100 + c</code> you&#39;re putting decimal digits into the result so bitwise operations are not help here"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1498650677, "post_id": 44801327, "comment_id": 76583034, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2468708/converting-bit-field-to-int\">Converting Bit Field to int</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498650697, "post_id": 44801327, "comment_id": 76583052, "body": "@ShreedharHegde see answer below."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498650699, "post_id": 44801327, "comment_id": 76583055, "body": "<code>((((0u|a) &lt;&lt; 7) | b) &lt;&lt; 4) | c</code> is a start for bit-wise packing, yet <code>991231</code> is &gt; 16-bit."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498650798, "post_id": 44801327, "comment_id": 76583136, "body": "@ShreedharHegde your question only makes sense if you remove the <code>&#47;&#47;16-bit integer (uint16)</code> comment from the code snippet and the text &quot;<i>16-bit</i>&quot; from the question text."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1498650865, "post_id": 44801327, "comment_id": 76583187, "body": "Definitlely not a duplicate of <a href=\"https://stackoverflow.com/questions/2468708/converting-bit-field-to-int\" title=\"converting bit field to int\">stackoverflow.com/questions/2468708/converting-bit-field-to-&zwnj;&#8203;int</a>"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498651001, "post_id": 44801327, "comment_id": 76583292, "body": "@MichaelWalz Since this is an elegant method of achieving what the OP wants, I propose that. What do you try to achieve with your noise?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1498651331, "post_id": 44801327, "comment_id": 76583529, "body": "@Ctx which method do you mean? I don&#39;t see how <a href=\"https://stackoverflow.com/questions/2468708/converting-bit-field-to-int\">Converting Bit Field to int</a> is related to the question. Correct me if I&#39;m Wrong."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498651382, "post_id": 44801327, "comment_id": 76583563, "body": "@MichaelWalz The first answer shows up a good way to achieve, what the OP wants."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1498651585, "post_id": 44801327, "comment_id": 76583722, "body": "@Ctx: The answer shows some bad way to type-pun a bitfield struct to an integer, yes. But it is implementation defined and possibly more complicated than shifts/masks. Bitfields have no defined layout."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498651770, "post_id": 44801327, "comment_id": 76583881, "body": "@Olaf &quot;More complicated&quot; depends on the view. I personally find the code quite self-explaining when using a structure with bitfields compared with a bitshift-or-method. YMMV."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1498651809, "post_id": 44801327, "comment_id": 76583910, "body": "@Ctx This absolutely doesn&#39;t work for what the OP wants: D&#233;monstration: <a href=\"http://ideone.com/GP2RG4\" rel=\"nofollow noreferrer\">ideone.com/GP2RG4</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1498651859, "post_id": 44801327, "comment_id": 76583955, "body": "@Ctx: It is not less source code, but possibly more machine code. A good compiler will turn the shifts/masks into bitfield instructions if the arch supports them and a common pattern is used."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498651984, "post_id": 44801327, "comment_id": 76584061, "body": "@MichaelWalz Hm, yes, now reading the &quot;examples&quot; I see that the OP wants something different, the comments mislead me."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498652055, "post_id": 44801327, "comment_id": 76584122, "body": "@Olaf If you want a competition for the smallest source code, I&#39;d suggest you go to codegolf.stackexchange.com ."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1498653458, "post_id": 44801327, "comment_id": 76585160, "body": "@ctx Good you missed the point! I&#39;d recommed to read the accepted answer with the standard nearby."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498650878, "post_id": 44801447, "comment_id": 76583198, "body": "Hmm, looks like infinite loop with <code>concatenate(..., -1u)</code> - good start hough."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498651042, "post_id": 44801447, "comment_id": 76583322, "body": "@chux it works for the number ranges mentioned in the question."}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "edited": false, "score": 0, "creation_date": 1498651229, "post_id": 44801447, "comment_id": 76583453, "body": "Yes, it dies when given <code>-1u</code> (after all it&#39;s a bit hard to squeeze something into a container that&#39;s already completely full =) ). Seems to be working for the range specified in the question (quite small numbers). Good observation though, I didn&#39;t think about this case."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498651390, "post_id": 44801447, "comment_id": 76583572, "body": "That does not answer the question. And we are not a coding service."}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498651512, "post_id": 44801447, "comment_id": 76583672, "body": "@Olaf  while I was answering the question got edited."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498652164, "post_id": 44801447, "comment_id": 76584226, "body": "@Olaf yes it does answer the question. The OP is talking about bitwise operators, but actually his examples are not related at all to bitwise operations. Correct me if I&#39;m wrong. If you ignore all &quot;bit&quot; related stuff in the question, it makes sense."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498653634, "post_id": 44801447, "comment_id": 76585304, "body": "@MichaelWalz the only thing not making sense is the result. It contradicts the rest on the text, indeed. It also makes the question unclear, hence it should not have been answered."}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 1, "last_activity_date": 1498652731, "last_edit_date": 1498652731, "creation_date": 1498650181, "answer_id": 44801447, "question_id": 44801327, "link": "https://stackoverflow.com/questions/44801327/concatenate-three-8-bit-integers-to-one-16-bit-integer-in-c/44801447#44801447", "title": "Concatenate three 8-bit integers to one 16-bit integer in C", "body": "<p>What about something like the following? You modify it to works for three integers and for the size you want.</p>\n\n<pre><code>unsigned concatenate(unsigned x, unsigned y) {\n    unsigned pow = 10;\n    while(y &gt;= pow)\n        pow *= 10;\n    return x * pow + y;        \n}\n int main(){\n\n    int a=1,b=2,c=3;\n    printf(\"%d\\n\", concatenate(concatenate(a,b),c));\n }\n</code></pre>\n\n<p>credit to: <a href=\"https://stackoverflow.com/questions/12700497/how-to-concatenate-two-integers-in-c\">How to concatenate two integers in C</a></p>\n\n<p>If you feel brave and you are using <code>c++</code> you can extend it in order to work with a variable number of arguments.</p>\n\n<pre><code>template &lt;typename T&gt;\ninline T concatenate(T N){\n     return N;\n}\ntemplate &lt;typename T,typename...NS&gt;\nT concatenate(const T N, NS&amp;&amp;... ns){\n    const T rest = concatenate(std::forward&lt;NS&gt;(ns)...);\n    unsigned pow = 10;\n    while(rest &gt;= pow)\n        pow *= 10;\n    return N * pow + rest;      \n}\n\nint main()\n{\n    int a=1,b=2,c=3;\n    printf(\"%d\\n\", concatenate(a,b,c,987,a));\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6042795, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RBfN7QYx7lY/AAAAAAAAAAI/AAAAAAAABQ8/UwDvZXguD6M/photo.jpg?sz=128", "display_name": "Shreedhar Hegde", "link": "https://stackoverflow.com/users/6042795/shreedhar-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "closed_date": 1498651117, "answer_count": 1, "score": -5, "last_activity_date": 1498652731, "creation_date": 1498649841, "last_edit_date": 1498651384, "question_id": 44801327, "link": "https://stackoverflow.com/questions/44801327/concatenate-three-8-bit-integers-to-one-16-bit-integer-in-c", "closed_reason": "Needs more focus", "title": "Concatenate three 8-bit integers to one 16-bit integer in C", "body": "<p>I have three integers, one integer contains data of 7 bits, another integer contains data of 4 bits and the third integer contains data of 5 bits.</p>\n\n<p>I want to concatenate all the three integers into one 16-bit integer side by side without changing the value of each of the integers.</p>\n\n<p>Example:</p>\n\n<pre><code>int a = 1; //7 bit data (uint8)\nint b = 2; //4 bit data (uint8)\nint c = 3; //5bit data (uint8)\n</code></pre>\n\n<p>where, <strong>0&lt; a &lt;100 , 0&lt; b &lt; 13, 0&lt; c &lt;32</strong>\nThe result should be as follows: </p>\n\n<pre><code>result = 123;\n</code></pre>\n\n<p>Example 2: </p>\n\n<pre><code>int a = 99; //7 bit data (uint8)\nint b = 12; //4 bit data (uint8)\nint c = 31; //5bit data (uint8)\n\nresult = 991231; //expected\n</code></pre>\n\n<p>How can this be achieved using bit wise operators?</p>\n"}, {"tags": ["c", "heap-memory", "buffer-overflow"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1498649870, "post_id": 44801292, "comment_id": 76582439, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us. Show us the declarations <i>as code</i>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1498650172, "post_id": 44801292, "comment_id": 76582647, "body": "You might experience implicit casts or conversions. Implicit usually means &quot;not planned in detail&quot; which often turns into &quot;unwanted&quot;. Casting/converting between int and unsigned int &quot;often works&quot;, because of same size, same semantic in the range of 0-MAX_INT. But those &quot;harmlessnesses&quot; are assumptions, as soon as any of them is not applicable you will have hard to debug problems. None of them are officially reliable."}, {"owner": {"reputation": 29, "user_id": 8213038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db9a6b558d601b533dd3fe84e76fa3fc?s=128&d=identicon&r=PG&f=1", "display_name": "NCL", "link": "https://stackoverflow.com/users/8213038/ncl"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498650841, "post_id": 44801292, "comment_id": 76583170, "body": "@Someprogrammerdude I now provided an example code."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1498651203, "creation_date": 1498651203, "answer_id": 44801798, "question_id": 44801292, "link": "https://stackoverflow.com/questions/44801292/what-happens-if-buffers-data-type-mismatches-int-versus-unsigned-int-when/44801798#44801798", "title": "what happens if buffer&#39;s data type mismatches (int * versus unsigned int *) when calling a function?", "body": "<p>You are reading data from a binary stream into an array of <code>int</code> by chunks of size <code>sizeof(unsigned int)</code>.</p>\n\n<p>While it would be better to use the proper type, there is no bad consequences to expect from this particular mistake as the size of <code>int</code> is guaranteed  y the standard to be identical to the size of <code>unsigned int</code>.</p>\n\n<p>The representation of <code>unsigned int</code> might produce unexpected behavior when the values are used as <code>int</code> and exceed the range of this type, but for most current architectures it does not pose a real problem.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1498651386, "creation_date": 1498651386, "answer_id": 44801878, "question_id": 44801292, "link": "https://stackoverflow.com/questions/44801292/what-happens-if-buffers-data-type-mismatches-int-versus-unsigned-int-when/44801878#44801878", "title": "what happens if buffer&#39;s data type mismatches (int * versus unsigned int *) when calling a function?", "body": "<p>There is always a danger when mixing signed and unsigned versions of the same integer type. Implicit conversions can cause unintentional change of signedness. Calculations can turn up unsigned when you wanted them signed or vice versa. A value which is representable by the unsigned type might not be representable by the signed type. And so on.</p>\n\n<p>As for the specific case of <em>pointers</em> to signed/unsigned versions of the <em>same</em> type (<code>int</code> in this case), there are no additional dangers apart from what is mentioned above. These pointer conversions are considered to be safe, as a special exception in the C standard (1).</p>\n\n<p>So converting between <code>int*</code> to/from <code>unsigned int*</code> is safe in itself. Please note that this is <em>not</em> safe if using two different types though! A conversion from <code>int*</code> to <code>short*</code> for example, can cause all manner of subtle bugs.</p>\n\n<hr>\n\n<p>(1) In C standard gibberish, C11 6.5/7 (\"the strict aliasing rule\"):</p>\n\n<blockquote>\n  <p>\"An object shall have its stored value accessed only by an lvalue\n  expression that has one of the following types:\"<br>\n  ...<br>\n  - \"a type that is the signed or unsigned type corresponding to the effective type of the object\"</p>\n</blockquote>\n"}], "owner": {"reputation": 29, "user_id": 8213038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db9a6b558d601b533dd3fe84e76fa3fc?s=128&d=identicon&r=PG&f=1", "display_name": "NCL", "link": "https://stackoverflow.com/users/8213038/ncl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1498653705, "creation_date": 1498649741, "last_edit_date": 1498653705, "question_id": 44801292, "link": "https://stackoverflow.com/questions/44801292/what-happens-if-buffers-data-type-mismatches-int-versus-unsigned-int-when", "title": "what happens if buffer&#39;s data type mismatches (int * versus unsigned int *) when calling a function?", "body": "<p>So suppose one has function:</p>\n\n<pre><code>int somefunc(int* buf)\n</code></pre>\n\n<p>but we call somefunc by:</p>\n\n<pre><code>somefunc(buf2)\n</code></pre>\n\n<p>where <code>buf2</code> is heap buffer, allocated by <code>alloca</code>, that has data of type <code>unsigned int</code> (thus pointer <code>buf2</code> is of type <code>unsigned int*</code>).</p>\n\n<p>What is the danger of doing this? What would be the problem here? I do think this might have to do with heap(buffer) overflow, but I am not sure what that would be. There may be some other problems with the code, and if so, I do want to know about these problems too.</p>\n\n<p>Example code:</p>\n\n<pre><code>void typecastfunc(FILE *p, int *buf, unsigned int index) {\n    unsigned int a;\n    for (a = 0; a &lt; index; a++) {\n        if (fread(&amp;buf[a], sizeof(unsigned int), 1, p) &lt; 1) {\n            break;\n        }\n    }\n}\n\nvoid caller(char *filen) {\n    FILE *p = fopen(filen, \"rb\");\n    if (!p) {\n        return;\n    }\n    unsigned int index;\n    fread(&amp;index, sizeof(unsigned int), 1, p);\n    unsigned int *buf = alloca(index * sizeof(unsigned int));\n    if (!buf) {\n        return;\n    }\n    typecastfunc(p, buf, index);\n}\n\nint main(int argc, char *argv[]) {\n    caller(argv[1]);\n}\n</code></pre>\n\n<p>The question is being asked, because by randomly fuzzing, I was able to get the signs of overflow, but I do not know how overflow can occur by type mismatch. Other codes seem harmless, so I assume it must be because of type mismatch.</p>\n"}, {"tags": ["c", "operating-system", "asmx"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 3, "creation_date": 1498650167, "post_id": 44801225, "comment_id": 76582643, "body": "You appear to be getting interrupt 13 (general protection fault) instead of interrupt 14 (page fault).  I would guess that this is something to do with the way you have set up the segment descriptors, but without seeing your code I cannot tell for sure.  In any case, the x86 architecture manual will explain in painful detail exactly when you get one interrupt versus the other; if you&#39;re writing an OS from scratch you should know the architecture manual by heart."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1498651720, "post_id": 44801225, "comment_id": 76583840, "body": "Don&#39;t post images of text!"}, {"owner": {"reputation": 178, "user_id": 2901650, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EEMJP.gif?s=128&g=1", "display_name": "Incarnation P. Lee", "link": "https://stackoverflow.com/users/2901650/incarnation-p-lee"}, "edited": false, "score": 0, "creation_date": 1498653112, "post_id": 44801225, "comment_id": 76584900, "body": "I will update more information later, as well as replace the image. Thanks all, and I have to take care little baby for now and post more code later. THANKS AGAIN!"}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 2901650, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EEMJP.gif?s=128&g=1", "display_name": "Incarnation P. Lee", "link": "https://stackoverflow.com/users/2901650/incarnation-p-lee"}, "edited": false, "score": 0, "creation_date": 1498692428, "post_id": 44805717, "comment_id": 76608673, "body": "I do not think that is the point of the issue, in x86 architecture, access address end with 0xffd is valid. here, I expect to trigger page fault but triggered GPF. For misunderstanding, I change the address to 0x50000000 in test code."}], "tags": [], "owner": {"reputation": 11, "user_id": 8224649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jTUM0.jpg?s=128&g=1", "display_name": "sanslol", "link": "https://stackoverflow.com/users/8224649/sanslol"}, "is_accepted": false, "score": 0, "last_activity_date": 1498851094, "last_edit_date": 1498851094, "creation_date": 1498660978, "answer_id": 44805717, "question_id": 44801225, "link": "https://stackoverflow.com/questions/44801225/why-os-image-has-different-behavior-when-accessing-memory-around-1280-mb0x50000/44805717#44805717", "title": "Why os image has different behavior when accessing memory around 1280 MB(0x50000000)", "body": "<p>Edit: I'm very sorry,I confused the order of segmentation and paging when translating the address...</p>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 2901650, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EEMJP.gif?s=128&g=1", "display_name": "Incarnation P. Lee", "link": "https://stackoverflow.com/users/2901650/incarnation-p-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1498784478, "creation_date": 1498784478, "answer_id": 44837110, "question_id": 44801225, "link": "https://stackoverflow.com/questions/44801225/why-os-image-has-different-behavior-when-accessing-memory-around-1280-mb0x50000/44837110#44837110", "title": "Why os image has different behavior when accessing memory around 1280 MB(0x50000000)", "body": "<p>Finally, I found the root cause of this issue. Agree with zwol, it is a bug when config the gdt table, the limit and base should be config with 4KB in count. but not in bytes. That is why memory large than 0x50000000 triggered GPF but not page fault.</p>\n"}], "owner": {"reputation": 178, "user_id": 2901650, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EEMJP.gif?s=128&g=1", "display_name": "Incarnation P. Lee", "link": "https://stackoverflow.com/users/2901650/incarnation-p-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1498851094, "creation_date": 1498649552, "last_edit_date": 1498702225, "question_id": 44801225, "link": "https://stackoverflow.com/questions/44801225/why-os-image-has-different-behavior-when-accessing-memory-around-1280-mb0x50000", "title": "Why os image has different behavior when accessing memory around 1280 MB(0x50000000)", "body": "<p>I am developing one tiny OS at <a href=\"https://github.com/Incarnation-p-lee/excalibur\" rel=\"nofollow noreferrer\">https://github.com/Incarnation-p-lee/excalibur</a>. Recently when enable page, I found one difference output when accessing memory across 1280 MB. Assume follow code:</p>\n\n<pre><code>static inline void\ntest_paging(void)\n{\n    uint32 *ptr;\n\n    // ptr = (void *)0x800000;\n    // *ptr = 0xdeadbeaf;\n    // ptr = (void *)0x4ffffffc;\n    ptr = (void *)0x50000000;\n    *ptr = 0xdeadbeaf;\n}\n[0x00000000] Boot loader magic -&gt; 0x2badb002.\n[0x00000000] In Protect Mode.\n[0x00000000] Paging disabled.\n[0x00000000] OS image start -&gt; 0x00100000\n[0x00000000] OS image end -&gt; 0x00109000\n[0x00000000] Stack base 0x00100fb4.\n[0x00000000] Physical memory lower -&gt; 0000000636 KB.\n[0x00000000] Physical memory upper -&gt; 0000261056 KB.\n[0x00000000] GDT table initialized.\n[0x00000000] IDT table initialized.\n[0x00000000] IRQ timer initialized.\n[0x00000003] Page enabled from 0x00000000 -&gt; 0x0011c004.\n[0x0000000b] Page initialized.\n[0x0000000b] In Protect Mode.\n[0x0000000b] Paging enabled.\n[0x0000000b] Divide by zero at eip -&gt; 0x00101071.\n[0x0000000b] Breakpoint at eip -&gt; 0x00101072.\n[0x0000000b] Divide by zero at eip -&gt; 0x00101074.\n[0x0000000b] Unsupported isq 0000000013.\nAssertion: Unsupported ISR\n fail.\n  at function isr_handler_main\n  in file src/interrupt/isr/isr_handler.c:0000000014\nEnter KERNEL PANIC T.T ...\n?\n</code></pre>\n\n<p>But when I want to access 0x4ffffffc, it triggered page fault ? It expected both 0x4ffffffc and 0x50000000 should trigger page fault in my option.</p>\n\n<pre><code>static inline void\ntest_paging(void)\n{\n    uint32 *ptr;\n\n    // ptr = (void *)0x800000;\n    // *ptr = 0xdeadbeaf;\n    ptr = (void *)0x4ffffffc;\n    // ptr = (void *)0x50000000;\n    *ptr = 0xdeadbeaf;\n}\n[0x00000000] In Protect Mode.\n[0x00000000] Paging disabled.\n[0x00000000] OS image start -&gt; 0x00100000\n[0x00000000] OS image end -&gt; 0x00109000\n[0x00000000] Stack base 0x00100fb4.\n[0x00000000] Physical memory lower -&gt; 0000000636 KB.\n[0x00000000] Physical memory upper -&gt; 0000261056 KB.\n[0x00000000] GDT table initialized.\n[0x00000000] IDT table initialized.\n[0x00000000] IRQ timer initialized.\n[0x00000003] Page enabled from 0x00000000 -&gt; 0x0011c004.\n[0x00000006] Page initialized.\n[0x00000006] In Protect Mode.\n[0x00000006] Paging enabled.\n[0x00000006] Divide by zero at eip -&gt; 0x00101071.\n[0x00000006] Breakpoint at eip -&gt; 0x00101072.\n[0x00000006] Divide by zero at eip -&gt; 0x00101074.\nPage is not present.\nPage is Read-Only.\nPage Fault at address 0x4ffffffc.\nAssertion: Page Fault fail.\n  at function isr_14_paging_fault_handler\n  in file src/interrupt/isr/isr_handler.c:0000000076\nEnter KERNEL PANIC T.T ...\n?\n</code></pre>\n\n<p>Related code and structure definition</p>\n\n<pre><code>void\ndescriptor_table_gdt_initialize(void)\n{\n    gdt_reg.limit = sizeof(gdt) - 1;\n    gdt_reg.base = (uint32)&amp;gdt;\n\n    gdt_entry_set(0, 0, 0, 0, 0);\n    gdt_entry_set(1, CODE_SEG_BASE, CODE_SEG_LMT, CODE_SEG_ACC, CODE_SEG_FLAG);\n    gdt_entry_set(2, DATA_SEG_BASE, DATA_SEG_LMT, DATA_SEG_ACC, DATA_SEG_FLAG);\n    gdt_entry_set(3, 0, USR_CODE_SEG_LMT, USR_CODE_SEG_ACC, USR_CODE_SEG_FLAG);\n    gdt_entry_set(4, 0, USR_DATA_SEG_LMT, USR_DATA_SEG_ACC, USR_DATA_SEG_FLAG);\n\n    gdt_table_flush((uint32)&amp;gdt_reg);\n\n    printf_vga_tk(\"GDT table initialized.\\n\");\n}\n\nstatic inline void\ngdt_entry_set(uint32 i, uint32 base, uint32 limit, uint16 acc, uint8 flags)\n{\n    kassert(i &lt; GDT_ENTRY_CNT);\n\n    gdt[i].base_l = U32_BITS(base, 0, 24);\n    gdt[i].base_h = (uint8)U32_BITS(base, 24, 8);\n\n    gdt[i].lmt_l = (uint16)U32_BITS(limit, 0, 16);\n    gdt[i].flags.lmt_h = (uint8)U32_BITS(limit, 16, 4);\n\n    gdt[i].access.acc = (uint8)U32_BIT(acc, ACC_AC_IDX);\n    gdt[i].access.rw = (uint8)U32_BIT(acc, ACC_RW_IDX);\n    gdt[i].access.dc = (uint8)U32_BIT(acc, ACC_DC_IDX);\n    gdt[i].access.ex = (uint8)U32_BIT(acc, ACC_EX_IDX);\n    gdt[i].access.dt = (uint8)U32_BIT(acc, ACC_DT_IDX);\n    gdt[i].access.dpl = (uint8)U32_BITS(acc, ACC_DPL_IDX, ACC_DPL_LEN);\n    gdt[i].access.p = (uint8)U32_BIT(acc, ACC_P_IDX);\n\n    gdt[i].flags.avl = (uint8)U32_BIT(flags, FLAG_A_IDX);\n    gdt[i].flags.pack = 0;\n    gdt[i].flags.db = (uint8)U32_BIT(flags, FLAG_DB_IDX);\n    gdt[i].flags.g = (uint8)U32_BIT(flags, FLAG_G_IDX);\n}\n\n#define U32_BIT(x, idx)           ((uint32)(x) &gt;&gt; (idx) &amp; 0x1)\n#define U32_BITS(x, s, l)         (((uint32)(x) &gt;&gt; (s)) &amp; ((0x1 &lt;&lt; (l)) - 1))\n\n#define CODE_SEG_BASE             0x0\n#define CODE_SEG_LMT              0xffffffff\n\n#define DATA_SEG_BASE             0x0\n#define DATA_SEG_LMT              0xffffffff\n\n#define STACK_SEG_BASE            0x300000\n#define STACK_SEG_LMT             0xfffff\n\n#define USR_CODE_SEG_LMT          0xffffffff\n#define USR_DATA_SEG_LMT          0xffffffff\n\nstatic s_gdt_entry_t    gdt[GDT_ENTRY_CNT];\nstatic s_gdt_register_t gdt_reg;\n\nextern void gdt_table_flush(uint32);\n\n[GLOBAL gdt_table_flush]\ngdt_table_flush:\n    mov        eax, [esp + 4]\n    lgdt       [eax]\n\n    mov        ax, 0x10      ; data segment selector\n    mov        ds, ax\n    mov        es, ax\n    mov        fs, ax\n    mov        gs, ax\n    mov        ss, ax\n\n    jmp        0x8: .flush   ; will change cs register implicitly\n.flush:\n    ret\n\n/*\n * Global Descriptor Table Register\n * 47                         16 15                 0\n * +----------------------------+-------------------+\n * | 32-bit Linear Base Address | 16-bit Table Limit|\n * +----------------------------+-------------------+\n */\nstruct gdt_register {\n    uint16 limit;\n    uint32 base;\n} __attribute__((packed));\n\n/*\n * Descriptor Attribute\n *  15   14   13   12   11             8  7  6   5   4    3    2    1   0\n * +---+-----+---+-----+----------------+---+-----+----+----+----+----+----+\n * | G | D/B | 0 | AVL | Seg limit high | P | DPL | DT | EX | DC | RW | AC |\n * +---+-----+---+-----+----------------+---+-----+----+----+----+----+----+\n */\nstruct gdt_attribute_access {\n    uint8 acc:1; // Segment has been accessed or not\n    uint8 rw:1;  // Read-only or Read/Write\n    uint8 dc:1;  // Direction for data segment, 0 grow up, 1 grow down or\n                 // Execution for code segment, 0 indicate DPL and more DPL\n                 //                              1 indicate only the DPL specify\n    uint8 ex:1;  // Segment can be executed or not.\n    uint8 dt:1;  // Descriptor Type, always 1 for GDT\n    uint8 dpl:2; // Descriptor privilege level, ring 0-3\n    uint8 p:1;   // Segment is present or not\n} __attribute__((packed));\n\nstruct gdt_attribute_flags {\n    uint8 avl:1;\n    uint8 pack:1;\n    uint8 db:1;    // Operand size, 0 16-bit 1 32-bit\n    uint8 g:1;     // Granularity which defines the limit unit in byte or 4KB\n    uint8 lmt_h:4; // High 4 bit of limit, bit &lt;16, 19&gt; of limit\n} __attribute__((packed));\n\n/*\n * Global Descriptor Table Entry (Global Descriptor)\n * Each represent a segment in GDT.\n * 63           55      51           47       39         15         0\n * +-----------+-------+------------+--------+----------+-----------+\n * | base high | flags | limit high | access | base low | limit low |\n * +-----------+-------+------------+--------+----------+-----------+\n * base contains  32-bit\n * limit contains 20-bit\n */\nstruct gdt_entry {\n    uint16                      lmt_l;\n    uint32                      base_l:24;\n    struct gdt_attribute_access access;\n    struct gdt_attribute_flags  flags;\n    uint8                       base_h;\n} __attribute__((packed));\n</code></pre>\n\n<p>Bochs config</p>\n\n<pre><code># configuration file generated by Bochs\nplugin_ctrl: unmapped=1, biosdev=1, speaker=1, extfpuirq=1, parallel=1, serial=1, gameport=1\nconfig_interface: win32config\ndisplay_library: win32\nmemory: host=256, guest=256\nromimage: file=\"C:\\Program Files (x86)\\Bochs-2.6.8/BIOS-bochs-latest\"\nvgaromimage: file=\"C:\\Program Files (x86)\\Bochs-2.6.8/VGABIOS-lgpl-latest\"\nboot: floppy\nfloppy_bootsig_check: disabled=0\nfloppya: type=1_44, 1_44=\"C:\\Users\\pli\\Desktop\\workspace\\bochs\\floppy.img\", status=inserted, write_protected=0\n# no floppyb\nata0: enabled=1, ioaddr1=0x1f0, ioaddr2=0x3f0, irq=14\nata0-master: type=none\nata0-slave: type=none\nata1: enabled=1, ioaddr1=0x170, ioaddr2=0x370, irq=15\nata1-master: type=none\nata1-slave: type=none\nata2: enabled=0\nata3: enabled=0\npci: enabled=1, chipset=i440fx\nvga: extension=vbe, update_freq=5, realtime=1\ncpu: count=1, ips=1000000, model=bx_generic, reset_on_triple_fault=0, cpuid_limit_winnt=0, ignore_bad_msrs=1, mwait_is_nop=0\ncpuid: level=6, stepping=3, model=3, family=6, vendor_string=\"GenuineIntel\", brand_string=\"              Intel(R) Pentium(R) 4 CPU        \"\ncpuid: mmx=1, apic=xapic, simd=sse2, sse4a=0, misaligned_sse=0, sep=1, movbe=0, adx=0\ncpuid: aes=0, sha=0, xsave=0, xsaveopt=0, x86_64=1, 1g_pages=0, pcid=0, fsgsbase=0\ncpuid: smep=0, smap=0, mwait=1, vmx=1\nprint_timestamps: enabled=0\nport_e9_hack: enabled=0\nprivate_colormap: enabled=0\nclock: sync=realtime, time0=local, rtc_sync=0\n# no cmosimage\n# no loader\nlog: bochsout.txt\nlogprefix: %t%e%d\ndebug: action=ignore\ninfo: action=report\nerror: action=report\npanic: action=ask\nkeyboard: type=mf, serial_delay=250, paste_delay=100000, user_shortcut=none\nmouse: type=ps2, enabled=0, toggle=ctrl+mbutton\nsound: waveoutdrv=win, waveout=none, waveindrv=win, wavein=none, midioutdrv=win, midiout=none\nspeaker: enabled=1, mode=sound\nparport1: enabled=1, file=none\nparport2: enabled=0\ncom1: enabled=1, mode=null\ncom2: enabled=0\ncom3: enabled=0\ncom4: enabled=0\n</code></pre>\n"}, {"tags": ["c++", "c", "ldap", "openldap"], "answers": [{"tags": [], "owner": {"reputation": 455, "user_id": 4899025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGgvb.jpg?s=128&g=1", "display_name": "Ajith C Narayanan", "link": "https://stackoverflow.com/users/4899025/ajith-c-narayanan"}, "is_accepted": false, "score": 0, "last_activity_date": 1529583240, "creation_date": 1529583240, "answer_id": 50968337, "question_id": 44800771, "link": "https://stackoverflow.com/questions/44800771/authehticate-to-ldap-server-from-c-c/50968337#50968337", "title": "Authehticate to LDAP server from C/C++", "body": "<p>I can give you an example,</p>\n\n<p>suppose you want to search for a person whose uid is bob then you should create a search filter </p>\n\n<pre><code>char *search_filter = \"uid=bob\";\n</code></pre>\n\n<p>and, assumes that your search base is dc=mycompany,dc=ru .</p>\n\n<pre><code>LDAPMessage *res;\n\nldap_search_ext_s(ld, \"dc=mycompany,dc=ru\", LDAP_SCOPE_CHILDREN, search_filter, NULL, 0,NULL, NULL, NULL, 0, &amp;res);\n</code></pre>\n\n<p>Above API call will retrieve the search result in <code>res</code>. later you can use the <code>res</code> to obtain attributes and values of search result.</p>\n"}], "owner": {"reputation": 591, "user_id": 2028846, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb51bc648174df1be6be06c793738518?s=128&d=identicon&r=PG&f=1", "display_name": "sdd", "link": "https://stackoverflow.com/users/2028846/sdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529583240, "creation_date": 1498648106, "last_edit_date": 1498650601, "question_id": 44800771, "link": "https://stackoverflow.com/questions/44800771/authehticate-to-ldap-server-from-c-c", "title": "Authehticate to LDAP server from C/C++", "body": "<p>I try <code>./ldapsearch -h 192.168.1.1 -p 389 -D uid=myname,ou=People,dc=mycompany,dc=ru -w mypassword -b dc=mycompany,dc=ru -xL myname</code></p>\n\n<p>And I write this c++ code:</p>\n\n<pre><code>#define LDAP_DEPRECATED 1\n#include \"ldap.h\"\n\n\nSERVER_API void TestSherst()\n{\n    LDAP *ld;\n\n    if ((ld = ldap_init(\"192.168.1.1\", LDAP_PORT)) == NULL)\n    {\n        perror(\"ldap_init failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    int desired_v = LDAP_VERSION3;\n    if (ldap_set_option(ld, LDAP_OPT_PROTOCOL_VERSION, &amp;desired_v) != LDAP_OPT_SUCCESS)\n    {\n        ldap_perror(ld, \"ldap_set_option failed!\");\n        exit(EXIT_FAILURE);\n    }\n\n    if (ldap_bind_s(ld, \"uid=myname,ou=People,dc=mycompany,dc=ru\", \"mypassword\", LDAP_AUTH_SIMPLE) != LDAP_SUCCESS)\n    {\n        ldap_perror(ld, \"ldap_bind\");\n        exit(EXIT_FAILURE);\n    }\n\n    std::cout &lt;&lt; \"Connected\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I need a good advice, or, even better, a good guide.</p>\n\n<p>How can I make a search request from code after that?\nCan somebody give me ref to good documentation?</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array", "size", "sizeof"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1498645845, "post_id": 44799980, "comment_id": 76579889, "body": "What length? Size? <code>sizeof (char *)</code> or <code>sizeof * test</code> is for that."}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 2, "creation_date": 1498645847, "post_id": 44799980, "comment_id": 76579892, "body": "C and C++ aren&#39;t the same language. Choose one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1498646877, "post_id": 44799980, "comment_id": 76580507, "body": "A pointer-to-pointer is not a 2D array."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1498649265, "post_id": 44799980, "comment_id": 76582046, "body": "@tambre Is there any difference in C and C++ (apart from C++ offering better alternatives)? Just for understanding pointers, I&#39;d consider it valid asking both C and C++ specialists..."}], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1498647375, "post_id": 44800172, "comment_id": 76580868, "body": "10 * 20 * 1 = 200                                                                                                row  col   char                                                                                           <a href=\"https://en.wikipedia.org/wiki/Row-_and_column-major_order\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Row-_and_column-major_order</a>"}], "tags": [], "owner": {"reputation": 384, "user_id": 8224092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0196acfb3e92c2d01ae14fda0cd7eaa?s=128&d=identicon&r=PG&f=1", "display_name": "Loamsiada", "link": "https://stackoverflow.com/users/8224092/loamsiada"}, "is_accepted": false, "score": 1, "last_activity_date": 1498646826, "last_edit_date": 1498646826, "creation_date": 1498646314, "answer_id": 44800172, "question_id": 44799980, "link": "https://stackoverflow.com/questions/44799980/size-of-2d-pointers/44800172#44800172", "title": "Size of 2d pointers", "body": "<p>You will never get the size of a block of memory where a pointer points to... because there can be anything.</p>\n\n<p>test simply points to a place in memory where some other pointers are stored (to the first one). Each pointer will again lead to another place in Memory where some character values are stored. So, your test variable contains a simple number (the index of a place in Memory) and depending on your operating System sizeof(test) will maybe have 4 bytes or 8 bytes as result regardless of the size of the allocated memory.</p>\n\n<p>sizeof() will work as you might have expected when using stack arrays. If test is declared as</p>\n\n<pre><code>char test[10][20];\n</code></pre>\n\n<p>Then sizeof(test) will in fact return 200.</p>\n"}, {"comments": [{"owner": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1498647367, "post_id": 44800234, "comment_id": 76580857, "body": "Thank you for answering, it seems help full, but it may my English be bad? Or it is to hard, but I never could what does malloc and whats it&#39;s role.&quot;the size in byte&quot; ok, but what does with these? &quot; also returns a void pointer to the allocated memory&quot;, ok I got it, it return a pointer in memory similar to new ... but I&#39;m still confused. Can you give me a more exemplefied comment here?"}, {"owner": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1498647591, "post_id": 44800234, "comment_id": 76581025, "body": "btw, I&#39;m sorry for incomplete reply, I pressed enter by mystake"}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "reply_to_user": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1498647630, "post_id": 44800234, "comment_id": 76581050, "body": "<code>malloc</code> is used for dynamic memory allocation. To understand it you must first know how the program uses memory. There is a <code>stack</code> and a <code>heap</code> <code>int[5] a;</code> will be placed on the stack. If you use <code>int* a = (int*)malloc(sizeof(int)*5)</code> this will be allocated on the heap. In c++ you use <code>new</code> which allocates this memory. Both arrays now can be iterated from 0 to 4 like <code>a[0]</code> but the first is on the stack and the second one is on the heap. One more thing is that you can only make stack array when you know the size at compile time e.g using constant to create it."}, {"owner": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1498648003, "post_id": 44800234, "comment_id": 76581286, "body": "Thank you!!! But likely a string who has null termination and helps strlen to decide the size, I may do the same with the &quot;rows&quot;. If I use malloc I do need to do the classic new char/int/etc...?"}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "reply_to_user": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1498648759, "post_id": 44800234, "comment_id": 76581730, "body": "@LaceanuGeorge unfortunately there is no null terminator for normal arrays. You must use a variable for keeping the size and if you are writing function which will receive a pointer to elements you must also pass the size to the function so you can know when to stop. This is not like that in C++ tho. Containers there are a bit more complex and they know their size. For a <code>std::vector</code> you have a method <code>.size()</code> which will give you the amount of elements in the vector but you also have <code>.capacity()</code> which will give you the size of the allocated memory devided by the size of one element."}, {"owner": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1498648850, "post_id": 44800234, "comment_id": 76581806, "body": "I understand now! I belive vector is a better deal."}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "reply_to_user": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1498649043, "post_id": 44800234, "comment_id": 76581914, "body": "If you need to know the size, Yes. A vector is like an array who could resize at runtime. You can use a normal array  with <code>std::array</code> which will also have <code>.size()</code> but won&#39;t resize. Unfortunately there are no <code>std::vector</code> in C it is a C++ container."}], "tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": false, "score": 1, "last_activity_date": 1498651597, "last_edit_date": 1498651597, "creation_date": 1498646527, "answer_id": 44800234, "question_id": 44799980, "link": "https://stackoverflow.com/questions/44799980/size-of-2d-pointers/44800234#44800234", "title": "Size of 2d pointers", "body": "<p>If you are allocating something large you use <code>malloc()</code> and <code>malloc</code> receives one argument - the size in bytes(e.g <code>malloc(sizeof(int)*20)</code>.\n <code>malloc</code> also returns a <code>void</code> pointer to the allocated memory. You typically cast this pointer to fit your type. \nIn other words you can't really get the size. You must store it somewhere and pass it to other functions when its needed.</p>\n\n<p>A pointer to pointer (**) is like adding one additional dimension.</p>\n\n<p><code>[]</code> these are more of a syntax sugar for pointer arithmetic.\n<code>a[i]</code> would be the same as <code>*(a+i)</code>. </p>\n\n<p>This may vary on your system but <code>sizof()</code> will give you these values for these types.</p>\n\n<pre><code>int a;      //4\nint b[5];   //20\nint* c;     //8\nint d[5][5];//100\nint** e;    //8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1498647200, "last_edit_date": 1498647200, "creation_date": 1498646583, "answer_id": 44800255, "question_id": 44799980, "link": "https://stackoverflow.com/questions/44799980/size-of-2d-pointers/44800255#44800255", "title": "Size of 2d pointers", "body": "<blockquote>\n  <p>How I can get it's length (=rows)?</p>\n</blockquote>\n\n<p>You cannot. Read more in <a href=\"https://stackoverflow.com/questions/3693651/how-to-get-the-length-of-dynamically-allocated-two-dimensional-arrays-in-c\">How to get the length of dynamically allocated two dimensional arrays in C</a></p>\n\n<hr>\n\n<p>Your attempt:</p>\n\n<pre><code>char** foo;\nsizeof(foo[0])/sizeof(foo[0][0])\n</code></pre>\n\n<p>most probably results in 8, right? That's because you are getting the size of a pointer (which is probably 8 in your system) and then divide by the size of a character, which is always 1.</p>\n"}, {"comments": [{"owner": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "edited": false, "score": 0, "creation_date": 1499630248, "post_id": 44800582, "comment_id": 76974849, "body": "Thank you everyone, your answers were good aswell, and helpful for future use, I&#39;m so sorry because I couldn&#39;t pick you, but this was what I was looking for."}], "tags": [], "owner": {"reputation": 805, "user_id": 4544219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CLo94.jpg?s=128&g=1", "display_name": "Mosaaleb", "link": "https://stackoverflow.com/users/4544219/mosaaleb"}, "is_accepted": true, "score": 1, "last_activity_date": 1498647522, "creation_date": 1498647522, "answer_id": 44800582, "question_id": 44799980, "link": "https://stackoverflow.com/questions/44799980/size-of-2d-pointers/44800582#44800582", "title": "Size of 2d pointers", "body": "<p><code>sizeof(test)/sizeof(*test)</code> doesn't indicate the number of elements anymore with your declaration, because the compiler doesn't know what is the pointer pointing to, because <code>sizeof()</code> is a compile time operation and hence not dynamic.\nTo find no of elements, you can add a sentinel value:</p>\n\n<pre><code>char **test = {\"New York\", \"Paris\", \"Cairo\", NULL};\nint testLen = -1;\nwhile(test[++testLen] != NULL){\n//DO NOTHING\n}\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 7586541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c51ab63223a1cb24a06741d75e4ab070?s=128&d=identicon&r=PG&f=1", "display_name": "Laceanu George", "link": "https://stackoverflow.com/users/7586541/laceanu-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 44800582, "answer_count": 4, "score": 2, "last_activity_date": 1516795862, "creation_date": 1498645781, "last_edit_date": 1516795862, "question_id": 44799980, "link": "https://stackoverflow.com/questions/44799980/size-of-2d-pointers", "title": "Size of 2d pointers", "body": "<p>I'm trying to improve my knowledge with pointers by making an pointer who points to another pointer that is practically a string.</p>\n\n<p>Now I want to get size who normally I could get from<code>sizeof(foo[0])/sizeof(foo[0][0])</code></p>\n\n<p>Pointer form</p>\n\n<pre><code>char** foo;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1498645102, "post_id": 44799691, "comment_id": 76579369, "body": "Do a dry run to count. Then allocate the arrays, then run again, or use <code>reallocate</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498645179, "post_id": 44799691, "comment_id": 76579424, "body": "Pls wrte in englsh and dont abrvate. ;-)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1498645379, "post_id": 44799691, "comment_id": 76579555, "body": "BTW You have memory leak."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1498645814, "post_id": 44799691, "comment_id": 76579867, "body": "<code>Symbol* b = (Symbol*)malloc(100);</code> most likely allocates wrong number of bytes (100), and has unnecessary cast. Perhaps you meant to write <code>Symbol* b = malloc(sizeof *b);</code>?"}, {"owner": {"reputation": 1, "user_id": 8225330, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155559855608395/picture?type=large", "display_name": "Elior Fratty", "link": "https://stackoverflow.com/users/8225330/elior-fratty"}, "edited": false, "score": 0, "creation_date": 1498646535, "post_id": 44799691, "comment_id": 76580279, "body": "i know that i may have problems with the malloc, but it&#39;s not the question that i asked. unless it will solve the question?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498653077, "post_id": 44799691, "comment_id": 76584868, "body": "The logic of counting the number occurrences of a given character is completely lacking in your <code>getSL</code> example."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1498655441, "last_edit_date": 1498655441, "creation_date": 1498654875, "answer_id": 44803270, "question_id": 44799691, "link": "https://stackoverflow.com/questions/44799691/returning-an-array-of-structs-from-a-recursive-huffman-tree-c/44803270#44803270", "title": "Returning an array of structs from a recursive huffman tree C", "body": "<p>Apart from the malloc problem (see the comments already), you have a fundamental problem: You allocate a new struct, but then <em>replace</em> it with the one returned from the recursive call. So you lose the one created before (actually, memory leaking!).</p>\n\n<p>Easiest variant would now be converting your Symbol to linked list nodes; then you simply could do:</p>\n\n<pre><code>Symbol* lastLeafFound; // probaly a function parameter!\n\nif(!(root-&gt;left || root-&gt;right))\n{\n    // leaf found:\n    Symbol* a = (Symbol*)malloc(sizeof(Symbol));\n    a-&gt;chr = root-&gt;chr;\n    a-&gt;counter = /* ... */;\n    a-&gt;next = NULL;\n    lastLeafFound-&gt;next = a;\n    // you might return a now as last leaf found, using it in the next recursive call\n}\n</code></pre>\n\n<p>Sure, above code is incomplete, but should give you the idea...</p>\n\n<p>If you cannot modify your struct, then you need to create an array and pass it on to every new recursive call (prefer not to use global variables instead):</p>\n\n<pre><code>void doGetSL\n(\n    HNode* root,\n    Symbol** symbols,      // your array to be used\n    unsigned int* count,   // number of symbols contained so far\n    unsigned int* capacity // maximum possible symbols\n)\n</code></pre>\n\n<p>Passing all data as pointers allows the function to modify them as needed and they are still available from outside...</p>\n\n<pre><code>Symbol* getSL(HNode* root)\n{\n    if(!root)\n        return NULL;\n\n    unsigned int count = 0;\n    unsigned int capacity = 128;\n    // allocate a whole array:\n    Symbol* array = malloc(capacity*sizeof(Symbol));\n\n    if(array) // malloc could fail...\n    {\n        doGetSL(root, &amp;array, &amp;count, &amp;capacity);\n\n        // as you cannot return the number of leaves together with\n        // the array itself, you will need a sentinel:\n        array[count].chr = 0;\n        // obvious enough, I'd say, alternatively you could\n        // set counter to 0 or -1 (or set both chr and counter) \n    }\n    return array;\n}\n</code></pre>\n\n<p><code>doGetSL</code> will now use above set up \"infrastructure\":</p>\n\n<pre><code>{\n    if(!(root-&gt;left || root-&gt;right))\n    {\n        if(*count == *capacity)\n        {\n            // no memory left -&gt; we need a larger array!\n\n            // store in separate variables:\n            unsigned int c = *capacity * 2;\n            Symbol* s = realloc(symbols, c * sizeof(Symbol));\n            // now we can check, if reallocation was successful\n            // (on failure, s will be NULL!!!):\n            if(s)\n            {\n                // OK, we can use them...\n                *symbols = s; // &lt;- need a pointer for (pointer to pointer)!\n                *capacity = c;\n            }\n            else\n            {\n                // re-allocation failed!\n                // -&gt; need appropriate error handling!\n            }\n        }\n\n        (*symbols)[count].chr = root-&gt;chr;\n        (*symbols)[count].counter = /*...*/;\n        ++*count;\n\n    }\n    else\n    {\n        if(root-&gt;left)\n        {\n            doGetSL(root-&gt;left, symbols, count, capacity);\n        }\n        if(root-&gt;right)\n        {\n            doGetSL(root-&gt;right, symbols, count, capacity);\n        }\n    }\n}\n</code></pre>\n\n<p>One thing yet omitted: setting the counter. That would be quite easy: add another parameter to <code>doGetSL</code> indicating the current depth, which you increment right when entering doGetSL, you can then just assign this value when needed.</p>\n\n<p>You can further improve above variant (especially readability), if you introduce a new struct:</p>\n\n<pre><code>struct SLData\n{\n    Symbol* symbols,      // your array to be used\n    unsigned int count,   // number of symbols contained so far\n    unsigned int capacity // maximum possible symbols\n};\n</code></pre>\n\n<p>and pass this one instead of the three pointers:</p>\n\n<pre><code>doGetSL(HNode*, struct SLData*, unsigned int depth);\n\nstruct SLData data = \n{\n    .count = 0;\n    .capacity = 128;\n    .array = malloc(capacity*sizeof(Symbol));\n};\nif(data.array)\n    doGetSL(root, &amp;data, 0); // again passed as pointer!\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8225330, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155559855608395/picture?type=large", "display_name": "Elior Fratty", "link": "https://stackoverflow.com/users/8225330/elior-fratty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498655441, "creation_date": 1498644997, "question_id": 44799691, "link": "https://stackoverflow.com/questions/44799691/returning-an-array-of-structs-from-a-recursive-huffman-tree-c", "title": "Returning an array of structs from a recursive huffman tree C", "body": "<p>i have a task in class to the return an array of struck Symbol from huffman tree. \nthe function getSL get a huffman tree(only) and return struck of Symbol.\neach spot in the array contain a char from the \"leaf\" of the tree and the\nlength of his code(how many cross section till the leaf).\nmy main problem was to find how i advance the cnt of the arry that it will not overright the arry.\nthank you.</p>\n\n<pre><code>typedef  struct  HNode {\n    char  chr;\n    struct HNode *left, *right;\n} HNode;\n\ntypedef  struct {\n    char chr;\n    int counter;\n}Symbol;\n</code></pre>\n\n<p>this is what i did till now.</p>\n\n<pre><code>Symbol * getSL(HNode *root) {\n\n    if (root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL) {\n        Symbol* b = (Symbol*)malloc(100);\n        b-&gt;counter=0;\n        b-&gt;chr = root-&gt;chr;\n        return b;\n    }\n    Symbol* a = (Symbol*)malloc(100);\n\n    if (root-&gt;left != NULL) {\n        a= getSL(root-&gt;left);\n        a-&gt;counter++;\n    }\n\n    if (root-&gt;right != NULL) {\n        a= getSL(root-&gt;right);\n        a-&gt;counter++;\n    }\n    return a;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "docker"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6112773, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kfBfmHdbTUc/AAAAAAAAAAI/AAAAAAAAADU/aEvj0TRBhuk/photo.jpg?sz=128", "display_name": "turkey zhu", "link": "https://stackoverflow.com/users/6112773/turkey-zhu"}, "is_accepted": true, "score": 0, "last_activity_date": 1500531847, "creation_date": 1500531847, "answer_id": 45206719, "question_id": 44799265, "link": "https://stackoverflow.com/questions/44799265/how-to-build-libdevmapper-static-libraries/45206719#45206719", "title": "How to build libdevmapper static libraries?", "body": "<p>I fix it ,when the DM version is >97 . and the glibc will be  updated, so , all the lib will be commpiled in static lib file( exp. libdevmapper.a use libudev.a).</p>\n"}], "owner": {"reputation": 1, "user_id": 6112773, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kfBfmHdbTUc/AAAAAAAAAAI/AAAAAAAAADU/aEvj0TRBhuk/photo.jpg?sz=128", "display_name": "turkey zhu", "link": "https://stackoverflow.com/users/6112773/turkey-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 45206719, "answer_count": 1, "score": -1, "last_activity_date": 1500531847, "creation_date": 1498643766, "last_edit_date": 1498644081, "question_id": 44799265, "link": "https://stackoverflow.com/questions/44799265/how-to-build-libdevmapper-static-libraries", "title": "How to build libdevmapper static libraries?", "body": "<p>I want to build docker source in centos 7, it use go and c++ , and it depend lib lvm (libdevmapper), and my question is: How to build libdevmapper static libraries?</p>\n\n<p>when i compile it with configure flags :\n[test@localhost lvm2]$ ./configure --enable-static_link --disable-selinux</p>\n\n<p>and <code>make &amp;&amp; make install</code>\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>make[1]: Entering directory `/home/test/modi-source/thirdSoftware/lvm2/tools'\ngcc -O2  -fPIC -O2  -L../libdm -L../lib -L../libdaemon/client -static -L../libdm/ioctl -o lvm.static \\\n      command.o dumpconfig.o formats.o lvchange.o lvconvert.o lvconvert_poll.o lvcreate.o lvdisplay.o lvextend.o lvmcmdline.o lvmdiskscan.o lvreduce.o lvremove.o lvrename.o lvresize.o lvscan.o polldaemon.o pvchange.o pvck.o pvcreate.o pvdisplay.o pvmove.o pvmove_poll.o pvremove.o pvresize.o pvscan.o reporter.o segtypes.o tags.o toollib.o vgcfgbackup.o vgcfgrestore.o vgchange.o vgck.o vgcreate.o vgconvert.o vgdisplay.o vgexport.o vgextend.o vgimport.o vgmerge.o vgmknodes.o lvpoll.o vgimportclone.o vgreduce.o vgremove.o vgrename.o vgscan.o vgsplit.o  lvm-static.o -llvm-internal -ldaemonclient  -ldl  -ldevmapper    -lrt \n../lib/liblvm-internal.a(sharedlib.o): In function `load_shared_library':\nsharedlib.c:(.text+0x131): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n../libdm/ioctl/libdevmapper.a(libdm-string.o): In function `dm_size_to_string':\nlibdm-string.c:(.text+0x11d0): undefined reference to `nearbyint'\nlibdm-string.c:(.text+0x11e5): undefined reference to `floor'\n../libdm/ioctl/libdevmapper.a(pool.o): In function `dm_pool_create':\npool.c:(.text+0x15c): undefined reference to `pthread_mutex_lock'\npool.c:(.text+0x177): undefined reference to `pthread_mutex_unlock'\n../libdm/ioctl/libdevmapper.a(pool.o): In function `dm_pool_destroy':\npool.c:(.text+0x1f9): undefined reference to `pthread_mutex_lock'\npool.c:(.text+0x20d): undefined reference to `pthread_mutex_unlock'\n../libdm/ioctl/libdevmapper.a(pool.o): In function `dm_pools_check_leaks':\npool.c:(.text+0x640): undefined reference to `pthread_mutex_lock'\npool.c:(.text+0x6d5): undefined reference to `pthread_mutex_unlock'\npool.c:(.text+0x720): undefined reference to `pthread_mutex_unlock'\n/usr/lib/gcc/x86_64-redhat-linux/4.8.5/libgcc_eh.a(unwind-dw2-fde-dip.o): In function `__register_frame_info_bases':\n</code></pre>\n\n<p>can any one who build libdevmapper static ok ? wuwuwuuwuw......</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1498643521, "post_id": 44799164, "comment_id": 76578302, "body": "<a href=\"https://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of malloc() and family in C..</a>"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 2, "creation_date": 1498643826, "post_id": 44799164, "comment_id": 76578532, "body": "FYI: <code>sizeof(char)</code> is always 1. Also, there is no real benefit of allocating such a small memory. Just go with <code>char month[3][10]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1498643581, "creation_date": 1498643581, "answer_id": 44799195, "question_id": 44799164, "link": "https://stackoverflow.com/questions/44799164/how-to-save-input-by-pointing-to-string-array/44799195#44799195", "title": "How to save input by pointing to string array?", "body": "<p>Change this:</p>\n\n<pre><code>month[i] = name;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>strcpy(month[i], name);\n</code></pre>\n\n<p>since you need to use <a href=\"http://www.cplusplus.com/reference/cstring/strcpy/\" rel=\"nofollow noreferrer\"><code>strcpy()</code></a> to copy/assign a string in C.</p>\n\n<hr>\n\n<p>BTW: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a> No.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1498643693, "creation_date": 1498643693, "answer_id": 44799238, "question_id": 44799164, "link": "https://stackoverflow.com/questions/44799164/how-to-save-input-by-pointing-to-string-array/44799238#44799238", "title": "How to save input by pointing to string array?", "body": "<p>These two lines are problematic:</p>\n\n<pre><code>month[i] = (char *)malloc(10*sizeof(char));\n...\nmonth[i] = name;\n</code></pre>\n\n<p>The first allocates memory and makes <code>month[i]</code> point to that memory. The second line <em>reassigns</em> <code>month[i]</code> to make it point to <code>name</code> instead. You lose the original memory (and have a memory leak). Besides the memory leak it also means that <em>all</em> elements of <code>month</code> will point to the same memory, which will contain the last input read.</p>\n\n<p>Instead of using assignment you could <a href=\"http://en.cppreference.com/w/c/string/byte/strcpy\" rel=\"nofollow noreferrer\"><em>copy</em></a> the string:</p>\n\n<pre><code>strcpy(month[i], name);\n</code></pre>\n\n<p>Or skip the temporary <code>name</code> variable and read directly into <code>month[i]</code>:</p>\n\n<pre><code>scanf(\"%9s\", month[i]);\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 5528589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d2132db594ddf2569e75c5934b5520?s=128&d=identicon&r=PG&f=1", "display_name": "jamesaq12wsx", "link": "https://stackoverflow.com/users/5528589/jamesaq12wsx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498661697, "creation_date": 1498643495, "last_edit_date": 1498661697, "question_id": 44799164, "link": "https://stackoverflow.com/questions/44799164/how-to-save-input-by-pointing-to-string-array", "title": "How to save input by pointing to string array?", "body": "<p>Here I want to save input string by pointing to an array, but the output will all change to the last inserted input.</p>\n\n<pre><code>char **month;\nint row, col;\nint i, j;\nchar name[10];\n\nmonth = (char **)malloc(3*sizeof(char *));\n\nfor (int i = 0; i &lt; 3; i++)\n{\n    month[i] = (char *)malloc(10*sizeof(char));\n\n    printf(\"Enter name\\n\");\n\n    scanf(\"%s\", name);\n\n    month[i] = name;\n}\n\nfor (int i = 0; i &lt; 3; i++)\n{\n    printf(\"%s\\n\", month[i]);\n}\n\nreturn 0;\n</code></pre>\n\n<p>Any idea how can I fix it?</p>\n"}, {"tags": ["c", "validation", "io", "switch-statement", "scanf"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1498642809, "post_id": 44798899, "comment_id": 76577814, "body": "You might be interested in my <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">beginners&#39; guide away from scanf()</a> to learn more about all the possible pitfalls with <code>scanf()</code> and some guidance what else to use."}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1498642874, "post_id": 44798899, "comment_id": 76577860, "body": "get a whole line with <code>getline</code>, strip newline character, convert to integer with <code>strtol</code>, check if ok"}, {"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 0, "creation_date": 1498649472, "post_id": 44798899, "comment_id": 76582181, "body": "If user enters other than numbers just throw an error. For instance <code>if (select_option &lt; &#39;0&#39; &amp;&amp; select_option &gt; &#39;9&#39;) { printf(&quot;error: wrong input\\n&quot;); }</code> would be as simple as possible."}, {"owner": {"reputation": 89, "user_id": 7852195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ce46df2c1894594079387e6db9bb513?s=128&d=identicon&r=PG&f=1", "display_name": "WCKennedays", "link": "https://stackoverflow.com/users/7852195/wckennedays"}, "reply_to_user": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 0, "creation_date": 1498654869, "post_id": 44798899, "comment_id": 76586318, "body": "@LinuxStuff But when the user enters a &#39;char&#39; like &#39;a&#39;, &#39;asd&#39;, the code goes into an infinite loop for some reason."}, {"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 0, "creation_date": 1498666642, "post_id": 44798899, "comment_id": 76595675, "body": "Try this snippet of code. <code>if ((select_option &gt; 0) &amp;&amp; (select_option &lt;= 9)) {                                                       printf(&quot;you have entered %d\\n&quot;, select_option);                                  } else {                                                                                 printf(&quot;you have entered wrong menu option\\n&quot;);                          }</code> This is the simplest way of handling the input."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 7852195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ce46df2c1894594079387e6db9bb513?s=128&d=identicon&r=PG&f=1", "display_name": "WCKennedays", "link": "https://stackoverflow.com/users/7852195/wckennedays"}, "edited": false, "score": 0, "creation_date": 1498654727, "post_id": 44799004, "comment_id": 76586173, "body": "I see, thank you. I&#39;ve seen many have suggested to use the fgets() function. If I proceed with that, how should I do it?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 89, "user_id": 7852195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ce46df2c1894594079387e6db9bb513?s=128&d=identicon&r=PG&f=1", "display_name": "WCKennedays", "link": "https://stackoverflow.com/users/7852195/wckennedays"}, "edited": false, "score": 0, "creation_date": 1498654854, "post_id": 44799004, "comment_id": 76586302, "body": "@WCKennedays you are welcome. You asked a nice question (I upvoted), so I thank you too! <code>fgets()</code> is a good method. I suggest you try that on your own and <i>accept</i> an answer for this already asked question of yours. If you are having a difficult time with <code>fgets()</code>, then post a <i>new</i> question, by providing a minimal example of your attempt. Of course if you want, you can link me to this question (if you ever post it). Cheers!"}, {"owner": {"reputation": 89, "user_id": 7852195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ce46df2c1894594079387e6db9bb513?s=128&d=identicon&r=PG&f=1", "display_name": "WCKennedays", "link": "https://stackoverflow.com/users/7852195/wckennedays"}, "edited": false, "score": 0, "creation_date": 1498687403, "post_id": 44799004, "comment_id": 76607175, "body": "I&#39;m trying it out as we speak, thanks! Main struggle is because (posted the minimal example of my code) I used a <code>while</code> loop and a <code>switch</code>. I followed one of the commenter&#39;s guide: <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">Felix Palmen&#39;s beginners&#39; guide away from scanf()</a>, on part 4, using the atoi method. Problem is the validation only works at the start, and when the user puts in a valid option, the validation no longer applies cause I&#39;ve moved down the code already. I&#39;m wondering how do I slot the validation in so it covers my <code>while</code> and <code>switch</code> loop."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 1, "last_activity_date": 1498643023, "creation_date": 1498643023, "answer_id": 44799004, "question_id": 44798899, "link": "https://stackoverflow.com/questions/44798899/prompt-error-when-user-enters-a-char-instead-of-an-expected-int/44799004#44799004", "title": "Prompt error when user enters a char instead of an expected int", "body": "<p>You <em>could</em> do this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int v;\n    int ret = scanf(\"%d\", &amp;v);\n    if(ret == 1)\n        printf(\"OK, %d\\n\", v);\n    else\n        printf(\"Something went wrong!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>where I took advantage of the return value of <code>scanf()</code>, and based on that value, I made an assumption. This will fail for the case of \"1a2\", but will succeed for \"12\" and \"a\".</p>\n\n<p>However, this is a broad question and personally the way I would go for it is:</p>\n\n<ol>\n<li>Use <a href=\"http://www.cplusplus.com/reference/cstdio/fgets/\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> to read input.</li>\n<li>Discard newline.</li>\n<li>Convert string to integer (with <a href=\"http://www.cplusplus.com/reference/cstdlib/strtol/\" rel=\"nofollow noreferrer\"><code>strtol()</code></a> for example).</li>\n<li><a href=\"https://stackoverflow.com/questions/19148611/using-strtol-to-validate-integer-input-in-ansi-c\">Validate input</a>.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 2407555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1a571b52ecd490ff9ec123a468c5487?s=128&d=identicon&r=PG", "display_name": "Susarla Nikhilesh", "link": "https://stackoverflow.com/users/2407555/susarla-nikhilesh"}, "edited": false, "score": 0, "creation_date": 1498650772, "post_id": 44801116, "comment_id": 76583111, "body": "After the scanf statement, please change the Case to switch. So that there won&#39;t be any syntax error"}, {"owner": {"reputation": 89, "user_id": 7852195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ce46df2c1894594079387e6db9bb513?s=128&d=identicon&r=PG&f=1", "display_name": "WCKennedays", "link": "https://stackoverflow.com/users/7852195/wckennedays"}, "edited": false, "score": 0, "creation_date": 1498654789, "post_id": 44801116, "comment_id": 76586238, "body": "Actually that is what I&#39;ve done for my code, but the problem is when the user inputs other integers, yes the default handles it. But when the user enters a &#39;char&#39; like &#39;a&#39;, &#39;asd&#39;, the code goes into an infinite loop for some reason."}, {"owner": {"reputation": 193, "user_id": 8156646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9406dcb13c1bf6e1d8f838d7819fcf4f?s=128&d=identicon&r=PG&f=1", "display_name": "Shaurya", "link": "https://stackoverflow.com/users/8156646/shaurya"}, "edited": false, "score": 0, "creation_date": 1498655485, "post_id": 44801116, "comment_id": 76586847, "body": "As far I know it must handle all cases....else u can paste ur entire code"}, {"owner": {"reputation": 193, "user_id": 8156646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9406dcb13c1bf6e1d8f838d7819fcf4f?s=128&d=identicon&r=PG&f=1", "display_name": "Shaurya", "link": "https://stackoverflow.com/users/8156646/shaurya"}, "edited": false, "score": 0, "creation_date": 1498656387, "post_id": 44801116, "comment_id": 76587591, "body": "I have pasted a pic of the output"}, {"owner": {"reputation": 89, "user_id": 7852195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ce46df2c1894594079387e6db9bb513?s=128&d=identicon&r=PG&f=1", "display_name": "WCKennedays", "link": "https://stackoverflow.com/users/7852195/wckennedays"}, "edited": false, "score": 0, "creation_date": 1498660115, "post_id": 44801116, "comment_id": 76590732, "body": "@Shaurya I think that&#39;s because I&#39;ve placed a while loop outside the switch. I want to make it as if it allows the user to re-enter a valid option."}], "tags": [], "owner": {"reputation": 193, "user_id": 8156646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9406dcb13c1bf6e1d8f838d7819fcf4f?s=128&d=identicon&r=PG&f=1", "display_name": "Shaurya", "link": "https://stackoverflow.com/users/8156646/shaurya"}, "is_accepted": false, "score": 1, "last_activity_date": 1498655398, "last_edit_date": 1498655398, "creation_date": 1498649202, "answer_id": 44801116, "question_id": 44798899, "link": "https://stackoverflow.com/questions/44798899/prompt-error-when-user-enters-a-char-instead-of-an-expected-int/44801116#44801116", "title": "Prompt error when user enters a char instead of an expected int", "body": "<p>I am assuming u are a beginner. You can use <strong>Switch Case</strong> which is used usually for creating menus and depending on the choice of the user executes the particular case.\nI will show u a small example.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nint main()\n{\n  int n;\n  printf(\"Select the sports u want to do\\n\");\n  printf(\"1.Tennis\\n2.Karate\\n3.Football\\n\");\n  scanf(\"%d\",&amp;n);\n  Switch(n)\n  {\n     case 1:printf(\"You chose Tennis\\n\");\n          break;   //To prevent from all cases being executed we use \n                   //break which helps from coming out of a loop \n     case 2:printf(\"You chose Karate\\n\");\n          break;\n\n     case 3:printf(\"You chose Football\\n\");\n          break;\n\n     default:printf(\"Please enter an appropriate number !\");\n            //Cases which dont match with the input are handled by default !\n  }\n}\n</code></pre>\n\n<p>Also to make the user enter input until he wants to exit add a while loop with a variable !</p>\n\n<p>I hope this helps!</p>\n\n<p><a href=\"https://i.stack.imgur.com/1UU99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1UU99.png\" alt=\"Entered string here\"></a></p>\n"}], "owner": {"reputation": 89, "user_id": 7852195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ce46df2c1894594079387e6db9bb513?s=128&d=identicon&r=PG&f=1", "display_name": "WCKennedays", "link": "https://stackoverflow.com/users/7852195/wckennedays"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3181, "favorite_count": 0, "accepted_answer_id": 44799004, "answer_count": 2, "score": 1, "last_activity_date": 1501401061, "creation_date": 1498642703, "last_edit_date": 1501401061, "question_id": 44798899, "link": "https://stackoverflow.com/questions/44798899/prompt-error-when-user-enters-a-char-instead-of-an-expected-int", "title": "Prompt error when user enters a char instead of an expected int", "body": "<p>I'm making a menu that lists options 1-3. The user is expected to enter an integer. </p>\n\n<pre><code>scanf(\"%d\", &amp;select_option)\n</code></pre>\n\n<p>How do I prompt error when user enters a char (for example \"a\", or \"asd\" for long strings, or a mixture like \"1a2\") instead of an expected int? Thanks.</p>\n\n<p>Note: When the user enters a 'char' like 'a', 'asd', the code goes into an infinite loop for some reason.</p>\n\n<p>Here's my program (minimal example):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n        int main(void)\n            {\n                printf(\"Favourite sports? \\n\");\n                printf(\"1. Tennis\\n\");\n                printf(\"2. Badminton\\n\");\n                printf(\"3. Basketball\\n\");\n                printf(\"4. Exit program.\\n\");\n                printf(\"Enter your choice (1-4): \"); \n                scanf(\"%d\", &amp;select_option);\n\n                while(select_option != 4) \n                {\n                    switch(select_option)\n                    {\n                        case 1:\n                            printf(\"You like tennis! Nice! \\n\");\n                            break; \n\n                        case 2:\n                            printf(\"You like badminton! Nice!\");\n                            break;      \n\n                        case 3: \n                            printf(\"You like basketball! Nice!\");\n                            break; \n\n                        default:\n                            system(\"clear\");\n                            printf(\"Invalid option. Please re-enter your choice (1-4).\\n\");\n\n                    }//end switch\n\n                printf(\"Favourite sports? \\n\");\n                printf(\"1. Tennis\\n\");\n                printf(\"2. Badminton\\n\");\n                printf(\"3. Basketball\\n\");\n                printf(\"4. Exit program.\\n\");\n                printf(\"Enter your choice (1-4): \"); \n                scanf(\"%d\", &amp;select_option);\n\n                }//end while\n            }//end main\n</code></pre>\n"}, {"tags": ["c", "malloc", "sizeof", "strlen"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1498642686, "post_id": 44798757, "comment_id": 76577731, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">Don&#39;t cast the result of <code>malloc</code> in C</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1498646320, "post_id": 44798757, "comment_id": 76580157, "body": "Why would the <i>size</i> of the length be the same as the actual <i>value</i> of the length?"}, {"owner": {"reputation": 2668, "user_id": 647254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09869dbd44b7033b209bd38dcf6d7361?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/647254/eugene"}, "edited": false, "score": 0, "creation_date": 1498648374, "post_id": 44798757, "comment_id": 76581497, "body": "BTW, in a case such as yours when it is needed to allocate memory for the string and then copy from another string, it is easier to use <code>strdup</code> which combines three functions: <code>strlen</code>, <code>malloc</code> and <code>strcpy</code>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 4, "last_activity_date": 1498643001, "last_edit_date": 1498643001, "creation_date": 1498642623, "answer_id": 44798856, "question_id": 44798757, "link": "https://stackoverflow.com/questions/44798757/malloc-sizeof-and-strlen-functions-possible-conflict/44798856#44798856", "title": "malloc, sizeof and strlen functions possible conflict?", "body": "<p><code>sizeof</code> evaluates to the storage size of its argument (which might be an expression of a type, or just the type itself). So, look closely what the argument is here:</p>\n\n<pre><code>strlen(fname)+1\n</code></pre>\n\n<p>This is an expression of type <code>size_t</code>. <code>sizeof</code> will give you whatever amount of bytes is needed to store a <code>size_t</code> (probably either 4 or 8).</p>\n\n<p>What you <em>want</em> is enough storage for your string, so the version with only <code>strlen()</code> is the correct one. In the other case, you reserve just 4 or 8 bytes and then write to memory locations you didn't allocate -> <em>undefined behavior</em>.</p>\n\n<hr>\n\n<p>On a side note: casting <code>void *</code> is explicitly not needed in C and is considered bad practice by many (but not all) C coders. See <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">this classic quesion</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 5, "last_activity_date": 1498642656, "creation_date": 1498642656, "answer_id": 44798871, "question_id": 44798757, "link": "https://stackoverflow.com/questions/44798757/malloc-sizeof-and-strlen-functions-possible-conflict/44798871#44798871", "title": "malloc, sizeof and strlen functions possible conflict?", "body": "<p><code>sizeof(strlen(fname)+1)</code> doesn't make any sense. It gives the size of the result type of <code>strlen</code>, which is an integer of 4 bytes. So you end up allocating too little memory.</p>\n\n<p>Use this:</p>\n\n<pre><code>person-&gt;fname = malloc(strlen(fname)+1);\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 6846552, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f7713aa0b75eb19586038408883c08c0?s=128&d=identicon&r=PG&f=1", "display_name": "Mynicks", "link": "https://stackoverflow.com/users/6846552/mynicks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 44798856, "answer_count": 2, "score": -1, "last_activity_date": 1523251773, "creation_date": 1498642389, "last_edit_date": 1523251773, "question_id": 44798757, "link": "https://stackoverflow.com/questions/44798757/malloc-sizeof-and-strlen-functions-possible-conflict", "title": "malloc, sizeof and strlen functions possible conflict?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct _person\n{\n    char *fname;\n    char *lname;\n    bool isavailable;\n}Person;\n\n\nPerson *getPersonInstance(void)\n{\n    Person *newPerson = (Person*) malloc(sizeof(Person));\n    if(newPerson == NULL)\n        return NULL;\n    return newPerson;\n}\n\nvoid initializePerson(Person *person, char *fname, char *lname, bool isavailable)\n{\n    person-&gt;fname = (char*) malloc(strlen(fname)+1);\n  /*problematic behaviour if i write: person-&gt;fname = (char*) malloc (sizeof(strlen(fname)+1)); */\n\n    person-&gt;lname = (char*) malloc(strlen(lname)+1);\n /*problematic behaviour if i write: person-&gt;lname = (char*) malloc (sizeof(strlen(lname)+1)); */\n\n    strcpy(person-&gt;fname,fname);\n    strcpy(person-&gt;lname,lname);\n    person-&gt;isavailable = isavailable;\n\n    return;\n\n}\n\n// test code sample\nint main(void)\n{\n    Person *p1 =getPersonInstance();\n    if(p1 != NULL)\n        initializePerson(p1, \"Bronze\", \"Medal\", 1);\n\n    Person *p2 =getPersonInstance();\n    if(p2 != NULL)\n        initializePerson(p2, \"Silver\", \"Medalion\", 1);\n\n    Person *p3 =getPersonInstance();\n    if(p3 != NULL)\n        initializePerson(p3, \"Golden\", \"Section\", 1);\n\n    printf(\"item1=&gt; %10s, %10s, %4u\\n\",p1-&gt;fname, p1-&gt;lname, p1-&gt;isavailable);\n    printf(\"item2=&gt; %10s, %10s, %4u\\n\",p2-&gt;fname, p2-&gt;lname, p2-&gt;isavailable);\n    printf(\"item3=&gt; %10s, %10s, %4u\\n\",p3-&gt;fname, p3-&gt;lname, p3-&gt;isavailable);\n\n    return 0;\n}\n</code></pre>\n\n<p>Inside initializePerson() if i use:</p>\n\n<pre><code>person-&gt;fname = (char*) malloc (sizeof(strlen(fname)+1));\nperson-&gt;lname = (char*) malloc (sizeof(strlen(lname)+1));\n</code></pre>\n\n<p>When these two codelines are enabled instead of the ones i am using in the source code above, i might get a run time error when i test the code using CodeBlocks IDE. Very likely the console freezes up and stops working. If i test the code using ubuntu terminal it works any day without a problem regardless of the size of the input data.</p>\n\n<p>Question: (Now, assume that we are using the 2 pieces of code from the previous paragraph) i know that sizeof counts bytes, and strlen counts the number of characters until it finds null... BUT sizeof and strlen when used together inside malloc() do they cause a conflict in the background? What seems to be the problem? why the code has such an erratic,unreliable behavior? why? </p>\n"}, {"tags": ["c", "string", "hex", "converter", "strtol"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1498641116, "post_id": 44798265, "comment_id": 76576625, "body": "consider writing your function then, and when you do please come back if you have a query on that."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1498641207, "post_id": 44798265, "comment_id": 76576685, "body": "You forgot to ask a question, btw."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498651594, "post_id": 44798425, "comment_id": 76583727, "body": "1) <code>(char*)</code>  is a weak practice in <code>char *p = (char*) s;</code>.  Use <code>const char *p = s;</code>  2) <code>if (p &gt; s)</code> not needed in <code>if (p &gt; s) v = v &lt;&lt; 4;</code>"}], "tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": false, "score": 2, "last_activity_date": 1498653948, "last_edit_date": 1498653948, "creation_date": 1498641544, "answer_id": 44798425, "question_id": 44798265, "link": "https://stackoverflow.com/questions/44798265/conversion-char-string-to-hex-uint16/44798425#44798425", "title": "Conversion char* string to hex uint16", "body": "<p>How about this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nunsigned int\ntrans(unsigned char c){\n  if ('0' &lt;=c &amp;&amp; c &lt;= '9') return c - '0';\n  if ('A' &lt;=c &amp;&amp; c &lt;= 'F') return c - 'A' + 0x0A;\n  if ('a' &lt;=c &amp;&amp; c &lt;= 'f') return c - 'a' + 0x0A;\n  return 0;\n}\n\nuint16_t\nhex_to_uint16(const char* s) {\n  uint16_t v = 0;\n  while (*s)\n    v = (v &lt;&lt; 4) + trans(*s++);\n  return v;\n}\n\n#include &lt;assert.h&gt;\n\nint\nmain(int argc, char* argv[]) {\n  assert(0x0012 == hex_to_uint16(\"12\"));\n  assert(0x0000 == hex_to_uint16(\"0\"));\n  assert(0x0123 == hex_to_uint16(\"123\"));\n  assert(0x1234 == hex_to_uint16(\"1234\"));\n  assert(0xffff == hex_to_uint16(\"ffff\"));\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8102703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eQY4i.jpg?s=128&g=1", "display_name": "menchopez", "link": "https://stackoverflow.com/users/8102703/menchopez"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "closed_date": 1498642739, "answer_count": 1, "score": -9, "last_activity_date": 1498653948, "creation_date": 1498641032, "last_edit_date": 1498643830, "question_id": 44798265, "link": "https://stackoverflow.com/questions/44798265/conversion-char-string-to-hex-uint16", "closed_reason": "Needs details or clarity", "title": "Conversion char* string to hex uint16", "body": "<p>I need to build a function, my input is a char *string and I'll need to get the \"same representation\" but in a uint16.</p>\n\n<p>For example:</p>\n\n<pre><code>input: \"12\"  --&gt;  output: 0x0012\ninput: \"0\"   --&gt;  output: 0x0000\ninput \"123\"  --&gt;  output: 0x0123\ninput \"1234\" --&gt;  output: 0x1234\n</code></pre>\n\n<p>PD: I can't use \"official functions\" such as strtol, sscanf...</p>\n"}, {"tags": ["c", "malloc", "sizeof", "void"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1498640556, "post_id": 44797971, "comment_id": 76576244, "body": "undefined behaviour is undefined behaviour."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1498640651, "post_id": 44797971, "comment_id": 76576301, "body": "<code>sizeof(void)</code> is invalid. You used GCC extention."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1498640653, "post_id": 44797971, "comment_id": 76576302, "body": "I parked my car illegally. Explain why it was not towed away."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498640669, "post_id": 44797971, "comment_id": 76576308, "body": "please check both the dupes. Combined together they answer your question."}, {"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "edited": false, "score": 1, "creation_date": 1498640674, "post_id": 44797971, "comment_id": 76576313, "body": "Yes, may be succeeded, or may be fail. Because it&#39;s undefined behavior. And you write bytes in non-allocated memory block. So the program may be crash."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498641783, "post_id": 44797971, "comment_id": 76577101, "body": "Add this toward the end of main() : <code>free(p); p = malloc(sizeof(void));</code> and see what the effect of buffer overflow is to your app. Buffer overflows can be difficult to track, because the error may pop up much later in the instruction flow."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1498640339, "creation_date": 1498640339, "answer_id": 44798025, "question_id": 44797971, "link": "https://stackoverflow.com/questions/44797971/why-pointer-memory-gets-successfully-able-to-save-and-retrive-data-from-void-mem/44798025#44798025", "title": "Why pointer memory gets successfully able to save and retrive data from void memory allocation", "body": "<p>You're exploiting <em>undefined behaviour</em>.</p>\n\n<p>On other occasions the compiler might eat your cat.</p>\n\n<p>(What might be happening under the hood is that the C runtime library is giving you back more memory than you've actually asked for as some kind of optimisation.)</p>\n"}], "owner": {"reputation": 69, "user_id": 8187968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bf5f2652186752b7f0e7ea00f2a710?s=128&d=identicon&r=PG&f=1", "display_name": "sagar", "link": "https://stackoverflow.com/users/8187968/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1498640497, "answer_count": 1, "score": 0, "last_activity_date": 1498640525, "creation_date": 1498640187, "question_id": 44797971, "link": "https://stackoverflow.com/questions/44797971/why-pointer-memory-gets-successfully-able-to-save-and-retrive-data-from-void-mem", "closed_reason": "Duplicate", "title": "Why pointer memory gets successfully able to save and retrive data from void memory allocation", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char *p = malloc(sizeof(void));\n    p[0] = 'a';\n    p[1] = 'b';\n    p[2] = 'c';\n    p[3] = 'd';\n    p[4] = 'e';\n    printf(\"%c\\n\",p[0]);\n    printf(\"%c\\n\",p[1]);\n    printf(\"%c\\n\",p[2]);\n    printf(\"%c\\n\",p[3]);\n    printf(\"%c\\n\",p[4]);\n    return 0;\n}\n</code></pre>\n\n<p>// In above code only one byte memory should be allocated as sizeof(void) will be only '1', but why I am able to successfully print all the characters?</p>\n\n<p>similarly for below program also it is printing successfully</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char *p = malloc(0);\n    p[0] = 'a';\n    p[1] = 'b';\n    p[2] = 'c';\n    p[3] = 'd';\n    p[4] = 'e';\n    printf(\"%c\\n\",p[0]);\n    printf(\"%c\\n\",p[1]);\n    printf(\"%c\\n\",p[2]);\n    printf(\"%c\\n\",p[3]);\n    printf(\"%c\\n\",p[4]);\n    return 0;\n}\n</code></pre>\n\n<p>Please clarify why both of this cases are successfully printing the msg even though memory is not allocated for this?  </p>\n"}, {"tags": ["php", "c", "protocol-buffers", "nanopb"], "comments": [{"owner": {"reputation": 24603, "user_id": 1110423, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed86330a464a2bc0069dfdfc35524f2e?s=128&d=identicon&r=PG", "display_name": "Alex Blex", "link": "https://stackoverflow.com/users/1110423/alex-blex"}, "edited": false, "score": 0, "creation_date": 1498640008, "post_id": 44797759, "comment_id": 76575883, "body": "Have you done any research? <a href=\"https://en.wikipedia.org/wiki/Protocol_Buffers#Language_support\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Protocol_Buffers#Language_support</a> states <i>Third-party implementations are also available for PHP</i>"}], "answers": [{"tags": [], "owner": {"reputation": 4175, "user_id": 717134, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7bab8b219c29a6df404a86279ee4be7?s=128&d=identicon&r=PG", "display_name": "Davorin Ru\u0161evljan", "link": "https://stackoverflow.com/users/717134/davorin-ru%c5%a1evljan"}, "is_accepted": true, "score": 2, "last_activity_date": 1498643742, "creation_date": 1498643742, "answer_id": 44799253, "question_id": 44797759, "link": "https://stackoverflow.com/questions/44797759/nanopb-decode-with-php/44799253#44799253", "title": "Nanopb - decode with PHP", "body": "<p>Use php implementation of google protocol buffers like for instance:</p>\n\n<p><a href=\"https://github.com/google/protobuf/tree/master/php\" rel=\"nofollow noreferrer\">google/protobuf/php</a></p>\n\n<p><a href=\"https://github.com/protobuf-php/protobuf\" rel=\"nofollow noreferrer\">protobuf-php</a> </p>\n"}], "owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 44799253, "answer_count": 1, "score": 1, "last_activity_date": 1498643742, "creation_date": 1498639632, "question_id": 44797759, "link": "https://stackoverflow.com/questions/44797759/nanopb-decode-with-php", "title": "Nanopb - decode with PHP", "body": "<p>I have a message encoded with Nanopb implementation of Google Protocol Buffers.</p>\n\n<p>I have to decode it to display the decoded result on a php page.</p>\n\n<p>Is it possible to do it with PHP ?\nIf not, what is the best solution to do it in order to get an exploitable result in php ?</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498639498, "post_id": 44797657, "comment_id": 76575547, "body": "If you program in C, why add the C++ tag? C and C++ are different languages. And what does this question have to do with the Google Chrome web-browser? Please don&#39;t add irrelevant (language or other) tags to your questions."}, {"owner": {"reputation": 1548, "user_id": 4124887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32c7d781b18ed038d6cb2ff54bcbb0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/4124887/tony"}, "edited": false, "score": 0, "creation_date": 1498640995, "post_id": 44797657, "comment_id": 76576534, "body": "The callback is run for <i>every</i> row returned by the query.  Every time it is run it creates your historyc.txt file from scratch and writes a row to it.  Hence you end up with only one entry and it&#39;s the last one returned by the query.  Answer #31146713 might be helpful to you."}, {"owner": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "edited": false, "score": 0, "creation_date": 1498643532, "post_id": 44797657, "comment_id": 76578313, "body": "Sorry it doesn&#39;t solve my Problem .Sql command will retrieve two columns Datetime and URL . Normally if callback runs each row then i will get the final row but it isn&#39;t true it display me a random row ......"}], "answers": [{"tags": [], "owner": {"reputation": 1548, "user_id": 4124887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32c7d781b18ed038d6cb2ff54bcbb0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/4124887/tony"}, "is_accepted": true, "score": 0, "last_activity_date": 1498644715, "last_edit_date": 1498644715, "creation_date": 1498643955, "answer_id": 44799339, "question_id": 44797657, "link": "https://stackoverflow.com/questions/44797657/display-data-using-sqlite3-in-c-application/44799339#44799339", "title": "Display data using sqlite3 in C application", "body": "<p>Changing <code>fopen(...,\"w\")</code> to <code>fopen(...,\"a+\")</code> fixes the problem for me.  This is because your code currently wipes the file every time it opens it, which is every row (overwriting the previous row).  <code>a+</code> will append to the existing file instead of wiping it, so you will get all the rows printed in the file.  You will need to manually delete historyc.txt each time you run the programme though, otherwise it will keep growing.  </p>\n\n<p>Of course, <code>\"a+\"</code> just a dirty hack in this context and not a very efficient one.  Another <em>slightly</em> more efficient hack is to make <code>*fp</code> global and then open the file before your <code>exec</code> statement (and remove <code>*fp</code> and <code>open</code> from the callback function).  Still dirty but at least this means the file is only opened once.  </p>\n\n<p>Code...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sqlite3.h&gt;\n\nint callback(void*, int, char**, char**);\n\nint main(int argc, char** argv) {\n    sqlite3 *db;\n    char *err_msg = 0;\n    int rc = sqlite3_open(\"your_db_file\", &amp;db);\n    if (rc != SQLITE_OK) {\n        fprintf(stderr, \"Cannot open database: %s\\n\",\n        sqlite3_errmsg(db));\n        sqlite3_close(db);\n        return 1;\n    }\n    char *sql = \"select datetime(last_visit_time/1000000-11644473600,\"\n                \"'unixepoch') as visit_time,url from  urls order by \"\n                \"last_visit_time desc\";\n    rc = sqlite3_exec(db, sql, callback, 0, &amp;err_msg);\n    if (rc != SQLITE_OK ) {\n        fprintf(stderr, \"Failed to select data\\n\");\n        fprintf(stderr, \"SQL error: %s\\n\", err_msg);\n        sqlite3_free(err_msg);\n        sqlite3_close(db);\n        return 0;\n    }\n    sqlite3_close(db);\n    return 0; \n}\n\nint callback(void *NotUsed, int argc, char **argv,\n                    char **azColName) {\n    NotUsed = 0;\n    FILE *fp ;\n    // Very dirty but it works for me\n    fp=fopen(\"/tmp/historyc.txt\",\"a+\");\n    for (int i = 0; i &lt; argc; i++) {\n        fprintf(fp,\"%s = %s\\n\", azColName[i], argv[i] ? argv[i] : \"NULL\");\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8224772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf3f916a2753f1c0f05ef2ea4bc49820?s=128&d=identicon&r=PG&f=1", "display_name": "Belghith Amine", "link": "https://stackoverflow.com/users/8224772/belghith-amine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 44799339, "answer_count": 1, "score": 0, "last_activity_date": 1498660795, "creation_date": 1498639366, "last_edit_date": 1498660795, "question_id": 44797657, "link": "https://stackoverflow.com/questions/44797657/display-data-using-sqlite3-in-c-application", "title": "Display data using sqlite3 in C application", "body": "<p>I'm developing C Program that will help me to display the browser history.\nWhenever I run any sql Command in sqlite it displays all history in file. \nThis is what Sql command is(history file that contains history of chrome)!</p>\n\n<blockquote>\n  <p>sqlite3 History \"select datetime(last_visit_time/1000000-11644473600,'unixepoch'),url from  urls order by last_visit_time desc\" > history_export.txt </p>\n</blockquote>\n\n<p>It gives me a good result for example</p>\n\n<blockquote>\n  <p>2017-06-28 10:20:20 | stackoverflow.com<br>\n  2017-06-28 8:20:20 google.com 2017-06-28 \n  07.10:20 | facebook.com</p>\n  \n  <h2>ETC</h2>\n</blockquote>\n\n<p>And then I want to have the same result but with C Application.\nThis is my code:</p>\n\n<pre><code>int main()\n{\n    sqlite3 *db;\n    char *err_msg = 0;\n    int rc = sqlite3_open(\"c:/Users/XXXXXX/AppData/Local/Google/Chrome/User Data/Default/History\", &amp;db);\n    if (rc != SQLITE_OK) {\n        fprintf(stderr, \"Cannot open database: %s\\n\",\n        sqlite3_errmsg(db));\n        sqlite3_close(db);\n\n        return 1;\n    }\n   //the same command works fine in sqlite3\n    char *sql = \"select datetime(last_visit_time/1000000-11644473600,'unixepoch'),url from  urls order by last_visit_time desc\";\n\n    rc = sqlite3_exec(db, sql, callback, 0, &amp;err_msg);\n\n    if (rc != SQLITE_OK ) {\n\n        fprintf(stderr, \"Failed to select data\\n\");\n        fprintf(stderr, \"SQL error: %s\\n\", err_msg);\n\n        sqlite3_free(err_msg);\n        sqlite3_close(db);\n\n        return 1;\n    }\n\n    sqlite3_close(db);\nsystem (\"pause\");\n    return 0;\n}\n//declaration of callback function i think that the problem is here\nint callback(void *NotUsed, int argc, char **argv,\n                    char **azColName) {\n\n    NotUsed = 0;\n    FILE *fp ;\n    fp=fopen(\"C:/sqlite/historyc.txt\",\"w\");\n\n    for (int i = 0; i &lt; argc; i++) {\n\n        fprintf(fp,\"%s = %s\\n\", azColName[i], argv[i] ? argv[i] : \"NULL\");\n\n    }\n\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>It displays me 2 or 3 lines of an old visit (20/03/2017..)\nBut I want to have the same result that I get with the sql command. \nProbably the problem is due to the Callback function.</p>\n"}, {"tags": ["c", "x11", "xmodmap"], "answers": [{"tags": [], "owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "is_accepted": false, "score": 0, "last_activity_date": 1498637267, "creation_date": 1498637267, "answer_id": 44796936, "question_id": 44796929, "link": "https://stackoverflow.com/questions/44796929/convert-x11-keysym-to-key-name/44796936#44796936", "title": "Convert X11 Keysym to Key Name", "body": "<p>Yes, use <a href=\"https://tronche.com/gui/x/xlib/utilities/keyboard/XKeysymToString.html\" rel=\"nofollow noreferrer\">XKeysymToString</a> function.</p>\n"}], "owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498637267, "creation_date": 1498637249, "question_id": 44796929, "link": "https://stackoverflow.com/questions/44796929/convert-x11-keysym-to-key-name", "title": "Convert X11 Keysym to Key Name", "body": "<p>Is it possible to convert a keysym to key name like the output of <code>xmodmap -pke</code> using libX11 without having to parse the output of the <code>xmodmap</code>?</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1498636948, "post_id": 44796780, "comment_id": 76573937, "body": "<code>return;</code> is invalid."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1498637176, "post_id": 44796780, "comment_id": 76574091, "body": "<code>(i++,i)</code> is <code>++i</code>"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1498637321, "post_id": 44796780, "comment_id": 76574172, "body": "Your program has no output, because it does not compile: <a href=\"http://ideone.com/prctsY\" rel=\"nofollow noreferrer\">ideone.com/prctsY</a>"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498647405, "post_id": 44796780, "comment_id": 76580895, "body": "Please copy/paste in the actual code you tested."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1498637140, "last_edit_date": 1498637140, "creation_date": 1498636820, "answer_id": 44796796, "question_id": 44796780, "link": "https://stackoverflow.com/questions/44796780/how-the-below-recursion-method-works-with-argument-enclosed-with-i-i-can-an/44796796#44796796", "title": "How the below recursion method works with argument enclosed with (i++,i)? can anyone explain?", "body": "<ol>\n<li><p>Your program does not compile since <code>return;</code> is invalid in a function that returns an <code>int</code>.</p></li>\n<li><p><code>(i++,i)</code> is equivalent to <code>++i</code>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1498637435, "creation_date": 1498637435, "answer_id": 44796990, "question_id": 44796780, "link": "https://stackoverflow.com/questions/44796780/how-the-below-recursion-method-works-with-argument-enclosed-with-i-i-can-an/44796990#44796990", "title": "How the below recursion method works with argument enclosed with (i++,i)? can anyone explain?", "body": "<p><code>,</code> in <code>reverse((i++,i))</code> call is a comma operator. This call is equivalent to   </p>\n\n<pre><code>i++;\nreturn reverse(i);  \n</code></pre>\n\n<hr>\n\n<p>Apart from this, signature <code>main</code> should be <code>int main(void)</code> and you should place a function prototype for the function <code>reverse</code> before <code>main</code>.    </p>\n\n<pre><code>int reverse(int i);\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5806231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897536c585e431c390d01a394ca4e2b8?s=128&d=identicon&r=PG&f=1", "display_name": "sridharan", "link": "https://stackoverflow.com/users/5806231/sridharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1498646601, "creation_date": 1498636752, "last_edit_date": 1498646601, "question_id": 44796780, "link": "https://stackoverflow.com/questions/44796780/how-the-below-recursion-method-works-with-argument-enclosed-with-i-i-can-an", "title": "How the below recursion method works with argument enclosed with (i++,i)? can anyone explain?", "body": "<pre><code>void main()\n{\n    int x=1;\n    reverse(x);\n}\n\nint reverse(int i)\n{\n    if(i&gt;5)\n    {\n        return;\n    }\n    printf(\"%d\",i);\n    return reverse((i++,i));\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>12345\n</code></pre>\n\n<p>How does the recursion call <code>reverse((i++,i))</code> map with <code>reverse(int i)</code>?</p>\n"}, {"tags": ["c", "gcc", "arm"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498635448, "post_id": 44796277, "comment_id": 76573005, "body": "Which CM0 device exactly you are compiling? ARM-GCC can work just fine."}, {"owner": {"reputation": 21, "user_id": 6436065, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9f6ad61a1130ddce22982dbb4517d8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Kael", "link": "https://stackoverflow.com/users/6436065/kael"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498635717, "post_id": 44796277, "comment_id": 76573163, "body": "Actually my doubt is , which combination i have to use. I havent compiled on the processor, I am just trying to set up environment. I wish to output my results on console."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498635761, "post_id": 44796277, "comment_id": 76573190, "body": "What combination you are talking about?"}, {"owner": {"reputation": 21, "user_id": 6436065, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9f6ad61a1130ddce22982dbb4517d8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Kael", "link": "https://stackoverflow.com/users/6436065/kael"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498636011, "post_id": 44796277, "comment_id": 76573345, "body": "I mean, I setup the eclipse normally, I downloaded the Eclipse ARM compiler from market. I guess, this must be enough for compiling the program and flash on it. I want the output on console, is this possible to do ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498641232, "post_id": 44796277, "comment_id": 76576702, "body": "It doesn&#39;t make any sense to compile things like CMSIS or the ARM ABI on a PC. You&#39;ll have to skip those files. Overall you won&#39;t be able to compile a <i>complete</i> ARM project. You have to keep all the low-level things away."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1498647866, "post_id": 44796277, "comment_id": 76581199, "body": "you appear to be trying to compile an application that expects an operating system, but have none (cortex-m).  what is your test program some sort of printf helloworld?  try blinking an led instead."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1498647898, "post_id": 44796277, "comment_id": 76581220, "body": "windows has nothing to do with this nor eclipse."}], "answers": [{"comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498643037, "post_id": 44796762, "comment_id": 76577985, "body": "Non related with question."}, {"owner": {"reputation": 349, "user_id": 2465256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204a77228ae535805653a77ded02ae9c?s=128&d=identicon&r=PG&f=1", "display_name": "metamorphling", "link": "https://stackoverflow.com/users/2465256/metamorphling"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1498698428, "post_id": 44796762, "comment_id": 76610044, "body": "@tilz0R There are a lot of questions in topic post, and one of them was &quot;Which compiler can be used for ARM&quot; for which I provided a list of options, recommending the option I had experience with. Can you elaborate a little bit more as to what in my post was not related?"}], "tags": [], "owner": {"reputation": 349, "user_id": 2465256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204a77228ae535805653a77ded02ae9c?s=128&d=identicon&r=PG&f=1", "display_name": "metamorphling", "link": "https://stackoverflow.com/users/2465256/metamorphling"}, "is_accepted": false, "score": -2, "last_activity_date": 1498636700, "creation_date": 1498636700, "answer_id": 44796762, "question_id": 44796277, "link": "https://stackoverflow.com/questions/44796277/compiling-arm-in-windows-with-eclipse/44796762#44796762", "title": "Compiling ARM in Windows with Eclipse", "body": "<p>Under Windows for M0 I've been using <strong>IAR Embedded Workbench</strong>, which was a nice and smooth experience for me. But as far as I remember it needed a license.\n<a href=\"https://en.wikipedia.org/wiki/List_of_ARM_Cortex-M_development_tools\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/List_of_ARM_Cortex-M_development_tools</a></p>\n\n<p>Maybe you should look for free options in this list.</p>\n"}, {"tags": [], "owner": {"reputation": 318, "user_id": 3371737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ba46b0e85d079de2137b7fc89001bc?s=128&d=identicon&r=PG&f=1", "display_name": "Surak of Vulcan", "link": "https://stackoverflow.com/users/3371737/surak-of-vulcan"}, "is_accepted": false, "score": 0, "last_activity_date": 1498819200, "creation_date": 1498819200, "answer_id": 44844511, "question_id": 44796277, "link": "https://stackoverflow.com/questions/44796277/compiling-arm-in-windows-with-eclipse/44844511#44844511", "title": "Compiling ARM in Windows with Eclipse", "body": "<p>You can use the ARM GNU compiler from Eclipse marketplace. When this is installed, you can Create a new C/C++ project with the correct Project type -\n e.g. <code>Executable/STM32F0xx C/C++ project</code> if that's the series of chip you wish to target. Make sure Trace output in the wizard is NOT set to <code>None (no trace output)</code>. You can then use <code>trace_printf</code> to write to host console via ST-LINK, as the hello-world example will show.</p>\n\n<p>You may also have to install and configure OpenOCD to capture that output and display it in Eclipse's console. In Eclipse, you just set up an external tool <code>Run &gt; External tools &gt; External tools configuration</code>. Specify the location of openocd.exe, set the working directory and, in Arguments, specify which devkit you're using by using the appropriate config file, e.g. <code>-f board\\stm32f072discovery.cfg</code>.</p>\n\n<p>Then build, run OpenOCD and debug.</p>\n"}], "owner": {"reputation": 21, "user_id": 6436065, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9f6ad61a1130ddce22982dbb4517d8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Kael", "link": "https://stackoverflow.com/users/6436065/kael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 682, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498819200, "creation_date": 1498635287, "last_edit_date": 1498635890, "question_id": 44796277, "link": "https://stackoverflow.com/questions/44796277/compiling-arm-in-windows-with-eclipse", "title": "Compiling ARM in Windows with Eclipse", "body": "<p>I would like to make C program for the cortex - M0 processor. I work with 64-bit window machine and Eclipse. I found many things on internet and I am confused:\n1.MinGW\n2.ARM GCC compiler for windows (which can be set in the advanced system in computer, the PATH variable)\n3. ARM GNU compiler from Eclipse market</p>\n\n<p>Among all this , Which compiler can be used for ARM and can I output my results on command line. i.e Can I compile the program and produce results on the console ?</p>\n\n<p>This result below is what I get when I try to compile a hello program using the command: arm-none-eabi-gcc -o -tesres -test.c</p>\n\n<pre><code>c:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-exit.o): In functio\nn `exit':\nexit.c:(.text.exit+0x2c): undefined reference to `_exit'\nc:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-sbrkr.o): In functi\non `_sbrk_r':\nsbrkr.c:(.text._sbrk_r+0x18): undefined reference to `_sbrk'\nc:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-writer.o): In funct\nion `_write_r':\nwriter.c:(.text._write_r+0x24): undefined reference to `_write'\nc:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-closer.o): In funct\nion `_close_r':\ncloser.c:(.text._close_r+0x18): undefined reference to `_close'\nc:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-fstatr.o): In funct\nion `_fstat_r':\nfstatr.c:(.text._fstat_r+0x20): undefined reference to `_fstat'\nc:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-isattyr.o): In func\ntion `_isatty_r':\nisattyr.c:(.text._isatty_r+0x18): undefined reference to `_isatty'\nc:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-lseekr.o): In funct\nion `_lseek_r':\nlseekr.c:(.text._lseek_r+0x24): undefined reference to `_lseek'\nc:/program files (x86)/gnu tools arm embedded/6 2017-q1-update/bin/../lib/gcc/ar\nm-none-eabi/6.3.1/../../../../arm-none-eabi/lib\\libc.a(lib_a-readr.o): In functi\non `_read_r':\nreadr.c:(.text._read_r+0x24): undefined reference to `_read'\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c", "modbus", "plc", "modbus-tcp"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1498635855, "post_id": 44796053, "comment_id": 76573255, "body": "This question is too broad. You should probably read the device documentation."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498783284, "post_id": 44796053, "comment_id": 76654570, "body": "communicating with a MODBUS is relatively simple.  However, you probably will need a converter from RS232 to MODBUS.  You will need to learn the format of the MODBUS messages.  You will need to learn which &#39;coils&#39; control the leds and what those coils expect in the form of data."}], "owner": {"reputation": 39, "user_id": 6463265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0317d344f145a39f7f0ea1350cee7096?s=128&d=identicon&r=PG&f=1", "display_name": "pzydziak", "link": "https://stackoverflow.com/users/6463265/pzydziak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498636753, "creation_date": 1498634588, "last_edit_date": 1592644375, "question_id": 44796053, "link": "https://stackoverflow.com/questions/44796053/send-led-flash-command-using-libmodbus", "title": "Send &quot;LED Flash&quot; command using libmodbus", "body": "<p>Is it possibe and if so to send\n<a href=\"https://youtu.be/q85KdyYwrNM\" rel=\"nofollow noreferrer\">LED Flash command</a> to IFM AY1020 device using libmodbus?</p>\n<p>I can archive it via browser:\n<a href=\"https://i.stack.imgur.com/ATuVW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ATuVW.png\" alt=\"Screenshoct\" /></a></p>\n<p>But i need to do it from C code.</p>\n"}, {"tags": ["c", "multithreading", "signals", "threadpool"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1498646409, "post_id": 44795651, "comment_id": 76580192, "body": "<code>printf()</code> is not async-signal-safe.  It cannot be safely used in a signal handler."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1846065"}, "edited": false, "score": 0, "creation_date": 1498651666, "post_id": 44797283, "comment_id": 76583782, "body": "Using this method, I will need to signal each thread individually, correct? I can&#39;t just signal them all simultaneously?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1498655679, "post_id": 44797283, "comment_id": 76587012, "body": "@ChatTor: Yes, you cannot. At least not using signals."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1846065"}, "edited": false, "score": 0, "creation_date": 1498693045, "post_id": 44797283, "comment_id": 76608820, "body": "Is there a way I can do so without using signals?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1498720676, "post_id": 44797283, "comment_id": 76617301, "body": "@ChatTor: The only possibility I see you already mentioned in your question, that is to have a dedicated thread catching the relevant signal(s) and make this thread call <code>pthread_kill()</code> on each of the process&#39; other threads. If you exclude the main thread from being signalled it would not get interrupted."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1846065"}, "edited": false, "score": 0, "creation_date": 1498735456, "post_id": 44797283, "comment_id": 76627256, "body": "Alright. Cool. Like I said in the question, I&#39;d like to avoid that, but it seems like it&#39;s the only real possibility at this point. Thanks for taking the time to answer my questions"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1498638292, "creation_date": 1498638292, "answer_id": 44797283, "question_id": 44795651, "link": "https://stackoverflow.com/questions/44795651/sigio-only-notifies-last-thread-in-threadpool/44797283#44797283", "title": "SIGIO only notifies last thread in threadpool", "body": "<p>Signal disposition is on process level.</p>\n\n<p>This means only one thread of a process will receive a signal being sent to the process.</p>\n\n<p>In other words: From outside the process <em>only one</em> of the process' threads can be signalled. </p>\n\n<p>To signal <em>all</em> threads within a process <code>pthread_kill()</code> can be used by each of the process' <em>own</em> threads. To do so the process needs to keep track of all its existing (created and still alive) threads.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1846065"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 44797283, "answer_count": 1, "score": 0, "last_activity_date": 1498638292, "creation_date": 1498633271, "last_edit_date": 1592644375, "question_id": 44795651, "link": "https://stackoverflow.com/questions/44795651/sigio-only-notifies-last-thread-in-threadpool", "title": "SIGIO only notifies last thread in threadpool", "body": "<p>I would like to write a program that, upon <code>SIGIO</code>, signals all of the threads in my threadpool. I have written the following code, but it appears that a socket can only be owned by a single thread at a time, and thus will only notify the last thread in my thread pool of an event. Is there some way I can get my desired behaviour without using a dedicated signal-capturing thread and without having the main process be interrupted?</p>\n<pre><code>void sigFunc(int signo){\n    printf(&quot;SIGNAL %li!\\n&quot;, gettid());\n    return;\n}\n\nstatic void* poolFunc(){\n    printf(&quot;Pool func... %li\\n&quot;, gettid());\n\n    fcntl(lsocket, F_SETOWN, gettid());\n\n    for(;;)\n        sleep(1);\n\n    return NULL;\n}\n\nint main(int argc, char *argv[]){\n    unsigned char val;\n    int lsocket;\n    pthread_t pool[4];\n\n    lsocket = socket(AF_INET, SOCK_STREAM, 0);\n\n    // Omitted 15 lines of setting up lsocket, this part is boring\n\n    fcntl(lsocket, F_SETFL, fcntl(lsocket, F_GETFL) | O_ASYNC);\n\n    signal(SIGIO, sigFunc);\n\n    for(val=0; val &lt; 4; val++){\n        if(pthread_create(&amp;pool[val], NULL, poolFunc, NULL) != 0){\n            printf(&quot;Creation of thread pool failed!\\n&quot;);\n            exit(1);\n        }\n\n        if(pthread_detach(pool[val]) != 0){\n            printf(&quot;Failed to detach thread in pool...?\\n&quot;);\n            exit(1);\n        }\n    }\n\n    printf(&quot;Starting main loop...\\n&quot;);\n\n    for(;;)\n        sleep(1);\n}\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>$ ./program<br />\nPool func... 17580<br />\nPool func... 17582<br />\nPool func... 17581<br />\nPool func... 17583<br />\nPool func... 17584<br />\nStarting main loop...<br />\nSIGNAL 17584!<br />\nSIGNAL 17584!<br />\nSIGNAL 17584!<br />\nSIGNAL 17584!<br />\nSIGNAL 17584!<br />\n^C</p>\n<p>$ ./program<br />\nPool func... 17621<br />\nPool func... 17620<br />\nPool func... 17623<br />\nPool func... 17624<br />\nPool func... 17622<br />\nStarting main loop...<br />\nSIGNAL 17622!<br />\nSIGNAL 17622!<br />\nSIGNAL 17622!<br />\nSIGNAL 17622!<br />\nSIGNAL 17622!<br />\n^C</p>\n</blockquote>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1498633493, "post_id": 44795474, "comment_id": 76571814, "body": "In second case, I guess, you can loose the sign of the result."}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1498633810, "post_id": 44795474, "comment_id": 76571999, "body": "@LPs how so? You mean if int is signed and char is unsigned? But AFAIK in my GCC, char is signed and so is int. Or do you mean something else"}, {"owner": {"reputation": 22187, "user_id": 193892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6178b59305359920a922edd061a55e7a?s=128&d=identicon&r=PG", "display_name": "Prof. Falken", "link": "https://stackoverflow.com/users/193892/prof-falken"}, "edited": false, "score": 1, "creation_date": 1498633914, "post_id": 44795474, "comment_id": 76572049, "body": "I have a feeling the warnings are not <i>wrong</i>, but that GCC does not analyze the situation fully. @LP the sign should always be positive in this case right? But GCC does not &quot;know&quot; this or any other &quot;backtracking&quot; info at the time it warns, by then it only knows it is an <code>int</code> converted to a <code>char</code>, and an <code>int</code> can hold larger values than a <code>char</code>. So GCC warns."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 22187, "user_id": 193892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6178b59305359920a922edd061a55e7a?s=128&d=identicon&r=PG", "display_name": "Prof. Falken", "link": "https://stackoverflow.com/users/193892/prof-falken"}, "edited": false, "score": 2, "creation_date": 1498634579, "post_id": 44795474, "comment_id": 76572480, "body": "@Prof. Falken: No, the sign is not always positive. C implements Fortran division, not Euclidean division. Operator <code>&#47;</code> rounds towards zero, and <code>%</code> is forced to follow the suit. E.g. <code>-5 % 2 = -1</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1498634586, "post_id": 44795474, "comment_id": 76572484, "body": "@Prof.FalkenYes,  is what I meant, <a href=\"https://stackoverflow.com/questions/tagged/gcc\">gcc</a> &quot;thinks&quot; you can loose sign or values due to range change. BTW the sign can be negative, because of <code>%</code> is <code>reminder operator</code> in <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> not <code>modulus</code>, so the sign is the same of the dividend."}, {"owner": {"reputation": 22187, "user_id": 193892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6178b59305359920a922edd061a55e7a?s=128&d=identicon&r=PG", "display_name": "Prof. Falken", "link": "https://stackoverflow.com/users/193892/prof-falken"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1498636297, "post_id": 44795474, "comment_id": 76573521, "body": "@LPs, @AnT, oh, today I learned about <code>%</code>. Haha, after so many years. :) Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "edited": false, "score": 0, "creation_date": 1498646651, "post_id": 44797752, "comment_id": 76580352, "body": "Thanks! I agree on all points, which leaves the question unanswered: why does GCC get confused in one case but not the other case."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "edited": false, "score": 1, "creation_date": 1498647599, "post_id": 44797752, "comment_id": 76581030, "body": "@sinelaw as you can see the analysis for <code>char</code> is more complicated that for <code>unsigned char</code> in this case. I can only speculate that the algorithm either does not deal with this situation or it does not go deep enough on the analysis."}], "tags": [], "owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 4, "last_activity_date": 1498641511, "last_edit_date": 1498641511, "creation_date": 1498639620, "answer_id": 44797752, "question_id": 44795474, "link": "https://stackoverflow.com/questions/44795474/why-does-gccs-wconversion-behave-differently-for-char-vs-unsigned-char/44797752#44797752", "title": "Why does GCC&#39;s -Wconversion behave differently for char vs. unsigned char?", "body": "<p>TLDR</p>\n\n<p>using information only about the types involved, <code>gcc</code> should warn for both cases because of conversion from <code>int</code> (larger type) to <code>char</code>/<code>unsigned char</code> (smaller types)</p>\n\n<p>Using also information about the possible values (range analysis) <code>gcc</code> should warn for none because the result of <code>x % y</code>, even after promotions to int, will always fit back to the same type as <code>x</code> and <code>y</code>.</p>\n\n<p>So it seems that in the first case <code>gcc</code> can assert that the operations will never result in a value change, but for some reason cannot do that for the second case.</p>\n\n<p>As a side note, clang does not warn for any.</p>\n\n<hr>\n\n<h2>Type system</h2>\n\n<ul>\n<li><p>On the tested system (x86-64) the <code>char</code> type is signed. Please be aware that it still a different type than <code>signed char</code>.</p></li>\n<li><p><code>x % y</code> Due to integer promotion rules, in both cases, <code>x</code> and <code>y</code> are promoted to <code>int</code>. The result <code>x % y</code> is of type <code>int</code>.</p></li>\n<li><p>If we make all the implicit conversions explicit then we get this:</p>\n\n<pre><code>unsigned char foo1(unsigned char x, unsigned char y)\n{\n   return (unsigned char)((int) x % (int) y);\n}\n\nchar foo2(char x, char y)\n{\n   return (char)((int) x % (int) y);\n}\n</code></pre></li>\n<li><p>Implicit conversion from <code>int</code> to <code>char</code>, <code>unsigned char</code> and to <code>signed char</code> fires the warning with <code>-Wconversion</code>:</p>\n\n<blockquote>\n  <p>-Wconversion</p>\n  \n  <p>Warn for implicit conversions that may alter a value. This includes\n  [..] and conversions to smaller types</p>\n</blockquote>\n\n<p>Indeed both these functions result in a warning getting generated:</p>\n\n<pre><code>char bar1(int a)\n{\n   return a; // warning: conversion from 'int' to 'char' may change value [-Wconversion]\n}\n\nunsigned char bar2(int a)\n{\n   return a;  // warning: conversion from 'int' to 'unsigned char' may change value [-Wconversion]\n}\n</code></pre></li>\n</ul>\n\n<p>So using type information only we should get a warning for both because our 2 functions have an implicit conversion from <code>int</code> to <code>char</code>/<code>unsigned char</code> just like <code>bar1</code> and <code>bar2</code>.</p>\n\n<h2>Value analysis</h2>\n\n<p>If we use the notation <code>r = x % y</code> then <code>r</code> has the same sign as <code>x</code> and <code>|r| \u2208 [0, |y|)</code>.</p>\n\n<ul>\n<li><p>if <code>x</code> and <code>y</code> are of type <code>unsigned char</code> then <code>r \u2208 [0, CHAR_MAX)</code>.</p>\n\n<p><code>r</code> fits in an <code>unsigned char</code>. So no warning needed.</p></li>\n<li><p>if <code>x</code> and <code>y</code> are of type <code>char</code>:</p>\n\n<ul>\n<li><code>CHAR_MIN = -CHAR_MAX - 1</code></li>\n<li><code>max(|y|) = CHAR_MAX + 1</code></li>\n<li><code>|r| \u2208 [0, max(|y|))</code></li>\n<li><code>|r| \u2208 [0, CHAR_MAX + 1)</code></li>\n<li><code>r \u2208 (-CHAR_MAX - 1, CHAR_MAX + 1)</code></li>\n</ul>\n\n<p><code>r</code> fits in a <code>char</code> so no warning needed.</p></li>\n</ul>\n\n<p>So what I am arguing is that <strong>the result of <code>x % y</code> always fits in an <code>U8</code></strong> even after all the integer promotions and implicit conversions.</p>\n\n<hr>\n\n<p>You can have a look at this <a href=\"https://godbolt.org/g/67Eb7q\" rel=\"nofollow noreferrer\">godbolt</a></p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1498640962, "last_edit_date": 1498640962, "creation_date": 1498640599, "answer_id": 44798102, "question_id": 44795474, "link": "https://stackoverflow.com/questions/44795474/why-does-gccs-wconversion-behave-differently-for-char-vs-unsigned-char/44798102#44798102", "title": "Why does GCC&#39;s -Wconversion behave differently for char vs. unsigned char?", "body": "<p>As you say, <code>x % y</code> involves implicit type conversion of both operands to <code>int</code> (the integer promotion rule/the usual arithmetic conversions). The result of the operation is type <code>int</code>.</p>\n\n<p><code>-Wconversion</code> is concerned about implicit changes of signedness in an expression, since those might possibly be unintended. It gives warnings when you convert between signed and unsigned type without an explicit cast. It also apparently warns against potential issues with overflow, when implicitly converting from a larger type (signed or unsigned) to a smaller one.</p>\n\n<p>(The <code>char</code> type has implementation-defined signedness, it may be either unsigned or signed. GCC likes to make it signed in all implementations I've seen. )</p>\n\n<p>An implicit conversion from <code>int</code> to <code>char</code> may lead to overflow of the <code>char</code>.</p>\n\n<p>We can silence the compiler by writing <code>return (char)(x % y);</code>. This only hides away the potential bug though. You have to ensure in your code that the overflow can never happen before adding such an explicit cast.</p>\n"}], "owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1498766169, "creation_date": 1498632677, "last_edit_date": 1498766169, "question_id": 44795474, "link": "https://stackoverflow.com/questions/44795474/why-does-gccs-wconversion-behave-differently-for-char-vs-unsigned-char", "title": "Why does GCC&#39;s -Wconversion behave differently for char vs. unsigned char?", "body": "<p>Consider</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>U8 foo(U8 x, U8 y) {\n    return x % y;\n}\n</code></pre>\n\n<p>GCC's -Wconversion behaves differently if U8, the type of x and y, is char or unsigned char:</p>\n\n<p><code>gcc -Wconversion -c test.c -DU8='unsigned char'</code></p>\n\n<p>(no warning)</p>\n\n<pre><code>gcc -Wconversion -c test.c -DU8=char\ntest.c: In function \u2018foo\u2019:\ntest.c:2:14: warning: conversion to \u2018char\u2019 from \u2018int\u2019 may alter its value [-Wconversion]\n     return x % y;\n            ~~^~~\n</code></pre>\n\n<p>But <a href=\"https://stackoverflow.com/questions/44795026/c11-implicit-conversion-of-chars-x-y\">from what I understand</a> in both cases x, y undergo integer promotion (to int or unsigned int) and so in both cases it will be converting from int to whatever the return type is (char or unsigned char).</p>\n\n<p>Why is there a difference?</p>\n\n<p>Bonus question: if you enable ubsan (-fsanitize=undefined) then GCC emits -Wconversion in both cases.</p>\n\n<p><strong>EDIT</strong>: </p>\n\n<p>There is no argument that x, y undergo integer promotion and then need to be converted to the result type, so no need to explain that. </p>\n\n<p>The only question here is <em>why does GCC behave differently</em> for different types. The answer will involve some insight on GCC's internals.</p>\n"}, {"tags": ["c", "ubuntu", "gtk", "glade"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8224261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815e8cfd05c6f5cef184ac60015e86d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kahaan Desai", "link": "https://stackoverflow.com/users/8224261/kahaan-desai"}, "edited": false, "score": 0, "creation_date": 1498804682, "post_id": 44820810, "comment_id": 76660374, "body": "text-on number in the sense if i press the button for 2 twice i should get A, if i press it thrice i should get 3 and so on"}], "tags": [], "owner": {"reputation": 800, "user_id": 8208981, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9eeb707bfd44f3aac336e6da2a2954b7?s=128&d=identicon&r=PG&f=1", "display_name": "vonaka", "link": "https://stackoverflow.com/users/8208981/vonaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1498818127, "last_edit_date": 1498818127, "creation_date": 1498727335, "answer_id": 44820810, "question_id": 44795397, "link": "https://stackoverflow.com/questions/44795397/how-to-add-timer-in-button-signals-on-gtk/44820810#44820810", "title": "How to add timer in button signals on gtk?", "body": "<p>(I wanted to put this as comment, but sadly I don't have <em>50 reputation</em>)</p>\n\n<p>Please can you clarify your question. </p>\n\n<blockquote>\n  <p>I wanted the buttons to print letters in a t9 fashion but I can't figure out how to time it.</p>\n</blockquote>\n\n<p>what does it really mean? also, maybe you can give a link to <strong>labtest.glade</strong> file</p>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>Ok, so you can use <code>struct timespec</code>, you may have something like this for your <em>button2</em>:</p>\n\n<pre><code>const gchar btn2_input[4] = { '2', 'A', 'B', 'C' };\nstruct timespec last_time_clicked;\n\n#define MAX_DELAY 0.5f\n\nvoid on_btn2_clicked() {\n  struct timespec actual_time;\n  float delay;\n  const gchar *o_text;\n  gchar *n_text;\n  GString *s_text;\n  static int i = 0;\n  gssize text_len;\n\n  clock_gettime(CLOCK_MONOTONIC, &amp;actual_time);\n  timespec_subtract(&amp;last_time_clicked, &amp;actual_time, &amp;last_time_clicked);\n  delay = timespec_to_float(&amp;last_time_clicked);\n  last_time_clicked = actual_time;\n\n  o_text = gtk_entry_get_text(GTK_ENTRY(g_entry1));\n  s_text = g_string_new(o_text);\n  text_len = s_text-&gt;len;\n\n  if(delay &gt; MAX_DELAY)\n    i = 0;\n  else {\n    text_len--;\n    i = (i + 1) % 4;\n  }\n\n  s_text = g_string_overwrite_len(s_text, text_len, btn2_input + i, 1);\n\n  n_text = g_string_free (s_text, FALSE);\n  gtk_entry_set_text(GTK_ENTRY(g_entry1), n_text);\n  g_free(n_text);\n}\n</code></pre>\n\n<p>you may like to change <strong>MAX_DELAY</strong>, and there is the code for <code>timespec_subtract</code> and <code>timespec_to_float</code>:</p>\n\n<pre><code>void timespec_normalize(struct timespec *t) {\n  int n;\n  const int sn = 1000000000;\n\n  n = t-&gt;tv_nsec / sn;\n  t-&gt;tv_sec += n;\n  t-&gt;tv_nsec -= n * sn;\n\n  return;\n}\n\nint timespec_subtract(struct timespec *r, struct timespec *x,\n              struct timespec *y) {\n\n  timespec_normalize(x);\n  timespec_normalize(y);\n\n  if(x-&gt;tv_nsec &lt; y-&gt;tv_nsec) {\n    x-&gt;tv_sec--;\n    x-&gt;tv_nsec += 1000000000;\n  }\n\n  r-&gt;tv_sec = x-&gt;tv_sec - y-&gt;tv_sec;\n  r-&gt;tv_nsec = x-&gt;tv_nsec - y-&gt;tv_nsec;\n\n  return 0;\n}\n\nfloat timespec_to_float(struct timespec *t) {\n  return (float)(t-&gt;tv_sec) + (float)(t-&gt;tv_nsec) / 1000000000.0f;\n}\n</code></pre>\n\n<p>So all you need is to check if actual <strong>delay</strong> is greater than <strong>MAX_DELAY</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 8224261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815e8cfd05c6f5cef184ac60015e86d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kahaan Desai", "link": "https://stackoverflow.com/users/8224261/kahaan-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498818127, "creation_date": 1498632409, "question_id": 44795397, "link": "https://stackoverflow.com/questions/44795397/how-to-add-timer-in-button-signals-on-gtk", "title": "How to add timer in button signals on gtk?", "body": "<p>So I'm designing a virtual numpad with glade. It's working now but I wanted the buttons to print letters in a t9 fashion but I can't figure out how to time it... please help. my code so far is:</p>\n\n<pre><code> #include &lt;gtk/gtk.h&gt;\n       #include &lt;string.h&gt;\n       GtkWidget *g_entry1;\n\n       int main(int argc, char *argv[])\n       {\n           GtkBuilder      *builder; \n           GtkWidget       *window;\n\n           gtk_init(&amp;argc, &amp;argv);\n\n           builder = gtk_builder_new();\n           gtk_builder_add_from_file (builder, \"labtest.glade\", NULL);\n\n           window = GTK_WIDGET(gtk_builder_get_object(builder, \"window1\"));\n           gtk_builder_connect_signals(builder, NULL);\n           g_entry1 = GTK_WIDGET(gtk_builder_get_object(builder,\"entry1\"));\n\n       g_object_unref(builder);\n\n    gtk_widget_show(window);                \n    gtk_main();\n\n    return 0;\n}\n\n\nvoid on_btn1_clicked()\n{\n    gchar *num;\n    char num_arr[20];\n    num = gtk_entry_get_text(GTK_ENTRY(g_entry1));\nstrcpy(num_arr,num);\n    strcat(num_arr,\"1\");\n    gtk_entry_set_text(GTK_ENTRY(g_entry1), num_arr);\n}\n\nvoid on_btn2_clicked()\n{\ngchar *num;\n\n    char num_arr[20];\n    num = gtk_entry_get_text(GTK_ENTRY(g_entry1));\nstrcpy(num_arr,num);\n    strcat(num_arr,\"2\");\n    gtk_entry_set_text(GTK_ENTRY(g_entry1), num_arr);\n}\n\nvoid on_btn3_clicked()\n{\ngchar *num;\n\n    char num_arr[20];\n    num = gtk_entry_get_text(GTK_ENTRY(g_entry1));\nstrcpy(num_arr,num);\n    strcat(num_arr,\"3\");\n    gtk_entry_set_text(GTK_ENTRY(g_entry1), num_arr);\n}\nvoid on_btn4_clicked()\n{\ngchar *num;\n    char num_arr[20];\n    num = gtk_entry_get_text(GTK_ENTRY(g_entry1));\nstrcpy(num_arr,num);\n    strcat(num_arr,\"4\");\n    gtk_entry_set_text(GTK_ENTRY(g_entry1), num_arr);\n}\n</code></pre>\n\n<p>and so on for the rest of the buttons</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1498631106, "post_id": 44795026, "comment_id": 76570562, "body": "<a href=\"http://en.cppreference.com/w/c/language/conversion#Usual_arithmetic_conversions\" rel=\"nofollow noreferrer\">Usual arithmetic conversion</a> is happening. Perhaps you can elaborate on <i>why</i> you&#39;re asking this? What problem do you really have?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498631252, "post_id": 44795026, "comment_id": 76570636, "body": "Alo, to add, <code>....The operands of the % operator shall have integer type.</code>..so, integer promotion rule applies."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1498631254, "post_id": 44795026, "comment_id": 76570639, "body": "<code>sizeof (x % y)</code> should give a hint."}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1498631312, "post_id": 44795026, "comment_id": 76570665, "body": "@Someprogrammerdude, the usual arithmetic conversion says that &quot;If both operands have the same type, then no further conversion is needed.&quot;, so the answer is <i>nothing happens</i>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1498631517, "post_id": 44795026, "comment_id": 76570773, "body": "@sinelaw Check case 4 in the linked reference: &quot;First of all, both operands undergo <i>integer promotions</i>&quot;. The &quot;if the types are same&quot; is <i>after</i> the promotion."}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1498632001, "post_id": 44795026, "comment_id": 76571013, "body": "@Someprogrammerdude, yeah, I missed that part. So the answer is &quot;the operands are converted to int (or unsigned int) in x % y&quot;"}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "edited": false, "score": 0, "creation_date": 1498633105, "post_id": 44795026, "comment_id": 76571602, "body": "As a follow up question about -Wconversion in GCC, see <a href=\"https://stackoverflow.com/questions/44795474/why-does-gccs-wconversion-behave-differently-for-char-vs-unsigned-char\" title=\"why does gccs wconversion behave differently for char vs unsigned char\">stackoverflow.com/questions/44795474/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1498641368, "post_id": 44795026, "comment_id": 76576795, "body": "Basically the code is equivalent to <code>return (char)((int)x % (int)y);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498652095, "post_id": 44795026, "comment_id": 76584166, "body": "@Lundin Good eye - 3 conversions."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498643440, "post_id": 44795140, "comment_id": 76578257, "body": "For someone who is leaving pedantic comments under every answer, you miss that <code>char</code> <i>will</i> always get converted to <code>int</code> or <code>unsigned int</code>. This is guaranteed by C11 6.3.1.1 which states that <code>int</code> has higher integer conversion rank than <code>char</code>. The difference might matter. Consider <code>char a; _Generic(+a, int: do_something());</code>. If <code>char</code> is of the same size as <code>int</code> but not converted to <code>int</code>, then this expression would fail, just as it will fail for <code>long a</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498643708, "post_id": 44795140, "comment_id": 76578442, "body": "The cited part is only regarding optimizations, where the resulting type <code>int</code> that was obtained by implicit promotion isn&#39;t used by the program, and where the implicit promotion in itself does not cause any side-effects such as change of signedness. For example <code>my_unsigned_char &lt;&lt; 31</code> is guaranteed to invoke undefined behavior."}], "tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1498638865, "last_edit_date": 1498638865, "creation_date": 1498631470, "answer_id": 44795140, "question_id": 44795026, "link": "https://stackoverflow.com/questions/44795026/c11-implicit-conversion-of-chars-x-y/44795140#44795140", "title": "C11 implicit conversion of chars, x % y", "body": "<p>Yes, char is usually promoted to int or unsigned int but it is aso possible to compute directly with chars if the interpreter can prove the result will be the same:</p>\n\n<p>Quote from the Standard, <code>5.1.2.3  Program execution</code></p>\n\n<blockquote>\n  <p>11 EXAMPLE 2 In executing the fragment</p>\n</blockquote>\n\n<pre><code>char c1, c2;\n/* ... */\nc1 = c1 + c2;\n</code></pre>\n\n<blockquote>\n  <p>the \u2018\u2018integer promotions\u2019\u2019 require that the abstract machine promote\n  the value of each variable to int size and then add the two ints and\n  truncate the sum.</p>\n  \n  <p><code>Provided the addition of two chars can be done\n  without \u00a75.1.2.3  Environment  15ISO/IEC 9899:201x Committee Draft \u2014\n  April 12, 2011 N1570 over\ufb02ow,  or with over\ufb02ow wrapping silently to\n  produce the correct result, the actual execution need only produce the\n  same result, possibly omitting the promotions</code>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1498632122, "post_id": 44795219, "comment_id": 76571076, "body": "<i>&quot;char is promoted to int&quot;</i> Or <code>unsigned int</code>. Size and signedness of <code>char</code> matters."}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "edited": false, "score": 1, "creation_date": 1498632129, "post_id": 44795219, "comment_id": 76571081, "body": "Right. Specifically 6.5.5 says &quot;The usual arithmetic conversions are performed on the operands.&quot;, and 6.3.1.8 on <i>that</i> says &quot;the integer promotions are performed on both operands...&quot;, which means they are expanded to int in this case."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "edited": false, "score": 0, "creation_date": 1498632733, "post_id": 44795219, "comment_id": 76571422, "body": "@sinelaw; Yes. Promotions will be performed on both operands."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498644994, "post_id": 44795219, "comment_id": 76579310, "body": "<code>char is promoted to int Or unsigned int</code> -- indeed, this is very subtle."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1498632792, "last_edit_date": 1498632792, "creation_date": 1498631767, "answer_id": 44795219, "question_id": 44795026, "link": "https://stackoverflow.com/questions/44795026/c11-implicit-conversion-of-chars-x-y/44795219#44795219", "title": "C11 implicit conversion of chars, x % y", "body": "<p>The requirement for the operands of <code>%</code> operator is<br>\nn1570-\u00a76.5.5(p2):</p>\n\n<blockquote>\n  <p>The operands of the <code>%</code> operator shall have integer type  </p>\n</blockquote>\n\n<p>In this case usual arithmetic conversion will take place on both operands as <code>char</code> is promoted to <code>unsigned int</code>.  </p>\n"}, {"comments": [{"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498632405, "post_id": 44795315, "comment_id": 76571238, "body": "<code>sizeof(char) = 1</code> in any implementation."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 4, "creation_date": 1498632443, "post_id": 44795315, "comment_id": 76571259, "body": "@alinsoar: Yes, that&#39;s true. And what point are you trying to make? What I said above would imply that it is possible to have <code>sizeof(char) == sizeof(int) == 1</code>. There&#39;s nothing wrong with it."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498632530, "post_id": 44795315, "comment_id": 76571316, "body": "@alinsoar: I don&#39;t immediately see the relevance or importance of that fact in this context."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498632588, "post_id": 44795315, "comment_id": 76571348, "body": "forget it, it&#39;s ok."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498632715, "post_id": 44795315, "comment_id": 76571414, "body": "did you see any machine where sizeof(int) = 1 ?  How can you figure any such machine ?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 1, "creation_date": 1498632887, "post_id": 44795315, "comment_id": 76571500, "body": "@alinsoar: C implementations for embedded platforms on TI (Texas Instruments) CPUs typically have that property. It is fairly exotic at first sight, but that&#39;s something C language was designed for from day one. I don&#39;t see any problems &quot;figuring&quot; it. Why?"}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "edited": false, "score": 1, "creation_date": 1498633057, "post_id": 44795315, "comment_id": 76571581, "body": "This is the most correct answer so far... can you quote the sections in the standard? In draft N1570, they are 6.5.5 (%), 6.3.1.8 (usual arithmetic conversion) and 6.3.1.1 (integer promotion)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498633340, "post_id": 44795315, "comment_id": 76571738, "body": "@alinsoar: See this one, for example, <a href=\"http://downloads.ti.com/docs/esd/SPRU514/index.html#SPRU514N_HTML/tms320c28x-c-c-language-implementation.html#STDZ0555922\" rel=\"nofollow noreferrer\">downloads.ti.com/docs/esd/SPRU514/index.html#SPRU514N_HTML/&hellip;</a>"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498638766, "post_id": 44795315, "comment_id": 76575064, "body": "suppose you have a machine with the size of char = 16 bits and size of int = 20 bits.  How can you know the sizeof(int) ?"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498638974, "post_id": 44795315, "comment_id": 76575208, "body": "and a little comment -- not all the time it is promoted to int as I answered, if the interpreter can prove the result will be the same, no need to compute it via coercions."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 1, "creation_date": 1498639156, "post_id": 44795315, "comment_id": 76575309, "body": "@alinsoar: In C the idea is to use the minimal addressable memory unit as <code>char</code>. If your machine&#39;s minimal addressable memory unit has 16 bits, that would imply that the next larger type will have at least 32 bits in it. The only way to have a &quot;20 bit <code>int</code>&quot; on such machine would be to reserve two bytes for it (32 bits, <code>sizeof(int) == 2</code>) and then reserve 12 bits as unused padding bits."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1498639292, "post_id": 44795315, "comment_id": 76575406, "body": "I thought the same -- I think this happens actually on some machines, on some such machines <code>the padding</code> space can generate trap representations, so the padding should be taken in consideration by the interpreter, sometimes."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 1, "creation_date": 1498639470, "post_id": 44795315, "comment_id": 76575521, "body": "@alinsoar: Whatever language features exist in C, they all are subject to the well-known &quot;as if&quot; optimization rule. All language features are conceptual. C compilers are not required to implement them literally. C compilers are only supposed to reproduce the required observable behavior. As long as the observable behavior is correct, compilers are allowed to perform this calculation without promotions. This is understood without saying, which is why we don&#39;t normally mention it in each and every answer."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 5, "last_activity_date": 1498633853, "last_edit_date": 1498633853, "creation_date": 1498632138, "answer_id": 44795315, "question_id": 44795026, "link": "https://stackoverflow.com/questions/44795026/c11-implicit-conversion-of-chars-x-y/44795315#44795315", "title": "C11 implicit conversion of chars, x % y", "body": "<p>Usual arithmetic conversions apply to operands of <code>%</code> the same way they apply to operands of other multiplicative and additive operators (see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.5p3\" rel=\"nofollow noreferrer\"><em>6.5.5 Multiplicative operators</em></a>). </p>\n\n<p>The operands are promoted either to <code>int</code> or to <code>unsigned int</code>, depending on the range of <code>char</code> type on your platform (see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.8\" rel=\"nofollow noreferrer\"><em>6.3.1.8 Usual arithmetic conversions</em></a> and <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.1p2\" rel=\"nofollow noreferrer\"><em>6.3.1.1 Boolean, characters, and integers</em></a>)</p>\n\n<p>On most real-life platforms, the operands will be promoted to <code>int</code>, since range of <code>int</code> typically covers the full range of <code>char</code>. On a more-or-less exotic platform where <code>sizeof(char) == sizeof(int)</code> and <code>char</code> is an unsigned type (implying that range of <code>char</code> does not fit into range of <code>int</code>), they will be promoted to <code>unsigned int</code>.</p>\n"}], "owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 44795315, "answer_count": 3, "score": 3, "last_activity_date": 1498638865, "creation_date": 1498631022, "question_id": 44795026, "link": "https://stackoverflow.com/questions/44795026/c11-implicit-conversion-of-chars-x-y", "title": "C11 implicit conversion of chars, x % y", "body": "<p>In C11,</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char foo(char x, char y) {\n    return x % y;\n}\n</code></pre>\n\n<p>Is any implicit conversion (e.g. promotion to int) done anywhere?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1498629375, "post_id": 44794584, "comment_id": 76569708, "body": "putchar(52) outputs 4; 52-4 = 48; putchar(48) outputs 0; 48+4 = 52; putchar(52) outpus 4 again."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 8, "creation_date": 1498629402, "post_id": 44794584, "comment_id": 76569724, "body": "<a href=\"https://meta.stackoverflow.com/questions/252184/whats-the-joke-in-the-stack-overflow-404-page-code\" title=\"whats the joke in the stack overflow 404 page code\">meta.stackoverflow.com/questions/252184/&hellip;</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498630451, "post_id": 44794584, "comment_id": 76570228, "body": "Just asking: Dear Migration to MSO voters: can you please add a little justification? I think I&#39;m missing something here on why is should be migrated?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498631080, "post_id": 44794584, "comment_id": 76570542, "body": "@SouravGhosh; It should be migrated because it has been asked on meta stackoverflow and there are some good answer already there."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498631107, "post_id": 44794584, "comment_id": 76570564, "body": "It doesn&#39;t. The code won&#39;t compile for multiple reasons. I doubt the code is even C."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1498631158, "post_id": 44794584, "comment_id": 76570591, "body": "@haccks Thanks, but just one thought, does that migration not allow for more questions on SO for this in future?"}, {"owner": {"reputation": 1756, "user_id": 8219037, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/n5hMR.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/8219037/beginner"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498631179, "post_id": 44794584, "comment_id": 76570608, "body": "@Lundin - I was able to compile the code with few warnings using gcc and execute it successfully."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1498631289, "post_id": 44794584, "comment_id": 76570656, "body": "@Beginner No, it is impossible to compile this on a standard-compliant C compiler without rewriting most of it."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1498631806, "post_id": 44794584, "comment_id": 76570933, "body": "@SouravGhosh; Does SO meant for such questions? And if you think you can answer better than the answers provided on meta then you are welcome."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498637572, "post_id": 44794584, "comment_id": 76574327, "body": "@Beginner Compile it as C language instead of GNU language: <code>gcc -std=c11 -pedantic-errors</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1498637641, "post_id": 44794584, "comment_id": 76574378, "body": "I made a much more intricate example which does compile cleanly on a standard compliant compiler. Added to my answer below :)"}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1498630300, "post_id": 44794827, "comment_id": 76570151, "body": "Should vote for transfer onto meta then. Where it can be closed as a dup."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1498630342, "post_id": 44794827, "comment_id": 76570171, "body": "@StoryTeller But it <b>is</b> a valid question in SO. it&#39;s about the code understanding, not about the working of SO....right? I understand the context is overlapping, but it&#39;s not OT here, either...What do you think?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498630380, "post_id": 44794827, "comment_id": 76570194, "body": "I agree this is a valid topic in SO ^^. Maybe make a wiki answer. In fact this is the meta question that is off topic."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1498630564, "post_id": 44794827, "comment_id": 76570283, "body": "I think that we should not be answering questions over and over again. This overlaps with meta, and meta has a perfect answer for it."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1498633582, "post_id": 44794827, "comment_id": 76571860, "body": "If the code were ever likely to be encountered in &quot;The Real World\u2122&quot; then it should stay here. Given the code&#39;s SO specificity, Meta is probably the place for it."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1498630683, "last_edit_date": 1498630683, "creation_date": 1498630177, "answer_id": 44794827, "question_id": 44794584, "link": "https://stackoverflow.com/questions/44794584/how-does-this-code-print-404/44794827#44794827", "title": "How does this code print 404?", "body": "<p><sup><em>Cannot use a meta-question as dupe, so blatantly copying from <a href=\"https://meta.stackoverflow.com/a/252187/2173917\">the MSO answer</a>.</em></sup></p>\n\n<p>Since this is tagged <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> and mentioned \"compiled\", so just extracting the C part of it.</p>\n\n<p><strong>Credits: <a href=\"https://meta.stackoverflow.com/users/126042/mark-rushakoff\">Mark Rushakoff</a> is the <a href=\"https://meta.stackexchange.com/a/27846\">original author of the polyglot</a>.</strong></p>\n\n<blockquote>\n  <p>The C code is fairly easy to read, but even easier if you run it\n  through a preprocessor:</p>\n\n<pre><code>main(){putchar(4+putchar(putchar(52)-4));return 0;};exit();\n</code></pre>\n  \n  <p>Your standard <code>main</code> function is declared there, and <code>exit</code> is also\n  declared as a function with an implicit return type of <code>int</code> (<code>exit</code>\n  is effectively ignored).</p>\n  \n  <p><code>putchar</code> was used because you don't need any <code>#include</code> to use it;\n  you give it an integer argument and it puts the corresponding ASCII\n  character to stdout and returns the same value you gave it.  So, we\n  put 52 (which is <code>4</code>); then we subtract 4 and output <code>0</code>; then we add\n  4 to output <code>4</code> again.</p>\n</blockquote>\n\n<p>Also, a little more elboration, from [Cole Johnson's]\n(<a href=\"https://meta.stackoverflow.com/users/1350209/cole-johnson\">https://meta.stackoverflow.com/users/1350209/cole-johnson</a>) <a href=\"https://meta.stackoverflow.com/a/252191/2173917\">answer</a></p>\n\n<blockquote>\n  <p>Disregarding all of that, when we reformat the code a bit, and replace\n  <code>52</code> with its ASCII equivalent (<code>'4'</code>), we get:</p>\n\n<pre><code>int main() {\n    putchar(4 + putchar(putchar('4') - 4));\n    return 0;\n}\n</code></pre>\n  \n  <p>As for the <code>putchar</code> declaration, it is defined by the standard to\n  return it's input, like <code>realloc</code>. First, this program prints a <code>4</code>,\n  then takes the ASCII value (<code>52</code>), subtracts 4 (<code>48</code>), prints that\n  (ASCII <code>0</code>), adds 4 (<code>52</code>), prints that (<code>4</code>), then finally\n  terminates. This results in the following output:</p>\n\n<pre><code>404\n</code></pre>\n  \n  <p>As for this polyglot being valid <strong>C++</strong>, unfortunately, it is not as\n  <strong>C++</strong> requires an explicit return type for functions. This program takes advantage of the fact that <strong>C</strong> requires functions without an\n  explicit return type to be <code>int</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 6353, "user_id": 1486562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e47645a7afc7e351b193d12de90a43?s=128&d=identicon&r=PG", "display_name": "flaviodesousa", "link": "https://stackoverflow.com/users/1486562/flaviodesousa"}, "is_accepted": true, "score": 1, "last_activity_date": 1498630420, "creation_date": 1498630420, "answer_id": 44794891, "question_id": 44794584, "link": "https://stackoverflow.com/questions/44794584/how-does-this-code-print-404/44794891#44794891", "title": "How does this code print 404?", "body": "<pre><code># define v putchar\n</code></pre>\n\n<p>this defines <code>v</code> as the <code>putchar()</code> function. It prints a character and returns it.</p>\n\n<pre><code># define print(x)\n</code></pre>\n\n<p>this defines <code>print(x)</code> as nothing (so <code>print(202*2)</code> means nothing)</p>\n\n<pre><code>main(){v(4+v(v(52)-4));return 0;}/*\n</code></pre>\n\n<p>this could be rewritten as:</p>\n\n<pre><code>main()\n{\n  putchar(4 + putchar(putchar(52) - 4));\n  return 0;\n}\n</code></pre>\n\n<p>it is using ASCII codes to print '4' (code 52), '0' (code 52 - 4 = 38) and again '4', so \"404\".</p>\n\n<p>That line ends with a <code>/*</code> starting a comment the continues through the next two lines:</p>\n\n<pre><code>#&gt;+++++++4+[&gt;++++++&lt;-]&gt;\n++++.----.++++.*/\n</code></pre>\n\n<p>The line below turns out empty, but it is a bit tricky because <code>exit()</code> is defined as empty <em>AFTER</em> the line itself. That works because the C preprocessor runs <em>BEFORE</em> the compilation.</p>\n\n<pre><code>print(202*2);exit();\n</code></pre>\n\n<p>The line below defines <code>exit()</code> as empty, used on the line above.</p>\n\n<pre><code>#define/*&gt;.@*/exit()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498638466, "post_id": 44795225, "comment_id": 76574903, "body": "&quot;You can&#39;t write semicolons outside functions.&quot;, What ? you mean instructions ? By the way, proto of <code>main()</code> should be <code>int main(void);</code> in this case so you are not compliant :p."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498639139, "post_id": 44795225, "comment_id": 76575299, "body": "@Stargateur <code>print(202*2);exit();</code> gets interpreted as <code>;exit();</code> which is nonsense. GCC gives the error &quot;ISO C does not allow extra &#39;;&#39; outside of a function&quot;. And no, the form of main() may take any parameters and the standard isn&#39;t really clear. <a href=\"https://stackoverflow.com/a/31263079/584518\">stackoverflow.com/a/31263079/584518</a>"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1525899658, "post_id": 44795225, "comment_id": 87542069, "body": "This is not an obfuscation attempt. It&#39;s a polyglot code."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1525982655, "post_id": 44795225, "comment_id": 87577951, "body": "@bolov No it isn&#39;t, as demonstrated above. A polyglot is code that compiles in multiple languages."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1525983525, "post_id": 44795225, "comment_id": 87578353, "body": "@Lundin <a href=\"https://meta.stackexchange.com/a/27846/254429\">meta.stackexchange.com/a/27846/254429</a> it runs and has the same output in Befunge-93, Brainf*ck, Python, Ruby, Perl, and C. Okey I get your point not standard C, but still..."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1498637047, "last_edit_date": 1498637047, "creation_date": 1498631805, "answer_id": 44795225, "question_id": 44794584, "link": "https://stackoverflow.com/questions/44794584/how-does-this-code-print-404/44795225#44795225", "title": "How does this code print 404?", "body": "<p>The code cannot compile on a standard C compiler, such as <code>gcc -std=c11 -pedantic-errors</code>.</p>\n\n<p>1) main must return int on hosted systems.<br>\n2) putchar() must have <code>#include &lt;stdio.h&gt;</code>.<br>\n3) You can't write semicolons outside functions.</p>\n\n<p>After fixing these beginner-level bugs and removing all superfluous fluff that doesn't do anything but creating compiler errors, we are left with this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define v putchar\nint main(){v(4+v(v(52)-4));return 0;}\n</code></pre>\n\n<p>This revolves around putchar returning the character written:</p>\n\n<pre><code>putchar(4+putchar(putchar(52)-4));\n</code></pre>\n\n<ul>\n<li>52 is ASCII for <code>'4'</code>. Print 4.</li>\n<li>52 - 4 = 48, ASCII for <code>0</code>. Print 0.</li>\n<li>4 + 48 = 52. Again print 4.</li>\n</ul>\n\n<p>And that's it. Very bleak as far as obfuscation attempts go.</p>\n\n<hr>\n\n<p>Proper, standard-compliant obfuscation would rather look something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iso646.h&gt;\n\n??=define not_found_404(a,b,c,d,e,f,g,h,i,j)a%:%:b%:%:c%:%:d%:%:e%:%:f(\\\n(g%:%:h%:%:i%:%:j&lt;::&gt;)&lt;%'$'+d##o%:%:e not \"good\",g??=??=ompl ??-- -0163l,\\\n((void)(0xBAD bito##b not \"bad\"),not \"ugly\")??&gt;,(g%:%:h%:%:i%:%:j??(??)){\\\n((c%:%:d%:%:e)- -not \"lost\")     &lt;:??=a??) -??-??- '&lt;',\\\n((c%:%:d%:%:e)- -not \"found\")    &lt;:??=b??) -??-??- 'B',\\\n((c%:%:d%:%:e)- -not 0xDEADC0DE) &lt;:??=c??) -??-??- '5',\\\n((c%:%:d%:%:e)- -6##6##6 xo##b- -6##6##6)%&gt;)\n\nint main()\n{\n  not_found_404(p,r,i,n,t,f,c,h,a,r);  \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1693, "user_id": 8170390, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GbQ75.jpg?s=128&g=1", "display_name": "Jatin Parmar", "link": "https://stackoverflow.com/users/8170390/jatin-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1498637395, "creation_date": 1498637395, "answer_id": 44796978, "question_id": 44794584, "link": "https://stackoverflow.com/questions/44794584/how-does-this-code-print-404/44796978#44796978", "title": "How does this code print 404?", "body": "<p>you have defined V as putchar() which take ascii code of char to be printed and return ascii value of printed char. execution of your program will start from the main as bellow\nfirst v(52) will print 4 and return 52\nsecond v(52-4) will print 0 (48 is ascii value of 0) and return 48\nfinally it will call to v(48+4) will print 4 as 52 is ascii value of '4'. </p>\n"}], "owner": {"reputation": 1756, "user_id": 8219037, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/n5hMR.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/8219037/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 44794891, "answer_count": 4, "score": 3, "last_activity_date": 1525899306, "creation_date": 1498629172, "last_edit_date": 1498632566, "question_id": 44794584, "link": "https://stackoverflow.com/questions/44794584/how-does-this-code-print-404", "title": "How does this code print 404?", "body": "<p>I copied this below code from Stack Overflow's <strong>404 Not Found Error Page</strong>. </p>\n\n<pre><code># define v putchar\n# define print(x)\nmain(){v(4+v(v(52)-4));return 0;}/*\n#&gt;+++++++4+[&gt;++++++&lt;-]&gt;\n++++.----.++++.*/\nprint(202*2);exit();\n#define/*&gt;.@*/exit()\n</code></pre>\n\n<p>The above code compiles fine and prints <strong>404</strong> on the console. I thought the statement <strong>print(202*2);</strong> is responsible for printing <strong>404</strong>, but I am not right because changing the numbers in this statement also prints <strong>404</strong>.</p>\n\n<p>Could somebody help me to understand this code and how it prints <strong>404</strong>?</p>\n\n<p>Am posting the compilation output for your reference as there are comments saying this code doesn't compile. The file containing above code is <strong>Test.c</strong>.</p>\n\n<blockquote>\n  <p>gcc Test.c -o Test</p>\n  \n  <p>Test.c:3:1: warning: return type defaults to \u2018int\u2019 [-Wimplicit-int] \n  main(){v(4+v(v(52)-4));return 0;}/*  ^ Test.c: In function \u2018main\u2019:\n  Test.c:1:12: warning: implicit declaration of function \u2018putchar\u2019\n  [-Wimplicit-function-declaration]  # define v putchar\n              ^ Test.c:3:8: note: in expansion of macro \u2018v\u2019  main(){v(4+v(v(52)-4));return 0;}/*\n          ^ Test.c: At top level: Test.c:6:14: warning: data definition has no type or storage class  print(202*2);exit();\n                ^ Test.c:6:14: warning: type defaults to \u2018int\u2019 in declaration of \u2018exit\u2019 [-Wimplicit-int] Test.c:6:14: warning:\n  conflicting types for built-in function \u2018exit\u2019</p>\n  \n  <p>./Test</p>\n  \n  <p>404</p>\n</blockquote>\n"}, {"tags": ["c", "linux", "network-programming", "dpdk"], "answers": [{"tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1498651252, "creation_date": 1498651252, "answer_id": 44801819, "question_id": 44794559, "link": "https://stackoverflow.com/questions/44794559/how-to-port-dpdk-based-application-to-netmap/44801819#44801819", "title": "How to port DPDK based application to Netmap?", "body": "<p>The easiest way is to leave your application as is, but instead use a DPDK's paravirtualized driver (i.e. virtio-net or vmxnet3) or one of DPDK's pure software PMDs (i.e. af_packet, tap or pcap).</p>\n\n<p>Here is the link to the DPDK NIC Driver documentation for more information:\n<a href=\"http://dpdk.org/doc/guides/nics/index.html\" rel=\"nofollow noreferrer\">http://dpdk.org/doc/guides/nics/index.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 2006, "user_id": 7665972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e74c1e0458d254f737219a4d8627b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Vipin Varghese", "link": "https://stackoverflow.com/users/7665972/vipin-varghese"}, "is_accepted": false, "score": 0, "last_activity_date": 1607403574, "creation_date": 1607403574, "answer_id": 65193338, "question_id": 44794559, "link": "https://stackoverflow.com/questions/44794559/how-to-port-dpdk-based-application-to-netmap/65193338#65193338", "title": "How to port DPDK based application to Netmap?", "body": "<p>There are 2 parts to your question</p>\n<ol>\n<li>netmap to overcome my restriction of using Intel-based NIC</li>\n<li>DPDK based application I'm using some libraries (like rte_ring, rte_mempool, rte_hash, etc.) provided by DPDK</li>\n</ol>\n<p>[Answer-1] List of NIC supported in most of the kernel under netmap are <code> i40e, e1000, igb, ixgbe, ixgbevf, e1000e, veth, virtio_net, vmxnet3, forcedeth, r816</code>. <a href=\"https://github.com/luigirizzo/netmap/issues/310\" rel=\"nofollow noreferrer\">link to github netmap</a>. Hence officially <a href=\"https://forum.netgate.com/topic/129426/netmap-and-nic-support\" rel=\"nofollow noreferrer\">non intel</a> NIC is mxl5.</p>\n<p>[Answer-2] with regards to port, I highly recommend check <a href=\"https://dpdk.readthedocs.io/en/v16.04/sample_app_ug/netmap_compatibility.html\" rel=\"nofollow noreferrer\">sample netmap in DPDK 16.05</a>. This will give clues how to replace RX-TX burst with netmap while using DPDK libraries. If DPDK libraries are to be fully removed, please try to use <code>uapi</code> supported linked list, hash tables etc.</p>\n"}], "owner": {"reputation": 759, "user_id": 3872516, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OBGUt.jpg?s=128&g=1", "display_name": "Vineet", "link": "https://stackoverflow.com/users/3872516/vineet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1607403574, "creation_date": 1498629099, "question_id": 44794559, "link": "https://stackoverflow.com/questions/44794559/how-to-port-dpdk-based-application-to-netmap", "title": "How to port DPDK based application to Netmap?", "body": "<p>I have a DPDK based network application for linux based systems. I want to port it to netmap to overcome my restriction of using Intel based NICs. In my DPDK based application I'm using some libraries (like rte_ring, rte_mempool, rte_hash, etc.) provided by DPDK. Is there any way I can still use them or do I have to replace them with non DPDK libraries. What will be quickest and best way to port the application to Netmap?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1498629155, "post_id": 44794555, "comment_id": 76569612, "body": "Read <a href=\"http://www.cplusplus.com/reference/cctype/tolower/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cctype/tolower</a> It takes a single int as parameter, not char and not array. You probably want to use a loop on &quot;string&quot;, which processes each in turn."}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1498629198, "post_id": 44794555, "comment_id": 76569628, "body": "<code>tolower()</code> returns an <code>int</code>, and accepts a single <code>char</code>, not an array of <code>char</code>s."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1498629693, "post_id": 44794555, "comment_id": 76569875, "body": "Compile with all warnings enabled and treat the warnings as errors."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498720696, "post_id": 44794555, "comment_id": 76617314, "body": "the posted code is missing the statement: <code>#include &lt;ctype.h&gt; which defines </code>tolower()`   Note: the function: <code>tolower()</code> handles a single char/int at  a time, not a NUL terminated array of chars (AKA a string) and returns a <code>int</code>"}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 5, "last_activity_date": 1498629844, "last_edit_date": 1498629844, "creation_date": 1498629235, "answer_id": 44794599, "question_id": 44794555, "link": "https://stackoverflow.com/questions/44794555/segmentation-fault-core-dumped-error-for-c-program/44794599#44794599", "title": "Segmentation fault (core dumped) error for C program", "body": "<p>Following is the prototype of <code>tolower</code></p>\n\n<pre><code>int tolower(int c);\n</code></pre>\n\n<p>You should pass an <code>int</code> or something like <code>char</code> which can safely convert to <code>int</code>. Passing <code>char *</code> (Type of <code>string</code>) like you do leads to UB.</p>\n\n<p>To convert a string to lowercase, you need to convert each character separately. One way to do this is:</p>\n\n<pre><code>char string[15] = \"Strlwr in C\";\nchar lstr[15];\nint i = 0;\ndo {\n  lstr[i] = tolower(string[i]);\n} while(lstr[i] != '\\0');\nprintf(\"%s\", lstr);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": true, "score": 2, "last_activity_date": 1498629367, "creation_date": 1498629367, "answer_id": 44794629, "question_id": 44794555, "link": "https://stackoverflow.com/questions/44794555/segmentation-fault-core-dumped-error-for-c-program/44794629#44794629", "title": "Segmentation fault (core dumped) error for C program", "body": "<p>You are using <code>tolower</code> incorrectly. This function returns <code>int</code> and gets <code>int</code> as a parameter (here is it's declaration: <code>int tolower(int c);</code>). What you want to do is call it on each <code>char</code> of your <code>char array</code>, and print each one:</p>\n\n<pre><code>    char string[15] = \"Strlwr in C\";\n    for(int i = 0; i &lt; strlen(string); i++)\n        printf(\"%c\",tolower(string[i]));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8001735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8fcf6924c6a19160a64353c14476f8?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik", "link": "https://stackoverflow.com/users/8001735/karthik"}, "edited": false, "score": 0, "creation_date": 1498631547, "post_id": 44794673, "comment_id": 76570789, "body": "Thanks a lot to all for your response. Understood the issue clearly now :-)"}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 1, "last_activity_date": 1498629557, "creation_date": 1498629557, "answer_id": 44794673, "question_id": 44794555, "link": "https://stackoverflow.com/questions/44794555/segmentation-fault-core-dumped-error-for-c-program/44794673#44794673", "title": "Segmentation fault (core dumped) error for C program", "body": "<p>Read cplusplus.com/reference/cctype/tolower It takes a single int as parameter, not char and not array.<br>\nYou probably want to use a loop on \"string\", which processes each in turn.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void)\n{\n    int i;\n    char string[15] = \"Strlwr in C\";\n    for (i=0; i&lt; sizeof(string)/sizeof(char); i++)\n    {\n        string[i]=(char)(tolower((int)string[i]));\n    }\n\n    printf(\"%s\\n\",string);\n    return  0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>strlwr in c\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8001735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8fcf6924c6a19160a64353c14476f8?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik", "link": "https://stackoverflow.com/users/8001735/karthik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 44794629, "answer_count": 3, "score": 0, "last_activity_date": 1498629844, "creation_date": 1498629074, "question_id": 44794555, "link": "https://stackoverflow.com/questions/44794555/segmentation-fault-core-dumped-error-for-c-program", "title": "Segmentation fault (core dumped) error for C program", "body": "<p>I am trying to run below program in an online C compiler. But I get segmentation error. Can you help me fix this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char string[15] = \"Strlwr in C\";\n    printf(\"%s\",tolower(string));\n    return  0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 2, "creation_date": 1498627590, "post_id": 44794249, "comment_id": 76569028, "body": "What&#39;s your question?"}, {"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 0, "creation_date": 1498627671, "post_id": 44794249, "comment_id": 76569061, "body": "Add link to your earlier question. That would be more helpful to understand."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 2, "creation_date": 1498627779, "post_id": 44794249, "comment_id": 76569109, "body": "C is stinky? you should add it to the tag description"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1498627794, "post_id": 44794249, "comment_id": 76569115, "body": "Who is it you are asking? The people who are really good at working with C? You know, those who probably like C. And you invite those people to answer, by saying &quot;C is stinky&quot;. Interesting."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1498627942, "post_id": 44794249, "comment_id": 76569179, "body": "You post a wall of code and say something doesn&#39;t work. <i>What</i> doesn&#39;t work? What&#39;s the output and the expected output? And please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 2, "creation_date": 1498628245, "post_id": 44794249, "comment_id": 76569271, "body": "Add stinky tag to make it more appropriate"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1498629860, "post_id": 44794249, "comment_id": 76569953, "body": "<i>It treats locally declared pointers one way and pointers passed as parameters another</i>: not sure what you mean here, could you be more explicit?"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4748819, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-MEnMMdedCbs/AAAAAAAAAAI/AAAAAAAAeRI/5Z1f5fgyeqQ/photo.jpg?sz=128", "display_name": "Chuck Pergiel", "link": "https://stackoverflow.com/users/4748819/chuck-pergiel"}, "edited": false, "score": 0, "creation_date": 1498663963, "post_id": 44794320, "comment_id": 76593747, "body": "Yes, sorry. I thought the link to the original question would help, but it doesn&#39;t explain this piece of code."}, {"owner": {"reputation": 143, "user_id": 4748819, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-MEnMMdedCbs/AAAAAAAAAAI/AAAAAAAAeRI/5Z1f5fgyeqQ/photo.jpg?sz=128", "display_name": "Chuck Pergiel", "link": "https://stackoverflow.com/users/4748819/chuck-pergiel"}, "edited": false, "score": 0, "creation_date": 1498664858, "post_id": 44794320, "comment_id": 76594393, "body": "This program demonstrates that in some cases you can treat a pointer as a pointer OR as an array, but in some cases you cannot. Run the program and all the results are the same EXCEPT for two instances: the last string example (&#39;main Index into string. &#39;) and the last structure example (&quot;main Index into array of structures.&quot;). These two instances fail to deliver the data. So my question is why do these two examples fail? The only difference I can see is that the code for the two failures is in the main body where the pointers are declared instead of being contained in a function."}, {"owner": {"reputation": 143, "user_id": 4748819, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-MEnMMdedCbs/AAAAAAAAAAI/AAAAAAAAeRI/5Z1f5fgyeqQ/photo.jpg?sz=128", "display_name": "Chuck Pergiel", "link": "https://stackoverflow.com/users/4748819/chuck-pergiel"}, "edited": false, "score": 0, "creation_date": 1498665301, "post_id": 44794320, "comment_id": 76594762, "body": "Disregard my previous comment. I thought this program demonstrated my original problem, but it only fails because I made an error, which smarx pointed out. So back to the drawing board."}], "tags": [], "owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "is_accepted": true, "score": 3, "last_activity_date": 1498627931, "creation_date": 1498627931, "answer_id": 44794320, "question_id": 44794249, "link": "https://stackoverflow.com/questions/44794249/why-does-incrementing-a-pointer-work-but-treating-it-as-an-array-fail-part-2/44794320#44794320", "title": "Why does incrementing a pointer work, but treating it as an array fail? Part 2", "body": "<p>I'm not sure what your question is, but this code probably doesn't do what you want:</p>\n\n<pre><code>printf(\"main Pointer to struct.\" EOL);\nfor (int i=0; i&lt;count; i++)\n{\n    printf(\"index: %d  useless1: %d\" EOL, i, b-&gt;useless1);\n    printf(\"index: %d  useless2: %d\" EOL, i, b-&gt;useless2);\n    b++;\n}\nprintf(EOL);\n\nprintf(\"main Index into array of structures.\" EOL);\nfor (int i=0; i&lt;count; i++)\n{\n    printf(\"index: %d  useless1: %d\" EOL, i, b[i].useless1);\n    printf(\"index: %d  useless2: %d\" EOL, i, b[i].useless2);\n}\nprintf(EOL);\n</code></pre>\n\n<p>The first loop changes the value of <code>b</code>, so the second loop doesn't start where you think it does.</p>\n\n<p>Consider something like this:</p>\n\n<pre><code>type1* bOrig = b; // store the original value\nprintf(\"main Pointer to struct.\" EOL);\nfor (int i=0; i&lt;count; i++)\n{\n    printf(\"index: %d  useless1: %d\" EOL, i, b-&gt;useless1);\n    printf(\"index: %d  useless2: %d\" EOL, i, b-&gt;useless2);\n    b++;\n}\nprintf(EOL);\nb = bOrig; // restore the original value\n\nprintf(\"main Index into array of structures.\" EOL);\nfor (int i=0; i&lt;count; i++)\n{\n    printf(\"index: %d  useless1: %d\" EOL, i, b[i].useless1);\n    printf(\"index: %d  useless2: %d\" EOL, i, b[i].useless2);\n}\nprintf(EOL);\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4748819, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-MEnMMdedCbs/AAAAAAAAAAI/AAAAAAAAeRI/5Z1f5fgyeqQ/photo.jpg?sz=128", "display_name": "Chuck Pergiel", "link": "https://stackoverflow.com/users/4748819/chuck-pergiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1498628757, "accepted_answer_id": 44794320, "answer_count": 1, "score": -9, "last_activity_date": 1498629958, "creation_date": 1498627515, "last_edit_date": 1498629958, "question_id": 44794249, "link": "https://stackoverflow.com/questions/44794249/why-does-incrementing-a-pointer-work-but-treating-it-as-an-array-fail-part-2", "closed_reason": "Needs details or clarity", "title": "Why does incrementing a pointer work, but treating it as an array fail? Part 2", "body": "<p>I think I figured out what the problem is: C is stinky. It treats locally declared pointers one way and pointers passed as parameters another. This is in response to the <a href=\"https://stackoverflow.com/questions/44765173/why-does-incrementing-a-pointer-work-but-treating-it-as-an-array-fail\">question</a> I posted a couple of days ago. I tried to post it there, but the program wouldn't fit.</p>\n\n<pre><code>// Test arrays and pointers\n\n#include &lt;stdio.h&gt;\n//  #include &lt;string.h&gt;\n\n#define EOL \"\\n\"\n\ntypedef struct\n{\n    int useless1;\n    int useless2;\n}   type1;\n\nvoid function1(char* s)\n{\n    printf(\"Pointer to string.  \");\n    while (*s)\n        putchar(*s++);\n\n    printf(EOL);\n}\n\nvoid function2(char* s)\n{\n    int i=0;\n    printf(\"Index into string.  \");\n    while (s[i])\n        putchar(s[i++]);\n\n    printf(EOL);\n}\n\nvoid functionX1(type1* p, int count)\n{\n    printf(\"Pointer to struct.\" EOL);\n    for (int i=0; i&lt;count; i++)\n    {\n        printf(\"index: %d  useless1: %d\" EOL, i, p-&gt;useless1);\n        printf(\"index: %d  useless2: %d\" EOL, i, p-&gt;useless2);\n        p++;\n    }\n    printf(EOL);\n}\n\nvoid functionX2(type1* p, int count)\n{\n    printf(\"Index into array of structures.\" EOL);\n    for (int i=0; i&lt;count; i++)\n    {\n        printf(\"index: %d  useless1: %d\" EOL, i, p[i].useless1);\n        printf(\"index: %d  useless2: %d\" EOL, i, p[i].useless2);\n    }\n    printf(EOL);\n}\n\nvoid getptr1(char* s, char** ss)\n{\n    *ss = s;\n}\n\nvoid getptr2(type1* ptr, type1** pptr)\n{\n    *pptr = ptr;\n}\n\nint main(int argc, char** argv)\n{\n// Work with strings of characters\n\n    char* s;\n\n    function1( argv[0]);\n    function2( argv[0]);\n    function1(*argv   );\n    function2(*argv   );\n\n    getptr1(argv[0], &amp;s);\n    function1(        s);\n    function2(        s);\n\n    printf(\"main Pointer to string.  \");\n    while (*s)\n        putchar(*s++);\n    printf(EOL);\n\n    int i=0;\n    printf(\"main Index into string.  \");\n    while (s[i])\n        putchar(s[i++]);\n    printf(EOL);\n\n// Work with array of structures\n    #define count   3\n\n    type1   a[count];\n\n    int x1 = 123;\n    int x2 = 789000;\n    int kx = 111;\n\n    for (int i=0; i&lt;count; i++)\n    {\n        a[i].useless1 = x1;\n        a[i].useless2 = x2;\n        x1 +=  kx;\n        x2 += (kx * 1000);\n    }\n\n//    functions1(&amp;a   , count);     Fail\n//    functions2(&amp;a   , count);     Fail\n    functionX1(&amp;a[0], count);\n    functionX2(&amp;a[0], count);\n    functionX1( a   , count);\n    functionX2( a   , count);\n\n    type1*  b;\n\n    getptr2(a, &amp;b);\n    functionX1( b   , count);\n    functionX2( b   , count);\n\n    printf(\"main Pointer to struct.\" EOL);\n    for (int i=0; i&lt;count; i++)\n    {\n        printf(\"index: %d  useless1: %d\" EOL, i, b-&gt;useless1);\n        printf(\"index: %d  useless2: %d\" EOL, i, b-&gt;useless2);\n        b++;\n    }\n    printf(EOL);\n\n    printf(\"main Index into array of structures.\" EOL);\n    for (int i=0; i&lt;count; i++)\n    {\n        printf(\"index: %d  useless1: %d\" EOL, i, b[i].useless1);\n        printf(\"index: %d  useless2: %d\" EOL, i, b[i].useless2);\n    }\n    printf(EOL);\n}\n</code></pre>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1498626042, "post_id": 44793898, "comment_id": 76568449, "body": "<i>&quot;What is wrong with my code?&quot;</i> It uses <code>&lt;cs50.h&gt;</code>... Hi there! I spent less than an hour auditing the code underlying libcs50 and in this time I found at least four bugs. A few of those weren&#39;t fixed; as the devs and I failed to come to agreement with regards to the theoretical abstraction known as &quot;leaks&quot;, for example, only the simpler <i>obvious</i> bugs (i.e. the buffer overflows) were fixed. Nonetheless, I recommend avoiding libcs50, and its corresponding resources in favour of more traditional textbooks, as cs50 seems to rely upon numerous technical issues."}, {"owner": {"reputation": 21, "user_id": 8223832, "user_type": "registered", "profile_image": "https://graph.facebook.com/749483501905622/picture?type=large", "display_name": "Konrad Cheng", "link": "https://stackoverflow.com/users/8223832/konrad-cheng"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1498626366, "post_id": 44793898, "comment_id": 76568579, "body": "I&#39;m taking an online course for cs50 since there aren&#39;t really any other good resources I&#39;ve found (although there probably are many out there). I don&#39;t have courses in person available and this course teaches based on that library. Do you have any advice on how I could learn how to program in C (from ground 0) if not through this course?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 1, "creation_date": 1498626714, "post_id": 44793898, "comment_id": 76568698, "body": "<i>&quot;... there aren&#39;t really any other good resources...&quot;</i> According to who? Are you speaking from the perspective of an expert who can spot misleading information, or from the perspective of a student who can&#39;t?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1498626785, "post_id": 44793898, "comment_id": 76568711, "body": "<i>&quot;Do you have any advice on how I could learn how to program in C (from ground 0) ...?&quot;</i> Yes! From <i>ground 0</i>, which I gather means <i>no prior programming experience what-so-ever</i>, I&#39;ve seen no decent materials to get you straight to C, hence you should learn a <i>procedural programming language</i> which <i>doesn&#39;t have undefined behaviour</i> (e.g. Python or Javascript, C# or Java, etc). This will give you enough of an introduction to read a traditional textbook such as K&amp;R2E. Don&#39;t forget to do the exercises..."}, {"owner": {"reputation": 21, "user_id": 8223832, "user_type": "registered", "profile_image": "https://graph.facebook.com/749483501905622/picture?type=large", "display_name": "Konrad Cheng", "link": "https://stackoverflow.com/users/8223832/konrad-cheng"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1498627287, "post_id": 44793898, "comment_id": 76568888, "body": "Alright thanks, I&#39;ll look into that. I phrased that statement horribly, but I meant to say that I did not come across any that seemed to have the comprehensive introductory curriculum that cs50 did in a structured format with notes and problem sets. Keep in mind, I did not look at every resource out there so an expert would definitely know more than me as I&#39;m practically a complete beginner."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1498627814, "post_id": 44793898, "comment_id": 76569120, "body": "All the more reason you should look to an expert for advice. I <i>don&#39;t</i> consider myself an expert, as I haven&#39;t written a C compiler... but <a href=\"https://github.com/cs50/libcs50/issues/67#issuecomment-301962527\" rel=\"nofollow noreferrer\">at least I can cite my understanding</a>, where-as it appears those mostly in control of maintaining libcs50 (including Malan), <i>can&#39;t</i>! When your lead developers can&#39;t cite the standard for the language you claim to teach, that&#39;s not good news..."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1498630069, "post_id": 44793898, "comment_id": 76570052, "body": "Note that I&#39;ve conducted reviews for other organisations; Pearson VUE (cppinstitute.org) seemed more comprehensive, though similarly invalid a few years back when I reviewed that... I&#39;m waiting on account score reset so I can review it again. Hopefully they&#39;ve fixed some invalidities, then I might have something more comprehensive and less invalid to recommend."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1498630887, "post_id": 44793898, "comment_id": 76570445, "body": "Here on SO, we have pretty poor experience from the C part of CS50. For example people studying CS50 seem to have a much harder time understanding how strings work than those who study through traditional books. That being said, CS50 is not nearly as horrible for learning C as K&amp;R. Probably best to avoid both."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498631574, "post_id": 44793898, "comment_id": 76570806, "body": "It is odd to use an outer loop indexing with <code>i</code> and then to use <code>i</code> in multiple inner loops.  That&#39;s a bug of some sort.  The height 0 problem arises because you use <code>for (i = 0; i &lt; height + 1; i++)</code> in the outer loop, which goes through the set of inner loops once when it should do so zero times.  I suspect you&#39;re outputting too many blanks, but I&#39;ve not looked at the specification of the problem \u2014 no-one here should have to find the PSET on the CS50 web site."}], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 9154437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyXOm.jpg?s=128&g=1", "display_name": "KhanKhuu", "link": "https://stackoverflow.com/users/9154437/khankhuu"}, "is_accepted": false, "score": 0, "last_activity_date": 1514585620, "creation_date": 1514585620, "answer_id": 48028992, "question_id": 44793898, "link": "https://stackoverflow.com/questions/44793898/cs50-mario-more-comfortable-error-messages/48028992#48028992", "title": "CS50 Mario (More Comfortable) Error Messages", "body": "<p>Try including an if statement after the user inputs height. That will at least get you the proper result for a height of 0.</p>\n\n<pre><code>if (height == 0)\n{\n    return 0;\n}\n</code></pre>\n\n<p>Those /messages are key to fixing your code. You've got this.</p>\n"}], "owner": {"reputation": 21, "user_id": 8223832, "user_type": "registered", "profile_image": "https://graph.facebook.com/749483501905622/picture?type=large", "display_name": "Konrad Cheng", "link": "https://stackoverflow.com/users/8223832/konrad-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 788, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514585620, "creation_date": 1498625526, "last_edit_date": 1498630150, "question_id": 44793898, "link": "https://stackoverflow.com/questions/44793898/cs50-mario-more-comfortable-error-messages", "title": "CS50 Mario (More Comfortable) Error Messages", "body": "<p>What is wrong with my code? I'm currently getting these messages (sad faces are the errors):</p>\n\n<pre><code>:) mario.c exists\n:) mario.c compiles\n:) rejects a height of -1\n:( handles a height of 0 correctly\n   \\ expected an exit code of 0, not output of \"  \\n\"\n:( handles a height of 1 correctly\n   \\ expected output, but not \"   \\n#  #\\n\"\n:( handles a height of 2 correctly\n   \\ expected output, but not \"    \\n #  #\\n##  ##\\n\"\n:( handles a height of 23 correctly\n   \\ expected output, but not \"                         \\n            ...\"\n:) rejects a height of 24    \n:) rejects a non-numeric height of \"foo\"\n:) rejects a non-numeric height of \"\"\n</code></pre>\n\n<p>The program seems to work fine other than being exactly the way CS50 is looking for.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n\nint main(void) {\n    int height;\n    int i;\n\n    do {\n        printf(\"Height:\");\n        height = get_int();\n    }while(height &lt; 0 || height &gt; 23);\n\n    int x = height;\n    int y = 0;\n\n    for (i = 0; i &lt; height + 1; i++)\n    {\n        for (i = 0; i &lt; x; i++)\n        {\n            printf(\"%s\", \" \");\n        }\n\n        for (i = 0; i &lt; y; i++)\n        {\n            printf(\"#\");\n        }\n\n        printf(\"%s\", \"  \");\n\n        for (i = 0; i &lt; y; i++)\n        {\n            printf(\"#\");\n        }\n\n        printf(\"\\n\");\n        x = x - 1;\n        y = y + 1;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1498625324, "post_id": 44793820, "comment_id": 76568226, "body": "This is only possible if you have a bug in your code. TCP preserves the order of bytes sent."}, {"owner": {"reputation": 135, "user_id": 4394976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5376fcc363b17e38e5362a05835a8149?s=128&d=identicon&r=PG&f=1", "display_name": "yayaya", "link": "https://stackoverflow.com/users/4394976/yayaya"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498639389, "post_id": 44793820, "comment_id": 76575469, "body": "@EJP not bug, I design the server to send characters back not in order"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498640761, "post_id": 44793820, "comment_id": 76576372, "body": "Really. One question. Why? Why build in a deliberate bug at one end that you don&#39;t know how to solve at the other end?"}, {"owner": {"reputation": 135, "user_id": 4394976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5376fcc363b17e38e5362a05835a8149?s=128&d=identicon&r=PG&f=1", "display_name": "yayaya", "link": "https://stackoverflow.com/users/4394976/yayaya"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1498641204, "post_id": 44793820, "comment_id": 76576678, "body": "@EJP It depends on my system. Client tell server to download &quot;mission A&quot;, and then server tell client &quot; A&#39; &quot; if mission A complete. Now client tell server to download &quot;mission A&quot; and &quot;mission B&quot;, but mission A took lots of time to download more than B. So server tell client &quot; B&#39; &quot; first than &quot;A&#39; &quot;. That&#39;s why I have the problem LOL."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498647663, "post_id": 44793820, "comment_id": 76581071, "body": "So have the client issue each request on a new connection. Then you don&#39;t have a self-created problem."}, {"owner": {"reputation": 135, "user_id": 4394976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5376fcc363b17e38e5362a05835a8149?s=128&d=identicon&r=PG&f=1", "display_name": "yayaya", "link": "https://stackoverflow.com/users/4394976/yayaya"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498702837, "post_id": 44793820, "comment_id": 76611019, "body": "@EJP It&#39;s wasty on fd for me. Maybe keep the received message in buffer still is the better choice. thx"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498703325, "post_id": 44793820, "comment_id": 76611110, "body": "Not if you don&#39;t know how to program it, and when you have programmed it it is still extra code to be maintained. Keep It Simple."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498626391, "post_id": 44794022, "comment_id": 76568589, "body": "Why? How can the data ever get out of sequence?"}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498626649, "post_id": 44794022, "comment_id": 76568675, "body": "I am not saying data is getting out of sequence, it is for the situation when server receives request data A and then B, it decides to reply B and then A, I know TCP has mechanism in place to send data in sequence, ie if request data A has multiple bytes, then will reach in same sequence as they were sent"}, {"owner": {"reputation": 135, "user_id": 4394976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5376fcc363b17e38e5362a05835a8149?s=128&d=identicon&r=PG&f=1", "display_name": "yayaya", "link": "https://stackoverflow.com/users/4394976/yayaya"}, "edited": false, "score": 0, "creation_date": 1498639703, "post_id": 44794022, "comment_id": 76575701, "body": "@Pras TCP will keep the order. But I let server send characters back to client not in order. Maybe I need to check the content validity in client. I just want to know any function or api can handle this. thx"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1498647793, "post_id": 44794022, "comment_id": 76581148, "body": "Yes - a protocol with sequence numbers, as described, or some other protocol that can match up requests with responses.  You have to do this."}], "tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 0, "last_activity_date": 1498626285, "creation_date": 1498626285, "answer_id": 44794022, "question_id": 44793820, "link": "https://stackoverflow.com/questions/44793820/tcp-ip-message-got-by-recv-in-order-without-keep-buffer/44794022#44794022", "title": "TCP/IP: message got by recv() in order without keep buffer", "body": "<p>Ideally you should send and then wait for reply, send next request when you received earlier reply.\nBut apparently your client seems to send without waiting for reply and server replies whichever request its done processing.</p>\n\n<p>In such case you need to device a mechanism in your client and server program based on the data being sent and received.</p>\n\n<p>You can decide your client and server will work on data having(Header+data) format something like:</p>\n\n<pre><code>length(2 bytes) - length of actual data\nsequence numner(2 bytes) - to be incremented for each request\nActual data(length number of bytes)\n</code></pre>\n\n<p>When you send the data keep the request data, after sending over socket, in a pending list of requests waiting for reply from server.\nThe server on receiving request in above format, will update its reply data in the 'Actual data' section , update the length in header, keeping sequence as it is, server will send reply to client.\nClient will match the sequence number from reply with the items in its pending list to get the request whose reply it received from server</p>\n"}], "owner": {"reputation": 135, "user_id": 4394976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5376fcc363b17e38e5362a05835a8149?s=128&d=identicon&r=PG&f=1", "display_name": "yayaya", "link": "https://stackoverflow.com/users/4394976/yayaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1498702762, "creation_date": 1498625053, "last_edit_date": 1498702762, "question_id": 44793820, "link": "https://stackoverflow.com/questions/44793820/tcp-ip-message-got-by-recv-in-order-without-keep-buffer", "title": "TCP/IP: message got by recv() in order without keep buffer", "body": "<p>I have a client-server programm. They communicate with some characters.</p>\n\n<pre><code>ex:\nclient --send A-&gt; server\nthen\nclient &lt;-recv A'-- server\n</code></pre>\n\n<p><strong>But I let server send message back not in order.</strong></p>\n\n<pre><code>ex:\nclient --A--&gt; --B--&gt; --C--&gt; server\nthen\nclient &lt;--A'-- &lt;--C'-- &lt;--B'-- server\nwhat I want:\nclient &lt;--A'-- &lt;--B'-- &lt;--C'-- server\n</code></pre>\n\n<p>so I want to handle the situation <strong>in client programm</strong>.</p>\n\n<p>I only figure out one way is to <strong>keep a buffer</strong> to record data from server, and client will check the B' received and then check the C' received in order.</p>\n\n<p>Is there anyway to do that in client and avoid using buffer?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 1, "creation_date": 1498622022, "post_id": 44793358, "comment_id": 76567185, "body": "Are you entering uppercase characters? Have you tried a debugger?"}, {"owner": {"reputation": 9, "user_id": 7803698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb415bcc1221b365877a1b9d71b0519?s=128&d=identicon&r=PG&f=1", "display_name": "mowgli", "link": "https://stackoverflow.com/users/7803698/mowgli"}, "edited": false, "score": 0, "creation_date": 1498622230, "post_id": 44793358, "comment_id": 76567247, "body": "the output in cmd asks a question &quot;Enter a character:&quot;. so when any character is entered, the next line is printed with &quot;Consonant&quot;. If I remove the default part from code, then there is no output printed after entering a character."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 5, "creation_date": 1498622490, "post_id": 44793358, "comment_id": 76567314, "body": "Surely step 1 is print the value of <code>name</code> so you can see what you&#39;re playing with?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1498622492, "post_id": 44793358, "comment_id": 76567315, "body": "It actually works fine, show what you are entering. You are not including the quotes (e.g. <code>&#39;a&#39;</code>) are you?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1498622549, "post_id": 44793358, "comment_id": 76567329, "body": "Hmm... there is no fall-through from default at the end, is there some other reason I&#39;m missing? (just curious, not critical)"}, {"owner": {"reputation": 9, "user_id": 7803698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb415bcc1221b365877a1b9d71b0519?s=128&d=identicon&r=PG&f=1", "display_name": "mowgli", "link": "https://stackoverflow.com/users/7803698/mowgli"}, "edited": false, "score": 0, "creation_date": 1498622922, "post_id": 44793358, "comment_id": 76567442, "body": "i&#39;m using run&gt;&gt;CMD to run this program. running from visual studio makes it close window after inputting (hard to see the output). So i could be entering 342342324 or or xyz, any input, the next line output is always consonant"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1498624942, "post_id": 44793358, "comment_id": 76568108, "body": "<code>3</code> goes to <code>default</code>. likewise <code>x</code>."}, {"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 0, "creation_date": 1498627845, "post_id": 44793358, "comment_id": 76569142, "body": "where are you really checking the input?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7803698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb415bcc1221b365877a1b9d71b0519?s=128&d=identicon&r=PG&f=1", "display_name": "mowgli", "link": "https://stackoverflow.com/users/7803698/mowgli"}, "edited": false, "score": 0, "creation_date": 1498623379, "post_id": 44793469, "comment_id": 76567580, "body": "thank you Jonathan! that helped, it was the ,1 within the scan_f line. also thanks for the additional suggestion regarding having case a, e, i, o , u followed by printf(&quot;Vowel\\n&quot;). added break too."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1498623622, "post_id": 44793469, "comment_id": 76567646, "body": "<i>it was the ,1 within the scan_f line</i> All the stuff in bold and italics and explanation on good practices conveniently ignored! smh"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 6, "last_activity_date": 1498624141, "last_edit_date": 1592644375, "creation_date": 1498622719, "answer_id": 44793469, "question_id": 44793358, "link": "https://stackoverflow.com/questions/44793358/switch-case-issue/44793469#44793469", "title": "Switch / Case issue", "body": "<p>Note that the Microsoft page for <a href=\"https://msdn.microsoft.com/en-us/library/w40768et.aspx\" rel=\"nofollow noreferrer\"><code>scanf_s()</code></a> says:</p>\n<blockquote>\n<p>In the case of characters, a single character may be read as follows:</p>\n<pre><code>char c;\n\nscanf_s(&quot;%c&quot;, &amp;c, 1);\n</code></pre>\n</blockquote>\n<p>Your <code>scanf_s()</code> call is failing, but you are not checking the result, so you don't know that.</p>\n<p><em><strong>ALWAYS</strong></em> check the result of input functions!</p>\n<p>And make sure you've read the manual page for functions you're using.</p>\n<p>It's probably also a good idea to use <code>&quot; %c&quot;</code> as the format string to skip white space.  However, that's a refinement for later.</p>\n<hr>\n<p>You don't have a <code>break;</code> after the code in the <code>default:</code> case label.  That's not a good idea.</p>\n<p>You can use:</p>\n<pre><code>if (scanf_s(&quot;%c&quot;, &amp;name, 1) == 1)\n{\n    switch (name)\n    {\n    case 'a':\n    case 'e':\n    case 'i':\n    case 'o':\n    case 'u':\n        printf(&quot;Vowel\\n&quot;);\n        break;\n    case 'y':\n        printf(&quot;Sometimes\\n&quot;);\n        break;\n    default:\n        printf(&quot;Consonant\\n&quot;);\n        break;\n    }\n}\nelse\n    fprintf(stderr, &quot;Failed to read a character\\n&quot;);\n</code></pre>\n<p>Note that all upper-case letters, punctuation, white space and control characters are deemed to be consonants.  That's not entirely accurate.</p>\n"}], "owner": {"reputation": 9, "user_id": 7803698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb415bcc1221b365877a1b9d71b0519?s=128&d=identicon&r=PG&f=1", "display_name": "mowgli", "link": "https://stackoverflow.com/users/7803698/mowgli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 44793469, "answer_count": 1, "score": -2, "last_activity_date": 1498624141, "creation_date": 1498621876, "last_edit_date": 1498621963, "question_id": 44793358, "link": "https://stackoverflow.com/questions/44793358/switch-case-issue", "title": "Switch / Case issue", "body": "<p>For C language, I know I'm close, but for for any character inputted, the printout is \"Consonant\". What is wrong with my switch case statement. Will I need <code>if</code> statements? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char name;\n    printf(\"Enter a character: \");\n    scanf_s(\"%c\", &amp;name);\n\n    switch (name)\n    {\n    case 'a':\n        printf(\"Vowel\");\n        break;\n    case 'e':\n        printf(\"Vowel\");\n        break;\n    case 'i':\n        printf(\"Vowel\");\n        break;\n    case 'o':\n        printf(\"Vowel\");\n        break;\n    case'u':\n        printf(\"Vowel\");\n        break;\n    case 'y':\n        printf(\"Sometimes\");\n        break;\n    default:\n        printf(\"Consonant\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2013"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1498618376, "post_id": 44792870, "comment_id": 76566380, "body": "Don&#39;t post images of text. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1498619424, "post_id": 44792870, "comment_id": 76566613, "body": "The most helpful thing you can do is try to narrate to yourself, in words, what you think your code does for a couple of simple test cases.  If it&#39;s easier you can start with the failing test case.  You don&#39;t indicate what the failing case is, but let&#39;s try <code>count(9, 10)</code>.  I think the answer returned should be &quot;0&quot; but your implementation gets &quot;1&quot;.  Walk through the code for when <code>num1</code> is 9 and <code>num2</code> is 10, step by step in your head."}, {"owner": {"reputation": 768, "user_id": 5538979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a7edaada0089537ebfbe27b59c80fc4?s=128&d=identicon&r=PG&f=1", "display_name": "hadi.mansouri", "link": "https://stackoverflow.com/users/5538979/hadi-mansouri"}, "edited": false, "score": 0, "creation_date": 1498619431, "post_id": 44792870, "comment_id": 76566616, "body": "I can not see your images. Anyway as you told you want to count numbers between inserted numbers but you start from 1 in the <code>for</code> loop. Your for loop should be as following: <code>for(k=num1;k&lt;=num2;k++) {if(k%num1==0) temp++;}</code>"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498620864, "post_id": 44792870, "comment_id": 76566906, "body": "Your function will not return -1 if you don&#39;t test for those pesky error cases.  Worse, it may trigger a divide by zero error, or something like that.  And I don&#39;t see a loop that increments a counter from num1 to num2.  And what happens if num1 &gt; num2 ?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498621096, "post_id": 44792870, "comment_id": 76566959, "body": "My point is that you should start by checking for illegal inputs, handle these errors, and then your function will have a better chance of running smoothly, won&#39;t it?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1498621536, "post_id": 44792870, "comment_id": 76567070, "body": "You highlighted the test case that failed. Good, so we know the name of the test case. But don&#39;t you think we also need to know what the input was, what the desired output was, what are you getting?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498622964, "post_id": 44792870, "comment_id": 76567461, "body": "The debugger <i>can</i> show you the values of the local variables, you know."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498669364, "post_id": 44792870, "comment_id": 76597337, "body": "If you&#39;re not obliged to use a loop, then <code>num2 &#47; num1</code> gives you the answer you need.  (Test: (3, 15) = (15 / 3) = 5; (3, 16) = (16 / 3) = 5; (3, 17) = (17/3) = 5; (3, 18) = (18 / 3) = 6 \u2014 looks OK)."}], "answers": [{"tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": true, "score": 1, "last_activity_date": 1498639663, "last_edit_date": 1498639663, "creation_date": 1498622412, "answer_id": 44793419, "question_id": 44792870, "link": "https://stackoverflow.com/questions/44792870/program-to-count-the-numbers-that-are-divisible-by-given-number/44793419#44793419", "title": "program to count the numbers that are divisible by given number", "body": "<p>You're almost there.  Here is the pseudo code of what was asked, compare to your function, add the missing parts, and it should pass the tests with no issues.</p>\n\n<p>function (num1, num2), returns count</p>\n\n<ul>\n<li>check input is within stated range: num1 &lt;= num2 ? num1, num2 >= 0 ?\n\n<ul>\n<li>if not, return -1</li>\n</ul></li>\n<li>we'll use %, check input to avoid divide by zero\n\n<ul>\n<li>if num1 == 0, return -1</li>\n</ul></li>\n<li>reset count</li>\n<li>loop for (i = num1; i &lt;= num2; ++i)</li>\n<li>if i % num1 == 0, (should be safe, if all error cases are already covered)\n\n<ul>\n<li>++count</li>\n</ul></li>\n<li>end loop</li>\n<li>return count.</li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 5367031, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/977d0bf138187c68fa76cb8d29796e42?s=128&d=identicon&r=PG&f=1", "display_name": "Ramya Yadav", "link": "https://stackoverflow.com/users/5367031/ramya-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4938, "favorite_count": 0, "accepted_answer_id": 44793419, "answer_count": 1, "score": -5, "last_activity_date": 1498639663, "creation_date": 1498618340, "question_id": 44792870, "link": "https://stackoverflow.com/questions/44792870/program-to-count-the-numbers-that-are-divisible-by-given-number", "title": "program to count the numbers that are divisible by given number", "body": "<p>OVERVIEW:  Given 2 integers (num1, num2), write a function that returns the count of numbers between the num1..num2 that are divisible by num1.\n        E.g.: count(3, 15) returns 5 (3, 6, 9, 12, 15).\n        Note : You need to consider Inclusive range\nINPUTS:  Two numbers num1, num2.\n        num1, num2 >= 0.</p>\n\n<p>OUTPUT: Return the count of numbers between the num1..num2 that are divisible by num1.</p>\n\n<p>ERROR CASES: Return -1 in error cases.\nThis is my code:</p>\n\n<pre><code>int count(int num1, int num2) {\n     int temp;\n\n    int i, j,k;\n\n    i = num1;\n    j = num2;\n    temp = 0;\n    for (k = 1; k &lt;= j;k++)\n    {\n        if (k%i == 0)\n            temp++;\n\n\n    }\n\n    return temp;\n\n}\n</code></pre>\n\n<p>While running test case in visual studio only one test is passed and another test is not passed for testing.\nThe part I highlighted is the test which is failed.\n(countzero testcase)</p>\n\n<p><a href=\"https://i.stack.imgur.com/GKlQ7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GKlQ7.png\" alt=\"enter image description here\"></a>\nThe following is the error which is thrown when i tried running it in tool.\n<a href=\"https://i.stack.imgur.com/3jqxq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3jqxq.png\" alt=\"enter image description here\"></a>\nPlease help me</p>\n"}, {"tags": ["c", "json", "string", "struct"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1498620720, "post_id": 44792726, "comment_id": 76566878, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26347921/unknown-erroneous-characters-are-being-added-to-strings\">Unknown erroneous characters are being added to strings?</a>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1498628865, "post_id": 44792726, "comment_id": 76569493, "body": "Please always provide text content as text in your question. No need to include screenshots."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7181255, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154697830119785/picture?type=large", "display_name": "Juan Jose Crow Washbrum", "link": "https://stackoverflow.com/users/7181255/juan-jose-crow-washbrum"}, "edited": false, "score": 0, "creation_date": 1498917253, "post_id": 44792754, "comment_id": 76702972, "body": "Thanks! I don&#39;t know how I forgot that, this works perfect on my project"}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 4, "last_activity_date": 1498617435, "creation_date": 1498617435, "answer_id": 44792754, "question_id": 44792726, "link": "https://stackoverflow.com/questions/44792726/unusual-string-concatenation-when-outputting-to-printf-or-to-files-on-c/44792754#44792754", "title": "Unusual string concatenation when outputting to printf or to files on C", "body": "<p><code>fechaCump[10]</code> has space for 10 chars (really 9 + the NUL terminator). \"16/02/1996\" is 10 chars. That means there is no space for your terminating 0 character. You need to make <code>fechaCump</code> (and perhaps some of the other fields) longer so they can for the NUL terminator in.</p>\n"}], "owner": {"reputation": 15, "user_id": 7181255, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154697830119785/picture?type=large", "display_name": "Juan Jose Crow Washbrum", "link": "https://stackoverflow.com/users/7181255/juan-jose-crow-washbrum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44792754, "answer_count": 1, "score": 1, "last_activity_date": 1498617435, "creation_date": 1498617153, "question_id": 44792726, "link": "https://stackoverflow.com/questions/44792726/unusual-string-concatenation-when-outputting-to-printf-or-to-files-on-c", "title": "Unusual string concatenation when outputting to printf or to files on C", "body": "<p>I am working for a project developing an agenda, i am using two structures: Contact and Dates (Contacto and Cita respectively):</p>\n\n<pre><code>struct Contacto{\n char nombre[15];\n char apellido[20];\n char fechaCump[10];\n char direccion[50];\n char telef[10];\n};\n\ntypedef struct Contacto Contacto;\n\nstruct Cita{\n char fecha[10];\n char lugar[50];\n char horaInicio[5];\n char horaFin[5];\n Contacto *user;\n};\ntypedef struct Cita Cita;\n</code></pre>\n\n<p>On the main file,i am working with jsmn library and a load function (copiarArchivo) to load data from a JSON file, parse it, and copy it to structures:</p>\n\n<pre><code>int i;\nint r;\njsmn_parser p;\njsmntok_t t[256];\nchar *js;\nchar *jsCitas;\nContacto *temp;\nCita *ctemp;\nContacto *conCita;\nchar nombreBusqueda[15];\nchar apeBusqueda[20];\n\njs=copiarArchivo(\"contactos.json\");\njsCitas=copiarArchivo(\"citas.json\");    \nsizeContactos=0;\nsizeCitas=0;\n\nif(js!=NULL){\n    jsmn_init(&amp;p);\n    r = jsmn_parse(&amp;p, js, strlen(js), t, sizeof(t)/sizeof(t[0]));\n    if (r &lt; 0) {\n        printf(\"Failed to parse JSON: %d\\n\", r);\n    }\n\n    /* Assume the top-level element is an object */\n    if (r &lt; 1 || t[0].type != JSMN_OBJECT) {\n        printf(\"Object expected\\n\");\n    }\n\n    for (i = 1; i &lt; r; i++){\n        if (jsoneq(js, &amp;t[i], \"name\") == 0) {           \n            temp=malloc(sizeof(Contacto));\n            strncpy(temp-&gt;nombre,js + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"NAME: %s\\n\",temp-&gt;nombre);          \n\n            i+=2;\n            strncpy(temp-&gt;apellido,js + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"APELLIDO: %s\\n\",temp-&gt;apellido);            \n            i+=2;\n            strncpy(temp-&gt;fechaCump,js + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"BIRTH: %s\\n\",temp-&gt;fechaCump);          \n            i+=2;\n            strncpy(temp-&gt;telef,js + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"TELF: %s\\n\",temp-&gt;telef);           \n            i+=2;\n            strncpy(temp-&gt;direccion,js + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"DIR: %s\\n\",temp-&gt;direccion);\n            insertar(&amp;headContacto, temp);\n            sizeContactos++;            \n            i++;\n            printf(\"\\nEnd of parsed info\\n\");   \n        }\n    }\nprint_list(headContacto);\n}\nelse{\n    printf(\"\\nNo se ha podido cargar el archivo de contactos o no hay info guardada\\n\");\n}   \n\nif(jsCitas!=NULL){\n    jsmn_init(&amp;p);\n    r = jsmn_parse(&amp;p, jsCitas, strlen(jsCitas), t, sizeof(t)/sizeof(t[0]));\n    if (r &lt; 0) {\n        printf(\"Failed to parse JSON: %d\\n\", r);\n    }\n\n    /* Assume the top-level element is an object */\n    if (r &lt; 1 || t[0].type != JSMN_OBJECT) {\n        printf(\"Object expected\\n\");\n    }\n\n    for (i = 1; i &lt; r; i++){\n        if (jsoneq(jsCitas, &amp;t[i], \"fecha\") == 0) {\n            char fec[10];           \n            ctemp=malloc(sizeof(Cita));\n            strncpy(ctemp-&gt;fecha,jsCitas + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"FECHA: %s\\n\",ctemp-&gt;fecha);\n            strcpy(fec,ctemp-&gt;fecha);           \n            i+=2;\n            strncpy(ctemp-&gt;lugar,jsCitas + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"LUGAR: %s\\n\",ctemp-&gt;lugar);         \n            i+=2;\n            strncpy(ctemp-&gt;horaInicio,jsCitas + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"INICIO: %s\\n\",ctemp-&gt;horaInicio);           \n            i+=2;\n            strncpy(ctemp-&gt;horaFin,jsCitas + t[i+1].start,t[i+1].end-t[i+1].start);\n            printf(\"FIN: %s\\n\",ctemp-&gt;horaFin);         \n            i+=2;\n            strncpy(nombreBusqueda,jsCitas + t[i+1].start,t[i+1].end-t[i+1].start);\n            i+=2;\n            strncpy(apeBusqueda,jsCitas + t[i+1].start,t[i+1].end-t[i+1].start);\n            if(*nombreBusqueda &amp;&amp; *apeBusqueda){\n                conCita=buscarNodo(&amp;headContacto,nombreBusqueda,apeBusqueda);\n                if(conCita!=NULL){\n                    ctemp-&gt;user=conCita;                    \n                }\n            }\n            push(&amp;headCita, ctemp);\n            sizeCitas++;            \n            i++;\n            printf(\"\\nEnd of parsed info\\n\");   \n        }\n    }\nprint_citas(headCita);\n}\nelse{\n    printf(\"\\nNo se ha podido cargar el archivo de citas o no hay info guardada\\n\");\n}\n</code></pre>\n\n<p>The problem is when i output some structures members like fechaCump (birth date) to printf function or to files with fprintf, it appears concatenated with direccion (address) member, and the same problem is with fecha (date) concatenated with lugar (date address) on Cita struct.\n<a href=\"https://i.stack.imgur.com/dkPWJ.png\" rel=\"nofollow noreferrer\">Here I put a screen capture that shows this problem</a> and <a href=\"https://i.stack.imgur.com/WDJAM.png\" rel=\"nofollow noreferrer\">a capture of the JSON structure of Contacts</a></p>\n\n<p>My question is why does this behavior happen and how could I solve it?\nBelow i left the code to load file:</p>\n\n<pre><code>char *copiarArchivo(const char *name){\n char *buffer = NULL;\n size_t size = 0;\n\n /* Open your_file in read-only mode */\n FILE *fp = fopen(name, \"r\");\n\n if(fp==NULL){\n     return buffer; \n }\n /* Get the buffer size */\n fseek(fp, 0, SEEK_END); /* Go to end of file */\n size = ftell(fp); /* How many bytes did we pass ? */\n\n if(size==0){\n     return buffer; \n }\n /* Set position of stream to the beginning */\n rewind(fp);\n\n /* Allocate the buffer (no need to initialize it with calloc) */\n buffer = malloc((size) * sizeof(*buffer)); /* size + 1 byte for the \\0 */\n\n /* Read the file into the buffer */\n fread(buffer, size, 1, fp);\n return buffer;\n}\n</code></pre>\n"}, {"tags": ["c", "stack-overflow"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1498617479, "post_id": 44792661, "comment_id": 76566178, "body": "<code>alloca</code> is outdated. If you need a variable length array, use VLAs. But take note of their possibly different lifetime. That does not take the responsibility from you toensure enough stack is available, though."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498621271, "post_id": 44792661, "comment_id": 76567006, "body": "<code>alloca()</code> <i>could</i> return <code>NULL</code> in order to prevent a stack overflow.  It is not a standard C library function and there is insufficient call for to include it with your desired functionality.  It is not that it is impossible, it is lack of interest.  Note C does not even require a <i>stack</i>."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498624853, "post_id": 44792661, "comment_id": 76568077, "body": "alloca does have its uses, But it does not check for a possible stack overflow, which can lead to undefined behaviour."}], "owner": {"reputation": 1800, "user_id": 1762306, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4c1ac20b2c1749a9f63b61f2561422a6?s=128&d=identicon&r=PG", "display_name": "korrok", "link": "https://stackoverflow.com/users/1762306/korrok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498617361, "creation_date": 1498616585, "last_edit_date": 1498617361, "question_id": 44792661, "link": "https://stackoverflow.com/questions/44792661/why-couldnt-alloca-just-return-null-in-the-event-of-a-stack-overflow", "title": "Why couldn&#39;t `alloca` just return `NULL` in the event of a stack overflow?", "body": "<p>I'm writing a library in which I've found the non-standard C function <code>alloca</code> to be really useful. Several sources (<a href=\"http://man7.org/linux/man-pages/man3/alloca.3.html\" rel=\"nofollow noreferrer\">linux man pages</a>, <a href=\"https://stackoverflow.com/questions/1018853/why-is-the-use-of-alloca-not-considered-good-practice\">this SO question</a>) caution against using <code>alloca</code>. Unlike <code>malloc</code> and friends, which are supposed to return <code>NULL</code> when you run out of heap memory, using <code>alloca</code> is undefined behavior in the event of a stack overflow. In my case, I have hard limits (enforced by plenty of <code>assert</code> statements) on the sizes of the objects I'm allocating, so I think that this completely sensible caveat isn't an issue.</p>\n\n<p>Nonetheless, I don't see why <code>alloca</code> necessarily has to result in undefined behavior in this circumstance. <strong>Why couldn't <code>alloca</code> check where the stack pointer is and return <code>NULL</code> in the event of a possible stack overflow?</strong> Implementing these checks would of course be platform- and architecture-specific, but I don't see why it should be impossible.</p>\n"}, {"tags": ["c", "matlab"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 1, "creation_date": 1498620160, "post_id": 44792360, "comment_id": 76566754, "body": "<code>predictActivityFromSignalBuffer.c</code> has dependencies on other items.  The linker can&#39;t find those specific items.  Try to get the smallest possible example working first.  Did you call these functions (&quot;<code>mynn</code>, e.g.) without defining them?  Do you have an entry point defined (a <code>main()</code> function)?"}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "edited": false, "score": 1, "creation_date": 1498627955, "post_id": 44792360, "comment_id": 76569183, "body": "you are getting linker error, it occurs during linking time. when you don&#39;t declare function and just try to use them. Show us your code so that we can be more useful. you might need to define a <code>filename.h</code> file. Which will contain the declaration of these function except <code>main()</code>."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 1, "creation_date": 1498654789, "post_id": 44792360, "comment_id": 76586240, "body": "codegen isn&#39;t designed to produce a standalone executable.  If you are trying to &quot;deploy&quot; a MATLAB function onto a different system that doesn&#39;t have MATLAB installed, the MATLAB compiler is what you need."}, {"owner": {"reputation": 4299, "user_id": 156525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b540a59cb2b0902d0410fa84f437379b?s=128&d=identicon&r=PG", "display_name": "Navan", "link": "https://stackoverflow.com/users/156525/navan"}, "edited": false, "score": 2, "creation_date": 1498664938, "post_id": 44792360, "comment_id": 76594465, "body": "A makefile is generated along with C and header files when you generate C code from MATLAB. Try using that to compile your code. That will correctly include all dependencies. If you are moving generated code to different machine make sure you copy all the generated files."}], "answers": [{"tags": [], "owner": {"reputation": 384, "user_id": 8224092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0196acfb3e92c2d01ae14fda0cd7eaa?s=128&d=identicon&r=PG&f=1", "display_name": "Loamsiada", "link": "https://stackoverflow.com/users/8224092/loamsiada"}, "is_accepted": false, "score": 2, "last_activity_date": 1498660189, "creation_date": 1498660189, "answer_id": 44805439, "question_id": 44792360, "link": "https://stackoverflow.com/questions/44792360/matlab-generated-c-code-compilation-error/44805439#44805439", "title": "MATLAB Generated C Code Compilation Error", "body": "<p>Did you really just call</p>\n\n<pre><code>$ gcc predictActivityFromSignalBuffer.c\n</code></pre>\n\n<p>without any other dependencies? Usually there come a lot of other files with a code generation that have to be linked.</p>\n\n<p>I do not know what you have done to produce your .c file. I recommend to use the coder wizard by typing</p>\n\n<pre><code>coder\n</code></pre>\n\n<p>in the Matlab command window. This will guide you through the whole process of code generation and also offers a lot of support and testing possibilities. You can also choose to compile your functions to ready-to-use DLL libraries or executatables. Just have a look at it.</p>\n"}], "owner": {"reputation": 13, "user_id": 8223380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b50ae2efdd44e18d91bb37677f29db?s=128&d=identicon&r=PG&f=1", "display_name": "Kareem Arab", "link": "https://stackoverflow.com/users/8223380/kareem-arab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498660189, "creation_date": 1498613978, "question_id": 44792360, "link": "https://stackoverflow.com/questions/44792360/matlab-generated-c-code-compilation-error", "title": "MATLAB Generated C Code Compilation Error", "body": "<p>I have a MATLAB function that has signal processing and machine learning and I wanted to test it on another OS like linux. So I use codegen to generate C code for that function. When I come to run it (predictActivityFromSignalBuffer) on the command line, this is what I get: </p>\n\n<pre><code>MacBook-Pro-2:predictActivityFromSignalBuffer kareem$ gcc predictActivityFromSignalBuffer.c\nUndefined symbols for architecture x86_64:\n    \"_featuresFromBuffer\", referenced from:\n       _predictActivityFromSignalBuffer in predictActivityFromSignalBuffer-1a1886.o\n    \"_main\", referenced from:\n      implicit entry/start for main executable\n    \"_mynn\", referenced from:\n      _predictActivityFromSignalBuffer in predictActivityFromSignalBuffer-1a1886.o\n    \"_rtIsNaN\", referenced from:\n      _predictActivityFromSignalBuffer in predictActivityFromSignalBuffer-1a1886.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>What is this error telling me exactly? I have no idea how to debug this or where to start/look.</p>\n"}, {"tags": ["c", "glib", "dbus", "gdbus"], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 7896321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xYkmk.png?s=128&g=1", "display_name": "f1u77y", "link": "https://stackoverflow.com/users/7896321/f1u77y"}, "edited": false, "score": 0, "creation_date": 1498646162, "post_id": 44799664, "comment_id": 76580071, "body": "Thanks! But the documentation says &quot;This constructor can only be used to initiate client-side connections&quot; for <code>g_dbus_connection_new_for_address_sync ()</code>. As I could understand, I need to initiate server-side connection."}, {"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "reply_to_user": {"reputation": 116, "user_id": 7896321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xYkmk.png?s=128&g=1", "display_name": "f1u77y", "link": "https://stackoverflow.com/users/7896321/f1u77y"}, "edited": false, "score": 0, "creation_date": 1498736874, "post_id": 44799664, "comment_id": 76628343, "body": "\u2018Client-side\u2019 as opposed to the <code>dbus-daemon</code>, which is the server side in this case. You are creating a <i>service</i> (some D-Bus interfaces at a well-known name), not a <i>server</i> (a message routing bus). So <code>g_dbus_connection_new_for_address_sync()</code> is definitely appropriate for your use case."}], "tags": [], "owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "is_accepted": false, "score": 1, "last_activity_date": 1498644907, "creation_date": 1498644907, "answer_id": 44799664, "question_id": 44792176, "link": "https://stackoverflow.com/questions/44792176/register-more-than-one-mpris-player-with-gdbus/44799664#44799664", "title": "Register more than one MPRIS player with GDBus", "body": "<p>If you have multiple media players in the same process, you would need to open one D-Bus connection to the session bus for <em>each</em> of them, and expose a separate <code>/org/mpris/MediaPlayer2</code> object on each connection. You can\u2019t expose multiple objects at the same path on a single D-Bus connection.</p>\n\n<p>Be aware that if you\u2019re using <a href=\"https://developer.gnome.org/gio/stable/GDBusConnection.html#g-bus-get-sync\" rel=\"nofollow noreferrer\"><code>g_bus_get_sync()</code></a> to get a bus connection, it will return a singleton session bus connection \u2014 i.e. the same connection every time you call it. In order to establish multiple connections to the session bus, you will need to connect using <a href=\"https://developer.gnome.org/gio/stable/gio-D-Bus-Addresses.html#g-dbus-address-get-for-bus-sync\" rel=\"nofollow noreferrer\"><code>g_dbus_address_get_for_bus_sync()</code></a> and <a href=\"https://developer.gnome.org/gio/stable/GDBusConnection.html#g-dbus-connection-new-for-address-sync\" rel=\"nofollow noreferrer\"><code>g_dbus_connection_new_for_address()</code></a>, as stated in the documentation for <code>g_bus_get_sync()</code>:</p>\n\n<blockquote>\n  <p>The returned object is a singleton, that is, shared with other callers\n  of <code>g_bus_get()</code> and <code>g_bus_get_sync()</code> for <code>bus_type</code>. In the event that\n  you need a private message bus connection, use\n  <code>g_dbus_address_get_for_bus_sync()</code> and\n  <code>g_dbus_connection_new_for_address()</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 116, "user_id": 7896321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xYkmk.png?s=128&g=1", "display_name": "f1u77y", "link": "https://stackoverflow.com/users/7896321/f1u77y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498644907, "creation_date": 1498612197, "question_id": 44792176, "link": "https://stackoverflow.com/questions/44792176/register-more-than-one-mpris-player-with-gdbus", "title": "Register more than one MPRIS player with GDBus", "body": "<p>I want to register more than one media player with glib. Minimal (non-)working example is <a href=\"https://bitbucket.org/f1u77y/mpris-many-players\" rel=\"nofollow noreferrer\">here</a>. As I can understand the <a href=\"https://specifications.freedesktop.org/mpris-spec/latest/\" rel=\"nofollow noreferrer\">specification</a>, I should export many objects with the one name <code>/org/mpris/MediaPlayer2</code> and that's strange. </p>\n"}, {"tags": ["c", "debugging", "stack", "trace", "vxworks"], "comments": [{"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1498619160, "post_id": 44792114, "comment_id": 76566556, "body": "You can use backtrace(),if its available in vxworks, Its man page has a working example too"}, {"owner": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "reply_to_user": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1501093772, "post_id": 44792114, "comment_id": 77631660, "body": "@Harry do you have access to the surce code&amp; WindRiver Workbench?"}, {"owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1501162992, "post_id": 44792114, "comment_id": 77666418, "body": "@cerr Yes I have access to source code and Windriver workbench"}, {"owner": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "reply_to_user": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1501196128, "post_id": 44792114, "comment_id": 77685745, "body": "@Harry I might be able to help you but much more details of your application need to be known. Let me know how I can contact you outside of this forum for further discussion..."}, {"owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1501246544, "post_id": 44792114, "comment_id": 77709167, "body": "@cerr my mail-id is harry19892010@outlook.com"}], "answers": [{"comments": [{"owner": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "edited": false, "score": 0, "creation_date": 1498698407, "post_id": 44812059, "comment_id": 76610040, "body": "Unfortunately, I&#39;m on powerPC and diab compiler"}, {"owner": {"reputation": 501, "user_id": 7891784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea14cfcc958596c62c32e023a4b90346?s=128&d=identicon&r=PG&f=1", "display_name": "vxWizard", "link": "https://stackoverflow.com/users/7891784/vxwizard"}, "reply_to_user": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "edited": false, "score": 0, "creation_date": 1498745535, "post_id": 44812059, "comment_id": 76635378, "body": "While much more heavy handed and requiring an iterative process you can write some inlined assembly to move the link registers content into a C variable that you can print. The main downside to this approach besides having the use the poorly document inline assembly syntax diab supports is that you can only find the current function&#39;s caller. To get the next call you have to modify the calling function to get the link registers contents. I&#39;ve used this in ARM and PPC cards, but it&#39;s a technique of last resort."}, {"owner": {"reputation": 81, "user_id": 4641732, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XizCd-zGQ64/AAAAAAAAAAI/AAAAAAAACKI/J9HZOqRqUmY/photo.jpg?sz=128", "display_name": "Vikash Jain", "link": "https://stackoverflow.com/users/4641732/vikash-jain"}, "edited": false, "score": 0, "creation_date": 1501936765, "post_id": 44812059, "comment_id": 78004216, "body": "Are you able to do &quot;tt&quot; on task? tt &lt;taskName&gt; on vxWorks shell. Also try setting the below options for task and see if it helps &quot;taskOptionsSet &lt;taskName&gt;, 2, 0&quot;."}], "tags": [], "owner": {"reputation": 501, "user_id": 7891784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea14cfcc958596c62c32e023a4b90346?s=128&d=identicon&r=PG&f=1", "display_name": "vxWizard", "link": "https://stackoverflow.com/users/7891784/vxwizard"}, "is_accepted": false, "score": 1, "last_activity_date": 1498682008, "creation_date": 1498682008, "answer_id": 44812059, "question_id": 44792114, "link": "https://stackoverflow.com/questions/44792114/how-can-i-retrieve-a-stack-trace-of-the-currently-running-functions-stack/44812059#44812059", "title": "How can I retrieve a stack trace of the currently running function&#39;s stack?", "body": "<p>If your compiler is GCC and the calling conventions of your architecture permit it (x86 being the first that comes to mind), I'd recommend using __builtin_return_address( unsigned int level ). More info can be found here:\n<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 251195, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c71d9caf78402129693f1e7f94ea640?s=128&d=identicon&r=PG", "display_name": "jHops", "link": "https://stackoverflow.com/users/251195/jhops"}, "is_accepted": true, "score": 1, "last_activity_date": 1503698348, "creation_date": 1503698348, "answer_id": 45889902, "question_id": 44792114, "link": "https://stackoverflow.com/questions/44792114/how-can-i-retrieve-a-stack-trace-of-the-currently-running-functions-stack/45889902#45889902", "title": "How can I retrieve a stack trace of the currently running function&#39;s stack?", "body": "<p>You mentioned that taskRegsGet() mentions that it is not advisable to call from a currently running task.  However I have seen someone using taskDelay(1) with the comment 'force context save'.  I cannot take credit for it, nor do I know how reliable it is, or what side-effects it may have, but it might help to get correct information about the current task:</p>\n\n<pre><code>taskDelay (1);     /* Force context save */\ntaskRegsGet (0, &amp;regs);   /* 0 task-id for myself */\ntrcStack (&amp;regs, NULL, 0); /* NULL function pointer for default print fcn, 0 task-id for myself */\n</code></pre>\n"}], "owner": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 0, "accepted_answer_id": 45889902, "answer_count": 2, "score": 5, "last_activity_date": 1503698348, "creation_date": 1498611654, "last_edit_date": 1498740125, "question_id": 44792114, "link": "https://stackoverflow.com/questions/44792114/how-can-i-retrieve-a-stack-trace-of-the-currently-running-functions-stack", "title": "How can I retrieve a stack trace of the currently running function&#39;s stack?", "body": "<p>For troubleshooting reason, I would like to be able to retreive and print the caller stack of the currently running function.\nI have tried the following:</p>\n\n<pre><code>/*******************************************************************************\n * *\n * * xxxTracePrint - stack trace print function\n * *\n * * RETURNS: OK or ERROR\n * */\n\nstatic void xxxTracePrint\n    (\n         INSTR *caller,\n             int func,\n                 int nargs,\n                     int *args\n                         )\n{\n    char buf [250];\n    int ix;\n    int len = 0;\n\n    len += sprintf (&amp;buf [len], \"%#10x: %#10x (\", (int)caller, func);\n    for (ix = 0; ix &lt; nargs; ix++) {\n        if (ix != 0)\n            len += sprintf (&amp;buf [len], \", \");\n        len += sprintf (&amp;buf [len], \"%#x\", args [ix]);\n    }\n\n    len += sprintf (&amp;buf [len], \")\\n\");\n\n    printf (buf);\n}\n\n/*******************************************************************************\n * *\n * * xxxTrace - stack trace\n * *\n * * RETURNS: OK or ERROR\n * */\n\nint xxxTrace(int tcb)\n{\n    REG_SET regs;\n\n    if (tcb == 0)\n        return (ERROR);\n\n    taskRegsGet (tcb, &amp;regs);\n    trcStack (&amp;regs, (FUNCPTR) xxxTracePrint, tcb);\n\n    return (OK);\n}\n\nvoid DbgTest(void)\n{\n    xxxTrace(taskIdSelf());\n}\n</code></pre>\n\n<p>but I get:</p>\n\n<pre><code>JPAX-DP&gt; DbgTest\ntrcStack aborted: error in top frame\nvalue = 0 = 0x0\n</code></pre>\n\n<p>Is this even possible? How can I do this? I saw, for taskRegsGet(), they say:</p>\n\n<blockquote>\n  <p>This routine only works well if the task is known to be in a stable,\n  non-executing state. Self-examination, for instance, is not advisable,\n  as results are unpredictable.</p>\n</blockquote>\n\n<p>But what other method should I apply?</p>\n\n<p>The compiler is <code>diab</code> and cpu arch <code>powerpc</code></p>\n"}, {"tags": ["c", "embedded", "fatfs"], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "edited": false, "score": 0, "creation_date": 1498658857, "post_id": 44794065, "comment_id": 76589690, "body": "Good idea. Thanks!"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1498749293, "post_id": 44794065, "comment_id": 76638402, "body": "It&#39;s actually <code>f_expand</code> rather than <code>f_lseek</code> that returns an area of contiguous, unfragmented space."}, {"owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1498798571, "post_id": 44794065, "comment_id": 76657985, "body": "@tofro Not exactly, f_expand returns a status of whether or not it was able to find a contiguous amount of space of the size that you passed in as a parameter. It also allocates it for you if you pass in that param. You still have to guess and check the size to get the largest contiguous block if you were to only use f_expand."}], "tags": [], "owner": {"reputation": 682, "user_id": 7062289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PzHMLP5eA6E/AAAAAAAAAAI/AAAAAAAAAwU/32-J3Q86O-E/photo.jpg?sz=128", "display_name": "B. Wolf", "link": "https://stackoverflow.com/users/7062289/b-wolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1498626568, "creation_date": 1498626568, "answer_id": 44794065, "question_id": 44791646, "link": "https://stackoverflow.com/questions/44791646/how-to-get-largest-free-contiguous-block-of-memory-in-fatfs/44794065#44794065", "title": "How to get largest free contiguous block of memory in FatFs", "body": "<p>One way would be to create your own extension to the API to count contiguous FAT entries across all the sectors.</p>\n\n<p>Without modifying the API, you could use <code>f_lseek()</code>. Write open a file, use <code>f_lseek()</code> to expand the size of the file until 'disk full'(end of contiguous space). This would need to be repeated with new files until all of the disk was allocated. Pick from this the maximum allocated file, and delete the others.</p>\n"}], "owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 44794065, "answer_count": 1, "score": 1, "last_activity_date": 1498626568, "creation_date": 1498607278, "question_id": 44791646, "link": "https://stackoverflow.com/questions/44791646/how-to-get-largest-free-contiguous-block-of-memory-in-fatfs", "title": "How to get largest free contiguous block of memory in FatFs", "body": "<p>Using the FatFs and their <a href=\"http://elm-chan.org/fsw/ff/00index_e.html\" rel=\"nofollow noreferrer\">API</a>, I am trying to pre-allocate file system space for the remainder of the drive to write files of unknown sizes. At the end of the file write process, any unused space is then truncated (f_truncate). However, I'm having a problem allocating enough space when the file system become fragmented after deletion of some files. To overcome this problem, I would like to allocate only enough space as the largest contiguous block of memory on the file system.</p>\n\n<p>In the FatFS API, there are functions to get the amount of free space left on the device, which is f_getfree. There is also the f_expand function, which takes in a size in bytes and returns whether or not a free contiguous block of memory exists for that given size.</p>\n\n<p>Is there an efficient way to calculate the largest free contiguous block of memory available? I'm trying to avoid any sort of brute force \"guess and check\" method. Thanks </p>\n"}, {"tags": ["c", "image"], "comments": [{"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1498608802, "post_id": 44791146, "comment_id": 76564330, "body": "Does your <code>end-start</code> calculated length match the length of the original PNG file? Did you check the return value?"}, {"owner": {"reputation": 7965, "user_id": 1300737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fab637d034adb2d0c208f99f43b08f56?s=128&d=identicon&r=PG", "display_name": "Wingblade", "link": "https://stackoverflow.com/users/1300737/wingblade"}, "reply_to_user": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1498641125, "post_id": 44791146, "comment_id": 76576631, "body": "@MarkSetchell Turns out that they&#39;re both the same. WTF?"}], "answers": [{"comments": [{"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1498673524, "post_id": 44800206, "comment_id": 76599796, "body": "Well done, and thank you for sharing back with the SO community. If the answer is correct, and works, you should accept it too - and get the points."}], "tags": [], "owner": {"reputation": 7965, "user_id": 1300737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fab637d034adb2d0c208f99f43b08f56?s=128&d=identicon&r=PG", "display_name": "Wingblade", "link": "https://stackoverflow.com/users/1300737/wingblade"}, "is_accepted": true, "score": 2, "last_activity_date": 1498646416, "creation_date": 1498646416, "answer_id": 44800206, "question_id": 44791146, "link": "https://stackoverflow.com/questions/44791146/stbi-load-from-memory-not-reading-image-dimensions-correctly/44800206#44800206", "title": "stbi_load_from_memory not reading image dimensions correctly", "body": "<p>Finally managed to make it work by changing my code as follows:</p>\n\n<pre><code>char* img;\nint w, h, n;\nextern char _binary_font_png_start, _binary_font_png_end;\nimg = (char*)stbi_load_from_memory((unsigned char*)&amp;_binary_font_png_start, &amp;_binary_font_png_end - &amp;_binary_font_png_start, &amp;w, &amp;h, &amp;n, 4);\n</code></pre>\n\n<p>Kinda weird, but it works so I guess it's correct? Haven't been able to find any docs on the \"intended\" way of these symbols being linked into c code, but it seems they represent the char at the end/start of the binary data, rather than a pointer to that char as I'd expected.</p>\n"}], "owner": {"reputation": 7965, "user_id": 1300737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fab637d034adb2d0c208f99f43b08f56?s=128&d=identicon&r=PG", "display_name": "Wingblade", "link": "https://stackoverflow.com/users/1300737/wingblade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2602, "favorite_count": 0, "accepted_answer_id": 44800206, "answer_count": 1, "score": 1, "last_activity_date": 1498646416, "creation_date": 1498603860, "question_id": 44791146, "link": "https://stackoverflow.com/questions/44791146/stbi-load-from-memory-not-reading-image-dimensions-correctly", "title": "stbi_load_from_memory not reading image dimensions correctly", "body": "<p>I'm using <code>ld -r -b binary -o res.o *</code> in order to embed a folder full of several png images into my C program, among them one called <code>font.png</code>.</p>\n\n<p>In my code, I am using this code to load the embedded <code>font.png</code> with stb_image:</p>\n\n<pre><code>char* img;\nint w, h, n;\nextern char* _binary_font_png_start;\nextern char* _binary_font_png_end;\nimg = (char*)stbi_load_from_memory((unsigned char*)_binary_font_png_start, _binary_font_png_end - _binary_font_png_start, &amp;w, &amp;h, &amp;n, 4);\n</code></pre>\n\n<p>The actual image dimensions are 256x128, but stbi gives me a value of 0 for w (width) and 2293200 for h (height). What went wrong?</p>\n"}, {"tags": ["c", "csv", "fgets", "strtok"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1498602558, "post_id": 44790786, "comment_id": 76562680, "body": "You copy each line over the same variable <code>line</code>; you don&#39;t make a copy of the data found by <code>strtok</code>.  That&#39;s how the overwriting occurs.  Allocate space and copy the data, maybe using <code>strdup()</code>.  C doesn&#39;t manage the memory for strings for you; you have to do it for yourself."}, {"owner": {"reputation": 45, "user_id": 8128059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7402df1d6270476635847011145db4ad?s=128&d=identicon&r=PG&f=1", "display_name": "ctatton", "link": "https://stackoverflow.com/users/8128059/ctatton"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1498602860, "post_id": 44790786, "comment_id": 76562770, "body": "@xing, ohh, memory for <code>newData[i].name</code> has to be allocated manually in the heap? I was not aware of that. Thanks, I&#39;ll try it. @JonathanLeffler so <code>newData[i].name = token</code> doesn&#39;t copy the data?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1498604230, "post_id": 44790786, "comment_id": 76563169, "body": "you can allocate memory for the name by changing this: <code>newData[i].name = token;</code> to this: <code>newData[i].name = strdup(token);</code>."}, {"owner": {"reputation": 45, "user_id": 8128059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7402df1d6270476635847011145db4ad?s=128&d=identicon&r=PG&f=1", "display_name": "ctatton", "link": "https://stackoverflow.com/users/8128059/ctatton"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1498604331, "post_id": 44790786, "comment_id": 76563207, "body": "Thanks @bruceg. Yep, I implemented <code>strdup</code> and it copied over the strings just as expected."}], "answers": [{"tags": [], "owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 1, "last_activity_date": 1498602999, "creation_date": 1498602999, "answer_id": 44791001, "question_id": 44790786, "link": "https://stackoverflow.com/questions/44790786/previously-stored-strings-are-overwritten-by-fgets/44791001#44791001", "title": "Previously stored strings are overwritten by fgets", "body": "<p>Do:</p>\n\n<pre><code>newData[i].name = malloc( strlen( token ) + 1 );\nstrcpy( newData[i].name, token );\n</code></pre>\n\n<p>or define <code>name</code> member as <code>char name[64];</code> and then again <code>strcpy( newData[i].name, token );</code> without <code>malloc</code>. The 64 bytes for name can be more or less.</p>\n"}, {"tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": true, "score": 1, "last_activity_date": 1498603034, "creation_date": 1498603034, "answer_id": 44791010, "question_id": 44790786, "link": "https://stackoverflow.com/questions/44790786/previously-stored-strings-are-overwritten-by-fgets/44791010#44791010", "title": "Previously stored strings are overwritten by fgets", "body": "<p>You are not copy the string but the pointer to the string.</p>\n\n<p>A very simple way to copy the string, but note that this limit the size of the string at 99 characters.</p>\n\n<pre><code>typedef struct customer {\n    char name[100];\n    int age;\n} Customer;\n\nstrcpy(newData[i].name, token);   \n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 8128059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7402df1d6270476635847011145db4ad?s=128&d=identicon&r=PG&f=1", "display_name": "ctatton", "link": "https://stackoverflow.com/users/8128059/ctatton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 44791010, "answer_count": 2, "score": -1, "last_activity_date": 1498604251, "creation_date": 1498601681, "last_edit_date": 1498604251, "question_id": 44790786, "link": "https://stackoverflow.com/questions/44790786/previously-stored-strings-are-overwritten-by-fgets", "title": "Previously stored strings are overwritten by fgets", "body": "<p>I'm reading records from a CSV file using fgets() to read the file one line at a time, and strtok() to parse the fields in each line. I'm encountering a problem where fgets() overwrites a string that was previously written, in favor of the new string. <br>\nHere's an example of what I mean by that:<br></p>\n\n<p>record.csv (This is the file I'm reading in)</p>\n\n<pre><code>John,18\nJohann,29\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct customer {\n    char *name;\n    int age;\n} Customer;\n\nint main(void) \n{\n    FILE *csv_data;\n    char line[100], *token;\n    Customer newData[2];\n\n    csv_data = fopen(\"record.csv\", \"r\");\n    // Index 0 for John's data, index 1 for Johann's data\n    int i = 0;\n\n    /* loops until end of file */\n    while(fgets(line, 100, csv_data)) {\n\n        /* name field */\n        token = strtok(line, \",\");\n        if (token != NULL) {\n            newData[i].name = token;        \n        }\n\n        /* age field */\n        token = strtok(NULL, \",\");\n        if (token != NULL) {\n            // atoi() converts ascii char to integer\n            newData[i].age = atoi(token);\n        }\n        i++;\n    }\n    /* print John's records */\n    printf(\"%s\\n\", newData[0].name);\n    printf(\"%d\\n\", newData[0].age);\n\n    /* print Johann's records */\n    printf(\"%s\\n\", newData[1].name);\n    printf(\"%d\\n\", newData[1].age);\n\n    return 0;\n}\n</code></pre>\n\n<p><br>\nWhen we compile and execute this, it prints out:</p>\n\n<pre><code>Johann\n18\nJohann \n29\n</code></pre>\n\n<p>\"John\" in <code>newData[0].name</code> gets overwritten with \"Johann\" during the second iteration of the <code>while</code> loop. Notice however that only the strings get mixed up, but not the integers. I suspect this has to do with <code>fgets</code> because when I modified the above source to only run <code>fgets</code> once, the output for \"John\" was as it should be.<br>\nMaybe I'm misusing <code>fgets</code> (or perhaps my assumption is wrong), but could someone give me some pointers on why the strings are being overwritten with each calls to <code>fgets</code>? <br><br></p>\n\n<p>Second Update: Thank-you very much again to all the commenters and the answerers. Good to know those things which I was not aware of. The source works perfect now.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1498601683, "post_id": 44790754, "comment_id": 76562407, "body": "What compiler? What IDE are you using?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1498604539, "post_id": 44790754, "comment_id": 76563266, "body": "1. You ignored compiler diagnostics. 2. The behavior is undefined. That&#39;s how it &quot;runs&quot;, if you can call it that."}, {"owner": {"reputation": 53, "user_id": 8120682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jE9x.jpg?s=128&g=1", "display_name": "Govinda Raj", "link": "https://stackoverflow.com/users/8120682/govinda-raj"}, "edited": false, "score": 0, "creation_date": 1498631427, "post_id": 44790754, "comment_id": 76570725, "body": "I am using GCC version 5.4.0 which is preinstalled in my Linux os."}], "answers": [{"comments": [{"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 1, "creation_date": 1498601851, "post_id": 44790788, "comment_id": 76562460, "body": "what standards? Its not in C99 anyway and would constitute an error."}, {"owner": {"reputation": 10088, "user_id": 21028, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/996a5828870fa84ad3a597f7935a9a5e?s=128&d=identicon&r=PG", "display_name": "csl", "link": "https://stackoverflow.com/users/21028/csl"}, "reply_to_user": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1498601946, "post_id": 44790788, "comment_id": 76562483, "body": "OK, I guess it should say &quot;some compilers&quot; then. Thanks"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1498610228, "post_id": 44790788, "comment_id": 76564616, "body": "Technically, calling a varags function like <code>printf()</code> without a prototype in scope was undefined behaviour even in C90.  In practice, you usually got away with it, but it was never standards conforming.  Change the function from <code>printf()</code> to <code>puts()</code>, for example, and it was OK in C90, though not recommended."}], "tags": [], "owner": {"reputation": 10088, "user_id": 21028, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/996a5828870fa84ad3a597f7935a9a5e?s=128&d=identicon&r=PG", "display_name": "csl", "link": "https://stackoverflow.com/users/21028/csl"}, "is_accepted": true, "score": 3, "last_activity_date": 1498603823, "last_edit_date": 1498603823, "creation_date": 1498601692, "answer_id": 44790788, "question_id": 44790754, "link": "https://stackoverflow.com/questions/44790754/without-headerstdio-h-file-how-can-the-following-code-run/44790788#44790788", "title": "Without header(stdio.h) file, how can the following code run?", "body": "<p><strong>Note:</strong> This is a hand-wavy answer that will <em>roughly</em> be correct. Someone else who knows the gory details (for gcc, e.g.) may enlighten both of us. Here goes:</p>\n\n<p>Because in C \u2014 at least for some compilers \u2014 implicitly defined functions are fine. So it compiles it, then hands it off to the linker. It sees a reference to <code>printf</code>, and since the linker by default links with the C runtime library, it will resolve that symbol to the correct function.</p>\n\n<p>I guess an implicit function like that will get a default signature, typically expecting to return an int. As for the arguments to the function, those can't be type checked at compile time, because the compiler doesn't know what the actual function signature is. So it will just use standard calling convention, e.g. pass arguments by registers or something like that.</p>\n"}], "owner": {"reputation": 53, "user_id": 8120682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jE9x.jpg?s=128&g=1", "display_name": "Govinda Raj", "link": "https://stackoverflow.com/users/8120682/govinda-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "closed_date": 1498603986, "accepted_answer_id": 44790788, "answer_count": 1, "score": 3, "last_activity_date": 1498603823, "creation_date": 1498601454, "last_edit_date": 1498603103, "question_id": 44790754, "link": "https://stackoverflow.com/questions/44790754/without-headerstdio-h-file-how-can-the-following-code-run", "closed_reason": "Duplicate", "title": "Without header(stdio.h) file, how can the following code run?", "body": "<p>How this following code can run without including header file for printf function?</p>\n\n<pre><code>int main(){\nprintf(\"%d\",1);\nreturn 0;}\n</code></pre>\n"}, {"tags": ["c", "unix", "process", "pipe", "fork"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 1, "creation_date": 1498614403, "post_id": 44789709, "comment_id": 76565580, "body": "The number of processes created is equal to the number of calls to <code>fork()</code>.  If you delete the <code>exit(0)</code> calls, the children will attempt to continue through the loop (<code>fork()</code>ing again) and then they will <code>wait(0)</code>.  They&#39;ll get resulting <code>ECHILD</code> from some of their <code>wait()</code>s.  Is this really what you intend or do you mean something else?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1498614819, "post_id": 44789709, "comment_id": 76565687, "body": "Your question is very unclear."}], "answers": [{"tags": [], "owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "is_accepted": true, "score": 1, "last_activity_date": 1498614956, "last_edit_date": 1498614956, "creation_date": 1498614601, "answer_id": 44792433, "question_id": 44789709, "link": "https://stackoverflow.com/questions/44789709/find-out-the-number-of-processes/44792433#44792433", "title": "Find out the number of processes", "body": "<p>Below is a working example that tracks the count of children created.  Note that <code>fork()</code> will create another address space that won't allow you to share variables among parent/child.  But the program counter will remain the same and so parent and child will pick up executing right after the call to <code>fork()</code>.</p>\n\n<p>If you do a <code>fork()</code> in a loop, your child will get to the end of the body, if it passes the condition it will execute the body (including the <code>fork()</code> again).</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;stdio.h&gt;\n\n\n\nint main() {\n   int pfd[2], i, n;\n   pid_t children_pids[3];\n   int children_created = 0;\n   memset(children_pids, 0, sizeof(children_pids));\n\n   pipe(pfd);\n   for(i=0; i&lt;3; i++) {\n     pid_t p = fork();\n     if(p == 0) {\n        write(pfd[1], &amp;i, sizeof(int));\n        close(pfd[0]); close(pfd[1]);\n        exit(0);\n//      break;\n     }\n     else {\n        children_pids[children_created++] = p;\n     }\n   }\n   for(i=0; i&lt;3; i++) {\n      pid_t p = waitpid(children_pids[i], NULL, 0);\n      if (p == -1) {\n          /* error, but expected w/o exit() above */ \n          continue;\n      }\n      read(pfd[0], &amp;n, sizeof(int));\n      printf(\"%d\\n\", n);\n   }\n   close(pfd[0]); close(pfd[1]);\n\n   printf(\"Total children: %d\\n\", children_created);\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 40591, "user_id": 6583140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eA8qK.jpg?s=128&g=1", "display_name": "Mihai Alexandru-Ionut", "link": "https://stackoverflow.com/users/6583140/mihai-alexandru-ionut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 44792433, "answer_count": 1, "score": 1, "last_activity_date": 1498614956, "creation_date": 1498596955, "question_id": 44789709, "link": "https://stackoverflow.com/questions/44789709/find-out-the-number-of-processes", "title": "Find out the number of processes", "body": "<p>I have a simple <strong>pipe</strong> program which creates child processes in order to write some info and the parent process will display this info.</p>\n\n<pre><code>int main() {\n   int pfd[2], i, n;\n   pipe(pfd);\n   for(i=0; i&lt;3; i++) {\n     if(fork() == 0) {\n        write(pfd[1], &amp;i, sizeof(int));\n        close(pfd[0]); close(pfd[1]);\n        exit(0);\n     }\n     else {\n\n     }\n   }\n   for(i=0; i&lt;3; i++) {\n      wait(0);\n      read(pfd[0], &amp;n, sizeof(int));\n      printf(\"%d\\n\", n);\n   }\n   close(pfd[0]); close(pfd[1]);\n   return 0;\n}\n</code></pre>\n\n<p>In this situation parent process will receive follow results : <code>0 ,1 and 2</code>.</p>\n\n<p>If I delete the line which contains <code>exit(0)</code> how can I find out the number of processes created by the program ?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "linker", "embedded"], "comments": [{"owner": {"reputation": 86, "user_id": 1178854, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff01b2d918bcd76a032ec22560693b78?s=128&d=identicon&r=PG", "display_name": "phriendtj", "link": "https://stackoverflow.com/users/1178854/phriendtj"}, "edited": false, "score": 0, "creation_date": 1498597810, "post_id": 44789622, "comment_id": 76560674, "body": "I just solved the riddle, had to uncheck the -nodefaultlibs flags"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1498598055, "post_id": 44789622, "comment_id": 76560794, "body": "We need to see the <i>complete</i> linker scripts, both of them, to answer this question.  The problem is not in the code you showed us.  (I am fairly sure I know what the problem is, but I cannot properly explain it without a concrete chunk of script to point at.  It has nothing to do with <code>-nodefaultlibs</code> and I&#39;m surprised that had any effect at all.)"}], "owner": {"reputation": 86, "user_id": 1178854, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff01b2d918bcd76a032ec22560693b78?s=128&d=identicon&r=PG", "display_name": "phriendtj", "link": "https://stackoverflow.com/users/1178854/phriendtj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498596663, "creation_date": 1498596663, "question_id": 44789622, "link": "https://stackoverflow.com/questions/44789622/why-wont-debug-linker-file-compile-ld200-cannot-move-location-counter-backwar", "title": "Why won&#39;t debug linker file compile (ld:200 cannot move location counter backwards)", "body": "<p>Now before you you tell me my program is using too much memory... </p>\n\n<p>I know what \"cannot move location counter backwards means\"...\nhere is the real problem...\n I have a linker file that WILL compile no problem.</p>\n\n<p>call this linker file release version....</p>\n\n<pre><code>MEMORY\n{\n/* SOFTCONSOLE FLASH USE: microsemi-smartfusion2-envm */\nrom (rx)  : ORIGIN = 0x20000000, LENGTH = 35k\n\n/* SmartFusion2 internal eSRAM */\nram (rwx) : ORIGIN = 0x20008C00, LENGTH = 29k\n}\n\nRAM_START_ADDRESS   = 0x20008C00;           /* Must be the same value MEMORY region ram ORIGIN above. */\nRAM_SIZE            = 29k;                  /* Must be the same value MEMORY region ram LENGTH above. */\nMAIN_STACK_SIZE     = 11k;                  /* Cortex main stack size. */\nMIN_SIZE_HEAP       = 512;                  /* needs to be calculated for your application */\n</code></pre>\n\n<p>notice the entire space occupied is 64k... this compiles\nbut when I try to use the following linker file (debug); I get the location counter error</p>\n\n<pre><code>MEMORY\n{\n\n/* SmartFusion2 internal eSRAM */\nram (rwx) : ORIGIN = 0x20000000, LENGTH = 64k\n}\n\nRAM_START_ADDRESS   = 0x20000000;       /* Must be the same value MEMORY region ram ORIGIN above. */\nRAM_SIZE            = 64k;              /* Must be the same value MEMORY region ram LENGTH above. */\nMAIN_STACK_SIZE     = 11k;               /* Cortex main stack size. */\nMIN_SIZE_HEAP       = 512;              /* needs to be calculated for your application */\n</code></pre>\n\n<p>THE ONLY differences between the two linker files are show plus anywhere there is a >rom or >ram AT>rom directive in the release version, it is replace by >ram in the debug version...</p>\n\n<p>I am using the same exact optimize and debugging flags\nWhen I try to link the debug version i get the following error</p>\n\n<pre><code>ld:200 cannot move location counter backwards (from 20011d80 to 2000d400)\n</code></pre>\n\n<p>Anyone have any ideas???</p>\n"}, {"tags": ["c", "linux", "gcc", "lib"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1498595991, "post_id": 44789438, "comment_id": 76559721, "body": "Your error message indicates that your question should be about <code>c++</code>. Also, the compiler is not the one complaining."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498596184, "post_id": 44789438, "comment_id": 76559833, "body": "you could try <code>extern &quot;C&quot; { #include &lt;mbus&#47;mbus.h&gt; };</code>. Can you check if <code>mbus.h</code> contains some <code>extern &quot;C&quot;</code> directives? if it doesn&#39;t it means that the C++ compiler generates a C++ prototype (with arguments) instead of a C prototype (without arguments)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1498596301, "post_id": 44789438, "comment_id": 76559890, "body": "oh, that could be a problem of calling <code>gcc</code> on a C++ file also: try: <code>g++ main.cpp -lmbus</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8222609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04fad39447981630422548508aadcfd?s=128&d=identicon&r=PG&f=1", "display_name": "jokkemokke", "link": "https://stackoverflow.com/users/8222609/jokkemokke"}, "edited": false, "score": 0, "creation_date": 1498650651, "post_id": 44789542, "comment_id": 76583010, "body": "This solved my issue. Thanks. I didn&#39;t know that gcc was looking at the extensions of the files. However, I did not have this problem with other C programs I made with the extension .cpp. Could this be because of the structure of the lib I am trying to use here?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 3, "user_id": 8222609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04fad39447981630422548508aadcfd?s=128&d=identicon&r=PG&f=1", "display_name": "jokkemokke", "link": "https://stackoverflow.com/users/8222609/jokkemokke"}, "edited": false, "score": 0, "creation_date": 1498655312, "post_id": 44789542, "comment_id": 76586686, "body": "<code>g++</code> and <code>.cpp</code> files mean <code>c++</code>.  Name mangling in <code>c++</code> will prevent the linker from finding functions in the library.  I don&#39;t know this specific library so I can&#39;t help you there.  BTW, if this solved your problem, please accept it as the solution."}], "tags": [], "owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "is_accepted": true, "score": 0, "last_activity_date": 1498596387, "creation_date": 1498596387, "answer_id": 44789542, "question_id": 44789438, "link": "https://stackoverflow.com/questions/44789438/gcc-cannot-find-function-in-lib/44789542#44789542", "title": "gcc cannot find function in lib", "body": "<p>If you're really trying to create a <code>c</code> program, rename <code>main.cpp</code> to <code>main.c</code></p>\n"}], "owner": {"reputation": 3, "user_id": 8222609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04fad39447981630422548508aadcfd?s=128&d=identicon&r=PG&f=1", "display_name": "jokkemokke", "link": "https://stackoverflow.com/users/8222609/jokkemokke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 44789542, "answer_count": 1, "score": -1, "last_activity_date": 1498596387, "creation_date": 1498595906, "question_id": 44789438, "link": "https://stackoverflow.com/questions/44789438/gcc-cannot-find-function-in-lib", "title": "gcc cannot find function in lib", "body": "<p>I am trying to make a C program using libmbus, which I have installed on my raspberry pi. In my /usr/lib directory I have the file libmbus.so and in my /usr/include directory I have the the file ./mbus/mbus.h.</p>\n\n<p>The program looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;mbus/mbus.h&gt;\n\nint main(void)\n{\n    mbus_handle* MbusHandle;\n\n    MbusHandle = mbus_connect_serial(\"/dev/ttyS1\");\n\n    return 0;\n}\n</code></pre>\n\n<p>When I try to run \"gcc main.cpp -lmbus\" I get:</p>\n\n<pre><code>main.cpp:(.text+0xe): undefined reference to `mbus_connect_serial(char const*)'\n</code></pre>\n\n<p>I tried to run</p>\n\n<pre><code>nm -D /usr/lib/libmbus.so\n</code></pre>\n\n<p>which among others gives</p>\n\n<pre><code>00009930 T mbus_connect_serial\n</code></pre>\n\n<p>So it appears that the function mbus_connect_serial is part of libmbus.so.</p>\n\n<p>In the header file the function mbus_connect_serial is defined like this:</p>\n\n<pre><code>mbus_handle * mbus_connect_serial(const char * device);\n</code></pre>\n\n<p>I can't seem to figure out what is wrong. Can anyone guide me in the right direction?</p>\n"}, {"tags": ["java", "c++", "c", "java-native-interface", "superpowered"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1498596908, "post_id": 44789314, "comment_id": 76560216, "body": "Java does not have signed and unsigned variants of integer types.  All Java integer types except <code>char</code> are signed.  Therefore, you cannot return an <code>unsigned int</code> <i>per se</i> to Java; you must convert it to a Java-supported type.  In principle, you might need to convert a C <code>double</code>, too, but in practice, <code>double</code> and JNI <code>jdouble</code> are almost certainly the same type."}, {"owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1498596970, "post_id": 44789314, "comment_id": 76560246, "body": "Can you show the Java code resulting in the errors? You&#39;re ... not trying to compile the C code with a Java compiler, right?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1498597034, "post_id": 44789314, "comment_id": 76560282, "body": "With that said, the relationship between the error messages and the code presented is unclear.  For the greatest likelihood of getting useful help, present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1498602549, "post_id": 44789314, "comment_id": 76562675, "body": "To which lines of code do those error messages refer? It seems that you may be attempting to treat data members as functions. They aren&#39;t. You can&#39;t call them. NB There is no &#39;external C structure&#39; here."}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "edited": false, "score": 0, "creation_date": 1498841907, "post_id": 44789314, "comment_id": 76683832, "body": "EJP, I keep getting flagged at the playerA-&gt;positionMs; that double is &quot;not a function or function pointer&quot; in that which it is supposed to return a double value according to the native library&#39;s documentation I am working with."}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "edited": false, "score": 0, "creation_date": 1498842015, "post_id": 44789314, "comment_id": 76683879, "body": "Now I really don&#39;t know if the error is actually from how I structured the JNI Export or extern C or how I declared the double and unsigned int methods"}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "reply_to_user": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1498842163, "post_id": 44789314, "comment_id": 76683935, "body": "@AndyThomas, I appreciate your feedback so much, but I am using Android Studio"}, {"owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1498843876, "post_id": 44789314, "comment_id": 76684745, "body": "@IsaacOyewole - Can you show the declarations of the methods <code>playerA-&gt;positionMs()</code> and <code>playerA-&gt;durationMs()</code> -- the method calls being flagged as an error?"}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1498858381, "post_id": 44789314, "comment_id": 76690991, "body": "@EJP, please how do I go about using a &quot;data member&quot; as a &quot;method member&quot; so that I can return the DOUBLE and UNSIGNED INT back to my java side, as you pointed out in your suggestions? Thanks in advance"}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "reply_to_user": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1498858845, "post_id": 44789314, "comment_id": 76691145, "body": "@AndyThomas, thank you so much for your help, the declaration of the playerA is this:  SuperpoweredAdvancedAudioPlayer *playerA;  //where SuperpoweredAdvancedAudioPlayer is a class in the Superpowered SDK  The documentation is here  <a href=\"http://superpowered.com/docs/class_superpowered_advanced_audio_player.html\" rel=\"nofollow noreferrer\">superpowered.com/docs/&hellip;</a>  In my implementation, I am trying to return the SuperpoweredAdvancedAudioPlayer&#39;s position to the Java side through JNI"}, {"owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 1, "creation_date": 1498859625, "post_id": 44789314, "comment_id": 76691370, "body": "@IsaacOyewole - The linked documentation shows that you&#39;re trying to access a data member like a method call, as EJP answers below. You&#39;re using <code>playerA-&gt;positionMs()</code>. Remove the parantheses, which indicate a function call -- just use <code>playerA-&gt;positionMs</code>."}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "reply_to_user": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1498890001, "post_id": 44789314, "comment_id": 76696063, "body": "@AndyThomas, it finally built the project pass that point! Thanks so much! However I do get this error now;  error: functions that differ only in their return type cannot be overloaded  The error flags out my JNIEXPORT line here  JNIEXPORT jdouble Java_com_superpowered_crossexample_MainActivity_getPosition(&zwnj;&#8203;JNIEnv *javaEnvironment, jobject self) {  return example-&gt;getPosition (); }"}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "edited": false, "score": 0, "creation_date": 1498890115, "post_id": 44789314, "comment_id": 76696085, "body": "I also tried removing the parentheses from return example-&gt;getPosition; but the error remains"}, {"owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1498890609, "post_id": 44789314, "comment_id": 76696187, "body": "That error suggests that you have two different definitions of getPosition(), which differ only in the return type. You have to use parantheses when you call a method or function. You may want to read an introductory text on C/C++ programming."}, {"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "reply_to_user": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 0, "creation_date": 1498891092, "post_id": 44789314, "comment_id": 76696291, "body": "I think I may have just solved the last issue. I included jdouble in the JNIEXPORT side. Once again I want to really thank you @AndyThomas, if not for your help I might not have gotten this far. Thank you so much. Now I just can&#39;t find the upvote botton on your help"}, {"owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "edited": false, "score": 1, "creation_date": 1498891417, "post_id": 44789314, "comment_id": 76696355, "body": "You can click the checkmark on EJP&#39;s answer below, to accept his answer."}], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "edited": false, "score": 0, "creation_date": 1498841715, "post_id": 44825303, "comment_id": 76683738, "body": "I&#39;m sorry about that @EJP, but I&#39;m am using a native SDK library from which I created an instance of a class which is supposed to return a &quot;double&quot; value... I have been searching the documentation so I can properly respond to the help provided here as I am very new to native c programming. The variable class I queried in the DOUBLE method &quot;getPosition&quot; is said to return a double value but I keep getting the build error  that double is not a function or function pointer and the line playerA-&gt;positionMs; was flagged out."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "edited": false, "score": 0, "creation_date": 1498889983, "post_id": 44825303, "comment_id": 76696059, "body": "So it&#39;s a variable, as I said, not a function, as your code says. You need to post the definition of those variables/functions/whatever they are to clarify this."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 4, "last_activity_date": 1498890023, "last_edit_date": 1498890023, "creation_date": 1498739699, "answer_id": 44825303, "question_id": 44789314, "link": "https://stackoverflow.com/questions/44789314/how-to-return-double-and-unsigned-int-from-native-c-library-to-java-using-jni/44825303#44825303", "title": "How to return double and unsigned int from native c library to java using JNI", "body": "<p>You haven't exactly troubled yourself to provide the complete class definition, or to answer the questions you've been asked in comments, but it appears that</p>\n\n<pre><code>playerA-&gt;positionMs\n</code></pre>\n\n<p>is a data member, not a member method, and similarly for the other method call. So you can't call them as methods. But you can return them directly as values.</p>\n"}], "owner": {"reputation": 74, "user_id": 4548543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-YxDoc7YWfYI/AAAAAAAAAAI/AAAAAAAAAEs/q68uw3WbnaA/photo.jpg?sz=128", "display_name": "Isaac Oyewole", "link": "https://stackoverflow.com/users/4548543/isaac-oyewole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498890023, "creation_date": 1498595330, "last_edit_date": 1498595629, "question_id": 44789314, "link": "https://stackoverflow.com/questions/44789314/how-to-return-double-and-unsigned-int-from-native-c-library-to-java-using-jni", "title": "How to return double and unsigned int from native c library to java using JNI", "body": "<p>I am new to using JNI and so I am trying to get a <code>double</code> and an <code>unsigned int</code> from a native library in C and return the values to my java side but I keep getting the following errors from Android Studio</p>\n\n<pre><code>Error:(111, 37) error: called object type 'double' is not a function or function pointer\nError:(117, 43) error: called object type 'unsigned int' is not a function or function pointer\nError:(220, 19) error: functions that differ only in their return type cannot be overloaded\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>double SuperpoweredExample::getPosition() {\n\n    double pos = playerA-&gt;positionMs();\n\n    return pos;\n}\n\nunsigned int SuperpoweredExample::getDuration() {\n    unsigned int dur = playerA-&gt;durationMs();\n    return dur;\n}\n</code></pre>\n\n<p>while this is the Extern C structure</p>\n\n<pre><code>JNIEXPORT jdouble Java_com_superpowered_crossexample_MainActivity_getPosition(JNIEnv *javaEnvironment, jobject self) {\n\n    return example-&gt;getPosition();\n}\nJNIEXPORT jint Java_com_superpowered_crossexample_MainActivity_getDuration(JNIEnv *javaEnvironment, jobject self) {\n    return example-&gt;getDuration();\n}\n</code></pre>\n\n<p>Please guys, I will appreciate any help at all... \nThank you in advance</p>\n"}, {"tags": ["c", "realloc"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 10, "creation_date": 1498595353, "post_id": 44789295, "comment_id": 76559381, "body": "It\u2019s not redundant. <code>realloc</code> might return a different pointer and invalidate the old one. Read <a href=\"https://linux.die.net/man/3/realloc\" rel=\"nofollow noreferrer\"><code>man realloc</code></a>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1498595612, "post_id": 44789295, "comment_id": 76559501, "body": "@Ryan: OTOH, the way the OP has been taught is <i>also</i> bad, since it leaks the original allocation if <code>realloc()</code> fails."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 1, "creation_date": 1498595841, "post_id": 44789295, "comment_id": 76559633, "body": "Realloc returns a pointer.  You have to collect it somewhere."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498598223, "post_id": 44789295, "comment_id": 76560882, "body": "Corner consideration: If the new size is 0, special considerations are needed as as the return value from <code>realloc(...., 0)</code> is not necessarily an out-of-memory.  <code>realloc(...., more_than_zero)</code> returns <code>NULL</code> on out-of-memory and also may/may not return a non-out-of-memory  <code>NULL</code> on <code>realloc(...., 0)</code>."}, {"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 1, "creation_date": 1498628365, "post_id": 44789295, "comment_id": 76569312, "body": "This is not redundant. There is no guarantee that realloc() will return the same address."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 7802476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SRMiX.jpg?s=128&g=1", "display_name": "Prox", "link": "https://stackoverflow.com/users/7802476/prox"}, "edited": false, "score": 0, "creation_date": 1593200597, "post_id": 44789441, "comment_id": 110706986, "body": "I am looking for clarity. If realloc does not return the exact same pointer, don&#39;t we encounter memory leaks? Doesn&#39;t the following code cause leaks: int *oldPtr = malloc(10); int *newPtr = malloc(100); oldPtr = newPtr; //we no longer have reference to the first malloc, hence cannot free it."}, {"owner": {"reputation": 171, "user_id": 7802476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SRMiX.jpg?s=128&g=1", "display_name": "Prox", "link": "https://stackoverflow.com/users/7802476/prox"}, "edited": false, "score": 0, "creation_date": 1593201334, "post_id": 44789441, "comment_id": 110707288, "body": "I got my answer, realloc frees the old memory on success, <a href=\"https://stackoverflow.com/a/34615642/7802476\">stackoverflow.com/a/34615642/7802476</a>. Does that mean if you use the old pointer after realloc (without the else statement) you get undefined behavior?"}], "tags": [], "owner": {"reputation": 31, "user_id": 1441039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afad4511761cc61a9e0cc52f8bc3646?s=128&d=identicon&r=PG", "display_name": "user1441039", "link": "https://stackoverflow.com/users/1441039/user1441039"}, "is_accepted": false, "score": 3, "last_activity_date": 1498595919, "creation_date": 1498595919, "answer_id": 44789441, "question_id": 44789295, "link": "https://stackoverflow.com/questions/44789295/correct-use-of-realloc/44789441#44789441", "title": "Correct use of Realloc", "body": "<p>realloc on failure keeps the original pointer and size. realloc on success may not (and often does not) return the exact same pointer as the input. </p>\n\n<p>So the proper solution is your third example.</p>\n\n<pre><code>int *oldPtr = malloc(10);\nint * newPtr = realloc(oldPtr, 100);\nif(newPtr == NULL) //deal with problems\nelse oldPtr = newPtr;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498597697, "post_id": 44789446, "comment_id": 76560610, "body": "You most likely wouldn&#39;t continue on the standard flow of execution in the function if memory allocation failed.  The error handling should exit.  If somehow you can handle the error and continue, definitely should be in an else."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 4, "last_activity_date": 1498597756, "last_edit_date": 1498597756, "creation_date": 1498595942, "answer_id": 44789446, "question_id": 44789295, "link": "https://stackoverflow.com/questions/44789295/correct-use-of-realloc/44789446#44789446", "title": "Correct use of Realloc", "body": "<p>the correct way to call <code>realloc</code> is to save the return value in a temporary variable and check it for NULL.  That way if realloc has failed, you haven't lost your original memory.  For example:</p>\n\n<pre><code>int *a, *b;\na = malloc(10); \nb = realloc(a, 100);\nif (b == NULL) {\n    // handle error and exit\n}\na = b;\n</code></pre>\n\n<p>EDIT: Note that if the error handling doesn't exit, you should put the last line above, i.e. <code>a = b;</code> inside an else clause.</p>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1557794989, "post_id": 44789893, "comment_id": 98875723, "body": "<a href=\"https://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\">Actually, if <code>new_size</code> is zero, return-value <code>NULL</code> does not consistently mean error.</a>"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 8, "last_activity_date": 1557792533, "last_edit_date": 1557792533, "creation_date": 1498597622, "answer_id": 44789893, "question_id": 44789295, "link": "https://stackoverflow.com/questions/44789295/correct-use-of-realloc/44789893#44789893", "title": "Correct use of Realloc", "body": "<p><code>realloc</code> returns a pointer to the resized buffer; this pointer value may be different from the original pointer value, so you <em>need</em> to save that return value somewhere.  </p>\n\n<p><code>realloc</code> may return <code>NULL</code> if the request cannot be satsified (in which case the original buffer is left in place).  For that reason, you want to save the return value to a <em>different</em> pointer variable than the original.  Otherwise, you risk overwriting your original pointer with <code>NULL</code> and losing your only reference to that buffer.</p>\n\n<p>Example:</p>\n\n<pre><code>size_t buf_size = 0; // keep track of our buffer size\n\n// ...\n\nint *a = malloc(sizeof *a * some_size); // initial allocation\nif (a)\n    buf_size = some_size;\n\n// ...\n\nint *tmp = realloc(a, sizeof *a * new_size); // reallocation\nif (tmp) {\n    a = tmp;             // save new pointer value\n    buf_size = new_size; // and new buffer size\n}\nelse {\n    // realloc failure, handle as appropriate\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1498597666, "creation_date": 1498597666, "answer_id": 44789906, "question_id": 44789295, "link": "https://stackoverflow.com/questions/44789295/correct-use-of-realloc/44789906#44789906", "title": "Correct use of Realloc", "body": "<p>This code snippet is wrong.</p>\n\n<pre><code>int *a = malloc(10);\na = realloc(a, 100); // Why do we do \"a = .... ?\"\nif(a == NULL) \n//Deal with problem.....\n</code></pre>\n\n<p>If the call of <code>realloc</code> returns <code>NULL</code> then the previous value of the pointer <code>a</code> is lost. So there can be a memory leak because it will be impossible to free the memory allocated by the call of <code>malloc</code>.</p>\n\n<p>If just to write</p>\n\n<pre><code>if(realloc(a, 100) == NULL) //Deal with the problem\n</code></pre>\n\n<p>then in turn the returned pointer of the call of the <code>realloc</code> can be lost.</p>\n\n<p>This code snippet</p>\n\n<pre><code>int *oldPtr = malloc(10);\nint * newPtr = realloc(oldPtr, 100);\nif(newPtr == NULL) //deal with problems\nelse oldPtr = newPtr;\n</code></pre>\n\n<p>is correct. However if to write</p>\n\n<pre><code>int *oldPtr = malloc(10);\nif(realloc(oldPtr, 100) == NULL)  //deal with problems\n//else not necessary, oldPtr has already been reallocated and has now 100 elements\n</code></pre>\n\n<p>then again the returned pointer of the call of <code>realloc</code> can be lost.</p>\n\n<p>From the description of <code>realloc</code> in the C Standard (7.22.3.5 The realloc function)</p>\n\n<blockquote>\n  <p>4 The realloc function returns a pointer to the new object (which may\n  have (<strong>or may not have - added by me</strong>) the same value as a pointer to the\n  old object, or a null pointer if the new object could not be\n  allocated.</p>\n</blockquote>\n"}], "owner": {"reputation": 51, "user_id": 7761756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46da530b52f26d3f75af08e7b7d82c72?s=128&d=identicon&r=PG&f=1", "display_name": "Sir_Playsalot", "link": "https://stackoverflow.com/users/7761756/sir-playsalot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2765, "favorite_count": 1, "answer_count": 4, "score": 5, "last_activity_date": 1557792533, "creation_date": 1498595256, "last_edit_date": 1498599108, "question_id": 44789295, "link": "https://stackoverflow.com/questions/44789295/correct-use-of-realloc", "title": "Correct use of Realloc", "body": "<p>This is the way I've been taught to use <code>realloc()</code>:</p>\n\n<pre><code>int *a = malloc(10);\na = realloc(a, 100); // Why do we do \"a = .... ?\"\nif(a == NULL) \n//Deal with problem.....\n</code></pre>\n\n<p>Isn't that redundant? Can't i just do something like this? :</p>\n\n<pre><code>if(realloc(a, 100) == NULL) //Deal with the problem\n</code></pre>\n\n<p>Same for other realloc examples i've found around, for example:</p>\n\n<pre><code>int *oldPtr = malloc(10);\nint * newPtr = realloc(oldPtr, 100);\nif(newPtr == NULL) //deal with problems\nelse oldPtr = newPtr;\n</code></pre>\n\n<p>Can't i just do this instead? :</p>\n\n<pre><code>int *oldPtr = malloc(10);\nif(realloc(oldPtr, 100) == NULL)  //deal with problems\n//else not necessary, oldPtr has already been reallocated and has now 100 elements\n</code></pre>\n"}, {"tags": ["c", "pointers", "typedef", "undefined-behavior"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1498595356, "post_id": 44789283, "comment_id": 76559383, "body": "It is not, what would prompt the assertion?"}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "edited": false, "score": 1, "creation_date": 1498595371, "post_id": 44789283, "comment_id": 76559389, "body": "why should there be an undefined behaviour?"}, {"owner": {"reputation": 241, "user_id": 2069660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/11b46637f3d6dbd59aa1f5449ebf29f6?s=128&d=identicon&r=PG", "display_name": "Tob Ernack", "link": "https://stackoverflow.com/users/2069660/tob-ernack"}, "edited": false, "score": 0, "creation_date": 1498595689, "post_id": 44789283, "comment_id": 76559550, "body": "I was thinking about whether the compiler could somehow make a <code>myIntType *</code> of a different size than an <code>int *</code>, or perhaps consider them as incompatible similarly to the case where one tries to cast a pointer to a struct to a pointer to a struct containing the same initial fields (referring to the strict-aliasing issue)."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1498595890, "post_id": 44789283, "comment_id": 76559661, "body": "C11 draft standard n1570: <i>6.7.8 Type definitions 3 [...] A typedef declaration does not introduce a new type, only a synonym for the type so specified.</i>"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1498598659, "post_id": 44789283, "comment_id": 76561094, "body": "Note that while the standard allows this, static code analysis tools such as LINT will barf out pages of warnings about this, since the <code>typedef</code> could potentially change in the future."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1498606063, "post_id": 44789283, "comment_id": 76563700, "body": "@TobErnack:  Pointers are always the same size.  <code>sizeof(int*) == sizeof(struct s*) == sizeof(void*)</code> always, with the exception of the almost defunct 16 bits apps, where far pointers did not have the same size as near pointers."}], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 1, "creation_date": 1498595830, "post_id": 44789399, "comment_id": 76559627, "body": "It also says, &quot;The typedef-names are aliases for existing types, and are not declarations of new types.&quot; This language might be a little clearer."}], "tags": [], "owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "is_accepted": true, "score": 3, "last_activity_date": 1498596565, "last_edit_date": 1498596565, "creation_date": 1498595689, "answer_id": 44789399, "question_id": 44789283, "link": "https://stackoverflow.com/questions/44789283/is-it-undefined-behaviour-in-c-to-use-pointer-to-a-typedef-type-as-a-pointer-to/44789399#44789399", "title": "Is it undefined behaviour in C to use pointer to a typedef type as a pointer to the primitive type?", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/language/typedef\" rel=\"nofollow noreferrer\">cppreference.com</a> about the typedef specifier:</p>\n\n<blockquote>\n  <p>The typedef specifier ... may declare array and function types, pointers and references, class types, etc. Every identifier introduced in this declaration becomes a typedef-name, <em>which is a synonym for the type</em> of the object or function that it would become if the keyword typedef were removed.</p>\n</blockquote>\n\n<p>In other words, it is the exact same as if you removed your custom type and replaced it with <code>int</code>. Thus, it is well-defined behavior. <code>int</code> and <code>myIntType</code> are 100% interchangeable.</p>\n\n<p>That is actually a c++ reference. From K&amp;R, chapter 6.7 on <code>typedef</code>:</p>\n\n<blockquote>\n  <p>C provides a facility called <code>typedef</code> for creating new data type names. For example, the declaration <code>typedef int Length;</code> makes the name <code>Length</code> a synonym for <code>int</code>. The type <code>Length</code> can be used in declarations, casts, etc., in exactly the same ways that the type <code>int</code> can be.</p>\n</blockquote>\n\n<p>Do be aware that K&amp;R isn't the most up-to-date standard. The other answer cites the current standard. As far as I know, <code>typedef</code> hasn't changed.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1498596151, "creation_date": 1498596151, "answer_id": 44789481, "question_id": 44789283, "link": "https://stackoverflow.com/questions/44789283/is-it-undefined-behaviour-in-c-to-use-pointer-to-a-typedef-type-as-a-pointer-to/44789481#44789481", "title": "Is it undefined behaviour in C to use pointer to a typedef type as a pointer to the primitive type?", "body": "<p>In your example, <code>myIntType *</code> is the same as <code>int *</code>.</p>\n\n<p>Section 6.7.8 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> gives an example of this:</p>\n\n<blockquote>\n  <p><em>4</em> EXAMPLE 1 After</p>\n\n<pre><code>typedef int MILES, KLICKSP();\ntypedef struct { double hi, lo; } range;\n</code></pre>\n  \n  <p>the constructions</p>\n\n<pre><code>MILES distance;\nextern KLICKSP *metricp;\nrange x;\nrange z, *zp;\n</code></pre>\n  \n  <p>are all valid declarations. <strong>The type of <code>distance</code> is <code>int</code></strong>, that of\n  <code>metricp</code> is \"pointer to function with no parameter specification\n  returning <code>int</code>\", and that of <code>x</code> and <code>z</code> is the specified structure; <code>zp</code> is\n  a pointer to such a structure. <strong>The object <code>distance</code> has a type\n  compatible with any other <code>int</code> object.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 241, "user_id": 2069660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/11b46637f3d6dbd59aa1f5449ebf29f6?s=128&d=identicon&r=PG", "display_name": "Tob Ernack", "link": "https://stackoverflow.com/users/2069660/tob-ernack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 44789399, "answer_count": 2, "score": 3, "last_activity_date": 1498596565, "creation_date": 1498595192, "question_id": 44789283, "link": "https://stackoverflow.com/questions/44789283/is-it-undefined-behaviour-in-c-to-use-pointer-to-a-typedef-type-as-a-pointer-to", "title": "Is it undefined behaviour in C to use pointer to a typedef type as a pointer to the primitive type?", "body": "<p>Suppose that one has the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef int myIntType;\n\nint main()\n{\n    int a;\n    myIntType *ptr = &amp;a;\n\n    *ptr = 1;\n\n    printf(\"%d\\n\", a);\n\n    return 0;\n}\n</code></pre>\n\n<p>Does this invoke undefined behaviour?</p>\n\n<p>Under any reasonable interpretation, I expect this should simply set the value of <code>a</code> to <code>1</code> and therefore print the line <code>1</code> on <code>stdout</code>.</p>\n\n<p>Compiling with <code>gcc -Wall -Wextra -pedantic main.c -o main</code> on Mac OS X does not produce any errors or warnings, and produces the expected output on execution.</p>\n\n<p>My question is purely theoretical, and I do not intend to use such a construct in real-life code.</p>\n"}, {"tags": ["c", "arrays", "scanf"], "comments": [{"owner": {"reputation": 25, "user_id": 8169571, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YnIjukT0nVY/AAAAAAAAAAI/AAAAAAAADxA/dt2P2Rhs7zE/photo.jpg?sz=128", "display_name": "JDK", "link": "https://stackoverflow.com/users/8169571/jdk"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1498595099, "post_id": 44789110, "comment_id": 76559275, "body": "thank you it works"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1498595341, "post_id": 44789110, "comment_id": 76559373, "body": "@JDK Doesn&#39;t every <code>scanf</code> tutorial show how to do this correctly?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1498596940, "post_id": 44789110, "comment_id": 76560234, "body": "You cannot possibly get the same error if you do that change you say."}, {"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 0, "creation_date": 1498628779, "post_id": 44789110, "comment_id": 76569457, "body": "BDW which compiler did you use? And did you input all your elements correctly?"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 0, "creation_date": 1498628905, "post_id": 44790033, "comment_id": 76569513, "body": "Not necessary with arrays."}], "tags": [], "owner": {"reputation": 39, "user_id": 7717497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryV7W.jpg?s=128&g=1", "display_name": "Halina V", "link": "https://stackoverflow.com/users/7717497/halina-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1498598133, "creation_date": 1498598133, "answer_id": 44790033, "question_id": 44789110, "link": "https://stackoverflow.com/questions/44789110/getting-values-for-an-array-using-scanf-function-in-c/44790033#44790033", "title": "getting values for an array using scanf function in C", "body": "<p>it looks like you need to add &amp; before your arr[i]:</p>\n\n<pre><code>scanf(\"%d\", &amp;arr[i]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213, "user_id": 7382775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12c9f2ab038e682444f9945a2e2685e?s=128&d=identicon&r=PG&f=1", "display_name": "rigby", "link": "https://stackoverflow.com/users/7382775/rigby"}, "is_accepted": false, "score": 1, "last_activity_date": 1498654867, "creation_date": 1498654867, "answer_id": 44803268, "question_id": 44789110, "link": "https://stackoverflow.com/questions/44789110/getting-values-for-an-array-using-scanf-function-in-c/44803268#44803268", "title": "getting values for an array using scanf function in C", "body": "<p>The function <code>scanf()</code> places the input from <code>stdin</code> to wherever you tell it. The second argument you are providing in <code>scanf()</code> is not a pointer directing where the input from the user should go -- <code>arr[i]</code> is an integer. The second argument after formatting needs to be a pointer.</p>\n\n<p>So, you want something along the lines of the following:</p>\n\n<pre><code>scanf(\"%d\", (arr+i));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>scanf(\"%d\", &amp;arr[i]);\n</code></pre>\n\n<p>For the first case, passing an array as an argument is the same as passing a pointer to the first element in the contiguous block of memory the array holds. Incrementing by an integer will take you to the next element.</p>\n\n<p>The second case is first providing the value of the ith element in the array, <code>arr[i]</code>, and then the ampersand gives the address in memory of where that element is located -- so a pointer.</p>\n"}], "owner": {"reputation": 25, "user_id": 8169571, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YnIjukT0nVY/AAAAAAAAAAI/AAAAAAAADxA/dt2P2Rhs7zE/photo.jpg?sz=128", "display_name": "JDK", "link": "https://stackoverflow.com/users/8169571/jdk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6962, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1498654867, "creation_date": 1498594530, "last_edit_date": 1498603497, "question_id": 44789110, "link": "https://stackoverflow.com/questions/44789110/getting-values-for-an-array-using-scanf-function-in-c", "title": "getting values for an array using scanf function in C", "body": "<p>I have a function definition that gets values for an array trough the user using scanf. This is what i have</p>\n\n<pre><code>void readInArray(int *arr, int size) {\n    int i;\n    printf(\"Enter your list of numbers: \");\n    for (i = 0; i &lt; size; i++) {\n        scanf(\"%f\", arr[i]);\n        printf(\"%d\\n\", arr[i]);\n    }\n}\n</code></pre>\n\n<p>when i try to print the array i get an error at the line with scanf saying \"format specifies type 'float *' but the argument has type 'int'\".I tried changing %f to %d so that both scanf and printf have the same place holder </p>\n\n<pre><code>void readInArray(int *arr, int size) {\n    int i;\n    printf(\"Enter your list of numbers: \");\n    for (i = 0; i &lt; size; i++) {\n        scanf(\"%d\", arr[i]);\n        printf(\"%d\\n\", arr[i]);\n    }\n}\n</code></pre>\n\n<p>but i still get the same error. How can i fix this?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1498594773, "post_id": 44789034, "comment_id": 76559120, "body": "Don&#39;t mix <code>fgets</code> with <code>fscanf</code>. Break that complicated <code>while</code> into smaller parts. Start with a single <code>fgets</code> of each input line and examine it further - you cannot sensibly apply two <code>fgets</code> calls to the same input line. You are trying to limit the input length read, but the second fields are not all the same length."}], "answers": [{"tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": true, "score": 0, "last_activity_date": 1498608647, "creation_date": 1498608647, "answer_id": 44791803, "question_id": 44789034, "link": "https://stackoverflow.com/questions/44789034/linked-list-incorrect-reading-error-message/44791803#44791803", "title": "Linked list incorrect reading &amp; error message", "body": "<p>There are several problems in your code.</p>\n\n<p>One problem is you mixed fgets and fscanf. fgets reads <strong>a given length</strong> regardless of what is read (assume no EOF is received).So in the 1st loop, when you call <code>fgets(a.robot, sizeof a.robot, tsin)</code>, it reads 15 bytes and saves <code>TERMINATOR T-80</code> into <code>a.robot</code>, and when you call fgets again, it reads another 10 bytes and saves <code>0 1\\r\\nTERMI</code> into <code>a.type</code>. Now the following <code>fscanf</code> fails because the next coming character is <code>N</code>, which does not fit <code>%d</code>.</p>\n\n<p>Another problem is you're appointing arrays like pointers, that's the reason for the error generated. (Bad compiler for not finding this issue for you). <code>a.robot</code> is of type <code>char [15]</code>, and when you assign <code>*temp-&gt;robot = a.robot</code>, <strong>you are attempting to assign a <code>char [15]</code> to a <code>char</code></strong> (<code>*temp-robot</code> is essentially the same as <code>temp-&gt;robot[0]</code>). The same applies to the next line. You should use <code>strcpy</code> (or safer, <code>strncpy</code>) instead.</p>\n\n<p>And after closing read file descriptor, what is <code>struct node</code>??? And how can you print <code>a.xxx</code> while looping with condition <code>p != NULL</code>??? With assigning <strong><code>temp = temp-&gt;next</code></strong> each loop???</p>\n"}], "owner": {"reputation": 25, "user_id": 8212272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NjNp3.png?s=128&g=1", "display_name": "imanoob", "link": "https://stackoverflow.com/users/8212272/imanoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 44791803, "answer_count": 1, "score": 0, "last_activity_date": 1498608647, "creation_date": 1498594189, "last_edit_date": 1498603556, "question_id": 44789034, "link": "https://stackoverflow.com/questions/44789034/linked-list-incorrect-reading-error-message", "title": "Linked list incorrect reading &amp; error message", "body": "<p>I want to read a textfile, put the information from that textfile into a linked list, close the file and then print everything into my program using the linked list.\nFor some reason i get \"-858993460\" after my first row for the rest list till i hit my 15 line then i get an error:</p>\n\n<blockquote>\n  <p>Exception thrown at 0x5313B5F2 (ucrtbased.dll) in ConsoleApplication14.exe: 0xC0000005: Access violation writing location 0xCCCCCCCC.</p>\n</blockquote>\n\n<p>The list I'm reading from:</p>\n\n<pre><code>TERMINATOR T-800 1\n\nTERMINATOR T-1000 2\n\nTERMINATOR T-800 3\n\nTERMINATOR T-800 4\n\nTERMINATOR T-1000 5\n\nTERMINATOR T-800 6\n\nTERMINATOR T-800 7\n\nTERMINATOR T-800 8\n\nTERMINATOR T-1000 9\n\nTERMINATOR T-800 10\n\nTORMONUTTUR T-800 101\n\nTERMINATOR T-800 11\n\nFEL FEL FEL\n\nTERMINATOR T-1000 12\n\nTERMINATOR T-800 13\n\nTERMINATOR T-800 14\n\nTERMINATOR           T-800         15\n\n       TERMINATOR T-1000 16\n\nTERMINATOR T-800 17                       \n\nTERMINATOR T-800 18\n\nTERMINATOR T-1000 19\n\nTERMINATOR T-800 20\n</code></pre>\n\n<p>Can someone please explain.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nstruct Link {\nchar robot[15];\nchar terminatortyp[10];\nint idnr;\nstruct Link *next;\n};\nstruct Link *first = NULL;\n\nint main(void) {\nint antal = 0;\nstruct Link a;\nFILE *tsin = fopen(\"textfil1R.txt\", \"r\");\nif (tsin == NULL) {\n    printf(\"Kunde inte l\u00e4sa filen 'textfil.txt'.\\n\");\n    exit(EXIT_FAILURE);\n}\n\nstruct Link *temp;\nwhile (fgets(a.robot, sizeof a.robot, tsin) != NULL &amp;&amp; fgets(a.terminatortyp, sizeof a.terminatortyp, tsin) != NULL &amp;&amp; fscanf(tsin, \"%d\", &amp;a.idnr) != EOF)\n{\n    temp = malloc(sizeof(struct Link));\n    *temp-&gt;robot = a.robot;\n    *temp-&gt;terminatortyp = a.terminatortyp;\n    temp-&gt;idnr = a.idnr;\n    temp-&gt;next = first;\n    first = temp;\n\n    ++antal;\n}\nfclose(tsin);\n\nstruct node *p; \np = first; \nwhile (p != NULL)\n{\n    printf(\"%s\", a.robot);\n    printf(\"%s\", a.terminatortyp);\n    printf(\"%d\", a.idnr);\n    temp = temp-&gt;next;\n}\n\nprintf(\"%d\", antal);\ngetch();\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "string", "pointers", "struct", "scanf"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1498591786, "post_id": 44788271, "comment_id": 76557526, "body": "<code>person_t.firstname</code> is a <i>pointer</i>, but you haven&#39;t pointed it at any allocated memory."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1498591843, "post_id": 44788271, "comment_id": 76557550, "body": "@JonathonReinhart he specifically said he allocated memory for each of the pointers. I&#39;m guessing that&#39;s what <code>initialize()</code> does."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 1, "creation_date": 1498591973, "post_id": 44788271, "comment_id": 76557625, "body": "You better to use <code>strsep()</code> and manually do the parsing."}, {"owner": {"reputation": 9, "user_id": 7230261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/830c45062309a4526b7624bad32ddc1f?s=128&d=identicon&r=PG&f=1", "display_name": "couchPotato", "link": "https://stackoverflow.com/users/7230261/couchpotato"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1498591998, "post_id": 44788271, "comment_id": 76557646, "body": "@PatrickRoberts Yes, that is correct"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 3, "creation_date": 1498592020, "post_id": 44788271, "comment_id": 76557656, "body": "You&#39;d better show us that <code>initialize()</code> function."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498592244, "post_id": 44788271, "comment_id": 76557783, "body": "Reporting the return value of <code>scanf()</code> would be a good step.  <code>int cnt = scanf(...   printf(&quot;%d\\n&quot;,cnt):</code>  Post input given, and output seen with <code>printf(&quot;%s&quot;, person-&gt;firstname);</code> to add clarity to this post."}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 1, "creation_date": 1498592270, "post_id": 44788271, "comment_id": 76557796, "body": "The problem with scanf (at least in how you&#39;re using it) -- if you allocate 20 bytes for the buffer, and someone types in a 100 byte string, then the program will happily overwrite the 80 bytes following where the buffer was allocated (causing all kinds of memory problems).   You can use <code>%20s</code> to limit the number of characters stored..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1498592409, "post_id": 44788271, "comment_id": 76557876, "body": "No, it is not (directly) related to the fact that the pointers passed to <code>scanf()</code> are stored in structure members."}, {"owner": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 1, "creation_date": 1498592473, "post_id": 44788271, "comment_id": 76557916, "body": "Why do you have to use <code>scanf</code> instead of <code>fgets</code>?"}, {"owner": {"reputation": 9, "user_id": 7230261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/830c45062309a4526b7624bad32ddc1f?s=128&d=identicon&r=PG&f=1", "display_name": "couchPotato", "link": "https://stackoverflow.com/users/7230261/couchpotato"}, "reply_to_user": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1498592516, "post_id": 44788271, "comment_id": 76557938, "body": "@jamesdlin Just did that."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1498592570, "post_id": 44788271, "comment_id": 76557970, "body": "<a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html</a>"}, {"owner": {"reputation": 9, "user_id": 7230261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/830c45062309a4526b7624bad32ddc1f?s=128&d=identicon&r=PG&f=1", "display_name": "couchPotato", "link": "https://stackoverflow.com/users/7230261/couchpotato"}, "reply_to_user": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 0, "creation_date": 1498592591, "post_id": 44788271, "comment_id": 76557983, "body": "@Dale My teacher asked us to..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1498592745, "post_id": 44788271, "comment_id": 76558048, "body": "Note that your <code>initialize()</code> function assigns two different values to the <code>lastname</code> member, and fails to intialize the <code>address</code> member.  This leads to undefined behavior when you try to scan input into the space pointed to by the uninitialized <code>address</code> pointer."}, {"owner": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 1, "creation_date": 1498592920, "post_id": 44788271, "comment_id": 76558149, "body": "if this is homework, then I would suggest reading more about scanf to understand it.  I will be better for you in the long run to really understand it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1498592969, "post_id": 44788271, "comment_id": 76558173, "body": "Having fixed that issue in <code>initialize()</code>, I cannot reproduce the behavior you describe."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498593047, "post_id": 44788271, "comment_id": 76558209, "body": "What is the input used?"}, {"owner": {"reputation": 9, "user_id": 7230261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/830c45062309a4526b7624bad32ddc1f?s=128&d=identicon&r=PG&f=1", "display_name": "couchPotato", "link": "https://stackoverflow.com/users/7230261/couchpotato"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1498593070, "post_id": 44788271, "comment_id": 76558222, "body": "@JohnBollinger I stared at the code for an hour and didn&#39;t notice that - thank you! Fixed that and now it&#39;s working :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1498593096, "post_id": 44788271, "comment_id": 76558232, "body": "<code>person-&gt;gender = malloc(1);</code> is too small for a string read via <code>scanf()</code> and  <code>&quot;%s&quot;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 7, "creation_date": 1498593299, "post_id": 44788271, "comment_id": 76558330, "body": "@John <a href=\"https://stackoverflow.com/questions/44788271/strings-read-with-scanf-not-stored-properly#comment76557796_44788271\">comment</a> mis-leads - off-by-one.  &quot; if you allocate 20 bytes for the buffer,&quot; --&gt; &quot;You can use <code>&quot;%19s&quot;</code> to limit the number of characters &quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498720934, "post_id": 44788271, "comment_id": 76617459, "body": "when calling any of the heap allocation functions (malloc, calloc, realloc), always check (!=NULL) the returned value to assure the operation was successful/"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498721254, "post_id": 44788271, "comment_id": 76617652, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value (not the parameter values) to assure the operation was successful.  2) when using the &quot;%s&quot; input conversion specifier, always include a MAX CHARACTERS modifier that is one less than the length of the input field to avoid a buffer overrun.  Such overrun is undefined behavior and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498721304, "post_id": 44788271, "comment_id": 76617692, "body": "please post an actual/typical input"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498721523, "post_id": 44788271, "comment_id": 76617837, "body": "<i>but they seem to not be stored where I&#39;d like them to.</i>   Show us the incorrect results AND what was actually entered."}, {"owner": {"reputation": 9, "user_id": 7230261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/830c45062309a4526b7624bad32ddc1f?s=128&d=identicon&r=PG&f=1", "display_name": "couchPotato", "link": "https://stackoverflow.com/users/7230261/couchpotato"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499156788, "post_id": 44788271, "comment_id": 76778870, "body": "@user3629249 I don&#39;t think there would be anything useful in doing that; the problem - in the initialize() function - was already solved by replacing person-&gt;lastname = malloc(50); with person-&gt;address = malloc(50);"}], "owner": {"reputation": 9, "user_id": 7230261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/830c45062309a4526b7624bad32ddc1f?s=128&d=identicon&r=PG&f=1", "display_name": "couchPotato", "link": "https://stackoverflow.com/users/7230261/couchpotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498674362, "creation_date": 1498591400, "last_edit_date": 1498674362, "question_id": 44788271, "link": "https://stackoverflow.com/questions/44788271/strings-read-with-scanf-not-stored-properly", "title": "Strings read with scanf not stored properly", "body": "<p>I am trying to read a few strings in the same <code>scanf()</code> but they seem to not be stored where I'd like them to. </p>\n\n<p>My function:</p>\n\n<pre><code>typedef struct per {\n  char *firstname, *lastname, *gender, *phone, *address;\n  struct per *next, *previous;\n} person_t;\n\nperson_t head;\nperson_t tail;\n\n void initialize(person_t *person) {\n        person-&gt;firstname = malloc(20);\n        person-&gt;lastname = malloc(20);\n        person-&gt;gender = malloc(1);\n        person-&gt;phone = malloc(15);\n        person-&gt;lastname = malloc(50);\n    }\nvoid insert() {\n  person_t *person = malloc(sizeof(person_t));\n  person-&gt;next = &amp;tail;\n  person-&gt;previous = tail.previous;\n  tail.previous = person;\n  (person-&gt;previous)-&gt;next = person;\n\n  initialize(person);\n\n  scanf(\"%s %s %s %s %s\", person-&gt;firstname, person-&gt;lastname,\n    person-&gt;gender, person-&gt;phone, person-&gt;address); //END WITH ctrl-C\n\n  printf(\"%s\", person-&gt;firstname);\n}\n</code></pre>\n\n<p>When I try to print the values in <code>person-&gt;firstname</code>, for example, all I get is garbage. I did allocate memory to each of those pointers. </p>\n\n<p>I've read some things about <code>scanf</code> and it seems that it's not that great and all but I have to use it in this case. I don't understand the problems that come with it, however - something about buffers? Everything I read about it seems a little confusing.</p>\n\n<p>Do you think the problem is related to the fact that it's reading the values into a <code>struct</code>? I'm saying this because it's the first time I've try to use that and, well, it's not working.</p>\n"}, {"tags": ["c", "arrays", "struct", "assignment-operator"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1498591275, "post_id": 44788195, "comment_id": 76557242, "body": "1. First rule of C programming <b>do not</b> <code>typedef</code> pointers. 2. Second rule of C programming <b>do not</b> use <code>_t</code> for the name of custom types (see POSIX). 3. Third rule -- see 1 and 2."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1498591330, "post_id": 44788195, "comment_id": 76557268, "body": "Make an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please. With what you provided there is too much guessing going on."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 4, "creation_date": 1498591560, "post_id": 44788195, "comment_id": 76557399, "body": "@0andriy: I agree with the first rule, not with the second, that would be a rule for the POSIX programmer, and there is C beyond POSIX. I&#39;d say that the second rule is : <b>do not</b> <code>typedef</code> arrays!."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1498592032, "post_id": 44788195, "comment_id": 76557667, "body": "You are attempting to assign a value of type <code>UINT8*</code> to an lvalue of type <code>UINT8[5]</code>.  Arrays and pointers are not the same thing; the assignment is invalid."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1498592189, "post_id": 44788195, "comment_id": 76557757, "body": "That&#39;s what happen when you try to obfuscate your code by unnecessary typedefing pointers and arrays."}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 2, "last_activity_date": 1498592332, "creation_date": 1498592332, "answer_id": 44788519, "question_id": 44788195, "link": "https://stackoverflow.com/questions/44788195/why-is-there-an-error-incompatible-types-when-assigning-to-type-p-name-t-from/44788519#44788519", "title": "Why is there an error: incompatible types when assigning to type &#39;P_Name_t&#39; from type &#39;UINT8 *&#39;", "body": "<p>Apart from hiding it behind complicated structs and pointers,<br>\nyou are basically trying to do this:</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nint main(void)\n{\n    char a[5];\n    char b[5]={'a', 'b', 'c', 'd', 'e'};\n\n    // version 1 works\n    memcpy(a, b, sizeof(b)); // assuming that a and b are same size.\n\n    // version 2 gives the same error as you quote\n    //a=b;\n\n    return 0;    \n}\n</code></pre>\n\n<p>It gives the same error.\nWhile array identifiers used as R-values decay to pointers,\nyou cannot \"write to the pointer\" representing an array as L-value.</p>\n\n<p>Besides, what do you want to achieve?\nWhat you anyway need to do is to copy the content of one array to the other.\nUse memcpy() or any other method to do that.</p>\n"}, {"comments": [{"owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "edited": false, "score": 0, "creation_date": 1498610753, "post_id": 44788686, "comment_id": 76564739, "body": "For the benefit of this thread and future answer seekers. <code>LogEntry-&gt;NameOfPart</code> is an array of 5 elements, namely  <code>LogEntry-&gt;NameOfPart[0]&#39;, </code>LogEntry-&gt;NameOfPart[1]&#39;, <code>LogEntry-&gt;NameOfPart[2]&#39;, </code>LogEntry-&gt;NameOfPart[3]&#39;, <code>LogEntry-&gt;NameOfPart[4]&#39;, </code>LogEntry-&gt;NameOfPart[5]&#39;. &#39;PN_ChipID[0].NameOfPart` is similar &#39;PN_ChipID[0].NameOfPart[0]&#39;, &#39;PN_ChipID[0].NameOfPart[1]&#39;, &#39;PN_ChipID[0].NameOfPart[2]&#39; and so on.. So the way to copy this is to  run it through a loop copying element by element  <code>PN_ChipID[0].NameOfPart[i] = LogEntry-&gt;NameOfPart[i];</code>"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1498628723, "last_edit_date": 1498628723, "creation_date": 1498592911, "answer_id": 44788686, "question_id": 44788195, "link": "https://stackoverflow.com/questions/44788195/why-is-there-an-error-incompatible-types-when-assigning-to-type-p-name-t-from/44788686#44788686", "title": "Why is there an error: incompatible types when assigning to type &#39;P_Name_t&#39; from type &#39;UINT8 *&#39;", "body": "<blockquote>\n<pre><code>incompatible types when assigning to type 'P_Name_t' [...]\n</code></pre>\n  \n  <p>[...] why i get the error[?] The <code>LogEntry-&gt;NameOfPart</code> is of type <code>P_Name_t</code> and <code>PN_ChipID[0].NameOfPart</code> is of the same type.</p>\n</blockquote>\n\n<p><code>P_Name_t</code> is an array, namely of 5 <code>unit8_t</code>.</p>\n\n<p><code>PN_ChipID[0].NameOfPart</code> is of type <code>P_Name_t</code>.</p>\n\n<p>So this line</p>\n\n<pre><code>PN_ChipID[0].NameOfPart = LogEntry-&gt;NameOfPart;\n</code></pre>\n\n<p>tries to assign to an array, namely to <code>PN_ChipID[0].NameOfPart</code>.</p>\n\n<p>In C it is <em>not possible</em> to assign to an array, hence the error during compilation of the above line.</p>\n"}, {"tags": [], "owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "is_accepted": false, "score": 0, "last_activity_date": 1498611128, "last_edit_date": 1498611128, "creation_date": 1498610766, "answer_id": 44792013, "question_id": 44788195, "link": "https://stackoverflow.com/questions/44788195/why-is-there-an-error-incompatible-types-when-assigning-to-type-p-name-t-from/44792013#44792013", "title": "Why is there an error: incompatible types when assigning to type &#39;P_Name_t&#39; from type &#39;UINT8 *&#39;", "body": "<p>For the benefit of this thread and future answer seekers. <code>LogEntry-&gt;NameOfPart</code> is an array of 5 elements, namely:</p>\n\n<pre><code>LogEntry-&gt;NameOfPart[0]\nLogEntry-&gt;NameOfPart[1] \nLogEntry-&gt;NameOfPart[2] \nLogEntry-&gt;NameOfPart[3]\nLogEntry-&gt;NameOfPart[4]\n</code></pre>\n\n<p>and </p>\n\n<p><code>PN_ChipID[0].NameOfPart</code> is similar </p>\n\n<pre><code>PN_ChipID[0].NameOfPart[0] \nPN_ChipID[0].NameOfPart[1]\nPN_ChipID[0].NameOfPart[2]\nPN_ChipID[0].NameOfPart[3]\nPN_ChipID[0].NameOfPart[4]\n</code></pre>\n\n<p>So the way to copy this is to  run it through a loop copying element by element</p>\n\n<pre><code>for i=....\n{\n  PN_ChipID[0].NameOfPart[i] = LogEntry-&gt;NameOfPart[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 44788686, "answer_count": 3, "score": 1, "last_activity_date": 1498628764, "creation_date": 1498591105, "last_edit_date": 1498628764, "question_id": 44788195, "link": "https://stackoverflow.com/questions/44788195/why-is-there-an-error-incompatible-types-when-assigning-to-type-p-name-t-from", "title": "Why is there an error: incompatible types when assigning to type &#39;P_Name_t&#39; from type &#39;UINT8 *&#39;", "body": "<p>I don't understand why I am getting the error above and how to fix it. Please help.</p>\n\n<pre><code>//STRUCTURES\ntypedef UINT8 P_Name_t[5];\ntypedef UINT8 ChipSN_t[3]; \n\ntypedef struct                   \n{  \n   ChipSN_t  ChipSN; \n   &lt;other members&gt;   \n} ChipIdent_t;\n\n\ntypedef struct Data_t              \n{ \n   ChipIdent_t      ReadOnlyMemID;\n    &lt;other members&gt;   \n} Data_t;\n\n\ntypedef struct                \n{\n   P_Name_t NameOfPart;   \n   &lt;other members&gt;\n} Log_t;\n\nData_t     Data_Src;\n\ntypedef struct\n{\n   P_Name_t       NameOfPart;           \n   ChipSN_t       ChipSN;   \n}PartNum_ID_t;\n\n\n//VARIABLE DECALARTION\nPRIVATE PartNum_ID_t PN_ChipID[12]; \nPRIVATE Log_t   *LogEntry = NULL;               \n\n\n//Usage in code\nPN_ChipID[0].NameOfPart = LogEntry-&gt;NameOfPart; \nPN_ChipID[0].ChipSN = Data_Src.ReadOnlyMemID.ChipSN;\n</code></pre>\n\n<p>I don't understand why I get the error. The <code>LogEntry-&gt;NameOfPart</code> is of type <code>P_Name_t</code> and <code>PN_ChipID[0].NameOfPart</code> is of the same type. I don't know if I am missing something here. Please explain. </p>\n"}, {"tags": ["c", "pointers", "random", "casting", "dynamic-allocation"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 3, "creation_date": 1498591405, "post_id": 44788173, "comment_id": 76557316, "body": "<code>pos</code> is only allocated to the size of one <code>int</code>. If <code>p</code> is ever &gt; 0 then <code>*(pos+p)=i;</code> is undefined behavior"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498591555, "post_id": 44788173, "comment_id": 76557394, "body": "<code>max_elem</code> seem a bit oversized to me to find a max element in an array... Why do you need to <i>dynamically</i> allocate local variables like <code>pos</code>? To add more possible bugs?"}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498591667, "post_id": 44788173, "comment_id": 76557447, "body": "@yano So I have to use calloc? Sorry, I&#39;m a newbie and I did&#39;t understant well what you&#39;ve said."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1498591680, "post_id": 44788173, "comment_id": 76557456, "body": "I suggest you learn some debugging skills. First write down step-by-step what you expect your code to do. Then use a debugger or cout statements to verify what your code actually does. Finally, figure out why what you expect differs from the actual results."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498591879, "post_id": 44788173, "comment_id": 76557574, "body": "@EugeneSh. I&#39;ve used dynamic allocation because I didn&#39;t want to create an n-size static array"}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1498591953, "post_id": 44788173, "comment_id": 76557614, "body": "@Code-Apprentice I&#39;ve debugged manually the code many times but I can&#39;t figure out the errors, that&#39;s why I&#39;m asking here"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498592079, "post_id": 44788173, "comment_id": 76557699, "body": "What? <code>pos</code> is a pointer to a <i>single</i> integer. At least this is how you allocate it. But I see now, this is exactly what @yano is talking about..."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498592452, "post_id": 44788173, "comment_id": 76557904, "body": "@EugeneSh. so how have I to allocate pos to use it like a dynamic array (because I don&#39;t prior know how many times &#39;max&#39; will show)? I tought you could do it with malloc. Anyway thanks so much for replying!"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498592548, "post_id": 44788173, "comment_id": 76557960, "body": "How many <code>int</code>s do you want to allocate? Either you&#39;ll know that at compile time (in which case you should just create a static array in automatic storage), or you&#39;ll figure that out during runtime. Currently, you&#39;re only allocating 1, so any access beyond 1 is undefined behavior. AFAIK <code>calloc</code> is identical to <code>malloc</code> except <code>calloc</code> initializes the memory to 0 as well. That won&#39;t address your UB problem."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498593056, "post_id": 44788173, "comment_id": 76558215, "body": "@yano yes, I could use a static array, but I want to use just the memory I need: I don&#39;t know how many &#39;max&#39; rand() will create, so I want that p stores how many time &#39;max&#39; occurred and pos stores the positions. Was I clear enough? Many thanks!"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498594782, "post_id": 44788173, "comment_id": 76559130, "body": "I think I understand. So you want <code>pos</code> to store the positions of all the max values? The simplest (although not very efficient) is to iterate through the array 3 times. First time through, simply find the max value. Second time through, find how many occurrences of the max value there are and store that to <code>p</code>, then do <code>pos = malloc(sizeof(int)*p);</code>. Finally, during the third time through, you can store the position of each max value in <code>pos</code>. I&#39;m sure there are more efficient ways of doing this than looping through the array 3 times."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498596443, "post_id": 44788173, "comment_id": 76559953, "body": "@yano yes, that&#39;s the easiest way, but you can also use a static array to store the position  and my code, modified, should work well. The matter is that I want a dynamic array, and I thought I could do it using malloc in that way."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498596833, "post_id": 44788173, "comment_id": 76560171, "body": "you can, that&#39;s what I described. Perhaps I don&#39;t understand what you&#39;re asking. With dynamic memory allocation, you still have to tell it how much memory you want. &quot;Dynamic&quot; doesn&#39;t mean your memory will dynamically grow as necessary; it means you&#39;re allocating it during runtime because you won&#39;t know how much you need until runtime, but it&#39;s still a fixed size. If <code>malloc(sizeof(int))</code> doesn&#39;t return <code>NULL</code>, the only guarantee you have is a memory chunk that can store one and only one int. Anything beyond that and you&#39;re writing into memory you don&#39;t own."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498597232, "post_id": 44788173, "comment_id": 76560370, "body": "@yano ok, that&#39;s the point then. So is there any way to make &quot;memory dynamically grow as necessary&quot;? And what about this: <a href=\"https://i.stack.imgur.com/H5dON.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/H5dON.png</a>  ? Thanks a lot for the replies!"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498597591, "post_id": 44788173, "comment_id": 76560557, "body": "nope, not in <code>c</code> :),, it&#39;s the lowest of the high-level languages. In <code>c++</code>, a <code>std::vector</code> will dynamically grow under the hood. None of that happens for free, however. If you want to change the size of dynamically allocated memory during runtime in <code>c</code>, use <a href=\"https://linux.die.net/man/3/realloc\" rel=\"nofollow noreferrer\"><code>realloc</code></a>, just make sure you use it correctly. Core dump looks like you seg faulted... that&#39;s the kind of thing that can happen when you access memory out of bounds."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1498605221, "post_id": 44788173, "comment_id": 76563449, "body": "@yano ok, thanks! :)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498596855, "post_id": 44788910, "comment_id": 76560182, "body": "Thanks! Anyway, this is another way to code it. Can you please help me  to fix my code, the &quot;way&quot; I&#39;ve thought it?"}, {"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "reply_to_user": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498600878, "post_id": 44788910, "comment_id": 76562105, "body": "I edited my answer and I pointed out the main issues of your second example."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498609899, "post_id": 44788910, "comment_id": 76564547, "body": "I think it&#39;s not over yet. I&#39;ve made a lot of tests (all of them with same input) and seems that both with <a href=\"http://ideone.com/j9zkIT\" rel=\"nofollow noreferrer\">yours</a> and <a href=\"https://ideone.com/N0qnM1\" rel=\"nofollow noreferrer\">mine</a> when there are more than 1 occurrence of &#39;max&#39; we get wrong or incomplete output. Anyhow now I can use big arrays."}, {"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "reply_to_user": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498631948, "post_id": 44788910, "comment_id": 76570988, "body": "I tested it too and for me it works very well. As I see, <a href=\"https://ideone.com/N0qnM1\" rel=\"nofollow noreferrer\">your</a> example fails because the <a href=\"http://en.wikipedia.org/wiki/Floating_point#IEEE_754:_floating_point_in_modern_computers\" rel=\"nofollow noreferrer\">precision</a> of <code>float</code>. You may see the same number on your output because the number of printed digits but in comparison they can be different numbers."}, {"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "reply_to_user": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498633345, "post_id": 44788910, "comment_id": 76571739, "body": "To round your <code>float</code> values to specific number of digits after the decimal point, use <a href=\"https://linux.die.net/man/3/round\" rel=\"nofollow noreferrer\"><code>roundf</code></a>."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498644881, "post_id": 44788910, "comment_id": 76579242, "body": "Ok, I&#39;ve edited with &quot;*(vett+i)=(roundf(rand_float(&amp;x1, &amp;x2)*100)/100);&quot; for a precision of two decimals. But &quot;max&quot; is still a 22 decimals (if I&#39;ve counted it right ahah) number. I want that the number will be stored in &quot;vett&quot; with two decimals, and not just print (at this point I could have used %.2f in printf). Am I right? Thanks"}, {"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "reply_to_user": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498647604, "post_id": 44788910, "comment_id": 76581034, "body": "<a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">Floating point numbers</a> are stored in very different way than and <code>int</code>. You can print as many decimals as you like even if your <code>float</code> is rounded to two decimals."}, {"owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "edited": false, "score": 0, "creation_date": 1498649543, "post_id": 44788910, "comment_id": 76582232, "body": "Ok, the code should work fine then. Thanks so much!!"}], "tags": [], "owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "is_accepted": true, "score": 1, "last_activity_date": 1498602198, "last_edit_date": 1498602198, "creation_date": 1498593755, "answer_id": 44788910, "question_id": 44788173, "link": "https://stackoverflow.com/questions/44788173/finding-max-element-in-an-array/44788910#44788910", "title": "Finding max element in an array", "body": "<p>Let simplify the problem a bit.</p>\n\n<blockquote>\n  <p>I have an array and I have to find the largest element in it, tell how many times it is in and in what position. I have to use pointers and dynamic memory allocation.</p>\n</blockquote>\n\n<p>So, in the worst case when your array contains same elements, you'll have same number of positions as elements. If you don't need to optimize your code to memory usage, then you can allocate two arrays with same lengths (one for numbers and one for positions).</p>\n\n<p>The next simplification option is to find the maximum while you filling your array. (No matter the fillig method uses random numbers of reads user input, you can determine the maximum while inserting elements one-by-one into your array.)</p>\n\n<p>Maybe you can find more simplification options but with these you can leave your <code>max_elem</code> function behind:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;float.h&gt; /* for FLT_MIN */\n\nvoid assert_alloc(void* ptr) {\n    if(ptr == NULL) {\n        printf(\"No memory is allocated.\\n\");\n        exit(0);\n    }\n}\n\nint main() {\n    int i, n, k = 0, *positions;\n    float max = FLT_MIN, *elements; /* max is now the smallest possible float */\n\n    printf(\"Input total number of elements(1 to 100): \");\n    scanf(\"%d\", &amp;n);\n\n    /* allocate array of same size for numbers and for positions */\n    elements = (float*)calloc(n, sizeof(float));\n    assert_alloc(elements);\n\n    positions = (int*)calloc(n, sizeof(int));\n    assert_alloc(positions);\n\n    /* fill the array and find the maximum meanwhile */\n    for(i = 0; i &lt; n; ++i) {\n        printf(\"Number %d: \", i + 1);\n        scanf(\"%f\", elements + i);\n\n        if(max &lt; *(elements + i))\n            max = *(elements + i);\n    }\n    printf(\"\\nmax element is %f, \", max); /* max is already known */\n\n    /* find the positions of the maximal number */\n    for(i = 0; i &lt; n; ++i) {\n        if(max == *(elements + i)) {\n            *(positions + k) = i;\n            k++;\n        }\n    }\n\n    /* print the positions of the maximal number */\n    if(k &gt; 1) {\n        printf(\"%d times in position\\n\", k);\n        for(i = 0; i &lt; k; i++)\n            printf(\"%d  \", *(positions + i) + 1);\n    }\n    else {\n        printf(\"in position %d\", *positions + 1);\n    }    \n    printf(\"\\n\");\n\n    free(elements);\n    free(positions);\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>I checked your code and it has two issues. The main issue is inside your <code>max_elem</code> function where you have to use either <code>calloc</code> or multiply the <code>sizeof(int)</code> by <code>n</code>:</p>\n\n<pre><code>pos = (int*)malloc(n * sizeof(int));\n</code></pre>\n\n<p>After doing this, your second example will work fine with <code>float</code> types. The reason why it won't work for <code>int</code> types is that your <code>max_elem</code> accepts only <code>float</code> pointers. You pass your <code>int</code> pointer to that function as <code>max_elem(n, (float*)vett);</code> which is wrong due to <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_pointer_arithmatic.htm\" rel=\"nofollow noreferrer\">pointer arithmetics</a> and because the <code>int</code> and <code>float</code> represented in the memory in different way. To solve this issue, declare your <code>vett</code> pointer as <code>float*</code> regardless of whether you'll fill it with <code>int</code> or <code>float</code> values.</p>\n\n<p><kbd><a href=\"http://ideone.com/5Ti0UI\" rel=\"nofollow noreferrer\">Live Demo</a></kbd></p>\n"}], "owner": {"reputation": 23, "user_id": 7514059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6oYB6.jpg?s=128&g=1", "display_name": "accr0", "link": "https://stackoverflow.com/users/7514059/accr0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 44788910, "answer_count": 1, "score": 2, "last_activity_date": 1498602198, "creation_date": 1498591016, "last_edit_date": 1498591446, "question_id": 44788173, "link": "https://stackoverflow.com/questions/44788173/finding-max-element-in-an-array", "title": "Finding max element in an array", "body": "<p>I have an array and I have to find the largest element in it, tell how many times it is in and in what position. I have to use pointers and dynamic memory allocation.</p>\n\n<p>It doesn't work when the array is filled randomly, but works fine when filled manually.</p>\n\n<p>This code works properly: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid max_elem (int n, float* vett) {\n\n  int i=0, *pos, p=0, n_ele_pos;\n  float max=*(vett);\n\n  pos=(int*)malloc(sizeof(int));\n  if (pos==NULL) {printf(\"BUM\\n\" ); exit (0);}\n  *(pos)=0;\n  for (i=1; i&lt;n; i++) {\n    if (*(vett+i)&gt;max) {\n      max=*(vett+i);\n      p=0;\n      *(pos)=i;\n    }\n    else  if (*(vett+i)==max) {\n      p++;\n      *(pos+p)=i;\n    }\n  }\n  if (p==0) {\n    printf(\"\\nmax element is %f, in position %d  \", max, *pos+1);\n  }\n  else {\n    printf(\"\\n max element %f, %d times in position\\n\", max, p+1);\n    for (i=0; i&lt;p+1; i++) {\n    printf(\"%d  \", *(pos+i)+1);\n    }\n  }\n  printf(\"\\n\\n\");\n  free(pos);\n}\n\nint main()\n{\n    int i,n;\n    float *element;\n    printf(\"\\n\\n Pointer : Find the largest element using Dynamic Memory Allocation :\\n\");\n    printf(\"-------------------------------------------------------------------------\\n\");\n    printf(\" Input total number of elements(1 to 100): \");\n    scanf(\"%d\",&amp;n);\n    element=(float*)calloc(n,sizeof(float));  // Memory is allocated for 'n' elements\n    if(element==NULL)\n    {\n        printf(\" No memory is allocated.\");\n        exit(0);\n    }\n    printf(\"\\n\");\n    for(i=0;i&lt;n;++i)\n    {\n       printf(\" Number %d: \",i+1);\n       scanf(\"%f\",element+i);\n    }\n\n    max_elem (n, element);\n    return 0;\n}\n</code></pre>\n\n<p>but the next one doesn't. I have to fill the array with random numbers in a specific range decided by me, even from decimal to decimal extrems for integers random numbers (yes, I know it doesn't make much sense practically). Search when filled with decimal numbers works fine sometimes, with integers I would have just 0s. </p>\n\n<p>Here the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nfloat rand_float (float *, float *);\nint rand_int (float *, float *);\nvoid min_max(float *, float *, float *, float *);\nint num_intero(float);\nvoid max_elem (int, float*);\n\nint main () {\n\n  int n, i, t;\n  float x1, x2;\n\n  printf (\"array size:\\t\");\n  scanf (\"%d\", &amp;n);\n  printf(\"\\ninterval extremes:\\t\");\n  scanf (\"%f %f\", &amp;x1, &amp;x2);\n  do {\n    printf(\"1 for decimal random numbers, 2 for integers:\\t\");\n    scanf(\"%d\", &amp;t);\n  } while (t!=1 &amp;&amp; t!=2);\n  srand(time(NULL));\n  switch (t) {\n\n    case 1 :  {\n\n      float *vett;\n\n      vett=(float*)calloc(n, sizeof(float));\n      if (vett==NULL) {printf(\"BUM\\n\" ); exit (0);}\n      for (i=0;i&lt;n;i++) {\n        *(vett+i)=rand_float(&amp;x1, &amp;x2);\n        printf(\"%d__\\t%10f\\n\", i, *(vett+i));\n      }\n      max_elem (n, vett);\n      free(vett);\n\n      break;\n    }\n    case 2 :  {\n\n      int *vett;\n\n      vett=(int*)calloc(n, sizeof(int));\n      if (vett==NULL) {printf(\"BUM\\n\" ); exit (0);}\n      for (i=0; i&lt;n; i++) {\n        *(vett+i)=rand_int(&amp;x1, &amp;x2);\n        printf(\"%d__\\t%10d\\n\", i, *(vett+i));\n      }\n      max_elem (n, (float*)vett);\n      free (vett);\n\n      break;\n    }\n  }\n\n  return 0;\n}\n\nvoid min_max (float*x1, float *x2, float *min, float *max) {\n\n  if (*x1&lt;*x2) {\n    *min=*x1;\n    *max=*x2;\n  }\n  else {\n    *min=*x2;\n    *max=*x1;\n  }\n}\n\nfloat rand_float (float *x1, float *x2) {\n\n  float min, max;\n\n  min_max(x1, x2, &amp;min, &amp;max);\n  return ((max-min)*(float)rand()/RAND_MAX)+min;\n}\n\nint num_intero (float min) {\n\n  if (min/(int)min==1)\n    return 1; //e' intero\n  else return 0;\n}\n\nint rand_int (float *x1, float *x2) {\n\n  float min, max;\n\n  min_max(x1, x2, &amp;min, &amp;max);\n  if ((int)min==(int)max) {\n    return (int)min;\n  }\n  else  if (min==0) {\n          return (rand()%((int)(max)+1));\n        }\n        else  if (max==0) {\n                return (rand()%((int)(-min)+1)+min);  //funziona anche con ((int)(min)-1)+min\n              }\n              else if ((int)min!=(int)max) {\n                      if (num_intero (min)==1) {\n                        return (rand()%((int)(max-min)+1)+min);\n                      }\n                      else  if (num_intero (max)==0) {\n                              return (rand()%((int)(max-min))+min+1);\n                            }\n                            else return (rand()%((int)(max-min)+1)+min+1);\n              }\n}\n\nvoid max_elem (int n, float* vett) {\n\n  int i=0, *pos, p=0, n_ele_pos;\n  float max=*(vett);\n\n  pos=(int*)malloc(sizeof(int));\n  if (pos==NULL) {printf(\"BUM\\n\" ); exit (0);}\n  *(pos)=0;\n  for (i=1; i&lt;n; i++) {\n    if (*(vett+i)&gt;max) {\n      max=*(vett+i);\n      p=0;\n      *(pos)=i;\n    }\n    else  if (*(vett+i)==max) {\n      p++;\n      *(pos+p)=i;\n    }\n  }\n  if (p==0) {\n    printf(\"\\nmax element is %f, in position %d  \", max, *pos+1);\n  }\n  else {\n    printf(\"\\n max element %f, %d times in position\\n\", max, p+1);\n    for (i=0; i&lt;p+1; i++) {\n    printf(\"%d  \", *(pos+i)+1);\n    }\n  }\n  printf(\"\\n\\n\");\n  free(pos);\n}\n</code></pre>\n\n<p>In addition, when the array is big I have runtime error like this, that I don't have with the first code:\n<a href=\"https://i.stack.imgur.com/H5dON.png\" rel=\"nofollow noreferrer\">error</a></p>\n\n<p>Example:\n<a href=\"https://i.stack.imgur.com/uMO3B.png\" rel=\"nofollow noreferrer\">first code, second code and integers error(bottom)</a></p>\n\n<p>I'm on Ubuntu 16.04 (gnome) with gcc and atom editor.\nThanks and sorry.</p>\n"}, {"tags": ["c", "windows", "sockets", "tcp", "winsock"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1498591259, "post_id": 44788106, "comment_id": 76557231, "body": "By default, the standard output is line-buffered.  If you want the data dispatched to that stream to appear immediately on the console then either ensure that a newline is printed at the end or <code>fflush(stdout)</code> afterward.  If you&#39;re concerned about it in the case that the output is redirected to a file then the <code>fflush()</code> alternative is probably better, as in that case the output might well be fully buffered."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498745276, "post_id": 44788106, "comment_id": 76635154, "body": "regarding this kind of statement: <code>temp = (char*)malloc((MAXRECV + 1) * sizeof(char));</code>   1) always check (!=NULL) the returned value from <code>malloc()</code> to assure the operation was successful.  2) the expression: <code>sizeof(char)</code> is defined in the standard as 1.  multiplying anything by 1 has absolutely no effect.  suggest remove that expression. 3) the returned value has type <code>void*</code> which can be assigned to any other pointer.  Casting just clutters the code, making it much more difficult to understand, debug, etc."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498745427, "post_id": 44788106, "comment_id": 76635291, "body": "regarding: <code>strcpy(temp, buffer);</code> the contents of <code>buffer</code> is random trash.  For the call to <code>strcpy()</code> to work properly, the <code>buffer</code> must contain a &#39;\\0&#39; value .  There is no guarantee of such a character being present.  If there is no &#39;\\0&#39; in the buffer, then the result is undefined behavior and will result in overrunning the upper bound of the memory pointed to by <code>temp</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498745603, "post_id": 44788106, "comment_id": 76635433, "body": "error messages should be output to <code>stderr</code> not <code>stdout</code>  so this line: <code>printf(&quot;Could not create socket : %d&quot;, WSAGetLastError());</code> is outputting the error message to the wrong place"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1498746249, "post_id": 44788106, "comment_id": 76635957, "body": "regarding this line: <code>activity = select(0, &amp;readfds, NULL, NULL, NULL);</code>   1) the posted code seems to be missing the statement: <code>#include &lt;sys&#47;select.&gt;</code>  2)  the first parameter to <code>select()</code> &#39;nfds&#39; is: the highest-numbered file descriptor in any of the three  sets, plus 1.  SO 0 is not a valid value"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498746360, "post_id": 44788106, "comment_id": 76636047, "body": "when the server is waiting for some input from a client, it is better to use <code>accept()</code> (waiting for a new client)  and when a new client makes the connection, then pass that socket to a thread to handle"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498747033, "post_id": 44788106, "comment_id": 76636609, "body": "the contents of <code>temp</code> is never used, so all references to <code>temp</code> can be eliminated."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498747419, "post_id": 44788106, "comment_id": 76636930, "body": "None of the contents of the header file: &#39;logtext.h&#39; is used in the posted code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498748631, "post_id": 44788106, "comment_id": 76637931, "body": "regarding this, at the end of the program: <code>closesocket(s);     WSACleanup();</code>  If the program ever gets there, it is the <code>master</code> socket that still needs to be closed.  And the code should loop through the childsocket[] array, to close any sockets that are still open"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498750029, "post_id": 44788106, "comment_id": 76638980, "body": "the posted code is missing the statement: <code>#include &lt;stdlib.h&gt;</code>  for <code>exit()</code>, <code>EXIT_FAILURE</code>, <code>malloc()</code>.     the code should also be calling <code>free()</code> when preparing to exit the program"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498750130, "post_id": 44788106, "comment_id": 76639047, "body": "the posted code is missing the statement: <code>#include &lt;string.h&gt;</code> for <code>strlen()</code>, <code>strcpy()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498750267, "post_id": 44788106, "comment_id": 76639144, "body": "not sure what <code>SOCKET</code> is, but the function <code>socket()</code> returns an <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498751455, "post_id": 44788106, "comment_id": 76640016, "body": "the call to <code>getpeername()</code> changes the value in the last parameter, so that needs to be corrected before calling this function.  The function can return: -1 and the code should be checking for that value"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1498752130, "post_id": 44788106, "comment_id": 76640516, "body": "the posted output seems to indicate there is more than one instance of the program running.  Suggest calling <code>printf()</code> with the variable <code>valread</code> to see the actual number of incoming byte count read.  suggest running just one client instance while debugging the program.  Suggest identifying each echo of the client inflammation etc to include a indication of which program produced that information, including the socket number"}], "owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498590751, "creation_date": 1498590751, "question_id": 44788106, "link": "https://stackoverflow.com/questions/44788106/tcp-socket-winsock-echo-server-code-printf-only-works-with-a-delay-inserted", "title": "TCP Socket Winsock echo server code printf only works with a delay inserted", "body": "<p>I'm attempting to get this TCP Socket server code running in order to log incoming data.  However I'm having trouble understanding why the server doesn't properly print the incoming buffer (char buffer) when using printf.  The echo command that I receive back on my telnet client is exactly correct regardless if any delay is inserted.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>/*\nTCP Echo server example in winsock\nLive Server on port 8888\n*/\n#include&lt;stdio.h&gt;\n#include&lt;winsock2.h&gt;\n#include \"logText.h\"\n#include &lt;stdbool.h&gt;\n\n#define DEBUG 0;\n#pragma comment(lib, \"ws2_32.lib\") //Winsock Library\n\nint main(int argc, char *argv[])\n{\n    WSADATA wsa;\n    //SOCKET master, new_socket, client_socket[30], s;\n    SOCKET master, new_socket, client_socket[1000], s;\n    struct sockaddr_in server, address;\n    //int max_clients = 30, activity, addrlen, i, valread;\n    int max_clients = 1000; //increased to 1000 connections\n    int activity, addrlen, i, j, valread;           \n    char *message = \"ECHO Daemon v1.0 \\r\\n\";\n\n    //  bool startMessage;\n\n    //size of our receive buffer, this is string length.\n    //int MAXRECV = 1024\n    int MAXRECV = 1024;\n    //set of socket descriptors\n    fd_set readfds;\n    //1 extra for null character, string termination\n    char *buffer;\n    char *temp;\n\n//  memset(temp, '\\0', sizeof(temp));\n\n    temp = (char*)malloc((MAXRECV + 1) * sizeof(char));\n    buffer = (char*)malloc((MAXRECV + 1) * sizeof(char));\n    strcpy(temp, buffer);\n\n    for (i = 0; i &lt; max_clients; i++)\n        //for (i = 0; i &lt; 30; i++)\n    {\n        client_socket[i] = 0;\n    }\n\n    printf(\"\\nInitialising Winsock...\");\n    if (WSAStartup(MAKEWORD(2, 2), &amp;wsa) != 0)\n    {\n        printf(\"Failed. Error Code : %d\", WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"Initialised.\\n\");\n\n    //Create a socket\n    if ((master = socket(AF_INET, SOCK_STREAM, 0)) == INVALID_SOCKET)\n    {\n        printf(\"Could not create socket : %d\", WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"Socket created.\\n\");\n\n    //Prepare the sockaddr_in structure\n    server.sin_family = AF_INET;\n    //server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_addr.s_addr = inet_addr(\"192.168.100.202\");\n    server.sin_port = htons(8888);\n\n    //Bind\n    if (bind(master, (struct sockaddr *)&amp;server, sizeof(server)) == SOCKET_ERROR)\n    {\n        printf(\"Bind failed with error code : %d\", WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n    puts(\"Bind done\");\n\n    //Listen to incoming connections\n    listen(master, 3);\n\n    //Accept and incoming connection\n    puts(\"Waiting for incoming connections...\");\n\n    addrlen = sizeof(struct sockaddr_in);\n\n    while (TRUE)                            //infinite looping for socket hanndling\n    {\n        //clear the socket fd set\n        FD_ZERO(&amp;readfds);\n\n        //add master socket to fd set\n        FD_SET(master, &amp;readfds);\n\n        //add child sockets to fd set\n        for (i = 0; i &lt; max_clients; i++)\n        {\n            s = client_socket[i];\n            if (s &gt; 0)\n            {\n                FD_SET(s, &amp;readfds);\n            }\n        }\n\n        //wait for an activity on any of the sockets, timeout is NULL , so wait indefinitely\n        activity = select(0, &amp;readfds, NULL, NULL, NULL);                               //Select handles the multiple connections\n\n        if (activity == SOCKET_ERROR)\n        {\n            printf(\"select call failed with error code : %d\", WSAGetLastError());\n            exit(EXIT_FAILURE);\n        }\n\n        //If something happened on the master socket , then its an incoming connection\n        if (FD_ISSET(master, &amp;readfds))\n        {\n            if ((new_socket = accept(master, (struct sockaddr *)&amp;address, (int *)&amp;addrlen))&lt;0)\n            {\n                perror(\"accept\");\n                exit(EXIT_FAILURE);\n            }\n\n            //inform user of socket number - used in send and receive commands\n            //printf(\"New connection , socket fd is %d , ip is : %s , port : %d \\n\", new_socket, inet_ntoa(address.sin_addr), ntohs(address.sin_port));\n\n            //send new connection greeting message\n            if (send(new_socket, message, strlen(message), 0) != strlen(message))\n            {\n                perror(\"send failed\");\n            }\n\n            //puts(\"Welcome message sent successfully\");\n\n            //add new socket to array of sockets\n            for (i = 0; i &lt; max_clients; i++)\n            {\n                if (client_socket[i] == 0)\n                {\n                    client_socket[i] = new_socket;\n                    printf(\"Adding to list of sockets at index %d \\n\", i);\n                    break;\n                }\n            }\n        }\n\n        //else its some IO operation on some other socket :)\n        for (i = 0; i &lt; max_clients; i++)\n        {\n            s = client_socket[i];\n            //if client presend in read sockets             \n            if (FD_ISSET(s, &amp;readfds))\n            {\n                //get details of the client\n                getpeername(s, (struct sockaddr*)&amp;address, (int*)&amp;addrlen);\n\n                //Check if it was for closing , and also read the incoming message\n                //recv does not place a null terminator at the end of the string (whilst printf %s assumes there is one).\n                valread = recv(s, buffer, MAXRECV, 0);\n\n                if (valread == SOCKET_ERROR)\n                {\n                    int error_code = WSAGetLastError();\n                    if (error_code == WSAECONNRESET)\n                    {\n                        //Somebody disconnected , get his details and print\n                        printf(\"Host disconnected unexpectedly , ip %s , port %d \\n\", inet_ntoa(address.sin_addr), ntohs(address.sin_port));\n\n                        //Close the socket and mark as 0 in list for reuse\n                        closesocket(s);\n                        client_socket[i] = 0;\n                    }\n                    else\n                    {\n                        printf(\"recv failed with error code : %d\", error_code);\n                    }\n                }\n                if (valread == 0)\n                {\n                    //Somebody disconnected , get his details and print\n                    printf(\"Host disconnected , ip %s , port %d \\n\", inet_ntoa(address.sin_addr), ntohs(address.sin_port));\n\n                    //Close the socket and mark as 0 in list for reuse\n                    closesocket(s);\n                    client_socket[i] = 0;\n                }\n\n                //Echo back the message that came in\n                else\n                {\n                    //add null character, if you want to use with printf/puts or other string handling functions\n                    buffer[valread] = '\\0';\n                    printf(\"%s:%d - %s \\n\", inet_ntoa(address.sin_addr), ntohs(address.sin_port), buffer);\n                    send(s, buffer, valread, 0);\n                }\n            }\n        }\n    }\n\n    closesocket(s);\n    WSACleanup();\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's the server code output after sending a packet file from my telnet client:</p>\n\n<pre><code>Initialising Winsock...Initialised.\nSocket created.\nBind done\nWaiting for incoming connections...\nAdding to list of sockets at index 0\n192.168.100.202:61776 - aa\n 92.168.100.202:61776 - aaaaaaaa\n192.168.100.202:61776 - ff\n 92.168.100.202:61776 - ffffffff\n 92.168.100.202:61776 - hhhh\n192.168.100.202:61776 - k\n 92.168.100.202:61776 - kkkkkkkkk\n 92.168.100.202:61776 - l\n 92.168.100.202:61776 - oo\n</code></pre>\n\n<p>The actual file I'm sending is just a text file with fifteen lines:</p>\n\n<pre><code>aaaaaaaaaa&lt;CR&gt;&lt;LF&gt;\nbbbbbbbbbb&lt;CR&gt;&lt;LF&gt;\ncccccccccc&lt;CR&gt;&lt;LF&gt;\ndddddddddd&lt;CR&gt;&lt;LF&gt;\neeeeeeeeee&lt;CR&gt;&lt;LF&gt;\nffffffffff&lt;CR&gt;&lt;LF&gt;\ngggggggggg&lt;CR&gt;&lt;LF&gt;\nhhhhhhhhhh&lt;CR&gt;&lt;LF&gt;\niiiiiiiiii&lt;CR&gt;&lt;LF&gt;\njjjjjjjjjj&lt;CR&gt;&lt;LF&gt;\nkkkkkkkkkk&lt;CR&gt;&lt;LF&gt;\nllllllllll&lt;CR&gt;&lt;LF&gt;\nmmmmmmmmmm&lt;CR&gt;&lt;LF&gt;\nnnnnnnnnnn&lt;CR&gt;&lt;LF&gt;\noooooooooo&lt;CR&gt;&lt;LF&gt;\n</code></pre>\n\n<p>When I insert a 100ms delay from my client program, the output is at least all there:</p>\n\n<pre><code>Initialising Winsock...Initialised.\nSocket created.\nBind done\nWaiting for incoming connections...\nAdding to list of sockets at index 0\n\n192.168.100.202:61836 - aa\n 92.168.100.202:61836 - aaaaaaaa\n192.168.100.202:61836 - bbbbbb\n 92.168.100.202:61836 - bbbb\n192.168.100.202:61836 - cccccccc\n 92.168.100.202:61836 - cc\n192.168.100.202:61836 - d\n 92.168.100.202:61836 - ddddddddd\n192.168.100.202:61836 - eeeeeeee\n 92.168.100.202:61836 - ee\n192.168.100.202:61836 - fff\n 92.168.100.202:61836 - fffffff\n192.168.100.202:61836 - gggggggg\n 92.168.100.202:61836 - gg\n192.168.100.202:61836 - hhhhhhh\n 92.168.100.202:61836 - hhh\n192.168.100.202:61836 - i\n 92.168.100.202:61836 - iiiiiiiii\n192.168.100.202:61836 - jjjjjjj\n 92.168.100.202:61836 - jjj\n192.168.100.202:61836 - kkkkkkk\n 92.168.100.202:61836 - kkk\n192.168.100.202:61836 - llll\n 92.168.100.202:61836 - llllll\n192.168.100.202:61836 - mm\n 92.168.100.202:61836 - mmmmmmmm\n192.168.100.202:61836 - n\n 92.168.100.202:61836 - nnnnnnnnn\n192.168.100.202:61836 - ooooooo\n 92.168.100.202:61836 - ooo\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c", "linux", "process", "signals", "kill"], "comments": [{"owner": {"reputation": 1195, "user_id": 146698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rtqyu.png?s=128&g=1", "display_name": "James T Snell", "link": "https://stackoverflow.com/users/146698/james-t-snell"}, "edited": false, "score": 0, "creation_date": 1498589185, "post_id": 44787643, "comment_id": 76556129, "body": "What kernel is this signal for? Linux? BSD? DOS? TI83OS?"}, {"owner": {"reputation": 403, "user_id": 5752719, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jus9h.jpg?s=128&g=1", "display_name": "DevX10", "link": "https://stackoverflow.com/users/5752719/devx10"}, "reply_to_user": {"reputation": 1195, "user_id": 146698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rtqyu.png?s=128&g=1", "display_name": "James T Snell", "link": "https://stackoverflow.com/users/146698/james-t-snell"}, "edited": false, "score": 0, "creation_date": 1498589288, "post_id": 44787643, "comment_id": 76556173, "body": "It is for Linux, forgot to specify"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1498591508, "post_id": 44787643, "comment_id": 76557368, "body": "Important: <b>Read <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal-safety(7)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a></b>"}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 5752719, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jus9h.jpg?s=128&g=1", "display_name": "DevX10", "link": "https://stackoverflow.com/users/5752719/devx10"}, "edited": false, "score": 0, "creation_date": 1498590510, "post_id": 44787860, "comment_id": 76556800, "body": "Thanks for the nice answer. So if I have <code>signal(SIGKILL,CustomHandler)</code>  in the child process and <code>kill(pid, SIGKILL)</code> I can surely say that the child won&#39;t catch the SIGKILL, and will just get killed, right? (and same goes for SIGSTOP??)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 403, "user_id": 5752719, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jus9h.jpg?s=128&g=1", "display_name": "DevX10", "link": "https://stackoverflow.com/users/5752719/devx10"}, "edited": false, "score": 0, "creation_date": 1498590852, "post_id": 44787860, "comment_id": 76557006, "body": "@Ergo, it is certain that the child will not catch or ignore <code>SIGKILL</code> no matter what it or its parent does.  If that signal is delivered to it, then it will die.  If it tries to register a handler for <code>SIGKILL</code> then I expect that attempt to fail, returning <code>SIG_ERR</code>, but even if it did not, POSIX nevertheless specifies that <code>SIGKILL</code> cannot be caught (or ignored)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498592694, "post_id": 44787860, "comment_id": 76558025, "body": "The <code>SIGKILL</code> cannot be caught and the child will be killed.  The <code>SIGSTOP</code> cannot be caught, but the child will be stopped \u2014 which is not the same as being killed.  Read POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04\" rel=\"nofollow noreferrer\">signal concepts</a> and linked items."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1498589881, "creation_date": 1498589881, "answer_id": 44787860, "question_id": 44787643, "link": "https://stackoverflow.com/questions/44787643/custom-signal-handler-in-c/44787860#44787860", "title": "Custom Signal Handler in C", "body": "<blockquote>\n  <p>Can a custom handler be used for every type of signals?</p>\n</blockquote>\n\n<p>Yes, the same custom signal-handler function can be registered to handle different types of signals, up to and including all the signals that can be caught on the system in question.  Note, however, that there may be defined signals that cannot be caught.  On POSIX-conforming systems, for example, <code>SIGKILL</code> and <code>SIGSTOP</code> have this property.</p>\n\n<blockquote>\n  <p>If so,\n  assuming we create a custom handler, is it right that there wouldn't\n  be any difference between all signals if I only use the signal once\n  (or never reset the signal handler), since it would just execute my\n  handler without considering the signal in the function?</p>\n</blockquote>\n\n<p>The signal handler function is not obligated to consider the signal number in determining what to do.  It can perform the same action no matter what, or, as in your example function, it can simply pass the signal number on to some other function.  You may or may not consider the latter to be a special case of the former.</p>\n\n<p>Do note, however, that on a POSIX system, the <code>sigaction()</code> function is preferable to <code>signal()</code> for modifying signal dispositions.  Its behavior is both more flexible and more consistent than <code>signal()</code>'s over various operating systems.</p>\n"}, {"tags": [], "owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "is_accepted": false, "score": 1, "last_activity_date": 1498589975, "creation_date": 1498589975, "answer_id": 44787892, "question_id": 44787643, "link": "https://stackoverflow.com/questions/44787643/custom-signal-handler-in-c/44787892#44787892", "title": "Custom Signal Handler in C", "body": "<blockquote>\n  <p><em>Can a custom handler be used for every type of signals?</em></p>\n</blockquote>\n\n<p>Yes.  You can install a custom <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">\"signal-catching\" function</a> for all signals which can be caught.  (For example, SIGKILL and SIGSTOP may not be caught.)</p>\n\n<blockquote>\n  <p><em>[I]s it right that there wouldn't be any difference between all signals if I only use the signal once (or never reset the signal handler), since it would just execute my handler without considering the signal in the function?</em></p>\n</blockquote>\n\n<p>That depends on how you code your signal catching function.  The system will pass the caught signal to the function, so the same function could do something different upon catching a SIGTERM rather than a SIGHUP, for instance.  If your handler ignores its <em><code>sig</code></em> argument and ignores the signal environment generally (masks, stacks, dispositions), then, yes, each invocation would be like any other.</p>\n"}], "owner": {"reputation": 403, "user_id": 5752719, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jus9h.jpg?s=128&g=1", "display_name": "DevX10", "link": "https://stackoverflow.com/users/5752719/devx10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3008, "favorite_count": 0, "accepted_answer_id": 44787860, "answer_count": 2, "score": 0, "last_activity_date": 1498591352, "creation_date": 1498588995, "last_edit_date": 1498591352, "question_id": 44787643, "link": "https://stackoverflow.com/questions/44787643/custom-signal-handler-in-c", "title": "Custom Signal Handler in C", "body": "<p>Consider the following chunk of C code:</p>\n\n<pre><code>void TERMHandler(int sig){\n signal (sig, SIG_DFL);\n}\n\nmain() { \n pid_t pid;\n pid = fork()\n\nif (pid == 0) { \n     signal(SIGTERM,TERMHandler);\n     while(1); \n  }\nelse\n  {  \n   sleep(3);\n   kill(pid,SIGTERM);\n   sleep(3);\n   kill(pid,SIGTERM);\n  }\n}\n</code></pre>\n\n<p>We create a new process and distinguish between child (pid = 0) and parent.</p>\n\n<p>Can a custom handler be used for every type of signals? If so, assuming we create a custom handler, is it right that there wouldn't be any difference between all signals if I only use the signal once (or never reset the signal handler), since it would just execute my handler without considering the signal in the function?</p>\n\n<p>What I'm trying to say is, is it right that:</p>\n\n<pre><code> signal(SIGTERM,CustomHandler);\n signal(SIGTSTP,CustomHandler);\n signal(SIGHUP,CustomHandler);\n ...\n</code></pre>\n\n<p>will execute the same code when the parent runs <code>kill(pid, SomeSignal)</code>?</p>\n"}, {"tags": ["c", "usb", "libusb"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498588749, "post_id": 44787524, "comment_id": 76555859, "body": "You should be able to get this information from the protocol specification. If you don&#39;t have one, you will have to reverse-engineer it."}], "answers": [{"comments": [{"owner": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "edited": false, "score": 0, "creation_date": 1498590628, "post_id": 44787968, "comment_id": 76556874, "body": "I know that 16 bits are used for the CRC but I think I&#39;m getting 4 bytes because I&#39;m receiving data for an Isochronous Stereo Endpoint. So 2 bytes are from first channel and the other 2 bytes are from the second channel."}, {"owner": {"reputation": 787, "user_id": 1263525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHKYB.jpg?s=128&g=1", "display_name": "Shaibal", "link": "https://stackoverflow.com/users/1263525/shaibal"}, "reply_to_user": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "edited": false, "score": 0, "creation_date": 1498590774, "post_id": 44787968, "comment_id": 76556960, "body": "Ok got your point but CRC is used by your host controller for verification and based on the result it will decide whether to consider it as a good or bad packet. If its good packet, the host will store the data in the transfer descriptor (EHCI) or  transfer ring (XHCI). So no CRC is stored in your buffer."}, {"owner": {"reputation": 787, "user_id": 1263525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHKYB.jpg?s=128&g=1", "display_name": "Shaibal", "link": "https://stackoverflow.com/users/1263525/shaibal"}, "reply_to_user": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "edited": false, "score": 0, "creation_date": 1498590927, "post_id": 44787968, "comment_id": 76557044, "body": "Also I think 2 bytes from one channel and 2 bytes from other will be packed in one data packet and sent across the link. CRC is per packet and not per channel. Ultimately its one endpoint sending one packet at a time. So one CRC per data packet."}, {"owner": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "edited": false, "score": 0, "creation_date": 1498591234, "post_id": 44787968, "comment_id": 76557212, "body": "Well you have a good point. My doubt started because the ISO-In has a max packet size of 196 bytes but the corresponding ISO-Out has a max packet size of 192. I can&#39;t find where I read that those extra bytes are used for the checksum."}, {"owner": {"reputation": 787, "user_id": 1263525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHKYB.jpg?s=128&g=1", "display_name": "Shaibal", "link": "https://stackoverflow.com/users/1263525/shaibal"}, "reply_to_user": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "edited": false, "score": 0, "creation_date": 1498592557, "post_id": 44787968, "comment_id": 76557965, "body": "When you say &quot;ISO-In has a max size of 196 bytes&quot;, are you talking about your specific device or in general? If you are referring it for isochronous endpoints in general then that will be incorrect as the max size is 1024 bytes for HS USB devices. Also OUT endpoint has the same max size. Check the specification."}, {"owner": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "edited": false, "score": 0, "creation_date": 1498593287, "post_id": 44787968, "comment_id": 76558321, "body": "I&#39;m talking about my specific device. It has an Interface and alt-setting that works with a sample rate of 48 KHz, 2 channels, 16 bits depth and with a Max Packet Size of 196 bytes. So there are 48 samples * 2 of two channels * 2 bytes = 192 bytes, then my packets should be of 192 bytes. But when I read my data most of the time I get packets of 196 bytes."}, {"owner": {"reputation": 787, "user_id": 1263525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHKYB.jpg?s=128&g=1", "display_name": "Shaibal", "link": "https://stackoverflow.com/users/1263525/shaibal"}, "reply_to_user": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "edited": false, "score": 0, "creation_date": 1498595320, "post_id": 44787968, "comment_id": 76559363, "body": "Ok. You can connect a packet analyzer anyway. But I really doubt that its CRC because that defeats the whole purpose of error detection in host controller hardware. Sending the CRC to SW layer can only mean that Host controller wants to do CRC validation in SW layer which does not happen in the host controller driver as far as I know."}], "tags": [], "owner": {"reputation": 787, "user_id": 1263525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHKYB.jpg?s=128&g=1", "display_name": "Shaibal", "link": "https://stackoverflow.com/users/1263525/shaibal"}, "is_accepted": false, "score": 1, "last_activity_date": 1498590257, "creation_date": 1498590257, "answer_id": 44787968, "question_id": 44787524, "link": "https://stackoverflow.com/questions/44787524/how-to-identify-the-data-bytes-used-for-crcchecksum-in-an-usb-iso-transfer/44787968#44787968", "title": "How to identify the data bytes used for CRC(checksum) in an USB ISO-Transfer?", "body": "<p><a href=\"https://i.stack.imgur.com/YwH1F.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YwH1F.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I know that 4 of that bytes are added for the checksum</p>\n\n<blockquote>\n  <blockquote>\n    <p>Wrong. CRC is 2 bytes for data packet and 5 bits for token packet. Also CRC is never stored/forwarded in/to the user buffer. It gets stripped by the controller during verification of the CRC. So you are not going to see the CRC at all.\n    But if you still want to see the CRC, attach a USB packet analyzer and have a look at the trace.</p>\n  </blockquote>\n</blockquote>\n\n<p>1) Are these bytes added at the beginning or at the end of the packet?</p>\n\n<blockquote>\n  <blockquote>\n    <p>2 bytes are added at the end.</p>\n  </blockquote>\n</blockquote>\n\n<p>2) Do these bytes have a reserved value?</p>\n\n<blockquote>\n  <blockquote>\n    <p>No. Its calculated based on the content of the data packet</p>\n  </blockquote>\n</blockquote>\n\n<p>3) In case of losing some data bytes in the transfer. What considerations should I use for the bytes used for the checksum?</p>\n\n<blockquote>\n  <blockquote>\n    <p>If you are losing some bytes after CRC is already calculated, you are going to get USB transaction error (CRC mismatch from the host). The same transaction will be retried by the host.</p>\n  </blockquote>\n</blockquote>\n\n<p>PS - I assumed you are using high speed device</p>\n"}], "owner": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498672118, "creation_date": 1498588518, "last_edit_date": 1498672118, "question_id": 44787524, "link": "https://stackoverflow.com/questions/44787524/how-to-identify-the-data-bytes-used-for-crcchecksum-in-an-usb-iso-transfer", "title": "How to identify the data bytes used for CRC(checksum) in an USB ISO-Transfer?", "body": "<p>I'm using libusb to get data in real time from an USB audio device. My Max Packet Size is of 196 bytes. I know that 4 of that bytes are added for the checksum. I want to identify the bytes used to the checksum so I can store only the usefull data of the transfer but  I have some doubts:</p>\n\n<p>1) Are these bytes added at the beginning or at the end of the packet?</p>\n\n<p>2) Do these bytes have a reserved value?</p>\n\n<p>3) In case of losing some data bytes in the transfer. What considerations should I use for the bytes used for the checksum?  </p>\n\n<p>EDIT 1</p>\n\n<p>I have these doubts because my specific device has an Interface and alt-setting that works with a sample rate of 48 KHz, 2 channels, 16 bits depth and with a Max Packet Size of 196 bytes. </p>\n\n<p>So there are 48 samples * 2 of two channels * 2 bytes = 192 bytes</p>\n\n<p>So then my packets should be of 192 bytes but when I set my device to work with that interface and alt-setting I start to receive packets of 196 bytes.\nThe corresponding interface and alt-setting for the OUT ISO Endpoint works at a sample rate of 48 KHz, 2 channels, 16 bits depth and with a Max Packet Size of 192 bytes.</p>\n\n<p>4) If these bytes are not from the checksum why are these bytes being added? </p>\n"}, {"tags": ["c", "chess"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 5, "creation_date": 1498585756, "post_id": 44786721, "comment_id": 76554267, "body": "have you considered <code>int board[8][8]</code>?,, or is single dimension a requirement?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1498586786, "post_id": 44786721, "comment_id": 76554799, "body": "@GAURANGVYAS: A 2D array is not the same as a 1D array. Even for a variable sized array, it makes no sense not to use a 2D array."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498587400, "post_id": 44786721, "comment_id": 76555133, "body": "@Olaf My fault. Commented without properly seeing the question."}, {"owner": {"reputation": 624, "user_id": 2500182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe0258182b40700934160ccca0ba05f?s=128&d=identicon&r=PG", "display_name": "Josh Sanders", "link": "https://stackoverflow.com/users/2500182/josh-sanders"}, "edited": false, "score": 0, "creation_date": 1579943527, "post_id": 44786721, "comment_id": 105941522, "body": "I know this is super old but I disagree with &quot;there is no reason not to use a 2D array&quot;. A 2D array is laid out in memory exactly the same as a 1D array. Its literally an array of arrays. There&#39;s nothing wrong with using a 1D array as your data and choosing to draw it as a 2D visual grid. Its perfectly fine to split the data configuration from its visual representation."}], "answers": [{"tags": [], "owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "is_accepted": true, "score": 2, "last_activity_date": 1498587502, "last_edit_date": 1498587502, "creation_date": 1498585902, "answer_id": 44786801, "question_id": 44786721, "link": "https://stackoverflow.com/questions/44786721/make-1d-array-addressable-with-row-and-column/44786801#44786801", "title": "Make 1D array addressable with row and column", "body": "<p>You just have to calculate <code>row * MAX_COL + col</code> where <code>MAX_COL = 8</code>. With <code>row * MAX_COL</code> you will go into the next row, like the following figure shows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>                   1 * 8 ---                 2 * 8 ---\n                           |                         |\n|         row = 0        | v       row = 1         | v       row = 2\n| 0  1  2  3  4  5  6  7 | 8  9  10 11 12 13 14 15 | 16 ...\n</code></pre>\n\n<p>If you want a macro which uses the global variable <code>board</code>:</p>\n\n<pre><code>#define FIELD(row,col) board[(row) * 8 + (col)]\n</code></pre>\n\n<p>or as function which also uses the global defined <code>board</code> variable:</p>\n\n<pre><code>inline int FIELD (int row, int col)\n{\n   return board[row * 8 + col]\n}\n</code></pre>\n\n<p>if you want to pass the board as array to the function you can do the following, where <code>int boardArr[]</code> <a href=\"https://stackoverflow.com/a/1461449/8051589\">decays</a> to a pointer:</p>\n\n<pre><code>inline int FIELD (int boardArr[], int row, int col)\n{\n   return boardArr[row * 8 + col]\n}\n</code></pre>\n\n<hr>\n\n<p>Also you should change your macro definitions, because they are unsafe if the parameter that is passed is a value that is used in a calculation. You can read it <a href=\"https://stackoverflow.com/a/321173/8051589\">here on SO</a>. So you should use braces around the parameters <code>sq</code>:</p>\n\n<pre><code>#define ROW(sq)   ((sq) &gt;&gt; 3)\n#define COL(sq)   ((sq) &amp; 7)\n</code></pre>\n\n<p>It would be even better to use inline functions as it is also said in the SO answer.</p>\n"}, {"tags": [], "owner": {"reputation": 2622, "user_id": 1834967, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Fdxei.jpg?s=128&g=1", "display_name": "Felix Guo", "link": "https://stackoverflow.com/users/1834967/felix-guo"}, "is_accepted": false, "score": 1, "last_activity_date": 1498585997, "creation_date": 1498585997, "answer_id": 44786825, "question_id": 44786721, "link": "https://stackoverflow.com/questions/44786721/make-1d-array-addressable-with-row-and-column/44786825#44786825", "title": "Make 1D array addressable with row and column", "body": "<p>If your board is always 8x8, you can see that each <code>r</code> starts at 0, 8, 16... and each <code>c</code> is just the offset from those initial points, so given an <code>r</code> and <code>c</code>, you can calculate the array index by <code>board[(r * 8) + c]</code> to get the corresponding piece.</p>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1498586052, "creation_date": 1498586052, "answer_id": 44786836, "question_id": 44786721, "link": "https://stackoverflow.com/questions/44786721/make-1d-array-addressable-with-row-and-column/44786836#44786836", "title": "Make 1D array addressable with row and column", "body": "<p>This is best approached using a two-dimensional array because that way you can simply access <code>board[r][c]</code>.</p>\n\n<p>If you (or your professor) insist on a one-dimensional array, this macro will do what you want:</p>\n\n<pre><code>#define GET_PIECE(r, c) (board[((c) + (8) * (r))])\n</code></pre>\n\n<p>Notice how everything is wrapped in parentheses. <a href=\"http://scienceblogs.com/goodmath/2007/12/17/macros-why-theyre-evil/\" rel=\"nofollow noreferrer\">This is very important with macros!</a></p>\n\n<p>A better solution would be to use an <a href=\"https://en.wikipedia.org/wiki/Inline_function\" rel=\"nofollow noreferrer\">inline function</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6093685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e8254e88bf7183255a87a2796e893b?s=128&d=identicon&r=PG&f=1", "display_name": "shahil4242", "link": "https://stackoverflow.com/users/6093685/shahil4242"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 44786801, "answer_count": 3, "score": 0, "last_activity_date": 1498596002, "creation_date": 1498585579, "last_edit_date": 1498596002, "question_id": 44786721, "link": "https://stackoverflow.com/questions/44786721/make-1d-array-addressable-with-row-and-column", "title": "Make 1D array addressable with row and column", "body": "<p>I am writing a chess engine using an array (single dimension) in <strong>C</strong>?</p>\n\n<pre><code>#define ROW(sq)         (sq &gt;&gt; 3)\n#define COL(sq)         (sq &amp; 7)\n\nint board[64] = {\n   0,1,2,3,4,5,6,7,\n   8,9,10,11,12,13,,14,15,\n   .......................\n   .......................\n   56,57,48,59,60,61,62,63\n}\n</code></pre>\n\n<p>Now:\nTo get the row and col of number 11 I use this:</p>\n\n<pre><code>int r = ROW(11);\nint c = COL(11);\n</code></pre>\n\n<p>It gives: </p>\n\n<pre><code>r = 1\nc = 3\n</code></pre>\n\n<p>Please help me to write a function so that it takes the parameter as <code>r</code> and <code>c</code> and gives the correct square like:</p>\n\n<pre><code>sq = fnc(r,c);\nsq = fnc(1,3);\nsq = 11;\n</code></pre>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "edited": false, "score": 0, "creation_date": 1498584465, "post_id": 44786351, "comment_id": 76553583, "body": "goto!? That aside, what platform are you using, and where are you initializing your gl context? Do you just change the declaration in the shaders?"}, {"owner": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "edited": false, "score": 0, "creation_date": 1498584545, "post_id": 44786351, "comment_id": 76553622, "body": "Also can you check for errors after you create your shaders to see if they compile ok."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8221752"}, "reply_to_user": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "edited": false, "score": 0, "creation_date": 1498585174, "post_id": 44786351, "comment_id": 76553956, "body": "I use windows 8, and the context creation is done inside the window procedure. I&#39;ll check for errors and tell you if any error happened"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8221752"}, "reply_to_user": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "edited": false, "score": 0, "creation_date": 1498586251, "post_id": 44786351, "comment_id": 76554523, "body": "No sir. The glGetError() command returned GL_NO_ERROR which means no error has occurred."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8221752"}, "reply_to_user": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "edited": false, "score": 0, "creation_date": 1498590936, "post_id": 44786351, "comment_id": 76557050, "body": "Sorry, I checked the errors while running the compatibility context. I&#39;ll check again in core mode."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8221752"}, "reply_to_user": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "edited": false, "score": 0, "creation_date": 1498594469, "post_id": 44786351, "comment_id": 76558954, "body": "This time I got GL_INVALID_OPERATION error while running the old faulty code with core context. However I won&#39;t let it happen again out of this mistake as I&#39;ve found the solution."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8221752"}, "edited": false, "score": 0, "creation_date": 1498588320, "post_id": 44786900, "comment_id": 76555612, "body": "Thank you sir. I added these 3 commands before enabling the attributes and generating buffer: GLuint vao; glGenVertexArrays(1,&amp;vao); glBindVertexArray(vao); The problem is removed now. I had guessed that the vao might be the cause but I put those commands in the wrong place, &quot;after&quot; enabling the attribute arrays"}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 1, "last_activity_date": 1498586253, "creation_date": 1498586253, "answer_id": 44786900, "question_id": 44786351, "link": "https://stackoverflow.com/questions/44786351/why-core-profile-is-not-working/44786900#44786900", "title": "Why core profile is not working?", "body": "<p>Make sure you create &amp; bind a <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">vertex array object (VAO)</a> before setting up your vertex attributes:</p>\n\n<blockquote>\n  <p>A Vertex Array Object (VAO) is an OpenGL Object that stores all of the state needed to supply vertex data (with one minor exception noted below). It stores the format of the vertex data as well as the Buffer Objects (see below) providing the vertex data arrays. Note that VAOs do not copy, freeze or store the contents of the referenced buffers - if you change any of the data in the buffers referenced by an existing VAO, those changes will be seen by users of the VAO.</p>\n</blockquote>\n\n<p>VAOs are <strong>required</strong> in Core contexts but optional in Compatibility.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8221752"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 44786900, "answer_count": 1, "score": 0, "last_activity_date": 1498586253, "creation_date": 1498584263, "last_edit_date": 1498586214, "question_id": 44786351, "link": "https://stackoverflow.com/questions/44786351/why-core-profile-is-not-working", "title": "Why core profile is not working?", "body": "<p>This code works fine with compatibility profile context version 4.3 but when I switch to core, nothing is drawn, even though all of the GL functions I've used are included in the core profile. Here's the main part of code</p>\n\n<pre><code>    glClearColor(0.f, 0.f, 0.f, 0.f);\n    glClearDepth(-1.d);\n    glEnable(GL_DEPTH_TEST);\n    glDepthFunc(GL_GREATER);\n    glEnable(GL_CULL_FACE);\n    glCullFace(GL_BACK);\n    glFrontFace(GL_CCW);\n    vs= glCreateShader(GL_VERTEX_SHADER);\n    fs= glCreateShader(GL_FRAGMENT_SHADER);\n    program= glCreateProgram();\n\n    const char* vertex_shader_text=\n        \"#version 430 core\\n\"\n        \"in vec2 vPos;\"\n        \"in vec3 vCol;\"\n        \"out vec3 colour;\"\n        \"void main() {\"\n        \"colour = vCol;\"\n        \"gl_Position = vec4(vPos, 1.0, 1.0);\"\n        \"}\";\n    const char* fragment_shader_text=\n        \"#version 430 core\\n\"\n        \"in vec3 colour;\"\n        \"out vec4 frag_colour;\"\n        \"out vec4 frag_colour2;\"\n        \"void main() {\"\n        \"frag_colour = vec4(1.0, 1.0, 1.0, 0.0);\"\n        \"frag_colour2 = vec4(colour, 0.0);\"\n        \"}\";\n    glShaderSource(vs, 1, &amp;vertex_shader_text, NULL);\n    glShaderSource(fs, 1, &amp;fragment_shader_text, NULL);\n    glCompileShader(vs);\n    glCompileShader(fs);\n    glAttachShader(program, vs);\n    glAttachShader(program, fs);\n\n    glBindAttribLocation(program,0,\"vPos\");\n    glBindAttribLocation(program,1,\"vCol\");\n    glBindFragDataLocation(program,0,\"frag_colour2\");\n\n    glLinkProgram(program);\n    glUseProgram(program);\n\n    glEnableVertexAttribArray(0);\n    glEnableVertexAttribArray(1);\n\n    float vertices[] =\n    {\n        -1.f, 1.f, 1.f, 0.f, 0.f,\n        3.f-2.f*(float)sqrt(3.d), -1.f, 0.f, 1.f, 0.f,\n        1.f, 2.f*(float)sqrt(3.d)-3.f, 0.f, 0.f, 1.f\n    };\n    GLuint vertex_buffer = 0;\n    glGenBuffers(1, &amp;vertex_buffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertex_buffer);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, sizeof(float) * 5, (void*) 0);\n    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, sizeof(float) * 5, (void*) (sizeof(float) * 2));\n\nA:\n    if (GetMessage(&amp;msg, NULL, 0, 0) )\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    else return TRUE;\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glDrawArrays(GL_TRIANGLES,0,3);\n    SwapBuffers(ghDC2);\n    goto A;\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1498584078, "post_id": 44786246, "comment_id": 76553382, "body": "I would advise against this design. It&#39;s better to have a &quot;list&quot; struct with pointers to the first and last &quot;node&quot;. This lets you modify the list by passing it in, rather than working with the nodes directly"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498592961, "post_id": 44786246, "comment_id": 76558167, "body": "Normally, you&#39;d use either <code>bool add_dnodeint(dlistint_t **head, int n)</code> with a pointer to pointer argument and a non-pointer return value (or no return value \u2014 <code>void</code>), or <code>dlistint_t *add_nodeint(dlistint_t *head, int n)</code> with a simple pointer argument and a matching pointer return value (used as <code>head = add_nodeint(head, newval);</code>).  You would not normally do both at once \u2014 use a pointer to pointer argument and return a pointer value.  Note that the <code>const int n</code> is pretty much pointless because <code>n</code> is not a pointer."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 7, "last_activity_date": 1498593965, "last_edit_date": 1498593965, "creation_date": 1498584011, "answer_id": 44786292, "question_id": 44786246, "link": "https://stackoverflow.com/questions/44786246/linked-lists-single-or-double-pointer-to-the-head/44786292#44786292", "title": "Linked lists - single or double pointer to the head", "body": "<p>The reason to pass pointer to pointer to <code>head</code> is that any modification to the pointer <code>head</code> will be seen in the caller function and you do not have to return head from your function.  </p>\n\n<p>For example, consider this simple node:  </p>\n\n<pre><code>struct Node{\n    int data;\n    struct Node *next;\n};\n</code></pre>\n\n<p>A function to add a node to the list at front  </p>\n\n<pre><code>struct Node *add_node (struct Node *list, int n){\n    struct Node *new_node = malloc(sizeof(struct Node));\n    if(new_node == NULL){\n        printf(\"Memory allocation failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n    new_node-&gt;data = n;\n    new_node-&gt;next = list;\n    return new_node;\n}\n</code></pre>\n\n<p>If we need to assign the <code>new_node</code> to the <code>list</code> instead of returning it then we need to modify the above function and remove the return statement and put a statement  </p>\n\n<pre><code>list = new_node;\n</code></pre>\n\n<p>But, <strong>that will not work!</strong><br>\nThis is because in C, like all arguments, pointers are passed by value.\nThat means the <code>list</code> contains the copy of the pointer value passed to <code>add_node</code> function and not the pointer passed to this function itself.<br>\nThat's where we need pointer to pointer. </p>\n\n<pre><code>void add_node (struct Node **list, int n){\n    struct Node *new_node = malloc(sizeof(struct Node));\n    if(new_node == NULL){\n        printf(\"Memory allocation failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n    new_node-&gt;data = n;\n    new_node-&gt;next = *list;\n    *list = new_node;\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "is_accepted": false, "score": 0, "last_activity_date": 1498584176, "creation_date": 1498584176, "answer_id": 44786331, "question_id": 44786246, "link": "https://stackoverflow.com/questions/44786246/linked-lists-single-or-double-pointer-to-the-head/44786331#44786331", "title": "Linked lists - single or double pointer to the head", "body": "<p>Because if you are using <code>dlistint_t *head</code> variable instead of using <code>dlistint_t **head</code> variable in function parameter then, changes made in variable <code>head</code> in function <code>dlistint_t *add_dnodeint(dlistint_t **head, const int n);</code> will be local to this method. Since you are using <code>Node*</code> so changes done in variable <code>head</code> is local to that function. If you want to reflect these changes even after function call(which you obviously wants to) then use <code>dlistint_t **head</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 7657117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5a4e334b3c9c990b8af4a15db71754?s=128&d=identicon&r=PG&f=1", "display_name": "glyif", "link": "https://stackoverflow.com/users/7657117/glyif"}, "is_accepted": false, "score": 2, "last_activity_date": 1498584973, "creation_date": 1498584973, "answer_id": 44786548, "question_id": 44786246, "link": "https://stackoverflow.com/questions/44786246/linked-lists-single-or-double-pointer-to-the-head/44786548#44786548", "title": "Linked lists - single or double pointer to the head", "body": "<p>If you use a double pointer, you can pass in the address of the head so your functions can modify the actual pointer. This way you don't need to return the new head.</p>\n"}], "owner": {"reputation": 39, "user_id": 7717497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryV7W.jpg?s=128&g=1", "display_name": "Halina V", "link": "https://stackoverflow.com/users/7717497/halina-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2267, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1498593965, "creation_date": 1498583833, "question_id": 44786246, "link": "https://stackoverflow.com/questions/44786246/linked-lists-single-or-double-pointer-to-the-head", "title": "Linked lists - single or double pointer to the head", "body": "<p>We are given a task and a struct of linked list:</p>\n\n<pre><code>typedef struct dlistint_s\n{\n    int n;\n    struct dlistint_s *prev;\n    struct dlistint_s *next;\n} dlistint_t; \n</code></pre>\n\n<p>And the function with the following prototype:</p>\n\n<pre><code>dlistint_t *add_dnodeint(dlistint_t **head, const int n);\n</code></pre>\n\n<p>What are the advantages and why one would be using a double pointer to the head when creating a function?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498581032, "post_id": 44785405, "comment_id": 76551651, "body": "Usually a debugger is very helpful in similar cases."}, {"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "edited": false, "score": 0, "creation_date": 1498581117, "post_id": 44785405, "comment_id": 76551709, "body": "myNode in main should be allocated with new memory. And field next should be pointed to NULL."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1498581131, "post_id": 44785405, "comment_id": 76551720, "body": "Even after making changes as specified by mattn value of <code>myNode</code> will not be modified in the function. To modify it either pass <code>&amp;myNode</code> (and accordingly change functions) or make it global."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1498581325, "post_id": 44785405, "comment_id": 76551840, "body": "1) <i>A function may change the values of its parameters, but these changes cannot affect the values of the arguments.</i>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1498582942, "post_id": 44785405, "comment_id": 76552762, "body": "Also, <code>malloc(sizeof(*temp));</code> The asterisk matters."}, {"owner": {"reputation": 71, "user_id": 8091869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b908db7f23d7d8ef0c852b2a2cb1c92?s=128&d=identicon&r=PG&f=1", "display_name": "LinuxStuff", "link": "https://stackoverflow.com/users/8091869/linuxstuff"}, "edited": false, "score": 1, "creation_date": 1498584478, "post_id": 44785405, "comment_id": 76553590, "body": "have you tried debugging the code? Fundamental thing is when we pass value from one function to other it should be done by call by reference if we want the actual and formal parameters to contain the same value. Try with passing Node ** instead of Node *. The assigned memory will only be then available to the calling function."}, {"owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1498586198, "post_id": 44785405, "comment_id": 76554493, "body": "Give a look at <a href=\"https://stackoverflow.com/questions/2229498/passing-by-reference-in-c\">this</a> question regarding C as a Pass-by-reference language"}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1498583586, "post_id": 44786020, "comment_id": 76553111, "body": "And, of course, there are several other problems in the code."}], "tags": [], "owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "is_accepted": false, "score": 1, "last_activity_date": 1498583308, "last_edit_date": 1498583308, "creation_date": 1498583040, "answer_id": 44786020, "question_id": 44785405, "link": "https://stackoverflow.com/questions/44785405/why-this-linked-list-code-in-c-malfunction/44786020#44786020", "title": "why this linked list code in c malfunction?", "body": "<p>Because you are using <code>Node*</code> variable instead of using <code>Node**</code> variable in function parameter. Since you are using <code>Node*</code> so changes done in variable <code>head</code> is local to that function. If you want to reflect these changes even after function call(which you obviously wants to) then use <code>Node**</code> and use it accordingly in your code.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1498595479, "post_id": 44787688, "comment_id": 76559431, "body": "There&#39;s an alternative: <code>Node *addNode(Node *head, int x) { \u2026 }</code>, used like: <code>head = addNode(head, 23);</code>."}], "tags": [], "owner": {"reputation": 11, "user_id": 8104662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZbqZD.jpg?s=128&g=1", "display_name": "Spencer Cheng", "link": "https://stackoverflow.com/users/8104662/spencer-cheng"}, "is_accepted": false, "score": -1, "last_activity_date": 1498606086, "last_edit_date": 1498606086, "creation_date": 1498589135, "answer_id": 44787688, "question_id": 44785405, "link": "https://stackoverflow.com/questions/44785405/why-this-linked-list-code-in-c-malfunction/44787688#44787688", "title": "why this linked list code in c malfunction?", "body": "<p>As the previous poster has mentioned, it is best to use Node** variable to reflect changes after a function call. If you wanted to use Node*, you'd have to return Node* back to main to print from it.</p>\n\n<p>I pared your code down to add the 1, using AddNode, insert and DisplayLinkedList and it is now displaying correctly with the code below. </p>\n\n<p>You should also set Node* to NULL in main to initialize the empty linked list. Check your DisplayLinkedList function - you're missing curly brackets in the while loop. It was only reading the printf line and not traversing the list, leading to an infinite loop.</p>\n\n<p>Best practice is to debug and test as you are creating this program.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include \"stack.h\"\n\nvoid main()\n{\n    int i=0;\n    Node *myNode;\n    myNode = NULL;\n    insert(&amp;myNode,1);\n    DisplayLinkedList(myNode);\n}\n\nvoid addNode(Node **head, int x)\n{\n    Node *temp;\n        temp=malloc(sizeof(temp));\n        temp-&gt;info=x;\n        if (*head==NULL)//if this is the first node in the list\n        {\n            *head=temp;\n            temp-&gt;next = NULL;\n        }\n        else //if not, add it as the head\n        {\n            temp-&gt;next=*head;\n            *head=temp;\n        }\n}\n\nvoid insert(Node **head, int x)\n{\n    int c=0;\n    Node *temp;\n    temp=*head;\n    if(temp==NULL)\n    {\n        addNode(head ,x);\n    }\n}\n\nvoid DisplayLinkedList(Node* head)\n{\n    Node *rear=NULL;\n    if (head==NULL)\n        printf(\"list is empty!\\n\");\n    else\n    {\n        rear=head;\n        while (rear!=NULL)\n    {\n            printf(\"%d |---&gt; \", rear-&gt;info);\n            rear=rear-&gt;next;\n    }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3234347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/49858cf31c6b29a6ed911fcc36e7bb18?s=128&d=identicon&r=PG&f=1", "display_name": "user3234347", "link": "https://stackoverflow.com/users/3234347/user3234347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1498606086, "creation_date": 1498580782, "question_id": 44785405, "link": "https://stackoverflow.com/questions/44785405/why-this-linked-list-code-in-c-malfunction", "title": "why this linked list code in c malfunction?", "body": "<p>I have written this code in c to implement linked list. while the semantic and syntax are fine, it does not work as it should. For example, when I insert 1 into the list and then print the linked list, it shows that the list is empty.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct node {\n    int info;\n    struct node *next;\n}; typedef struct node Node;\n\n\nvoid addNode(Node *head, int x)\n{\n        Node *temp;\n        temp=malloc(sizeof(temp));\n        temp-&gt;info=x;\n        if (head==NULL)//if this is the first node in the list\n        {\n            head=temp;\n            temp-&gt;next=NULL;\n\n        }\n        else //if not, add it as the head\n        {\n            temp-&gt;next=head;\n            head=temp;\n        }\n}\n\nvoid appendNode(Node *head, int x)\n{\n    Node *rear =head;\n    Node *temp= malloc(sizeof(temp));\n    temp-&gt;info=x;\n    temp-&gt;next=NULL;\n    while (rear-&gt;next!=NULL)\n        rear=rear-&gt;next;\n    rear-&gt;next=temp;\n    rear=temp;\n\n}\n\nvoid insertNodeafter(Node *head, int location, int x)\n{\n    int i;\n    Node *before, *after = head;\n    Node *temp= malloc(sizeof(temp));\n    temp-&gt;info=x;\n\n    for (i=0;i&lt;location;i++)\n        before=before-&gt;next;\n    after=before-&gt;next;\n    temp-&gt;next=after;\n    before-&gt;next=temp;\n\n}\n\nvoid insert(Node *head, int x)\n{\n    int c=0;\n    Node *temp;\n    temp=head;\n    if(temp==NULL)\n    {\n    addNode(temp,x);\n    }\n    else\n    {\n    while(temp!=NULL)\n    {\n        if(temp-&gt;info&lt;x)\n        c++;\n        temp=temp-&gt;next;\n    }\n    if(c==0)\n        addNode(temp,x);\n    else if(c&lt;listSize())\n        insertNodeafter(temp,x,++c);\n    else\n        appendNode(temp,x);\n    }\n}\n\nint listSize()\n{\n    Node *head, *n;\n    int c=0;\n    n=head;\n    while(n!=NULL)\n    {\n    n=n-&gt;next;\n    c++;\n    }\n    return c;\n}\n\nvoid DisplayLinkedList(Node* head)\n{\n    Node *rear=NULL;\n    if (head==NULL)\n        printf(\"list is empty!\\n\");\n    else\n    {\n        rear=head;\n        while (rear!=NULL)\n            printf(\"%d |---&gt; \", rear-&gt;info);\n            rear=rear-&gt;next;\n    }\n\n\n}\n\nint getNextNode(Node *head)\n{\n    if (head == NULL)\n        return -1;\n    else\n        return head-&gt;next-&gt;info;\n}\n\nNode* deleteNode(Node *head, int x)\n{\n    Node *temp;\n    if (head == NULL)\n        return NULL;\n\n    else\n        {\n            if (head-&gt;info==x)\n                {\n                temp = head-&gt;next;\n                free(head);\n                head=temp;\n                return head;\n                }\n            else\n                {\n                deleteNode(head-&gt;next,x);\n                return head;\n                }\n        }\n}\n\nvoid main()\n{\n    int i=0;\n    Node *myNode;\n    insert(myNode,1);\n    DisplayLinkedList(myNode); \n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "sorting", "bubble-sort"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1498577217, "post_id": 44784114, "comment_id": 76549130, "body": "<code>;i+2</code> --&gt; <code>;i += 2</code> ? And beware of out-of-bounds error."}, {"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1498577317, "post_id": 44784114, "comment_id": 76549218, "body": "In the declaration <code>int i, a[n];</code>, <code>n</code> is not constant so i&#39;m not sure how this even compiled..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 3, "creation_date": 1498577691, "post_id": 44784114, "comment_id": 76549494, "body": "@JustinJ.: VLAs are standard. This is C, not C++."}, {"owner": {"reputation": 5, "user_id": 8129737, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1431429203605101/picture?type=large", "display_name": "Akshay Kumar Akkinapelli", "link": "https://stackoverflow.com/users/8129737/akshay-kumar-akkinapelli"}, "edited": false, "score": 0, "creation_date": 1498577734, "post_id": 44784114, "comment_id": 76549533, "body": "As, I declared n and assigned a value to it by scanning before I declare array, I guess I can do that."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498577758, "post_id": 44784114, "comment_id": 76549555, "body": "No checking for errors, <code>n</code> not initialised -&gt; broken code."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1498577941, "post_id": 44784114, "comment_id": 76549676, "body": "<code>for (i = 0; i &lt; n; i + 2)</code> -&gt; <code>for (i = 0; i &lt; n-2; i += 2)</code> to avoid access outside the array, i.e. use <code>i &lt; n-2;</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1498578108, "post_id": 44784114, "comment_id": 76549793, "body": "You don&#39;t really do a sort. Your code just swaps two elements at the time. To sort the array, you need to compare with all other elements. Anyway, try this - 1) split the array into two arrays, 2) use qsort on each array, 3) reconstruct the full array. In this way you don&#39;t need to write the sort code yourself"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1498578274, "post_id": 44784114, "comment_id": 76549914, "body": "<code>int n, t;</code> -&gt; <code>int n=0, t;</code>"}, {"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1498579603, "post_id": 44784114, "comment_id": 76550789, "body": "@Olaf : OK.  But I tried in VS2015 and get errors: <code>main.c : expression must have a constant value</code> and <code>main.c : &#39;a&#39;: unknown size</code> + 2 more on that line.  Is Visual Studio non standard?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 1, "creation_date": 1498580966, "post_id": 44784114, "comment_id": 76551619, "body": "@JustinJ.: Well, if you will use an archaic C90-only compiler, then you run into problems using merely ancient features.  VLAs have been a part of Standard C since the end of the last millennium (C99).  The fact that Microsoft hasn&#39;t woken up to the new millennium is a separate problem."}], "answers": [{"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 1, "last_activity_date": 1498581196, "last_edit_date": 1498581196, "creation_date": 1498580817, "answer_id": 44785414, "question_id": 44784114, "link": "https://stackoverflow.com/questions/44784114/to-sort-an-array-in-required-manner/44785414#44785414", "title": "To sort an array in required manner", "body": "<ul>\n<li>The most obvious problem is that your <code>for</code> never ends because <code>i</code> is never actually updated. The <code>i+2</code>  in <code>for (i = 0; i &lt; n; i + 2)</code> does not update <code>i</code> which keeps its initia value forever.\nTry something like <code>for (i = 0; i &lt; n; i=i+2)</code> instead. </li>\n<li>A second problem is that you are not really performing a sorting.\nI guess that you are trying to implement some sort of <a href=\"https://en.wikipedia.org/wiki/Bubble_sort\" rel=\"nofollow noreferrer\">bubble sort</a>.\nIt sorts using comparison. It is impossible to sort an array using less than <code>n logn</code> operation (when sorting using comparison). You are sorting the array in linear time and this should look as a red flag to you. </li>\n</ul>\n\n<p>Try adding another <code>for</code>  as follows:</p>\n\n<pre><code>for (i = 0; i &lt; n; i+= 2)\n    for (j = i+2; j &lt; n; j+= 2)\n        if (a[i] &gt; a[j])\n        {\n            t = a[i];\n            a[i] = a[j];\n            a[j] = t;\n        }\n</code></pre>\n\n<p>and most importantly then read about why you need it. </p>\n\n<p>And if you feel brave you can swap the intgers without using an intermediate variable <code>t</code> as follows (read more on the topic here: <a href=\"https://en.wikipedia.org/wiki/XOR_swap_algorithm\" rel=\"nofollow noreferrer\">XOR swap</a>):</p>\n\n<pre><code>if (a[i] &gt; a[j])\n{\n    a[i] = a[i]^a[j];\n    a[j] = a[j]^a[i];\n    a[i] = a[i]^a[j];\n}\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1498591845, "last_edit_date": 1498591845, "creation_date": 1498582857, "answer_id": 44785976, "question_id": 44784114, "link": "https://stackoverflow.com/questions/44784114/to-sort-an-array-in-required-manner/44785976#44785976", "title": "To sort an array in required manner", "body": "<p>For starters according to the C Standard the function main without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>There is no great sense to declare the variable <code>n</code> as having the type <code>int</code> that after that to check whether its value is less than zero.  It is much better to declare it as having the type <code>size_t</code>.</p>\n\n<p>And the array should be declared after the check</p>\n\n<pre><code>if ((n &gt; 20) || (n &lt;= 0))\n    printf(\"Invalid Size\");\nelse\n{\n    int a[n];\n    //...\n</code></pre>\n\n<p>In loops like this</p>\n\n<pre><code>for (i = 0; i &lt; n; i + 2)\n</code></pre>\n\n<p>the variable <code>i</code>  is not increased. It is obvious that you mean <code>i += 2</code>.</p>\n\n<p>And the loops only moves the first minimum even and the first maximum odd elements to the end of the array. You need additional loops that will do the same operation for other elements of the array. That is the implementation of the bubble sort algorithm is incorrect.</p>\n\n<p>Here is a demonstrative program that shows how the array can be sorted according to the requirements for even and odd elements of the array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N   20\n\nint main(void) \n{\n    int a[N] = { 18, 1, 16, 3, 14, 5, 12, 7, 10, 9, 8, 11, 6, 13, 4, 15, 2, 17, 0, 19 };\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        printf( \"%d \", a[i] );\n    }\n    putchar( '\\n' );\n\n    for ( size_t n = N, last; !( n &lt; 3 ); n = last )\n    {\n        for ( size_t i = last = 2; i &lt; n; i++ )\n        {\n            if ( ( i % 2 == 0 &amp;&amp; a[i] &lt; a[i - 2] ) ||\n                 ( i % 2 == 1 &amp;&amp; a[i - 2] &lt; a[i] ) )\n            {\n                int tmp = a[i];\n                a[i] = a[i - 2];\n                a[i - 2] = tmp;\n                last = i;\n            }\n        }\n    }\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        printf( \"%d \", a[i] );\n    }\n    putchar( '\\n' );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>18 1 16 3 14 5 12 7 10 9 8 11 6 13 4 15 2 17 0 19 \n0 19 2 17 4 15 6 13 8 11 10 9 12 7 14 5 16 3 18 1 \n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8129737, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1431429203605101/picture?type=large", "display_name": "Akshay Kumar Akkinapelli", "link": "https://stackoverflow.com/users/8129737/akshay-kumar-akkinapelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1498598125, "creation_date": 1498576949, "last_edit_date": 1498598125, "question_id": 44784114, "link": "https://stackoverflow.com/questions/44784114/to-sort-an-array-in-required-manner", "title": "To sort an array in required manner", "body": "<p>I need to sort the elements in the odd positions in the descending order and elements in the even position in ascending order. Here is my code, I'm unable to break the first loop.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int n, t;\n\n    printf(\"Enter the size of the array\\n\");\n    scanf(\"%d\", &amp;n);\n    int i, a[n];\n\n    if ((n &gt; 20) || (n &lt;= 0))\n        printf(\"Invalid Size\");\n    else\n    {\n        printf(\"Enter the values\\n\");\n        for (i = 0; i &lt; n; i++)\n        {\n            scanf(\"%d\", &amp;a[i]);\n        }\n\n        for (i = 0; i &lt; n; i + 2)\n        {\n            if (a[i] &gt; a[i + 2])\n            {\n                t = a[i];\n                a[i] = a[i + 2];\n                a[i + 2] = t;\n            }\n        }\n        for (i = 1; i &lt; n; i + 2)\n        {\n            if (a[i] &lt; a[i + 2])\n            {\n                t = a[i];\n                a[i] = a[i + 2];\n                a[i + 2] = t;\n            }\n        }\n        for (i = 0; i &lt; n; i++)\n        {\n            printf(\"%d\\n\", a[i]);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "while-loop"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 6, "creation_date": 1498574754, "post_id": 44783244, "comment_id": 76547334, "body": "It <i>loops no matter what the input is</i> because <code>input != &#39;1&#39; || input != &#39;2&#39;</code> is always true no matter what <code>input</code> is. You want <code>input != &#39;1&#39; &amp;&amp; input != &#39;2&#39;</code>"}, {"owner": {"reputation": 37, "user_id": 8160615, "user_type": "registered", "profile_image": "https://graph.facebook.com/1452528748158640/picture?type=large", "display_name": "Xin Wei", "link": "https://stackoverflow.com/users/8160615/xin-wei"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1498575027, "post_id": 44783244, "comment_id": 76547549, "body": "@lurker I see the problem now, thanks!!"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1498575469, "post_id": 44783244, "comment_id": 76547882, "body": "You will also have a problem in that <code>input</code> isn&#39;t initialized the first time you test it. So I&#39;d recommend setting it to some initial value not 1 or 2, or better, use one of the answers given by others which work around that issue."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498579513, "post_id": 44783244, "comment_id": 76550734, "body": "When the user presses the <i>Enter</i> key, how should code handle that? by displaying <code>&quot;You must select 1 or 2!\\n&quot;</code>?  BTW: <code>rewind(stdin);</code> is not well defined."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1498591751, "post_id": 44783244, "comment_id": 76557505, "body": "Using <code>rewind(stdin)</code> is problematic.  It may not do anything if the input is a terminal or pipe; it does nothing good and much harm if the input is coming from a file. An alternative that people often think of is <a href=\"http://stackoverflow.com/questions/2979209/using-fflushstdin\">using <code>fflush(stdin)</code></a>, but that is also problematic.  You should probablyuse <code>&quot; %c&quot;</code> (with a leading blank) for the format string, and think about gobbling input to end of line (or EOF if no EOL occurs before EOF) \u2014 <code>int c; while ((c = getchar()) != EOF &amp;&amp; c != &#39;\\n&#39;) ;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1498576526, "post_id": 44783379, "comment_id": 76548619, "body": "Obviously this is a true answer. I want to add a note, if you want assure that a block of code is executed Only one time use do... while (0), i see this way in some Cryptography projects. in some program control of execution may change to above that block and if you use  while (0) method, execution will done only one time."}], "tags": [], "owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "is_accepted": true, "score": 0, "last_activity_date": 1498574942, "creation_date": 1498574942, "answer_id": 44783379, "question_id": 44783244, "link": "https://stackoverflow.com/questions/44783244/how-to-create-a-loop-for-user-input-until-user-enters-valid-input/44783379#44783379", "title": "How to create a loop for user input until user enters valid input", "body": "<pre><code>char input;  \ndo\n{\n    displayWellDoneMenu();\n    scanf(\"%c\", &amp;input);\n    system(\"cls\");\n    if (c=='1' || c=='2')\n       break;\n    printf(\"You must select 1 or 2!\\n\"); \n}while(1);\n\nswitch (input)\n{\n   case'1':\n       additionIntermediate();\n      break;\n   case '2':\n       main();\n       break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268, "user_id": 5830611, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Xv99J.jpg?s=128&g=1", "display_name": "Amarildo", "link": "https://stackoverflow.com/users/5830611/amarildo"}, "is_accepted": false, "score": 0, "last_activity_date": 1498574987, "creation_date": 1498574987, "answer_id": 44783392, "question_id": 44783244, "link": "https://stackoverflow.com/questions/44783244/how-to-create-a-loop-for-user-input-until-user-enters-valid-input/44783392#44783392", "title": "How to create a loop for user input until user enters valid input", "body": "<p>This could be an idea:</p>\n\n<pre><code>while(1){\n    scanf(\"%c\", &amp;input);\n    if(input == '1' || input == '0') break;\n    // else continue cycle\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8160615, "user_type": "registered", "profile_image": "https://graph.facebook.com/1452528748158640/picture?type=large", "display_name": "Xin Wei", "link": "https://stackoverflow.com/users/8160615/xin-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5720, "favorite_count": 0, "accepted_answer_id": 44783379, "answer_count": 2, "score": 2, "last_activity_date": 1498574987, "creation_date": 1498574616, "question_id": 44783244, "link": "https://stackoverflow.com/questions/44783244/how-to-create-a-loop-for-user-input-until-user-enters-valid-input", "title": "How to create a loop for user input until user enters valid input", "body": "<p>This section of code is supposed to display a menu with two options, read the input and go to the corresponding function. If the user enters something other than 1 and 2 the program should warn the user and show the menu to ask user to enter the input again. This process will keep repeating until the user puts the right input. </p>\n\n<p>I'm trying to find a way to repeat the loop only when the user inputs something other than 1 and 2 (so that the user can enter the appropriate response this time).</p>\n\n<p>However, when I use a while loop like this, it loops no matter what the input is.</p>\n\n<p>Any help is much appreciated.</p>\n\n<pre><code>char input;\ndisplayWellDoneMenu();\nscanf(\"%c\", &amp;input);\n\nwhile (input != '1' || input != '2')\n{\n    printf(\"You must select 1 or 2!\\n\");\n    displayWellDoneMenu();\n    scanf(\"%c\", &amp;input);\n    rewind(stdin);\n    system(\"cls\");\n}\n\nswitch (input)\n{\n    case'1':\n        additionIntermediate();\n        break;\n    case '2':\n        main();\n        break;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers", "syntax"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1498574704, "post_id": 44783184, "comment_id": 76547286, "body": "I think the only non-opinionated answer here would be &quot;because it was historically defined like this&quot;."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1498574804, "post_id": 44783184, "comment_id": 76547377, "body": "There could always be someone to dig into the old documents to look for the rationale upon which this design was based, but I doubt it."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1498576113, "post_id": 44783184, "comment_id": 76548325, "body": "Think about <code>int *p, q;</code> vs &quot;<code>*int p, q;</code>&quot;"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 4, "creation_date": 1498576505, "post_id": 44783184, "comment_id": 76548602, "body": "The non-opinionated answer is that you don&#39;t read backwards in general, only in simple cases. The canonical solution is the <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">spiral rule</a>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1498580450, "post_id": 44783184, "comment_id": 76551285, "body": "C declaration syntax is actually pretty complex - the type of an object or function is fully specified by a combination of <i>declaration specifiers</i> (type specifier, type qualifiers, storage class specifier) and a <i>declarator</i> (identifier, plus some combination of <code>*</code>, <code>()</code>, and <code>[]</code> operators).  Pointer-ness, array-ness, and function-ness are specified in the declarator, separate from the type specifier.  This allows you to create some fairly complex types in just a few keystrokes; downside is that these declarations get eye-stabby in a hurry."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1498580567, "post_id": 44783184, "comment_id": 76551373, "body": "<i>It would have been nice</i> if Ritchie had made the indirection operator postfix instead of unary - <code>T a[N]*[M]*;</code> is easier to read as &quot;a is an array of pointers to an array of pointers to <code>T</code>&quot; than <code>T *(*a[M])[N];</code>  We wouldn&#39;t have to bounce back and forth when reading the declaration.  But, he didn&#39;t."}, {"owner": {"reputation": 123, "user_id": 7201013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c066a4405015ae021a081e90d791655?s=128&d=identicon&r=PG&f=1", "display_name": "elFreak", "link": "https://stackoverflow.com/users/7201013/elfreak"}, "edited": false, "score": 0, "creation_date": 1498582797, "post_id": 44783184, "comment_id": 76552672, "body": "My main point wasn&#39;t how it&#39;s read, more if there&#39;s a reason why it was defined as so. For example if it&#39;s necessary in complex constucts or if it&#39;s easier to implement in the compiler this way..."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 2, "creation_date": 1498587216, "post_id": 44783184, "comment_id": 76555031, "body": "@elFreak: Ah.  In that case, it&#39;s because that&#39;s how B did it (which is because that&#39;s how BCPL did it, although with different operators).  A <i>lot</i> of C&#39;s weirdness can be traced back to B and BCPL.  You might find <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.pdf\" rel=\"nofollow noreferrer\">this article</a> of interest."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1498575248, "post_id": 44783329, "comment_id": 76547710, "body": "The dereferencing syntax can be changed too. If we start changing things... So justifying one syntax by another is not really a way."}, {"owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498575993, "post_id": 44783329, "comment_id": 76548241, "body": "@Eugene Sh. This is how I see it. C has been created evolutionary rather than revolutionary, hence it borrowed some grammar from it&#39;s predecessors. There are several arguable grammar related decisions in my opinion (like function declaration syntax). Moreover C became adopted far earlier than it became standardized.  However as I see it the main goal by that time was to create a standard which would be close to existing implementations otherwise it would be an entirely different language and wouldn&#39;t be adopted. Afterwards it was all about backward compatibility."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498576182, "post_id": 44783329, "comment_id": 76548369, "body": "Then we can ask about the predecessors the same? Where do we stop? This is why the question will be likely closed as opinion based."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498576486, "post_id": 44783329, "comment_id": 76548587, "body": "@EugeneSh. While you may not like it, the creators of C did indeed design the languages from the expressions to the type declarations. With the guiding principle that the declaration of a variable should look similar to its use. Of course, they could have defined the dereferencing operator as a postfix operator just like the array subscript, but they didn&#39;t. Whatever they chose for the operator placement and precedence in expressions, fully defines the structure of the declarations."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498576554, "post_id": 44783329, "comment_id": 76548646, "body": "@cmaster This requires a reference. If you have it, you can make a non-opinionated answer and I will gladly vote for reopening."}, {"owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498576703, "post_id": 44783329, "comment_id": 76548749, "body": "@Eugene Sh. You are correct. So I went to B language manual. Looks like it had * as a dereferencing operator. However B had no type notation. So I guess C somewhat adapted * to be used in type annotations."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1498577737, "post_id": 44783329, "comment_id": 76549535, "body": "@EugeneSh. Here is the reference. By Dennis M. Ritchie himself: <a href=\"https://heim.ifi.uio.no/inf2270/programmer/historien-om-C.pdf\" rel=\"nofollow noreferrer\">heim.ifi.uio.no/inf2270/programmer/historien-om-C.pdf</a> On page 7 you find that a) the pointer/array/function operators indeed predate C (from its typeless predecessors), and that b) he did indeed define the declaration syntax to match the expression syntax."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1498578167, "post_id": 44783329, "comment_id": 76549823, "body": "So it boils down to historical reasons, as stated in my comment to the question. Which reminds me the (arguable) <a href=\"http://www.cs.cmu.edu/~choset/horse_ass\" rel=\"nofollow noreferrer\">Horse ass</a> story..."}], "tags": [], "owner": {"reputation": 554, "user_id": 8199273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74786754d406e4c09a33144d43f8beb?s=128&d=identicon&r=PG&f=1", "display_name": "tgregory", "link": "https://stackoverflow.com/users/8199273/tgregory"}, "is_accepted": true, "score": 6, "last_activity_date": 1498574831, "creation_date": 1498574831, "answer_id": 44783329, "question_id": 44783184, "link": "https://stackoverflow.com/questions/44783184/why-do-you-have-to-read-a-pointer-declaration-backwords-in-c/44783329#44783329", "title": "Why do you have to read a pointer declaration backwords in C?", "body": "<p>Grammar aside. If I am not mistaken the idea behind:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int **a;\n</code></pre>\n\n<p>is the following. You need to dereference a twice to get an int. This way const positions also start making sense.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int * const * a;\n</code></pre>\n\n<p>This one would essentially mean that you need to dereference a once to get const pointer to int.</p>\n\n<hr>\n\n<p>You may find it interesting and educational to read about C origins. (PDP, B, etc.)</p>\n"}, {"comments": [{"owner": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "edited": false, "score": 1, "creation_date": 1498575969, "post_id": 44783657, "comment_id": 76548214, "body": "I agree. I don&#39;t feel that the declaration is truly backwards. It makes perfect sense to me to think of the declaration as an integer pointer, rather than a pointer to an integer (although semantically they are the same). It&#39;s all syntax for the compiler anyways. Generally, pointers are all the same size (4 to 8 bytes). So in that sense, a pointer is a pointer. The compiler just uses the pointer type to validate usage elsewhere in the code."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498576173, "post_id": 44783657, "comment_id": 76548364, "body": "How would you read the declaration <code>char* (*arr)[42]</code>? I&#39;d definitely call this a <code>pointer to an array of 42 string pointers</code>, reading the declaration inside out..."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498576452, "post_id": 44783657, "comment_id": 76548559, "body": "@cmaster Hmm, that one&#39;s very tricky. I don&#39;t have a lot of experience reading complicated patterns like that. &quot;pointer to an array of 42 string pointers&quot; is how I read it (which indeed feels backwards). At least we still have <a href=\"https://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a>"}, {"owner": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1498578104, "post_id": 44783657, "comment_id": 76549790, "body": "What @cmaster example shows is that it&#39;s not a question of forward or backward reading. The proper way to read c types instead is from inside out, or even clockwise, spiral: <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">c-faq.com/decl/spiral.anderson.html</a> There&#39;s also a &quot;go right when you can, go left when you must&quot; technique: <a href=\"http://unixwiz.net/techtips/reading-cdecl.html\" rel=\"nofollow noreferrer\">unixwiz.net/techtips/reading-cdecl.html</a>"}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "reply_to_user": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "edited": false, "score": 1, "creation_date": 1498578261, "post_id": 44783657, "comment_id": 76549902, "body": "@Tarc Yeah, the syntax can get out of control quite quickly. My answer only works for very small cases. The spiral trick is fantastic."}, {"owner": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "edited": false, "score": 1, "creation_date": 1498578483, "post_id": 44783657, "comment_id": 76550042, "body": "@byxor, &quot;out of control&quot; describes well I guess the situation :) From time to time I found myself in the need to study again how to properly read C type declarions."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498592028, "post_id": 44783657, "comment_id": 76557661, "body": "@cmaster: Nitpicking: &quot;<i>pointer to an array of 42</i>&quot; <b>char</b> &quot;<i>pointers</i>&quot;! ;-)"}], "tags": [], "owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "is_accepted": false, "score": 6, "last_activity_date": 1498579051, "last_edit_date": 1498579051, "creation_date": 1498575659, "answer_id": 44783657, "question_id": 44783184, "link": "https://stackoverflow.com/questions/44783184/why-do-you-have-to-read-a-pointer-declaration-backwords-in-c/44783657#44783657", "title": "Why do you have to read a pointer declaration backwords in C?", "body": "<blockquote>\n  <p>Why do you have to read a pointer declaration backwards in C?</p>\n</blockquote>\n\n<p>In my opinion, it's difficult to say whether the declaration is <em>truly</em> backwards or not.</p>\n\n<h1>For example...</h1>\n\n<p>I've noticed that the way I read the code in my head has changed over the last few years.</p>\n\n<p>Consider the following code:</p>\n\n<pre><code>int *p;\n</code></pre>\n\n<p>How do you read this code in your head?</p>\n\n<ul>\n<li><p><strong>I used to read:</strong> \"p is a pointer to an int\".</p></li>\n<li><p><strong>Now I read:</strong> \"an int pointer called p\".</p></li>\n</ul>\n\n<p>From using the language frequently, my brain has changed the way that I translate the source code to English. This allows me to understand the syntax without feeling like it's backwards.</p>\n\n<p>To me, it feels <em>forwards</em>, although this is entirely subjective and will vary between people.</p>\n\n<p>Moreover, there are probably many (spoken) languages where the source code translates nicely into a spoken sentence without having to change the ordering.</p>\n\n<h2>Conclusion</h2>\n\n<p>Whether or not the declaration feels backwards can depend on...</p>\n\n<ul>\n<li>Your native language.</li>\n<li>How you translate the code to your native language.</li>\n<li>The size/complexity of the declaration.</li>\n</ul>\n"}], "owner": {"reputation": 123, "user_id": 7201013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c066a4405015ae021a081e90d791655?s=128&d=identicon&r=PG&f=1", "display_name": "elFreak", "link": "https://stackoverflow.com/users/7201013/elfreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 1, "closed_date": 1498576148, "accepted_answer_id": 44783329, "answer_count": 2, "score": 3, "last_activity_date": 1498583262, "creation_date": 1498574467, "last_edit_date": 1498583262, "question_id": 44783184, "link": "https://stackoverflow.com/questions/44783184/why-do-you-have-to-read-a-pointer-declaration-backwords-in-c", "closed_reason": "Opinion-based", "title": "Why do you have to read a pointer declaration backwords in C?", "body": "<p>In the C language, for simple cases, it seems that in order to read pointer declarations you have to proceed backwards. For example:</p>\n\n<pre><code>int n; \nint *p = &amp;n; // p is a pointer to int\nint *const np = &amp;n; // np is a const pointer to int\nint *const *npp = &amp;np; //npp is a (non-const) pointer to const pointer to (non-const) int\n</code></pre>\n\n<p>Even though the proper way to parse type declarations is through what is called <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">the spiral rule</a>, wouldn't it be easier if the parsing rules were different so as to accommodate a reading of simple pointer declarations the other way?\nFor example:</p>\n\n<pre><code>int n;\n*int p = &amp;n; // p is a pointer to int\nconst *int np = &amp;n; // np is a const pointer to int\n*const *int npp = &amp;np; // npp is a (non-const) pointer to const pointer to (non-const) int\n</code></pre>\n\n<p>So my question again: What were the principle behind such a design choice? What motivated the language designers to choose this particular way to declare types.</p>\n"}]