[{"tags": ["c", "pointers", "struct", "linked-list", "stack"], "comments": [{"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "edited": false, "score": 0, "creation_date": 1436402989, "post_id": 31305828, "comment_id": 50602011, "body": "That&#39;s because you need to update the content of  <code>s</code> and keep a <code>new_node</code> to it with <code>*s = new_node</code> in  the <code>push</code> function implementation, so you need <code>push(&amp;s1,1);</code> rather than <code>push(s1,1)</code>"}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "edited": false, "score": 0, "creation_date": 1436425419, "post_id": 31305828, "comment_id": 50609137, "body": "I did not do it. Actually I&#39;d like to up vote this question. Because It is a classic question for implementing a linked node ----To use a s-&gt;next to link the new_node, or return new_node by *s. So, I just provided my answer below to try to give some tips."}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1436400329, "post_id": 31305840, "comment_id": 50601365, "body": "Consider that the <code>push</code> function needs to modify <code>s1</code> in <code>main</code>."}, {"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1436400591, "post_id": 31305840, "comment_id": 50601442, "body": "Thanks, meanwhile I figured it out myself. Could you expand on the  pointer to pointer explanation a little more as this is the crux of the matter. It will be clearer when you consider that I could also declare the functions with <code>struct Stack **s</code>. E.g. <code>void push(struct Stack **s, int new_num)</code>."}], "tags": [], "owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "is_accepted": true, "score": 4, "last_activity_date": 1436402435, "last_edit_date": 1436402435, "creation_date": 1436399707, "answer_id": 31305840, "question_id": 31305828, "link": "https://stackoverflow.com/questions/31305828/why-do-i-need-to-use-to-pass-a-pointer-to-a-struct-in-this-stack-implementatio/31305840#31305840", "title": "Why do I need to use &amp; to pass a pointer to a struct in this stack implementation", "body": "<p>Your functions are all declared to take <code>pstack*</code> as an argument, which is actually a pointer to a pointer to a <code>Stack</code> struct.  Just use <code>pstack</code>.  You'll also need to replace the instances of <code>(*s)</code> with just <code>s</code> in the implementations of those functions.</p>\n\n<p><strong>Edit:</strong> As was pointed out in the comments, you actually write to <code>(*s)</code> in the function implementations and rely on this behavior for correctness, so you need to keep the argument as <code>pstack*</code>.  Conceptually, this is because the stack variable (<code>s1</code>) is literally the top of the stack itself, and so must be modified by <code>push</code> and <code>pop</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "is_accepted": false, "score": 0, "last_activity_date": 1436420709, "last_edit_date": 1436420709, "creation_date": 1436401218, "answer_id": 31306092, "question_id": 31305828, "link": "https://stackoverflow.com/questions/31305828/why-do-i-need-to-use-to-pass-a-pointer-to-a-struct-in-this-stack-implementatio/31306092#31306092", "title": "Why do I need to use &amp; to pass a pointer to a struct in this stack implementation", "body": "<p>You need to use <code>pstack *s</code> ( pointer to pstack ) in <code>void push(pstack *s, int new_num)</code>, according to your implementation code,\nif to use <code>pstack s</code>( pstack ), the <code>new_node</code> will not be returned correctly.</p>\n\n<p>Two possible ways to insert a Node in <code>push()</code>:</p>\n\n<ol>\n<li>if insert to head, it should be *s = new_node</li>\n<li>if insert to tail, it could be s->next = new_node</li>\n</ol>\n\n<p>Back to the code, if to use <code>push(s1, 1);</code> such as, </p>\n\n<pre><code> //If only use pstack s, the new_node can not be pushed.\n void push(pstack s, int new_num) //it is a wrong implementation for demo\n {\n        struct Stack *new_node = malloc(sizeof(struct Stack));\n        if (!new_node) {\n                exit(EXIT_FAILURE);\n        }\n        new_node-&gt;number = new_num;\n        new_node-&gt;next = s;\n        s = new_node;// WRONG! here, the new_node cannot be kept by s\n                     // two typical node insert ways:\n                     // 1)if insert to head, it should be *s = new_node\n                     // 2)if insert to tail, it could be s-&gt;next = new_node\n                     //Now, Your code applied the #1 way, so need *s \n }\n</code></pre>\n\n<p>So, it should be inputed <code>pstack *s</code>, and call with <code>push (&amp;s1, 1);</code></p>\n\n<pre><code> void push(pstack *s, int new_num)//it is the correct version the same as your post\n {\n        struct Stack *new_node = malloc(sizeof(struct Stack));\n        if (!new_node) {\n                exit(EXIT_FAILURE);\n        }\n        new_node-&gt;number = new_num;\n        new_node-&gt;next = *s;\n        *s = new_node;//here, the new_node could be kept by *s\n }\n</code></pre>\n"}], "owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 1, "closed_date": 1436430907, "accepted_answer_id": 31305840, "answer_count": 2, "score": 1, "last_activity_date": 1436420709, "creation_date": 1436399617, "question_id": 31305828, "link": "https://stackoverflow.com/questions/31305828/why-do-i-need-to-use-to-pass-a-pointer-to-a-struct-in-this-stack-implementatio", "closed_reason": "Duplicate", "title": "Why do I need to use &amp; to pass a pointer to a struct in this stack implementation", "body": "<p>In the following program I need to pass an argument to a function using the <code>&amp;</code>-operator although I expect it to be a pointer and the function is expecting a pointer. Why do I need to do this?</p>\n\n<p>The program implements a simple stack using linked lists and incomplete types in <code>C</code>. Here are the three necessary files:</p>\n\n<p><strong><code>stack.h</code></strong></p>\n\n<pre><code>#ifndef STACK_H\n#define STACK_H\n\n#include &lt;stdbool.h&gt;\n\nstruct Stack {\n        int number;\n        struct Stack *next;\n};\n\n/*\n * We declare a pointer to a Stack structure thereby making use of incomplete\n * types. Clients that pull in stack.h will be able to declare variables of type\n * pstack which are pointers to Stack structures. */\ntypedef struct Stack *pstack;\n\nbool is_empty(pstack *s);\nvoid make_empty(pstack *s);\nvoid push(pstack *s, int new_num);\nint pop(pstack *s);\n\n#endif /* STACK_H */\n</code></pre>\n\n<p><strong><code>stack.c</code></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"stack.h\"\n\nbool is_empty(pstack *s)\n{\n        return !s;\n}\n\nvoid make_empty(pstack *s)\n{\n        if (!is_empty(s))\n                pop(s);\n}\n\nint pop(pstack *s)\n{\n        struct Stack *tmp;\n        int i;\n\n        if (is_empty(s)) {\n                exit(EXIT_FAILURE);\n        }\n        tmp = *s;\n        i = (*s)-&gt;number;\n        *s = (*s)-&gt;next;\n        free(tmp);\n        return i;\n}\n\nvoid push(pstack *s, int new_num)\n{\n        struct Stack *new_node = malloc(sizeof(struct Stack));\n        if (!new_node) {\n                exit(EXIT_FAILURE);\n        }\n        new_node-&gt;number = new_num;\n        new_node-&gt;next = *s;\n        *s = new_node;\n}\n</code></pre>\n\n<p><strong><code>stackclient.c</code></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"stack.h\"\n\nint main(void)\n{\n  pstack s1;\n  int n;\n\n  push(&amp;s1, 1);\n  push(&amp;s1, 2);\n\n  n = pop(&amp;s1);\n  printf(\"Popped %d from s1\\n\", n);\n  n = pop(&amp;s1);\n  printf(\"Popped %d from s1\\n\", n);\n\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Again, I thought that by using</p>\n\n<pre><code>typedef struct Stack *pstack;\n</code></pre>\n\n<p>and later on in <code>main()</code></p>\n\n<pre><code>pstack s1;\n</code></pre>\n\n<p>I'm declaring a pointer to the linked list <code>Stack</code> and hence it would be fine to simply pass <code>s1</code> to say <code>push()</code> by just using</p>\n\n<pre><code>push(s1, 1);\n</code></pre>\n\n<p>but I actually need to use</p>\n\n<pre><code>push (&amp;s1, 1);\n</code></pre>\n\n<p>Why?</p>\n"}, {"tags": ["c", "optimization", "struct"], "comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 2, "creation_date": 1436398891, "post_id": 31305690, "comment_id": 50600952, "body": "try adding <code>volatile</code> in front of <code>LogArgs* largs;</code> in the <code>Dequeue()</code> function.  That should prevent it from being optimized out."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1436399170, "post_id": 31305690, "comment_id": 50601043, "body": "Put the <code>queue_func()</code> and <code>Dequeue()</code> functions in a separate file and compile it with a lower level of optimization (or even without optimization)."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1436399224, "post_id": 31305690, "comment_id": 50601057, "body": "I don&#39;t see anything obvious that might lead to compiler optimizing out <code>largs</code>. How did you conclude <code>the boolean result is true here</code> is the case there?"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1436399557, "post_id": 31305690, "comment_id": 50601142, "body": "@rost0031 it seems to work with volatile, thanks! @squeamishossifrage I already have the functions in different files, would lower optimization for those files be better than using volatile? @BlueMoon taking a look in gdb I set a breakpoint at the <code>interrupt_log(largs-&gt;event, largs-&gt;rawtime);</code> line thus it will only break if the boolean expression is true. Then using <code>p largs</code> it is clear that the result is 0x0!"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1436399970, "post_id": 31305690, "comment_id": 50601266, "body": "<code>largs</code> is unlikely to actually be NULL in the case you have described. That would mean that the compiler has generated incorrect code. It&#39;s more likely a common debugging phenomenon. gdb can only go by the information it has. With optimisations on it just means gdb can&#39;t get the real value of <code>largs</code> at that point (e.g. because its value was in a register that has been re-used for something else at that point that you examine it)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1436400054, "post_id": 31305690, "comment_id": 50601292, "body": "It is not the struct which is being optimized away, it is lars, which is a pointer. That implies that the compiler has come up with a different way of keeping track of the pointer without storing it in memory. What makes you think it is NULL?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1436406570, "post_id": 31305690, "comment_id": 50602832, "body": "Is the program actually misbehaving or are you just going by what you see in a debugger?"}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1436435660, "post_id": 31305690, "comment_id": 50615881, "body": "@AlanAu Yeah that makes sense, I tried to look at the disassembly yesterday but since it was optimized and I was quite tired, it was extremely hard to understand. @rici You&#39;re right, it is just a pointer which value is 0 from the beginning and since the compiler probably keeps the pointer in a register it is unavailable at the time to the debugger, which will explain why it is read as 0 after the comparsion. @MattMcNabb It is in fact misbehaving, because instead of actually calling <code>interrupt_log</code> when there is an item available in the queue it will always call the function."}], "answers": [{"comments": [{"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1436436280, "post_id": 31305831, "comment_id": 50616322, "body": "that&#39;s really useful thanks, should I use -Og together with atomic types or can I use -O3?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1436439694, "post_id": 31305831, "comment_id": 50618567, "body": "@Linus: optimization shall not change the behaviour of the abstract machine. Atomics has nothing to do with optimization or debugging, but is required to ensure a defined behaviour when using multiple threads (synchronisation). Many programs without such just happen to work by chance. And most of them will fail from time to time due to race conditions, etc. I mostly mentioned atomics, as you did not show the whole code (no need for the question), so you have to decide yourself if they are required or not. Higher-level mechanisms like the mutex you use already include such mechanisms."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 5, "last_activity_date": 1436400010, "last_edit_date": 1436400010, "creation_date": 1436399634, "answer_id": 31305831, "question_id": 31305690, "link": "https://stackoverflow.com/questions/31305690/struct-pointer-being-optimized-out-using-o3-option/31305831#31305831", "title": "struct pointer being optimized out using -O3 option", "body": "<p>Debugging with full optimization is - as you already noticed - just a pain. And tricking with <code>volatile</code>, etc. does not help much, it might even be faster to disable optimizations completely, as <code>volatile</code> inhibits the compiler to put a variable into a register (for instance).</p>\n\n<p>Try <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.5/gcc/Optimize-Options.html#Optimize-Options\" rel=\"nofollow\"><code>-Og</code></a> (since gcc 4.8). That should enable optimizations which do not interfere with debugging. </p>\n\n<p>If you have data structures between two threads, you <strong>have</strong> to tell the compiler they are special. However, for modern multi-CPU systems with caches, etc. <code>volatile</code> is of little to no use for application-layer code. Use atomic types (<code>stdatomic.h</code>) instead - fully supported since gcc 4.9. These include barriers (aka fences) to guarantee correct ordering of the accesses.</p>\n"}, {"comments": [{"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1436436144, "post_id": 31306724, "comment_id": 50616239, "body": "that makes sense, however why is <code>isEmpty()</code> returning false? Or maybe it isn&#39;t but really it should be empty at that point! Because it is called immediately after start-up of the program. It returns whether or not <code>(head == tail)</code>, which should be true after <code>InitQueue()</code> is called which initializes <code>head</code> and <code>tail</code> with -1."}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1436436676, "post_id": 31306724, "comment_id": 50616597, "body": "Nevermind, it is probably because I did in fact put Dequeue into a separate  source file, which probably means it does something else than inlining the code."}], "tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": false, "score": 1, "last_activity_date": 1436406108, "creation_date": 1436406108, "answer_id": 31306724, "question_id": 31305690, "link": "https://stackoverflow.com/questions/31305690/struct-pointer-being-optimized-out-using-o3-option/31306724#31306724", "title": "struct pointer being optimized out using -O3 option", "body": "<p>If the <code>Dequeue()</code> function is in the same translation unit (roughly speaking, the same <code>.c</code> file), then it is quite likely that it is being inlined into <code>queue_func()</code>, so the code of <code>queue_func()</code> ends up looking more like this:</p>\n\n<pre><code>void *queue_func(void *param)\n{\n    LogArgs* largs;\n    pthread_mutex_t *mx = (pthread_mutex_t*) param;\n\n    InitQueue();\n    while (!needQuit(mx))\n    {\n        if (!isEmpty()) // the boolean result is true here\n        {\n            largs = &amp;queue[++head % MAX_SIZE];\n            interrupt_log(largs-&gt;event, largs-&gt;rawtime); // yet largs is NULL here!!!\n        }\n        usleep(50000);\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>...and then the compiler sees that there's no point in setting <code>largs</code> at all, because it can just convert that to this:</p>\n\n<pre><code>void *queue_func(void *param)\n{\n    LogArgs* largs;\n    pthread_mutex_t *mx = (pthread_mutex_t*) param;\n\n    InitQueue();\n    while (!needQuit(mx))\n    {\n        if (!isEmpty()) // the boolean result is true here\n        {\n            size_t temp_index = ++head % MAX_SIZE;\n            interrupt_log(queue[temp_index].event, queue[temp_index].rawtime); // yet largs is NULL here!!!\n        }\n        usleep(50000);\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>...and now it should be obvious why <code>largs</code> can be NULL - the compiler doesn't bother writing to it at all, because the code has the same effect without it.</p>\n\n<p>Debugging optimised code can be difficult.  You can either compile without optimisation and try to reproduce the problem, or examine the machine code and registers in the debugger while debugging the optimised code.</p>\n"}], "owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 31305831, "answer_count": 2, "score": 0, "last_activity_date": 1436436414, "creation_date": 1436398668, "last_edit_date": 1436436414, "question_id": 31305690, "link": "https://stackoverflow.com/questions/31305690/struct-pointer-being-optimized-out-using-o3-option", "title": "struct pointer being optimized out using -O3 option", "body": "<p>It seems to be impossible to debug optimized code. I've spent way too long trying to outsmart the compiler. I am having a hard time doing a simple check if my struct is null or not due to the compiler optimizing my code, don't get me wrong I do want to keep the -O3 option if possible to speed up my code, but if I keep getting so many bugs due to compiler optimizations I might just turn it off.</p>\n\n<p>I have a thread which will try to dequeue struct entries from a array and put them into a database but for some reason the struct is getting optimized out.</p>\n\n<pre><code>void *queue_func(void *param){\n    LogArgs* largs;\n    pthread_mutex_t *mx = (pthread_mutex_t*) param;\n\n    InitQueue();\n    while(!needQuit(mx)){\n        if((largs = Dequeue()) != NULL){ // the boolean result is true here\n            interrupt_log(largs-&gt;event, largs-&gt;rawtime); // yet largs is NULL here!!!\n        }\n        usleep(50000);\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>For reference here is the Dequeue function and struct:</p>\n\n<pre><code>LogArgs* Dequeue(){\n    LogArgs* largs;\n\n    if(isEmpty()) return NULL;\n    else{\n        largs = &amp;queue[++head % MAX_SIZE];\n        return largs;\n    }\n}\n</code></pre>\n\n<p>Here is the struct:</p>\n\n<pre><code>typedef struct {\n    time_t *rawtime;\n    char event[129];\n} LogArgs;\n</code></pre>\n\n<p>Is there any way to prevent largs from being optimized out?</p>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436397756, "post_id": 31305518, "comment_id": 50600624, "body": "Use a bare-metal embedded system. There are very good reasons for protected memory systems."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1436397852, "post_id": 31305518, "comment_id": 50600642, "body": "Yes, this is possible. Read about the <code>mprotect</code> systemcall."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436397854, "post_id": 31305518, "comment_id": 50600643, "body": "What you&#39;re asking about is commonly called &quot;self-modifying code&quot;."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1436397921, "post_id": 31305518, "comment_id": 50600661, "body": "Self-modifying code is an abomination anyway.  It&#39;s not thread-safe, for starters."}, {"owner": {"reputation": 19, "user_id": 5095930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b531149761f385ca2151aad4afe68e9?s=128&d=identicon&r=PG&f=1", "display_name": "Daughter", "link": "https://stackoverflow.com/users/5095930/daughter"}, "edited": false, "score": 0, "creation_date": 1436398334, "post_id": 31305518, "comment_id": 50600791, "body": "to FUZxxl: thanks, will read."}], "owner": {"reputation": 19, "user_id": 5095930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b531149761f385ca2151aad4afe68e9?s=128&d=identicon&r=PG&f=1", "display_name": "Daughter", "link": "https://stackoverflow.com/users/5095930/daughter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1436397981, "answer_count": 0, "score": 1, "last_activity_date": 1436397670, "creation_date": 1436397670, "question_id": 31305518, "link": "https://stackoverflow.com/questions/31305518/can-or-not-a-compiled-for-linux-program-access-her-own-memory-without-getting", "closed_reason": "Duplicate", "title": "Can, or not, a compiled for Linux program access her own memory without getting any access violation?", "body": "<p><strong>Introduction</strong>. (skip to the question please ;)</p>\n\n<p>There was a time when a program can do the things in a way I like her to do them. Some time passed, I have found that I can't do some of them any more.\nI hope there is a way still, though..</p>\n\n<p>Maybe there are options in compiler, maybe in loader, maybe in kernel (I'm interested in Linux OS, newbie in it, though), have no idea where; but sorry - I don't want to end up as dead while searching..</p>\n\n<p><strong>The question</strong>.</p>\n\n<p>I want to run a code in a program that has been modified by that program (producing assembler instructions). Tried it - got the SIGSEGV as result of changing the immediate data in the code segment. I need a way to make the code segment writable etc, ONLY for my own USER-space program. Where to start?</p>\n\n<p>Thanks.</p>\n\n<p>P.S. As suggested tags were c++/linux/c, added them.</p>\n"}, {"tags": ["c", "vector", "qsort"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1436396707, "post_id": 31305272, "comment_id": 50600298, "body": "The addresses you&#39;re receiving in <code>compare</code> are offset addresses into the <code>data</code> pointer array. I.e. The actual type is <code>void**</code> passed as <code>void*</code>. Therefore, you&#39;re missing a level of indirection. That your syntax is wrong regardless (ex: it would be <code>first-&gt;price</code>, not <code>first.price</code>) doesn&#39;t help, but even if that were right, the premise you currently have, that <code>Item*</code> are passed as <code>void*</code> is wrong."}, {"owner": {"reputation": 567, "user_id": 2802557, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e12ce137f195da88b2397ea54e3e47a?s=128&d=identicon&r=PG&f=1", "display_name": "user2802557", "link": "https://stackoverflow.com/users/2802557/user2802557"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436397116, "post_id": 31305272, "comment_id": 50600422, "body": "Sorry I&#39;ve fixed putting -&gt; now but you&#39;re right that wasn&#39;t the only problem. I kind of understand what you&#39;re saying about void* and void**. What do I do to fix it?"}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 2802557, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e12ce137f195da88b2397ea54e3e47a?s=128&d=identicon&r=PG&f=1", "display_name": "user2802557", "link": "https://stackoverflow.com/users/2802557/user2802557"}, "edited": false, "score": 0, "creation_date": 1436397211, "post_id": 31305363, "comment_id": 50600459, "body": "Yes I&#39;ve fixed this but this wasn&#39;t the main problem as someone has said above."}], "tags": [], "owner": {"reputation": 356, "user_id": 3799721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafefe5ab3af6279c0340382b6f7a5ca?s=128&d=identicon&r=PG", "display_name": "Caleb An", "link": "https://stackoverflow.com/users/3799721/caleb-an"}, "is_accepted": false, "score": 1, "last_activity_date": 1436396788, "creation_date": 1436396788, "answer_id": 31305363, "question_id": 31305272, "link": "https://stackoverflow.com/questions/31305272/qsort-a-dynamic-array/31305363#31305363", "title": "qsort a dynamic array", "body": "<p>edit: as WhozCraig pointed out, data is an array of pointers. Thus: </p>\n\n<p>first and second are pointers to a pointer, thus you must get the reference to the pointer to an Item and then use <code>-&gt;</code> to refer to the fields of the struct. In all, it should look like: </p>\n\n<pre><code>Item* first = *(Item**)a;\nItem* second = *(Item**)b;\nreturn first-&gt;price - second-&gt;price;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436397983, "post_id": 31305452, "comment_id": 50600682, "body": "Plus one for pointing that subtraction is wrong. Problems (overflow) can happen to integers as well."}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 3, "last_activity_date": 1436398422, "last_edit_date": 1436398422, "creation_date": 1436397237, "answer_id": 31305452, "question_id": 31305272, "link": "https://stackoverflow.com/questions/31305272/qsort-a-dynamic-array/31305452#31305452", "title": "qsort a dynamic array", "body": "<p>Your declaration of <code>Vector</code> includes a pointer-to-pointer-to-void for the data bed (<code>void**</code>). Without seeing the rest of your code, I must assume this means you're managing a vector of pointers, where each pointer refers to a distinct object by-address. The addresses you're receiving in <code>compare</code> are offset addresses into the <code>data</code> pointer array. I.e. The actual type is <code>void**</code> passed as <code>void*</code>. </p>\n\n<p>Therefore, you're missing a level of indirection. That your syntax is wrong regardless (ex: it would be <code>first-&gt;price</code>, not <code>first.price</code>) doesn't help, but even if that were right, the premise you currently have, that <code>Item*</code> are passed as <code>void*</code> is wrong. </p>\n\n<p>Your comparator should be like this, assuming the rest of your code is correct:</p>\n\n<pre><code>int compare(const void* a, const void *b)\n{\n    const Item * first = *(const void * const *)a;\n    const Item * second = *(const void * const *)b;\n    return first-&gt;price &lt; second-&gt;price ? -1 : second-&gt;price &lt; first-&gt;price;\n}\n</code></pre>\n\n<p>Again, this is making pretty big assumptions about the code you're <em>not</em> providing, and there are no guarantees this will work unless that code is solid and fulfills the assumptions made above. But if you're managing this vector as described above, it should work. </p>\n\n<p>I've also taken liberty to fix the comparison itself. Subtracting values may appear to work for integral types, but the wheels quickly fall off for floating point when converted to a final <code>int</code> result, or even integral types if you introduce underflow potential. For a trivial example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"%d\\n\", (int)(1.1f - 1.0f)); // wrong\n    printf(\"%d\\n\", (1.1f &lt; 1.0f ? -1 : 1.0f &lt; 1.1f)); // better\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>0\n1\n</code></pre>\n\n<p>It can also end up in implementation-defined land if converting a larger-integral-type value (suppose you were subtracting <code>long long</code> and the result were <em>less</em> than <code>INT_MIN</code>). Sticking with the form I showed avoids that pitfall</p>\n\n<pre><code>if (a &lt; b) return -1;\nreturn (b &lt; a); // will be 1 or 0, depending on whether b &lt; a or not.\n</code></pre>\n\n<p>Thus the comparator always returns -1, 0, or 1 and conforms to the requirements of <code>qsort</code> whilst doing so and avoiding the inaccuracy of floating point to <code>int</code> conversion or potential underflow/overflow.</p>\n\n<p>Best of luck.</p>\n"}], "owner": {"reputation": 567, "user_id": 2802557, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e12ce137f195da88b2397ea54e3e47a?s=128&d=identicon&r=PG&f=1", "display_name": "user2802557", "link": "https://stackoverflow.com/users/2802557/user2802557"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 31305452, "answer_count": 2, "score": 0, "last_activity_date": 1436398422, "creation_date": 1436396282, "question_id": 31305272, "link": "https://stackoverflow.com/questions/31305272/qsort-a-dynamic-array", "title": "qsort a dynamic array", "body": "<p>I am using a dynamic array I found online whose header file looks like this:</p>\n\n<pre><code>    typedef struct {\n    int size;      // slots used so far\n    int capacity;  // total available slots\n    void **data;     // array of data we're storing\n    } Vector;\n\n    void vector_init(Vector *vector);\n\n    void vector_append(Vector *vector, void* value);\n\n    void* vector_get(Vector *vector, int index);\n\n    void vector_set(Vector *vector, int index, void* value);\n\n    void vector_double_capacity_if_full(Vector *vector);\n\n    void vector_free(Vector *vector);\n</code></pre>\n\n<p>I have another struct that looks this:</p>\n\n<pre><code>typedef struct _item{\n    char name[MaxNameSize];\n    float price;\n} Item;\n</code></pre>\n\n<p>I have created a vector using</p>\n\n<pre><code>Vector vector;\nvector_init(&amp;vector);\n</code></pre>\n\n<p>and added a number of Items to it using </p>\n\n<pre><code>vector_append(&amp;vector, item);\n</code></pre>\n\n<p>multiple times where item are of type Item. I now want to sort my dynamic array by Item price. I have tried this which doesn't work</p>\n\n<pre><code>qsort(vector.data, vector.size, sizeof(Item*), compare);\n</code></pre>\n\n<p>My compare function is</p>\n\n<pre><code>int compare(const void* a, const void* b){\nItem* first = (Item*)a;\nItem* second = (Item*)b;\n    return first.price - second.price;\n}\n</code></pre>\n\n<p>Any ideas of where I am going wrong? I think it may be the arguments I am putting into the qsort. Right now it seems to just skip over the qsort.</p>\n"}, {"tags": ["c", "fork", "semaphore", "mmap"], "comments": [{"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1436396032, "post_id": 31305015, "comment_id": 50600080, "body": "Almost there, you need two things: a method to synchronize the parent so it does&#39;nt read before the child writes and the actual read and write which can be done normally with <code>write</code> and <code>read</code> calls. read the manual for semaphores: <a href=\"http://linux.die.net/man/7/sem_overview\" rel=\"nofollow noreferrer\">linux.die.net/man/7/sem_overview</a>. try solving it yourself, you are inches away (:"}, {"owner": {"reputation": 259, "user_id": 2898736, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/pmVNS.jpg?s=128&g=1", "display_name": "andres", "link": "https://stackoverflow.com/users/2898736/andres"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1436398574, "post_id": 31305015, "comment_id": 50600862, "body": "@IshayPeled I know that I can use 1 as <code>read</code>&#39;s first argument to display the message to the screen. I thought that, in this case, <code>write</code> requires a file desc."}], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 3799721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafefe5ab3af6279c0340382b6f7a5ca?s=128&d=identicon&r=PG", "display_name": "Caleb An", "link": "https://stackoverflow.com/users/3799721/caleb-an"}, "is_accepted": true, "score": 1, "last_activity_date": 1436396471, "creation_date": 1436396471, "answer_id": 31305306, "question_id": 31305015, "link": "https://stackoverflow.com/questions/31305015/how-to-read-from-write-to-anonymous-shared-mapping/31305306#31305306", "title": "How to read from /write to anonymous shared mapping?", "body": "<p>If your only goal is to read / write between a child process and a parent process, using pipes is a much easier method of doing so. It would look something like this: </p>\n\n<pre><code>    int fd[2]; \n    pipe(fd);\n\n    if((child= fork()) == -1)\n    {\n            perror(\"fork\");\n            exit(1);\n    }\n\n    if(child == 0)\n    {\n            // close read side\n            close(fd[0]);\n\n            // write to pipe\n            write(fd[1], msg, (strlen(msg));\n    }\n    else\n    {\n            //close write side\n            close(fd[1]);\n\n            //read what the child wrote. \n            nbytes = read(fd[0], buff, sizeof(buff));\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1436403738, "last_edit_date": 1436403738, "creation_date": 1436403432, "answer_id": 31306370, "question_id": 31305015, "link": "https://stackoverflow.com/questions/31305015/how-to-read-from-write-to-anonymous-shared-mapping/31306370#31306370", "title": "How to read from /write to anonymous shared mapping?", "body": "<p>If you're going to bother with shared memory, then it's silly to try to manipulate it by <code>read()</code> and <code>write()</code> calls on the underlying file (which for an anonymous mapping doesn't exist anyway).  If you want to communicate via <code>read()</code> and <code>write()</code> then just create a pipe instead, and forget about mapping and shared memory.  That is in fact an entirely viable approach.</p>\n\n<p>If you really do want to use shared memory for this, then use it like <em>memory</em>.  Convert the pointer to the shared memory region to an appropriate pointer-to-object type, use ordinary assignment to write, and use ordinary variable / memory access to read.  Shared memory does introduce potential issues with conflicting access and synchronization, but even that's no big deal for the simple case you describe: just have the parent process successfully <code>wait()</code> for the child (or otherwise be notified of its termination) before it attempts to read whatever the child wrote.</p>\n\n<p>You do have an issue with how you are setting up your mapping, however: you map <code>sizeof(int)</code> bytes, but this is probably not enough for the message you attempt to write.  Overall, it should look more like this:</p>\n\n<pre><code>int main(void) {\n  char *message;\n  int status;\n  pid_t child;\n\n  message = mmap(NULL, BUFSIZE , PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANON, -1, 0);\n\n  if (message == MAP_FAILED) {\n    perror(\"mmap\");\n    return 1;\n  }\n\n  child = fork();\n\n  if ( child == -1 ) {\n    perror(\"fork\");\n    return 1;\n  } else if (child == 0) {\n    strcpy( message, \"foo\\n\");\n  } else {\n    wait(&amp;status);\n    printf(\"The child wrote:\\n%s\\n\", message);\n  }\n\n  return 0;    \n}\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 2898736, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/pmVNS.jpg?s=128&g=1", "display_name": "andres", "link": "https://stackoverflow.com/users/2898736/andres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1361, "favorite_count": 0, "accepted_answer_id": 31305306, "answer_count": 2, "score": 0, "last_activity_date": 1436405127, "creation_date": 1436394904, "last_edit_date": 1436405127, "question_id": 31305015, "link": "https://stackoverflow.com/questions/31305015/how-to-read-from-write-to-anonymous-shared-mapping", "title": "How to read from /write to anonymous shared mapping?", "body": "<p>Attempting to write a message to anonymous shared memory with a child process, terminate it. Then have the message read by the parent. I have seen examples for mapping input &amp; output files using file descriptors obtained through <code>read</code> &amp; <code>write</code> calls. But do not know how to approach this correctly. </p>\n\n<pre><code>int main(void) {\n  char *shared; \n  int status;\n  pid_t child;\n\n  shared = mmap(0, sizeof(int) , PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANON, -1, 0);\n\n  if (shared == MAP_FAILED) {\n    perror(\"mmap\");\n    return 1;\n  }\n\n  child = fork();\n\n  if ( child == -1 ) {\n    perror(\"fork\");\n    return 1;\n  } else if (child == 0) {\n    sprintf(shared, \"foo\");\n\n  } else {\n    printf(\"%s\", shared);\n    wait(&amp;status);\n  }\n\n  if (munmap (shared, sizeof(int)) == -1) {\n      perror(\"munmap\");\n      return 1;\n  }\n\n  return 0;    \n}\n</code></pre>\n"}, {"tags": ["c", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 0, "creation_date": 1436410578, "post_id": 31305058, "comment_id": 50603806, "body": "Is returning -1 from WM_CREATE when a child window fails to create usual behavior or is it better to continue creating the rest of the child controls?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 0, "creation_date": 1436412428, "post_id": 31305058, "comment_id": 50604241, "body": "@Rm32a It depends how critical that child window is I guess."}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 0, "creation_date": 1436434813, "post_id": 31305058, "comment_id": 50615238, "body": "Indeed. For dialogs, this is controlled by the Dialog Window Style <code>DS_NOFAILCREATE</code>. As a developer, there is certain advantage to enabling it: It allows you to see <i>which</i> control&#39;s creation failed."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 3, "last_activity_date": 1436395059, "creation_date": 1436395059, "answer_id": 31305058, "question_id": 31304951, "link": "https://stackoverflow.com/questions/31304951/are-child-windows-destroyed-automatically-if-1-is-returned-from-wm-create/31305058#31305058", "title": "Are child windows destroyed automatically if -1 is returned from WM_CREATE?", "body": "<p>All child windows are destroyed when a window is destroyed, and this includes when a window is destroyed during its creation by returning <code>-1</code> from <code>WM_CREATE</code>.</p>\n"}], "owner": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 31305058, "answer_count": 1, "score": 0, "last_activity_date": 1436395059, "creation_date": 1436394625, "question_id": 31304951, "link": "https://stackoverflow.com/questions/31304951/are-child-windows-destroyed-automatically-if-1-is-returned-from-wm-create", "title": "Are child windows destroyed automatically if -1 is returned from WM_CREATE?", "body": "<pre><code>LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n{\n    switch(msg)\n    {\n    case WM_CREATE:\n        {\n            HWND hStatic1, hStatic2;\n            hStatic1 = CreateWindowEx(0, L\"Static\", L\"\", WS_VISIBLE | WS_CHILD, 4, 20, 40, 40, hwnd, 0, GetModuleHandle(0), 0);\n            hStatic2 = CreateWindowEx(0, L\"Static\", L\"\", WS_VISIBLE | WS_CHILD, 4, 80, 40, 40, hwnd, 0, GetModuleHandle(0), 0);\n            return -1;\n        }\n        break;\n\n    default:\n        return DefWindowProc(hwnd, msg, wParam, lParam);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Are child windows created in WM_CREATE destroyed automatically when -1 is returned? Will hStatic1 and hStatic2 be destroyed automatically when I return -1 or do I need to call <code>DestroyWindow()</code> on each one of them?</p>\n"}, {"tags": ["c", "gcc", "segmentation-fault", "sdl-2", "cc"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 4, "creation_date": 1436393388, "post_id": 31304591, "comment_id": 50599104, "body": "Completely unrelated to your question, but you&#39;re using the line-continuation <code>&#39;\\&#39;</code> character in situations where it&#39;s not necessary.  Typically it&#39;s only needed in macro definitions that run over multiple lines."}, {"owner": {"reputation": 527, "user_id": 641768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1fa813c71f655833d98a2e796b3b76a0?s=128&d=identicon&r=PG", "display_name": "Zacariaz", "link": "https://stackoverflow.com/users/641768/zacariaz"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1436393862, "post_id": 31304591, "comment_id": 50599283, "body": "Ah, I forgot about that. Usually I wouldn&#39;t have included it. It&#39;s dues to my environment. I know they&#39;re not necessary, but I like having them there. I just like being able to see clearly when something runs over multiple lines."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1436394010, "post_id": 31304591, "comment_id": 50599323, "body": "What is <code>close();</code> supposed to do? [ and: why should I detect this, while your compiler does not?] There is a local function called close(), but please don&#39;t do this."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436394145, "post_id": 31304591, "comment_id": 50599369, "body": "Note: There was no need to change boolean type. C <i>does</i> have the same since C99 (just <code>#include &lt;stdbool.h&gt;</code>. Hint: To suppress warnings about unused arguments, I just <code>argc = argc; argv = argv;</code>."}, {"owner": {"reputation": 527, "user_id": 641768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1fa813c71f655833d98a2e796b3b76a0?s=128&d=identicon&r=PG", "display_name": "Zacariaz", "link": "https://stackoverflow.com/users/641768/zacariaz"}, "edited": false, "score": 0, "creation_date": 1436394176, "post_id": 31304591, "comment_id": 50599376, "body": "Deallocate memory and reset a couple of pointers. Seems pretty clear to me."}, {"owner": {"reputation": 527, "user_id": 641768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1fa813c71f655833d98a2e796b3b76a0?s=128&d=identicon&r=PG", "display_name": "Zacariaz", "link": "https://stackoverflow.com/users/641768/zacariaz"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436394476, "post_id": 31304591, "comment_id": 50599480, "body": "@Olaf. I considered that, but it seems pretty needless to me. I don&#39;t suppose it would make any practical difference other than perhaps for explanatory purposes?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436394789, "post_id": 31304591, "comment_id": 50599595, "body": "I assume you refer the hint: Just take it as such. I enable most warnings for my code. Now, as I do not tolerate warnings (turning into errors for release builds), such warnings have to be silenced intentionally. Of course, there will be a clear comment."}, {"owner": {"reputation": 527, "user_id": 641768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1fa813c71f655833d98a2e796b3b76a0?s=128&d=identicon&r=PG", "display_name": "Zacariaz", "link": "https://stackoverflow.com/users/641768/zacariaz"}, "edited": false, "score": 0, "creation_date": 1436395468, "post_id": 31304591, "comment_id": 50599857, "body": "I was actually referring to the use of stdbool.h. I know it&#39;s my OCD playing tricks on be, but having to remember to include a bunch of headers for minor convenience and potentially major confusion, is not something I like to do. I think these types should be native if used. I occasionally use stdint.h, but that&#39;s for other reasons. As for the hint to suppress warning, I&#39;ve already done as you suggested."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1436396790, "post_id": 31304591, "comment_id": 50600329, "body": "Does the behavior change if you rename <code>close()</code> to a name that&#39;s not part of the C standard library?"}, {"owner": {"reputation": 527, "user_id": 641768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1fa813c71f655833d98a2e796b3b76a0?s=128&d=identicon&r=PG", "display_name": "Zacariaz", "link": "https://stackoverflow.com/users/641768/zacariaz"}, "edited": false, "score": 0, "creation_date": 1436397857, "post_id": 31304591, "comment_id": 50600644, "body": "Yes, I just figured it out on my own just a couple of minutes ago, trying to determine where the segmentation fault occurred, which gave very odd results, where the same line of code were execute multiple time, almost like some sort of recursion occurred, and after that the conclusions seemed simple enough. Wonder why I didn&#39;t figure that out earlier."}, {"owner": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "edited": false, "score": 0, "creation_date": 1553709989, "post_id": 31304591, "comment_id": 97489592, "body": "I faced this same problem, and I&#39;ve spent whole day until I finally find this question! <code>close()</code> function the same I did on my end. Surprisingly I always keep best practice of using <code>static ....</code> in front of function definition, but this time I let loose which is debt for me at the end. Ok, remind myself, always <code>static</code> prefixed for functions that supposed to be used locally in that file only. Thanks for asking this!"}], "answers": [{"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1436397100, "post_id": 31305394, "comment_id": 50600414, "body": "That&#39;s what I said in the comments."}, {"owner": {"reputation": 527, "user_id": 641768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1fa813c71f655833d98a2e796b3b76a0?s=128&d=identicon&r=PG", "display_name": "Zacariaz", "link": "https://stackoverflow.com/users/641768/zacariaz"}, "edited": false, "score": 1, "creation_date": 1436397993, "post_id": 31305394, "comment_id": 50600686, "body": "Yes, you did indeed, but I didn&#39;t see it in time to actually be of any help. I actually figured it out on my own. In any case the result was the same. It seems quite odd to me, but I got the solution I asked for. Thank you."}], "tags": [], "owner": {"reputation": 5344, "user_id": 1149981, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/x9Pds.jpg?s=128&g=1", "display_name": "yngccc", "link": "https://stackoverflow.com/users/1149981/yngccc"}, "is_accepted": true, "score": 5, "last_activity_date": 1436396933, "creation_date": 1436396933, "answer_id": 31305394, "question_id": 31304591, "link": "https://stackoverflow.com/questions/31304591/odd-segmentation-fault-with-cc-gcc-but-not-g-c-sdl2-linux/31305394#31305394", "title": "Odd segmentation fault with CC/GCC but not G++ (C/SDL2/Linux)", "body": "<p>If you rename the function <code>close()</code> the segfault goes away, looks like <code>init()</code> calls into SDL which calls into X11 which calls into your driver which calls <code>close()</code>, but instead of calling the right <code>close()</code> it calls yours instead. In C++ functions will get name mangled to something else so it it not a problem.</p>\n"}], "owner": {"reputation": 527, "user_id": 641768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1fa813c71f655833d98a2e796b3b76a0?s=128&d=identicon&r=PG", "display_name": "Zacariaz", "link": "https://stackoverflow.com/users/641768/zacariaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 2, "accepted_answer_id": 31305394, "answer_count": 1, "score": 3, "last_activity_date": 1436396933, "creation_date": 1436392757, "last_edit_date": 1436393999, "question_id": 31304591, "link": "https://stackoverflow.com/questions/31304591/odd-segmentation-fault-with-cc-gcc-but-not-g-c-sdl2-linux", "title": "Odd segmentation fault with CC/GCC but not G++ (C/SDL2/Linux)", "body": "<p>The code posted is copied directly from an example of a popular SDL2 tutorial, to ensure that it wasn't I who had made some silly mistake. All I've done to the example is changing the path of the image file in question, I changed type bool to int, false to 0 and true to 1. As I understand it, nothing C++ specific should remain.</p>\n\n<p>Everything seems to work regardless what I do, but when compiling with CC/GCC (I suppose that's really the same deal) I get a segmentation fault in the very end, I suspect in close(), which I've been unable to determine. Compiling with G++ somehow prevents the segmentation fault.</p>\n\n<p>The solution of course is simple, just use G++, but I would very much like to know wherein the problem lies.</p>\n\n<p>main.c:</p>\n\n<pre><code>//Using SDL and standard IO\n#include &lt;SDL2/SDL.h&gt;\n#include &lt;stdio.h&gt;\n\n//Screen dimension constants\nconst int SCREEN_WIDTH = 640;\nconst int SCREEN_HEIGHT = 480;\n\n//Starts up SDL and creates window\nint init();\n\n//Loads media\nint loadMedia();\n\n//Frees media and shuts down SDL\nvoid close();\n\n//The window we'll be rendering to\nSDL_Window* gWindow = NULL;\n\n//The surface contained by the window\nSDL_Surface* gScreenSurface = NULL;\n\n//The image we will load and show on the screen\nSDL_Surface* gHelloWorld = NULL;\n\nint init()\n{\n    //Initialization flag\n    int success = 1;\n\n    //Initialize SDL\n    if( SDL_Init( SDL_INIT_VIDEO ) &lt; 0 )\n    {\n        printf( \"SDL could not initialize! SDL_Error: %s\\n\", SDL_GetError() );\n        success = 0;\n    }\n    else\n    {\n        //Create window\n        gWindow = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED,\n                                    SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH,\n                                    SCREEN_HEIGHT, SDL_WINDOW_SHOWN );\n        if( gWindow == NULL )\n        {\n            printf( \"Window could not be created! SDL_Error: %s\\n\",\n                    SDL_GetError() );\n            success = 0;\n        }\n        else\n        {\n            //Get window surface\n            gScreenSurface = SDL_GetWindowSurface( gWindow );\n        }\n    }\n\n    return success;\n}\n\nint loadMedia()\n{\n    //Loading success flag\n    int success = 1;\n\n    //Load splash image\n    gHelloWorld = SDL_LoadBMP( \"hello_world.bmp\" );\n    if( gHelloWorld == NULL )\n    {\n        printf( \"Unable to load image %s! SDL Error: %s\\n\", \"hello_world.bmp\",\n                SDL_GetError() );\n        success = 0;\n    }\n\n    return success;\n}\n\nvoid close()\n{\n    //Deallocate surface\n    SDL_FreeSurface( gHelloWorld );\n    gHelloWorld = NULL;\n\n    //Destroy window\n    SDL_DestroyWindow( gWindow );\n    gWindow = NULL;\n\n    //Quit SDL subsystems\n    SDL_Quit();\n}\n\nint main( int argc, char* args[] )\n{\n    //Start up SDL and create window\n    if( !init() )\n    {\n        printf( \"Failed to initialize!\\n\" );\n    }\n    else\n    {\n        //Load media\n        if( !loadMedia() )\n        {\n            printf( \"Failed to load media!\\n\" );\n        }\n        else\n        {\n            //Apply the image\n            SDL_BlitSurface( gHelloWorld, NULL, gScreenSurface, NULL );\n\n            //Update the surface\n            SDL_UpdateWindowSurface( gWindow );\n\n            //Wait two seconds\n            SDL_Delay( 2000 );\n        }\n    }\n\n    //Free resources and close SDL\n    close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I don't see how it's relevant, but just to be on the safe side, here's the standard Makefile I'm using</p>\n\n<pre><code>#OBJS specifies which files to compile as part of the project\nOBJS = main.c\n\n#CC specifies which compiler we're using\nCC = cc\n\n#COMPILER_FLAGS specifies the additional compilation options we're using\n# -w suppresses all warnings\nCOMPILER_FLAGS = -Wall -Wextra -pedantic\n\n#LINKER_FLAGS specifies the libraries we're linking against\nLINKER_FLAGS = -lSDL2\n\n#OBJ_NAME specifies the name of our exectuable\nOBJ_NAME = test\n\n#This is the target that compiles our executable\nall : $(OBJS)\n    $(CC) $(OBJS) $(COMPILER_FLAGS) $(LINKER_FLAGS) -o $(OBJ_NAME)\n</code></pre>\n\n<p>I  get no errors or warnings but unused argv and argc.</p>\n\n<p>At this point I'm at a dead end, thus I ask here.</p>\n\n<p>Best regards.</p>\n\n<p>NB:\nI should be mentioned that whatever the issue, it's most definitely not a hardware issue, various search results have suggested, as I get the exact same result and problem, on two entirely different hardware platforms.</p>\n"}, {"tags": ["c", "embedded", "pic", "microchip", "xc8"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436394529, "post_id": 31304457, "comment_id": 50599497, "body": "Note: there is no need to escape newline (this is not Python). Proper indentation is enough and better to read (easier to identify the operator <code>|</code>)."}, {"owner": {"reputation": 73, "user_id": 1526431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b53a9f9dbfa6ab8ca29d4c1b76883488?s=128&d=identicon&r=PG", "display_name": "Kasama", "link": "https://stackoverflow.com/users/1526431/kasama"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436394918, "post_id": 31304457, "comment_id": 50599639, "body": "@Olaf thanks for your suggestion, but I&#39;d rather keep the escapes as for me it makes it explicit that the line didn&#39;t finish there. It&#39;s down to personal preference though"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436395345, "post_id": 31304457, "comment_id": 50599815, "body": "It is - partly and I will not comment further after this last comment. just think about the following: It is harder to read with the backslashes and another programmer reading your code (as here) will at least have to think for a moment, possibly breaking his flow of reading. Oh, and many company coding standards do not allow this (partly for the reasons above). Recommended practice for Python, for instance is to parenthesise, if possible to avoid backspashes. Note this psychology, not just a personal preference. - As I stated, just please think about it; no need to comment."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 1526431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b53a9f9dbfa6ab8ca29d4c1b76883488?s=128&d=identicon&r=PG", "display_name": "Kasama", "link": "https://stackoverflow.com/users/1526431/kasama"}, "edited": false, "score": 0, "creation_date": 1436393020, "post_id": 31304559, "comment_id": 50598954, "body": "That is correct sir, thanks a lot. One more question, i want RA0 and RA1 to be analog inputs, for that i need to set <code>ANSEL = 0x03</code>?"}], "tags": [], "owner": {"reputation": 5534, "user_id": 1335209, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/530651078602108f4a6a950a94d1ec92?s=128&d=identicon&r=PG", "display_name": "Andres", "link": "https://stackoverflow.com/users/1335209/andres"}, "is_accepted": true, "score": 4, "last_activity_date": 1436392585, "creation_date": 1436392585, "answer_id": 31304559, "question_id": 31304457, "link": "https://stackoverflow.com/questions/31304457/pic16f887-port-wont-work-with-xc8-c-compiler/31304559#31304559", "title": "PIC16F887 PORT won&#39;t work with XC8 C compiler", "body": "<p>I think the problem is that those specific pins are also Analog Inputs for the ADC Module, you have to configure them to be digital I/O to use them. Try setting <code>ANSEL = 0x00</code> at the beginning of your program.</p>\n\n<p>You can see in the datasheet that the default value of <code>ANSEL</code> on POR is <code>0xFF</code> so all analog pins are configured as analog inputs by default.</p>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 3401601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NkaeT.jpg?s=128&g=1", "display_name": "EBlake", "link": "https://stackoverflow.com/users/3401601/eblake"}, "is_accepted": false, "score": 0, "last_activity_date": 1436556107, "creation_date": 1436556107, "answer_id": 31348743, "question_id": 31304457, "link": "https://stackoverflow.com/questions/31304457/pic16f887-port-wont-work-with-xc8-c-compiler/31348743#31348743", "title": "PIC16F887 PORT won&#39;t work with XC8 C compiler", "body": "<p>To use pins for analog input, you should set the relevant bits in both the ANSEL and TRISx registers.</p>\n"}], "owner": {"reputation": 73, "user_id": 1526431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b53a9f9dbfa6ab8ca29d4c1b76883488?s=128&d=identicon&r=PG", "display_name": "Kasama", "link": "https://stackoverflow.com/users/1526431/kasama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 31304559, "answer_count": 2, "score": 0, "last_activity_date": 1436556107, "creation_date": 1436392217, "last_edit_date": 1436394405, "question_id": 31304457, "link": "https://stackoverflow.com/questions/31304457/pic16f887-port-wont-work-with-xc8-c-compiler", "title": "PIC16F887 PORT won&#39;t work with XC8 C compiler", "body": "<p>I'm pretty new to PIC programming and I'm trying to use C (compiled with Microchip's XC8 Free in <a href=\"http://www.microchip.com/pagehandler/en-us/family/mplabx/\" rel=\"nofollow\">MPLABX</a>) to make a simple \"Input to Output\" program.<br>\n The problem I'm having is that the RA2, RA3 and RA5 input pins are just not working when programming in C.<br>\nIt's probably not a hardware problem, because when programming in <a href=\"http://cq.cx/ladder.pl\" rel=\"nofollow\">Ladder</a> those pins work just fine.<br>\nI've searched around on the internet for a while and couldn't find anyone with the same problem yet.  </p>\n\n<p>The program I'm trying to burn onto the PIC is as follows:  </p>\n\n<pre><code>#define _XTAL_FREQ 20000000\n\n#include &lt;xc.h&gt;\n\n// BEGIN CONFIG\n#pragma config FOSC = HS // Oscillator Selection bits (HS oscillator)\n#pragma config WDTE = ON // Watchdog Timer Enable bit (WDT enabled)\n#pragma config PWRTE = OFF // Power-up Timer Enable bit (PWRT disabled)\n#pragma config BOREN = ON // Brown-out Reset Enable bit (BOR enabled)\n#pragma config LVP = OFF // Low-Voltage (Single-Supply) In-Circuit Serial Programming Enable bit (RB3 is digital I/O, HV on MCLR must be used for programming)\n#pragma config CPD = OFF // Data EEPROM Memory Code Protection bit (Data EEPROM code protection off)\n#pragma config WRT = OFF // Flash Program Memory Write Enable bits (Write protection off; all program memory may be written to by EECON control)\n#pragma config CP = OFF // Flash Program Memory Code Protection bit (Code protection off)\n//END CONFIG\n\nint main()\n{\n  TRISB = 0x00;\n  TRISE = 0x00;\n  TRISC = 0x00;\n  TRISD = 0xFF;\n  TRISA = \\\n          _TRISA_TRISA2_MASK |\\\n          _TRISA_TRISA3_MASK |\\\n          _TRISA_TRISA4_MASK |\\\n          _TRISA_TRISA5_MASK;\n  PORTD = 0x00;\n  PORTA = 0x00;\n  PORTB = 0x00;\n  PORTE = 0x00;\n  PORTC = 0x00;\n\n  while(1){\n    PORTB = PORTA;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>I do get an output on PORTB if I set RA4 to HIGH, but not for RA2, RA3 nor RA5. I believe this might be a problem with the configuration bits or something, but I'm not sure.  </p>\n\n<p>Hardware being used:  </p>\n\n<ul>\n<li><p>Microchip PIC16F887  </p></li>\n<li><p><a href=\"http://smartradio.com.br/pic/FlexisPlus/2-Manual%20FLEXIS%20Plus.pdf\" rel=\"nofollow\">FLEXiS Plus Board</a> (sorry no english manual, but in page 8 and 9 there are board schematics)  </p></li>\n</ul>\n\n<p>Software being used:  </p>\n\n<ul>\n<li><p><a href=\"http://www.microchip.com/pagehandler/en-us/family/mplabx/\" rel=\"nofollow\">Microchip MPLABX IDE</a>  </p></li>\n<li><p><a href=\"http://www.etc.ugal.ro/cchiculita/software/tinyblddownload.htm\" rel=\"nofollow\">TinyBootloader</a></p></li>\n</ul>\n"}, {"tags": ["c", "linux", "kernel-module"], "answers": [{"tags": [], "owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1436395236, "creation_date": 1436395236, "answer_id": 31305095, "question_id": 31304274, "link": "https://stackoverflow.com/questions/31304274/generalizing-system-call-hijacking-to-any-kernel-symbol/31305095#31305095", "title": "Generalizing system call hijacking to any kernel symbol", "body": "<p>The short answer: your method won't work for generic functions and you want to look at <a href=\"https://www.kernel.org/doc/Documentation/kprobes.txt\" rel=\"nofollow\">kprobes</a>.</p>\n\n<p>The long answer is below:</p>\n\n<p>The reason it is so easy to hijack system calls is because you are replacing the memory address of the original system call with your own function so when a system call table is looked up your function is there instead of the original function.  System call functions are basically only called indirectly via the system call table.  If some code directly called the system call function your hijack would not work.</p>\n\n<p>For hijacking any function you do not have this simple method as a generic function can be called various ways.  For example, you can't simply just scan all the text and replace all call instructions with calls to your function as the function address might be stored in data (think C function pointer).  </p>\n\n<p>The typical way this is done is to replace the beginning of function you wish to hijack with a call to your function.  If you do not care about every returning to the original function this isn't too difficult, you are basically placing a trampoline so whenever the intended function is called the first thing and only thing the intended function does is call your function.  If you want to return to the intended function, i.e. you want to have a function that is called every time some target function is called and then go back to the target function, things are a little more difficult.  This is because you replaced some machine code at the beginning of the function that you now need.  This can be handled by generating some machine code that does what the replaced machine code does and then jumps to the rest of the original function code.  This is basically what <a href=\"https://www.kernel.org/doc/Documentation/kprobes.txt\" rel=\"nofollow\">kprobes</a> is doing except kprobes puts the debug instruction (int 3 for x86) at the beginning of the function and then the debug handler calls the probe function as opposed to placing a call to your instruction.</p>\n\n<p>Note this is a somewhat high level explanation as the details are architecture specific.  For example, when you replace the intended instructions if the instructions are instruction pointer relative instructions things get complicated as the instruction pointer is not what it would typically be.  I would suggest looking at <a href=\"https://www.kernel.org/doc/Documentation/kprobes.txt\" rel=\"nofollow\">kprobes</a> for some of the architecture specific details.</p>\n"}, {"tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": -1, "last_activity_date": 1436395297, "creation_date": 1436395297, "answer_id": 31305106, "question_id": 31304274, "link": "https://stackoverflow.com/questions/31304274/generalizing-system-call-hijacking-to-any-kernel-symbol/31305106#31305106", "title": "Generalizing system call hijacking to any kernel symbol", "body": "<p>Linux kernel symbol addresses can be found at /proc/kallsyms. You should be root if you access that part because many kernels employ a security check not to expose kernel symbols to unprivileged users. The reason is it helps a lot in building an attack vector.  </p>\n\n<p>These symbols are different from the system call table and are stored entirely in kernel space, so you can't access those memory addresses like you did with the syscall tables. If you try - you will find that accessing the memory address you want to change will crash your program.</p>\n\n<p>If you want to change <code>capable</code> (or, to go deeper, <code>ns_capable</code>), you need to be able to write to the kernel address space and override the binary code in <code>ns_capabale</code> address you found from kallsyms. There are no function pointers you can hijack, just actual binary.</p>\n\n<p>I assume you own the machine you're trying this on, so switch to root and <code>cat /proc/kallsyms | grep ns_capable</code> (may or may not work as non-privileged too, depending on the kernel). Now you have the address of the beginning of the function you want to hack.</p>\n\n<p>If you are at a friends house and don't have access to a privileged account, you can still employ the guidelines below to find a weakness for kallsyms and change it's behavior to export symbols to anyone.</p>\n\n<p>Now you have to find a security failure in the kernel (a weakness) and exploit it so that you could write into kernel space and replace the instructions for <code>ns_capable</code> with <code>mov eax, 1</code> and <code>ret</code> which means return true. </p>\n\n<p>This is actually the challenging part. Here you will have to find a weakness that the target kernel is vulnerable to in web sites like <a href=\"http://www.cvedetails.com/product/47/Linux-Linux-Kernel.html?vendor_id=33\" rel=\"nofollow\">this</a> or <a href=\"http://www.cvedetails.com/vulnerability-list/vendor_id-33/product_id-47/cvssscoremin-7/cvssscoremax-7.99/Linux-Linux-Kernel.html\" rel=\"nofollow\">this</a> or <a href=\"https://wiki.archlinux.org/index.php/CVE\" rel=\"nofollow\">this</a> or <a href=\"http://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=linux%20kernel\" rel=\"nofollow\">this</a> (you get the point - it's public knowledge (; ) and develop an exploit to do what you need.</p>\n\n<p>Browsing through the list of CVEs is tiresome, and many weaknesses will not help you gain write access to the kernel space, but be patient, read the summaries through and find a weakness to exploit.</p>\n\n<p>I'm not profound of system call internals, but if you run your code from userspace, that means the address you're changing is within the process running it. Didn't see anything other than straight access and as far as I know, you can't access memory addresses outside your process memory space because it will fault.</p>\n"}], "owner": {"reputation": 1988, "user_id": 1953537, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33572e26daf9332df748776cdb2e2065?s=128&d=identicon&r=PG", "display_name": "Melab", "link": "https://stackoverflow.com/users/1953537/melab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1554, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1436395297, "creation_date": 1436391502, "question_id": 31304274, "link": "https://stackoverflow.com/questions/31304274/generalizing-system-call-hijacking-to-any-kernel-symbol", "title": "Generalizing system call hijacking to any kernel symbol", "body": "<p>I know how to hijack system calls in modern Linux kernels well enough to engineer simple replacements for them. The code I use to hijack a system call generally looks like:</p>\n\n<pre><code>static unsigned long *sys_call_table = (unsigned long*)&lt;address of system call table&gt;;\n\u2026\nint make_rw(unsigned long address) {\n    unsigned int level;\n    pte_t *pte = lookup_address(address, &amp;level);\n    if (pte-&gt;pte &amp;~ _PAGE_RW) {\n        pte-&gt;pte |= _PAGE_RW;\n    }\n    return 0;\n}\nint make_ro(unsigned long address) {\n    unsigned int level;\n    pte_t *pte = lookup_address(address, &amp;level);\n    pte-&gt;pte = pte-&gt;pte &amp;~ _PAGE_RW;\n    return 0;\n}\n\u2026\nasmlinkage long (*real_&lt;system call name&gt;)(&lt;system call arguments&gt;);\n\nasmlinkage long hijacked_&lt;system call name&gt;(&lt;hijacked system call arguments&gt;) {\n    // replacement code goes here\n}\n\u2026\nvoid hack(void) {\n    make_rw((unsigned long)sys_call_table);\n    real_&lt;system call name&gt; = (void*)*(sys_call_table + __NR_&lt;system call name&gt;);\n    *(sys_call_table + __NR_&lt;system call name&gt;) = (unsigned long)hijacked_&lt;system call name&gt;;\n    make_ro((unsigned long)sys_call_table);\n}\nvoid restore(void) {\n    make_rw((unsigned long)sys_call_table);\n    *(sys_call_table + __NR_&lt;system call name&gt;) = (unsigned long)real_&lt;system call name&gt;;\n    make_ro((unsigned long)sys_call_table);\n}\n</code></pre>\n\n<p>Linux exports other functions (I think they are called \"symbols\") that are used internally by the kernel. One such symbol is <code>capable</code>, defined in <code>linux/capability.c</code> as:</p>\n\n<pre><code>bool capable(int cap)\n{\n    return ns_capable(&amp;init_user_ns, cap);\n}\n</code></pre>\n\n<p>My theory is that I can use the same code that I use for hijacking system calls, only without the bits like <code>sys_call_table</code> and <code>__NR_&lt;system call name&gt;</code>. But I suspect that this might only be the case with system calls, since hijacking them involves replacing pointers to addresses. Would this work with other symbols? If not, how can I hijack them in a fairly simple way?</p>\n"}, {"tags": ["c", "syntax", "void-pointers"], "answers": [{"comments": [{"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 1, "creation_date": 1436391471, "post_id": 31304202, "comment_id": 50598234, "body": "But <code>bar[i++]</code> advances a <code>void*</code> type and <code>bar++;</code> advances a <code>void**</code> type."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1436391546, "post_id": 31304202, "comment_id": 50598268, "body": "@kuhaku No they don&#39;t. <code>bar[i++]</code> accesses <code>bar</code> (a <code>void**</code>) at the <code>i</code>th position, and increments <code>i</code>. <code>bar++</code> advances <code>bar</code> by one element."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1436392766, "post_id": 31304202, "comment_id": 50598841, "body": "&quot;A pointer to a pointer to anything is a pointer to anything&quot; -- it would be better to say that it&#39;s a pointer to <i>something</i> (only <code>void*</code> is a pointer to <i>anything</i>)."}], "tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": true, "score": 4, "last_activity_date": 1436391200, "creation_date": 1436391200, "answer_id": 31304202, "question_id": 31304132, "link": "https://stackoverflow.com/questions/31304132/questions-about-void-pointers/31304202#31304202", "title": "Questions about void pointers", "body": "<blockquote>\n  <p>1.Is the above equivalent to the following?</p>\n\n<pre><code>bar[i++] = foo;\n</code></pre>\n  \n  <p>If yes it's unexpected because bar++; moves the double\n  pointer forward and not single pointer, which is different from non\n  void types.</p>\n</blockquote>\n\n<p>It's fine because <code>bar</code> is a pointer to an array of pointers. The size of a <code>void*</code> is known (it's the size of a pointer), so you know where the next element of a <code>void**</code> array is.</p>\n\n<blockquote>\n  <p>2.Why is it fine to return <code>void**</code> from a <code>void * foo();</code>?</p>\n</blockquote>\n\n<p>Because <code>void*</code> is a pointer to anything. A pointer to a pointer to anything is a pointer to anything, so <code>void**</code> can be implicitly converted to <code>void*</code>.</p>\n"}], "owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 31304202, "answer_count": 1, "score": -3, "last_activity_date": 1436391200, "creation_date": 1436390886, "last_edit_date": 1436391010, "question_id": 31304132, "link": "https://stackoverflow.com/questions/31304132/questions-about-void-pointers", "title": "Questions about void pointers", "body": "<p>I have two questions about void pointers; we have:</p>\n\n<pre><code>void * foo=malloc(99) \nvoid **bar=(void**)malloc(99);\n\nint i=1;\nbar++;\n*bar = foo;\n</code></pre>\n\n<p>1.Is the above equivalent to the following?</p>\n\n<pre><code>bar[i++] = foo;\n</code></pre>\n\n<p>If yes it's unexpected because <code>bar++;</code> moves the double pointer forward and not single pointer, which is different from non void types.</p>\n\n<p>2.Why is it fine to return <code>void**</code> from a <code>void * foo();</code>?</p>\n\n<p>For example: </p>\n\n<pre><code> void * foo(){\n     void ** bar;\n     return bar;\n }\n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436390794, "post_id": 31303997, "comment_id": 50597908, "body": "Show all relevant code! My crystal ball broke yesterday."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436391091, "post_id": 31303997, "comment_id": 50598048, "body": "OK, something corrupted that parameter, maybe it&#39;s your code?  ^^^^^^"}, {"owner": {"reputation": 2397, "user_id": 2073469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gWJA4.jpg?s=128&g=1", "display_name": "jacwah", "link": "https://stackoverflow.com/users/2073469/jacwah"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436391183, "post_id": 31303997, "comment_id": 50598091, "body": "@Olaf But none of my code was executed in between. What code is relevant?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436391417, "post_id": 31303997, "comment_id": 50598202, "body": "It&#39;s <b>your</b> code, so why ask me?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436393367, "post_id": 31303997, "comment_id": 50599095, "body": "Also, are you debugging a build with all optimization off?  You should be."}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436393723, "post_id": 31304293, "comment_id": 50599227, "body": "Have an upvote for mentioning optimization.  All kinds of weird stuff happens with high optimization and debuggers.   I frequently see object instance pointer parameters with null values on method entry; they turn into valid values after a few lines have been executed:)"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436395442, "post_id": 31304293, "comment_id": 50599848, "body": "Not to mention crazy stuff when doing step by step... See this: <a href=\"http://stackoverflow.com/questions/25844867/how-to-tell-where-a-shared-library-is-loaded-in-process-address-space\" title=\"how to tell where a shared library is loaded in process address space\">stackoverflow.com/questions/25844867/&hellip;</a> that&#39;s what I was referring to. I struggled with this on and off for two weeks..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436396615, "post_id": 31304293, "comment_id": 50600263, "body": "^^ lol...................."}, {"owner": {"reputation": 2397, "user_id": 2073469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gWJA4.jpg?s=128&g=1", "display_name": "jacwah", "link": "https://stackoverflow.com/users/2073469/jacwah"}, "edited": false, "score": 0, "creation_date": 1436397380, "post_id": 31304293, "comment_id": 50600517, "body": "I stepped through the instructions as you suggested. I couldn&#39;t reproduce the same message, but I found a bug and fixing lead to the error going away. It can&#39;t have been the cause though, since that code was executed inside a function called by <code>init_text_buffer</code>."}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": true, "score": 2, "last_activity_date": 1436391557, "creation_date": 1436391557, "answer_id": 31304293, "question_id": 31303997, "link": "https://stackoverflow.com/questions/31303997/how-can-an-argument-be-different-in-the-caller-and-the-callee/31304293#31304293", "title": "How can an argument be different in the caller and the callee?", "body": "<p>You should go into hybrid assembly mode (Ctrl+x 2) and do stepi to examine which instructions are actually being performed. I had this recently - in my case it was an optimization that the C code of course didn't reveal. In your case, it could reveal a memory overrun. </p>\n\n<p>Worth a shot.</p>\n"}], "owner": {"reputation": 2397, "user_id": 2073469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gWJA4.jpg?s=128&g=1", "display_name": "jacwah", "link": "https://stackoverflow.com/users/2073469/jacwah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "closed_date": 1436477382, "accepted_answer_id": 31304293, "answer_count": 1, "score": 0, "last_activity_date": 1436391557, "creation_date": 1436390432, "question_id": 31303997, "link": "https://stackoverflow.com/questions/31303997/how-can-an-argument-be-different-in-the-caller-and-the-callee", "closed_reason": "Not suitable for this site", "title": "How can an argument be different in the caller and the callee?", "body": "<p>I'm debugging a program and ran across something I've never seen before. Below is an excerpt from <code>gdb</code>.</p>\n\n<pre><code>1236            size = init_text_buffer(fn);\n(gdb) p fn\n$13 = 0x7fff1cd22d80 \"-\"\n(gdb) s\ninit_text_buffer (fn=0xd00 &lt;error: Cannot access memory at address 0xd00&gt;)\n    at editors/vi.c:720\n720 {\n</code></pre>\n\n<p>The function <code>init_text_buffer</code> is called with a <code>char</code> pointer with the value <code>0x7fff78136bd0</code>. As I step into the function the argument suddently has a different value.</p>\n\n<p>What are possible causes of this? I'm not asking you to debug my code (I didn't include any so how could you?), I just need a pointer in the right  direction. This thing has left me with no clues as to what to look for at all. </p>\n"}, {"tags": ["c", "sockets", "ubuntu", "client", "server"], "comments": [{"owner": {"reputation": 1952, "user_id": 1366211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/493108c081e68e071d26ead12a3918b1?s=128&d=identicon&r=PG", "display_name": "mittmemo", "link": "https://stackoverflow.com/users/1366211/mittmemo"}, "edited": false, "score": 0, "creation_date": 1436389971, "post_id": 31303786, "comment_id": 50597507, "body": "You should be binding once, but listening for connections in the while loop.  Currently the way you have it coded, the server process ends as soon as it receives (or fails to receive) a message."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436390920, "post_id": 31303786, "comment_id": 50597960, "body": "you can use the setsocketoptions() function to enable &#39;keepalive&#39; Then the connection will not close until, either, client or server end exits the program or the socket is explicitly closed (preferably by : &#39;shutdown(socket, SHUT_RDWR); close(socket);&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436391084, "post_id": 31303786, "comment_id": 50598039, "body": "keepalive can be set via: &#39;INT32 keepAlive = 1; INT32 result = 0;  result = setsockopt(socket, SOL_SOCKET, SO_KEEPALIVE, &amp;keepAlive, (socklen_t)sizeof(keepAlive));&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436467785, "post_id": 31303883, "comment_id": 50638041, "body": "I added a while loop to my listen() but now the client keeps on sending messages but doesn&#39;t outputs on the server screen, server.c is also running but doesn&#39;t output anything. How do I make the program terminate when the client enters &quot;exit&quot;. I need to add some condition like while(msg != &#39;exit&#39;)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436468242, "post_id": 31303883, "comment_id": 50638292, "body": "IIRC, the read only returns with 0 bytes read, if the link has been closed. But what do you actually want? You wrote you want ot keep the server running, now you want to terminate when the client disconnects. Pick one. And read about socket programming. It is all in the docs. Please understand this is not a tutorial site."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436468310, "post_id": 31303883, "comment_id": 50638325, "body": "For the termination on command: Just end the while loop when you recieve the corresponding message."}, {"owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436470039, "post_id": 31303883, "comment_id": 50639264, "body": "I want to end the connection when the clients types &#39;exit&#39; how do I do that? Doesn&#39;t the server receives the message in packets/bytes?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436470758, "post_id": 31303883, "comment_id": 50639658, "body": "Sockets provide an <i>octet stream</i>. Just have the messages defined as you need them. There is no difference from the other messages. Just check if that is your exit-message and end the loop. Please do some research on your own!"}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 1, "last_activity_date": 1436390062, "creation_date": 1436390062, "answer_id": 31303883, "question_id": 31303786, "link": "https://stackoverflow.com/questions/31303786/c-creating-endless-socket-connection-between-server-and-client-linux/31303883#31303883", "title": "C - Creating endless socket connection between server and client (Linux)", "body": "<p>What do you actually expect the server to do? You open/read/terminate. Termination, of course closes the socket implicitly - luckily, as you forgot to close explicitly.</p>\n\n<p>You have to constantly read from the socket. Not sure what you mean by \"it ...gives me an Error on binding\"; if you try to re-bind, that is of course wrong. You would not open a file again and again, and ... just to read its data.</p>\n\n<p>If you want to listen on the socket after it has been closed from the other side, just have <code>listen</code> in an outer loop.</p>\n\n<p>Read Wikipedia for basics about <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\" rel=\"nofollow\">sockets</a> and check the links.</p>\n"}, {"comments": [{"owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436467956, "post_id": 31304102, "comment_id": 50638137, "body": "I added a while loop to my server/client code it is now endless but now when client sends message, the server is not displaying it. How do I display them. You&#39;re while loop made my code work but how can I terminate the program when user enters &quot;exit&quot;?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436468487, "post_id": 31304102, "comment_id": 50638408, "body": "@moose: Standard warning: do not cast <code>void *</code>. This is legacy stuff and strongly deprecated. It will suppress compiler warnings do to invalid types. Read <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">here</a>. Note the compiler is your friend."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "reply_to_user": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 1, "creation_date": 1436530287, "post_id": 31304102, "comment_id": 50664795, "body": "@moose well you will have to scan the client&#39;s message and whenever exit is sent you terminate the server loop. But that should be an other question on here. Please accept my answer if it helped"}, {"owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1436558696, "post_id": 31304102, "comment_id": 50681898, "body": "@LonniBesan&#231;on Thanks man! it works fine now. I added a while loop the wrong way. But now it&#39;s receiving fine. Thank you!"}], "tags": [], "owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "is_accepted": true, "score": 2, "last_activity_date": 1436390775, "creation_date": 1436390775, "answer_id": 31304102, "question_id": 31303786, "link": "https://stackoverflow.com/questions/31303786/c-creating-endless-socket-connection-between-server-and-client-linux/31304102#31304102", "title": "C - Creating endless socket connection between server and client (Linux)", "body": "<p>The problem with your server is that you immediately terminate whenever you receive a message. What you should do is keep on listening with the recv() function until the client disconnects. Here is one piece of code that should do the trick. </p>\n\n<p>Disclaimer: However I haven't tested it, it's from an old project that I modified for you on the fly it's supposed to work but I'm not 100% sure it does, I have no time to test it right now but feel free to ask questions if there is something wrong, I'll try to correct it.</p>\n\n<p>EDIT: trying to re-bing causes an error because the binding is already done and the port is already busy so you cannot \"assign\" an other program to this port therefore giving you an error. The only thing that you have to do is make sure that your server listens until the client disconnects from the server.</p>\n\n<p>Also, it is possible that some of the code was made for c++ at some point, but the networking part should work just fine.</p>\n\n<p>Feel free to try it out and comment if you have questions.\nServer.c:</p>\n\n<pre><code>    int socket_desc , client_sock , c , *new_sock;\n    struct sockaddr_in server , client;\n\n    socket_desc = socket(AF_INET , SOCK_STREAM , 0);\n    if (socket_desc == -1)\n    {\n        //HANDLE ERROR\n    }\n    printf(\"Socket created\\n\");\n\n    //Prepare the sockaddr_in structure\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons( 8000 );\n\n    //Binding, you already do it correctly.\n    if( bind(socket_desc,(struct sockaddr *)&amp;server , sizeof(server))&lt; 0)\n    {\n        //ERROR\n    }\n    printf(\"bind done\");\n\n    //Listen\n    listen(socket_desc , 3);\n\n    printf(\"Waiting for incoming connections...\");\n    c = sizeof(struct sockaddr_in);\n\n\n    while( (client_sock = accept(socket_desc, (struct sockaddr *)&amp;client, (socklen_t*)&amp;c)) )\n    {\n        puts(\"Connection accepted\");\n\n        pthread_t sniffer_thread;\n        new_sock = (int*) malloc(1);\n        *new_sock = client_sock;\n\n        if( pthread_create( &amp;sniffer_thread , NULL ,  connection_handler , (void*) new_sock) &lt; 0)\n        {\n            //ERROR\n        }\n\n        printf(\"Handler assigned\");\n    }\n\n    if (client_sock &lt; 0)\n    {\n        //ERROR\n    }\n\n    //return 0;\n\n}\n\n/*\n * This will handle connection for each client you may have and read indefinitely\n * */\nvoid *connection_handler(void *socket_desc)\n{\n    //Get the socket descriptor\n    int sock = *(int*)socket_desc;\n    int read_size;\n    char *message , client_message[2000];\n    string smatrix ;\n    int ind ;\n    string tok ;\n    int i = 0 ;\n\n\n    //Receive a message from client\n    while( (read_size = recv(sock , client_message , 2000 , 0)) &gt; 0 )\n    {\n        //What you want to do with the client's message\n    }\n\n    if(read_size == 0)\n    {\n        printf(\"Client disconnected\");\n        fflush(stdout);\n    }\n    else if(read_size == -1)\n    {\n        //ERROR\n    }\n\n    //Free the socket pointer\n    free(socket_desc);\n</code></pre>\n\n<p>As for the client, do a while loop until a certain time has passed or a given character or value is entered. Something like:</p>\n\n<pre><code>while(wantToExit == false){\n   char a;\n   printf(\"Please enter a char\");\n   scanf(\"%c\", &amp;a);\n   write(sock , a , 1); //Note use strlen() for strings\n}\n</code></pre>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11238, "favorite_count": 0, "accepted_answer_id": 31304102, "answer_count": 2, "score": 2, "last_activity_date": 1436467538, "creation_date": 1436389729, "last_edit_date": 1436467538, "question_id": 31303786, "link": "https://stackoverflow.com/questions/31303786/c-creating-endless-socket-connection-between-server-and-client-linux", "title": "C - Creating endless socket connection between server and client (Linux)", "body": "<p>I have a simple socket program created in C (using Ubuntu), the connection works fine, server compiles and client provides the IP and port number.</p>\n\n<p>But when the connection is established, the client can only <code>send one message</code> and then the <code>connection closes</code>. When the client sends the message, the server receives it and the program <code>ends by itself</code>.</p>\n\n<p>I tried to use a <code>while loop</code>, but then it gives me an <code>Error on binding</code>. Is there any way to make it infinite, so that when user enters <code>exit</code> or some <code>specific key/command</code>, the program ends.</p>\n\n<p>server.c UPDATED with WHILE LOOP</p>\n\n<pre><code>#include&lt;stdio.h&gt;  \n#include&lt;stdlib.h&gt;  \n#include&lt;sys/types.h&gt;     \n#include&lt;sys/socket.h&gt;  \n#include&lt;netinet/in.h&gt;  \n#include&lt;string.h&gt;  \n\nint main(int argc, char *argv[])  \n{  \n      int sockfd, newsockfd, portNum, clien, n;\n      char buffer[256];\n      struct sockaddr_in serv_addr,cli_addr;\n  if (argc &lt; 2)\n  {\n        fprintf(stderr, \"\\nno port provided\");\n        exit(1);\n  }\n\n  sockfd = socket(AF_INET,SOCK_STREAM, 0);\n  if (sockfd &lt; 0)\n        printf(\"\\nprovide a valid port number\\n\");\n\n  bzero((char *)&amp;serv_addr, sizeof(serv_addr));\n  portNum = atoi(argv[1]);\n\n  serv_addr.sin_family = AF_INET;\n  serv_addr.sin_addr.s_addr = INADDR_ANY;\n  serv_addr.sin_port = htons(portNum);\n\n  if (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0 )\n        printf(\"error on binding\");\n\n  while(1)\n  {\n       listen(sockfd,5);\n  }\n  clien = sizeof(cli_addr);\n  newsockfd=accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clien );\n\n  if (newsockfd &lt; 0)\n        printf(\"=&gt; Error on accepting...\\n\");\n\n  bzero(buffer, 256);  \n  n = read(newsockfd, buffer, 256); \n\n  if (n &lt; 0)  \n        printf(\"error reading from socket...\\n\");\n\n  printf(\"%s\\n\", buffer);\n  n = write(newsockfd, \"message received.\", 58);\n\n  if (n &lt; 0)\n        printf(\"cannot write from socket...\\n\");\n\n  return 0;\n}\n</code></pre>\n\n<p>client.c UPDATED with WHILE LOOP</p>\n\n<pre><code>#include&lt;stdio.h&gt;  \n#include&lt;stdlib.h&gt;  \n#include&lt;sys/types.h&gt;     \n#include&lt;sys/socket.h&gt;  \n#include&lt;netinet/in.h&gt;  \n#include&lt;netdb.h&gt;  \n#include&lt;string.h&gt;  \n\nint main(int argc, char *argv[])  \n{  \n      int sockfd,portno,n;\n      char buffer[256];\n      struct sockaddr_in serv_addr;\n      struct hostent *server;\n\n      //while(counter != 5)\n      // /{\n            if (argc &lt; 3)\n      {  \n            fprintf(stderr,\"Usage %s hostname port...\\n\",argv[0]);\n            exit(1);\n      }\n\n      portno = atoi(argv[2]);\n      sockfd = socket(AF_INET, SOCK_STREAM, 0);\n      if (sockfd &lt; 0)\n            printf(\"\\error opening socket...\\n\");\n\n      bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n      server = gethostbyname(argv[1]);\n\n      if (server == NULL)\n      {\n            fprintf(stderr,\"no such host...\\n\");\n            exit(0);\n      }\n\n      serv_addr.sin_family = AF_INET;\n      bcopy((char *)server-&gt;h_addr,(char *)&amp;serv_addr.sin_addr.s_addr,server-&gt;h_length);\n      serv_addr.sin_port = htons(portno);\n\n      if (connect(sockfd, &amp;serv_addr,sizeof(serv_addr)) &lt;0 )  \n            printf(\"\\error connecting\\n\");\n\n      printf(\"your message:\");\n      fgets(buffer, 256, stdin);\n      while(1)\n      {\n            n = write(sockfd,buffer,strlen(buffer));\n      }\n      if (n &lt; 0)\n            printf(\"error writing to socket\\n\");\n\n      n = read(sockfd, buffer, 255);\n\n      if (n &lt; 0)\n            printf(\"error reading from socket\\n\");\n\n      printf(\"%s\\n\", buffer);          \n\n      return 0;\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "pointers", "static-memory-allocation"], "comments": [{"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 1, "creation_date": 1436388582, "post_id": 31303379, "comment_id": 50596808, "body": "Just look up &quot;arrays and pointers in C&quot;."}, {"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1436388761, "post_id": 31303379, "comment_id": 50596898, "body": "This article might help a little: <a href=\"http://eli.thegreenplace.net/2009/10/21/are-pointers-and-arrays-equivalent-in-c\" rel=\"nofollow noreferrer\">eli.thegreenplace.net/2009/10/21/&hellip;</a>"}, {"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 1, "creation_date": 1436388903, "post_id": 31303379, "comment_id": 50596975, "body": "The name of an array IS a pointer to its first element. &#39;float f [4]&#39; will allocate space on the stack, float *f defines just an uninitialized pointer. When you call your function passing the array, you don&#39;t pass all the data, just the address of data that is already allocated by the caller. So the function doesn&#39;t have to allocate it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1436388943, "post_id": 31303379, "comment_id": 50597004, "body": "You are being confused by what <code>[ ]</code> means in two contexts.  To access elements, <code>[ ]</code> is used, whether it is a pointer or array.  That is not related to how you <i>declare</i> pointers and arrays."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 1, "creation_date": 1436389854, "post_id": 31303379, "comment_id": 50597442, "body": "@jacdeh No, the name of an array is the name of an array. It may decay to a pointer to the first element in some situations. Claiming otherwise is misleading."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436391165, "post_id": 31303379, "comment_id": 50598084, "body": "They are different things."}], "answers": [{"tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 1, "last_activity_date": 1436388900, "last_edit_date": 1436388900, "creation_date": 1436388494, "answer_id": 31303415, "question_id": 31303379, "link": "https://stackoverflow.com/questions/31303379/what-is-the-difference-between-float-and-floatn-in-c-c/31303415#31303415", "title": "What is the difference between float* and float[n] in C/C++", "body": "<pre><code>float* f;\n</code></pre>\n\n<p>It is a pointer to a variable named  f of type float</p>\n\n<pre><code>float f[4];\n</code></pre>\n\n<p>It is an array variable named f of type float with size 4</p>\n\n<p>What is the difference between using</p>\n\n<p>float* f;</p>\n\n<p>and</p>\n\n<p>float f[4];</p>\n\n<blockquote>\n  <p>Or are they treated the exact same way?</p>\n</blockquote>\n\n<p>No</p>\n\n<blockquote>\n  <p>Will using one over the other potentially cause you to run into memory\n  allocation issues?</p>\n</blockquote>\n\n<p>You are not supposed to use one in place of other, you may face multiple issues not only memory related issues.</p>\n\n<blockquote>\n  <p>If not, are there ANY situations where they are treated differently?</p>\n</blockquote>\n\n<p>They always treat differently except the scenario  array and pointer declarations interchangeable as function formal parameters. </p>\n\n<blockquote>\n  <p>which compiles and runs fine (I'm not really sure why - I would think\n  that since I didn't allocate any memory to f that it would throw some\n  kind of exception).</p>\n</blockquote>\n\n<p>This scenario is explained above as an exception in previous answer.</p>\n\n<p>Read <a href=\"http://c-faq.com/aryptr/index.html\" rel=\"nofollow\">arrays and pointers </a></p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1436388571, "creation_date": 1436388571, "answer_id": 31303442, "question_id": 31303379, "link": "https://stackoverflow.com/questions/31303379/what-is-the-difference-between-float-and-floatn-in-c-c/31303442#31303442", "title": "What is the difference between float* and float[n] in C/C++", "body": "<blockquote>\n  <p><em>\"I would think that since I didn't allocate any memory to f that it would throw some kind of exception).\"</em></p>\n</blockquote>\n\n<p>No, if you didn't allocate memory for <code>f</code> appropriately, dereferencing is simply <strong>undefined behavior</strong>. No exceptions guaranteed.</p>\n\n<p>Your fridge might eat your cat in case ...</p>\n"}, {"tags": [], "owner": {"reputation": 22053, "user_id": 19404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/180eea9fb31f162096da95e7a8c744cf?s=128&d=identicon&r=PG", "display_name": "Gerald", "link": "https://stackoverflow.com/users/19404/gerald"}, "is_accepted": true, "score": 5, "last_activity_date": 1436389042, "last_edit_date": 1436389042, "creation_date": 1436388742, "answer_id": 31303494, "question_id": 31303379, "link": "https://stackoverflow.com/questions/31303379/what-is-the-difference-between-float-and-floatn-in-c-c/31303494#31303494", "title": "What is the difference between float* and float[n] in C/C++", "body": "<pre><code>float f[4]\n</code></pre>\n\n<p>is an array that is allocated with automatic storage (typically the stack)</p>\n\n<pre><code>float* f;\n</code></pre>\n\n<p>is a pointer, which by itself has no allocation other than the size of a pointer. It can point to a single floating point value, or an array of floats that was allocated with either automatic or dynamic storage (heap)</p>\n\n<p>An unallocated pointer typically points to random memory, so if you pass it into your <code>myfun</code> function, you will get undefined behavior. Sometimes it may seem to work (overwriting whatever random memory it is pointing too), and sometimes it will except (trying to write to invalid or inaccessible memory)</p>\n\n<p>They are treated the same in many situations, and not in others. i.e. <code>sizeof(f)</code> will be different.</p>\n"}], "owner": {"reputation": 185, "user_id": 4262074, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/psymz.png?s=128&g=1", "display_name": "asrjarratt", "link": "https://stackoverflow.com/users/4262074/asrjarratt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "closed_date": 1436389414, "accepted_answer_id": 31303494, "answer_count": 3, "score": -4, "last_activity_date": 1436389778, "creation_date": 1436388385, "last_edit_date": 1436389778, "question_id": 31303379, "link": "https://stackoverflow.com/questions/31303379/what-is-the-difference-between-float-and-floatn-in-c-c", "closed_reason": "Duplicate", "title": "What is the difference between float* and float[n] in C/C++", "body": "<p>What is the difference between using</p>\n\n<pre><code>float* f;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>float f[4];\n</code></pre>\n\n<p>Or are they treated the exact same way? Will using one over the other potentially cause you to run into memory allocation issues? If not, are there ANY situations where they are treated differently?</p>\n\n<p>Don't know if this is relevant, but I'm using the type float* as a function argument. For example:</p>\n\n<pre><code>void myfun(float* f){\n     f[0] = 0;\n     f[1] = 1;\n     f[2] = 2;\n     f[3] = 3;\n}\n</code></pre>\n\n<p>which compiles and runs fine (I'm not really sure why - I would think that since I didn't allocate any memory to <code>f</code> that it would throw some kind of exception). </p>\n"}, {"tags": ["java", "c", "windows"], "comments": [{"owner": {"reputation": 427, "user_id": 2112217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef45bb9d71c60e3855badf7889881cf?s=128&d=identicon&r=PG", "display_name": "ASP", "link": "https://stackoverflow.com/users/2112217/asp"}, "edited": false, "score": 0, "creation_date": 1436388554, "post_id": 31303213, "comment_id": 50596789, "body": "C# sharp allows to execute powershell command then you can do &quot;Get-Process Java*&quot; can you do with c? it will display all java related process"}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1436391981, "post_id": 31303213, "comment_id": 50598479, "body": "Can&#39;t you run <code>tasklist</code> using stdlib&#39;s <code>system()</code> to get the list of processes that you then parse?"}, {"owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "edited": false, "score": 0, "creation_date": 1436395840, "post_id": 31303213, "comment_id": 50600008, "body": "No, you can&#39;t possibly. Someone can rename executables and dlls so as to run Java invisibly to you."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 427, "user_id": 2112217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef45bb9d71c60e3855badf7889881cf?s=128&d=identicon&r=PG", "display_name": "ASP", "link": "https://stackoverflow.com/users/2112217/asp"}, "edited": false, "score": 0, "creation_date": 1436398981, "post_id": 31303213, "comment_id": 50600975, "body": "@ASP: I could probably, but eventually it would be in powershell not in C."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1436399068, "post_id": 31303213, "comment_id": 50601012, "body": "@meaning-matters: of course I could, but it still wouldn&#39;t be in C. Also, if i get the list of every running process(which I could get also with Windows APIs), I still wouldn&#39;t know which one is a java process and which one isn&#39;t. That&#39;s actually my problem"}], "answers": [{"tags": [], "owner": {"reputation": 3324, "user_id": 2747804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9ffaa454e2cd76a49a02aeb0a32bd3?s=128&d=identicon&r=PG&f=1", "display_name": "halfbit", "link": "https://stackoverflow.com/users/2747804/halfbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1436393501, "creation_date": 1436393501, "answer_id": 31304741, "question_id": 31303213, "link": "https://stackoverflow.com/questions/31303213/how-to-find-every-java-process/31304741#31304741", "title": "How to find every java process?", "body": "<p>(Take this as a comment which is unfortunately to long, so I post it as an answer.) Just providing some links which I stumbled upon looking for an answer:</p>\n\n<p>As using a JRE file probably means having it open, the Sysinternals tool <a href=\"https://technet.microsoft.com/en-us/sysinternals/bb896655.aspx\" rel=\"nofollow\">Handle</a> might be helpful. It seems to use the <a href=\"https://en.wikipedia.org/wiki/Object_Manager_%28Windows%29\" rel=\"nofollow\">Windows Object Manager</a> to be able to find open files (by path fragment) and their associated processes.</p>\n\n<p>The only promising <a href=\"http://www.drdobbs.com/using-nts-undocumented-object-manager-in/184416468\" rel=\"nofollow\">C source code</a> related to Object Manager I found unfortunately seems quite outdated (1997). But at least the key function <a href=\"https://msdn.microsoft.com/en-us/library/bb470238%28v=vs.85%29.aspx\" rel=\"nofollow\">NtQueryDirectoryObject</a> used there still exists although it <em>\"has no associated import library or header file\"</em>. So it might still be possible to make use of that C code.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5090639, "user_type": "registered", "profile_image": "https://graph.facebook.com/927506220647456/picture?type=large", "display_name": "Luis Carlos Padierna", "link": "https://stackoverflow.com/users/5090639/luis-carlos-padierna"}, "is_accepted": false, "score": 0, "last_activity_date": 1436395712, "creation_date": 1436395712, "answer_id": 31305172, "question_id": 31303213, "link": "https://stackoverflow.com/questions/31303213/how-to-find-every-java-process/31305172#31305172", "title": "How to find every java process?", "body": "<p>The JDK in Java 8 provides several libraries for Monitoring. I've used visualvm:\n<a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/\" rel=\"nofollow\">http://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/</a></p>\n\n<p>visualvm allows us to visualise and recover information about the process ids, ammount of memory used for each process, etc. So with this tool you can find every running java process.</p>\n\n<p>If you need to do some work with the process id, the next step will be how visualvm does for getting such information.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1436395712, "creation_date": 1436387852, "question_id": 31303213, "link": "https://stackoverflow.com/questions/31303213/how-to-find-every-java-process", "title": "How to find every java process?", "body": "<p>Is it possible somehow to find every running <code>java</code> process? Specifically I would need the ProcessId of the Java processes.</p>\n\n<p>If I install the Java Developement Kit, there is an exe called <code>jps.rexe</code>. If I run this exe it finds every running java processes and lists their ProcessID. Basically I need the same, but written in <code>C</code>. The <code>jps.exe</code> requires Java Developement Kit to be installed.</p>\n\n<p>Also note there are two scenarios:<br>\n  - A <code>java.exe</code> or <code>javaw.exe</code> (there are some more) process starts the reuired process, so in this case it would be \"easy\" to find the java processes.<br>\n  - The second one is more complicated. An application will be started, but only some components or features requires java, and there are no <code>java.exe</code> or <code>javaw.exe</code> process running, but the application still uses the jre.</p>\n\n<p>Hopefully it is clear, what I want.</p>\n\n<p>Does anyone have have any idea how to do this?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "arrays", "pointers", "memcpy"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1436387511, "post_id": 31303068, "comment_id": 50596269, "body": "So... we will assume you forgot the <code>[]</code> in your first code snippet?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436387563, "post_id": 31303068, "comment_id": 50596304, "body": "That is not an array, but a pointer to <code>char</code>. I somewhat wonder your compiler does not complain. Enable warnings!"}, {"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 0, "creation_date": 1436387736, "post_id": 31303068, "comment_id": 50596395, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array\">How to find the &#39;sizeof&#39;(a pointer pointing to an array)?</a>"}, {"owner": {"reputation": 1165, "user_id": 783226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/92c226905ec99942c4cfa23c6f75e489?s=128&d=identicon&r=PG&f=1", "display_name": "Aerial", "link": "https://stackoverflow.com/users/783226/aerial"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436387740, "post_id": 31303068, "comment_id": 50596397, "body": "Oops, I forgot to add [] in here. It is an array, trust me. Not a char pointer, I just forgot to place it in here. @WhozCraig Thanks for the warning, it should be with the square braces."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1436387851, "post_id": 31303068, "comment_id": 50596439, "body": "@Xarialon: Your code works as intended. All elements are copied, assuming <code>TOTAL_ITEMS</code> is large enough to accommodate your <code>itemArr</code> array."}, {"owner": {"reputation": 1165, "user_id": 783226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/92c226905ec99942c4cfa23c6f75e489?s=128&d=identicon&r=PG&f=1", "display_name": "Aerial", "link": "https://stackoverflow.com/users/783226/aerial"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1436387921, "post_id": 31303068, "comment_id": 50596476, "body": "@AnT Well, it doesn&#39;t..."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1436387954, "post_id": 31303068, "comment_id": 50596493, "body": "@Xarialon: Yes, it does. See for yourself: <a href=\"https://ideone.com/IVtAUj\" rel=\"nofollow noreferrer\">ideone.com/IVtAUj</a> Unless you have different expectations. In the latter case you have to explain what you expect to happen. &quot;This does not work&quot; is not a meaningful description of the problem."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1436388139, "post_id": 31303068, "comment_id": 50596569, "body": "If your array was declared in a different function from your <code>memcpy()</code> call, <code>sizeof(itemArr)</code> will give the size of the pointer it decayed to rather than the size of the array contents.  Try passing the size separately if that&#39;s the case."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1436388148, "post_id": 31303068, "comment_id": 50596581, "body": "@Xarialon: I suspect that you are providing misleading information. In your actual code you probably forgot the <code>[]</code> in <code>char *itemArr[]</code> and the lousy diagnostic in GCC (do you use GCC?) accepted the broken code. GCC in its default configuration has a very poor quality disgnostics. You have to make an effort to properly configure it in order to whip it in some passable shape. I suspect that you fell a victim to it. Alternatively, you could have fallen into the trap described by Dmitri."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1436388494, "post_id": 31303068, "comment_id": 50596766, "body": "@Xarialon: Here&#39;s a broken version <a href=\"https://ideone.com/huRkK1\" rel=\"nofollow noreferrer\">ideone.com/huRkK1</a>, which some genius at GNU decided should be to accepted as valid C code. At least they issue a warning... Ideone doesn&#39;t show it though."}, {"owner": {"reputation": 1165, "user_id": 783226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/92c226905ec99942c4cfa23c6f75e489?s=128&d=identicon&r=PG&f=1", "display_name": "Aerial", "link": "https://stackoverflow.com/users/783226/aerial"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1436389894, "post_id": 31303068, "comment_id": 50597460, "body": "@Dmitri  I changed the size with a const int value, but that didn&#39;t solve. Instead of having the second index value of the itemArr, I get to see the first index value of another itemArr. What should I do? I have pasted the code below the EDIT text. Please let me know."}, {"owner": {"reputation": 1165, "user_id": 783226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/92c226905ec99942c4cfa23c6f75e489?s=128&d=identicon&r=PG&f=1", "display_name": "Aerial", "link": "https://stackoverflow.com/users/783226/aerial"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1436389897, "post_id": 31303068, "comment_id": 50597464, "body": "@AnT  I have exactly this same problem, what should I do?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1436390557, "post_id": 31303068, "comment_id": 50597810, "body": "@Xarialon: What&#39;s <code>15</code> in <code>memcpy</code> calls? Where did <code>15</code> came from? Why <code>15</code>?"}, {"owner": {"reputation": 1165, "user_id": 783226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/92c226905ec99942c4cfa23c6f75e489?s=128&d=identicon&r=PG&f=1", "display_name": "Aerial", "link": "https://stackoverflow.com/users/783226/aerial"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1436401714, "post_id": 31303068, "comment_id": 50601713, "body": "@AnT 15 is the max size, check URL: <a href=\"http://www.cplusplus.com/reference/cstring/memcpy/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstring/memcpy</a> I have about 15 elements in itemArr, that&#39;s why."}], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 5086615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70aa9333b3faafcb3162de51b02ecb9?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Belloni", "link": "https://stackoverflow.com/users/5086615/antonio-belloni"}, "is_accepted": false, "score": 0, "last_activity_date": 1436388459, "creation_date": 1436388459, "answer_id": 31303402, "question_id": 31303068, "link": "https://stackoverflow.com/questions/31303068/how-to-add-array-in-multidimensional-array/31303402#31303402", "title": "How to add array in multidimensional array?", "body": "<p>The following code works as expect on my Mac :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int TOTAL_ITEMS = 15;\n\n    char *itemArr[] = {\"GPGGA\",\n                       \"193914.00\",\n                       \"5312.983745\",\n                       \"N\",\n                       \"00206.32143\",\n                       \"E\",\n                       \"4,17\",\n                       \"0.6\",\n                       \"43.48\",\n                       \"M\",\n                       \"47.46\",\n                       \"M\",\n                       \"1.0\",\n                       \"0000\",\n                       \"GPGLL,4916.45,N,12311.12,W,225444,A,M\"};\n\n   int index = 0;\n   char *protocols[100][TOTAL_ITEMS];\n   memcpy(&amp;protocols[index++], &amp;itemArr, sizeof(itemArr));\n\n   printf(\"itemArr copy in protocols - index 0: %s\\n\", protocols[0][0]);\n   printf(\"itemArr copy in protocols - index 1: %s\\n\", protocols[0][1]);\n   printf(\"itemArr copy in protocols - index 0: %s\\n\", protocols[0][2]);\n   printf(\"itemArr copy in protocols - index 1: %s\\n\", protocols[0][3]);\n   printf(\"itemArr copy in protocols - index 0: %s\\n\", protocols[0][4]);\n   printf(\"itemArr copy in protocols - index 1: %s\\n\", protocols[0][5]);\n}\n</code></pre>\n\n<p>Maybe you should fix the itemArr declaration to itemArr[]. Your compiler might be throwing a warning and you're ending up with undesired behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1436388917, "creation_date": 1436388917, "answer_id": 31303549, "question_id": 31303068, "link": "https://stackoverflow.com/questions/31303068/how-to-add-array-in-multidimensional-array/31303549#31303549", "title": "How to add array in multidimensional array?", "body": "<p>The original version of your post declared <code>itemArr</code> as</p>\n\n<pre><code>char *itemArr = {\n  \"GPGGA\",\n  \"193914.00\",\n  ...\n</code></pre>\n\n<p>i.e. without the <code>[]</code> in the declarator. My crystal ball tells me that that's what you have in your actual code.</p>\n\n<p>This is not a valid declaration in C language, but GCC (if you use GCC) accepts such declarations for some reason that's beyond my understanding. (The compiler usually issues a warning about excessive number of initializers.) The declaration is effectively translated into </p>\n\n<pre><code>char *itemArr = \"GPGGA\";\n</code></pre>\n\n<p>with the rest of the initializers discarded. The behavior of your code immediately follows from that.</p>\n\n<p>If one adds the missing <code>[]</code> to the declaration of <code>itemArr</code>, the code begins to work as intended. Everything gets copied to the target array.</p>\n"}], "owner": {"reputation": 1165, "user_id": 783226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/92c226905ec99942c4cfa23c6f75e489?s=128&d=identicon&r=PG&f=1", "display_name": "Aerial", "link": "https://stackoverflow.com/users/783226/aerial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1436389383, "creation_date": 1436387368, "last_edit_date": 1436389383, "question_id": 31303068, "link": "https://stackoverflow.com/questions/31303068/how-to-add-array-in-multidimensional-array", "title": "How to add array in multidimensional array?", "body": "<p>My question is very simple, but I still can't manage to get things right because I am simply not used to the C language.</p>\n\n<p>I have an array that looks like this:</p>\n\n<pre><code>char *itemArr[] = {\n    \"GPGGA\",\n    \"193914.00\",\n    \"5312.983745\",\n    \"N\",\n    \"00206.32143\",\n    \"E\",\n    \"4,17\",\n    \"0.6\",\n    \"43.48\",\n    \"M\",\n    \"47.46\",\n    \"M\",\n    \"1.0\",\n    \"0000\",\n    \"GPGLL,4916.45,N,12311.12,W,225444,A,M\"\n};\n</code></pre>\n\n<p>And I would like to add itemArr to a new multidimensional array, but when I try to copy the content of itemArr to protocols array like this:</p>\n\n<pre><code>int index = 0;\nchar *protocols[100][TOTAL_ITEMS];\nmemcpy(&amp;protocols[index++], &amp;itemArr, sizeof(itemArr));\n</code></pre>\n\n<p>It does only copy the first item of the itemArr and not the rest. So I can only see the first item like the following code:</p>\n\n<pre><code>printf(\"itemArr copy in protocols - index 0: %s\\n\", protocols[0][0]);\n</code></pre>\n\n<p>For example, this does not work:</p>\n\n<pre><code>printf(\"itemArr copy in protocols - index 1: %s\\n\", protocols[0][1]);\n</code></pre>\n\n<p>Please help me with a better example of how I should use memcpy, to copy an array to a multidimensional array. Thanks!</p>\n\n<p>EDIT:</p>\n\n<p>I tried my best to explain the code as simple as possible, but I guess that it only helps when pasting the real one below:</p>\n\n<pre><code>void getInputProtocolFromUser(protocol) {\n\nchar input[MESSAGE_SIZE];\n\ndo {\n    printf(\"Voer hier een NMEA protocol in:\");\n    gets(input, MESSAGE_SIZE);\n} while (input[0] == '\\*' || input[0] == ' ');\n\nstrncpy_s(protocol, MESSAGE_SIZE, input, MESSAGE_SIZE);\n}\n\nvoid splitToArray(char* protocol, char *newArray[]) {\n\n// strdup copies message to string pointer in order to create an array of the items inside the message\nchar *string = _strdup(protocol),\n    *token;\n\nint c = 0;\n\n/* get the first token */\ntoken = strtok(string, \",\");\n\n/* walk through other tokens */\nwhile (token != NULL)\n{\n\n    char *copy = malloc(sizeof(char) * strlen(token));\n    strcpy(copy, token);\n\n    newArray[c++] = copy;\n    token = strtok(NULL, \",\");\n}\n}\n\nvoid compareProtocols(char *input, char *protocols[]) {\n\nint index = 0;\nchar *inputArray[TOTAL_ITEMS+1];\nsplitToArray(input, inputArray);\ninputArray[TOTAL_ITEMS] = input;\nmemcpy(&amp;protocols[index++], &amp;inputArray, 15);\n\nint i;\nfor (i = 0; i &lt; sizeof(MESSAGES) / sizeof(MESSAGES[0]); i++) {\n    char *messageArray[TOTAL_ITEMS];\n    splitToArray(MESSAGES[i], messageArray);\n    memcpy(&amp;protocols[index++], &amp;messageArray, 15);\n\n    //processProtocol(messageArray, inputArray);\n}\n}\n\nint main(void) {\n\nchar *protocols[100][TOTAL_ITEMS];\nchar *inputProtocol = (char *)malloc(MESSAGE_SIZE);\n\ngetInputProtocolFromUser(inputProtocol);\ncompareProtocols(inputProtocol, protocols);\n\nprintf(\"Input index 0: %s\\n\", protocols[0][1]);\nfree(inputProtocol);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 1, "creation_date": 1436386910, "post_id": 31302862, "comment_id": 50595916, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/29581011/reading-a-sequence-of-hex-value-2-at-a-time-using-fscanf-in-c\">Reading a sequence of HEX value (2 at a time) using fscanf in C</a> - The answer to that question is sufficiently similar that it should get you most of the way there. You&#39;ll just need to skip the <code>\\x</code> chars before calling <code>fscanf</code>."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 2, "creation_date": 1436386925, "post_id": 31302862, "comment_id": 50595924, "body": "&quot;The file already contains the exact code representation of the char array&quot; - meaning it contains C-style quoted strings, etc.? You want to store the actual <i>bytes</i> in that file, not their escaped C representation."}, {"owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "edited": false, "score": 0, "creation_date": 1436387135, "post_id": 31302862, "comment_id": 50596037, "body": "It contains sequences as follows, \\x7a\\x7a\\x7a ..etc. (\\x7a is an escape that forms the ascii character with a value of 0x7a). The file contains multiple lines like this, ech line placed between &quot; &quot; (quotes). I want to achieve exactly the same as with the include approach."}], "answers": [{"comments": [{"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 0, "creation_date": 1436392430, "post_id": 31302994, "comment_id": 50598688, "body": "&quot;It doesn&#39;t map escape sequences like \\x01 into single bytes.&quot;-this is the point"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 5, "last_activity_date": 1436387080, "creation_date": 1436387080, "answer_id": 31302994, "question_id": 31302862, "link": "https://stackoverflow.com/questions/31302862/how-to-read-a-char-array-stored-in-a-file-into-a-char-buffer-during-runtime/31302994#31302994", "title": "How to read a char array stored in a file, into a char buffer during runtime", "body": "<p>As you've seen, when you read the file using <code>fread</code> it reads it byte for byte.  It doesn't get any of the syntactic processing that the compiler does on your source files.  It doesn't know that strings live inside of quotes.  It doesn't map escape sequences like <code>\\x01</code> into single bytes.</p>\n\n<p>You have several different possibilities for fixing this:</p>\n\n<ol>\n<li>Teach your program how to do that processing as it reads the file.  This would be a fair amount of work.</li>\n<li>Put just the bytes you want into the file.</li>\n<li>Pick a different encoding for your file.</li>\n</ol>\n\n<p>To say a little more about #2: If you don't want to change your file-reading code, what you can do is to create an (in this case) 9-byte file containing just the nine bytes you want.  Since your nine bytes are not text, it'll end up being a \"binary\" file, which you won't be able to straightforwardly edit with an ordinary text editor, etc.  (In fact, depending on the tools you have available to you, it might be challenging just to create this particular 9-byte file.)</p>\n\n<p>So if you can't use #1 or #2, you might want to go with #3: pick a brand-new way to encode the data in the file, easier to parse than #1, but easier to prepare than #2.  My first thought would be to have the file be hexadecimal.  That is, the file would contain</p>\n\n<pre><code>010203040506070809\n</code></pre>\n\n<p>or</p>\n\n<pre><code>010203\n040506\n070809\n</code></pre>\n\n<p>Your file-reading code, instead of the single call to <code>fread</code>, would read two characters at a time and assemble them into bytes for your array.  (I'd sketch this out for you, but the compilation I was waiting for has finished, and I ought to get back to my job.)</p>\n"}, {"comments": [{"owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "edited": false, "score": 0, "creation_date": 1436391915, "post_id": 31303964, "comment_id": 50598453, "body": "I&#39;ve tried this with a file containing &quot;x52\\x49\\x46\\x18\\xDF&quot;, the outcome is 52 49 46 46 18 ffffffdf . I&#39;ve noticed that this algorithm only works for hex values that don&#39;t have characters in it. I haven&#39;t yet figured out why. To test this I&#39;ve changed <code>printf ( &quot;%d\\n&quot;, (int)buffer[each]);</code> to <code>printf ( &quot;%x\\n&quot;, buffer[each]);</code> which makes it easier to test this algorithm."}, {"owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "edited": false, "score": 0, "creation_date": 1436392424, "post_id": 31303964, "comment_id": 50598684, "body": "Also the the algorithm doesn&#39;t skip the end-quote which is on each line."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436394348, "post_id": 31303964, "comment_id": 50599433, "body": "1) Using <code>unsigned char line[100]</code> rather than <code>char line[100]</code> prevents the <code>ffffffdf</code> issue and make more sense with <code>unsigned int hex</code>.  2) <code>(int)</code> not really needed with <code>printf ( &quot;%d\\n&quot;, (int)buffer[each])</code>."}, {"owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "edited": false, "score": 0, "creation_date": 1436395386, "post_id": 31303964, "comment_id": 50599833, "body": "I&#39;ve tested with <code>%hhx</code>, the output is now as expected. I&#39;ve also tried with `unsigned char line[100] but this doenn&#39;t resolve it. I&#39;ve commented earlier the the end-quote is not skipped. However it seems to be skipped correctly because I don&#39;t see it in the output. However I don&#39;t understand how, can somebody clarify this?"}], "tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": false, "score": 1, "last_activity_date": 1436395300, "last_edit_date": 1436395300, "creation_date": 1436390337, "answer_id": 31303964, "question_id": 31302862, "link": "https://stackoverflow.com/questions/31302862/how-to-read-a-char-array-stored-in-a-file-into-a-char-buffer-during-runtime/31303964#31303964", "title": "How to read a char array stored in a file, into a char buffer during runtime", "body": "<p>This should read the hex values from the file and save them to <code>buffer</code>.<br>\n<code>fgets()</code> reads each line from the file.<br>\n<code>sscanf()</code> reads each hex value from the line.<br>\nThe format string for sscanf, <code>\"\\\\x%x%n\"</code>, scans the backslash, an <code>x</code>, the hex value and stores the number of characters processed by the scan. The number of characters processed is used to advance through the line. This is needed if some lines have a different number of hex values.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char line[100] = {'\\0'};\n    unsigned char *buffer = NULL;\n    unsigned char *temp = NULL;\n    unsigned int hex = 0;\n    int size = 0;\n    int offset = 0;\n    int used = 0;\n    int bufferused = 0;\n    int increment = 100;\n    int each = 0;\n    FILE *pf = NULL;\n\n    if ( ( pf = fopen ( \"file.h\", \"r\")) != NULL) {\n        while ( fgets ( line, sizeof ( line), pf)) {//get each line of the file\n            offset = 1;//to skip leading quote\n            //sscanf each hex value in the line\n            while ( ( sscanf ( line + offset, \"\\\\x%x%n\", &amp;hex, &amp;used)) == 1) {\n                offset += used;// to advance through the line\n                if ( bufferused &gt;= size) {\n                    temp = realloc ( buffer, size + increment);\n                    if ( temp == NULL) {\n                        //one way to handle the failure\n                        printf ( \"realloc failed\\n\");\n                        free ( buffer);\n                        exit (1);\n                    }\n                    buffer = temp;\n                    size += increment;\n                }\n                buffer[bufferused] = hex;\n                bufferused++;\n            }\n        }\n        fclose ( pf);\n    }\n    for ( each = 0; each &lt; bufferused; each++) {\n        printf ( \"%x\\n\", buffer[each]);\n    }\n    free ( buffer);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "accepted_answer_id": 31302994, "answer_count": 2, "score": 2, "last_activity_date": 1436395300, "creation_date": 1436386634, "question_id": 31302862, "link": "https://stackoverflow.com/questions/31302862/how-to-read-a-char-array-stored-in-a-file-into-a-char-buffer-during-runtime", "title": "How to read a char array stored in a file, into a char buffer during runtime", "body": "<p>I'm working in C and I'm modifying existing code.</p>\n\n<p>I have a char array which is stored in a file as follows:</p>\n\n<pre><code>\"\\x01\\x02\\x03\"\n\"\\x04\\x05\\x06\"\n\"\\x07\\x08\\x09\"\n</code></pre>\n\n<p>In the original source code this char array is included as follows:</p>\n\n<pre><code>const static char chs[] =\n#include \"file.h\"\n;\n</code></pre>\n\n<p>I'm modifying this code to load the file into a char array during runtime (to get the exact same result as with the above approach) instead of it to be included by the pre-processor. My first approach was to simply read the file into a char buffer, as follows:</p>\n\n<pre><code>FILE *fp;\nconst char *filename = \"file.h\";\nfp = fopen (filename, \"rb\");\nassert(fp != NULL);\n\nfseek(fp, 0L, SEEK_END);\nlong int size = ftell(fp);\nrewind(fp);\n\n// read entire file into the buffer\nchar *buffer = (char*)malloc(sizeof(char) * size);\nsize_t nrOfBytesRead = fread(buffer, 1, size, fp);\n</code></pre>\n\n<p>However I've quickly discovered that this is not correct. The file already contains the exact code representation of the char array, I cannot simply read it into a char buffer and get the same result as the include approach.</p>\n\n<p>What is the best way to get my char array which is stored in file, into a char array during runtime?</p>\n"}, {"tags": ["c", "linux", "function", "include", "kernel"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1436387930, "post_id": 31302854, "comment_id": 50596479, "body": "Did you <code>#include ext3.h</code>? How are you compiling it?"}, {"owner": {"reputation": 115, "user_id": 4541405, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/6c209cd112b711cb948298038e0e5cb8?s=128&d=identicon&r=PG&f=1", "display_name": "rhg_lnx", "link": "https://stackoverflow.com/users/4541405/rhg-lnx"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1436394976, "post_id": 31302854, "comment_id": 50599655, "body": "Yes, I included ext3/ext.h and am compiling with &quot;make&quot; from the source directory which has produced bootable running kernels in the past, prior to this current issue."}], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": false, "score": 0, "last_activity_date": 1436398039, "creation_date": 1436398039, "answer_id": 31305567, "question_id": 31302854, "link": "https://stackoverflow.com/questions/31302854/clarification-need-on-calling-a-function-in-the-kernel/31305567#31305567", "title": "Clarification need on calling a function in the kernel", "body": "<p><code>ext3_get_inode_loc</code> is local for ext3 driver, located at fs/ext3. You cannot call it outside of driver code.</p>\n"}], "owner": {"reputation": 115, "user_id": 4541405, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/6c209cd112b711cb948298038e0e5cb8?s=128&d=identicon&r=PG&f=1", "display_name": "rhg_lnx", "link": "https://stackoverflow.com/users/4541405/rhg-lnx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436398039, "creation_date": 1436386615, "question_id": 31302854, "link": "https://stackoverflow.com/questions/31302854/clarification-need-on-calling-a-function-in-the-kernel", "title": "Clarification need on calling a function in the kernel", "body": "<p>I am having an issue calling a function (ext3_get_inode_loc) into exec.c that exists in several other files.</p>\n\n<p>I should mention that I am fairly new to this and entirely self-taught so I'm sure I have major knowledge gaps.  What I would really appreciate are pointers or advice on what I'm missing, and/or where to look for answers.</p>\n\n<p>Below is the result of a recursive grep from the Linux-3.10.0.123.20.1.el7 directory  - </p>\n\n<pre><code>\"grep ext3_get_inode_loc -R *\"\n\nfs/ext3/inode.c: \nfs/ext3/inode.c:static int __ext3_get_inode_loc(struct inode *inode,  \nfs/ext3/inode.c:ext3_error (inode-&gt;i_sb, ext3_get_inode_loc\",  \nfs/ext3/inode.c:ext3_error(inode-&gt;i_sb, ext3_get_inode_loc\",  \nfs/ext3/inode.c:int ext3_get_inode_loc(struct inode *inode, struct ext3_iloc *iloc)  \nfs/ext3/inode.c:return __ext3_get_inode_loc(inode, iloc,  \nfs/ext3/inode.c:ret = __ext3_get_inode_loc(inode, &amp;iloc, 0);  \nfs/ext3/inode.c:err = ext3_get_inode_loc(inode, iloc);  \nfs/ext3/inode.c:err = ext3_get_inode_loc(inode, &amp;iloc);  \nfs/ext3/ext3.h:extern int ext3_get_inode_loc(struct inode *, struct ext3_iloc *);  \nfs/ext3/xattr.c:error = ext3_get_inode_loc(inode, &amp;iloc);  \nfs/ext3/xattr.c:error = ext3_get_inode_loc(inode, &amp;iloc);  \nfs/ext3/xattr.c:error = ext3_get_inode_loc(inode, &amp;is.iloc);  \n</code></pre>\n\n<p>which shows it exists in these 3 files only -</p>\n\n<pre><code>ext3.h  \ninode.c  \nxattr.c  \n</code></pre>\n\n<p>ext3.h includes the function prototype  </p>\n\n<pre><code>extern int ext3_get_inode_loc(struct inode *, struct ext3_iloc *);  \n</code></pre>\n\n<p>inode.c and xattr.c both include ext3.h providing the prototype to both files  </p>\n\n<pre><code>#include \"ext3.h\"  \n</code></pre>\n\n<p>inode.c includes the function definition  -   </p>\n\n<pre><code>static int __ext3_get_inode_loc(struct inode *inode, struct ext3_iloc *iloc, int in_mem)\n{\n    ext3_fsblk_t block;\n    struct buffer_head *bh;\n\n    block = ext3_get_inode_block(inode-&gt;i_sb, inode-&gt;i_ino, iloc);\n    if (!block)\n            return -EIO;\n\n    bh = sb_getblk(inode-&gt;i_sb, block);\n.\n.\n... and so forth\n}\n</code></pre>\n\n<p>And the function call itself -  </p>\n\n<pre><code>err = ext3_get_inode_loc(inode, iloc);\n</code></pre>\n\n<p>xattr.c includes only the call, not the definition -   </p>\n\n<pre><code>error = ext3_get_inode_loc(inode, &amp;iloc);\n</code></pre>\n\n<p>My question is, if I add the exact same line of code -  </p>\n\n<pre><code>error = ext3_get_inode_loc(inode, &amp;iloc);\n</code></pre>\n\n<p>to open_exec() within exec.c in the same manner of xattr.c (without the function definition) I get the following error when compiling with \"make\" -</p>\n\n<pre><code>fs/built-in.o: In function `open_exec':\n~/linux-3.10.0-123.20.1.el7/fs/exec.c:828: undefined reference to `ext3_get_inode_loc'\n</code></pre>\n\n<p>Why is the function available to xattr.c and not exec.c?  I've googled quite a bit on this and have read that this might be due to a linking issue (or lack thereof) between exec.c and xattr.c</p>\n\n<p>Thanks ahead of time - Rog</p>\n"}, {"tags": ["c", "cluster-analysis", "clique"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436386281, "post_id": 31302720, "comment_id": 50595531, "body": "If you have an N points with 20 dimensions and N*20*sizeof(dimension) is not fitting in the memory, you need more memory."}, {"owner": {"reputation": 25, "user_id": 3125749, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/88f1ad4da9a482e59c2e21d2907c7b9a?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.John", "link": "https://stackoverflow.com/users/3125749/dr-john"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436386766, "post_id": 31302720, "comment_id": 50595828, "body": "N*20*sizeof(dimension) will fit in the memory(it is given), but in clustering algorithms like clique ,the each dimensions are divided into &#39;m&#39; equal intervals . so if there are &#39;k&#39; dimensions then the grid size will be &#39;m^k&#39;. But this grid of &#39;m^k&#39; will contain only N points , so it is possible that most of the grid cell will be empty."}, {"owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "edited": false, "score": 0, "creation_date": 1436389212, "post_id": 31302720, "comment_id": 50597139, "body": "Would a sparse matrix solve your problem: <a href=\"http://stackoverflow.com/questions/22907166/represent-a-sparse-matrix-in-c-using-the-csparse-library\" title=\"represent a sparse matrix in c using the csparse library\">stackoverflow.com/questions/22907166/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3125749, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/88f1ad4da9a482e59c2e21d2907c7b9a?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.John", "link": "https://stackoverflow.com/users/3125749/dr-john"}, "edited": false, "score": 0, "creation_date": 1436424205, "post_id": 31305611, "comment_id": 50608424, "body": "Clique is used for high dimensional data. You read it here <a href=\"http://www.cs.cornell.edu/johannes/papers/1998/sigmod1998-clique.pdf\" rel=\"nofollow noreferrer\">cs.cornell.edu/johannes/papers/1998/sigmod1998-clique.pdf</a>"}, {"owner": {"reputation": 70442, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "reply_to_user": {"reputation": 25, "user_id": 3125749, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/88f1ad4da9a482e59c2e21d2907c7b9a?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.John", "link": "https://stackoverflow.com/users/3125749/dr-john"}, "edited": false, "score": 0, "creation_date": 1436427873, "post_id": 31305611, "comment_id": 50610643, "body": "No, it is not. It&#39;s running time is exponential in the dimensionality, which means it will only work for low to medium dimensionalities. It is okay if you want to find 5 dimensional clusters in a 20 dimensional data set, but it will die on finding something in 1000+ dimensions."}, {"owner": {"reputation": 25, "user_id": 3125749, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/88f1ad4da9a482e59c2e21d2907c7b9a?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.John", "link": "https://stackoverflow.com/users/3125749/dr-john"}, "edited": false, "score": 0, "creation_date": 1436429132, "post_id": 31305611, "comment_id": 50611395, "body": "In the question I have mentioned &#39;20&#39; dimensions as example &amp; not 1000. But 20 dimension is also too much for array to store because if I divide each dimension into 10 parts then array will require &#39;10^20&#39; which will give the error of out-of-memory. Can u suggest some method/data structure which can be used in place of array."}, {"owner": {"reputation": 70442, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "reply_to_user": {"reputation": 25, "user_id": 3125749, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/88f1ad4da9a482e59c2e21d2907c7b9a?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.John", "link": "https://stackoverflow.com/users/3125749/dr-john"}, "edited": false, "score": 0, "creation_date": 1436432826, "post_id": 31305611, "comment_id": 50613726, "body": "Only store the non-empty cells. You probably don&#39;t have 10^20 points."}], "tags": [], "owner": {"reputation": 70442, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "is_accepted": false, "score": 0, "last_activity_date": 1436398272, "creation_date": 1436398272, "answer_id": 31305611, "question_id": 31302720, "link": "https://stackoverflow.com/questions/31302720/storing-high-dimensional-data-to-calculate-dense-units-in-subspace-clustering-al/31305611#31305611", "title": "Storing high dimensional data to calculate dense units in subspace clustering algorithms like clique,enclus,etc. ?", "body": "<p>Some algorothms like CLIQUE just don't work for high-dimensional data.</p>\n\n<p>You will have to <strong>rethink the algorithm</strong> not try to find a technical hack to make it somehow work.</p>\n"}], "owner": {"reputation": 25, "user_id": 3125749, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/88f1ad4da9a482e59c2e21d2907c7b9a?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.John", "link": "https://stackoverflow.com/users/3125749/dr-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1436398272, "creation_date": 1436386177, "question_id": 31302720, "link": "https://stackoverflow.com/questions/31302720/storing-high-dimensional-data-to-calculate-dense-units-in-subspace-clustering-al", "title": "Storing high dimensional data to calculate dense units in subspace clustering algorithms like clique,enclus,etc. ?", "body": "<p>How to store high dimensional data to calculate dense units in subspace clustering algorithms like clique,enclus,etc. ? For example , I have 20 dimensions of a point , so if array is used , I have to allocate 20 dimensions to it, which will run out of memory. The code is to be written in 'C',so please suggest what can I use to store the high dimensional points .</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1436385773, "post_id": 31302567, "comment_id": 50595272, "body": "Add <code>fflush(stdout);</code> after <code>printf</code> calls as you don&#39;t have new lines in your <code>printf</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1436386071, "post_id": 31302567, "comment_id": 50595417, "body": "No warnings? What about the warnings <i>&quot;uninitialised local variable used&quot;</i> for <code>power</code> and <code>resist</code> and <code>band_number</code>?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1436386133, "post_id": 31302567, "comment_id": 50595446, "body": "Add to that improper usage of assignment operator vs equivalence comparison (<code>=</code> vs. <code>==</code>),  I pasted this into Xcode and it immediately flagged 7 warnings."}, {"owner": {"reputation": 27, "user_id": 5012837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/999292160083761/picture?type=large", "display_name": "Tommy Buzaki", "link": "https://stackoverflow.com/users/5012837/tommy-buzaki"}, "edited": false, "score": 0, "creation_date": 1436386371, "post_id": 31302567, "comment_id": 50595597, "body": "Nope, no warnings. Everything is working fine aside from the print statement kicking &quot;the last color entered&quot;. I&#39;m using Code Blocks 13.12 if it matters"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436386494, "post_id": 31302567, "comment_id": 50595655, "body": "As @WhozCraig said: <code>if (band_number = 1)</code> and so on."}, {"owner": {"reputation": 27, "user_id": 5012837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/999292160083761/picture?type=large", "display_name": "Tommy Buzaki", "link": "https://stackoverflow.com/users/5012837/tommy-buzaki"}, "edited": false, "score": 0, "creation_date": 1436386513, "post_id": 31302567, "comment_id": 50595669, "body": "Even so, its not so much the warnings I&#39;m worried about right now. I care about why band_color prints the last thing I input"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1436386582, "post_id": 31302567, "comment_id": 50595715, "body": "If you don&#39;t care for the warnings first, when the program behaves unexpectedly, you won&#39;t get far."}, {"owner": {"reputation": 27, "user_id": 5012837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/999292160083761/picture?type=large", "display_name": "Tommy Buzaki", "link": "https://stackoverflow.com/users/5012837/tommy-buzaki"}, "edited": false, "score": 0, "creation_date": 1436386671, "post_id": 31302567, "comment_id": 50595766, "body": "I changed the &quot;=&quot; to &quot;==&quot; and that produced a print of &quot;gbgreen&quot; when entering green, blue, green."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436386718, "post_id": 31302567, "comment_id": 50595790, "body": "I really wonder where to start with all the faults in these few lines of code. So just a summary: If you a following a C-book or a tutorial: bin it! It is either not good, or not the right one for you. After that, get a new book/tutorial. No offense, but you are obviously missing quite some basics."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1436386731, "post_id": 31302567, "comment_id": 50595807, "body": "<b>The =</b>? there were at least 3 of them."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436391704, "post_id": 31302567, "comment_id": 50598338, "body": "You cannot scanf a string into a char, (safely), unless it happens to be a string of zero length."}, {"owner": {"reputation": 27, "user_id": 5012837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/999292160083761/picture?type=large", "display_name": "Tommy Buzaki", "link": "https://stackoverflow.com/users/5012837/tommy-buzaki"}, "edited": false, "score": 0, "creation_date": 1436407523, "post_id": 31302567, "comment_id": 50603100, "body": "I solved it, esm hit the nail on the head. I did not know you could statically allocate how large each array element could be. I had only used 2d arrays prior and had not even thought about 3d ones."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5012837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/999292160083761/picture?type=large", "display_name": "Tommy Buzaki", "link": "https://stackoverflow.com/users/5012837/tommy-buzaki"}, "edited": false, "score": 0, "creation_date": 1436407583, "post_id": 31302969, "comment_id": 50603124, "body": "Hit the nail on the head. I was using a 2d array to store strings when I should have been using 3d."}], "tags": [], "owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "is_accepted": false, "score": 4, "last_activity_date": 1436387303, "last_edit_date": 1495540272, "creation_date": 1436386984, "answer_id": 31302969, "question_id": 31302567, "link": "https://stackoverflow.com/questions/31302567/string-not-printing-fully-c/31302969#31302969", "title": "String not printing fully C", "body": "<p>You have two major problems with your code:</p>\n\n<p>First:</p>\n\n<pre><code>if (band_number = 1) {\n  ...\n}\n</code></pre>\n\n<p><code>=</code> is the assignment operator <code>==</code> is the equal to operator.  Since <code>band_number = 1</code> always evaluates to <code>1</code> which is true that branch is always taken.</p>\n\n<p>Second:</p>\n\n<pre><code>char    band_color[3];\n</code></pre>\n\n<p>and then later:</p>\n\n<pre><code>scanf(\"%s\", &amp;band_color[0]);\n</code></pre>\n\n<p>You have not declared enough space and you stomping over your previous values.  Furthermore you want to statically allocate an array of strings you need to do something more like the following:</p>\n\n<pre><code>void get_resistance( int resist, int power )\n{\n  int     band_number;\n  char    band_color[3][20];\n\n\n  get_band( band_number, band_color );\n  printf(\"%s\\n\", band_color[0]);\n  printf(\"%s\\n\", band_color[1]);\n  printf(\"%s\\n\", band_color[2]);\n}\n\nvoid get_band( int band_number, char band_color[][20] )\n{\n  int     x;\n  x=0;\n  while (x &lt; 3)\n    {\n      printf(\"Which band would you like to select? (1-3)\\nDo not select one you have selected prior!\\t\");\n      scanf(\"%d\", &amp;band_number);\n      printf(\"What color would you like to assign here?\\t\");\n\n      scanf(\"%s\", band_color[band_number - 1]);\n      x++;\n    }\n\n}\n</code></pre>\n\n<p>I have greatly simplified your code logic, as you had a lot duplication.  The key point though is that <code>char    band_color[3][20]</code> will declare enough space for 3 strings that are 20 characters long (including the terminating character).  The function prototype to <code>get_band</code> has changed to accommodate the new type of <code>band_color</code>.  </p>\n\n<p>The code simplification actually removed the <code>if</code> statements by using the observation that the number inputted by the user was always 1 greater than the array index.  You can then index the array with that number minus 1, i.e. <code>band_color[band_number - 1]</code>.</p>\n\n<p><strong>Note this is susceptible to a buffer overflow if you type in a string that is two long when prompted.  It is not high quality code, just trying to demonstrate your mistake</strong></p>\n\n<p>If might find <a href=\"https://stackoverflow.com/questions/9278226/which-is-the-best-way-to-get-input-from-user-in-c\">this link helpful with regards to getting user input</a>.</p>\n\n<p>Also a good <a href=\"http://c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\">link to why using <code>scanf</code> is bad for user input</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 286, "user_id": 5049651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9cd55a8c32a0ce5677880cf5a8830e9?s=128&d=identicon&r=PG&f=1", "display_name": "bbishopca", "link": "https://stackoverflow.com/users/5049651/bbishopca"}, "is_accepted": false, "score": 0, "last_activity_date": 1436389680, "creation_date": 1436389680, "answer_id": 31303768, "question_id": 31302567, "link": "https://stackoverflow.com/questions/31302567/string-not-printing-fully-c/31303768#31303768", "title": "String not printing fully C", "body": "<p>There a few things wrong with your program. There is a lot of bad redundant passing of variables needlessly. You can either declare band_color as a global variable or declare it in get_band function. Same thing with band_number. There is no reason to declare it in get_resistance just to pass it to get_band. Just declare it in get_band as that is the only place it is used. You can then return a pointer to the band_color array to use for the printf. \nIn your if statements in get_band you mis-wrote the evaluators. You used = where they should be ==.</p>\n\n<pre><code>if (band_number == 1)\n</code></pre>\n\n<p>This is causing your code to allows go into the first if and assign a variable only to the [0] array. Your array only needs to be [2] as that gives you 3 entries.  Also you need to declare a length for the strings in your array with a second set of braces.</p>\n\n<pre><code>char band_color[2][10];\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5012837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/999292160083761/picture?type=large", "display_name": "Tommy Buzaki", "link": "https://stackoverflow.com/users/5012837/tommy-buzaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1436389680, "creation_date": 1436385697, "last_edit_date": 1436386165, "question_id": 31302567, "link": "https://stackoverflow.com/questions/31302567/string-not-printing-fully-c", "title": "String not printing fully C", "body": "<p>NOTE: This is for homework, I just want to know why i get the messed up print, not the finished program. </p>\n\n<pre><code>#include    &lt;stdio.h&gt;\n\nchar    get_band( int band_number, char band_color[] );\nvoid    get_resistance( int resist, int power );\n\nint main()\n{\n    int     resist;\n    int     power;\n    get_resistance(resist, power );\n}\n\nvoid get_resistance( int resist, int power )\n{\n    int     band_number;\n    char    band_color[3];\n    char    color[3];\n\n\n    get_band( band_number, band_color );\n    printf(\"%s\", band_color);\n}\nchar get_band( int band_number, char band_color[] )\n{\n    int     x;\n    x=0;\n    while (x &lt; 3)\n    {\n        printf(\"Which band would you like to select? (1-3)\\nDo not select one you have selected prior!\\t\");\n        scanf(\"%d\", &amp;band_number);\n\n        if (band_number = 1)\n        {\n            printf(\"What color would you like to assign here?\\t\");\n            scanf(\"%s\", &amp;band_color[0]);\n            x++;\n        }\n        else if (band_number = 2)\n        {\n            printf(\"What color would you like to assign here?\\t\");\n            scanf(\"%s\", &amp;band_color[1]);\n            x++;\n        }\n        else if (band_number = 3)\n        {\n            printf(\"What color would you like to assign here?\\t\");\n            scanf(\"%s\", &amp;band_color[2]);\n            x++;\n        }\n\n    }\n    return (*band_color);\n\n}\n</code></pre>\n\n<p>So when I run it, I get no errors or warnings, but what I do get is the last color I enter. For example, I enter green, blue, yellow, in that order. I will get yellow printed back. Regardless of what order I use for the numbers, I always get back the very last color entered. </p>\n"}, {"tags": ["c++", "c", "arrays", "parameter-passing", "quicksort"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1436385756, "post_id": 31302558, "comment_id": 50595261, "body": "<code>i</code>, <code>1</code>, <code>l</code>,<code>I</code>, <code>|</code>, <code>j</code> - you just love your readers that much? :-)"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 1, "creation_date": 1436385854, "post_id": 31302558, "comment_id": 50595314, "body": "Is this an obfuscated code-kinda challenge?"}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 3499376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Oxpf.jpg?s=128&g=1", "display_name": "Anuj Garg", "link": "https://stackoverflow.com/users/3499376/anuj-garg"}, "edited": false, "score": 0, "creation_date": 1436385879, "post_id": 31302588, "comment_id": 50595323, "body": "Ohh man..what a silly mistake I&#39;ve made...Though Thank you for pointing out."}, {"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "reply_to_user": {"reputation": 498, "user_id": 3499376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Oxpf.jpg?s=128&g=1", "display_name": "Anuj Garg", "link": "https://stackoverflow.com/users/3499376/anuj-garg"}, "edited": false, "score": 0, "creation_date": 1436386368, "post_id": 31302588, "comment_id": 50595594, "body": "@AnujGarg you have name conflict with the names from <code>namespace std</code>. Remove <code>using namespace std;</code> from your code. See also <a href=\"http://stackoverflow.com/q/1452721/3959454\">this question</a>"}, {"owner": {"reputation": 498, "user_id": 3499376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Oxpf.jpg?s=128&g=1", "display_name": "Anuj Garg", "link": "https://stackoverflow.com/users/3499376/anuj-garg"}, "edited": false, "score": 0, "creation_date": 1436386406, "post_id": 31302588, "comment_id": 50595612, "body": "So what actually is the use of using namespace std;"}, {"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "reply_to_user": {"reputation": 498, "user_id": 3499376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Oxpf.jpg?s=128&g=1", "display_name": "Anuj Garg", "link": "https://stackoverflow.com/users/3499376/anuj-garg"}, "edited": false, "score": 1, "creation_date": 1436386466, "post_id": 31302588, "comment_id": 50595637, "body": "@AnujGarg This is way beyond the topic of this question. I believe you should read a <a href=\"http://stackoverflow.com/q/388242/3959454\">decent C++ book</a>."}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 5, "last_activity_date": 1436385786, "creation_date": 1436385786, "answer_id": 31302588, "question_id": 31302558, "link": "https://stackoverflow.com/questions/31302558/error-invalid-types-intint-for-array-subscript/31302588#31302588", "title": "error: invalid types &#39;int[int]&#39; for array subscript", "body": "<p><code>l</code> is the function parameter of type <code>int</code>, it hides the global variable with the same name.</p>\n"}], "owner": {"reputation": 498, "user_id": 3499376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Oxpf.jpg?s=128&g=1", "display_name": "Anuj Garg", "link": "https://stackoverflow.com/users/3499376/anuj-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6503, "favorite_count": 0, "accepted_answer_id": 31302588, "answer_count": 1, "score": -4, "last_activity_date": 1436386244, "creation_date": 1436385663, "last_edit_date": 1436386244, "question_id": 31302558, "link": "https://stackoverflow.com/questions/31302558/error-invalid-types-intint-for-array-subscript", "title": "error: invalid types &#39;int[int]&#39; for array subscript", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint t,n,k,m,i,j;\nint l[100002],r[100002],c[100002],a[100002],total=0;\nint swap( int *a, int *b)\n{\n    int temp=*a;\n    *a=*b;\n    *b=temp;\n}\nint pivot( int l, int h)\n{\n    int x=c[h],i=l,j=l-1,temp;\n    for(i=l;i&lt;h;i++)\n    {\n        if(c[i]&lt;x)\n        {\n            j++;\n            swap(&amp;c[i],&amp;c[j]);\n            swap(&amp;r[i],&amp;r[j]);\n            swap(&amp;l[i],&amp;l[j]);\n        }\n    }\n    j++;\n    swap(&amp;c[h],&amp;c[j]);\n    swap(&amp;l[h],&amp;l[j+1]);\n    swap(&amp;r[h],&amp;r[j+1]);\n    return j;\n}\nint quick( int l, int h)\n{\n    int p;\n    if(l&lt;h)\n    {\n        p=pivot(l,h);\n        quick(l,p-1);\n        quick(p+1,h);\n    }\n}\nint main() {\n    cin&gt;&gt;t;\n    while(t--)\n    {\n        total=0;\n        cin&gt;&gt;n&gt;&gt;k&gt;&gt;m;\n        for(i=1;i&lt;=n;i++)\n        {\n            cin&gt;&gt;a[i];\n            total+=a[i];\n        }\n        for(i=1;i&lt;=m;i++)\n            cin&gt;&gt;l[i]&gt;&gt;r[i]&gt;&gt;c[i];\n        quick(1,m);\n        for(i=1;i&lt;=m;i++)\n            cout&lt;&lt;l[i]&lt;&lt;r[i]&lt;&lt;c[i]&lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In the above code I am getting the following error.</p>\n\n<pre><code>prog.cpp: In function 'int pivot(int, int)':\nprog.cpp:21:13: error: invalid types 'int[int]' for array subscript\n    swap(&amp;l[i],&amp;l[j]);\n             ^\nprog.cpp:21:19: error: invalid types 'int[int]' for array subscript\n    swap(&amp;l[i],&amp;l[j]);\n                   ^\nprog.cpp:26:11: error: invalid types 'int[int]' for array subscript\n  swap(&amp;l[h],&amp;l[j+1]);\n           ^\nprog.cpp:26:19: error: invalid types 'int[int]' for array subscript\n  swap(&amp;l[h],&amp;l[j+1]);\n                   ^\n</code></pre>\n\n<p>Can you figure out what the error is? And also I am wondering why I am getting this error only in array <code>l</code> not in <code>r</code> or <code>c</code>. So please explain this also.</p>\n\n<p>Here is the link of the above program.</p>\n\n<p><a href=\"http://ideone.com/K1exEK\" rel=\"nofollow\">http://ideone.com/K1exEK</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1436385515, "post_id": 31302417, "comment_id": 50595120, "body": "<code>last = strlen(str)</code> is asking for troubles. Use <code>last = strlen(str)-1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 871, "user_id": 4304844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vSjQh.jpg?s=128&g=1", "display_name": "tsandy", "link": "https://stackoverflow.com/users/4304844/tsandy"}, "is_accepted": true, "score": 1, "last_activity_date": 1436386079, "creation_date": 1436386079, "answer_id": 31302680, "question_id": 31302417, "link": "https://stackoverflow.com/questions/31302417/longest-substring-palindrome-issue/31302680#31302680", "title": "Longest Substring Palindrome issue", "body": "<p>In <code>isPalindrome</code>, replace the line <code>if(str[i] != str[last-i]){</code> with <code>if(str[i] != str[first+last-i]){</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4687532, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KEQ7C.jpg?s=128&g=1", "display_name": "JBGriffin", "link": "https://stackoverflow.com/users/4687532/jbgriffin"}, "edited": false, "score": 0, "creation_date": 1436386813, "post_id": 31302684, "comment_id": 50595857, "body": "I&#39;ll clean up and use the index variables. I&#39;ll also fix it to only run while i is less than j, because it&#39;s probably good to be in the habit of having things run as clean as possible. Thanks for the input!"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1436386443, "last_edit_date": 1436386443, "creation_date": 1436386088, "answer_id": 31302684, "question_id": 31302417, "link": "https://stackoverflow.com/questions/31302417/longest-substring-palindrome-issue/31302684#31302684", "title": "Longest Substring Palindrome issue", "body": "<p>Your code in <code>isPalindrome</code> doesn't work properly unless <code>first</code> is 0.</p>\n\n<p>Consider <code>isPalindrome(6, 10, \"abcdefghhgX\")</code>:</p>\n\n<ul>\n<li><code>i = 6</code>;</li>\n<li><code>last - i</code> = 4;</li>\n<li>comparing <code>str[i]</code> (aka <code>str[6]</code> aka <code>'g'</code>) with <code>str[last-i]</code> (aka <code>str[4]</code> aka <code>'e'</code>) is comparing data outside the range that is supposed to be under consideration.</li>\n<li>It should be comparing with <code>str[10]</code> (or perhaps <code>str[9]</code> \u2014 depending on whether <code>last</code> is the index of the final character or one beyond the final character).</li>\n</ul>\n\n<p>You need to revisit that code.  Note, too, that your code will test each pair of characters twice where once is sufficient.  I'd probably use two index variables, <code>i</code> and <code>j</code>, set to <code>first</code> and <code>last</code>.  The loop would increment <code>i</code> and decrement <code>j</code>, and only continue while <code>i</code> is less than <code>j</code>.</p>\n\n<pre><code>for (int i = first, j = last; i &lt; j; i++, j--)\n{\n     if (str[i] != str[j])\n         return 0;\n}\nreturn 1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1436386230, "creation_date": 1436386230, "answer_id": 31302744, "question_id": 31302417, "link": "https://stackoverflow.com/questions/31302417/longest-substring-palindrome-issue/31302744#31302744", "title": "Longest Substring Palindrome issue", "body": "<p>Here's your problem:</p>\n\n<pre><code>for(i = first; i &lt;= last; i++){\n    if(str[i] != str[last-i]){\n        return 0;\n    }\n}\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>for(i = first; i &lt;= last; i++, last--){\n    if(str[i] != str[last]){\n        return 0;\n    }\n}\n</code></pre>\n\n<p>Also, this:</p>\n\n<pre><code>for(last = strlen(str); last &gt;= i; last--){\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>for(last = strlen(str) - 1; last &gt;= i; last--){\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4687532, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KEQ7C.jpg?s=128&g=1", "display_name": "JBGriffin", "link": "https://stackoverflow.com/users/4687532/jbgriffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 31302680, "answer_count": 3, "score": 1, "last_activity_date": 1436386443, "creation_date": 1436385202, "question_id": 31302417, "link": "https://stackoverflow.com/questions/31302417/longest-substring-palindrome-issue", "title": "Longest Substring Palindrome issue", "body": "<p>I feel like I've got it almost down, but for some reason my second test is coming up with a shorter palindrome instead of the longest one. I've marked where I feel the error may be coming from, but at this point I'm kind of at a loss. Any direction would be appreciated!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n/*\n *  Checks whether the characters from position first to position last of the string str form a palindrome.\n *  If it is palindrome it returns 1.  Otherwise it returns 0.\n */\nint isPalindrome(int first, int last, char *str)\n{\n    int i;\n\n    for(i = first; i &lt;= last; i++){\n        if(str[i] != str[last-i]){\n            return 0;\n        }\n    }\n    return 1;\n}\n\n/*\n *  Find and print the largest palindrome found in the string str.  Uses isPalindrome as a helper function.\n */\nvoid largestPalindrome(char *str)\n{\n    int i, last, pStart, pEnd;\n    pStart = 0;\n    pEnd = 0;\n    int result;\n\n    for(i = 0; i &lt; strlen(str); i++){\n        for(last = strlen(str); last &gt;= i; last--){\n            result = isPalindrome(i, last, str);\n            //Possible error area\n            if(result == 1 &amp;&amp; ((last-i)&gt;(pEnd-pStart))){\n                pStart = i;\n                pEnd = last;\n            }\n        }\n    }\n    printf(\"Largest palindrome: \");\n    for(i = pStart; i &lt;= pEnd; i++)\n        printf(\"%c\", str[i]);\n    return;\n}\n\n/*\n *  Do not modify this code.\n */\nint main(void)\n{\n    int i = 0;\n    /* you can change these strings to other test cases but please change them back before submitting your code */\n    //str1 working correctly\n    char *str1 = \"ABCBACDCBAAB\";\n    char *str2 = \"ABCBAHELLOHOWRACECARAREYOUIAMAIDOINEVERODDOREVENNGGOOD\";\n\n    /* test easy example */\n    printf(\"Test String 1: %s\\n\",str1);\n    largestPalindrome(str1);\n\n    /* test hard example */\n    printf(\"\\nTest String 2: %s\\n\",str2);\n    largestPalindrome(str2);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "serial-port"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1436384885, "post_id": 31302278, "comment_id": 50594751, "body": "Shouldn&#39;t the <code>read()</code> block when not set to <code>O_NDELAY&#47;O_NONBLOCK</code>? Either way, I&#39;d look at <code>poll()</code> or <code>select()</code> if I were you."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436385064, "post_id": 31302278, "comment_id": 50594878, "body": "Just a hint: <code>char response[1024] = { 0 };</code>, no need for <code>memset</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436394744, "post_id": 31302278, "comment_id": 50599574, "body": "strongly suggest using select() control a loop so read() doesn&#39;t ever get called unless that is at least 1 char to be read."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436404691, "post_id": 31302278, "comment_id": 50602419, "body": "Note: no protection from buffer overrun of <code>char response[1024];</code> in <code>PortRead()</code>."}], "owner": {"reputation": 11, "user_id": 5095512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39c75f554176d91aaf38c96dbd34ae89?s=128&d=identicon&r=PG&f=1", "display_name": "Matix Stojkovy", "link": "https://stackoverflow.com/users/5095512/matix-stojkovy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1193, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1436384693, "creation_date": 1436384693, "question_id": 31302278, "link": "https://stackoverflow.com/questions/31302278/linux-reading-from-serial-port-error-in-c-resource-temporarily-unavaliable", "title": "Linux - reading from serial port error in C (Resource temporarily unavaliable)", "body": "<p>I am trying to read some data from serial port using usb/rs232 converter. I am sending data from atmega and it is received properly in minicom. But trying to read sth in my program ends up with an error \"Resource temporarily unavailable\". I know that this is caused by O_NDELAY, but removing that gives me plenty of empty messages which also isn't good.</p>\n\n<p>Actually, what I want to achieve is a program, which every second will transmit some char to atmega and wait for a response. Depending on a response it will do different actions. Also after few unanswered transmissions program will indicate an error with communication. </p>\n\n<p>But for now I'd like to at least receive something properly.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nint fd; //file descriptor\nint bytes; // bytes to read\n\nint PortOpen(void)\n{\n    fd = open(\"/dev/ttyUSB1\", O_RDWR | O_NOCTTY | O_NDELAY);\n    if(fd &lt; 0)\n    {\n        //opening error\n        printf(\"Port opening error\\r\\n\");\n    }\n    else\n    {\n        printf(\"Port opened\\r\\n\");\n        //port config\n        struct termios options;\n        tcgetattr(fd, &amp;options);\n\n        cfsetispeed(&amp;options, B9600);\n        cfsetospeed(&amp;options, B9600);\n\n        options.c_cflag &amp;= ~PARENB;\n        options.c_cflag &amp;= ~CSTOPB;\n        options.c_cflag &amp;= ~CSIZE;\n        options.c_cflag |= CS8;\n        options.c_cflag |= CLOCAL;\n        options.c_cflag |= CREAD;\n        options.c_cflag &amp;= ~CRTSCTS;\n\n        options.c_cc[VMIN]   =  0;                  \n        options.c_cc[VTIME]  =  5;                  \n\n        options.c_lflag &amp;=  ~(ICANON | ECHO | ECHOE | ISIG);\n        //Modifying c_iflag by bitwise OR and AND\n        options.c_iflag &amp;=  ~(ICRNL | INLCR | IGNCR | IUCLC);\n        options.c_iflag &amp;=  ~(IXON | IXOFF | IXANY);\n        //Modifying c_oflag by bitwise OR and AND\n        options.c_oflag &amp;=  ~OPOST;\n        tcflush(fd, TCIFLUSH);\n        //Setting the new settings for the port immediately\n        tcsetattr(fd, TCSANOW, &amp;options);\n    }\n    return 1;\n\n}\n\nint PortRead(void)\n{\n    int n = 0, spot = 0;\n    char buf = '\\0';\n\n    /* Whole response*/\n    char response[1024];\n    memset(response, '\\0', sizeof response);\n\n    do {\n        n = read( fd, &amp;buf, 1 );\n        sprintf( &amp;response[spot], \"%c\", buf );\n        spot += n;\n    } while( buf != '\\r' &amp;&amp; n &gt; 0);\n\n    if (n &lt; 0) \n    {\n        printf(\"Error reading: %s\\r\\n\",strerror(errno));\n    }\n    else if (n == 0) \n    {\n        printf(\"Read nothing!\\r\\n\");\n    }\n    else \n    {\n        printf(\"Response: %s\", response);\n    }\n    return 1;\n}\n\nint main(void)\n{\n    PortOpen();\n    int j;\n    for(j=0; j&lt;100; j++) //just testing\n    {\n        PortRead();\n    }\n\n\nreturn 0;   \n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "unsigned-integer", "unsigned-char"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1436383818, "post_id": 31301949, "comment_id": 50594089, "body": "&quot;which can be safely ignored&quot;..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1436383903, "post_id": 31301949, "comment_id": 50594136, "body": "It will have different behaviour for different endianness."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1436384055, "post_id": 31301991, "comment_id": 50594224, "body": "@haccks: Just leave me a second;-)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1436384080, "post_id": 31301991, "comment_id": 50594236, "body": "Hahahaaaaaaaa. Take your time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1436385612, "post_id": 31301991, "comment_id": 50595174, "body": "-1, since this seems unaware that <code>char*</code> is a special case, and that might be relevant here. (and if it&#39;s not relevant, that deserves explanation)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436385990, "post_id": 31301991, "comment_id": 50595376, "body": "@Hurkyl: No, I did not oversee that! You OTOH might have not noticed OP assigns the <code>uint8_t *</code> to <b>two</b> pointers of different types! <b>This</b> creates the aliasing failure, not the assignment of the <code>uint8_t *</code>. Read the link I provided and you will see that."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 5, "last_activity_date": 1436384574, "last_edit_date": 1436384574, "creation_date": 1436383886, "answer_id": 31301991, "question_id": 31301949, "link": "https://stackoverflow.com/questions/31301949/pointer-to-different-data-type-in-c/31301991#31301991", "title": "Pointer to different data type in C", "body": "<p>You are violating <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5p6\" rel=\"nofollow\">aliasing rules</a>. So, the clear answer is: <strong>no</strong>.</p>\n\n<p>Briefly: you must not have pointers of different type pointing to the same object. This may result in broken code, as the compiler actually does assume this does not happen and might optimize the code.</p>\n\n<p>Just a very strong hint: do not ignore warnings. They are given for good reasons.</p>\n\n<p>The best way is to properly serialize/deserialize the data from the array per element to the final types. This will also avoid any problems with endianess (byte-ordering) of the values and any (possible) padding.</p>\n\n<p>I use functions like this:</p>\n\n<pre><code>uint32_t readUInt32(const uint8_t **buffer)\n{\n    ... // increment buffer accordingly\n}\n</code></pre>\n\n<p>This way, I just pass the buffer pointer along the line, without having to care about incrementing in the caller. The technic is actually an iterator.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1436384099, "creation_date": 1436384099, "answer_id": 31302076, "question_id": 31301949, "link": "https://stackoverflow.com/questions/31301949/pointer-to-different-data-type-in-c/31302076#31302076", "title": "Pointer to different data type in C", "body": "<blockquote>\n  <p>The compiler does throw the \"assignment from incompatible pointer type\" warning (which can be safely ignored because the incompatible assignment is intended).</p>\n</blockquote>\n\n<p>This warning cannot and should not be ignored, because the pointers are indeed incompatible. The reason this is problematic is that interpretation of data depends on the hardware in use - specifically, on the endianness of the machine.</p>\n\n<blockquote>\n  <p>would it be better recommended to manually copy and shift each byte, one at a time, to a temporary variable?</p>\n</blockquote>\n\n<p>This approach would be independent of the endianness. Alternatively, you could use <a href=\"http://www.retran.com/beej/htonsman.html\" rel=\"nofollow\"><code>hton{...}</code>/ <code>ntoh{...}</code></a> family of functions to force the byte order.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1436384104, "creation_date": 1436384104, "answer_id": 31302078, "question_id": 31301949, "link": "https://stackoverflow.com/questions/31301949/pointer-to-different-data-type-in-c/31302078#31302078", "title": "Pointer to different data type in C", "body": "<p>The behavior will differ between a big-endian machine and a little-endian machine, so you're better off manually copying and shifting each byte.</p>\n"}], "owner": {"reputation": 59, "user_id": 3882835, "user_type": "registered", "profile_image": "https://graph.facebook.com/844335251/picture?type=large", "display_name": "Alejandro Leal", "link": "https://stackoverflow.com/users/3882835/alejandro-leal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1716, "favorite_count": 0, "accepted_answer_id": 31301991, "answer_count": 3, "score": 2, "last_activity_date": 1436385589, "creation_date": 1436383765, "question_id": 31301949, "link": "https://stackoverflow.com/questions/31301949/pointer-to-different-data-type-in-c", "title": "Pointer to different data type in C", "body": "<p>I have compiled and run the following program in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nint main(int argc, char* argv[]){\n  uint8_t data[8] = {0, 1, 2, 3, 4, 5, 6, 7};\n  uint32_t* pointer32 = &amp;data[0];\n  uint64_t* pointer64 = &amp;data[0];\n\n  printf(\"%\" PRIu64 \"\\n\", *pointer64);\n  printf(\"%\" PRIu32 \"\\n\", *(pointer32++));\n  printf(\"%\" PRIu32 \"\\n\", *pointer32);\n\n  return 0;\n}\n</code></pre>\n\n<p>and received the following expected output:</p>\n\n<pre><code>506097522914230528\n50462976\n117835012\n</code></pre>\n\n<p>The output is correct and corresponds to the bitwise interpretation of the data as an unsigned 64-bit integer and unsigned 32-bit integers.\nI tried this on a 64-bit machine running Ubuntu 14.04. It was compiled with the stock gcc compiler (4.8.4?). The compiler does throw the \"assignment from incompatible pointer type\" warning (which can be safely ignored because the incompatible assignment is intended).</p>\n\n<p>Is this a reliable way of converting and interpreting the data in the \"data\" array, or would it be better recommended to manually copy and shift each byte, one at a time, to a temporary variable?</p>\n"}, {"tags": ["python", "c", "typeerror"], "comments": [{"owner": {"reputation": 45398, "user_id": 873145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ab6f2836e0722ea0cbfeb97a74f131d?s=128&d=identicon&r=PG", "display_name": "Thomas Orozco", "link": "https://stackoverflow.com/users/873145/thomas-orozco"}, "edited": false, "score": 0, "creation_date": 1436383461, "post_id": 31301819, "comment_id": 50593848, "body": "Could you please include the full traceback (i.e. the entire error message you&#39;re seeing \u2014 it starts with &quot;Traceback&quot;)."}, {"owner": {"reputation": 31, "user_id": 4253853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f45cd8f4fdb1f0a1444f5e61d45b28?s=128&d=identicon&r=PG&f=1", "display_name": "Simran Rai", "link": "https://stackoverflow.com/users/4253853/simran-rai"}, "reply_to_user": {"reputation": 45398, "user_id": 873145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ab6f2836e0722ea0cbfeb97a74f131d?s=128&d=identicon&r=PG", "display_name": "Thomas Orozco", "link": "https://stackoverflow.com/users/873145/thomas-orozco"}, "edited": false, "score": 0, "creation_date": 1436383600, "post_id": 31301819, "comment_id": 50593944, "body": "@ThomasOrozco Just edited it in now"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1436383944, "post_id": 31301819, "comment_id": 50594163, "body": "<code>clusterext.clusterext()</code>:(code) is not related to this <code>clusterext.clusterext(targets)</code>:(error message)"}, {"owner": {"reputation": 31, "user_id": 4253853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f45cd8f4fdb1f0a1444f5e61d45b28?s=128&d=identicon&r=PG&f=1", "display_name": "Simran Rai", "link": "https://stackoverflow.com/users/4253853/simran-rai"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436384173, "post_id": 31301819, "comment_id": 50594300, "body": "@iharob sorry I fixed it, I had done that to try and test something earlier. But the error message still applies to that code that is fixed now"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436384426, "post_id": 31301819, "comment_id": 50594457, "body": "Is it python 2? I don&#39;t think it&#39;s python 3, did you use <code>-Wall -Werror</code> for compilation?"}, {"owner": {"reputation": 31, "user_id": 4253853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f45cd8f4fdb1f0a1444f5e61d45b28?s=128&d=identicon&r=PG&f=1", "display_name": "Simran Rai", "link": "https://stackoverflow.com/users/4253853/simran-rai"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436384582, "post_id": 31301819, "comment_id": 50594565, "body": "@iharob yes it is Python 2. I did use those, the only warnings I get are about loss of precison between longs and ints, which isn&#39;t relevant for this"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436384631, "post_id": 31301819, "comment_id": 50594588, "body": "Yes but you should fix them, don&#39;t let the compiler tell you that your code is wrong, and by the way, that seems to be a Microsoft&#39;s compiler warning, is it MSVC?"}, {"owner": {"reputation": 31, "user_id": 4253853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f45cd8f4fdb1f0a1444f5e61d45b28?s=128&d=identicon&r=PG&f=1", "display_name": "Simran Rai", "link": "https://stackoverflow.com/users/4253853/simran-rai"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1436384806, "post_id": 31301819, "comment_id": 50594703, "body": "@iharob No this is on a Mac"}], "owner": {"reputation": 31, "user_id": 4253853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f45cd8f4fdb1f0a1444f5e61d45b28?s=128&d=identicon&r=PG&f=1", "display_name": "Simran Rai", "link": "https://stackoverflow.com/users/4253853/simran-rai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 555, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1436384138, "creation_date": 1436383275, "last_edit_date": 1436384138, "question_id": 31301819, "link": "https://stackoverflow.com/questions/31301819/python-c-extension-issue-typeerror-function-takes-exactly-0-arguments-1-give", "title": "Python C Extension issue: &quot;TypeError: function takes exactly 0 arguments (1 given)&quot;", "body": "<p>I'm writing a C extension for Python and I'm having an issue with running the extension in Python. I have the code below as the module for the C extension, and it is saying the function has no arguments, but it should recognize this. I am not sure if I am missing anything.</p>\n\n<p>C code:</p>\n\n<pre><code>static PyObject*\nclusterext(PyObject* self, PyObject* args)\n{\n\n    PyObject *fileList;\n\n    if(!PyArg_ParseTuple(args, \"O\", &amp;fileList))\n    {\n        return NULL;\n    }\n\n    long size = PyList_Size(fileList);\n    int count = 0;\n\n    char *arraynew[size];\n\n    PyObject *iter = PyObject_GetIter(fileList);\n    if(!iter)\n    {\n        return NULL;\n    }\n\n    while(1)\n    {\n        PyObject *next = PyIter_Next(iter);\n        if(!next)\n        {\n            break;\n        }\n\n        char *fileName = PyString_AsString(next);\n        arraynew[count] = fileName;\n        count++;\n    }\n\n\n    char *inFilename1; //File to be looked at\n    char *inFilename2;\n    double rmsdTemp;\n    int rmsdArrayLength = ((size * (size - 1)) / 2);\n    struct filePair rmsdArray[rmsdArrayLength]; \n    int rcount = 0;\n    int count1;\n    int count2;\n    double threshold = 10;\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        int w = i + 1;\n        for (int z = w; z &lt; size; z++)\n        {\n            inFilename1 = arraynew[i];\n            inFilename2 = arraynew[z];\n\n            count1 = filelength(inFilename1);\n            count2 = filelength(inFilename2);\n\n            double coords[count1][3];\n            double coords2[count2][3];\n            extractCoords(inFilename1, count1, coords);\n            extractCoords(inFilename2, count2, coords2);\n\n\n            rmsdTemp = rmsd(count1, count2, coords, coords2);\n            struct filePair tempPair = newPair(inFilename1, inFilename2, rmsdTemp);\n            rmsdArray[rcount] = tempPair;\n\n            rcount++;\n        }\n\n\n    }\n\n    int fileNeighbours[size][size-1];\n    int oncount = 0;\n    int prevFileNum = 0;\n    int index = 0;\n\n    for(int a =0; a &lt; rmsdArrayLength; a++)\n    {\n        struct filePair testPair = rmsdArray[a];\n        if(testPair.rmsd &lt; threshold)\n        {\n            int tempFileNum1 = getFileNumber(testPair.filename1);\n            int tempFileNum2 = getFileNumber(testPair.filename2);\n            if(prevFileNum != tempFileNum1)\n            {\n                oncount = 0;\n            }\n\n            index = tempFileNum1 -1;\n            fileNeighbours[index][oncount] = tempFileNum2;\n            oncount++;\n            prevFileNum = tempFileNum1;\n\n        }\n    }\n\n    int clustersArray[size][size];\n    int counter2 = 0;\n    int counter3 = 0;\n\n    for(int u = 0; u &lt; index; u++)\n    {\n        oncount = u + 1;\n        counter2 = 0;\n        counter3 = 1;\n\n        clustersArray[u][0] = oncount;\n\n        while (fileNeighbours[u][counter2] &gt; 0)\n        {\n            clustersArray[u][counter3] = fileNeighbours[u][counter2];\n            counter2++;\n            oncount++;\n            counter3++;\n\n            if(counter2 &gt;= size || counter3 &gt;= size)\n            {\n                break;\n            }\n        }\n    }\n\n    return Py_BuildValue(\"%d \\n\", prevFileNum);\n}\n\n\nstatic PyMethodDef ClusterMethods[] = \n{\n    {\"clusterext\", clusterext, METH_VARARGS, \"clustering\"},\n    {NULL, NULL, 0, NULL}\n};\n\nPyMODINIT_FUNC\ninitclusterext(void)\n{\n    (void) Py_InitModule(\"clusterext\", ClusterMethods);\n}\n</code></pre>\n\n<p>Python Setup code:</p>\n\n<pre><code>#!/usr/bin/env python\n\nfrom distutils.core import setup, Extension\n\nmodule1 = Extension('clusterext', sources = ['clusterextmodule.c'])\n\nsetup(name = 'PackageName',\n      version = '1.0',\n      description = 'This is a demo package',\n      ext_modules = [module1])\n</code></pre>\n\n<p>Python file to run extension code:</p>\n\n<pre><code>#! /usr/bin/python\n\nimport clusterext\nimport os, os.path\n\n\nrootdir = \"/Users/simranrai/Documents/SummerWork/Clustering\"\n\ntargets = [f for f in os.listdir(rootdir) if f.endswith('.pdb')]\n\nclusterext.clusterext(targets)\n</code></pre>\n\n<p>EDIT: Here is the full traceback. clustertest.py is the last block of code above</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"clustertest.py\", line 11, in &lt;module&gt;\n    clusterext.clusterext(targets)\nTypeError: function takes exactly 0 arguments (1 given)\n</code></pre>\n\n<p>I'm not really sure where I'm going wrong here and why I'm getting the error. Any help would be appreciated!!</p>\n"}, {"tags": ["c", "assembly", "filesystems", "kernel", "osdev"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436383247, "post_id": 31301735, "comment_id": 50593720, "body": "Sorry - Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1436383281, "post_id": 31301735, "comment_id": 50593742, "body": "You found nothing about, for example, the FAT file system? What about <a href=\"https://en.wikipedia.org/wiki/Design_of_the_FAT_file_system\" rel=\"nofollow noreferrer\">Design of the FAT file system</a>? That&#39;s just one of many links obtained with a Google search. Granted, there aren&#39;t tutorials that will give you a step-by-step how to code up the file system, but all the details you need about how different file systems are laid out exist with diagrams, etc."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1436384786, "post_id": 31301735, "comment_id": 50594689, "body": "The answer to your question of &quot;how a file system works&quot; depends upon the file system. There&#39;s lots of information if you Google &quot;how does a file system work&quot;. Here&#39;s one article that may be helpful to start since it does explain some things in general with a bit of example: <a href=\"http://study.com/academy/lesson/files-systems-fat-ntfs-hfs-and-ffs.html\" rel=\"nofollow noreferrer\">Files Systems: FAT, NTFS, and HFS+</a>. You can find similar articles that talk about Linux file systems (ext2, ext3, etc). Unfortunately, the question is still too broad to be on topic for this forum."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436385643, "post_id": 31301735, "comment_id": 50595192, "body": "Is you OS <a href=\"http://blueokiris.webs.com/ternex-os-2-0\" rel=\"nofollow noreferrer\">TernexOS2</a>? You should have given the URL inside the question!"}, {"owner": {"reputation": 108, "user_id": 1620201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/koGoC.png?s=128&g=1", "display_name": "Blue Okiris", "link": "https://stackoverflow.com/users/1620201/blue-okiris"}, "edited": false, "score": 0, "creation_date": 1436386217, "post_id": 31301735, "comment_id": 50595491, "body": "No. It&#39;s a different operating system for the x86 platform."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1436392580, "post_id": 31301735, "comment_id": 50598753, "body": "If you want your file system to be useful (e.g., allow files to be created, changed, and deleted when necessary), your simplistic scheme will break down. A file system is, among other things, a dynamic memory allocation scheme for a drive medium. Direct access of the hard drive could be through the BIOS, or you&#39;d write your own device driver driver."}], "answers": [{"comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1436383991, "post_id": 31301788, "comment_id": 50594185, "body": "FAT is ugly and inefficient, but the OP is obviously a beginner and FAT is very simple in concept and design. So it may be a good starting point."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1436384039, "post_id": 31301788, "comment_id": 50594213, "body": "Then Ext2 is probably better, and better explained"}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1436385275, "post_id": 31301788, "comment_id": 50594999, "body": "OSDev is where you wanna go for OS dev. Has tons of articles on filesystems."}, {"owner": {"reputation": 108, "user_id": 1620201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/koGoC.png?s=128&g=1", "display_name": "Blue Okiris", "link": "https://stackoverflow.com/users/1620201/blue-okiris"}, "edited": false, "score": 0, "creation_date": 1436386477, "post_id": 31301788, "comment_id": 50595643, "body": "So far, it&#39;s not synced and pushed, but this is where the repository is: <a href=\"https://github.com/blueOkiris/Forward-OS\" rel=\"nofollow noreferrer\">github.com/blueOkiris/Forward-OS</a>"}, {"owner": {"reputation": 108, "user_id": 1620201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/koGoC.png?s=128&g=1", "display_name": "Blue Okiris", "link": "https://stackoverflow.com/users/1620201/blue-okiris"}, "edited": false, "score": 0, "creation_date": 1436388732, "post_id": 31301788, "comment_id": 50596884, "body": "Could I, like the edit says, access the hard drive until I find the name? It&#39;s similar to the &quot;file as fixed blocks&quot; idea."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436421878, "post_id": 31301788, "comment_id": 50607224, "body": "You really need to read a lot more material about operating system before coding your own. You are going nowhere if you don&#39;t understand much more about OSes in general!"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 10, "last_activity_date": 1555962470, "last_edit_date": 1555962470, "creation_date": 1436383173, "answer_id": 31301788, "question_id": 31301735, "link": "https://stackoverflow.com/questions/31301735/toy-os-filesystem/31301788#31301788", "title": "Toy OS Filesystem", "body": "<p>First, read wikipage on <a href=\"https://en.wikipedia.org/wiki/File_system\" rel=\"nofollow noreferrer\">file systems</a> to have some broad view.</p>\n\n<p>The relevant resource about <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating system</a> development is <a href=\"http://osdev.org/\" rel=\"nofollow noreferrer\">OSdev</a> (but perhaps your question is off-topic here). <a href=\"http://kernelnewbies.org/\" rel=\"nofollow noreferrer\">Kernelnewbies</a> could also help (explaining how Linux is doing). OSdev have wikipages explaining <a href=\"http://wiki.osdev.org/FAT\" rel=\"nofollow noreferrer\">FAT</a> &amp; <a href=\"http://wiki.osdev.org/Ext2\" rel=\"nofollow noreferrer\">Ext2</a> in details.</p>\n\n<p>You could design an OS without any files (but some other <a href=\"https://en.wikipedia.org/wiki/Persistence_%28computer_science%29\" rel=\"nofollow noreferrer\">persistence</a> machinery). See <a href=\"https://softwareengineering.stackexchange.com/a/285678/40065\">this answer</a>. You could have persistent processes (read also about <a href=\"https://en.wikipedia.org/wiki/Application_checkpointing\" rel=\"nofollow noreferrer\">application checkpointing</a>, <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\" rel=\"nofollow noreferrer\">garbage collection</a>, <a href=\"https://en.wikipedia.org/wiki/Continuation\" rel=\"nofollow noreferrer\">continuations</a>, <a href=\"https://en.wikipedia.org/wiki/Hibernation_%28computing%29\" rel=\"nofollow noreferrer\">hibernation</a>).</p>\n\n<p>But you should read some good books about Operating Systems (e.g. <a href=\"http://freecomputerbooks.com/Modern-Operating-Systems-by-Andrew-Tanenbaum.html\" rel=\"nofollow noreferrer\">by Tanenbaum</a>, or the freely downloadable <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating Systems: Three Easy Pieces</em></a> book). Be fluent with some existing free software OS, e.g. Linux (&amp; POSIX), so read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\">Advanced Linux Programming</a> (at least to understand many concepts and get a good terminology).</p>\n\n<p>IMHO, the <a href=\"https://en.wikipedia.org/wiki/File_Allocation_Table\" rel=\"nofollow noreferrer\">FAT</a> is such an ugly and inefficient file system that it is not worth looking into (except for legacy and compatibility reasons). <a href=\"https://en.wikipedia.org/wiki/Ext4\" rel=\"nofollow noreferrer\">Ext4</a> (see <a href=\"http://kernelnewbies.org/Ext4\" rel=\"nofollow noreferrer\">here</a>) should be better &amp; the wikipage on <a href=\"https://en.wikipedia.org/wiki/Ext2\" rel=\"nofollow noreferrer\">Ext2</a> has a nice picture.</p>\n\n<p>You could adapt some library providing a file system (e.g. <a href=\"http://git.tyndur.org/?p=libext2.git;a=summary\" rel=\"nofollow noreferrer\">libext2</a>) to your kernel.</p>\n\n<p>You could perhaps adapt <a href=\"http://sqlite.org/\" rel=\"nofollow noreferrer\">sqlite</a> to work on a raw disk partition.</p>\n\n<p>You might have a notion of <a href=\"https://en.wikipedia.org/wiki/Computer_file\" rel=\"nofollow noreferrer\"><em>file</em></a> which is not like MSDOS (or Windows) or POSIX or <code>&lt;stdio.h&gt;</code>  files. For example, it might be a sequence of fixed size records (e.g. of 1Kbyte), not a stream of bytes.</p>\n\n<p>You could organize your OS as a <a href=\"https://en.wikipedia.org/wiki/Microkernel\" rel=\"nofollow noreferrer\">microkernel</a> and have file systems given by application code.  Look into <a href=\"https://en.wikipedia.org/wiki/VSTa\" rel=\"nofollow noreferrer\">VSTa</a> and <a href=\"https://www.gnu.org/software/hurd/hurd.html\" rel=\"nofollow noreferrer\">HURD</a>.</p>\n\n<p>You need of course a disk driver, which fetches/writes blocks (of 4Kbytes) from your drive (disk I/O is always by blocks or <a href=\"https://en.wikipedia.org/wiki/Disk_sector\" rel=\"nofollow noreferrer\">disk sectors</a>. Old small disks had 512 bytes blocks. New large disks have 4Kbytes ones, see <a href=\"https://en.wikipedia.org/wiki/Advanced_Format\" rel=\"nofollow noreferrer\">advanced format</a>). It should be interrupt driven and uses <a href=\"https://en.wikipedia.org/wiki/Direct_memory_access\" rel=\"nofollow noreferrer\">DMA</a>. You need a task <a href=\"https://en.wikipedia.org/wiki/Scheduling_%28computing%29\" rel=\"nofollow noreferrer\">scheduler</a>. AFAIU, you <a href=\"https://stackoverflow.com/a/31201991/841108\">won't</a> use the BIOS for this (perhaps the <a href=\"https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface\" rel=\"nofollow noreferrer\">UEFI</a>); you need to understand how common hardware (<a href=\"http://wiki.osdev.org/SATA\" rel=\"nofollow noreferrer\">SATA</a> &amp; <a href=\"http://wiki.osdev.org/AHCI\" rel=\"nofollow noreferrer\">AHCI</a>) works.</p>\n\n<p>You should publish (<em>today!</em>) your toy OS as <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> (e.g. under <a href=\"http://www.gnu.org/licenses/gpl-3.0.en.html\" rel=\"nofollow noreferrer\">GPLv3</a>+ on <a href=\"http://github.com/\" rel=\"nofollow noreferrer\">github</a>) to get feedbacks and contributions.</p>\n\n<p>You might copy (if licenses are compatible) existing code from other <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> operating systems, and you certainly will study their source code to understand things.</p>\n\n<p>So code some task scheduler, a <a href=\"https://en.wikipedia.org/wiki/Page_fault\" rel=\"nofollow noreferrer\">page fault</a> handler, a <a href=\"https://en.wikipedia.org/wiki/Virtual_memory\" rel=\"nofollow noreferrer\">virtual memory</a>, then add interrupt driven disk IO, and some file system code above that. Then you'll beginning to understand that an OS cannot be a <em>small</em> toy.... You might consider a microkernel or <a href=\"https://en.wikipedia.org/wiki/Exokernel\" rel=\"nofollow noreferrer\">exokernel</a> approach.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 3, "last_activity_date": 1436384278, "creation_date": 1436384278, "answer_id": 31302139, "question_id": 31301735, "link": "https://stackoverflow.com/questions/31301735/toy-os-filesystem/31302139#31302139", "title": "Toy OS Filesystem", "body": "<p>It would be simplest to use an existing open-source filesystem if the licence terms suit your needs. <a href=\"http://elm-chan.org/fsw/ff/00index_e.html\" rel=\"nofollow\">ELM FatFs</a> is one such library, with no usage restrictions whatsoever.  You only need to provide the device control interface layer using the provided stubs and examples.</p>\n"}], "owner": {"reputation": 108, "user_id": 1620201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/koGoC.png?s=128&g=1", "display_name": "Blue Okiris", "link": "https://stackoverflow.com/users/1620201/blue-okiris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 3, "closed_date": 1436430503, "accepted_answer_id": 31301788, "answer_count": 2, "score": 3, "last_activity_date": 1555962470, "creation_date": 1436383003, "last_edit_date": 1436388600, "question_id": 31301735, "link": "https://stackoverflow.com/questions/31301735/toy-os-filesystem", "closed_reason": "Needs more focus", "title": "Toy OS Filesystem", "body": "<p>I have developed a basic kernel in assembly/c that runs a basic terminal. I have set it up to run off of an iso with grub.</p>\n\n<p>I would like to continue this OS, but without a file system, I feel as if there's really nothing else I could do. After much time on the internet, I have come up with really nothing I can do to implement this.</p>\n\n<p>People have said implement FAT or make a VFS, but nothing any further, nor tutorials, nor any references to anywhere.</p>\n\n<p>Could someone explain how a file system works, where I can get started/where I can connect a pre-made system, and how to use it?</p>\n\n<p>Also, I do not have access to standard libraries when compiling my os. I use gcc, nasm, ld, and grub-mkrescue(for the disk image). I use qemu for emulation.</p>\n\n<p><strong>EDIT to make less OT</strong></p>\n\n<p>Can someone describe, in detail how a file system works, so when I look at the sources of file systems that have been implemented, like FAT, I can understand how to apply it to my own operating system?</p>\n\n<p><strong>EDIT - Simpler</strong></p>\n\n<p>Even easier. How could I directly access the hard drive? My kernel runs completely in protected mode, so could I switch out and write directly to the hard drive. A file system could be implemented with a file looking like this:</p>\n\n<p><em>name</em> <strong><em>special char</em></strong> <em>text</em> <strong><em>special char</em></strong></p>\n\n<p>ie:</p>\n\n<p><em>hello world.script</em> <strong><em>0x00</em></strong> <em>println \"Hello, world!!\"</em> <strong><em>0x00</em></strong></p>\n\n<p>Where you wouldn't need special segmentation, you would just look until you find the file name and the special character (something not in a string like '\\0') and then read until you find the second non-string character.</p>\n\n<p>Would there be a way to access the hard drive by switching in and out of protected mode or write a hard disk driver in order to implement this?</p>\n"}, {"tags": ["c", "void-pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1436382442, "post_id": 31301515, "comment_id": 50593236, "body": "@juanchopanza Strictly speaking both of these post increments are UB."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1436382449, "post_id": 31301515, "comment_id": 50593239, "body": "@juanchopanza <code>sizeof(void)</code> is undefined, so arithmetic on <code>void</code> pointers is prohibited."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1436382467, "post_id": 31301515, "comment_id": 50593251, "body": "@juanchopanza <a href=\"http://i.imgur.com/nnv2UGg.png\" rel=\"nofollow noreferrer\">i.imgur.com/nnv2UGg.png</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436382485, "post_id": 31301515, "comment_id": 50593267, "body": "Actually not both. Only the second one."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1436382496, "post_id": 31301515, "comment_id": 50593270, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3523145/pointer-arithmetic-for-void-pointer-in-c\">Pointer arithmetic for void pointer in C</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1436382572, "post_id": 31301515, "comment_id": 50593316, "body": "@Quentin: That is a gcc extension (behaves like <code>char *</code>) - the most useless imho."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1436382573, "post_id": 31301515, "comment_id": 50593318, "body": "@Quentin Yes, good point. I got fooled by gcc accepting this."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1436382678, "post_id": 31301515, "comment_id": 50593375, "body": "Nothing to really pick here, clang accepts it, too. However: <code>arithmetic on a pointer to void is a GNU extension [-Wpointer-arith]</code> if <code>-pendantic</code>"}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1436382708, "post_id": 31301515, "comment_id": 50593395, "body": "Can you post a fully code example that we can actually compile and run?  Your foo/bar statement doesn&#39;t make sense without context."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1436382892, "post_id": 31301515, "comment_id": 50593510, "body": "@QuestionC I ask specifically about allocated space and pointer arithmetic, this is a bit more specific: <a href=\"http://i.imgur.com/CfqG09s.png\" rel=\"nofollow noreferrer\">i.imgur.com/CfqG09s.png</a>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1436383548, "post_id": 31301515, "comment_id": 50593912, "body": "NOTE: <code>void *</code> is a generic pointer while <code>void **</code> is not."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1436383698, "post_id": 31301515, "comment_id": 50594010, "body": "@haccks really? so why I can return a <code>void**</code> from a function that suppose to return <code>void*</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1436391838, "post_id": 31301515, "comment_id": 50598407, "body": "One is a pointer to the other."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436382630, "post_id": 31301562, "comment_id": 50593350, "body": "It worth mentioning that pointer arithmetic resulting in addresses within an unallocated space is UB. So <code>bar++</code> is not safe as well."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1436382749, "post_id": 31301562, "comment_id": 50593428, "body": "@EugeneSh.Yes my question is specifically for allocated spaces, I tried to make my question as minimal as possible."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1436384261, "post_id": 31301562, "comment_id": 50594360, "body": "Can you please answer the other part of my question?"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1436384350, "post_id": 31301562, "comment_id": 50594412, "body": "I also added another small question just now."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436385731, "post_id": 31301562, "comment_id": 50595238, "body": "@EugeneSh., no arithmetic that goes one item beyond a valid object is allowed, so <code>bar++</code> is fine. It is only erroneous when you&#39;d increment further away from a valid object or dereference the pointer."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 8, "last_activity_date": 1436382900, "last_edit_date": 1436382900, "creation_date": 1436382418, "answer_id": 31301562, "question_id": 31301515, "link": "https://stackoverflow.com/questions/31301515/difference-between-void-and-void/31301562#31301562", "title": "Difference between void * and void **", "body": "<p>First snippet</p>\n\n<pre><code> foo++;//error\n</code></pre>\n\n<p>because, <code>foo</code> is pointer to <code>void</code> and you cannot have pointer arithmetic on <code>void *</code>, size of the <code>void</code> type is not defined.</p>\n\n<p>Second snippet,</p>\n\n<pre><code> bar++;//no error\n</code></pre>\n\n<p>because, <code>bar</code> is a pointer to <strong>a pointer to <code>void</code></strong>. So, arithmetic operation is permitted, as the size of a pointer to pointer type is well defined.</p>\n\n<p><em>FWIW, don't get surprised if sometimes, <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Pointer-Arith.html\" rel=\"nofollow\">void pointer arithmetic \"works\" without any error</a>.</em></p>\n"}], "owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 31301562, "answer_count": 1, "score": -5, "last_activity_date": 1437660546, "creation_date": 1436382247, "last_edit_date": 1437660546, "question_id": 31301515, "link": "https://stackoverflow.com/questions/31301515/difference-between-void-and-void", "title": "Difference between void * and void **", "body": "<p>Other than being able to dereference a <code>void**</code>, I don't understand the following:</p>\n\n<pre><code>void * foo, **bar;\nfoo++;//error\nbar++;//no error\n</code></pre>\n\n<p>Why doesn't the first work but the second does? What's the difference?</p>\n"}, {"tags": ["c", "posix", "readline", "editline"], "comments": [{"owner": {"reputation": 5497, "user_id": 969534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e486349f7b6c6e378e2ae2920690b39?s=128&d=identicon&r=PG", "display_name": "dav1d", "link": "https://stackoverflow.com/users/969534/dav1d"}, "reply_to_user": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1436388578, "post_id": 31301499, "comment_id": 50596806, "body": "There is nothing to the code, all it does is call <code>readline(&quot;prompt&gt; &quot;)</code> in a loop. It&#39;s basically the <a href=\"https://github.com/troglobit/editline/blob/master/examples/testit.c\" rel=\"nofollow noreferrer\">example code of libedit</a>."}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1436388838, "post_id": 31301499, "comment_id": 50596941, "body": "What about calling <code>rl_forced_update_display</code> after modifying <code>rl_line_buffer</code>?"}, {"owner": {"reputation": 5497, "user_id": 969534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e486349f7b6c6e378e2ae2920690b39?s=128&d=identicon&r=PG", "display_name": "dav1d", "link": "https://stackoverflow.com/users/969534/dav1d"}, "reply_to_user": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1436389965, "post_id": 31301499, "comment_id": 50597500, "body": "This redraws the last prompt and the input, but doesn&#39;t display the contents of <code>rl_line_buffer</code>."}], "owner": {"reputation": 5497, "user_id": 969534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e486349f7b6c6e378e2ae2920690b39?s=128&d=identicon&r=PG", "display_name": "dav1d", "link": "https://stackoverflow.com/users/969534/dav1d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1436388665, "creation_date": 1436382217, "last_edit_date": 1436388665, "question_id": 31301499, "link": "https://stackoverflow.com/questions/31301499/display-deletable-characters-in-a-terminal-using-libedit-editline-or-readline", "title": "Display deletable characters in a terminal (using libedit/editline or readline)", "body": "<p>I am currently using libedit for \"readline\"-functionallity, so far it works really well, but I would like to display characters (spaces) after the prompt which are deleteable by the user. Similiar to IPython:</p>\n\n<p><img src=\"https://i.stack.imgur.com/TSNAl.png\" alt=\"Ipython\"></p>\n\n<p>As you can see there are 4 additional characters (spaces) automatically added, which I can remove by pressing backspace, until I reach the prompt <code>...:</code>.</p>\n\n<p>I would like to mimic this behaviour with libedit/editline and if there is no way to do this (e.g. using curses or the underlaying terminal function which libedit uses), I would switch to readline. </p>\n\n<p>How is this possible to do, preferable with libedit/editline or readline.</p>\n\n<p>Edit: I tried modifying <code>rl_line_buffer</code>, this didn't modify the display, only the value I get from <code>readline</code>.</p>\n"}, {"tags": ["c", "string", "malloc"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1436381711, "post_id": 31301298, "comment_id": 50592777, "body": "Does this even compile?  You&#39;ve got multiply defined <code>int c</code> within same scope, among other things.   Also, why are you casting the return of malloc()?.  In C, this is a mistake."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436381837, "post_id": 31301298, "comment_id": 50592852, "body": "I&#39;ll better spare me the stnadard warning (&quot;do not cast <code>void *</code>). You have worse problems to solve first. A good start would be a recent C book."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436381941, "post_id": 31301298, "comment_id": 50592915, "body": "<code>c = (int)....</code>.... call the ambulance, please..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436382382, "post_id": 31301298, "comment_id": 50593189, "body": "@SouravGhosh: I just noticed that one. A good example to show if someone asks again why not to cast <code>void *</code>. Nothing is useless; it can always be used to scare someone."}, {"owner": {"reputation": 13, "user_id": 5095419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e877830e16c34b477fd4a9d8af3a08?s=128&d=identicon&r=PG&f=1", "display_name": "Dhananjay Goel", "link": "https://stackoverflow.com/users/5095419/dhananjay-goel"}, "edited": false, "score": 0, "creation_date": 1436384335, "post_id": 31301298, "comment_id": 50594402, "body": "Yeah,dunno how multiple use of int escaped me.But I read somewhere that variable scope gets destroyed outside the function, So used Malloc.       But didn&#39;t even thought for a second that return was only returning a value. My bad guys. Thanks to all"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1436384574, "post_id": 31301298, "comment_id": 50594561, "body": "<code>[m|c|re]alloc()</code> is only necessary when allocating memory.  When you create <code>int c;</code>, the memory is created for that automatically on the <b><i><a href=\"http://gribblelab.org/CBootcamp/7_Memory_Stack_vs_Heap.html\" rel=\"nofollow noreferrer\">stack</a></i></b>, no matter what the scope.  If you create <code>int *c</code>, then c = malloc(SOME_BYTES);` is necessary to create memory, and it will be placed on the <b><i><a href=\"http://gribblelab.org/CBootcamp/7_Memory_Stack_vs_Heap.html\" rel=\"nofollow noreferrer\">heap</a></i></b>.  You <i>always</i> must call <code>free()</code> for any variable that uses allocated memory."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5095419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e877830e16c34b477fd4a9d8af3a08?s=128&d=identicon&r=PG&f=1", "display_name": "Dhananjay Goel", "link": "https://stackoverflow.com/users/5095419/dhananjay-goel"}, "edited": false, "score": 0, "creation_date": 1436384525, "post_id": 31301498, "comment_id": 50594523, "body": "Hey Thanks.Newbie in C so silly mistakes here and there."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1436382211, "creation_date": 1436382211, "answer_id": 31301498, "question_id": 31301298, "link": "https://stackoverflow.com/questions/31301298/string-comparison-logic-error/31301498#31301498", "title": "String Comparison Logic Error", "body": "<p>This function will always return 0.</p>\n\n<p>You define <code>c</code> at the top and set it to 0 (the value returned by <code>malloc</code> is overwritten).  Later on, you define a new variable named <code>c</code> in an inner scope, hiding the previous declaration.  So the outer <code>c</code> is never modified after being set to 0.</p>\n\n<p>Change <code>int c=1;</code> to <code>c=1</code> and that is probably what you're looking for.  Also, there's no need to call <code>malloc</code> here as that allocates dynamic memory and <code>c</code> is an <code>int</code> itself, not a pointer to one.</p>\n"}, {"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1436383096, "post_id": 31301642, "comment_id": 50593634, "body": "you can delete <code>|| (*m==&#39;\\0&#39;)</code>, because <code>*m</code> must be equal to <code>*n</code> because of the <code>while</code>."}, {"owner": {"reputation": 13, "user_id": 5095419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e877830e16c34b477fd4a9d8af3a08?s=128&d=identicon&r=PG&f=1", "display_name": "Dhananjay Goel", "link": "https://stackoverflow.com/users/5095419/dhananjay-goel"}, "edited": false, "score": 0, "creation_date": 1436384638, "post_id": 31301642, "comment_id": 50594593, "body": "@ryyker Thanks for Detailed explanation.Just started in C so making lots of mistakes."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1436384851, "last_edit_date": 1436384851, "creation_date": 1436382707, "answer_id": 31301642, "question_id": 31301298, "link": "https://stackoverflow.com/questions/31301298/string-comparison-logic-error/31301642#31301642", "title": "String Comparison Logic Error", "body": "<p>I believe the intent is that the function returns<br>\n<strong><em>1 for match</em></strong><br>\n<strong><em>0 for mis-match</em></strong><br>\nThe value of <code>c</code> is set to 1 as an indicator that the strings were equal, and returned upon either one of <code>m</code> or <code>n</code> being null. (if equal, both will be null)<br>\nIf the strings were not equal, c is returned as initialized -> <code>0</code>.    </p>\n\n<p><strong><em>The version below</em></strong> does this.  </p>\n\n<p>Compare this version to your original for suggested changes: </p>\n\n<p>1) you do not need to allocate memory for <code>int c;</code> it is implicitly created as an <strong><em><a href=\"https://rakanalysis.wordpress.com/2012/03/16/variable-types-in-c-auto-static-register-and-external-a-brief-guide/\" rel=\"nofollow\">auto</a></em></strong>.<br>\n2) you can initialize in the same line: <code>int c = 0;</code><br>\n3) do not re-create <code>int c</code> in <code>if(...){...}</code>block<br>\n4) you want to exit if either <code>*m</code> or <code>*n</code> are NULL.<br>\n5) because the <code>while</code> guarantees *m &amp; *n are same, do not need to check both for NULL. (thanks to @mch comment)       </p>\n\n<pre><code>int func(char *n,char *m)\n{\n    int c=0;//1,2,\n    while(*n == *m)\n    {\n        if(*n=='\\0') //5, 4\n        {\n            c = 1;//3\n            break;\n        }\n        else\n        {\n           n++;\n           m++;\n        }\n    }\n    printf(\"%d \\n\",c);\n    return(c);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5095419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e877830e16c34b477fd4a9d8af3a08?s=128&d=identicon&r=PG&f=1", "display_name": "Dhananjay Goel", "link": "https://stackoverflow.com/users/5095419/dhananjay-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 31301642, "answer_count": 2, "score": -1, "last_activity_date": 1436384851, "creation_date": 1436381577, "question_id": 31301298, "link": "https://stackoverflow.com/questions/31301298/string-comparison-logic-error", "title": "String Comparison Logic Error", "body": "<p>This program is to compare strings but i can't understand why it is returning same value of c everytime.Can anyone help me understand this?\nThank You.</p>\n\n<pre><code> int func(char *n,char *m)\n      {\n           int c;\n           c = (int)malloc(sizeof(int));\n           c=0;\n           while(*n == *m)\n               {\n                    if(*n=='\\0' &amp;&amp; *m=='\\0')\n                        {\n                            int c=1;\n                            break;\n                        }\n                    else\n                        {\n                           n++;\n                           m++;\n                        }\n                  }\n        printf(\"%d \\n\",c);\n        return(c);\n      }\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "gcc", ".a"], "comments": [{"owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "edited": false, "score": 0, "creation_date": 1436380659, "post_id": 31300869, "comment_id": 50592084, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5713894/file-not-recognized-file-truncated-gcc-error\">File not recognized: File truncated GCC error</a>"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1436461730, "post_id": 31300869, "comment_id": 50634477, "body": "Is the output from <code>objdump -x libquanser_communications.a</code> ok?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5095319, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YiHdGDH6cTE/AAAAAAAAAAI/AAAAAAAAABI/w5BUBv9pUDY/photo.jpg?sz=128", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/5095319/dinesh"}, "edited": false, "score": 0, "creation_date": 1436413600, "post_id": 31301829, "comment_id": 50604513, "body": "Thanks for your help. Those libraries are from 3rd party and they are 32 bit while my machine is 64 bit. I tried compiling without -m32 flag, but it gives the same error saying file is truncated."}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 0, "last_activity_date": 1436383322, "creation_date": 1436383322, "answer_id": 31301829, "question_id": 31300869, "link": "https://stackoverflow.com/questions/31300869/using-32-bit-a-library-file-in-64-bit-linux-machine/31301829#31301829", "title": "Using 32 bit .a library file in 64 bit linux machine", "body": "<p>You're probably getting this error because your libquanser_communications is 64-bit and not 32-bit. You can't compile 32 bit against 64 bit code.</p>\n\n<p>If you compiled libqunaser yourself, compile it with the -m32 flag (recursively, until you're done with all dependencies).  </p>\n\n<p>If not, get the 32 bit version of it</p>\n"}], "owner": {"reputation": 23, "user_id": 5095319, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YiHdGDH6cTE/AAAAAAAAAAI/AAAAAAAAABI/w5BUBv9pUDY/photo.jpg?sz=128", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/5095319/dinesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436383322, "creation_date": 1436380325, "last_edit_date": 1495541645, "question_id": 31300869, "link": "https://stackoverflow.com/questions/31300869/using-32-bit-a-library-file-in-64-bit-linux-machine", "title": "Using 32 bit .a library file in 64 bit linux machine", "body": "<p>I am trying to use 32 bit .a files in a 64 bit machine. I compiled source code using gcc -m32 option. It gave following error </p>\n\n<pre><code>gcc -m32 *.c -Llib -lquanser_communications -Iinclude -o prg.o`In file included from /usr/include/wchar.h:27:0,\n             from include/quanser_types.h:16,\n             from include/quanser_communications.h:16,\n             from include/quanser_stream.h:11,\n             from stream_client.c:3:/usr/include/features.h:374:25: \n</code></pre>\n\n<p><code>fatal error: sys/cdefs.h: No such file or directory</code></p>\n\n<p>After searching I got to this and <a href=\"https://stackoverflow.com/questions/23498237/compile-program-for-32bit-on-64bit-linux-os-causes-fatal-error\">thread</a> and installed libx32gcc-4.8-dev and libc6-dev-i386 packages.</p>\n\n<p>After installing those packages and running compilation gives following error </p>\n\n<pre><code>gcc -m32 *.c -Llib -lquanser_communications -Iinclude -o prg.o\nlib/libquanser_communications.a: file not recognized: File truncated\n</code></pre>\n\n<p>How could I fix this issue ? \nThanks.</p>\n"}, {"tags": ["c", "language-lawyer", "ternary-operator"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1436380276, "post_id": 31300738, "comment_id": 50591872, "body": "Because there is a need to return a value. But GCC can like this <code>(i==1)?({printf(&quot;Hello\\n&quot;);}:({printf(&quot;World\\n&quot;);});</code>"}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 2, "creation_date": 1436380537, "post_id": 31300738, "comment_id": 50592012, "body": "If your intention is to use multiple statements, you can use function calls in ternary operators"}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 1, "creation_date": 1436380793, "post_id": 31300738, "comment_id": 50592179, "body": "Because this is a terrible use of the ternary operator."}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 1, "creation_date": 1436381079, "post_id": 31300738, "comment_id": 50592379, "body": "I think the compiler only allows one expression may be because of two reason..  1. It understands it as a boolean or 1/0 expression &amp; multiple statement may hamper that 2. It is not good for readability..for this we have if-else which is more readable I guess"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1436381186, "post_id": 31300738, "comment_id": 50592443, "body": "@BLUEPIXY,  my gcc compiler did not like the posted code nor your example line.  amongst other things, this warning: &quot;... ISO C forbids braced-groups within expressions [-Wpedantic]&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1436380707, "post_id": 31300808, "comment_id": 50592116, "body": "What about the compound literal operator <code>() {}</code>?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1436380896, "post_id": 31300808, "comment_id": 50592241, "body": "@ouah  Thanks. I included an example of using a compound literal."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1436381587, "post_id": 31300808, "comment_id": 50592698, "body": "For mentioning compound literals +1."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1436381653, "last_edit_date": 1436381653, "creation_date": 1436380192, "answer_id": 31300808, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31300808#31300808", "title": "Why ternary operator does not support blocks?", "body": "<p>The ternary operator consists of expressions. There is no such a kind of  expression that uses braces.</p>\n\n<p>You can write simply</p>\n\n<pre><code>( i == 1 ) ? printf(\"Hello\\n\") : printf(\"World\\n\");\n</code></pre>\n\n<p>It semss that the only case when braces can be present in an expression is the  use of a compound literal. For example</p>\n\n<pre><code>struct A { int x; int y; } a = { 1, 2 };\n\na = a.x &lt; a.y ? ( struct A ){ a.y, a.x } : ( struct A ){ ++a.x, --a.y }; \n</code></pre>\n\n<p>As for this statement</p>\n\n<pre><code>(i==1)?{printf(\"Hello\\n\");printf(\"World\\n\");}:{printf(\"Bye\\n\");printf(\"World\\n\");};\n</code></pre>\n\n<p>then it can be rewritten the following way using the comma operator</p>\n\n<pre><code>i == 1 ? ( printf(\"Hello\\n\"), printf(\"World\\n\") ) : ( printf(\"Bye\\n\"), printf(\"World\\n\") );\n</code></pre>\n\n<p>Or even like</p>\n\n<pre><code>i == 1 ? printf(\"Hello\\n\"), printf(\"World\\n\") : ( printf(\"Bye\\n\"), printf(\"World\\n\") );\n</code></pre>\n\n<p>Shortly answering your question if you need a code block then use the <code>if-else</code> statement instead of the ternary operator.  Though the <code>if-else</code> statement may not be used in expressions. On the other hand it is desirable for readeability of the code that expressions would not be too compound.</p>\n\n<p>As any operator the ternary operator is used in expressions and returns some evaluated value. For example as an expression it can be used as initializer or in assignments.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436380316, "post_id": 31300811, "comment_id": 50591893, "body": "There is actually <i>no</i> statement at all allowed. As you already wrote, there are only <i>expressions</i> allowed. Simple reason: it is an operator, thus it is also &quot;just&quot; an expression."}], "tags": [], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1436380834, "last_edit_date": 1436380834, "creation_date": 1436380200, "answer_id": 31300811, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31300811#31300811", "title": "Why ternary operator does not support blocks?", "body": "<p>Yes only one expression is possible in ternary operators..You have to use <code>if-else</code> for multiple statements. Ternary operators takes <strong>one expression</strong> only in each slot\nalthough you can call two different functions in ternary operator</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid a(){\n printf(\"Hello\\n\");\n printf(\"Hi\\n\");\n\n}\n\nvoid b(){\n  printf(\"Hi\\n\");\n  printf(\"Hello\\n\");\n}\n\nint main()\n {\nint i = 1;\n(i == 1) ? a() : b();\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6795, "user_id": 1460665, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/o8b6s.jpg?s=128&g=1", "display_name": "Insane Coder", "link": "https://stackoverflow.com/users/1460665/insane-coder"}, "edited": false, "score": 0, "creation_date": 1436381227, "post_id": 31300812, "comment_id": 50592468, "body": "<i>last value in each subexpression to be returned</i>? But I am getting <code>Hello World</code> and  not <code>World World</code>. Did I understand incorrectly?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 6795, "user_id": 1460665, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/o8b6s.jpg?s=128&g=1", "display_name": "Insane Coder", "link": "https://stackoverflow.com/users/1460665/insane-coder"}, "edited": false, "score": 0, "creation_date": 1436381353, "post_id": 31300812, "comment_id": 50592552, "body": "@InsaneCoder notice the second &quot;operand&quot;, as <code>x</code> will be TRUE."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436381398, "post_id": 31300812, "comment_id": 50592573, "body": "Because the conditional part of the ternary operator is true, only the second part is evaluated.  So <code>printf(&quot;Hello\\n&quot;)</code> and <code>printf(&quot;World\\n&quot;)</code> are both run, and the return value of the latter will be assigned to <code>x</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1436380873, "last_edit_date": 1436380873, "creation_date": 1436380203, "answer_id": 31300812, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31300812#31300812", "title": "Why ternary operator does not support blocks?", "body": "<p>The ternary operator expects an <strong>expression</strong> for each part, and <code>{...}</code> is not an expression, but a statement.</p>\n\n<p>To expand on your edit, the result of a ternary operator is an expression (but not an lvalue as you suggest), and statement blocks can't evaluate to a value.</p>\n\n<p>For example, this doesn't make sense:</p>\n\n<pre><code>int x = (i==1)?{printf(\"Hello\\n\");printf(\"World\\n\");}:{printf(\"Bye\\n\");printf(\"World\\n\");};\n</code></pre>\n\n<p>But you could do this:</p>\n\n<pre><code>int x = (i==1)?(printf(\"Hello\\n\"), printf(\"World\\n\")):(printf(\"Bye\\n\"), printf(\"World\\n\"));\n</code></pre>\n\n<p>In which case, the comma operator would cause the last value in each subexpression to be returned.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 10, "last_activity_date": 1436381862, "last_edit_date": 1436381862, "creation_date": 1436380248, "answer_id": 31300825, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31300825#31300825", "title": "Why ternary operator does not support blocks?", "body": "<p>To quote <code>C11</code> standard, chapter \u00a76.5.15, the syntax of the conditional operator is</p>\n\n<pre><code>conditional-expression:\n    logical-OR-expression\n    logical-OR-expression ? expression : conditional-expression\n</code></pre>\n\n<p>Where, the second and third operands are <code>expression</code>, not statements.</p>\n\n<p>Just to elaborate,</p>\n\n<blockquote>\n  <p>One of the following shall hold for the second and third operands:<br>\n  \u2014 both operands have arithmetic type;<br>\n  \u2014 both operands have the same structure or union type;<br>\n  \u2014 both operands have void type;<br>\n  \u2014 both operands are pointers to qualified or unqualified versions of compatible types;<br>\n  \u2014 one operand is a pointer and the other is a null pointer constant; or<br>\n  \u2014 one operand is a pointer to an object type and the other is a pointer to a qualified or\n  unqualified version of void.</p>\n</blockquote>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>To answer the question</p>\n\n<blockquote>\n  <p><em>Why only single expression?</em></p>\n</blockquote>\n\n<p>again, quoting the standard, </p>\n\n<blockquote>\n  <p>....the result is the value of the second or third operand (whichever is evaluated), converted to the type described below.</p>\n</blockquote>\n\n<p>Block of statements, will not give a <em>value</em>. The evaluation of an <code>expression</code> can.</p>\n"}, {"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436381448, "post_id": 31301050, "comment_id": 50592614, "body": "@AnT It is a wrong using of the conditional operator. See my answer.:)"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 2, "last_activity_date": 1436380813, "last_edit_date": 1495542189, "creation_date": 1436380813, "answer_id": 31301050, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31301050#31301050", "title": "Why ternary operator does not support blocks?", "body": "<p><em>Operators</em> in C language can only be used in <em>expressions</em>. There's no such thing as \"block\" in an expression. In C language <em>blocks</em> are elements of higher-level syntactic structure. Blocks exists at the level of <em>statements</em>. Expression can be used in a statement. But statement cannot become an expression (or be used inside an expression).</p>\n\n<p>Your particular example can be rewritten in terms of expressions</p>\n\n<pre><code>i == 1 ?\n  printf(\"Hello\\n\"), printf(\"World\\n\") :\n  printf(\"Bye\\n\"), printf(\"World\\n\");\n</code></pre>\n\n<p>without any need for <code>{}</code>.</p>\n\n<p>(See <a href=\"https://stackoverflow.com/questions/1613230/uses-of-c-comma-operator/1618867#1618867\">Uses of C comma operator</a> for extra information)</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1436381139, "creation_date": 1436381139, "answer_id": 31301142, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31301142#31301142", "title": "Why ternary operator does not support blocks?", "body": "<p>The ternary operator is not meant to be used as a <em>control structure</em>, meaning it's not meant to control execution of statements.  It's simply a way to choose which of two or more <em>expressions</em> will be evaluated.  </p>\n\n<p>As Sourav Ghosh has shown, the syntax of a conditional expression simply does not allow the operands of the <code>?:</code> operator to be statements.  </p>\n"}, {"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 0, "last_activity_date": 1436386115, "creation_date": 1436386115, "answer_id": 31302694, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31302694#31302694", "title": "Why ternary operator does not support blocks?", "body": "<p>This is not allowed because it makes no sense. The ternary operator is meant to return a value. What would that be for <code>{}</code> blocks?\nAnd then also there is another construct <code>if () { } else { }</code> that already serves the same purpose that you are trying to give to <code>? :</code>. Doesn't this here look much nicer than the code that you posted?</p>\n\n<pre><code>int main(void)\n{\n    int i = 1;\n    if (i==1) {\n       printf(\"Hello\\n\");\n       printf(\"World\\n\");\n    } else {\n       printf(\"Bye\\n\");\n       printf(\"World\\n\");\n    };\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1436482065, "creation_date": 1436482065, "answer_id": 31329588, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks/31329588#31329588", "title": "Why ternary operator does not support blocks?", "body": "<p>As others have noted, GCC allows statements to be used syntactically as expressions, but such a feature is not part of the C standard.  Historically, the reason for this likely had to do with the fact that statements are allowed to declare variables, and many systems use the same stack to hold local variables and parameters as is used to hold temporary values used in expression evaluation.  Allowing new variables to come into existence within the execution of a statement while still keeping old variables in view would add some complexity to the compiler [note that when a function is called within a new expression, new variables are created for that function, but the old values will be \"out of view\" until the called function returns and the new variables are destroyed].</p>\n\n<p>That having been said, other features of C such as variable-length arrays require far more complexity than would the ability to embed statements in expressions, so the arguments in favor of that design are no longer as compelling as they were in the 1970s.  Unfortunately, the fact that something was once a compelling reason not to include a feature in a language may cause it to forevermore be perceived that way, even if design considerations for today's compilers are nothing like those of the 1970s.</p>\n"}], "owner": {"reputation": 6795, "user_id": 1460665, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/o8b6s.jpg?s=128&g=1", "display_name": "Insane Coder", "link": "https://stackoverflow.com/users/1460665/insane-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3299, "favorite_count": 0, "answer_count": 8, "score": 4, "last_activity_date": 1437661039, "creation_date": 1436379984, "last_edit_date": 1437661039, "question_id": 31300738, "link": "https://stackoverflow.com/questions/31300738/why-ternary-operator-does-not-support-blocks", "title": "Why ternary operator does not support blocks?", "body": "<p>Why the ternary operator does not have blocks? In other words, why the following code does not work and reports error for <code>{}</code> braces?</p>\n\n<pre><code>int main()\n{\n    int i = 1;\n    (i==1)?{printf(\"Hello\\n\")}:{printf(\"World\\n\")};\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Perhaps the question is misunderstood. It was: why blocks are not supported? Why only single expression?</p>\n\n<p>Why this is not allowed to work? </p>\n\n<pre><code>int main()\n{\n    int i = 1;\n    (i==1)?{printf(\"Hello\\n\");printf(\"World\\n\");}:{printf(\"Bye\\n\");printf(\"World\\n\");};\n    return 0;\n}\n</code></pre>\n\n<p>One reason could be that ternary are often used for conditional assignment on left side and blocks will have no such returns or it will get confusing with multiple statements inside block.</p>\n"}, {"tags": ["c", "multiprocessing"], "comments": [{"owner": {"reputation": 453, "user_id": 2455308, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89cb41d2f0159cff88adf6c345243d71?s=128&d=identicon&r=PG&f=1", "display_name": "LeDerp", "link": "https://stackoverflow.com/users/2455308/lederp"}, "edited": false, "score": 0, "creation_date": 1436380151, "post_id": 31300607, "comment_id": 50591817, "body": "I&#39;d suggest you to use <a href=\"http://www.cs.berkeley.edu/~demmel/cs267/Sharks_and_Fish/prob2/sun_threads/barrier.c\" rel=\"nofollow noreferrer\">Barriers</a> if you have a knowledge of mutex and semaphores"}, {"owner": {"reputation": 830, "user_id": 3454650, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6ccec193e74c155b5575cf893799e694?s=128&d=identicon&r=PG&f=1", "display_name": "spanishgum", "link": "https://stackoverflow.com/users/3454650/spanishgum"}, "reply_to_user": {"reputation": 453, "user_id": 2455308, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89cb41d2f0159cff88adf6c345243d71?s=128&d=identicon&r=PG&f=1", "display_name": "LeDerp", "link": "https://stackoverflow.com/users/2455308/lederp"}, "edited": false, "score": 0, "creation_date": 1436380697, "post_id": 31300607, "comment_id": 50592105, "body": "Do barriers apply across processes? I thought they we&#39;re only used for multi-threading."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436381778, "post_id": 31300607, "comment_id": 50592817, "body": "In a similar situation (I wanted to wait for an unspecified number of threads to finish some task), I finally used a mutex-protected global counting the threads currently doing the task and a locked semaphore that is posted as soon as the thread count dropps to 0. All threads waiting on the semaphore directly re-post it for others. No idea whether this is the <b>easiest</b> way, though ... and across processes, you need to get some shared memory for it."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 1, "last_activity_date": 1436390940, "last_edit_date": 1436390940, "creation_date": 1436386658, "answer_id": 31302874, "question_id": 31300607, "link": "https://stackoverflow.com/questions/31300607/synchronize-forked-child-processes-by-tasks/31302874#31302874", "title": "synchronize forked child processes by tasks", "body": "<p>I hacked together some example code (On Linux and maybe some other systems, compile with <code>-pthread</code> flag):</p>\n\n<pre><code>#define _XOPEN_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;semaphore.h&gt;\n\n#define SECTIONS 3\n#define NUM_PROCS 5\n\nstruct sectionguards\n{\n    sem_t enter_clear;\n    sem_t leave_clear;\n    sem_t count_lock;\n    int count;\n};\n\nstatic struct sectionguards *guards;\n\nstatic void init_guards(void)\n{\n    int shmid, i;\n    void *shmaddr;\n\n    shmid = shmget(IPC_PRIVATE, SECTIONS * sizeof(struct sectionguards), 00600);\n    if (shmid &lt; 0)\n    {\n        perror(\"shmget\");\n        exit(EXIT_FAILURE);\n    }\n\n    shmaddr = shmat(shmid, NULL, 0);\n    if (shmaddr == (void *)-1)\n    {\n        perror(\"shmat\");\n        exit(EXIT_FAILURE);\n    }\n\n    guards = shmaddr;\n\n    for (i = 0; i &lt; SECTIONS; ++i)\n    {\n        if (sem_init(&amp;(guards[i].enter_clear), 1, 1) &lt; 0)\n        {\n            perror(\"sem_init\");\n            exit(EXIT_FAILURE);\n        }\n\n        if (sem_init(&amp;(guards[i].leave_clear), 1, 0) &lt; 0)\n        {\n            perror(\"sem_init\");\n            exit(EXIT_FAILURE);\n        }\n\n        if (sem_init(&amp;(guards[i].count_lock), 1, 1) &lt; 0)\n        {\n            perror(\"sem_init\");\n            exit(EXIT_FAILURE);\n        }\n\n        guards[i].count = 0;\n    }\n}\n\nstatic void enter(int section)\n{\n    int next_section = section + 1;\n    if (next_section == SECTIONS) next_section = 0;\n\n    sem_wait(&amp;(guards[section].enter_clear));\n    sem_post(&amp;(guards[section].enter_clear));\n    sem_wait(&amp;(guards[section].count_lock));\n    if (!(guards[section].count)++)\n    {\n        sem_wait(&amp;(guards[next_section].enter_clear));\n    }\n    if (guards[section].count == NUM_PROCS)\n    {\n        sem_post(&amp;(guards[section].leave_clear));\n    }\n    sem_post(&amp;(guards[section].count_lock));\n}\n\nstatic void leave(int section)\n{\n    int next_section = section + 1;\n    if (next_section == SECTIONS) next_section = 0;\n\n    sem_wait(&amp;(guards[section].leave_clear));\n    sem_post(&amp;(guards[section].leave_clear));\n    sem_wait(&amp;(guards[section].count_lock));\n    if (!--(guards[section].count))\n    {\n        sem_post(&amp;(guards[next_section].enter_clear));\n        sem_wait(&amp;(guards[section].leave_clear));\n    }\n    sem_post(&amp;(guards[section].count_lock));\n}\n\nint main(void)\n{\n    int i, pnum;\n    pid_t pid;\n\n    init_guards();\n\n    pnum = 5;\n    for(i = 1; i &lt; NUM_PROCS; ++i) {\n      if ((pid = fork()) &lt; 0) {\n        perror(\"fork failed. . .\\n\");\n        exit(-1);\n      }      \n      else if (pid == 0) {\n        pnum = i;\n        break;\n      }\n    }\n\n\n    if (pid == 0) {\n      for (i = 0; i &lt; 5; ++i) {\n\n          enter(0);\n          printf(\"Worker %d in a\\n\", pnum);\n          leave(0);\n\n          enter(1);\n          printf(\"Worker %d in b\\n\", pnum);\n          leave(1);\n\n          enter(2);\n          printf(\"Worker %d in c\\n\", pnum);\n          leave(2);\n\n      }\n\n      exit(0);\n    }\n    else {\n      for (i = 0; i &lt; 5; ++i) {\n\n          enter(0);\n          printf(\"Worker %d in a\\n\", pnum);\n          leave(0);\n\n          enter(1);\n          printf(\"Worker %d in b\\n\", pnum);\n          leave(1);\n\n          enter(2);\n          printf(\"Worker %d in c\\n\", pnum);\n          leave(2);\n\n      }\n    }\n\n    for (i = 1; i &lt; NUM_PROCS; ++i) wait(NULL);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p><strike>It's not <strong>entirely</strong> bullet-proof because a process could enter and leave a section in a burst, thus marking the next section \"clear\". But this won't happen as soon as you have a blocking call inside each section.</strike></p>\n\n<p>Now it <strong>is</strong> bullet-proof, introducing a second semaphore that makes sure no process can leave a section before all entered it.</p>\n\n<p>Further edit: using only semaphores now. The safety that only the locking thread can unlock is lost, but this is not a big concern here. The benefit is not using any pthread functions for non-threaded code. On Linux, you still need libpthread, some other systems (e.g. FreeBSD) have the semaphore functions in the standard C library.</p>\n"}], "owner": {"reputation": 830, "user_id": 3454650, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6ccec193e74c155b5575cf893799e694?s=128&d=identicon&r=PG&f=1", "display_name": "spanishgum", "link": "https://stackoverflow.com/users/3454650/spanishgum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 31302874, "answer_count": 1, "score": 3, "last_activity_date": 1436390940, "creation_date": 1436379579, "question_id": 31300607, "link": "https://stackoverflow.com/questions/31300607/synchronize-forked-child-processes-by-tasks", "title": "synchronize forked child processes by tasks", "body": "<p>I am very confused on how to use different synchronization methods.</p>\n\n<p>I am working with this general code structure:</p>\n\n<pre><code>int i, pnum;\npid_t pid;\n\nfor(i = 0; i &lt; NUM_PROCS; ++i) {\n  if ((pid = fork()) &lt; 0) {\n    perror(\"fork failed. . .\\n\");\n    exit(-1);\n  }      \n  else if (pid == 0) {\n    pnum = i;\n    break;\n  }\n}\n\n\nif (pid == 0) {\n  for (i = 0; i &lt; NUM_ITER; ++i) {\n\n    // DO SECTION A\n\n    // DO SECTION B\n\n    // DO SECTION C\n\n  }\n\n  exit(0);\n}\nelse {\n  for (i = 0; i &lt; NUM_ITER; ++i) {\n    // DO SECTION A\n\n    // DO SECTION B\n\n    // DO SECTION C\n  }\n}\n\nfor (i = 0; i &lt; NUM_PROCS; ++i) wait(NULL);\n</code></pre>\n\n<p>What is the easiest way to ensure all processes first do section A, then B, then C and never out of order? My assignment involves using pipes at each section to send array data over, and I was under the impression that a read will block until the array has been read. I have a 2 pipes from the parent to each child, and then a pipe between each child and its getting very confusing as I have ALOT of reads and writes. There must be an easier way?</p>\n"}, {"tags": ["c++", "c", "regex", "c++11"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436379558, "post_id": 31300577, "comment_id": 50591440, "body": "<b>i just want to use regex ...</b> then why&#39;d tag <code>C</code>, <code>C++</code>?"}, {"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1436561037, "post_id": 31300577, "comment_id": 50683059, "body": "I englishified it while trying to extract the OP&#39;s intention. If my translation is fair, than the question makes less sense than before. If my translation is poor, I&#39;ve made the question less comprehensible."}], "answers": [{"comments": [{"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1436380018, "post_id": 31300719, "comment_id": 50591722, "body": "<code>((?:.|\\n)*?)</code> is bad and inefficient. Use <code>[\\s\\S]</code>. Here, I think all is needed is a negated class <code>[^}]</code>."}, {"owner": {"reputation": 1160, "user_id": 4635642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a51496675704d0fed476c58e1621068e?s=128&d=identicon&r=PG&f=1", "display_name": "Andris Leduskrasts", "link": "https://stackoverflow.com/users/4635642/andris-leduskrasts"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1436380583, "post_id": 31300719, "comment_id": 50592041, "body": "@stribizhev You&#39;re right, was stuck on that to show &quot;include newlines&quot; idea."}], "tags": [], "owner": {"reputation": 1160, "user_id": 4635642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a51496675704d0fed476c58e1621068e?s=128&d=identicon&r=PG&f=1", "display_name": "Andris Leduskrasts", "link": "https://stackoverflow.com/users/4635642/andris-leduskrasts"}, "is_accepted": true, "score": 0, "last_activity_date": 1436381435, "last_edit_date": 1436381435, "creation_date": 1436379933, "answer_id": 31300719, "question_id": 31300577, "link": "https://stackoverflow.com/questions/31300577/how-do-i-capture-multiple-lines-with-regexp/31300719#31300719", "title": "How do I capture multiple lines with regexp?", "body": "<p>Firstly, add <code>?</code> after your quantifier <code>*</code>, or it may also match items between two results. <code>{anything} bla bla bla {somethingelse}</code> might match <code>anything} bla bla bla {somethingelse</code> Alternatively, use <code>[^}]</code> instead of your wildcard <code>.</code></p>\n\n<p>Speaking of witch, the wildcard <code>.</code> <strong>does not</strong> contain newlines. Use <code>[^}]</code> instead, to also include newlines.</p>\n\n<p><code>program{([^}]*?)}</code> should do nicely.</p>\n"}], "owner": {"reputation": 107, "user_id": 5094883, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/484be6b4bf01eb180d49900e672eb51c?s=128&d=identicon&r=PG&f=1", "display_name": "MyJustWorking", "link": "https://stackoverflow.com/users/5094883/myjustworking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 31300719, "answer_count": 1, "score": 0, "last_activity_date": 1436561037, "creation_date": 1436379502, "last_edit_date": 1436561037, "question_id": 31300577, "link": "https://stackoverflow.com/questions/31300577/how-do-i-capture-multiple-lines-with-regexp", "title": "How do I capture multiple lines with regexp?", "body": "<p>This is my input string:</p>\n\n<pre><code>string MyS = \"program{anything}\";\n</code></pre>\n\n<p>I want to match everything within parenthesis so I used this regex:</p>\n\n<pre><code>regex MyR(\"program{(.*)}\");\n</code></pre>\n\n<p>matches was (what i need) =</p>\n\n<pre><code>program{anything}\nanything\n</code></pre>\n\n<p>it is true but when i change my string to </p>\n\n<pre><code>string Mys = \"program{\nanything line1\nanything line2\n}\";\n</code></pre>\n\n<p>with this regex I don't get what I hope for:</p>\n\n<pre><code>anything line1\nanything line2\n</code></pre>\n\n<p>That is, I want to capture everything in all lines.</p>\n\n<p>What regex should I use to get all of the things in <code>{}</code> in one matches element?</p>\n"}, {"tags": ["c", "function", "hash"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1436379188, "post_id": 31300430, "comment_id": 50591230, "body": "what is <code>health_monitor</code>?"}, {"owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436379245, "post_id": 31300430, "comment_id": 50591268, "body": "Health monitor is a structure. It has a structure variable disks_in_system, which is a hash table. The hash table is what I pass into the function that explores the directory."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1436379252, "post_id": 31300430, "comment_id": 50591271, "body": "<code>starbucks-&gt;disks_in_system-&gt;table = malloc(sizeof(linked_list));</code>  -&gt; <code>starbucks-&gt;disks_in_system-&gt;table = malloc(sizeof(linked_list*));</code>"}, {"owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436379358, "post_id": 31300430, "comment_id": 50591342, "body": "@Sourav - thank you, that&#39;s right! I fixed that, but the original program is not resolved."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1436379664, "post_id": 31300430, "comment_id": 50591504, "body": "malloc too small.  Suggest: <code>starbucks-&gt;disks_in_system-&gt;table = malloc(sizeof(linked_list)); starbucks-&gt;disks_in_system-&gt;size = 5;</code> --&gt; <code>starbucks-&gt;disks_in_system-&gt;size = 5; starbucks-&gt;disks_in_system-&gt;table = malloc(starbucks-&gt;disks_in_system-&gt;size  *  sizeof *(starbucks-&gt;disks_in_system-&gt;table));</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1436379930, "post_id": 31300430, "comment_id": 50591665, "body": "Do not use <code>_</code> as a prefix for names. This syntax is reserved for standard language/library names."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1436380226, "post_id": 31300430, "comment_id": 50591850, "body": "Passing a non <code>char*</code> pointer to <code>printf()</code> as a value for a <code>%s</code> conversion specifier invokes undefined bahaviour."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436381859, "post_id": 31300430, "comment_id": 50592869, "body": "always check (!=NULL) the returned value from malloc() and family of functions I.E. calloc() and realloc()"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1436382421, "post_id": 31300430, "comment_id": 50593218, "body": "in function <code>explore_current_directory()</code> you forget to <code>closedir(dp);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436381607, "post_id": 31301206, "comment_id": 50592703, "body": "Shouldn&#39;t that be <code>starbucks-&gt;disks_in_system-&gt;table = malloc(starbucks-&gt;disks_in_system-&gt;size* sizeof(linked_list *) );</code>, since we&#39;re allocating an array of pointers?"}], "tags": [], "owner": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "is_accepted": true, "score": 1, "last_activity_date": 1436383474, "last_edit_date": 1436383474, "creation_date": 1436381349, "answer_id": 31301206, "question_id": 31300430, "link": "https://stackoverflow.com/questions/31300430/data-loss-when-passing-a-hash-table-into-a-function/31301206#31301206", "title": "Data loss when passing a hash table into a function", "body": "<p>You're trying to create five linked lists, but you're only <code>malloc</code>ing enough memory for one:</p>\n\n<pre><code>starbucks-&gt;disks_in_system-&gt;table = malloc(sizeof(linked_list*));\n</code></pre>\n\n<p>Change that line to</p>\n\n<pre><code>starbucks-&gt;disks_in_system-&gt;table = malloc(5 * sizeof(linked_list*));\n</code></pre>\n\n<p>Or, better, rearrange the initialization code as chux suggested in the comments to remove one of the magic numbers:</p>\n\n<pre><code>starbucks-&gt;disks_in_system-&gt;size = 5;\nstarbucks-&gt;disks_in_system-&gt;table = malloc ( starbucks-&gt;disks_in_system-&gt;size\n                                           * sizeof(linked_list*) );\n</code></pre>\n"}], "owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 31301206, "answer_count": 1, "score": 0, "last_activity_date": 1436383474, "creation_date": 1436379067, "last_edit_date": 1436380937, "question_id": 31300430, "link": "https://stackoverflow.com/questions/31300430/data-loss-when-passing-a-hash-table-into-a-function", "title": "Data loss when passing a hash table into a function", "body": "<p>I created a hash table:</p>\n\n<pre><code>typedef struct _linked_list_{\n    struct _linked_list_ *next;\n    char *disk_name;\n    struct disk *disk_object;\n} linked_list;\n\n\ntypedef struct _hash_table_ {\n    int size;\n    linked_list **table;\n} hash_table;\n</code></pre>\n\n<p>Where each entry of the hash table is a linked list. Then, in main I create an instance of a structure which has a structure variable that is a hash table:</p>\n\n<pre><code>int main() {\n    health_monitor *starbucks;\n    starbucks = malloc(sizeof(health_monitor));\n    starbucks-&gt;id = \"92838382\";\n\n    // THIS IS THE HASH TABLE!\n    starbucks-&gt;disks_in_system = malloc(sizeof(hash_table));\n    starbucks-&gt;disks_in_system-&gt;table = malloc(sizeof(linked_list));\n    starbucks-&gt;disks_in_system-&gt;size = 5;\n\n    //initializing the first 5 rows to be NULL\n\n    starbucks-&gt;disks_in_system-&gt;table[0] = NULL;\n    starbucks-&gt;disks_in_system-&gt;table[1] = NULL;\n    starbucks-&gt;disks_in_system-&gt;table[2] = NULL;\n    starbucks-&gt;disks_in_system-&gt;table[3] = NULL;\n    starbucks-&gt;disks_in_system-&gt;table[4] = NULL;\n\n    //Making sure that the table rows were created correctly and contain NULL\n    int counter;\n    for(counter=0; counter &lt;5; counter++){\n        printf(\"The table row is: %s\\n\", starbucks-&gt;disks_in_system-&gt;table[counter]);\n    }\n    //passing the hash table into explore_current_directory function\n    explore_current_directory(starbucks-&gt;disks_in_system, data_directory);       \n    return 0;\n}\n</code></pre>\n\n<p>The print statement inside the for loop that prints the table rows gives this output:</p>\n\n<pre><code>The table is: (null)\nThe table is: (null)\nThe table is: (null)\nThe table is: (null)\nThe table is: (null)\n</code></pre>\n\n<p>However, Once I pass the hash table into the function, only the first three rows seem to exist. Here is the function:</p>\n\n<pre><code>int explore_current_directory(hash_table* hm, char* directory){\n    DIR *dp;\n    struct dirent *ep;\n    char* current_directory;\n    dp = opendir(directory);\n\n    int counter;\n    for(counter=0; counter &lt;5; counter++){\n        printf(\"The table row is: %s\\n\", hm-&gt;table[counter]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I get this output from the print statement inside the for loop above:</p>\n\n<pre><code>The table row is: (null)\nThe table row is: (null)\nThe table row is: (null)\n</code></pre>\n\n<p>The last two rows seem like they do not exist. </p>\n\n<p>I used to get a segmentation fault right after that, but I do not anymore (I do not know why.)</p>\n\n<p>And the thing is that when I change the above function to this:</p>\n\n<pre><code>int explore_current_directory(hash_table* hm, char* directory){\n    int counter;\n    for(counter=0; counter &lt;5; counter++){\n        printf(\"The table row is: %s\\n\", hm-&gt;table[counter]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It works just fine.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1436396054, "post_id": 31300357, "comment_id": 50600082, "body": "why are you calling <code>free(word_list)</code> immediately after you (try to) allocate it?"}], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 5042567, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VFvAi.jpg?s=128&g=1", "display_name": "Flower", "link": "https://stackoverflow.com/users/5042567/flower"}, "edited": false, "score": 0, "creation_date": 1436379686, "post_id": 31300421, "comment_id": 50591516, "body": "I am just suppose to use malloc"}, {"owner": {"reputation": 249, "user_id": 5042567, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VFvAi.jpg?s=128&g=1", "display_name": "Flower", "link": "https://stackoverflow.com/users/5042567/flower"}, "edited": false, "score": 0, "creation_date": 1436380103, "post_id": 31300421, "comment_id": 50591788, "body": "malloc is now causing an error. invalid conversion from void* to char*"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 249, "user_id": 5042567, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VFvAi.jpg?s=128&g=1", "display_name": "Flower", "link": "https://stackoverflow.com/users/5042567/flower"}, "edited": false, "score": 1, "creation_date": 1436396129, "post_id": 31300421, "comment_id": 50600106, "body": "@Flower that error indicates you are using a C++ compiler instead of a C compiler  (the two languages are different)"}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1436379026, "creation_date": 1436379026, "answer_id": 31300421, "question_id": 31300357, "link": "https://stackoverflow.com/questions/31300357/using-an-array-of-pointers/31300421#31300421", "title": "Using an array of pointers?", "body": "<p>You declared <code>word_list</code> as a character pointer, not an array of same.  If your <code>malloc</code> is intended to allocate space for one of the elements of an array, you need to create the array first.  (The line with the error looks like you are <em>declaring</em> a variable.)</p>\n\n<p>If you know how big this array needs to be, you should be all set.  But if you don't, you might want to look into how <code>realloc</code> works.</p>\n"}, {"tags": [], "owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "is_accepted": false, "score": 2, "last_activity_date": 1436379994, "last_edit_date": 1436379994, "creation_date": 1436379587, "answer_id": 31300611, "question_id": 31300357, "link": "https://stackoverflow.com/questions/31300357/using-an-array-of-pointers/31300611#31300611", "title": "Using an array of pointers?", "body": "<p>So if I am understanding correctly, you want an array of strings? (note this is just an array of pointers and you still need to malloc the space for each individual string)</p>\n\n<p>So </p>\n\n<pre><code>char *word_list[NUM_STRINGS];\nword_list[i] = malloc(strlen(word) + 1);\nstrcpy(word_list[i], word);\n</code></pre>\n\n<p>But it looks like all elements in your array will be the same length? In which case you can just use something like this, without the need for malloc or free:</p>\n\n<pre><code>char word_list[NUM_STRINGS][STRING_LENGTH+1];\nstrcpy(word_list[i], word);\n</code></pre>\n\n<p>If you're looking to have it loop indefinitely while their is user input then you won't be able to accomplish this easily with an array (only if you care about them going over the NUM_STRINGS limit). A linked list would work better in my opinion.</p>\n"}], "owner": {"reputation": 249, "user_id": 5042567, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VFvAi.jpg?s=128&g=1", "display_name": "Flower", "link": "https://stackoverflow.com/users/5042567/flower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1436383285, "creation_date": 1436378839, "last_edit_date": 1436383285, "question_id": 31300357, "link": "https://stackoverflow.com/questions/31300357/using-an-array-of-pointers", "title": "Using an array of pointers?", "body": "<p>When I compile this code as it is, I get this error:</p>\n\n<pre><code>variable-sized object 'word_list' may not be initialized\n   char *word_list[i] = malloc(sizeof(char) * STRING_LENGTH );\n</code></pre>\n\n<p>I know on line 13 my variable <code>word_list</code> is just a pointer to characters and that it is causing the problem. I have to use an array of pointers instead of it but I am not sure how to do this properly. The <code>word_list</code> variable is supposed to be an array that is to have strings copied into it using <code>strcpy</code>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#define STRING_LENGTH 20\n#define MAX 30\n\nint read_string(char string[], int n);\nint compare(const void*a, const void*b);\n\nint main(){\nint i;\n\nchar* word_list;\nchar word[STRING_LENGTH + 1];\n\nfor (i = 0; ; i++){\n    printf(\"\\nEnter a word.\\n\");\n    read_string(word, STRING_LENGTH);\n\n    if (word[0] == '\\0')\n        break;\n    char *word_list[i] = malloc(sizeof(char) * STRING_LENGTH );\n    free(word_list);\n    strcpy(word_list[i], word);\n    }\n\n    int length = sizeof(word_list)/sizeof(char*);\n\n    int j;\n    for (j = 0; word_list[j] != '\\0'; j++)\n    printf(\"%s\\n\", word_list[j]);\n\n    qsort(word,length, sizeof(char*), compare);\n    for (j = 0; word_list[j] != '\\0'; j++)\n    printf(\"%s\\n\", word_list[j]);\n\n    return 0;\n    }\n\n\n\n\n    int compare(const void*element1, const void *element2){\n    const char *string1 = *(const char**)element1;\n    const char *string2 = *(const char**)element2;\n\n    return strcmp(string1,string2);\n    }\n\n    int read_string(char string[], int n){\n    int ch, i = 0;\n\n    while ((ch = getchar()) != '\\n')\n\n    if (i &lt; n)\n        string[i++] = ch;\n    string[i] = '\\0';\n\n    return i;\n    }\n</code></pre>\n"}, {"tags": ["c", "unix", "ipc", "semaphore"], "comments": [{"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1436384277, "post_id": 31299962, "comment_id": 50594371, "body": "You abstracted some of your code, what is sem_op[0]? you do not define it anywhere... Anyhow, the use of sem_op, providing it is a semop, is wrong. I suggest you read <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/semop.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/7908799/xsh/semop.html</a> In a nutshell - sem_op means the operation type to be run on the array of semaphores atomically"}, {"owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1436420712, "post_id": 31299962, "comment_id": 50606748, "body": "@IshayPeled Attached the code"}], "answers": [{"tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": true, "score": 1, "last_activity_date": 1436452872, "creation_date": 1436452872, "answer_id": 31320796, "question_id": 31299962, "link": "https://stackoverflow.com/questions/31299962/difference-between-semaphore-count-and-operation-value-which-is-passed-during-se/31320796#31320796", "title": "Difference between semaphore count and operation value which is passed during semop call", "body": "<p>Query 1:</p>\n\n<p>The sem_op can be more than one. In that case, that number is added to the permits the semaphore has</p>\n\n<p>Query 2:</p>\n\n<p>You assumption on query 1 is wrong. It is not the absolute number of permits but the addition to the number of those. The meaning of 'semaphore permit' is how many entities can hold that semaphore simultaneously. This means for example, that if you have 5 threads competing on a critical section protected by a semaphore with 3 permits, only 3 will be able to get in simultaneously.</p>\n\n<p>From the manual:</p>\n\n<pre><code>The variable sem_op specifies one of three semaphore operations:\n\n    1. If sem_op is a negative integer and the calling process has alter permission, one of the following shall occur:\n\n        *  If  semval(see &lt;sys/sem.h&gt;) is greater than or equal to the absolute value of sem_op, the absolute value of sem_op is subtracted from sem\u2010\n           val.  Also, if (sem_flg &amp;SEM_UNDO) is non-zero, the absolute value of sem_op shall be added to the semadj value of the calling process for\n           the specified semaphore.\n\n        *  If semval is less than the absolute value of sem_op and (sem_flg &amp;IPC_NOWAIT) is non-zero, semop() shall return immediately.\n\n        *  If  semval  is  less than the absolute value of sem_op and (sem_flg &amp;IPC_NOWAIT) is 0, semop() shall increment the semncnt associated with\n           the specified semaphore and suspend execution of the calling thread until one of the following conditions occurs:\n\n           --  The value of semval becomes greater than or equal to the absolute value of sem_op.  When this occurs, the value of semncnt  associated\n               with  the  specified  semaphore  shall  be  decremented, the absolute value of sem_op shall be subtracted from semval and, if (sem_flg\n               &amp;SEM_UNDO) is non-zero, the absolute value of sem_op shall be added to the semadj value of the calling process for the specified sema\u2010\n               phore.\n\n           --  The  semid for which the calling thread is awaiting action is removed from the system. When this occurs, errno shall be set to [EIDRM]\n               and \u22121 shall be returned.\n\n           --  The calling thread receives a signal that is to be caught. When this occurs, the value of semncnt associated with the specified  sema\u2010\n               phore shall be decremented, and the calling thread shall resume execution in the manner prescribed in sigaction().\n\n    2. If  sem_op  is  a positive integer and the calling process has alter permission, the value of sem_op shall be added to semval and, if (sem_flg\n       &amp;SEM_UNDO) is non-zero, the value of sem_op shall be subtracted from the semadj value of the calling process for the specified semaphore.\n\n    3. If sem_op is 0 and the calling process has read permission, one of the following shall occur:\n\n        *  If semval is 0, semop() shall return immediately.\n\n        *  If semval is non-zero and (sem_flg &amp;IPC_NOWAIT) is non-zero, semop() shall return immediately.\n\n        *  If semval is non-zero and (sem_flg &amp;IPC_NOWAIT) is 0, semop() shall increment the semzcnt associated with the specified semaphore and sus\u2010\n           pend execution of the calling thread until one of the following occurs:\n\n           --  The value of semval becomes 0, at which time the value of semzcnt associated with the specified semaphore shall be decremented.\n\n           --  The  semid for which the calling thread is awaiting action is removed from the system. When this occurs, errno shall be set to [EIDRM]\n               and \u22121 shall be returned.\n\n           --  The calling thread receives a signal that is to be caught. When this occurs, the value of semzcnt associated with the specified  sema\u2010\n               phore shall be decremented, and the calling thread shall resume execution in the manner prescribed in sigaction().\n\n   Upon successful completion, the value of sempid for each semaphore specified in the array pointed to by sops shall be set to the process ID of the\n   calling process. Also, the sem_otime timestamp shall be set to the current time, as described in Section 2.7.1, IPC General Description.\n</code></pre>\n"}], "owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 31320796, "answer_count": 1, "score": 0, "last_activity_date": 1436452872, "creation_date": 1436377572, "last_edit_date": 1436420607, "question_id": 31299962, "link": "https://stackoverflow.com/questions/31299962/difference-between-semaphore-count-and-operation-value-which-is-passed-during-se", "title": "Difference between semaphore count and operation value which is passed during semop call", "body": "<p>On <a href=\"http://beej.us/guide/bgipc/output/html/multipage/semaphores.html\" rel=\"nofollow\">Beej Guide</a>, There is a statment as follows</p>\n\n<p>\"When you first create some semaphores, they're all uninitialized; it takes another call to mark them as free.\"</p>\n\n<p>Intially i created with semaphore count as 5.</p>\n\n<pre><code>#define SEM_COUNT 5\nsemget(sem_key,SEM_COUNT,IPC_CREAT|IPC_EXCL|0600);\n</code></pre>\n\n<p>Now as per the above statement from beej guide, i have to intiaize the 5 semaphores to mark them as free by calling semop.</p>\n\n<p>To indicate semaphore as free am passing the sem_op as 1</p>\n\n<pre><code>sem_op[0].sem_op=1;\n</code></pre>\n\n<p>Query 1. Can the sem_op value be more than one? For example If it passed as 3, then whats does that mean?</p>\n\n<p>My understanding for query 1 : It is the number of resources(thread or process) that can access the critical section or shared resource at a time.</p>\n\n<p>Query 2. If my understanding about query 1 is correct, then semaphore count which i am passing for semget is the individual semaphores that can be used for sevaral critical sections. If i created semaphore count as 5. Then it means that i can acess the 5 critical sections. The simentaneous resources that can access this 5 critical sections parrallely will be said during semop call. Is my understanding correct?</p>\n\n<p>Note: I am using the implementation done for system V(sys/sem.h)</p>\n\n<p>Reason behind this queries : I confused myself like whether sem_op value as number of semaphores free (or) number of resources in individual semaphores is free.</p>\n\n<p>SAMPLE CODE</p>\n\n<pre><code>#include &lt;sys/sem.h&gt;\n#include &lt;cstdio&gt;\n#include &lt;unistd.h&gt;\n\n#define SEMAPHORE_COUNT 1\n\nvoid semaphore_wait(int sem_id);\nvoid semaphore_signal(int sem_id);\n\n\nint main()\n{\n   /* 1.Getting the semaphore Key */\n\n   key_t sem_key=ftok(\"key.txt\",'S');\n\n   if(0 &gt;= sem_key)\n   {\n      perror(\"Error in getting key: \");\n   }\n   else\n   {\n      printf(\"\\nSucessfully generated semaphore key. Value %d \",sem_key);\n   }\n\n   /* 2.Attaching the key to semaphore */\n\n   int sem_id = semget(sem_key,SEMAPHORE_COUNT,0);\n\n   struct sembuf sem_inp;\n   sem_inp.sem_op=1; /*Semaphore  operation: 1:Increment -1:Decrement: Query1: Can this value can be more than 1? what does that means if greater than 1? */\n   sem_inp.sem_num=0;\n   sem_inp.sem_flg=SEM_UNDO;\n\n   semop(sem_id,&amp;sem_inp,1);\n   /* 3.Utilizing the semaphore on critical sections */\n\n   printf(\"\\n Waiting for semaphore...\");\n   semaphore_wait(sem_id);\n   printf(\"\\n Acquired semaphore...\");\n   sleep(4);\n   semaphore_signal(sem_id);\n   printf(\"\\n Released semaphore...\");\n\n\n   return 0;\n}\n\n\nvoid semaphore_wait(int sem_id)\n{\n   struct sembuf sem_inp;\n   sem_inp.sem_op=-1; /*Semaphore  operation: 1:Increment -1:Decrement */\n   sem_inp.sem_num=0;\n   sem_inp.sem_flg=SEM_UNDO;\n\n   semop(sem_id,&amp;sem_inp,1);\n\n}\n\nvoid semaphore_signal(int sem_id)\n{\n   struct sembuf sem_inp;\n   sem_inp.sem_op=1; /*Semaphore  operation: 1:Increment -1:Decrement */\n   sem_inp.sem_num=0;\n   sem_inp.sem_flg=SEM_UNDO;\n\n   semop(sem_id,&amp;sem_inp,1);\n}\n</code></pre>\n"}, {"tags": ["c", "floating-point", "printf", "floating-point-precision", "format-string"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1436377045, "post_id": 31299590, "comment_id": 50589861, "body": "Another dupe: <a href=\"http://stackoverflow.com/q/26844907/694576\">stackoverflow.com/q/26844907/694576</a>"}, {"owner": {"reputation": 38, "user_id": 4766944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55bb59822e790052e4712ec49f15d985?s=128&d=identicon&r=PG&f=1", "display_name": "ike", "link": "https://stackoverflow.com/users/4766944/ike"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1436377285, "post_id": 31299590, "comment_id": 50590007, "body": "Apparently my search-fu failed."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1436377379, "post_id": 31299590, "comment_id": 50590060, "body": "C is no secret science, so it&#39;s in <code>printf()</code>&#39;s documentation. I know the man-page is &quot;huge&quot; ..."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1436377056, "last_edit_date": 1436377056, "creation_date": 1436376571, "answer_id": 31299631, "question_id": 31299590, "link": "https://stackoverflow.com/questions/31299590/adjust-the-decimal-places-in-a-format-string-programatically-and-safely/31299631#31299631", "title": "Adjust the decimal places in a format string programatically and safely", "body": "<p>Yes, you're in luck. You need to make use of the precision field in the format string. In that, you can provide a <code>.*</code> notation and supply the corresponding integer argument holding the  value of the precision.</p>\n\n<p>You can use the following pattern to make this happen, example with <code>printf()</code>.</p>\n\n<pre><code> printf(\"%.*g\", int_precision, decimal_to_print)\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 4766944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55bb59822e790052e4712ec49f15d985?s=128&d=identicon&r=PG&f=1", "display_name": "ike", "link": "https://stackoverflow.com/users/4766944/ike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1436376988, "accepted_answer_id": 31299631, "answer_count": 1, "score": 0, "last_activity_date": 1436377373, "creation_date": 1436376453, "last_edit_date": 1436377373, "question_id": 31299590, "link": "https://stackoverflow.com/questions/31299590/adjust-the-decimal-places-in-a-format-string-programatically-and-safely", "closed_reason": "Duplicate", "title": "Adjust the decimal places in a format string programatically and safely", "body": "<p>I am trying to figure out the best way to handle changing a format string on the fly in C without opening an uncontrolled format string vulnerability.</p>\n\n<p>I have data in a struct which contains the floating point number and an unsigned integer number which corresponds to the number of significant figures for printing.</p>\n\n<p>I would like to use the integer to generate the precision for format strings on the fly so that:</p>\n\n<p><code>3</code> generates <code>\"%.3g\"</code></p>\n\n<p><code>21</code> generates <code>\"%.21g\"</code></p>\n\n<p>Is there a safe way to do this without opening my code up to exploits?</p>\n"}, {"tags": ["c", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 1, "last_activity_date": 1436376289, "creation_date": 1436376289, "answer_id": 31299528, "question_id": 31299482, "link": "https://stackoverflow.com/questions/31299482/xilinx-arm-compiler-doesnt-complain-about-void-pointer-arithmetic-and-it-produ/31299528#31299528", "title": "Xilinx ARM compiler doesn&#39;t complain about void pointer arithmetic, and it produces correct results. Why?", "body": "<p><code>gcc</code> has an <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.5.1/gcc/C-Extensions.html#C-Extensions\" rel=\"nofollow\">extension</a> that allows void pointer arithmetic, see <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html\" rel=\"nofollow\">the documentation: Arithmetic on void- and Function-Pointers</a>:</p>\n\n<blockquote>\n  <p>In GNU C, addition and subtraction operations are supported on\n  pointers to void and on pointers to functions. This is done by\n  treating the size of a void or of a function as 1.</p>\n  \n  <p>A consequence of this is that sizeof is also allowed on void and on\n  function types, and returns 1.</p>\n  \n  <p>The option -Wpointer-arith requests a warning if these extensions are\n  used.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1436376687, "post_id": 31299591, "comment_id": 50589637, "body": "<a href=\"https://github.com/dspinellis/unix-history-repo/blob/Research-V6/usr/source/c/c00.c#L25-L54\" rel=\"nofollow noreferrer\">I don&#39;t see any <code>void</code> keyword.</a>"}], "tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1436376454, "creation_date": 1436376454, "answer_id": 31299591, "question_id": 31299482, "link": "https://stackoverflow.com/questions/31299482/xilinx-arm-compiler-doesnt-complain-about-void-pointer-arithmetic-and-it-produ/31299591#31299591", "title": "Xilinx ARM compiler doesn&#39;t complain about void pointer arithmetic, and it produces correct results. Why?", "body": "<p>The original C compiler (Unix v 6, c. 1975) worked that way too.  It is ignoring the <code>void</code> and treating the pointer as though it is just a number.  Or&mdash;another way to look at it&mdash;is that it regards a <code>void *</code> as the same as a <code>char *</code>.</p>\n\n<p>The original c compiler also did higher level pointer object stuff correctly.  It would <em>have to</em> so that indexing <code>struct {int a, b;} mystruct [20]</code> worked as expected.</p>\n"}], "owner": {"reputation": 2697, "user_id": 1427975, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ajRJN.jpg?s=128&g=1", "display_name": "stanri", "link": "https://stackoverflow.com/users/1427975/stanri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "accepted_answer_id": 31299528, "answer_count": 2, "score": 2, "last_activity_date": 1436376454, "creation_date": 1436376136, "question_id": 31299482, "link": "https://stackoverflow.com/questions/31299482/xilinx-arm-compiler-doesnt-complain-about-void-pointer-arithmetic-and-it-produ", "title": "Xilinx ARM compiler doesn&#39;t complain about void pointer arithmetic, and it produces correct results. Why?", "body": "<p>I have used the following code to read from an address space in Xilinx ARM Linux using their compiler for the past year, and it has worked (as in, compiled with no errors and produced the expected results): </p>\n\n<pre><code>void *ctl_ptr = mmap(NULL,Length , PROT_READ|PROT_WRITE, MAP_SHARED, fd, ctl_addr);\n\n\n// Read Status\nint status = *((unsigned *)(ctl_ptr + C_FIFO_ISR));\n\n// Clear Interrupts\n*((unsigned *)(ctl_ptr + C_FIFO_ISR)) = 0xffffff;\n</code></pre>\n\n<p>A coworker mentioned today that this code shouldn't even work because it's void pointer arithmetic. Now I'm baffled as to exactly why it's been working all this time? </p>\n\n<p>Is this an example of void pointer arithmatic (which it looks like it is), and if so, why does it work?</p>\n\n<hr>\n\n<p>MORE INFO:</p>\n\n<p>I've been using Xilinx SDK 2014.1 and this is the compile result for a file containing the above:</p>\n\n<pre><code>19:09:55 **** Auto Build of configuration Debug for project ZynqPSPLTest ****\nmake all \nBuilding file: ../src/ZynqPSPLTest.c\nInvoking: ARM Linux gcc compiler\narm-xilinx-linux-gnueabi-gcc -Wall -O0 -g3 -c -fmessage-length=0 -MMD -MP -MF\"src/ZynqPSPLTest.d\" -MT\"src/ZynqPSPLTest.d\" -o \"src/ZynqPSPLTest.o\" \"../src/ZynqPSPLTest.c\"\nFinished building: ../src/ZynqPSPLTest.c\n\nBuilding target: ZynqPSPLTest.elf\nInvoking: ARM Linux gcc linker\narm-xilinx-linux-gnueabi-gcc  -o \"ZynqPSPLTest.elf\"  ./src/ZynqPSPLTest.o   \nFinished building target: ZynqPSPLTest.elf\n\nmake --no-print-directory post-build\nCopy Elf to share\ncp /media/work/stacey/zynq_eval/EvalDebug/sdk/ZynqPSPLTest/Debug/ZynqPSPLTest.elf /home/stacey/build_share\n\nInvoking: ARM Linux Print Size\narm-xilinx-linux-gnueabi-size ZynqPSPLTest.elf  |tee \"ZynqPSPLTest.elf.size\"\n   text    data     bss     dec     hex filename\n  11339     328       4   11671    2d97 ZynqPSPLTest.elf\nFinished building: ZynqPSPLTest.elf.size\n\n\n19:09:56 Build Finished (took 720ms)\n</code></pre>\n\n<p>And here's the version output:</p>\n\n<pre><code>[stacey@centos6 bin]$ ./arm-xilinx-linux-gnueabi-gcc -v\nUsing built-in specs.\nCOLLECT_GCC=./arm-xilinx-linux-gnueabi-gcc\nCOLLECT_LTO_WRAPPER=/media/work/Xilinx/SDK/2014.1/gnu/arm/lin/bin/../libexec/gcc/arm-xilinx-linux-gnueabi/4.8.1/lto-wrapper\nTarget: arm-xilinx-linux-gnueabi\nConfigured with: /scratch/janisjo/build7/2013.11-xilinx-linux-respin1/src/gcc-4.8-2013.11/configure --build=i686-pc-linux-gnu --host=i686-pc-linux-gnu --target=arm-xilinx-linux-gnueabi --enable-threads --disable-libmudflap --disable-libssp --disable-libstdcxx-pch --with-arch=armv5te --with-arch=armv7-a --with-cpu=cortex-a9 --with-float=softfp --with-fpu=neon-fp16 --disable-multilib --with-gnu-as --with-gnu-ld --with-specs='%{save-temps: -fverbose-asm} %{funwind-tables|fno-unwind-tables|mabi=*|ffreestanding|nostdlib:;:-funwind-tables} -D__CS_SOURCERYGXX_MAJ__=2013 -D__CS_SOURCERYGXX_MIN__=11 -D__CS_SOURCERYGXX_REV__=53' --enable-languages=c,c++ --enable-shared --enable-lto --enable-symvers=gnu --enable-__cxa_atexit --with-pkgversion='Sourcery CodeBench Lite 2013.11-53' --with-bugurl=https://sourcery.mentor.com/GNUToolchain/ --disable-nls --prefix=/opt/codesourcery --with-sysroot=/opt/codesourcery/arm-xilinx-linux-gnueabi/libc --with-build-sysroot=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/install/opt/codesourcery/arm-xilinx-linux-gnueabi/libc --with-gmp=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/obj/pkg-2013.11-53-arm-xilinx-linux-gnueabi/xilinx-2013.11-53-arm-xilinx-linux-gnueabi.extras/host-libs-i686-pc-linux-gnu/usr --with-mpfr=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/obj/pkg-2013.11-53-arm-xilinx-linux-gnueabi/xilinx-2013.11-53-arm-xilinx-linux-gnueabi.extras/host-libs-i686-pc-linux-gnu/usr --with-mpc=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/obj/pkg-2013.11-53-arm-xilinx-linux-gnueabi/xilinx-2013.11-53-arm-xilinx-linux-gnueabi.extras/host-libs-i686-pc-linux-gnu/usr --with-isl=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/obj/pkg-2013.11-53-arm-xilinx-linux-gnueabi/xilinx-2013.11-53-arm-xilinx-linux-gnueabi.extras/host-libs-i686-pc-linux-gnu/usr --with-cloog=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/obj/pkg-2013.11-53-arm-xilinx-linux-gnueabi/xilinx-2013.11-53-arm-xilinx-linux-gnueabi.extras/host-libs-i686-pc-linux-gnu/usr --disable-libgomp --disable-libitm --disable-libssp --enable-poison-system-directories --with-build-time-tools=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/install/opt/codesourcery/arm-xilinx-linux-gnueabi/bin --with-build-time-tools=/scratch/janisjo/build7/2013.11-xilinx-linux-respin1/install/opt/codesourcery/arm-xilinx-linux-gnueabi/bin SED=sed\nThread model: posix\ngcc version 4.8.1 (Sourcery CodeBench Lite 2013.11-53) \n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "strtok"], "comments": [{"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 0, "creation_date": 1436376629, "post_id": 31299474, "comment_id": 50589601, "body": "Please post compilable code and show the definition of eTable."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1436376717, "post_id": 31299474, "comment_id": 50589661, "body": "You&#39;re reusing <code>currentLineStr</code> for all strings, overwriting its contents by <code>fgets()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 1330807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca003f8bb5d8182388e723ac2ac32311?s=128&d=identicon&r=PG", "display_name": "J2R5M3", "link": "https://stackoverflow.com/users/1330807/j2r5m3"}, "edited": false, "score": 0, "creation_date": 1436376743, "post_id": 31299533, "comment_id": 50589675, "body": "So if I understand correctly assign memory to <code>str</code> using         <code>malloc(sizeof tokPtr )</code> ? then copy value of tokPtr using              <code>strcpy(str, tokPtr)</code> ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 175, "user_id": 1330807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca003f8bb5d8182388e723ac2ac32311?s=128&d=identicon&r=PG", "display_name": "J2R5M3", "link": "https://stackoverflow.com/users/1330807/j2r5m3"}, "edited": false, "score": 0, "creation_date": 1436376789, "post_id": 31299533, "comment_id": 50589702, "body": "@J2R5M3 not <code>sizeof</code>, use <code>malloc( strlen(tokPtr) + 1)</code>"}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 0, "creation_date": 1436442904, "post_id": 31299533, "comment_id": 50620692, "body": "This answer is misleading because it suggests that every <code>str</code> points at the same token, but the OP&#39;s code doesn&#39;t do that. strtok returns pointers into the string you gave it, but it won&#39;t return the same pointer twice for a particular input."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1436376302, "creation_date": 1436376302, "answer_id": 31299533, "question_id": 31299474, "link": "https://stackoverflow.com/questions/31299474/assigning-pointer-from-strtok-to-pointer-in-2d-array-of-structs-all-entries-shou/31299533#31299533", "title": "Assigning pointer from strtok to pointer in 2d array of structs all entries should be unique but print out as identical", "body": "<p>In your code, all the <code>str</code>s are essentially working as a <em>placeholder</em> for the <code>tokPtr</code>. All of them point to only <code>tokPtr</code>. Now, after finishing the <code>while()</code> loop, the latest value held by <code>tokPtr</code> will also be ponteed by <em>all</em> the <code>str</code>s.</p>\n\n<p>To avoid, you need to</p>\n\n<ol>\n<li>Allocate memory to each <code>str</code>, maybe using <code>malloc()</code>.</li>\n<li>Use <code>strcpy()</code> to <em>copy</em> the current value of <code>tokPtr</code> into corresponding <code>str</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "is_accepted": false, "score": 0, "last_activity_date": 1436443048, "last_edit_date": 1436443048, "creation_date": 1436442315, "answer_id": 31316485, "question_id": 31299474, "link": "https://stackoverflow.com/questions/31299474/assigning-pointer-from-strtok-to-pointer-in-2d-array-of-structs-all-entries-shou/31316485#31316485", "title": "Assigning pointer from strtok to pointer in 2d array of structs all entries should be unique but print out as identical", "body": "<p>As EOF wrote in a comment, you reuse the buffer <code>currentLineStr</code>. Each time you call <code>fgets</code>, you're overwriting the storage used for <em>all the previous lines</em>, including the memory pointed to by every <code>str</code>. This is because <code>strtok</code> returns pointers into the string that you first gave it.</p>\n\n<p>Sourav Ghosh's solution works because it copies each token from the shared buffer as it is encountered (returning a pointer to the copy). Another solution that would also work is to <code>malloc()</code> the space for <code>currentLineStr</code> inside the loop where you call <code>fgets()</code>.</p>\n\n<p>As an aside, I recommend that you don't do this:</p>\n\n<pre><code>typedef struct Entry {...} Entry;\n</code></pre>\n\n<p>C++ is another language. Either don't use the typedef and call it \"struct Entry\", or typedef it without a struct tag:</p>\n\n<pre><code>typedef struct {...} Entry;\n</code></pre>\n\n<p>There is a convention in the C standard library that typedef names end in _t, so you could also do something like this (or choose a naming convention that makes sense to you):</p>\n\n<pre><code>typedef struct Entry {...} Entry_t;\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 1330807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca003f8bb5d8182388e723ac2ac32311?s=128&d=identicon&r=PG", "display_name": "J2R5M3", "link": "https://stackoverflow.com/users/1330807/j2r5m3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 31299533, "answer_count": 2, "score": 2, "last_activity_date": 1436443048, "creation_date": 1436376122, "last_edit_date": 1436377629, "question_id": 31299474, "link": "https://stackoverflow.com/questions/31299474/assigning-pointer-from-strtok-to-pointer-in-2d-array-of-structs-all-entries-shou", "title": "Assigning pointer from strtok to pointer in 2d array of structs all entries should be unique but print out as identical", "body": "<p>Assigning pointer from <code>strtok()</code> to  <code>ptr</code> contained within a struct. I have a 2d array of these structs that I want to use to store the data I'm trying to parse from a csv file.</p>\n\n<pre><code>typedef struct Entry \n{\n    char *str;\n} Entry; \n</code></pre>\n\n<p>I'm taking output from <code>fgets()</code> and sending it through my own function <code>TokenizeLine()</code> in order to split it up and assign it to the proper locations in the array. However every pointer in every entry of my 2d array (<code>etable</code>) ends up holding the same value.</p>\n\n<p>What is the issue with the below code?</p>\n\n<pre><code>fgets(currentLineStr, 8192, fileIn);\n\nwhile (currentLineStr[0] == '#')\n      fgets(currentLineStr, 8192, fileIn);\n\nTokenizeLine(currentLineStr, eTable, yIndex, x, y);\nyIndex++;\n\nwhile(fgets(currentLineStr, 8192, fileIn) != NULL)\n{\n      TokenizeLine(currentLineStr, eTable, yIndex, x, y);\n      yIndex++;\n} \n\n\n\nvoid TokenizeLine(int x; int y; char currentLineStr[], Entry eTable[x][y], int yIndex, int x, int y)\n{\n      char *tokPtr;\n      int xIndex = 0;\n\n      tokPtr = strtok(currentLineStr, \"|\");\n\n      while(tokPtr != NULL)\n      {\n            eTable[xIndex][yIndex].str = tokPtr;\n            tokPtr = strtok(NULL, \"|\");      \n            xIndex++;\n      } \n }\n</code></pre>\n"}, {"tags": ["c", "metis"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436375379, "post_id": 31299159, "comment_id": 50588859, "body": "Read about <b><a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a></b>, e.g. follow links about it <a href=\"http://programmers.stackexchange.com/a/289020/40065\">here</a>"}, {"owner": {"reputation": 1731, "user_id": 744629, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fba562b8f1c5b0a51d0149ecddc7fe9d?s=128&d=identicon&r=PG", "display_name": "user744629", "link": "https://stackoverflow.com/users/744629/user744629"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436375609, "post_id": 31299159, "comment_id": 50588983, "body": "Hope I will not have to dig in METIS code to find this kind of bug... (I guess the error is from me)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1436376551, "post_id": 31299159, "comment_id": 50589561, "body": "What about this: <i><code>&#47;&#47; Number of nodes in the mesh (15 points). #define NN 16</code></i> so if you have told functions there is one more than there actually is, that could be UB. Or is the comment just a typo?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1436377205, "post_id": 31299159, "comment_id": 50589962, "body": "If I read the METIS API doumentation correctly, then certain parameters may be NULL, such as options. However, there is a difference between passing a pointer to an object that is NULL or passing the value NULL. You pass a NULL object whereas METIS might expect the parameter value NULL. e.g.: <code>METIS_PartMeshNodal(&amp;ne, &amp;nn, ..options,..)</code> should be <code>METIS_PartMeshNodal(&amp;ne, &amp;nn, ..NULL,..)</code>."}, {"owner": {"reputation": 1731, "user_id": 744629, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fba562b8f1c5b0a51d0149ecddc7fe9d?s=128&d=identicon&r=PG", "display_name": "user744629", "link": "https://stackoverflow.com/users/744629/user744629"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1436382596, "post_id": 31299159, "comment_id": 50593328, "body": "@WeatherVane good catch, thanks! However the error was in the comment, I just fixed in <a href=\"https://github.com/dfroger/quickstart/commit/4d50b9fb9c2100ee67bce4cd75fa4d7ab86e7202\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1731, "user_id": 744629, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fba562b8f1c5b0a51d0149ecddc7fe9d?s=128&d=identicon&r=PG", "display_name": "user744629", "link": "https://stackoverflow.com/users/744629/user744629"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1436383223, "post_id": 31299159, "comment_id": 50593708, "body": "@PaulOgilvie Thanks for pointing this! I fixed it <a href=\"https://github.com/dfroger/quickstart/commit/a05c861119970fe72e02605652a5a92034dee5df\" rel=\"nofollow noreferrer\">here</a>, but I still get the same different values on GNU/Linux and OSX..."}, {"owner": {"reputation": 1731, "user_id": 744629, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fba562b8f1c5b0a51d0149ecddc7fe9d?s=128&d=identicon&r=PG", "display_name": "user744629", "link": "https://stackoverflow.com/users/744629/user744629"}, "edited": false, "score": 0, "creation_date": 1436386089, "post_id": 31299159, "comment_id": 50595426, "body": "I&#39;m going to debug with GDB and LLDB..."}], "answers": [{"tags": [], "owner": {"reputation": 1731, "user_id": 744629, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fba562b8f1c5b0a51d0149ecddc7fe9d?s=128&d=identicon&r=PG", "display_name": "user744629", "link": "https://stackoverflow.com/users/744629/user744629"}, "is_accepted": true, "score": 1, "last_activity_date": 1436873763, "last_edit_date": 1495540446, "creation_date": 1436873763, "answer_id": 31405479, "question_id": 31299159, "link": "https://stackoverflow.com/questions/31299159/metis-different-results-on-different-os/31405479#31405479", "title": "METIS: different results on different OS", "body": "<p><code>METIS</code> make use of pseudo-random numbers.</p>\n\n<p>The pseudo-random numbers are generated by <code>GKlib</code> functions. (<code>GKlib</code> is embedded inside <code>METIS</code> tarbarlls).</p>\n\n<p>By default, <code>GKlib</code> uses the <code>rand</code> function from the C standard library, which may generates different number on different platforms. (see: <a href=\"https://stackoverflow.com/questions/922358/consistent-pseudo-random-numbers-across-platforms\">Consistent pseudo-random numbers across platforms</a>).</p>\n\n<p>But <code>GKlib</code> can also be compiled with the flag <code>-DUSE_GKRAND</code>. Instead of using the <code>rand</code> function, it uses its own, which always give the same random numbers of different plateforms.</p>\n\n<p>Compiling with <code>-DUSE_GKRAND</code> the <code>C</code>\u00a0code in the function give the same results on my <code>GNU/Linux</code> and on my <code>OSX</code>:</p>\n\n<pre><code>objval: 18\nepart: 0 0 0 2 1 1 2 2 1 0 0 1 0 1 1 2 2 1 \nnpart: 0 0 0 0 2 0 1 1 2 1 2 1 2 2 1 1 \n8\n</code></pre>\n\n<p>I've used this conda <a href=\"https://github.com/dfroger/df-conda-recipe/tree/b9c254aeba04688ac65703f8feb5d5003565dc2d/metis-gkrand\" rel=\"nofollow noreferrer\">recipe</a> to build <code>METIS</code>.</p>\n"}], "owner": {"reputation": 1731, "user_id": 744629, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fba562b8f1c5b0a51d0149ecddc7fe9d?s=128&d=identicon&r=PG", "display_name": "user744629", "link": "https://stackoverflow.com/users/744629/user744629"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 31405479, "answer_count": 1, "score": 1, "last_activity_date": 1436873763, "creation_date": 1436375155, "last_edit_date": 1436383903, "question_id": 31299159, "link": "https://stackoverflow.com/questions/31299159/metis-different-results-on-different-os", "title": "METIS: different results on different OS", "body": "<p>This <a href=\"https://github.com/dfroger/quickstart/blob/a7a8f897de15e0081ddf3c54576ba66677d72ed2/metis/main.c\" rel=\"nofollow\">C program</a> calls <a href=\"http://glaros.dtc.umn.edu/gkhome/views/metis\" rel=\"nofollow\">METIS</a> to partition a mesh.</p>\n\n<p><strong>Edit:</strong> <a href=\"https://github.com/dfroger/quickstart/blob/a05c861119970fe72e02605652a5a92034dee5df/metis/main.c\" rel=\"nofollow\">New version</a> of the C program taking into account comments of WeatherVane and PaulOgilvie.</p>\n\n<p>On my <code>GNU/Linux</code> I get the results:</p>\n\n<pre><code>objval: 14\nepart: 0 0 0 0 0 1 2 2 1 0 0 1 2 2 1 2 2 1 \nnpart: 0 0 0 2 0 0 1 1 2 2 2 1 2 2 1 1 \n8\n</code></pre>\n\n<p>while on my <code>OSX</code> I get:</p>\n\n<pre><code>objval: 17\nepart: 0 1 1 0 1 0 2 2 0 1 1 1 2 2 1 2 2 0 \nnpart: 0 1 1 1 0 1 0 1 2 2 2 0 2 2 0 0 \n8\n</code></pre>\n\n<p>What causes the results to be different?</p>\n\n<p>How to fix it, I mean, always get the same results whatever the OS/architecture/compiler is?</p>\n\n<p>Note: <code>idx_t</code> is <code>int64_t</code>, which is <code>long</code> on my <code>GNU/Linux</code>, but <code>long long</code> on my <code>OSX</code>.</p>\n\n<h1>My GNU/Linux</h1>\n\n<pre><code>$ cat /etc/issue\nUbuntu 12.04.4 LTS \\n \\l\n\n$ gcc --version\ngcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3\nCopyright (C) 2011 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n$ uname -s -r -v -p -i -o\nLinux 3.5.0-45-generic #68~precise1-Ubuntu SMP Wed Dec 4 16:18:46 UTC 2013 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<h1>My OSX</h1>\n\n<pre><code>$ sw_vers \n\nProductName:    Mac OS X\nProductVersion: 10.9.5\nBuildVersion:   13F34\n\n$ gcc --version\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 5.0 (clang-500.2.79) (based on LLVM 3.3svn)\nTarget: x86_64-apple-darwin13.4.0\nThread model: posix\n\n$ uname -m -p -r -s -v\nDarwin 13.4.0 Darwin Kernel Version 13.4.0: Sun Aug 17 19:50:11 PDT 2014; root:xnu-2422.115.4~1/RELEASE_X86_64 x86_64 i386\n</code></pre>\n\n<h1>METIS installation</h1>\n\n<p><code>METIS</code> version is 5.1.0</p>\n\n<p>I have installed <code>METIS</code> with <a href=\"http://conda.pydata.org/miniconda.html\" rel=\"nofollow\">miniconda</a>.</p>\n\n<p>The packages are <a href=\"https://binstar.org/freshkiss3d/metis/files\" rel=\"nofollow\">here</a>\n(files <code>linux-64/metis-5.1.0-0.tar.bz2</code> and <code>osx-64/metis-5.1.0-2.tar.bz2</code>).</p>\n\n<p>These packages have been built with this <a href=\"https://github.com/dfroger/df-conda-recipe/tree/16cd577915d245d087550ec3c47bb75592a91d62/metis\" rel=\"nofollow\">recipe</a>.</p>\n"}, {"tags": ["c", "linux", "r", "gcc", "g++"], "answers": [{"tags": [], "owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "is_accepted": true, "score": 4, "last_activity_date": 1436375752, "creation_date": 1436375752, "answer_id": 31299356, "question_id": 31298990, "link": "https://stackoverflow.com/questions/31298990/error-installing-r-packages-linux-mint-17-1-error-c-preprocessor-g-e-fa/31299356#31299356", "title": "Error installing r packages (Linux Mint 17.1) &quot;error: C preprocessor &quot;g++ -E&quot; fails sanity check&quot;", "body": "<p>Try installing g++:\n<code>sudo apt-get install g++</code></p>\n\n<p>The GNU C Compiler (GCC) may be installed, but g++ isn't always installed by default.</p>\n\n<p>As for having to <code>sudo</code> into R Studio, that's the equivalent of having to type your password in when installing a program in OS X - it's just one of the little intricacies of Linux systems (incidentally, OS X is based on BSD Linux).  I imagine you won't necessarily need to use <code>sudo</code> when you're not installing a package though (not sure, haven't really used R Studio to be honest).</p>\n"}], "owner": {"reputation": 772, "user_id": 2950429, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8e1c7a869338f9157480ccb070ab8ffe?s=128&d=identicon&r=PG&f=1", "display_name": "Tom A", "link": "https://stackoverflow.com/users/2950429/tom-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 31299356, "answer_count": 1, "score": 1, "last_activity_date": 1436375752, "creation_date": 1436374593, "question_id": 31298990, "link": "https://stackoverflow.com/questions/31298990/error-installing-r-packages-linux-mint-17-1-error-c-preprocessor-g-e-fa", "title": "Error installing r packages (Linux Mint 17.1) &quot;error: C preprocessor &quot;g++ -E&quot; fails sanity check&quot;", "body": "<p>I have transfered to a Linux system (previous OSX user) and I am trying to get my R packages installed. </p>\n\n<p>The first issue I ran across was:</p>\n\n<pre><code>Warning in install.packages(\"stringi\") :\n  'lib = \"/usr/local/lib/R/site-library\"' is not writable\nWould you like to use a personal library instead?  (y/n)\n</code></pre>\n\n<p>but I got around that by launching R using:</p>\n\n<pre><code>$ sudo R\n</code></pre>\n\n<p>If someone has a more permanent solution to using 'sudo' (because I will be using RStudio in the future), I would be interested to know!</p>\n\n<p>But for now, I have an issue that I cannot find a solution to. When I try to install 'stringi', I get the following: </p>\n\n<pre><code>* installing *source* package \u2018stringi\u2019 ...\n** package \u2018stringi\u2019 successfully unpacked and MD5 sums checked\nchecking for local ICUDT_DIR... icu55/data\nchecking for R_HOME... /usr/lib/R\nchecking for R... /usr/lib/R/bin/R\nchecking for R &gt;= 3.1.0... yes\nchecking for cat... /bin/cat\nchecking for gcc... gcc -std=gnu99\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc -std=gnu99 accepts -g... yes\nchecking for gcc -std=gnu99 option to accept ISO C89... none needed\nchecking how to run the C preprocessor... g++ -E\nconfigure: error: in `/tmp/Rtmplf58Ya/R.INSTALL2d1959f5fc41/stringi':\nconfigure: error: C preprocessor \"g++ -E\" fails sanity check\nSee `config.log' for more details\nERROR: configuration failed for package \u2018stringi\u2019\n* removing \u2018/usr/local/lib/R/site-library/stringi\u2019\n</code></pre>\n\n<p>What does the line:</p>\n\n<pre><code>configure: error: C preprocessor \"g++ -E\" fails sanity check\n</code></pre>\n\n<p>refer to? Im fairly certain my C compiler works based on this line:</p>\n\n<pre><code>checking whether the C compiler works... yes\n</code></pre>\n\n<p>and this line:</p>\n\n<pre><code>checking whether we are using the GNU C compiler... yes\n</code></pre>\n\n<p>but like I said, I am just now starting to delve into the inner workings of the Linux system, so I could be totally wrong here. </p>\n\n<p>Any and all assistance is greatly appreciated!</p>\n\n<p>Edit: I am using Linux Mint 17.1 (MATE) and R version 3.2.1</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4651282"}, "edited": false, "score": 1, "creation_date": 1436373955, "post_id": 31298732, "comment_id": 50588008, "body": "work: <a href=\"http://ideone.com/TLKAiL\" rel=\"nofollow noreferrer\">ideone.com/TLKAiL</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1436374018, "post_id": 31298732, "comment_id": 50588048, "body": "Don&#39;t forget negatives..."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436374045, "post_id": 31298732, "comment_id": 50588060, "body": "@EugeneSh. in what case will <code>(int)b</code> be greater than <code>b</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436374148, "post_id": 31298732, "comment_id": 50588126, "body": "Yes (yes is too short for comment..)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1436375166, "post_id": 31298732, "comment_id": 50588736, "body": "<code>void main()</code> --&gt; <code>int main(void)</code>"}, {"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1436376135, "post_id": 31298732, "comment_id": 50589301, "body": "Fair enough, I stand corrected"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1436376283, "post_id": 31298732, "comment_id": 50589393, "body": "@CoryKramer: It&#39;s a bitch, I agree ... ;-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1436376687, "post_id": 31298732, "comment_id": 50589638, "body": "Why the downvote? It&#39;s a complete question."}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 1, "creation_date": 1436379235, "post_id": 31298732, "comment_id": 50591261, "body": "I think it&#39;s an <i>awesome</i> question.  If I were to teach someone this obscure part of C, I couldn&#39;t do better than using this question as an example."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1436400706, "post_id": 31298732, "comment_id": 50601457, "body": "to round, use <code>return b &gt; 0 ? b + 0.5f : b - 0.5f;</code>. 0.1 is a <code>double</code> literal, you need to use the <code>f</code> suffix. Anyway, using steps of 0.1 in binary floating-point is not a good solution"}, {"owner": {"reputation": 49, "user_id": 5094874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e15380ef8e8557387af55b9b71a74e?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Danila", "link": "https://stackoverflow.com/users/5094874/vlad-danila"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1436467124, "post_id": 31298732, "comment_id": 50637628, "body": "Thanks for the formatting, guys. @L\u01b0uV\u0129nhPh&#250;c I wouldn&#39;t normally use float in a for loop, it was only meant to generate a set of numbers with decimals I could test my function on"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1436375262, "post_id": 31298913, "comment_id": 50588791, "body": "Why undefined behaviour, please?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1436544413, "last_edit_date": 1436544413, "creation_date": 1436374353, "answer_id": 31298913, "question_id": 31298732, "link": "https://stackoverflow.com/questions/31298732/rounding-float-to-nearest-integer-in-c/31298913#31298913", "title": "Rounding float to nearest integer in C", "body": "<p>When I tried to compile this under gcc I got the following error:</p>\n\n<pre><code>/tmp/x1.c:23: error: conflicting types for \u2018round_near\u2019\n/tmp/x1.c:23: note: an argument type that has a default promotion can\u2019t match an empty parameter name list declaration\n/tmp/x1.c:16: error: previous implicit declaration of \u2018round_near\u2019 was here\n</code></pre>\n\n<p>The funny results you're getting is because your compiler didn't know the definition of <code>round_near</code> at the time it was first encountered and assumed it was <code>int round_near()</code>.  So this resulted in undefined behavior.</p>\n\n<p>If you either move <code>round_near</code> above main or put in a declaration above main you should get the expected results.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1436376397, "post_id": 31298985, "comment_id": 50589473, "body": "It stands: Still the only complete answer."}, {"owner": {"reputation": 49, "user_id": 5094874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e15380ef8e8557387af55b9b71a74e?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Danila", "link": "https://stackoverflow.com/users/5094874/vlad-danila"}, "edited": false, "score": 0, "creation_date": 1436467487, "post_id": 31298985, "comment_id": 50637856, "body": "<i>cringe</i>  I hadn&#39;t thought to check if I included my prototype. Classic rookie mistake.   Still, it&#39;s intersting, I wasn&#39;t aware that floats and doubles aren&#39;t easily interchangeable. I thought one was just a shorter version of the other, like int and long int.  Side question, why is <code>int main(void)</code> better than <code>void main()</code>?"}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 1, "creation_date": 1436492619, "post_id": 31298985, "comment_id": 50647746, "body": "90% of the time they are interchangeable.  But they do have different memory layouts (floats are 32 bits, doubles are 64 bits) and you&#39;ve found a case where you end up shoving a double into a float&#39;s memory layout, so bugs."}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 1, "creation_date": 1436492916, "post_id": 31298985, "comment_id": 50647808, "body": "As for main returning an int: <a href=\"http://stackoverflow.com/a/207992/3294441\">stackoverflow.com/a/207992/3294441</a>  Note that the return of your main function is seen by the operating system and by convention, <code>return 0;</code> indicates program success while non-zero indicates some sort of failure."}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1436492985, "post_id": 31298985, "comment_id": 50647829, "body": "If my question answered your question, please accept it as the answer."}], "tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 7, "last_activity_date": 1436374968, "last_edit_date": 1436374968, "creation_date": 1436374571, "answer_id": 31298985, "question_id": 31298732, "link": "https://stackoverflow.com/questions/31298732/rounding-float-to-nearest-integer-in-c/31298985#31298985", "title": "Rounding float to nearest integer in C", "body": "<p>You don't have a prototype for <code>int round_near(float b)</code>, so you're relying on implicit declarations.</p>\n\n<p>Try adding this to your code.</p>\n\n<pre><code>int round_near (float b); // Prototype\n\nint main(void) // Nitpick: main returns an int!\n</code></pre>\n\n<p>Using implicit declarations for <code>round_near(b)</code>, <code>b</code> is being promoted to a <em>double</em>.  But the definition assumes it's a <em>float</em>, which has a different binary layout, so you get crazy random results.</p>\n\n<p>You should make sure your code compiles without any warnings to avoid this sort of stuff.  The only reason implicit declaration is in the language is for backwards compatibility, but every compiler for the last decade or two warns you that it's bad on compile.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5094946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306e31275ef3b3d8d15d7598fc067e41?s=128&d=identicon&r=PG&f=1", "display_name": "dam", "link": "https://stackoverflow.com/users/5094946/dam"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1436376128, "post_id": 31299127, "comment_id": 50589294, "body": "Without prototyping of proper definition before &lt;code&gt;int main()&lt;/code&gt; your function will be called as &lt;code&gt;int round_near()&lt;/code&gt; instead of &lt;code&gt;int round_near(1.2)&lt;/code&gt;. See the difference? b is discarded, so no value for argument b =&gt; no value for (int)b and so on..."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1436376536, "post_id": 31299127, "comment_id": 50589551, "body": "This &quot;<i>your function will be called as <code>int round_near()</code> instead of <code>int round_near(1.2)</code></i>&quot; is not correct. C is different. The issue is not the missing prototype, but the <code>float</code> getting promoted to <code>double</code> (see <i>QuestionC</i>&#39;s answer below). If the OP would have coded <code>round_near(double f)</code> the code would work fine, even without the prototype."}], "tags": [], "owner": {"reputation": 1, "user_id": 5094946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306e31275ef3b3d8d15d7598fc067e41?s=128&d=identicon&r=PG&f=1", "display_name": "dam", "link": "https://stackoverflow.com/users/5094946/dam"}, "is_accepted": false, "score": -2, "last_activity_date": 1436375057, "creation_date": 1436375057, "answer_id": 31299127, "question_id": 31298732, "link": "https://stackoverflow.com/questions/31298732/rounding-float-to-nearest-integer-in-c/31299127#31299127", "title": "Rounding float to nearest integer in C", "body": "<p>Output like -241... instead of 1 or 2 usually denote uninitialized integers... \nHowever, your code compiles just fine with GNU C compiler (gcc) on Linux, only after either moving the <code>round_near</code> function BEFORE the <code>int main()</code> or simply inserting a blank definition of that function (as <code>int round_near(float b);</code>) before the <code>int main()</code> -- that is \"prototyping\". </p>\n\n<p>Otherwise, your function will be \"seen\" as <code>int round_near()</code> (see the lack of argument definition) and hence the uninitialized integers printed out by the program. </p>\n\n<p>On the other, such a practice won't produce portable code, so without the modifications bellow your (actually C) code may compile in Visual Studio ... but not with other compilers. </p>\n\n<p>Just another off-topic: don't use floats in <code>for</code> loops. Floats are nasty!</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 5094874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e15380ef8e8557387af55b9b71a74e?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Danila", "link": "https://stackoverflow.com/users/5094874/vlad-danila"}, "edited": false, "score": 1, "creation_date": 1436471154, "post_id": 31306952, "comment_id": 50639880, "body": "Thanks for the input. I hadn&#39;t considered that incrementing by 0.5 and rounding down would be the same as rounding to nearest. That&#39;s clever. I also hadn&#39;t even considered using long long instead of int since I mostly use float to express small rational numbers rather than large numbers. The negative numbers was a total oversight."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1436472389, "last_edit_date": 1495542108, "creation_date": 1436407815, "answer_id": 31306952, "question_id": 31298732, "link": "https://stackoverflow.com/questions/31298732/rounding-float-to-nearest-integer-in-c/31306952#31306952", "title": "Rounding float to nearest integer in C", "body": "<p><a href=\"https://stackoverflow.com/a/31298985/2410359\">@QuestionC</a> well answered OP's immediate problem: implied function signature of <code>int round_near(...)</code> is incompatible with <code>int round_near(float b)</code> and call of <code>round_near(b)</code> which passes <code>b</code> as a <code>double</code>.   </p>\n\n<p>Simple solution: prototype the function. </p>\n\n<p>Some issues about the <code>round_near()</code></p>\n\n<ol>\n<li><p>Casting to <code>int</code> severely narrows the legitimate range.  Better to use <code>long long</code>.</p></li>\n<li><p>General incorrect functionality with negative numbers. <a href=\"https://stackoverflow.com/users/4253229/eugene-sh\">@Eugene Sh.</a>  Code should test for sign.</p></li>\n</ol>\n\n<p>Below is a solution that takes advantage of the range of <code>long long</code> as it is usually greater than the continuous range of integers a <code>float</code> can represent exactly.  Alternatively OP can replace <code>my_roundf()</code> with <code>round_near()</code> and use this code for testing.   <code>round_near()</code> fails about 40% of the time.</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n\nfloat my_roundf(float x) {\n  // Large `float`s typically have no fractional portion to round\n  if (x &gt; LLONG_MAX / 2) return x;\n  if (x &lt; LLONG_MIN / 2) return x;\n  return x &gt; 0 ? (long long) (x + 0.5f) : (long long) (x - 0.5f);\n}\n\nfloat rand_float(void) {\n  union {\n    unsigned char uc[sizeof(float)];\n    float f;\n  } u;\n  do {\n    unsigned i;\n    for (i = 0; i &lt; sizeof(float); i++) {\n      u.uc[i] = rand();\n    }\n  } while (u.f != u.f);  // re-do if NaN encountered\n  return u.f;\n}\n\nvoid my_roundf_test(void) {\n  unsigned n = 100000;\n  while (n-- &gt; 0) {\n    float x = rand_float();\n    float ymath = roundf(x);\n    // float ymy = round_near(x);\n    float ymy = my_roundf(x);\n    // Exact half-way cases may fail\n    if (ymath != ymy) {\n      printf(\"x:% .9e math:% .9e my:% .9e\\n\", x, ymath, ymy);\n    }\n  }\n}\n</code></pre>\n\n<p>Note: There are exact half-way cases per various floating point rounding modes, negative zero, etc. to consider for a complete answer. But leave that for another day.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436418991, "creation_date": 1436418991, "answer_id": 31308722, "question_id": 31298732, "link": "https://stackoverflow.com/questions/31298732/rounding-float-to-nearest-integer-in-c/31308722#31308722", "title": "Rounding float to nearest integer in C", "body": "<p>A simple one (<code>float</code> won't fit in an <code>int</code> type, so <code>long long</code>)</p>\n\n<pre><code>long long round(float a) {\n    long long b = a;\n    if (a &gt;= 0)\n        return a - b &lt; 0.5 ? b : b + 1;\n    else\n        return b - a &lt; 0.5 ? b : b - 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5094874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e15380ef8e8557387af55b9b71a74e?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Danila", "link": "https://stackoverflow.com/users/5094874/vlad-danila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3157, "favorite_count": 1, "answer_count": 5, "score": 4, "last_activity_date": 1436544413, "creation_date": 1436373716, "last_edit_date": 1436373875, "question_id": 31298732, "link": "https://stackoverflow.com/questions/31298732/rounding-float-to-nearest-integer-in-c", "title": "Rounding float to nearest integer in C", "body": "<p>I might have a noob question here, but searching the site hasn't yelded anything. I'm learning to program in C and I'm trying to build  a function from scratch that rounds floats to the nearest integer, without using math.h. Here's my code:</p>\n\n<pre><code>void main()\n{\n    float b;\n    for(b = 0; b &lt;= 2; b = b + 0.1)\n    {\n        printf(\"%f    \", b);\n        printf(\"%i    \", (int)b);\n        printf(\"%f    \", b - (int)b);\n        printf(\"Nearest: \");\n        if((b - (int)b)&lt;0.5)\n            printf(\"%i    \", (int)b);\n        else\n            printf(\"%i    \", (int)b + 1);\n        printf(\"Function: %i    \", round_near(b));\n        printf(\"\\n\");\n    }\n    getchar();\n}\n\nint round_near(float b)\n{\n    if((b - (int)b)&lt;0.5)\n        return(int)b;\n    else\n        return (int)b + 1;\n}\n</code></pre>\n\n<p>My results looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/rWUIb.png\" alt=\"enter image description here\"></p>\n\n<p>Some of the code is superfluous and was just meant to see some of the individual steps of my function.\nWhat gives? Are there some shenanigans with float type variables I'm not aware of?</p>\n"}, {"tags": ["c", "bit-manipulation", "bitwise-operators", "logical-operators"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1436373260, "post_id": 31298480, "comment_id": 50587549, "body": "<code>!</code> is the boolean not. The bitwise-not is <code>~</code>. No matter what sign <code>x</code> has, if it&#39;s not zero then <code>!x</code> is zero."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1436373274, "post_id": 31298480, "comment_id": 50587557, "body": "Why would a positive x cause !x = 1?"}, {"owner": {"reputation": 1665, "user_id": 2993239, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a0edd135734f3dd5f9b50ecac2e45dd2?s=128&d=identicon&r=PG&f=1", "display_name": "jlee", "link": "https://stackoverflow.com/users/2993239/jlee"}, "edited": false, "score": 0, "creation_date": 1436373469, "post_id": 31298480, "comment_id": 50587707, "body": "Hunter - !0 = 1 right? So if x is positive(0) !x = 1. Right?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1436373961, "post_id": 31298480, "comment_id": 50588013, "body": "@jlee when you do <code>x &gt;&gt; 31</code>, you get a value derived by shifting the value in x by 31 bits... but you don&#39;t change the actual <code>x</code>.  So <code>!x</code> operates on the original value in x, not the shifted value from <code>x &gt;&gt; 31</code>.  So <code>!x</code> only gives <code>1</code> when x was 0."}, {"owner": {"reputation": 1665, "user_id": 2993239, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a0edd135734f3dd5f9b50ecac2e45dd2?s=128&d=identicon&r=PG&f=1", "display_name": "jlee", "link": "https://stackoverflow.com/users/2993239/jlee"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1436374339, "post_id": 31298480, "comment_id": 50588253, "body": "@Dmitri Thank you for that explanation, I understand where I was getting confused"}], "answers": [{"comments": [{"owner": {"reputation": 1665, "user_id": 2993239, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a0edd135734f3dd5f9b50ecac2e45dd2?s=128&d=identicon&r=PG&f=1", "display_name": "jlee", "link": "https://stackoverflow.com/users/2993239/jlee"}, "edited": false, "score": 0, "creation_date": 1436373676, "post_id": 31298644, "comment_id": 50587838, "body": "Sorry, I think you misunderstood my question. My answer is correct (at least the testing script says so). I&#39;m just looking for a little clarification on where I was wrong in my reasoning"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1436377003, "post_id": 31298644, "comment_id": 50589837, "body": "To avoid implementation-defined behavior, it&#39;s also advisable to cast <code>x</code> to an unsigned type."}], "tags": [], "owner": {"reputation": 384, "user_id": 5081035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kkTWs3vI4Z8/AAAAAAAAAAI/AAAAAAAAADc/-Uqh_lQ1rOw/photo.jpg?sz=128", "display_name": "Bizkit", "link": "https://stackoverflow.com/users/5081035/bizkit"}, "is_accepted": false, "score": 1, "last_activity_date": 1436373463, "creation_date": 1436373463, "answer_id": 31298644, "question_id": 31298480, "link": "https://stackoverflow.com/questions/31298480/looking-for-clarity-on-this-answer-involving-logical-operations/31298644#31298644", "title": "Looking for clarity on this answer involving logical operations", "body": "<p>I think you're looking for :  </p>\n\n<pre><code>size_t shift = sizeof(x) * 8 - 1;\nbool ans = x | ~(1 &lt;&lt; shift);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1665, "user_id": 2993239, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a0edd135734f3dd5f9b50ecac2e45dd2?s=128&d=identicon&r=PG&f=1", "display_name": "jlee", "link": "https://stackoverflow.com/users/2993239/jlee"}, "edited": false, "score": 0, "creation_date": 1436374135, "post_id": 31298772, "comment_id": 50588118, "body": "Thank you! This is exactly what I was looking for. I&#39;m still confused about why, for x is positive, !x = 0. If x is positive, the sign bit would be 0. So wouldn&#39;t !0 = 1?  Or am I completely understanding this wrong"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 1665, "user_id": 2993239, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a0edd135734f3dd5f9b50ecac2e45dd2?s=128&d=identicon&r=PG&f=1", "display_name": "jlee", "link": "https://stackoverflow.com/users/2993239/jlee"}, "edited": false, "score": 0, "creation_date": 1436374488, "post_id": 31298772, "comment_id": 50588351, "body": "@jlee If x is positive, then it is not zero. You are confusing x with x&gt;&gt;31."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436374510, "post_id": 31298772, "comment_id": 50588359, "body": "<code>!</code> is the logical negation operator.  So in a boolean context !x will be 1 if x is 0 and !x will be 0 if x is non-zero"}, {"owner": {"reputation": 1665, "user_id": 2993239, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a0edd135734f3dd5f9b50ecac2e45dd2?s=128&d=identicon&r=PG&f=1", "display_name": "jlee", "link": "https://stackoverflow.com/users/2993239/jlee"}, "edited": false, "score": 0, "creation_date": 1436374904, "post_id": 31298772, "comment_id": 50588584, "body": "I see where I was wrong. For some reason I was thinking the value of x was being changed to its sign bit and I was doing sign bit | !sign bit, which of course was wrong"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1436373867, "creation_date": 1436373867, "answer_id": 31298772, "question_id": 31298480, "link": "https://stackoverflow.com/questions/31298480/looking-for-clarity-on-this-answer-involving-logical-operations/31298772#31298772", "title": "Looking for clarity on this answer involving logical operations", "body": "<p>Where you're off is in #2:</p>\n\n<ul>\n<li>if x is positive, x >> 31 == 0 and !x == 0 so !(0 | 0) == 1</li>\n<li>if x is negative, x >> 31 == 1 and !x == 0 so !(1 | 0) == 0</li>\n<li>if x is zero, x >> 31 == 0 and !x == 1 so !(0 | 1) == 0</li>\n</ul>\n"}], "owner": {"reputation": 1665, "user_id": 2993239, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a0edd135734f3dd5f9b50ecac2e45dd2?s=128&d=identicon&r=PG&f=1", "display_name": "jlee", "link": "https://stackoverflow.com/users/2993239/jlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 31298772, "answer_count": 2, "score": 2, "last_activity_date": 1436373867, "creation_date": 1436372980, "question_id": 31298480, "link": "https://stackoverflow.com/questions/31298480/looking-for-clarity-on-this-answer-involving-logical-operations", "title": "Looking for clarity on this answer involving logical operations", "body": "<p>I'm working on a homework problem and I already got the answer correct, but it was the result of adding operators out of frustration so I'm hoping someone can clarify this for me.  </p>\n\n<p>I'm testing to see if a number is positive or negative, return 1 if x > 0, return 0 otherwise. Only using the bit operations ! ~ &amp; ^ | + &lt;&lt; >></p>\n\n<p>Here's my answer:  !(x >> 31 | !x)  </p>\n\n<p>When I work this out on paper my understanding of it falls apart. </p>\n\n<ol>\n<li>move the sign bit all the way to the right</li>\n<li>OR that bit with !x  \n\n<ul>\n<li>positive would be 0 | 1  </li>\n<li>negative would be 1 | 0  </li>\n</ul></li>\n<li>! the result, which always, not matter what, ends up as 0  \n\n<ul>\n<li>!(0 | 1) = 0  </li>\n<li>!(1 | 0) = 0  </li>\n</ul></li>\n</ol>\n\n<p>What am I understanding wrong? </p>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1436374529, "post_id": 31298479, "comment_id": 50588371, "body": "You should not use a regular expression. This does not seem to be a good task for regular expressions. It&#39;d be trivial to write a simple parser by hand that searches for quoted and unquoted strings."}, {"owner": {"reputation": 107, "user_id": 5094883, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/484be6b4bf01eb180d49900e672eb51c?s=128&d=identicon&r=PG&f=1", "display_name": "MyJustWorking", "link": "https://stackoverflow.com/users/5094883/myjustworking"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1436375176, "post_id": 31298479, "comment_id": 50588741, "body": "yes but i need to be regex .... it is very important for me to be regex ..."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 1, "creation_date": 1436375857, "post_id": 31298479, "comment_id": 50589148, "body": "Why is it important that it be regex? You should strive to use the right tool for every task, so why force yourself to use one tool when another is a better fit?"}, {"owner": {"reputation": 107, "user_id": 5094883, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/484be6b4bf01eb180d49900e672eb51c?s=128&d=identicon&r=PG&f=1", "display_name": "MyJustWorking", "link": "https://stackoverflow.com/users/5094883/myjustworking"}, "edited": false, "score": 0, "creation_date": 1436376037, "post_id": 31298479, "comment_id": 50589247, "body": "ok please write for me a program with other way to do this ..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1436377104, "post_id": 31298479, "comment_id": 50589897, "body": "Something like <code>&quot; *((&#39;([^\\&#39;]*(\\\\|\\&#39;)*)*&#39;)|[^&#39;,]*), *&quot;</code> (untested) ? (only handle <code>\\&#39;</code> and `\\` in quote)."}, {"owner": {"reputation": 107, "user_id": 5094883, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/484be6b4bf01eb180d49900e672eb51c?s=128&d=identicon&r=PG&f=1", "display_name": "MyJustWorking", "link": "https://stackoverflow.com/users/5094883/myjustworking"}, "edited": false, "score": 0, "creation_date": 1436379543, "post_id": 31298479, "comment_id": 50591431, "body": "not worked ... please check it again"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1436460401, "post_id": 31300978, "comment_id": 50633633, "body": "Note that you cannot use <code>\\` or </code>\\&#39;` to escape <code>` or </code>&#39;` with your regex."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1436464579, "post_id": 31300978, "comment_id": 50636179, "body": "@Jarod42: Do you mean, this would e.g. be a problem if the string contains something like <code>don&#39;t</code>? You are right, I didn&#39;t think of that. Thank you!. I don&#39;t see, why <code>`</code> would be a problem though. In any event - depending on whether the OP has control over the formatting of the string, or not - I&#39;d rather not require them to be escaped, but would only treat <code>&#39;</code>s special, that come directly before or after a <code>,</code> (probably allow whitespaces in between)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1436466278, "post_id": 31300978, "comment_id": 50637083, "body": "Yes I mean something like <code>don\\&#39;t</code>."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1436470456, "post_id": 31300978, "comment_id": 50639517, "body": "Ok, I&#39;ll think about it. I guess the second symbol to escape wasn&#39;t <code>`</code> as I initially though, but the backslash itself right?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1436519601, "post_id": 31300978, "comment_id": 50658084, "body": "I meant: <code>&#39;</code> (quote) , and <code>\\</code>(backslash). (I (mis-)used backquote to render those char as code...)"}], "tags": [], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "is_accepted": true, "score": 1, "last_activity_date": 1436438898, "last_edit_date": 1436438898, "creation_date": 1436380603, "answer_id": 31300978, "question_id": 31298479, "link": "https://stackoverflow.com/questions/31298479/using-regex-to-split-special-char/31300978#31300978", "title": "Using regex to split special char", "body": "<p>Depending on how you want to handle certain corner cases, you can use the following:</p>\n\n<pre><code>std::regex reg(R\"--((('.*?')|[^,])+)--\");\n</code></pre>\n\n<p>Step, by step:</p>\n\n<ul>\n<li><code>R\"--(...)--\"</code> Is syntax for raw string literals, so we don't have to worry about escaping. We don't need it here, but I'm using them by default for regex strings. </li>\n<li><code>('.*?')</code> all characters between (and including) two apostrophes (non greedy)</li>\n<li><code>[^,]</code> anything that is not a comma</li>\n<li><code>(('.*?')|[^,])+</code> arbitrary sequence of non-<code>,</code>-characters or <code>'...'</code>-sequences.<br>\n(Note: the <code>('.*?')</code> part has to come first)</li>\n</ul>\n\n<p>So this will also match e.g. <code>tkasd 'rtzrze,123'</code> as a single match. It will also NOT remove any whitespaces.</p>\n\n<p>Usage:</p>\n\n<pre><code>std::regex reg(R\"--((('.*?')|[^,])+)--\");\nstd::string s = \",,t   '123,4565',k ,'rt',t,z\";\n\nfor (std::sregex_iterator rit(s.begin(), s.end(), reg), end{}; rit != end; ++rit) {\n    std::cout &lt;&lt; rit-&gt;str() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>t   '123,4565'\nk\n'rt'\nt\nz\n</code></pre>\n\n<p>Edit:<br>\nI rarely use regular expressions, so any comments about possible improvements or gotchas are welcome. Maybe there is also an even better solution using <code>regex_token_iterator</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 5094883, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/484be6b4bf01eb180d49900e672eb51c?s=128&d=identicon&r=PG&f=1", "display_name": "MyJustWorking", "link": "https://stackoverflow.com/users/5094883/myjustworking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 31300978, "answer_count": 1, "score": -2, "last_activity_date": 1436438898, "creation_date": 1436372977, "last_edit_date": 1436373961, "question_id": 31298479, "link": "https://stackoverflow.com/questions/31298479/using-regex-to-split-special-char", "title": "Using regex to split special char", "body": "<pre><code>string MyName = \" 'hi, load1', 'hi, load2', varthatnotstring \";\n</code></pre>\n\n<p>I want to use <em>regex</em> to split the above string at every <code>,</code>, while preserving strings that are inside quotation.</p>\n\n<p>As such, splitting <code>MyName</code> should yield:  </p>\n\n<pre><code>1: 'hi, load1'\n2: 'hi, load2'\n3: varthatnotstring\n</code></pre>\n\n<p>I currently use <code>regex MyR(\"(.<em>),(.</em>),(.*)\");</code>, but that gives me:</p>\n\n<pre><code>1: 'hi\n2: load1'\n3: 'hi\n4: load2'\n</code></pre>\n\n<hr>\n\n<ul>\n<li>What regular-expression should I use?</li>\n</ul>\n"}, {"tags": ["c", "assembly", "mips", "mips32"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1436372184, "post_id": 31297977, "comment_id": 50586892, "body": "Could you include a dump of the .data section? That&#39;s probably where <code>$gp</code> is pointing to."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1436372709, "post_id": 31297977, "comment_id": 50587205, "body": "I don&#39;t know exactly what target you built for, but when I built with <code>-mhard-float -mips32</code> I found the floats in the .sdata section:  <code>Disassembly of section .sdata:  00000000 &lt;.sdata&gt;:    0:   3f800000        0x3f800000    4:   40000000        mfc0    zero,c0_index</code>.  0x3f800000 is 1.0f, and 0x40000000 is 2.0f."}, {"owner": {"reputation": 239, "user_id": 4601043, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/132ac7e4ae84ae8cff605d5b80bdb77d?s=128&d=identicon&r=PG&f=1", "display_name": "Shuaiyu Jiang", "link": "https://stackoverflow.com/users/4601043/shuaiyu-jiang"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1436372896, "post_id": 31297977, "comment_id": 50587342, "body": "I do not know what is the .data section.... The codes I posted are all I have got from compiler."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1436372967, "post_id": 31297977, "comment_id": 50587385, "body": "If you use the <code>-D</code> switch with <code>objdump</code> you should get all sections instead of just the ones containing code."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1436373431, "post_id": 31297977, "comment_id": 50587671, "body": "<code>$gp</code> points to the middle of the 64k static data section, so <code>-32764($gp)</code> is the first or second word of that section. Presumably <code>$gp</code> is expected to be set up by the loader."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1436375834, "post_id": 31297977, "comment_id": 50589126, "body": "If you want to implement MIPS yourself, looking at this sort of compiler output is a bad idea. You need to consult the instruction-set manuals instead. For example, the code you&#39;ve posted contains pseudo-instructions like  <code>li</code>, which the actual hardware doesn&#39;t even have."}, {"owner": {"reputation": 239, "user_id": 4601043, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/132ac7e4ae84ae8cff605d5b80bdb77d?s=128&d=identicon&r=PG&f=1", "display_name": "Shuaiyu Jiang", "link": "https://stackoverflow.com/users/4601043/shuaiyu-jiang"}, "edited": false, "score": 0, "creation_date": 1436379021, "post_id": 31297977, "comment_id": 50591128, "body": "LI instruction is actually a ADDI instruction, I do not understand why actual hardware doesn&#39;t have."}, {"owner": {"reputation": 239, "user_id": 4601043, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/132ac7e4ae84ae8cff605d5b80bdb77d?s=128&d=identicon&r=PG&f=1", "display_name": "Shuaiyu Jiang", "link": "https://stackoverflow.com/users/4601043/shuaiyu-jiang"}, "edited": false, "score": 0, "creation_date": 1436379168, "post_id": 31297977, "comment_id": 50591221, "body": "I use &quot;mips-elf-gcc -static -o floatadd floatadd.c&quot; to compile my C, the cross compiler runs on the Intel Linux system, I don&#39;t very know about it, it is provided by my university, I just follow the instruction my tutor gave to me."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1436382054, "post_id": 31297977, "comment_id": 50592972, "body": "Are you aware that your C codes differ by more than just the data type <code>int</code> or <code>float</code>? The first code uses <code>c=a+2</code> but the second code has <code>c=a+b</code>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1436385648, "post_id": 31297977, "comment_id": 50595196, "body": "@ShuaiyuJiang: <code>li</code> can also be a <code>ori</code>-instruction, or more generally a sequence of <code>lui</code> and either <code>addi</code> or <code>ori</code>, in case the value does not fit into the 16 bit immediate these instructions can encode. Either way, the fact that you didn&#39;t know this means you desperately need to read the instruction set manuals."}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 4601043, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/132ac7e4ae84ae8cff605d5b80bdb77d?s=128&d=identicon&r=PG&f=1", "display_name": "Shuaiyu Jiang", "link": "https://stackoverflow.com/users/4601043/shuaiyu-jiang"}, "edited": false, "score": 0, "creation_date": 1436443216, "post_id": 31305013, "comment_id": 50620908, "body": "Your answer is pretty nice, The reason why I care this question is because 1. My MIPS is going to implement in FPGA, and I need to design a data memory from him instead using RAM/ROM, understand the size of data memory is important. 2. For a project, demonstration is very important, so I have to have a program that actually executable."}, {"owner": {"reputation": 239, "user_id": 4601043, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/132ac7e4ae84ae8cff605d5b80bdb77d?s=128&d=identicon&r=PG&f=1", "display_name": "Shuaiyu Jiang", "link": "https://stackoverflow.com/users/4601043/shuaiyu-jiang"}, "edited": false, "score": 0, "creation_date": 1436448215, "post_id": 31305013, "comment_id": 50624679, "body": "I have found the data value in the memory section .sdata. Just one more question, is global pointer  have any initial value?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "reply_to_user": {"reputation": 239, "user_id": 4601043, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/132ac7e4ae84ae8cff605d5b80bdb77d?s=128&d=identicon&r=PG&f=1", "display_name": "Shuaiyu Jiang", "link": "https://stackoverflow.com/users/4601043/shuaiyu-jiang"}, "edited": false, "score": 0, "creation_date": 1436448565, "post_id": 31305013, "comment_id": 50624966, "body": "@ShuaiyuJiang as far as i know is the loader that set the global pointer"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "is_accepted": true, "score": 4, "last_activity_date": 1436394904, "last_edit_date": 1592644375, "creation_date": 1436394904, "answer_id": 31305013, "question_id": 31297977, "link": "https://stackoverflow.com/questions/31297977/floating-point-variables-value-missing-in-data-memory/31305013#31305013", "title": "Floating point variable&#39;s value missing in data memory", "body": "<h1>About your question</h1>\n<p>ELF executables can have one or more sections filled with the static data (string, floating point numbers, numbers, whatever) used by the program.<br />\nThis sections are loaded into memory by the loader with the rest of the program, thereby avoiding intermixing code and data and reducing the code size.</p>\n<p>For the ELF on MIPS systems you should refer to <a href=\"http://www.cs.unibo.it/%7Esolmi/teaching/arch_2002-2003/AssemblyLanguageProgDoc.pdf\" rel=\"nofollow noreferrer\">this</a> where there is this nice picture:</p>\n<p><img src=\"https://i.stack.imgur.com/JxZh8.png\" alt=\"MIPS ELF Sections\" /></p>\n<p>As you can see <code>$gp</code> is used to address the section <em>.sdata</em> and <em>.sbss</em>, where the initial <em>s</em> stands for <em>small</em>.</p>\n<p>All these efforts are taken to minimize code size as by using <code>$gp</code> the compiler can generate 16 bit offsets (versus the 32 bit ones normally used).<br />\nSince the offset is signed, <code>$gp</code> is placed in the middle of a (at most) 64 KiB region formed by <em>.sdata</em> + <em>.sbss</em>.</p>\n<p>Your floating points value are not coded directly in the instructions because FP instruction <a href=\"http://www.ece.lsu.edu/ee4720/2014/lfp.s.html\" rel=\"nofollow noreferrer\">does not takes immediates</a>, instead they are saved into a readonly section and loaded from there.</p>\n<h1>About your purpose</h1>\n<p>Why in the end do you care about this?<br />\nIf your goal is to design an implementation of the MIPS ISA, just pick the specific ISA (MIPS32 I? MIPS32 IV? MIPS 64?), get the documents, get the whole picture and implement a microarchitecture for it.</p>\n<p>If an instruction is a valid instruction according to your chosen ISA then your implementation must be able to execute it, don't worry about what the compilers are doing, they are grown up, they can take care of them selves and in the end if the code you are executing is broken, who cares? As long it is valid.</p>\n<p>These will help you:</p>\n<p><a href=\"http://www.cs.cornell.edu/courses/cs316/2007fa/MIPS_Vol1.pdf\" rel=\"nofollow noreferrer\">MIPS32\u2122 Architecture For Programmers Volume I: Introduction to the MIPS32\u2122 Architecture</a>\n<a href=\"http://www.cs.cornell.edu/courses/cs316/2007fa/MIPS_Vol2.pdf\" rel=\"nofollow noreferrer\">MIPS32\u2122 Architecture For Programmers Volume II: The MIPS32\u2122 Instruction Set</a></p>\n"}], "owner": {"reputation": 239, "user_id": 4601043, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/132ac7e4ae84ae8cff605d5b80bdb77d?s=128&d=identicon&r=PG&f=1", "display_name": "Shuaiyu Jiang", "link": "https://stackoverflow.com/users/4601043/shuaiyu-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 31305013, "answer_count": 1, "score": 3, "last_activity_date": 1436394904, "creation_date": 1436371545, "question_id": 31297977, "link": "https://stackoverflow.com/questions/31297977/floating-point-variables-value-missing-in-data-memory", "title": "Floating point variable&#39;s value missing in data memory", "body": "<p>I am a master student and currently doing my summer final project, which is about design a MIPS processor with a FPU and implement in a FPGA.</p>\n\n<p>The instructions that I'm going to implement are depended on the cross-compiler I'm using. So, from a hardware designer point of view, I started the project by first looking the instructions can be generated from the compiler.</p>\n\n<p>For integer design(the main core design), I wrote some C codes, here for example, a simple one:</p>\n\n<pre><code>int main ()\n{\nint a,b,c;\na=1;\nb=2;\nc=a+2;\n}\n</code></pre>\n\n<p>A simple addition, the compiler gives assembly codes: (I just posted the assembly codes in main, because I did not plan to run a operating system on my MIPS)</p>\n\n<pre><code>00400168 &lt;main&gt;:\n  400168:       27bdffe8        addiu   sp,sp,-24\n  40016c:       afbe0010        sw      s8,16(sp)\n  400170:       03a0f021        move    s8,sp\n  400174:       24020001        li      v0,1\n  400178:       afc20008        sw      v0,8(s8)\n  40017c:       24020002        li      v0,2\n  400180:       afc20004        sw      v0,4(s8)\n  400184:       8fc20008        lw      v0,8(s8)\n  400188:       00000000        nop\n  40018c:       20420002        addi    v0,v0,2\n  400190:       afc20000        sw      v0,0(s8)\n  400194:       03c0e821        move    sp,s8\n  400198:       8fbe0010        lw      s8,16(sp)\n  40019c:       27bd0018        addiu   sp,sp,24\n  4001a0:       03e00008        jr      ra\n</code></pre>\n\n<p>I like to understand the assembly code, that can helps me more understand MIPS architecture, and based on the instructions order I can design a hazard detection unit based on the compiler. </p>\n\n<p>We can see from those 4 instruction:</p>\n\n<pre><code>  400174:       24020001        li      v0,1\n  400178:       afc20008        sw      v0,8(s8)\n  40017c:       24020002        li      v0,2\n  400180:       afc20004        sw      v0,4(s8)\n</code></pre>\n\n<p><strong>The compiler loads 1, 2 into variable a, b.</strong> \nFor the integer assembly code, I can understand no problems.</p>\n\n<p>Ok, lets go to the floating point unit, as the same, I wrote a very similar C :</p>\n\n<p>Floating point testing C code</p>\n\n<pre><code>void main ()\n{\nfloat a,b,c;\na=1;\nb=2;\nc=a+b;\n}\n</code></pre>\n\n<p>Now the assembly codes are much different:</p>\n\n<pre><code>00400168 &lt;main&gt;:\n  400168:       27bdffe8        addiu   sp,sp,-24\n  40016c:       afbe0010        sw      s8,16(sp)\n  400170:       03a0f021        move    s8,sp\n  400174:       c7808004        lwc1    $f0,-32764(gp)\n  400178:       00000000        nop\n  40017c:       e7c00008        swc1    $f0,8(s8)\n  400180:       c7808008        lwc1    $f0,-32760(gp)\n  400184:       00000000        nop\n  400188:       e7c00004        swc1    $f0,4(s8)\n  40018c:       c7c20008        lwc1    $f2,8(s8)\n  400190:       c7c00004        lwc1    $f0,4(s8)\n  400194:       00000000        nop\n  400198:       46001000        add.s   $f0,$f2,$f0\n  40019c:       e7c00000        swc1    $f0,0(s8)\n  4001a0:       03c0e821        move    sp,s8\n  4001a4:       8fbe0010        lw      s8,16(sp)\n  4001a8:       27bd0018        addiu   sp,sp,24\n  4001ac:       03e00008        jr      ra\n  4001b0:       00000000        nop\n</code></pre>\n\n<p>Doesn't like pervious code, <strong>those 6 instructions looks like the program load the variable's value from data memory instead using instruction li</strong>:</p>\n\n<pre><code>  400174:       c7808004        lwc1    $f0,-32764(gp)\n  400178:       00000000        nop\n  40017c:       e7c00008        swc1    $f0,8(s8)\n  400180:       c7808008        lwc1    $f0,-32760(gp)\n  400184:       00000000        nop\n  400188:       e7c00004        swc1    $f0,4(s8)\n</code></pre>\n\n<p><strong>Here comes the problem, I just can not figure out what is value stored in -32764(gp) and f0,-32760(gp), because there are not any SW instructions that try to store data into those address.</strong></p>\n\n<p>Here is the fully assembly code generated by compiler:</p>\n\n<pre><code>floatadd:     file format elf32-bigmips\n\n\nDisassembly of section .init:\n\n00400018 &lt;_init&gt;:\n  400018:       27bdffe0        addiu   sp,sp,-32\n  40001c:       afbf0014        sw      ra,20(sp)\n  400020:       0c10003a        jal     4000e8 &lt;frame_dummy&gt;\n  400024:       00000000        nop\n  400028:       0c10006d        jal     4001b4 &lt;__do_global_ctors_aux&gt;\n  40002c:       00000000        nop\n  400030:       8fbf0014        lw      ra,20(sp)\n  400034:       27bd0020        addiu   sp,sp,32\n  400038:       03e00008        jr      ra\n  40003c:       00000000        nop\n\nDisassembly of section .text:\n\n00400040 &lt;_ftext&gt;:\n  400040:       27bdffe0        addiu   sp,sp,-32\n  400044:       afb10014        sw      s1,20(sp)\n  400048:       3c110040        lui     s1,0x40\n  40004c:       9222126c        lbu     v0,4716(s1)\n  400050:       afbf0018        sw      ra,24(sp)\n  400054:       14400019        bnez    v0,4000bc &lt;_ftext+0x7c&gt;\n  400058:       afb00010        sw      s0,16(sp)\n  40005c:       3c100040        lui     s0,0x40\n  400060:       8e021260        lw      v0,4704(s0)\n  400064:       00000000        nop\n  400068:       8c430000        lw      v1,0(v0)\n  40006c:       00000000        nop\n  400070:       10600009        beqz    v1,400098 &lt;_ftext+0x58&gt;\n  400074:       24420004        addiu   v0,v0,4\n  400078:       0060f809        jalr    v1\n  40007c:       ae021260        sw      v0,4704(s0)\n  400080:       8e021260        lw      v0,4704(s0)\n  400084:       00000000        nop\n  400088:       8c430000        lw      v1,0(v0)\n  40008c:       00000000        nop\n  400090:       1460fff9        bnez    v1,400078 &lt;_ftext+0x38&gt;\n  400094:       24420004        addiu   v0,v0,4\n  400098:       3c020000        lui     v0,0x0\n  40009c:       24420000        addiu   v0,v0,0\n  4000a0:       10400005        beqz    v0,4000b8 &lt;_ftext+0x78&gt;\n  4000a4:       24020001        li      v0,1\n  4000a8:       3c040040        lui     a0,0x40\n  4000ac:       0c000000        jal     0 &lt;_init-0x400018&gt;\n  4000b0:       24840244        addiu   a0,a0,580\n  4000b4:       24020001        li      v0,1\n  4000b8:       a222126c        sb      v0,4716(s1)\n  4000bc:       8fbf0018        lw      ra,24(sp)\n  4000c0:       8fb10014        lw      s1,20(sp)\n  4000c4:       8fb00010        lw      s0,16(sp)\n  4000c8:       03e00008        jr      ra\n  4000cc:       27bd0020        addiu   sp,sp,32\n\n004000d0 &lt;call___do_global_dtors_aux&gt;:\n  4000d0:       27bdffe8        addiu   sp,sp,-24\n  4000d4:       afbf0010        sw      ra,16(sp)\n  4000d8:       8fbf0010        lw      ra,16(sp)\n  4000dc:       00000000        nop\n  4000e0:       03e00008        jr      ra\n  4000e4:       27bd0018        addiu   sp,sp,24\n\n004000e8 &lt;frame_dummy&gt;:\n  4000e8:       3c020000        lui     v0,0x0\n  4000ec:       27bdffe8        addiu   sp,sp,-24\n  4000f0:       3c040040        lui     a0,0x40\n  4000f4:       3c050040        lui     a1,0x40\n  4000f8:       24420000        addiu   v0,v0,0\n  4000fc:       afbf0010        sw      ra,16(sp)\n  400100:       24840244        addiu   a0,a0,580\n  400104:       10400003        beqz    v0,400114 &lt;frame_dummy+0x2c&gt;\n  400108:       24a51270        addiu   a1,a1,4720\n  40010c:       0c000000        jal     0 &lt;_init-0x400018&gt;\n  400110:       00000000        nop\n  400114:       3c040040        lui     a0,0x40\n  400118:       8c831258        lw      v1,4696(a0)\n  40011c:       3c020000        lui     v0,0x0\n  400120:       10600007        beqz    v1,400140 &lt;frame_dummy+0x58&gt;\n  400124:       24590000        addiu   t9,v0,0\n  400128:       24841258        addiu   a0,a0,4696\n  40012c:       13200004        beqz    t9,400140 &lt;frame_dummy+0x58&gt;\n  400130:       00000000        nop\n  400134:       8fbf0010        lw      ra,16(sp)\n  400138:       03200008        jr      t9\n  40013c:       27bd0018        addiu   sp,sp,24\n  400140:       8fbf0010        lw      ra,16(sp)\n  400144:       00000000        nop\n  400148:       03e00008        jr      ra\n  40014c:       27bd0018        addiu   sp,sp,24\n\n00400150 &lt;call_frame_dummy&gt;:\n  400150:       27bdffe8        addiu   sp,sp,-24\n  400154:       afbf0010        sw      ra,16(sp)\n  400158:       8fbf0010        lw      ra,16(sp)\n  40015c:       00000000        nop\n  400160:       03e00008        jr      ra\n  400164:       27bd0018        addiu   sp,sp,24\n\n00400168 &lt;main&gt;:\n  400168:       27bdffe8        addiu   sp,sp,-24\n  40016c:       afbe0010        sw      s8,16(sp)\n  400170:       03a0f021        move    s8,sp\n  400174:       c7808004        lwc1    $f0,-32764(gp)\n  400178:       00000000        nop\n  40017c:       e7c00008        swc1    $f0,8(s8)\n  400180:       c7808008        lwc1    $f0,-32760(gp)\n  400184:       00000000        nop\n  400188:       e7c00004        swc1    $f0,4(s8)\n  40018c:       c7c20008        lwc1    $f2,8(s8)\n  400190:       c7c00004        lwc1    $f0,4(s8)\n  400194:       00000000        nop\n  400198:       46001000        add.s   $f0,$f2,$f0\n  40019c:       e7c00000        swc1    $f0,0(s8)\n  4001a0:       03c0e821        move    sp,s8\n  4001a4:       8fbe0010        lw      s8,16(sp)\n  4001a8:       27bd0018        addiu   sp,sp,24\n  4001ac:       03e00008        jr      ra\n  4001b0:       00000000        nop\n\n004001b4 &lt;__do_global_ctors_aux&gt;:\n  4001b4:       3c020040        lui     v0,0x40\n  4001b8:       2442124c        addiu   v0,v0,4684\n  4001bc:       8c44fffc        lw      a0,-4(v0)\n  4001c0:       27bdffe0        addiu   sp,sp,-32\n  4001c4:       2403ffff        li      v1,-1\n  4001c8:       afb00010        sw      s0,16(sp)\n  4001cc:       afbf0018        sw      ra,24(sp)\n  4001d0:       afb10014        sw      s1,20(sp)\n  4001d4:       10830008        beq     a0,v1,4001f8 &lt;__do_global_ctors_aux+0x44&gt;\n  4001d8:       2450fffc        addiu   s0,v0,-4\n  4001dc:       2411ffff        li      s1,-1\n  4001e0:       0080f809        jalr    a0\n  4001e4:       2610fffc        addiu   s0,s0,-4\n  4001e8:       8e040000        lw      a0,0(s0)\n  4001ec:       00000000        nop\n  4001f0:       1491fffb        bne     a0,s1,4001e0 &lt;__do_global_ctors_aux+0x2c&gt;\n  4001f4:       00000000        nop\n  4001f8:       8fbf0018        lw      ra,24(sp)\n  4001fc:       8fb10014        lw      s1,20(sp)\n  400200:       8fb00010        lw      s0,16(sp)\n  400204:       03e00008        jr      ra\n  400208:       27bd0020        addiu   sp,sp,32\n\n0040020c &lt;call___do_global_ctors_aux&gt;:\n  40020c:       27bdffe8        addiu   sp,sp,-24\n  400210:       afbf0010        sw      ra,16(sp)\n  400214:       8fbf0010        lw      ra,16(sp)\n  400218:       00000000        nop\n  40021c:       03e00008        jr      ra\n  400220:       27bd0018        addiu   sp,sp,24\n\nDisassembly of section .fini:\n\n00400224 &lt;_fini&gt;:\n  400224:       27bdffe0        addiu   sp,sp,-32\n  400228:       afbf0014        sw      ra,20(sp)\n  40022c:       0c100010        jal     400040 &lt;_ftext&gt;\n  400230:       00000000        nop\n  400234:       8fbf0014        lw      ra,20(sp)\n  400238:       27bd0020        addiu   sp,sp,32\n  40023c:       03e00008        jr      ra\n  400240:       00000000        nop\n</code></pre>\n\n<p>I am not good at MIPS assembly, can someone explain where are the floating point variable' value 1 and 2?</p>\n"}, {"tags": ["c", "cuda", "2d", "cufft"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1436371581, "post_id": 31297897, "comment_id": 50586497, "body": "please add <a href=\"http://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api/14038590#14038590\">CUDA error checking</a>."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1436372986, "post_id": 31297897, "comment_id": 50587400, "body": "You don&#39;t want to use <code>cudaMallocPitch</code> with cufft.  It&#39;s possible but fairly difficult to get right.  <code>cudaMallocPitch</code> and <code>cudaMemcpy2D</code> are not necessary for doing 2D transforms in cufft."}], "answers": [{"tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 0, "last_activity_date": 1436373083, "creation_date": 1436373083, "answer_id": 31298509, "question_id": 31297897, "link": "https://stackoverflow.com/questions/31297897/2d-cufft-transform/31298509#31298509", "title": "2D cufft transform", "body": "<p>The problem may come from the last <code>cudaMemcpy()</code> :</p>\n\n<pre><code>cudaMemcpy2D(h_output[0], host_orig_pitch, d_array, pitch, \n    N2* sizeof(Complex), M2, cudaMemcpyHostToDevice);\n</code></pre>\n\n<p>It will copy data from host to device, and my guess is that you are trying to copy from device to host, just like you did a few lines above :</p>\n\n<pre><code>cudaMemcpy2D(h_output[0], host_orig_pitch, d_array, pitch, \n    N2* sizeof(Complex), M2, cudaMemcpyDeviceToHost);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5089619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5183c67039ef44ad18afdd61004a885?s=128&d=identicon&r=PG&f=1", "display_name": "Zonglin Gu", "link": "https://stackoverflow.com/users/5089619/zonglin-gu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 31298509, "answer_count": 1, "score": 0, "last_activity_date": 1436373083, "creation_date": 1436371299, "question_id": 31297897, "link": "https://stackoverflow.com/questions/31297897/2d-cufft-transform", "title": "2D cufft transform", "body": "<p>My first question on stackoverflow.</p>\n\n<p>I'm new to cuda.<br>\nI simply want to perform a 2D complex-to-complex FFT.<br>\nMy input data is treated and no padding is needed.<br>\nI just cann't get the expected result. Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\n#include &lt;cuda_runtime.h&gt;\n#include &lt;cufft.h&gt;\n\ntypedef float2 Complex;\n\n#define M2 512          // number of rows\n#define N2 2048         // number of columns\n\nint main()\n{\n    int     i, j;\n    FILE    *fp;\n    char    *fmt = \"%16e\";\n\n    // Allocate memory for h_input and h_output on host\n    // And make sure they are continuous\n\n    Complex     **h_input, **h_output;\n\n    h_input = (Complex **)malloc(M2*sizeof(Complex *));\n    h_output= (Complex **)malloc(M2*sizeof(Complex *));\n\n    h_input[0] = (Complex *)malloc(M2*N2*sizeof(Complex));\n    h_output[0]= (Complex *)malloc(M2*N2*sizeof(Complex));\n\n    for (i = 1; i &lt; M2; i++){\n        h_input[i] = h_input[i - 1] + N2;\n        h_output[i]= h_output[i - 1] + N2;\n    }\n\n    // Load h_input from a file \n    if ((fp = fopen(\"INFLU_ORIGIN.DAT\", \"rt\")) == NULL){\n        printf(\"\\nCannot open file strike any key exit!\");\n    }\n\n    for (i = 0; i &lt;= M2 - 1; i++){\n        for (j = 0; j &lt;= N2 - 1; j++){\n            fscanf(fp, fmt, &amp;h_input[i][j].x);\n            h_input[i][j].y = 0.0;\n        }\n        fscanf(fp, \"%\\n\");\n    }\n\n    fclose(fp);\n\n\n    // allocate memory on device and copy h_input into d_array\n    Complex     *d_array;\n    size_t      host_orig_pitch = N2 * sizeof(Complex);\n    size_t      pitch;\n\n    cudaMallocPitch(&amp;d_array, &amp;pitch, N2 * sizeof(Complex), M2);\n\n    cudaMemcpy2D(d_array, pitch, h_input[0], host_orig_pitch, \n        N2* sizeof(Complex), M2, cudaMemcpyHostToDevice);\n\n\n    // Copy d_array back to host, and write it to a file\n    // to check if they are as correctly copied into device\n\n    cudaMemcpy2D(h_output[0], host_orig_pitch, d_array, pitch, \n        N2* sizeof(Complex), M2, cudaMemcpyDeviceToHost);\n\n    if ((fp = fopen(\"INFLU_FFT_GET.DAT\", \"wt\")) == NULL){\n        printf(\"\\nCannot create file strike any key exit!\");\n    }\n\n    for (i = 0; i &lt;= M2 - 1; i++){\n        for (j = 0; j &lt;= N2 - 1; j++){\n            fprintf(fp, fmt, h_output[i][j].x);\n        }\n        fprintf(fp, \"%\\n\");\n    }\n\n    fclose(fp);\n\n\n    // create CUFFT plan\n    cufftHandle plan;\n    cufftResult filter_result;\n\n    filter_result = cufftPlan2d(&amp;plan, M2, N2, CUFFT_C2C);\n\n    if (filter_result != CUFFT_SUCCESS){\n        printf(\"\\n failed to create plan \\n\");\n    }\n    else{\n        printf(\"\\n succeeded in creating plan \\n\");\n    }\n\n    // perform forward FFT on d_array\n    printf(\"\\nTransforming influence coefficient cufftExecC2C\\n\");\n    filter_result = cufftExecC2C(plan, (cufftComplex *)d_array, \n        (cufftComplex *)d_array, CUFFT_FORWARD);\n\n    if (filter_result != CUFFT_SUCCESS){\n        printf(\"\\ntransform failed\\n\");\n    }\n    else{\n        printf(\"\\ntranform succeed\\n\");\n    }\n\n    // Copy the fft result to host, write it to a file\n    // to observe the result of FFT\n    cudaMemcpy2D(h_output[0], host_orig_pitch, d_array, pitch, \n        N2* sizeof(Complex), M2, cudaMemcpyHostToDevice);\n\n    if ((fp = fopen(\"INFLU_FFT_C.DAT\", \"wt\")) == NULL){\n        printf(\"\\nCannot create file strike any key exit!\");\n    }\n\n    for (i = 0; i &lt;= M2-1; i++){\n        for (j = 0; j &lt;= N2-1; j++){\n            fprintf(fp, fmt, h_output[i][j].x);\n        }\n        fprintf(fp, \"%\\n\");\n    }\n\n    fclose(fp);\n\n    cufftDestroy(plan);\n\n    free(h_input[0]);\n    free(h_input);\n    free(h_output[0]);\n    free(h_output);\n    cudaFree(d_array);\n\n    cudaDeviceReset();\n\n}\n</code></pre>\n\n<p>The workflow of this code is as follows:</p>\n\n<p>(1) Allocate h_input and h_output on host<br>\n(2) Load data into h_input from a file  -- \"INFLU.DAT\"<br>\n(3) Allocate d_array on device, and copy h_input into it<br>\n(4) Copy d_array back to h_output, write to file  -- \"INFLU_GET.DAT\"<br>\n----    to see if d_array has received the correct data<br>\n(5) Perform a forward complex-to-complex FFT on d_array<br>\n(6) Copy d_array back to h_output, write to file  -- \"INFLU_FFT.DAT\"<br>\n---- to observe the result of FFT</p>\n\n<p>By doing step (4) , I'm sure the copy of h_input into d_array is correct.</p>\n\n<p>My problem is:<br>\nIn step (6), I found that after the FFT, d_array and h_output are still the same as the input.</p>\n\n<p>The input file is:<br>\n<a href=\"https://drive.google.com/file/d/0B88U83cfBwMmdGFtbGJ2MVlURDg/view?usp=sharing\" rel=\"nofollow\">https://drive.google.com/file/d/0B88U83cfBwMmdGFtbGJ2MVlURDg/view?usp=sharing</a><br>\nthe filename is INFLU.DAT, size is 16MB. </p>\n\n<p>I have a result file for comparison (did in Fortran):<br>\n<a href=\"https://drive.google.com/file/d/0B88U83cfBwMmcDR1YzYyRzF4Mjg/view?usp=sharing\" rel=\"nofollow\">https://drive.google.com/file/d/0B88U83cfBwMmcDR1YzYyRzF4Mjg/view?usp=sharing</a><br>\nthe filename is INFLU_FFT_F.DAT, size is also 16MB. </p>\n\n<p>Any suggestion is welcome! Thanks!</p>\n"}, {"tags": ["python", "c", "swig"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4529520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ca303cfd4b01d5d6dcb85840859b22?s=128&d=identicon&r=PG&f=1", "display_name": "cactucy", "link": "https://stackoverflow.com/users/4529520/cactucy"}, "edited": false, "score": 0, "creation_date": 1436510812, "post_id": 31301427, "comment_id": 50653009, "body": "That&#39;s a nice trick, thanks! Is there any other way where modifying the source file is not needed?"}], "tags": [], "owner": {"reputation": 231, "user_id": 1603634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975deb0d852da1e6a1f15797f24ab4d?s=128&d=identicon&r=PG&f=1", "display_name": "David LaPorte", "link": "https://stackoverflow.com/users/1603634/david-laporte"}, "is_accepted": false, "score": 0, "last_activity_date": 1436381982, "creation_date": 1436381982, "answer_id": 31301427, "question_id": 31297859, "link": "https://stackoverflow.com/questions/31297859/swig-a-subset-of-c-module-while-ignoring-the-rest-of-the-module-with-other-depen/31301427#31301427", "title": "Swig a subset of C module while ignoring the rest of the module with other dependencies", "body": "<p>You can use conditional compilation in the <code>my.c</code> file:</p>\n\n<pre><code>foo() {\n   // foo stuff\n}\n#if !defined(COMPILING_FOR_SWIG)\nbar() {\n   gee();\n}\n#endif\n</code></pre>\n\n<p>then when you build <code>my.c</code>, make sure you update the compiler settings to <code>#define COMPILING_FOR_SWIG</code>, e.g. usually adding the compiler option <code>-DCOMPILING_FOR_SWIG</code>. This will make sure that the compiler ignores the <code>bar()</code> function.</p>\n\n<p>(Note that <code>COMPILING_FOR_SWIG</code> is a completely arbitrary name and could be changed to something else of your choosing)</p>\n"}], "owner": {"reputation": 11, "user_id": 4529520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ca303cfd4b01d5d6dcb85840859b22?s=128&d=identicon&r=PG&f=1", "display_name": "cactucy", "link": "https://stackoverflow.com/users/4529520/cactucy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436381982, "creation_date": 1436371197, "question_id": 31297859, "link": "https://stackoverflow.com/questions/31297859/swig-a-subset-of-c-module-while-ignoring-the-rest-of-the-module-with-other-depen", "title": "Swig a subset of C module while ignoring the rest of the module with other dependencies", "body": "<p>I have a my.c file that defines function \"foo\" and \"bar\", where \"foo\" is standalone by itself and \"bar\" calls other functions, say \"gee\", defined in a bunch of other files that I don't want to be swigged.</p>\n\n<p>Now I want to use Swig to wrap \"foo\" from my.c, without involving other files or functions. I defined a swig interface for foo:</p>\n\n<pre><code>%module sample                                                                                       \n%{                                                         \n/* Put headers and other declarations here */                                                       \nextern float    foo();                                            \n%}                                                                                                             \nextern float    foo();\n</code></pre>\n\n<p>I was able to build the _my.so library, but when I try to call \"foo\" from python, it says:</p>\n\n<p><strong>ImportError: _my.so: undefined symbol: \"gee\".</strong></p>\n\n<p>And if I remove the definition of \"bar\" from my.c, the whole thing works.</p>\n\n<p>Is there a way to tell swig to ignore \"bar\" and \"gee\"? I even tried to add \"%ignore bar;\" and \"%ignore gee;\" in the interface, and they don't solve the issue.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "sockets", "client-server"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 1550539, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F1PiE.jpg?s=128&g=1", "display_name": "Nawar Youssef", "link": "https://stackoverflow.com/users/1550539/nawar-youssef"}, "edited": false, "score": 0, "creation_date": 1436373377, "post_id": 31297707, "comment_id": 50587622, "body": "I checked how many bytes <code>read()</code> return, it returned 200 bytes!!! Any idea how to deal with that?"}], "tags": [], "owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "is_accepted": false, "score": 4, "last_activity_date": 1436370739, "creation_date": 1436370739, "answer_id": 31297707, "question_id": 31297517, "link": "https://stackoverflow.com/questions/31297517/server-cant-read-all-messages-from-client/31297707#31297707", "title": "Server can&#39;t read all messages from client?", "body": "<p>TCP does not support messages. It provides a boundaryless stream of bytes. You have not made use of the return value of read to find out how many bytes you actually got. You assumed that each read will return one application message which is not so.</p>\n"}], "owner": {"reputation": 83, "user_id": 1550539, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F1PiE.jpg?s=128&g=1", "display_name": "Nawar Youssef", "link": "https://stackoverflow.com/users/1550539/nawar-youssef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436395577, "creation_date": 1436370248, "last_edit_date": 1592644375, "question_id": 31297517, "link": "https://stackoverflow.com/questions/31297517/server-cant-read-all-messages-from-client", "title": "Server can&#39;t read all messages from client?", "body": "<p>In this program I am trying to send 10 messages (C 0, C 1, D 2 ... C 9) from client_A to the server. I have edited this question as I've been advised by other users. Now the code handles all errors could possibly caused by the system calls, also I fixed a lot of bugs.\nI am facing a situation where is no error generated by any system call. the program reads the first message, print the number of bytes it read (200) and then shows that there is &quot;No such file or directory&quot;, and prints the number of the loop at which it stopped.</p>\n<p>This is the part of the code where the program listens and reads from the socket:</p>\n<pre><code>//accept connections  \ntv.tv_sec = 0;\ntv.tv_usec = 0;\nfor (i = 0; i &lt; ns; i++) { //ns=1\n   len = sizeof(who);\n   sc[i] = accept (ls, (struct sockaddr *) &amp;who, &amp;len);\n   if(sc[i] &lt; 0)\n      perror(&quot;Faild to accept socket - in server_process&quot;);\n\n   n[i] = 1;\n}\n\n//select connections and read from sockets\ni = 0;\nwhile(i &lt; 10) {\n  FD_ZERO(&amp;rmask);\n  for (j = 0; j &lt; ns; j++) {\n     if (n[j] &gt; 0) {\n        FD_SET(sc[j], &amp;rmask);\n     }\n  }\n  select (32, &amp;rmask, NULL, NULL, &amp;tv);\n  for (j = 0; j &lt; ns; j++) {\n    if ((FD_ISSET(sc[j], &amp;rmask))){ \n        if ((n[j] = read(sc[j], buf, max)) &gt; 0) {\n          time (&amp;now);\n          printf (&quot;\\n $d bytes read. %s %s&quot;, n[j], buf, ctime (&amp;now));\n          i++;\n        }else{\n          perror(&quot;Faild to read socket - in server_process&quot;);\n          exit(1);\n        }\n    }//if\n  }//for\n}\n\n//close all connections\nclose(ls);\nfor (i = 0; i &lt; ns; i++) {\n  close (sc[i]);\n}\n</code></pre>\n<p>And this is the part of the code where the program write into the socket:</p>\n<pre><code>for (i = 0; i &lt; 10; i++) {\n   x = (rand() % 2);\n   if (x == 1)\n      ch = 'C';\n   else\n      ch = 'D';\n\n   sprintf(msgbuf, &quot;Message from A: %c %d&quot;, ch, i);\n   printf(&quot;before wirte to socket!&quot;);\n   wr = write(s, msgbuf, strlen (msgbuf) + 1);\n   if (wr &lt; 0) {\n      perror(&quot;Faild to write from client_A - in clientA&quot;);\n   }   \n}\n</code></pre>\n<p>If more code needed to be shown, please let me know. The only output it shows is:</p>\n<blockquote>\n<p>num of bytes: 200 message: Message from A: C 0 Wed Jul  8 18:29:19 2015</p>\n<p>Faild to read socket - in server_process: No such file or directory</p>\n<p>2</p>\n</blockquote>\n"}, {"tags": ["c", "x86-64", "ptrace"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1436370380, "post_id": 31297331, "comment_id": 50585695, "body": "Are you checking the result of <code>ptrace</code> for an error? Also, do <code>cat &#47;proc&#47;[pid]&#47;maps</code> and see if the addresses are in any of the ranges."}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1436370937, "post_id": 31297331, "comment_id": 50586077, "body": "Huh...everything checks out.  That&#39;s strange - I&#39;m getting some weird segfaults when I try to use those values later on.  It seems the instruction pointer is aimed somewhere in the middle of the pthread library.  Might have to go back to the drawing board...in any event, thank you for the <code>cat &#47;proc&#47;[pid]&#47;maps</code> tip!"}], "owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437074272, "creation_date": 1436369776, "last_edit_date": 1437074272, "question_id": 31297331, "link": "https://stackoverflow.com/questions/31297331/ptrace-getregs-seems-to-return-junk-values", "title": "PTRACE_GETREGS (seems) to return junk values", "body": "<p>I'm trying to use <code>ptrace</code> to access the registers of a particular thread in a child process. The values I'm getting seem to be junk however - they seem to be way out in the weeks. Here's what I mean:</p>\n\n<pre><code>RAX: fffffffffffffdfc\nRBX: 7f0533fe7700\nRCX: ffffffffffffffff\nRDX: 0\nRSI: 0\nRDI: 7f0533fe6ea0\nRBP: 7f0533fe6ed0\nRSP: 7f0533fe6e70\nRIP: 7f05345fab9d\n</code></pre>\n\n<p>I can believe RAX and RCX, but the stack pointer, instruction pointer, and block pointers are suspicious. On top of that, accessing those values with GDB crashes GDB (I didn't realize I could do that haha). Should I perhaps be using PTRACE_GETREGSET instead of PTRACE_GETREGS? I'm on an x86_64 system, so I didn't think it made a difference. Or should I be looking elsewhere?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 2, "creation_date": 1436370161, "post_id": 31297287, "comment_id": 50585552, "body": "Do you need the output to go to an intermediate file? If not, just read/write form stdin/out and pipe the output of the first command into the second."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 384, "user_id": 5081035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kkTWs3vI4Z8/AAAAAAAAAAI/AAAAAAAAADc/-Uqh_lQ1rOw/photo.jpg?sz=128", "display_name": "Bizkit", "link": "https://stackoverflow.com/users/5081035/bizkit"}, "edited": false, "score": 0, "creation_date": 1436370422, "post_id": 31297287, "comment_id": 50585726, "body": "@Bizkit (and Borgleader) You sure? <code>cout &lt;&lt; i &lt;&lt; endl;</code> Seems to be shitty C++."}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 1, "creation_date": 1436370659, "post_id": 31297287, "comment_id": 50585889, "body": "Use r+ mode so that file will be open for both reading &amp; writing"}, {"owner": {"reputation": 253, "user_id": 5060988, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ef9a1706b1dfa14235bab91783d3187a?s=128&d=identicon&r=PG&f=1", "display_name": "jdscardoso", "link": "https://stackoverflow.com/users/5060988/jdscardoso"}, "edited": false, "score": 0, "creation_date": 1436370752, "post_id": 31297287, "comment_id": 50585951, "body": "Unfortunately I need, for future applications. It happens that i have nodejs addon and i cannot make pipes between nodejs(exe) and addon(dll). I want to interpret audio streaming while it arrive. So I am trying a way of reading wav while it arrives. This is the start-up exemple for me."}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1436371280, "post_id": 31297287, "comment_id": 50586288, "body": "Rough idea - the thing which you want can be implemented by using two file pointer , one for reading &amp; one for writing. Writing file pointer will occur first , then reading file pointer will occur. There will be one loop for(;;) inside it writing pointer will write first line ; then reading pointer will read that line and it will continue till eof.. this is just rough idea."}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1436372802, "post_id": 31297287, "comment_id": 50587273, "body": "I would look into using <code>read()</code> and <code>write()</code> instead of standard library io.  Also, you maybe can still create pipes.  You can create pipes at the OS level and as far as your applications know, they&#39;re just reading from and writing to files still."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1436378425, "post_id": 31297287, "comment_id": 50590755, "body": "You can also do <code>prog1 | tee out.txt | prog2</code> (<code>tee</code> takes stdin and both saves it to a file and echoes it to stdout)"}], "answers": [{"comments": [{"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1436374860, "post_id": 31298690, "comment_id": 50588563, "body": "You didn&#39;t specify OS, but the above example was on cygwin"}], "tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 0, "last_activity_date": 1436373601, "creation_date": 1436373601, "answer_id": 31298690, "question_id": 31297287, "link": "https://stackoverflow.com/questions/31297287/write-and-read-at-the-same-time-c/31298690#31298690", "title": "Write and Read at the Same Time - C", "body": "<p>I think you can achieve this with <em>named pipes</em>.  nodejs shouldn't matter for this because as far as your programs are concerned, it's just a normal file.</p>\n\n<h3>Read session</h3>\n\n<pre><code>$ mkfifo text.fifo\n$ cat text.fifo\n</code></pre>\n\n<h3>foo.c</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n  FILE * f = fopen (\"text.fifo\", \"w\");\n\n  for (int i = 0; i &lt; 10; ++i)\n  {\n    fprintf (f, \"Sup %d\\n\", i);\n    fflush (f);\n    sleep(1);\n  }\n\n  fclose(f);\n\n  return 0;\n}\n</code></pre>\n\n<h3>Write Session</h3>\n\n<pre><code>$ gcc foo.c -std=c99\n$ ./a.exe\n$\n</code></pre>\n\n<h3>Read Session</h3>\n\n<pre><code>$ mkfifo text.fifo\n$ cat text.fifo\nSup 0\nSup 1\nSup 2\nSup 3\nSup 4\nSup 5\nSup 6\nSup 7\nSup 8\nSup 9\n\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 5060988, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ef9a1706b1dfa14235bab91783d3187a?s=128&d=identicon&r=PG&f=1", "display_name": "jdscardoso", "link": "https://stackoverflow.com/users/5060988/jdscardoso"}, "is_accepted": false, "score": 0, "last_activity_date": 1436455350, "last_edit_date": 1436455350, "creation_date": 1436376472, "answer_id": 31299597, "question_id": 31297287, "link": "https://stackoverflow.com/questions/31297287/write-and-read-at-the-same-time-c/31299597#31299597", "title": "Write and Read at the Same Time - C", "body": "<p>My ugly final solution:</p>\n\n<p><strong>writer:</strong></p>\n\n<pre><code>for (;;){`\n\n   //printing single chatacters\n   char c[25] = \"ABCDEFGHIJLMNOPQRSTUVXZ\";\n\n    //fprintf(f, \"A character: %c\\n\", c[i]);\n    fprintf(f, \"-%c\", c[i]);\n    fflush(f);\n    printf(\"-%c\", c[i]);\n    i++;\n    _sleep(1000);\n    if (i == 20){\n        break;\n    }\n\n    fclose(f); \n</code></pre>\n\n<p><strong>reader:</strong></p>\n\n<pre><code>file = fopen(\"file.txt\", \"r\");\n\nif (file) {\n    //while (((nread = fread(buf, 1, sizeof buf, file)) &gt; 0)){\n    while ((((nread = fread(buf, 1, sizeof buf, file)) &gt;= 0))){\n        fwrite(buf, 1, nread, stdout);\n        //_sleep(1000);\n\n        int size= sizeof buf;\n        for (int i = 0; size; i++){\n            if (buf[i] == 'R') { //my [eof]\n                out = 1;\n                break;\n            }\n            if (i == 10){//preventing buf[] empty - need improvement\n                break;\n            }\n        }\n        if (out== 1) break;\n    }\n    if (ferror(file)) {\n        printf(\"Bad. \\n\");\n    }\n    fclose(file);\n}\n</code></pre>\n\n<p>Is not very efficient but works fine.</p>\n"}], "owner": {"reputation": 253, "user_id": 5060988, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ef9a1706b1dfa14235bab91783d3187a?s=128&d=identicon&r=PG&f=1", "display_name": "jdscardoso", "link": "https://stackoverflow.com/users/5060988/jdscardoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1055, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1436455350, "creation_date": 1436369661, "last_edit_date": 1436373699, "question_id": 31297287, "link": "https://stackoverflow.com/questions/31297287/write-and-read-at-the-same-time-c", "title": "Write and Read at the Same Time - C", "body": "<p>This is a sketch how I want to write a .txt:</p>\n\n<pre><code>time_t timer;\nstruct tm y2k = { 0 };\nint seconds;\nint seconds_prev= 0;\nint i = 0;\ny2k.tm_hour = 0;   y2k.tm_min = 0; y2k.tm_sec = 0;\ny2k.tm_year = 100; y2k.tm_mon = 0; y2k.tm_mday = 1;\n\nFILE *f = fopen(\"file.txt\", \"w\");\n\nif (f == NULL)\n{\n    printf(\"Error opening file!\\n\");\n    return 0;\n}\n\nfor (;;){\n\n    time(&amp;timer);   \n    seconds = difftime(timer, mktime(&amp;y2k));\n\n    if (seconds % 2 == 0 &amp;&amp; seconds!=seconds_prev) {\n        seconds_prev= seconds;\n        const char *text = \"AAAAAA\";\n        fprintf(f, \"%d-%s\\n\",i, text);\n        fflush(f);\n        i++\n        if (i == 20){\n            break;\n        }\n    }\n}\n\nfclose(f);\n</code></pre>\n\n<p>This script enable writing roughly 1 line per second in a text file.\nNow I want to read this file until it is complete.</p>\n\n<pre><code>FILE *file;\nsize_t nread;\n\nfile = fopen(\"file.txt\", \"r\");\nif (file) {\n    /*pseudo code*/\n    //(reading loop)\n    //(some condition that detects the true end of file writing)\n    //(buffering information)\n    //(end of loop)\n    /**************/\n\n    if (ferror(file)) {\n        /* deal with error */\n    }\n    fclose(file);\n}\n</code></pre>\n\n<p>So the main objective is to read the \"file.txt\" while it is been writing. The big problem that I face, is the fact that the script only reads the information already written and stops the reading. I am searching some condition, flag, etc that me let resolve this problem. So far, nothing</p>\n"}, {"tags": ["c", "linux", "sdl", "fractals"], "comments": [{"owner": {"reputation": 3, "user_id": 5094447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0b1n0.jpg?s=128&g=1", "display_name": "jpapot", "link": "https://stackoverflow.com/users/5094447/jpapot"}, "edited": false, "score": 0, "creation_date": 1436422496, "post_id": 31297095, "comment_id": 50607530, "body": "Hello and thank you very much for your answers.  The proposition of user5071535 is a very good solution. I have no more stops of the program ! Thank you so much. The program runs even better than before and I can &quot;zoom&quot; inside the image much more. When it stopped before, I thought it was because of the lack of precision due to the limits of the digits for the &#39;double&#39; numbers. Now I can explore new areas.  I also tried the &quot;assert&quot; proposition by ooga, but I have a complilation problem with this command (but I am not a specialist). I try again tomorrow !  JP"}, {"owner": {"reputation": 3, "user_id": 5094447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0b1n0.jpg?s=128&g=1", "display_name": "jpapot", "link": "https://stackoverflow.com/users/5094447/jpapot"}, "edited": false, "score": 0, "creation_date": 1436423988, "post_id": 31297095, "comment_id": 50608307, "body": "Hello again. Adding #include &lt;assert.h&gt; and the 6 different assert commands, I could not see the difference for the moment.  Thanks again for helping me to debug this program !"}], "answers": [{"tags": [], "owner": {"reputation": 1147, "user_id": 5071535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8bc64d99de802e3fc17bedc722f6dd9e?s=128&d=identicon&r=PG&f=1", "display_name": "user5071535", "link": "https://stackoverflow.com/users/5071535/user5071535"}, "is_accepted": true, "score": 2, "last_activity_date": 1436372801, "creation_date": 1436372801, "answer_id": 31298418, "question_id": 31297095, "link": "https://stackoverflow.com/questions/31297095/pb-with-a-c-programm-double-free-or-corruption-prev/31298418#31298418", "title": "Pb with a C programm : double free or corruption (!prev)", "body": "<p>Looks like you're freeing your SDL_Surface pointer \"rectangle\" once extra on line 309. If you comment that line out it runs fine.</p>\n\n<p>When the code gets into the \"SDL_MOUSEBUTTONUP\" case of your switch statement, it frees the rectangle, then on line 309 it's freed again.</p>\n"}, {"tags": [], "owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "is_accepted": false, "score": 0, "last_activity_date": 1436373657, "last_edit_date": 1436373657, "creation_date": 1436373339, "answer_id": 31298598, "question_id": 31297095, "link": "https://stackoverflow.com/questions/31297095/pb-with-a-c-programm-double-free-or-corruption-prev/31298598#31298598", "title": "Pb with a C programm : double free or corruption (!prev)", "body": "<p>You are overrunning tableauX (and possibly tableauY, if given a chance). Put asserts before them:</p>\n\n<pre><code>assert(j &lt; LARGEUR_ECRAN);\ntableauY[j] = yC;\n</code></pre>\n\n<p>Put an assert before all accesses (there are 6 in your program).</p>\n\n<p>I did this and the following assertion failed</p>\n\n<pre><code>assert(position.x &lt; LARGEUR_ECRAN)\nxTemp1 = tableauX [position.x];\n</code></pre>\n\n<p>That the assertion failed means that position.x is >= LARGEUR_ECRAN. In fact it was 1243, whereas LARGEUR_ECRAN is 1050. Note that the failure will not necessarily occur on the first out-of-bounds access, which is why it didn't happen as soon as position.x reached 1050.</p>\n\n<p>Also note that it's possible to run \"successfully\" (even with the bug) on one system while crashing on another.</p>\n\n<p>EDIT: Actually, user5071535 seems to have found a more likely source for your error message, but I may have uncovered a different bug here.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4390358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yXTU.jpg?s=128&g=1", "display_name": "Trevud0", "link": "https://stackoverflow.com/users/4390358/trevud0"}, "is_accepted": false, "score": 0, "last_activity_date": 1458797997, "last_edit_date": 1458797997, "creation_date": 1458797503, "answer_id": 36193841, "question_id": 31297095, "link": "https://stackoverflow.com/questions/31297095/pb-with-a-c-programm-double-free-or-corruption-prev/36193841#36193841", "title": "Pb with a C programm : double free or corruption (!prev)", "body": "<p>Every free() on unallocated pointer or in a pointer different of NULL will return this error. Certify yourself if pointer its already allocated or is equal to NULL before any try of free(). Anyway, any try to work in an unallocated pointer or improperly/insufficient allocated will return this error. The fact of under Windows the things happens differently, its only a question of \"lucky\": Bad codes will fail at any plattform on an \"random\" time inevitably. Sorry for bad english.</p>\n"}], "owner": {"reputation": 3, "user_id": 5094447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0b1n0.jpg?s=128&g=1", "display_name": "jpapot", "link": "https://stackoverflow.com/users/5094447/jpapot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 31298418, "answer_count": 3, "score": 0, "last_activity_date": 1458797997, "creation_date": 1436369165, "last_edit_date": 1436538102, "question_id": 31297095, "link": "https://stackoverflow.com/questions/31297095/pb-with-a-c-programm-double-free-or-corruption-prev", "title": "Pb with a C programm : double free or corruption (!prev)", "body": "<p>A few years ago, when Benoit Mandelbrot died, I decided to make a small program to calculate and see his famous fractal set. I did it many years ago before (with turbo pascal language) - At this period, the calculus took one night. So I decided to learn a little of C language. With code::blocks and the SDL Library (and many helps), I finally wrote a program were I could see the set, and zoom inside with my mouse.\nIt worked good, I was under windows. Instead of one night of calculus, it took 5 seconds to do the same job. </p>\n\n<p>Recently I decided to discover linux, installed the same IDE with the SDL,. The program is compiling OK. It begins to run, and suddenly, when I use the mouse (left-clic up and down to select the new squared area where to zoom in), the program stops.</p>\n\n<p>The message is :</p>\n\n<pre><code>double free or corruption (!prev)\n</code></pre>\n\n<p>The strange thing is that it never happened when I ran the code under windows. So here is a mysterious thing for me. I don't know what means double <strong>free</strong> or <strong>corruption</strong> here.</p>\n\n<p>For a better help you could eventually send me, I join the code of the program (not perfect). Maybe someone could find where the problem is ...\nThe program was writen to be seen on a 1680x1050 pxl screen.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;SDL/SDL.h&gt;\n//#include &lt;SDL/SDL_ttf.h&gt;\n\n#define MAXITERATIONS 2000\n#define CONST_DIVERGENCE 4\n\n#define LONGUEUR_ECRAN 1680 //ajout d'une zone d'information et d'interaction de 630 pixels de large \u00e0 droite de l'image.\n#define LARGEUR_ECRAN 1050  // c\u00f4t\u00e9 du carr\u00e9 o\u00f9 l'image est calcul\u00e9e.\n\n\nint i  , j ; /* i variable \u00e9cran qui parcourt les abscisses entre 0 et LARGEUR_ECRAN\n                j les ordonn\u00e9es entre 0 et LARGEUR_ECRAN */\nint n ,t ; // it\u00e9rations pour le calcul de convergence\nint color,color1,color2,color3 ; //variable pour la couleur\n\nint continuer = 1;\nint recalculer = 1;\nint recommencer = 1;\n\ndouble XDEBUT = -2.05; // coordonn\u00e9es du point de d\u00e9part en haut \u00e0 gauche du carr\u00e9 du plan complexe\ndouble YDEBUT = -1.35;\ndouble DELTA = 2.7 ; // longueur du c\u00f4t\u00e9 du carr\u00e9 du plan complexe au d\u00e9part\ndouble xC =0 , yC = 0 ; // coordonn\u00e9es du point du plan o\u00f9 on effectue les calculs\ndouble xZ  , yZ ; // coordonn\u00e9es pour le calcul de la convergence\ndouble xT = 0 ; // valeur temporaire d'allocation\n\ndouble xTemp1 =0, yTemp1 = 0 ;\ndouble xTemp2 =0, yTemp2 = 0 ;\n\nint xTemoinDebut =1065; //variables pour positionner les cadres dans le Mandel t\u00e9moin\nint yTemoinDebut =15;   //\nint deltaTemoin =600;   //\n\nint x_1 , y_1;          //variables pour positionner le cadre de zoom dans le grand Mandel\nint x_2 , y_2;          //\nint xdebut , ydebut ;   //\nint delta;              //\n\nvoid placerPoint(SDL_Surface *surface, int x, int y, Uint32 pixel);\nvoid petitMandel ();\n\nint main(int argc, char *argv[])\n{\n    while (recommencer == 1)\n    {\n        recommencer = 0;\n        recalculer =1;\n        continuer =1;\n        double XDEBUT = -2.05; // coordonn\u00e9es du point de d\u00e9part en haut \u00e0 gauche du carr\u00e9 du plan complexe\n        double YDEBUT = -1.35;\n        double DELTA = 2.7 ; // longueur du c\u00f4t\u00e9 du carr\u00e9 du plan complexe au d\u00e9part\n\n        int xTemoinDebut =1065; //variables pour positionner les cadres dans le Mandel t\u00e9moin\n        int yTemoinDebut =15;   //\n        int deltaTemoin =600;   //\n\n        double xC =0 , yC = 0 ; // coordonn\u00e9es du point du plan o\u00f9 on effectue les calculs\n        double xZ  , yZ ; // coordonn\u00e9es pour le calcul de la convergence\n        double xT = 0 ; // valeur temporaire d'allocation\n        double xTemp1 =0, yTemp1 = 0 ;\n        double xTemp2 =0, yTemp2 = 0 ;\n        double tableauX [LARGEUR_ECRAN]= {0};   //tableau pour enregistrer les coordonn\u00e9es r\u00e9elles o\u00f9 on calcule\n        double tableauY [LARGEUR_ECRAN] = {0};  //\n\n\n        SDL_Init(SDL_INIT_VIDEO);\n        SDL_Surface *ecran = NULL,*rectangle=NULL/*,*texte = NULL*/;\n        // SDL_Event event;\n        SDL_Rect position;\n        ecran = SDL_SetVideoMode(LONGUEUR_ECRAN,LARGEUR_ECRAN, 32, SDL_HWSURFACE | SDL_FULLSCREEN); // mode vid\u00e9o : \u00e9cran complet\n        SDL_LockSurface(ecran);\n        //   SDL_FillRect(ecran, NULL, SDL_MapRGB(ecran-&gt;format, 0, 0, 0)); // remplissage de l'\u00e9cran en noir\n        //  TTF_Font *police = NULL;\n        //  SDL_Color couleurBleue = {0,0,255};\n        //  TTF_Init();\n\n        // test d'erreur d'initialisation\n        /*   if (TTF_Init () == -1)\n               {\n                   fprintf(stderr, \"Erreur d'initialisation de TTF_Init : %s \\n\",TTF_GetError ());\n                   exit (EXIT_FAILURE);\n               }*/\n\n        /* TTF_Font *police = NULL;\n         SDL_Color couleurBleue = {0,0,255};\n         police = TTF_OpenFont(\"ankecall.ttf\",20);                                                                                                                                    police = TTF_OpenFont (\"angelina.ttf\",65);\n         texte  = TTF_RenderText_Blended (police, \"Voyage chez Mandelbrot \", couleurBleue);\n         while (continuer)\n             {\n                 SDL_WaitEvent(&amp;event);\n                     switch(event.type)\n                     {\n                         case SDL_QUIT:\n                             continuer = 0;\n                         break;\n                     }\n\n             position.x = 1060;\n             position.y = 630;\n             SDL_BlitSurface (texte, NULL, ecran, &amp;position);\n             SDL_Flip(ecran);\n             }\n         SDL_FreeSurface(texte);\n         TTF_CloseFont(police);\n         TTF_Quit ();\n        */\n\n        petitMandel(); //commande pour calculer un petit mandel t\u00e9moin et un trait rouge\n\n        while (recalculer == 1)\n        {\n            for ( j = 0 ; j &lt; LARGEUR_ECRAN ; j ++) // balayage vertical\n            {\n                yC = YDEBUT + (DELTA * j)/LARGEUR_ECRAN;\n                tableauY[j] = yC;\n            }\n            for ( i = 0 ; i &lt; LARGEUR_ECRAN ; i ++) // balayage horizontal\n            {\n                xC = XDEBUT + (DELTA * i)/LARGEUR_ECRAN;\n                tableauX [i] = xC;\n            }\n\n            for ( j = 0 ; j &lt; LARGEUR_ECRAN ; j ++) // balayage vertical\n            {\n                yC = YDEBUT + (DELTA * j)/LARGEUR_ECRAN;\n                for ( i = 0 ; i &lt; LARGEUR_ECRAN ; i ++) // balayage horizontal\n                {\n                    xC = XDEBUT + (DELTA * i)/LARGEUR_ECRAN;\n                    n = 0 ; // initialisation du compteur de calcul\n                    xZ = 0 ;\n                    yZ = 0 ;\n                    xT = 0 ;\n                    while ( xZ*xZ + yZ*yZ &lt; CONST_DIVERGENCE &amp;&amp; n &lt; MAXITERATIONS)  /* boucle de calcul\n                elle s'arretera si xZ\u00b2+yZ\u00b2 &gt;= 4 ou si on a atteint le maximum d'it\u00e9rations*/\n                    {\n                        xT = xZ ;// variable temporaire pour le calcul de yZ\n                        xZ = xZ*xZ - yZ*yZ + xC ;\n                        yZ = 2*yZ*xT + yC ;\n                        n ++;\n                    }\n\n                    if (n&lt; MAXITERATIONS)                                         // On est en dehors de l'ensemble : mettre en gris\n                        placerPoint(ecran,i,j,SDL_MapRGB(ecran-&gt;format,n,n,n));\n                    else                                                          // On est dans l'ensemble : mettre en noir.\n                        placerPoint(ecran,i,j,SDL_MapRGB(ecran-&gt;format,0,0,0));\n                }\n            }\n            SDL_UnlockSurface(ecran);\n            SDL_Flip(ecran);\n\n            recalculer = 0;\n\n            //Gestion des choix:\n            SDL_Event event;\n            while (continuer &amp; (recalculer == 0))\n            {\n                SDL_WaitEvent(&amp;event);\n                switch(event.type)\n                {\n                case SDL_QUIT:\n                    continuer = 0;\n                    break;\n\n                case SDL_MOUSEBUTTONDOWN:\n                    if (event.button.button == SDL_BUTTON_LEFT)  //si clic gauche enfonc\u00e9\n                    {\n                        position.x = event.button.x;\n                        position.y = event.button.y;\n                        xTemp1 = tableauX [position.x];\n                        yTemp1 = tableauY [position.y];\n                        x_1 = position.x;\n                        y_1 = position.y;\n                    }\n                    break;\n\n                case SDL_MOUSEBUTTONUP:\n                    if (event.button.button == SDL_BUTTON_LEFT)  //si clic gauche relach\u00e9\n                    {\n                        position.x = event.button.x;\n                        position.y = event.button.y;\n                        xTemp2 = tableauX [position.x];\n                        yTemp2 = tableauY [position.y];\n                        x_2 = position.x;\n                        y_2 = position.y;\n\n                        if (xTemp1 &lt;xTemp2)\n                        {\n                            XDEBUT = xTemp1;\n                            xdebut = x_1;\n                        }\n                        else\n                        {\n                            XDEBUT = xTemp2;\n                            xdebut = x_2;\n                        }\n                        if (yTemp1&lt;yTemp2)\n                        {\n                            YDEBUT = yTemp1;\n                            ydebut = y_1;\n                        }\n                        else\n                        {\n                            YDEBUT = yTemp2;\n                            ydebut = y_2;\n                        }\n                        if (fabs(xTemp1-xTemp2)&lt;fabs(yTemp1-yTemp2))\n                        {\n                            DELTA = fabs(yTemp1-yTemp2);\n                            delta = fabs(y_1-y_2);\n                        }\n                        else\n                        {\n                            DELTA = fabs(xTemp1-xTemp2);\n                            delta = fabs(x_1-x_2);\n                        }\n                        // dessin du cadre blanc pour zoomer dans l'image principale\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE, 1, delta, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xdebut ; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = ydebut ;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE,delta, 1, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xdebut ; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = ydebut ;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE, 1, delta, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xdebut + delta; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = ydebut ;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE, delta, 1, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xdebut ; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = ydebut + delta;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        //dessin du cadre dans le mandelbrot t\u00e9moin\n\n                        xTemoinDebut = floor(xdebut*deltaTemoin/1050) + xTemoinDebut;\n                        yTemoinDebut = floor(ydebut*deltaTemoin/1050) + yTemoinDebut;\n                        deltaTemoin = floor(delta*deltaTemoin/1050);\n\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE, 1, deltaTemoin, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xTemoinDebut ; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = yTemoinDebut ;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE, deltaTemoin, 1, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xTemoinDebut ; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = yTemoinDebut ;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE, 1, deltaTemoin, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xTemoinDebut + deltaTemoin; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = yTemoinDebut ;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        rectangle = SDL_CreateRGBSurface(SDL_HWSURFACE, deltaTemoin, 1, 32, 0, 0, 0, 0); // Allocation du point\n                        position.x = xTemoinDebut ; //  Coordonn\u00e9es du point \u00e0 placer\n                        position.y = yTemoinDebut + deltaTemoin;\n                        SDL_FillRect(rectangle, NULL, SDL_MapRGB(ecran-&gt;format, 255,255,255)); // Remplissage du point en gris.\n                        SDL_BlitSurface(rectangle, NULL, ecran, &amp;position); // Collage du point sur l'\u00e9cran\n                        SDL_Flip(ecran);\n                        SDL_FreeSurface(rectangle);\n\n                        recalculer = 1;\n                    }\n                    break;\n\n                case SDL_KEYDOWN:\n                    if (event.key.keysym.sym == SDLK_ESCAPE)\n                        continuer = 0 ;\n                    if (event.key.keysym.sym == SDLK_r)\n                    {\n                        recommencer = 1 ;\n                        recalculer = 0;\n                        continuer =0;\n                    }\n                    if (event.key.keysym.sym == SDLK_s)\n                        SDL_SaveBMP(ecran , \"Mandel_50.bmp\" ); // Enregistrement de l'image dans un fichier .bmp\n\n                    break;\n                }\n            }\n            SDL_FreeSurface(rectangle); // Lib\u00e9ration de la surface\n        }\n    }\n    SDL_Quit();\n    return EXIT_SUCCESS;\n\n}\nvoid petitMandel ()\n{\n    int x=0,y=0;\n    SDL_Surface *ecran  ;\n    ecran = SDL_GetVideoSurface();\n    SDL_LockSurface(ecran);\n\n    // trait rouge \u00e0 droite de l'image\n    for (j=5; j&lt;=1044; j++)\n    {\n        x = LARGEUR_ECRAN +5 ;\n        y = j ;\n        placerPoint(ecran,x,y,SDL_MapRGB(ecran-&gt;format,200,0,0));\n    }\n    SDL_Flip(ecran);\n\n\n//  instructions pour placer un petit Mandelbrot t\u00e9moin dans la fen\u00eatre \"interactive\"\n    for ( j = 0 ; j &lt; 600 ; j ++) // balayage vertical\n    {\n        yC = YDEBUT + (DELTA * j)/600;\n        for ( i = 0 ; i &lt; 600 ; i ++) // balayage horizontal\n        {\n            xC = XDEBUT + (DELTA * i)/600;\n            n = 0 ; // initialisation du compteur de calcul\n            xZ = 0 ;\n            yZ = 0 ;\n            xT = 0 ;\n            while ( xZ*xZ + yZ*yZ &lt; CONST_DIVERGENCE &amp;&amp; n &lt; 500)  /* boucle de calcul\n                elle s'arretera si xZ\u00b2+yZ\u00b2 &gt;= 4 ou si on a atteint le maximum d'it\u00e9rations*/\n            {\n                xT = xZ ;// variable temporaire pour le calcul de yZ\n                xZ = xZ*xZ - yZ*yZ + xC ;\n                yZ = 2*yZ*xT + yC ;\n                n ++;\n            }\n            if (n&lt; 500)\n            {\n                x = i + 1065 ; //  Coordonn\u00e9es du point \u00e0 placer\n                y = j + 15;\n                color = floor (255-255*log(1+n*255/500)/log(256)); // calcul pour un d\u00e9grad\u00e9 plus progressif*/\n                placerPoint(ecran,x,y,SDL_MapRGB(ecran-&gt;format,color,color,color));\n            }\n        }\n    }\n    SDL_UnlockSurface(ecran);\n    SDL_Flip(ecran);\n}\n\nvoid placerPoint(SDL_Surface *surface, int x, int y, Uint32 pixel)\n{\n    int bpp = surface-&gt;format-&gt;BytesPerPixel;\n\n    Uint8 *p = (Uint8 *)surface-&gt;pixels + y * surface-&gt;pitch + x * bpp;\n\n    switch(bpp)\n    {\n    case 1:\n        *p = pixel;\n        break;\n    case 2:\n        *(Uint16 *)p = pixel;\n        break;\n    case 3:\n        if(SDL_BYTEORDER == SDL_BIG_ENDIAN)\n        {\n            p[0] = (pixel &gt;&gt; 16) &amp; 0xff;\n            p[1] = (pixel &gt;&gt; 8) &amp; 0xff;\n            p[2] = pixel &amp; 0xff;\n        }\n        else\n        {\n            p[0] = pixel &amp; 0xff;\n            p[1] = (pixel &gt;&gt; 8) &amp; 0xff;\n            p[2] = (pixel &gt;&gt; 16) &amp; 0xff;\n        }\n        break;\n    case 4:\n        *(Uint32 *)p = pixel;\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "initializer-list"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1436368373, "post_id": 31296727, "comment_id": 50584173, "body": "Related to: <a href=\"http://stackoverflow.com/q/20694796/1708801\">No compiler error when fixed size char array is initialized without enough room for null terminator</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1436370248, "post_id": 31296727, "comment_id": 50585615, "body": "The question is similar to the supposed duplicate, but I&#39;m curious about the specific case of inconsistent warnings, which none of the answers to the supposed duplicate is addressing. I believe I also received some better answers here. Re-opening. (Feel free to close the other one as a duplicate to this one, I won&#39;t meddle with it since I&#39;m partial :) )"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1436370256, "post_id": 31296727, "comment_id": 50585626, "body": "&quot;<i>I know that the C standard allows excess initializers, unlike C++</i>&quot; -- What do you mean by this? As the answer to the duplicate question says, C explicitly permits a string literal of the exact length of the object; C++ does not. C does not permit excess initializers in general; <code>int arr[2] = { 1, 2, 3, 4 };</code> is illegal in both languages."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1436370392, "post_id": 31296727, "comment_id": 50585701, "body": "The warnings are not inconsistent. C has a specific special-case rule for string literals; it has no such rule for braced initializers. In <code>char b[5] = &quot;hello&quot;;</code> the initializer does not provide a value for <code>b[5]</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436370397, "post_id": 31296727, "comment_id": 50585703, "body": "@KeithThompson I believe that is indeed why gcc behaves differently for the two cases. Ouah has cited the relevant parts covering both cases."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436368490, "post_id": 31296775, "comment_id": 50584256, "body": "Indeed. But why doesn&#39;t it warn consistently between the two cases?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436368839, "post_id": 31296775, "comment_id": 50584553, "body": "@Lundin; Because compiler knows that if the initializer is string literal then <code>\\0</code> may or may not be appended depends on the size of array/buffer."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 1, "creation_date": 1436369671, "post_id": 31296775, "comment_id": 50585198, "body": "<i>not appended to the string because array a</i> You meant array <code>b</code>, right? But this is not enough to explain why <code>char b[5] = &quot;hello&quot;;</code> is valid while <code>char b[5] = &quot;hello!&quot;;</code> is not."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1436369757, "last_edit_date": 1436369757, "creation_date": 1436368376, "answer_id": 31296775, "question_id": 31296727, "link": "https://stackoverflow.com/questions/31296727/inconsistent-gcc-diagnostic-for-string-initialization/31296775#31296775", "title": "Inconsistent gcc diagnostic for string initialization", "body": "<p>In   </p>\n\n<pre><code>char b[5] = \"hello\";  \n</code></pre>\n\n<p><code>\\0</code> is not appended to the string because array <code>b</code> is of size <code>5</code>. This is valid. Compiler think of it as  </p>\n\n<pre><code>char b[5] = {'h','e','l','l','o'};\n</code></pre>\n\n<p>Here <code>b</code> is an array of <code>char</code>s. But, it can't be used in a place where a string literal is to be supposed. For example, You can't use <code>b</code> in <code>printf</code> with <code>%s</code> specifier or <code>str</code> family function.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436368716, "post_id": 31296814, "comment_id": 50584437, "body": "It would seem to me then that &#167;1 and &#167;14 contradict each other, because a string literal is still an initializer. A bug in the C standard?"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1436369235, "post_id": 31296814, "comment_id": 50584873, "body": "@Lundin I don&#39;t take it as a bug but as a special provision when the initializer is a string literal."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 12, "last_activity_date": 1436368740, "last_edit_date": 1436368740, "creation_date": 1436368472, "answer_id": 31296814, "question_id": 31296727, "link": "https://stackoverflow.com/questions/31296727/inconsistent-gcc-diagnostic-for-string-initialization/31296814#31296814", "title": "Inconsistent gcc diagnostic for string initialization", "body": "<p>While:</p>\n\n<pre><code> char a[5] = {'h','e','l','l','o','\\0'};\n</code></pre>\n\n<p>is invalid.</p>\n\n<blockquote>\n  <p>(C11, 6.7.9p2) \"No initializer shall attempt to provide a value for an object not contained within the entity being initialized.\"</p>\n</blockquote>\n\n<p>This:</p>\n\n<pre><code>char b[5] = \"hello\";\n</code></pre>\n\n<p>is explicitly allowed by C (emphasis mine):</p>\n\n<blockquote>\n  <p>(C11, 6.7.9p14) \"An array of character type may be initialized by a character string literal or UTF\u22128 string literal, optionally enclosed in braces. Successive bytes of the string literal (<strong>including the terminating null character if there is room</strong> or if the array is of unknown size) initialize the elements of the array.\"</p>\n</blockquote>\n\n<p>But</p>\n\n<pre><code> char b[5] = \"hello!\";\n</code></pre>\n\n<p>is invalid.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 5, "last_activity_date": 1436369713, "last_edit_date": 1436369713, "creation_date": 1436368684, "answer_id": 31296887, "question_id": 31296727, "link": "https://stackoverflow.com/questions/31296727/inconsistent-gcc-diagnostic-for-string-initialization/31296887#31296887", "title": "Inconsistent gcc diagnostic for string initialization", "body": "<p>It's a weird quirk in the C Standard.  Back in the day, people occasionally used fixed-length, non-null-terminated strings.  (One example was the 14-character filenames in V7 Unix.)  So to let those old programs to continue to compile, it's legal to initialize an explicitly-sized <code>char</code> array with a string constant that ends up scraping off the <code>'\\0'</code>, as you've just observed.</p>\n\n<p>I agree it's surprising that the <code>{'h','e','l','l','o','\\0'}</code> initializer warned while the <code>\"hello\"</code> one did not.  But these are two very different forms, and it turns out that the rules for them are different.  When you give your array a size and you use the <code>{}</code> form, there must be room for all your initializers, period.  But when you give a size and use the <code>\"\"</code> form, there's a special exception for that case and that case only.</p>\n\n<p>(It's also not legal in C++ for either form.)</p>\n"}], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 2, "accepted_answer_id": 31296814, "answer_count": 3, "score": 5, "last_activity_date": 1436391222, "creation_date": 1436368251, "last_edit_date": 1436391222, "question_id": 31296727, "link": "https://stackoverflow.com/questions/31296727/inconsistent-gcc-diagnostic-for-string-initialization", "title": "Inconsistent gcc diagnostic for string initialization", "body": "<p>I'm using gcc 4.9.1/Mingw and compiling the code with:</p>\n\n<blockquote>\n  <p>gcc test.c -otest.exe -std=c11 -pedantic-errors -Wall -Wextra</p>\n</blockquote>\n\n<p>This code gives a diagnostic:</p>\n\n<pre><code>int main (void)\n{\n  char a[5] = {'h','e','l','l','o','\\0'};\n}\n</code></pre>\n\n<blockquote>\n  <p>error: excess elements in array initializer char a[5]</p>\n</blockquote>\n\n<p>However, this code does not yield a warning:</p>\n\n<pre><code>int main (void)\n{\n  char b[5] = \"hello\";\n}\n</code></pre>\n\n<p>I thought the two forms were 100% equivalent. Is there any reason or subtlety in the C standard etc why the latter should not give a warning? </p>\n\n<p>Or is this a compiler bug? I know that the C standard allows excess initializers, unlike C++, so formally I don't believe gcc is <em>required</em> to give a diagnostic. But I would expect the compiler to give warnings consistently.</p>\n"}, {"tags": ["c", "loops", "coredump"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4176275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/366115b95040c7af4b738e067a806e70?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4176275/user"}, "edited": false, "score": 0, "creation_date": 1436368593, "post_id": 31296598, "comment_id": 50584334, "body": "Thanks! How careless I am! haha"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1436367943, "creation_date": 1436367943, "answer_id": 31296598, "question_id": 31296502, "link": "https://stackoverflow.com/questions/31296502/segmentation-fault-core-dumped-error-with-multiple-loops/31296598#31296598", "title": "segmentation fault (core dumped) error with multiple loops", "body": "<p>This:</p>\n\n<pre><code>      for (k=0; k&lt;3; k++) { \n        for (m=0; m&lt;3; k++) { \n</code></pre>\n\n<p>sure looks broken/suspicious to me. Note that both loops increment <code>k</code>, so the outer one will never iterate. The inner one will run forever, I think, and can certainly trigger invalid accesses due to reading all over memory.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1436448225, "creation_date": 1436448225, "answer_id": 31318838, "question_id": 31296502, "link": "https://stackoverflow.com/questions/31296502/segmentation-fault-core-dumped-error-with-multiple-loops/31318838#31318838", "title": "segmentation fault (core dumped) error with multiple loops", "body": "<p>this line is the problem:</p>\n\n<pre><code>for (m=0; m&lt;3; k++)  //&lt;&lt; notice incrementing 'k' rather than 'm'\n</code></pre>\n\n<p>it should be:</p>\n\n<pre><code>for (m=0; m&lt;3; m++)\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4176275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/366115b95040c7af4b738e067a806e70?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4176275/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 31296598, "answer_count": 2, "score": 1, "last_activity_date": 1436448225, "creation_date": 1436367702, "question_id": 31296502, "link": "https://stackoverflow.com/questions/31296502/segmentation-fault-core-dumped-error-with-multiple-loops", "title": "segmentation fault (core dumped) error with multiple loops", "body": "<p>I'm making a sudoku solving program, but I got the segmentation fault (core dumped) error in the function below.\nIn this function, I'm trying to fill in -1 in the places that a specific number cannot be filled.</p>\n\n<p>Does anyone know how to fix this?</p>\n\n<pre><code>void check(int mat[9][9])\n{\n  int i, j, k, m;\n  int num = 1;\n  int top, left;\n\n  while (num &lt; 10) {\n    for (i=0; i&lt;9; i++) {\n      for (j=0; j&lt;9; j++) {\n        if (mat[i][j] == num) {  \n\n//--------- core dumped error occurs here-------------\n\n          for (k=0; k&lt;9; k++) {\n            if (mat[i][k] == 0) mat[i][k] = -1;  // check row\n            if (mat[k][j] == 0) mat[k][j] = -1;  // check column\n          }\n\n          top = (i/3)*3;\n          left = (j/3)*3;\n          for (k=0; k&lt;3; k++) { \n            for (m=0; m&lt;3; k++) { \n              if(mat[k+top][m+left] == 0) mat[k+top][m+left] = -1; // check square\n            }\n          } \n\n//------------------------------------------ \n\n        }\n      }\n    }\n\n    // code abbreviation\n\n    num++;\n    }\n  }\n</code></pre>\n"}, {"tags": ["c", "sockets"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1436367983, "post_id": 31296366, "comment_id": 50583860, "body": "From pieces of code which I send you can see that socket is set as non-block. But I never receive positive answer from poll function regarding POLLOUT. I also tried to use accept function regardles on answer from poll function thus getting active socket, but I receive error: sock_active = accept(pfd[i].fd, (struct sockaddr *) &amp;addr, &amp;addrlen); An if I try direct to use socket for sending: ret = sendto(pfd[i].fd, msg, msg-&gt;message.header.msglen, 0, (struct sockaddr *) &amp;addr, addrlen); I also receive error???"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1436369568, "post_id": 31296366, "comment_id": 50585124, "body": "Looks like I missed a few things.  I&#39;ve updated my answer.  Also, what error are you getting when you try to <code>accept</code>?"}, {"owner": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1436389624, "post_id": 31296366, "comment_id": 50597323, "body": "This is my first time that I use TCP, but non-block worked as is with UDP socket. I will try with yours solution. On accept function I received error -1 and if I continue to sendto function I receive error &quot;SIGPIPE broken pipe&quot;. That means that socket is not active and connected. Problem is if I use connect function, because then socket is active and then I cant switch socket back to listen and use socket for receive."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1436389827, "post_id": 31296366, "comment_id": 50597426, "body": "If you get back -1 from <code>accept</code>, you need to call <code>perror</code> to print the exact error message, otherwise you don&#39;t know what happened.  Also, you can&#39;t use <code>sendto</code> on TCP sockets -- it&#39;s for UDP only.  And the only function you can call on a listening socket is <code>accept</code>."}, {"owner": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1436460081, "post_id": 31296366, "comment_id": 50633426, "body": "You were right about accept, I totally miss understand principle of TCP server. Also I used program which was just sending data to my application thus accept didn`t worked (there were no client). Now I made test client using Microsoft example and now accept works. Server on Linux can now do accept. I try to modify code according to you regarding non-block, but still my socket is block and get stuck on read. Any advice how can I fix this and make my socket non-block.? p.s I next message I will give you my code since message is to long!"}, {"owner": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1436460183, "post_id": 31296366, "comment_id": 50633492, "body": "Here it is &#39;sock_tcp5 = socket(AF_INET, SOCK_STREAM | SOCK_NONBLOCK, IPPROTO_TCP); sockopt = 1; setsockopt(sock_tcp5, SOL_SOCKET, SO_REUSEADDR, &amp;sockopt, sizeof(sockopt)); memset(&amp;addr_tcp5, 0, sizeof(addr_tcp5)); addr_tcp5.sin_family = AF_INET; addr_tcp5.sin_port = htons(10000); addr_tcp5.sin_addr.s_addr = htonl(INADDR_ANY); flag = 0; if ((flag = fcntl(sock_tcp5, F_GETFL)) == -1) { \tperror(&quot;Err&quot;); } flag |= O_NONBLOCK; if (fcntl(sock_tcp5, F_SETFL, flag) == -1) { perror(&quot;Err&quot;); } if (bind(sock_tcp5, (struct sockaddr *) &amp;addr_tcp5, sizeof(addr_tcp5))) { \tperror(&quot;Err&quot;); }&#39;"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1436461386, "post_id": 31296366, "comment_id": 50634257, "body": "Please post the code in your question along with a description of the problems you are still having."}, {"owner": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "edited": false, "score": 0, "creation_date": 1446460216, "post_id": 31296366, "comment_id": 54736214, "body": "Hello, just to wrote that I found what was the root of my problem. Socket can work only as server or as client, but it cant do both. I try to do both and it didn`t worked (one socket cant be called in function listen and also in function accept)."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1436369511, "last_edit_date": 1436369511, "creation_date": 1436367389, "answer_id": 31296366, "question_id": 31296176, "link": "https://stackoverflow.com/questions/31296176/poll-functions-always-returns-zero-on-pollout/31296366#31296366", "title": "poll functions always returns zero on POLLOUT", "body": "<p>Since the sockets in question are TCP listening sockets, they will never be ready for writing.  You can only <code>accept()</code> from one of these sockets, which will return you a new socket for the accepted connection.</p>\n\n<p>Also, you're not setting up a non-blocking socket correctly.  Assuming Linux, it's done as follows:</p>\n\n<pre><code>int flag;\nif ((flag = fcntl(sock_tcp, F_GETFL)) == -1) {\n    perror(\"Error getting socket descriptor flags\");\n}\nflag |= O_NONBLOCK;\nif (fcntl(sock_tcp, F_SETFL, fdflag) == -1) {\n    perror(\"Error setting non-blocking option\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5089585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ea1fHNWStRI/AAAAAAAAAAI/AAAAAAAAAFE/t7pbVBetvgI/photo.jpg?sz=128", "display_name": "StrahinjaVD", "link": "https://stackoverflow.com/users/5089585/strahinjavd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 505, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436369886, "creation_date": 1436366948, "last_edit_date": 1436369886, "question_id": 31296176, "link": "https://stackoverflow.com/questions/31296176/poll-functions-always-returns-zero-on-pollout", "title": "poll functions always returns zero on POLLOUT", "body": "<p>I am writting a thread which needs to handle 5 different TCP port (read and write).\nFor this I create 5 sockects like this (only PORT is different):</p>\n\n<pre><code>sock_tcp = socket(AF_INET, SOCK_STREAM | SOCK_NONBLOCK, IPPROTO_TCP);\n\n/* Allow socket to reuse address */\nsockopt = 1;\nsetsockopt(sock_tcp, SOL_SOCKET, SO_REUSEADDR, &amp;sockopt, sizeof(sockopt));\n\n/* bind socket to an address */\nmemset(&amp;addr_tcp, 0, sizeof(addr_tcp));\naddr_tcp.sin_family = AF_INET; /* Address family */\naddr_tcp.sin_port = htons(10001); /* Port number */\naddr_tcp.sin_addr.s_addr = htonl(INADDR_ANY); /* IPv4 address */\nif (bind(sock_tcp, (struct sockaddr *) &amp;addr_tcp, sizeof(addr_tcp))) {\n        pr_err(\"tcp socket failed\");\n    }\n</code></pre>\n\n<p>In thread I fill pollfd array and use poll function:</p>\n\n<pre><code>/* Create array for poll function */\nfor (i = 0; i &lt; 5; i++) {\n    /* Set socket in passive mode */\n    listen(sock[i].sockfd, 1);\n    /* Set socket initial only in receiving mode with events \n       which will trigger the socket */\n    pfd[i].events = POLLIN | POLLPRI | POLLOUT;\n    /* Add socket in a structuret */\n    pfd[i].fd = sock[i].sockfd;\n}\n</code></pre>\n\n<p>later in code is written:</p>\n\n<pre><code>ret = poll(pfd, 5, 0);\n</code></pre>\n\n<p>With this I am able to receive data from all 5 sockets, and it is working. Functions is returning if socket received data.\nProblem occurs when I try to send data.\nI try to add in events POLLOUT and wait that poll function give me that socket is ready for sending. This never occurs and poll always send for POLLOUT zero???</p>\n\n<p>Does someone have any idea what should I do?\nThank you in advance.</p>\n"}, {"tags": ["c", "gtk"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1436366980, "post_id": 31296014, "comment_id": 50583039, "body": "Note that the <a href=\"https://developer.gnome.org/gtk3/stable/GtkTable.html\" rel=\"nofollow noreferrer\">GtkTable</a> widget is deprecated. Please don&#39;t use it in newly written code."}, {"owner": {"reputation": 63, "user_id": 5090755, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3844e979faddc762a243698d1997facc?s=128&d=identicon&r=PG&f=1", "display_name": "Sotiris", "link": "https://stackoverflow.com/users/5090755/sotiris"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1436368278, "post_id": 31296014, "comment_id": 50584098, "body": "@unwind I&#39;m working with Gtk2+"}], "owner": {"reputation": 63, "user_id": 5090755, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3844e979faddc762a243698d1997facc?s=128&d=identicon&r=PG&f=1", "display_name": "Sotiris", "link": "https://stackoverflow.com/users/5090755/sotiris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436366550, "creation_date": 1436366550, "question_id": 31296014, "link": "https://stackoverflow.com/questions/31296014/gtktable-overlapping-widgets", "title": "GtkTable overlapping widgets", "body": "<p>I have a GtkTable with a background (an image widget spanning the whole dimensions of the table) and at one point I want to add another image widget on top of the background. It seems that, while I attach the second image after the background, it still shows below it. How can I deal with image priority and select which images will be shown over the others?</p>\n"}, {"tags": ["c#", ".net", "c", "mono"], "comments": [{"owner": {"reputation": 1320, "user_id": 3013249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e43f8b866b98837f3454d63ed654b12b?s=128&d=identicon&r=PG&f=1", "display_name": "MrPaulch", "link": "https://stackoverflow.com/users/3013249/mrpaulch"}, "edited": false, "score": 0, "creation_date": 1436370287, "post_id": 31295752, "comment_id": 50585645, "body": "Have you attempted to PInvoke libc without the .so extension? As I remember mono will append the correct extension depending on the platform and sometimes gets confused if you provide the extension yourself."}, {"owner": {"reputation": 2844, "user_id": 23569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371e4b037974623acab3a397d0e0bf2a?s=128&d=identicon&r=PG", "display_name": "Marc Bernier", "link": "https://stackoverflow.com/users/23569/marc-bernier"}, "reply_to_user": {"reputation": 1320, "user_id": 3013249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e43f8b866b98837f3454d63ed654b12b?s=128&d=identicon&r=PG&f=1", "display_name": "MrPaulch", "link": "https://stackoverflow.com/users/3013249/mrpaulch"}, "edited": false, "score": 0, "creation_date": 1436371823, "post_id": 31295752, "comment_id": 50586671, "body": "The Platform.cs code has it without the .so extension. I was surprised it did so well with one of my own p/Invoked DLL calls where I actually forgot to strip the .dll."}, {"owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1436376948, "post_id": 31295752, "comment_id": 50589797, "body": "What are your gcc compile options for your c code?"}, {"owner": {"reputation": 2844, "user_id": 23569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371e4b037974623acab3a397d0e0bf2a?s=128&d=identicon&r=PG", "display_name": "Marc Bernier", "link": "https://stackoverflow.com/users/23569/marc-bernier"}, "edited": false, "score": 0, "creation_date": 1436377195, "post_id": 31295752, "comment_id": 50589957, "body": "Adding to question..."}, {"owner": {"reputation": 1320, "user_id": 3013249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e43f8b866b98837f3454d63ed654b12b?s=128&d=identicon&r=PG&f=1", "display_name": "MrPaulch", "link": "https://stackoverflow.com/users/3013249/mrpaulch"}, "edited": false, "score": 0, "creation_date": 1436380364, "post_id": 31295752, "comment_id": 50591926, "body": "Have you tried to <code>mkbundle</code> your byte code (output of dmcs)?"}, {"owner": {"reputation": 2844, "user_id": 23569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371e4b037974623acab3a397d0e0bf2a?s=128&d=identicon&r=PG", "display_name": "Marc Bernier", "link": "https://stackoverflow.com/users/23569/marc-bernier"}, "edited": false, "score": 0, "creation_date": 1436380947, "post_id": 31295752, "comment_id": 50592282, "body": "I tried mkbundle, but C did not at all like running it that way (immediate segfault). But I&#39;ll now edit, because I&#39;ve had a breakthrough..."}], "answers": [{"comments": [{"owner": {"reputation": 2844, "user_id": 23569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371e4b037974623acab3a397d0e0bf2a?s=128&d=identicon&r=PG", "display_name": "Marc Bernier", "link": "https://stackoverflow.com/users/23569/marc-bernier"}, "edited": false, "score": 0, "creation_date": 1436381687, "post_id": 31301072, "comment_id": 50592763, "body": "I tried with the addition of the mono_config_parse(), call; got the same result. I suspect that it was reading the DllMappings, as I had put in some intentional bad mappings as a test, and it did use them."}, {"owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "reply_to_user": {"reputation": 2844, "user_id": 23569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371e4b037974623acab3a397d0e0bf2a?s=128&d=identicon&r=PG", "display_name": "Marc Bernier", "link": "https://stackoverflow.com/users/23569/marc-bernier"}, "edited": false, "score": 0, "creation_date": 1436382467, "post_id": 31301072, "comment_id": 50593254, "body": "Strange, I get the same stack trace on the uname failure on U-15.04 and OS-X (32 and 64bit) if I do not initialize mono&#39;s config (using the builtin one or my own..."}, {"owner": {"reputation": 1065, "user_id": 1006834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5514ec4e255244252ab0bdf09a8b60a?s=128&d=identicon&r=PG", "display_name": "dna", "link": "https://stackoverflow.com/users/1006834/dna"}, "edited": false, "score": 0, "creation_date": 1436390994, "post_id": 31301072, "comment_id": 50597996, "body": "This should be the way to go. It&#39;s more proper than symlinking libc.so."}], "tags": [], "owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "is_accepted": false, "score": 2, "last_activity_date": 1436381304, "last_edit_date": 1436381304, "creation_date": 1436380890, "answer_id": 31301072, "question_id": 31295752, "link": "https://stackoverflow.com/questions/31295752/calling-mono-exe-from-c-does-not-find-libc/31301072#31301072", "title": "Calling Mono exe from C does not find libc", "body": "<p>The problem is you are missing the dll mapping (mono_config_parse). The following will work with mono 3.x and 4.x embedding and avoid your libc error.</p>\n\n<pre><code>#include &lt;mono/jit/jit.h&gt;\n#include &lt;mono/metadata/environment.h&gt;\n#include &lt;stdlib.h&gt;\n\nint \nmain(int argc, char* argv[]) {\n    MonoDomain *domain;\n    const char *file;\n    int retval;\n\n    mono_config_parse (NULL);\n    domain = mono_jit_init (\"textFile.exe\");\n    MonoAssembly *assembly;\n    assembly = mono_domain_assembly_open (domain, \"testFile.exe\");\n    mono_jit_exec (domain, assembly, argc, argv);\n    retval = mono_environment_exitcode_get ();      \n    mono_jit_cleanup (domain);\n    return retval;\n}\n</code></pre>\n\n<p>Certain features of the runtime like Dll remapping depend on a configuration file, to load the configuration file, just add:</p>\n\n<pre><code>mono_config_parse (NULL);\n</code></pre>\n\n<p>Which will load the Mono configuration file (typically /etc/mono/config).</p>\n\n<p><a href=\"http://www.mono-project.com/docs/advanced/embedding\" rel=\"nofollow\">http://www.mono-project.com/docs/advanced/embedding</a></p>\n\n<p>FYI: On Ubuntu 15.04, I am using:</p>\n\n<pre><code>gcc main.c `pkg-config --cflags --libs mono-2`\n</code></pre>\n\n<p>You can update that of course to grab the mono-sgen vs. the boehm jit.</p>\n\n<p>On OS-X: </p>\n\n<pre><code>gcc main.c -m32 -framework Foundation -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk \\\n -lmonosgen-2.0 \\\n -I/Library/Frameworks/Mono.framework/Headers/mono-2.0 \\\n -L/Library/Frameworks/Mono.framework/Libraries\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 5095604, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XGmeXlAw7O0/AAAAAAAAAAI/AAAAAAAAm6E/G01bsfpfoYY/photo.jpg?sz=128", "display_name": "Daniel Le", "link": "https://stackoverflow.com/users/5095604/daniel-le"}, "is_accepted": true, "score": 0, "last_activity_date": 1436384831, "creation_date": 1436384831, "answer_id": 31302315, "question_id": 31295752, "link": "https://stackoverflow.com/questions/31295752/calling-mono-exe-from-c-does-not-find-libc/31302315#31302315", "title": "Calling Mono exe from C does not find libc", "body": "<p>Based on your update, it looks like the application is searching for libc.so instead of libc.so.6.  You got it working by manually pointing your LD_LIBRARY_PATH to the current folder having the libc.so that you copied.  </p>\n\n<p>Suggestion: ask your Linux guru to symlink libc.so to libc.so.6 in your normal search paths for your application to work.</p>\n"}, {"tags": [], "owner": {"reputation": 16817, "user_id": 1627079, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1960a1a40295b3057f6ed54e36f175f9?s=128&d=identicon&r=PG", "display_name": "Paul0515", "link": "https://stackoverflow.com/users/1627079/paul0515"}, "is_accepted": false, "score": 2, "last_activity_date": 1466093234, "last_edit_date": 1466093234, "creation_date": 1466092033, "answer_id": 37863820, "question_id": 31295752, "link": "https://stackoverflow.com/questions/31295752/calling-mono-exe-from-c-does-not-find-libc/37863820#37863820", "title": "Calling Mono exe from C does not find libc", "body": "<p>I've run into this issue as well. What I noticed is that the mkbundle output lists the assemblies which it embeds, and that the System.Net.dll was not included. After adding it manually on the mkbundle command line, it all worked fine.</p>\n\n<p>The command line I'm using now:</p>\n\n<pre><code>mkbundle my.exe --deps --keeptemp --static --config /etc/mono/configlibc --machine-config /etc/mono/4.5/machine.config System.Net.dll -o bssetup.exe\n</code></pre>\n\n<p>The configlibc file is a modified copy of the default config file in that directory. The modifications were to remove all mapping lines, except the one for libc.</p>\n\n<p>Hope it helps anyone!</p>\n"}], "owner": {"reputation": 2844, "user_id": 23569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371e4b037974623acab3a397d0e0bf2a?s=128&d=identicon&r=PG", "display_name": "Marc Bernier", "link": "https://stackoverflow.com/users/23569/marc-bernier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 0, "accepted_answer_id": 31302315, "answer_count": 3, "score": 2, "last_activity_date": 1466093234, "creation_date": 1436365900, "last_edit_date": 1495535638, "question_id": 31295752, "link": "https://stackoverflow.com/questions/31295752/calling-mono-exe-from-c-does-not-find-libc", "title": "Calling Mono exe from C does not find libc", "body": "<p>In Ubuntu, I am calling a C# executable from C using Mono (v3.2.8) and the embedded Mono runtime. When I call the exe (.NET 4.5) from the command line (ie, <strong>mono testFile.exe</strong>), it works fine. However, when I run my C test program, it throws a C# exception:</p>\n\n<pre><code>libc at   at (wrapper managed-to-native) System.Platform:uname (intptr)\n  at System.Platform.get_IsMacOS () [0x00000] in &lt;filename unknown&gt;:0\n  at System.Net.WebRequest.GetSystemWebProxy () [0x00000] in &lt;filename unknown&gt;:0\n  at System.Net.WebRequest.GetDefaultWebProxy () [0x00000] in &lt;filename unknown&gt;:0\n  at System.Net.WebRequest.get_DefaultWebProxy () [0x00000] in &lt;filename unknown&gt;:0\n  at System.Net.GlobalProxySelection.get_Select () [0x00000] in &lt;filename unknown&gt;:0\n  at System.Net.HttpWebRequest..ctor (System.Uri uri) [0x00000] in &lt;filename unknown&gt;:0\n  at (wrapper remoting-invoke-with-check) System.Net.HttpWebRequest:.ctor (System.Uri)\n  at System.Net.HttpRequestCreator.Create (System.Uri uri) [0x00000] in &lt;filename unknown&gt;:0\n  at System.Net.WebRequest.Create (System.Uri requestUri) [0x00000] in &lt;filename unknown&gt;:0\n  at System.Net.WebRequest.Create (System.String requestUriString) [0x00000] in &lt;filename unknown&gt;:0\n  at MyClass.MainClass.Main (System.String[] args) [0x00000] in &lt;filename unknown&gt;:0\n</code></pre>\n\n<p>I've narrowed it down to this one line of code:</p>\n\n<pre><code>WebRequest request = WebRequest.Create(\"http://www.google.com\");\n</code></pre>\n\n<p>Looking through the call stack and the mono source code, I believe the failure is associated with the calling of the native 'uname' function in libc.so (the CheckOS() function, line 50 of mcs/class/System/System/Platform.cs):</p>\n\n<pre><code>if (uname (buf) == 0) {\n</code></pre>\n\n<p>I think what is happening is that the p/Invoke layer cannot locate libc.so. However, when I make the same call in my executable's Main() function, it executes fine, I am confused why it works in one place but not the other. It is also strange that the exception message is not a DllNotFoundException, but rather this generic \"libc\" message (though I have confirmed that I get the same message when I try to p/Invoke with a bogus .so).</p>\n\n<p>My C code:</p>\n\n<pre><code>int main(int argc,const char* argv[]) {\n    MonoDomain* domain=mono_jit_init(\"testFile.exe\");\n    MonoAssembly* assembly=mono_domain_assembly_open(domain,\"testFile.exe\");\n    MonoImage* image=mono_assembly_get_image(assembly);\n\n    const char* args[1];\n    args[0]=\"testFile.exe\";\n    mono_jit_exec(domain,assembly,1,(char**) args);\n}\n</code></pre>\n\n<p>My C# code:</p>\n\n<pre><code>namespace MyClass {\n    class MainClass {\n        public static void Main (string[] args) {\n            WebRequest request=WebRequest.Create(\"http://www.google.com\");\n        }\n    }\n}\n</code></pre>\n\n<p>gcc compile options are:</p>\n\n<pre><code>gcc cTest.c -I/usr/include/mono-2.0 -DREENTRANT -lmono-2.0 -lm -lrt -ldl -lpthread\n</code></pre>\n\n<p>mono compile options are:</p>\n\n<pre><code>dmcs -out:testFile.exe -platform:anycpu -sdk:4.5 -target:exe -unsafe+ -main:MyClass.MainClass -reference:System,System.Configuration,System.Data,System.ServiceModel,System.Web,System.Xml *.cs\n</code></pre>\n\n<p><strong>Update:</strong>\nI used MONO_LOG_LEVEL and MONO_LOG_MASK to trace the .so search sequence and found that the sequence on the successful call was entirely different from the unsuccessful one. So it is searching, just not very well. I then copied my libc.so.6 to the current directory, renamed to libc.so, and then set LD_LIBRARY_PATH to the same location. This gave me success. I am now having my Linux guru look into what can be done to make this solution more 'correct', but at least I have a running program. <a href=\"https://stackoverflow.com/questions/25374413/mono-native-binary-bundle-fails-to-load-libc-in-newer-linux-kernels\">This</a> may be the same problem as mine (though the solution's not working for me).</p>\n"}, {"tags": ["c++", "c", "algorithm", "data-structures", "knapsack-problem"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4135378, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M9wGIyXDwH0/AAAAAAAAAAI/AAAAAAAAACw/T5YtqE-KHHc/photo.jpg?sz=128", "display_name": "Rayleigh99", "link": "https://stackoverflow.com/users/4135378/rayleigh99"}, "edited": false, "score": 0, "creation_date": 1436483765, "post_id": 31305823, "comment_id": 50645540, "body": "I get your point. I got that. But look at this link here: <a href=\"http://tech-queries.blogspot.in/2011/04/integer-knapsack-problem-duplicate.html\" rel=\"nofollow noreferrer\">tech-queries.blogspot.in/2011/04/&hellip;</a> I just can&#39;t understand why M(j-1) is important. Whatever cases are considered in M(j-1) are also considered in M(j). So why compare with M(j-1)?"}], "tags": [], "owner": {"reputation": 6924, "user_id": 3267497, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1444629544/picture?type=large", "display_name": "Mshnik", "link": "https://stackoverflow.com/users/3267497/mshnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1436399587, "creation_date": 1436399587, "answer_id": 31305823, "question_id": 31295541, "link": "https://stackoverflow.com/questions/31295541/why-capacity-1-in-integer-knapsack/31305823#31305823", "title": "Why Capacity-1 in integer knapsack?", "body": "<p>I think you have to setup of the formula a bit confused - specifically, you've mixed up the capacity of the bag with a sub problem of n-1 items. Let's redefine a bit.</p>\n\n<ul>\n<li>Let <code>P</code> denote the problem, as represented by a list of <code>n</code> items.</li>\n<li>Further, let <code>Pk</code> represent the subproblem consisting of items at indices <code>1...k</code> from the original problem, where <code>1 &lt;= k &lt;= n</code>. Thus <code>Pn</code> is equivalent to <code>P</code>.</li>\n<li>For each item at index <code>i</code>, let <code>Vi</code> denote the value of that item and <code>Si</code> denote the size of that item.</li>\n<li>Let <code>C</code> be the capacity of the bag, <code>C &gt;= 0</code></li>\n<li>Let <code>M(Pk, C)</code> denote the <em>optimal</em> solution to the problem described by <code>Pk</code> with a bag of capacity <code>C</code>. <code>M(Pk, C)</code> returns the list of items included in the solution (and thus also returns the value of the optimal solution and the excess capacity in the bag).</li>\n</ul>\n\n<p>For each item, we could either include it in the optimal solution, or not include it in the optimal solution. Clearly, the optimal solution is whichever of these two options is preferable. The only corner case to consider is if the item in question cannot fit in the bag. In this case we must exclude it.</p>\n\n<p>We can rely on recursion to cover every item for us, thus have no need for iteration. Thus all together:</p>\n\n<p><strong>M(Pk,C) = if(Sk > C) M(P(k-1), C) else max(M(P(k-1),C), Vk + M(P(k-1),C-Sk))</strong></p>\n"}], "owner": {"reputation": 13, "user_id": 4135378, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M9wGIyXDwH0/AAAAAAAAAAI/AAAAAAAAACw/T5YtqE-KHHc/photo.jpg?sz=128", "display_name": "Rayleigh99", "link": "https://stackoverflow.com/users/4135378/rayleigh99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436399587, "creation_date": 1436365372, "question_id": 31295541, "link": "https://stackoverflow.com/questions/31295541/why-capacity-1-in-integer-knapsack", "title": "Why Capacity-1 in integer knapsack?", "body": "<p>The dynamic programming solution to the integer knapsack problem,\nFor a knapsack of capacity C, and for n items, where ith item has the size Si and value Vi, is:</p>\n\n<p><strong>M(C)=max(M(C-1), M(C-Si)+Vi), where i goes from 1 to n</strong></p>\n\n<p>Here M is an array. M(C) denotes the maximum value of a knapsack of capacity C.</p>\n\n<p>What is the use of M(C-1) in this relation? I mean the solution should just be this:</p>\n\n<p><strong>M(C)=max(M(C-Si)+Vi), where i goes from 1 to n</strong></p>\n\n<p>I think all the cases that M(C-1) covers are covered in M(C).</p>\n\n<p>If I'm wrong, please give me an example situation.</p>\n"}, {"tags": ["c", "linux", "ubuntu"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1436365267, "post_id": 31295286, "comment_id": 50581576, "body": "Is there any reason you chose not to <code>#include &lt;sys&#47;types.h&gt;</code>?"}, {"owner": {"reputation": 1694, "user_id": 3244134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLy7I.jpg?s=128&g=1", "display_name": "gengisdave", "link": "https://stackoverflow.com/users/3244134/gengisdave"}, "edited": false, "score": 0, "creation_date": 1436365454, "post_id": 31295286, "comment_id": 50581736, "body": "as defined in <code>pwd.h</code>, <code>getpwnam_r</code> is POSIX only"}, {"owner": {"reputation": 2147, "user_id": 2136640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d392b830abbaf0d8af1124c1dd371?s=128&d=identicon&r=PG", "display_name": "Timothy Brown", "link": "https://stackoverflow.com/users/2136640/timothy-brown"}, "edited": false, "score": 0, "creation_date": 1436365719, "post_id": 31295286, "comment_id": 50581976, "body": "I&#39;m not getting this error in Eclipse (on OS X) with the CDT plugin. How have you defined your project? (Sorry I don&#39;t use Eclipse)"}], "answers": [{"tags": [], "owner": {"reputation": 41428, "user_id": 440564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3dbcb5159c02d59f52159faa8437c97?s=128&d=identicon&r=PG", "display_name": "blue112", "link": "https://stackoverflow.com/users/440564/blue112"}, "is_accepted": true, "score": 3, "last_activity_date": 1436378401, "last_edit_date": 1436378401, "creation_date": 1436365471, "answer_id": 31295588, "question_id": 31295286, "link": "https://stackoverflow.com/questions/31295286/c-implicit-declaration-of-function-getpwnam-r/31295588#31295588", "title": "C: implicit declaration of function \u2018getpwnam_r\u2019", "body": "<p>To use this function you need two includes :</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;pwd.h&gt;\n</code></pre>\n\n<p>Add them and it should not complain anymore.</p>\n\n<p>You can see that by running <a href=\"http://man7.org/linux/man-pages/man3/getpwnam.3.html\" rel=\"nofollow\"><code>man getpwnam_r</code></a>.</p>\n\n<p>You also need to define either <code>__USE_MISC</code> or <code>__USE_SVID</code> since it a POSIX only function.</p>\n"}], "owner": {"reputation": 11768, "user_id": 2274686, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z3EDW.jpg?s=128&g=1", "display_name": "vdenotaris", "link": "https://stackoverflow.com/users/2274686/vdenotaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 0, "accepted_answer_id": 31295588, "answer_count": 1, "score": 1, "last_activity_date": 1436378401, "creation_date": 1436364741, "last_edit_date": 1436365826, "question_id": 31295286, "link": "https://stackoverflow.com/questions/31295286/c-implicit-declaration-of-function-getpwnam-r", "title": "C: implicit declaration of function \u2018getpwnam_r\u2019", "body": "<p>While retrieving the broken-out fields of the record in the password database (e.g., the local password file <code>/etc/passwd</code>, NIS, and LDAP) that matches a provided username name, I am using the <code>getpwnam_r</code> (<strong><a href=\"http://linux.die.net/man/3/getpwnam_r\" rel=\"nofollow\">http://linux.die.net/man/3/getpwnam_r</a></strong>) function.</p>\n\n<pre><code>#define __USE_BSD\n#define _BSD_SOURCE\n#include &lt;pwd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\nint\nmain(int argc, char *argv[])\n{\n    struct passwd pwd;\n    struct passwd *result;\n    char *buf;\n    size_t bufsize;\n    int s;\n\n   if (argc != 2) {\n        fprintf(stderr, \"Usage: %s username\\n\", argv[0]);\n        exit(EXIT_FAILURE);\n    }\n\n   bufsize = sysconf(_SC_GETPW_R_SIZE_MAX);\n    if (bufsize == -1)          /* Value was indeterminate */\n        bufsize = 16384;        /* Should be more than enough */\n\n   buf = malloc(bufsize);\n    if (buf == NULL) {\n        perror(\"malloc\");\n        exit(EXIT_FAILURE);\n    }\n\n   s = getpwnam_r(argv[1], &amp;pwd, buf, bufsize, &amp;result);\n    if (result == NULL) {\n        if (s == 0)\n            printf(\"Not found\\n\");\n        else {\n            errno = s;\n            perror(\"getpwnam_r\");\n        }\n        exit(EXIT_FAILURE);\n    }\n\n   printf(\"Name: %s; UID: %ld\\n\", pwd.pw_gecos, (long) pwd.pw_uid);\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>The code works fine, but Eclipse shows me a warning as follows:</p>\n\n<pre><code>warning: implicit declaration of function \u2018getpwnam_r\u2019 [-Wimplicit-function-declaration]\n</code></pre>\n\n<p>How could I fix it?</p>\n\n<p>Note that I'm currently using <strong>Ubuntu 14.04 LTS</strong>.</p>\n"}, {"tags": ["c", "arrays", "string", "concatenation"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436364685, "post_id": 31295221, "comment_id": 50581102, "body": "what is (are) <code>string arrays</code>?"}, {"owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436364850, "post_id": 31295221, "comment_id": 50581225, "body": "I meant two arrays that are declared as strings"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436365172, "post_id": 31295221, "comment_id": 50581493, "body": "These are not strings. Note that in C, a sting is just a <code>char []</code> with a trailing <code>&#39;\\0&#39;</code>. As you do not reserve enough space for that, it is no string. And: you cannot <i>declare</i> a string - for much the same reason!"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "edited": false, "score": 0, "creation_date": 1436365526, "post_id": 31295318, "comment_id": 50581805, "body": "Thank you for that example. I had one more question. Now if I want to display just one of the characters from this concatenated string how do I do that?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436365628, "post_id": 31295318, "comment_id": 50581889, "body": "I don&#39;t agree that the former is less error prone. Because if you intended to have a string exactly x characters long, you don&#39;t want code with more characters than that to compile. For example the bugged code <code>char a[8]={&quot;hellostr&quot;};</code> should yield a compiler diagnostic, so that hopefully the programmer gets a slap: &quot;hey, you didn&#39;t consider null terminarion! Go fix your code to a[8+1].&quot; rather than &quot;everything looks ok here, proceed even though there&#39;s potentially a bug here&quot;."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "edited": false, "score": 0, "creation_date": 1436365634, "post_id": 31295318, "comment_id": 50581893, "body": "@AnamikaAna <code>one of the characters</code> is that what you meant exactly? use index, naturally."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436365977, "post_id": 31295318, "comment_id": 50582186, "body": "@SouravGhosh Actually gcc throws no warning for this with max warnings enabled. Very strange."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436366121, "post_id": 31295318, "comment_id": 50582315, "body": "@Lundin it should show something along the line of <i>&quot;excess initializer for array.....&quot;</i>, right?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436367748, "post_id": 31295318, "comment_id": 50583671, "body": "@SouravGhosh Indeed. Peculiar since it does so if you write the string as <code>{&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;,&#39;s&#39;,&#39;t&#39;,&#39;r&#39;,&#39;\\0&#39;}</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1436368282, "post_id": 31295318, "comment_id": 50584100, "body": "@SouravGhosh I&#39;ve posted a question <a href=\"http://stackoverflow.com/questions/31296727/inconsistent-gcc-diagonistic-for-string-initialization\">here</a>, maybe someone out there knows more :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1436367053, "last_edit_date": 1436367053, "creation_date": 1436364820, "answer_id": 31295318, "question_id": 31295221, "link": "https://stackoverflow.com/questions/31295221/concatenating-two-arrays/31295318#31295318", "title": "Concatenating two arrays", "body": "<p>You need to make use of <a href=\"http://linux.die.net/man/3/strcat\" rel=\"nofollow\"><code>strcat()</code></a> function from <code>string.h</code>.</p>\n\n<p>A sample algo:</p>\n\n<ol>\n<li>Define an array (say <code>destarr[128]</code>, for example)<em>large enough</em> to hold the result (concatenated string).</li>\n<li><code>memset()</code>the <code>destarr</code> to <code>0</code>.</li>\n<li>use <code>strcat(destarr, a)</code> and <code>strcat(destarr, b)</code> to concatenate one after another.</li>\n</ol>\n\n<p>That said, </p>\n\n<pre><code> char a[ ]={\"hellostr\"};\n</code></pre>\n\n<p>is considered better and less error-prone over</p>\n\n<pre><code>char a[8]={\"hellostr\"};\n</code></pre>\n\n<p>as, </p>\n\n<ul>\n<li>In the former case, compiler takes the charge to allocate the memory, as required, with the null-terminator in <em>mind</em>. The array can be used as a <em>string</em>.</li>\n<li>In the later case, there is no room for the null-terminator and hence, the array can neither be considered nor be used as a <em>string</em>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1436365590, "creation_date": 1436365590, "answer_id": 31295630, "question_id": 31295221, "link": "https://stackoverflow.com/questions/31295221/concatenating-two-arrays/31295630#31295630", "title": "Concatenating two arrays", "body": "<p><code>strcat</code> function can be used.</p>\n\n<p>Header -<code>string.h</code></p>\n\n<p>If you want to do that without <code>strcat</code> function then you can write a simple function -</p>\n\n<pre><code>  void concatenate(char a[], char b[])\n  {\n     int c, d;\n\n      c = 0;\n\n     while (a[c] != '\\0')\n   {\n        c++;    \n   }\n\n     d = 0;\n\n   while (b[d] != '\\0') \n    {\n       a[c] = b[d];\n       d++;\n       c++; \n    }\n\n       a[c] = '\\0';\n  }\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 31295318, "answer_count": 2, "score": -1, "last_activity_date": 1436367053, "creation_date": 1436364583, "last_edit_date": 1436366979, "question_id": 31295221, "link": "https://stackoverflow.com/questions/31295221/concatenating-two-arrays", "title": "Concatenating two arrays", "body": "<p>I was trying to create a program that takes in two arrays and concatenates them to create a new string. These are the two strings.</p>\n\n<pre><code> char a[8]={\"hellostr\"};\n char b[8]={\"HELLOSTR\"};\n</code></pre>\n\n<p>Can someone tell me how could I concatenate and display this concatenated string? I tried looking for it but could not understand much of it.</p>\n"}, {"tags": ["c", "constant-expression"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436365358, "post_id": 31295142, "comment_id": 50581644, "body": "Read the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.6\" rel=\"nofollow noreferrer\">standard</a>; K&amp;R is not the standard and quite outdated."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1436366291, "last_edit_date": 1495541645, "creation_date": 1436364498, "answer_id": 31295189, "question_id": 31295142, "link": "https://stackoverflow.com/questions/31295142/need-clarification-about-constant-expressions/31295189#31295189", "title": "Need clarification about constant expressions", "body": "<blockquote>\n  <p><em>using const keyword is considered constant expression or not?</em></p>\n</blockquote>\n\n<p><strong>>></strong> No, it is not a constant. The variable using <code>const</code> is called <em><code>const</code> qualified</em>, but not a compile time constant.</p>\n\n<blockquote>\n  <p><em>Is there any technique by which we can check whether an expression was evaluated during compilation or during run-time?</em></p>\n</blockquote>\n\n<p><strong>>></strong> (<em>as mentioned in Mr. <a href=\"https://stackoverflow.com/users/28169/unwind\">Unwind</a>'s answer</em>) Disassemble the code.</p>\n\n<blockquote>\n  <p><em>Are there any cases where compile time evaluation produces different result than run-time evaluation?</em></p>\n</blockquote>\n\n<p><strong>>></strong> No, it will not. refer to Chapter <code>\u00a76.6 11</code>, <code>C11</code> standard. </p>\n\n<p><sup> FWIW, in case of usage with <code>sizeof</code> operator (compile time, though not constant expression), NULL pointer dereference will be ok. Compile time NULL pointer dereference invokes  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</sup></p>\n\n<blockquote>\n  <p><em>Should I even care about it? (maybe I use it to optimize my programs)</em></p>\n</blockquote>\n\n<p><strong>>></strong> Opinion-based, so won't answer.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436365411, "post_id": 31295363, "comment_id": 50581691, "body": "Sir, May I ask about answer 3? <code>NULL</code>-dereference will produce different result, if I&#39;m not wrong. Please enlight."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436365605, "post_id": 31295363, "comment_id": 50581867, "body": "@SouravGhosh You can&#39;t dereference pointers in a constant expression, as far as I know? You can use pointers (including <code>NULL</code>) with <code>sizeof</code>, but you can&#39;t do a standalone dereferencing."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436365867, "post_id": 31295363, "comment_id": 50582096, "body": "Yes, I was thinking about that only, right. I&#39;ll update my answer accordingly. Thanks."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1436365567, "last_edit_date": 1436365567, "creation_date": 1436364923, "answer_id": 31295363, "question_id": 31295142, "link": "https://stackoverflow.com/questions/31295142/need-clarification-about-constant-expressions/31295363#31295363", "title": "Need clarification about constant expressions", "body": "<ol>\n<li>Perhaps. A compiler can <em>add</em> more forms of constant expressions, so if it can prove to itself that the variable references are constant enough it can compute the expression at compile-time.</li>\n<li>You can (of course) disassemble the code and see what the compiler did.</li>\n<li>Not if the compiler is standards-compliant, no. The standard says \"The semantic rules for the evaluation of a constant expression are the same as for nonconstant expressions\" (\u00a76.6 11 in the C11 draft).</li>\n<li>Not very much, no. :) But do use <code>const</code> for code like that anyway!</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1436365153, "creation_date": 1436365153, "answer_id": 31295451, "question_id": 31295142, "link": "https://stackoverflow.com/questions/31295142/need-clarification-about-constant-expressions/31295451#31295451", "title": "Need clarification about constant expressions", "body": "<ol>\n<li><p>x and y are const, z is not. compiller probably will substitute x and y , but will not substitute z. but probably compiller will calc 5 + 6 as well and will assign to z directly.</p></li>\n<li><p>not sure you can check generated assembler code, but I do not know how this can be done. </p></li>\n<li><p>not. compile time means expression is already calculated in run time.</p></li>\n<li><p>I care :) but it appies only when you need fast execution.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1436366465, "last_edit_date": 1436366465, "creation_date": 1436366144, "answer_id": 31295853, "question_id": 31295142, "link": "https://stackoverflow.com/questions/31295142/need-clarification-about-constant-expressions/31295853#31295853", "title": "Need clarification about constant expressions", "body": "<ol>\n<li><p>In C, the <code>const</code> <em>qualifier</em> is just a guarantee given by the programmer to the compiler that he will not change the object. Otherwise it does not have special meanings as in C++. The <em>initializer</em> for such objects with file- or global scope has to be a <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.6\" rel=\"nofollow\"><em>constant expression</em></a>.</p></li>\n<li><p>As an extension, gcc has a <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.2/gcc/Other-Builtins.html#Other-Builtins\" rel=\"nofollow\">builtin</a> function (<code>int __builtin_constant_p (exp)</code>) to determine if a value is constant.</p></li>\n<li><p>No, it shall not - unless you exploit <em>implementation defined</em> or <em>undefined behaviour</em> and compiler and target behave differently. [1]</p></li>\n<li><p>As <em>constant expressions</em> are evaluated at compile-time, they safe processing time and often code space and possibly data space. Also, in some places (e.g. global initializers), only <em>constant expressions</em> are allowed. See the standard.</p></li>\n</ol>\n\n<hr>\n\n<p>[1]: One example is right shifting a signed negative integer constant, e.g. <code>-1 &gt;&gt; 24</code>. As that is implementation defined, the compiler might yield a different result from a program run using a variable which holds the same value:</p>\n\n<pre><code>int i = -1;\n(-1 &gt;&gt; 24) == (i &gt;&gt; 24)\n^             ^--- run-time evaluated by target\n+--- compile-time evaluated by compiler\n</code></pre>\n\n<p>The comparison might fail.</p>\n"}], "owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 31295363, "answer_count": 4, "score": 4, "last_activity_date": 1436366536, "creation_date": 1436364391, "last_edit_date": 1436366536, "question_id": 31295142, "link": "https://stackoverflow.com/questions/31295142/need-clarification-about-constant-expressions", "title": "Need clarification about constant expressions", "body": "<p>K&amp;R c 2nd edition(section 2.3) mentions</p>\n\n<blockquote>\n  <p>A constant expression is an expression that involves only constants. Such expressions may be evaluated at during compilation rather than run-time, and accordingly may be used in any place that a constant can occur</p>\n</blockquote>\n\n<p>however, I have several doubts regarding it:</p>\n\n<ol>\n<li><p>Will this expression be considered as constant expression?</p>\n\n<pre><code>const int x=5;\nconst int y=6;\nint z=x+y;\n</code></pre>\n\n<p>i.e using <code>const</code> keyword is considered constant expression or not?</p></li>\n<li><p>Is there any technique by which we can check whether an expression was evaluated during compilation or during run-time?</p></li>\n<li><p>Are there any cases where compile time evaluation produces different result than run-time evaluation?</p></li>\n<li><p>Should I even care about it? (maybe I use it to optimize my programs)</p></li>\n</ol>\n"}, {"tags": ["c", "haskell", "segmentation-fault", "z3"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1436364524, "post_id": 31295038, "comment_id": 50580968, "body": "Segmentation fault is clearly caused by a bug. Probably you should report it to the devs."}, {"owner": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436364719, "post_id": 31295038, "comment_id": 50581124, "body": "@EugeneSh. In a standard library yes, but looking at similar problems (<a href=\"http://stackoverflow.com/questions/9059923/z3-segmentation-fault?rq=1\" title=\"z3 segmentation fault\">stackoverflow.com/questions/9059923/z3-segmentation-fault?r&zwnj;&#8203;q=1</a>) it seems that segmentation faults in S3 are used sometimes to denote an obsolete API or wrong usage ... heh ;)"}, {"owner": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436364872, "post_id": 31295038, "comment_id": 50581246, "body": "Anyway I&#39;ve just reported it here: <a href=\"https://github.com/Z3Prover/z3/issues/153\" rel=\"nofollow noreferrer\">github.com/Z3Prover/z3/issues/153</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1436364924, "post_id": 31295038, "comment_id": 50581281, "body": "Still, the incorrect usage should yield an error correctly handled, not SEGFAULT. It is a bug anyway.."}, {"owner": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1436364975, "post_id": 31295038, "comment_id": 50581317, "body": "I know, I know, I was laughing reading that reply from S3 devs :)"}], "answers": [{"tags": [], "owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "is_accepted": false, "score": 1, "last_activity_date": 1436425436, "creation_date": 1436425436, "answer_id": 31310323, "question_id": 31295038, "link": "https://stackoverflow.com/questions/31295038/segmentation-fault-in-z3-haskell/31310323#31310323", "title": "Segmentation fault in Z3 (Haskell)", "body": "<p>You should really be reporting this to the Haskell Z3 package maintainers; as they should protect from this sort of usage in the first place. You can find their contact info on: <a href=\"http://hackage.haskell.org/package/z3\" rel=\"nofollow\">http://hackage.haskell.org/package/z3</a></p>\n"}, {"comments": [{"owner": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "edited": false, "score": 0, "creation_date": 1436795476, "post_id": 31383215, "comment_id": 50747338, "body": "Thank you very much for the help @iago. So does it mean that Z3 is no longer used in Microsoft? Are there any reasons behind it? Does it have any consequences regarding the future of Z3 development?"}, {"owner": {"reputation": 277, "user_id": 1064567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6d70982e8f87fe26ec767ca1c7ad43?s=128&d=identicon&r=PG", "display_name": "iago", "link": "https://stackoverflow.com/users/1064567/iago"}, "reply_to_user": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "edited": false, "score": 0, "creation_date": 1436797386, "post_id": 31383215, "comment_id": 50748703, "body": "I think you understood me wrong. David and I (the authors of the Haskell bindings) are not working for Microsoft. We created this project because Microsoft does not provide official bindings for Haskell, our bindings are unofficial. As far as I can tell Z3 is a very active project within Microsoft Research."}, {"owner": {"reputation": 277, "user_id": 1064567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6d70982e8f87fe26ec767ca1c7ad43?s=128&d=identicon&r=PG", "display_name": "iago", "link": "https://stackoverflow.com/users/1064567/iago"}, "reply_to_user": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "edited": false, "score": 1, "creation_date": 1436797578, "post_id": 31383215, "comment_id": 50748836, "body": "Having clarified this, the fact that we don&#39;t use Haskell+Z3 at work anymore, means that we don&#39;t actively develop the <i>z3-haskell</i> bindings that much, however, we do actively maintain them. (In fact, I&#39;m discussing the bug right now with David.) At least once a year we release a new version with enhancements and better coverage of the API, but the patches mostly come from users of the library. The people developing <a href=\"http://rise4fun.com/Boogaloo\" rel=\"nofollow noreferrer\">Boogaloo</a> for instance, have made quite a few contributions."}, {"owner": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "edited": false, "score": 0, "creation_date": 1436804708, "post_id": 31383215, "comment_id": 50753828, "body": "Ahh got it. I&#39;m sorry I was sure you are the developer and maintainer of Z3. Sorry for the confusion!"}], "tags": [], "owner": {"reputation": 277, "user_id": 1064567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6d70982e8f87fe26ec767ca1c7ad43?s=128&d=identicon&r=PG", "display_name": "iago", "link": "https://stackoverflow.com/users/1064567/iago"}, "is_accepted": true, "score": 3, "last_activity_date": 1436791370, "last_edit_date": 1436791370, "creation_date": 1436789875, "answer_id": 31383215, "question_id": 31295038, "link": "https://stackoverflow.com/questions/31295038/segmentation-fault-in-z3-haskell/31383215#31383215", "title": "Segmentation fault in Z3 (Haskell)", "body": "<p>This is a bug in our library. In 4.0.0 we introduced automatic memory management, but we missed the interaction with error handling. It seems that memory management code executes before error handling code. Thus, when <code>mkBVmul</code> returns, memory management code tries to increment the reference count of the result object, which turns to be <em>null</em>, before the library knows that there was an error.</p>\n\n<p>I have created an issue for this (cf. <a href=\"https://bitbucket.org/iago/z3-haskell/issues/5/segmentation-fault-due-to-type-error\" rel=\"nofollow\">https://bitbucket.org/iago/z3-haskell/issues/5/segmentation-fault-due-to-type-error</a>), and I will look into solving it soon. But we would highly appreciate that you report to us segmentation faults in the future. Today we don't use this library at work so, even though I do maintain it, and I do try to help whoever wants to contribute, I mostly rely on users to report errors and contribute with patches. </p>\n\n<p>That being said, once the bug is fixed, what you will get is a Haskell exception carrying the error code <em>Z3_SORT_ERROR</em>. The fact that <em>z3-haskell</em> bindings provide little type-safety is a design decision. Writing a type-safe Z3 API is non-trivial and requires quite a bit of type hackery and a few GHC extensions. Our target users are tool writers who use Z3 as a backend. Most of them don't want to deal with marshaling and memory management themselves, but still want low-level access to Z3's API. </p>\n\n<p>We don't expect people to write SMT problems directly using our bindings, <em>sbv</em> is more suitable for that. It's certainly possible to create a type-safe wrapper for <em>z3-haskell</em>, as a separate package. I have this in my to-do list, I just didn't find the time for it.</p>\n"}], "owner": {"reputation": 10726, "user_id": 889902, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ops76.png?s=128&g=1", "display_name": "Wojciech Danilo", "link": "https://stackoverflow.com/users/889902/wojciech-danilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 31383215, "answer_count": 2, "score": 2, "last_activity_date": 1436791370, "creation_date": 1436364146, "question_id": 31295038, "link": "https://stackoverflow.com/questions/31295038/segmentation-fault-in-z3-haskell", "title": "Segmentation fault in Z3 (Haskell)", "body": "<p>I'm using Haskell to create some Z3 formulas. When I try to run the following code I get segmentation fault (although other examples made by me work great). Does anybody know if that is a bug in Z3? The API used in Haskell is a mirror of the C API names:</p>\n\n<pre><code>{-# LANGUAGE NoMonomorphismRestriction #-}\n{-# LANGUAGE TupleSections #-}\n\nimport Z3.Monad\nimport Control.Monad.IO.Class\nimport Control.Applicative\nimport Data.Traversable\nimport Prelude hiding (sequence)\n\nmain = do\n    out &lt;- evalZ3 $ do\n        is  &lt;- mkIntSort\n        _3  &lt;- mkInteger 3\n        _5  &lt;- mkInteger 5\n        _10 &lt;- mkInteger 10\n        x   &lt;- mkFreshIntVar \"x\"\n        y   &lt;- mkFreshIntVar \"y\"\n        y2  &lt;- mkBvmul y y\n\n        assert =&lt;&lt; mkAnd =&lt;&lt; sequence\n            [ mkEq x y2\n            ]\n        return ()\n\n    print \"end\"\n</code></pre>\n"}, {"tags": ["c", "string", "time"], "comments": [{"owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "edited": false, "score": 0, "creation_date": 1436363228, "post_id": 31294622, "comment_id": 50579859, "body": "Did you <code>#include &lt;time.h&gt;</code>?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 4, "creation_date": 1436363346, "post_id": 31294622, "comment_id": 50579957, "body": "Windows doesn&#39;t have <code>strptime(3)</code>. You need to implement it yourself, or use someone else&#39;s implementation. See <a href=\"http://stackoverflow.com/questions/667250/strptime-in-windows\">stackoverflow.com/questions/667250/strptime-in-windows</a>"}, {"owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1436364032, "post_id": 31294622, "comment_id": 50580548, "body": "@Filipe: thanks much. Is there any other function in C with windows to convert string to time format without implementing this written strptime function?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1436366600, "post_id": 31294622, "comment_id": 50582730, "body": "@learningpal I&#39;m afraid there isn&#39;t."}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1436367844, "post_id": 31294622, "comment_id": 50583752, "body": "See the answer- <a href=\"http://stackoverflow.com/questions/321849/strptime-equivalent-on-windows\" title=\"strptime equivalent on windows\">stackoverflow.com/questions/321849/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1436363542, "creation_date": 1436363542, "answer_id": 31294784, "question_id": 31294622, "link": "https://stackoverflow.com/questions/31294622/strptime-open-source-code-not-implementing/31294784#31294784", "title": "Strptime open source code not implementing", "body": "<p>From the (Linux) manual page for <a href=\"http://linux.die.net/man/3/strptime\" rel=\"nofollow\"><code>strptime()</code></a>:</p>\n\n<blockquote>\n  <p>Conforming To</p>\n  \n  <p>SUSv2, POSIX.1-2001. </p>\n</blockquote>\n\n<p>Those are Unix specifications; Windows doesn't implement them in general.</p>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "edited": false, "score": 0, "creation_date": 1436447561, "post_id": 31295030, "comment_id": 50624201, "body": "@ Ishay: Thanks much for answer. I copied this above code in another c file named strptime.c and compiled it with my main file. Before that I copied the open source codes for sys/cdefs.h, namespace.h,  sys/localedef.h, and tzfile.h and included in my main program. But I am getting many errors and warnings in the code."}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 1, "last_activity_date": 1436364105, "creation_date": 1436364105, "answer_id": 31295030, "question_id": 31294622, "link": "https://stackoverflow.com/questions/31294622/strptime-open-source-code-not-implementing/31295030#31295030", "title": "Strptime open source code not implementing", "body": "<p>The following is an open source implementation of strptime. You can use that if the license fits your legal status.</p>\n\n<p>Shamelessly stolen from <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/25a654f9-b6b6-490a-8f36-c87483bb36b7/strptime-on-windows\" rel=\"nofollow\">here</a>.  </p>\n\n<pre><code>/*  $NetBSD: strptime.c,v 1.28 2008/04/28 20:23:01 martin Exp $ */ \n\n/*-\n * Copyright (c) 1997, 1998, 2005, 2008 The NetBSD Foundation, Inc.\n * All rights reserved.\n *\n * This code was contributed to The NetBSD Foundation by Klaus Klein.\n * Heavily optimised by David Laight\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS\n * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS\n * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */ \n#include &lt;sys/cdefs.h&gt; \n#if defined(LIBC_SCCS) &amp;&amp; !defined(lint) \n__RCSID(\"$NetBSD: strptime.c,v 1.28 2008/04/28 20:23:01 martin Exp $\"); \n#endif \n#include \"namespace.h\" \n#include &lt;sys/localedef.h&gt; \n#include &lt;ctype.h&gt; \n#include &lt;locale.h&gt; \n#include &lt;string.h&gt; \n#include &lt;time.h&gt; \n#include &lt;tzfile.h&gt; \n#ifdef __weak_alias \n__weak_alias(strptime,_strptime) \n#endif \n#define _ctloc(x)       (_CurrentTimeLocale-&gt;x) \n\n/*\n * We do not implement alternate representations. However, we always\n * check whether a given modifier is allowed for a certain conversion.\n */ \n#define ALT_E           0x01 \n#define ALT_O           0x02 \n#define LEGAL_ALT(x)        { if (alt_format &amp; ~(x)) return NULL; } \n\nstatic const char gmt[4] = { \"GMT\" }; \n\nstatic const u_char *conv_num(const unsigned char *, int *, uint, uint); \nstatic const u_char *find_string(const u_char *, int *, const char * const *, \n    const char * const *, int); \n\n\nchar * \nstrptime(const char *buf, const char *fmt, struct tm *tm) \n{ \n    unsigned char c; \n    const unsigned char *bp; \n    int alt_format, i, split_year = 0; \n    const char *new_fmt; \n\n    bp = (const u_char *)buf; \n\n    while (bp != NULL &amp;&amp; (c = *fmt++) != '\\0') { \n        /* Clear `alternate' modifier prior to new conversion. */ \n        alt_format = 0; \n        i = 0; \n\n        /* Eat up white-space. */ \n        if (isspace(c)) { \n            while (isspace(*bp)) \n                bp++; \n            continue; \n        } \n\n        if (c != '%') \n            goto literal; \n\n\nagain:      switch (c = *fmt++) { \n        case '%':   /* \"%%\" is converted to \"%\". */ \nliteral: \n            if (c != *bp++) \n                return NULL; \n            LEGAL_ALT(0); \n            continue; \n\n        /*\n         * \"Alternative\" modifiers. Just set the appropriate flag\n         * and start over again.\n         */ \n        case 'E':   /* \"%E?\" alternative conversion modifier. */ \n            LEGAL_ALT(0); \n            alt_format |= ALT_E; \n            goto again; \n\n        case 'O':   /* \"%O?\" alternative conversion modifier. */ \n            LEGAL_ALT(0); \n            alt_format |= ALT_O; \n            goto again; \n\n        /*\n         * \"Complex\" conversion rules, implemented through recursion.\n         */ \n        case 'c':   /* Date and time, using the locale's format. */ \n            new_fmt = _ctloc(d_t_fmt); \n            goto recurse; \n\n        case 'D':   /* The date as \"%m/%d/%y\". */ \n            new_fmt = \"%m/%d/%y\"; \n            LEGAL_ALT(0); \n            goto recurse; \n\n        case 'F':   /* The date as \"%Y-%m-%d\". */ \n            new_fmt = \"%Y-%m-%d\"; \n            LEGAL_ALT(0); \n            goto recurse; \n\n        case 'R':   /* The time as \"%H:%M\". */ \n            new_fmt = \"%H:%M\"; \n            LEGAL_ALT(0); \n            goto recurse; \n\n        case 'r':   /* The time in 12-hour clock representation. */ \n            new_fmt =_ctloc(t_fmt_ampm); \n            LEGAL_ALT(0); \n            goto recurse; \n\n        case 'T':   /* The time as \"%H:%M:%S\". */ \n            new_fmt = \"%H:%M:%S\"; \n            LEGAL_ALT(0); \n            goto recurse; \n\n        case 'X':   /* The time, using the locale's format. */ \n            new_fmt =_ctloc(t_fmt); \n            goto recurse; \n\n        case 'x':   /* The date, using the locale's format. */ \n            new_fmt =_ctloc(d_fmt); \n            recurse: \n            bp = (const u_char *)strptime((const char *)bp, \n                                new_fmt, tm); \n            LEGAL_ALT(ALT_E); \n            continue; \n\n        /*\n         * \"Elementary\" conversion rules.\n         */ \n        case 'A':   /* The day of week, using the locale's form. */ \n        case 'a': \n            bp = find_string(bp, &amp;tm-&gt;tm_wday, _ctloc(day), \n                    _ctloc(abday), 7); \n            LEGAL_ALT(0); \n            continue; \n\n        case 'B':   /* The month, using the locale's form. */ \n        case 'b': \n        case 'h': \n            bp = find_string(bp, &amp;tm-&gt;tm_mon, _ctloc(mon), \n                    _ctloc(abmon), 12); \n            LEGAL_ALT(0); \n            continue; \n\n        case 'C':   /* The century number. */ \n            i = 20; \n            bp = conv_num(bp, &amp;i, 0, 99); \n\n            i = i * 100 - TM_YEAR_BASE; \n            if (split_year) \n                i += tm-&gt;tm_year % 100; \n            split_year = 1; \n            tm-&gt;tm_year = i; \n            LEGAL_ALT(ALT_E); \n            continue; \n\n        case 'd':   /* The day of month. */ \n        case 'e': \n            bp = conv_num(bp, &amp;tm-&gt;tm_mday, 1, 31); \n            LEGAL_ALT(ALT_O); \n            continue; \n\n        case 'k':   /* The hour (24-hour clock representation). */ \n            LEGAL_ALT(0); \n            /* FALLTHROUGH */ \n        case 'H': \n            bp = conv_num(bp, &amp;tm-&gt;tm_hour, 0, 23); \n            LEGAL_ALT(ALT_O); \n            continue; \n\n        case 'l':   /* The hour (12-hour clock representation). */ \n            LEGAL_ALT(0); \n            /* FALLTHROUGH */ \n        case 'I': \n            bp = conv_num(bp, &amp;tm-&gt;tm_hour, 1, 12); \n            if (tm-&gt;tm_hour == 12) \n                tm-&gt;tm_hour = 0; \n            LEGAL_ALT(ALT_O); \n            continue; \n\n        case 'j':   /* The day of year. */ \n            i = 1; \n            bp = conv_num(bp, &amp;i, 1, 366); \n            tm-&gt;tm_yday = i - 1; \n            LEGAL_ALT(0); \n            continue; \n\n        case 'M':   /* The minute. */ \n            bp = conv_num(bp, &amp;tm-&gt;tm_min, 0, 59); \n            LEGAL_ALT(ALT_O); \n            continue; \n\n        case 'm':   /* The month. */ \n            i = 1; \n            bp = conv_num(bp, &amp;i, 1, 12); \n            tm-&gt;tm_mon = i - 1; \n            LEGAL_ALT(ALT_O); \n            continue; \n\n        case 'p':   /* The locale's equivalent of AM/PM. */ \n            bp = find_string(bp, &amp;i, _ctloc(am_pm), NULL, 2); \n            if (tm-&gt;tm_hour &gt; 11) \n                return NULL; \n            tm-&gt;tm_hour += i * 12; \n            LEGAL_ALT(0); \n            continue; \n\n        case 'S':   /* The seconds. */ \n            bp = conv_num(bp, &amp;tm-&gt;tm_sec, 0, 61); \n            LEGAL_ALT(ALT_O); \n            continue; \n\n        case 'U':   /* The week of year, beginning on sunday. */ \n        case 'W':   /* The week of year, beginning on monday. */ \n            /*\n             * XXX This is bogus, as we can not assume any valid\n             * information present in the tm structure at this\n             * point to calculate a real value, so just check the\n             * range for now.\n             */ \n             bp = conv_num(bp, &amp;i, 0, 53); \n             LEGAL_ALT(ALT_O); \n             continue; \n\n        case 'w':   /* The day of week, beginning on sunday. */ \n            bp = conv_num(bp, &amp;tm-&gt;tm_wday, 0, 6); \n            LEGAL_ALT(ALT_O); \n            continue; \n\n        case 'Y':   /* The year. */ \n            i = TM_YEAR_BASE;   /* just for data sanity... */ \n            bp = conv_num(bp, &amp;i, 0, 9999); \n            tm-&gt;tm_year = i - TM_YEAR_BASE; \n            LEGAL_ALT(ALT_E); \n            continue; \n\n        case 'y':   /* The year within 100 years of the epoch. */ \n            /* LEGAL_ALT(ALT_E | ALT_O); */ \n            bp = conv_num(bp, &amp;i, 0, 99); \n\n            if (split_year) \n                /* preserve century */ \n                i += (tm-&gt;tm_year / 100) * 100; \n            else { \n                split_year = 1; \n                if (i &lt;= 68) \n                    i = i + 2000 - TM_YEAR_BASE; \n                else \n                    i = i + 1900 - TM_YEAR_BASE; \n            } \n            tm-&gt;tm_year = i; \n            continue; \n\n        case 'Z': \n            tzset(); \n            if (strncmp((const char *)bp, gmt, 3) == 0) { \n                tm-&gt;tm_isdst = 0; \n#ifdef TM_GMTOFF \n                tm-&gt;TM_GMTOFF = 0; \n#endif \n#ifdef TM_ZONE \n                tm-&gt;TM_ZONE = gmt; \n#endif \n                bp += 3; \n            } else { \n                const unsigned char *ep; \n\n                ep = find_string(bp, &amp;i, \n                             (const char * const *)tzname, \n                              NULL, 2); \n                if (ep != NULL) { \n                    tm-&gt;tm_isdst = i; \n#ifdef TM_GMTOFF \n                    tm-&gt;TM_GMTOFF = -(timezone); \n#endif \n#ifdef TM_ZONE \n                    tm-&gt;TM_ZONE = tzname[i]; \n#endif \n                } \n                bp = ep; \n            } \n            continue; \n\n        /*\n         * Miscellaneous conversions.\n         */ \n        case 'n':   /* Any kind of white-space. */ \n        case 't': \n            while (isspace(*bp)) \n                bp++; \n            LEGAL_ALT(0); \n            continue; \n\n\n        default:    /* Unknown/unsupported conversion. */ \n            return NULL; \n        } \n    } \n\n    return __UNCONST(bp); \n} \n\n\nstatic const u_char * \nconv_num(const unsigned char *buf, int *dest, uint llim, uint ulim) \n{ \n    uint result = 0; \n    unsigned char ch; \n\n    /* The limit also determines the number of valid digits. */ \n    uint rulim = ulim; \n\n    ch = *buf; \n    if (ch &lt; '0' || ch &gt; '9') \n        return NULL; \n\n    do { \n        result *= 10; \n        result += ch - '0'; \n        rulim /= 10; \n        ch = *++buf; \n    } while ((result * 10 &lt;= ulim) &amp;&amp; rulim &amp;&amp; ch &gt;= '0' &amp;&amp; ch &lt;= '9'); \n\n    if (result &lt; llim || result &gt; ulim) \n        return NULL; \n\n    *dest = result; \n    return buf; \n} \n\nstatic const u_char * \nfind_string(const u_char *bp, int *tgt, const char * const *n1, \n        const char * const *n2, int c) \n{ \n    int i; \n    unsigned int len; \n\n    /* check full name - then abbreviated ones */ \n    for (; n1 != NULL; n1 = n2, n2 = NULL) { \n        for (i = 0; i &lt; c; i++, n1++) { \n            len = strlen(*n1); \n            if (strncasecmp(*n1, (const char *)bp, len) == 0) { \n                *tgt = i; \n                return bp + len; \n            } \n        } \n    } \n\n    /* Nothing matched */ \n    return NULL; \n} \n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "closed_date": 1436368499, "answer_count": 2, "score": 2, "last_activity_date": 1436450356, "creation_date": 1436363127, "last_edit_date": 1436450356, "question_id": 31294622, "link": "https://stackoverflow.com/questions/31294622/strptime-open-source-code-not-implementing", "closed_reason": "Duplicate", "title": "Strptime open source code not implementing", "body": "<p>I am trying to convert a string into time format. As I read here on stackoverflow, the discussion of converting a string into time format. The function <code>strptime()</code> has been used for the same. I am also using the <code>strptime()</code> in my program in C, in windows. I tried to copy the open source strptime code from the following link in my program, but there are too many headerfiles missing. I created those headerfiles too, but still the code is not working and giving many warnings.</p>\n\n<p>Please help.</p>\n\n<p><a href=\"http://cvsweb.netbsd.org/bsdweb.cgi/src/lib/libc/time/strptime.c?rev=HEAD\" rel=\"nofollow\">http://cvsweb.netbsd.org/bsdweb.cgi/src/lib/libc/time/strptime.c?rev=HEAD</a></p>\n\n<p>Thanks much.</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 0, "creation_date": 1436362542, "post_id": 31294305, "comment_id": 50579307, "body": "<code>payload</code> ends with &#39;\\0&#39; ???"}, {"owner": {"reputation": 77, "user_id": 5073323, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f621d680bd60631ec2fbf26c8d2a273?s=128&d=identicon&r=PG&f=1", "display_name": "chicken momo", "link": "https://stackoverflow.com/users/5073323/chicken-momo"}, "reply_to_user": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 0, "creation_date": 1436362634, "post_id": 31294305, "comment_id": 50579388, "body": "sorry didn&#39;t get your question"}, {"owner": {"reputation": 77, "user_id": 5073323, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f621d680bd60631ec2fbf26c8d2a273?s=128&d=identicon&r=PG&f=1", "display_name": "chicken momo", "link": "https://stackoverflow.com/users/5073323/chicken-momo"}, "reply_to_user": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1436362736, "post_id": 31294305, "comment_id": 50579468, "body": "i was just trying to demonstrate that neither of the 3 or 4 permutations are working for me @pynchia"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 0, "creation_date": 1436362737, "post_id": 31294305, "comment_id": 50579469, "body": "what @Jeyaram meant is, <code>%s</code> expects a pointer to the first element of a null-terminated <code>char</code> array. If the array is not-null terminated, the behaviour is undefined."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1436362771, "post_id": 31294305, "comment_id": 50579484, "body": "please take some time to learn pointers. AVOID writing awful things like <code>&amp;payload[0]</code> (write <code>payload</code> instead!)"}, {"owner": {"reputation": 77, "user_id": 5073323, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f621d680bd60631ec2fbf26c8d2a273?s=128&d=identicon&r=PG&f=1", "display_name": "chicken momo", "link": "https://stackoverflow.com/users/5073323/chicken-momo"}, "edited": false, "score": 0, "creation_date": 1436362810, "post_id": 31294305, "comment_id": 50579515, "body": "then no, it is not null terminated. but shouldn&#39;t fputs work at least?"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 2, "creation_date": 1436362848, "post_id": 31294305, "comment_id": 50579538, "body": "I&#39;d bet that <code>payload[0] == 0</code> in you case. So you are writing an empty string."}, {"owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 0, "creation_date": 1436362996, "post_id": 31294305, "comment_id": 50579668, "body": "payload[0] will be <code>(null)</code>"}, {"owner": {"reputation": 77, "user_id": 5073323, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f621d680bd60631ec2fbf26c8d2a273?s=128&d=identicon&r=PG&f=1", "display_name": "chicken momo", "link": "https://stackoverflow.com/users/5073323/chicken-momo"}, "edited": false, "score": 0, "creation_date": 1436363004, "post_id": 31294305, "comment_id": 50579678, "body": "I added \tpayload[255] = &#39;\\0&#39;; it doesn&#39;t work"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 0, "creation_date": 1436363017, "post_id": 31294305, "comment_id": 50579687, "body": "@Jeyaram NULL is a Pointer...."}, {"owner": {"reputation": 77, "user_id": 5073323, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f621d680bd60631ec2fbf26c8d2a273?s=128&d=identicon&r=PG&f=1", "display_name": "chicken momo", "link": "https://stackoverflow.com/users/5073323/chicken-momo"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1436363042, "post_id": 31294305, "comment_id": 50579702, "body": "yes payload[0]=0 but the rest of the string is filled @marian"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436363449, "post_id": 31294305, "comment_id": 50580060, "body": "Then that&#39;s your problem.  The string starts with a NULL byte, so it&#39;s an empty string.  Anything else that comes after doesn&#39;t matter."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1436362835, "creation_date": 1436362835, "answer_id": 31294496, "question_id": 31294305, "link": "https://stackoverflow.com/questions/31294305/writing-a-character-array-to-a-file-in-c-given-methods-dont-work/31294496#31294496", "title": "Writing a character array to a file in C (given methods dont work)", "body": "<p>insert this line before trying to print:</p>\n\n<pre><code>payload[255] = '\\0';\n</code></pre>\n\n<p>and be sure there is no '\\0' anywhere earlier in the payload[] array.</p>\n"}, {"tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": false, "score": 0, "last_activity_date": 1436362894, "creation_date": 1436362894, "answer_id": 31294523, "question_id": 31294305, "link": "https://stackoverflow.com/questions/31294305/writing-a-character-array-to-a-file-in-c-given-methods-dont-work/31294523#31294523", "title": "Writing a character array to a file in C (given methods dont work)", "body": "<p>You are trying to print three strings (%S) to the file. What does payload contain? Printable characters?</p>\n\n<p>Therefore you need to make sure that it's printable characters and null terminated.</p>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 1603634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975deb0d852da1e6a1f15797f24ab4d?s=128&d=identicon&r=PG&f=1", "display_name": "David LaPorte", "link": "https://stackoverflow.com/users/1603634/david-laporte"}, "is_accepted": true, "score": 2, "last_activity_date": 1436363085, "creation_date": 1436363085, "answer_id": 31294595, "question_id": 31294305, "link": "https://stackoverflow.com/questions/31294305/writing-a-character-array-to-a-file-in-c-given-methods-dont-work/31294595#31294595", "title": "Writing a character array to a file in C (given methods dont work)", "body": "<p>Instead of <code>fprintf(fptr, \"%s\", p);</code>, try this:</p>\n\n<pre><code>for (int x2 = 0; x2 &lt; 256; x2++)  \n      {\n          fprintf(fptr,\"%x\",payload[x2]);\n      }\n</code></pre>\n\n<p>As other have stated, %s is used for NULL-terminated strings of displayable characters. It sounds like you don't have that.</p>\n"}, {"tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": false, "score": 0, "last_activity_date": 1436363652, "creation_date": 1436363652, "answer_id": 31294840, "question_id": 31294305, "link": "https://stackoverflow.com/questions/31294305/writing-a-character-array-to-a-file-in-c-given-methods-dont-work/31294840#31294840", "title": "Writing a character array to a file in C (given methods dont work)", "body": "<p>What you probably need is the function <code>fwrite</code>. Try:</p>\n\n<pre><code>int results = fwrite(payload, sizeof(payload), 1, fptr); \n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5073323, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f621d680bd60631ec2fbf26c8d2a273?s=128&d=identicon&r=PG&f=1", "display_name": "chicken momo", "link": "https://stackoverflow.com/users/5073323/chicken-momo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 31294595, "answer_count": 4, "score": -2, "last_activity_date": 1436363652, "creation_date": 1436362355, "last_edit_date": 1436363351, "question_id": 31294305, "link": "https://stackoverflow.com/questions/31294305/writing-a-character-array-to-a-file-in-c-given-methods-dont-work", "title": "Writing a character array to a file in C (given methods dont work)", "body": "<p>I am trying to copy a character array to a text file, but it refuses to be copied. I have added a sample text to be written, which works wine, so probably the problem is with the array <code>payload[256]</code>?<br>\n(<code>char payload[256]</code> is the array i am trying to copy):</p>\n\n<pre><code>printf(\"new value of payload-----&gt; \\n\");\n\nfor (int x2 = 0; x2 &lt; 256; x2++)  //PRINTING THE ARRAY. IT IS FILLED UP\n{\n    printf(\"%x\",payload[x2]);\n    //if ((x2 + 1) % 16 == 0) printf(\"\\n\");\n}\ngetchar();\n\nFILE *fptr= fopen(\"program.txt\", \"w\");\nif (fptr == NULL)\n{\n    printf(\"Error!\");\n    exit(1);\n}\nconst char*p = payload;\n\nfprintf(fptr, \"%s\", p);            //DOESNT PRINT\nfprintf(fptr, \"%s\", &amp;payload[0]);  //DOESNT PRINT\nfprintf(fptr, \"%s\", payload);      //DOESNT PRINT\n\nconst char *text = \"Write this to the file\";\nfprintf(fptr, \"Some text: %s\\n\", text);   //WORKS FINE\n\nint results = fputs(payload, fptr); //DOESNT WORK\n\nfclose(fptr);\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1436361987, "post_id": 31294092, "comment_id": 50578873, "body": "I believe there is enough parenthesis, so you should not be confused about precedence, at all."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1436362105, "post_id": 31294092, "comment_id": 50578970, "body": "that results in <code>a[2][1]</code>."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1436362275, "post_id": 31294092, "comment_id": 50579099, "body": "if you are stuck with pointer arithmetics, just do not use it but use simple <code>a[2][1]</code> instead"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1436362741, "post_id": 31294092, "comment_id": 50579473, "body": "How are you stuck exactly? Just look up the precedence order of operators."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1436373496, "post_id": 31294092, "comment_id": 50587726, "body": "What in the world about this question led to all the down votes?  Crimeny."}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1436363181, "post_id": 31294454, "comment_id": 50579822, "body": "If asked what time it was, I suspect you would go into the properties of crystals, springs, quartz, etc, and finish by telling me what time it is."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1436364352, "post_id": 31294454, "comment_id": 50580801, "body": "@ryyker  I am sorry I have not understood your comment. Did you down-vote the answer? What is wrong with it?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1436364562, "post_id": 31294454, "comment_id": 50580997, "body": "@ryyker C is C. You must actually understand all the dirty details to use it safely. It is not a high level language where you can just call <code>for(me) { Write.Program(With2dArrays); } </code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436373390, "post_id": 31294454, "comment_id": 50587633, "body": "@Lundin -  Regarding: <i>You must actually understand</i> <b><i>all</i></b> <i>the dirty details to use it safely</i>.  Well, eventually, but <i>not at first</i>.     C, like other languages, is best learned in phases.  Fundamentals have to be solidly understood before abstract concepts can be digested by a student.  Based on the nature of this question, it appears OP is still a student, at least with respect to fundamentals of pointers and arrays.  BTW, I did not down vote Vlad&#39;s answer.  Ironically though I am perplexed why a question resulting in two good answers was down voted 4 times.  Seems a good question."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1436373934, "post_id": 31294454, "comment_id": 50587997, "body": "No, I did not down vote. However my comment was intended to convey my feeling that in answering, you traveled from Paris to Seville via the polar route. The first 8 lines, and the last two were sufficient to answer OP. Introducing the typedef concept, although not incorrect, was a distraction from the main question. (IMO).  My observations notwithstanding, +1.  This <i>is</i> a useful answer."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1436362706, "creation_date": 1436362706, "answer_id": 31294454, "question_id": 31294092, "link": "https://stackoverflow.com/questions/31294092/i-am-stucked-with-this-code-of-accessing-values-in-2d-array-using-pointers/31294454#31294454", "title": "I am stucked with this code of accessing values in 2D array using pointers", "body": "<p>If you have a one dimensional array as for example</p>\n\n<pre><code>int a[] = { 5, 6 };\n</code></pre>\n\n<p>then expression <code>a[1]</code> is equivalent to expression <code>*( a + 1 )</code> and yields the second element of the array that is equal to <code>6</code>.</p>\n\n<p>Array <code>a</code> from your example</p>\n\n<pre><code>int a[4][2] = {1,2,3,4,5,6,7,8};\n</code></pre>\n\n<p>can be rewritten the following way for the clarity</p>\n\n<pre><code>int a[4][2] = { { 1,2 }, { 3,4 }, { 5,6 }, { 7,8 } };\n</code></pre>\n\n<p>You also can introduce a typedef name for the array</p>\n\n<pre><code>typedef int T[2];\n</code></pre>\n\n<p>where name <code>T</code> denotes type <code>int[2]</code>.</p>\n\n<p>Using this typedef you can rewrite the declaration (the initialization may be omitted) of the original array the following way</p>\n\n<pre><code>T a[4];\n</code></pre>\n\n<p>Now let's consider expression <code>*(*(a + 2)+1)</code>. Subexpression <code>*(a + 2)</code> is equivalent to <code>a[2]</code> and as explained above will give the third element of the array of type <code>T</code> where T has type <code>int[2]</code>. So the object of this subexpression will be in turn one dimensioanl array of type <code>T</code> and correspond to the third element of array <code>a</code>. We can imagine it like</p>\n\n<pre><code>T tmp = { 5,6 };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int tmp[2] = { 5,6 };\n</code></pre>\n\n<p>Thus expression <code>*(*(a + 2)+1)</code> is equivalent to expression <code>*( tmp + 1 )</code> that equivalent to <code>tmp[1]</code> and will yield the second element of this imaginable array tmp. That is you will get <code>6</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1436363559, "post_id": 31294464, "comment_id": 50580157, "body": "Actually <code>a[2]</code> and <code>*(a + 2)</code> are both a pointer which holds an address of the array of type <code>int[2]</code> which contains the numbers 5 and 6. Sure, the address of the array is the same as the address of the first number, but the type is different. Also, <code>a</code> as such is not a pointer. It is an array. However, when you pass <code>a</code> to the <code>+</code>-operator, the operand does <i>decay</i> to a pointer to the first element (which is the array {1,2}, not a number)."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1436364469, "post_id": 31294464, "comment_id": 50580918, "body": "@user2079303 a[2] and *(a + 2) are not pointers. They are arrays. But used in expressions an array is implicitly converted to a pointer to tts first element."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436364919, "post_id": 31294464, "comment_id": 50581276, "body": "<code>a[2]</code> is an array which decays into a pointer. <code>a[2] + 1</code> is indeed a pointer because <code>a[2]</code> has decayed. <code>a</code> is a 2D array which decays into a pointer to the first element (an array of two integers). <code>a + 2</code> performs pointer arithmetic on array basis: take <code>a</code>, it decays to a pointer to an array of 2 int, therefore increase the address with 2*2*sizeof(int) = 16. This part of your answer is incorrect and needs to be fixed."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436372648, "post_id": 31294464, "comment_id": 50587156, "body": "@VladfromMoscow aww, my bad, I made the same mistake as kosmo16 that I corrected on in the next part of my comment :D how silly of me."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1436373817, "post_id": 31294464, "comment_id": 50587925, "body": "Several of your statements are not correct (see comments from Vlad and Lundin), and are unfortunately misleading OP to  learn (and accept) wrong concepts."}], "tags": [], "owner": {"reputation": 156, "user_id": 2769167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7358f160c8f6c0bf3935ec6682b48498?s=128&d=identicon&r=PG&f=1", "display_name": "kosmo16", "link": "https://stackoverflow.com/users/2769167/kosmo16"}, "is_accepted": true, "score": 0, "last_activity_date": 1436374911, "last_edit_date": 1436374911, "creation_date": 1436362725, "answer_id": 31294464, "question_id": 31294092, "link": "https://stackoverflow.com/questions/31294092/i-am-stucked-with-this-code-of-accessing-values-in-2d-array-using-pointers/31294464#31294464", "title": "I am stucked with this code of accessing values in 2D array using pointers", "body": "<p>Let's consider both your printf calls.</p>\n\n<p><code>a[2]</code> in cell is <code>int[2] = {5,6}</code> </p>\n\n<p><code>a[2] + 1</code> is a pointer which holds an address of number 6 (a[2] is implicitly converted to a pointer), so after the dereference it is 6.</p>\n\n<p><code>a</code> is and <code>int[4][2]</code> array, which is converted to a pointer (after conversion it holds the pointer to the first element)</p>\n\n<p><code>a + 2</code> is a pointer which holds an address of pointer to number 5</p>\n\n<p><code>*(a + 2)</code> is a pointer which holds address of number 5</p>\n\n<p><code>*(a + 2) + 1</code> is a pointer which holds address of number 6 </p>\n\n<p><code>*(*(a + 2) + 1)</code> is number 6 </p>\n\n<p>EDIT:</p>\n\n<p>Sorry, for some wrong statements. I take into account comments and I need to add that in above example lvalue expression of array type is implicitly converted to the pointer to its first element.</p>\n"}], "owner": {"reputation": 131, "user_id": 4475299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Sgic9.jpg?s=128&g=1", "display_name": "Sharad Gaur", "link": "https://stackoverflow.com/users/4475299/sharad-gaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 31294464, "answer_count": 2, "score": -4, "last_activity_date": 1436374911, "creation_date": 1436361892, "question_id": 31294092, "link": "https://stackoverflow.com/questions/31294092/i-am-stucked-with-this-code-of-accessing-values-in-2d-array-using-pointers", "title": "I am stucked with this code of accessing values in 2D array using pointers", "body": "<pre><code>int main()\n{\n    int a[4][2] = {1,2,3,4,5,6,7,8};\n    printf(\"%d\\n\",*(a[2]+1));\n    printf(\"%d\\n\", *(*(a + 2)+1));\n    getch();\n}\n</code></pre>\n\n<p>Two-dimensional array can be thought of as one-dimensional array.\n    <br>\noutput of this program is 6 in both printf. My question is how <code>printf(\"%d\\n\", *(*(a + 2)+1));</code> is executing and how precedence of asterik * and + evaluating.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 2, "creation_date": 1436361670, "post_id": 31293931, "comment_id": 50578631, "body": "What happens when you calculate <code>(9&#47;5)</code> in the C language?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 5, "creation_date": 1436361758, "post_id": 31293931, "comment_id": 50578700, "body": "uff..not again..please indent your code..."}, {"owner": {"reputation": 6984, "user_id": 703531, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2de8b26df89622f511d45480761237c7?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/703531/bruce"}, "edited": false, "score": 0, "creation_date": 1436361867, "post_id": 31293931, "comment_id": 50578774, "body": "I feel nice and indented it. Pay attention to the weather, something bad will happen."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "edited": false, "score": 0, "creation_date": 1436366317, "post_id": 31294251, "comment_id": 50582501, "body": "Thanks, I understood the logical error. But when I use a printf(&quot;Enter a number&quot;) before scanf(&quot;%d&quot;, &amp;a) and later printf(&quot;Your number is %d&quot;,a)..., but on the console I don&#39;t even get the message &quot;Enter a number&quot; and it waits till i enter some valve and then prints both the messages in the printf. What&#39;s happening..?"}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "edited": false, "score": 0, "creation_date": 1436366411, "post_id": 31294251, "comment_id": 50582578, "body": "@Gow It must be a problem with your eclipse installation. Try running it directly on your OS&#39;s console and see what happens,"}, {"owner": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "edited": false, "score": 0, "creation_date": 1436366818, "post_id": 31294251, "comment_id": 50582905, "body": "Ahh.! Please tell me, How do you run it on OS&#39;s console..?"}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "edited": false, "score": 0, "creation_date": 1436371779, "post_id": 31294251, "comment_id": 50586649, "body": "@Gow. Why not read it yourself. To compile <code>gcc code.c</code>. To run on Linux <code>.&#47;a.out</code> and Windows <code>a.exe</code>."}], "tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436362594, "last_edit_date": 1436362594, "creation_date": 1436362247, "answer_id": 31294251, "question_id": 31293931, "link": "https://stackoverflow.com/questions/31293931/basic-c-programming-logical-error-while-converting-celsius-to-kelvin/31294251#31294251", "title": "Basic C programming.. logical error while converting Celsius to kelvin", "body": "<pre><code>int celsius;\nscanf(\"%d\", &amp;celsius);\nint kelvin = 273 + celsius;\nfloat farenheit = 1.8 * celsius + 32;    // To make it a float\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<pre><code>100\n0\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>212.000000 373\n32.000000 273\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/6ikg23\" rel=\"nofollow\">http://ideone.com/6ikg23</a> demo.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1436362281, "creation_date": 1436362281, "answer_id": 31294270, "question_id": 31293931, "link": "https://stackoverflow.com/questions/31293931/basic-c-programming-logical-error-while-converting-celsius-to-kelvin/31294270#31294270", "title": "Basic C programming.. logical error while converting Celsius to kelvin", "body": "<p>the 9/5 is an integer divide.</p>\n\n<p>an integer divide drops any fraction.</p>\n\n<p>So the result is 1.</p>\n\n<p>To fix the problem, use float rather than int</p>\n\n<pre><code>9.0f/5.0f\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "edited": false, "score": 0, "creation_date": 1436367311, "post_id": 31294381, "comment_id": 50583324, "body": "K. Thanks, Would you Please tell me, How do you run a program on OS&#39;s console..? I&#39;m using Windows 8.1"}, {"owner": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "reply_to_user": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "edited": false, "score": 0, "creation_date": 1436376420, "post_id": 31294381, "comment_id": 50589486, "body": "Which compiler are you using right now (gcc, clang, etc)? You should be able to open the console and invoke it directly."}, {"owner": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "reply_to_user": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "edited": false, "score": 0, "creation_date": 1436380798, "post_id": 31294381, "comment_id": 50592181, "body": "Then open the console and type <code>gcc mycode.c -o myprogram</code>"}], "tags": [], "owner": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "is_accepted": false, "score": 0, "last_activity_date": 1436362548, "creation_date": 1436362548, "answer_id": 31294381, "question_id": 31293931, "link": "https://stackoverflow.com/questions/31293931/basic-c-programming-logical-error-while-converting-celsius-to-kelvin/31294381#31294381", "title": "Basic C programming.. logical error while converting Celsius to kelvin", "body": "<p>First, the code you provided is missing a brace at the end and won't calculate the proper  Fahrenheit conversion due to integer truncation; however, the first one can be chalked up to a copy-paste error, and the second is a common mistake among programmers (new and old).</p>\n\n<p>You code compiled and ran perfectly fine for me, and after fixing the Fahrenheit error (hint: use a decimal point, <code>(9./5)</code>, to calculate it in floating-point) it returned the correct values for my inputs.</p>\n\n<p>Unfortunately, I'm not familiar with Eclipse, so I can't be much help there. But it's definitely a tooling issue, not a problem with your code.</p>\n"}], "owner": {"reputation": 45, "user_id": 5094006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074bdf112e9b092e44f80d170adc5a61?s=128&d=identicon&r=PG&f=1", "display_name": "Gow.", "link": "https://stackoverflow.com/users/5094006/gow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1481274928, "answer_count": 3, "score": -6, "last_activity_date": 1436367111, "creation_date": 1436361551, "last_edit_date": 1436367111, "question_id": 31293931, "link": "https://stackoverflow.com/questions/31293931/basic-c-programming-logical-error-while-converting-celsius-to-kelvin", "closed_reason": "Duplicate", "title": "Basic C programming.. logical error while converting Celsius to kelvin", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    int celsius = 0, kelvin = 0;\n    float farenheit;\n\n    printf(\"Enter the Boiling of water in Celcius \\n\");\n    scanf(\"%d\", &amp;celsius);\n    kelvin = 273 + celsius;\n    farenheit = celsius * (9 / 5) + 32;\n    printf(\"The Boiling point of water in Kelvin is %d \\n and in farenheit is %f \\n \\n\", kelvin, farenheit);\n\n    printf(\"Enter the Freezing point of water in Celcius \\n\");\n    scanf(\"%d\", &amp;celsius);\n    kelvin = 273 + celsius;\n    farenheit = celsius * (9 / 5) + 32;\n    printf(\"The freezing point of water in Kelvin is %d \\n and in farenheit is %f \\n \\n\", kelvin, farenheit);\n\n    return 0;\n}\n</code></pre>\n\n<p>In eclipse, I type this code and I'm expecting it to ask me on console \"Enter the Boiling of water in Celsius\" and wait till i type in 100 and again do the same for freezing point. But after I build(ctrl+B), it does nothing. I had to enter some number(Here i did '100')then press 'enter' and again some number (here its '1') then press 'enter'. It displayed me the calculations for '100' degree Celsius.And it didn't even ask me to enter the freezing point either. I typed '1' and pressed enter.\nWhats wrong with my code.? </p>\n\n<p>Here's my output.</p>\n\n<pre><code>100\n1\nEnter the Boiling of water in Celcius\nThe Boiling point of water in Kelvin is 373 and in farenheit is 132.000000\n\nEnter the Freezing point of water in Celcius\nThe freezing point of water in Kelvin is 274 and in farenheit is 33.000000\n</code></pre>\n"}, {"tags": ["c", "performance", "pointers", "memory"], "comments": [{"owner": {"reputation": 1890, "user_id": 3883676, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d826230c9cbfdb8c41214765aa2cc32b?s=128&d=identicon&r=PG&f=1", "display_name": "Othman Benchekroun", "link": "https://stackoverflow.com/users/3883676/othman-benchekroun"}, "edited": false, "score": 2, "creation_date": 1436361829, "post_id": 31293913, "comment_id": 50578750, "body": "&quot; so I hope someone in the community knows more than me and is willing to shed some light on my problem &quot; , what is the problem ?"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1436361857, "post_id": 31293913, "comment_id": 50578769, "body": "I do not really understand what is your &quot;problem&quot;, you tried different versions, you found one is faster, so just use it... did I miss something?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1436361923, "post_id": 31293913, "comment_id": 50578821, "body": "Wait, so you are adding 800 to your iterators and it works?"}, {"owner": {"reputation": 89, "user_id": 4319241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/531765cc4441307d224d6102638c3c01?s=128&d=identicon&r=PG&f=1", "display_name": "Rugruth", "link": "https://stackoverflow.com/users/4319241/rugruth"}, "edited": false, "score": 0, "creation_date": 1436362196, "post_id": 31293913, "comment_id": 50579033, "body": "Every block is doing a different thing, you can&#39;t compare performance this way and obtain meaningful results. (++iter1 is not the same as iter1+=s1, since s1 is 800)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1436362491, "post_id": 31293913, "comment_id": 50579277, "body": "Are you testing a <b>release</b>, <b>optimized</b> build?  If not, then these numbers and observations you&#39;re showing us are meaningless.  When a question of performance is asked, it should require you to specify in your question the compiler and build/optimization settings."}, {"owner": {"reputation": 614, "user_id": 3329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2b587f873636deef475dc44bfe5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthink", "link": "https://stackoverflow.com/users/3329358/lighthink"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1436365952, "post_id": 31293913, "comment_id": 50582165, "body": "@tobi303 I need all of them."}, {"owner": {"reputation": 614, "user_id": 3329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2b587f873636deef475dc44bfe5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthink", "link": "https://stackoverflow.com/users/3329358/lighthink"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1436366022, "post_id": 31293913, "comment_id": 50582222, "body": "@KABoissonneault Why wouldn&#39;t it work?"}], "answers": [{"tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": false, "score": 5, "last_activity_date": 1436361995, "creation_date": 1436361995, "answer_id": 31294134, "question_id": 31293913, "link": "https://stackoverflow.com/questions/31293913/dereferencing-iterators-performance/31294134#31294134", "title": "Dereferencing iterators performance", "body": "<p>The performance difference has nothing to do with the iterators.  The difference is in the extra cache misses from advancing through a large amount of data with greater than unit stride.</p>\n"}, {"comments": [{"owner": {"reputation": 614, "user_id": 3329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2b587f873636deef475dc44bfe5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthink", "link": "https://stackoverflow.com/users/3329358/lighthink"}, "edited": false, "score": 0, "creation_date": 1436365874, "post_id": 31294273, "comment_id": 50582106, "body": "&quot;It takes less time to look at something at the next page of a book than something at the 800th next page&quot; . When I only used one of the iter&#39;s, the second function ran almost as fast as the other 2, despite the iterator being added 800. Why is it so much more time consuming when I add another iterator that is being added 800 at each step? Shouldn&#39;t the performance drop be less than &quot;4 times slower&quot; or is the memory being accesed the same time something else is done?"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "reply_to_user": {"reputation": 614, "user_id": 3329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2b587f873636deef475dc44bfe5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthink", "link": "https://stackoverflow.com/users/3329358/lighthink"}, "edited": false, "score": 1, "creation_date": 1436366513, "post_id": 31294273, "comment_id": 50582657, "body": "The variation in time is due to deferencing, ie <code>*iter1</code> and <code>*iter2</code>, not the arithmetic operations on the iterators. So not only by removing an iterator you are reducing the number of memory accesses, you are also making accesses more uniform. Which may open the way to all kind of optimizations."}], "tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": true, "score": 5, "last_activity_date": 1436362286, "creation_date": 1436362286, "answer_id": 31294273, "question_id": 31293913, "link": "https://stackoverflow.com/questions/31293913/dereferencing-iterators-performance/31294273#31294273", "title": "Dereferencing iterators performance", "body": "<p>This is just a manifestation of data locality.\nIt takes less time to look at something at the next page of a book than something at the 800th next page. Try for yourself at home.</p>\n"}, {"comments": [{"owner": {"reputation": 614, "user_id": 3329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2b587f873636deef475dc44bfe5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthink", "link": "https://stackoverflow.com/users/3329358/lighthink"}, "edited": false, "score": 0, "creation_date": 1436365177, "post_id": 31294299, "comment_id": 50581499, "body": "I looked at Dissasembly my IDE ( Visual Studio 2012 ) generated, and it was pretty straight-forward and wasn&#39;t doing any extra things. I never saw any LOAD instruction, so I guess it&#39;s something else you requested."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5092600"}, "is_accepted": false, "score": 1, "last_activity_date": 1436362343, "creation_date": 1436362343, "answer_id": 31294299, "question_id": 31293913, "link": "https://stackoverflow.com/questions/31293913/dereferencing-iterators-performance/31294299#31294299", "title": "Dereferencing iterators performance", "body": "<p>My guess is the resulting machine code, depending on the sofistication of your compiler/platform.</p>\n\n<p>To retrieve a pointer value, the internal machine will utilize something like a LOAD instruction, lets call the fictional assembler code <code>LD addr0</code>.</p>\n\n<p><code>addr0</code> refers to the address register that is used.</p>\n\n<p>A lot of CPUs provide statements like <code>LD addr0+</code> that increment the address after loading the stored value. Often, this additional increment does not lead to any extra cycles.</p>\n\n<p>I worked with some compilers that could only generate the <code>addr0+</code> statements if the address increment is done by the increment operator directly after or in the dereferenciation statement.</p>\n\n<p>So the last one could be the example with the most efficient machine code.</p>\n\n<p>It would be interesting if you could post the resulting assembler code of the compilation process for each of the example.</p>\n"}], "owner": {"reputation": 614, "user_id": 3329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2b587f873636deef475dc44bfe5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthink", "link": "https://stackoverflow.com/users/3329358/lighthink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 31294273, "answer_count": 3, "score": -6, "last_activity_date": 1436364877, "creation_date": 1436361528, "last_edit_date": 1436364877, "question_id": 31293913, "link": "https://stackoverflow.com/questions/31293913/dereferencing-iterators-performance", "title": "Dereferencing iterators performance", "body": "<p>I have 3 functions that come down to the code below, that runs 800x800 times:</p>\n\n<p>Each <code>while</code> loop below runs for exactly 800 times before <code>iter1 == lim</code>, so the duration was measured as it ran 800x800x800 (512 millions) times.</p>\n\n<p><code>iter1</code>, <code>iter2</code> and <code>lim</code> are <code>double</code> pointers. They point to a large enough vector of <code>double</code>'s.</p>\n\n<p><code>sum</code> is a <code>double</code> local variable.</p>\n\n<p><code>s1</code> and <code>s2</code> are local <code>unsigned int</code>'s, both equal to 800.</p>\n\n<p>First runs in 2.257 seconds:</p>\n\n<pre><code>while ( iter1 &lt; lim )\n{\n    sum += *iter1 * *iter2;\n    ++iter1;\n    iter2 += s2;\n}\n</code></pre>\n\n<p>Second runs in 7.364 seconds:</p>\n\n<pre><code>while ( iter1 &lt; lim )\n{\n    sum += *iter1 * *iter2;\n    iter1 += s1;\n    iter2 += s2;\n}\n</code></pre>\n\n<p>Third runs in 1.355 seconds:</p>\n\n<pre><code>while ( iter1 &lt; lim )\n{\n    sum += *iter1 * *iter2;\n    ++iter1;\n    ++iter2;\n}\n</code></pre>\n\n<p>If I remove the <code>sum += *iter1 * *iter2;</code> instruction from each of them, they all run in around 1.07 seconds.</p>\n\n<p>If I remove the second multiplication and change the instruction to <code>sum += *iter1;</code>, the first and third run in 1.33 seconds, while the second runs in 1.46 seconds.</p>\n\n<p>If I remove the other iterator, like this: <code>sum += *iter2;</code>, then the first and second run in around 2.2 seconds, while the third runs in 1.35 seconds.</p>\n\n<p>Obviously, the performance drop is tied to the quantity added to <code>iter1</code> and <code>iter2</code>. I am no expert in how the processor accesses memory and dereferences pointers, so I hope someone in the community knows more than me and is willing to shed some light on my problem.</p>\n\n<p>If you need any information about the hardware I ran these tests on, or anything else that can prove helpful, feel free to ask in the comments.</p>\n\n<p>EDIT: The problem is that the second function was slow, when compared to the others, and wanted to know if there is anything I can do to make it run faster, as it appeared to be doing similar things like the other 2.</p>\n\n<p>EDIT 2: All the measurements were made in Release build</p>\n"}, {"tags": ["c", "linux", "gdb", "nm"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436361568, "post_id": 31293871, "comment_id": 50578540, "body": "offset in library is unrelated to offset when in memory."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1436402413, "post_id": 31293871, "comment_id": 50601880, "body": "&quot;The nm command gives me ...&quot; -- please tell what you are running <code>nm</code> on (presumably it&#39;s not on the executable that you run under GDB), so your question can be answered correctly (both current answers are completely bogus)."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1436424954, "post_id": 31293871, "comment_id": 50608856, "body": "@EmployedRussian can&#39;t you to answer on 3 possible cases: object file, shared object file, executable file? What stops you from that? Big and correct answers are good."}, {"owner": {"reputation": 6771, "user_id": 1448363, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/7yxrS.jpg?s=128&g=1", "display_name": "Piotr Chojnacki", "link": "https://stackoverflow.com/users/1448363/piotr-chojnacki"}, "reply_to_user": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1436426818, "post_id": 31293871, "comment_id": 50610009, "body": "@EmployedRussian I ran it on *.so library which is linked to my executable."}], "answers": [{"comments": [{"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 2, "creation_date": 1436366833, "post_id": 31293981, "comment_id": 50582924, "body": "This answer is <i>totally</i> wrong on all points made (on Linux). The point about &quot;keeps the same until unloaded&quot; is partially correct on Windows, but this question is about Linux."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 2, "creation_date": 1436366978, "post_id": 31293981, "comment_id": 50583037, "body": "@EmployedRussian please, elaborate?"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1436367572, "post_id": 31293981, "comment_id": 50583525, "body": "Shared libraries are loaded once for each program execution and will very often have randomized addresses."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436367677, "post_id": 31293981, "comment_id": 50583615, "body": "@Ant I&#39;ve tried it a month ago: created a library and opened few applications which are linked to it and using it at the same time: their addresses were all the same, that means that their code segment was shared."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436368026, "post_id": 31293981, "comment_id": 50583894, "body": "@Ant Also, see <a href=\"http://stackoverflow.com/questions/4415059/how-is-a-shared-library-file-called-by-two-different-processes-in-linux\">this</a> - &quot;Code segment is shared&quot;. You are right only in case of static linking (but the question is not about static linking), when the static entities (functions, methods) of the object file are resolved each time the program executes because before execution only it&#39;s offset is known. So, each execution the OS resolves all internal references to real memory because it loads application&#39;s code segment (in case of static binding)."}, {"owner": {"reputation": 6771, "user_id": 1448363, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/7yxrS.jpg?s=128&g=1", "display_name": "Piotr Chojnacki", "link": "https://stackoverflow.com/users/1448363/piotr-chojnacki"}, "reply_to_user": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1436420872, "post_id": 31293981, "comment_id": 50606814, "body": "@EmployedRussian Could you, please, write your answer?"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1436430029, "post_id": 31293981, "comment_id": 50612018, "body": "@VictorPolevoy Shared libraries share physical memory, but they get mapped at an arbitrary virtual address on each execution. Maybe your system was predictable, but most modern unix-like systems (including linux) explicitly randomize the memory layout so that shared libraries explicitly don&#39;t end up on the same address. Source: I&#39;ve written a lot of code in an ld.so, among other things code that randomizes shlib mappings."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1436432301, "post_id": 31293981, "comment_id": 50613412, "body": "I still don&#39;t understand you fully. Maybe you may point me to some article which clearly explains that? And, @Art, can you modify my question to be correct or write your own answer?"}], "tags": [], "owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "is_accepted": true, "score": 10, "last_activity_date": 1552657391, "last_edit_date": 1552657391, "creation_date": 1436361651, "answer_id": 31293981, "question_id": 31293871, "link": "https://stackoverflow.com/questions/31293871/function-address-is-different-in-nm-output-and-gdb/31293981#31293981", "title": "Function address is different in nm output and gdb", "body": "<p><code>nm</code> gives you mangled name symbol table's address offset while <code>gdb</code> gives you actual virtual process's memory address which is changed every time you run the process.</p>\n\n<p><code>nm</code> is just a tool which shows you offset from the beginning of the code segment. In your case:</p>\n\n<blockquote>\n  <p>00021af0 T Rect_IsEmpty</p>\n</blockquote>\n\n<p>simply means, that in the whole code segment, among all other functions, the <code>Rect_IsEmpty</code> one has offset <code>00021af0</code> from the code segment, so if the base of code segment is relocated to <code>00000000</code>, then the offset will be the same as address, <code>00021af0</code>.</p>\n\n<p>Before running an executable on Linux, the ASLR mechanism is used for randomizing addresses but not all of them, just segments' starts. Hence you can't always know or rely on what address will your dynamic symbols have before running the executable, you can only have offsets from the segment start address.</p>\n\n<p>When looking up the address of the function using debugger, you see the address of a symbol inside the process' code segment after having ASLR already done its job.</p>\n\n<p><a href=\"http://www.ibm.com/developerworks/library/l-dynamic-libraries/\" rel=\"nofollow noreferrer\">Here is</a> a good article from IBM about shared libraries and <a href=\"https://www.technovelty.org/linux/plt-and-got-the-key-to-code-sharing-and-dynamic-libraries.html\" rel=\"nofollow noreferrer\">another one</a> about Procedure Linkage Table and Global Offset Table.</p>\n"}, {"tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": false, "score": 2, "last_activity_date": 1436361887, "creation_date": 1436361887, "answer_id": 31294087, "question_id": 31293871, "link": "https://stackoverflow.com/questions/31293871/function-address-is-different-in-nm-output-and-gdb/31294087#31294087", "title": "Function address is different in nm output and gdb", "body": "<p>The executable will start at different memory locations, making any allocation within it different. Any function will therefore have different memory addresses from it's prior execution.</p>\n\n<p>Regarding your question GDB gets the address from the debug information - it will show the absolute memory address.</p>\n"}], "owner": {"reputation": 6771, "user_id": 1448363, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/7yxrS.jpg?s=128&g=1", "display_name": "Piotr Chojnacki", "link": "https://stackoverflow.com/users/1448363/piotr-chojnacki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2045, "favorite_count": 0, "accepted_answer_id": 31293981, "answer_count": 2, "score": 3, "last_activity_date": 1552657391, "creation_date": 1436361405, "last_edit_date": 1436420790, "question_id": 31293871, "link": "https://stackoverflow.com/questions/31293871/function-address-is-different-in-nm-output-and-gdb", "title": "Function address is different in nm output and gdb", "body": "<p>Let's focus only on <code>Rect_IsEmpty()</code> function.</p>\n\n<p>The <code>nm</code> command gives me this output:</p>\n\n<pre><code>(...)    \n00021af0 T Rect_IsEmpty\n(...)\n</code></pre>\n\n<p>On the other hand, when I launch <code>gdb</code> and see the address of this function, I get:</p>\n\n<pre><code>(gdb) info address Rect_IsEmpty\nSymbol \"Rect_IsEmpty\" is at 0x8057c84 in a file compiled without debugging.\n</code></pre>\n\n<p>Could anyone, please, explain why these addresses are not the same? Where does gdb get this address from? </p>\n"}, {"tags": ["c", "c-preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": true, "score": 1, "last_activity_date": 1436361685, "creation_date": 1436361685, "answer_id": 31293995, "question_id": 31293768, "link": "https://stackoverflow.com/questions/31293768/c-preprocessor-how-to-concatenate-append-substitution-string/31293995#31293995", "title": "C (Preprocessor): How to concatenate/append substitution string", "body": "<p>You can have chains of defines, but it won't look much better:</p>\n\n<pre><code>#ifdef EXCEPTION_1 \n#define EXCEPTIONS1 if (! strcmp(EXCEPTION_1, mystring)) {  except = 1; }\n#else\n#define EXCEPTIONS1\n#endif\n\n#ifdef EXCEPTION_2\n#define EXCEPTIONS2 EXCEPTIONS1 if (! strcmp(EXCEPTION_2, mystring)) {  except = 1; }\n#else\n#define EXCEPTIONS2 EXCEPTIONS1 \n#endif\n\n// etc\n</code></pre>\n\n<p>Again, not much better. </p>\n\n<p>And you <em>really</em> shouldn't define macros with open <code>if</code>'s. It allows weird interactions like <code>if(cond) EXCEPTIONS1 else cout&lt;&lt;\"error\";</code> -- that won't do what you expect because <code>EXCEPTIONS1</code> is a plain <code>if</code> and will gobble up the <code>else</code> branch.</p>\n\n<p>The typical way of writing macros with code blocks is to wrap the whole thing in a <code>do{...}while(0)</code> (note no ending <code>;</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 1691, "user_id": 3936510, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fmDHX.gif?s=128&g=1", "display_name": "Roland Seuhs", "link": "https://stackoverflow.com/users/3936510/roland-seuhs"}, "edited": false, "score": 0, "creation_date": 1436486252, "post_id": 31294045, "comment_id": 50646249, "body": "I do not want to concatenate strings, I want to concatenate the input for the compiler"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1691, "user_id": 3936510, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fmDHX.gif?s=128&g=1", "display_name": "Roland Seuhs", "link": "https://stackoverflow.com/users/3936510/roland-seuhs"}, "edited": false, "score": 0, "creation_date": 1436486938, "post_id": 31294045, "comment_id": 50646447, "body": "@RolandSeuhs: &quot;How to concatenate/append substitution string&quot;. You should learn <a href=\"http://stackoverflow.com/help/asking\">how to ask</a>. Your question is far from being clear. And: strings <i>are</i> input to the compiler. Egal!"}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1436533695, "post_id": 31294045, "comment_id": 50667203, "body": "What is that, you don&#39;t even bother to read past the question title and you&#39;re mocking the OP? Perhaps you should learn how to read and behave instead. Flagging this for moderator attention."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1436533889, "post_id": 31294045, "comment_id": 50667329, "body": "@Blindy: I did read further: &quot;Is there a way to append a string to a preprocessor macro variable&quot;"}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1436361811, "creation_date": 1436361811, "answer_id": 31294045, "question_id": 31293768, "link": "https://stackoverflow.com/questions/31293768/c-preprocessor-how-to-concatenate-append-substitution-string/31294045#31294045", "title": "C (Preprocessor): How to concatenate/append substitution string", "body": "<p>You can convert a macro <em>argument</em> to a string:</p>\n\n<pre><code>#define STR(x)    #x\n\nSTR(hello)  --&gt;  \"hello\"\n</code></pre>\n\n<p>And you can concatenate <em>string literals</em> by just writing them next to each other:</p>\n\n<pre><code>\"123\" \"abc\"  --&gt;  \"123abc\"\n</code></pre>\n\n<p>Or create a macro:</p>\n\n<pre><code>#define CONCAT(a, b) a b\n\nCONCAT(\"hello\", \" world!\")  --&gt; \"hello world!\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 279, "user_id": 4130296, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-agmGVfZ8o78/AAAAAAAAAAI/AAAAAAAAAA8/cTvNjqiu0yU/photo.jpg?sz=128", "display_name": "Tamil Maran", "link": "https://stackoverflow.com/users/4130296/tamil-maran"}, "is_accepted": false, "score": -1, "last_activity_date": 1436361893, "creation_date": 1436361893, "answer_id": 31294093, "question_id": 31293768, "link": "https://stackoverflow.com/questions/31293768/c-preprocessor-how-to-concatenate-append-substitution-string/31294093#31294093", "title": "C (Preprocessor): How to concatenate/append substitution string", "body": "<p>You can use <code>##</code> to concatenate string to macros. Use an index and use the conditions only to set the index. Then at the end you can concatenate the index with your macro <code>EXCEPTION</code>. like, </p>\n\n<p>define a macro like <code>#define append(name) name ## counter</code></p>\n\n<p>this will in turn give you <code>name</code> as <code>name1</code> if <code>counter</code> is 1</p>\n\n<p>Now you can define different <code>append</code> macros to come with the result in a single variable <code>name</code></p>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "is_accepted": false, "score": 1, "last_activity_date": 1436363752, "creation_date": 1436363752, "answer_id": 31294882, "question_id": 31293768, "link": "https://stackoverflow.com/questions/31293768/c-preprocessor-how-to-concatenate-append-substitution-string/31294882#31294882", "title": "C (Preprocessor): How to concatenate/append substitution string", "body": "<p>Checkout the token stringification and concatenation section <a href=\"https://en.wikipedia.org/wiki/C%5Fpreprocessor#Indirectly%5Fquoting%5Fmacro%5Farguments\" rel=\"nofollow\">here</a> \nIt might help some. In general, it would seem easier to use your command line macro to populate a table and have a macro that simply expands to a loop that checks the successive entries of that table to set the except flag. </p>\n\n<p>For instance, save the following as silly.c and compile with cc -DEX1=\\\"hello\\\"</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct Except {\n   const char* key;\n   int flag;\n};\n\nstruct Except table[] = {\n#if defined(EX1)\n   {EX1,1},\n#endif\n   {NULL,0}\n};\n\n#define CHECKEX(mys,rv)  { rv = 0;for(int i=0;table[i].key!=0;i++)      \\\n         if (strcmp(table[i].key,(mys))==0) \\\n            rv = 1; \\\n   }\n\nint main()\n{\n   int rv;\n   CHECKEX(\"hello\",rv);\n   if (rv)\n      printf(\"Got an hello\\n\");\n   else printf(\"Got nothing\\n\");\n   return 0;\n}\n</code></pre>\n\n<p>Simply add more \"blocks\" to the table as needed. Just a suggestion of course.</p>\n"}], "owner": {"reputation": 1691, "user_id": 3936510, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fmDHX.gif?s=128&g=1", "display_name": "Roland Seuhs", "link": "https://stackoverflow.com/users/3936510/roland-seuhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 31293995, "answer_count": 4, "score": 0, "last_activity_date": 1464293417, "creation_date": 1436361128, "last_edit_date": 1464293417, "question_id": 31293768, "link": "https://stackoverflow.com/questions/31293768/c-preprocessor-how-to-concatenate-append-substitution-string", "title": "C (Preprocessor): How to concatenate/append substitution string", "body": "<p>I define my exceptions on the command line:</p>\n\n<pre><code>-DEXCEPTION_1=\\\"first\\\" -DEXCEPTION_2=\\\"second\\\" -DEXCEPTION_3=\\\"third\\\"\n</code></pre>\n\n<p>which I check against a string:</p>\n\n<pre><code>except = 0;\n#ifdef EXCEPTION_1\nif (! strcmp(EXCEPTION_1, mystring))\n{  except = 1;\n}\n#endif\n#ifdef EXCEPTION_2\nif (! strcmp(EXCEPTION_2, mystring))\n{  except = 1;\n}\n#endif\n#ifdef EXCEPTION_3\nif (! strcmp(EXCEPTION_3, mystring))\n{  except = 1;\n}\n#endif\nif (except == 1)\n{  // do something\n}\nelse\n{  // do something else\n}\n</code></pre>\n\n<p>Needless to say, while this works, it is also quite ugly, inflexible and causes redundancy in my code.</p>\n\n<p>Is there a way to append a string to a preprocessor macro variable?</p>\n\n<p>I would like to get something like this (the problem of course is that <code>#append</code> does not exist):</p>\n\n<pre><code>#ifdef EXCEPTION_1 #append EXCEPTIONS if (! strcmp(EXCEPTION_1, mystring)) {  except = 1; }\n#ifdef EXCEPTION_2 #append EXCEPTIONS if (! strcmp(EXCEPTION_2, mystring)) {  except = 1; }\n#ifdef EXCEPTION_3 #append EXCEPTIONS if (! strcmp(EXCEPTION_3, mystring)) {  except = 1; }\n</code></pre>\n\n<p>Then I could just use <code>EXCEPTIONS</code> in the code and it would work with all possible permutations of exceptions.</p>\n\n<p>In other words I want to append a string to a macro variable - is it possible?</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436361092, "post_id": 31293714, "comment_id": 50578155, "body": "are you really missing the ending <code>}</code>?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436361192, "post_id": 31293714, "comment_id": 50578245, "body": "What happens when you try it?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436361349, "post_id": 31293714, "comment_id": 50578354, "body": "Omit the semicolon after the macro, or - better - if using gcc, parenthesise the whole macro body (non-standard) to make that an expression."}, {"owner": {"reputation": 1372, "user_id": 902874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1sZc8.jpg?s=128&g=1", "display_name": "InbetweenWeekends", "link": "https://stackoverflow.com/users/902874/inbetweenweekends"}, "edited": false, "score": 0, "creation_date": 1436361573, "post_id": 31293714, "comment_id": 50578543, "body": "The problem is in your error.  You&#39;ve defined BB with 5 parameters, and only supplied 2 when you call it."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1436362046, "last_edit_date": 1592644375, "creation_date": 1436361545, "answer_id": 31293927, "question_id": 31293714, "link": "https://stackoverflow.com/questions/31293714/how-to-call-a-macro-inside-a-macro/31293927#31293927", "title": "How to call a macro inside a macro?", "body": "<p>In your code, when the following line is encountered, in preprocessing stage,</p>\n<pre><code>BB(31, AA(n,k));\n</code></pre>\n<p>as per the rule of MACRO substitution, first, <code>BB</code> will get expanded (replaced) as specified in the <em>replacement-list</em>, then, in the replacement list, if any other MACRO substitution is possible (here, <code>AA</code>), that will take place next.</p>\n<p>There the problem arises. MACRO definition of <code>BB</code> takes 5 arguments, but you're passing only 2, because, the expansion of <code>AA</code> did not take place yet.</p>\n<p>Related, from <code>C11</code>, chapter \u00a76.10.3, Macro replacement (<em>emphasis mine</em>)</p>\n<blockquote>\n<p>A preprocessing directive of the form</p>\n<pre><code>  # define identifier replacement-list new-line\n</code></pre>\n<p>defines an object-like macro that causes each subsequent instance of the macro name to be replaced by the replacement list of preprocessing tokens that constitute the remainder of the directive. <strong>The replacement list is then rescanned for more macro names as specified below.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": true, "score": 5, "last_activity_date": 1436362225, "creation_date": 1436362225, "answer_id": 31294244, "question_id": 31293714, "link": "https://stackoverflow.com/questions/31293714/how-to-call-a-macro-inside-a-macro/31294244#31294244", "title": "How to call a macro inside a macro?", "body": "<p>What you probably want is to supply additional arguments of <code>BB</code> by expansion of <code>AA(n,k)</code>. As pointed by Sourav Ghosh, in your program, <code>AA(n,k)</code> is expanded after being passed to <code>BB</code> as a single argument. To get it expanded before, you can use one more macro level and define your program as:</p>\n\n<pre><code>#define AA(a1, a2) a1, 3, 5, a2\n#define BB(x, y1, y2, y3, y4) { printf(\"%d %d %d %d %d\\n\",x, y1, y2, y3, y4 ); }\n#define BBB(a,b) BB(a,b)\n\nint main ()\n{\n  int n = 21, k= 11;\n  BBB(31, AA(n,k));\n}\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 2439679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ede1c01f6af2c08c29aadc91b263051?s=128&d=identicon&r=PG", "display_name": "imen bhiri", "link": "https://stackoverflow.com/users/2439679/imen-bhiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 0, "accepted_answer_id": 31294244, "answer_count": 2, "score": 3, "last_activity_date": 1436362225, "creation_date": 1436360990, "last_edit_date": 1436362105, "question_id": 31293714, "link": "https://stackoverflow.com/questions/31293714/how-to-call-a-macro-inside-a-macro", "title": "How to call a macro inside a macro?", "body": "<p>is it possible to call macro inside a macro in this way: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define AA(a1, a2) a1, 3, 5, a2\n#define BB(x, y1, y2, y3, y4) { printf(\"%d %d %d %d %d\\n\",x, y1, y2, y3, y4 ); }\n\nint main ()\n{\n   int n = 21, k= 11;\n   BB(31, AA(n,k));\n}\n</code></pre>\n\n<p>this code returns the followinf error in the compilation: </p>\n\n<blockquote>\n  <p>test_macro.c: In function \u2018main\u2019:<br>\n  test_macro.c:9:18: erreur: macro \u00ab BB \u00bb requiert 5 arguments, mais seulement 2 ont \u00e9t\u00e9 pass\u00e9s<br>\n  test_macro.c:9:4: erreur: \u2018BB\u2019 undeclared (first use in this function)<br>\n  test_macro.c:9:4: note: each undeclared identifier is reported only once for each function it appears in<br></p>\n</blockquote>\n"}, {"tags": ["c", "algorithm", "graph"], "comments": [{"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1436361109, "post_id": 31293498, "comment_id": 50578175, "body": "1. Arguably there&#39;s really no 100% clear line separating &quot;simpler&quot; and &quot;smaller&quot; subproblems, but in the case of FW, the subproblem solved has an additional constraint (the internal vertices of paths are forbidden to use vertices with numbers &gt; k) instead of being the same as the original problem, but on a subset of the vertices (as is often the case with other DP algorithms)."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1436361119, "post_id": 31293498, "comment_id": 50578184, "body": "2. TTBOMK all known solutions to the All Pairs Shortest Paths problem better than FW&#39;s O(n^3) use fast matrix multiplication techniques, which only decrease the exponent 3 a little bit and tend not to actually be practical at realistic problem sizes -- so I don&#39;t know what the author is talking about there."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 0, "last_activity_date": 1436361554, "creation_date": 1436361554, "answer_id": 31293933, "question_id": 31293498, "link": "https://stackoverflow.com/questions/31293498/warshall-algorithm-idea-and-improvement/31293933#31293933", "title": "Warshall algorithm idea and improvement", "body": "<p>The formulation from 1. means that the shortest path problem (which can be seen as a generalization of the transitive closure problem) has the <a href=\"https://en.wikipedia.org/wiki/Optimal_substructure\" rel=\"nofollow\">optimal substructure</a> property; however for this property does not exist a formal description (in the sense of a mathematical definition). The optimal substructure property is necessary for a problem to be amenable to dynamic programming.</p>\n"}], "owner": {"reputation": 9951, "user_id": 519882, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cf3e8e6aeb0333c68b235284d2437127?s=128&d=identicon&r=PG", "display_name": "venkysmarty", "link": "https://stackoverflow.com/users/519882/venkysmarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "closed_date": 1436368096, "answer_count": 1, "score": 3, "last_activity_date": 1436361554, "creation_date": 1436360438, "last_edit_date": 1436360505, "question_id": 31293498, "link": "https://stackoverflow.com/questions/31293498/warshall-algorithm-idea-and-improvement", "closed_reason": "Needs details or clarity", "title": "Warshall algorithm idea and improvement", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm\" rel=\"nofollow\">The Warshall-Floyd algorithm</a> is based on essentially the idea: exploit a relationship between a problem and its simpler rather than smaller version. Warshall and Floyd published their algorithms without mentioning dynamic programming. Nevertheless, the algorithms certainly have a dynamic programming flavor and have come to be considered applications of this technique.</p>\n\n<pre><code>ALGORITHM Warshall(A[1..n, 1..n])\n    //ImplementsWarshall\u2019s algorithm for computing the transitive closure\n    //Input: The adjacency matrix A of a digraph with n vertices\n    //Output: The transitive closure of the digraph\n    R(0) \u2190A\n    for k\u21901 to n do\n        for i \u21901 to n do\n            for j \u21901 to n do\n                R(k)[i, j ]\u2190R(k\u22121)[i, j ] or (R(k\u22121)[i, k] and R(k\u22121)[k, j])\n    return R(n)\n</code></pre>\n\n<p>We can speed up the above implementation of Warshall\u2019s algorithm for some inputs by restructuring its innermost loop</p>\n\n<p>My question on above text are following</p>\n\n<ol>\n<li><p>What does author mean by idea is \" exploit a relationship between a problem and its simpler rather than smaller version\" Please elobaorate.</p></li>\n<li><p>How can we improve speed as author mentioned in above implemenation.</p></li>\n</ol>\n"}, {"tags": ["c", "segmentation-fault", "stack"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 4, "creation_date": 1436359799, "post_id": 31293068, "comment_id": 50577171, "body": "Perhaps the data structures for stdio should be factored in along with the environment etc"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436359987, "post_id": 31293068, "comment_id": 50577328, "body": "@EdHeal Could you elaborate?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436360151, "post_id": 31293068, "comment_id": 50577465, "body": "It depends on the implementation, A program does use a library for stdio in your case. The may use the stack to store stuff before main is hit. That may include pointers for <code>atexit</code> etc."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436360423, "post_id": 31293068, "comment_id": 50577661, "body": "@EdHeal I understand that, but could be that stuff more that 8000 bytes?"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1436360830, "post_id": 31293068, "comment_id": 50577962, "body": "How random is randomly ? Does it still segfault if you printf the int #500000 ? What if you allocate only 500000 ints ?"}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1436360835, "post_id": 31293068, "comment_id": 50577966, "body": "@EdHeal: use some inline assembly upon the entry of <code>main</code> to print out the value of the <code>rsp</code> register. This way you can determine how much of the stack has been used so far."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436360896, "post_id": 31293068, "comment_id": 50578008, "body": "stdio does have buffers. That is a bit of memory for starters"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1436360972, "post_id": 31293068, "comment_id": 50578069, "body": ".. But no mention of platform (@BlagovestBuyukliev)"}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436361023, "post_id": 31293068, "comment_id": 50578106, "body": "@EdHeal: x86-64 is implied :-)"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436361124, "post_id": 31293068, "comment_id": 50578188, "body": "Where is that &quot;implied&quot;? And What OS? What compiler? What versions of libraries?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436361271, "post_id": 31293068, "comment_id": 50578300, "body": "I&#39;m on ubuntu linux 14.04 with 8 gigs of ram on a 64bit CPU, I added the missing header file &#39;stdio.h&#39; compiled/linked using gcc,  then ran the program numerous times.  No seg fault events.   Could it be that your computer does not have enough free memory (I.E. not being used by the OS and other applications) to properly run the program?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436361385, "post_id": 31293068, "comment_id": 50578388, "body": "@EdHeal I&#39;m on Linux Debian 8.0. Gcc version 4.9.2-10. x64 paltform."}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1436361471, "post_id": 31293068, "comment_id": 50578452, "body": "@EdHeal: it&#39;s a good hint to the OP even if we are unaware of the exact environment. We are not giving an exact answer but merely directions exactly because this stuff varies a lot on the things you mentioned."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436361481, "post_id": 31293068, "comment_id": 50578459, "body": "@user3629249 I have the same on my PC. We are talking about 2000 Kbytes. I think/guess/hope that it is not a matter of available memory."}], "answers": [{"tags": [], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1436360441, "last_edit_date": 1495541418, "creation_date": 1436360441, "answer_id": 31293500, "question_id": 31293068, "link": "https://stackoverflow.com/questions/31293068/segmentation-fault-with-ulimit-set-correctly/31293500#31293500", "title": "Segmentation fault with ulimit set correctly", "body": "<p>If you still wants to access the int location in the array, try to compile the code with out the main..this will not invoke <code>_start</code></p>\n\n<p>check this discussion <a href=\"https://stackoverflow.com/questions/29694564/what-is-the-use-of-start-in-c\">enter link description here</a></p>\n"}, {"tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 5, "last_activity_date": 1436362062, "last_edit_date": 1436362062, "creation_date": 1436361523, "answer_id": 31293911, "question_id": 31293068, "link": "https://stackoverflow.com/questions/31293068/segmentation-fault-with-ulimit-set-correctly/31293911#31293911", "title": "Segmentation fault with ulimit set correctly", "body": "<p>There's a few reasons why you can't do this. There are things that are already using parts of your stack.</p>\n\n<p><code>main</code> is not the first thing on your stack. There are functions called by the real entry point, dynamic linker, etc. that are before main and they are all probably using some of the stack.</p>\n\n<p>Additionally, there can be things that are usually put on the top of the stack to set up execution. Many systems I know put all the strings in argv and all environment variables on top of the stack (which is why main is not the entry point, there's usually code that runs before main that sets up environment variables and argv for main).</p>\n\n<p>And to top it off a part of the stack can be deliberately wasted to increase the randomness of ASLR if your system does that.</p>\n\n<p>Run you program in the debugger, add a breakpoint at main, look up the value of the stack register and examine the memory above it (remember that most likely your stack grows down unless you're on a weird architecture). I bet you'll find lots of pointers and strings there. I just did this on a linux system and as I suspected all my environment variables were there.</p>\n\n<p>The purpose of resource limits (ulimit) on Unix has never really been to micromanage things down to a byte/microsecond, they are there just to stop your program from going completely crazy and taking down the whole system with it. See them not as red lights and stop signs on a proper road, see them as run-off areas and crash barriers on a racetrack.</p>\n"}], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 1, "accepted_answer_id": 31293911, "answer_count": 2, "score": 2, "last_activity_date": 1436362062, "creation_date": 1436359381, "last_edit_date": 1495540920, "question_id": 31293068, "link": "https://stackoverflow.com/questions/31293068/segmentation-fault-with-ulimit-set-correctly", "title": "Segmentation fault with ulimit set correctly", "body": "<p>I tried to help an OP on <a href=\"https://stackoverflow.com/questions/31271742/proc-crashes-even-if-it-allocates-less-memory-than-limited-by-ulimit/31271833?noredirect=1#comment50570004_31271833\">this question</a>.</p>\n\n<p>I found out that a code like the one below causes segmentation fault randomly even if the stack is set to 2000 Kbytes.</p>\n\n<pre><code>int main ()\n{\n   int a[510000];\n   a[509999] = 1;\n   printf(\"%d\", a[509999]);\n   return 0;\n}\n</code></pre>\n\n<p>As you can see the array is <code>510000 x 4</code> bytes = <code>2040000</code> bytes.</p>\n\n<p>The stack is set to 2000 Kbytes (2048000 bytes) using ulimit command:</p>\n\n<ul>\n<li>ulimit -s 2000</li>\n<li>ulimit -Ss 2000</li>\n</ul>\n\n<p>Based on those numbers the application has room to store the array, but randomly it return segmentation fault.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ios", "objective-c", "c", "xcode"], "comments": [{"owner": {"reputation": 1123, "user_id": 4570295, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff6d8b81bfccdc879e511f9ccfff62ea?s=128&d=identicon&r=PG&f=1", "display_name": "duncanc4", "link": "https://stackoverflow.com/users/4570295/duncanc4"}, "edited": false, "score": 0, "creation_date": 1436413830, "post_id": 31293023, "comment_id": 50604597, "body": "<code>implicit declaration error is invalid in C99</code> usually means that the function you are trying to call isn&#39;t defined. Did you include the correct header file? It would be helpful if you included your objective c code."}, {"owner": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "reply_to_user": {"reputation": 1123, "user_id": 4570295, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff6d8b81bfccdc879e511f9ccfff62ea?s=128&d=identicon&r=PG&f=1", "display_name": "duncanc4", "link": "https://stackoverflow.com/users/4570295/duncanc4"}, "edited": false, "score": 0, "creation_date": 1436522281, "post_id": 31293023, "comment_id": 50659877, "body": "I don&#39;t have any Objective-C code, i just finished the C library and was hoping that it can work immediately under a Xcode generated Objective-c project, which it doesn&#39;t. I have, i guess, included properly the .so in the &quot;Build Phases&quot;-&gt;Link Binary With Libraries and added my .so there. Do i have to do something else ? I don&#39;t know. i found only very few documentation about this subject on the internet, which doesn&#39;t covert my issue or does&#39;t help me at all."}, {"owner": {"reputation": 1123, "user_id": 4570295, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff6d8b81bfccdc879e511f9ccfff62ea?s=128&d=identicon&r=PG&f=1", "display_name": "duncanc4", "link": "https://stackoverflow.com/users/4570295/duncanc4"}, "edited": false, "score": 0, "creation_date": 1436582263, "post_id": 31293023, "comment_id": 50688309, "body": "Is it possible c library needs other libraries linked in?"}, {"owner": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "reply_to_user": {"reputation": 1123, "user_id": 4570295, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff6d8b81bfccdc879e511f9ccfff62ea?s=128&d=identicon&r=PG&f=1", "display_name": "duncanc4", "link": "https://stackoverflow.com/users/4570295/duncanc4"}, "edited": false, "score": 0, "creation_date": 1436776867, "post_id": 31293023, "comment_id": 50735969, "body": "Yes as the Jansson library as well as the Curl library. Does it put sand into gears ?"}, {"owner": {"reputation": 1123, "user_id": 4570295, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff6d8b81bfccdc879e511f9ccfff62ea?s=128&d=identicon&r=PG&f=1", "display_name": "duncanc4", "link": "https://stackoverflow.com/users/4570295/duncanc4"}, "edited": false, "score": 0, "creation_date": 1436846114, "post_id": 31293023, "comment_id": 50770217, "body": "Those libraries will need to be linked in at some point. I don&#39;t know if you can do it in Xcode, or if it should be done before hand when you compile your library."}, {"owner": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "reply_to_user": {"reputation": 1123, "user_id": 4570295, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ff6d8b81bfccdc879e511f9ccfff62ea?s=128&d=identicon&r=PG&f=1", "display_name": "duncanc4", "link": "https://stackoverflow.com/users/4570295/duncanc4"}, "edited": false, "score": 0, "creation_date": 1437999292, "post_id": 31293023, "comment_id": 51250730, "body": "I found a way, i just downloaded the source code of the two libraries, and include it the hard way on the program and it worked well :)."}], "owner": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436360852, "creation_date": 1436359261, "last_edit_date": 1436360852, "question_id": 31293023, "link": "https://stackoverflow.com/questions/31293023/building-a-c-library-for-ios-usage", "title": "Building a C library for iOS usage", "body": "<p>I just achieved (in testing phase) an open source C CometD library in C. After some time I thought that it would be a good idea to give the option to the user to benefit from it under Xcode for <code>iOS</code> development.</p>\n\n<p>Two years ago I developed a little application in <code>Objective-C</code> and as far as I remember, I could put C code and compile it. </p>\n\n<p>So I took my code and compile it as a .dylib.</p>\n\n<p><strong>The Problem is</strong> when i try to use it under an <code>Objective-C</code> Xcode project, at function calling i always get a  : \n- \"implicit declaration error is invalid in C99\" error\nas well as a \n- \"Source file is not valid UTF-8\" error</p>\n\n<p>I searched the internet to find out why but no relevant answers were found.</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3260, "user_id": 786559, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e3e079a622decf7ca77827a222c8f8ce?s=128&d=identicon&r=PG", "display_name": "Ciprian Tomoiag\u0103", "link": "https://stackoverflow.com/users/786559/ciprian-tomoiag%c4%83"}, "edited": false, "score": 1, "creation_date": 1436358868, "post_id": 31292794, "comment_id": 50576454, "body": "are you trying to get a number or a string as a result ?"}, {"owner": {"reputation": 231, "user_id": 1603634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975deb0d852da1e6a1f15797f24ab4d?s=128&d=identicon&r=PG&f=1", "display_name": "David LaPorte", "link": "https://stackoverflow.com/users/1603634/david-laporte"}, "edited": false, "score": 0, "creation_date": 1436359082, "post_id": 31292794, "comment_id": 50576620, "body": "Can you post some code showing what you are trying to do? Its not clear from the question."}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1436359294, "post_id": 31292794, "comment_id": 50576761, "body": "please define / show as code what you mean by <i>numbers</i> and <i>location</i>: what type of variable? what values?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1436378049, "post_id": 31292794, "comment_id": 50590481, "body": "&quot;<i>to lay numbers next to each other in a location</i>&quot; 1+ for this wording... <i>lol</i>"}], "answers": [{"comments": [{"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1436359211, "post_id": 31292910, "comment_id": 50576709, "body": "<code>*printf</code> / <code>strto*</code> is rather overkill"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1436359305, "post_id": 31292910, "comment_id": 50576771, "body": "I suppose an answer needs to be a bit more generic rather than just two single digit numbers."}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1436359379, "post_id": 31292910, "comment_id": 50576829, "body": "Agreed. Anyway some char array manipulations are way more efficient. I think my answer below will get OP started."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1436359024, "creation_date": 1436359024, "answer_id": 31292910, "question_id": 31292794, "link": "https://stackoverflow.com/questions/31292794/how-can-i-place-5-next-to-0-5-0-50-instead-of-just-adding-50-5-in-c/31292910#31292910", "title": "How can I place 5 next to 0 (5 + 0 = 50) instead of just adding 5+0=5 in c?", "body": "<p>There's no <code>+=</code> concatenating operator in C.</p>\n\n<p>You can <a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow\"><code>snprintf()</code></a> those two numbers into a char array. And convert it back to integer using <a href=\"http://man7.org/linux/man-pages/man3/strtol.3.html\" rel=\"nofollow\"><code>strto*</code></a> function if you need it in integer representation.</p>\n"}, {"tags": [], "owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "is_accepted": false, "score": 2, "last_activity_date": 1436359406, "last_edit_date": 1436359406, "creation_date": 1436359080, "answer_id": 31292930, "question_id": 31292794, "link": "https://stackoverflow.com/questions/31292794/how-can-i-place-5-next-to-0-5-0-50-instead-of-just-adding-50-5-in-c/31292930#31292930", "title": "How can I place 5 next to 0 (5 + 0 = 50) instead of just adding 5+0=5 in c?", "body": "<p>Adding digits using integers and addition:</p>\n\n<pre><code>int i1 = 5;\nint i2 = 0;\nint result = i1 * 10 + i2; /* 50 */\n</code></pre>\n\n<p>Concatenating characters to get a string <code>\"50\"</code>:</p>\n\n<pre><code>char c1 = '5';\nchar c2 = '0';\nchar result[3];\nresult[0] = c1;\nresult[1] = c2;\nresult[2] = '\\0'; /* End of string */ \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1436367111, "post_id": 31293102, "comment_id": 50583163, "body": "Note: Usage of <code>int snprintf(char * s, size_t n, const char * format, ...);</code> is not correct.  <code>c[2] = &#39;\\0&#39;;</code> not needed."}, {"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436378321, "post_id": 31293102, "comment_id": 50590679, "body": "sorry made a mistake...Edited it...\\0 is something I put as precaution"}], "tags": [], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1436378255, "last_edit_date": 1436378255, "creation_date": 1436359459, "answer_id": 31293102, "question_id": 31292794, "link": "https://stackoverflow.com/questions/31292794/how-can-i-place-5-next-to-0-5-0-50-instead-of-just-adding-50-5-in-c/31293102#31293102", "title": "How can I place 5 next to 0 (5 + 0 = 50) instead of just adding 5+0=5 in c?", "body": "<p>If you are interested only with integers, then use this</p>\n\n<pre><code>int a = 5;\nint b = 0;\nint c = a * 10 + b\n</code></pre>\n\n<p>For the string manupulation</p>\n\n<pre><code> char a = '5';\n char b = '0';\n char c[3];\n snprintf(c, 3, \"%c%c\", a, b);\n c[2] = '\\0';\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 5092005, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10206147533318859/picture?type=large", "display_name": "Austen Stone", "link": "https://stackoverflow.com/users/5092005/austen-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1436364206, "answer_count": 3, "score": -7, "last_activity_date": 1436378255, "creation_date": 1436358754, "question_id": 31292794, "link": "https://stackoverflow.com/questions/31292794/how-can-i-place-5-next-to-0-5-0-50-instead-of-just-adding-50-5-in-c", "closed_reason": "Needs details or clarity", "title": "How can I place 5 next to 0 (5 + 0 = 50) instead of just adding 5+0=5 in c?", "body": "<p>Do I need to multiply the first number by 10 and then add the 2nd or is there a way in c to lay numbers next to each other in a location.</p>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 8, "creation_date": 1436357737, "post_id": 31292375, "comment_id": 50575569, "body": "Simple...run and check..."}, {"owner": {"reputation": 562, "user_id": 5075169, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXuhc.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5075169/ravi"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436357851, "post_id": 31292375, "comment_id": 50575668, "body": "Got 20 as output, but how?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1436357984, "post_id": 31292375, "comment_id": 50575774, "body": "Have you read the answer to the question you referred to? Think about it that way: when you add +5 to a pointer to an int, it advances 5 ints in size in memory. How many chars worth of memory is that?"}, {"owner": {"reputation": 562, "user_id": 5075169, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXuhc.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5075169/ravi"}, "edited": false, "score": 0, "creation_date": 1436358684, "post_id": 31292375, "comment_id": 50576314, "body": "Thankyou guys!! Understood now"}], "answers": [{"comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1436358255, "post_id": 31292535, "comment_id": 50575975, "body": "wow, Joachim and you answering the same question. There&#39;s an unholy aggregation of points here :)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1436358817, "post_id": 31292535, "comment_id": 50576414, "body": "Didn&#39;t know about <code>%td</code>. Neat !"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1436361782, "post_id": 31292535, "comment_id": 50578710, "body": "@SouravGhosh: It&#39;s just cool to see the both of you answer within the same minute with quite a complex answer  -- gives you the feeling there&#39;s a very solid base of competence on SO :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 9, "last_activity_date": 1436358438, "last_edit_date": 1436358438, "creation_date": 1436358132, "answer_id": 31292535, "question_id": 31292375, "link": "https://stackoverflow.com/questions/31292375/how-exactly-pointer-subtraction-works-in-case-of-integer-array/31292535#31292535", "title": "How exactly pointer subtraction works in case of integer array?", "body": "<p>To quote <code>C11</code>, chapter \u00a76.5.6, <em>Additive operators</em></p>\n\n<blockquote>\n  <p>When two pointers are subtracted, both shall point to elements of the same array object, or one past the last element of the array object; the result is the difference of the subscripts of the two array elements.</p>\n</blockquote>\n\n<p>So, when you're doing</p>\n\n<pre><code>printf(\"Number of elements between two pointer are: %d.\", \n                            (ptr2 - ptr1));\n</code></pre>\n\n<p>both <code>ptr1</code> and <code>ptr2</code> are pointers to <code>int</code>, hence they are giving the difference in subscript, 5. In other words, the difference of the address is counted in reference to the <code>sizeof(&lt;type&gt;)</code>.</p>\n\n<p>OTOH, </p>\n\n<pre><code> printf(\"Number of bytes between two pointers are: %d\",  \n                          (char*)ptr2 - (char*) ptr1);\n</code></pre>\n\n<p>both <code>ptr1</code> and <code>ptr2</code> are <em>casted</em> to a pointer to <code>char</code>, which has a size of 1 byte. The calculation takes place accordingly. Result: <code>20</code>.</p>\n\n<p><strong>FWIW</strong>, please note, the subtraction of two pointers produces the result as type of <code>ptrdiff_t</code> and you should be using <code>%td</code> format specifier to print the result.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1436358151, "creation_date": 1436358151, "answer_id": 31292544, "question_id": 31292375, "link": "https://stackoverflow.com/questions/31292375/how-exactly-pointer-subtraction-works-in-case-of-integer-array/31292544#31292544", "title": "How exactly pointer subtraction works in case of integer array?", "body": "<p>Pointer arithmetics is always in the units of the base type.</p>\n\n<p>In your case you have</p>\n\n<pre><code>int *ptr1 = ...\n</code></pre>\n\n<p>Then doing <code>ptr1 + 5</code> will add <code>sizeof(*ptr1) * 5</code> <em>bytes</em> to the pointer <code>ptr1</code>. Considering that <code>sizeof(*ptr1)</code> (which is the same as <code>sizeof(int)</code>) is <code>4</code>, then you get <code>4 * 5</code> which equals <code>20</code> bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 4603854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_FxgOgYhvtk/AAAAAAAAAAI/AAAAAAAAAcs/LdkMGa96KqY/photo.jpg?sz=128", "display_name": "vineeth suhas", "link": "https://stackoverflow.com/users/4603854/vineeth-suhas"}, "is_accepted": false, "score": 4, "last_activity_date": 1436358206, "creation_date": 1436358206, "answer_id": 31292567, "question_id": 31292375, "link": "https://stackoverflow.com/questions/31292375/how-exactly-pointer-subtraction-works-in-case-of-integer-array/31292567#31292567", "title": "How exactly pointer subtraction works in case of integer array?", "body": "<p>Each array element is an <code>int</code> and there are <code>5</code> elements between both the pointers. Thus there will be <code>5*sizeof(int)</code> amount of bytes in between both the pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1436359673, "last_edit_date": 1436359673, "creation_date": 1436358370, "answer_id": 31292640, "question_id": 31292375, "link": "https://stackoverflow.com/questions/31292375/how-exactly-pointer-subtraction-works-in-case-of-integer-array/31292640#31292640", "title": "How exactly pointer subtraction works in case of integer array?", "body": "<p>If you have two pointers of type <code>T</code> that point to elements of the same array then the difference of the pointers yields the number of elements of type <code>T</code> between these pointers</p>\n\n<p>So the first output statement</p>\n\n<pre><code>printf(\"Number of elements between two pointer are: %d.\", \n                            (ptr2 - ptr1));\n</code></pre>\n\n<p>outputs 5 - the number of elements of type <code>int</code> between pointers <code>ptr1</code> and <code>ptr2</code>.</p>\n\n<p>It is the so-called pointer arithmetic.</p>\n\n<p>Pointers <code>(char*)ptr1</code> and <code>(char*)ptr2</code> have the same values as the original pointers <code>ptr1</code> and <code>ptr2</code> but they consider (reinterpret) the memory extent as an array of type <code>char</code> each element of which has size equal to <code>sizeof( char )</code>. In C <code>sizeof( char )</code> is always equal to 1.\nThus the difference <code>( char * )ptr2 - ( char * ) ptr1</code> gives the number of elements of type <code>char</code> that can fit the memory extent. It is evident that \n<code>sizeof( char )</code> is not greater than <code>sizeof( int )</code>. So the same memory extent can accomodate more elements of type <code>char</code> than of type <code>int</code>. If for example <code>sizeof( int )</code> is equal to <code>4</code> then the memory extent can accomodate <code>5 * sizeof( int )</code> elements of type <code>char</code> that is <code>20</code>.</p>\n"}], "owner": {"reputation": 562, "user_id": 5075169, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fXuhc.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/5075169/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 3, "accepted_answer_id": 31292535, "answer_count": 4, "score": 3, "last_activity_date": 1488390917, "creation_date": 1436357693, "last_edit_date": 1495540814, "question_id": 31292375, "link": "https://stackoverflow.com/questions/31292375/how-exactly-pointer-subtraction-works-in-case-of-integer-array", "title": "How exactly pointer subtraction works in case of integer array?", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int arr[] = {10, 20, 30, 40, 50, 60};\n    int *ptr1 = arr;\n    int *ptr2 = arr + 5;\n    printf(\"Number of elements between two pointer are: %d.\", \n                                (ptr2 - ptr1));\n    printf(\"Number of bytes between two pointers are: %d\",  \n                              (char*)ptr2 - (char*) ptr1);\n    return 0;\n}\n</code></pre>\n\n<p>For the first <code>printf()</code> statement the output will be <code>5</code> according to <a href=\"https://stackoverflow.com/questions/3238482/pointer-subtraction-confusion\">Pointer subtraction confusion</a></p>\n\n<p>What about the second <code>printf()</code> statement, what will be the output?</p>\n"}, {"tags": ["c", "eclipse", "sqlite", "file"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1436357830, "post_id": 31292113, "comment_id": 50575652, "body": "Why do you execute your program as root (with sudo)?"}, {"owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "edited": false, "score": 0, "creation_date": 1436358110, "post_id": 31292113, "comment_id": 50575872, "body": "sqlite3_open returns an error code. Check what it is."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1436358290, "post_id": 31292113, "comment_id": 50575995, "body": "Can you try to run the binary under <code>strace</code> and show us the output?"}, {"owner": {"reputation": 27, "user_id": 4094315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cLGrO.png?s=128&g=1", "display_name": "JoJoWhatsUp", "link": "https://stackoverflow.com/users/4094315/jojowhatsup"}, "edited": false, "score": 0, "creation_date": 1436455270, "post_id": 31292113, "comment_id": 50630322, "body": "I got a solution for my specific problem. If i use &quot;cd /home/pi/test&quot; and after &quot;./myProgram&quot; it worked (without sudo). If i try to start by &quot;sudo /home/pi/test/myProgram&quot; it still not work. Now i want to know why. I think there are some permission/access reasons.  Perhaps one of you is smarter than me and can explain it."}, {"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 0, "creation_date": 1436464485, "post_id": 31292113, "comment_id": 50636128, "body": "Perhaps the program is running in a different directory if you use &quot;sudo&quot;. Or perhaps something prevents sqlite3 opening files when run as root. You can probably learn more from an <code>strace</code> as suggested above."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4094315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cLGrO.png?s=128&g=1", "display_name": "JoJoWhatsUp", "link": "https://stackoverflow.com/users/4094315/jojowhatsup"}, "edited": false, "score": 0, "creation_date": 1436455369, "post_id": 31292523, "comment_id": 50630386, "body": "ErrStr:&quot; unable to open database&quot; ... Well ... I got a solution that works for me. If i use &quot;cd /home/pi/test&quot; and after &quot;./myProgram&quot; it worked (without sudo). If i try to start by &quot;sudo /home/pi/test/myProgram&quot; it still not work. Now i want to know why. I think there are some permission/access reasons.  Perhaps one of you is smarter than me and can explain it."}], "tags": [], "owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "is_accepted": false, "score": 2, "last_activity_date": 1436358107, "creation_date": 1436358107, "answer_id": 31292523, "question_id": 31292113, "link": "https://stackoverflow.com/questions/31292113/raspberry-pi-2-how-to-get-file-access-for-c-program-to-write-on-disc/31292523#31292523", "title": "Raspberry PI 2 - How to get file-access for c-program to write on disc", "body": "<p>Each one of the <code>sqlite3</code> functions returns an error code. After <em>every</em> call, check that the error code is <code>SQLITE_OK</code>. If it isn't, then the function failed, and you need to handle the error.</p>\n\n<p>You can call <code>sqlite3_errstr</code> to convert the error code to a string.</p>\n\n<p>For more information about error handling in sqlite3, see <a href=\"https://www.sqlite.org/c3ref/errcode.html\" rel=\"nofollow\">https://www.sqlite.org/c3ref/errcode.html</a> .</p>\n"}], "owner": {"reputation": 27, "user_id": 4094315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cLGrO.png?s=128&g=1", "display_name": "JoJoWhatsUp", "link": "https://stackoverflow.com/users/4094315/jojowhatsup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436358107, "creation_date": 1436357072, "last_edit_date": 1436357219, "question_id": 31292113, "link": "https://stackoverflow.com/questions/31292113/raspberry-pi-2-how-to-get-file-access-for-c-program-to-write-on-disc", "title": "Raspberry PI 2 - How to get file-access for c-program to write on disc", "body": "<p>i am using Raspbian on a RPI2 and i tried to create/change a SQLite database from a C-Program. </p>\n\n<p>here a little bit code:</p>\n\n<pre><code>static sqlite3 *db;\nstatic char *zErrMsg    = 0;\n//....\nsqlite3_open(PATH_DATABASE, &amp;db);\nchar *sql_statement = \"CREATE TABLE IF NOT EXISTS myTable (datetime BIGINT, myVal BIGINT)\";\nsqlite3_exec(db,sql_statement, NULL, NULL, &amp;zErrMsg);\n\nsqlite3_close(db);\n</code></pre>\n\n<p>As IDE i use Eclipse CDT.</p>\n\n<p>In Eclipse Debug-Mode and with executing the program by double click (in \"sudo startx\" mode), raspbian creates me a database file.</p>\n\n<p>If i start my program via terminal (sudo /home/pi/test/myProgram)\nno database-file could be created.</p>\n\n<p>Folder \"test\" and executable \"myProgram\" have both chmod 755 access.\nI searched a lot, found nothing that helps me.</p>\n"}, {"tags": ["c++", "c", "windows", "gtk3", "gdk"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1436356259, "post_id": 31291761, "comment_id": 50574422, "body": "Please show your compilation statement. Most probably, you&#39;re missing to link with the required library."}], "answers": [{"tags": [], "owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "is_accepted": true, "score": 0, "last_activity_date": 1436563804, "creation_date": 1436563804, "answer_id": 31350577, "question_id": 31291761, "link": "https://stackoverflow.com/questions/31291761/gdk-gtk3-in-codeblocks-on-windows-7/31350577#31350577", "title": "gdk (gtk3) in codeblocks on windows 7", "body": "<p>If you have already called gtk_init, then you shouldn't call gdk_init (as gtk_init also calls it). Generally, you should just call the gdk functions.</p>\n\n<p>If you need gdk_init() for some reason, you will have to add </p>\n\n<pre><code>gcc ... `pkg-config --libs --cflags  gdk-3.0` ...\n</code></pre>\n\n<p>to the compilation line. Note that you probably also have to reconfigure your IDE to use gdk3 instead of gdk2.</p>\n"}], "owner": {"reputation": 293, "user_id": 562260, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6504ea3d2b8aad29b0eadfa2038a94cd?s=128&d=identicon&r=PG", "display_name": "ninjaaa", "link": "https://stackoverflow.com/users/562260/ninjaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 31350577, "answer_count": 1, "score": 0, "last_activity_date": 1437281981, "creation_date": 1436356166, "last_edit_date": 1437281981, "question_id": 31291761, "link": "https://stackoverflow.com/questions/31291761/gdk-gtk3-in-codeblocks-on-windows-7", "title": "gdk (gtk3) in codeblocks on windows 7", "body": "<p>I have configured gtk3+ (I've changed gtk2+ to gtk3+)   in codeblocks 13.2 on windows 7,\nand created new gtk+ (exmaple) project. This example projcet was compiled and works properly.</p>\n\n<p>Next I included gdk:</p>\n\n<pre><code>#include &lt;gdk/gdk.h&gt;\n</code></pre>\n\n<p>But when I added the lines:</p>\n\n<pre><code>gdk_init(&amp;argc, &amp;argv);\n\nGdkScreen *screen = gdk_screen_get_default();`\n</code></pre>\n\n<p>I got 2 errors:</p>\n\n<blockquote>\n  <p>undefined referrence to 'gdk_init' and<br>\n  undefined referrence to 'gdk_screen_get_default'</p>\n</blockquote>\n\n<p>Where is the problem? I'm looking for a concrete solution.</p>\n\n<p>compilation log:</p>\n\n<pre><code>||=== Build: Debug in gtk4test (compiler: GNU GCC Compiler) ===|\nC:\\myp\\gtk4test\\main.c||In function 'main':|\nC:\\myp\\gtk4test\\main.c|37|warning: 'gtk_vbox_new' is deprecated (declared at C:\\gtk\\include\\gtk-3.0/gtk/deprecated/gtkvbox.h:60): Use 'gtk_box_new' instead [-Wdeprecated-declarations]|\nC:\\myp\\gtk4test\\main.c|53|warning: unused variable 'screen' [-Wunused-variable]|\nobj\\Debug\\main.o||In function `main':|\nC:\\myp\\gtk4test\\main.c|52|undefined reference to `gdk_init'|\nC:\\myp\\gtk4test\\main.c|53|undefined reference to `gdk_screen_get_default'|\n||=== Build failed: 2 error(s), 2 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["objective-c", "c", "variadic-functions"], "comments": [{"owner": {"reputation": 3533, "user_id": 10278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/904fd802987f5f63162639b0ac9de136?s=128&d=identicon&r=PG", "display_name": "pestophagous", "link": "https://stackoverflow.com/users/10278/pestophagous"}, "edited": false, "score": 0, "creation_date": 1436375836, "post_id": 31291310, "comment_id": 50589131, "body": "i might be mistaken, but... it seems like what you need is a macro in standard c99 to allow &#39;varargs&#39; to a c function? maybe this is a good lead? <a href=\"http://stackoverflow.com/questions/5588855/standard-alternative-to-gccs-va-args-trick\" title=\"standard alternative to gccs va args trick\">stackoverflow.com/questions/5588855/&hellip;</a> or this? <a href=\"https://www.eskimo.com/~scs/cclass/int/sx11b.html\" rel=\"nofollow noreferrer\">eskimo.com/~scs/cclass/int/sx11b.html</a>"}, {"owner": {"reputation": 3533, "user_id": 10278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/904fd802987f5f63162639b0ac9de136?s=128&d=identicon&r=PG", "display_name": "pestophagous", "link": "https://stackoverflow.com/users/10278/pestophagous"}, "edited": false, "score": 0, "creation_date": 1436375966, "post_id": 31291310, "comment_id": 50589211, "body": "if the <code>Data</code> class has getters, and if you rely on calling the getters, then i do not see how you could accomplish that at compile time. (??)"}], "owner": {"reputation": 3831, "user_id": 1232720, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/023b771a70e79742f479f2ba19780304?s=128&d=identicon&r=PG", "display_name": "Jos&#233; D.", "link": "https://stackoverflow.com/users/1232720/jos%c3%a9-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1436359527, "creation_date": 1436354902, "last_edit_date": 1436359527, "question_id": 31291310, "link": "https://stackoverflow.com/questions/31291310/expand-parameter-list-in-c", "title": "Expand parameter list in C", "body": "<p>I am using a C library in my Objective C project. The C library offers the following function</p>\n\n<pre><code>void processData(...);\n</code></pre>\n\n<p>which can be used with 1, 2 or 3 parameters, where the first parameter is mandatory and can have different types <code>int</code>, <code>double</code>, <code>long</code>, <code>float</code> and the other two arguments are optional and have <code>int</code> and <code>long</code> values and can be in whatever order.</p>\n\n<p>Examples of use of this function are:</p>\n\n<pre><code>int myInt = 2;\ndouble myDouble = 1.23;\nint dataQuality = 1;\nlong dataTimestamp= GET_NOW();\n\nprocessData(myInt);\nprocessData(myInt, dataQuality);\nprocessData(myDouble, dataQuality, dataTimestamp);\nprocessData(myDouble, dataTimestamp);\n</code></pre>\n\n<p>I need to make an Objetive C wrapper that uses <code>DataType</code> class to call <code>processData</code>with the correct parameters. The <code>Data</code> class has getters that allows to get the data type (first argument), its value and whether the second and third arguments have value and their value.</p>\n\n<p>The problem is <strong>how to make this expansion</strong>? I think it must be done at compile time, and I think the only mechanism available in C to do so is macros. But I have never used them. The implementation should be something like this (the following is pseudocode, where the arguments list is evaluated at runtime, something that I guess should be replaced by macros in order to evaluate the arguments at compile time):</p>\n\n<pre><code>-(void) objetiveCProcessData: (Data) d {\n      argumentList = {}\n      switch (d.getDataType()) {\n         case INT_TYPE:\n              append(argumentList, d.getValueAsInt()); // &lt;-- appends a value with type `int`\n              break;\n         case DOUBLE_TYPE:\n              append(argumentList, d.getValueAsDouble()); // &lt;-- appends a value with type `double`\n              break;\n         ...\n      }\n\n      if (d.hasQuality()) {\n           append(argumentList, d.getQuality());\n      }\n\n      if (d.hasTimeStamp()) {\n           append(argumentList, d.getTimestamp());\n      }\n\n      // Call to the C function with correct number and type of arguments\n      processData(argumentList);          \n}\n</code></pre>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3236961"}, "edited": false, "score": 0, "creation_date": 1436354834, "post_id": 31291272, "comment_id": 50573479, "body": "sorry for header files :)"}, {"owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1436355215, "post_id": 31291272, "comment_id": 50573749, "body": "other than data section your program  have text section and BSS also."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3236961"}, "reply_to_user": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1436355441, "post_id": 31291272, "comment_id": 50573883, "body": "i measured text + rdata +PE header in immunity debugger it was 72KB but data shows additional 12 KB?"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1436355831, "post_id": 31291272, "comment_id": 50574137, "body": "Not sure about this particular case, however if you use <code>printf</code> you need  libraries. Your program can contain standard library either statically linked or it must contain some code to dynamically link it. This code needs some variables and takes some place too."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3236961"}, "edited": false, "score": 0, "creation_date": 1436359406, "post_id": 31291272, "comment_id": 50576854, "body": "Dayal rai - BSS is externally used by object file so it wont interfere with my programs memory."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1436463246, "post_id": 31291272, "comment_id": 50635382, "body": "This seems to be running under windows,  even so, an effort should be made to NOT #include &lt;conio.h&gt;  as it is non-portable.   Was the program run with debug enabled ( usually the compile/link parameter of &#39;-ggdb&#39;)  if so, then a large portion of the .data section is the info used by gdb."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436357167, "post_id": 31291661, "comment_id": 50575109, "body": "&quot;You compiler source file is ...&quot; What do you mean? What <i>source file</i>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436357323, "post_id": 31291661, "comment_id": 50575231, "body": "That is <b>not</b> a <i>source file</i>! <code>.text</code>, <code>.data</code>, <code>.const</code>/<code>.rodata</code>, etc. are sections in an <i>object file</i>! Something very different. And <code>PE header</code> is something different - a header structure."}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436357542, "post_id": 31291661, "comment_id": 50575397, "body": "Compiler source file means the object file (xx.o)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1436357677, "post_id": 31291661, "comment_id": 50575512, "body": "So correct it! A car is not a motor. Source is source, not object, not sink."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3236961"}, "edited": false, "score": 0, "creation_date": 1436357865, "post_id": 31291661, "comment_id": 50575675, "body": "uditr but why are those linked files running under my programs address space?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3236961"}, "edited": false, "score": 0, "creation_date": 1436358149, "post_id": 31291661, "comment_id": 50575894, "body": "Wouldn&#39;t it be compromising memory security of my program? i mean if those files can manipulate variables in my address space. then its a dam malware!"}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1436358845, "post_id": 31291661, "comment_id": 50576438, "body": "<a href=\"http://cs-fundamentals.com/c-programming/memory-layout-of-c-program-code-data-segments.php\" rel=\"nofollow noreferrer\">cs-fundamentals.com/c-programming/&hellip;</a>  C is very powerful language , you can play with memory using C !"}], "tags": [], "owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "is_accepted": false, "score": 1, "last_activity_date": 1436355891, "creation_date": 1436355891, "answer_id": 31291661, "question_id": 31291272, "link": "https://stackoverflow.com/questions/31291272/data-section-of-program-is-too-big-or-not/31291661#31291661", "title": "Data section of program is too big or not?", "body": "<p>You compiler source file is just the generated code from the actual source file and not much else. An executable have been linked with other object files and libraries, needed for all external functions and variables you need. That of course makes the executable much bigger as it contains much more code. It contains other things which are needed to run your program perfectly.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3236961"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436355891, "creation_date": 1436354783, "question_id": 31291272, "link": "https://stackoverflow.com/questions/31291272/data-section-of-program-is-too-big-or-not", "title": "Data section of program is too big or not?", "body": "<p>I am kinda new to c, so i wrote this simple program. i just have two int variables. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint main(){\n\n  int x = 3;\n  int y = 4;\n  printf(\"x = %d \\n y = %d\",x,y);\n  return 0;\n}\n</code></pre>\n\n<p>So when i analysed its image <code>EXE</code>. i found that data section was a 12 KB is it normal or there is something i cant see, i mean my program size including PE header,code and imports measures 72 KB size of my <code>SECOND.EXE</code></p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1436356539, "post_id": 31291262, "comment_id": 50574632, "body": "That depends on the OS.  If the OS provides something like <code>dtrace</code>, such tracing is almost trivial to do:  <a href=\"https://wikis.oracle.com/display/DTrace/pid+Provider\" rel=\"nofollow noreferrer\">wikis.oracle.com/display/DTrace/pid+Provider</a> and <a href=\"http://dtrace.org/blogs/brendan/2011/02/09/dtrace-pid-provider/\" rel=\"nofollow noreferrer\">dtrace.org/blogs/brendan/2011/02/09/dtrace-pid-provider</a>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1436356913, "post_id": 31291262, "comment_id": 50574918, "body": "@AndrewHenle That is pretty cool, and somewhat magical. It does say that it breaks for inlined functions though, which is one of the things I meant when I said instrumentation is the only 100% solution."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1436357511, "post_id": 31291262, "comment_id": 50575373, "body": "Agreed.  And I think the poster needs to provide more details."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1436354757, "last_edit_date": 1495539838, "creation_date": 1436354757, "answer_id": 31291262, "question_id": 31291181, "link": "https://stackoverflow.com/questions/31291181/is-there-a-way-to-dump-the-complete-stack-trace-after-normal-execution-of-the-bi/31291262#31291262", "title": "Is there a way to dump the complete stack trace after normal execution of the binary?", "body": "<p>That is called <a href=\"https://www.google.se/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=0CCgQFjAB&amp;url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCall_graph&amp;ei=4widVaDcBYKlNu7Lr5AK&amp;usg=AFQjCNHbVfQGUWqdGUurRN6Od5NxMhffbg&amp;sig2=lkRt3kj-F7efirwA8SeLsw&amp;bvm=bv.96952980,d.eXY\" rel=\"nofollow noreferrer\">the call graph</a>.</p>\n\n<p>That would require either:</p>\n\n<ul>\n<li>Instrumentation, i.e. adding code into each function to record when entering/leaving it</li>\n<li>Profiling, i.e. sampling the program's state and recording which functions are detected</li>\n<li>Emulation, i.e. running the program on a fake/virtual CPU and recording when jumps occur</li>\n</ul>\n\n<p>Of the above, only the first one would provide 100% accuracy, and of course in general its very hard to do since you often use libraries and those wouldn't be instrumented even  if you got your own code to be.</p>\n\n<p>The reason this is hard is that the stack frame \"history\" isn't normally recorded; once the program has stopped running there is no current stack frame to inspect, unlike when breaking in a debugger.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/517589/tools-to-get-a-pictorial-function-call-graph-of-code\">this question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1436356788, "last_edit_date": 1592644375, "creation_date": 1436356788, "answer_id": 31292022, "question_id": 31291181, "link": "https://stackoverflow.com/questions/31291181/is-there-a-way-to-dump-the-complete-stack-trace-after-normal-execution-of-the-bi/31292022#31292022", "title": "Is there a way to dump the complete stack trace after normal execution of the binary?", "body": "<p>If your OS provides <code>dtrace</code>, you can use the <a href=\"https://wikis.oracle.com/display/DTrace/pid+Provider\" rel=\"nofollow noreferrer\">PID provider</a>:</p>\n<blockquote>\n<p><strong>pid Provider</strong></p>\n<p>The pid provider allows for tracing of the entry and return of any function in a user process ...</p>\n</blockquote>\n"}], "owner": {"reputation": 127, "user_id": 5001832, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/950377528357243/picture?type=large", "display_name": "Chirag Gangdev", "link": "https://stackoverflow.com/users/5001832/chirag-gangdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1436356788, "creation_date": 1436354518, "question_id": 31291181, "link": "https://stackoverflow.com/questions/31291181/is-there-a-way-to-dump-the-complete-stack-trace-after-normal-execution-of-the-bi", "title": "Is there a way to dump the complete stack trace after normal execution of the binary?", "body": "<p>I want the complete stack trace, mainly the list of functions traversed in a normal execution of a binary.</p>\n\n<p>AFAIK, GDB provides the trace only when it hits a break point or in case of a crash.</p>\n"}, {"tags": ["c", "linux", "aio"], "answers": [{"comments": [{"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436356823, "post_id": 31291524, "comment_id": 50574849, "body": "How would I go about implementing a resume for a partial write? Does the <code>aio_error</code> modify the <code>aio_nbytes</code> field of the status structure?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436358341, "post_id": 31291524, "comment_id": 50576037, "body": "@Let_Me_Be <code>aio_error</code> doesn&#39;t modify anything - it simply checks and reports on the operation status (notice that is receives a <code>const</code> pointer). To resume a partial write you need to create a new I/O request and issue a new <code>aio_write(3)</code> with the remaining data, much like any regular write. If you can, have a look at Section 14.5 (page 509) of <i>Advanced Programming in the UNIX Environment</i>, it has an example in the end of a program to translate a file using ROT-13 with asynchronous I/O."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1436358414, "post_id": 31291524, "comment_id": 50576104, "body": "@Let_Me_Be Either way, consider whether this is really what you want to do. Asynchronous I/O is generally hard to get right, and most of the time, the additional complexity of the code complicates the design and makes it harder to debug."}], "tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 1, "last_activity_date": 1436356089, "last_edit_date": 1436356089, "creation_date": 1436355466, "answer_id": 31291524, "question_id": 31291136, "link": "https://stackoverflow.com/questions/31291136/errors-of-aio-write/31291524#31291524", "title": "Errors of aio_write", "body": "<blockquote>\n  <p>One thing that I don't understand from the man pages is how can the\n  aio_write fail.</p>\n</blockquote>\n\n<p><code>aio_write(3)</code> per se rarely fails, only if you give it bad data or the system is out of resources.</p>\n\n<p><code>aio_error(3)</code>, on the other hand, is what you use to check the status of queued (or perhaps already completed) operations.</p>\n\n<p>So, yes, <code>aio_error(3)</code> can return <code>EINTR</code> under the same conditions that <code>write(2)</code> would return it: if a signal was caught before writing has started, and the signal handler returned (and the signal handler was not set up with the <code>SA_RESTART</code> flag in the <code>sa_flags</code> field of <code>struct sigaction</code>, otherwise the syscall would be automatically restarted and you wouldn't see <code>EINTR</code>).</p>\n\n<p>As for partial writes, it can also happen - again, under the same conditions as it would for <code>write(2)</code> - but you can't check this from the return value of <code>aio_error(3)</code>. The usual flow is as follows:</p>\n\n<ul>\n<li>You call <code>aio_error(3)</code> to see if the operation is in progress or is completed (or was canceled). If it returns anything other than 0, then either there was an error, it's in progress, or it was canceled. So, no writes actually happened and you cannot call <code>aio_return(3)</code>. If it's in progress, either do something else and try again later, or use <code>aio_suspend(3)</code> to wait for it to complete.</li>\n<li>If <code>aio_error(3)</code> returns 0, then it means that the request completed successfully. Partial writes are interpreted as success. So then you call <code>aio_return(3)</code> to get the actual return value from the underlying <code>write(2)</code> that took place: this is when you can check for partial writes.</li>\n</ul>\n\n<p>Note that partial writes are not necessarily an error; that's why <code>aio_error(3)</code> doesn't treat them like so. For example, a pipe write channel with <code>O_NONBLOCK</code> enabled may write less bytes than requested if there isn't enough capacity to write all of them.</p>\n"}], "owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 31291524, "answer_count": 1, "score": 1, "last_activity_date": 1436356089, "creation_date": 1436354393, "question_id": 31291136, "link": "https://stackoverflow.com/questions/31291136/errors-of-aio-write", "title": "Errors of aio_write", "body": "<p>I'm rewriting a <code>write</code> to <code>aio_write</code> so I can deal with timeouts (and I don't want to bother with <code>select</code>). One thing that I don't understand from the man pages is how can the <code>aio_write</code> fail.</p>\n\n<p>For <code>write</code> I'm mostly interested in partial writes and <code>EINTR</code>. Can <code>aio_write</code> (<code>aio_error</code> to be precise) return <code>EINTR</code> or do partial write?</p>\n"}, {"tags": ["c++", "c", "macros", "eclipse-cdt"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4065187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yqi2K.jpg?s=128&g=1", "display_name": "Tubbles", "link": "https://stackoverflow.com/users/4065187/tubbles"}, "edited": false, "score": 0, "creation_date": 1436359311, "post_id": 31291377, "comment_id": 50576773, "body": "It does not seem to work the way I intended. It is showing every known macro, not regarding whether it is &quot;currently&quot; defined or not. If I write, e.g. <code>#undef</code> on the row above it, it is still shown in the list. Is it made any clearer?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "reply_to_user": {"reputation": 61, "user_id": 4065187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yqi2K.jpg?s=128&g=1", "display_name": "Tubbles", "link": "https://stackoverflow.com/users/4065187/tubbles"}, "edited": false, "score": 0, "creation_date": 1436373138, "post_id": 31291377, "comment_id": 50587486, "body": "It seems to be an error in Eclipse CDT. So I have filed a bug report <a href=\"http://bugs.eclipse.org/bugs/show_bug.cgi?id=472198\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=472198</a>"}, {"owner": {"reputation": 61, "user_id": 4065187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yqi2K.jpg?s=128&g=1", "display_name": "Tubbles", "link": "https://stackoverflow.com/users/4065187/tubbles"}, "edited": false, "score": 0, "creation_date": 1477647803, "post_id": 31291377, "comment_id": 67861910, "body": "The bug has been answered. As stated by the assignee, I think that it is working as inteded. I simply don&#39;t think that there is (currently) a good way to do this."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "is_accepted": false, "score": 1, "last_activity_date": 1436383617, "last_edit_date": 1436383617, "creation_date": 1436355086, "answer_id": 31291377, "question_id": 31290896, "link": "https://stackoverflow.com/questions/31290896/view-all-macros-defined-in-source-code-at-a-given-position-in-eclipse-cdt/31291377#31291377", "title": "View all macros defined in source code at a given position in Eclipse CDT", "body": "<p>Type in the editor window:</p>\n\n<pre><code>#ifdef \n</code></pre>\n\n<p>And then press <code>Ctrl-Space</code>. You will see the long list of all active macros</p>\n\n<p><em>Update</em></p>\n\n<p>1) This method correctly <strong>not shows</strong> macro before it is defined and <strong>shows</strong> after </p>\n\n<p>2) However it seems Eclipse CDT has an error in handling <code>#undef</code> and this method <strong>incorrectly shows</strong> macro after it is undefined. I have filed a bug report <a href=\"http://bugs.eclipse.org/bugs/show_bug.cgi?id=472198\" rel=\"nofollow\">http://bugs.eclipse.org/bugs/show_bug.cgi?id=472198</a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 4065187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yqi2K.jpg?s=128&g=1", "display_name": "Tubbles", "link": "https://stackoverflow.com/users/4065187/tubbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436383617, "creation_date": 1436353743, "last_edit_date": 1495541745, "question_id": 31290896, "link": "https://stackoverflow.com/questions/31290896/view-all-macros-defined-in-source-code-at-a-given-position-in-eclipse-cdt", "title": "View all macros defined in source code at a given position in Eclipse CDT", "body": "<p>Is there a possibility to view the live macros defined at the current position in the code, in Eclipse CDT?</p>\n\n<p>I think that there could be a way to do this, since eclipse is smart enough to follow my header files included within the window <code>Window &gt; Show view &gt; Include Browser</code>. It can also, as of today, figure out what macros are defined and gray out areas of i.e. <code>#ifdef</code> which are currently not going to be compiled. </p>\n\n<p>The only thing that I feel it could be missing is if I use defines in en external makefile, however they can be simulated and added to the live index via the project settings.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13409010/eclpise-cdt-view-all-macros-defined-in-source-code-in-a-given-directory\" title=\"This\">This</a> is, e.g. not what I am looking for, since it would list all macros in the file/project/workspace. I want to know depending on, lets say, where I currently have my cursor in the file.</p>\n"}, {"tags": ["c", "security", "printf", "format-specifiers", "puts"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 34, "creation_date": 1436359008, "post_id": 31290850, "comment_id": 50576556, "body": "Note: <code>printf(&quot;Hello World!&quot;)</code> is <b>not</b> the same as <code>puts(&quot;Hello World!&quot;)</code>.  <code>puts()</code> appends a <code>&#39;\\n&#39;</code>.  Instead compare <code>printf(&quot;abc&quot;)</code> to <code>fputs(&quot;abc&quot;, stdout)</code>"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1436389001, "post_id": 31290850, "comment_id": 50597031, "body": "You are aware that <code>puts</code> adds a newline? <a href=\"http://man7.org/linux/man-pages/man3/puts.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/puts.3.html</a>"}, {"owner": {"reputation": 4993, "user_id": 885605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16c5ec313530f501f11c809ee6c8473?s=128&d=identicon&r=PG", "display_name": "Andreas Grapentin", "link": "https://stackoverflow.com/users/885605/andreas-grapentin"}, "edited": false, "score": 0, "creation_date": 1436460799, "post_id": 31290850, "comment_id": 50633907, "body": "by the way, <code>printf</code> is also about 50% slower than <code>fputs</code>."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 5, "creation_date": 1436467980, "post_id": 31290850, "comment_id": 50638150, "body": "What&#39;s that book? I don&#39;t think <code>printf</code> is deprecated in the same way that for example <code>gets</code> is deprecated in C99, so you may consider editing your question to be more precise."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 14, "creation_date": 1436483690, "post_id": 31290850, "comment_id": 50645510, "body": "It sounds like the book you&#39;re reading is not very good - a good book should not just say something like this is &quot;deprecated&quot; (that&#39;s factually false unless the author is using the word to describe their own opinion) and should explain what usage is actually invalid and dangerous rather than showing safe/valid code as an example of something you &quot;shouldn&#39;t do&quot;."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 8, "creation_date": 1436607277, "post_id": 31290850, "comment_id": 50693142, "body": "Can you identify the book?"}, {"owner": {"reputation": 1223, "user_id": 4424636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rUfLl.png?s=128&g=1", "display_name": "Greenonline", "link": "https://stackoverflow.com/users/4424636/greenonline"}, "edited": false, "score": 7, "creation_date": 1436615866, "post_id": 31290850, "comment_id": 50695362, "body": "Please specify the title of the book, author and page reference. Thx."}], "answers": [{"comments": [{"owner": {"reputation": 6731, "user_id": 725163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Kgxeq.jpg?s=128&g=1", "display_name": "e.dan", "link": "https://stackoverflow.com/users/725163/e-dan"}, "edited": false, "score": 21, "creation_date": 1436354373, "post_id": 31290989, "comment_id": 50573161, "body": "Further to causing the program to crash, there are many other exploits possible with format strings.  See here for more info: <a href=\"https://en.wikipedia.org/wiki/Uncontrolled_format_string\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Uncontrolled_format_string</a>"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 9, "creation_date": 1436355865, "post_id": 31290989, "comment_id": 50574167, "body": "Another reason is that <code>puts</code> will be presumably faster."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 4, "creation_date": 1436357441, "post_id": 31290989, "comment_id": 50575321, "body": "<code>puts( &quot;%s&quot; );</code> would actually display <code>%s\\n</code> as <code>puts()</code> appends a newline."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 38, "creation_date": 1436365263, "post_id": 31290989, "comment_id": 50581572, "body": "@black: <code>puts</code> is &quot;presumably&quot; faster, and this is probably another reason people recommend it, but it is not <i>actually</i> faster.  I just printed <code>&quot;Hello, world!&quot;</code> 1,000,000 times, both ways.  With <code>printf</code> it took 0.92 seconds.  With <code>puts</code> it took 0.93 seconds.  There are things to worry about when it comes to efficiency, but <code>printf</code> vs. <code>puts</code> is not one of them."}, {"owner": {"reputation": 5554, "user_id": 607405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/900bdcc0b18f99a6218a3bc9fc1d28d1?s=128&d=identicon&r=PG", "display_name": "Konstantin Weitz", "link": "https://stackoverflow.com/users/607405/konstantin-weitz"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1436371715, "post_id": 31290989, "comment_id": 50586602, "body": "@SteveSummit, that&#39;s because gcc compiles <code>printf</code> to <code>puts</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 5554, "user_id": 607405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/900bdcc0b18f99a6218a3bc9fc1d28d1?s=128&d=identicon&r=PG", "display_name": "Konstantin Weitz", "link": "https://stackoverflow.com/users/607405/konstantin-weitz"}, "edited": false, "score": 10, "creation_date": 1436372135, "post_id": 31290989, "comment_id": 50586854, "body": "@KonstantinWeitz: But (a) I was not using gcc, and (b) it doesn&#39;t matter <i>why</i> the claim &quot;<code>puts</code> is faster&quot; is false, it&#39;s still false."}, {"owner": {"reputation": 5554, "user_id": 607405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/900bdcc0b18f99a6218a3bc9fc1d28d1?s=128&d=identicon&r=PG", "display_name": "Konstantin Weitz", "link": "https://stackoverflow.com/users/607405/konstantin-weitz"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 4, "creation_date": 1436373931, "post_id": 31290989, "comment_id": 50587994, "body": "@SteveSummit, your experiment does not provide evidence that &quot;puts is the same speed as printf&quot;, it provides evidence that a program that calls &quot;printf with a literal format string and no format arguments compiled to assembly runs as fast as an equivalent program using puts, for some unspecified compiler&quot;. I just wanted to clarify that."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 5554, "user_id": 607405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/900bdcc0b18f99a6218a3bc9fc1d28d1?s=128&d=identicon&r=PG", "display_name": "Konstantin Weitz", "link": "https://stackoverflow.com/users/607405/konstantin-weitz"}, "edited": false, "score": 6, "creation_date": 1436374392, "post_id": 31290989, "comment_id": 50588285, "body": "@KonstantinWeitz: The claim I provided evidence for was (the opposite of) the claim user black was making. I am just trying to clarify that programmers should not be worried about calling <code>puts</code> for this reason. (But if you wanted to argue about it: I would be surprised if you could find any modern compiler for any modern machne where <code>puts</code> is significantly faster than <code>printf</code> under any circumstances.)"}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1436417340, "post_id": 31290989, "comment_id": 50605556, "body": "@SteveSummit Just for the heck of it, I&#39;ve tested the performance of <code>printf()</code> vs <code>fputs()</code>. It turns out that <code>fputs()</code> really is slightly faster. You can refer to my answer for details. But then it shouldn&#39;t really be the bottleneck anyway."}, {"owner": {"reputation": 1804, "user_id": 1219247, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62dc2334c60047d25a42b57b67f9f178?s=128&d=identicon&r=PG", "display_name": "CaptainCodeman", "link": "https://stackoverflow.com/users/1219247/captaincodeman"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 5, "creation_date": 1436439320, "post_id": 31290989, "comment_id": 50618311, "body": "@SteveSummit Your test was very likely flawed due to the bottleneck of your output being the screen buffer or file buffer.  Pipe the output to /dev/null and see the performance difference."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1436454937, "post_id": 31290989, "comment_id": 50630089, "body": "No, I did not print it 1,000,000 times to the screen.  I piped it into <code>tail</code>, which may or may not perturb the result in the same way as redirecting to <code>&#47;dev&#47;null</code>. But in any case: I would not agree that such a test is &quot;flawed&quot;.  If anything, the test with output redirected to <code>&#47;dev&#47;null</code> is flawed, because it is unrealistic.  The interesting claim is not &quot;<code>printf</code> is about the same speed as <code>puts</code>&quot;, but rather, &quot;<code>printf</code> is about the same speed as <code>puts</code> <i>in practice</i>&quot;. (And again, all we&#39;re arguing about is whether &quot;use <code>puts</code> instead of <code>printf</code> because it&#39;s faster&quot; is good advice.)"}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1436511514, "post_id": 31290989, "comment_id": 50653376, "body": "I can imagine the difference being optimised away when a constant string does not contain <code>%</code>. And I can imagine that outputting a string can be slightly faster than outputting a string, followed by a newline."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1436528340, "post_id": 31290989, "comment_id": 50663609, "body": "@SteveSummit &quot;Hello World&quot; is not a good test. First, at parity of strings, they don&#39;t do the same thing (<code>puts</code> appends a <code>\\n</code>, which may incur in further overhead). Second, <code>printf</code> gets slower with longer format strings as it <i>has</i> to go through it searching for <code>%</code>, unlike <code>puts.</code> Finally, did you check the assembly whether <code>printf</code> got optimized to <code>puts</code> (likely if you did <code>printf(&quot;Hello World\\n&quot;)</code>)?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1436543590, "post_id": 31290989, "comment_id": 50674084, "body": "@black: This is a pointless argument. I should not have implied that <code>printf</code> is always just as fast, but you should not have implied that <code>puts</code> is always faster. (By the way, the argument that <code>printf</code> has to scan the whole string looking for <code>%</code> characters is not convincing, because <code>puts</code> has to scan the whole string -- looking for the terminating `\\0&#39; -- also.)"}, {"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 5, "creation_date": 1436900946, "post_id": 31290989, "comment_id": 50803381, "body": "<code>gcc</code> automatically converts <code>printf</code> to <code>puts</code> when there is only a single argument, the format string doesn&#39;t contain any %-field, and it&#39;s terminated with <code>&#39;\\n&#39;</code>. No need to activate optimizations for that. Just look at the assembly code produced by <code>gcc -S</code>."}, {"owner": {"reputation": 2961, "user_id": 2577374, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4abd87cdf62d000f5b72c2503ce9c8cc?s=128&d=identicon&r=PG", "display_name": "SO Stinks", "link": "https://stackoverflow.com/users/2577374/so-stinks"}, "edited": false, "score": 0, "creation_date": 1590230678, "post_id": 31290989, "comment_id": 109605764, "body": "Steve Summit&#39;s highly upvoted comment is very misleading and the people who gave the correct explanation are barely upvoted compared to the people who doubled down on a bogus argument.  <code>fputs</code> is faster than <code>printf</code>. Yes, a good compiler effectively optimizes apropos <code>printf</code> calls to the same assembly as <code>fputs</code> calls so that in practice it doesn&#39;t really matter. The comment clearly doesn&#39;t make the proper distinction between the language implementation and the compiler in a way that suggests the author was unaware of the difference and is unqualified to be answering these questions."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 124, "last_activity_date": 1590229961, "last_edit_date": 1590229961, "creation_date": 1436353985, "answer_id": 31290989, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31290989#31290989", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p><code>printf(\"Hello World!\");</code> is IMHO not vulnerable but consider this:</p>\n\n<pre><code>const char *str;\n...\nprintf(str);\n</code></pre>\n\n<p>If <code>str</code> happens to point to a string containing <code>%s</code> format specifiers, your program will exhibit undefined behaviour (mostly a crash), whereas <code>puts(str)</code> will just display the string as is.</p>\n\n<p>Example:</p>\n\n<pre><code>printf(\"%s\");   //undefined behaviour (mostly crash)\nputs(\"%s\");     // displays \"%s\\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1891, "user_id": 1640715, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/hnO1y.jpg?s=128&g=1", "display_name": "Hagen von Eitzen", "link": "https://stackoverflow.com/users/1640715/hagen-von-eitzen"}, "edited": false, "score": 10, "creation_date": 1436418651, "post_id": 31291291, "comment_id": 50605959, "body": "Of course  <code>printf(p,x)</code> would be just as problematic if the user has control over <code>p</code>. So the problem is <i>not</i> the use of <code>printf</code> with just one argument but rather with a user-controlled format string."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1891, "user_id": 1640715, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/hnO1y.jpg?s=128&g=1", "display_name": "Hagen von Eitzen", "link": "https://stackoverflow.com/users/1640715/hagen-von-eitzen"}, "edited": false, "score": 2, "creation_date": 1436968441, "post_id": 31291291, "comment_id": 50835155, "body": "@HagenvonEitzen That&#39;s technically true, but few would deliberately use a user-provided format string. When people write <code>printf(p)</code>, it&#39;s because they don&#39;t realize that it&#39;s a format string, they just think they&#39;re printing a literal."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 75, "last_activity_date": 1436354830, "creation_date": 1436354830, "answer_id": 31291291, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31291291#31291291", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p><code>printf(\"Hello world\");</code></p>\n\n<p>is fine and has no security vulnerability.</p>\n\n<p>The  problem lies with:</p>\n\n<pre><code>printf(p);\n</code></pre>\n\n<p>where <code>p</code> is a pointer to an input that is controlled by the user. It is prone to   <a href=\"https://www.owasp.org/index.php/Format_string_attack\" rel=\"noreferrer\">format strings attacks</a>: user can insert conversion specifications to take control of the program, e.g., <code>%x</code> to dump memory or <code>%n</code> to overwrite memory.</p>\n\n<p>Note that <code>puts(\"Hello world\")</code> is not equivalent in behavior to <code>printf(\"Hello world\")</code> but to <code>printf(\"Hello world\\n\")</code>. Compilers usually are smart enough to optimize the latter call to replace it with <code>puts</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 12, "creation_date": 1436356617, "post_id": 31291309, "comment_id": 50574692, "body": "This behaviour actually depends entirely on the compiler."}, {"owner": {"reputation": 35932, "user_id": 76722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4baed26d9b00bbc7c0c706515aeb596e?s=128&d=identicon&r=PG", "display_name": "Sebastian Mach", "link": "https://stackoverflow.com/users/76722/sebastian-mach"}, "edited": false, "score": 6, "creation_date": 1436363678, "post_id": 31291309, "comment_id": 50580260, "body": "This is misleading. You state <code>A compiles to B</code>, but in reality you mean <code>A and B compile to C</code>."}], "tags": [], "owner": {"reputation": 519, "user_id": 2394143, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de23c8db757e51afbdc4864a597e2b69?s=128&d=identicon&r=PG", "display_name": "&#193;brah&#225;m Endre", "link": "https://stackoverflow.com/users/2394143/%c3%81brah%c3%a1m-endre"}, "is_accepted": false, "score": 7, "last_activity_date": 1552357218, "last_edit_date": 1552357218, "creation_date": 1436354892, "answer_id": 31291309, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31291309#31291309", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<pre><code>printf(\"Hello World\\n\")\n</code></pre>\n\n<p>automatically compiles to the equivalent</p>\n\n<pre><code>puts(\"Hello World\")\n</code></pre>\n\n<p>you can check it with diassembling your executable:</p>\n\n<pre><code>push rbp\nmov rbp,rsp\nmov edi,str.Helloworld!\ncall dword imp.puts\nmov eax,0x0\npop rbp\nret\n</code></pre>\n\n<p>using</p>\n\n<pre><code>char *variable;\n... \nprintf(variable)\n</code></pre>\n\n<p>will lead to security issues, <strong>don't ever use printf that way!</strong></p>\n\n<p>so your book is actually correct, using printf with one variable is deprecated but you can still use printf(\"my string\\n\") because it will automatically become puts </p>\n"}, {"comments": [{"owner": {"reputation": 35932, "user_id": 76722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4baed26d9b00bbc7c0c706515aeb596e?s=128&d=identicon&r=PG", "display_name": "Sebastian Mach", "link": "https://stackoverflow.com/users/76722/sebastian-mach"}, "edited": false, "score": 0, "creation_date": 1436363864, "post_id": 31292566, "comment_id": 50580411, "body": "<code>because printf&#39;s first argument is always a constant string</code> I am not exactly sure about what you mean with that."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1436364429, "post_id": 31292566, "comment_id": 50580874, "body": "As I said, <code>&quot;He has %d cherries\\n&quot;</code> is a constant string, meaning that it is a compile-time constant.  But, to be fair, the author&#39;s advice was not &quot;don&#39;t pass constant strings as <code>printf</code>&#39;s first argument&quot;, it was &quot;don&#39;t pass strings without <code>%</code> as <code>printf</code>&#39;s first argument.&quot;"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1436449404, "post_id": 31292566, "comment_id": 50625689, "body": "<code>literally from the C programming book of Genesis. Anyone deprecating that usage is being quite offensively heretical</code> - you haven&#39;t actually read K&amp;R in recent years. There&#39;s a ton of advice and coding styles in there that&#39;s not just deprecated but just plain bad practice these days."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1436455370, "post_id": 31292566, "comment_id": 50630387, "body": "@Voo: Well, let&#39;s just say that not everything that&#39;s considered bad practice is <i>actually</i> bad practice.  (The advice to &quot;never use plain <code>int</code>&quot; springs to mind.)"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1436461762, "post_id": 31292566, "comment_id": 50634495, "body": "@Steve I&#39;ve no idea where you heard that one, but that&#39;s certainly not the kind of bad (bad?) practice we&#39;re talking about there. Don&#39;t misunderstand me, for the time the code was perfectly fine, but you really don&#39;t want to look at k&amp;r for much but as a historical note these days. &quot;It&#39;s in k&amp;r&quot; just isn&#39;t an indicator of good quality these days, that&#39;s all"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1436505355, "post_id": 31292566, "comment_id": 50650867, "body": "@Voo: large numbers of C programmers -- sometimes I fear as much as 50% -- utterly believe that you must always use <code>int32_t</code> and <code>uint16_t</code> and the like, that you must never use plain <code>int</code> &quot;because you don&#39;t know how big it is&quot;.  If you haven&#39;t encountered this mindset you&#39;re lucky. &#182; As for K&amp;R, although you&#39;re right that I haven&#39;t read it in years, I definitely still feel that it contains far more good advice than bad.  But perhaps I&#39;m just old-fashioned, as I had the privilege to meet and communicate with Dennis from time to time, and contribute something to the C literature myself."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 12, "last_activity_date": 1454024352, "last_edit_date": 1454024352, "creation_date": 1436358204, "answer_id": 31292566, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31292566#31292566", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>This is misguided advice.  Yes, if you have a run-time string to print,</p>\n\n<pre><code>printf(str);\n</code></pre>\n\n<p>is quite dangerous, and you should always use</p>\n\n<pre><code>printf(\"%s\", str);\n</code></pre>\n\n<p>instead, because in general you can never know whether <code>str</code> might contain a <code>%</code> sign.  However, if you have a compile-time <em>constant</em> string, there's nothing whatsoever wrong with</p>\n\n<pre><code>printf(\"Hello, world!\\n\");\n</code></pre>\n\n<p>(Among other things, that is the most classic C program ever, literally from the C programming book of Genesis.  So anyone deprecating that usage is being rather heretical, and I for one would be somewhat offended!)</p>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1436363720, "post_id": 31293816, "comment_id": 50580294, "body": "This is not worth an argument, and I understand what you&#39;re saying about the verbatim vs. format string mindset, but, well, not everybody thinks that way, which is one reason one-size-fits-all rules can rankle.  Saying &quot;never print constant strings with <code>printf</code>&quot; is just about exactly like saying &quot;always write <code>if(NULL == p)</code>.  These rules may be useful for some programmers, but not all.  And in both cases (mismatched <code>printf</code> formats and Yoda conditionals), modern compilers warn about mistakes anyway, so the artificial rules are even less important."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1436448667, "post_id": 31293816, "comment_id": 50625058, "body": "@Steve If there are exactly zero upsides to using something, but quite a few downsides, then yes there&#39;s really no reason to use it. Yoda conditions on the other hand <i>do</i> have the downside that they make the code harder to read (you&#39;d intuitively say &quot;if p is zero&quot; not &quot;if zero is p&quot;)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 2, "creation_date": 1436452882, "post_id": 31293816, "comment_id": 50628560, "body": "@Voo <code>printf(&quot;%s&quot;, &quot;hello&quot;)</code> is going to be slower than <code>printf(&quot;hello&quot;)</code>, so there is a downside.  A small one, because IO is almost always way slower than such simple formatting, but a downside."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1506051857, "post_id": 31293816, "comment_id": 79672780, "body": "@Yakk I doubt that would be slower"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1581711272, "post_id": 31293816, "comment_id": 106540837, "body": "<code>gcc -Wall -W -Werror</code> will prevent bad consequences from such mistakes."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 34, "last_activity_date": 1436361266, "creation_date": 1436361266, "answer_id": 31293816, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31293816#31293816", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>Further to the other answers, <code>printf(\"Hello world! I am 50% happy today\")</code> is an easy bug to make, potentially causing all manner of nasty memory problems (it's UB!).</p>\n\n<p>It's just simpler, easier and more robust to \"require\" programmers to be absolutely clear <strong>when they want a verbatim string and nothing else</strong>.</p>\n\n<p>And that's what <code>printf(\"%s\", \"Hello world! I am 50% happy today\")</code> gets you. It's entirely foolproof.</p>\n\n<p>(Steve, of course <code>printf(\"He has %d cherries\\n\", ncherries)</code> is absolutely not the same thing; in this case, the programmer is not in \"verbatim string\" mindset; she is in \"format string\" mindset.)</p>\n"}, {"tags": [], "owner": {"reputation": 1007, "user_id": 3803389, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/1534997066/picture?type=large", "display_name": "P1kachu", "link": "https://stackoverflow.com/users/3803389/p1kachu"}, "is_accepted": false, "score": 17, "last_activity_date": 1436777995, "last_edit_date": 1436777995, "creation_date": 1436362990, "answer_id": 31294565, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31294565#31294565", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>I'll just add a bit of information <strong>regarding the vulnerability</strong> part here.</p>\n\n<p>It's said to be vulnerable because of printf string format vulnerability. In your example, where the string is hardcoded, it's harmless (even if hardcoding strings like this is never fully recommended). But specifying the parameter's types is a good habit to take. Take this example: </p>\n\n<p>If someone puts format string character in your printf instead of a regular string (say, if you want to print the program stdin), printf will take whatever he can on the stack.</p>\n\n<p>It was (and still is) very used to exploit programs into exploring stacks to access hidden information or bypass authentication for example.</p>\n\n<p>Example (C):</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    printf(argv[argc - 1]); // takes the first argument if it exists\n}\n</code></pre>\n\n<p>if I put as input of this program <code>\"%08x %08x %08x %08x %08x\\n\"</code></p>\n\n<pre><code>printf (\"%08x %08x %08x %08x %08x\\n\"); \n</code></pre>\n\n<p>This instructs the printf-function to retrieve five parameters from the stack and display them as 8-digit padded hexadecimal numbers. So a possible output may look like:</p>\n\n<pre><code>40012980 080628c4 bffff7a4 00000005 08059c04\n</code></pre>\n\n<p>See <a href=\"http://www.cis.syr.edu/~wedu/Teaching/cis643/LectureNotes_New/Format_String.pdf\" rel=\"noreferrer\">this</a> for a more complete explanation and other examples.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 9, "last_activity_date": 1436371556, "creation_date": 1436371556, "answer_id": 31297982, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31297982#31297982", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>A rather nasty aspect of <code>printf</code> is that even on platforms where the stray memory reads could only cause limited (and acceptable) harm, one of the formatting characters, <code>%n</code>, causes the next argument to be interpreted as a pointer to a writable integer, and causes the number of characters output thus far to be stored to the variable identified thereby.  I've never used that feature myself, and sometimes I use lightweight printf-style methods which I've written to include only the features I actually use (and don't include that one or anything similar) but feeding standard printf functions strings received from untrustworthy sources may expose security vulnerabilities beyond the ability to read arbitrary storage.</p>\n"}, {"tags": [], "owner": {"reputation": 5554, "user_id": 607405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/900bdcc0b18f99a6218a3bc9fc1d28d1?s=128&d=identicon&r=PG", "display_name": "Konstantin Weitz", "link": "https://stackoverflow.com/users/607405/konstantin-weitz"}, "is_accepted": false, "score": 13, "last_activity_date": 1484980027, "last_edit_date": 1484980027, "creation_date": 1436373681, "answer_id": 31298723, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31298723#31298723", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>Calling <code>printf</code> with literal format strings is safe and efficient, and there\nexist tools to automatically warn you if your invocation of <code>printf</code> with user \nprovided format strings is unsafe.</p>\n\n<p>The most severe attacks on <code>printf</code> take advantage of the <code>%n</code> format \nspecifier. In contrast to all other format specifiers, e.g. <code>%d</code>, <code>%n</code> actually\nwrites a value to a memory address provided in one of the format arguments.\nThis means that an attacker can overwrite memory and thus potentially take\ncontrol of your program. <a href=\"https://en.wikipedia.org/wiki/Uncontrolled_format_string\" rel=\"nofollow noreferrer\">Wikipedia</a>\nprovides more detail.</p>\n\n<p>If you call <code>printf</code> with a literal format string, an attacker cannot sneak\na <code>%n</code> into your format string, and you are thus safe. In fact,\ngcc will change your call to <code>printf</code> into a call to <code>puts</code>, so there litteraly\nisn't any difference (test this by running <code>gcc -O3 -S</code>).</p>\n\n<p>If you call <code>printf</code> with a user provided format string, an attacker can\npotentially sneak a <code>%n</code> into your format string, and take control of your\nprogram. Your compiler will usually warn you that his is unsafe, see \n<code>-Wformat-security</code>. There are also more advanced tools that ensure that\nan invocation of <code>printf</code> is safe even with user provided format strings, and \nthey might even check that you pass the right number and type of arguments to \n<code>printf</code>. For example, for Java there is <a href=\"http://errorprone.info/\" rel=\"nofollow noreferrer\">Google's Error Prone</a> \nand the <a href=\"https://checkerframework.org/\" rel=\"nofollow noreferrer\">Checker Framework</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "edited": false, "score": 2, "creation_date": 1436427378, "post_id": 31308167, "comment_id": 50610334, "body": "It won&#39;t invalidate your test, as <code>fputs()</code> is often used with string constants and that optimisation opportunity is part of the point you wanted to make.This said, adding a test run with a dynamicly generated string with <code>fputs()</code> and <code>fprintf()</code> would be a nice supplemental data point."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "edited": false, "score": 0, "creation_date": 1436430281, "post_id": 31308167, "comment_id": 50612188, "body": "@PatrickSchl&#252;ter Testing with dynamically generated strings seems to defeat the purpose of this question though... OP seems to be interested in only string literals to be printed."}, {"owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "edited": false, "score": 1, "creation_date": 1436435616, "post_id": 31308167, "comment_id": 50615842, "body": "He doesn&#39;t state it explicitly even if his example uses string literals. In fact, I think his confusion about the advice of the book is a result of the use of string literals in the example. With string literals, the books advice is somehow dubious, with dynamic strings it is good advice."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1436453061, "post_id": 31308167, "comment_id": 50628705, "body": "<code>&#47;dev&#47;null</code> sort of makes this a toy, in that usually when generating formatted output, your goal is for the output to go somewhere, not be discarded.  Once you add in &quot;actually not discarding the data&quot; time, how do they compare?"}], "tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": false, "score": 8, "last_activity_date": 1436418755, "last_edit_date": 1436418755, "creation_date": 1436416245, "answer_id": 31308167, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31308167#31308167", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>Since no one has mentioned, I'd add a note regarding their performance.</p>\n\n<p>Under normal circumstances, assuming no compiler optimisations are used (i.e. <code>printf()</code> actually calls <code>printf()</code> and not <code>fputs()</code>), I would expect <code>printf()</code> to perform less efficiently, especially for long strings. This is because <code>printf()</code> has to parse the string to check if there are any conversion specifiers.</p>\n\n<p>To confirm this, I have run some tests. The testing is performed on Ubuntu 14.04, with gcc 4.8.4. My machine uses an Intel i5 cpu. The program being tested is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    int count = 10000000;\n    while(count--) {\n        // either\n        printf(\"qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\");\n        // or\n        fputs(\"qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\", stdout);\n    }\n    fflush(stdout);\n    return 0;\n}\n</code></pre>\n\n<p>Both are compiled with <code>gcc -Wall -O0</code>. Time is measured using <code>time ./a.out &gt; /dev/null</code>. The following is the result of a typical run (I've run them five times, all results are within 0.002 seconds).</p>\n\n<p>For the <code>printf()</code> variant:</p>\n\n<pre><code>real    0m0.416s\nuser    0m0.384s\nsys     0m0.033s\n</code></pre>\n\n<p>For the <code>fputs()</code> variant:</p>\n\n<pre><code>real    0m0.297s\nuser    0m0.265s\nsys     0m0.032s\n</code></pre>\n\n<p>This effect is amplified if you have a <em>very</em> long string.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define STR \"qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\"\n#define STR2 STR STR\n#define STR4 STR2 STR2\n#define STR8 STR4 STR4\n#define STR16 STR8 STR8\n#define STR32 STR16 STR16\n#define STR64 STR32 STR32\n#define STR128 STR64 STR64\n#define STR256 STR128 STR128\n#define STR512 STR256 STR256\n#define STR1024 STR512 STR512\nint main() {\n    int count = 10000000;\n    while(count--) {\n        // either\n        printf(STR1024);\n        // or\n        fputs(STR1024, stdout);\n    }\n    fflush(stdout);\n    return 0;\n}\n</code></pre>\n\n<p>For the <code>printf()</code> variant (ran three times, real plus/minus 1.5s):</p>\n\n<pre><code>real    0m39.259s\nuser    0m34.445s\nsys     0m4.839s\n</code></pre>\n\n<p>For the <code>fputs()</code> variant (ran three times, real plus/minus 0.2s):</p>\n\n<pre><code>real    0m12.726s\nuser    0m8.152s\nsys     0m4.581s\n</code></pre>\n\n<p><strong>Note:</strong> After inspecting the assembly generated by gcc, I realised that gcc optimises the <code>fputs()</code> call to an <code>fwrite()</code> call, even with <code>-O0</code>. (The <code>printf()</code> call remains unchanged.) I am not sure whether this will invalidate my test, as the compiler calculates the string length for <code>fwrite()</code> at compile-time.</p>\n"}, {"tags": [], "owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "is_accepted": false, "score": 7, "last_activity_date": 1436619769, "last_edit_date": 1436619769, "creation_date": 1436429157, "answer_id": 31311589, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/31311589#31311589", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>For gcc it is possible to enable specific warnings for checking <code>printf()</code> and <code>scanf()</code>. </p>\n\n<p>The gcc documentation states:</p>\n\n<blockquote>\n  <p><code>-Wformat</code> is included in <code>-Wall</code>. For more control over some aspects\n  of format checking, the options <code>-Wformat-y2k</code>,\n  <code>-Wno-format-extra-args</code>, <code>-Wno-format-zero-length</code>,\n  <code>-Wformat-nonliteral</code>, <code>-Wformat-security</code>, and <code>-Wformat=2</code> are\n  available, but are not included in <code>-Wall</code>.</p>\n</blockquote>\n\n<p>The <code>-Wformat</code> which is enabled within the <code>-Wall</code> option does not enable several special warnings that help to find these cases:</p>\n\n<ul>\n<li><code>-Wformat-nonliteral</code> will warn if you do not pass a string litteral as format specifier.</li>\n<li><code>-Wformat-security</code> will warn if you pass a string that might contain a dangerous construct. It's a subset of <code>-Wformat-nonliteral</code>.</li>\n</ul>\n\n<p>I have to admit that enabling <code>-Wformat-security</code> revealed several bugs we had in our codebase (logging module, error handling module, xml output module, all had some functions that could do undefined things if they had been called with % characters in their parameter. For info, our codebase is now around 20 years old and even if we were aware of these kind of problems, we were extremely surprised when we enabled these warnings how many of these bugs were still in the codebase).</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1581711410, "post_id": 60230498, "comment_id": 106540896, "body": "You might add that <code>printf(&quot;Hello World!&quot;);</code> is <b>not</b> equivalent to <code>puts(&quot;Hello World!&quot;);</code> anyway, which tells something about the author of the recommendation."}], "tags": [], "owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "is_accepted": false, "score": 1, "last_activity_date": 1581707590, "last_edit_date": 1581707590, "creation_date": 1581699037, "answer_id": 60230498, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated/60230498#60230498", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p><em>Beside the other well-explained answers with any side-concerns covered, I would like to give a precise and concise answer to the provided question.</em></p>\n\n<hr>\n\n<blockquote>\n  <p>Why is <code>printf</code> with a single argument (without conversion specifiers) deprecated?</p>\n</blockquote>\n\n<p>A <code>printf</code> function call with a single argument in general is <strong>not</strong> deprecated and has also no vulnerabilities <strong>when</strong> used properly as you always shall code. </p>\n\n<p>C Users amongst the whole world, from status beginner to status expert use <code>printf</code> that way to give a simple text phrase as output to the console. </p>\n\n<p>Furthermore, Someone have to distinguish whether this one and only argument is a string literal or a pointer to a string, which is valid but commonly not used. For the latter, of course, there can occur inconvenient outputs or any kind of <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">Undefined Behavior</a>, when the pointer is not set properly to point to a valid string but these things can also occur if the format specifiers are not matching the respective arguments by giving multiple arguments.</p>\n\n<p>Of course, It is also not right and proper that the string, provided as one and only argument, has any format or conversion specifiers, since there is no conversion going to be happen.</p>\n\n<p>That said, giving a simple string literal like <code>\"Hello World!\"</code> as only argument without any format specifiers inside that string like you provided it in the question:</p>\n\n<pre><code>printf(\"Hello World!\");\n</code></pre>\n\n<p>is <strong>not</strong> deprecated or \"<em>bad practice</em>\" at all nor has any vulnerabilities.</p>\n\n<p>In fact, many C programmers begin and began to learn and use C or even programming languages in general with that HelloWorld-program and this <code>printf</code> statement as first ones of its kind.</p>\n\n<p>They wouldn\u00b4t be that if they were deprecated.</p>\n\n<blockquote>\n  <p>In a book that I'm reading, it's written that <code>printf</code> with a single argument (without conversion specifiers) is deprecated.</p>\n</blockquote>\n\n<p>Well, then I would take the focus on the book or the author itself. If an author is really doing such, in my opinion, <em>incorrect</em> assertions and even teaching that without explicitly explaining <strong>why</strong> he/she is doing so (if those assertions are really literally equivalent provided in that book), I would consider it a <em>bad</em> book. A <em>good</em> book, as opposed to that, shall explain <strong>why</strong> to avoid certain kind of programming methods or functions. </p>\n\n<p>According to what I said above, using <code>printf</code> with only one argument (a string literal) and <strong>without</strong> any format specifiers  is not in any case deprecated or considered as <em>\"bad practice\"</em>.</p>\n\n<p>You should ask the author, what he meant with that or even better, mind him to clarify or correct the relative section for the next edition or imprints in general.</p>\n"}], "owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15659, "favorite_count": 19, "accepted_answer_id": 31290989, "answer_count": 11, "score": 103, "last_activity_date": 1590229961, "creation_date": 1436353598, "last_edit_date": 1436353976, "question_id": 31290850, "link": "https://stackoverflow.com/questions/31290850/why-is-printf-with-a-single-argument-without-conversion-specifiers-deprecated", "title": "Why is printf with a single argument (without conversion specifiers) deprecated?", "body": "<p>In a book that I'm reading, it's written that <code>printf</code> with a single argument (without conversion specifiers) is deprecated. It recommends to substitute</p>\n\n<pre><code>printf(\"Hello World!\");\n</code></pre>\n\n<p>with</p>\n\n<pre><code>puts(\"Hello World!\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>printf(\"%s\", \"Hello World!\");\n</code></pre>\n\n<p>Can someone tell me why <code>printf(\"Hello World!\");</code> is wrong? It is written in the book that it contains vulnerabilities. What are these vulnerabilities?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 4, "creation_date": 1436353102, "post_id": 31290357, "comment_id": 50572381, "body": "Your code is wrong \u2014 <code>getchar()</code> returns an integer value, so  <code>char ch;</code> should be <code>int ch;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5093342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77458740fdb042dc784efbcb7d7b079f?s=128&d=identicon&r=PG&f=1", "display_name": "Dfusion", "link": "https://stackoverflow.com/users/5093342/dfusion"}, "edited": false, "score": 0, "creation_date": 1436379498, "post_id": 31290926, "comment_id": 50591407, "body": "can u  tell me,what is EOF in linux. Is there  any concept of providing EOF or only empty transmission is consider as EOF"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "reply_to_user": {"reputation": 11, "user_id": 5093342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77458740fdb042dc784efbcb7d7b079f?s=128&d=identicon&r=PG&f=1", "display_name": "Dfusion", "link": "https://stackoverflow.com/users/5093342/dfusion"}, "edited": false, "score": 0, "creation_date": 1436421613, "post_id": 31290926, "comment_id": 50607126, "body": "I don&#39;t think that you can actually end the standard input. What you can do is to invoke your program through a pipe. Type <code>cat | .&#47;a.out</code>. In this case after a single empty transmission, <code>cat</code> will close its output and your program will receive EOFs only."}], "tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": false, "score": 1, "last_activity_date": 1436356148, "last_edit_date": 1436356148, "creation_date": 1436353828, "answer_id": 31290926, "question_id": 31290357, "link": "https://stackoverflow.com/questions/31290357/print-longest-input-line-example-in-kr2esection-1-9/31290926#31290926", "title": "print longest input line.(example in K&amp;R(2e)(section 1.9))", "body": "<p>On Linux, Ctrl-D does not mean End-Of-File (EOF). It means 'end-of-transmission', which means that the currently typed input is immediately sent to your program. It is similar to newline with the exception that Ctrl-D itself is not sent. Your <code>getchar</code> returns EOF when it receives  an empty \"transmission\". This is why you have to type Ctrl-D three times (or a newline followed by two Ctrl-D) to get two EOFs.</p>\n"}], "owner": {"reputation": 11, "user_id": 5093342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77458740fdb042dc784efbcb7d7b079f?s=128&d=identicon&r=PG&f=1", "display_name": "Dfusion", "link": "https://stackoverflow.com/users/5093342/dfusion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436356148, "creation_date": 1436352297, "last_edit_date": 1436354353, "question_id": 31290357, "link": "https://stackoverflow.com/questions/31290357/print-longest-input-line-example-in-kr2esection-1-9", "title": "print longest input line.(example in K&amp;R(2e)(section 1.9))", "body": "<p>When I am executing this program (in ubuntu) and I enter input like <code>($ represents EOF(Ctrl+D)) :-</code></p>\n\n<pre><code>giujb  \nbjb $$\n</code></pre>\n\n<p>it does not work<br>\nbut for the input </p>\n\n<pre><code>giujb       \nbjb $$$\n</code></pre>\n\n<p>it works.</p>\n\n<p>I think it should require to give EOF only twice (in this program). Can anyone explain why it requires to give EOF three times?</p>\n\n<p><strong>My code</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define maxlength 1000\nchar line[maxlength];\nchar longest[maxlength];\nint getlength();\nvoid copy();\nint main()\n{\nint max=0,leng=0;\nwhile((leng=getlength())&gt;0)\n{ if(leng&gt;max)\n  {max=leng;\n  copy();\n  }\n } \n if(max&gt;0)\n printf(\"\\n%s\",longest);\n return 0;\n }\n  int getlength()\n { char ch;\n    int i;\n    for(i=0;(i&lt;(maxlength-1)) &amp;&amp; ((ch=getchar())!= EOF) &amp;&amp; (ch!='\\n');++i)\n    {line[i]=ch;\n     printf(\"%d\",i);\n     }\n\n    if(ch=='\\n')\n    {line[i]=ch;\n     ++i;\n     }\n    line[i]='\\0';\n    printf(\"bye\");\n    return i;\n    }\n    void copy()\n    {\n    int i=0;\n    while((longest[i]=line[i])!='\\0')\n    ++i;\n    }\n</code></pre>\n"}, {"tags": ["c", "loops", "for-loop", "scanf"], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 8, "last_activity_date": 1436351776, "creation_date": 1436351776, "answer_id": 31290173, "question_id": 31290067, "link": "https://stackoverflow.com/questions/31290067/for-loop-scans-one-less-time-in-c/31290173#31290173", "title": "For loop scans one less time in c", "body": "<pre><code>for(i=0; i&lt;size; i++){\n</code></pre>\n\n<p>will loop 7 times when <code>size</code> is 7.</p>\n\n<p>Your problem is as follows:</p>\n\n<p>You enter a number for</p>\n\n<pre><code>scanf(\"%d\",&amp;size);\n</code></pre>\n\n<p>and press <kbd>Enter</kbd>. The above <code>scanf</code> scans the number and leaves the newline character(<code>'\\n'</code>) in the standard input stream. In the first iteration of the first loop,</p>\n\n<pre><code>scanf(\"%c\",&amp;temp);\n</code></pre>\n\n<p>sees the newline character and consumes it thus, making you think that the loop executes 1 less time. You can verify this by adding </p>\n\n<pre><code>printf(\"Got '%c'\", temp);\n</code></pre>\n\n<p>after the <code>scanf</code> in the loop.</p>\n\n<p>Fix it by using </p>\n\n<pre><code>scanf(\" %c\",&amp;temp);\n</code></pre>\n\n<p>The space before <code>%c</code> discards all <a href=\"https://en.wikipedia.org/wiki/Whitespace_character\">whitespace characters</a> including none until the first non-whitespace character.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436352838, "creation_date": 1436352838, "answer_id": 31290563, "question_id": 31290067, "link": "https://stackoverflow.com/questions/31290067/for-loop-scans-one-less-time-in-c/31290563#31290563", "title": "For loop scans one less time in c", "body": "<p>Change your code to</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char ab[] = \"abcdefghijklmnopqrstuvwxyz\", temp;\n    int i, j, size, counter[26] = {0};\n    scanf(\"%d\", &amp;size);\n    for (i = 0; i &lt;= size; ++i) {   // One more iteration for the loop\n        scanf(\"%c\", &amp;temp);\n        for (j = 0; j &lt; 26; ++j) {\n            if (ab[j] == temp) {\n                counter[j]++;\n                break;\n            }\n        }\n    }\n    for (i = 0; i &lt; 26; ++i)\n        printf(\"We have %d %c\\n\", counter[i], ab[i]);\n    return 0;\n}\n</code></pre>\n\n<p>However, prefer reading the string at once instead reading character by character</p>\n\n<pre><code>char str[size + 1];\nscanf(\"%s\", str);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1436359803, "post_id": 31290674, "comment_id": 50577173, "body": "<code>scanf(&quot;%*[ \\n\\t]%c&quot;,&amp;temp);</code> scans nothing into <code>temp</code> if input lacks a leading space, newline or tab."}], "tags": [], "owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1436353140, "creation_date": 1436353140, "answer_id": 31290674, "question_id": 31290067, "link": "https://stackoverflow.com/questions/31290067/for-loop-scans-one-less-time-in-c/31290674#31290674", "title": "For loop scans one less time in c", "body": "<p>The problem is that <code>%c</code> does not skip white space as do the numerical formats such as <code>%f</code> and <code>%d</code>.</p>\n\n<p>The following <code>scanf</code> can be used to skip white space and then read the next, non-white character.</p>\n\n<blockquote>\n  <p>scanf(\"%*[ \\n\\t]%c\",&amp;temp); </p>\n</blockquote>\n\n<p>The <code>*</code> says throw away what is read, don't store it in an output variable. The <code>[...]</code> says read any sequence of characters matching the characters between the brackets, in this case, space, newline or tab.</p>\n"}], "owner": {"reputation": 39, "user_id": 5093358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba97e29f34d68b6894385659704239c?s=128&d=identicon&r=PG&f=1", "display_name": "\u03a7\u03c1\u03ae\u03c3\u03c4\u03bf\u03c2 \u039c\u03ac\u03c1\u03b7\u03c2", "link": "https://stackoverflow.com/users/5093358/%ce%a7%cf%81%ce%ae%cf%83%cf%84%ce%bf%cf%82-%ce%9c%ce%ac%cf%81%ce%b7%cf%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1436355546, "creation_date": 1436351546, "last_edit_date": 1436355546, "question_id": 31290067, "link": "https://stackoverflow.com/questions/31290067/for-loop-scans-one-less-time-in-c", "title": "For loop scans one less time in c", "body": "<p>The user enters a string of characters, but before that he enter the size of the string. Then I have to read and count how many times each letter is entered. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar ab[] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'}; //Size = 26\n\nint main(void)\n{\n\n  int i, j, size, counter[26];\n  char temp;\n\n  for(i=0; i&lt;26; i++)\n  { \n      counter[i]=0;\n  }\n\n  scanf(\"%d\",&amp;size);\n\n  for(i=0; i&lt;size; i++)\n  {\n    scanf(\"%c\",&amp;temp);\n\n    for(j=0; j&lt;26; j++)\n    {\n          if(ab[j]==temp)\n          {\n            counter[j]++;\n              break;\n          }\n      }\n  }\n\n  for(i=0; i&lt;26; i++) \n  {\n      printf(\"We have %d %c\\n\",counter[i],ab[i]);\n  }\n\n  return 0;\n\n}\n</code></pre>\n\n<p>And here is my problem:<br>\nIn the given code the for loop that reads executes one last time. So for example if you enter 7 it will execute 6 times instead of 7 even if it starts from 0. Do you know what the problem is? </p>\n"}, {"tags": ["c", "string", "char"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1436351605, "post_id": 31290040, "comment_id": 50571467, "body": "Compare strings using <code>strcmp</code>, not <code>==</code>."}, {"owner": {"reputation": 3218, "user_id": 1285655, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b3ff3f7a09887e25b9d55a46f998fff?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1285655/matthias"}, "edited": false, "score": 1, "creation_date": 1436351842, "post_id": 31290040, "comment_id": 50571618, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/8004237/how-do-i-properly-compare-strings-in-c\">How do I properly compare strings in C?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 2, "last_activity_date": 1436351936, "last_edit_date": 1436351936, "creation_date": 1436351620, "answer_id": 31290109, "question_id": 31290040, "link": "https://stackoverflow.com/questions/31290040/two-identical-chains-do-not-identify-themselves-as-equals-in-c/31290109#31290109", "title": "Two identical chains do not identify themselves as equals in C", "body": "<p><code>==</code> compares the pointer addresses.</p>\n\n<p>To compare null-terminated character arrays (aka C-strings), use <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow\"><code>strcmp</code></a>:</p>\n\n<pre><code>if(strcmp(workinger, line_working) == 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1436351637, "creation_date": 1436351637, "answer_id": 31290118, "question_id": 31290040, "link": "https://stackoverflow.com/questions/31290040/two-identical-chains-do-not-identify-themselves-as-equals-in-c/31290118#31290118", "title": "Two identical chains do not identify themselves as equals in C", "body": "<pre><code>if(workinger==line_working){\n</code></pre>\n\n<p>compares the pointers.</p>\n\n<p><code>workinger</code> is a pointer and the array <code>line_working</code> used in the expression (comparison) gets converted to the pointer to its first element, which is equal to <code>&amp;line_working[0]</code>. So it does address comparison. But this is not what you want. Unfortunately, this comparison is perfectly valid in C. So compiler can't help you here.</p>\n\n<p>Use <a href=\"http://man7.org/linux/man-pages/man3/strcmp.3.html\" rel=\"nofollow\"><code>strcmp()</code></a> to compare C strings. </p>\n"}, {"comments": [{"owner": {"reputation": 3218, "user_id": 1285655, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b3ff3f7a09887e25b9d55a46f998fff?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1285655/matthias"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1436353337, "post_id": 31290190, "comment_id": 50572519, "body": "i re-phrased (you may, too)"}], "tags": [], "owner": {"reputation": 3218, "user_id": 1285655, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b3ff3f7a09887e25b9d55a46f998fff?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1285655/matthias"}, "is_accepted": false, "score": 1, "last_activity_date": 1436353310, "last_edit_date": 1495540272, "creation_date": 1436351826, "answer_id": 31290190, "question_id": 31290040, "link": "https://stackoverflow.com/questions/31290040/two-identical-chains-do-not-identify-themselves-as-equals-in-c/31290190#31290190", "title": "Two identical chains do not identify themselves as equals in C", "body": "<p>Your code does not compare the strings that you correctly try to compare with the assumption that the result should be they are equal, but the memory location where the strings are stored. By using '==' you do compare the value of workinger (which is a pointer so the variables value is a memory address) and line_working (which is an array so the corresponding value equals the memory address of the 1st element) </p>\n\n<pre><code>if (workinger==line_working)\n</code></pre>\n\n<p>To compare the strings that are stored at the corresponding memory locations you should make use of the string compare functions (see this question <a href=\"https://stackoverflow.com/questions/8004237/how-do-i-properly-compare-strings-in-c\">How do I properly compare strings?</a> )</p>\n"}], "owner": {"reputation": 105, "user_id": 4900881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBNGw.png?s=128&g=1", "display_name": "jlxip", "link": "https://stackoverflow.com/users/4900881/jlxip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 31290109, "answer_count": 3, "score": -1, "last_activity_date": 1436353310, "creation_date": 1436351475, "question_id": 31290040, "link": "https://stackoverflow.com/questions/31290040/two-identical-chains-do-not-identify-themselves-as-equals-in-c", "title": "Two identical chains do not identify themselves as equals in C", "body": "<p>I've two character strings, one with the first line of a file (which is \"WORKING\"), and a second with the word \"WORKING\". The problem is that when I try to put them in an IF, it says they're not the same!</p>\n\n<p>I've tried to read both of them with printf command but they're the same. I've also tried to use '\\n' in the second string but there's not any change.</p>\n\n<p>Here's the code, have a look:</p>\n\n<pre><code>FILE *fl;\nfl=fopen(\"test.txt\", \"r\");\nchar line_working[100];\nfscanf(fl, \"%s\\n\", line_working);\nfclose(fl);\nprintf(\"%s\", line_working);              //HERE IT PRINTS: WORKING\nchar* workinger=\"WORKING\";\nprintf(\"\\n%s\", workinger);               //HERE IT ALSO PRINTS: WORKING\ngetch();\nif(workinger==line_working){\n    printf(\"OK\");\n    getch();\n}\n</code></pre>\n\n<p>And nothing happens...</p>\n"}, {"tags": ["c++", "c", "algorithm", "math"], "comments": [{"owner": {"reputation": 118256, "user_id": 284795, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/99f7ffd3d45dbcef0b3b6960dcfe81a2?s=128&d=identicon&r=PG", "display_name": "Colonel Panic", "link": "https://stackoverflow.com/users/284795/colonel-panic"}, "edited": false, "score": 2, "creation_date": 1436450704, "post_id": 31289961, "comment_id": 50626791, "body": "<b>Reopen</b>: this is a sensible question, asked clearly."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 4551626, "user_type": "registered", "profile_image": "https://graph.facebook.com/758927800869453/picture?type=large", "display_name": "Sangeet Kumar", "link": "https://stackoverflow.com/users/4551626/sangeet-kumar"}, "edited": false, "score": 3, "creation_date": 1436355975, "post_id": 31290197, "comment_id": 50574240, "body": "This statement power((a%mod+mod)%mod, b)) for function calling  is really good for avoiding to calculate it in each step of recursion. thanks.."}], "tags": [], "owner": {"reputation": 9041, "user_id": 3216312, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/532212e9b26bc1e386a9f13dd8fa520a?s=128&d=identicon&r=PG&f=1", "display_name": "Petr", "link": "https://stackoverflow.com/users/3216312/petr"}, "is_accepted": true, "score": 16, "last_activity_date": 1436351846, "creation_date": 1436351846, "answer_id": 31290197, "question_id": 31289961, "link": "https://stackoverflow.com/questions/31289961/what-is-the-need-of-the-statement-of-nummodmod/31290197#31290197", "title": "What is the need of the statement of (num+mod)%mod?", "body": "<p>The most common usage of such a construct is to make sure the result is non-negative. The standard <code>operator%</code> behaves differently for positive and negative arguments: for example, <code>4%3==1</code>, but <code>(-2)%3==-2</code>, while you might expect <code>(-2)%3==1</code> and <code>(-2)/3==-1</code>, which is mathematically more correct.</p>\n\n<p>This behavior can often cause problems when modular arithmetic is used, and this trick of adding <code>mod</code> is often employed to obtain the mathematically more correct non-negative result. Instead of simply writing <code>a%b</code>, if <code>a</code> can be negative, one writes <code>(a%b+b)%b</code>.</p>\n\n<p>However, its usage in the code in your question is strange. In that case, it is easier to assume that <code>a</code> is positive <em>before</em> calling the <code>power</code> function from the main code (for example, by making the main call like <code>power((a%mod+mod)%mod, b)</code>). Probably the author just wanted to get additional assurance of correctness, although it was not needed.</p>\n"}], "owner": {"reputation": 109, "user_id": 4551626, "user_type": "registered", "profile_image": "https://graph.facebook.com/758927800869453/picture?type=large", "display_name": "Sangeet Kumar", "link": "https://stackoverflow.com/users/4551626/sangeet-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 4, "accepted_answer_id": 31290197, "answer_count": 1, "score": 6, "last_activity_date": 1456253395, "creation_date": 1436351260, "last_edit_date": 1436352188, "question_id": 31289961, "link": "https://stackoverflow.com/questions/31289961/what-is-the-need-of-the-statement-of-nummodmod", "title": "What is the need of the statement of (num+mod)%mod?", "body": "<p>What is the need of the statement <code>ans = (ans + mod) % mod</code> in this program ?</p>\n\n<p>Assume that <code>mod = 10^9+7</code>. This function is computing <code>a</code> to the power of <code>b</code> under mod operation in O(log(n)) complexity:</p>\n\n<pre><code>long long power(long long a, long long b)\n{\n    if (b == 0) \n        return 1ll;\n    long long ans = power(a, b/2);\n    ans = (ans * ans) % mod;\n    ans = (ans + mod) % mod;\n    if(b % 2 == 1)\n        ans = (ans * a) % mod;\n    ans = (ans + mod) % mod;\n    return ans;\n}\n</code></pre>\n"}, {"tags": ["c", "usb", "libusb"], "comments": [{"owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 1, "creation_date": 1436364962, "post_id": 31289463, "comment_id": 50581306, "body": "The <code>libusb_open_device_with_vid_pid</code> does multiple things at once, and returns null on <i>any</i> error, not just &quot;not found&quot;, and you can&#39;t get the exact error, which is why it is not recommended to use in an actual application. By using <a href=\"http://libusb.sourceforge.net/api-1.0/group__dev.html#gac0fe4b65914c5ed036e6cbec61cb0b97\" rel=\"nofollow noreferrer\"><code>libusb_get_device_list</code></a> and <code>libusb_open</code> you can get the actual error. Perhaps you just don&#39;t have the rights to open the device ?"}, {"owner": {"reputation": 1029, "user_id": 4464596, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/15b667c1afe164ed53ee4b4c4d7684fe?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4464596/simon"}, "reply_to_user": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 0, "creation_date": 1436367977, "post_id": 31289463, "comment_id": 50583851, "body": "Yes maybe I do not have the right, if I run my code with the sudo commande, I could not &quot;not found&quot; message.But is suspicious is that if I change my vid and pid and I put a bad address, and I run my code with the command sudo I do not have my message not found. I will try to use <code>libusb_get_device_list</code> and <code>libusb_open</code>"}, {"owner": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1436450138, "post_id": 31289463, "comment_id": 50626295, "body": "do not use <code>NULL</code> for the libusb context"}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "reply_to_user": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1436631496, "post_id": 31289463, "comment_id": 50699513, "body": "@PeterMortensen&quot; <b>DO NOT</b> introduce false quoted error messages into questions.  These give a misleading impression that the software has reported that specific error (often worth doing a web search on) which is not the case here."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 1, "creation_date": 1436631659, "post_id": 31289463, "comment_id": 50699559, "body": "@simon - note that the device you are trying to talk to is an HID mouse.  That may introduce some additional complications, such as the need to detach the kernel driver, which typically requires root on linux."}, {"owner": {"reputation": 1029, "user_id": 4464596, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/15b667c1afe164ed53ee4b4c4d7684fe?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4464596/simon"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1437040859, "post_id": 31289463, "comment_id": 50869739, "body": "@Chris Stratton Thanks for your answer, I actually found the function to detach the kernel driver, but I think I can not send signals to the USB port if I have no devices to connect over"}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1437050848, "post_id": 31289463, "comment_id": 50876222, "body": "Talking on an empty port is unlikely to be supported outside of test register modes that might exist in some host controllers - what would you hope to achieve by it?"}, {"owner": {"reputation": 1029, "user_id": 4464596, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/15b667c1afe164ed53ee4b4c4d7684fe?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4464596/simon"}, "edited": false, "score": 0, "creation_date": 1437374941, "post_id": 31289463, "comment_id": 50982674, "body": "I thought light a LED on the USB port that is why I wanted to speak with an empty port on which I would plug my LED"}], "owner": {"reputation": 1029, "user_id": 4464596, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/15b667c1afe164ed53ee4b4c4d7684fe?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4464596/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436631448, "creation_date": 1436349926, "last_edit_date": 1436631448, "question_id": 31289463, "link": "https://stackoverflow.com/questions/31289463/device-not-found-libusb-debian", "title": "Device not found libusb debian", "body": "<p>I have a small problem with the libusb.I want to open a USB port, but this port is never found.\nResult of lsusb command : </p>\n\n<pre><code>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\nBus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub\nBus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub\nBus 003 Device 002: ID 0461:4e22 Primax Electronics, Ltd \nBus 001 Device 003: ID 046d:c326 Logitech, Inc. \nBus 001 Device 004: ID 080c:0300 Datalogic S.p.A. Gryphon D120 Barcode Scanner\n</code></pre>\n\n<p>So in my main.c I try to open one USB port with :</p>\n\n<pre><code>libusb_open_device_with_vid_pid(NULL, VID, PID);\n</code></pre>\n\n<p>So my main.c is :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;libusb-1.0/libusb.h&gt;\n#include &lt;errno.h&gt;\n\n#define VID 0x0461\n#define PID 0x4e22\n\nstatic struct libusb_device_handle *devh = NULL;\n\nint main(int argc,char** argv)\n{\n\n    libusb_init(NULL);\n    devh = libusb_open_device_with_vid_pid(NULL, VID, PID);\n    if (devh == NULL )\n    {\n       printf(\"not found\\n\");\n       return -1;\n    }\n}\n</code></pre>\n\n<p>If I test all port usb none is found</p>\n"}, {"tags": ["c", "linker", "keil"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1436351299, "post_id": 31289313, "comment_id": 50571276, "body": "Maybe you can add some test code that print: the base address of the structure and the addresses of the members. From that you can determine the offsets and use those with the base address you got from the linker map. This code can be outside the program itself; you only need to know the offsets so you do not need to include it in the prgram."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 1, "creation_date": 1436352812, "post_id": 31289313, "comment_id": 50572194, "body": "No, the linker does not know about struct members, only about symbols with external linkage, in your case the global variable itself. You may get the offset of the member using another technique and the add it to the global variable address."}, {"owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1436353791, "post_id": 31289313, "comment_id": 50572789, "body": "@PaulOgilvie that&#39;s a bright idea, thanks! I will try to include the header files defining the structure in a VS project and print the relative offsets. Not sure if VS will use the same alignment as Keil though."}], "answers": [{"comments": [{"owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "edited": false, "score": 0, "creation_date": 1436370795, "post_id": 31292402, "comment_id": 50585975, "body": "Unfortunately my project fails to build with <code>pack()</code> (plenty of <code>cannot assing __packed int32* to int32*</code> errors). Anyway, Visual Studio and Keil <i>seem</i> to align the structure in the same way (<code>sizeof(mystruct)</code> is the same). So I guess I&#39;ll have to do without <code>pack</code> and hope for the best."}], "tags": [], "owner": {"reputation": 231, "user_id": 1603634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975deb0d852da1e6a1f15797f24ab4d?s=128&d=identicon&r=PG&f=1", "display_name": "David LaPorte", "link": "https://stackoverflow.com/users/1603634/david-laporte"}, "is_accepted": true, "score": 1, "last_activity_date": 1436357781, "creation_date": 1436357781, "answer_id": 31292402, "question_id": 31289313, "link": "https://stackoverflow.com/questions/31289313/how-to-obtain-addresses-of-structure-members/31292402#31292402", "title": "How to obtain addresses of structure members", "body": "<p>As you noted in a comment, structure alignment may be an issue. It looks like the Keil compiler does support the <a href=\"http://www.keil.com/support/man/docs/armccref/armccref_cjafeedg.htm\" rel=\"nofollow\">pack()</a> <code>#pragma</code> so you can control the alignment of struct members. You can then use the .MAP file to get the starting address of the struct, and use the C include file that defines the struct to calculate the offsets of the individual members.</p>\n"}], "owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "accepted_answer_id": 31292402, "answer_count": 1, "score": 0, "last_activity_date": 1436357781, "creation_date": 1436349597, "question_id": 31289313, "link": "https://stackoverflow.com/questions/31289313/how-to-obtain-addresses-of-structure-members", "title": "How to obtain addresses of structure members", "body": "<p>I'm doing testing of a project based on Cortex-M0. The firmware is developed in C using Keil (v. 4.71.2) and ARM Linker (v. 5.03). I have read/write access to the RAM which I use to simulate failures, and I need to find out addresses of variables I need to modify.</p>\n\n<p>Right now I'm using the linker map file which is very handy for scalar global variables:</p>\n\n<pre><code>myvar        0x00005978   Data      4  file1.o(.constdata)\n</code></pre>\n\n<p>Here I know that writing 4 bytes at address 0x00005978 will alter the variable <code>myvar</code>. However, I cannot apply the same approach for global structures:</p>\n\n<pre><code>mystruct     0x00020000   Data     400 file2.o(.data)\n</code></pre>\n\n<p>I have the start address of <code>mystruct</code>, however, I have troubles to access <code>mystruct.module2.config.myvar</code>. Since the code is still being developed, new fields are added to <code>mystruct.module1</code> and the address of <code>mystruct.module2</code> changes.</p>\n\n<p>Is it possible to force the linker to output the addresses of individual fields in the structure?</p>\n\n<p>As a workaround I declare a global variable with the address I want:</p>\n\n<pre><code>uint32_t * const myvar_ptr = &amp;mystruct.module2.config.myvar;\n</code></pre>\n\n<p>Then I can find the address of <code>myvar_ptr</code> in the linker map and read it to obtain the address of <code>mystruct.module2.config.myvar</code>. However, this approach wastes 4 bytes of ROM to store each pointer, and ROM size is strictly limited, so I cannot declare 100 extra pointers targeting each field of <code>mystruct</code>. Is there a better way?</p>\n"}, {"tags": ["c", "file", "header", "structure"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1436352180, "post_id": 31289169, "comment_id": 50571819, "body": "Did you write include guards to your header files?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1436352220, "post_id": 31289169, "comment_id": 50571844, "body": "Also please include the error messages so we can stop guessing."}, {"owner": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1436358500, "post_id": 31289169, "comment_id": 50576168, "body": "I did not because I don&#39;t know how to use them yet."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1436377695, "post_id": 31289169, "comment_id": 50590266, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5825084/compile-error-struct-type-redefinition-although-its-the-first-definition-fo\">Compile error &quot;&#39;struct&#39; type redefinition&quot; although it&#39;s the first definition for it</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "edited": false, "score": 0, "creation_date": 1436350943, "post_id": 31289270, "comment_id": 50571054, "body": "Thank you for your answer. I thought the line in structures.h defined a structure type, but not an actual structure, hence the declaration of struct1 in FunctionSet1.c as a structure of type struct type_struct1. I didn&#39;t know in Functionset1.h if I should put the type name (type_struct1) or the structure name (struct1)."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "edited": false, "score": 0, "creation_date": 1436352558, "post_id": 31289270, "comment_id": 50572029, "body": "@PoleAco Functions need to be declared to return <i>types</i>. The name of the actual object returned is irrelevant. So in FunctionSet1.c declare to function to return the type <code>type_struct1</code>."}, {"owner": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1436358987, "post_id": 31289270, "comment_id": 50576540, "body": "@zenith I updated my code accordingly (if I understood correctly)."}], "tags": [], "owner": {"reputation": 423, "user_id": 2422765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f13ae5bbbd22da66b486e4697a6775?s=128&d=identicon&r=PG", "display_name": "Joyas", "link": "https://stackoverflow.com/users/2422765/joyas"}, "is_accepted": false, "score": 1, "last_activity_date": 1436349520, "creation_date": 1436349520, "answer_id": 31289270, "question_id": 31289169, "link": "https://stackoverflow.com/questions/31289169/proper-way-to-declare-and-use-structures-in-c-project/31289270#31289270", "title": "Proper way to declare and use structures in C project?", "body": "<p>In your example, you declare a structure named type_struct in structure.h, then in FunctionSet1.h the structure that you are returning is type_struct, and in the .c it is called struct1.</p>\n\n<p>So i think that the problem is that struct1 and type_struct are not recognized because they have never been defined ...</p>\n\n<p>However, the organization of your files is fine.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "edited": false, "score": 0, "creation_date": 1436359130, "post_id": 31290395, "comment_id": 50576654, "body": "I feel this is how I&#39;ve done it. Would you point to my error more specifically ?"}], "tags": [], "owner": {"reputation": 865, "user_id": 4970211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TjH1Z.jpg?s=128&g=1", "display_name": "Valentin Duboscq", "link": "https://stackoverflow.com/users/4970211/valentin-duboscq"}, "is_accepted": false, "score": 0, "last_activity_date": 1436352395, "creation_date": 1436352395, "answer_id": 31290395, "question_id": 31289169, "link": "https://stackoverflow.com/questions/31289169/proper-way-to-declare-and-use-structures-in-c-project/31290395#31290395", "title": "Proper way to declare and use structures in C project?", "body": "<p>First of all, you have to declare the structure in your <code>file.h</code> (you can use <code>typedef</code> to create an alias)</p>\n\n<pre><code>   typedef struct   Books\n   {\n      char          title[50];\n      int           book_id;\n   } books; \n</code></pre>\n\n<p>then, you have to include your <code>file.h</code> in your <code>file.c</code> and declare your variable like this</p>\n\n<pre><code>#include \"file.h\"\n\nint       main()\n{\n    books book1;\n\n    book1.title = \"Harry Potter\";\n    book1.book_id = 54;\n}\n</code></pre>\n\n<p>or like this if you didn't use <code>typedef</code></p>\n\n<pre><code>#include \"file.h\"\n\nint              main()\n{\n    struct Books book1;\n\n    book1.title = \"Harry Potter\";\n    book1.book_id = 54;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1436358782, "creation_date": 1436358782, "answer_id": 31292802, "question_id": 31289169, "link": "https://stackoverflow.com/questions/31289169/proper-way-to-declare-and-use-structures-in-c-project/31292802#31292802", "title": "Proper way to declare and use structures in C project?", "body": "<p>Your general structure looks good.  One thing you need to do, as zenith mentioned, is to put include guards into your header files.  What that is is a set of #define's that make sure that the contents of the header are not included more that once in a given file.  For example:</p>\n\n<p>structures.h:</p>\n\n<pre><code>#ifndef STRUCTURES_H\n#define STRUCTURES_H\n\nstruct type_struct1{\n    int a,b;\n};\n\n...\n// more structs\n...\n\n#endif\n</code></pre>\n\n<p>FunctionSet1.h:</p>\n\n<pre><code>#ifndef FUNCTION_SET_1_H\n#define FUNCTION_SET_1_H\n\n#include \"structures.h\"\n\nstruct type_struct1 function1();\n\n...\n// more functions in FucntionSet1.c\n...\n\n#endif\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#inlcude &lt;stdio.h&gt;\n#include \"structures.h\"\n#include \"FunctionSet1.h\"\n\nint main(void)\n{\n    struct type_struct1 struct1;\n    struct1 = function1();\n    return 0;\n}\n</code></pre>\n\n<p>Here, main.c includes structures.h and FunctionSet1.h, but FunctionSet1.h also includes structures.h.  Without the include guards, the contents of structures.h would appear twice in the resulting file after the preprocesser is done.  This is probably why you're getting the \"tag redefined\" error.</p>\n\n<p>The include guards prevent these type of errors from happening.  Then you don't have to worry about whether or not a particular header file was included or not.  This is particularly important if you're writing a library, where other users may not know the relationship between your header files.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "edited": false, "score": 0, "creation_date": 1436359628, "post_id": 31293129, "comment_id": 50577027, "body": "@dbush : wow got it without even seeing the main.c. Indeed you are right and I will do as you (all) advise."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436359849, "post_id": 31293129, "comment_id": 50577221, "body": "No problem. Feel free to <a href=\"http://meta.stackexchange.com/q/5234\">accept one of the answers</a> if it was useful to you."}], "tags": [], "owner": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "is_accepted": false, "score": 0, "last_activity_date": 1436359534, "creation_date": 1436359534, "answer_id": 31293129, "question_id": 31289169, "link": "https://stackoverflow.com/questions/31289169/proper-way-to-declare-and-use-structures-in-c-project/31293129#31293129", "title": "Proper way to declare and use structures in C project?", "body": "<p>Thank you all.</p>\n\n<p>I read again what you said and found that the code above is now correct.\nThe error I report is with testing the following main.c</p>\n\n<pre><code>#include \"structures.h\"\n#include \"FunctionSet1.h\"\nvoid main() {\n  struct type_struct1 struct2;\n  struct2=function1();\n}\n</code></pre>\n\n<p>in which structures.h is included again, thus causing the error. Removing the include eliminates the error.</p>\n\n<p>I will now look into header guards to avoid such problems.</p>\n\n<p>Thanks again.</p>\n"}], "owner": {"reputation": 23, "user_id": 5093131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ccfc0b52b97c7fd41fe67ae27f68d2?s=128&d=identicon&r=PG&f=1", "display_name": "PoleAco", "link": "https://stackoverflow.com/users/5093131/poleaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 31292802, "answer_count": 4, "score": 1, "last_activity_date": 1436364602, "creation_date": 1436349198, "last_edit_date": 1436364602, "question_id": 31289169, "link": "https://stackoverflow.com/questions/31289169/proper-way-to-declare-and-use-structures-in-c-project", "title": "Proper way to declare and use structures in C project?", "body": "<p>I am building a project that I am trying to organize as follows:</p>\n\n<pre><code>main.c\nglobals.h\nstructures.h\nFunctionSet1.c, FunctionSet1.h\nFunctionSet2.c, FunctionSet2.h\netc.\n</code></pre>\n\n<p>I thought I could define a structure type in structures.h:</p>\n\n<pre><code>struct type_struct1 {int a,b;}; // define type 'struct type_struct1'\n</code></pre>\n\n<p>then declare a <code>function1()</code> returning a structure of type <code>type_struct1</code> in FunctionSet1.h:</p>\n\n<pre><code>#include \"structures.h\"\nstruct type_struct1 function1(); // declare function1() that returns a type 'struct type_struct1'\n</code></pre>\n\n<p>then write <code>function1()</code> in FunctionSet1.c:</p>\n\n<pre><code>#include \"FunctionSet1.h\"\nstruct type_struct1 function1() {\n  struct type_struct1 struct1; // declare struct1 as type 'struct type_struct1'\n  struct1.a=1;\n  struct1.b=2;\n  return struct1;\n}\n</code></pre>\n\n<p><em>Edit: with the corrected code above, the compiler returns</em></p>\n\n<pre><code>306 'struct' tag redefined 'type_struct1' structures.h\n</code></pre>\n\n<p>Is the file set good practice ?\nWhat is the good practice to manage the structures ?</p>\n"}, {"tags": ["c++", "c", "scope", "local-variables", "lifetime"], "comments": [{"owner": {"reputation": 743, "user_id": 2950911, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0c4ed867715a870b7917df860c84e28f?s=128&d=identicon&r=PG&f=1", "display_name": "user2950911", "link": "https://stackoverflow.com/users/2950911/user2950911"}, "edited": false, "score": 0, "creation_date": 1436349256, "post_id": 31289118, "comment_id": 50569967, "body": "see here <a href=\"http://stackoverflow.com/questions/28727439\">stackoverflow.com/questions/28727439</a>"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1436350112, "last_edit_date": 1436350112, "creation_date": 1436349372, "answer_id": 31289222, "question_id": 31289118, "link": "https://stackoverflow.com/questions/31289118/confusion-in-scope-and-life-time-of-a-local-variable-in-c-c/31289222#31289222", "title": "Confusion in Scope and Life Time of a local variable in c/c++", "body": "<p><em>Scope</em> refers to the the availability of an identifier.<br>\n<em>Life time</em> refers to the actual duration an object is alive and accessible legally during the execution of the program. They are distinct things.</p>\n\n<p>Your code has <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behaviour</em></a> because the lifetime of  the object <code>n</code> is over at the closing <code>}</code> because you access it through a pointer.</p>\n\n<p>A simple example might make it clearer:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint *func()\n{\nstatic int var = 42;\nreturn &amp;r;\n}\n\nint main(void)\n{\nint *p = func();\n*p = 75; // This is valid.\n}\n</code></pre>\n\n<p>Here, <code>var</code> is has <code>static</code> storage duration. i.e. it's alive until the program termination. However, the scope of the variable <code>var</code> is limited to the function <code>func()</code>. But <code>var</code> can be accessed even outside <code>func()</code> through a pointer. This is perfectly valid.</p>\n\n<p>Compare this to your program. <code>n</code> has automatic storage duration and its lifetime and scope both are limited to the enclosing brackets <code>{ }</code>. So it's invalid to access <code>n</code> using a pointer. </p>\n\n<p>However, if you make change its (<code>n</code>) storage class to <code>static</code> then you can do what you do as the object is alive even outside enclosing brackets.</p>\n"}], "owner": {"reputation": 609, "user_id": 1549563, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/WvfAS.jpg?s=128&g=1", "display_name": "Nadeem Bhati", "link": "https://stackoverflow.com/users/1549563/nadeem-bhati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 3, "closed_date": 1436349350, "accepted_answer_id": 31289222, "answer_count": 1, "score": -1, "last_activity_date": 1436350112, "creation_date": 1436349040, "last_edit_date": 1436349354, "question_id": 31289118, "link": "https://stackoverflow.com/questions/31289118/confusion-in-scope-and-life-time-of-a-local-variable-in-c-c", "closed_reason": "Duplicate", "title": "Confusion in Scope and Life Time of a local variable in c/c++", "body": "<p><strong>My question is that when the lifetime of a local variable is at block level then why the pointer is still printing the value of a local variable even outside the block</strong></p>\n\n<pre><code> #include&lt;iostream&gt;\n\n  using namespace std;\n\nint main(){\n\n    int *p;\n    {\n        int n;\n        n=5;\n        p=&amp;n;\n    } \n    cout&lt;&lt;*p;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 1, "creation_date": 1436348605, "post_id": 31288867, "comment_id": 50569565, "body": "<code>ht_create()</code> is a function which takes <code>size</code> as argument and returns a pointer of type <code>hashtable_t</code>."}], "answers": [{"tags": [], "owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1436348567, "creation_date": 1436348567, "answer_id": 31288950, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming/31288950#31288950", "title": "Pointers to Structures in C programming", "body": "<p><code>hashtable_t *ht_create( int size ) {</code>  starts a function named <em>ht_create</em> that takes a single integer parameter <em>size</em> and returns a pointer to a <em>hashtable_t</em>.</p>\n\n<p>In general, in C functions that need to return or pass back structures return pointers to the structures.</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1436348595, "creation_date": 1436348595, "answer_id": 31288959, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming/31288959#31288959", "title": "Pointers to Structures in C programming", "body": "<p>You have a typedef:</p>\n\n<pre><code>typedef struct hashtable_s hashtable_t;\n</code></pre>\n\n<p>So</p>\n\n<pre><code>hashtable_t *ht_create( int size )\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>struct hashtable_s *ht_create( int size )\n</code></pre>\n\n<p>which is a function that takes in an <code>int</code> as a parameter and returns a pointer of type <code>struct hashtable_s*</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436348960, "post_id": 31288969, "comment_id": 50569774, "body": "Except that the code declares <code>struct entry_s **table;</code> which doesn&#39;t make any sense. You&#39;ll get a pointer-to-pointer pointing at a one dimensional array."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1436352014, "post_id": 31288969, "comment_id": 50571720, "body": "@Lundin: I think it&#39;s meant to be a 1D array (of size <code>size</code>) of pointers to <code>struct entry_s</code>, but who knows ?"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1436348611, "creation_date": 1436348611, "answer_id": 31288969, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming/31288969#31288969", "title": "Pointers to Structures in C programming", "body": "<p><code>ht_create</code> is just a function which, as its name implies, creates a hash table of a given size.</p>\n\n<p>It probably does something like this:</p>\n\n<pre><code>hashtable_t *ht_create( int size )\n{\n    hashtable_t *ht = malloc(sizeof(*ht));           // allocate hashtable_s struct\n    ht-&gt;size = size;                                 // init size field\n    ht-&gt;table = calloc(size, sizeof(ht-&gt;table[0]));  // allocate/init table itself\n    return ht;                                       // return pointer to newly-created hashtable_s\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "is_accepted": false, "score": 0, "last_activity_date": 1436348665, "creation_date": 1436348665, "answer_id": 31288988, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming/31288988#31288988", "title": "Pointers to Structures in C programming", "body": "<p>It declares a function with name <code>ht_create</code>. That function takes an <code>int</code> parameter and returns a <code>hashtable_t*</code>.  A <code>hashtable_t*</code> is a pointer to a <code>hashtable_t</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1436348716, "creation_date": 1436348716, "answer_id": 31289008, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming/31289008#31289008", "title": "Pointers to Structures in C programming", "body": "<p>The person who wrote the code was probably a bit confused about pointers and arrays in C, since <code>struct entry_s **table;</code> doesn't make any sense.</p>\n\n<p>The function returns a pointer to <code>hashtable_t</code> which is supposedly an allocated hashtable. In this case the program, if written correctly, allocates <code>size</code> number of <code>struct entry_s</code> as an array allocated in adjacent memory. And then each entry has a linked list of entries. This is known as \"chaining\".</p>\n\n<p>Why you would need a <code>struct entry_s **</code> I have no idea, and probably not the person who wrote the code either. A single pointer should work just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1436348790, "creation_date": 1436348790, "answer_id": 31289028, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming/31289028#31289028", "title": "Pointers to Structures in C programming", "body": "<pre><code>hashtable_t *ht_create( int size ) {\n</code></pre>\n\n<p>this is the beginning of a function. It recieveds an integer, which it will call size and at the end of the function it will return a pointer to the hashtable it has created. </p>\n\n<p>This function might be called from main by something like</p>\n\n<pre><code>p_hashtable = ht_create(10);\n</code></pre>\n\n<p>where p_hashtable has been created as a pointer to a hashtable. </p>\n"}, {"tags": [], "owner": {"reputation": 549, "user_id": 4337009, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6a716e13b586632545a68754588b4805?s=128&d=identicon&r=PG&f=1", "display_name": "evictednoise", "link": "https://stackoverflow.com/users/4337009/evictednoise"}, "is_accepted": false, "score": 0, "last_activity_date": 1436349584, "last_edit_date": 1436349584, "creation_date": 1436348840, "answer_id": 31289045, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming/31289045#31289045", "title": "Pointers to Structures in C programming", "body": "<p>the * means that the function returns the <strong>pointer to</strong>, <em>the address in memory</em> of the created hashtable.</p>\n\n<p><strong>EDIT:</strong><br>\nGoing a bit deeper, the '*' operator means 'value of', while '&amp;' means 'address of'</p>\n\n<p>In the assembly level, every variable has a cell, or N consequential cells, reserved in memory. So consider the following code:</p>\n\n<pre><code>struct st{ \nint a; \nchar ch; \n}; \n\nint main(void) \n{ \n    struct st obj; \n    struct st *stobj;\n    *stobj = &amp;obj; \n}\n</code></pre>\n\n<p>What this row <strong>*stobj = &obj;</strong> really does is</p>\n\n<p>(the value of) stobj = (the address of) obj</p>\n\n<p>as the pointer is meant to hold not the object itself, but rather objects address in memory</p>\n"}], "owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1436386059, "accepted_answer_id": 31289028, "answer_count": 7, "score": 1, "last_activity_date": 1436349584, "creation_date": 1436348355, "last_edit_date": 1436348868, "question_id": 31288867, "link": "https://stackoverflow.com/questions/31288867/pointers-to-structures-in-c-programming", "closed_reason": "Not suitable for this site", "title": "Pointers to Structures in C programming", "body": "<p>I was trying to understand a concept in Structures of C and was confused with the use of pointers with it. The code that I am working on looks like this :</p>\n\n<pre><code>struct entry_s {\n    char *key;\n    char *value;\n    struct entry_s *next;\n};\n\ntypedef struct entry_s entry_t;\n\nstruct hashtable_s {\n    int size;\n    struct entry_s **table; \n};\n\ntypedef struct hashtable_s hashtable_t;\n\nhashtable_t *ht_create( int size ) {\n    ............\n    ............\n}\n</code></pre>\n\n<p>Here I am confused at the last line i.e I dont really understand what it means.</p>\n\n<pre><code> hashtable_t *ht_create( int size )\n</code></pre>\n\n<p>Could somebody please explain that? </p>\n"}, {"tags": ["c", "gtk"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1436368425, "post_id": 31288469, "comment_id": 50584202, "body": "I don&#39;t understand what behavior you are asking for. Do you want the text view to scroll? If so, you need to put it in a GtkScrolledWindow. Or do you need something else?"}], "answers": [{"tags": [], "owner": {"reputation": 102099, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": false, "score": 1, "last_activity_date": 1436441198, "creation_date": 1436441198, "answer_id": 31316070, "question_id": 31288469, "link": "https://stackoverflow.com/questions/31288469/how-to-make-a-gtktextview-drop-to-the-next-row-when-getting-to-the-border-of-the/31316070#31316070", "title": "How to make a gtktextview drop to the next row when getting to the border of the window?", "body": "<p>It seems that you want to implement line wrapping in a GtkTextView. You don't need to do it yourself, the text view widget already supports line wrapping. To turn it on, call <code>gtk_text_view_set_wrap_mode()</code> with the text view and the appropriate wrap mode, such as <code>GTK_WRAP_CHAR</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 5090755, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3844e979faddc762a243698d1997facc?s=128&d=identicon&r=PG&f=1", "display_name": "Sotiris", "link": "https://stackoverflow.com/users/5090755/sotiris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436441198, "creation_date": 1436347284, "question_id": 31288469, "link": "https://stackoverflow.com/questions/31288469/how-to-make-a-gtktextview-drop-to-the-next-row-when-getting-to-the-border-of-the", "title": "How to make a gtktextview drop to the next row when getting to the border of the window?", "body": "<p>I want to make a textview that will output strings that may be multiple rows long, and to divide them when they reach the border of the window. The window is set to non-resizable, so its size is fixed.</p>\n\n<p>I tried to get the column and row numbers and work with these, but each character has a different size in pixels, so while a row full of \"m\" characters would reach the end of the row with the tenth character, a row of \"0\" would need about sixteen characters to get to the end of the line.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c", "malloc", "free"], "comments": [{"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 2, "creation_date": 1436347245, "post_id": 31288406, "comment_id": 50568631, "body": "you need to <code>free</code> manually."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1436347245, "post_id": 31288406, "comment_id": 50568632, "body": "I don&#39;t think there is such a function..."}, {"owner": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 0, "creation_date": 1436348879, "post_id": 31288406, "comment_id": 50569725, "body": "another option is not to use heap allocations (malloc) but use stack allocation."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 6, "last_activity_date": 1436347270, "creation_date": 1436347270, "answer_id": 31288461, "question_id": 31288406, "link": "https://stackoverflow.com/questions/31288406/how-can-i-free-automatically-multiple-malloc-in-c/31288461#31288461", "title": "How can I free automatically multiple malloc in C?", "body": "<blockquote>\n  <p>but a function which free all the memory allocated during the program.</p>\n</blockquote>\n\n<p>There's no such function in C. C doesn't do memory management automatically. So it's your responsibility to track the memory allocations and free them appropriately.</p>\n\n<p>Most modern operating systems (perhaps, not embedded systems) would reclaim the memory allocated during execution at process termination. So you can skip calling <code>free()</code>. However, if your application is a long running one then this will become a problem if it keeps allocating memory. Depending your application, you may devise a strategy to free memory appropriately.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5092600"}, "is_accepted": false, "score": 1, "last_activity_date": 1436360637, "creation_date": 1436360637, "answer_id": 31293572, "question_id": 31288406, "link": "https://stackoverflow.com/questions/31288406/how-can-i-free-automatically-multiple-malloc-in-c/31293572#31293572", "title": "How can I free automatically multiple malloc in C?", "body": "<p>As Blue Moon pointed out in his answer, one of the main features of C compared to other languages is the missing memory management. While this gives you a lot of freedom it can on the other hand lead to severe bugs in your code.</p>\n\n<p>Technically the detection of memory leaks is not possible with a confidence level of 100%, but there are quite powerful static code analyzers out there to guide you.</p>\n\n<p>In the last embedded project I worked on we used <a href=\"http://www.gimpel.com/html/flex.htm\" rel=\"nofollow\">FlexeLint</a>. It is costly for non-commercial products but the benefit is enormours. A lot of potential bugs and leaks could be detected with such a static analyzer without even executing the code.</p>\n\n<p>There is another static analyzer, free of cost for open source projects called <a href=\"https://scan.coverity.com/projects?language=CXX\" rel=\"nofollow\">Coverity Scan</a>. I did not try it myself but it is probably worth a shot.</p>\n\n<p>After witnessing what a good analyzer like FlexeLint is able to detect beyond mere compilation errors, I personally would not launch another C Project without such analyzis tools in place.</p>\n\n<p>While this is not a direct answer to your question, it can be an improvement to your workflow because such errors as forgetting a <code>free</code> call will be detected in most cases.</p>\n"}], "owner": {"reputation": 865, "user_id": 4970211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TjH1Z.jpg?s=128&g=1", "display_name": "Valentin Duboscq", "link": "https://stackoverflow.com/users/4970211/valentin-duboscq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 31288461, "answer_count": 2, "score": 1, "last_activity_date": 1436360637, "creation_date": 1436347135, "last_edit_date": 1436347278, "question_id": 31288406, "link": "https://stackoverflow.com/questions/31288406/how-can-i-free-automatically-multiple-malloc-in-c", "title": "How can I free automatically multiple malloc in C?", "body": "<p>I'd like to <code>free</code> automatically multiple <code>malloc</code>ed memory at the end of a program in C.</p>\n\n<p>For example :</p>\n\n<pre><code>str1 = malloc(sizeof(char) * 10);\nstr2 = malloc(sizeof(char) * 10);\nstr3 = malloc(sizeof(char) * 10);\n</code></pre>\n\n<p>I don't want a function like this :</p>\n\n<pre><code>void   my_free()\n{\n    free(str1);\n    free(str2);\n    free(str3);\n}\n</code></pre>\n\n<p>but a function which free all the memory allocated during the program.</p>\n"}, {"tags": ["c", "compatibility", "inline-assembly"], "answers": [{"comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1436347743, "post_id": 31288565, "comment_id": 50568981, "body": "I&#39;d like to add that &quot;\\n\\t&quot; increases the line counter for diagnostic messages while semicola don&#39;t. Messages respecting to large Assembly chunks are therefore more precise."}, {"owner": {"reputation": 171, "user_id": 3223505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4Kcb.jpg?s=128&g=1", "display_name": "Possible", "link": "https://stackoverflow.com/users/3223505/possible"}, "edited": false, "score": 1, "creation_date": 1436348028, "post_id": 31288565, "comment_id": 50569176, "body": "So, <code>\\n\\t</code> won the prize. And also, you gave me optimization ideas. Thank you."}], "tags": [], "owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "is_accepted": true, "score": 3, "last_activity_date": 1436347494, "creation_date": 1436347494, "answer_id": 31288565, "question_id": 31288398, "link": "https://stackoverflow.com/questions/31288398/compatibility-of-inline-assembly-n-t-versus/31288565#31288565", "title": "Compatibility of inline assembly - \\n\\t versus ;", "body": "<p>There is not \"correct\" way to multi-line assembly vs inline. Just whatever is the most readable. </p>\n\n<p>Exemple : <code>GMP</code> use differents asm code style for the same <code>bswap</code> function</p>\n\n<pre><code>/* bswap is available on i486 and up and is fast.  A combination rorw $8 /\n   roll $16 / rorw $8 is used in glibc for plain i386 (and in the linux\n   kernel with xchgb instead of rorw), but this is not done here, because\n   i386 means generic x86 and mixing word and dword operations will cause\n   partial register stalls on P6 chips.  */\n#if defined (__GNUC__) &amp;&amp; ! defined (NO_ASM)            \\\n  &amp;&amp; HAVE_HOST_CPU_FAMILY_x86 &amp;&amp; ! HAVE_HOST_CPU_i386   \\\n  &amp;&amp; GMP_LIMB_BITS == 32\n#define BSWAP_LIMB(dst, src)                        \\\n  do {                                  \\\n    __asm__ (\"bswap %0\" : \"=r\" (dst) : \"0\" (src));          \\\n  } while (0)\n#endif\n\n#if defined (__GNUC__) &amp;&amp; ! defined (NO_ASM)            \\\n  &amp;&amp; defined (__amd64__) &amp;&amp; GMP_LIMB_BITS == 64\n#define BSWAP_LIMB(dst, src)                        \\\n  do {                                  \\\n    __asm__ (\"bswap %q0\" : \"=r\" (dst) : \"0\" (src));         \\\n  } while (0)\n#endif\n\n#if defined (__GNUC__) &amp;&amp; ! defined (__INTEL_COMPILER)          \\\n    &amp;&amp; ! defined (NO_ASM) &amp;&amp; defined (__ia64) &amp;&amp; GMP_LIMB_BITS == 64\n#define BSWAP_LIMB(dst, src)                        \\\n  do {                                  \\\n    __asm__ (\"mux1 %0 = %1, @rev\" : \"=r\" (dst) :  \"r\" (src));       \\\n  } while (0)\n#endif\n\n/* As per glibc. */\n#if defined (__GNUC__) &amp;&amp; ! defined (NO_ASM)                    \\\n  &amp;&amp; HAVE_HOST_CPU_FAMILY_m68k &amp;&amp; GMP_LIMB_BITS == 32\n#define BSWAP_LIMB(dst, src)                        \\\n  do {                                  \\\n    mp_limb_t  __bswapl_src = (src);                    \\\n    __asm__ (\"ror%.w %#8, %0\\n\\t\"                   \\\n         \"swap   %0\\n\\t\"                        \\\n         \"ror%.w %#8, %0\"                       \\\n         : \"=d\" (dst)                       \\\n         : \"0\" (__bswapl_src));                 \\\n  } while (0)\n#endif\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3223505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4Kcb.jpg?s=128&g=1", "display_name": "Possible", "link": "https://stackoverflow.com/users/3223505/possible"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 31288565, "answer_count": 1, "score": 0, "last_activity_date": 1436348708, "creation_date": 1436347114, "last_edit_date": 1436348708, "question_id": 31288398, "link": "https://stackoverflow.com/questions/31288398/compatibility-of-inline-assembly-n-t-versus", "title": "Compatibility of inline assembly - \\n\\t versus ;", "body": "<p>What is the correct way to write inline assembly (except that avoid it)? Is better to use <code>;</code> or <code>\\n\\t</code>?</p>\n\n<p><sup>(except Microsoft compiler __asm)</sup></p>\n"}, {"tags": ["c", "arrays", "parameter-passing"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1436346683, "post_id": 31288071, "comment_id": 50568263, "body": "<code>[c] 2D array parameter</code> - I find it incredible to believe that search wouldn&#39;t yield <i>something</i> helpful."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1436346408, "creation_date": 1436346408, "answer_id": 31288147, "question_id": 31288071, "link": "https://stackoverflow.com/questions/31288071/passing-char-array-as-function-parameters-in-c/31288147#31288147", "title": "passing char array as function parameters in C", "body": "<p>The type you pass and the type the function expects do not match. Change the function to receive a pointer to an array:</p>\n\n<pre><code>void func(char (*array)[50])\n{\n\n}\n</code></pre>\n\n<p>Other problems:</p>\n\n<p>1) You haven't declared a prototype for <code>func()</code> either. In pre-C99 mode, compiler would assume the function returns an <code>int</code> and this would cause problem.\nIn C99 and C11, missing prototype makes your code invalid. So either declare the prototype at the top of the source file or move the function above <code>main()</code>.</p>\n\n<p>2) Include appropriate headers (<code>&lt;stdio.h&gt;</code> for printf etc).</p>\n"}], "owner": {"reputation": 1483, "user_id": 2646022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ffec904ecdbcb7ab453d3b292a3044?s=128&d=identicon&r=PG&f=1", "display_name": "user4757345", "link": "https://stackoverflow.com/users/2646022/user4757345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3665, "favorite_count": 0, "accepted_answer_id": 31288147, "answer_count": 1, "score": 1, "last_activity_date": 1436346742, "creation_date": 1436346139, "last_edit_date": 1436346742, "question_id": 31288071, "link": "https://stackoverflow.com/questions/31288071/passing-char-array-as-function-parameters-in-c", "title": "passing char array as function parameters in C", "body": "<p>I want to copy <code>arr2</code> to <code>arr</code> and pass <code>arr</code> as a function paramater</p>\n\n<pre><code>void func(char * array)\n{}\n\nint main(void)\n{\n    int a;\n    char arr[6][50];\n    char arr2[][50]={\"qweeeaa\",\"bbbb\",\"ffaa\",\"eeaa\",\"aaaa\",\"ffaa\"};\n\n    for(a=0; a&lt;6;a++)\n    {\n        strcpy(arr[a], arr2[a]);\n    }\n\n    func(arr);\n\n    return 0;\n}\n</code></pre>\n\n<p>But I can not pass <code>arr</code> as a function parameter. I get </p>\n\n<pre><code>[Warning] passing argument 1 of 'func' from incompatible pointer type [enabled by default]\n[Note] expected 'char *' but argument is of type 'char (*)[50]'\n</code></pre>\n\n<p>I am using <code>MinGW GCC 4.8.1</code></p>\n"}, {"tags": ["c", "eclipse", "syslog"], "answers": [{"tags": [], "owner": {"reputation": 11768, "user_id": 2274686, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z3EDW.jpg?s=128&g=1", "display_name": "vdenotaris", "link": "https://stackoverflow.com/users/2274686/vdenotaris"}, "is_accepted": false, "score": 2, "last_activity_date": 1436348899, "creation_date": 1436348899, "answer_id": 31289066, "question_id": 31287916, "link": "https://stackoverflow.com/questions/31287916/c-implicit-declaration-of-function-vsyslog/31289066#31289066", "title": "C: Implicit declaration of function \u2018vsyslog\u2019", "body": "<p>Fixed, by defining both <code>__USE_BSD</code> and <code>_BSD_SOURCE</code> as follows:</p>\n\n<pre><code>#define __USE_BSD\n#define _BSD_SOURCE\n#include &lt;syslog.h&gt;\n#include &lt;stdarg.h&gt;\n\n// ...\n</code></pre>\n"}], "owner": {"reputation": 11768, "user_id": 2274686, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z3EDW.jpg?s=128&g=1", "display_name": "vdenotaris", "link": "https://stackoverflow.com/users/2274686/vdenotaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436348899, "creation_date": 1436345757, "question_id": 31287916, "link": "https://stackoverflow.com/questions/31287916/c-implicit-declaration-of-function-vsyslog", "title": "C: Implicit declaration of function \u2018vsyslog\u2019", "body": "<p>I am trying to implement a sys logger for my pam module.\nMy code is as follows:</p>\n\n<pre><code>#define __USE_BSD\n#include &lt;syslog.h&gt;\n#include &lt;stdarg.h&gt;\n\n#include &lt;string.h&gt;\n\nstatic void _log(int level, const char *format, ...) {\n    va_list args;\n    va_start(args, format);\n    openlog(\"my_app\", LOG_CONS|LOG_PID|LOG_PERROR, LOG_AUTH);\n    vsyslog(level, format, args);\n    va_end(args);\n    closelog();\n}\n\nPAM_EXTERN int pam_sm_authenticate( pam_handle_t *pamh,\n    int flags,int argc, const char **argv ) {\n\n    /* Something... */\n\n    _log(LOG_INFO, \"username check\");\n    if (strcmp(username, \"jdoe\") != 0) {\n        _log(LOG_ERR, \"Auth error\");\n        return PAM_IGNORE;\n    }\n\n    /* Something else... *\n\n}\n</code></pre>\n\n<p>But, when I compile, Eclipse CDT returns me a warning:</p>\n\n<pre><code>../src/mypam.c:33:5: warning: implicit declaration of function \u2018vsyslog\u2019 [-Wimplicit-function-declaration]\n</code></pre>\n\n<p>How could I fix it?\nNote that I am using CentOS 7 as dev machine.</p>\n"}, {"tags": ["c", "linked-list", "queue"], "comments": [{"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1436345775, "post_id": 31287818, "comment_id": 50567645, "body": "There are a zillion linked list implementations that work very well; why write your own?  Or, if you really want/need to write your own, why not look at one of the existing implementations?"}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "reply_to_user": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1436345820, "post_id": 31287818, "comment_id": 50567672, "body": "i didn&#39;t write my own this is given to me by my teacher so i have to use this skeleton."}, {"owner": {"reputation": 8331, "user_id": 4350275, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-Mo6YiD_JPIc/AAAAAAAAAAI/AAAAAAAAHB4/TgdGmvza868/photo.jpg?sz=128", "display_name": "Prerak Sola", "link": "https://stackoverflow.com/users/4350275/prerak-sola"}, "edited": false, "score": 0, "creation_date": 1436345828, "post_id": 31287818, "comment_id": 50567684, "body": "Store the <code>head</code> in a temporary <code>head_ptr</code> and play with that."}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436345927, "post_id": 31287818, "comment_id": 50567744, "body": "^ You realize am already doing that"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436346030, "post_id": 31287980, "comment_id": 50567809, "body": "what structure did you replace with that? and how do i keep track of the tail in that case? MY_QUEUE does not have data or next. its a public version. its not complete as it needs the Struct Node to work. am not sure how familiar are you with opaque objects"}, {"owner": {"reputation": 11186, "user_id": 266978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/936f8c28b401a914224af1e0e9891633?s=128&d=identicon&r=PG", "display_name": "Baltasarq", "link": "https://stackoverflow.com/users/266978/baltasarq"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436360468, "post_id": 31287980, "comment_id": 50577693, "body": "I&#39;ve added an example of how to append a new element (i.e., insert at the tail), keeping track of the tail. As you can see, it is not difficult at all."}], "tags": [], "owner": {"reputation": 11186, "user_id": 266978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/936f8c28b401a914224af1e0e9891633?s=128&d=identicon&r=PG", "display_name": "Baltasarq", "link": "https://stackoverflow.com/users/266978/baltasarq"}, "is_accepted": false, "score": 2, "last_activity_date": 1436360403, "last_edit_date": 1436360403, "creation_date": 1436345923, "answer_id": 31287980, "question_id": 31287818, "link": "https://stackoverflow.com/questions/31287818/linked-list-how-to-tail-insert-without-moving-head-node/31287980#31287980", "title": "Linked List - how to tail insert without moving head node", "body": "<p>I think the problem is that you are using the struct <code>Node</code> as the data structure for you queue. Why not using a more dedicated version?</p>\n\n<pre><code>typedef struct queue_struct {\n    Node * head;\n    Node * tail;\n} * MY_QUEUE;\n</code></pre>\n\n<p>And now, well, that's it. You don't have to run all over the list in order to add at the end. The only problem is that you'll have to keep <code>tail</code> as well as <code>head</code> up when inserting (and removing), as following.</p>\n\n<pre><code>Status append(MY_QUEUE queue, int item)\n{\n    Node_ptr temp;\n\n    // create a new node\n    temp = (Node_ptr)malloc(sizeof(Node));\n    if (temp == NULL) {\n        printf(\"malloc failed\\n\");\n        return FAILURE;\n    }\n\n    temp-&gt;data = item;\n    temp-&gt;next = NULL;\n\n    if (queue-&gt;head == NULL){\n        queue-&gt;head = temp;\n        queue-&gt;tail = temp;\n    }\n    else {\n        queue-&gt;tail-&gt;next = temp;\n        queue-&gt;tail = temp;\n    }\n\n    return SUCCESS;\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436346843, "post_id": 31288192, "comment_id": 50568361, "body": "thanks. it worked. can i get a tip on the destroy function."}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436347369, "post_id": 31288192, "comment_id": 50568717, "body": "Could you provide your destroy function code just like the good try of  <code>append</code>?:)"}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436347549, "post_id": 31288192, "comment_id": 50568830, "body": "lol ok i will edit it into the original post. its crashing. am not a genius in this field but here is my best try."}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436352711, "post_id": 31288192, "comment_id": 50572125, "body": "Oh, there was another thing. In <code>struct my_queue_public </code>, it is <code>void(*destroy)(MY_QUEUE* phMy_queue);</code> which demands a <code>MY_QUEUE pointer</code> parameter. But in the implementation of <code>void destroy(MY_QUEUE queue)</code>, it was passed in a <code>MY_QUEUE</code> parameter (not a pointer). That&#39;s the reason."}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436413619, "post_id": 31288192, "comment_id": 50604519, "body": "its still crashing. honestly i have no clue why"}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436413737, "post_id": 31288192, "comment_id": 50604572, "body": "you comment  <code>&#47;&#47;queue-&gt;destroy = destroy;</code>, did you enable it? I have tested your code, it shall be OK:)"}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436413900, "post_id": 31288192, "comment_id": 50604610, "body": "yes. visual studio is telling me what is failing. the free(tmp); part. stack view is showing me that tmp has a value in memory. which is weird. shouldn&#39;t it be NULL. and next and data are not defined. how could that be."}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436414717, "post_id": 31288192, "comment_id": 50604844, "body": "I have pasted my code based on your destroy func, you may try again. And remember to change the definition of <code>destroy</code> to keep it consistent. Then call it like <code>q-&gt;destroy(&amp;q);</code>"}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436415238, "post_id": 31288192, "comment_id": 50604971, "body": "that is what am doing."}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436415692, "post_id": 31288192, "comment_id": 50605101, "body": "When the <code>free(tmp)</code> failed, it means the memory might have been corrupted  by some operation before you exec <code>free</code>. So, if it still has problem, you may paste all your code include main( ) function for diagnosis reference if you&#39;d like."}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436416335, "post_id": 31288192, "comment_id": 50605280, "body": "i will actually explain the program to you and i will post it after this. the program basically supposed to calculate how many trips a ferry takes to move cars from the left side to the right side. vice versa. so i have two queues with cars.  i enter how many cars and which side which cars are on and their length and the ferry length. ."}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436416373, "post_id": 31288192, "comment_id": 50605288, "body": "now one by one i store the car lengths in their respective ques. left and right in their own nodes in the list. and i keep tracking how much length left and deleting the nodes. now by the end of the program before the destroy function. i am supposed to have all the nodes. except the Head_ptr node freed. but it which if they werent the program wouldn&#39;t work at all. and the program is working which means that all the nodes but the head_ptr node are deleted basically. the destroy function is basically to delete the head_ptr node and the list if things werent entered correctly there were leftovers"}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436416472, "post_id": 31288192, "comment_id": 50605317, "body": "Ok main is up there with the destroy function"}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436417946, "post_id": 31288192, "comment_id": 50605718, "body": "Wow, a huge project. Firstly, You can write a unit test to make sure that MY_QUEUE data structures works well by a minimal test set includes some operation sequences , e.g. &quot;append 3 nodes -&gt; remove 1 node -&gt;destroy&quot; etc. The <code>append</code>/<code>remove</code> is also memory related. The mistake from them will probably result in <code>free()</code> failure in <code>destroy</code> later. Secondly, after build the infrastructure--MY_QUEQUE, then you can apply it as a tool to your project. Otherwise, you could be confused when there was problem, it is because of data structure or the problem resolving logic itself? Hope it helps."}, {"owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436418754, "post_id": 31288192, "comment_id": 50605987, "body": "i figured out hte problem. am not dereferencing the MY_QUEUE. even though the cast should automatically do it but it all works now."}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "reply_to_user": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "edited": false, "score": 0, "creation_date": 1436419570, "post_id": 31288192, "comment_id": 50606297, "body": "Good to hear that! Yes, we should take care of the casting , dereferencing,  and so on, which is error prone."}], "tags": [], "owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "is_accepted": true, "score": 0, "last_activity_date": 1436414898, "last_edit_date": 1436414898, "creation_date": 1436346559, "answer_id": 31288192, "question_id": 31287818, "link": "https://stackoverflow.com/questions/31287818/linked-list-how-to-tail-insert-without-moving-head-node/31288192#31288192", "title": "Linked List - how to tail insert without moving head node", "body": "<blockquote>\n  <p>thats the problem. am moving head node pointer which i am not\n  supposed to do. but i cant seem to think of an another way to do it.</p>\n</blockquote>\n\n<p>You can use a temporary variable <code>tail</code> to track the link, rather than moving head node,</p>\n\n<pre><code>    Node_ptr tail;\n    if (head-&gt;head == NULL){\n        head-&gt;head = temp;\n    }\n    else{\n        //while(head-&gt;head-&gt;next) {\n        //  head-&gt;head = head-&gt;head-&gt;next;\n        //  }\n        //head-&gt;head-&gt;next = temp;\n        tail = head-&gt;head;\n        while(tail-&gt;next) {\n            tail = tail-&gt;next;\n        }\n        tail-&gt;next = temp;\n    }\n</code></pre>\n\n<p>For the destroy func,</p>\n\n<pre><code>//void destroy(MY_QUEUE queue);\nvoid destroy(MY_QUEQUE *p_queue);//change to this \n                                 //to keep consistent in struct my_queue_public\n\n void destroy(MY_QUEUE *p_queue)\n {\n    Head_ptr head;\n    Node_ptr tmp;\n\n   if(p_queue == NULL){\n     return;\n   }\n\n   if((head = (Head_ptr)*p_queue) == NULL){\n     return;\n   }    \n\n   if (head-&gt;head == NULL) {\n     return;\n   }\n\n   while (head-&gt;head !=NULL){\n      tmp = head-&gt;head;\n      head-&gt;head = head-&gt;head-&gt;next;\n      free(tmp);\n   }\n\n   free(head);\n  } \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4860726, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/370a14e5e3ae15d5b27242d8ec999935?s=128&d=identicon&r=PG&f=1", "display_name": "Byte_Spike", "link": "https://stackoverflow.com/users/4860726/byte-spike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1457, "favorite_count": 0, "accepted_answer_id": 31288192, "answer_count": 2, "score": 0, "last_activity_date": 1436414898, "creation_date": 1436345483, "last_edit_date": 1436347580, "question_id": 31287818, "link": "https://stackoverflow.com/questions/31287818/linked-list-how-to-tail-insert-without-moving-head-node", "title": "Linked List - how to tail insert without moving head node", "body": "<p>So am running into a problem. I know what it is. i just can't figure out a way to solve it with what am allowed to do..</p>\n\n<p>first here is my tail insert function</p>\n\n<pre><code>Status append(MY_QUEUE queue, int item)\n{\n    Node_ptr temp;\n    Head_ptr head = (Head_ptr) queue;\n\n    //create a new node\n\n    temp = (Node_ptr)malloc(sizeof(Node));\n    if (temp == NULL) {\n        printf(\"malloc failed\\n\");\n        return FAILURE;\n    }\n\n    temp-&gt;data = item;\n    temp-&gt;next = NULL;\n    if (head-&gt;head == NULL){\n        head-&gt;head = temp;\n    }\n    else{\n        while(head-&gt;head-&gt;next) {\n            head-&gt;head = head-&gt;head-&gt;next;\n        }\n        head-&gt;head-&gt;next = temp;\n    }\n    return SUCCESS;\n}\n</code></pre>\n\n<p>as you see. its simple. if the head node is null. it adds the new node to head. if not. it keeps moving head until it reaches null and then it adds the node. thats the problem. am moving head node pointer which i am not supposed to do. but i cant seem to think of an another way to do it. since am passing in a MY_QUEUE. i will include the header files and the declarations to understand what these are.</p>\n\n<pre><code>struct node\n{\n    int data;\n    Node_ptr next;\n\n};\n\nstruct head_node;\ntypedef struct head_node Head_node;\ntypedef Head_node *Head_ptr;\n\nstruct head_node\n{\n    struct my_queue_public methods;\n    Node_ptr head;\n};\n\nvoid destroy(MY_QUEUE queue);\nStatus append(MY_QUEUE queue, int item);\nStatus service(MY_QUEUE queue);\nint* front(MY_QUEUE queue);\nBool empty(MY_QUEUE stack);\n\nvoid init_functions(MY_QUEUE queue)\n{\n    //queue-&gt;destroy = destroy;\n    queue-&gt;empty = empty;\n    queue-&gt;service = service ;\n    queue-&gt;append = append;\n    queue-&gt;front = front;\n}\nMY_QUEUE my_queue_init_default(void)\n{\n    Head_ptr head;\n    head = malloc(sizeof(Head_node));\n\n    if (head != NULL)\n    {\n        head-&gt;head = NULL;\n        init_functions((MY_QUEUE)head);\n    }\n    return (MY_QUEUE)head;\n}\n</code></pre>\n\n<p>The insert tail function is the append function. I can't change my parameters or what i return. i simply have to change whats inside the function.</p>\n\n<p>MY_QUEUE is a public version of struct Node.</p>\n\n<p>here is the header file</p>\n\n<pre><code>#include \"status.h\"\nstruct my_queue_public;\ntypedef struct my_queue_public* MY_QUEUE;\n\nstruct my_queue_public\n{\n    void(*destroy)(MY_QUEUE* phMy_queue);\n    Status(*service)(MY_QUEUE hMy_queue);\n    Status(*append)(MY_QUEUE hMy_queue, int item);\n    Bool(*empty)(MY_QUEUE hMy_queue);\n    int* (*front)(MY_QUEUE hMy_queue);\n};\n\nMY_QUEUE my_queue_init_default(void);\n</code></pre>\n\n<p>By the way this is a queue. add at the end. get items from the front. to sum it up the head is moving and i lose the nodes. i know how to avoid it but the only way i know is to change what i pass in. instead of a MY_QUEUE. i'd pass a MY_QUEUE*. is there an another way to do it with what i have</p>\n\n<p>DESTROY FUNCTION</p>\n\n<pre><code>    void destroy(MY_QUEUE queue)\n{\n\n    Head_ptr head = (Head_ptr)queue;\n\n    Node_ptr tmp;\n\n    if (head-&gt;head == NULL) {\n\n        return;\n    }\n\n\n    while (head-&gt;head !=NULL){\n        tmp = head-&gt;head;\n        head-&gt;head = head-&gt;head-&gt;next;\n        free(tmp);\n    }\n\n    head-&gt;head = NULL;\n}\n</code></pre>\n"}, {"tags": ["c++", "ios", "objective-c", "c"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 1070447, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e7db691fc55e4e1169bb358c204b91e1?s=128&d=identicon&r=PG", "display_name": "user1070447", "link": "https://stackoverflow.com/users/1070447/user1070447"}, "edited": false, "score": 0, "creation_date": 1436405651, "post_id": 31288220, "comment_id": 50602640, "body": "Thanks! Follow up question: if it is the case that it can be implemented in this way, why did this user recommend to create an interface, rather than simply doing it the way you said?  <a href=\"http://stackoverflow.com/questions/1061005/calling-objective-c-method-from-c-method\" title=\"calling objective c method from c method\">stackoverflow.com/questions/1061005/&hellip;</a>  What is the point of his/her method?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 147, "user_id": 1070447, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e7db691fc55e4e1169bb358c204b91e1?s=128&d=identicon&r=PG", "display_name": "user1070447", "link": "https://stackoverflow.com/users/1070447/user1070447"}, "edited": false, "score": 0, "creation_date": 1436424171, "post_id": 31288220, "comment_id": 50608399, "body": "The second solution in that answer is the same as this. The first solution provides a C interface rather than a C++ interface, which is good if you&#39;re using C or a language that can interface with C libraries (and many can, these days)."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1436348363, "last_edit_date": 1436348363, "creation_date": 1436346623, "answer_id": 31288220, "question_id": 31287659, "link": "https://stackoverflow.com/questions/31287659/using-an-objective-c-sdk-in-a-c-class/31288220#31288220", "title": "Using an Objective-C SDK in a C++ class", "body": "<p>Define the class in a header and include it in both the Objective-C++ file that defines members of the class and the C++ file that uses the class.</p>\n\n<p>If you need to store Objective-C types, wrap them in an opaque structure.</p>\n\n<p>Illustration:</p>\n\n<p>\"C.h\":</p>\n\n<pre><code>class C\n{\n    public:\n        C();\n        void foo();\n    private:\n        struct Data;\n        Data* m_data;\n};\n</code></pre>\n\n<p>Implementation in Objective-C++:</p>\n\n<pre><code>#include \"C.h\"\n\nstruct C::Data\n{\n    SomeTypeInYourSDK* thing;\n};\n\nC::C()\n{\n    m_data = new Data;\n    m_data-&gt;thing = [SomeTypeInYourSDK createSomehow];\n}\n\nvoid C::foo()\n{\n    [m_data-&gt;thing doSomething];\n}\n</code></pre>\n\n<p>Use in C++:</p>\n\n<pre><code>#include \"C.h\"\n\nvoid bar()\n{\n    C c;\n    c.foo();\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 1070447, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e7db691fc55e4e1169bb358c204b91e1?s=128&d=identicon&r=PG", "display_name": "user1070447", "link": "https://stackoverflow.com/users/1070447/user1070447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 31288220, "answer_count": 1, "score": 1, "last_activity_date": 1436348363, "creation_date": 1436345025, "question_id": 31287659, "link": "https://stackoverflow.com/questions/31287659/using-an-objective-c-sdk-in-a-c-class", "title": "Using an Objective-C SDK in a C++ class", "body": "<p>I have a c++ project that needs to make use of an objective-C SDK. My idea is to create a c++ class in a .mm file which contains calls to the SDK in objective-C syntax. Then I would declare an instance of that class in my existing c++ project (which has .cpp files).</p>\n\n<p>Will that work? From what I gather, a \".mm\" file is an Objective-C++ file, which can make calls to Objective-C functions? But can a cpp file instanciate a class defined in a .mm file?</p>\n"}, {"tags": ["c++", "c", "parsing", "clang"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1436345426, "post_id": 31287605, "comment_id": 50567424, "body": "Maybe the parser assumes that <code>foo</code> hasn&#39;t been declared if the declaration is invalid (because of the unknown return type)? In this case, <code>foo</code> is an undeclared function which takes arbitrary arguments (as with an unprototyped function) and returns an <code>int</code>."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1436345643, "post_id": 31287605, "comment_id": 50567554, "body": "Are you including the definition of <code>my_type</code> in the code you are letting clang parse?"}, {"owner": {"reputation": 51, "user_id": 5039887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2732b6a9594c4c800af21b5a6838c59?s=128&d=identicon&r=PG&f=1", "display_name": "waiwai444", "link": "https://stackoverflow.com/users/5039887/waiwai444"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1436368662, "post_id": 31287605, "comment_id": 50584390, "body": "@MortenJensen: I don&#39;t want to include the definition of my_type. Just want to leave it an unknown type. My point is that, since the parser knows it&#39;s indeed a type, although &quot;unknown&quot;, wouldn&#39;t it be better to leave it as it is?"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 1, "creation_date": 1436369057, "post_id": 31287605, "comment_id": 50584720, "body": "@waiwai444 I see where you are going, but remember the Clang Parser was probably built for parsing building programs out of valid C in the first place, and for static analysis secondly. My guess is it stems from the C standard: <code>The default return value from a function is int. In other words, unless explicitly specified the default return value by compiler would be integer value from function.</code> - So when you&#39;re omitting the definition of <code>my_type</code> it defaults to <code>int</code>."}, {"owner": {"reputation": 51, "user_id": 5039887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2732b6a9594c4c800af21b5a6838c59?s=128&d=identicon&r=PG&f=1", "display_name": "waiwai444", "link": "https://stackoverflow.com/users/5039887/waiwai444"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1436412864, "post_id": 31287605, "comment_id": 50604346, "body": "@MortenJensen: You are right. But I think it&#39;s about the semantics, not syntax. But if clang&#39;s AST is designed like this and there is no way to change this feature, I have no choice but to find other tools to achieve my goal, maybe using lex and yacc to generate my own AST. Thank you!"}, {"owner": {"reputation": 51, "user_id": 5039887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2732b6a9594c4c800af21b5a6838c59?s=128&d=identicon&r=PG&f=1", "display_name": "waiwai444", "link": "https://stackoverflow.com/users/5039887/waiwai444"}, "edited": false, "score": 0, "creation_date": 1436413002, "post_id": 31287605, "comment_id": 50604375, "body": "In fact, all unknown types are replaced by &quot;int&quot;, not only the return type."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1436427290, "post_id": 31287605, "comment_id": 50610279, "body": "@waiwai444 I can recommend Eli Bendersky&#39;s <code>pycparser</code> - check out this related question: <a href=\"http://stackoverflow.com/questions/20250702/build-ast-from-c-code/20251060\" title=\"build ast from c code\">stackoverflow.com/questions/20250702/build-ast-from-c-code/&hellip;</a> in which I&#39;ve given a few recommendations"}], "owner": {"reputation": 51, "user_id": 5039887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2732b6a9594c4c800af21b5a6838c59?s=128&d=identicon&r=PG&f=1", "display_name": "waiwai444", "link": "https://stackoverflow.com/users/5039887/waiwai444"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 605, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1570776580, "creation_date": 1436344869, "last_edit_date": 1436345239, "question_id": 31287605, "link": "https://stackoverflow.com/questions/31287605/clangs-ast-parser-treats-unknown-type-name-as-int", "title": "Clang&#39;s AST parser treats unknown type name as int", "body": "<p>I tried to use clang's ParseAST() and ASTConsumer to extract all c function declarations in a source file, and then output these function declarations into another file.</p>\n\n<p>It's all good unless there is some unknown type name exists. For example,</p>\n\n<pre><code>my_type foo(int x) { /*...*/ }    // \"my_type\" is just a type identifier whose definition is missed in this translation unit.\n</code></pre>\n\n<p>When I use getReturnType() in RecursiveASTVisitor::VisitFunctionDecl(), it will return type \"int\". So my program will output</p>\n\n<pre><code>int foo(int x);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>my_type foo(int x);\n</code></pre>\n\n<p>I'm curious why <code>\"my_type\"</code> will be parsed as of type <code>int</code>.\nWhen parsing this source code, clang will report an error saying error: </p>\n\n<blockquote>\n  <p>unknown type name 'my_type'</p>\n</blockquote>\n\n<p>. So I think clang knows it's a type (unknown type is also a type I think).</p>\n"}, {"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1436345921, "post_id": 31286930, "comment_id": 50567737, "body": "I find it surprising that no one mentioned that you used <code>&#39;</code> instead of <code>&quot;</code> in both the <code>printf</code>s, and the <code>scanf</code>s."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1436346197, "post_id": 31286930, "comment_id": 50567939, "body": "&quot;<i>I mean is it at the position x[0][0] or x[0][1] or some other location?</i>&quot; -- Yes. <code>A</code> at <code>x[0][0]</code> and <code>B</code> at <code>x[0][1]</code> and the NUL-terminator at <code>x[0][2]</code> (automatically written by <code>scanf</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 4036145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emGDL.jpg?s=128&g=1", "display_name": "NightWatcher", "link": "https://stackoverflow.com/users/4036145/nightwatcher"}, "is_accepted": false, "score": 1, "last_activity_date": 1436343327, "creation_date": 1436343327, "answer_id": 31287045, "question_id": 31286930, "link": "https://stackoverflow.com/questions/31286930/how-does-multi-dimensional-array-in-c-work/31287045#31287045", "title": "How does multi dimensional array in C work", "body": "<p>Yes it will get store in x[0][0] and x[0][1] location.</p>\n\n<p>While <code>scanf</code> a string we need to give starting address of <code>character Array's</code> memory location which is in your code is <code>x[i]</code></p>\n"}, {"tags": [], "owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436345764, "last_edit_date": 1436345764, "creation_date": 1436343411, "answer_id": 31287077, "question_id": 31286930, "link": "https://stackoverflow.com/questions/31286930/how-does-multi-dimensional-array-in-c-work/31287077#31287077", "title": "How does multi dimensional array in C work", "body": "<p>In your example, they will get stored at <code>x[0][0]</code> and <code>x[1][0]</code> respectively.\nAlso you might want to change <code>scanf('%s', x[i]);</code> to <code>scanf('%c', x[i]);</code> as you are taking only a character.</p>\n"}, {"comments": [{"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1436344994, "post_id": 31287083, "comment_id": 50567156, "body": "You could mention: <code>char* tab[5]</code> should be <code>char* tab[5];</code> and Not to cast the result of <code>malloc</code>"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1436345155, "post_id": 31287083, "comment_id": 50567261, "body": "Thanks, didn&#39;t see that. Editing right now. However, malloc result should always be cast"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1436346104, "post_id": 31287083, "comment_id": 50567871, "body": "Your code has issues. 1) <a href=\"http://www.stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Don&#39;t cast the result of <code>malloc</code></a> 2) <code>printf</code> and <code>scanf</code> expects a <code>const char*</code> (string literal) as their first argument, not multi-character literals 3)You scan the characters into a <code>char</code> (while <code>%c</code> in the <code>scanf</code> expects a <code>char*</code>)."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1436347506, "post_id": 31287083, "comment_id": 50568809, "body": "Agreed with the last two points yet do not agree with the cast. Though not necessary, casting the result of malloc is better for portability with older versions AND with c++. That is also mentioned in the post you link to."}], "tags": [], "owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "is_accepted": true, "score": -1, "last_activity_date": 1436347368, "last_edit_date": 1436347368, "creation_date": 1436343426, "answer_id": 31287083, "question_id": 31286930, "link": "https://stackoverflow.com/questions/31286930/how-does-multi-dimensional-array-in-c-work/31287083#31287083", "title": "How does multi dimensional array in C work", "body": "<p>The thing is that here you have a two-dimensional array of char meaning that in one memory location you cannot store more than one single character. So it will be stored in position 0 and 1. However I think your approach is not correct.</p>\n\n<p>In your case you either want to store char* so that your array would be something like:</p>\n\n<pre><code>char* tab[5] ;\n</code></pre>\n\n<p>And you'll need to allocate memory for each line with:</p>\n\n<pre><code>tab[i] = (char *) malloc ( 2 * sizeof(char));\n</code></pre>\n\n<p>Or you can keep your array and instead do (if you want to be sure of what's happening in memory):</p>\n\n<pre><code>for (i=0; i&lt;5; i++)\n{\n    printf(\"Enter the first character for x\");\n    scanf(\"%c\", &amp;x[i][0]);\n    printf('Enter the second character for x');\n    scanf(\"%c\", &amp;x[i][1]);\n}\n</code></pre>\n\n<p>Hope this helps</p>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1436346213, "post_id": 31287326, "comment_id": 50567955, "body": "<a href=\"http://stackoverflow.com/questions/31286930/how-does-multi-dimensional-array-in-c-work#comment50567737_31286930\" title=\"how does multi dimensional array in c work%23comment50567737_31286930\">stackoverflow.com/questions/31286930/&hellip;</a>"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1436345926, "last_edit_date": 1436345926, "creation_date": 1436344083, "answer_id": 31287326, "question_id": 31286930, "link": "https://stackoverflow.com/questions/31286930/how-does-multi-dimensional-array-in-c-work/31287326#31287326", "title": "How does multi dimensional array in C work", "body": "<p>A multidimensional array in C is a one-dimensional array elements of which are in turn arrays.</p>\n\n<p>For example if you have an array defined like</p>\n\n<pre><code>char x[5][3];\n</code></pre>\n\n<p>you can rewrite its definition the following way</p>\n\n<pre><code>typedef char T[3];\nT x[5];\n</code></pre>\n\n<p>So now array <code>x</code> looks like a one-dimensional array with type <code>T</code> where <code>T</code> in turn has type <code>char[3]</code></p>\n\n<p>Taking this into account there is no difference between using array <code>x</code> and array <code>y</code> in the program loop.</p>\n\n<pre><code>for ( i = 0; i &lt; 5; i++ )\n{\n    printf('Enter the 2 characters for x');\n    scanf('%s', x[i]);\n\n    printf('Enter number for y');\n    scanf('%d', &amp;y[i]);\n}\n</code></pre>\n\n<p>The both arrays have <code>5</code> elements. The only difference that elements of array <code>x</code> have type <code>char[3]</code> and elements of array <code>y</code> have type <code>int</code>.</p>\n\n<p>Because format specifier <code>%s</code> is used to enter a string in a character array and each element of array <code>x</code> is indeed a character array of type <code>char[3]</code> then each time when the loop iterates each array <code>x[i]</code> gets its own string.\nFor example after entering values to the array it could look for example like it is defined the following way</p>\n\n<pre><code>char x[5][3] =\n{\n   { \"AB\" }, /* x[0] */\n   { \"CD\" }, /* x[1] */\n   { \"EF\" }, /* x[2] */\n   { \"GH\" }, /* x[3] */\n   { \"IJ\" }  /* x[4] */\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 865, "user_id": 4970211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TjH1Z.jpg?s=128&g=1", "display_name": "Valentin Duboscq", "link": "https://stackoverflow.com/users/4970211/valentin-duboscq"}, "is_accepted": false, "score": 0, "last_activity_date": 1437553779, "last_edit_date": 1437553779, "creation_date": 1436345225, "answer_id": 31287721, "question_id": 31286930, "link": "https://stackoverflow.com/questions/31286930/how-does-multi-dimensional-array-in-c-work/31287721#31287721", "title": "How does multi dimensional array in C work", "body": "<p>It's a <strong>pointer</strong> so, If the user enters the string \"AB\", \"AB\" will be allocated in the memory and your first case of your array will points on the first case allocated for the string :</p>\n\n<pre><code>... | 45 | 46 | 47 | 48 | ...\n    ---------------------\n    |  x |  A | B  |  x |\n</code></pre>\n\n<p>x[0][0] will points on case 46 for example.</p>\n"}], "owner": {"reputation": 145, "user_id": 5088738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0c235db61ce23187abfd5fc4a1707b3?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika Ana", "link": "https://stackoverflow.com/users/5088738/anamika-ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 31287083, "answer_count": 5, "score": 2, "last_activity_date": 1437553779, "creation_date": 1436342926, "last_edit_date": 1436346054, "question_id": 31286930, "link": "https://stackoverflow.com/questions/31286930/how-does-multi-dimensional-array-in-c-work", "title": "How does multi dimensional array in C work", "body": "<p>I am creating a C program with tables in it using multi dimensional arrays that is used to store two letters and a number as follows:</p>\n\n<pre><code>int main()\n{\n    char x[5][3];\n    int y[5];\n\n    for (i=0; i&lt;5; i++)\n    {\n        printf('Enter the 2 characters for x');\n        scanf('%s', x[i]);\n\n        printf('Enter number for y');\n        scanf('%d', &amp;y[i]);\n    }\n}\n</code></pre>\n\n<p>What I don't understand here is in the <code>for</code> loop. For example, for the iteration <code>i=0</code>, if the user enters two characters say <code>A</code>,<code>B</code> where do these letters get stored in the memory location of <code>x</code>? I mean is it at the position <code>x[0][0]</code> or <code>x[0][1]</code> or some other location?</p>\n\n<p>I know it might be a silly question but I am really confused here.\nThank you for the help in advance.</p>\n"}, {"tags": ["c", "compiler-errors", "constants", "c-preprocessor"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1436341572, "post_id": 31286446, "comment_id": 50565048, "body": "Your parameter <code>int MAX,</code> - think about what that does when the preprocessor substitutes <code>MAX</code> with <code>15</code>... <code>int 15</code> ??"}, {"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1436341660, "post_id": 31286446, "comment_id": 50565102, "body": "You don&#39;t even need the middle parameter."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 5, "last_activity_date": 1436341594, "creation_date": 1436341594, "answer_id": 31286509, "question_id": 31286446, "link": "https://stackoverflow.com/questions/31286446/c-const-or-define-whats-the-difference-and-why-the-second-report-an-error/31286509#31286509", "title": "C: const or define? What&#39;s the difference and why the second report an error?", "body": "<p>Macros are (mostly) simple textual substitutions so:</p>\n\n<pre><code>#define MAX 15 //line that give problems\nint linearSearch(int v[], int MAX, int valore);\n</code></pre>\n\n<p>will be preprocessed to:</p>\n\n<pre><code>int linearSearch(int v[], int 15, int valore);\n                              ^\n</code></pre>\n\n<p>and of course you cannot have a numerical value for an identifier.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1436343069, "last_edit_date": 1436343069, "creation_date": 1436341864, "answer_id": 31286610, "question_id": 31286446, "link": "https://stackoverflow.com/questions/31286446/c-const-or-define-whats-the-difference-and-why-the-second-report-an-error/31286610#31286610", "title": "C: const or define? What&#39;s the difference and why the second report an error?", "body": "<p>In the function declaration</p>\n\n<pre><code>int linearSearch(int v[], int MAX, int valore);\n</code></pre>\n\n<p>and its definition</p>\n\n<pre><code>int linearSearch(int v[], int MAX, int valore)\n{\n   //...\n}\n</code></pre>\n\n<p>identifier <code>MAX</code> denotes a variable name.</p>\n\n<p>However due to the macro-definition</p>\n\n<pre><code>#define MAX 15 \n</code></pre>\n\n<p>the function declaration and definition look like</p>\n\n<pre><code>int linearSearch(int v[], int 15, int valore);\n\nint linearSearch(int v[], int 15, int valore)\n{\n        int i;\n        for (i=0;i&lt;15;i++)\n        {\n            if(valore==v[i])\n                return i;\n        }\n        return -1;\n\n    }\n</code></pre>\n\n<p>because the preprocessor makes substitutions of all <code>MAX</code> for 15 before the program compilation.</p>\n\n<p>Macto definitions do not have scopes. Thus it is better to use a usual constant declaration. If you would write</p>\n\n<pre><code>const int MAX = 15;\n</code></pre>\n\n<p>then this name <code>MAX</code> and name <code>MAX</code> in the function declaration</p>\n\n<pre><code>int linearSearch(int v[], int MAX, int valore);\n</code></pre>\n\n<p>had different scopes and the code would be compiled successfully.</p>\n\n<p>Take into account that when you define a constant you specify its type that is not necessary the same type as the type of the corresponding integer literal. For example you could define the constant like</p>\n\n<pre><code>const unsigned int MAX = 15;\n</code></pre>\n\n<p>Now compare the result of the following condition when on the one hand there is used the constant defined above and on the other hand the macro definition.</p>\n\n<pre><code>const unsigned int MAX = 15;\n\nif ( MAX &gt; -1 ) puts( \"MAX is greater than -1\" );\nelse puts( \"MAX is less than -1\" );\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#define MAX 15\n\nif ( MAX &gt; -1 ) puts( \"MAX is greater than -1\" );\nelse puts( \"MAX is less than -1\" );\n</code></pre>\n"}], "owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 31286509, "answer_count": 2, "score": 0, "last_activity_date": 1464293355, "creation_date": 1436341424, "last_edit_date": 1464293355, "question_id": 31286446, "link": "https://stackoverflow.com/questions/31286446/c-const-or-define-whats-the-difference-and-why-the-second-report-an-error", "title": "C: const or define? What&#39;s the difference and why the second report an error?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX 15 //line that give problems\n\nint linearSearch(int v[], int MAX, int valore);\n\nint main()\n{\n    int ris, valore, v[]={1,1,1,1,1,1,1,1,1,12,1,1,1,1,1};\n    scanf(\"%d\", &amp;valore);\n    ris = linearSearch(v, MAX, valore);\n    printf(\"%d\", ris);\n    return 0;\n}\n\nint linearSearch(int v[], int MAX, int valore)\n{\n    int i;\n    for (i=0;i&lt;MAX;i++)\n    {\n        if(valore==v[i])\n            return i;\n    }\n    return -1;    \n}\n</code></pre>\n\n<p>Why this code report me error while compiling? And why it run correctly if I substitute the preprocessor directive with</p>\n\n<pre><code>const int MAX = 15;\n</code></pre>\n"}]