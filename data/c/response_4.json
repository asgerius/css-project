[{"tags": ["c"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1423103355, "post_id": 28333872, "comment_id": 45016676, "body": "A few minutes in a debugger would have avoided the need for this question altogether."}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1423094568, "creation_date": 1423094568, "answer_id": 28333906, "question_id": 28333872, "link": "https://stackoverflow.com/questions/28333872/program-not-displaying-anything/28333906#28333906", "title": "Program not displaying anything", "body": "<p>You never use the value returned by <code>create</code>.</p>\n\n<p>So <code>head</code> is still <code>NULL</code> when you pass it to <code>print_nums</code>.</p>\n\n<p>It should be:  <code>head = create(head, x);</code></p>\n"}], "owner": {"reputation": 183, "user_id": 4485106, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000065628978/picture?type=large", "display_name": "Hunter Tipton", "link": "https://stackoverflow.com/users/4485106/hunter-tipton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423094568, "creation_date": 1423094390, "last_edit_date": 1423094566, "question_id": 28333872, "link": "https://stackoverflow.com/questions/28333872/program-not-displaying-anything", "title": "Program not displaying anything", "body": "<p>Whenever I attempt to run this code it will compile fine, but there is no display in the console. It should be printing out all the numbers in the linked list, I don't understand what the issue is.</p>\n\n<p><strong>Header File</strong></p>\n\n<pre><code>#define RAND_MAX 100\n\nstruct num_node{\n    int num;\n    struct num_node* next;\n};\n\n\nstruct num_node *create(struct num_node *list, int num);\nvoid print_nums(struct num_node *list);\n</code></pre>\n\n<p><strong>Function source</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"functions.h\"\n\nstruct num_node *create(struct num_node *list, int x){\n    struct num_node *current;\n\n    if (list == NULL){\n        list = (struct num_node*)malloc(sizeof(struct num_node));\n        list-&gt;num = x;\n        list-&gt;next = NULL;\n        return(list);\n    }\n    else{\n        current = (struct num_node *)malloc(sizeof(struct num_node));\n        current-&gt;num = x;\n        current-&gt;next = list;\n        return(current);\n    }\n} \n\nvoid print_nums(struct num_node *list) {\n\n    struct num_node *current;\n    for (current = list; current != NULL; current = current-&gt;next)\n        printf(\"%d\\n\", current-&gt;num);\n\n}\n</code></pre>\n\n<p><strong>Main</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#include \"functions.h\"\n\nint main(){\n    struct num_node *head = NULL;\n\n    srand(time(NULL));\n\n        for (int i = 1; i &lt;= 25; i++){\n            int x = rand() % 100;\n            create(head, x);\n        }\n\n        print_nums(head);\n\n}\n</code></pre>\n"}, {"tags": ["c", "cmd", "printf", "codeblocks"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1423094374, "post_id": 28333852, "comment_id": 45014520, "body": "run the program from command prompt and put <code>&gt;foo.txt</code> on the end of the commandline.  Or change your program to use <code>fprintf</code> instead of <code>printf</code>.  Or copy-paste from the output window"}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1423094848, "post_id": 28333852, "comment_id": 45014655, "body": "I always find MS Excel to be the easiest way to create a graph.  If you don&#39;t have Access to Excel (sorry pun intended :P), check out LibreOffice or OpenOffice.   There are <b>many</b> free alternatives if that doesn&#39;t suite your needs:  <a href=\"http://en.wikipedia.org/wiki/List_of_information_graphics_software\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/List_of_information_graphics_software</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2548, "user_id": 2400454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iEfZ3.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2400454/jay"}, "is_accepted": false, "score": 2, "last_activity_date": 1423095251, "creation_date": 1423095251, "answer_id": 28334011, "question_id": 28333852, "link": "https://stackoverflow.com/questions/28333852/is-there-a-way-to-get-a-text-file-of-the-cmd-prompt-that-is-all-the-data-that/28334011#28334011", "title": "is there a way to get a text file of the cmd prompt? that is, all the data that printf shows in codeblocks c?", "body": "<p>Why don't you just save them to a file?</p>\n\n<p>Great example of writing to a file:</p>\n\n<pre><code>FILE *f = fopen(\"file.txt\", \"w\");\nif (f == NULL)\n{\n   printf(\"Error opening file!\\n\");\n   exit(1);\n}\n\n /* print some text */\n const char *text = \"Write this to the file\";\n fprintf(f, \"Some text: %s\\n\", text);\n\n/* print integers and floats */\nint i = 1;\nfloat py = 3.1415927;\nfprintf(f, \"Integer: %d, float: %f\\n\", i, py);\n\n/* printing single chatacters */\nchar c = 'A';\nfprintf(f, \"A character: %c\\n\", c);\n\nfclose(f);\n</code></pre>\n\n<p>Another solution is just pipeing the output using <code>&gt; file.txt</code></p>\n"}], "owner": {"reputation": 11, "user_id": 4524926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61eb1d9130f9376dea0c05f2fa528341?s=128&d=identicon&r=PG&f=1", "display_name": "Dani", "link": "https://stackoverflow.com/users/4524926/dani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423095251, "creation_date": 1423094259, "question_id": 28333852, "link": "https://stackoverflow.com/questions/28333852/is-there-a-way-to-get-a-text-file-of-the-cmd-prompt-that-is-all-the-data-that", "title": "is there a way to get a text file of the cmd prompt? that is, all the data that printf shows in codeblocks c?", "body": "<p>I'm currently writing a bunch of calculations in c using codeblocks and printing them off to the cmd prompt using the printf(); function. I am trying to create a graph from the data gathered. Is there a ways to get a hard copy or a text/doc file of all the data I printed out or better yet, is there a way to get all the values on the cmd prompt into a graph?</p>\n"}, {"tags": ["c", "matrix", "strcmp"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423092597, "post_id": 28333529, "comment_id": 45013987, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">Please don&#39;t cast the result of <code>malloc()</code></a>."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1423092691, "post_id": 28333529, "comment_id": 45014011, "body": "<code>malloc(sizeof(char *))</code> - how much memory do you think this is allocating?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1423092713, "post_id": 28333529, "comment_id": 45014021, "body": "Inasmuch as you do not test that the <code>scanf()</code> calls succeed, it is not correct.  Inasmuch as you allocate enough space for one <code>char *</code> for <code>mastermind</code> and then proceed to use it as an array of 7 elements, then: <b>No</b> it is very incorrect."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4526532, "user_type": "registered", "profile_image": "https://graph.facebook.com/676026789173062/picture?type=large", "display_name": "Luiz Meirelles", "link": "https://stackoverflow.com/users/4526532/luiz-meirelles"}, "edited": false, "score": 0, "creation_date": 1423093136, "post_id": 28333630, "comment_id": 45014148, "body": "But if I not user a array of 8 pointers to pointers I can&#39;t access the elements easily later like I&#39;m doing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1, "user_id": 4526532, "user_type": "registered", "profile_image": "https://graph.facebook.com/676026789173062/picture?type=large", "display_name": "Luiz Meirelles", "link": "https://stackoverflow.com/users/4526532/luiz-meirelles"}, "edited": false, "score": 0, "creation_date": 1423093952, "post_id": 28333630, "comment_id": 45014399, "body": "@LuizMeirelles: Increase the initial <code>malloc()</code> to <code>mastermind = (char **)malloc(7 * sizeof(*mastermind));</code> or equivalent, or add more space if you prefer."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1423105858, "last_edit_date": 1423105858, "creation_date": 1423092870, "answer_id": 28333630, "question_id": 28333529, "link": "https://stackoverflow.com/questions/28333529/is-this-correct-type-and-logic-for-matrices/28333630#28333630", "title": "Is this correct, type and logic for matrices?", "body": "<p>These lines:</p>\n\n<pre><code>int i;\nchar **mastermind;\nmastermind=(char **)malloc(sizeof(char *));\nfor(i=0; i&lt;7; i++)\n    mastermind[i]=(char *)malloc(36*sizeof(char));\n</code></pre>\n\n<p>will lead to undefined behavior since you are allocating space for one pointer  but are using it as an array of 7 pointers.</p>\n\n<p>Change the line:</p>\n\n<pre><code>mastermind=(char **)malloc(sizeof(char *));\n</code></pre>\n\n<p>to</p>\n\n<pre><code>mastermind=malloc(sizeof(char *)*7);\n</code></pre>\n\n<p>Still better, use:</p>\n\n<pre><code>mastermind=malloc(sizeof(*matermind)*7);\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Since you know the sizes of arrays, you can avoid use of <code>malloc</code> altogether by using:</p>\n\n<pre><code>char mastermind[7][36];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4526532, "user_type": "registered", "profile_image": "https://graph.facebook.com/676026789173062/picture?type=large", "display_name": "Luiz Meirelles", "link": "https://stackoverflow.com/users/4526532/luiz-meirelles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423105858, "creation_date": 1423092386, "last_edit_date": 1423092854, "question_id": 28333529, "link": "https://stackoverflow.com/questions/28333529/is-this-correct-type-and-logic-for-matrices", "title": "Is this correct, type and logic for matrices?", "body": "<p>I need put a 4 bytes and next 4 bytes in a matrix line. Example:</p>\n\n<blockquote>\n  <p>verd verm azul amar bran pret null</p>\n  \n  <p>verd verm amar azul pret null bran</p>\n  \n  <p>amar verd amar azul null null bran</p>\n  \n  <p>...</p>\n</blockquote>\n\n<p>So the first position mastermind[0][0] returns \"verd\" and next mastermind[0][5] returns \"verm\"</p>\n\n<pre><code>int main(void){\n\n    int i;\n    char **mastermind;\n    mastermind=(char **)malloc(sizeof(char *));\n    for(i=0; i&lt;7; i++)\n        mastermind[i]=(char *)malloc(36*sizeof(char));\n\n    printf(\"Define Password: \\n\\tverd = 0 \\n\\tverm = 1 \\n\\tazul = 2 \\n\\tamar = 3 \\n\\trosa = 4 \\n\\tlila = 5\\n\");\n    scanf(\"%s %s %s %s\", &amp;mastermind[0][0], &amp;mastermind[0][5], &amp;mastermind[0][10], &amp;mastermind[0][15]);\n    printf(\"\\nPassword: %s %s %s %s\\n\", &amp;mastermind[0][0], &amp;mastermind[0][5], &amp;mastermind[0][10], &amp;mastermind[0][15]);\n    printf(\"\\n\");\n    scanf(\"%s %s %s %s\", &amp;mastermind[1][0], &amp;mastermind[1][5], &amp;mastermind[1][10], &amp;mastermind[1][15]);\nreturn 0;\n}\n</code></pre>\n\n<p>The problem is I'm using '&amp;' for access and in some functions like strcmp I can't use, so I'm missing something.</p>\n\n<p>Is this the right way?</p>\n"}, {"tags": ["c", "file", "fgets"], "comments": [{"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 7, "creation_date": 1423090688, "post_id": 28333169, "comment_id": 45013262, "body": "The code you&#39;ve written is not valid C."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1423093415, "post_id": 28333169, "comment_id": 45014215, "body": "<code>char buf[100]; if (fgets(buf, sizeof buf, stdin) != NULL) {</code>"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1423105796, "creation_date": 1423105796, "answer_id": 28335534, "question_id": 28333169, "link": "https://stackoverflow.com/questions/28333169/how-do-i-use-fgets-to-pull-a-line-of-text-out-from-a-file/28335534#28335534", "title": "How do I use fgets() to pull a line of text out from a file?", "body": "<p>For a function call, code needs to pass values, not variable declarations.</p>\n\n<p>Be sure to check the result of <code>fgets()</code> and any parsing performed.</p>\n\n<pre><code>FILE *ifile;\n// add code to open file\nchar buf[100];\n\n// fgets(char 1, int maxlen, FILE input_file)\nwhile (fgets(buf, sizeof buf, ifile) != NULL) { \n  int temp;\n  char scale;\n  if (2 != sscanf(buf, \"%d , %c\", &amp;temp, &amp;scale) {\n    // Oops, bad input\n    break;\n  }\n\n  // Do something with data\n  printf(\"Temperature %d degrees %c\\n\", temp,scale);\n}\n\n// code to close file\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4175839, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/761e822de68407b4accac1fd86bd34dd?s=128&d=identicon&r=PG&f=1", "display_name": "Logan Henry", "link": "https://stackoverflow.com/users/4175839/logan-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1423105796, "creation_date": 1423090599, "last_edit_date": 1423091919, "question_id": 28333169, "link": "https://stackoverflow.com/questions/28333169/how-do-i-use-fgets-to-pull-a-line-of-text-out-from-a-file", "title": "How do I use fgets() to pull a line of text out from a file?", "body": "<p>I'm writing a program that has to pull one line of text from a file and check if the letter C is in said line. I'm trying to use fgets() to pull the text I need from the line, but have so far been completely unable to produce any output.</p>\n\n<p>Here is the code I've tried:</p>\n\n<pre><code>fgets(char 1, int maxlen, FILE input_file)\n</code></pre>\n\n<p>The input file it's pulling from is called <code>input_file</code> and the text within is formatted as follows:</p>\n\n<pre><code>25,F\n32,F\n-40,C\n-20,C\n-20,F\n-40,F\n0,C\n</code></pre>\n\n<p>Can anyone tell me what I've done wrong? </p>\n"}, {"tags": ["c", "bsd", "c-strings"], "comments": [{"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 2, "creation_date": 1423089592, "post_id": 28332854, "comment_id": 45012729, "body": "You mean you can&#39;t find the answer in the <a href=\"https://www.freebsd.org/cgi/man.cgi?query=strlcpy&amp;sektion=3\" rel=\"nofollow noreferrer\">man pages</a>?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1423089639, "post_id": 28332854, "comment_id": 45012756, "body": "From <a href=\"http://stackoverflow.com/a/2115015/434551\">an answer to another SO question</a>: &quot;strlcpy is indeed a true limited-length copying function created for working with C-strings.&quot;. It seems the <code>l</code> in <code>strlcpy</code> stands for <code>limited-length</code>."}, {"owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1423089733, "post_id": 28332854, "comment_id": 45012793, "body": "So it&#39;s purely to denote &#39;length&#39;? I guess as a converse to &#39;number&#39; / &#39;n&#39; (<code>strncpy</code>) and the confusion surrounding that?"}, {"owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "reply_to_user": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1423089811, "post_id": 28332854, "comment_id": 45012842, "body": "@Jeff Mercado, as I said (and had that open while asking) I was unfortunately certain it would be horribly obvious after asking. Thanks though!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423090226, "post_id": 28332854, "comment_id": 45013041, "body": "I&#39;m running ubuntu/linux version 14.04 and strlcpy is not even listed in the man/info pages.  Where are the rest of you finding that function?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423090282, "post_id": 28332854, "comment_id": 45013073, "body": "@user3629249: it is a (classic) BSD extension. (and it makes sense, since the caller already knows the 1st argument , which is returned by the standard <code>strcpy()</code> )"}, {"owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "reply_to_user": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1423090317, "post_id": 28332854, "comment_id": 45013085, "body": "I don&#39;t have any BSD distro either, but if you follow the link @JeffMercado gave above you can see the contents of the subsequent man page."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423090807, "post_id": 28332854, "comment_id": 45013318, "body": "Just about any C programmer came up with their own &quot;fixed version&quot; of strcpy().  First time I saw it I went &quot;this is completely borken&quot; and wrote strfcpy().  f as in &quot;fixed&quot;.  So, erm, l as in &quot;limited&quot;."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1423090909, "post_id": 28332854, "comment_id": 45013372, "body": "Am I the only one around here who thinks <code>strcpy</code> isn&#39;t broken"}], "answers": [{"comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1423093697, "post_id": 28333695, "comment_id": 45014308, "body": "It was a time in history when the reference section in security papers always had [1]  Aleph One paper on buffer overflows and [2] Bugtraq mailing listing link."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 8, "last_activity_date": 1423093246, "creation_date": 1423093246, "answer_id": 28333695, "question_id": 28332854, "link": "https://stackoverflow.com/questions/28332854/what-is-the-l-for-in-strlcpy/28333695#28333695", "title": "What is the &#39;l&#39; for in strlcpy?", "body": "<p><code>strlcpy</code> was introduced at USENIX 1999 by Todd C. Miller and Theo de Raadt (OpenBSD project).</p>\n\n<p>From the Proceedings paper, <a href=\"https://www.usenix.org/legacy/event/usenix99/full_papers/millert/millert.pdf\">strlcpy and strlcat \u2014 Consistent, Safe, String Copy and Concatenation</a>, in the abstract it is written:</p>\n\n<blockquote>\n  <p>The proposed replacement functions, strlcpy() and strlcat(),\n  address these problems by presenting an API designed for safe string copies (see Figure 1 for function prototypes).\n  Both functions guarantee NUL-termination, take as a length parameter the size of the string in bytes, and\n  provide an easy way to detect truncation</p>\n</blockquote>\n\n<p>It is therefore pretty obvious the <code>l</code> stands for <em>length</em>.</p>\n"}], "owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 28333695, "answer_count": 1, "score": 2, "last_activity_date": 1423093246, "creation_date": 1423089285, "question_id": 28332854, "link": "https://stackoverflow.com/questions/28332854/what-is-the-l-for-in-strlcpy", "title": "What is the &#39;l&#39; for in strlcpy?", "body": "<p>What does the 'l' in <code>strlcpy</code> stand for? I'm certain after asking it will be horribly obvious but I can't seem to dredge up a solid answer anywhere. </p>\n"}, {"tags": ["c", "bash", "gcc", "sizeof"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 1, "creation_date": 1423089217, "post_id": 28332806, "comment_id": 45012576, "body": "Just out of curiosity, when would you ever need to know the size of a C type when you&#39;re not already writing &amp; compiling C code?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1423089609, "post_id": 28332806, "comment_id": 45012742, "body": "run it once and output to a file, read that file when you need to know"}], "answers": [{"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423150838, "post_id": 28333116, "comment_id": 45040174, "body": "This doesn&#39;t output the size, it just checks whether it is 8."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 2, "creation_date": 1423202121, "post_id": 28333116, "comment_id": 45061639, "body": "@Matt - it&#39;s up to you to provide a range of values - <code>AC_COMPUTE_INT</code> itself implements a binary search to converge on the correct value."}], "tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": false, "score": 4, "last_activity_date": 1423091191, "last_edit_date": 1423091191, "creation_date": 1423090367, "answer_id": 28333116, "question_id": 28332806, "link": "https://stackoverflow.com/questions/28332806/what-is-the-easiest-way-to-find-the-sizeof-a-type-without-compiling-and-executin/28333116#28333116", "title": "What is the easiest way to find the sizeof a type without compiling and executing code?", "body": "<p>You can use the 'negative array size' trick that <a href=\"http://www.gnu.org/software/autoconf/manual/autoconf.html#Generic-Compiler-Characteristics\" rel=\"nofollow\">autoconf</a> (see: <code>AC_COMPUTE_INT</code>) uses. That way, you don't need to link or execute code. Therefore, it also works when cross compiling. e.g.,</p>\n\n<pre><code>int n[1 - 2 * !(sizeof(double) == 8)];\n</code></pre>\n\n<p>fails to compile if: <code>sizeof(double) != 8</code></p>\n\n<p>The downside is, you might have to pass <code>-DCHECK_SIZE=8</code> or something similar in the command line, since it might take more than one pass to detect an unusual value. So, I'm not sure if this will be any faster <em>in general</em> - but you might be able to take advantage of it.</p>\n\n<p><strong>Edit:</strong> If you are using gcc exclusively, I think @wintermute's comment is probably the best solution.</p>\n"}, {"comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 5, "creation_date": 1423090554, "post_id": 28333126, "comment_id": 45013193, "body": "I like the idea, although you could just do <code>echo __SIZEOF_INT__ | cpp | tail -1</code>."}, {"owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "edited": false, "score": 2, "creation_date": 1423094305, "post_id": 28333126, "comment_id": 45014497, "body": "This wouldn&#39;t be able to calculate the size of arbitrary structures"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "edited": false, "score": 1, "creation_date": 1423094521, "post_id": 28333126, "comment_id": 45014562, "body": "@wojtow I can&#39;t see a use case based on the question that will inquire about arbitrary structure"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 3, "creation_date": 1423095757, "post_id": 28333126, "comment_id": 45014909, "body": "@EugeneSh.: Could just be that you&#39;re curious about the effects of padding, no? Maybe you&#39;d like to estimate memory consumption of some algorithm? Who knows."}, {"owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "edited": false, "score": 0, "creation_date": 1423096157, "post_id": 28333126, "comment_id": 45015007, "body": "@EugeneSh.  true based on original question as long as strictly only the very basic types are needed.   Another minor issue with your approach is that you need to manually translate between the real type names that C uses and the names of the macros  (&quot;void *&quot; = POINTER).  Not a problem if you know what you are looking for, but possibly an added complication if the basic type names passed in from an external source."}, {"owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 5, "creation_date": 1423096501, "post_id": 28333126, "comment_id": 45015088, "body": "@Wintermute   &quot;cpp&quot; isn&#39;t guaranteed to be the same preprocessor used by gcc ... on some systems it is not and potentially could yield different results.    You may want  &quot;gcc -E -&quot; in place of &quot;cpp&quot;"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "edited": false, "score": 0, "creation_date": 1423110836, "post_id": 28333126, "comment_id": 45018598, "body": "@wojtow - just to add, the same strategy works with clang: <code>clang -E -</code>"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 1, "creation_date": 1423150986, "post_id": 28333126, "comment_id": 45040276, "body": "As wojtow pointed out, querying arbitrary structure types would definitely be a plus."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423151193, "post_id": 28333126, "comment_id": 45040410, "body": "@Matt The question is asking about making a script/program callable from command line <code>.&#47;sizeof &lt;type&gt;</code>. How can you pass an arbitrary struct as the <code>&lt;type&gt;</code> here?"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423151760, "post_id": 28333126, "comment_id": 45040832, "body": "In my version of the script, you can do <code>.&#47;sizeof &#39;(struct{int a,b,c,d;char*e[8];}){}&#39;</code>. I haven&#39;t figured out why it needs to be instantiated, though. You can even do <code>.&#47;sizeof 3L</code> or any other literal."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1423151892, "post_id": 28333126, "comment_id": 45040906, "body": "Well, I don&#39;t see a way of doing this without compilation or some smart parsing."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423152068, "post_id": 28333126, "comment_id": 45041031, "body": "I was hoping <code>gcc</code> might have some kind of built-in command line option for this. Another idea I was thinking about was to use <code>gcc -S</code> and figure out from the assembly code what size things are. That way, no linking would be involved (but a lot of parsing would be)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1423153667, "post_id": 28333126, "comment_id": 45042042, "body": "Yo can do it, and it is actually not that complicated. <code>sizeof</code> is a compile-time operator, so if you put in your file something like <code>volatile const s = sizeof(struct arbStruct); </code>, in assembly file you will get something like: <code>_s: \t.long\t16</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1423154025, "post_id": 28333126, "comment_id": 45042243, "body": "But there is a danger, that your program will run on a platform with totally different assembly directives, so this logic will become invalid."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 6, "last_activity_date": 1423090866, "last_edit_date": 1423090866, "creation_date": 1423090385, "answer_id": 28333126, "question_id": 28332806, "link": "https://stackoverflow.com/questions/28332806/what-is-the-easiest-way-to-find-the-sizeof-a-type-without-compiling-and-executin/28333126#28333126", "title": "What is the easiest way to find the sizeof a type without compiling and executing code?", "body": "<p>You can achieve the functionality for standard types using the GCC's preprocessor only. For standard types there are predefined macros:</p>\n\n<pre><code>__SIZEOF_INT__\n__SIZEOF_LONG__\n__SIZEOF_LONG_LONG__\n__SIZEOF_SHORT__\n__SIZEOF_POINTER__\n__SIZEOF_FLOAT__\n__SIZEOF_DOUBLE__\n__SIZEOF_LONG_DOUBLE__\n__SIZEOF_SIZE_T__\n__SIZEOF_WCHAR_T__\n__SIZEOF_WINT_T__\n__SIZEOF_PTRDIFF_T__\n</code></pre>\n\n<p>So, by using code like the following:</p>\n\n<pre><code>#define TYPE_TO_CHECK __SIZEOF_INT__\n#define VAL_TO_STRING(x) #x\n#define V_TO_S(x) VAL_TO_STRING(x)\n#pragma message V_TO_S(TYPE_TO_CHECK)\n#error \"terminate\"\n</code></pre>\n\n<p>you will be able to get the value of <code>__SIZEOF_INT__</code> from the preprocessor itself without even starting the compilation. In your script you can define the <code>TYPE_TO_CHECK</code> (with <code>-D</code>) to whatever you need and pass it to gcc. Of course you will get some junk output, but I believe you can deal with that.</p>\n"}, {"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423150604, "post_id": 28333350, "comment_id": 45040024, "body": "For me, this is not any faster than what I was doing, since it doesn&#39;t eliminate the linking step."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 1, "creation_date": 1423153197, "post_id": 28333350, "comment_id": 45041726, "body": "In case it wasn&#39;t clear, it&#39;s not linking with the standard library that is the bottleneck, it is the invocation of the linker itself (on my system at least). A simple <code>int main() { return 0; }</code> program takes just as long to link."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423154020, "post_id": 28333350, "comment_id": 45042234, "body": "@Matt interesting. what system do you have?  I could extract the return value directly from the unlinked object file, but it would be somewhat fragile."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423155257, "post_id": 28333350, "comment_id": 45043033, "body": "Windows with cygwin in this case."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 1, "creation_date": 1423157088, "post_id": 28333350, "comment_id": 45044257, "body": "@Matt: MinGW is notoriously slow to link. I added a solution which analyzes the assembly output, but I have no idea how robust it is. Good luck."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423164702, "post_id": 28333350, "comment_id": 45048684, "body": "I still think <a href=\"http://stackoverflow.com/questions/28332806/what-is-the-easiest-way-to-find-the-sizeof-a-type-without-compiling-and-executin/28333350?noredirect=1#comment45042042_28333126\">Eugene&#39;s solution in the comments to his answer</a> is better, namely: <code>volatile const s = sizeof(struct arbStruct);</code>, which would output something like <code>_s: .long\t16</code> in the assembly (in my case <code>.comm s, 16, 4</code>)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423164897, "post_id": 28333350, "comment_id": 45048783, "body": "@Matt:Yes, that would be another alternative. It would be harder to detect in the object file. You&#39;d have to try both of them in a lot of compile environments to figure out which one is more robust. Anyway, it&#39;s your question :) Select the answer you prefer."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 3, "last_activity_date": 1423157394, "last_edit_date": 1423157394, "creation_date": 1423091425, "answer_id": 28333350, "question_id": 28332806, "link": "https://stackoverflow.com/questions/28332806/what-is-the-easiest-way-to-find-the-sizeof-a-type-without-compiling-and-executin/28333350#28333350", "title": "What is the easiest way to find the sizeof a type without compiling and executing code?", "body": "<p>Here are three possible solutions.</p>\n\n<p>The first one will work with any type whose size is less than 256. On my system, it takes about 0.04s (since it doesn't need headers or libraries other than the basic runtime). One downside is that it will only do one at a time, because of the small size of the output channel. Another problem is that it doesn't compensate for slow linking on some systems (notably MinGW):</p>\n\n<pre><code>howbig() {\n  gcc -x c - &lt;&lt;&lt;'int main() { return sizeof ('$*'); }' &amp;&amp; ./a.out\n  echo $?\n}\n\n$ time howbig \"struct { char c; union { double d; int i[3];};}\" \n24\n\nreal    0m0.041s\nuser    0m0.031s\nsys     0m0.014s\n\n$ time howbig unsigned long long\n8\n\nreal    0m0.044s\nuser    0m0.035s\nsys     0m0.009s\n</code></pre>\n\n<hr>\n\n<p>If you wanted to be able to do larger types, you could get the size one byte at a time, at the cost of a couple more centiseconds:</p>\n\n<pre><code>howbig2 () \n{ \n    gcc -x c - &lt;&lt;&lt; 'int main(int c,char**v) {\n                      return sizeof ('$*')&gt;&gt;(8*(**++v&amp;3)); }' &amp;&amp;\n    echo $((0x$(printf %02x $(./a.out 3;echo $?) $(./a.out 2;echo $?) \\\n                            $(./a.out 1;echo $?) $(./a.out 0;echo $?)) ))\n}\n\n$ time howbig2 struct '{double d; long long u[12];}([973])'\n101192\n\nreal    0m0.054s\nuser    0m0.036s\nsys     0m0.019s\n</code></pre>\n\n<hr>\n\n<p>If you are compiling for x86, the following will probably work, although I'm not in a position to test it thoroughly on a wide variety of architectures and platforms. It avoids the link step (notoriously slow on MinGW, for example), by analyzing the compiled assembly output. (It would probably be slightly more robust to analyze the compiled object binary, but I fear that binutils on MinGW are also slow.) Even on Ubuntu, it is significantly faster:</p>\n\n<pre><code>howbig3 () { \n  gcc -S -o - -x c - &lt;&lt;&lt; 'int hb(void) { return sizeof ('$*'); }' |\n  awk '$1~/movl/&amp;&amp;$3==\"%eax\"{print substr($2,2,length($2)-2)}'\n}\n\n$ time howbig3 struct '{double d; long long u[12];}([973])'\n101192\n\nreal    0m0.020s\nuser    0m0.017s\nsys     0m0.004s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45514, "user_id": 31945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53d0faa0590f1146851b2a3959d2e95?s=128&d=identicon&r=PG", "display_name": "Artelius", "link": "https://stackoverflow.com/users/31945/artelius"}, "is_accepted": false, "score": 0, "last_activity_date": 1597289151, "creation_date": 1597289151, "answer_id": 63387697, "question_id": 28332806, "link": "https://stackoverflow.com/questions/28332806/what-is-the-easiest-way-to-find-the-sizeof-a-type-without-compiling-and-executin/63387697#63387697", "title": "What is the easiest way to find the sizeof a type without compiling and executing code?", "body": "<h3>Using <code>nm</code> with no code</h3>\n<p>Just make your thing a global variable. <code>nm</code> can report its size.</p>\n<pre><code>// getsize.c\n\nstruct foo {\n    char str[3];\n    short s;     // expect padding galore...\n    int i;\n} my_struct;\n</code></pre>\n<p>Compile but don't link, then use <code>nm</code>:</p>\n<pre><code>$ gcc -c getsize.c\n$ nm getsize.o --format=posix\nmy_struct C 000000000000000c 000000000000000c\n</code></pre>\n<p>Note that the last column is the size (in hex), here is how we can get it:</p>\n<pre><code>$ nm test.o -P | cut -d ' ' -f 4\n000000000000000c\n\n# or in decimal\n$ printf %d 0x`nm test.o -P | cut -d ' ' -f 4`\n12\n</code></pre>\n<p>\u00a0</p>\n<h3>Using <code>objdump</code> with no code</h3>\n<p>If <code>nm</code> doesn't work for some reason, you can store the <em>size itself</em> in a global variable.</p>\n<p>Start with this C file:</p>\n<pre><code>// getsize.c\nstruct foo { char str[3]; short s; int i; };\n\nunsigned long my_sizeof = sizeof(struct foo);\n</code></pre>\n<p>Now we have to find the value of this variable from the object file.</p>\n<pre><code>$ gcc -c sizeof.c\n$ objdump -Sj .data sizeof.o\n\ntest.o:     file format elf64-x86-64\n\n\nDisassembly of section .data:\n\n0000000000000000 &lt;my_sizeof&gt;:\n   0:   0c 00 00 00 00 00 00 00                             ........\n</code></pre>\n<p>Darn, little endian! You could write a script to parse this, but the following solution (assuming GCC extensions) will force it to always be big endian:</p>\n<pre><code>// getsize.c\nstruct foo { char str[3]; short s; int i; };\n\nstruct __attribute__ ((scalar_storage_order(&quot;big-endian&quot;))) {\n    unsigned long v;\n} my_sizeof = { sizeof(struct foo) };\n</code></pre>\n<p>This yields:</p>\n<pre><code>0000000000000000 &lt;my_sizeof&gt;:\n   0:   00 00 00 00 00 00 00 0c                             ........\n</code></pre>\n<p><strong>Watch out!</strong> You can't just strip out all non-hex characters because sometimes the &quot;....&quot; stuff on the right will be valid ASCII. But the first one should always be a <code>.</code>. The following command keeps things between the <code>:</code> and the first <code>.</code>.</p>\n<pre><code>$ gcc -c sizeof.c\n$ objdump -Sj .data sizeof.o |\n\n        sed '$!d                     # keep last line only\n             s/\\s//g                 # remove tabs and spaces\n             s/.*:\\([^.]*\\)\\..*/\\1/' # only keep between : and .'\n\n000000000000000c\n</code></pre>\n"}], "owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1597289151, "creation_date": 1423089086, "last_edit_date": 1438032978, "question_id": 28332806, "link": "https://stackoverflow.com/questions/28332806/what-is-the-easiest-way-to-find-the-sizeof-a-type-without-compiling-and-executin", "title": "What is the easiest way to find the sizeof a type without compiling and executing code?", "body": "<p>I wrote a bash script to determine the size of <code>gcc</code>'s datatypes (e.g. <code>./sizeof int double</code> outputs the respective sizes of <code>int</code> and <code>double</code>) by wrapping each of its arguments in the following <code>P()</code> macro and then compiling and running the code.</p>\n\n<pre><code>#define P(x) printf(\"sizeof(\" #x \") = %u\\n\", (unsigned int)sizeof(x))\n</code></pre>\n\n<p>The problem is that this is relative slow (it takes a whole second!), especially the linking step (since compiling with <code>-c</code> or <code>-S</code> takes virtually no time, and so does running the outputted binary). One second is not really that slow by itself, but if I were to use this script in other scripts, it would add up.</p>\n\n<p>Is there a faster, less roundabout way to find out what sizes <code>gcc</code> uses for datatypes?</p>\n"}, {"tags": ["c", "string", "strcmp"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1423089110, "post_id": 28332788, "comment_id": 45012528, "body": "What makes you think <code>W</code> is greater than <code>e</code>? If in doubt, you can try printing the numeric values of the characters in question."}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1423089161, "post_id": 28332788, "comment_id": 45012548, "body": "See if your library supports strcmpi() or stricmp()."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1423089264, "post_id": 28332788, "comment_id": 45012596, "body": "I don&#39;t see why a misunderstanding requires aggressive downvoting. If this question had been asked 4 years ago, it would have got 100 upvotes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1423089362, "post_id": 28332788, "comment_id": 45012637, "body": "Clearly, you have a misconception on how <code>strcmp()</code> works.  Unless you identify your codeset as <a href=\"http://en.wikipedia.org/wiki/EBCDIC\" rel=\"nofollow noreferrer\">EBCDIC</a> (where <code>a</code> to <code>z</code> are coded as 0x81..0xA9, with gaps, and <code>A</code> to <code>Z</code> as 0xC1..0xE9) , your assumption is wrong."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1423089495, "post_id": 28332788, "comment_id": 45012693, "body": "@BrettHale on one hand, it&#39;s not a bad question per se. On the other hand, reading <code>strcmp</code>&#39;s documentation again would have been enough."}, {"owner": {"reputation": 1120, "user_id": 3199478, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CIAEg.jpg?s=128&g=1", "display_name": "codehitman", "link": "https://stackoverflow.com/users/3199478/codehitman"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423089648, "post_id": 28332788, "comment_id": 45012760, "body": "@Quentin @BrettHale Thanks!! I did read the <code>man</code> pages: <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow noreferrer\">linux.die.net/man/3/strcmp</a> . But it did not mention anything about ASCII so it didn&#39;t strike me the first time. Putting programming aside, I would have come to the conclusion that lowercase are always before uppercase."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423089767, "post_id": 28332788, "comment_id": 45012811, "body": "@codehitman not crystal clear indeed. And <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow noreferrer\">my preferred reference</a> is not <i>that</i> limpid either."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1423108020, "post_id": 28332788, "comment_id": 45017797, "body": "@BrettHale mouse over the downvote button. &quot;This question does not show any research effort&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1423090491, "post_id": 28332811, "comment_id": 45013167, "body": "Strictly, this should be qualified with something like &quot;In most of the common code sets, such as those based on ASCII (which include the ISO 8859-x series of code sets, and Unicode, and many Windows code pages), the capital letters come before the small letters, so <code>&#39;W&#39; &lt; &#39;e&#39;</code> and the return value from <code>strcmp()</code> should be negative (the magnitude of the value is not defined)&quot;.  But that is applying nuances to an acceptable answer.  Note that <a href=\"http://en.wikipedia.org/wiki/EBCDIC\" rel=\"nofollow noreferrer\">EBCDIC</a> is an exception where <code>a</code> to <code>z</code> are coded as 0x81..0xA9, with gaps, and <code>A</code> to <code>Z</code> as 0xC1..0xE9."}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": false, "score": 7, "last_activity_date": 1423089094, "creation_date": 1423089094, "answer_id": 28332811, "question_id": 28332788, "link": "https://stackoverflow.com/questions/28332788/what-is-the-ordering-for-strcmps-return-value/28332811#28332811", "title": "What is the ordering for `strcmp`&#39;s return value?", "body": "<p>Capital letters come before lowercase letters in ASCII, and so <code>'W' &lt; 'e'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 214, "user_id": 4509822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ff889c549b6424ef511c64d342c1e9?s=128&d=identicon&r=PG&f=1", "display_name": "1203_dube", "link": "https://stackoverflow.com/users/4509822/1203-dube"}, "is_accepted": true, "score": 3, "last_activity_date": 1423107791, "creation_date": 1423107791, "answer_id": 28335836, "question_id": 28332788, "link": "https://stackoverflow.com/questions/28332788/what-is-the-ordering-for-strcmps-return-value/28335836#28335836", "title": "What is the ordering for `strcmp`&#39;s return value?", "body": "<p>The return value of strcmp depends on the encoding of the strings being compared.  Per the Posix standard:</p>\n\n<p>From: <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html\" rel=\"nofollow\">http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html</a></p>\n\n<blockquote>\n  <p>The sign of a non-zero return value shall be determined by the sign of the difference between the values of the first pair of bytes (both interpreted as type unsigned char) that differ in the strings being compared.</p>\n</blockquote>\n\n<p>In ASCII (and utf-8), capital letters are represented by lower byte values than lower-case letters.  In particular, 'W' is 0x57, and e is 0x65.  Therefore, you are guaranteed a negative return value.</p>\n"}], "owner": {"reputation": 1120, "user_id": 3199478, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CIAEg.jpg?s=128&g=1", "display_name": "codehitman", "link": "https://stackoverflow.com/users/3199478/codehitman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 28335836, "answer_count": 2, "score": 0, "last_activity_date": 1423107791, "creation_date": 1423089021, "last_edit_date": 1423089854, "question_id": 28332788, "link": "https://stackoverflow.com/questions/28332788/what-is-the-ordering-for-strcmps-return-value", "title": "What is the ordering for `strcmp`&#39;s return value?", "body": "<p>I have a very small amount of code:</p>\n\n<pre><code>int test = strcmp(\"Websecurity\", \"easily\");\nprintf(\"%d\\n\", test);\n</code></pre>\n\n<p>The result is -1. Why? Clearly 'W' is greater than 'e'?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1423089834, "post_id": 28332781, "comment_id": 45012855, "body": "What is special about paragraphs? The line break, or the empty line?"}, {"owner": {"reputation": 33, "user_id": 3595689, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d1cb8a5ccb2253d79c02091690baca27?s=128&d=identicon&r=PG&f=1", "display_name": "user3595689", "link": "https://stackoverflow.com/users/3595689/user3595689"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1423089972, "post_id": 28332781, "comment_id": 45012924, "body": "should be a empty line, sorry"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1423090044, "post_id": 28332781, "comment_id": 45012959, "body": "Then I guess you&#39;re going to have to test for <code>&#39;\\n&#39;&#39;\\n&#39;</code>, two newlines immediately after each other."}, {"owner": {"reputation": 33, "user_id": 3595689, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d1cb8a5ccb2253d79c02091690baca27?s=128&d=identicon&r=PG&f=1", "display_name": "user3595689", "link": "https://stackoverflow.com/users/3595689/user3595689"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1423090140, "post_id": 28332781, "comment_id": 45013000, "body": "yes, but still no idea, how to recognize it and split the content :("}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1423090348, "post_id": 28332781, "comment_id": 45013100, "body": "Really? How about, in your <code>fgetc()</code> loop: <code>If (ch == &#39;\\n&#39;) if ((ch = fgetc()) == &#39;\\n&#39; ) &#47;*change output FILE* to next file*&#47; else putchar(&#39;\\n&#39;);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423090705, "post_id": 28332781, "comment_id": 45013269, "body": "what criteria are you planning to use for recognition of a paragraph break?  What criteria are you planning to use for the generation each successive (including the first) output file name?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423090867, "post_id": 28332781, "comment_id": 45013347, "body": "use a two state machine implementation I.E. initial state is first state.   if char read is &#39;\\n&#39; and in first state then: transition to second state.  if char read is not &#39;\\n&#39; then transition to first state.  If char read is &#39;\\n&#39; and in second state then:handle new paragraph (no state change)  the final no state change will handle multiple blank lines giving multiple empty output files"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1423106333, "post_id": 28332781, "comment_id": 45017396, "body": "Change <code>char ch</code> --&gt; <code>int ch</code>.  <code>fgetc()</code> returns an <code>int</code> with maybe 256 different <code>unsigned char</code> values and <code>EOF</code>.  If code saves one of  257  into <code>char</code>, which has 256 different values, something will not compare correctly."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 3595689, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d1cb8a5ccb2253d79c02091690baca27?s=128&d=identicon&r=PG&f=1", "display_name": "user3595689", "link": "https://stackoverflow.com/users/3595689/user3595689"}, "is_accepted": true, "score": 0, "last_activity_date": 1425283102, "last_edit_date": 1425283102, "creation_date": 1423393365, "answer_id": 28393189, "question_id": 28332781, "link": "https://stackoverflow.com/questions/28332781/how-to-read-file-and-write-into-different-files-according-to-different-paragraph/28393189#28393189", "title": "How to read file and write into different files according to different paragraphs", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    setvbuf(stdout, NULL, _IONBF, 0);\n    setvbuf(stderr, NULL, _IONBF, 0);\n    char ch, file_name[10];\n\n    FILE *fp;\n    FILE *fa;\n    FILE *fc;\n    FILE *fd;\n    FILE *fe;\n    FILE *ff;\n    printf(\"enter the name of file\\n\");\n    gets(file_name);\n    fa=fopen(\"write0.txt\",\"w\");\n    fp=fopen(file_name,\"r\");\n    fc=fopen(\"write1.txt\",\"w\");\n    fd=fopen(\"write2.txt\",\"w\");\n    fe=fopen(\"write3.txt\",\"w\");\n    ff=fopen(\"write4.txt\",\"w\");\n    if(fp==NULL)\n    {\n        perror(\"error while opening the file. \\n\");\n        exit(1);\n    }\n\n    printf(\"the contents of %s file are :\\n\", file_name);\n    while((ch=fgetc(fp))!=EOF){\n        printf(\"%c\",ch);\n        fprintf(fa,\"%c\",ch);\n        if(ch=='\\n'){\n            if((ch=fgetc(fp))=='\\n'){\n                        goto a;\n            }\n                    }\n    }\n    a:\n\n    while((ch=fgetc(fp))!=EOF){\n            printf(\"%c\",ch);\n            fprintf(fc,\"%c\",ch);\n            if(ch=='\\n'){\n                if((ch=fgetc(fp))=='\\n'){\n                            goto b;\n                }\n            }\n        }\n        b:\n        while((ch=fgetc(fp))!=EOF){\n            printf(\"%c\",ch);\n            fprintf(fd,\"%c\",ch);\n            if(ch=='\\n'){\n                    if((ch=fgetc(fp))=='\\n'){\n                         goto c;\n                            }\n            }\n        }\n\n        c:\n\n        while((ch=fgetc(fp))!=EOF){\n                    printf(\"%c\",ch);\n                    fprintf(fe,\"%c\",ch);\n                    if(ch=='\\n'){\n                            if((ch=fgetc(fp))=='\\n'){\n                                 goto d;\n                                    }\n                    }\n                }\n\n         d:\n         while((ch=fgetc(fp))!=EOF){\n                    printf(\"%c\",ch);\n                    fprintf(ff,\"%c\",ch);\n\n                }\n\n    fclose(fa);\n    fclose(fp);\n    fclose(fc);\n    fclose(fd);\n    fclose(fe);\n    fclose(ff);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3595689, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d1cb8a5ccb2253d79c02091690baca27?s=128&d=identicon&r=PG&f=1", "display_name": "user3595689", "link": "https://stackoverflow.com/users/3595689/user3595689"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 28393189, "answer_count": 1, "score": 0, "last_activity_date": 1522736598, "creation_date": 1423088996, "last_edit_date": 1522736598, "question_id": 28332781, "link": "https://stackoverflow.com/questions/28332781/how-to-read-file-and-write-into-different-files-according-to-different-paragraph", "title": "How to read file and write into different files according to different paragraphs", "body": "<p>my original code is used for reading and copying one file into another (the content contains several paragraphs and each paragraph is separated by a line break ). But now I need to read the file and write it into several different files(each file contains just one paragraph). But I don't know how to do it, hope anyone can give a favor.\nthe original code is shown below</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(void) {\nsetvbuf(stdout, NULL, _IONBF, 0);\nsetvbuf(stderr, NULL, _IONBF, 0);\nchar ch, file_name[10];\n\nFILE *fp;\nFILE *fa;\n\nprintf(\"enter the name of file\\n\");\ngets(file_name);\nfa=fopen(\"write.txt\",\"w\");\nfp=fopen(file_name,\"r\");\n\nif(fp==NULL)\n{\n    perror(\"error while opening the file. \\n\");\n    exit(1);\n}\n\nprintf(\"the contents of %s file are :\\n\", file_name);\nwhile((ch=fgetc(fp))!=EOF){\n    printf(\"%c\",ch);\n    fprintf(fa,\"%c\",ch);\n\n}\n\n\n\nfclose(fa);\nfclose(fp);\nreturn 0;\n</code></pre>\n\n<p>} </p>\n"}, {"tags": ["c", "segmentation-fault", "quicksort"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1423089028, "post_id": 28332755, "comment_id": 45012489, "body": "run it under a debugger - you didnt say what platform. if lihux you need gdb"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1423089087, "post_id": 28332755, "comment_id": 45012518, "body": "<code>for (current=left; current; current=current-&gt;next) {     }  current-&gt;next = right;</code> : <code>(NULL)-&gt;next=right</code>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1423089095, "post_id": 28332755, "comment_id": 45012523, "body": "<code>left = (struct mynode *)malloc(sizeof(struct mynode));</code> why do you allocate two nodes here? Also the malloc()d objects are uninitialised."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423090586, "post_id": 28332755, "comment_id": 45013208, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">Please don&#39;t cast the result of <code>malloc()</code></a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423091324, "post_id": 28332755, "comment_id": 45013533, "body": "qsort normally does not need any malloc operations, unless one malloc to be used during the swapping of data entries..  it does need a comparison function, and several passed in parameters that indicate things like length of each entry, how many entries, address of the data to sort, etc.  the code is implementing a recursive qsort.  This will be slower, take more memory, and be orders of magnitude more difficult to debug than a non recursive implementation."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423091618, "post_id": 28332755, "comment_id": 45013643, "body": "if you use a debugger, then when the the seg fault event occurs, you can display the stack chain to determine exactly where the seg fault occurred and the current state of the pointers, etc when the seg fault occurred."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1423103459, "post_id": 28332755, "comment_id": 45016703, "body": "<code>gcc -Wall -Werror -g main.c &amp;&amp; gdb .&#47;a.out</code>, then <code>c</code>"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423103505, "post_id": 28332755, "comment_id": 45016715, "body": "@Quentin I sometimes wonder if you&#39;re the dont-cast-malloc bot :-)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1423103771, "post_id": 28332755, "comment_id": 45016768, "body": "@JonathonReinhart there should definitely be one. Or we need an army."}], "owner": {"reputation": 1, "user_id": 4530627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b91850f0977781b4685d46d923eff55?s=128&d=identicon&r=PG&f=1", "display_name": "dohertyj08", "link": "https://stackoverflow.com/users/4530627/dohertyj08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423091709, "creation_date": 1423088897, "last_edit_date": 1423091709, "question_id": 28332755, "link": "https://stackoverflow.com/questions/28332755/unable-to-find-where-segmentation-fault-occurs", "title": "Unable to Find Where Segmentation Fault Occurs", "body": "<p>For a class I have to use a recursive function to quicksort a linked list. This is on Lunix. This is my quicksort function, but it is causing a Segmentation fault. After some googling that means I have a pointer pointing to something it isn't allowed to, but I am not sure what I am doing wrong. I am not a new programmer, but I just started C a month ago so pointers are still a little confusing to me. Here is the function:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"node.h\"\n\n//quicksort method\n//takes one node pointer and recursively sorts in ascending order, returning the head node\nstruct mynode* quicksort(struct mynode *head)\n{\n\nint pivot = head-&gt;value;\nstruct mynode *current, *left, *right, *l_current, *r_current;\nleft = (struct mynode *)malloc(sizeof(struct mynode));\nright = (struct mynode *)malloc(sizeof(struct mynode));\nl_current = left;\nr_current = right;\n\nfor (current=head; current; current=current-&gt;next) {\n    if (current-&gt;value &lt; pivot) {\n        l_current-&gt;value = current-&gt;value;\n        l_current-&gt;next = (struct mynode *)malloc(sizeof(struct mynode));\n        l_current = l_current-&gt;next;\n    } else {\n        r_current-&gt;value = current-&gt;value;\n        r_current-&gt;next = (struct mynode *)malloc(sizeof(struct mynode));\n        r_current = r_current-&gt;next;\n    }\n}\n\nleft = quicksort(left);\nright = quicksort(right);\n\nfor (current=left; current; current=current-&gt;next) {    \n}\n\ncurrent-&gt;next = right;\nreturn left;\n}\n</code></pre>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 115119, "user_id": 1053, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3f38c0e0cc4a1ca4656bfd8c78a581f2?s=128&d=identicon&r=PG", "display_name": "Ed S.", "link": "https://stackoverflow.com/users/1053/ed-s"}, "edited": false, "score": 1, "creation_date": 1423090817, "post_id": 28332929, "comment_id": 45013327, "body": "That is an unnecessarily cryptic way of initializing an array.  I was about to type &quot;because you&#39;re not initializing anything, you&#39;re printing uninitialized values&quot;... and then I looked at your post loop expression.  I am relatively experienced in C.  If you confused me for even a second with what should be trivial code, something is wrong."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423091930, "post_id": 28332929, "comment_id": 45013750, "body": "the code is (incorrectly) using a &#39;side effect&#39; regarding the value of &#39;i&#39;.  In general, side effects should not be used in controlling variables.  And the printf will be executed before the third parameter of the for loop is executed."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user406273"}, "edited": false, "score": 0, "creation_date": 1423088991, "post_id": 28332930, "comment_id": 45012741, "body": "Oh, forgot... Thanks."}], "tags": [], "owner": {"reputation": 10915, "user_id": 49849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584233a4e657924299359539579b006a?s=128&d=identicon&r=PG&f=1", "display_name": "user1686", "link": "https://stackoverflow.com/users/49849/user1686"}, "is_accepted": false, "score": 5, "last_activity_date": 1423088922, "creation_date": 1423088922, "answer_id": 28332930, "question_id": 28332929, "link": "https://stackoverflow.com/questions/28332929/cs-for-loops-arguments/28332930#28332930", "title": "C&#39;s For loop&#39;s arguments", "body": "<p>The initialization works fine; you're just printing the cell <em>before</em> initializing it. Remember that the loop increment is done <em>after</em> each iteration. If you unroll the loop, you have:</p>\n\n<pre><code>i = 0;          /* i is now 0  */\nprint(t[i]);    /* prints t[0] */\nt[i++] = i/4;   /* sets t[0]   */\n                /* i is now 1  */\nprint(t[i]);    /* prints t[1] */\nt[i++] = i/4;   /* sets t[1]   */\n                /* i is now 2  */\nprint(t[i]);    /* prints t[1] */\n/* etc. */\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423093439, "post_id": 28333154, "comment_id": 45014222, "body": "Have you tested it? I have, and it works as expected."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423096475, "post_id": 28333154, "comment_id": 45015085, "body": "In the <code>while</code> version you can&#39;t have <code>i++</code> and <code>i%4</code> within the same expression like that either (sorry, I should have picked up on this earlier); the loop body will have to be <code>{ t[i] = i%4; ++i; }</code>."}], "tags": [], "owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "is_accepted": false, "score": 2, "last_activity_date": 1423096739, "last_edit_date": 1423096739, "creation_date": 1423090525, "answer_id": 28333154, "question_id": 28332929, "link": "https://stackoverflow.com/questions/28332929/cs-for-loops-arguments/28333154#28333154", "title": "C&#39;s For loop&#39;s arguments", "body": "<p>I do not understand what you are trying to accomplish, but please let me show you a similar piece of code, first.</p>\n\n<pre><code>int main(void) {\nint t[16];\nint i;\n//edited the code; providing standard way to do the task\nfor (i = 0; i&lt;=15; i++)\n{\n    t[i]=i/4;\n    printf(\"%d \\n\", t[i]);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The while loop should be written that way:</p>\n\n<pre><code>int i = 0;\nwhile (i&lt;=15){\n    t[i] = i%4;\n    i++;\n}\n</code></pre>\n\n<p>Which means <em>set <code>t[i]</code> equal to <code>i%4</code> and then increment <code>i</code></em>.</p>\n\n<p>Since you are a beginner, I've updated the for loop and it now provides a standard way to do your task. It's better to have a simple increment on the third for loop command; do the rest of the job inside the for loop, as described above.</p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423092103, "post_id": 28333291, "comment_id": 45013824, "body": "this is how that line: &#39;for(i = 0; i&lt;=15; t[++i] = i%4);&#39; should be written: &#39;for(i = 0; i&lt;=15; i++) {t[i] = i%4);}&#39;  In other words, do not mix the actual code with the loop control"}, {"owner": {"reputation": 47, "user_id": 4530709, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32bd5f38d43f751120562ac59af3c7bf?s=128&d=identicon&r=PG&f=1", "display_name": "WIlopu", "link": "https://stackoverflow.com/users/4530709/wilopu"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423092645, "post_id": 28333291, "comment_id": 45014000, "body": "Huh, yes. But it doesn&#39;t hurt to know where that behavior stems from. In my opinion, the incrementation operands don&#39;t work in the &quot;for&quot; statement&#39;s control instructions the same way they do elsewhere, because when I also do this &#39;for (i = 0; i&lt;=15; t[i++]=i/4);&#39; my 16-cel-long array&#39;s last value ends up being 4, when the loop is supposed to stop at 15. So in theory, it should be t[15] = 3, then i = i+1=16."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423093936, "post_id": 28333291, "comment_id": 45014391, "body": "You access out of bounds of the array on the last iteration (when <code>i</code> is <code>15</code>, <code>++i</code> takes it to <code>16</code> and then you write to <code>t[16]</code>). This causes undefined behaviour.  The incrementation operators do work the same in the control instructions as they do elsewhere; if your loop does not have any <code>break</code> or <code>continue</code> statements then <code>for(a;b;c) d;</code> is the same as <code>a; while(b) { d; c; }</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423093997, "post_id": 28333291, "comment_id": 45014407, "body": "Is &quot;Wllopu&quot; the same as the person asking the question?"}, {"owner": {"reputation": 47, "user_id": 4530709, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32bd5f38d43f751120562ac59af3c7bf?s=128&d=identicon&r=PG&f=1", "display_name": "WIlopu", "link": "https://stackoverflow.com/users/4530709/wilopu"}, "edited": false, "score": 0, "creation_date": 1423095423, "post_id": 28333291, "comment_id": 45014813, "body": "Yes. I had to create an account to post on SO. And since I&#39;ll probably make a big use of it eventually, so why not. Thanks, anyway. But what about this case? &#39;for (i = 0; i&lt;=15; t[i++]=i/4);&#39; in my 16-cel-long array whose last value ends up being 4, when the loop is supposed to stop at 15. So in theory, it should be t[15] = 3, then i = i+1=16"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423096238, "post_id": 28333291, "comment_id": 45015027, "body": "@WIlopu lol can&#39;t believe nobody picked up on that yet (including myself), will post answer"}], "tags": [], "owner": {"reputation": 47, "user_id": 4530709, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32bd5f38d43f751120562ac59af3c7bf?s=128&d=identicon&r=PG&f=1", "display_name": "WIlopu", "link": "https://stackoverflow.com/users/4530709/wilopu"}, "is_accepted": false, "score": 1, "last_activity_date": 1423091147, "creation_date": 1423091147, "answer_id": 28333291, "question_id": 28332929, "link": "https://stackoverflow.com/questions/28332929/cs-for-loops-arguments/28333291#28333291", "title": "C&#39;s For loop&#39;s arguments", "body": "<p>@naltipar: Yeah, I just forgot to initialize the first cel, just like grawity pointed out. Actually, the version I wrote for myself was with i++ but even then, since the third expression is executed after each loop, it sent out the same result. But whatever, it is fixed now.</p>\n\n<p>However, I've got another problem which I'm sure I'm missing on but still can't figure it out:</p>\n\n<pre><code>int i = 0;\nwhile (i&lt;=15)\n    t[++i] = i%4;\n</code></pre>\n\n<p>This was first:</p>\n\n<pre><code>for(i = 0; i&lt;=15; t[++i] = i%4);\n</code></pre>\n\n<p>but it resulted with an infinite loop. So in order to make sure that's not a problem specific to for, I switched to while andthe same thing still happens. That being said, it doesn't occur if i replace ++i by i++. I unrolled the whole loop and everything seems just fine...</p>\n\n<p>I'm a beginner, by the way, in case you were wondering.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1423096338, "last_edit_date": 1495542656, "creation_date": 1423096338, "answer_id": 28334196, "question_id": 28332929, "link": "https://stackoverflow.com/questions/28332929/cs-for-loops-arguments/28334196#28334196", "title": "C&#39;s For loop&#39;s arguments", "body": "<p>As well as the off-by-one errors with the loop begin/end that have been mentioned in other posts, this code:</p>\n\n<pre><code>t[i++]=i/4\n</code></pre>\n\n<p>causes undefined behaviour because <code>i</code> is read and written without a sequence point. \"Undefined behaviour\" means anything can happen: the value could be <code>3</code>, or <code>4</code>, or anything else, or the program could crash, etc.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior\">See this thread</a> for more in-depth discussion, and welcome to C..:)</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "is_accepted": false, "score": 0, "last_activity_date": 1423096542, "creation_date": 1423096542, "answer_id": 28334231, "question_id": 28332929, "link": "https://stackoverflow.com/questions/28332929/cs-for-loops-arguments/28334231#28334231", "title": "C&#39;s For loop&#39;s arguments", "body": "<p>A clearer way to write this would be much less error-prone:</p>\n\n<pre><code>for (i = 0; i &lt; 16; ++i)\n  printf (\"%d\\n\", (t[i] = i % 4));\n</code></pre>\n\n<p>Personally I'd code something that way, but I'd never recommend it. Moreover, I don't really see much benefit in condensing statements like that, especially in the most important category: execution time. It is perhaps more difficult to optimize, so performance could actually degrade when compared to simply using:</p>\n\n<pre><code>for (i = 0; i &lt; 16; ++i)\n  {\n    t[i] = i % 4;\n    printf (\"%d\\n\", t[i]);\n  }\n</code></pre>\n\n<p>Even if it is you reading your own code, you make it difficult for your future self to understand. KISS (Keep It Simple, Stupid), and you'll find code is easier to write now and just as easy to modify later if you need to.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1423089608, "question_id": 873790}, "owner": {"user_type": "does_not_exist", "display_name": "user406273"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1423096739, "creation_date": 1423088182, "question_id": 28332929, "link": "https://stackoverflow.com/questions/28332929/cs-for-loops-arguments", "title": "C&#39;s For loop&#39;s arguments", "body": "<p>I want to initialize an 16-cel-long array with 0, 1, 2 and 3 by blocks of four cels. So here is my first attempt at this:</p>\n\n<pre><code>int main(void) {\nint t[16];\nint i;\nfor (i = 0; i&lt;=15; t[i++]=i/4)\n{\n    printf(\"%d \\n\", t[i]);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>However, <a href=\"http://i.imgur.com/cDHVAcQ.png\" rel=\"nofollow\">here</a> is what I get. I know I can do it differently by just getting the affectation into the for loop, but why does this not work?</p>\n\n<p>EDIT: Please do note that the printf only serves to check what the loop did put in the array.</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1423086958, "post_id": 28332174, "comment_id": 45011531, "body": "Just curious, why do you need this?"}, {"owner": {"reputation": 26538, "user_id": 773690, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/43b39b50295b675199c4d037321619ae?s=128&d=identicon&r=PG", "display_name": "iblue", "link": "https://stackoverflow.com/users/773690/iblue"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1423087839, "post_id": 28332174, "comment_id": 45011962, "body": "I&#39;m trying to create lamba expressions using preprocessor macros. When passing an argument, I need to know if it&#39;s an lvalue (Then I create a pointer) or not (then I just pass the value). See <a href=\"http://stackoverflow.com/a/28332447/773690\">stackoverflow.com/a/28332447/773690</a>"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 1, "creation_date": 1423088277, "post_id": 28332174, "comment_id": 45012167, "body": "Why not just use <code>C++11</code> lambdas?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 2, "creation_date": 1423088863, "post_id": 28332174, "comment_id": 45012423, "body": "@RPGillespie and ruin the fun ? <b>No</b>."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 11, "last_activity_date": 1423088238, "last_edit_date": 1423088238, "creation_date": 1423086903, "answer_id": 28332234, "question_id": 28332174, "link": "https://stackoverflow.com/questions/28332174/check-if-an-expression-is-an-lvalue-with-the-preprocessor/28332234#28332234", "title": "Check if an expression is an lvalue with the preprocessor", "body": "<p>No.</p>\n\n<p>Because the C preprocessor has no clue what an lvalue is, or any other C construct for that matter. That's the compiler's job.</p>\n\n<p>Were you in C++ you could use a type trait, but in C I'm afraid you're out of luck.</p>\n"}], "owner": {"reputation": 26538, "user_id": 773690, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/43b39b50295b675199c4d037321619ae?s=128&d=identicon&r=PG", "display_name": "iblue", "link": "https://stackoverflow.com/users/773690/iblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "accepted_answer_id": 28332234, "answer_count": 1, "score": 1, "last_activity_date": 1423088238, "creation_date": 1423086677, "question_id": 28332174, "link": "https://stackoverflow.com/questions/28332174/check-if-an-expression-is-an-lvalue-with-the-preprocessor", "title": "Check if an expression is an lvalue with the preprocessor", "body": "<p>Is there a macro which checks if an expression is a <code>lvalue</code> (<a href=\"http://en.wikipedia.org/wiki/Value_(computer_science)#lrvalue\" rel=\"nofollow\">meaning I can do <code>&amp;expression</code></a>) using the C preprocessor?</p>\n\n<p><em>Example:</em> If there is some <code>int a;</code> and I call <code>IS_LVALUE(a)</code> it should evaluate to 1, while <code>IS_LVALUE(5)</code> should evaluate to 0, so I can do <code>#if IS_LVALUE(...) == 1</code></p>\n"}, {"tags": ["c", "netbeans", "printf"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1423086955, "post_id": 28332100, "comment_id": 45011530, "body": "Unsure for mingw, but when using Java, the <i>output</i> window is where the interactions (output and input) take place."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423087253, "post_id": 28332100, "comment_id": 45011679, "body": "Yes, have a look at the Output window and see if there is any error."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423088756, "post_id": 28332100, "comment_id": 45012387, "body": "the dimensions must be positive values, so suggest using unsigned int for variable definitions and %u for the scanf()s.  suggest calling fflush(stdout); after each call to printf().  Use short while loops to force the inputs to be &gt; 0 otherwise the weight calculation will output 0.  check the returned value from the calls to scanf() to assure the input/conversion operation was successful"}, {"owner": {"reputation": 11444, "user_id": 1322642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ee18828aaa497103188aadbf27cf81?s=128&d=identicon&r=PG", "display_name": "moskito-x", "link": "https://stackoverflow.com/users/1322642/moskito-x"}, "edited": false, "score": 1, "creation_date": 1423089954, "post_id": 28332100, "comment_id": 45012916, "body": "You can look <a href=\"http://stackoverflow.com/a/27554843/1322642\">here</a> . Maybe it&#39;s the reason."}, {"owner": {"reputation": 1577, "user_id": 2364123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxJVV.jpg?s=128&g=1", "display_name": "funghorn", "link": "https://stackoverflow.com/users/2364123/funghorn"}, "reply_to_user": {"reputation": 11444, "user_id": 1322642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ee18828aaa497103188aadbf27cf81?s=128&d=identicon&r=PG", "display_name": "moskito-x", "link": "https://stackoverflow.com/users/1322642/moskito-x"}, "edited": false, "score": 0, "creation_date": 1423090754, "post_id": 28332100, "comment_id": 45013294, "body": "@moskito-x yes, that solved the problem entirely, gratitude. One last thing: should I use external terminal for all the programs written in C or just those ones with scanf() statement in them?"}, {"owner": {"reputation": 11444, "user_id": 1322642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ee18828aaa497103188aadbf27cf81?s=128&d=identicon&r=PG", "display_name": "moskito-x", "link": "https://stackoverflow.com/users/1322642/moskito-x"}, "edited": false, "score": 1, "creation_date": 1423090943, "post_id": 28332100, "comment_id": 45013387, "body": "It&#39; easier to use it for all C Programs."}, {"owner": {"reputation": 11444, "user_id": 1322642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ee18828aaa497103188aadbf27cf81?s=128&d=identicon&r=PG", "display_name": "moskito-x", "link": "https://stackoverflow.com/users/1322642/moskito-x"}, "edited": false, "score": 1, "creation_date": 1423091313, "post_id": 28332100, "comment_id": 45013527, "body": "BTW , if you use <code>External Terminal</code> you don&#39;t need <code>fflush()</code> or <code>&#39;\\n&#39;</code> ."}], "answers": [{"comments": [{"owner": {"reputation": 1577, "user_id": 2364123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxJVV.jpg?s=128&g=1", "display_name": "funghorn", "link": "https://stackoverflow.com/users/2364123/funghorn"}, "edited": false, "score": 0, "creation_date": 1423088936, "post_id": 28332442, "comment_id": 45012453, "body": "Okay, so it worked, I wrote <code>fflush(stdout)</code> to all 3 instances of input and a line: <code>Enter height of box: </code> appeared in the output window. But when I press any number to input a value, it doesn&#39;t work, nothing appears. When I press Enter, the next line appears and after the third line the program stops, failing to accept any input."}], "tags": [], "owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "is_accepted": true, "score": 0, "last_activity_date": 1423089547, "last_edit_date": 1423089547, "creation_date": 1423087778, "answer_id": 28332442, "question_id": 28332100, "link": "https://stackoverflow.com/questions/28332100/no-way-to-input-data-when-the-program-is-running-in-netbeans/28332442#28332442", "title": "No way to input data when the program is running in NetBeans", "body": "<p><code>stdio</code> streams are buffered. You need to <code>fflush()</code> stdout before using stdin, if you want the output to be displayed before the program blocks waiting on input. Alternatively, you can end all output lines with <code>'\\n'</code>, as newline implicitly flushes the output.<br>\nEdit: If you're entering data that <code>scanf()</code> cannot match using <code>%d</code>, such as alphabetic characters, <code>scanf()</code> will fail. You can check for this failure by comparing the return value of <code>scanf()</code> with the number of matches you expected (one in this case). As it stands, you don't check for this, and the characters stay in the input buffer, where the next <code>scanf()</code> will again try and fail to match them.</p>\n"}], "owner": {"reputation": 1577, "user_id": 2364123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxJVV.jpg?s=128&g=1", "display_name": "funghorn", "link": "https://stackoverflow.com/users/2364123/funghorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 28332442, "answer_count": 1, "score": 2, "last_activity_date": 1423089547, "creation_date": 1423086434, "last_edit_date": 1423087352, "question_id": 28332100, "link": "https://stackoverflow.com/questions/28332100/no-way-to-input-data-when-the-program-is-running-in-netbeans", "title": "No way to input data when the program is running in NetBeans", "body": "<p>I'm trying to execute a program from the book by K. N. King \"C Programming, A Modern Approach, 2 Edition\", in NetBeans 8.0.2, using MinGW compiler. The program looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\nint height, length, width, volume, weight;\n\nprintf(\"Enter height of box: \");\nscanf(\"%d\", &amp;height);\nprintf(\"Enter length of box: \");\nscanf(\"%d\", &amp;length);\nprintf(\"Enter width of box: \");\nscanf(\"%d\", &amp;width);\nvolume = height * length * width;\nweight = (volume + 165) / 166;\n\nprintf(\"Volume (cubic inches): %d\\n\", volume);\nprintf(\"Dimensional weight (pounds): %d\\n\", weight);\n\nreturn 0;\n}\n</code></pre>\n\n<p>So, I press \"Run Project\", the program builds successfully without any errors, then it begins to run and nothing happens, no console or something like that appears to input data like height, length, etc. </p>\n\n<p>In the output window, after the program builded, it begins to run and nothing is displayed in the window except for a thick cursor. When I press any button being in that window, the program ends and this is what is displayed:  </p>\n\n<pre><code>Enter height of box: Enter length of box: Enter width of box: Volume (cubic inches): 0 Dimensional weight (pounds): 0\nRUN SUCCESSFUL (total time: 6s)\n</code></pre>\n\n<p>I'm completely new to C, so I don't know, what should appear when the program runs. When launching programs written in Python the console appeared, and now I'm confused.  </p>\n\n<p>When I tried to debug, it builded successfully again and then the console appeared with the line: <code>\"Enter height of box: \"</code>, so it worked like I thought it should work, but I don't think this is the proper way to run programs.</p>\n"}, {"tags": ["c", "linux", "shell", "io", "io-redirection"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423089018, "post_id": 28331981, "comment_id": 45012487, "body": "this code block: &#39;while (*line == &#39; &#39; || *line == &#39;\\t&#39; || *line == &#39;\\n&#39;)                *line++ = &#39;\\0&#39;; &#39; is terminating the line[], so the parse function will exit without having parsed anything beyond the first parameter (in this case, the &#39;ls&#39;)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423089191, "post_id": 28331981, "comment_id": 45012566, "body": "this line: &#39;void main(char <i>envp[])&#39; will not cleanly compile in linux.  suggest: int main(int argc, char</i> argv[], char *envp[])"}, {"owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "edited": false, "score": 0, "creation_date": 1423089735, "post_id": 28331981, "comment_id": 45012796, "body": "Note that writing  your own shell could involve significant work.  For example &quot;ls *.gz &gt;contents.txt&quot; will not work as expected.  Wildcards will have no meaning when passed via exec.   It will say &quot;no such file *.xz&quot; even if you have lots of .xz files in your directory, because ls is being asked to literally look for a file named &quot;*.xz&quot;    Normally the shell first finds all the files matching the wildcard and then passes them as arguments to the command.  Most commands don&#39;t known how to expand wildcards themselves."}, {"owner": {"reputation": 139, "user_id": 2044100, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3fb1d42c871662815cb06a9785469512?s=128&d=identicon&r=PG", "display_name": "Jf2k", "link": "https://stackoverflow.com/users/2044100/jf2k"}, "edited": false, "score": 0, "creation_date": 1423098208, "post_id": 28331981, "comment_id": 45015536, "body": "do you have an alternate suggestion of how to parse?"}], "answers": [{"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423088953, "creation_date": 1423088953, "answer_id": 28332772, "question_id": 28331981, "link": "https://stackoverflow.com/questions/28331981/how-to-put-input-output-redirection-in-your-newly-created-c-shell/28332772#28332772", "title": "How to put input/output redirection in your newly-created c shell?", "body": "<p>You will need to:</p>\n\n<ul>\n<li>check for <code>&gt; [filename]</code> in the command passed</li>\n<li>if that is there, then open the relevant file for output, and use <code>dup2</code> to attach the fd you get to the <code>stdout</code> of the forked process.</li>\n</ul>\n\n<p>That should be enough to point you in the right direction.</p>\n"}, {"tags": [], "owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "is_accepted": true, "score": 1, "last_activity_date": 1423089307, "creation_date": 1423089307, "answer_id": 28332860, "question_id": 28331981, "link": "https://stackoverflow.com/questions/28331981/how-to-put-input-output-redirection-in-your-newly-created-c-shell/28332860#28332860", "title": "How to put input/output redirection in your newly-created c shell?", "body": "<p>In between test for pid==0 and before you run execvp(), you want code like this:</p>\n\n<pre><code>int fd=open(outputfile,O_WRONLY|O_CREAT); \ndup2(fd,1);\n</code></pre>\n\n<p>This will essentially set the stdout for the program run by execvp() to be to this new file.    You will have to modify your parsing code to look for the \">\" and parse what comes after it as a filename and store in outputfile. \nYou'd also want to do some additional checking to make sure the new file opens OK, etc. </p>\n"}], "owner": {"reputation": 139, "user_id": 2044100, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3fb1d42c871662815cb06a9785469512?s=128&d=identicon&r=PG", "display_name": "Jf2k", "link": "https://stackoverflow.com/users/2044100/jf2k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1221, "favorite_count": 0, "accepted_answer_id": 28332860, "answer_count": 2, "score": 0, "last_activity_date": 1423089307, "creation_date": 1423085972, "question_id": 28331981, "link": "https://stackoverflow.com/questions/28331981/how-to-put-input-output-redirection-in-your-newly-created-c-shell", "title": "How to put input/output redirection in your newly-created c shell?", "body": "<p>I am wondering if anyone could point me in the right direction on how to do this?  For example, if I write \"ls > contents.txt\", I want the output of ls to be written into content.txt.</p>\n\n<p>This is what I have so far.</p>\n\n<pre><code> #include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid  parse(char *line, char **argv)\n{\n     while (*line != '\\0') { \n          while (*line == ' ' || *line == '\\t' || *line == '\\n')\n               *line++ = '\\0';     \n          *argv++ = line;          \n          while (*line != '\\0' &amp;&amp; *line != ' ' &amp;&amp; \n                 *line != '\\t' &amp;&amp; *line != '\\n') \n               line++;            \n     }\n     *argv = '\\0';               \n}\n\nvoid  execute(char **argv)\n{\n     pid_t  pid;\n     int    status;\n\n     if ((pid = fork()) &lt; 0) {     \n          printf(\"*** ERROR: forking child process failed\\n\");\n          exit(1);\n     }\n     else if (pid == 0) {          \n          if (execvp(*argv, argv) &lt; 0) {     \n               printf(\"*** ERROR: exec failed\\n\");\n               exit(1);\n          }\n\n     }\n     else {                                 \n          while (wait(&amp;status) != pid)      \n               ;\n     }\n}\nvoid main(char *envp[])\n{\n    char line[1024];\n    char *argv[64];\n    while (1){\n      printf(\"shell&gt;&gt;\");\n      gets(line);\n      printf(\"\\n\");\n      parse(line, argv);\n      if (strcmp(argv[0], \"exit\")==0)\n    exit(0);\n      execute(argv);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "list", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1423085805, "post_id": 28331897, "comment_id": 45010917, "body": "What do you mean, you <b><i>can&#39;t</i></b> check the <code>head</code> is empty?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1423085917, "post_id": 28331897, "comment_id": 45010973, "body": "@Hogan usually head is pointing to the first element...."}, {"owner": {"reputation": 55, "user_id": 1938397, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a15fe76811e02e34ff57c729836500d9?s=128&d=identicon&r=PG", "display_name": "Kaki", "link": "https://stackoverflow.com/users/1938397/kaki"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1423086129, "post_id": 28331897, "comment_id": 45011093, "body": "But head is pointer to the first element. My teacher asked after classes, where we was discussing about linked list, if it&#39;s possible to do this - no one knew how it can be done."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1423086809, "post_id": 28331897, "comment_id": 45011441, "body": "may I suggest using a sentry node. That way, there are no special cases, at all. see <a href=\"http://pastebin.com/JAfq6ep1\" rel=\"nofollow noreferrer\">pastebin.com/JAfq6ep1</a>"}], "answers": [{"tags": [], "owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423085897, "creation_date": 1423085897, "answer_id": 28331957, "question_id": 28331897, "link": "https://stackoverflow.com/questions/28331897/singly-linked-list-push-back/28331957#28331957", "title": "Singly linked list - push_back", "body": "<p>If head points to the last element in the list then you just say </p>\n\n<pre><code>newItem-&gt;next = head; \nhead = newItem;\n</code></pre>\n\n<p>of course this operations is more often called a \"push\".  I've not heard the term push back.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 1938397, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a15fe76811e02e34ff57c729836500d9?s=128&d=identicon&r=PG", "display_name": "Kaki", "link": "https://stackoverflow.com/users/1938397/kaki"}, "edited": false, "score": 0, "creation_date": 1423086436, "post_id": 28331965, "comment_id": 45011254, "body": "If it completely removes the need to operate on the head pointer then circular linked list is not answer. My teacher also was saying that there can&#39;t be empty nodes in list."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": -1, "last_activity_date": 1423085919, "creation_date": 1423085919, "answer_id": 28331965, "question_id": 28331897, "link": "https://stackoverflow.com/questions/28331897/singly-linked-list-push-back/28331965#28331965", "title": "Singly linked list - push_back", "body": "<p>This sounds like a data structures class problem. The answer should be in the reading assignments.</p>\n\n<p>But anyway. I believe the answer is to use a circular linked list. What this is, is a head pointer to an empty node. The empty node marks the beginning AND end of the list. Doing it this way simplifies all of the list operations, because it completely removes the need to operate on the head pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423089953, "post_id": 28332099, "comment_id": 45012915, "body": "however, if the code loses the pointer to the first element in the list, then the list is effectively lost (I.E. a major memory leak).  also, checking *head-&gt;next without first checking the special case of head=NULL.  Then *head-&gt;next will be refering to an offset from address 0.  That will almost certainly lead to a seg fault event."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423090310, "post_id": 28332099, "comment_id": 45013081, "body": "I don&#39;t know how the code could &quot;lose the pointer&quot;, and <i>if</i> it happens, <b>that</b> is the problem. I didn&#39;t write anything about not checking for null.."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 1, "last_activity_date": 1423086431, "creation_date": 1423086431, "answer_id": 28332099, "question_id": 28331897, "link": "https://stackoverflow.com/questions/28331897/singly-linked-list-push-back/28332099#28332099", "title": "Singly linked list - push_back", "body": "<p>Yes of course you can do this. Thats a very good use for a pointer-to-a-pointer. You can even use <code>pushBack()</code> like this:</p>\n\n<pre><code>pushBack(&amp;(element-&gt;next), 4);\n</code></pre>\n\n<p>if <code>element</code> is a pointer to the last element!</p>\n\n<p>If you return the new element from <code>pushBack</code>, you can add new elements in constant time O(1), because you don't have to iterate through all the previous elements.</p>\n"}, {"tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 2, "last_activity_date": 1423086552, "creation_date": 1423086552, "answer_id": 28332138, "question_id": 28331897, "link": "https://stackoverflow.com/questions/28331897/singly-linked-list-push-back/28332138#28332138", "title": "Singly linked list - push_back", "body": "<p>I think you may have misunderstood your instructors wishes. I believe the instructor desired you not check <code>if (head)</code>; Instead check <code>if (*head)</code>. They're <em>not</em> the same condition.</p>\n\n<p>In your code, <code>head</code> is a pointer to pointer. Though you may pedantically wish to check that someone did not pass you a null pointer to pointer, the fact is all you really care about is whether the pointer <em>it</em> points to is null (thus the dereference). </p>\n\n<p>And that considerably reduces your code lineage.</p>\n\n<pre><code>void pushBack(struct node** head, int value)\n{\n    while (*head)\n        head = &amp;(*head)-&gt;next;\n\n    *head = malloc(sizeof(**head));\n    (*head)-&gt;value = value;\n    (*head)-&gt;next = NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 1938397, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a15fe76811e02e34ff57c729836500d9?s=128&d=identicon&r=PG", "display_name": "Kaki", "link": "https://stackoverflow.com/users/1938397/kaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6236, "favorite_count": 0, "accepted_answer_id": 28332138, "answer_count": 4, "score": 1, "last_activity_date": 1423086552, "creation_date": 1423085670, "last_edit_date": 1423086238, "question_id": 28331897, "link": "https://stackoverflow.com/questions/28331897/singly-linked-list-push-back", "title": "Singly linked list - push_back", "body": "<p>I have to create method push_back which will add an item to the end of my list.\nBut I have one constraint - I can't check if head is empty (if head is null)\nI don't have idea how I can do this. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node\n{\n    int value;\n    struct node* next;\n};\n\n\nvoid print(struct node* head)\n{\n    struct node* iterator = head;\n\n    while (iterator != NULL)\n    {\n        printf(\"%d\\n\", iterator-&gt;value);\n        iterator = iterator-&gt;next;\n    }\n    printf(\"\\n\");\n}\n\nvoid pushBack(struct node** head, int value)\n{\n    struct node* element = (struct node*)malloc(sizeof(struct node));\n    struct node* iterator = *head;\n\n    element-&gt;value = value;\n    element-&gt;next = NULL;\n\n    if (iterator == NULL) //can't!\n    {\n        *head = element;\n        return;\n    }\n\n    while (iterator-&gt;next != NULL)\n    {\n        iterator = iterator-&gt;next;\n    }\n\n    iterator-&gt;next = element;\n}\n\nint main(void)\n{\n    struct node* head = NULL;\n\n    pushBack(&amp;head, 4);\n    pushBack(&amp;head, 5);\n    pushBack(&amp;head, 52);\n    pushBack(&amp;head, 1);\n\n    print(head);\n    return 0;\n}\n</code></pre>\n\n<p>Any ideas how I can get working push_back method without checking head and without empty nodes?\nMy teacher asked after classes, where we was discussing about linked list, if it's possible to do this - no one knew how it can be done.</p>\n"}, {"tags": ["c", "makefile", "arm", "raspberry-pi"], "comments": [{"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1423084558, "post_id": 28331521, "comment_id": 45010278, "body": "Where is your <code>libgcc.a</code> archive located and what does your makefile look like?"}, {"owner": {"reputation": 13, "user_id": 4530371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea36b866d18bdac18decc628817e7a61?s=128&d=identicon&r=PG&f=1", "display_name": "Erin Stately", "link": "https://stackoverflow.com/users/4530371/erin-stately"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1423085016, "post_id": 28331521, "comment_id": 45010501, "body": "yes! those were the words I was looking for. I&#39;m trying to set up a libgcc.a archive\u2014 can I just download the .a file from somewhere? All <a href=\"http://www.filewatcher.com/m/libgcc.a.298384-0.html\" rel=\"nofollow noreferrer\">these</a> links seemed broken."}, {"owner": {"reputation": 13, "user_id": 4530371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea36b866d18bdac18decc628817e7a61?s=128&d=identicon&r=PG&f=1", "display_name": "Erin Stately", "link": "https://stackoverflow.com/users/4530371/erin-stately"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1423085228, "post_id": 28331521, "comment_id": 45010612, "body": "update: found a copy of libgcc.a in the trash, moved it into my libs folder. now I&#39;m changing my Makefile."}, {"owner": {"reputation": 13, "user_id": 4530371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea36b866d18bdac18decc628817e7a61?s=128&d=identicon&r=PG&f=1", "display_name": "Erin Stately", "link": "https://stackoverflow.com/users/4530371/erin-stately"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1423085358, "post_id": 28331521, "comment_id": 45010677, "body": "yes! libgcc.a was absolutely the issue: not in the path! thank you so much. This feels like a silly question now, but you absolutely were crucial in setting me on the right track. want to make an answer so I can give it a checkmark?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1423085829, "post_id": 28331521, "comment_id": 45010929, "body": "gcc knows where it was spawned from and where to find things (libgcc.a) when it calls ld, but ld does not, so for ld you have to explicitly provide the path either in the .a or a -L, or (groan) just use gcc to do your linking..."}, {"owner": {"reputation": 13, "user_id": 4530371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea36b866d18bdac18decc628817e7a61?s=128&d=identicon&r=PG&f=1", "display_name": "Erin Stately", "link": "https://stackoverflow.com/users/4530371/erin-stately"}, "edited": false, "score": 0, "creation_date": 1423086281, "post_id": 28331521, "comment_id": 45011173, "body": "^ that is so good to know! Thank you so much, I really felt like a fish out of water for not being able to do the most simple thing: link a library."}, {"owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "edited": false, "score": 0, "creation_date": 1424247529, "post_id": 28331521, "comment_id": 45466146, "body": "have you tried using rdimon.specs or nosys.specs"}], "answers": [{"tags": [], "owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "is_accepted": true, "score": 0, "last_activity_date": 1423086584, "creation_date": 1423086584, "answer_id": 28332141, "question_id": 28331521, "link": "https://stackoverflow.com/questions/28331521/how-do-i-link-the-correct-library-so-aeabi-idiv-and-aeabi-idivmod-work/28332141#28332141", "title": "How do I link the correct library so __aeabi_idiv and __aeabi_idivmod work?", "body": "<p>Make sure the <code>libgcc.a</code> archive is in the path you specify in your Makefile.</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 1931086, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed3406147ef92e8b1f6d9a21046d0c39?s=128&d=identicon&r=PG", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/1931086/daniel-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1490876778, "last_edit_date": 1490876778, "creation_date": 1490875812, "answer_id": 43117493, "question_id": 28331521, "link": "https://stackoverflow.com/questions/28331521/how-do-i-link-the-correct-library-so-aeabi-idiv-and-aeabi-idivmod-work/43117493#43117493", "title": "How do I link the correct library so __aeabi_idiv and __aeabi_idivmod work?", "body": "<p>I know is quite late, but I was having the same problem, I'm using ArchLinux and it turns out that the libgcc.a file was not located at </p>\n\n<pre><code>/usr/arm-none-eabi/lib/\n</code></pre>\n\n<p>and/or its child folders which is the default installation directory for arm-none-eabi compiler in my system, instead, the libgcc.a library is located at</p>\n\n<pre><code>/usr/lib/gcc/arm-none-eabi/(version)\n</code></pre>\n\n<p>So whatever system you're using, you should look for that library in your default lib directory.</p>\n"}], "owner": {"reputation": 13, "user_id": 4530371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea36b866d18bdac18decc628817e7a61?s=128&d=identicon&r=PG&f=1", "display_name": "Erin Stately", "link": "https://stackoverflow.com/users/4530371/erin-stately"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8000, "favorite_count": 1, "accepted_answer_id": 28332141, "answer_count": 2, "score": 1, "last_activity_date": 1490876778, "creation_date": 1423084266, "last_edit_date": 1495540451, "question_id": 28331521, "link": "https://stackoverflow.com/questions/28331521/how-do-i-link-the-correct-library-so-aeabi-idiv-and-aeabi-idivmod-work", "title": "How do I link the correct library so __aeabi_idiv and __aeabi_idivmod work?", "body": "<p><a href=\"https://stackoverflow.com/questions/6576517/what-is-the-cause-of-not-being-able-to-divide-numbers-in-gcc\">This</a> is the question I'm following up on. I have the same problem as regomodo did in that thread way back in 2011:</p>\n\n<p>I'm trying to run a little program on my Raspberry Pi, and I'm using operators that aren't natively supported by ARM:</p>\n\n<pre><code>hello.c:(.text+0x64): undefined reference to `__aeabi_idiv'\nhello.c:(.text+0x7c): undefined reference to `__aeabi_idivmod'\n</code></pre>\n\n<p>I understand that I need to link a library that knows about division and modding, but I can't quite get that to work (newbie to the Makefile life).</p>\n\n<p>So I gave it a kind of pathetic stab and tried just adding the -lgcc:</p>\n\n<pre><code>LDFLAGS  = -L../lib -lgcc\n</code></pre>\n\n<p>that wasn't super fruitful:</p>\n\n<pre><code>arm-none-eabi-ld: cannot find -lgcc\n</code></pre>\n\n<p>any advice would be so appreciated.</p>\n\n<p>[edit1] here's the start of my makefile:</p>\n\n<pre><code>ARMGNU ?= arm-none-eabi\n\nCPPFLAGS = -I../include\nCFLAGS = $(ARCHFLAGS) -Wall -O2 -nostdlib -nostartfiles -ffreestanding\nLDFLAGS  = -L../lib -lgcc\nLIBS = -lpi \n</code></pre>\n"}, {"tags": ["c#", "c++", "c", "dll", "log4net"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1423084463, "post_id": 28331470, "comment_id": 45010237, "body": "Look at <code>SetStdHandle</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423092501, "post_id": 28331470, "comment_id": 45013950, "body": "How do you know if the DLL was written in C or C++?"}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "edited": false, "score": 0, "creation_date": 1423142382, "post_id": 28331470, "comment_id": 45034227, "body": "I have the source for the top couple layers of DLLs as I wrote them.   Under the covers those DLLs eventually load DLLs for CURL and FFMPEG and such.   However, the top two layers of DLLs are mine and written in C and C++.   I can modify them if the solution requires it."}], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "is_accepted": true, "score": 3, "last_activity_date": 1423255805, "last_edit_date": 1423255805, "creation_date": 1423255500, "answer_id": 28374485, "question_id": 28331470, "link": "https://stackoverflow.com/questions/28331470/can-i-redirect-output-from-a-c-dll-into-my-c-log4net-output/28374485#28374485", "title": "Can I redirect output from a C DLL into my c# log4net output", "body": "<p>Turns out those did the trick once I figured out how to use them.   I setup two named pipes(or two ends of the same pipe?).  One I connected to stdout and had it do a log message in log4net of whatever came through the pipe.</p>\n\n<pre><code>internal static void InfoLogWriter(Object threadContext)\n{\n    mLog.Info(\"InfoLogWriterthread started\");\n    int id = Process.GetCurrentProcess().Id; // make this instance unique\n    var serverPipe = new NamedPipeServerStream(\"consoleRedirect\" + id, PipeDirection.In, 1);\n    NamedPipeClientStream clientPipe = new NamedPipeClientStream(\".\", \"consoleRedirect\" + id, PipeDirection.Out, PipeOptions.WriteThrough);\n    mLog.Info(\"Connecting Client Pipe.\");\n    clientPipe.Connect();\n    mLog.Info(\"Connected Client Pipe, redirecting stdout\");\n    HandleRef hr11 = new HandleRef(clientPipe, clientPipe.SafePipeHandle.DangerousGetHandle());\n    SetStdHandle(-11, hr11.Handle); // redirect stdout to my pipe\n    mLog.Info(\"Redirection of stdout complete.\");\n    mLog.Info(\"Waiting for console connection\");\n    serverPipe.WaitForConnection(); //blocking\n    mLog.Info(\"Console connection made.\");\n    using (var stm = new StreamReader(serverPipe))\n    {\n        while (serverPipe.IsConnected)\n        {\n            try\n            {\n                string txt = stm.ReadLine();\n                if (!string.IsNullOrEmpty(txt))\n                    mLog.InfoFormat(\"DLL MESSAGE : {0}\", txt);\n            }\n            catch (IOException)\n            {\n                break; // normal disconnect\n            }\n        }\n    }\n    mLog.Info(\"Console connection broken.   Thread Stopping.\");\n}\n</code></pre>\n\n<p>Also have a function to push all that to another thread so it doesn't block my main thread when it hits the various blocking calls.</p>\n\n<pre><code>internal static void RedirectConsole()\n{\n    mLog.Info(\"RedirectConsole called.\");\n    ThreadPool.QueueUserWorkItem(new System.Threading.WaitCallback(InfoLogWriter));\n    // TODO enqueue and item for error messages too.\n}\n</code></pre>\n\n<p>I'm having trouble with it disconnecting and have to reconnect the pipes, but I'll figure out a reconnect solution.   I'm guessing that happens when DLLs get swapped back out of memory or perhaps when I need to read but there isn't anything currently ready to be read?  I've also got to setup another pair to snag stderr and redirect it as well, using Error logs for that one.   Probably want to get rid of the magic number (-11) and use the normal enums as well (STD_ERROR_HANDLE, etc)</p>\n"}], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1692, "favorite_count": 3, "accepted_answer_id": 28374485, "answer_count": 1, "score": 5, "last_activity_date": 1423255805, "creation_date": 1423084081, "last_edit_date": 1423084976, "question_id": 28331470, "link": "https://stackoverflow.com/questions/28331470/can-i-redirect-output-from-a-c-dll-into-my-c-log4net-output", "title": "Can I redirect output from a C DLL into my c# log4net output", "body": "<p>I have a C# application which in turn loads a C or C++ dll (which in turn loads other  C/C++ dlls).   Within the C# application I use a log4net logger to capture all the output into a series of log files.   My application runs as a windows service so there is no console/output window for normal printfs or output written into stdout/stderr to go to.   </p>\n\n<p>Is there a way to setup the C# application to direct stdout/stderr (from the DLLs) and turn each line into a log4net output.   Or is there some way within the C/C++ DLL to connect the stdout/stderr streams to the log4net output?   </p>\n\n<p>I found some solution (here : <a href=\"http://bytes.com/topic/c-sharp/answers/822341-dllimport-stdout-gets-eaten\" rel=\"nofollow\">http://bytes.com/topic/c-sharp/answers/822341-dllimport-stdout-gets-eaten</a>) that indicated I needed to put a call into my C DLL like this : <code>setvbuf(stdout, NULL, _IONBF, 0);</code>   Though, I don't know what that does, it doesn't do what I want.   I assume I'd also need a similar line for stderr.   In either case, google seemed to think those lines simply take care of buffering and not redirection into log4net.</p>\n\n<p>I assume I need some sort of function override which snags the console writes (from a loaded DLL in another language) and converts them into <code>mLog.InfoFormat(\"{0}\", consoleString);</code> sorts of calls.  I'm new to c# and not even sure what terms to google in order to find such an override (if its even possible).</p>\n\n<p>Not sure if this complicates the problem, but my C# application is multithreaded and some of the DLLs have multiple threads as well.   I assume that just means I need a lock of some sort inside the method that handles the console output and writes it into the log4net framework(maybe) or maybe the normal serialization of log4net will handle it for me.   </p>\n"}, {"tags": ["c", "pointers", "integer"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1423084157, "post_id": 28331462, "comment_id": 45010070, "body": "Show us the actual code that&#39;s failing, and the exact error message. Read this first: <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>. And C doesn&#39;t have array parameters."}, {"owner": {"reputation": 31, "user_id": 4274436, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56992b6cf2d9d90f06708068696c0659?s=128&d=identicon&r=PG&f=1", "display_name": "HannahAround", "link": "https://stackoverflow.com/users/4274436/hannaharound"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1423084611, "post_id": 28331462, "comment_id": 45010307, "body": "Mhhh, okay. It&#39;s meant to be a little game where you move a little avatar ( an &#39;o&#39;) As I want to change the maps I have to change location of question blocks =/ Yet I want movement to stop when the avatar touches a &#39;?&#39;. The code will come separate since the comment has not enough characters"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1423084698, "post_id": 28331462, "comment_id": 45010339, "body": "I&#39;m sure you can reduce that to a much smaller program that still produces the error. And please include the exact error message in the question."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1423084836, "post_id": 28331462, "comment_id": 45010407, "body": "In the original question, you wrote <code>field[*Q1][*Q2]=&#39;?&#39;;</code>. In the code you just added, you wrote <code>field[Q1][Q2]=&#39;?&#39;;</code>. BTW, in addition to including the error message in the question, you should indicate which line the message refers to. (Don&#39;t add line numbering to the entire program, just add a comment saying &quot;This is line so-and-so&quot;.)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423085917, "post_id": 28331462, "comment_id": 45010974, "body": "This is <i>rapidly</i> heading toward an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY problem</a>. The warning(s) are obvious. <code>int *Q1 = 11;</code> is converting an <code>int</code> value to a pointer-type and the compiler is both right and wise in telling you so. What you&#39;re trying to accomplish (not <i>how</i> you&#39;re trying to accomplish it) remains simultaneously relevant and elusive. Both Q1 and Q2 are automatic to their function decl. If you want they values retained they cannot be so, and must either be passed as parameters or given <code>static</code> storage. And your locals hide your globals, in case that wasn&#39;t obvious."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423089796, "post_id": 28331462, "comment_id": 45012827, "body": "Move the <code>obstacle</code> and <code>move</code> functions to be before <code>main()</code>. Embedding the functions inside <code>main()</code> like you have done is terrible style, as well as not being permitted in standard C"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4274436, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56992b6cf2d9d90f06708068696c0659?s=128&d=identicon&r=PG&f=1", "display_name": "HannahAround", "link": "https://stackoverflow.com/users/4274436/hannaharound"}, "edited": false, "score": 0, "creation_date": 1423158385, "post_id": 28332033, "comment_id": 45044986, "body": "Thank you very much ^.^ I&#39;m still learning and I&#39;m sorry for the things that seem obvious ^^&#39;"}, {"owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "reply_to_user": {"reputation": 31, "user_id": 4274436, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56992b6cf2d9d90f06708068696c0659?s=128&d=identicon&r=PG&f=1", "display_name": "HannahAround", "link": "https://stackoverflow.com/users/4274436/hannaharound"}, "edited": false, "score": 0, "creation_date": 1423208461, "post_id": 28332033, "comment_id": 45064031, "body": "No a problem @HannahAround, everybody does mistakes and trick is try not to do it again."}], "tags": [], "owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "is_accepted": false, "score": 3, "last_activity_date": 1423086530, "last_edit_date": 1423086530, "creation_date": 1423086197, "answer_id": 28332033, "question_id": 28331462, "link": "https://stackoverflow.com/questions/28331462/c-use-pointer-content-as-an-array-parameter/28332033#28332033", "title": "C : use pointer-content as an array parameter", "body": "<p>you cannot initialize <code>int *Q1 = 11</code>.</p>\n\n<p><code>int *Q1</code> is a pointer to an integer variable so it can store only a pointer which points to a variable which can store an integer.</p>\n\n<p>you can initialize/assign <code>Q1</code> variable with a pointer only.\n<code>&amp;</code> is used to get the address of a variable in C.</p>\n\n<p>example:</p>\n\n<pre><code>int a = 12;\nint *Q1 = &amp;a;\n</code></pre>\n\n<p>Thats why you are getting compiler warning saying  \"Line 16: [Warning] initialization makes pointer from integer without a cast [enabled by default]\"</p>\n\n<p>12 is an integer and you tried to assign it to a pointer to an integer variable and when compiler tried to do implicit type conversion it gave a warning.</p>\n\n<pre><code>    if (field[h][w-1]== '(' || field[h][w-1]== '-' || field[h][w-1]== ')' || field[h][w-1]== 'H' || w-1 &lt; 0)\n        return 1;\n    else return 0;\n    break;\n</code></pre>\n\n<p>This part of the code in your program are called dead code, where the control can never reach, example the <code>break</code> statement. try to avoid them.</p>\n\n<p>local variables are local to the function and are not accessible to other function in you program. </p>\n\n<p>Also, you have variables <code>h, w</code> which are local to main, but you used all over you program, if you want to use any variable outside of a function,  make them as global variables. if you want them to be modified by calling function then use pass by reference.</p>\n\n<p>Use proper indentation and comments in your code to make them more readable for others and by you also in future.</p>\n"}], "owner": {"reputation": 31, "user_id": 4274436, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56992b6cf2d9d90f06708068696c0659?s=128&d=identicon&r=PG&f=1", "display_name": "HannahAround", "link": "https://stackoverflow.com/users/4274436/hannaharound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1423086530, "creation_date": 1423084039, "last_edit_date": 1423085165, "question_id": 28331462, "link": "https://stackoverflow.com/questions/28331462/c-use-pointer-content-as-an-array-parameter", "title": "C : use pointer-content as an array parameter", "body": "<p>I want to use two pointers to define my array content. Thats why I have:</p>\n\n<pre><code>int *Q1, *Q2;\n</code></pre>\n\n<p>later on (in a function) this shall happen:</p>\n\n<pre><code>*Q1 = 11, *Q2 = 2;    \nfield[*Q1][*Q2]='?';\n</code></pre>\n\n<p>it's important that Q1 and 2 are declared in the function. So they can always be used in main as Q1 and Q2 but can be changed by various functions =/\nCan you help me out? At the moment the compiler tells me that the array subscript is not an integer. How do I have to write it down?</p>\n\n<p>Best regards!</p>\n\n<p>Here's the full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n#define HEIGHT 15                       \n#define WIDTH 15                        \n\n\nint field[HEIGHT][WIDTH];\n\nint *Q1, *Q2;\n\n\nvoid forest1() {\n    int *Q1 = 11, *Q2 = 2; \n    field[2][3]=field[1][11]=field[9][10]=field[5][0]=field[5][14]=field[8][0]=field[8][14]='-';\n    field[3][2]=field[2][10]=field[10][9]='(';\n    field[3][4]=field[2][12]=field[10][11]=')';\n    field[4][3]=field[5][3]=field[3][11]=field[4][11]=field[11][10]=field[12][10]='H';\n    field[0][5]=field[0][8]=field[14][5]=field[14][8]='|';\n    field[*Q1][*Q2]='?';\n}\n\nvoid printField(){\n    int i;\n    int i2;\n    for (i = 0; i&lt;HEIGHT; i++){ \n        for (i2=0; i2&lt;WIDTH; i2++)\n            printf(\"%3c\", field[i][i2]);    \n        printf(\"\\n\\n\");\n    }   \n}\n\nvoid initField(){\n    int i;\n    for (i = 1; i&lt;sizeof(field); i++)       \n        field[i%WIDTH][i/WIDTH]=' ';        \n}\n\nint main() {\n    char direction;\n    int h = 7; int w = 7;                   // Starting Point\n\n\n    initField();\n    field[h][w]='o';\n    forest1();\n    printField();\n    printf(\"Welcome! Move with wasd - have fun testing! \\n\\n\");\n\nint obstacle(char direction) {\n\n\n    switch(direction) {\n        case 'w':   {\n            if (field[h-1][w]== '(' || field[h-1][w]== '-' || field[h-1][w]== ')' || field[h-1][w]== 'H' || h-1 &lt; 0)\n            return 1;\n            else return 0;\n            break;\n        }\n        case 'a':   {\n            if (field[h][w-1]== '(' || field[h][w-1]== '-' || field[h][w-1]== ')' || field[h][w-1]== 'H' || w-1 &lt; 0)\n            return 1;\n            else return 0;\n            break;\n        }\n        case 's':   {\n            if (field[h+1][w]== '(' || field[h+1][w]== '-' || field[h+1][w]== ')' || field[h+1][w]== 'H' || h+1 &gt; 14)\n            return 1;\n            else return 0;\n            break;\n        }\n        case 'd':   {\n            if (field[h][w+1]== '(' || field[h][w+1]== '-' || field[h][w+1]== ')' || field[h][w+1]== 'H' || w+1 &gt; 14)\n            return 1;\n            else return 0;\n            break;\n        }\n        default: return 0; break;\n    }\n\n}\n\n\nvoid move() {\n\n    while (1) {\n\n        direction = getch();\n\n        if (obstacle(direction)!=1){\n\n                    if (field[*Q1][*Q2]=='o') {\n                        /* German content since this will be a german little game. Basically says it's a question block*/\n    printf(\"Hallo! Dies ist ein Infoblock! Er gibt dir wertvolle Informationen.\\n\");\n    system(\"pause\");\n}\n\n\n            if (direction=='w') {\n                    field[h][w]=' ';\n                    h = h-1;\n                    field[h][w]='o';\n                }\n\n            if (direction=='a'){\n                    field[h][w]=' ';\n                    w = w-1;\n                    field[h][w]='o';\n                }\n\n            if (direction=='s'){\n                    field[h][w]=' ';\n                    h = h+1;\n                    field[h][w]='o';\n                }\n\n            if (direction=='d'){\n                    field[h][w]=' ';\n                    w = w+1;\n                    field[h][w]='o';\n                }\n            system(\"cls\");\n            printField();\n        }\n    }\n}\n\n\n\n    move(); \n\n    }\n</code></pre>\n\n<p>The compiler tells me for this exact code: \n\"Line 16: [Warning] initialization makes pointer from integer without a cast [enabled by default]\"\ntwice, for col 12 and col 22.\nWhen I start the programm It crashes but prints nothing so far</p>\n"}, {"tags": ["c++", "c", "linux", "windows", "uniqueidentifier"], "comments": [{"owner": {"reputation": 1159, "user_id": 1027402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFqLH.jpg?s=128&g=1", "display_name": "Onur Turhan", "link": "https://stackoverflow.com/users/1027402/onur-turhan"}, "edited": false, "score": 0, "creation_date": 1423083203, "post_id": 28331147, "comment_id": 45009585, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/17447659/port-window-api-getvolumeinformation-to-linux\">Port Window Api---GetVolumeInformation to Linux</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423092603, "post_id": 28331147, "comment_id": 45013990, "body": "Do the partitions on the hard drive have serial numbers?  My understanding is that the drive has a serial number only; not any partitions within the hard drive."}], "answers": [{"tags": [], "owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "is_accepted": true, "score": 2, "last_activity_date": 1423084766, "creation_date": 1423084766, "answer_id": 28331670, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number/28331670#28331670", "title": "Get HD/Partition serial number", "body": "<p>In linux, you could use the blkid command to get the UUID of the partition:</p>\n\n<pre><code># blkid /dev/sda1\n/dev/sda1: UUID=\"15677362-cef3-4a53-aca3-3bace1b0d92a\" TYPE=\"ext4\"\n</code></pre>\n\n<p>This info is stored in the formatting of specific partition types like ext4, xfs  and changes when reformatted.   There is no info available for unformatted partitions. </p>\n\n<p>If you need to call it from code, calling out to a shell to run this command isn't exactly the prettiest way to do it, but it could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc,char ** argv) {\n\n  /* device you are looking for */   \n  char device[]=\"/dev/sda1\";\n\n  /* buffer to hold info */\n  char buffer[1024];\n\n  /* format into a single command to be run */\n  sprintf(buffer,\"/sbin/blkid -o value %s\",device);\n\n  /* run the command via popen */\n  FILE *f=popen(buffer,\"r\");\n\n  /* probably should check to make sure f!=null */\n\n  /* read the first line of output */\n  fgets(buffer,sizeof(buffer),f);\n\n  /* print the results (note, newline is included in string) */\n  fprintf(stdout,\"uuid is %s\",buffer);\n\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1616, "user_id": 702327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/67dba488b21196a26ab69be47a2911df?s=128&d=identicon&r=PG", "display_name": "useraged", "link": "https://stackoverflow.com/users/702327/useraged"}, "is_accepted": false, "score": 2, "last_activity_date": 1423085084, "creation_date": 1423085084, "answer_id": 28331752, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number/28331752#28331752", "title": "Get HD/Partition serial number", "body": "<p>You can use <a href=\"http://www.freedesktop.org/software/systemd/libudev/\" rel=\"nofollow\">udev</a> to get the serial number of the device. (You'll need to know the device name though)</p>\n\n<pre><code>struct udev *context = udev_new();\nstruct udev_device *device = udev_device_new_from_syspath(context, \"/sys/block/sda\");\nconst char *id = udev_device_get_property_value(device, \"ID_SERIAL\");\n// Cleanup\nudev_device_unref(device);\nudev_unref(context);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423089621, "creation_date": 1423089621, "answer_id": 28332935, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number/28332935#28332935", "title": "Get HD/Partition serial number", "body": "<p>Partitions have (at least) three identities in linux:</p>\n\n<ul>\n<li>The raw device identifier (think <code>cat /proc/partitions</code>) - this is not a unique serial number</li>\n<li>The <code>UUID</code> of the partition - can be found with <code>blkid</code>, and stored within the partition itself. You can also manually parse <code>/dev/.blkid.tab</code> - the format being obvious.</li>\n<li>The disk label - also stored within the partition. EG:</li>\n</ul>\n\n<pre>\nlsblk -o name,mountpoint,label,uuid\nNAME   MOUNTPOINT LABEL UUID\nsda\n\u251c\u2500sda1 /                315eaf50-adcc-4f0d-b767-f008f3f1c194\n\u251c\u2500sda2\n\u2514\u2500sda5 [SWAP]           1ff31705-f488-44a4-ba5f-e2fe9eff4b96\nsr0\n</pre>\n\n<p>Of these, the second is closest to what you want. To read it programatically, use <code>libblkid</code>.</p>\n"}], "owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 1, "accepted_answer_id": 28331670, "answer_count": 3, "score": 1, "last_activity_date": 1423089621, "creation_date": 1423082970, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number", "title": "Get HD/Partition serial number", "body": "<p>When Using Windows I can get a (more or less unique) serial number of a HDD partition by using command</p>\n\n<pre><code>GetVolumeInformation()\n</code></pre>\n\n<p>My question: is there something similar available for Linux? Means a number that would change only when somebody formats a partition and that can be retrieved programmatically?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1423082787, "post_id": 28331066, "comment_id": 45009355, "body": "If <code>O_CREAT</code> is specified, then a 3rd argument must be supplied to <code>open()</code>. Omitting it results in undefined behavior (maybe the function reads a garbage value from the stack and it can&#39;t do anything with the nonsensical arbitrary value it reads.)"}, {"owner": {"reputation": 8689, "user_id": 224508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bf26d2aa09d1b345ee4fe7fac03f500?s=128&d=identicon&r=PG", "display_name": "vanza", "link": "https://stackoverflow.com/users/224508/vanza"}, "edited": false, "score": 1, "creation_date": 1423082871, "post_id": 28331066, "comment_id": 45009399, "body": "As your code shows, the open is failing... so of course trying to close fd -1 will fail."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1423084131, "post_id": 28331066, "comment_id": 45010055, "body": "Print <code>fd</code> in a separate printing operation (<code>std::cout &lt;&lt; fd &lt;&lt; &#39;\\n&#39;;</code>) before closing the file.  And/or print <code>errno</code> or <code>strerror(errno)</code>.  It is also curious to see a C tag on code which is clearly C++; and it is curious that it is compiling without <code>&lt;iostream&gt;</code> being included -- presumably something, maybe <code>&lt;stdio.h&gt;</code>, is including it for you."}, {"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 1, "creation_date": 1423084905, "post_id": 28331066, "comment_id": 45010436, "body": "Are you writing C or C++?"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3504233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/676089ea54b4a26c66a11ff2451b5ee6?s=128&d=identicon&r=PG&f=1", "display_name": "flip", "link": "https://stackoverflow.com/users/3504233/flip"}, "edited": false, "score": 0, "creation_date": 1423085458, "post_id": 28331565, "comment_id": 45010727, "body": "thanks i changed the code to include the mode and this worked proplery"}], "tags": [], "owner": {"reputation": 11359, "user_id": 1323940, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/def1b1fd4342d9e332b7a3bf41f57a00?s=128&d=identicon&r=PG", "display_name": "SzG", "link": "https://stackoverflow.com/users/1323940/szg"}, "is_accepted": true, "score": 2, "last_activity_date": 1423084376, "creation_date": 1423084376, "answer_id": 28331565, "question_id": 28331066, "link": "https://stackoverflow.com/questions/28331066/file-not-properly-closing-using-fcntl-h-close/28331565#28331565", "title": "File not properly closing using fcntl.h close", "body": "<p>Some quotes from <code>man 2 open</code>. You must specify the 3rd <code>mode</code> parameter when using the O_CREAT flag.</p>\n\n<blockquote>\n<pre><code>int open(const char *pathname, int flags);\nint open(const char *pathname, int flags, mode_t mode);\n</code></pre>\n  \n  <p>mode specifies the permissions to use in case a new file is created.  This argument  must  be  supplied when  O_CREAT  is specified in flags; if O_CREAT is not specified, then mode is ignored. </p>\n</blockquote>\n\n<p>It was your <code>open</code> syscall that failed in the first place. <code>close</code> only failed because you tried to use it on invalid file descriptor -1.</p>\n"}], "owner": {"reputation": 143, "user_id": 3504233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/676089ea54b4a26c66a11ff2451b5ee6?s=128&d=identicon&r=PG&f=1", "display_name": "flip", "link": "https://stackoverflow.com/users/3504233/flip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 28331565, "answer_count": 1, "score": -2, "last_activity_date": 1423085518, "creation_date": 1423082638, "last_edit_date": 1423085518, "question_id": 28331066, "link": "https://stackoverflow.com/questions/28331066/file-not-properly-closing-using-fcntl-h-close", "title": "File not properly closing using fcntl.h close", "body": "<p>Here is the code snippet below I am not sure why this doesnt work</p>\n\n<p>but the output i get is \n<br></p>\n\n<pre><code>-1\n-1\n</code></pre>\n\n<p>Code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;ctime&gt;\n\nint main()\n{\n\n    int fd = open(\"/home/felipe/gdelt/fixed/test.bin\", O_APPEND|O_WRONLY|O_CREAT);\n    std::cout&lt;&lt;close(fd)&lt;&lt;std::endl;\n    fd = open(\"/home/felipe/gdelt/fixed/test.bin\", O_APPEND|O_WRONLY|O_CREAT);\n    std::cout&lt;&lt;fd&lt;&lt;std::endl;\n    //testWrite();\n    return 0;\n}\n</code></pre>\n\n<p>Revised Code (Adding the mode is what made it work )</p>\n\n<pre><code>int main()\n{\n\n    int fd = open(\"/home/felipe/gdelt/fixed/test.bin\", O_APPEND|O_WRONLY|O_CREAT,S_IWUSR);\n    std::cout&lt;&lt;close(fd)&lt;&lt;std::endl;\n    fd = open(\"/home/felipe/gdelt/fixed/test.bin\", O_APPEND|O_WRONLY|O_CREAT,S_IWUSR);\n    std::cout&lt;&lt;fd&lt;&lt;std::endl;\n    //testWrite();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1423082514, "post_id": 28330978, "comment_id": 45009189, "body": "<b><i>My question is what is the need for the seed ?</i></b> If you do not seed or seed with a fixed value you will get the same set of random numbers each time you run your application."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 4, "creation_date": 1423082648, "post_id": 28330978, "comment_id": 45009268, "body": "I feel the need... the need... <b>for seed!</b> <a href=\"http://en.wikiquote.org/wiki/Top_Gun\" rel=\"nofollow noreferrer\">*</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423082789, "post_id": 28330978, "comment_id": 45009357, "body": "@MarkRansom and <i>I feel the need... the need... for s(p)eed !!</i>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1423082900, "post_id": 28330978, "comment_id": 45009416, "body": "Do you know <a href=\"http://stackoverflow.com/questions/22915400\"><b>what</b> a seed is</a>?  I suspect that if you knew <i>what</i>, you would know <i>the need</i>."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423082934, "post_id": 28331042, "comment_id": 45009436, "body": "Sir, please correct me if i&#39;m wrong, but isn&#39;t it like it <b>is</b> actually seeded automatically with a value <code>1</code> [without an explicit seed]."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1423083481, "post_id": 28331042, "comment_id": 45009730, "body": "Yes indeed - it is seeded with a known constant (1)."}], "tags": [], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": false, "score": 3, "last_activity_date": 1423083538, "last_edit_date": 1423083538, "creation_date": 1423082529, "answer_id": 28331042, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28331042#28331042", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>I guess your question is why isn't it seeded automatically with an unpredictable value (like the current time). </p>\n\n<p>Having the random number generator generate the same sequence every time a program starts can be handy for debugging.</p>\n"}, {"tags": [], "owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "is_accepted": false, "score": 1, "last_activity_date": 1423082616, "creation_date": 1423082616, "answer_id": 28331059, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28331059#28331059", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>Random number generation is the result of an iterative process. Each time you call rand the following happens:</p>\n\n<pre><code>seed := create_new_seed(seed);\nreturn random_number_from_seed(seed);\n</code></pre>\n\n<p>(Note that <code>create_new_seed</code> and <code>random_number_from_seed</code> are pure functions, they only use their parameters and do not access any globals).</p>\n\n<p>This means that if the seed is always 0, then the series of values returned by <code>rand</code> calls will always be the same. In order to allow for different values, a different seed is used in each run. One thing that changes between runs and can easily be used is the start time of the program.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1423083282, "last_edit_date": 1423083282, "creation_date": 1423082670, "answer_id": 28331072, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28331072#28331072", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>The <code>rand()</code> function is a <em>pseudo-random number generator</em>, i.e.,</p>\n\n<blockquote>\n  <p>The rand() function returns a pseudo-random integer in the range 0 to RAND_MAX inclusive</p>\n</blockquote>\n\n<p>The generation of the pseudo-random number depends on the <em>seed</em>. If you don't provide a different value as <em>seed</em>, you'll get the <em>same</em> random number on  every invocation(s) of your application. That's why, the <code>srand()</code> is used to <em>randomize</em> the seed itself. </p>\n\n<p>Most common practice : <code>srand(time(NULL))</code> [Suitable for single-run evaluations].</p>\n\n<blockquote>\n  <p>what is the need for the <em>[explicit]</em> seed ?</p>\n</blockquote>\n\n<p>Worthy to mention, from the <a href=\"http://linux.die.net/man/3/srand\" rel=\"nofollow\">man page</a></p>\n\n<blockquote>\n  <p>If no seed value is provided, the rand() function is automatically seeded with a value of 1.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1423121088, "creation_date": 1423121088, "answer_id": 28338342, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28338342#28338342", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>If you do not add srand(), each time you run your program, rand will generate the same random numbers.</p>\n"}], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1503, "favorite_count": 0, "accepted_answer_id": 28331072, "answer_count": 4, "score": -1, "last_activity_date": 1423121088, "creation_date": 1423082356, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>calling srand on the lines of <code>srand(time(NULL));</code> is required to setup the seed for <code>rand()</code> to generate a random number.\nMy question is what is the need for the seed ?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "c-preprocessor"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1423085906, "post_id": 28330956, "comment_id": 45010969, "body": "Note that <code>some_function_wrapper</code> should take a <code>void*</code> and explicitly cast it to <code>struct some_function_args*</code>. Otherwise it&#39;ll get called with the wrong prototype, which is undefined behaviour."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1423087946, "post_id": 28330956, "comment_id": 45012010, "body": "Newer C-standards (C99) have compound initializers: <code>struct  my_args = {.arg1 = 1, .arg2 = 2, .arg3 = 3};</code>"}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1423088164, "post_id": 28332447, "comment_id": 45012109, "body": "Maybe you could isolate the parameters in a pair of parentheses like so : <code>THREAD(thread, (a, b, c), {...})</code> ? I&#39;m no PP guru, but I&#39;ve seen crazy stuff done in Boost and this looks basic enough."}, {"owner": {"reputation": 26538, "user_id": 773690, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/43b39b50295b675199c4d037321619ae?s=128&d=identicon&r=PG", "display_name": "iblue", "link": "https://stackoverflow.com/users/773690/iblue"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423088405, "post_id": 28332447, "comment_id": 45012224, "body": "Then I still need to iterate through them somehow to create the struct. Maybe I could build some <code>#for VAR in (a,b,c)</code> loop using the following technique: <a href=\"http://stackoverflow.com/a/10542793/773690\">stackoverflow.com/a/10542793/773690</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1423088551, "post_id": 28332447, "comment_id": 45012298, "body": "Boost PP will probably be of great use here. Also please have a look at <a href=\"http://stackoverflow.com/questions/28330956/how-to-avoid-code-bloat-when-using-pthreads-in-c/28332447#comment45010969_28330956\">my comment above</a> about the function pointer. This way will probably work, but better standard-compliant than sorry."}], "tags": [], "owner": {"reputation": 26538, "user_id": 773690, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/43b39b50295b675199c4d037321619ae?s=128&d=identicon&r=PG", "display_name": "iblue", "link": "https://stackoverflow.com/users/773690/iblue"}, "is_accepted": true, "score": 0, "last_activity_date": 1423132286, "last_edit_date": 1423132286, "creation_date": 1423087786, "answer_id": 28332447, "question_id": 28330956, "link": "https://stackoverflow.com/questions/28330956/how-to-avoid-code-bloat-when-using-pthreads-in-c/28332447#28332447", "title": "How to avoid code bloat when using pthreads in C?", "body": "<blockquote>\n  <p><strong>EDIT:</strong> I released some code. See <a href=\"https://github.com/iblue/threadify.h\" rel=\"nofollow\">threadify.h</a>.</p>\n</blockquote>\n\n<p>With the following macros you can do things like this:</p>\n\n<pre><code>char a = 'A';\nint  b = 23;\nchar[] c = \"Example\";\n\n\npthread_t thread;\n\n// THREAD3 because it takes 3 arguments of variable type.\nTHREAD3(thread, a, b, c, {\n  printf(\"test: %c %d %s\\n\", a, b, c);\n});\n\nJOIN(thread);\n</code></pre>\n\n<p>It's possible in GCC, because GCC has two non-standard extensions:</p>\n\n<ul>\n<li>nested functions</li>\n<li>The <code>typeof()</code> operator</li>\n</ul>\n\n<p>There are some drawbacks in this huge mess of macros:</p>\n\n<ul>\n<li>You cannot pass rvalues (because it's not possible to create pointers to them)</li>\n<li><p>You need to use the appropriate <code>THREAD0</code>, <code>THREAD1</code>, ... macro depending on the number of arguments (not sure if it's possible to work around this using variadic macros).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n\n// Nested definition to work around preprocessor prescan\n#define __CAT(arg1, arg2) arg1 ## arg2\n#define CAT(arg1, arg2) __CAT(arg1, arg2)\n\n// Use the current line number to create a unique name for objects\n#define NAME(arg1) CAT(arg1, __LINE__)\n\n// Creates a thread without any arguments\n#define THREAD0(thread, code) \\\nvoid NAME(__pthread_wrapper)(void) {\\\n  do {code;} while(0); \\\n}; \\\npthread_create(&amp;thread, NULL, (void*)NAME(__pthread_wrapper), NULL);\n\n// Creates a thread with one argument by creating a struct\n// and passing all values via this struct.\n#define THREAD1(thread, arg1, code) \\\ntypedef struct { \\\n  typeof(arg1)* NAME(__pthread_arg1); \\\n} NAME(__pthread_struct); \\\n  void NAME(__pthread_wrapper)(NAME(__pthread_struct)* data) {\\\n  do {code;} while(0); \\\n}; \\\nNAME(__pthread_struct) NAME(__data); \\\nNAME(__data).NAME(__pthread_arg1) = &amp;arg1; \\\npthread_create(&amp;thread, NULL, (void*)NAME(__pthread_wrapper), &amp;NAME(__data));\n\n#define THREAD2(thread, arg1, arg2, code) \\\ntypedef struct { \\\n  typeof(arg1)* NAME(__pthread_arg1); \\\n  typeof(arg2)* NAME(__pthread_arg2); \\\n} NAME(__pthread_struct); \\\n  void NAME(__pthread_wrapper)(NAME(__pthread_struct)* data) {\\\n  do {code;} while(0); \\\n}; \\\nNAME(__pthread_struct) NAME(__data); \\\nNAME(__data).NAME(__pthread_arg1) = &amp;arg1; \\\nNAME(__data).NAME(__pthread_arg2) = &amp;arg2; \\\npthread_create(&amp;thread, NULL, (void*)NAME(__pthread_wrapper), &amp;NAME(__data));\n\n#define THREAD3(thread, arg1, arg2, arg3, code) \\\ntypedef struct { \\\n  typeof(arg1)* NAME(__pthread_arg1); \\\n  typeof(arg2)* NAME(__pthread_arg2); \\\n  typeof(arg3)* NAME(__pthread_arg3); \\\n} NAME(__pthread_struct); \\\n  void NAME(__pthread_wrapper)(NAME(__pthread_struct)* data) {\\\n  do {code;} while(0); \\\n}; \\\nNAME(__pthread_struct) NAME(__data); \\\nNAME(__data).NAME(__pthread_arg1) = &amp;arg1; \\\nNAME(__data).NAME(__pthread_arg2) = &amp;arg2; \\\nNAME(__data).NAME(__pthread_arg3) = &amp;arg3; \\\npthread_create(&amp;thread, NULL, (void*)NAME(__pthread_wrapper), &amp;NAME(__data));\n\n/* THREAD4, THREAD5, ... */\n\n#define JOIN(thread) pthread_join(thread, NULL);\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": false, "score": -1, "last_activity_date": 1423097786, "creation_date": 1423097786, "answer_id": 28334430, "question_id": 28330956, "link": "https://stackoverflow.com/questions/28330956/how-to-avoid-code-bloat-when-using-pthreads-in-c/28334430#28334430", "title": "How to avoid code bloat when using pthreads in C?", "body": "<p>'When writing threaded code in C, I first have to create some struct which includes all the arguments and a wrapper function. This leads to lots of code bloat and is not easy to read'.   Sure.  That's what you pay for making your app, (assuming it's not stupid), either X times faster or X times easier to implement becasue it's easier described as independent functionality.   You want something for nothing?</p>\n"}], "owner": {"reputation": 26538, "user_id": 773690, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/43b39b50295b675199c4d037321619ae?s=128&d=identicon&r=PG", "display_name": "iblue", "link": "https://stackoverflow.com/users/773690/iblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "accepted_answer_id": 28332447, "answer_count": 2, "score": 1, "last_activity_date": 1423132286, "creation_date": 1423082264, "question_id": 28330956, "link": "https://stackoverflow.com/questions/28330956/how-to-avoid-code-bloat-when-using-pthreads-in-c", "title": "How to avoid code bloat when using pthreads in C?", "body": "<p>When writing threaded code in C, I first have to create some <code>struct</code> which includes all the arguments and a wrapper function. This leads to lots of code bloat and is not easy to read. See:</p>\n\n<pre><code>struct some_function_args {\n  int arg1;\n  int arg2;\n  int arg3;\n};\n\nvoid some_function_wrapper(struct some_function_args* args) {\n  some_function(args-&gt;arg1, args-&gt;arg2, args-&gt;arg3);\n}\n\nint main() {\n  struct my_args;\n  my_args.arg1 = 1;\n  my_args.arg2 = 2;\n  my_args.arg3 = 3;\n\n  pthread_create(..., some_function_wrapper, &amp;my_args);\n  pthread_join(...);\n}\n</code></pre>\n\n<p>Is there some kind of macro or library (maybe using <code>varargs</code>) which automatically creates the needed structs and wrapper functions for me, like this? Or is this not possible at all in C?</p>\n\n<pre><code>int main() {\n  MY_THREAD thread = IN_THREAD {\n    some_function(1, 2, 3);\n  }\n\n  JOIN_THREAD(thread);\n}\n</code></pre>\n"}, {"tags": ["c", "numbers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1423081929, "post_id": 28330806, "comment_id": 45008859, "body": "Just a comment, please find a better name than <code>DividedByZero()</code>."}, {"owner": {"reputation": 241, "user_id": 4449107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FLYzS.jpg?s=128&g=1", "display_name": "Alan Salios", "link": "https://stackoverflow.com/users/4449107/alan-salios"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423082020, "post_id": 28330806, "comment_id": 45008918, "body": "I agree. If the code was mine.. I would name it  differently."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423082120, "post_id": 28330806, "comment_id": 45008974, "body": "No offence, still you&#39;re the poster here, so, if you please ..."}, {"owner": {"reputation": 241, "user_id": 4449107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FLYzS.jpg?s=128&g=1", "display_name": "Alan Salios", "link": "https://stackoverflow.com/users/4449107/alan-salios"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423082183, "post_id": 28330806, "comment_id": 45009006, "body": "Suggest a name then."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423082227, "post_id": 28330806, "comment_id": 45009034, "body": "If you know the correct result surely then you have some other working code..."}, {"owner": {"reputation": 241, "user_id": 4449107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FLYzS.jpg?s=128&g=1", "display_name": "Alan Salios", "link": "https://stackoverflow.com/users/4449107/alan-salios"}, "edited": false, "score": 0, "creation_date": 1423082280, "post_id": 28330806, "comment_id": 45009063, "body": "And also a problem in mine.. This is for educational purposes.. it will be considered cheating to copy/paste codes."}, {"owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1423082453, "post_id": 28330806, "comment_id": 45009154, "body": "@WeatherVane The first few amicable numbers are listed at <a href=\"http://oeis.org/A063990\" rel=\"nofollow noreferrer\">A063990 Amicable numbers</a> so it is easy to verify the sum for the desired code should be 31626."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1423082596, "post_id": 28330806, "comment_id": 45009236, "body": "A list of amicable numbers does not even make sense. Amicable numbers come in <i>pairs</i>."}, {"owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423082974, "post_id": 28330806, "comment_id": 45009457, "body": "@WeatherVane An excellent point. Fortunately, for checking the desired sum, &quot;The first time a pair is not adjacent is x = 67095, y = 71145&quot; (from my earlier link)."}], "answers": [{"tags": [], "owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "is_accepted": true, "score": 1, "last_activity_date": 1423084135, "creation_date": 1423084135, "answer_id": 28331485, "question_id": 28330806, "link": "https://stackoverflow.com/questions/28330806/amicable-numbers-function-gives-the-wrong-result/28331485#28331485", "title": "Amicable numbers function gives the wrong result", "body": "<p>When you have found (220, 284) you need to record that you have already found 284, otherwise when the loop iterates to 284 it will find 220 again.</p>\n\n<p>Crudely, with no thought given to optimisation, and in VB:</p>\n\n<pre><code>Sub ListAmicablePairs()\n    Dim alreadyFound As New List(Of Integer)\n    For i = 1 To 9999\n        Dim spd1 = SumProperDivisors(i)\n        Dim spd2 = SumProperDivisors(spd1)\n        If spd2 = i AndAlso spd1 &lt;&gt; i AndAlso Not alreadyFound.Contains(i) Then\n            alreadyFound.Add(i)\n            alreadyFound.Add(spd1)\n            Console.WriteLine(\"({0}, {1})\", i, spd1)\n        End If\n    Next\n\n    Console.WriteLine(alreadyFound.Sum())\n\nEnd Sub\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>(220, 284)<br />\n  (1184, 1210)<br />\n  (2620, 2924)<br />\n  (5020, 5564)<br />\n  (6232, 6368)<br />\n  31626</p>\n</blockquote>\n"}], "owner": {"reputation": 241, "user_id": 4449107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FLYzS.jpg?s=128&g=1", "display_name": "Alan Salios", "link": "https://stackoverflow.com/users/4449107/alan-salios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 28331485, "answer_count": 1, "score": 0, "last_activity_date": 1423084135, "creation_date": 1423081664, "last_edit_date": 1423082650, "question_id": 28330806, "link": "https://stackoverflow.com/questions/28330806/amicable-numbers-function-gives-the-wrong-result", "title": "Amicable numbers function gives the wrong result", "body": "<p>As <a href=\"https://projecteuler.net/problem=21\" rel=\"nofollow\">this</a> link describes I have to create a code for computing the sum of all amicable numbers in the range.. The code I have:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint SumProperDivisors(int Number);\n\nint main(void) {\n    //a != b , if d(b) = a ve d(a) = b\n    int DividedSum = 0;\n    int index = 0;\n    int temp = 0;\n    int sum = 0;\n    for(index = 1; index&lt;10000; index++)\n    {\n        DividedSum = SumProperDivisors(index); //a\n        temp=SumProperDivisors(DividedSum);   //b\n        if(DividedSum!=temp)\n        {\n            if(SumProperDivisors(temp)==DividedSum&amp;&amp;SumProperDivisors(DividedSum)==temp)\n            {\n            //  printf(\"%d \",index);\n                sum +=index;\n                printf(\"%d \",sum);\n            }\n\n        }\n\n    }\n    printf(\"\\n\\n%d\",sum);\n\n\n    return 0;\n}\n\n\nint SumProperDivisors(int Number)\n{\n    int index;\n    int sum = 0;\n    for(index = 1; index &lt; Number; ++index)\n    {\n        if((Number%index)==0)\n        {\n            sum += index;\n        }\n    }\n    return sum;\n}\n</code></pre>\n\n<p>Produces the wrong result of <code>63968</code> while the correct result should be <code>31626</code>. I am asking this in the name of a friend.\nSo what am I doing wrong?</p>\n"}, {"tags": ["c", "matrix", "3d", "projection"], "comments": [{"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "edited": false, "score": 0, "creation_date": 1423094563, "post_id": 28330642, "comment_id": 45014571, "body": "At least <code>m3d_matVecMul(mvp, vertex, vertex)</code> overwrites the input vertex with the parts of the result during the multiplication if i am not mistaken. Arrays are always passed by pointer, so you cannot modify vertex via the const vector, but as destination points to the same adress you can via destination. I suggest you check the other methods as well and take pen and paper to verify the matrix computations for at least one non-trivial example (or matlab)."}, {"owner": {"reputation": 403, "user_id": 3563584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec31bcecc56f74f551d692c31cd3857?s=128&d=identicon&r=PG&f=1", "display_name": "user3563584", "link": "https://stackoverflow.com/users/3563584/user3563584"}, "reply_to_user": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "edited": false, "score": 0, "creation_date": 1423164621, "post_id": 28330642, "comment_id": 45048639, "body": "hi! thx for your comment. actually thats intended. the values are overridden because the old values are no longer needed. in the end i only want the projected coordinates. as far as i can see that shouldnt be a problem, right? ill try verifying the calculations by hand but im unsure if that leads to a solution."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 3563584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec31bcecc56f74f551d692c31cd3857?s=128&d=identicon&r=PG&f=1", "display_name": "user3563584", "link": "https://stackoverflow.com/users/3563584/user3563584"}, "edited": false, "score": 0, "creation_date": 1423256483, "post_id": 28355120, "comment_id": 45089809, "body": "Thank you for your patience! im currently very busy, so i cant test it right now but i will soon. you already helped me a lot. at least now i know where to look at. the &quot;frustum - workaround&quot; is just a convenience method. i got that from <a href=\"http://www.scratchapixel.com/\" rel=\"nofollow noreferrer\">scratchapixel</a>. i use negative z values because as far as i know, in openGL the camera is at 0,0,0 and looks down the nagative z-axis, so if the near and far plane should be in front of the camera, they need to be negative. could be wrong..."}, {"owner": {"reputation": 403, "user_id": 3563584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec31bcecc56f74f551d692c31cd3857?s=128&d=identicon&r=PG&f=1", "display_name": "user3563584", "link": "https://stackoverflow.com/users/3563584/user3563584"}, "edited": false, "score": 0, "creation_date": 1423257339, "post_id": 28355120, "comment_id": 45090220, "body": "The code for the &quot;frustum workaround&quot; can also be found in the <a href=\"https://www.opengl.org/wiki/GluPerspective_code\" rel=\"nofollow noreferrer\">OpenGL wiki</a>"}, {"owner": {"reputation": 403, "user_id": 3563584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec31bcecc56f74f551d692c31cd3857?s=128&d=identicon&r=PG&f=1", "display_name": "user3563584", "link": "https://stackoverflow.com/users/3563584/user3563584"}, "edited": false, "score": 0, "creation_date": 1423327966, "post_id": 28355120, "comment_id": 45107276, "body": "The negative z-Values for zNear and zFar seem to be the problem. It works flawlessly with positive values. Thx again."}, {"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "reply_to_user": {"reputation": 403, "user_id": 3563584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec31bcecc56f74f551d692c31cd3857?s=128&d=identicon&r=PG&f=1", "display_name": "user3563584", "link": "https://stackoverflow.com/users/3563584/user3563584"}, "edited": false, "score": 0, "creation_date": 1423406006, "post_id": 28355120, "comment_id": 45126509, "body": "Near and far simply give the distance to the camera and thus are always positive."}, {"owner": {"reputation": 3073, "user_id": 1794325, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6e07bced62ad0add133721e4c71a9af?s=128&d=identicon&r=PG&f=1", "display_name": "user18490", "link": "https://stackoverflow.com/users/1794325/user18490"}, "edited": false, "score": 0, "creation_date": 1423673689, "post_id": 28355120, "comment_id": 45245985, "body": "Near and Far clipping planes explained: <a href=\"http://www.scratchapixel.com/lessons/3d-basic-rendering/3d-viewing-pinhole-camera/virtual-pinhole-camera-model\" rel=\"nofollow noreferrer\">scratchapixel.com/lessons/3d-basic-rendering/&hellip;</a>"}], "tags": [], "owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "is_accepted": true, "score": 0, "last_activity_date": 1423174561, "creation_date": 1423174561, "answer_id": 28355120, "question_id": 28330642, "link": "https://stackoverflow.com/questions/28330642/3d-perspective-projection-coordinates-in-clip-space/28355120#28355120", "title": "3D perspective projection coordinates in clip space", "body": "<p>Okay, i have looked at your code again and i think there is something wrong with your projection matrix calculation. I have replaced that <code>m3d_getPerspective</code> method with the definition from <a href=\"https://www.opengl.org/sdk/docs/man2/xhtml/gluPerspective.xml\" rel=\"nofollow\">gluPerspective</a> and added a printMatrix (pm) method. For some example points the results seem reasonable now (code below).</p>\n\n<p>I have not specifically found your bug as i am not sure why exactly you do this frustum - workaround. A hint may be that you seemed to use a <code>tanf</code> where i now used a cotangens, but this wasn't the complete problem i think. Also, setting near and far to negative values is not intuitive as they should represent distances. Your multiplications seem to be okay, i did not recognize you were copying the vertex to x,y,z,w at first.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define DEG2RAD 0.01745329f\n\nvoid m3d_matrixMul(const float matrix1[], const float matrix2[], float destination[])\n{\n    int i, row, col;\n\n    for (i = 15; i &gt;= 0; i--)\n    {\n        row = i % 4;\n        col = i / 4 * 4;\n        destination[i] = matrix1[row] * matrix2[col] + matrix1[row + 4] * matrix2[col + 1] + matrix1[row + 8] * matrix2[col + 2] + matrix1[row + 12] * matrix2[col + 3];\n    }\n}\n\nvoid m3d_matVecMul(const float matrix[], const float vector[], float destination[])\n{\n    float x = vector[0], y = vector[1], z = vector[2], w = vector[3];\n\n    destination[0] = x * matrix[0] + y * matrix[4] + z * matrix[8] + w * matrix[12];\n    destination[1] = x * matrix[1] + y * matrix[5] + z * matrix[9] + w * matrix[13];\n    destination[2] = x * matrix[2] + y * matrix[6] + z * matrix[10] + w * matrix[14];\n    destination[3] = x * matrix[3] + y * matrix[7] + z * matrix[11] + w * matrix[15];\n}\n\n//not used anymore\nvoid m3d_getFrustum(float left, float right, float bottom, float top, float near, float far, float matrix[])\n{\n    matrix[0] = 2.0f * near / (right - left);\n    matrix[1] = 0.0f;\n    matrix[2] = 0.0f;\n    matrix[3] = 0.0f;\n    matrix[4] = 0.0f;\n    matrix[5] = 2.0f * near / (top - bottom);\n    matrix[6] = 0.0f;\n    matrix[7] = 0.0f;\n    matrix[8] = (right + left) / (right - left);\n    matrix[9] = (top + bottom) / (top - bottom);\n    matrix[10] = -(far + near) / (far - near);\n    matrix[11] = -1.0f;\n    matrix[12] = 0.0f;\n    matrix[13] = 0.0f;\n    matrix[14] = -2.0f * far * near / (far - near);\n    matrix[15] = 0.0f;\n}\n\nvoid m3d_getPerspective(float vfov, float aspect, float near, float far, float matrix[])\n{\n    float f = 1.0f/tanf(vfov * 0.5f * DEG2RAD);\n\n    matrix[0] = f/aspect;\n    matrix[1] = 0.0f;\n    matrix[2] = 0.0f;\n    matrix[3] = 0.0f;\n\n    matrix[4] = 0.0f;\n    matrix[5] = f;\n    matrix[6] = 0.0f;\n    matrix[7] = 0.0f;\n\n    matrix[8] = 0;\n    matrix[9] = 0;\n    matrix[10] = (near+far)/(near-far);\n    matrix[11] = -1;\n\n    matrix[12] = 0.0f;\n    matrix[13] = 0.0f;\n    matrix[14] = 2.0f * far * near / (near-far);\n    matrix[15] = 0.0f;\n\n\n\n}\n\nvoid m3d_getIdentity(float matrix[])\n{\n    matrix[0] = 1.0f;\n    matrix[1] = 0.0f;\n    matrix[2] = 0.0f;\n    matrix[3] = 0.0f;\n    matrix[4] = 0.0f;\n    matrix[5] = 1.0f;\n    matrix[6] = 0.0f;\n    matrix[7] = 0.0f;\n    matrix[8] = 0.0f;\n    matrix[9] = 0.0f;\n    matrix[10] = 1.0f;\n    matrix[11] = 0.0f;\n    matrix[12] = 0.0f;\n    matrix[13] = 0.0f;\n    matrix[14] = 0.0f;\n    matrix[15] = 1.0f;\n}\n\nvoid m3d_translate(float x, float y, float z, float matrix[])\n{\n    matrix[12] += x;\n    matrix[13] += y;\n    matrix[14] += z;\n}\n\nvoid pm(float* m) {\n    printf(\"%f, %f, %f, %f\\n\", m[0], m[4], m[8], m[12]);\n    printf(\"%f, %f, %f, %f\\n\", m[1], m[5], m[9], m[13]);\n    printf(\"%f, %f, %f, %f\\n\", m[2], m[6], m[10], m[14]);\n    printf(\"%f, %f, %f, %f\\n\", m[3], m[7], m[11], m[15]);\n    printf(\"\\n\");\n}\n\nint main(void)\n{\n    //float vertex[4] = {0.0f, 0.0f, -1000.0f, 1.0f}; //point at center &amp; far\n    //float vertex[4] = {0.0f, 0.0f, -0.5f, 1.0f}; //point at center &amp; near\n    float vertex[4] = {(800.0f/600.0f)*1.0f, 1.0f, -2.0f, 1.0f}; //point at one quater of the x and y range\n    float modelView[16];\n    float projection[16];\n    float mvp[16];\n    char buffer[4];\n\n    m3d_getIdentity(modelView);\n    pm(modelView);\n    m3d_translate(0.0f, 0.0f, 0.0f, modelView); \n    pm(modelView);\n    m3d_getPerspective(90.0f, 800.0f / 600.0f, 0.5f, 1000.0f, projection);\n    pm(projection);\n    m3d_matrixMul(projection, modelView, mvp);\n    pm(mvp);\n    m3d_matVecMul(mvp, vertex, vertex);\n\n    printf(\"Projected vertex: %f, %f, %f, %f\\n\", vertex[0], vertex[1], vertex[2], vertex[3]);\n    printf(\"Press ENTER to quit.\");\n    fgets(buffer, 4, stdin);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 3563584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec31bcecc56f74f551d692c31cd3857?s=128&d=identicon&r=PG&f=1", "display_name": "user3563584", "link": "https://stackoverflow.com/users/3563584/user3563584"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 28355120, "answer_count": 1, "score": 1, "last_activity_date": 1423174561, "creation_date": 1423081013, "last_edit_date": 1423174147, "question_id": 28330642, "link": "https://stackoverflow.com/questions/28330642/3d-perspective-projection-coordinates-in-clip-space", "title": "3D perspective projection coordinates in clip space", "body": "<p>i am trying to 3D project a few points. from what i have read, after the projection matrix is applied to a vertex, the vertex ends up in clip space. at this point if -w &lt; x,y,z &lt; w the vertex is visible, else it is outside the visible area and it needs to be clipped. the problem i have is that i cant get a vertex to be -w &lt; x,y,z &lt; w. i must be doing something wrong but i cant figure out what it is. i try to stick to openGL conventions where possible (coordinate system etc.). please have a look at this SSCCE.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define DEG2RAD 0.01745329f\n\n// multiplies two matrices\nvoid m3d_matrixMul(const float matrix1[], const float matrix2[], float destination[])\n{\n    int i, row, col;\n\n    for (i = 15; i &gt;= 0; i--)\n    {\n        row = i % 4;\n        col = i / 4 * 4;\n        destination[i] = matrix1[row] * matrix2[col] + matrix1[row + 4] * matrix2[col + 1] + matrix1[row + 8] * matrix2[col + 2] + matrix1[row + 12] * matrix2[col + 3];\n    }\n}\n\n// multiplies matrix with vector/vertex\nvoid m3d_matVecMul(const float matrix[], const float vector[], float destination[])\n{\n    float x = vector[0], y = vector[1], z = vector[2], w = vector[3];\n\n    destination[0] = x * matrix[0] + y * matrix[4] + z * matrix[8] + w * matrix[12];\n    destination[1] = x * matrix[1] + y * matrix[5] + z * matrix[9] + w * matrix[13];\n    destination[2] = x * matrix[2] + y * matrix[6] + z * matrix[10] + w * matrix[14];\n    destination[3] = x * matrix[3] + y * matrix[7] + z * matrix[11] + w * matrix[15];\n}\n\n// creates the projection matrix (column major)\nvoid m3d_getFrustum(float left, float right, float bottom, float top, float near, float far, float matrix[])\n{\n    matrix[0] = 2.0f * near / (right - left);\n    matrix[1] = 0.0f;\n    matrix[2] = 0.0f;\n    matrix[3] = 0.0f;\n    matrix[4] = 0.0f;\n    matrix[5] = 2.0f * near / (top - bottom);\n    matrix[6] = 0.0f;\n    matrix[7] = 0.0f;\n    matrix[8] = (right + left) / (right - left);\n    matrix[9] = (top + bottom) / (top - bottom);\n    matrix[10] = -(far + near) / (far - near);\n    matrix[11] = -1.0f;\n    matrix[12] = 0.0f;\n    matrix[13] = 0.0f;\n    matrix[14] = -2.0f * far * near / (far - near);\n    matrix[15] = 0.0f;\n}\n\nvoid m3d_getPerspective(float vfov, float aspect, float near, float far, float matrix[])\n{\n    float height = tanf(vfov * 0.5f * DEG2RAD) * near;\n    float width = aspect * height;\n    m3d_getFrustum(-width, width, -height, height, near, far, matrix);\n}\n\nvoid m3d_getIdentity(float matrix[])\n{\n    matrix[0] = 1.0f;\n    matrix[1] = 0.0f;\n    matrix[2] = 0.0f;\n    matrix[3] = 0.0f;\n    matrix[4] = 0.0f;\n    matrix[5] = 1.0f;\n    matrix[6] = 0.0f;\n    matrix[7] = 0.0f;\n    matrix[8] = 0.0f;\n    matrix[9] = 0.0f;\n    matrix[10] = 1.0f;\n    matrix[11] = 0.0f;\n    matrix[12] = 0.0f;\n    matrix[13] = 0.0f;\n    matrix[14] = 0.0f;\n    matrix[15] = 1.0f;\n}\n\nvoid m3d_translate(float x, float y, float z, float matrix[])\n{\n    matrix[12] += x;\n    matrix[13] += y;\n    matrix[14] += z;\n}\n\nint main(void)\n{\n    float vertex[4] = {0.5f, 0.5f, 0.5f, 1.0f};\n    float modelView[16];\n    float projection[16];\n    float mvp[16];\n    char buffer[4];\n\n    // initialize model-view matrix with identity matrix\n    m3d_getIdentity(modelView);\n    // add z-translation to model-view matrix\n    m3d_translate(0.0f, 0.0f, -2.0f, modelView);\n    // get perspective projection matrix\n    m3d_getPerspective(45.0f, 800.0f / 600.0f, -0.5f, -1000.0f, projection);\n    // fuse projection and model-view matrix into one matrix\n    m3d_matrixMul(projection, modelView, mvp);\n    // apply model-view-projection matrix to vertex\n    m3d_matVecMul(mvp, vertex, vertex);\n\n    printf(\"Projected vertex: %f, %f, %f, %f\\n\", vertex[0], vertex[1], vertex[2], vertex[3]);\n    printf(\"Press ENTER to quit.\");\n    fgets(buffer, 4, stdin);\n    return EXIT_SUCCESS;\n\n    // Projected vertex: 0.905330, 1.207107, 2.502001, 1.500000\n}\n</code></pre>\n\n<p>thx in advance.</p>\n"}, {"tags": ["javascript", "c", "node.js", "v8"], "comments": [{"owner": {"reputation": 5505, "user_id": 2067926, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc25a22a38947622abb89d0a27f8b53b?s=128&d=identicon&r=PG", "display_name": "Tomas M", "link": "https://stackoverflow.com/users/2067926/tomas-m"}, "edited": false, "score": 0, "creation_date": 1423080760, "post_id": 28330489, "comment_id": 45008255, "body": "This is similar to the following in javascript: var x=0.1+0.1+0.1; console.log(x); It will print 0.30000000000000004"}, {"owner": {"user_type": "does_not_exist", "display_name": "user395760"}, "reply_to_user": {"reputation": 5505, "user_id": 2067926, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc25a22a38947622abb89d0a27f8b53b?s=128&d=identicon&r=PG", "display_name": "Tomas M", "link": "https://stackoverflow.com/users/2067926/tomas-m"}, "edited": false, "score": 0, "creation_date": 1423080999, "post_id": 28330489, "comment_id": 45008410, "body": "@TomasMatejicek No, that&#39;s just ordinary floating point limitations. Here two implementations are inaccurate <i>in different ways</i>."}, {"owner": {"reputation": 5922, "user_id": 293612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da0d4ecb4ecc1139aa35985dd44abe7?s=128&d=identicon&r=PG&f=1", "display_name": "dwerner", "link": "https://stackoverflow.com/users/293612/dwerner"}, "edited": false, "score": 0, "creation_date": 1423081592, "post_id": 28330489, "comment_id": 45008707, "body": "@delnan - not totally getting how the C version is inaccurate, could you elaborate on that?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user395760"}, "edited": false, "score": 1, "creation_date": 1423081813, "post_id": 28330489, "comment_id": 45008810, "body": "@dwerner I never said that. Both are approximations. The important part is that those approximations are different. (But yes, the C code&#39;s result is incorrect, 729**15 =  8727963568087712425891397479476727340041449.)"}, {"owner": {"reputation": 5922, "user_id": 293612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da0d4ecb4ecc1139aa35985dd44abe7?s=128&d=identicon&r=PG&f=1", "display_name": "dwerner", "link": "https://stackoverflow.com/users/293612/dwerner"}, "edited": false, "score": 0, "creation_date": 1423082979, "post_id": 28330489, "comment_id": 45009459, "body": "@delnan - understood, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 5922, "user_id": 293612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da0d4ecb4ecc1139aa35985dd44abe7?s=128&d=identicon&r=PG&f=1", "display_name": "dwerner", "link": "https://stackoverflow.com/users/293612/dwerner"}, "edited": false, "score": 0, "creation_date": 1423758389, "post_id": 28430000, "comment_id": 45287292, "body": "- delnan triggered my understanding, but it&#39;s really great to have the supporting facts behind the problem. Thanks!"}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 1, "last_activity_date": 1423568222, "last_edit_date": 1423568222, "creation_date": 1423566061, "answer_id": 28430000, "question_id": 28330489, "link": "https://stackoverflow.com/questions/28330489/why-does-javascripts-math-pow-seem-to-return-a-rounded-value-compared-to-the/28430000#28430000", "title": "Why does Javascript&#39;s Math.pow() seem to return a rounded value compared to the same in C?", "body": "<p>ECMAScript (\"JavaScript\") doesn't make any guarantees about the precision of the <code>pow</code> function. <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.8.2.13\" rel=\"nofollow\">ECMA-262 says</a>:</p>\n\n<blockquote>\n  <p>Returns an implementation-dependent approximation to the result of raising x to the power y.</p>\n</blockquote>\n\n<p>Neither does the C language. Only the optional Annex F of the C99 spec refers to IEC 60559 (same as IEEE 754), but <code>pow</code> isn't one of the basic operations for which there are precision guarantees.</p>\n\n<p>In your case, the result you get from Node.js is slighty more inaccurate than the result from your C program, but this doesn't violate the spec. You simply have to live with this kind of differences. Calling <code>fmod</code> on huge floating point numbers is foolish anyway.</p>\n\n<p><strong>Edit:</strong> The reason for the discrepancy is probably excess precision of the x87 80-bit \"double extended\" format. Take the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, char *argv[]) {\n    int base = atoi(argv[1]);\n    int exp  = atoi(argv[2]);\n    printf(\"pow: %.15e\\n\", pow(base, exp));\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with gcc and no special options:</p>\n\n<pre><code>$ gcc -Wall -O2 pow.c -lm -o pow\n$ ./pow 729 15\npow: 8.727963568087712e+42\n</code></pre>\n\n<p>Compiled with <code>-mpc64</code>:</p>\n\n<pre><code>$ gcc -mpc64 -Wall -O2 pow.c -lm -o pow\n$ ./pow 729 15\npow: 8.727963568087713e+42\n</code></pre>\n"}], "owner": {"reputation": 5922, "user_id": 293612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1da0d4ecb4ecc1139aa35985dd44abe7?s=128&d=identicon&r=PG&f=1", "display_name": "dwerner", "link": "https://stackoverflow.com/users/293612/dwerner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 1, "accepted_answer_id": 28430000, "answer_count": 1, "score": 4, "last_activity_date": 1423568222, "creation_date": 1423080463, "question_id": 28330489, "link": "https://stackoverflow.com/questions/28330489/why-does-javascripts-math-pow-seem-to-return-a-rounded-value-compared-to-the", "title": "Why does Javascript&#39;s Math.pow() seem to return a rounded value compared to the same in C?", "body": "<p>My understanding is that both C's <code>double</code> and Javascript's numbers are IEEE 754 64 bit floating point numbers. I am trying to port some code from C to Nodejs, and I am running into what appears to be a rounding error in Javascript's <code>Math.pow()</code>.</p>\n\n<p>Here is my C program:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"math.h\"\n\nint main(int argc, char *argv[]) {\n  double shared = 729;\n  double exponent = 15;\n  double prime = 1500450271;\n  double power = pow(shared, exponent);\n  double mod = fmod(power, prime);\n  int intResult = (int) mod;\n  printf(\"shared: %lf, exponent: %lf, prime: %lf, pow: %lf, mod: %lf, result: %i\\n\",\n      shared, exponent, prime, power, mod, intResult); \n}\n</code></pre>\n\n<p>The output of which is:</p>\n\n<pre><code>shared: 729.000000, exponent: 15.000000, prime: 1500450271.000000, pow: 8727963568087711970669458465954849888403456.000000, mod: 1488486878.000000, result: 1488486878\n</code></pre>\n\n<p>Interestingly, when I try to perform this calculation in Javascript (tested in node, Chrome, Firefox)</p>\n\n<p>I get the following result:</p>\n\n<pre><code>&gt; Math.pow( 729, 15)\n8.727963568087713e+42\n&gt; Math.pow( 729, 15 ) % 1500450271;\n93655693\n</code></pre>\n\n<p>In addition, when I store the power result from C in a Javascript number:</p>\n\n<pre><code>&gt; 8727963568087711970669458465954849888403456.0\n8.727963568087712e+42\n</code></pre>\n\n<p>Note the difference -> <code>8.727963568087713e+42 !== 8.727963568087712e+42</code>, so understandably the modulo operation fails to produce the same result.</p>\n\n<p>I've had a look at the source for v8's implementation of Math.pow, but the masm macros look like greek to me atm.</p>\n\n<p>Any help here is appreciated.</p>\n"}, {"tags": ["c", "for-loop", "nested-loops"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423081657, "post_id": 28330470, "comment_id": 45008735, "body": "It runs as expected for me - each &quot;letter loop&quot; eventually ends after 64 inner loop executions, then the <code>y2</code> is slighty incremented and the letters start all over again."}, {"owner": {"reputation": 1159, "user_id": 1027402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFqLH.jpg?s=128&g=1", "display_name": "Onur Turhan", "link": "https://stackoverflow.com/users/1027402/onur-turhan"}, "edited": false, "score": 0, "creation_date": 1423081836, "post_id": 28330470, "comment_id": 45008823, "body": "Number loops includes another loop, which is letter loop. Outer (Number) loop count is 729000000 (30^6). And there is printf&#39;s in loops. Loop will end, if you wait for enough time (maybe 1~2 day)."}, {"owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082067, "post_id": 28330470, "comment_id": 45008946, "body": "@PaulRoub The letter start all over again? It is supposed to stop looping completely and start looping the letters after it&#39;s done looping the letters"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082161, "post_id": 28330470, "comment_id": 45008996, "body": "You mean &quot;after it&#39;s done looping the <i>numbers</i>&quot;? If so, you probably don&#39;t want the letter loop <i>inside</i> the number loop."}, {"owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "reply_to_user": {"reputation": 1159, "user_id": 1027402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFqLH.jpg?s=128&g=1", "display_name": "Onur Turhan", "link": "https://stackoverflow.com/users/1027402/onur-turhan"}, "edited": false, "score": 0, "creation_date": 1423082255, "post_id": 28330470, "comment_id": 45009050, "body": "@OnurTurhan I know that the number loop will take a long time to loop. But the letter loop is short and I want it to start looping the numbers after the letter loop is finished"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082358, "post_id": 28330470, "comment_id": 45009103, "body": "Fixed the indentation of the code, to highlight the fact that the letter loop is <i>inside</i> the number loop, and so will run <i>every</i> time the number loop increments."}, {"owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082392, "post_id": 28330470, "comment_id": 45009122, "body": "@PaulRoub Sorry I was meant to say that I want the number loop to start after the letter loop."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082454, "post_id": 28330470, "comment_id": 45009155, "body": "Then you should, again, move the letter loop <i>out</i> of the number loop - and place it <i>before</i> the number loop."}, {"owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082752, "post_id": 28330470, "comment_id": 45009335, "body": "@PaulRoub I did try to do that at first, but when running the code, it doesn&#39;t save the letter loop in the compiler when starting to loop the numbers"}, {"owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082855, "post_id": 28330470, "comment_id": 45009391, "body": "@PaulRoub as soon as it begins to loop the numbers after the letter loop, the letter loops disappears and you&#39;re not able to scroll up in the compiler to check on it"}, {"owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423082933, "post_id": 28330470, "comment_id": 45009435, "body": "@PaulRoub And i though the reason for this was because they are in different loops that&#39;s why i tried to nest them together"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423083603, "post_id": 28330470, "comment_id": 45009793, "body": "So you want want to run before the other, but... you also want them both running at the same time? I confess, at this point I have <i>no</i> idea what you&#39;re expecting to happen."}, {"owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423083799, "post_id": 28330470, "comment_id": 45009889, "body": "@PaulRoub I want the letter to loop before the number, yes. But as the number starts to run I want to be able to scroll up in the compiler and check the letter loop. The problem is that when the number loop starts to loop after the letter loop, the letter loop disappears from the compiler."}], "owner": {"reputation": 81, "user_id": 4530215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4530215/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423082266, "creation_date": 1423080387, "last_edit_date": 1423082266, "question_id": 28330470, "link": "https://stackoverflow.com/questions/28330470/looping-letters-and-numbers", "title": "Looping letters and numbers", "body": "<p>I'm trying to loop through a bunch of letters and <em>then</em> looping thorugh numbers, however, I'm running into problems. </p>\n\n<p>The problem is that the letters won't stop looping.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;ctype.h&gt;\n\nint inuti(double x, double y, double x1, double y1, double x2, double y2) {\n  int x_inuti;\n  int y_inuti;\n\n  if (x1 &lt; x2)\n    x_inuti = x &gt; x1 &amp;&amp; x &lt; x2;\n  else\n    x_inuti = x &gt; x2 &amp;&amp; x &lt; x1;\n  if (y1 &lt; y2)\n    y_inuti = y &gt; y1 &amp;&amp; y &lt; y2;\n  else\n    y_inuti = y &gt; y2 &amp;&amp; y &lt; y1;\n  return x_inuti &amp;&amp; y_inuti;\n}\n\nint main(void) {\n  double x, y, x1, y1, x2, y2;\n  char text_x, text_y, text_x1, text_y1, text_x2, text_y2;\n  int resultat;\n  int i, i2, i3, i4, i5, i6;\n\n  char tecken[] = \"ab\";// cdefgABCDEFG. + -\";\n  char teckenback[] = \"-+\";// .GFEDXBAgfedcba\";\n  int max;\n  int maxback;\n  max = strlen(tecken);\n  maxback = strlen(teckenback);\n\n      //This is the number loop     \n  for (x = 0; x &lt;= 3; x+=0.1) {\n    for (y = 0; y &lt;= 3; y+=0.1) {\n      for (x1 = 0; x1 &lt;= 3; x1+=0.1) {\n        for (y1 = 0; y1 &lt;= 3; y1+=0.1) {\n          for (x2 = 0; x2 &lt;= 3; x2+=0.1) {\n            for (y2 = 0; y2 &lt;= 3; y2 += 0.1){\n\n              printf(\"punktens x-varde: %.1f \\n\", x);\n\n\n              printf(\"punktens y-varde: %.1f \\n\", y);\n\n              printf(\"\\n\");\n\n              printf(\"Ena hornets x-varde: %.1f \\n\", x1);\n\n\n              printf(\"Ena hornets y-varde: %.1f \\n\", y1);\n\n              printf(\"\\n\");\n\n              printf(\"Andra hornets x-varde %.1f \\n\", x2);\n\n\n              printf(\"Andra hornets y-varde %.1f \\n\", y2);\n\n              printf(\"\\n\");\n              resultat = inuti(x, y, x1, y1, x2, y2);\n\n\n              if (resultat == 1)\n                printf(\"Punkten var inuti rektangeln.\\n\");\n              else\n                printf(\"Punkten var utanfor rektangeln.\\n\");\n\n              printf(\"\\n\");\n              printf(\"\\n\");\n\n            //This is the letter loop. The problem is that it never stops here. But if commenting away the number loop, this runs and stops without a problem\n              for (i = 0; i &lt; max; i++) {\n                for (i2 = 0; i2 &lt; maxback; i2++) {\n                  for (i3 = 0; i3&lt; max; i3++) {\n                    for (i4 = 0; i4 &lt; maxback; i4++) {\n                      for (i5 = 0; i5 &lt; max; i5++) {\n                        for (i6 = 0; i6 &lt; maxback; i6++) {\n\n                          text_x = tecken[i];\n                          text_y = teckenback[i2];\n                          text_x1 = tecken[i3];\n                          text_y1 = teckenback[i4];\n                          text_x2 = tecken[i5];\n                          text_y2 = teckenback[i6];\n\n                          printf(\"punktens x-varde: %c \\n\", text_x);\n\n\n                          printf(\"punktens y-varde: %c \\n\", text_y);\n\n                          printf(\"\\n\");\n\n                          printf(\"Ena hornets x-varde: %c \\n\", text_x1);\n\n\n                          printf(\"Ena hornets y-varde: %c \\n\", text_y1);\n\n                          printf(\"\\n\");\n\n                          printf(\"Andra hornets x-varde %c \\n\", text_x2);\n\n\n                          printf(\"Andra hornets y-varde %c \\n\", text_y2);\n\n                          printf(\"\\n\");\n\n                          printf(\"##### Endast nummer tillatet! #####\");\n                          printf(\"\\n\");\n                          printf(\"\\n\");\n\n                        }\n                      }\n                    }\n                  }\n                }\n              }       \n            }\n          }\n        }\n      }\n    }\n  }\n\n  getchar();\n  return 0;\n}\n</code></pre>\n\n<p>When I commented the number loop, the letter loop worked perfectly. But somehow they can't work together. Does anyone know what the problem is?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1423095356, "creation_date": 1423095356, "answer_id": 28334028, "question_id": 28330426, "link": "https://stackoverflow.com/questions/28330426/my-code-continues-to-print-out-zeros-and-i-have-no-idea-why/28334028#28334028", "title": "My code continues to print out zeros and I have no idea why", "body": "<p>User input is confused without prompts and use of the <code>scanf()</code> trailing <code>'\\n'</code>.  Else code does work although some ideas may help.</p>\n\n<p>Strange to limit input numeric input to 1 character, - recommend dropping the <code>1</code> before the specifier.</p>\n\n<p>Also test against <code>== 1</code> rather than <code>!= EOF</code> to cope with non-numeric input.</p>\n\n<pre><code>// while (scanf(\"%1d\", &amp;numStudents) != EOF)\nwhile (puts(\"Enter students (0 to quit)\", scanf(\"%d\", &amp;numStudents) == 1)\n</code></pre>\n\n<p>Good idea to check results of user input.  Drop the <code>scanf()</code> trailing <code>'\\n'</code></p>\n\n<pre><code>// scanf(\"%1lf\\n\", &amp;amountSpent[i]);\nputs(\"Enter amount spent\");\nif (1 != scanf(\"%lf\", &amp;amountSpent[i])) {\n  return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3307636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e47c885515e0ae3c64e4a04d2a149509?s=128&d=identicon&r=PG&f=1", "display_name": "user3307636", "link": "https://stackoverflow.com/users/3307636/user3307636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423095356, "creation_date": 1423080238, "question_id": 28330426, "link": "https://stackoverflow.com/questions/28330426/my-code-continues-to-print-out-zeros-and-i-have-no-idea-why", "title": "My code continues to print out zeros and I have no idea why", "body": "<p>Does anybody see the error I seem to miss? It just continues to print 0.00 without stopping not sure why its doing. It was working earlier and I didn't make any changes to the while that would affect it so I'm really confused.</p>\n\n<p>`          </p>\n\n<pre><code> int main (int argc, const char * argv[])\n   {\nint i, j, numStudents;\ndouble total, average, difference, lessThan, greater, exchange;\n\n total = 0;\n\nwhile (scanf(\"%1d\", &amp;numStudents) != EOF)\n{\n    /* Ends program at zero */\n    if (!numStudents)\n    {\n        return 0;\n    }\n\n    double amountSpent[numStudents];\n\n    total = 0;\n    greater = 0;\n    lessThan = 0;\n\n        for(i = 0; i &lt; numStudents; i++)\n        {\n           scanf(\"%1lf\\n\", &amp;amountSpent[i]);\n            total += amountSpent[i];\n\n        }\n\n\n        /* cleans total, than calculates */\n\n        average = total/numStudents;\n\n\n\n    exchange = 0;\n\n        for(i = 0; i &lt; numStudents; i++)\n        {\n            difference = amountSpent[i] - average;\n\n            if (difference &lt; 0)\n            {\n                lessThan += difference;\n            }\n            else\n            {\n                greater += difference;\n            }\n\n        }\n\n /*   if (-lessThan &gt; greater)\n    {\n            exchange = -lessThan;\n    }\n\n    else\n    {\n        exchange = greater;\n    }\n   */\n\n    exchange = (-lessThan &gt; greater)? -lessThan : greater;\n    printf(\"$%.2f\\n\", exchange);\n\n}\nreturn 0;\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["c", "loops", "for-loop"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1423079855, "post_id": 28330269, "comment_id": 45007718, "body": "FYI, there is no logic in your code to perform <code>Sum</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4276435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0d1c6a8e128f098aa897951e57280?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/4276435/dimitri"}, "edited": false, "score": 0, "creation_date": 1423080116, "post_id": 28330319, "comment_id": 45007865, "body": "yes you are write i add another variable and it stops only after 10 inputed numbers but doesnt show the write sum"}, {"owner": {"reputation": 1, "user_id": 4276435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0d1c6a8e128f098aa897951e57280?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/4276435/dimitri"}, "edited": false, "score": 0, "creation_date": 1423080158, "post_id": 28330319, "comment_id": 45007894, "body": "i change only this:  int sum; \tfor(sum = 0; sum &lt; 10; sum++){"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4276435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0d1c6a8e128f098aa897951e57280?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/4276435/dimitri"}, "edited": false, "score": 0, "creation_date": 1423080202, "post_id": 28330319, "comment_id": 45007924, "body": "@Dimitri you&#39;ve to add a <code>break</code> statement , too. hang on, a solution is on the way. :-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4276435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0d1c6a8e128f098aa897951e57280?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/4276435/dimitri"}, "edited": false, "score": 0, "creation_date": 1423080511, "post_id": 28330319, "comment_id": 45008105, "body": "@Dimitri with all due respect, which part of <code>hang on, a solution is on the way</code> was not understood ?"}, {"owner": {"reputation": 1, "user_id": 4276435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0d1c6a8e128f098aa897951e57280?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/4276435/dimitri"}, "edited": false, "score": 0, "creation_date": 1423080562, "post_id": 28330319, "comment_id": 45008145, "body": "<code>#include &lt;stdio.h&gt; int main(){ \tint num = 0; \tint sum; \tfor(sum = 0; sum &lt; 10; sum++){ \t\tprintf(&quot;Introduza um numero: \\n&quot;); \t\tscanf(&quot;%d&quot;, &amp;num); \t\tif(num == 0){ \t\t\tprintf(&quot;Soma: %d\\n&quot;, num); \t\t\tbreak; \t\t} \t} \tprintf(&quot;Soma: %d\\n&quot;, num); \tgetchar(); \tgetchar(); }</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4276435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0d1c6a8e128f098aa897951e57280?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/4276435/dimitri"}, "edited": false, "score": 0, "creation_date": 1423080661, "post_id": 28330319, "comment_id": 45008201, "body": "@Dimitri I&#39;m extremely sorry, but a code in a <i>comment</i> is not so good to be read by humans. Why don&#39;t you try out the code given in my answer?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423080863, "last_edit_date": 1423080863, "creation_date": 1423079919, "answer_id": 28330319, "question_id": 28330269, "link": "https://stackoverflow.com/questions/28330269/c-for-condition/28330319#28330319", "title": "C FOR Condition", "body": "<p>The problem in your code is, you're using the same variable <code>num</code> both as counter and for taking user input which is breaking the logic in <code>for</code> loop.</p>\n\n<p>Use another variable for taking user input.</p>\n\n<p>Also, you've to have a <code>break</code> statement to discontinue the <code>for</code> loop once you've got the breaking criteria.</p>\n\n<p>Note: as I mentioned in my comments, there is no logic for <code>Sum</code>.</p>\n\n<hr>\n\n<p>Check the below code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n        int num = 0;\n        int sum = 0;    //to hold the sum\n        int input = 0;\n        for(num = 0; num &lt; 10; num++){\n                printf(\"Input a number: \\n\");\n                scanf(\"%d\", &amp;input);\n                sum += input;                  // yoo-hoo, time to add-up\n                if(input == 0){\n                        printf(\"Sum: %d\\n\", sum);\n                        break;               // time to say bye-bye to for loop\n                }\n        }\n        if (num == 10)              //only print if not printed previously\n        printf(\"Sum: %d\\n\", sum);\n        return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 0, "creation_date": 1423081514, "post_id": 28330430, "comment_id": 45008666, "body": "Although correct, isn&#39;t it a bit weird to have the same piece of code twice in the program, while the if body could be reduced to a simple break statement?"}, {"owner": {"reputation": 4510, "user_id": 2913723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3jxhB.jpg?s=128&g=1", "display_name": "sabbir.alam", "link": "https://stackoverflow.com/users/2913723/sabbir-alam"}, "reply_to_user": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 0, "creation_date": 1423082088, "post_id": 28330430, "comment_id": 45008959, "body": "Well if we use break statement the code will then perform 2 extra task namely &quot;printf() and getchar()&quot;, But if we use return 0 it will terminate immediately."}, {"owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 1, "creation_date": 1423082178, "post_id": 28330430, "comment_id": 45009002, "body": "The getchar() statement is placed there because, otherwise, the program would terminate and probably the window hosting the program would close. That way, the user would have no way of reading the sum, as the windows would disappear nearly-instantly after the sum would be displayed. Also, I&#39;m suggesting you remove both the printf and the return statements from the if body and only keep a break statement."}, {"owner": {"reputation": 4510, "user_id": 2913723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3jxhB.jpg?s=128&g=1", "display_name": "sabbir.alam", "link": "https://stackoverflow.com/users/2913723/sabbir-alam"}, "reply_to_user": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 0, "creation_date": 1423082275, "post_id": 28330430, "comment_id": 45009059, "body": "Thats correct. I should use one getchar() before return 0; thanks @naltipar"}], "tags": [], "owner": {"reputation": 4510, "user_id": 2913723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3jxhB.jpg?s=128&g=1", "display_name": "sabbir.alam", "link": "https://stackoverflow.com/users/2913723/sabbir-alam"}, "is_accepted": true, "score": 1, "last_activity_date": 1423082322, "last_edit_date": 1423082322, "creation_date": 1423080264, "answer_id": 28330430, "question_id": 28330269, "link": "https://stackoverflow.com/questions/28330269/c-for-condition/28330430#28330430", "title": "C FOR Condition", "body": "<p>I think you want to do this kind of work with your code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\nint num = 0;\nint sum=0;\nfor(num = 0; num &lt; 10; num++){\n   int i;\n   printf(\"Input a number: \\n\");\n   scanf(\"%d\", &amp;i);\n   sum = sum+i;\n   if(i == 0){\n      printf(\"Sum: %d\\n\", sum);\n      getchar();\n      return 0;\n   }\n}\nprintf(\"Sum: %d\\n\", sum);\ngetchar();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "is_accepted": false, "score": 1, "last_activity_date": 1423080766, "last_edit_date": 1423080766, "creation_date": 1423080306, "answer_id": 28330438, "question_id": 28330269, "link": "https://stackoverflow.com/questions/28330269/c-for-condition/28330438#28330438", "title": "C FOR Condition", "body": "<p>You are changing the value of the counter inside the for loop. That's why, when you read a value greater than or equal to 10, it will abandon the for loop, since you have the condition <code>num &lt; 10</code>.</p>\n\n<p>Let me tweak the code for you:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    int sum = 0;\n    int i;\n    int num;\n    for(i = 0; i &lt; 10; i++){\n        printf(\"Input a number: \\n\");\n        scanf(\"%d\", &amp;num);\n        sum += num;\n        if(num == 0){\n            break; //means leave the loop\n        }\n    }\n    printf(\"Sum: %d\\n\", sum);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>I'm using 3 variables: </p>\n\n<ol>\n<li><code>sum</code>, which is used to store the overall sum.</li>\n<li><code>i</code>, which is used as the <code>for loop</code> counter.</li>\n<li><code>num</code>, which is used to store the current number given by the user.</li>\n</ol>\n\n<p>First of all, I'm waiting for an input:</p>\n\n<pre><code>printf(\"Input a number: \\n\");\nscanf(\"%d\", &amp;num);\n</code></pre>\n\n<p>Now, the input is stored in num, so I'm upgrading the sum, to add the new value:</p>\n\n<pre><code>sum += num; \n</code></pre>\n\n<p>The I check if the current number is zero; in that case I'll just leave the loop:</p>\n\n<pre><code>if(num == 0){\n   break;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4276435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0d1c6a8e128f098aa897951e57280?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/4276435/dimitri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 28330430, "answer_count": 3, "score": -5, "last_activity_date": 1423082619, "creation_date": 1423079780, "last_edit_date": 1423082619, "question_id": 28330269, "link": "https://stackoverflow.com/questions/28330269/c-for-condition", "title": "C FOR Condition", "body": "<p>I need to create a simple program which asks for 10 numbers from user and then shows the sum of those numbers or, if the user gives 0 as input, stops and immediately displays the sum of those numbers, and I need to create it only by using a \"for\" condition. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\nint num = 0;\nfor(num = 0; num &lt; 10; num++){\n    printf(\"Input a number: \\n\");\n    scanf(\"%d\", &amp;num);\n    if(num == 0){\n        printf(\"Sum: %d\\n\", num);\n    }\n}\nprintf(\"Sum: %d\\n\", num);\ngetchar();\ngetchar();\n}\n</code></pre>\n\n<p>It stops only when the number is greater than \"10\".Whats wrong?</p>\n"}, {"tags": ["c", "bit-manipulation", "parity"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 2, "creation_date": 1423079970, "post_id": 28330233, "comment_id": 45007784, "body": "Where did you come across this? References are almost always helpful. Here, one needs to understand the type (and the size of x)."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1423085814, "post_id": 28330233, "comment_id": 45010918, "body": "Even funnier is that if you didn&#39;t have that last line (<code>x &amp;= 1</code>), you could restore the original <code>x</code> with <code>originalx = x ^ (x &gt;&gt; 1)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1423080169, "post_id": 28330380, "comment_id": 45007899, "body": "I suggest adding &quot;the last line selects the last bit&quot; to your answer."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1423080320, "post_id": 28330380, "comment_id": 45007991, "body": "And add the fact that the XOR operation is associative and commutative, otherwise, <i>this works out the same as individually XORing each bit together</i> would not be true."}, {"owner": {"reputation": 3076, "user_id": 2112731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0cd41c5afcd4701fbb21ca081bcb0c?s=128&d=identicon&r=PG", "display_name": "DoxyLover", "link": "https://stackoverflow.com/users/2112731/doxylover"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1423080331, "post_id": 28330380, "comment_id": 45007996, "body": "@MarcusM&#252;ller - thanks, I actually missed reading the last line."}], "tags": [], "owner": {"reputation": 3076, "user_id": 2112731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0cd41c5afcd4701fbb21ca081bcb0c?s=128&d=identicon&r=PG", "display_name": "DoxyLover", "link": "https://stackoverflow.com/users/2112731/doxylover"}, "is_accepted": false, "score": 1, "last_activity_date": 1423080133, "creation_date": 1423080133, "answer_id": 28330380, "question_id": 28330233, "link": "https://stackoverflow.com/questions/28330233/bitparity-code-for-odd-number-of-bits/28330380#28330380", "title": "bitparity code for odd number of bits", "body": "<p>The first line XORs the high 16 bits into the low 16 bits.</p>\n\n<p>The second line XORs the the high half of the low 16 bits into the low half.</p>\n\n<p>etc.</p>\n\n<p>Before the last line, the low bit contains the parity of the initial 32 bits but the other bits contain intermediate results (garbage). The last line clears all of the garbage bits.</p>\n\n<p>Each line takes half of the remaining values and XORs it into the other half. In total, because the XOR operation is associative and commutative, this works out the same as individually XORing each bit together.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1423081346, "creation_date": 1423081346, "answer_id": 28330724, "question_id": 28330233, "link": "https://stackoverflow.com/questions/28330233/bitparity-code-for-odd-number-of-bits/28330724#28330724", "title": "bitparity code for odd number of bits", "body": "<p>You're folding 32-bits to 16-bits, then 16 to 8, ... and finally 2 to 1. So how does folding work? Well let's take a simple example starting with a 4-bit number (shown in binary)</p>\n\n<pre><code>x = 1110\n</code></pre>\n\n<p>To fold it with <code>x ^= x &gt;&gt; 2</code> the calculation is</p>\n\n<pre><code>1110      // x three bits, odd parity\n0011      // x &gt;&gt; 2\n----\nxx01      // after the XOR, ignoring the upper bits\n</code></pre>\n\n<p>At this point, we've folded 4-bits into 2, and we only care about the 2 lsbs which are <code>01</code>. Note that the parity has been preserved, there's one bit set, and the parity is still odd. How did that happen? If you examine just the lower two bits, you see</p>\n\n<pre><code>10       // the lower two bits from the 4-bit number\n11       // the upper two bits from the 4-bit number\n01       // after exclusive-OR\n</code></pre>\n\n<p>The exclusive-OR converts the first column to <code>0</code>, which <strong>removes two bits from the result</strong>, but keeps the parity the same. And that's why it works. The exclusive-OR reduces the total bit count by 2 any time you have two <code>1</code>s in the same column. So if the original bit count was odd, the final bit count will be odd. If the original bit count was even, the final bit count will be even.</p>\n\n<p>Continuing with the example, fold it again with <code>x ^= x &gt;&gt; 1</code></p>\n\n<pre><code>01    // the lower 2 bits from the previous calculation\n00    // shifted by one\n--\nx1    // after the XOR, ignoring the upper bits\n</code></pre>\n\n<p>The final piece of the puzzle is the <code>x &amp;= 1</code> at the end. That throws away all of the upper bits, leaving the one-bit result.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4530199"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1423082724, "creation_date": 1423079656, "last_edit_date": 1423082724, "question_id": 28330233, "link": "https://stackoverflow.com/questions/28330233/bitparity-code-for-odd-number-of-bits", "title": "bitparity code for odd number of bits", "body": "<p>I came across this code while doing research for finding bit parity and have almost no idea why this works. Would anyone be able to enlighten me about its algorithm?</p>\n\n<pre><code>x ^= x &gt;&gt; 16\nx ^= x &gt;&gt; 8\nx ^= x &gt;&gt; 4\nx ^= x &gt;&gt; 2\nx ^= x &gt;&gt; 1\n\nx &amp;= 1;\n</code></pre>\n"}, {"tags": ["c", "structure", "fread"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1423079955, "post_id": 28330128, "comment_id": 45007776, "body": "Because <code>fread</code> (a) does not magically zero-terminate strings, and (b) does not magically convert ASCII (or any other encoding) to integers. Oh and (c) it doesn&#39;t truncate fields on spaces either. You may want to look to <code>fscanf</code>."}], "answers": [{"tags": [], "owner": {"reputation": 481, "user_id": 4005346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c4884ea80a661457a46d7b1f11660089?s=128&d=identicon&r=PG&f=1", "display_name": "minzchickenflavor", "link": "https://stackoverflow.com/users/4005346/minzchickenflavor"}, "is_accepted": false, "score": 0, "last_activity_date": 1423080930, "creation_date": 1423080930, "answer_id": 28330618, "question_id": 28330128, "link": "https://stackoverflow.com/questions/28330128/fread-is-reading-all-the-data-in-file-but-not-saving-it-in-a-as-definition-of-st/28330618#28330618", "title": "fread is reading all the data in file but not saving it in a as definition of structure", "body": "<p>I always do </p>\n\n<pre><code>memset(cr, 0, 20);\nfread(pt,19,1,fp);\n</code></pre>\n\n<p>So you always have a terminating null at the end</p>\n"}], "owner": {"reputation": 58, "user_id": 4410559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac76a9f4556f0dbd19a7d9894e8f9f8?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh Khanna", "link": "https://stackoverflow.com/users/4410559/rishabh-khanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423081243, "creation_date": 1423079298, "question_id": 28330128, "link": "https://stackoverflow.com/questions/28330128/fread-is-reading-all-the-data-in-file-but-not-saving-it-in-a-as-definition-of-st", "title": "fread is reading all the data in file but not saving it in a as definition of structure", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\ntypedef struct cr{\nchar name[20];\nint credit;\n}cr;\n\n\n\nvoid main(){\n\n int i ;\n FILE *fp;\n cr *ptr;\n cr data[20];\n clrscr();\n\n ptr=data;\n\n\n fp=fopen(\"c:\\\\new\\\\damn.txt\",\"rb\");\n fread(ptr,sizeof(cr),1,fp);\n printf(\"%s\\n\",ptr-&gt;name);\n\n\n\n\n\n\n getch();\n }\n</code></pre>\n\n<p>the file damn.txt has a string and an int with spaces in between them\ncontent : \" prateek 20\"</p>\n\n<p>but when i read this file with fread and then when i am printing the contents of the structure using %s and %d , i found out that all the content is stored in structure only in name array and nothing is stored in credit ? what is happening ?how can i read the structure in the format of sturcture ? and save it in the variables respectively ?why 20 is not storing in credit ?</p>\n"}, {"tags": ["c", "udp", "client"], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 1, "last_activity_date": 1423085662, "creation_date": 1423085662, "answer_id": 28331894, "question_id": 28330100, "link": "https://stackoverflow.com/questions/28330100/i-cant-figure-out-how-to-enter-the-recvfrom-parameters-in-this-udp-daytime-clie/28331894#28331894", "title": "I can&#39;t figure out how to enter the recvfrom parameters in this UDP daytime client", "body": "<p><code>serverlen</code> needs to be declared as <code>unsigned</code>, or as a <code>socklen_t</code>. You should have been able to deduce that from the error message.</p>\n"}], "owner": {"reputation": 371, "user_id": 4182202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tTLXm.jpg?s=128&g=1", "display_name": "countofmontecristo", "link": "https://stackoverflow.com/users/4182202/countofmontecristo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 0, "accepted_answer_id": 28331894, "answer_count": 1, "score": 0, "last_activity_date": 1423085662, "creation_date": 1423079183, "question_id": 28330100, "link": "https://stackoverflow.com/questions/28330100/i-cant-figure-out-how-to-enter-the-recvfrom-parameters-in-this-udp-daytime-clie", "title": "I can&#39;t figure out how to enter the recvfrom parameters in this UDP daytime client", "body": "<p>I'm making a simple UDP daytime client. I'm getting this when I try to compile. I've tried casting these to see if they would work but that doesn't lead anywhere. How should I go about entering these parameters with what I have (or am I missing something that should be put there)? </p>\n\n<pre><code>UDPday2.cpp:57:86: error: invalid conversion from \u2018int*\u2019 to \u2018socklen_t* {aka unsigned int*}\u2019 [-fpermissive]\n     n = recvfrom(sockfd, buf,(int) sizeof(buf), 0, (sockaddr*)&amp;serveraddr, &amp;serverlen);\n                                                                                      ^\nIn file included from UDPday2.cpp:6:0:\n/usr/include/i386-linux-gnu/sys/socket.h:174:16: error:   initializing argument 6 of \u2018ssize_t recvfrom(int, void*, size_t, int, sockaddr*, socklen_t*)\u2019 [-fpermissive]\n extern ssize_t recvfrom (int __fd, void *__restrict __buf, size_t __n,\n\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n\n#define BUFSIZE 1024\n\n\nvoid error(char *msg) {\n    perror(msg);\n    exit(0);\n}\n\nint main(int argc, char **argv) {\n    int sockfd, portno, n;\n    int serverlen;\n    struct sockaddr_in serveraddr;\n    struct hostent *server;\n    char *hostname;\n    char buf[BUFSIZE];\n\n        portno = 13;\n\n    if(argc == 1)\n        hostname = \"localhost\";\n    else\n        hostname = argv[1];\n\n    sockfd = socket(AF_INET, SOCK_DGRAM, 0);\n    if (sockfd &lt; 0)\n        error(\"socket\");\n      server = gethostbyname(hostname);\n    if (server == NULL) {\n        fprintf(stderr,\" no host %s\\n\", hostname);\n        exit(0);\n    }\n\n    bzero((char *) &amp;serveraddr, sizeof(serveraddr));\n    serveraddr.sin_family = AF_INET;\n    bcopy((char *)server-&gt;h_addr,\n          (char *)&amp;serveraddr.sin_addr.s_addr, server-&gt;h_length);\n    serveraddr.sin_port = htons(portno);\n\n    serverlen = sizeof(serveraddr);\n    n = sendto(sockfd, buf,(int)strlen(buf)+1, 0,(sockaddr*)&amp;serveraddr , serverlen);\n    if (n &lt; 0)\n      error(\"ERROR send\");\n\n    n = recvfrom(sockfd, buf,(int) sizeof(buf), 0, (sockaddr*)&amp;serveraddr, &amp;serverlen);\n    if (n &lt; 0)\n      error(\"ERROR  recvfrom\");\n    printf(\" %s\", buf);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "printf", "logical-operators"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1423079245, "post_id": 28329998, "comment_id": 45007399, "body": "Proper formatting of your code, particularly indentation, would make it <i>much</i> easier to read."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 4, "creation_date": 1423079265, "post_id": 28329998, "comment_id": 45007407, "body": "Adding a meaningful title would help, too."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1423079408, "post_id": 28329998, "comment_id": 45007504, "body": "I&#39;m sure this is a duplicate (I&#39;ve answered questions about <code>x &lt; y &lt; z</code> before)."}], "answers": [{"comments": [{"owner": {"reputation": 2925, "user_id": 1628893, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oVuGi.jpg?s=128&g=1", "display_name": "Pankrates", "link": "https://stackoverflow.com/users/1628893/pankrates"}, "edited": false, "score": 0, "creation_date": 1423079112, "post_id": 28330032, "comment_id": 45007339, "body": "Shouldn&#39;t that be <code>&amp;&amp;</code>?"}, {"owner": {"reputation": 1818, "user_id": 4491408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb320866c604eaa67685a61e799719f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4491408/rob"}, "edited": false, "score": 0, "creation_date": 1423079146, "post_id": 28330032, "comment_id": 45007355, "body": "The &amp;&amp; operator is what you need here, not ||."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1423079702, "last_edit_date": 1423079702, "creation_date": 1423078992, "answer_id": 28330032, "question_id": 28329998, "link": "https://stackoverflow.com/questions/28329998/bug-in-the-code/28330032#28330032", "title": "Bug in the code", "body": "<p>change </p>\n\n<pre><code>if (5&lt;days&lt;=10)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (5&lt;days &amp;&amp; days &lt;= 10)\n</code></pre>\n\n<p>same for other(s).</p>\n\n<p>Otherwise, in your code, the condition check behaves like </p>\n\n<pre><code>if ( (5 &lt; days) &lt;=10)\n</code></pre>\n\n<p>so, whatever value you enter for <code>days</code> [<code>6</code> and above, keeping the first <code>if</code> in mind], the result of the <code>&lt;</code> operation will always produce either <code>0</code> or <code>1</code>, both being <code>&lt;= 10</code>, thus making the condition TRUE, printing <code>fine Rs. 1</code>.</p>\n\n<p>Related Reading: <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">C operator precedence</a>.</p>\n\n<p>Note: It's a good practice to add a <code>return</code> statement before the closing <code>}</code> of <code>main()</code></p>\n"}, {"tags": [], "owner": {"reputation": 583, "user_id": 3759486, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/6544bbab397488df1092146f0f67dd0f?s=128&d=identicon&r=PG&f=1", "display_name": "Tejas K", "link": "https://stackoverflow.com/users/3759486/tejas-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1423079605, "creation_date": 1423079605, "answer_id": 28330220, "question_id": 28329998, "link": "https://stackoverflow.com/questions/28329998/bug-in-the-code/28330220#28330220", "title": "Bug in the code", "body": "<p>It's due to the second if condition, i don't know if it is allowed to use condition the way you used in you code as:</p>\n\n<pre><code>if (5&lt;days&lt;=10)\n</code></pre>\n\n<p>edit it to</p>\n\n<pre><code>if(days &gt; 5 &amp;&amp; days &lt;= 10)\n</code></pre>\n\n<p>and it will work, also edit the third condition accordingly.</p>\n"}, {"tags": [], "owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "is_accepted": false, "score": 2, "last_activity_date": 1423079895, "creation_date": 1423079895, "answer_id": 28330312, "question_id": 28329998, "link": "https://stackoverflow.com/questions/28329998/bug-in-the-code/28330312#28330312", "title": "Bug in the code", "body": "<p>C parses statements (such as <code>if(5&lt;days&lt;=10)</code>) in pieces, rather than trying to interpret them holistically.  What this means is that the compiler reads <code>if(5&lt;days&lt;=10)</code> as <code>if((5&lt;days)&lt;=10)</code>.  Note that this means that the <strong>result</strong> of <code>5&lt;days</code> is compared to <code>10</code>, not the variable <code>days</code>.  To expand, the result of any comparison operator (<code>&lt;</code>, <code>&gt;</code>, <code>==</code>, etc) is an integer representing whether it is true or false (this is called a <code>boolean</code> value, a value which is either true or false), 1 or 0 respectively.  So, assuming <code>5&lt;days</code> is true, the next comparison is <code>1&lt;=10</code> (or <code>0&lt;=10</code> if days is smaller than 5), which of course is always true.</p>\n\n<p>To fix this, use the comparison operator <code>&amp;&amp;</code> (and).  <code>if(5 &lt; days &amp;&amp; days &lt;= 10)</code> is parsed as <code>((5 &lt; days) &amp;&amp; (days &lt;= 10))</code>, so you are correctly first comparing the <code>days</code> variable to <code>5</code> and <code>10</code>, then taking the truth value of each of those statements and seeing if <code>5 &lt; days</code> <strong>and</strong> <code>days &lt;= 10</code> is true.</p>\n\n<p>One last point - <code>0</code> is always false, any non-zero is always true, so <code>if(0)</code> will always be false and <code>if(5)</code> will always be true.</p>\n"}, {"tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1423121592, "creation_date": 1423121592, "answer_id": 28338484, "question_id": 28329998, "link": "https://stackoverflow.com/questions/28329998/bug-in-the-code/28338484#28338484", "title": "Bug in the code", "body": "<pre><code>if (5&lt;days&lt;=10)\n</code></pre>\n\n<p>is not of the right syntax</p>\n\n<p>it should be</p>\n\n<pre><code>if(5&lt;days &amp;&amp; days&lt;=10)\n</code></pre>\n\n<p>change it and your problem should be solved.   :)</p>\n"}], "owner": {"reputation": 1, "user_id": 3971970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237d04efdbed026af3fbb87242d1564f?s=128&d=identicon&r=PG&f=1", "display_name": "raul j.", "link": "https://stackoverflow.com/users/3971970/raul-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 4, "score": -6, "last_activity_date": 1423806473, "creation_date": 1423078897, "last_edit_date": 1423806473, "question_id": 28329998, "link": "https://stackoverflow.com/questions/28329998/bug-in-the-code", "title": "Bug in the code", "body": "<p>This code is always printing </p>\n\n<blockquote>\n  <p>fine Rs. 1 </p>\n</blockquote>\n\n<p>Despite number of days entered is <code>&gt; 30</code>. What is the reason?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    int days;\n    printf(\"enter no. of days\");\n    scanf(\"%d\",&amp;days);\n    if (days&lt;=5){printf(\"fine 50 paise\");}\n    else if (5&lt;days&lt;=10){printf(\"fine Rs. 1\");}\n    else if (10&lt;days&lt;30){printf(\"fine Rs.5\");}\n    else printf(\" memebership cancelled\");\n}\n</code></pre>\n"}, {"tags": ["c", "regex", "parsing", "lex"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1423078113, "post_id": 28329669, "comment_id": 45006835, "body": "Great.  What actually <i>does</i> happen?"}, {"owner": {"reputation": 1, "user_id": 4530109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bbd77496ba74185ef8e934c47ddb3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Shno", "link": "https://stackoverflow.com/users/4530109/shno"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1423078160, "post_id": 28329669, "comment_id": 45006859, "body": "an error: :3 :unrecognized rule, aka the regular expression is not being recognized (editing this into the main question --woops)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1423078411, "post_id": 28329669, "comment_id": 45006994, "body": "Your rule should be separated from its action by whitespace.  Also, I recommend separate rules for matching the two varieties of comments."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1423078647, "post_id": 28329669, "comment_id": 45007105, "body": "Note, too, that the pattern fragment <code>[^*]|[^]</code> is equivalent to just <code>[^*]</code>, and the fragment <code>[^*&#47;]|[^]</code> is equivalent to <code>[^*&#47;]</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1423079082, "post_id": 28329669, "comment_id": 45007322, "body": "@JohnBollinger: Not quite. <code>[^]</code> is an unterminated character class (not just in flex; in posix, too.)"}, {"owner": {"reputation": 1, "user_id": 4530109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bbd77496ba74185ef8e934c47ddb3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Shno", "link": "https://stackoverflow.com/users/4530109/shno"}, "edited": false, "score": 0, "creation_date": 1423079819, "post_id": 28329669, "comment_id": 45007698, "body": "alright, but do you think that the unrecognized rule could also stem from any incompatible regex statements? I was actually intending to have the [\\r\\n] used in place of the [^] but wasn&#39;t sure whether it would be accepted"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1423086037, "post_id": 28329669, "comment_id": 45011035, "body": "@Shno: there&#39;s nothing wrong with using <code>[\\r\\n]</code> but it would be pointless, since both of those characters are already part of <code>[^*]</code> (<code>.</code> doesn&#39;t match <code>\\n</code>, but that&#39;s specific to <code>.</code>; <code>\\n</code> is not artificially removed from character classes.)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4530109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bbd77496ba74185ef8e934c47ddb3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Shno", "link": "https://stackoverflow.com/users/4530109/shno"}, "edited": false, "score": 0, "creation_date": 1423080569, "post_id": 28330121, "comment_id": 45008149, "body": "thank you for taking the time, (and john too) i have found that the [^] class was poorly used by me so I simply removed it in this case, I also realized that I needed to escape the &#39;/&#39; in the regex in order for it to be read as I didn&#39;t realize that it was an actual operation in lex according to: <a href=\"http://www.csd.uwo.ca/~moreno//CS447/Lectures/Lexical.html/node11.html\" rel=\"nofollow noreferrer\">csd.uwo.ca/~moreno//CS447/Lectures/Lexical.html/node11.html</a>, these two changes helped fix my problem up nicely"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1423079278, "creation_date": 1423079278, "answer_id": 28330121, "question_id": 28329669, "link": "https://stackoverflow.com/questions/28329669/lex-unrecognized-rule-using-regex/28330121#28330121", "title": "lex - unrecognized rule - using regex", "body": "<p>In (f)lex regular expressions, as in standard Posix regexes, you can include <kbd>]</kbd> in a character class as the <em>first</em> character in the class. (That's true whether or not you use a positive (<code>[...]</code>) or negative (<code>[^...]</code>) character class.)</p>\n\n<p>So the first<code>[^]</code> starts a character class, which is then terminated by the next <code>]</code>, and the next one is unterminated. It's not clear to me what you expected <code>[^]</code> to mean, so I can't offer an alternative suggestion.</p>\n\n<p>Also, you need a space before the action, in order to define the end of the regular expression.</p>\n"}], "owner": {"reputation": 1, "user_id": 4530109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bbd77496ba74185ef8e934c47ddb3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Shno", "link": "https://stackoverflow.com/users/4530109/shno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423079278, "creation_date": 1423077842, "last_edit_date": 1423078255, "question_id": 28329669, "link": "https://stackoverflow.com/questions/28329669/lex-unrecognized-rule-using-regex", "title": "lex - unrecognized rule - using regex", "body": "<p>I am new to working with lex and just wanted to try and see whether I could try making a file that would locate comments in a C file using regular expressions.</p>\n\n<pre><code>%%\n\n(/\\*([^*]|[^]|(\\*+([^*/]|[^])))*\\*+/)|(//.*){   \n    return 5;\n}\n.   ;\n\n%%\n\nint yywrap(void)\n{\n    return1;\n}\n</code></pre>\n\n<p>So the idea here would be that everytime a comment is located, it will \"return 5\", otherwise, nothing happens.</p>\n\n<p>The problem is, the  regular expression is not being recognized and i'm met with the error:</p>\n\n<p>line 3: unrecognized rule\nline 3: unrecognized rule\nline 3: unrecognized rule\nline 3: unrecognized rule\n...etc</p>\n\n<p>Any help would be appreciated, thanks in advance.</p>\n"}, {"tags": ["c", "libusb", "libusb-1.0"], "answers": [{"tags": [], "owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "is_accepted": false, "score": 2, "last_activity_date": 1423138501, "creation_date": 1423138501, "answer_id": 28343722, "question_id": 28329443, "link": "https://stackoverflow.com/questions/28329443/libusb-1-0-libusb-get-device-list-failure/28343722#28343722", "title": "libusb-1.0 libusb_get_device_list() failure", "body": "<p>If you read closely the error message, it says the <em>label</em> <code>brd_ftdi</code> is not defined, not the variable.</p>\n\n<p>That is because you wrote <code>&amp;&amp;brd_ftdi</code>, the <code>&amp;&amp;</code> is a GCC extension that means <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html\" rel=\"nofollow\">the address of a label</a>. It is not standard C.</p>\n\n<p>The address of a variable is just one <code>&amp;</code>. The address of the <code>brd_ftdi</code> variable is <code>&amp;brd_ftdi</code>.</p>\n\n<p>The <a href=\"http://libusb.sourceforge.net/api-1.0/group__dev.html#gac0fe4b65914c5ed036e6cbec61cb0b97\" rel=\"nofollow\"><code>libusb_get_device_list</code></a> function takes a <code>libusb_device***</code> : the address where it'll write the address of the list of pointers to <code>libusb_device</code>.\nYou can use it like this :</p>\n\n<pre><code>libusb_device **list_of_devices;\nlibusb_get_device_list(context, &amp;list_of_devices);\n</code></pre>\n\n<p><code>list_of_devices</code> is a pointer to the first pointer of the list (of pointers to <code>libusb_device</code>s).</p>\n\n<p>You'll have a problem with your currently commented call to <code>libusb_open</code>, because you are passing an uninitialized pointer to a pointer to <code>libusb_device_handle</code>. This function too writes its result (the <code>libusb_device_handle *</code>) at the address you give. </p>\n"}], "owner": {"reputation": 31, "user_id": 4499628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfa39e4cd628d5d150436525802efdf3?s=128&d=identicon&r=PG&f=1", "display_name": "user4499628", "link": "https://stackoverflow.com/users/4499628/user4499628"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1423140470, "creation_date": 1423077016, "last_edit_date": 1423140470, "question_id": 28329443, "link": "https://stackoverflow.com/questions/28329443/libusb-1-0-libusb-get-device-list-failure", "title": "libusb-1.0 libusb_get_device_list() failure", "body": "<p>Also tested with -Wall and -std=c99 and c11 (not working of course)</p>\n\n<pre><code>$ gcc -o usb -L/usr/local/lib -lusb-1.0 -I/usr/local/include usbtest.c\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>usbtest.c: In function \u2018main\u2019:\nusbtest.c:14:1: error: label \u2018brd_ftdi\u2019 used but not defined\n libusb_get_device_list(context, &amp;&amp;brd_ftdi);\n</code></pre>\n\n<p>usbtest.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;libusb-1.0/libusb.h&gt;\nint main() {\n  libusb_device* brd_ftdi;\n  libusb_device_handle** brd_ftdi_handle;\n  libusb_context* context;\n\n  //libusb_device *** list = &amp;&amp;brd_ftdi;\n\n  //libusb_init (libusb_context **);\n  libusb_init (&amp;context);\n\n  libusb_get_device_list(context, &amp;&amp;brd_ftdi);\n  //libusb_open(brd_ftdi, brd_ftdi_handle);\n\n  //libusb_exit(struct libusb_context *); \n  libusb_exit(context);\n\n  return 0;\n}\n</code></pre>\n\n<p>Not defined? I know, but <code>libusb_get_device_list()</code> is supposed to do it (put the list in there), so WTF? I also tested declaring a pointer to pointer to <code>brd_ftdi</code> and passing that on instead but same result.</p>\n"}, {"tags": ["c", "struct", "linked-list", "head"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423077271, "post_id": 28329374, "comment_id": 45006368, "body": "Well, if the head is NULL, make the added node the head."}, {"owner": {"reputation": 475, "user_id": 2391458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7597c607b98cbca3c8d548bb78f4262?s=128&d=identicon&r=PG&f=1", "display_name": "FCo", "link": "https://stackoverflow.com/users/2391458/fco"}, "edited": false, "score": 0, "creation_date": 1423077815, "post_id": 28329374, "comment_id": 45006672, "body": "<a href=\"http://cslibrary.stanford.edu/103/LinkedListBasics.pdf\" rel=\"nofollow noreferrer\">cslibrary.stanford.edu/103/LinkedListBasics.pdf</a> is one good resource.  Also refer to <a href=\"http://www.sanfoundry.com/c-program-create-linked-list-display-elements/\" rel=\"nofollow noreferrer\">sanfoundry.com/c-program-create-linked-list-display-elements</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1423077415, "creation_date": 1423077415, "answer_id": 28329553, "question_id": 28329374, "link": "https://stackoverflow.com/questions/28329374/linked-lists-how-to-insert-if-head-does-not-exist/28329553#28329553", "title": "Linked lists, how to insert if head does not exist?", "body": "<p>When you execute:</p>\n\n<pre><code>void add(struct node *data){\n    if(data == NULL){\n    data = malloc(sizeof(struct node));\n</code></pre>\n\n<p>the value of <code>head</code> does not change in the calling function.</p>\n\n<p>Suggest a change of strategy.</p>\n\n<pre><code>struct node* add(struct node *head)\n{\n   if(head == NULL){\n      head = malloc(sizeof(struct node));\n      printf(\"Outcome and points?\\n\");\n      int point;\n      char outcome;\n      scanf(\"%c %d\",&amp;outcome,&amp;point);\n      fgetc(stdin);\n      head-&gt;point=point;\n      head-&gt;outcome=outcome;\n      head-&gt;next=NULL;\n   }else{\n      struct node *current= head;\n      while(current-&gt;next != NULL){\n         current = current-&gt;next;\n      }\n      current-&gt;next = malloc(sizeof(struct node));\n      current=current-&gt;next;\n      printf(\"Outcome and points?\\n\");\n      int point;\n      char outcome;\n      scanf(\"%c %d\",&amp;outcome,&amp;point);\n      fgetc(stdin);\n      current-&gt;point=point;\n      current-&gt;outcome=outcome;\n      current-&gt;next=NULL;\n   }\n   return head;\n}\n</code></pre>\n\n<p>And, then change the usage:</p>\n\n<pre><code>int main()\n{\n    struct node *head = add(NULL);     \n    add(head);\n    add(head); \n    print(head);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 0, "last_activity_date": 1423079007, "creation_date": 1423079007, "answer_id": 28330040, "question_id": 28329374, "link": "https://stackoverflow.com/questions/28329374/linked-lists-how-to-insert-if-head-does-not-exist/28330040#28330040", "title": "Linked lists, how to insert if head does not exist?", "body": "<p>You can simplify the code by starting the list with an anchor node. An anchor node is a node that is only used for its <code>next</code> pointer. In the code below, the call to <code>calloc</code> creates the anchor node, and sets all of the fields in the anchor to <code>0</code>. In other words, a node is created with <code>next == NULL</code>.</p>\n\n<p>Note that when printing the list, the <code>for</code> loop starts by skipping the anchor node with <code>for (list = list-&gt;next;...)</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node\n{\n    int point;\n    char outcome;\n    struct node *next;\n};\n\nvoid add( struct node *list )\n{\n    struct node *data;\n\n    data = malloc(sizeof(struct node));\n    data-&gt;next = NULL;\n    printf(\"Outcome and points?\\n\");\n    scanf(\"%c %d\",&amp;data-&gt;outcome,&amp;data-&gt;point);\n    fgetc(stdin);\n\n    while (list-&gt;next != NULL)\n        list = list-&gt;next;\n    list-&gt;next = data;\n}\n\nvoid print( struct node *list )\n{\n    for (list = list-&gt;next; list != NULL; list = list-&gt;next)\n        printf(\"%c with %3d\\n\", list-&gt;outcome, list-&gt;point);\n}\n\nint main()\n{\n    struct node *head = calloc( 1, sizeof(struct node) );\n    add(head);\n    add(head);\n    add(head); \n    print(head);\n}\n</code></pre>\n\n<p>Side note: I've omitted some error checking to keep things simple, you should really be checking the return values from <code>calloc</code>, <code>malloc</code>, and <code>scanf</code> and handle any errors.  And, of course, you should <code>free</code> all of the nodes at the end.</p>\n"}], "owner": {"reputation": 97, "user_id": 4341200, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/467913f52a603f599e0b68266b532fda?s=128&d=identicon&r=PG&f=1", "display_name": "Kuro95", "link": "https://stackoverflow.com/users/4341200/kuro95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 28329553, "answer_count": 2, "score": 0, "last_activity_date": 1423079007, "creation_date": 1423076743, "question_id": 28329374, "link": "https://stackoverflow.com/questions/28329374/linked-lists-how-to-insert-if-head-does-not-exist", "title": "Linked lists, how to insert if head does not exist?", "body": "<p>I got a linked list, which should save the Outcome (W or L) and the gained/lost points for each match. All good so far, but I'm getting trouble when the head does not exist/is empty. I also realized I have a pretty bad overview of how to implement linked lists, anyone got good and understandable resources? Anyway this is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node {\n  int point;\n  char outcome;\n  struct node *next;\n};\n\nvoid add(struct node *data){\n    if(data == NULL){\n    data = malloc(sizeof(struct node));\n    printf(\"Outcome and points?\\n\");\n    int point;\n    char outcome;\n    scanf(\"%c %d\",&amp;outcome,&amp;point);\n    fgetc(stdin);\n    data-&gt;point=point;\n    data-&gt;outcome=outcome;\n    data-&gt;next=NULL;\n    }else{\n        struct node *current= data;\n        while(current-&gt;next != NULL){\n            current = current-&gt;next;\n        }\n        current-&gt;next = malloc(sizeof(struct node));\n        current=current-&gt;next;\n        printf(\"Outcome and points?\\n\");\n        int point;\n        char outcome;\n        scanf(\"%c %d\",&amp;outcome,&amp;point);\n        fgetc(stdin);\n        current-&gt;point=point;\n        current-&gt;outcome=outcome;\n        current-&gt;next=NULL;\n    }\n\n}\n\nvoid print(struct node *data){\n    struct node *current = data;\n    while(current != NULL){\n        printf(\"%c with %3d\\n\",current-&gt;outcome,current-&gt;point);\n        current = current-&gt;next;\n    }\n}\n\nint main()\n{\n    struct node *head=NULL;     \n    add(head); \n    add(head);\n    add(head); \n    print(head);\n}\n</code></pre>\n\n<p>Any help would be appreciated :)</p>\n"}, {"tags": ["c", "volatile"], "comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1423076692, "post_id": 28329314, "comment_id": 45006070, "body": "You need to clarify what your problem is. We can&#39;t read your mind."}, {"owner": {"reputation": 2252, "user_id": 2422224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/519bb5a0059ea4682209d00f1a5f2b41?s=128&d=identicon&r=PG", "display_name": "Ma3x", "link": "https://stackoverflow.com/users/2422224/ma3x"}, "edited": false, "score": 0, "creation_date": 1423076727, "post_id": 28329314, "comment_id": 45006084, "body": "What is the actual problem you are trying to solve? You just want the debugger to step on the optimized line?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1423076780, "post_id": 28329314, "comment_id": 45006111, "body": "Do you mean? <i>the code can never go to indicator = 2 or indicator = 4 given <code>a &lt;= uplimit</code> and <code>a &gt;= lolimit</code></i>"}, {"owner": {"reputation": 163, "user_id": 2270626, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/76b70f9bb97c750ea4203744aae76292?s=128&d=identicon&r=PG", "display_name": "HeyMan", "link": "https://stackoverflow.com/users/2270626/heyman"}, "edited": false, "score": 0, "creation_date": 1423076930, "post_id": 28329314, "comment_id": 45006186, "body": "This is just one piece of my project. I find the problem must be here. The code can never go to indicator = 2 or indicator = 4 given a &lt;= uplimit or a &gt;= lolimit"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1423076951, "post_id": 28329314, "comment_id": 45006193, "body": "Your compiler would optimize the code away, if it believes that it does nothing. To tell it that it is wrong you are using the <code>volatile</code> keyword. What wrong with using that? (BTW, you are missing the case of a==lolimit)"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1423077060, "post_id": 28329314, "comment_id": 45006248, "body": "if <code>a</code> is a <b>signed integer</b> type and uplimit is the max value of that type, <code>a</code> cannot have a value greater that that max value. If that were the case that would be <b>undefined behavior</b>. Compiler has to generate valid code only for the valid paths of execution, i.e. when a &lt; max value. So he can consider that (for a valid program) a is always &lt; max value. So it can say those conditions are always true (for a valid program) and remove the <code>if</code>s"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1423077107, "post_id": 28329314, "comment_id": 45006275, "body": "but you don&#39;t give us all the information about the code so there are a lot of <code>if</code>s in my previous comment."}, {"owner": {"reputation": 2252, "user_id": 2422224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/519bb5a0059ea4682209d00f1a5f2b41?s=128&d=identicon&r=PG", "display_name": "Ma3x", "link": "https://stackoverflow.com/users/2422224/ma3x"}, "edited": false, "score": 0, "creation_date": 1423077287, "post_id": 28329314, "comment_id": 45006378, "body": "Since you are asking for another method to solve this I am assuming you just want to step through the code normally when debugging. They way to do that is to build the code in Debug mode (or turn off Code optimization when debugging)."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1423077522, "post_id": 28329314, "comment_id": 45006491, "body": "To know why/if it is valid to optimise away any of this code, it would be necessary to see the entire function.  &quot;It seems like...&quot; is less than convincing; how have you determined that?  Have you looked at the disassembly or stepped the code in your debugger?  Are you even using compiler optimisation?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1423077882, "post_id": 28329314, "comment_id": 45006709, "body": "Add a <code>printf(&quot;P1: a = %d, lo = %d, hi = %d\\n&quot;, a, lolimit, uplimit);</code> before the condition in the question; add <code>printf(&quot;P2: a = %d, lo = %d, hi = %d, ind=%d\\n&quot;, a, lolimit, uplimit, indicator);</code> after the code block.  Show us the test runs which are mishandled.  Note that the &#39;lolimit&#39; code pushes <code>a</code> further away from the low limit; should that <code>-</code> be a <code>+</code>?  And neither guarantees that <code>a</code> is within bounds after the block of code if <code>a</code> is far enough out of bounds beforehand (even if the <code>+</code> vs <code>-</code> issue is fixed)."}], "owner": {"reputation": 163, "user_id": 2270626, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/76b70f9bb97c750ea4203744aae76292?s=128&d=identicon&r=PG", "display_name": "HeyMan", "link": "https://stackoverflow.com/users/2270626/heyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423079094, "creation_date": 1423076522, "last_edit_date": 1423079094, "question_id": 28329314, "link": "https://stackoverflow.com/questions/28329314/if-else-function-compiler-optimization", "title": "If/else function compiler optimization", "body": "<p>I have the following code:</p>\n\n<pre><code>if (a &gt; uplimit)\n{\n   a = a - uplimit;\n   indicator = 2;\n}\nelse if (a &lt; lolimit)\n{\n   a = a - lolimit;\n   indicator = 4;\n}\n</code></pre>\n\n<p>When I compile and run the code, it seems like the code can never go to indicator = 2 or indicator = 4 given a > uplimit or a &lt; lolimit.</p>\n\n<p>However, if I add something at the beginning of each code section, it works.</p>\n\n<pre><code>if (a &gt; uplimit)\n{\n   c = 1;\n   a = a - uplimit;\n   indicator = 2;\n}\nelse if (a &lt; lolimit)\n{\n   c = 2;\n   a = a - lolimit;\n   indicator = 4;\n}\n</code></pre>\n\n<p>It seems like the compiler is trying to optimize the code. I know using volatile might solve this problem. Does anyone know other method that could solve the problem?</p>\n\n<p>By the way, I am using Code Composer Studio.</p>\n"}, {"tags": ["c", "metric"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1423076149, "post_id": 28329154, "comment_id": 45005776, "body": "the McCabes tool set may have just what you are looking for."}], "answers": [{"comments": [{"owner": {"reputation": 829, "user_id": 703810, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/648fa16e827e683ef4f72008bc68dd6f?s=128&d=identicon&r=PG", "display_name": "limp", "link": "https://stackoverflow.com/users/703810/limp"}, "edited": false, "score": 0, "creation_date": 1423080537, "post_id": 28329279, "comment_id": 45008128, "body": "One of the problems I see with your method is that it doesn\u2019t work if we have nested conditional statements. For example, if we put another if statement inside the first if, it will give a result of 2 instead of the correct 4."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 829, "user_id": 703810, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/648fa16e827e683ef4f72008bc68dd6f?s=128&d=identicon&r=PG", "display_name": "limp", "link": "https://stackoverflow.com/users/703810/limp"}, "edited": false, "score": 0, "creation_date": 1423080742, "post_id": 28329279, "comment_id": 45008248, "body": "@limp; You need to put <code>++ways</code> in each of your conditional expression."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": -1, "last_activity_date": 1423076405, "creation_date": 1423076405, "answer_id": 28329279, "question_id": 28329154, "link": "https://stackoverflow.com/questions/28329154/calculate-the-number-of-all-possible-execution-paths-in-a-c-function/28329279#28329279", "title": "Calculate the number of all possible execution paths in a C function", "body": "<p>Use comma operator as  </p>\n\n<pre><code>int test(void)\n{\n   int ways = 0;\n   if (++ways, i&gt;0)\n     x = x + 1;\n   else if (++ways, i&gt;10)\n     x = x + 2;\n   else\n   {\n     x = x + 3;\n     ++ways;\n   }\n   return ways;\n}\n</code></pre>\n"}], "owner": {"reputation": 829, "user_id": 703810, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/648fa16e827e683ef4f72008bc68dd6f?s=128&d=identicon&r=PG", "display_name": "limp", "link": "https://stackoverflow.com/users/703810/limp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423076405, "creation_date": 1423075999, "question_id": 28329154, "link": "https://stackoverflow.com/questions/28329154/calculate-the-number-of-all-possible-execution-paths-in-a-c-function", "title": "Calculate the number of all possible execution paths in a C function", "body": "<p>I am desperately looking for a way to easily calculate the number of all possible execution paths in a C function. </p>\n\n<p>For example, for the following function I would expect to get a result of 3 (if there is a chance based on the values that 'i' gets to enter any of the 'if' statements)</p>\n\n<pre><code>void test(void)\n{\n   if (i&gt;0)\n     x = x + 1;\n   else if (i&gt;10)\n     x = x + 2;\n   else\n     x = x + 3;\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "binary-tree"], "comments": [{"owner": {"reputation": 6911, "user_id": 1883647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94cf03c7046f34882292390b1974fd9?s=128&d=identicon&r=PG", "display_name": "ajp15243", "link": "https://stackoverflow.com/users/1883647/ajp15243"}, "edited": false, "score": 0, "creation_date": 1423075707, "post_id": 28329018, "comment_id": 45005554, "body": "What is &quot;the issue&quot;? You&#39;ve only described when it happens, not what happens."}, {"owner": {"reputation": 744, "user_id": 4515613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b0c9d0de9cd97f65114aaf87f6eae3?s=128&d=identicon&r=PG&f=1", "display_name": "sonologico", "link": "https://stackoverflow.com/users/4515613/sonologico"}, "edited": false, "score": 0, "creation_date": 1423075820, "post_id": 28329018, "comment_id": 45005605, "body": "The code is missing the struct node definition."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1423076598, "post_id": 28329018, "comment_id": 45006023, "body": "the delnode function has a major logic fault.  It effectively deletes whole sub trees rather than just the current node.  suggest drawing a picture of (say) 5 &#39;balanced&#39; nodes and they look at what needs to be accomplished to remove the center node.  what needs to be done to remove a leaf node, etc"}, {"owner": {"reputation": 15, "user_id": 4529402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVQtC3-Tyh8/AAAAAAAAAAI/AAAAAAAAATk/i1TTXjgI4oA/photo.jpg?sz=128", "display_name": "Raqeeb Thassim", "link": "https://stackoverflow.com/users/4529402/raqeeb-thassim"}, "edited": false, "score": 0, "creation_date": 1423111375, "post_id": 28329018, "comment_id": 45018755, "body": "struct node{ \tint data; \tstruct node* right; \tstruct node* left;      };"}], "owner": {"reputation": 15, "user_id": 4529402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVQtC3-Tyh8/AAAAAAAAAAI/AAAAAAAAATk/i1TTXjgI4oA/photo.jpg?sz=128", "display_name": "Raqeeb Thassim", "link": "https://stackoverflow.com/users/4529402/raqeeb-thassim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423075530, "creation_date": 1423075530, "question_id": 28329018, "link": "https://stackoverflow.com/questions/28329018/deleting-nodes-from-a-binary-tree-in-c", "title": "Deleting nodes from a binary tree in c", "body": "<p>The issue arises when a node which is not available in the tree is given to be deleted.It works perfectly when an integer which is available in the tree is given to be deleted.Help much appreciated.</p>\n\n<pre><code>int delNode(struct node* ptr,int item)\n{   struct node* y;\n\nif(!ptr)\n    return 0;\nif(item==ptr-&gt;left-&gt;data){\n    y=ptr-&gt;left;\n    ptr-&gt;left=NULL;\n    free(y);}\nelse if(item==ptr-&gt;right-&gt;data){\n    y=ptr-&gt;right;\n    ptr-&gt;right=NULL;\n    free(y);}\nelse if(item&gt;ptr-&gt;data)\n    delNode(ptr-&gt;right,item);\nelse    \n    delNode(ptr-&gt;left,item);    \n\n}\n\nvoid main()\n{\nstruct node* treeNode;\ntreeNode=NULL;\naddItem(&amp;treeNode,5);\naddItem(&amp;treeNode,3);\naddItem(&amp;treeNode,2);\naddItem(&amp;treeNode,4);\naddItem(&amp;treeNode,8);\naddItem(&amp;treeNode,7);\naddItem(&amp;treeNode,9);\npreorder(treeNode);\nsearch(treeNode,9)?printf(\"Found\"):printf(\"Not Found\");\ndelNode(treeNode,9);\npreorder(treeNode);\n//printf(\"Depth:%i\",depth(treeNode));\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "segmentation-fault", "malloc", "realloc"], "comments": [{"owner": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "edited": false, "score": 0, "creation_date": 1423075479, "post_id": 28328987, "comment_id": 45005433, "body": "printf(&quot;Wollen sie noch eine Zahl eingeben\\n&quot;);        Is printf(&quot;Do you want to add a number\\n&quot;)"}, {"owner": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "edited": false, "score": 0, "creation_date": 1423075561, "post_id": 28328987, "comment_id": 45005472, "body": "printf(&quot;Sie haben schon %i Zahlen eingegeben\\n&quot;,j); Its a information how many number you have put in one line"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423075811, "post_id": 28328987, "comment_id": 45005599, "body": "logically, <code>arr[i]=(int*)malloc(sizeof(int*)*spalten);</code> should be <code>arr[i]=malloc(sizeof(int)*spalten);</code>"}, {"owner": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423076004, "post_id": 28328987, "comment_id": 45005696, "body": "but then this warning comes: p.c:25:9: error: assignment makes pointer from integer without a cast [-Werror]    arr[i]=(int)malloc(sizeof(int)*spalten);// malloc first line"}, {"owner": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423076106, "post_id": 28328987, "comment_id": 45005755, "body": "ok sorry ;) i have done your correction"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423076107, "post_id": 28328987, "comment_id": 45005757, "body": "i never said to cast the result of <code>malloc()</code> to  <code>(int)</code>,"}, {"owner": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423076138, "post_id": 28328987, "comment_id": 45005768, "body": "but my problem is still there the sementation fault after the output"}, {"owner": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423076307, "post_id": 28328987, "comment_id": 45005878, "body": "sorry i misunderstand your correction at first :) arr[i]=malloc(sizeof(int)*spalten); Now i have this but the segmentation fault is still there ? do i have another mistake?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423076537, "post_id": 28328987, "comment_id": 45005995, "body": "don&#39;t thank yet. let us debug the issue first. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "edited": false, "score": 0, "creation_date": 1423077486, "post_id": 28329480, "comment_id": 45006468, "body": "@rem Glad it helped. Cheers!  :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1423077116, "creation_date": 1423077116, "answer_id": 28329480, "question_id": 28328987, "link": "https://stackoverflow.com/questions/28328987/segmentation-fault-by-realloc-2-dim-array-but-right-output/28329480#28329480", "title": "segmentation fault by realloc 2 dim array but right output?", "body": "<p>I think, the problem is in</p>\n\n<pre><code>for (int h=0;h&lt;spalten;h++)\n</code></pre>\n\n<p>in your code, you've allocated memory for only 4 <code>int *</code> [<code>int **arr=malloc(sizeof(int*)*4);</code>] but later in your code, you've incremented <code>spalten</code> and later using the incremented value in printing.</p>\n\n<p>There you're accessing out-of-bound memory producing undefined behaviour.</p>\n\n<p>you should change your print loop to</p>\n\n<pre><code>for (int h=0;h&lt;4;h++)\n</code></pre>\n\n<p><sup>P.S - Sorry, i'm also not a native English speaker</sup></p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1423088166, "last_edit_date": 1423088166, "creation_date": 1423087529, "answer_id": 28332384, "question_id": 28328987, "link": "https://stackoverflow.com/questions/28328987/segmentation-fault-by-realloc-2-dim-array-but-right-output/28332384#28332384", "title": "segmentation fault by realloc 2 dim array but right output?", "body": "<pre><code>There are several problems.\nI have added comments about some of the problems to the original code\n\nPlease comment your code, for two major reasons\n1) so in a few months you do not have to reverse engineer the code\n2) so I do not have to reverse engineer your code \n   so that I can helpfully comment on what went wrong in the code\n\nNote: getchar returns a int value, not a char value\n      and '\\n' on certain OSs is 2 characters\n      and EOF is -1, not a char\n\nThe second code group is a suggested fix\nIn the second code group, there are certain improvements\n\nthat could be easily made,  \nFor instance, eliminate the spalen variable\nallocate for the rows only once via:\n\nif user enters 0,  \nthen use the default length, \notherwise the user entered length\n\n\n----Original code group with some comments----\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nvoid flushi()\n{// to flush the buffer \n    char buff = ' ';\n\n    while ((buff = getchar()) != '\\n' &amp;&amp;buff !=EOF);\n} // end function: flushi\n\n\nvoid freeall(int **arr,int zeilen)\n{\n    for (int i = 0; i &lt; zeilen; i++)\n    { \n        free(arr[i]);\n    }\n    free(arr);\n} // end function: freeall\n\n\nint main()\n{\n    int zeilen=4;\n    int d,j;\n\n    srand(time(0)); // should be srand( time( NULL ) );\n\n    int spalten=5;\n    int size[spalten];\n\n    int **arr=malloc(sizeof(int*)*4); // allocate room for 4 pointers to integers\n       // should always test returned value from malloc to assure operation successful\n\n    for(int i=0;i&lt;zeilen;i++) // foreach of the 4 pointers to integers\n    {\n        arr[i]=(int*)malloc(sizeof(int*)*spalten);// ERROR: allocate room for 5 pointers to intege\n             // should be: arr[i] = malloc( sizeof(int)*spalten); // allocate room for 5 integers\n             // should always test returned value from malloc to assure operation successful\n\n        j=0;\n\n        while(1)\n        {\n            printf(\"Wollen sie noch eine Zahl eingeben\\n\");\n            printf(\"1...Ja      0...Nein\\n\");\n            scanf(\"%i\",&amp;d);\n                // should always test returned value from scanf to assure operation successful\n\n            flushi();\n\n            if(d==1) // \n            {\n                if(j&gt;=spalten)\n                {// if user want more than 5 int in one line\n                    spalten++;\n                    arr[i]=realloc(arr[i],sizeof(int)*spalten);// realloc line\n                        // always test returned value from realloc before\n                        // 1) to assure operation was successful\n                        // 2) before using the new pointer\n                        //    otherwise old allocation lost, resulting in a memory leak\n                } // end if\n\n                arr[i][j]= (rand()%10)+1;\n                j++;\n                printf(\"Sie haben schon %i Zahlen eingegeben\\n\",j);\n            }\n\n            else\n            { // else, user did not enter 1 ????\n                break;\n            } // end if\n        } // end while\n\n        size[i]=j; // remember/ save meaningless number\n    } // end for\n\n    printf(\"Your Numbers\\n\");\n\n    for (int h=0;h&lt;spalten;h++) // foreach 0...4\n    {\n        printf(\"\\n\");\n\n        for (int g=0;g&lt;size[h];g++) // for each 0...meaningless value\n        {\n            printf(\"%i \",arr[h][g]);\n        } // end if\n    } // end for\n\n    printf(\"\\n\");\n\n    freeall(arr,zeilen);\n\n    return EXIT_SUCCESS;\n} // end function: main\n\n----second code group which is a suggested fix----\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n\nvoid flushi()\n{// to flush the buffer\n    int buff;\n    while ((buff = getchar()) != '\\n' &amp;&amp;buff !=EOF);\n} // end function: flushi\n\n\nvoid freeall(int **arr,int rowCount)\n{\n    // free each row\n    for (int i = 0; i &lt; rowCount; i++)\n    {\n        free(arr[i]); // note: ok to call free() with null pointer\n    }\n\n    // free the array\n    free(arr);\n} // end function: freeall\n\n\n#define MAX_ROWS (4)\n#define DEFAULT_ROW_LEN (5)\n\n// notice the removal of unneeded variables\n\n// notice that most features are implemented \n// in separate code blocks\n\nint main()\n{\n    int rowLength;  // new length (of integers) for each row\n    int i, j;       // loop index/counters\n\n    int spalten=DEFAULT_ROW_LEN;  // default length (of integers) for each row\n\n    int size[MAX_ROWS] = {0};  // save area for final length of each row\n\n    int **arr = NULL;\n    if( NULL == (arr=malloc(sizeof(int*)*MAX_ROWS) ) ) // allocate room for MAX_ROWS pointers to integers\n    { // then malloc failed\n        perror( \"malloc failed for number of rows\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n    // clear first memory allocation (int pointers) to NULLs\n    memset( arr, 0x00, MAX_ROWS*sizeof(int*) );\n\n    for(i=0; i&lt;MAX_ROWS; i++) // foreach of the rows\n    {\n        if( NULL == (arr[i]=malloc(sizeof(int)*spalten) ) )\n        { // then, malloc failed\n            perror( \"malloc failed for row\" );\n            freeall( arr, MAX_ROWS ); // cleanup\n            exit( EXIT_FAILURE );\n        }\n\n        // implied else, malloc successful\n\n        size[i] = spalten;\n\n    } // end for each row\n\n    srand( time( NULL ) );\n\n    for( i=0; i&lt;MAX_ROWS; i++) // foreach row\n    {\n        printf(\"Wollen sie noch eine Zahl eingeben\\n\");\n        printf(\"1...Ja      0...Nein\\n\");\n\n        if( 1 != scanf(\"%i\",&amp;rowLength) )\n        { // then scanf failed\n            perror( \"scanf failed for row length\" );\n            freeall( arr, MAX_ROWS ); // cleanup\n            exit( EXIT_FAILURE );\n        }\n\n        // implied else, scanf successful\n\n        flushi();\n\n        if( rowLength &gt; 0) // 0 means no change and negative numbers are ignored\n        { // then, user wants a different length for this row\n\n            if(rowLength != spalten)\n            {\n                size[i] = rowLength;\n                int * temp;\n\n                // if user want other than 5 int in one row\n                if( NULL == (temp = realloc(arr[i],sizeof(int)*rowLength) ) )\n                { // then, realloc failed\n                    perror( \"realloc failed for row length change\" );\n                    freeall( arr, MAX_ROWS ); // cleanup\n                    exit( EXIT_FAILURE );\n                }\n\n                // implied else, realloc successful\n\n                arr[i] = temp; // update the pointer in the array\n            } // end if\n        } // end if\n\n        // fill in row of arr with random values\n        for( j = 0; j&lt;size[i]; j++ )\n        {\n            arr[i][j]= (rand()%10)+1;\n        } // end if\n\n        printf(\"Sie haben schon %i Zahlen eingegeben\\n\",j);\n    } // end for\n\n    printf(\"Your Numbers\\n\");\n\n\n    for (int i=0;i&lt;MAX_ROWS;i++) // foreach row\n    {\n        printf(\"\\n\");\n\n        for (int j=0;j&lt;size[i];j++)\n        {\n            printf(\"%i \",arr[i][j]);\n        } // end if\n    } // end for\n\n    printf(\"\\n\");\n\n    freeall(arr,MAX_ROWS); // cleanup\n\n    return EXIT_SUCCESS;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4382568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb61c878fed1792b180faba7411d84?s=128&d=identicon&r=PG&f=1", "display_name": "rem", "link": "https://stackoverflow.com/users/4382568/rem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 28329480, "answer_count": 2, "score": 1, "last_activity_date": 1423088166, "creation_date": 1423075441, "question_id": 28328987, "link": "https://stackoverflow.com/questions/28328987/segmentation-fault-by-realloc-2-dim-array-but-right-output", "title": "segmentation fault by realloc 2 dim array but right output?", "body": "<p>Hi there I have a problem because I do not understand why my C programm has an segmentation fault. My programm creats a 2 dim int array and every line is going to be malloced by the fixed size of 5 and random numbers are in each line. But the user can choose if he wants to put more than 5 int in one line if he wants to i realloc my line. Every line lenght is stored in the array size. So the output is fine: for Example\n1,6,3,4\n8,6,5,3,2,1,6,8,9\n1,4\n8,9,6,4,2</p>\n\n<p>But after the output my programm ends with an segmentation fault but why?? is my mistake somewhere in the free function or in my output?? Thanks for any Answer and sry for my bad english :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nvoid flushi(){// to flush the buffer \nchar buff = ' ';\n    while ((buff = getchar()) != '\\n' &amp;&amp;buff !=EOF);\n    return;\n}\nvoid freeall(int **arr,int zeilen){\n    for (int i = 0; i &lt; zeilen; i++) { \n        free(arr[i]);\n    }\n    free(arr);\n}\n\nint main(){\n    int zeilen=4;\n    int d,j;\n    srand(time(0));\n    int spalten=5;\n    int size[spalten];\n    int **arr=malloc(sizeof(int*)*4);\n    for(int i=0;i&lt;zeilen;i++){\n        arr[i]=(int*)malloc(sizeof(int*)*spalten);// malloc first line\n        j=0;\n        while(1){\n            printf(\"Wollen sie noch eine Zahl eingeben\\n\");\n            printf(\"1...Ja      0...Nein\\n\");\n            scanf(\"%i\",&amp;d);\n            flushi();\n            if(d==1){\n                if(j&gt;=spalten){// if user want more than 5 int in one line\n                    spalten++;\n                    arr[i]=realloc(arr[i],sizeof(int)*spalten);// realloc line\n                }\n                arr[i][j]= (rand()%10)+1;\n                j++;\n                printf(\"Sie haben schon %i Zahlen eingegeben\\n\",j);\n            }\n            else{\n                break;\n            }\n        }\n        size[i]=j;\n    }\n    printf(\"Your Numbers\\n\");\n    for (int h=0;h&lt;spalten;h++){\n        printf(\"\\n\");\n        for (int g=0;g&lt;size[h];g++){\n            printf(\"%i \",arr[h][g]);\n        }\n    }\n    printf(\"\\n\");\n    freeall(arr,zeilen);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "append", "jpeg", "infinite-loop"], "comments": [{"owner": {"reputation": 744, "user_id": 4515613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b0c9d0de9cd97f65114aaf87f6eae3?s=128&d=identicon&r=PG&f=1", "display_name": "sonologico", "link": "https://stackoverflow.com/users/4515613/sonologico"}, "edited": false, "score": 1, "creation_date": 1423076305, "post_id": 28328974, "comment_id": 45005877, "body": "<code>while (memcmp(buffer, sig2, 4) != 0 &amp;&amp; memcmp(buffer, sig2, 4) != 0);</code> should this be <code>sig1</code> and <code>sig2</code>?"}, {"owner": {"reputation": 1, "user_id": 4529895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66101a1492235a60142f572b2be50762?s=128&d=identicon&r=PG&f=1", "display_name": "Atonium", "link": "https://stackoverflow.com/users/4529895/atonium"}, "reply_to_user": {"reputation": 744, "user_id": 4515613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b0c9d0de9cd97f65114aaf87f6eae3?s=128&d=identicon&r=PG&f=1", "display_name": "sonologico", "link": "https://stackoverflow.com/users/4515613/sonologico"}, "edited": false, "score": 0, "creation_date": 1423076797, "post_id": 28328974, "comment_id": 45006119, "body": "I would like to add, it seems to recover images 000.jpg - 011.jpg seemingly perfect. On 012.jpg, however, the program hangs and never ends the loop and the file size of 012.jpg will climb as high as I let it go."}, {"owner": {"reputation": 744, "user_id": 4515613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b0c9d0de9cd97f65114aaf87f6eae3?s=128&d=identicon&r=PG&f=1", "display_name": "sonologico", "link": "https://stackoverflow.com/users/4515613/sonologico"}, "edited": false, "score": 0, "creation_date": 1423077039, "post_id": 28328974, "comment_id": 45006236, "body": "I guess that it never finds a next jpeg header when it&#39;s the last file and keeps reading other data from &quot;card.raw&quot;"}, {"owner": {"reputation": 1, "user_id": 4529895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66101a1492235a60142f572b2be50762?s=128&d=identicon&r=PG&f=1", "display_name": "Atonium", "link": "https://stackoverflow.com/users/4529895/atonium"}, "reply_to_user": {"reputation": 744, "user_id": 4515613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b0c9d0de9cd97f65114aaf87f6eae3?s=128&d=identicon&r=PG&f=1", "display_name": "sonologico", "link": "https://stackoverflow.com/users/4515613/sonologico"}, "edited": false, "score": 0, "creation_date": 1423077228, "post_id": 28328974, "comment_id": 45006331, "body": "card.raw is only 20.1 MB. If the code is right, does that mean the maximum file size of an image should be 20.1 MB?"}, {"owner": {"reputation": 744, "user_id": 4515613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b0c9d0de9cd97f65114aaf87f6eae3?s=128&d=identicon&r=PG&f=1", "display_name": "sonologico", "link": "https://stackoverflow.com/users/4515613/sonologico"}, "edited": false, "score": 0, "creation_date": 1423077260, "post_id": 28328974, "comment_id": 45006358, "body": "Yes. Perhaps you should try matching the end of a jpeg file instead of the beginning of the next one. Wikipedia says it should end with  0xFF, 0xD9."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4529895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66101a1492235a60142f572b2be50762?s=128&d=identicon&r=PG&f=1", "display_name": "Atonium", "link": "https://stackoverflow.com/users/4529895/atonium"}, "edited": false, "score": 0, "creation_date": 1423079982, "post_id": 28329783, "comment_id": 45007793, "body": "When you have <code>bytes = fread(buffer,1 , BUFFER, card);</code> What data does the variable <code>bytes</code> have in it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423080854, "post_id": 28329783, "comment_id": 45008310, "body": "<code>bytes</code> is used both to correctly write the number of bytes read, and to check if the end of file was reached."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1423078592, "last_edit_date": 1423078592, "creation_date": 1423078208, "answer_id": 28329783, "question_id": 28328974, "link": "https://stackoverflow.com/questions/28328974/do-while-loop-is-infinite-somehow-and-constantly-appending-file/28329783#28329783", "title": "do-while loop is infinite somehow and constantly appending file", "body": "<p>I made quite a lot of changes, but it's untested as I don't have the raw data. The main change is to the reading loop, which assumes each jpeg file is in consecutive sectors, and continues to read/write sectors until another signature is found, or the end of file.</p>\n\n<p>Some minor changes are testing the number of bytes read instead of using <code>feof()</code>, and making use of <code>#define BUFFER 512</code> instead of hard coding <code>512</code>, and the bug mentioned by @RaphaelSantos.</p>\n\n<p>You could also try to incorporate his later suggestion of testing the end of file.</p>\n\n<pre><code>/* recover.c    Recovers JPEGs from a forensic image. */\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define BUFFER 512\n\nint main(int argc, char* argv[])\n{\n    // jpeg signatures\n    unsigned char sig1[] = {0xff, 0xd8, 0xff, 0xe0};\n    unsigned char sig2[] = {0xff, 0xd8, 0xff, 0xe1};\n    // buffer of 512 bytes\n    unsigned char buffer[BUFFER];\n    // counter for titles of jpgs\n    int counter = 0;\n    unsigned bytes;\n    char title[8];\n    FILE *card, *img;\n\n    // define and open card.raw\n    if ((card = fopen(\"card.raw\", \"r\")) == NULL) {\n        printf(\"Invalid input file\\n\");\n        return 1;\n    }\n\n    // read card.raw into buffer\n    bytes = fread(buffer, 1, BUFFER, card);\n    while (bytes) {\n        // compare first 4 bytes of buffer and signatures\n        if (memcmp(buffer, sig1, 4) == 0 || memcmp(buffer, sig2, 4 == 0)) {\n            // format title, open image, write img\n            sprintf(title, \"%03d.jpg\", counter);\n            if ((img = fopen(title, \"w\")) == NULL) {\n                printf(\"Invalid output file\\n\");\n                return 1;\n            }\n            do {\n                fwrite(buffer, 1, bytes, img);\n                bytes = fread(buffer, 1, BUFFER, card);\n            } while (bytes &amp;&amp; memcmp(buffer, sig1, 4) != 0 &amp;&amp; memcmp(buffer, sig2, 4 != 0));\n            fclose(img);\n            counter++;\n        }\n        else\n            bytes = fread(buffer, 1, BUFFER, card);\n    }\n    fclose(card);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 744, "user_id": 4515613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b0c9d0de9cd97f65114aaf87f6eae3?s=128&d=identicon&r=PG&f=1", "display_name": "sonologico", "link": "https://stackoverflow.com/users/4515613/sonologico"}, "is_accepted": false, "score": 0, "last_activity_date": 1423079591, "creation_date": 1423079591, "answer_id": 28330217, "question_id": 28328974, "link": "https://stackoverflow.com/questions/28328974/do-while-loop-is-infinite-somehow-and-constantly-appending-file/28330217#28330217", "title": "do-while loop is infinite somehow and constantly appending file", "body": "<p>Jpeg files start with two bytes 0xFF, 0xD8 and end with two bytes 0xFF, 0xD9. To be safe and easy to code (it will probably be slower), you should read bytes two by two and open a new file when you find the begin marker and close it when you find the end marker. Also, always check the return value of fread.\nThe following is untested, but should give you an idea of what I'm suggesting:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define BUFFER 2\n\nint main(int argc, char* argv[])\n{\n    // jpeg signatures\n    unsigned char begin_pair [2] = {0xff, 0xd8};\n    unsigned char end_pair [2] = {0xff, 0xd9};\n\n    // buffer of 512 bytes\n    unsigned char buffer[BUFFER];\n\n    // counter for titles of jpgs\n    int counter = 0;\n    char title[8] = {0};\n\n    // define and open card.raw\n    FILE* card = fopen(\"card.raw\", \"r\");\n    if (card == NULL) {\n        printf(\"Invalid file\\n\");\n        return 1;\n    }\n\n    // read card.raw into buffer\n\n    FILE *img = NULL;\n    size_t n = fread(&amp;buffer, 1, BUFFER, card);\n    while (n == BUFFER ){\n        if (memcmp(buffer, begin_pair, 2) == 0) {\n            if (img) {\n                printf(\"%s not terminated properly\\n\", title);\n                fclose(img);\n                img = NULL;\n            }\n            snprintf(title, 8, \"%03d.jpg\", counter);\n            img = fopen(title, \"a\");\n            counter++;\n            fwrite(&amp;buffer, 1, BUFFER, img);\n        }\n        if (memcmp(buffer, end_pair, 2) == 0 &amp;&amp; img) {\n            fwrite(&amp;buffer, 1, BUFFER, img);\n            fclose(img);\n            img = NULL;\n        }\n    }\n    //test if there's an open image\n    if (img) {\n        fwrite(&amp;buffer, 1, n, img);\n        printf(\"%s not terminated properly\\n\", title);\n        fclose(img);\n    }\n    // close card.raw\n    fclose(card);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4529895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66101a1492235a60142f572b2be50762?s=128&d=identicon&r=PG&f=1", "display_name": "Atonium", "link": "https://stackoverflow.com/users/4529895/atonium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423079591, "creation_date": 1423075395, "last_edit_date": 1423078838, "question_id": 28328974, "link": "https://stackoverflow.com/questions/28328974/do-while-loop-is-infinite-somehow-and-constantly-appending-file", "title": "do-while loop is infinite somehow and constantly appending file", "body": "<p>I'm trying to recover deleted images from a SD card image. All seems ok until my do-while loop, specifically line 55 (I think is the problem). The loop is infinite and repeatedly appends to the last file it created. I try to sort-of brute force my way to get it working, with slight better results sometimes and worse results other times. Simply lost.</p>\n\n<pre><code>/**\n * recover.c\n *\n * Recovers JPEGs from a forensic image.\n */\n\n #include &lt;stdlib.h&gt;\n #include &lt;stdio.h&gt;\n #include &lt;string.h&gt;\n\n #define BUFFER 512\n\nint main(int argc, char* argv[])\n{\n    // jpeg signatures\n    char sig1[] = {0xff, 0xd8, 0xff, 0xe0};\n    char sig2[] = {0xff, 0xd8, 0xff, 0xe1};\n\n    // buffer of 512 bytes\n    char buffer[BUFFER];\n\n    // counter for titles of jpgs\n    int counter = 0;\n    char title[8];\n\n    // define and open card.raw\n    FILE* card = fopen(\"card.raw\", \"r\");\n    if (card == NULL)\n        {\n            printf(\"Invalid file\\n\");\n            return 1;\n        }\n\n    // read card.raw into buffer\n    fread(&amp;buffer, sizeof(unsigned char), 512, card);\n\n    while (!feof(card))\n    {        \n        // compare first 4 bytes of buffer and signatures\n        if (memcmp(buffer, sig1, 4) == 0 || memcmp(buffer, sig2, 4 == 0))\n        {\n            // format title, open image, write img, then reload buffer\n            do\n            {\n                sprintf(title, \"%03d.jpg\", counter);\n                FILE* img = fopen(title, \"a\");\n                fwrite(&amp;buffer, sizeof(unsigned char), 512, img);\n                fread(&amp;buffer, sizeof(unsigned char), 512, card);\n                fclose(img);\n            }\n                // until buffer and a signature are equal\n                while (memcmp(buffer, sig1, 4) != 0 &amp;&amp; memcmp(buffer, sig2, 4) != 0);           \n\n            // increase counter\n            counter++;       \n        }\n        // if not jpg, read next block\n        else\n        fread(&amp;buffer, sizeof(unsigned char), 512, card);        \n    }   \n\n    // close card.raw\n    fclose(card);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "list"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1423075091, "post_id": 28328835, "comment_id": 45005237, "body": "Have you given it an attempt? You don&#39;t even have the <code>AlternateLists</code> declaration."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1423075114, "post_id": 28328835, "comment_id": 45005245, "body": "(a) I&#39;m tolerably certain the question has been asked and answered before on SO. (b) What have you tried?  What have you thought of trying?  It really isn&#39;t very hard.  (What&#39;s slightly more unusual is that you have a doubly-linked list; you&#39;ll need to take care of <code>prev</code> pointers as well as <code>next</code> pointers.)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1423075171, "post_id": 28328835, "comment_id": 45005274, "body": "Pop from each input list altenately and, if pop succeeds, push onto output list.  What&#39;s the problem, (apart from deciding what to do if the input lists are different lengths)?"}, {"owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "edited": false, "score": 0, "creation_date": 1423075365, "post_id": 28328835, "comment_id": 45005373, "body": "Of course i&#39;ve tried, i&#39;ve spent all the day trying. I didn&#39;t paste what i&#39;ve done because now it became a total mess.. Anyway i&#39;ve been trying to detach the node from list 2 and insert in list one. But i&#39;m stuck in getting the over the first item in list two. Now i&#39;ll update the question with my code..  My question was more on how would you have done it?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1423075448, "post_id": 28328835, "comment_id": 45005415, "body": "@JonathanLeffler - assuming that the list &#39;class&#39; already has push/pop functions that take a list pointer as a parameter, this should be fairly easy?  If the lists don&#39;t have push/pop/insert/remove/whatever functions, they are not useable anyway."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423075880, "post_id": 28328835, "comment_id": 45005635, "body": "Oh - spaghetti code:)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1423076294, "post_id": 28328835, "comment_id": 45005868, "body": "It is odd to be using all that counting with the list insertion code.  In your <code>AlternateList()</code> function, you have an unused variable <code>z</code> which is causing a memory leak since you <code>malloc()</code> a value for it to point at.  You also have an unused <code>z</code> in <code>UniSci()</code>.  The basic logic needs to be: <i>while (list1 not empty and list2 not empty) { add first item from list1 to output; add first item from list2 to output; } while (list1 not empty) { add first item from list1 to output; } while (list2 not empty) { add first item from list2 to output; } .</i> Only one of the last two loops will execute."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1423076358, "post_id": 28328835, "comment_id": 45005901, "body": "You can also optimize the tail loops to a single splicing operation -- <i>if (list1 is not empty) add the rest of list1 to the output; if (list2 is not empty) add the rest of list2 to the output.</i>"}, {"owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "edited": false, "score": 0, "creation_date": 1423076676, "post_id": 28328835, "comment_id": 45006059, "body": "For this reason I was not pasting here the code, because while modifying it, it became a mess.."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1423076775, "post_id": 28329230, "comment_id": 45006106, "body": "All that conditional logic in the first loop is ungainly, isn&#39;t it?  See my later comments to the main question for how I think it should be done."}, {"owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "edited": false, "score": 0, "creation_date": 1423077578, "post_id": 28329230, "comment_id": 45006528, "body": "Why do you think i&#39;m getting this error on line: 4? error: incompatible types when assigning to type \u2018node\u2019 from type \u2018struct node *\u2019|"}, {"owner": {"reputation": 2548, "user_id": 2400454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iEfZ3.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2400454/jay"}, "edited": false, "score": 0, "creation_date": 1423079971, "post_id": 28329230, "comment_id": 45007786, "body": "Sorry I wrote this in a hurry Im going to clean this up"}, {"owner": {"reputation": 2548, "user_id": 2400454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iEfZ3.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2400454/jay"}, "edited": false, "score": 1, "creation_date": 1423080834, "post_id": 28329230, "comment_id": 45008293, "body": "Let me know if these changes help."}, {"owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "edited": false, "score": 0, "creation_date": 1423081771, "post_id": 28329230, "comment_id": 45008786, "body": "Really thanks for your help, you are awesome!  Anyway it works, but half.. Assuming that we have the lists: L1={1,2,3,4) and L2{1,2,3,4) the result should be: L3={1,1,2,2,3,3,4,4} but the actual result is: L3={1,1,3}. I made small changes since my struct was in Italian and the second while is with wrong variables. I&#39;ll paste here my code:<a href=\"http://pastebin.com/nabRZER7\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 2548, "user_id": 2400454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iEfZ3.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2400454/jay"}, "edited": false, "score": 0, "creation_date": 1423083683, "post_id": 28329230, "comment_id": 45009830, "body": "Please click the check mark under the up/down vote if it is the answer you are looking for :D"}, {"owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "edited": false, "score": 0, "creation_date": 1423084756, "post_id": 28329230, "comment_id": 45010375, "body": "Sure ;) Are you so kind to have a quick check on my last comment? Thanks again!!"}, {"owner": {"reputation": 2548, "user_id": 2400454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iEfZ3.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2400454/jay"}, "edited": false, "score": 0, "creation_date": 1423093570, "post_id": 28329230, "comment_id": 45014255, "body": "Wait I am a little confused as too what you are having trouble with? Everything works on my end"}, {"owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "edited": false, "score": 0, "creation_date": 1423139743, "post_id": 28329230, "comment_id": 45032530, "body": "It works :) Just one problem about the c2 while.<code>&#47;* At this point c1 is NULL *&#47; while(c2){    c1-&gt;succ = c2; &#47;* Boom *&#47;    c2 = c2-&gt;succ;     c1 = c2; }</code>"}, {"owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "edited": false, "score": 0, "creation_date": 1423140657, "post_id": 28329230, "comment_id": 45033091, "body": "Solved, just had to rewind c1 :)"}], "tags": [], "owner": {"reputation": 2548, "user_id": 2400454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iEfZ3.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2400454/jay"}, "is_accepted": true, "score": 1, "last_activity_date": 1423093655, "last_edit_date": 1423093655, "creation_date": 1423076250, "answer_id": 28329230, "question_id": 28328835, "link": "https://stackoverflow.com/questions/28328835/merge-two-lists-without-creating-new-nodes-in-c/28329230#28329230", "title": "Merge two lists without creating new nodes in C?", "body": "<pre><code>node* AlternateLists(node* l1, node* l2){\n // Check if arrays are != NULL\n  if(!l1 &amp;&amp; !l2) return NULL;\n  if(!l1) return l2;\n  if(!l2) return l1; \n  //----------------------\n  node* c1 = l1;\n  node* c2 = l2;\n  node* next;\n  node* next2;\n  while(c1){\n   next = c1-&gt;next;\n   if(c2){ // check to make sure there are still nodes in array2\n     c1-&gt;next = c2;\n     next2 = c2-&gt;next;\n     c2-&gt;next = next;\n     c2 = next2;\n   }else{\n    c1-&gt;next = next;\n   }\n   c1 = next;\n }\n while(c2){ //if there are more nodes in list 2 then there are in list 1\n   c1-&gt;next = c2;\n   c2 = c2-&gt;next;\n   c1 = c2;\n }\n return l1;\n</code></pre>\n\n<p>}</p>\n\n<p>The Idea here is a running pointer for both arrays <code>c1</code> and <code>c2</code> restructuring as you propagate through both of the lists.</p>\n"}], "owner": {"reputation": 450, "user_id": 4432661, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/eb0a64764dbc873e687713b4c379a37d?s=128&d=identicon&r=PG&f=1", "display_name": "notme", "link": "https://stackoverflow.com/users/4432661/notme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 28329230, "answer_count": 1, "score": 0, "last_activity_date": 1423093655, "creation_date": 1423074916, "last_edit_date": 1423082799, "question_id": 28328835, "link": "https://stackoverflow.com/questions/28328835/merge-two-lists-without-creating-new-nodes-in-c", "title": "Merge two lists without creating new nodes in C?", "body": "<p>My exams are close and I'm stuck since the begin of the day on this problem:</p>\n\n<blockquote>\n  <p>Write a function called AlternateLists () that takes as input two\n  lists and returns a third obtained alternating nodes of the two\n  inputs. Warning: the function must use the same nodes of input lists\n  and should not create new nodes.</p>\n</blockquote>\n\n<p>The structure of the list is something like this:</p>\n\n<pre><code>struct nodo {\n    int inf;\n    struct nodo *succ;\n    struct nodo *prec;\n};\ntypedef struct nodo node;\n</code></pre>\n\n<p>Can somebody help me by giving an example of the function?</p>\n\n<p>Here is my code, but it became a mess after all the day working on it.. Basicaly I've been trying to detach the node from list 2 and insert in list one. But I'm stuck in getting the over the first item in list two.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct nodo {\n    int inf;\n    struct nodo *succ;\n    struct nodo *prec;\n};\ntypedef struct nodo nodo;\n\nnodo *RicercaPosizione( nodo *a, int i );\nnodo *Inserisci(nodo *a, int i, int x);\nnodo* AlternateLists(nodo* list1, nodo* list2);\nvoid *MostraLista(nodo *a);\n\nint main(){\n\n    nodo *lista1=NULL;\n    nodo *lista2=NULL;\n    nodo *lista3=NULL;\n    int numeri[]={1,2,3,4};\n    int numeri2[]={5,6,7,8};\n\n    int i=0; //filling the first list\n    while(numeri[i]!='\\0'){\n        printf(\"%d\",i);\n        lista1=Inserisci(lista1,i, numeri[i]);\n        i++;\n    }\n\n    printf(\"lista1 \\n\\n\");\n    MostraLista(lista1);\n    lista2=lista1;\n    printf(\"lista2 \\n\\n\");\n    MostraLista(lista2);\n    printf(\"\\n\\nlista3 \\n\\n\");\n    lista3=AlternateLists(lista1,lista2);\n    MostraLista(lista3);\n}\n\n\nnodo* AlternateLists(nodo* l1, nodo* l2){\n    // Check if arrays are != NULL\n    if(!l1 &amp;&amp; !l2) return NULL;\n    if(!l1) return l2;\n    if(!l2) return l1;\n    //----------------------\n    nodo* c1 = l1;\n    nodo* c2 = l2;\n    nodo* next;\n    nodo* next2;\n    while(c1){\n     next = c1-&gt;succ;\n     if(c2){ // check to make sure there are still nodes in array2\n       c1-&gt;succ = c2;\n       next2 = c2-&gt;succ;\n       c2-&gt;succ = next;\n       c2 = next2;\n\n     }else{\n       c1-&gt;succ = next;\n     }\n     c1 = next;\n    }\n    /*while(c2){ //if there are more nodes in list 2 then there are in list 1\n      c1-&gt;succ = c2;\n      c2 = c2-&gt;succ;\n    }*/\n    return l1;\n }\n\n\n\n\n\n//Insert etc.\n\nnodo *Inserisci(nodo *a, int i, int x){\n    nodo *q, *p;\n    if ( i == 0 ){\n        q = malloc(sizeof(nodo));\n        q-&gt;succ = a; q-&gt;prec = NULL;\n        q-&gt;inf = x;\n        if (a != NULL)\n            a-&gt;prec = q;\n        a = q;\n    } else {\n        p = RicercaPosizione( a, i-1);\n        if (p != NULL){\n            q = malloc(sizeof(nodo));\n            q-&gt;inf = x;\n            q-&gt;succ = p-&gt;succ;\n            q-&gt;prec = p;\n            if ( p-&gt;succ != NULL)\n                p-&gt;succ-&gt;prec = q;\n            p-&gt;succ = q;\n        }\n    }\n    return a;\n}\n\nnodo *RicercaPosizione( nodo *a, int i ){\n    nodo *p = a;\n    int j = 0;\n    while ( j &lt; i &amp;&amp; p != NULL){\n        p = p-&gt;succ;\n        j = j+1;\n    }\n    return p;\n}\n\nvoid *MostraLista(nodo *a){\n    nodo *p = a;\n\n    while ( p != NULL ){\n        printf(\"%d, \", p-&gt;inf);\n        p = p-&gt;succ;\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "function", "int"], "comments": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 2, "creation_date": 1423073677, "post_id": 28328437, "comment_id": 45004467, "body": "Hint: they&#39;re the closest factors to the square root of your number."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1423076826, "post_id": 28328437, "comment_id": 45006138, "body": "Are you sure? For example for the number 1111 = 11 * 101, the two factors closest together are 1 and 11."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1423076913, "post_id": 28328437, "comment_id": 45006177, "body": "If the input is 24, then the output should be [1,2], or [2,3], or [3,4]."}], "answers": [{"comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1423076201, "post_id": 28328782, "comment_id": 45005807, "body": "This will take a bit in the case of 18446744073709551566... Which happens to be 2 * 9223372036854775783, both of which are prime. Still, I guess it&#39;d only be about 4294967296 iterations, so not too horribly bad... Of course, the other alternative implementation I can think of off the top of my head would require fully factoring the number first, so it probably wouldn&#39;t fare too much better for efficiency..."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1423076860, "post_id": 28328782, "comment_id": 45006150, "body": "For that number, surely 1 and 2 are the two factors closest together."}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "reply_to_user": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1423078661, "post_id": 28328782, "comment_id": 45007113, "body": "@gnasher729 I would presume (possibly incorrectly) that 1 should not be a valid candidate, except possibly in the case of a prime number. Otherwise, &quot;1 and 2&quot; would be a trivial answer for any even number that didn&#39;t also happen to be a perfect square... Yet another way in which the question is a bit under-specified, as you&#39;ve already noted in a couple other ways..."}, {"owner": {"reputation": 133, "user_id": 3856507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ff0d216289b8c93081956107577e81?s=128&d=identicon&r=PG&f=1", "display_name": "David Sherron", "link": "https://stackoverflow.com/users/3856507/david-sherron"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1423082617, "post_id": 28328782, "comment_id": 45009251, "body": "@twalberg In order to fully optimize the algorithm, we&#39;d need more knowledge of the expected distribution of inputs. Factoring can&#39;t possibly be faster without implementing a much more complex algorithm (and likely not then); my algorithm is effectively just a textbook factoring algorithm that short-circuits on the first factor it finds."}, {"owner": {"reputation": 133, "user_id": 3856507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ff0d216289b8c93081956107577e81?s=128&d=identicon&r=PG&f=1", "display_name": "David Sherron", "link": "https://stackoverflow.com/users/3856507/david-sherron"}, "reply_to_user": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 2, "creation_date": 1423082988, "post_id": 28328782, "comment_id": 45009462, "body": "@gnasher729 while the op was not perfectly clear, her examples implied that she intended to ask for the &quot;factor pair&quot; with the smallest difference, rather than any two factors at all. This small clarification would fully specify the intended question, while also guaranteeing uniqueness and aligning with the examples given by the op. I think I&#39;ve answered the question the op intended to ask, even though I admit I am making an assumption about her motives."}], "tags": [], "owner": {"reputation": 133, "user_id": 3856507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ff0d216289b8c93081956107577e81?s=128&d=identicon&r=PG&f=1", "display_name": "David Sherron", "link": "https://stackoverflow.com/users/3856507/david-sherron"}, "is_accepted": false, "score": 9, "last_activity_date": 1423074763, "creation_date": 1423074763, "answer_id": 28328782, "question_id": 28328437, "link": "https://stackoverflow.com/questions/28328437/is-there-a-way-to-find-the-2-whole-factors-of-an-int-that-are-closest-together/28328782#28328782", "title": "Is there a way to find the 2 whole factors of an int that are closest together?", "body": "<p>The algorithm to do this is simple; take the square root of your number as an integer (you want to truncate, not round). Test if that value is a factor of your input; if so, your input divided by that number are your answer. Otherwise, subtract 1 from your previous value and try again.</p>\n\n<p>In code (the array literal is the wrong syntax, but the theory is correct):</p>\n\n<pre><code>//this code assumes that your input is &gt; 0, will not work otherwise\nfunction int[] getClosestFactors(int input) {\n  int testNum = (int)sqrt(input);\n  while (input % testNum != 0) {\n    testNum--;\n  }\n  return {testNum, input / testNum};\n}\n</code></pre>\n\n<p>Basically, you know that in any pair of factors, the lowest factor must be less than or equal to the square root. So if you start at the integer equal to or less than the square root of your input, and count down, the first factor you find will be the smaller of the pair of closest factors. This terminates for all integers > 0 because you will eventually reach 1, which is a factor of all other numbers.</p>\n"}], "owner": {"reputation": 229, "user_id": 3527863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HKhoz.png?s=128&g=1", "display_name": "Pyraminx", "link": "https://stackoverflow.com/users/3527863/pyraminx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2146, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1423074763, "creation_date": 1423073582, "question_id": 28328437, "link": "https://stackoverflow.com/questions/28328437/is-there-a-way-to-find-the-2-whole-factors-of-an-int-that-are-closest-together", "title": "Is there a way to find the 2 whole factors of an int that are closest together?", "body": "<p>I'm a beginner still learning to us C and I don't know how to find the factors of an int that are the closest to each other.</p>\n\n<p>For example, if the input was the number 6, the output would be [2,3]. If the input was 24, then the output would be [4,6].</p>\n\n<p>Is there a way to do this? Any help would be appreciated.</p>\n"}, {"tags": ["c", "double", "decimal"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1423072069, "post_id": 28327922, "comment_id": 45003553, "body": "Try this <code>float i, f = 120.99f;</code>."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1423072142, "post_id": 28327922, "comment_id": 45003597, "body": "none in standard c++, you need a decimal type, like <a href=\"http://sourceforge.net/projects/stddecimal/\" rel=\"nofollow noreferrer\">sourceforge.net/projects/stddecimal</a>"}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1423072172, "post_id": 28327922, "comment_id": 45003616, "body": "Use <code>ftoa()</code> and copy each number to a <code>char</code> buffer, skipping the decimal point character via <code>isdigit()</code>."}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1423072649, "post_id": 28327922, "comment_id": 45003919, "body": "<code>i = f * 100 + 0.5f</code> will avoid problems in numbers such as <code>120.99</code>.  It rounds up or down to the nearest integer (but use <code>-0.5f</code> for negative values)."}, {"owner": {"reputation": 3421, "user_id": 561560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d8a5717a13a34d3a4919113da99b19a?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/561560/josh"}, "edited": false, "score": 0, "creation_date": 1423072872, "post_id": 28327922, "comment_id": 45004038, "body": "If you need exact precision, use integer types instead. For example, using floating point types when handling money (e.g. bank accounts) would be a recipe for disaster."}], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423072775, "post_id": 28328124, "comment_id": 45003986, "body": "no casting happens when you store a <code>double</code> value in a <code>float</code> variable. What happens is an implicit conversion."}, {"owner": {"reputation": 1829, "user_id": 4242097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1347add4ae303c0258a3db358ed77c55?s=128&d=identicon&r=PG", "display_name": "Parham Alvani", "link": "https://stackoverflow.com/users/4242097/parham-alvani"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423073006, "post_id": 28328124, "comment_id": 45004106, "body": "float is 32 value and double is 64 bit value and their storing algorithm is different so casting between them is dangerous. you can see <a href=\"http://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow noreferrer\">Wikipeadia</a> for details."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423075841, "post_id": 28328124, "comment_id": 45005614, "body": "please don&#39;t teach me floating-point numbers. I&#39;m perfectly aware of the shortcomings of converting between FP numbers of different precision. I was referring to the incorrect wording in your answer (a &quot;cast&quot; is an explicit conversion by definition; hence an implicit conversion cannot be called a &quot;cast&quot;.)"}], "tags": [], "owner": {"reputation": 1829, "user_id": 4242097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1347add4ae303c0258a3db358ed77c55?s=128&d=identicon&r=PG", "display_name": "Parham Alvani", "link": "https://stackoverflow.com/users/4242097/parham-alvani"}, "is_accepted": false, "score": 0, "last_activity_date": 1423073047, "last_edit_date": 1423073047, "creation_date": 1423072597, "answer_id": 28328124, "question_id": 28327922, "link": "https://stackoverflow.com/questions/28327922/moving-decimal-place-to-right-in-c/28328124#28328124", "title": "Moving decimal place to right in c", "body": "<p>You can use</p>\n\n<pre><code>float f = 120.99f\n</code></pre>\n\n<p>or</p>\n\n<pre><code>double f = 120.99\n</code></pre>\n\n<p>by default c store floating-point values as double so if you store them in float variable implicit casting is happened and it is bad ...<br>\ni think this works.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 5, "last_activity_date": 1423075800, "last_edit_date": 1423075800, "creation_date": 1423072868, "answer_id": 28328221, "question_id": 28327922, "link": "https://stackoverflow.com/questions/28327922/moving-decimal-place-to-right-in-c/28328221#28328221", "title": "Moving decimal place to right in c", "body": "<p>Use the <code>round</code> function</p>\n\n<pre><code>float f = 120.99;\nint i = round( f * 100.0 );\n</code></pre>\n\n<p>Be aware however, that a <code>float</code> typically only has 6 or 7 digits of precision, so there's a maximum value where this will work. The smallest <code>float</code> value that won't convert properly is the number <code>131072.01</code>. If you multiply by 100 and round, the result will be <code>13107202</code>.</p>\n\n<p>You can extend the range of your numbers by using <code>double</code> values, but even a <code>double</code> has limited range. (A <code>double</code> has 16 or 17 digits of precision.) For example, the following code will print <code>10000000000000098</code> </p>\n\n<pre><code>double d = 100000000000000.99;\nuint64_t j = round( d * 100.0 );\nprintf( \"%llu\\n\", j );\n</code></pre>\n\n<p>That's just an example, finding the smallest number is that exceeds the precision of a <code>double</code> is left as an exercise for the reader.</p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 4, "last_activity_date": 1423076421, "last_edit_date": 1423076421, "creation_date": 1423073027, "answer_id": 28328263, "question_id": 28327922, "link": "https://stackoverflow.com/questions/28327922/moving-decimal-place-to-right-in-c/28328263#28328263", "title": "Moving decimal place to right in c", "body": "<p>Use fixed-point arithmetic on integers:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define abs(x) ((x)&lt;0 ? -(x) : (x))\n\nint main(void)\n{\n    int d = 12099;\n    int i = d * 100;\n    printf(\"%d.%02d\\n\", d/100, abs(d)%100);\n    printf(\"%d.%02d\\n\", i/100, abs(i)%100);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": false, "score": 1, "last_activity_date": 1423073049, "creation_date": 1423073049, "answer_id": 28328269, "question_id": 28327922, "link": "https://stackoverflow.com/questions/28327922/moving-decimal-place-to-right-in-c/28328269#28328269", "title": "Moving decimal place to right in c", "body": "<p>If you'd like to continue operating on the number as a floating point number, then the answer is more or less <strong>no</strong>. There's various things you can do for <strong>small</strong> numbers, but as your numbers get larger, you'll have issues.</p>\n\n<p>If you'd like to only print the number, then my recommendation would be to convert the number to a string, and then move the decimal point there. This can be slightly complicated depending on how you represent the number in the string (exponential and what not).</p>\n\n<p>If you'd like this to work and you don't mind not using floating point, then I'd recommend researching any number of fixed decimal libraries.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1423074524, "post_id": 28328532, "comment_id": 45004932, "body": "Minor point: &quot;IEEE-754&quot; does specify both floating point binary and floating point decimal formats of which your answer relies on the far more popular binary ones.  Decimal formats were somewhat popular in the past and I suspect they will have a minor resurgence for exactly these kind of issues."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1423074715, "post_id": 28328532, "comment_id": 45005039, "body": "@chux : I cited the wikipedia page that gives more details for that reason among others. But if OP system were using decimal IEEE 754, it would not have found any issue :-)"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1423074271, "last_edit_date": 1423074271, "creation_date": 1423073910, "answer_id": 28328532, "question_id": 28327922, "link": "https://stackoverflow.com/questions/28327922/moving-decimal-place-to-right-in-c/28328532#28328532", "title": "Moving decimal place to right in c", "body": "<p>Your problem is that float are represented internaly using <a href=\"http://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow\">IEEE-754</a>. That is in base 2 and not in base 10. <code>0.25</code> will have an exact representation, but <code>0.1</code> has not, nor has <code>120.99</code>.</p>\n\n<p>What really happens is that due to floating point inacuracy, the ieee-754 float closest to the decimal value <code>120.99</code> multiplied by <code>100</code> is slightly below <code>12099</code>, so it is <em>truncated</em> to <code>12098</code>. You compiler should have warned you that you had a <em>truncation from float to in</em> (mine did).</p>\n\n<p>The only foolproof way to get what you expect is to add <code>0.5</code> to the float before the truncation to int : </p>\n\n<pre><code>i = (f * 100) + 0.5\n</code></pre>\n\n<p>But <strong>beware</strong> floating point are inherently inaccurate when processing decimal values.</p>\n\n<p>Edit :</p>\n\n<p>Of course for negative numbers, it should be <code>i = (f * 100) - 0.5</code> ...</p>\n"}], "owner": {"reputation": 53, "user_id": 4526981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b47ab63d2028f4564a54b0554ff1c38?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4526981/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6738, "favorite_count": 0, "accepted_answer_id": 28328532, "answer_count": 5, "score": 5, "last_activity_date": 1423076421, "creation_date": 1423071863, "question_id": 28327922, "link": "https://stackoverflow.com/questions/28327922/moving-decimal-place-to-right-in-c", "title": "Moving decimal place to right in c", "body": "<p>I'm new to C and when I run the code below, the value that is put out is 12098 instead of 12099.</p>\n\n<p>I'm aware that working with decimals always involves a degree of inaccuracy, but is there a way to accurately move the decimal point to the right two places every time?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int i;\n    float f = 120.99;\n\n    i = f * 100;\n    printf(\"%d\", i);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "edited": false, "score": 0, "creation_date": 1423072131, "post_id": 28327691, "comment_id": 45003589, "body": "Explain this in more defails - I have completely no idea what you&#39;re trying to achieve. The first thought is that you are probably trying to &quot;overload&quot; a macro, that is, you want that it do different things depending on what name you pass as &#39;name&#39; to &#39;PROTOTYPENAMED&#39; macro. How would you like to use the&quot;second version&quot;of that macro and what result would you like to achieve?"}, {"owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "reply_to_user": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "edited": false, "score": 0, "creation_date": 1423073794, "post_id": 28327691, "comment_id": 45004528, "body": "@Ethouris read an question again, macro overloading is unexpected behaviour. <i>I might want to write</i> <code>#define PROTOTYPENAMED(ANOTHERFUNCTION) WhatsThat()</code> <i>to generate</i> <code>#define ANOTHERFUNCTION_ABC WhatsThat()</code>"}, {"owner": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "edited": false, "score": 0, "creation_date": 1423159091, "post_id": 28327691, "comment_id": 45045384, "body": "So, yes, as Basile said, it&#39;s not possible to achieve in C/C++ preprocessor. This better be some completely generator-based thing. I personally use Tcl for that, not only because I like it, but that it can simply contain the whole text in {...} without any special &quot;escapes&quot;. Then you can either contain $variables inside or have some unique-impossible-in-normal-program statmenents that will be next replaced by simple search-replace (&quot;string map&quot; command in Tcl) - such as @KEY@ used in *.in files."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 4, "last_activity_date": 1423071606, "last_edit_date": 1423071606, "creation_date": 1423071239, "answer_id": 28327732, "question_id": 28327691, "link": "https://stackoverflow.com/questions/28327691/generate-a-name-for-macro-with-another-macro-c-preprocessor/28327732#28327732", "title": "generate a name for macro with another macro (c preprocessor)", "body": "<p>Not doable with the standard C/C++ preprocessor. However, you might feed your compiler using some C++ or C source generator, like e.g. the <a href=\"http://en.nothingisreal.com/wiki/GPP\" rel=\"nofollow\">GPP</a> or the <a href=\"https://www.gnu.org/software/m4/\" rel=\"nofollow\">GNU m4</a> preprocessors, or some script -e.g. in Python, <code>awk</code>, <code>guile</code>, ...- (or program) of yours.</p>\n\n<p><sup>For example, <a href=\"https://en.wikipedia.org/wiki/Yacc\" rel=\"nofollow\"><code>yacc</code></a> or <code>bison</code> and <a href=\"http://www.antlr.org/\" rel=\"nofollow\">ANTLR</a> generate C++ code. And <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> is compiled into C++ code.</sup></p>\n\n<p>Of course, you need to configure your builder accordingly, e.g. add some more <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow\">GNU make</a> rules.</p>\n"}], "owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2611, "favorite_count": 0, "closed_date": 1423073192, "accepted_answer_id": 28327732, "answer_count": 1, "score": 1, "last_activity_date": 1423076671, "creation_date": 1423071094, "last_edit_date": 1495541571, "question_id": 28327691, "link": "https://stackoverflow.com/questions/28327691/generate-a-name-for-macro-with-another-macro-c-preprocessor", "closed_reason": "Duplicate", "title": "generate a name for macro with another macro (c preprocessor)", "body": "<p>I can generate name for a function using an macro which is taken from <a href=\"https://stackoverflow.com/questions/1253934/c-pre-processor-defining-for-generated-function-names\">C pre-processor defining for generated function names</a> .</p>\n\n<pre><code>#define POSTFIX _ABC //_ABC should be mentioned only there\n#define PROTOTYPENAME(symbol) symbol ## POSTFIX\n#define PROTOTYPENAMED(sym) PROTOTYPENAME(sym)\n\nint PROTOTYPENAMED(Function)(int a, int b, int c);\n</code></pre>\n\n<p>Above would result as</p>\n\n<pre><code>int Function_ABC(int a, int b, int c);\n</code></pre>\n\n<p>If I want to generate equivalent for <code>#define ANOTHERFUNCTION_ABC WhatsThat()</code> I might want to write</p>\n\n<pre><code>#define PROTOTYPENAMED(ANOTHERFUNCTION) WhatsThat()\n</code></pre>\n\n<p>but this will redefine a <code>PROTOTYPENAMED</code> macro. Is there a way to do it correctly without writing <code>_ABC</code> everywhere?</p>\n\n<p>PS. I am using Visual Studio 2013 and code should work in C and C++.</p>\n\n<p>Edit:\nalk: this question contains more useful answer how to do this using another tools. You should not mark this question as dublicate.</p>\n\n<p>Edit 2:\nI was thinking about alternatives that do not need an external tools. Maybe it is not needed to declare it as macro? If we assume <code>WhatsThat()</code> is returning <code>int</code>, it is not forbidden to write <code>int PROTOTYPENAMED(ANOTHERFUNCTION) = WhatsThat();</code>.</p>\n"}, {"tags": ["c", "bash", "fork", "execvp"], "answers": [{"comments": [{"owner": {"reputation": 11195, "user_id": 996110, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/280Gp.jpg?s=128&g=1", "display_name": "SirRupertIII", "link": "https://stackoverflow.com/users/996110/sirrupertiii"}, "edited": false, "score": 0, "creation_date": 1423071724, "post_id": 28327804, "comment_id": 45003343, "body": "thanks for taking a look.  I made that change and now I get <code>cannot access ls: No such file or directory</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423071909, "post_id": 28327804, "comment_id": 45003455, "body": "Did you mean <code>argv+1</code> ?"}, {"owner": {"reputation": 11195, "user_id": 996110, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/280Gp.jpg?s=128&g=1", "display_name": "SirRupertIII", "link": "https://stackoverflow.com/users/996110/sirrupertiii"}, "edited": false, "score": 0, "creation_date": 1423071971, "post_id": 28327804, "comment_id": 45003494, "body": "argv+1 seems to do exactly what &amp;argv[1] does"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423072059, "post_id": 28327804, "comment_id": 45003543, "body": "@WeatherVane: I find <code>&amp;argv[1]</code> more intuitive because from that expression I can easily guess that <i>argv</i> is an array without looking at type declaration."}], "tags": [], "owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "is_accepted": false, "score": 4, "last_activity_date": 1423072305, "last_edit_date": 1423072305, "creation_date": 1423071523, "answer_id": 28327804, "question_id": 28327684, "link": "https://stackoverflow.com/questions/28327684/getting-infinite-loop-on-execvp/28327804#28327804", "title": "Getting infinite loop on execvp()", "body": "<p>When you do <code>./arguments ls -l</code>, your code is executing <code>execvp(\"./arguments\", {\"./arguments\", \"ls\", \"-l\"})</code>. Your program is forking and calling itself infinitely: you have made <a href=\"https://en.wikipedia.org/wiki/Fork_bomb\" rel=\"nofollow\">fork-bomb</a>. :)</p>\n\n<p>This is because <code>argv[0]</code> is <strong>your</strong> executable file (i.e. <em>./arguments</em>).</p>\n\n<p>You should use <code>argv[1]</code> instead, like this:</p>\n\n<pre><code>execvp(argv[1], &amp;argv[1]);\n</code></pre>\n\n<p>Note you have to change both the first and the second argument.</p>\n\n<p>When executed, that line will be equivalent to: <code>execvp(\"ls\", {\"ls\", \"-l\"})</code>.</p>\n"}], "owner": {"reputation": 11195, "user_id": 996110, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/280Gp.jpg?s=128&g=1", "display_name": "SirRupertIII", "link": "https://stackoverflow.com/users/996110/sirrupertiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1423072305, "creation_date": 1423071064, "last_edit_date": 1423071827, "question_id": 28327684, "link": "https://stackoverflow.com/questions/28327684/getting-infinite-loop-on-execvp", "title": "Getting infinite loop on execvp()", "body": "<p>I am learning about how fork() works and I am running into an infinite loop when calling <code>execvp(argh[0], argv);</code></p>\n\n<p>Here is my program:</p>\n\n<pre><code> int main (int argc, char *argv[])\n {\n    pid_t pid;\n    pid = fork();\n    if (pid &lt; 0) { // error occurred \n            printf(\"Something went wrong!\\n\");\n            exit(-1);\n    } else if (pid == 0) { // child process \n            printf(\"Child process.  \");\n            if(argc == 1 || argc == 0) {\n                    printf(\"No arguments provided. Terminating child.\\n\");\n                    exit(0);\n            } else if(argc == 2) {\n                    printf(\"One argument provided.\\n\");\n                    execlp(argv[1], argv[1], NULL);\n            } else {\n                    printf(\"More than one argument\\n\");\n                    execvp(argv[0], argv); // *** It's right here ***\n            }\n    } else { // parent process \n            printf(\"PARENT started with pid=%d.\\n\", pid);\n            int status = 0;\n            pid_t wait(int *status);\n            printf(\"PARENT resumed with status code: %i.  Now terminating parent.\\n\", status);\n            exit(0);\n    }\n    return 0;\n }\n</code></pre>\n\n<p>I'm trying to perform the operation (and arguments) that are passed into the function, with this code <code>execvp(argv[0], argv)</code>, but I'm getting an infinite loop when I do <code>./arguments ls -l</code>.  How should I be calling execvp?  Or should I call another method?</p>\n\n<p>Thanks for any help</p>\n\n<p>---Update---</p>\n\n<p>I made the change suggested in an answer which was to call <code>execvp(argv[1], argv);</code> (change the arguv[0] to arguv[1]) and I now get <code>cannot access ls: No such file or directory</code> rather than an infinite loop.</p>\n"}, {"tags": ["c", "linux-kernel"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1423073147, "post_id": 28327408, "comment_id": 45004180, "body": "Define address size. Do you mean the address space, as shown in user land thru <code>&#47;proc&#47;$pid&#47;maps</code> ?"}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1423078023, "post_id": 28327408, "comment_id": 45006781, "body": "<code>(sizeof (void*)) &lt;&lt; 3</code>?"}, {"owner": {"reputation": 151, "user_id": 1633509, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/34b9f957534ccc84ab41f81383d3c4ee?s=128&d=identicon&r=PG", "display_name": "Propantriol", "link": "https://stackoverflow.com/users/1633509/propantriol"}, "edited": false, "score": 0, "creation_date": 1423088235, "post_id": 28327408, "comment_id": 45012152, "body": "With address size I mean 4 byte for 32-bit and 8 byte for 64-bit processes. This is not about the address space."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 1633509, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/34b9f957534ccc84ab41f81383d3c4ee?s=128&d=identicon&r=PG", "display_name": "Propantriol", "link": "https://stackoverflow.com/users/1633509/propantriol"}, "edited": false, "score": 0, "creation_date": 1423091033, "post_id": 28333005, "comment_id": 45013425, "body": "Parsing doesn&#39;t seem to be a better option than checking the task-specific flags. I&#39;m looking for something <i>easier</i>."}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423089866, "creation_date": 1423089866, "answer_id": 28333005, "question_id": 28327408, "link": "https://stackoverflow.com/questions/28327408/determine-address-size-of-process-within-linux-kernel-x86-64/28333005#28333005", "title": "Determine address size of process within Linux kernel (x86_64)", "body": "<p>Open <code>/proc/self/maps</code> and parse for the <code>[vsyscall]</code> entry. A 64 bit process will have a 64 bit address, e.g.:</p>\n\n<pre><code>ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n</code></pre>\n\n<p>A 32 bit process won't. I don't have a 32 bit process on hand to provide an example, but it won't have a 64 bit address.</p>\n"}], "owner": {"reputation": 151, "user_id": 1633509, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/34b9f957534ccc84ab41f81383d3c4ee?s=128&d=identicon&r=PG", "display_name": "Propantriol", "link": "https://stackoverflow.com/users/1633509/propantriol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1423089866, "creation_date": 1423070079, "question_id": 28327408, "link": "https://stackoverflow.com/questions/28327408/determine-address-size-of-process-within-linux-kernel-x86-64", "title": "Determine address size of process within Linux kernel (x86_64)", "body": "<p>I have to work with the address size of 32-bit and 64-bit processes inside the Linux kernel on x86_64. The possibility to treat with this that I'm currently using is checking task-specific flags. But I was wondering if there is an easier way to determine the address size of a process.</p>\n\n<p>So, what's the proper and easiest way to retrieve the address size of a process within the Linux kernel?</p>\n"}, {"tags": ["c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1423070514, "post_id": 28327487, "comment_id": 45002618, "body": "more clarification: %s means - &#39;here is a pointer to a character, print it and all characters after it till you reach a char == \\0&#39;. %c means &#39;here is a character - print it&#39;"}, {"owner": {"reputation": 97, "user_id": 3212431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e5cc009b6ed8d3ec4dcbb7939ad337?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/3212431/denis"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1423071166, "post_id": 28327487, "comment_id": 45003027, "body": "Amaizing! @ gopi and @pm100. your answers completely answered my question. Thank You!!!"}, {"owner": {"reputation": 97, "user_id": 3212431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e5cc009b6ed8d3ec4dcbb7939ad337?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/3212431/denis"}, "edited": false, "score": 0, "creation_date": 1423072747, "post_id": 28327487, "comment_id": 45003965, "body": "how come  when the following line of code is used printf(&quot;\\n  [%c]\\n&quot;, ptr [2]); the &quot;ptr&quot; is treated as an array? I mean its cleary a pointer variable. but the said line of code works perfectly and prints out ASCII a; the third charactor from the above example."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1423074523, "post_id": 28327487, "comment_id": 45004931, "body": "a[i] means &#39;the thing at address a + (y * sizeof a)&#39;. So you get the thing at ptr + 2"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 5, "last_activity_date": 1423070353, "creation_date": 1423070353, "answer_id": 28327487, "question_id": 28327378, "link": "https://stackoverflow.com/questions/28327378/c-language-pointer-used-with-arrays/28327487#28327487", "title": "C Language Pointer Used With Arrays", "body": "<blockquote>\n  <p>As per my understanding the pointer can hold only an address, not a\n  complete string</p>\n</blockquote>\n\n<pre><code>char *ptr = \"I am a string\";\n</code></pre>\n\n<p>Is a string literal the string is stored in the read-only location and the address in which the data is stored is returned to the pointer <code>ptr</code>.</p>\n\n<blockquote>\n  <p>It does not print one single charactor and stop. What it does is that\n  it prints out an unrecognised character which is completely out of\n  ASCII table. I do not understand how that too is happening</p>\n</blockquote>\n\n<p>ptr is a pointer and using wrong format specifier in printf() lead to undefined behvaior.</p>\n\n<p>With <code>%s</code> if you provide the address where the string is stored the printf() prints out the whole string </p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 2195777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7591404da67e069dfc02842155bd7b?s=128&d=identicon&r=PG", "display_name": "CatchMeIfYouTry", "link": "https://stackoverflow.com/users/2195777/catchmeifyoutry"}, "is_accepted": false, "score": 1, "last_activity_date": 1423070600, "creation_date": 1423070600, "answer_id": 28327568, "question_id": 28327378, "link": "https://stackoverflow.com/questions/28327378/c-language-pointer-used-with-arrays/28327568#28327568", "title": "C Language Pointer Used With Arrays", "body": "<p>Also</p>\n\n<p><code>char *ptr = \"I am a string\";</code></p>\n\n<p>automatically inserts a null character at the end. So when you do a printf with %s format specifier, it starts from the address of the string literal and prints upto the null character and stops. </p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 3212431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e5cc009b6ed8d3ec4dcbb7939ad337?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/3212431/denis"}, "edited": false, "score": 0, "creation_date": 1423072266, "post_id": 28327919, "comment_id": 45003676, "body": "Hey Thank you for your time too shairing your knowledge. In that case I have a quite different problem.   char *ptr = &quot;I am a string&quot;;  is allowed in C language whereas char ptr = &quot;I am a string&quot;; is not.   So this initial declaration is called String literals?  Or is it called by anyother?"}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1423073149, "last_edit_date": 1423073149, "creation_date": 1423071859, "answer_id": 28327919, "question_id": 28327378, "link": "https://stackoverflow.com/questions/28327378/c-language-pointer-used-with-arrays/28327919#28327919", "title": "C Language Pointer Used With Arrays", "body": "<p>A pointer does not <em>hold</em> a string, it <em>points to</em> a string. (Easy to remember, it's called a \"pointer\", not a \"holder\"). To see the difference, write your postal address on a yellow sticky note. Does this piece of paper <em>hold</em> you? No, it <em>points to</em> you. It holds <em>your address</em>.</p>\n\n<p>Pointers are computer equivalent of postal addresses (in fact things that  pointers do hold are called addresses). They don't hold \"real things\" like strings, they tell where \"real things\" live.</p>\n\n<p>Back to our string, the pointer actually points to the first character of the string, not to the string as a whole, but that's not a problem because we know the rest of the string lives right next to the first chsracter.</p>\n\n<p>Now \"%s\" as a format specifier wants a pointer to the first character of a string, so you can correctly pass <code>p</code> to <code>printf</code>. OTOH <code>%c</code> wants a character, not a pointer, so passing <code>p</code> in this case leads to undefined behavior.</p>\n\n<p>So how come we can say things like <code>char* p = \"abc\"</code>? String literals are arrays of characters, and an array in most cases <em>decays</em> into pointer to its first element. Array-to-pointer decay is another confusing property of C but fortunately there is a lot of information available on it out there. OTOH `char p = \"abc\" is not valid, because a character is not an array (a house is not a street).</p>\n"}], "owner": {"reputation": 97, "user_id": 3212431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e5cc009b6ed8d3ec4dcbb7939ad337?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/3212431/denis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 28327487, "answer_count": 3, "score": 0, "last_activity_date": 1423073149, "creation_date": 1423070002, "question_id": 28327378, "link": "https://stackoverflow.com/questions/28327378/c-language-pointer-used-with-arrays", "title": "C Language Pointer Used With Arrays", "body": "<p>I compiled and ran the following code and the results too are depicted below.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \nint main(void) {\n\n    char *ptr = \"I am a string\"; \n\n    printf(\"\\n  [%s]\\n\", ptr);\n\n    return 0; }\n</code></pre>\n\n<p>** [I am a string]**</p>\n\n<p>I want to understand how a string has been assigned inside a pointer char. As per my understanding the pointer can hold only an address, not a complete string. Here it is holding one whole sentence. I do not understand how being a pointer allows it to behave such way.</p>\n\n<p>If I change the following line of code in the above example,</p>\n\n<pre><code>printf(\"\\n  [%c]\\n\", ptr); \n</code></pre>\n\n<p>It does not print one single charactor and stop. What it does is that it prints out an unrecognised character which is completely out of ASCII table. I do not understand how that too is happening. I would appreciate some light shred on this issue. </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423069943, "post_id": 28327326, "comment_id": 45002229, "body": "Read all values and discard those that you are not interested in?  You need not read directly into the array.  Read into a temporary variable and copy it into the array as you see fit."}, {"owner": {"reputation": 3, "user_id": 4529522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79522c18dfbccf6f5b9387384a246c63?s=128&d=identicon&r=PG&f=1", "display_name": "bandit1979", "link": "https://stackoverflow.com/users/4529522/bandit1979"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423070072, "post_id": 28327326, "comment_id": 45002315, "body": "How could I go about reading into a temporary variable?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423070460, "post_id": 28327326, "comment_id": 45002570, "body": "<code>double temp; fscanf(file,&quot;%lf&quot;,&amp;temp); if (\u2026) array[i][j] = temp;</code>"}, {"owner": {"reputation": 3, "user_id": 4529522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79522c18dfbccf6f5b9387384a246c63?s=128&d=identicon&r=PG&f=1", "display_name": "bandit1979", "link": "https://stackoverflow.com/users/4529522/bandit1979"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423071003, "post_id": 28327326, "comment_id": 45002938, "body": "Thank you very much. That solves my problem."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1423070128, "creation_date": 1423070128, "answer_id": 28327431, "question_id": 28327326, "link": "https://stackoverflow.com/questions/28327326/reading-values-from-a-file-into-a-non-corresponding-array/28327431#28327431", "title": "Reading values from a file into a non corresponding array", "body": "<p>The line</p>\n\n<pre><code>fscanf(file,\"%lf\",&amp;array[a][b])\n</code></pre>\n\n<p>is cause for undefined behavior since you haven't initialized <code>file</code>.</p>\n\n<p>Try changing the line:</p>\n\n<pre><code>   if (fopen(myfile,\"r\")==NULL)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>   if ((file = fopen(myfile,\"r\")) ==NULL)\n</code></pre>\n\n<p>Also, please post compilable code. You have missing <code>;</code> in couple of lines.</p>\n"}], "owner": {"reputation": 3, "user_id": 4529522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79522c18dfbccf6f5b9387384a246c63?s=128&d=identicon&r=PG&f=1", "display_name": "bandit1979", "link": "https://stackoverflow.com/users/4529522/bandit1979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423070574, "creation_date": 1423069816, "last_edit_date": 1423070574, "question_id": 28327326, "link": "https://stackoverflow.com/questions/28327326/reading-values-from-a-file-into-a-non-corresponding-array", "title": "Reading values from a file into a non corresponding array", "body": "<p>I am writing code in c. The method I currently use to read values from a file into an array is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\n\nint main(int argc, const char * argv[])\n{\n  int a,b;\n  double array[3][3];\n\n   FILE *file;\n   char *myfile=malloc(sizeof(char)*80);\n   sprintf(myfile,\"example.txt\");\n\n       if (fopen(myfile,\"r\")==NULL)\n       {\n       }\n\n       else\n       {\n        file=fopen(myfile,\"r\");\n         for (a=0;a&lt;3;a++)\n         {\n           for (b=0;b&lt;3;b++)\n           {\n              fscanf(file,\"%lf\",&amp;array[a][b]);\n           }\n         }fclose(file);\n       }\n}\n</code></pre>\n\n<p>If I have a file with values </p>\n\n<pre><code>1 2 3\n4 5 6\n7 8 9 \n</code></pre>\n\n<p>this code will read in each value one at a time into the array. This works for most of my purposes. However, I want to either write a new code or modify this to read in only certain values. For example, I would only want to read in the numbers <code>3 6 9</code> from the file into <code>array[3][1]</code> where the the first row would be 3, the second row would be 6, and the third row would be 9. I don't know how to do that and I have not been able to find a solution so far.</p>\n"}, {"tags": ["c", "gcc", "cygwin"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1423069715, "post_id": 28327283, "comment_id": 45002079, "body": "The &#39;hold-up&#39; is the fact that you don&#39;t add a newline to the end of the format string.  Output is line buffered by default; that means, output appears when a newline is generated."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 4484636, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ee782db64d40666ae44fb472595b49fb?s=128&d=identicon&r=PG&f=1", "display_name": "Dramal", "link": "https://stackoverflow.com/users/4484636/dramal"}, "edited": false, "score": 0, "creation_date": 1423070594, "post_id": 28327364, "comment_id": 45002669, "body": "Thank you for the clear explanation. This has been bothering me for a while. Now I understand it."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 8, "last_activity_date": 1423069954, "creation_date": 1423069954, "answer_id": 28327364, "question_id": 28327283, "link": "https://stackoverflow.com/questions/28327283/what-could-be-delaying-the-printf-output-of-my-c-program/28327364#28327364", "title": "What could be delaying the printf output of my C program?", "body": "<p>Buffering delays the output of your program. When you call <code>printf</code>, the output is stored in a buffer until one of three things happen:</p>\n\n<ul>\n<li>The length of internal buffer becomes insufficient for holding the output, or</li>\n<li>You call <code>fflush(stdout)</code> to initiate sending the buffer to console explicitly, or</li>\n<li>You print <code>'\\n'</code> character, and the output is sent to console (as opposed to sending the output to a file).</li>\n</ul>\n\n<p>If you don't like this behavior, and do not mind somewhat slower performance, you can call</p>\n\n<pre><code>setbuf(stdout, NULL);\n</code></pre>\n\n<p>to disable buffering.</p>\n"}], "owner": {"reputation": 157, "user_id": 4484636, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ee782db64d40666ae44fb472595b49fb?s=128&d=identicon&r=PG&f=1", "display_name": "Dramal", "link": "https://stackoverflow.com/users/4484636/dramal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 28327364, "answer_count": 1, "score": 3, "last_activity_date": 1423069954, "creation_date": 1423069648, "question_id": 28327283, "link": "https://stackoverflow.com/questions/28327283/what-could-be-delaying-the-printf-output-of-my-c-program", "title": "What could be delaying the printf output of my C program?", "body": "<p>A simplified version of my code is:</p>\n\n<pre><code>#include \"externalstuff.h\"\nvoid main(){\n    printf(\"Hello?\");\n    /* make calls to externalstuff\n    ....\n    */\n}\n</code></pre>\n\n<p>I did not write <code>externalstuff.h</code>, so I'm not sure what is going on there exactly.</p>\n\n<p>The calls to <code>externalstuff</code> take some time to execute. I would expect that <code>\"Hello?\"</code> would get printed, then I would have to wait for those external calls to finish, then my program would end. But what seems to be happening is that <code>\"Hello?\"</code> only gets printed right before my program ends, after a long wait for the <code>externalstuff</code>.</p>\n\n<p>Is it possible that something in <code>externalstuff.h</code> is delaying this output? If so, how?</p>\n\n<p>I'm using gcc in cygwin on Widnows 7.</p>\n"}, {"tags": ["c", "memory", "multidimensional-array"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1423069666, "post_id": 28327184, "comment_id": 45002047, "body": "no. not without some other bug in your code that we cant see"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1423069685, "post_id": 28327184, "comment_id": 45002060, "body": "the rest of the array is zero-initialized. So there should be no problems, unless in your specific case you access that area expecting a null-terminating string."}, {"owner": {"reputation": 3559, "user_id": 893219, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/clKUT.jpg?s=128&g=1", "display_name": "PhillyNJ", "link": "https://stackoverflow.com/users/893219/phillynj"}, "edited": false, "score": 0, "creation_date": 1423069851, "post_id": 28327184, "comment_id": 45002163, "body": "Ok, I&#39;ll have to do more troubleshooting. Its hard to re-create outside of the Micro-Controller environment."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1423069861, "post_id": 28327184, "comment_id": 45002167, "body": "@bolov it is an array of pointers (to string literals where declared), the undefined ones containing <code>NULL</code> but <i>not</i> zero-terminators"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423071803, "post_id": 28327184, "comment_id": 45003387, "body": "@WeatherVane that was my point"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1423069855, "creation_date": 1423069855, "answer_id": 28327334, "question_id": 28327184, "link": "https://stackoverflow.com/questions/28327184/incorrectly-initializing-a-multi-dimensional-array-and-memory/28327334#28327334", "title": "Incorrectly initializing a multi-dimensional array and Memory", "body": "<p>When you initialize your array using:</p>\n\n<pre><code>char *monthsDays[12][2] = {\n        {\"Jan\", \"31\" }, \n        {\"Feb\", \"28\" } \n\n};\n</code></pre>\n\n<p><code>monthsDays[2][0]</code> through <code>monthsDays[11][1]</code> are initialized to <code>0</code>. Dereferencing them will cause UB. Whether the problem is caused by dereferencing these NULL pointers or some other code stepping on these memory, only you can tell that by looking at the rest of your code.</p>\n"}], "owner": {"reputation": 3559, "user_id": 893219, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/clKUT.jpg?s=128&g=1", "display_name": "PhillyNJ", "link": "https://stackoverflow.com/users/893219/phillynj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 28327334, "answer_count": 1, "score": 0, "last_activity_date": 1423069855, "creation_date": 1423069358, "question_id": 28327184, "link": "https://stackoverflow.com/questions/28327184/incorrectly-initializing-a-multi-dimensional-array-and-memory", "title": "Incorrectly initializing a multi-dimensional array and Memory", "body": "<p>While writing some code for an AVR Micro-controller, my code would compile but would crash on run time (When I ran the code on the Micro-controller, the Micro-controller would stop functioning) After doing some troubleshooting, I realized I incorrectly initializing a multi-dimensional array. \nMy question is about how memory for an array is allocated, and is it possible that since there should be data in that memory location and there is not, would this cause the crash?<br>\nSuppose I have a 2-dimensional array. Normally, if initialized correctly if could look something like this:</p>\n\n<pre><code>char *monthsDays[12][2] = {\n    {\"Jan\", \"31\" }, \n    {\"Feb\", \"28\" }, \n    {\"Mar\", \"31\" }, \n    {\"Apr\", \"30\" }, \n    {\"May\", \"31\" }, \n    {\"Jun\", \"30\" }, \n    {\"Jul\", \"31\" }, \n    {\"Aug\", \"31\" }, \n    {\"Sep\", \"30\" }, \n    {\"Oct\", \"31\" }, \n    {\"Nov\", \"30\" }, \n    {\"Dec\", \"31\" }\n};\n</code></pre>\n\n<p>And say I created it like so:</p>\n\n<pre><code>char *monthsDays[12][2] = {\n        {\"Jan\", \"31\" }, \n        {\"Feb\", \"28\" } \n\n};\n</code></pre>\n\n<p>So I have allocated a lot of memory but haven't used it. At run time, is it possible for the unused portion of memory allocated for my array to be used by another part of the program, which in turn cause the crash?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1423068470, "post_id": 28326829, "comment_id": 45001249, "body": "<code>19 &amp; a</code> --&gt; <code>19*a</code>, also other <code>&amp;</code> to <code>*</code>"}, {"owner": {"reputation": 23, "user_id": 4529441, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kGPQA.gif?s=128&g=1", "display_name": "jparks54", "link": "https://stackoverflow.com/users/4529441/jparks54"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1423068852, "post_id": 28326829, "comment_id": 45001508, "body": "guess i should have known that. thank you"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4529441, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kGPQA.gif?s=128&g=1", "display_name": "jparks54", "link": "https://stackoverflow.com/users/4529441/jparks54"}, "edited": false, "score": 0, "creation_date": 1423068882, "post_id": 28326867, "comment_id": 45001535, "body": "still just exits after entering year."}, {"owner": {"reputation": 4425, "user_id": 2077651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/16036f8a383cc2cf4cde596b7f9f3a42?s=128&d=identicon&r=PG", "display_name": "Ganesh Kamath - &#39;Code Frenzy&#39;", "link": "https://stackoverflow.com/users/2077651/ganesh-kamath-code-frenzy"}, "reply_to_user": {"reputation": 23, "user_id": 4529441, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kGPQA.gif?s=128&g=1", "display_name": "jparks54", "link": "https://stackoverflow.com/users/4529441/jparks54"}, "edited": false, "score": 0, "creation_date": 1423069407, "post_id": 28326867, "comment_id": 45001894, "body": "updated answer. please make changes and build again."}, {"owner": {"reputation": 23, "user_id": 4529441, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kGPQA.gif?s=128&g=1", "display_name": "jparks54", "link": "https://stackoverflow.com/users/4529441/jparks54"}, "edited": false, "score": 0, "creation_date": 1423070445, "post_id": 28326867, "comment_id": 45002563, "body": "edited the build works great from your origanal answer just needed getchar(); at the end to keep it open. thanks."}], "tags": [], "owner": {"reputation": 4425, "user_id": 2077651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/16036f8a383cc2cf4cde596b7f9f3a42?s=128&d=identicon&r=PG", "display_name": "Ganesh Kamath - &#39;Code Frenzy&#39;", "link": "https://stackoverflow.com/users/2077651/ganesh-kamath-code-frenzy"}, "is_accepted": true, "score": 1, "last_activity_date": 1423069383, "last_edit_date": 1423069383, "creation_date": 1423068504, "answer_id": 28326867, "question_id": 28326829, "link": "https://stackoverflow.com/questions/28326829/c-program-problems-code-not-working/28326867#28326867", "title": "C program problems code not working", "body": "<p>change</p>\n\n<pre><code>scanf(\"%y\", &amp;year);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\"%d\", &amp;year);\n</code></pre>\n\n<p><code>%d</code> implies integer</p>\n\n<p>You are still getting error because you need to change in 2 more places</p>\n\n<pre><code>        if (f &gt; 11)\n        {\n            printf(\"Good Friday in %d is April %d\", year, f + 20);\n        }\n        else\n        {\n            printf(\"Good Friday in %d is March %d\", year, f + 20);\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 4524874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e4d78592fe590049a7ab0a4a870df3?s=128&d=identicon&r=PG&f=1", "display_name": "atrifan", "link": "https://stackoverflow.com/users/4524874/atrifan"}, "is_accepted": false, "score": 0, "last_activity_date": 1424475966, "last_edit_date": 1424475966, "creation_date": 1423069439, "answer_id": 28327206, "question_id": 28326829, "link": "https://stackoverflow.com/questions/28326829/c-program-problems-code-not-working/28327206#28327206", "title": "C program problems code not working", "body": "<p>You have issues on:</p>\n\n<ol>\n<li><p><code>scanf(\"%y\")</code> which should be <code>scanf(\"%d\")</code></p></li>\n<li><p><code>printf(\"%y\")</code> which should be <code>printf(\"%d\")</code> </p></li>\n<li><p>as already said - <code>&amp;</code> is <code>*</code>.</p></li>\n</ol>\n\n<p>That's a bommer.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 4529441, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kGPQA.gif?s=128&g=1", "display_name": "jparks54", "link": "https://stackoverflow.com/users/4529441/jparks54"}, "is_accepted": false, "score": -1, "last_activity_date": 1423070368, "creation_date": 1423070368, "answer_id": 28327494, "question_id": 28326829, "link": "https://stackoverflow.com/questions/28326829/c-program-problems-code-not-working/28327494#28327494", "title": "C program problems code not working", "body": "<p>as for keeping the window open </p>\n\n<pre><code>getchar();\ngetchar();\n</code></pre>\n\n<p>causes it to stay open</p>\n"}], "owner": {"reputation": 23, "user_id": 4529441, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kGPQA.gif?s=128&g=1", "display_name": "jparks54", "link": "https://stackoverflow.com/users/4529441/jparks54"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 28326867, "answer_count": 3, "score": 0, "last_activity_date": 1424475966, "creation_date": 1423068353, "last_edit_date": 1423070274, "question_id": 28326829, "link": "https://stackoverflow.com/questions/28326829/c-program-problems-code-not-working", "title": "C program problems code not working", "body": "<p>I am more versed with c# than i am c and i am having a problem with a program i am trying to write to calculate good Friday.</p>\n\n<p>Thanks for all the help its working now sorry most of it was stupid stuff i should have known. </p>\n\n<pre><code>int main(void)\n{\n    /*variables I will be using*/\n    int year;\n    int a;\n    int b;\n    int c;\n    int d;\n    int e;\n    int f;\n\n    /*what will the computer print first*/\n    printf(\"Welcome to the Good Friday Computing Program!\\n Please enter\\n a year between 1982 and 2048: \");\n    scanf(\"%d\", &amp;year);\n\n\n\n\n    /*determine if yeat is with in 1982 and 2048*/\n    if ( year &gt;=  1982)\n    {\n        if (year &gt;= 2048)\n        {\n            printf(\"Enter year from 1982 to 2048\");\n        }\n        else\n        {\n            /*computing good friday*/\n            a = year % 19;\n            b = year % 4;\n            c = year % 7;\n            d = (19 * a + 24) % 30;\n            e = (2 * b + 4 * c + 6 * d + 5) % 7;\n            f = d + e;\n\n            /* determine if march or april */\n            if (f &gt; 11) \n            {\n                printf(\"Good Friday in %d is April %d\", year, f - 11); \n            }\n            else\n            {\n                printf(\"Good Friday in %d is March %d\", year, f + 20);\n            }\n        }\n    }\n    else\n    {\n        printf(\"Enter year from 1982 to 2048\");\n    }\n\n    /*keeps window open*/\n    getchar();\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["android", "c", "multithreading", "sockets", "pthreads"], "comments": [{"owner": {"reputation": 8331, "user_id": 4350275, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-Mo6YiD_JPIc/AAAAAAAAAAI/AAAAAAAAHB4/TgdGmvza868/photo.jpg?sz=128", "display_name": "Prerak Sola", "link": "https://stackoverflow.com/users/4350275/prerak-sola"}, "edited": false, "score": 2, "creation_date": 1423068074, "post_id": 28326704, "comment_id": 45000957, "body": "Well, it would be better if you can provide some source code to work upon."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423394193, "post_id": 28326704, "comment_id": 45123278, "body": "Exactly which call fails? And how and where do you read and log the <code>EPERM</code>? This is not a guessing game!"}, {"owner": {"reputation": 528, "user_id": 564230, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/59631b79b3af41bc0aecda228ceeb214?s=128&d=identicon&r=PG", "display_name": "nmnir", "link": "https://stackoverflow.com/users/564230/nmnir"}, "edited": false, "score": 0, "creation_date": 1424250864, "post_id": 28326704, "comment_id": 45467738, "body": "Thanks and sorry for the lost reply. It fails on sendto and I read the EPREM by printf errno"}], "answers": [{"comments": [{"owner": {"reputation": 528, "user_id": 564230, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/59631b79b3af41bc0aecda228ceeb214?s=128&d=identicon&r=PG", "display_name": "nmnir", "link": "https://stackoverflow.com/users/564230/nmnir"}, "edited": false, "score": 0, "creation_date": 1423070773, "post_id": 28327454, "comment_id": 45002788, "body": "The pthread is not opening the socket... I&#39;ll edit again to make the question more clear, thanks."}], "tags": [], "owner": {"reputation": 162, "user_id": 4524874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e4d78592fe590049a7ab0a4a870df3?s=128&d=identicon&r=PG&f=1", "display_name": "atrifan", "link": "https://stackoverflow.com/users/4524874/atrifan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423070222, "creation_date": 1423070222, "answer_id": 28327454, "question_id": 28326704, "link": "https://stackoverflow.com/questions/28326704/why-is-my-c-socket-dying/28327454#28327454", "title": "Why is my c socket dying?", "body": "<p>Don't blame me if I am wrong but as I can recall:</p>\n\n<p>EPERM  means that no permission to set the scheduling policy and parameters\nspecified in attr.</p>\n\n<p>Also I don't know if pthreads need sudo(root rights) for opening and taking actions but it seems that you can't open another thread if one is already working (you don't have rights) and you should write your application to have rights to do that.</p>\n"}], "owner": {"reputation": 528, "user_id": 564230, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/59631b79b3af41bc0aecda228ceeb214?s=128&d=identicon&r=PG", "display_name": "nmnir", "link": "https://stackoverflow.com/users/564230/nmnir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1423071095, "creation_date": 1423067991, "last_edit_date": 1423071095, "question_id": 28326704, "link": "https://stackoverflow.com/questions/28326704/why-is-my-c-socket-dying", "title": "Why is my c socket dying?", "body": "<p>I have an Android app that uses pthreads and c sockets.\nOne thread is always receiving - waiting for data from the server in a while loop.\nWhen the user presses a button the app sends data to the server (JNI call) and the app \"knows\" what to do according to the answer.\nSo far so good.\nWhen I added another thread that will send some data every minute the sending upon user pressing the button fails with errno EPERM (not owner).\nI have done some testing and it happens only on some devices and after about 40 seconds the socket is \"released\" and when the user presses it sends the data.</p>\n\n<p>Any advice?</p>\n\n<p>Thanks,\nNir\nEdit:\nOne strange thing is that this bug comes up on some devices (Nexus 4, Galaxy 2 for example).\nAnother thing that is strange is that this sending from other process is working (user pressing a button is another process). Only this thread with timer is causing problems.</p>\n\n<p>Edit: Source code:\nSending:</p>\n\n<pre><code>int send_to_server (char * buff, int len)\n{\nmemset(&amp;server_sockaddr_in, 0, sizeof server_sockaddr_in);\nserver_sockaddr_in.sin_family = AF_INET;\nserver_sockaddr_in.sin_addr.s_addr = inet_addr(get_server_ip());\nserver_sockaddr_in.sin_port = htons( REMOTE_SIP_PORT );\nint ret = sendto(server_sock, buff, len, 0, (SOCKADDR*) &amp;server_sockaddr_in, sizeof(server_sockaddr_in));\nreturn ret;\n}\n</code></pre>\n\n<p>Thread function:</p>\n\n<pre><code>void * timer_thread_func(void * nothing)\n{   \n    while ((main_run!=NULL))\n    {\n        sleep(60);\n        //prepare the request\n        send_to_server (i_buf, strlen(i_buf));\n    }\nreturn NULL;\n};\n</code></pre>\n"}, {"tags": ["c", "client-server", "client", "server", "file-transfer"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1423068725, "post_id": 28326605, "comment_id": 45001411, "body": "fwrite(buf, 1, sizeof buf, fp); - why are you writing &#39;sizeof buf&#39; bytes when you already know that you have received &#39;len&#39; bytes?"}, {"owner": {"reputation": 39, "user_id": 4498191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/095732b7cf53726d5048c749fb87e00a?s=128&d=identicon&r=PG&f=1", "display_name": "Slim R", "link": "https://stackoverflow.com/users/4498191/slim-r"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423133097, "post_id": 28326605, "comment_id": 45028390, "body": "@MartinJames Is that wrong? I was following the parameters of using fwrite()."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423144644, "post_id": 28326605, "comment_id": 45035796, "body": "Yes, it&#39;s wrong - the buffer might not be full and so you will be writing more data than you have received."}, {"owner": {"reputation": 39, "user_id": 4498191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/095732b7cf53726d5048c749fb87e00a?s=128&d=identicon&r=PG&f=1", "display_name": "Slim R", "link": "https://stackoverflow.com/users/4498191/slim-r"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423146860, "post_id": 28326605, "comment_id": 45037403, "body": "@MartinJames Thank you, kind sir. Your suggestion worked successfully and made the random characters disappear!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423160727, "post_id": 28326605, "comment_id": 45046345, "body": "OK, great!   I&#39;ll promote it to an answer, then:)"}], "answers": [{"tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": true, "score": 1, "last_activity_date": 1423160832, "creation_date": 1423160832, "answer_id": 28351371, "question_id": 28326605, "link": "https://stackoverflow.com/questions/28326605/saving-data-sent-from-client-to-server-into-a-file-has-invalid-characters/28351371#28351371", "title": "Saving data sent from client to server into a file has invalid characters", "body": "<p>Dont write 'sizeof buf' bytes to the file - the buffer may not be completely full of data.  Use the 'len' value instead that was returned by the recv() call.</p>\n"}], "owner": {"reputation": 39, "user_id": 4498191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/095732b7cf53726d5048c749fb87e00a?s=128&d=identicon&r=PG&f=1", "display_name": "Slim R", "link": "https://stackoverflow.com/users/4498191/slim-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "accepted_answer_id": 28351371, "answer_count": 1, "score": 0, "last_activity_date": 1423160832, "creation_date": 1423067737, "question_id": 28326605, "link": "https://stackoverflow.com/questions/28326605/saving-data-sent-from-client-to-server-into-a-file-has-invalid-characters", "title": "Saving data sent from client to server into a file has invalid characters", "body": "<p>I am trying to send a file containing strings from a client to a server, and then have the server save the results received. So far, I have managed to send the data from the client to the server, but when the server saves the results in a text file, it contains invalid characters which are unreadable.  </p>\n\n<p>The contents of the file has around 10 lines of zeros like below (and is highlighted in red) with random characters in between:</p>\n\n<pre><code>POST /apikey=json&amp;command={\"Parameter\" : \"Value\"}\\00\\00\\00\\00\\00\\00\\00\\00\\00\u00f0|\\00\\00\\00\\00|'^O\\00\\00\u00ff\u00ff\u00ff\u00ff\n</code></pre>\n\n<p>I did a bit of research, and tried using binary mode: (fp = fopen( \"testfile.txt\" , \"wb\" ); but that didn't solve it.   </p>\n\n<p><strong>Server</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;signal.h&gt;\n\n#define PORT \"3490\"  // the port users will be connecting to\n\n#define BACKLOG 10     // how many pending connections queue will hold\n\nvoid sigchld_handler(int s)\n{\n    while(waitpid(-1, NULL, WNOHANG) &gt; 0);\n}\n\n// get sockaddr, IPv4 or IPv6:\nvoid *get_in_addr(struct sockaddr *sa)\n{\n    if (sa-&gt;sa_family == AF_INET) {\n        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);\n    }\n\n    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);\n}\n\nint main(void)\n{\n    int sockfd, new_fd;  // listen on sock_fd, new connection on new_fd\n    struct addrinfo hints, *servinfo, *p;\n    struct sockaddr_storage their_addr; // connector's address information\n    socklen_t sin_size;\n    struct sigaction sa;\n    int yes=1;\n    char s[INET6_ADDRSTRLEN];\n    int rv;\n\n    memset(&amp;hints, 0, sizeof hints);\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_flags = AI_PASSIVE; // use my IP\n\n    if ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;servinfo)) != 0) {\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n        return 1;\n    }\n\n    // loop through all the results and bind to the first we can\n    for(p = servinfo; p != NULL; p = p-&gt;ai_next) {\n        if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,\n                p-&gt;ai_protocol)) == -1) {\n            perror(\"server: socket\");\n            continue;\n        }\n\n        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;yes,\n                sizeof(int)) == -1) {\n            perror(\"setsockopt\");\n            exit(1);\n        }\n\n        if (bind(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {\n            close(sockfd);\n            perror(\"server: bind\");\n            continue;\n        }\n\n        break;\n    }\n\n    if (p == NULL)  {\n        fprintf(stderr, \"server: failed to bind\\n\");\n        return 2;\n    }\n\n    freeaddrinfo(servinfo); // all done with this structure\n\n    if (listen(sockfd, BACKLOG) == -1) {\n        perror(\"listen\");\n        exit(1);\n    }\n\n    sa.sa_handler = sigchld_handler; // reap all dead processes\n    sigemptyset(&amp;sa.sa_mask);\n    sa.sa_flags = SA_RESTART;\n    if (sigaction(SIGCHLD, &amp;sa, NULL) == -1) {\n        perror(\"sigaction\");\n        exit(1);\n    }\n\n    printf(\"server: waiting for connections...\\n\");\n\n    while(1) {  // main accept() loop\n        sin_size = sizeof their_addr;\n        new_fd = accept(sockfd, (struct sockaddr *)&amp;their_addr, &amp;sin_size);\n        if (new_fd == -1) {\n            perror(\"accept\");\n            continue;\n        }\n\n        inet_ntop(their_addr.ss_family,\n            get_in_addr((struct sockaddr *)&amp;their_addr),\n            s, sizeof s);\n        printf(\"server: got connection from %s\\n\", s);\n\n{\n        char buf[1000];\n        ssize_t len;\n\n        len = recv(new_fd, buf, sizeof(buf) - 1, 0);\n        if (len &gt; 0) {\n                buf[len] = '\\0';\n                printf(\"buffer: %s len: %d\\n\\n\", buf, (int)len);\n\n                        /* save to file */              \n                    FILE *fp;\n                    fp = fopen( \"testfile.txt\" , \"wb\" ); //b for binary\n                    fwrite(buf, 1, sizeof buf, fp);\n                    fclose(fp);\n\n            }\n    }\n\n\n\n        if (!fork()) { // this is the child process\n            close(sockfd); // child doesn't need the listener\n            if (send(new_fd, \"I received your message\\n\", 23, 0) == -1)\n                perror(\"send\");\n            close(new_fd);\n            exit(0);\n        }\n        close(new_fd);  // parent doesn't need this\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Client</strong>  </p>\n\n<pre><code>#include &lt;stdio.h&gt; /* printf, sprintf */\n#include &lt;stdlib.h&gt; /* read, write, close */\n#include &lt;string.h&gt; /* memcpy, memset */\n#include &lt;sys/socket.h&gt; /* socket, connect */\n#include &lt;netinet/in.h&gt; /* struct sockaddr_in, struct sockaddr */\n#include &lt;netdb.h&gt; /* struct hostent, gethostbyname */\n#include &lt;unistd.h&gt;\n\nvoid error(const char *msg) { perror(msg); exit(0); }\n\nint main(int argc,char *argv[])\n{\n    /* first what are we going to send and where are we going to send it? */\n    int portno =        3490; /* 3490 or 8080 */\n    char *host =        \"192.168.1.65\"; /* localhost: 127.0.0.1 or 192.168.1.65 */\n    char *message_fmt = \"POST /apikey=%s&amp;command=%s HTTP/1.0\\n\\n\";\n\n    struct hostent *server;\n    struct sockaddr_in serv_addr;\n    int sockfd, bytes, sent, received, total;\n    char message[1024],response[4096];\n\n    //if (argc &lt; 3) { puts(\"Parameters: &lt;apikey&gt; &lt;command&gt;\"); exit(0); }\n\n    /* fill in the parameters */\n    sprintf(message,message_fmt,argv[1],argv[2]);\n    printf(\"Request:\\n%s\\n\",message);\n\n    /* create the socket */\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockfd &lt; 0) error(\"ERROR opening socket\");\n\n    /* lookup the ip address */\n    server = gethostbyname(host);\n    printf(\"ip address: %s\\n\\n\", host);\n    if (server == NULL) error(\"ERROR, no such host\");\n\n    /* fill in the structure */\n    memset(&amp;serv_addr,0,sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_port = htons(portno);\n    memcpy(&amp;serv_addr.sin_addr.s_addr,server-&gt;h_addr,server-&gt;h_length);\n\n    /* connect the socket */\n    if (connect(sockfd,(struct sockaddr *)&amp;serv_addr,sizeof(serv_addr)) &lt; 0)\n        error(\"ERROR connecting\");\n\n    /* send the request */\n\n/********************************* reading input data and converting into JSOn format ***********************/\n   FILE *file = stdin;\n    char a[50], b[50];\n        while(1 == fscanf(file,\" %[^,]\",a) ) /* Read data until a comma is detected, */\n            {\n\n               fgetc( file ); // Ignore , character\n\n               fscanf(file,\" %[^,]\",b); /* Read data until a comma is detected, */\n               fgetc( file ); // Ignore , character\n\n        printf(\"{\\\"%s\\\" : \\\"%s\\\"}\\n\",a,b); /* Display results into {\"A\":\"B\"} format */\n    }\n\n\n   ///sprintf(message,message_fmt,a[0],b[0]);\n\n\n    //total = strlen(message);\n//printf(\"sending message %d\\n\",total);\nsprintf(a, message_fmt,\"json\",\"{\\\"Parameter\\\" : \\\"Value\\\"}\\n\");\n//total = strlen(a); // this takes the value of 'a' eg: 1, 2, 3, 4, - 'a' will be 1,3 while b=2,4\ntotal = strlen(message);\n    sent = 0;\n    do {\n        bytes = write(sockfd,a+sent,total-sent);\n        if (bytes &lt; 0)\n            error(\"ERROR writing message to socket\");\n        if (bytes == 0)\n            break;\n        sent+=bytes;\n    } while (sent &lt; total); //while (sent &lt; 0);\n    printf(\"Post request sent \\n\");\n\n    //receive the response\n    printf(\"Receiving response \\n\");\n    memset(response,0,sizeof(response));\n    total = sizeof(response)-1;\n    received = 0;\n    do {\n        bytes = read(sockfd,response-received,total-received);\n        if (bytes &lt; 0)\n            error(\"ERROR reading response from socket\");\n        if (bytes == 0)\n            break;\n        received+=bytes;\n    } while(received &lt; total); //while (received &lt; 0);\n    printf(\"Response received\\n\");\n\n    if (received == total)\n        error(\"ERROR storing complete response from socket\");\n\n    /* close the socket */\n    close(sockfd);\n\n    /* process response */\n    printf(\"\\nServer Response:\\n%s\\n\\n\",response);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Summary</strong><br>\n1- Send a string (eg. Hello World) from client to server<br>\n2- Server reads the string, saves it into a text file<br>\n3- But text file has invalid characters and zeroes instead</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 6, "creation_date": 1423067235, "post_id": 28326371, "comment_id": 45000313, "body": "Learn to use a debugger. It will make your life as a programmer vastly easier."}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 2, "creation_date": 1423067236, "post_id": 28326371, "comment_id": 45000315, "body": "<a href=\"http://stackoverflow.com/q/28311310/3933332\">stackoverflow.com/q/28311310/3933332</a> And the difference to this is?"}, {"owner": {"reputation": 202712, "user_id": 1197518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cjKiP.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/1197518/steve"}, "edited": false, "score": 2, "creation_date": 1423067340, "post_id": 28326371, "comment_id": 45000403, "body": "Did you notice the difference between the two loops? In the first one you use always i for every loop, in the second one you use a different variable for each loop."}, {"owner": {"reputation": 11, "user_id": 4521811, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4521811/john"}, "reply_to_user": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 0, "creation_date": 1423067680, "post_id": 28326371, "comment_id": 45000653, "body": "@Rizier123 different question."}, {"owner": {"reputation": 11, "user_id": 4521811, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4521811/john"}, "reply_to_user": {"reputation": 202712, "user_id": 1197518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cjKiP.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/1197518/steve"}, "edited": false, "score": 0, "creation_date": 1423067870, "post_id": 28326371, "comment_id": 45000797, "body": "@Steve I know that, but why don&#39;t both loops run?"}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 4524874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e4d78592fe590049a7ab0a4a870df3?s=128&d=identicon&r=PG&f=1", "display_name": "atrifan", "link": "https://stackoverflow.com/users/4524874/atrifan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423071582, "last_edit_date": 1423071582, "creation_date": 1423070929, "answer_id": 28327649, "question_id": 28326371, "link": "https://stackoverflow.com/questions/28326371/why-doesnt-my-loop-run/28327649#28327649", "title": "Why doesn&#39;t my loop run", "body": "<p>In the first looping section only the last loop will work if maxback is higher than max. In another case if maxback is lower by 1 from max than again it will end because after the last iteration you have reached the end of the above loop. In any other cases the last two loops will run indefinetly. </p>\n\n<p>In short my answer is: because the first loop does not finish, the second loop will not run.</p>\n"}], "owner": {"reputation": 11, "user_id": 4521811, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b30234412f880b488398a7cafef08aa?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4521811/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1423073025, "creation_date": 1423067169, "last_edit_date": 1423073025, "question_id": 28326371, "link": "https://stackoverflow.com/questions/28326371/why-doesnt-my-loop-run", "title": "Why doesn&#39;t my loop run", "body": "<p>I'm test running values by looping letters and numbers. However, only the number loop is run by some reason.</p>\n\n<pre><code>    #include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;ctype.h&gt;\n\nint inuti(double x, double y, double x1, double y1, double x2, double y2) {\n    int x_inuti;\n    int y_inuti;\n\n    if (x1 &lt; x2)\n        x_inuti = x &gt; x1 &amp;&amp; x &lt; x2;\n    else\n        x_inuti = x &gt; x2 &amp;&amp; x &lt; x1;\n    if (y1 &lt; y2)\n        y_inuti = y &gt; y1 &amp;&amp; y &lt; y2;\n    else\n        y_inuti = y &gt; y2 &amp;&amp; y &lt; y1;\n    return x_inuti &amp;&amp; y_inuti;\n}\n\nint main(void) {\n    double x, y, x1, y1, x2, y2;\n    char text_x, text_y, text_x1, text_y1, text_x2, text_y2;\n    int resultat;\n    int i;\n\n\n\n    char tecken[] = \"abcdefgABCDEFG.+-\";\n    char teckenback[] = \"-+.GFEDXBAgfedcba\";\n    int max;\n    int maxback;\n    max = strlen(tecken);\n    maxback = strlen(teckenback);\n\n    //These loops do only run if the number loops are commented.\n\n    for (i = 0; i &lt; max; i++) {\n        for (i = 0; i &lt; maxback; i++) {\n            for (i = 0; i &lt; max; i++) {\n                for (i = 0; i &lt; maxback; i++) {\n                    for (i = 0; i &lt; max; i++) {\n                        for (i = 0; i &lt; maxback; i++) {\n\n\n\n\n                            text_x = tecken[i];\n                            text_y = teckenback[i];\n                            text_x1 = tecken[i];\n                            text_y1 = teckenback[i];\n                            text_x2 = tecken[i];\n                            text_y2 = teckenback[i];\n\n\n                            printf(\"punktens x-varde: %c \\n\", text_x);\n\n\n                            printf(\"punktens y-varde: %c \\n\", text_y);\n\n                            printf(\"\\n\");\n\n                            printf(\"Ena hornets x-varde: %c \\n\", text_x1);\n\n\n                            printf(\"Ena hornets y-varde: %c \\n\", text_y1);\n\n                            printf(\"\\n\");\n\n                            printf(\"Andra hornets x-varde %c \\n\", text_x2);\n\n\n                            printf(\"Andra hornets y-varde %c \\n\", text_y2);\n\n                            printf(\"\\n\");\n\n                            printf(\"##### Endast nummer tillatet! #####\");\n                            printf(\"\\n\");\n                            printf(\"\\n\");\n\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n\n\n\n    for (x = 0; x &lt;= 3; x++) {\n            for (y = 0; y &lt;= 3; y++) {\n                for (x1 = 0; x1 &lt;= 3; x1++) {\n                    for (y1 = 0; y1 &lt;= 3; y1++) {\n                        for (x2 = 0; x2 &lt;= 3; x2++) {\n                            for (y2 = 0; y2 &lt;= 3; y2++){\n\n                                printf(\"punktens x-varde: %.1f \\n\", x);\n\n\n                                printf(\"punktens y-varde: %.1f \\n\", y);\n\n                                printf(\"\\n\");\n\n                                printf(\"Ena hornets x-varde: %.1f \\n\", x1);\n\n\n                                printf(\"Ena hornets y-varde: %.1f \\n\", y1);\n\n                                printf(\"\\n\");\n\n                                printf(\"Andra hornets x-varde %.1f \\n\", x2);\n\n\n                                printf(\"Andra hornets y-varde %.1f \\n\", y2);\n\n                                printf(\"\\n\");\n\n                                resultat = inuti(x, y, x1, y1, x2, y2);\n\n\n                                if (resultat == 1)\n                                    printf(\"Punkten var inuti rektangeln.\\n\");\n                                else\n                                    printf(\"Punkten var utanfor rektangeln.\\n\");\n\n                                printf(\"\\n\");\n                                printf(\"\\n\");\n\n\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        getchar();\n    return 0;\n}\n</code></pre>\n\n<p>If I comment away the number loops, the letter loop runs normally but when I'm running the whole code, only the number loop is run. No error is given. Does anyone know why this occurs?\nThank you </p>\n"}, {"tags": ["c#", "c++", "c"], "comments": [{"owner": {"reputation": 79886, "user_id": 113141, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe0ff83b10821b15e0f7fd6385be24ef?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/113141/justin"}, "edited": false, "score": 1, "creation_date": 1423067320, "post_id": 28326342, "comment_id": 45000386, "body": "This isn&#39;t really the place to ask philosophical questions about the history of specific programming language features."}, {"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "edited": false, "score": 1, "creation_date": 1423067381, "post_id": 28326342, "comment_id": 45000439, "body": "I&#39;m voting to close this question as off-topic because this a question easily answerd by looking at a wikipedia entry on the subject."}, {"owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "edited": false, "score": 2, "creation_date": 1423067521, "post_id": 28326342, "comment_id": 45000533, "body": "As usually I asked google about my questions. Today discovered wikipedia"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1423067687, "post_id": 28326342, "comment_id": 45000658, "body": "In hindsight, I rather like this question. I&#39;ve edited it; hopefully to improve a little. (And so I can convert my downvote to an upvote ;-) )"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1423067832, "post_id": 28326342, "comment_id": 45000765, "body": "@Bathsheba although, the question shows no research effort (reason to downvote) and I don&#39;t understand how it would be useful (reason for downvote)."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1423067875, "post_id": 28326342, "comment_id": 45000801, "body": "I found the answers it generated informative. And it might come in handy in a pub quiz one day."}, {"owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "edited": false, "score": 1, "creation_date": 1423068921, "post_id": 28326342, "comment_id": 45001563, "body": "Just found reason for ++ operator: ++ is easier to write, then variable = variable + 1;"}], "answers": [{"comments": [{"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 1, "creation_date": 1423067662, "post_id": 28326403, "comment_id": 45000639, "body": "@Bathsheba - note that question is tagged with C#/C++ (along with C) and there is no way <code>++</code> is atomic there due to ability to have custom operators..."}, {"owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "edited": false, "score": 0, "creation_date": 1423069706, "post_id": 28326403, "comment_id": 45002074, "body": "In assembler for x86 processors there is function INC, so ++ can be implemented as atomic"}], "tags": [], "owner": {"reputation": 76689, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "is_accepted": true, "score": 7, "last_activity_date": 1423067772, "last_edit_date": 1423067772, "creation_date": 1423067253, "answer_id": 28326403, "question_id": 28326342, "link": "https://stackoverflow.com/questions/28326342/origin-of-postfix-and-prefix/28326403#28326403", "title": "Origin of ++ postfix and prefix", "body": "<p>Citing from the <a href=\"http://en.wikipedia.org/wiki/B_%28programming_language%29\" rel=\"nofollow\">Wikipedia article on the B programming language</a>:</p>\n\n<blockquote>\n  <p><em>\"B also introduced the increment and decrement operators (<code>++</code> and <code>--</code>); Their prefix or postfix position determines whether the value is taken prior or post alteration of the operand.\"</em></p>\n</blockquote>\n\n<p>I see no point in duplicating the whole Wikipedia article. Just go there for more details.</p>\n\n<p>By the way, while the B language might have <em>introduced</em> these specific forms for the increment and decrement operations, it's unlikely that B also <em>invented</em> the operations themselves. I suspect that even early CPUs had dedicated increment and decrement operations (next to the more general add and subtract operations).</p>\n"}, {"tags": [], "owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "is_accepted": false, "score": 8, "last_activity_date": 1423067406, "last_edit_date": 1592644375, "creation_date": 1423067406, "answer_id": 28326463, "question_id": 28326342, "link": "https://stackoverflow.com/questions/28326342/origin-of-postfix-and-prefix/28326463#28326463", "title": "Origin of ++ postfix and prefix", "body": "<p>From Dennis M. Ritchie, <a href=\"http://cm.bell-labs.com/who/dmr/chist.html\" rel=\"noreferrer\">The Development of the C Language</a>,  HOPL II, 1993:</p>\n<blockquote>\n<p>For example, B introduced generalized assignment operators, using x=+y to add y to x. The notation came from Algol 68 [Wijngaarden 75] via McIlroy, who had incorporated it into his version of TMG. (In B and early C, the operator was spelled =+ instead of += ; this mistake, repaired in 1976, was induced by a seductively easy way of handling the first form in B's lexical analyzer.)</p>\n<p>Thompson went a step further by inventing the ++ and -- operators, which increment or decrement; their prefix or postfix position determines whether the alteration occurs before or after noting the value of the operand.</p>\n</blockquote>\n"}], "owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "closed_date": 1423067381, "accepted_answer_id": 28326403, "answer_count": 2, "score": 0, "last_activity_date": 1423067772, "creation_date": 1423067086, "last_edit_date": 1423067663, "question_id": 28326342, "link": "https://stackoverflow.com/questions/28326342/origin-of-postfix-and-prefix", "closed_reason": "Needs more focus", "title": "Origin of ++ postfix and prefix", "body": "<p>Who knows about origin and reasons of ++ postfix and sufix form. I know that they are available even in C. But who invented them; perhaps even in other languages?</p>\n"}, {"tags": ["c", "recursion", "binary-search"], "comments": [{"owner": {"reputation": 403, "user_id": 2117993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XHKcI.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2117993/mike"}, "edited": false, "score": 0, "creation_date": 1423067222, "post_id": 28326330, "comment_id": 45000299, "body": "Try changing the base case to <code>if(s&lt;=1) return 0;</code>"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1423067227, "post_id": 28326330, "comment_id": 45000306, "body": "<code>void main()</code> is undefined behaviour. if <code>s</code> is equal to <code>1</code> you are using <code>middle</code> uninitialized."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1423067288, "post_id": 28326330, "comment_id": 45000358, "body": "There is <code>bsearch()</code> function in <code>stdlib.h</code>"}], "answers": [{"tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1423067310, "creation_date": 1423067310, "answer_id": 28326426, "question_id": 28326330, "link": "https://stackoverflow.com/questions/28326330/binary-search-in-c-using-recursion/28326426#28326426", "title": "Binary Search in C using recursion", "body": "<p>The code <code>if(key&lt;a[middle])binarySearch(a,middle,key);</code> does not return anything. </p>\n\n<p>Try <code>if(key&lt;a[middle]) return binarySearch(a,middle,key);</code></p>\n\n<p>This may still not work as you intend it to, but at least you will get past the major, immediately visible, cause of runaway recursion.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 3319335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0df58b8f62b10b18afd62ff02e01a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/3319335/milan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423067609, "creation_date": 1423067609, "answer_id": 28326553, "question_id": 28326330, "link": "https://stackoverflow.com/questions/28326330/binary-search-in-c-using-recursion/28326553#28326553", "title": "Binary Search in C using recursion", "body": "<p>Because there is no case if the s == 1. \"Middle\" is not initialized and a[middle] is potential crash, or it will just go infinite.</p>\n"}, {"tags": [], "owner": {"reputation": 4425, "user_id": 2077651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/16036f8a383cc2cf4cde596b7f9f3a42?s=128&d=identicon&r=PG", "display_name": "Ganesh Kamath - &#39;Code Frenzy&#39;", "link": "https://stackoverflow.com/users/2077651/ganesh-kamath-code-frenzy"}, "is_accepted": true, "score": 1, "last_activity_date": 1423067753, "creation_date": 1423067753, "answer_id": 28326613, "question_id": 28326330, "link": "https://stackoverflow.com/questions/28326330/binary-search-in-c-using-recursion/28326613#28326613", "title": "Binary Search in C using recursion", "body": "<p>Change </p>\n\n<pre><code>if(s!=1)\n    middle=s/2;\nif(a[middle]==key)\n    return 1;\nelse if(key&lt;a[middle])binarySearch(a,middle,key);\nelse if(key&gt;a[middle])binarySearch(&amp;a[middle],middle,key);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (s != 1){\n    middle = s / 2;\n    if (a[middle] == key)\n        return 1;\n    else if (key&lt;a[middle])binarySearch(a, middle, key);\n    else if (key&gt;a[middle])binarySearch(&amp;a[middle], middle, key);\n}\n</code></pre>\n\n<p>The variable <code>middle</code> is initialized only if <code>s!=1</code>.</p>\n\n<p>I have run this code and got the value <code>Not Found</code> for input <code>5</code>.</p>\n\n<p>If you are running your code in release mode, try building it in debug mode and run step by step you will see what happens when middle is used directly without assigning it a specific value. This is harmful.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1423067823, "creation_date": 1423067823, "answer_id": 28326630, "question_id": 28326330, "link": "https://stackoverflow.com/questions/28326330/binary-search-in-c-using-recursion/28326630#28326630", "title": "Binary Search in C using recursion", "body": "<p>A few notes:</p>\n\n<p>Every branch of a recursive function should return something. You'll need to modify your recursive calls to return the call</p>\n\n<p>Change</p>\n\n<pre><code>binarySearch(a, middle, key) \n</code></pre>\n\n<p>to </p>\n\n<pre><code>return binarySearch(a, middle, key)\n</code></pre>\n\n<p>Also, make sure middle is computed properly. You don't properly initialize it in the situation where s == 1. You'll want this to start at 0 most likely. </p>\n"}], "owner": {"reputation": 15, "user_id": 4529402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVQtC3-Tyh8/AAAAAAAAAAI/AAAAAAAAATk/i1TTXjgI4oA/photo.jpg?sz=128", "display_name": "Raqeeb Thassim", "link": "https://stackoverflow.com/users/4529402/raqeeb-thassim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 28326613, "answer_count": 4, "score": 0, "last_activity_date": 1423721313, "creation_date": 1423067058, "last_edit_date": 1423072504, "question_id": 28326330, "link": "https://stackoverflow.com/questions/28326330/binary-search-in-c-using-recursion", "title": "Binary Search in C using recursion", "body": "<p>The program crashes in finding a number which is not available in the array.The code works perfectly when i search for elements which are available in the array.Help much appreciated.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint binarySearch(int a[],int s,int key)\n{\n    int middle;\n\n    if(s!=1)\n        middle=s/2;\n\n    if(a[middle]==key)\n        return 1;\n\n    else if(key&lt;a[middle])\n        binarySearch(a,middle,key);\n\n    else if(key&gt;a[middle])\n        binarySearch(&amp;a[middle],middle,key);\n\n    else\n        return 0;\n}\n\nvoid main()\n{\n    int i;\n    int a[]={1,2,3,4,6,9,10,11};\n\n    for (i =0;i&lt;8;i++)\n        printf(\"%i \",a[i]);\n\n    if(binarySearch(a,8,5))\n        printf(\"\\nFound\");\n    else\n        printf(\"\\nNot Found\");\n}\n</code></pre>\n"}, {"tags": ["javascript", "c", "ssl", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 1617, "user_id": 2277408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cfjxc.jpg?s=128&g=1", "display_name": "Vladimir Kunschikov", "link": "https://stackoverflow.com/users/2277408/vladimir-kunschikov"}, "edited": false, "score": 0, "creation_date": 1423068978, "post_id": 28326525, "comment_id": 45001606, "body": "Agree, the server part is written on wrong assumption that whole HTTP request line will be read at once. It&#39;s not true even for simple non-ssl sockets.  He should repeat SSL_read and parse header."}, {"owner": {"reputation": 13, "user_id": 2001950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e661db0e519ae7c549e1268ac0dd0b70?s=128&d=identicon&r=PG", "display_name": "Owen Rodger Dyckhoff", "link": "https://stackoverflow.com/users/2001950/owen-rodger-dyckhoff"}, "edited": false, "score": 0, "creation_date": 1423069317, "post_id": 28326525, "comment_id": 45001834, "body": "I would read the content-length header if I got more than one byte. Assuming that my buffer is indeed too small, that doesn&#39;t explain why a read of 1024 gets only the first letter of the GET request."}, {"owner": {"reputation": 162, "user_id": 4524874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e4d78592fe590049a7ab0a4a870df3?s=128&d=identicon&r=PG&f=1", "display_name": "atrifan", "link": "https://stackoverflow.com/users/4524874/atrifan"}, "edited": false, "score": 0, "creation_date": 1423069569, "post_id": 28326525, "comment_id": 45001976, "body": "because you are doing this here = SSL_free( ssl );                                    /* release SSL state      */     close( sd );   It&#39;s not sent everything at once, it has a keep-alive and it sends data in chunks you should wait for all data, not just read and if the number of bytes received is larger than 0 close."}, {"owner": {"reputation": 13, "user_id": 2001950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e661db0e519ae7c549e1268ac0dd0b70?s=128&d=identicon&r=PG", "display_name": "Owen Rodger Dyckhoff", "link": "https://stackoverflow.com/users/2001950/owen-rodger-dyckhoff"}, "edited": false, "score": 0, "creation_date": 1423069813, "post_id": 28326525, "comment_id": 45002138, "body": "As for doing a second <code>SSL_read</code>, I tried that, and it read nothing. <code>SSL_pending</code>  also reported that there were no bytes to read after the initial read of only &#39;G&#39;."}, {"owner": {"reputation": 162, "user_id": 4524874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e4d78592fe590049a7ab0a4a870df3?s=128&d=identicon&r=PG&f=1", "display_name": "atrifan", "link": "https://stackoverflow.com/users/4524874/atrifan"}, "edited": false, "score": 0, "creation_date": 1423070380, "post_id": 28326525, "comment_id": 45002523, "body": "Please put the code where you read that in a while(true) and write the output when bytes &gt; 0 just output the message of the request. Tell me what it says, basically it should work, your sollution didn&#39;t work because SSL_Read() after another SSL_Read() does that instantly and on the request stream is not written instantly. Also some logs from the network tab or console tab in browser would help. Another question of mine would be: Why do you do this line of code  buf[ bytes ] = 0;?"}], "tags": [], "owner": {"reputation": 162, "user_id": 4524874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e4d78592fe590049a7ab0a4a870df3?s=128&d=identicon&r=PG&f=1", "display_name": "atrifan", "link": "https://stackoverflow.com/users/4524874/atrifan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423067548, "creation_date": 1423067548, "answer_id": 28326525, "question_id": 28326122, "link": "https://stackoverflow.com/questions/28326122/c-ssl-jquery-ajax-client-server-connection-reset-but-1-byte-sent/28326525#28326525", "title": "C/SSL/JQuery.ajax() client -&gt; server connection reset, but 1 byte sent", "body": "<p>The buffer in C is to small, you should read until you get the end of the stream - this is ussualy specified in \"Content-Length\" header in the request. I advice you to read the HTTP Protocol Standard, afterwards I am sure that you will easily find the solution to your problem and the connect disconnect issue will also be solved.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 2001950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e661db0e519ae7c549e1268ac0dd0b70?s=128&d=identicon&r=PG", "display_name": "Owen Rodger Dyckhoff", "link": "https://stackoverflow.com/users/2001950/owen-rodger-dyckhoff"}, "is_accepted": true, "score": 0, "last_activity_date": 1423494761, "creation_date": 1423494761, "answer_id": 28412949, "question_id": 28326122, "link": "https://stackoverflow.com/questions/28326122/c-ssl-jquery-ajax-client-server-connection-reset-but-1-byte-sent/28412949#28412949", "title": "C/SSL/JQuery.ajax() client -&gt; server connection reset, but 1 byte sent", "body": "<p>I managed to fix my problem. When specifying the <code>SSL_method</code> to be used, I had <code>SSLv3_server_method()</code> instead of <code>SSLv23_server_method()</code>. After changing this, there were no problems with reading to the buffer.</p>\n"}], "owner": {"reputation": 13, "user_id": 2001950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e661db0e519ae7c549e1268ac0dd0b70?s=128&d=identicon&r=PG", "display_name": "Owen Rodger Dyckhoff", "link": "https://stackoverflow.com/users/2001950/owen-rodger-dyckhoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 28412949, "answer_count": 2, "score": 0, "last_activity_date": 1423494761, "creation_date": 1423066486, "question_id": 28326122, "link": "https://stackoverflow.com/questions/28326122/c-ssl-jquery-ajax-client-server-connection-reset-but-1-byte-sent", "title": "C/SSL/JQuery.ajax() client -&gt; server connection reset, but 1 byte sent", "body": "<h1>Version Info</h1>\n\n<ul>\n<li><p>Libs:</p>\n\n<ul>\n<li>libgnutls-openssl.so.27 (libc6,x86-64)</li>\n<li>libcrypto.so.1.0.0 (libc6,x86-64)</li>\n</ul></li>\n<li><p>GCC version: gcc (Ubuntu/Linaro 4.8.1-10ubuntu9) 4.8.1</p></li>\n<li>OS (<code>uname -voir</code>): 3.11.0-12-generic #19-Ubuntu SMP Wed Oct 9 16:20:46 UTC 2013 x86_64 GNU/Linux</li>\n<li>Browser: Google Chrome Version 39.0.2171.71 (64-bit)</li>\n</ul>\n\n<h1>Scenario</h1>\n\n<p>When opening a socket via PHP, I can connect and send data to my instance of a C SSL server and receive a response, all with no issues. However, when I attempt to connect using JQuery AJAX from a client, the connection is established, immediately closed, reopened, and finally the server receives a single byte 'G', presumably the first letter of the GET request.</p>\n\n<p>This results in:</p>\n\n<blockquote>\n  <p>GET https://localhost:2343/?keyReq=961ee53a75eef2e2 net::ERR_CONNECTION_RESET</p>\n</blockquote>\n\n<p>being displayed in Chrome's console.</p>\n\n<h1>Thoughts</h1>\n\n<p>I don't want to be too quick to blame the client side, but I can connect using sockets just fine. Problem is, my server needs to deal with both socket and HTTPS requests.</p>\n\n<p>It's also possible that I wrote the SSL accept and reads wrong somehow, in such a way that a web client can't cope.</p>\n\n<p>I would be very grateful for any advice anyone could lend me to get me going in the right direction. </p>\n\n<h1>Code</h1>\n\n<h2>ssl_server.c (The connection bits.)</h2>\n\n<pre><code>void datactl( SSL *ssl ) { \n/* Serve the connection - threadable */\n\n    char buf[1024];\n    char reply[1024];\n    int sd, bytes, rtn;\n\n    if( SSL_accept( ssl ) == FAIL ) {                   /* do SSL-protocol accept */\n        ERR_print_errors_fp( stderr );\n    }   \n    else {\n        crtprint( ssl );                                /* get any certificates   */\n        bytes = SSL_read( ssl, buf, sizeof( buf ) );    /* get request            */\n        if( bytes &gt; 0 ) { \n            buf[ bytes ] = 0;\n            char tmp[1024];\n            printf(\"data: '%s' (%d bytes)\", buf, bytes );\n            procdata( buf );                            /* process data           */\n            getres( buf, reply );                       /* construct reply        */\n            SSL_write( ssl, reply,\n                            strlen( reply );            /* send reply             */\n        }\n        else\n            ERR_print_errors_fp( stderr );\n    }   \n    sd = SSL_get_fd( ssl );                             /* get socket connection  */\n    SSL_free( ssl );                                    /* release SSL state      */\n    close( sd );                                        /* close connection       */\n}\n\n/* main - create SSL socket server. */\nint main( int argc, char *argv[] ) { \n\n    SSL_CTX *ctx;\n    int server;\n    int len;\n    int addrlen;\n    char cwd[1024];\n    char crt[1024];\n    char key[1024];\n\n    getcwd( cwd, sizeof( cwd ) );\n\n    strcpy( crt, cwd );\n    strcpy( key, cwd );\n    strcat( crt, \"/servers/certs/server.crt\" );\n    strcat( key, \"/servers/certs/server.key\" );\n\n    ctx = initsrvctx(); /* initialize SSL. */\n    getcrts( ctx, crt, key ); /* load certs.           */\n    server = startsck( PORTNUM ); /* create server socket. */\n/* (PORTNUM is defined at compile time by using -DPORTNUM=#### */\n\n    while( 1 ) { \n        struct sockaddr_in serv;\n        int len = sizeof( serv );\n        SSL *ssl;\n\n        int client = accept(\n            server,\n            ( struct sockaddr * ) &amp;serv,\n            &amp;len\n        ); /* accept connection as usual. */\n\n        ssl = SSL_new( ctx ); /* get new SSL state with context */\n        SSL_set_fd( ssl, client ); /* set connection socket to SSL state */\n        datactl( ssl ); /* service connection */\n    }   \n    close( server ); /* close server socket */\n    SSL_CTX_free( ctx ); /* release context */\n}\n</code></pre>\n\n<h2>test.php</h2>\n\n<pre><code>&lt;?php require('./inc/head.php'); ?&gt;\n&lt;script type=\"text/javascript\"&gt;\nfunction keyRequest() {\n    $.ajax({\n        type: 'GET',\n        url: 'https://localhost:2343',\n        data: { hello: \"hello\", world: \"world\" }\n    });\n}\n\nkeyRequest();\n&lt;/script&gt;\n</code></pre>\n\n<h1>Output (The errors here are self defined.)</h1>\n\n<pre><code>2015-02-04 15:58:14 [OPEN]  | Connection opened with client. (127.0.0.1)\n2015-02-04 15:58:14 [CLOSE] | Connection with client closed.\n2015-02-04 15:58:14 [OPEN]  | Connection opened with client. (127.0.0.1)\n2015-02-04 15:58:14 [DEBUG] | data: 'G' (1 bytes)\n2015-02-04 15:58:14 [DEBUG] | Starting data processing.\n2015-02-04 15:58:14 [ERR]   | Malformed or invalid data. Code: 0x10a.\n2015-02-04 15:58:14 [ERR]   | Malformed or invalid data. Code: 0x10a.\n2015-02-04 15:58:14 [CLOSE] | Connection with client closed.\n</code></pre>\n"}, {"tags": ["c", "linux", "performance"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1423066187, "post_id": 28325905, "comment_id": 44999548, "body": "I have to say - this looks a little like an XY problem. What are you trying to accomplish by getting some code to run at exactly the same speed? But I think your timing differential will be that instructions per cycle number."}, {"owner": {"reputation": 6135, "user_id": 894885, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/96b3d11d987edfac71b38328edf04b44?s=128&d=identicon&r=PG", "display_name": "Samuel Edwin Ward", "link": "https://stackoverflow.com/users/894885/samuel-edwin-ward"}, "edited": false, "score": 1, "creation_date": 1423066304, "post_id": 28325905, "comment_id": 44999625, "body": "How much memory is your function using?  Does it depend on anything else?  Have you tried <code>mlock</code>ing it?"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1423066919, "post_id": 28325905, "comment_id": 45000085, "body": "To answer the question of Sobrique. The function (which performs A* search) has a parameter and I need to establish the value of that parameter that makes the function run the fastest. Since the function  takes a while to solve interesting problems, I need to use a smart method (such as gradient descent) to find the best value of the parameter by as few runs as possible. I need reliable time measurement to enable such a method (e.g. to compute discrete derivatives)."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1423067203, "post_id": 28325905, "comment_id": 45000279, "body": "The function uses about 130 MB, of which only 10 MB are generated in the function. I allocate a 16 MB chunk before the first function execution and re-use that same chunk for all 500 executions. As for <code>mlock</code> ing, please note that the longer execution actually had fewer page faults."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1423078803, "post_id": 28325905, "comment_id": 45007196, "body": "After more thought: how can there be page faults in my program? It uses only 130 MB memory on a system with 32 GB installed, so why would a page ever be swapped out of the physical memory? In any case, I tried doing <code>mlockall(MCL_FUTURE)</code> at the beginning of the program. The number of page faults went down to 240 (how come these remained?). Most strangely, the Instructions per Cycle went down to 0.96 and only rarely goes up to 0.99. So, how come locking memory slowed the program down? The time measurements did become more consistent, so I am optimistic."}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1423067528, "creation_date": 1423065827, "last_edit_date": 1423067528, "question_id": 28325905, "link": "https://stackoverflow.com/questions/28325905/how-can-i-explain-a-slower-execution-when-perf-stat-does-not-give-a-clue", "title": "How can I explain a slower execution when perf stat does not give a clue?", "body": "<p>My program measures the time that it takes to execute a function <code>500</code> times (this time is on the order of 14 seconds) and reports the average time per execution. Since precise time measurement is important, I took much care to get rid of all possible sources of noise in time measurement:</p>\n\n<ol>\n<li><p>The program is run under <code>Ubuntu 14.04</code>, with root privileges, <code>nice -n -20</code>, on a shielded CPU (with <code>-k on</code> option to <code>cset shield</code>). </p></li>\n<li><p>Hyper-threading is disabled.</p></li>\n<li><p>Memory is allocated only once to avoid context switches due to <code>malloc</code>.</p></li>\n<li><p>A large <code>memset</code> and <code>500</code> warm-up function executions are performed before the timing starts in an attempt to obtain similar state of the data caches before the timer starts. The program is pretty small, so I am not that worried about the instruction cache. </p></li>\n<li><p>The time is measured as the difference of two values returned by <code>clock_gettime(CLOCK_MONOTONIC)</code>.</p></li>\n</ol>\n\n<p>Here are the reported times from 5 consecutive runs (in ms, but the measured time is 500 times this time, so it's on the order of 14 sec): <code>28.77</code>, <code>29.35</code>, <code>28.74</code>, <code>28.74</code>, <code>29.79</code>. Note that there are three very consistent timing results here (#1, #3 and #4). I am seeking help in understanding and eliminating the source of the outliers. Here is the report of <code>perf stat</code> for the first and the last runs:</p>\n\n<p>First run:</p>\n\n<pre><code>    29176.113027 task-clock (msec)         #    0.999 CPUs utilized          \n               596 context-switches          #    0.020 K/sec                  \n                 0 cpu-migrations            #    0.000 K/sec                  \n             5,061 page-faults               #    0.173 K/sec                  \n   104,825,303,791 cycles                    #    3.593 GHz                    \n   &lt;not supported&gt; stalled-cycles-frontend \n   &lt;not supported&gt; stalled-cycles-backend  \n   104,316,069,689 instructions              #    1.00  insns per cycle        \n    19,672,922,035 branches                  #  674.282 M/sec                  \n       346,005,888 branch-misses             #    1.76% of all branches\n</code></pre>\n\n<p>Last run:</p>\n\n<pre><code>      30003.678991 task-clock (msec)         #    0.999 CPUs utilized          \n               417 context-switches          #    0.014 K/sec                  \n                 0 cpu-migrations            #    0.000 K/sec                  \n             4,945 page-faults               #    0.165 K/sec                  \n   107,799,951,303 cycles                    #    3.593 GHz                    \n   &lt;not supported&gt; stalled-cycles-frontend \n   &lt;not supported&gt; stalled-cycles-backend  \n   104,310,601,483 instructions              #    0.97  insns per cycle        \n    19,671,642,624 branches                  #  655.641 M/sec                  \n       345,885,486 branch-misses             #    1.76% of all branches        \n\n      30.023661486 seconds time elapsed\n</code></pre>\n\n<p>I do not notice anything in these stats that would give a clue as to why the last run is slower than the first one. I will very much appreciate any help in this. </p>\n\n<p>EDIT: it was noticed that the Instructions per Cycle number is different. It would be great to get to the root cause of this difference.</p>\n"}, {"tags": ["c", "casting", "int", "rounding"], "comments": [{"owner": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 1, "creation_date": 1423065799, "post_id": 28325738, "comment_id": 44999269, "body": "Fun fact: <code>2147483647.0f == 2147483648.0f</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1423065885, "post_id": 28325738, "comment_id": 44999330, "body": "@dmg Does not the fun fact depend on rounding mode?"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1423065952, "post_id": 28325738, "comment_id": 44999384, "body": "Floating point numbers prove the existence of God by negation because they are clearly the work of Satan.  :-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1423066337, "post_id": 28325738, "comment_id": 44999651, "body": "@Bob Jarvis Satire aside, <a href=\"http://en.wikipedia.org/wiki/William_Kahan\" rel=\"nofollow noreferrer\">The Father of Floating Point</a> and others made a robust, effective long term FP design."}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 7, "last_activity_date": 1423065674, "creation_date": 1423065674, "answer_id": 28325849, "question_id": 28325738, "link": "https://stackoverflow.com/questions/28325738/why-does-a-cast-from-int-to-float-round-the-value/28325849#28325849", "title": "Why does a cast from int to float round the value?", "body": "<p>A typical <code>float</code> that is implemented with the 32-bit IEEE-754 representation has only 24 bits for the significand, which allows for about 7 decimal digits of precision. So you'll see rounding as soon as you hit the millions (2<sup>24</sup>&nbsp;&approx;&nbsp;16M).</p>\n\n<p>(For a <code>double</code>, the significand has 53 bits, and 2<sup>53</sup>&nbsp;&approx;&nbsp;9&times;10<sup>15</sup>.)</p>\n"}, {"comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1423066342, "post_id": 28325866, "comment_id": 44999655, "body": "didn&#39;t knew about the pigeon-hole principle, but this is how I explained to myself in laymen terms why not all integers can be represented by floats."}, {"owner": {"reputation": 899, "user_id": 4303296, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/211bac632ae1c8bb299a05019e25ff15?s=128&d=identicon&r=PG&f=1", "display_name": "Beko", "link": "https://stackoverflow.com/users/4303296/beko"}, "edited": false, "score": 0, "creation_date": 1423074992, "post_id": 28325866, "comment_id": 45005178, "body": "I always thought that precision refers to the number of decimal places. For instance, float may have 6 while double may have 15. So what exactly does precision of 7-9 decimal digits mean?"}, {"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "reply_to_user": {"reputation": 899, "user_id": 4303296, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/211bac632ae1c8bb299a05019e25ff15?s=128&d=identicon&r=PG&f=1", "display_name": "Beko", "link": "https://stackoverflow.com/users/4303296/beko"}, "edited": false, "score": 0, "creation_date": 1423075087, "post_id": 28325866, "comment_id": 45005233, "body": "@Beko: It means that the precision of a <i>binary</i> floating point value is somewhat hard to specify - particularly when normalization comes into play. Basically, if you&#39;re <i>relying</i> on more than 7 with <code>float</code>, you&#39;re in trouble."}], "tags": [], "owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "is_accepted": true, "score": 9, "last_activity_date": 1423065717, "creation_date": 1423065717, "answer_id": 28325866, "question_id": 28325738, "link": "https://stackoverflow.com/questions/28325738/why-does-a-cast-from-int-to-float-round-the-value/28325866#28325866", "title": "Why does a cast from int to float round the value?", "body": "<p>I'm assuming that by <code>float</code> you mean a 32-bit IEEE-754 binary floating point value, by <code>double</code> you mean a 64-bit IEEE-754 binary floating point value, and by <code>int</code> you mean a 32-bit integer.</p>\n\n<blockquote>\n  <p>Why does this happen? The range of float far exceeds that of int</p>\n</blockquote>\n\n<p>Yes, but the <em>precision</em> of <code>float</code> is only 7-9 decimal digits. To be more specific, the significand is only 24 bits wide... so if you're trying to store 32 bits of information in there, you're going to have problems.</p>\n\n<blockquote>\n  <p>but when converting from <code>int</code> to <code>double</code> there is no change in value</p>\n</blockquote>\n\n<p>Sure, because a <code>double</code> has a 53-bit significand - plenty of room for a 32-bit integer there!</p>\n\n<p>To think of it another way, the gap between consecutive <code>int</code> values is always 1... whereas the gap between consecutive <code>float</code> values starts very, very small... but increases as the magnitude of the value increases. It gets to \"more than 2\" well before you hit the limit of <code>int</code>... so you get to the stage where not every <code>int</code> can be exactly represented.</p>\n\n<p>To think of it <em>another</em> way, you can simply use the <a href=\"http://en.wikipedia.org/wiki/Pigeonhole_principle\">pigeon-hole principle</a>... even ignoring NaN values, there can be <em>at most</em> 2<sup>32</sup> <code>float</code> values, and at least one of those is not the exact value of an <code>int</code> - take 0.5, for example. There are 2<sup>32</sup> <code>int</code> values, therefore at least one <code>int</code> value doesn't have an exact <code>float</code> representation.</p>\n"}], "owner": {"reputation": 899, "user_id": 4303296, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/211bac632ae1c8bb299a05019e25ff15?s=128&d=identicon&r=PG&f=1", "display_name": "Beko", "link": "https://stackoverflow.com/users/4303296/beko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2615, "favorite_count": 1, "accepted_answer_id": 28325866, "answer_count": 2, "score": 6, "last_activity_date": 1423065717, "creation_date": 1423065386, "question_id": 28325738, "link": "https://stackoverflow.com/questions/28325738/why-does-a-cast-from-int-to-float-round-the-value", "title": "Why does a cast from int to float round the value?", "body": "<p>I'm reading CS:APP, and regarding casts it says that when casting <strong>from int to float, the number cannot overflow, but it may be rounded.</strong></p>\n\n<p>It seemed odd to me as I didn't know what there was to round, so I've tried it out. I thought that this would only be the case for very large integers (near <code>INT_MAX</code>/<code>INT_MIN</code>), but rounding happens at values around a hundred million as well. (Not sure where exactly this happens first).</p>\n\n<p>Why does this happen? The range of <code>float</code> far exceeds that of <code>int</code>. One might say that floating point numbers cannot be represented exactly, but when converting from <code>int</code>to <code>double</code> there is no change in value. The advantage of <code>double</code>over <code>float</code> is that it has greater range and precision. But <code>float</code>still has enough range to \"encapsulate\" integers, and precision shouldn't really matter as integers have no decimal places (well, all 0), or am I thinking wrong?</p>\n\n<p>Here's some output that I got (here is the code: <a href=\"http://pastebin.com/K3E3A6Ni\" rel=\"noreferrer\">http://pastebin.com/K3E3A6Ni</a>):</p>\n\n<pre><code>FLT_MAX = 340282346638528859811704183484516925440.000000  \nINT_MAX     = 2147483647  \n(float)INT_MAX = 2147483648.000000  \n(double)INT_MAX = 2147483647.000000  \nINT_MIN     = -2147483648  \n(float)INT_MIN = -2147483648.000000  \n\n====other values close to INT_MIN INT_MAX====  \nINT_MAX-1     = 2147483646  \n(float)INT_MAX-1 = 2147483648.000000  \nINT_MIN+1     = -2147483647  \n(float)INT_MIN+1 = -2147483648.000000  \nINT_MAX-2      = 2147483645  \n(float)INT_MAX-2  = 2147483648.000000  \nINT_MAX-10     = 2147483637  \n(float)INT_MAX-10 = 2147483648.000000  \nINT_MAX-100         = 2147483547  \n(float)INT_MAX-100  = 2147483520.000000  \nINT_MAX-1000         = 2147482647  \n(float)INT_MAX-1000 = 2147482624.000000  \n\n(float)1.234.567.809 = 1234567808.000000  \n(float)1.234.567.800 = 1234567808.000000  \n(float)1.000.000.005 = 1000000000.000000  \n(float)800.000.003   = 800000000.000000  \n(float)500.000.007   = 500000000.000000  \n(float)100.000.009   = 100000008.000000  \n</code></pre>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 5, "creation_date": 1423064335, "post_id": 28325228, "comment_id": 44998254, "body": "Simply watch your brace placement one more time. They are all over the place."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1423064667, "post_id": 28325228, "comment_id": 44998492, "body": "When posting code, consistent indenting is important for readability. Also, tabs don&#39;t work well on this site so make sure to use spaces instead. Also, with consistent indenting, your problem is pretty obvious."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423065230, "post_id": 28325228, "comment_id": 44998874, "body": "&quot;<i>I guess that it is pretty easy to understand what I am trying to do.</i>&quot; No, it isn&#39;t. From what should we conclude how you want the output to look like?"}, {"owner": {"reputation": 216, "user_id": 4375077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1a9750355733c281b63269ccda6109ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diaco", "link": "https://stackoverflow.com/users/4375077/diaco"}, "edited": false, "score": 0, "creation_date": 1423065457, "post_id": 28325228, "comment_id": 44999021, "body": "Thank you for tips. As I said, this is my first actual project and so I wasn&#39;t really focusing on the structure itself as I had been informed that indentation doesnt really matter as opose to in Python where every space matters. I will think about that. Also with the brace placements, I just got the point of them. I thought u had to have {if (condition) { //If statement} else //else statement}. Now I got it! Cheers"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1423066379, "post_id": 28325228, "comment_id": 44999683, "body": "@diaco indentation matters for <i>our</i> readability, not for how the compiler understands the code. In this case, the indenting <i>hid</i> how the compiler was seeing the code. Also, a good IDE or editor might be able to help you with tools to automatically indent and/or highlight matching <code>{</code> and <code>}</code>."}, {"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 0, "creation_date": 1485188772, "post_id": 28325228, "comment_id": 70810012, "body": "Good on all those answers suggesting you change to a sensible bracing style.. To me looking at the code it&#39;s rather obvious print(&quot;burr &quot; ); occurs between the if and the else."}, {"owner": {"reputation": 216, "user_id": 4375077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1a9750355733c281b63269ccda6109ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diaco", "link": "https://stackoverflow.com/users/4375077/diaco"}, "reply_to_user": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 0, "creation_date": 1487178790, "post_id": 28325228, "comment_id": 71669525, "body": "@CashCow Yes... At the time, I had only been programming the basics of Python, and was thrown into C with a 1 week introduction, at uni. The bracing style was a bit hard to understand, but today, I obviously see that it was all over the place haha..."}], "answers": [{"comments": [{"owner": {"reputation": 216, "user_id": 4375077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1a9750355733c281b63269ccda6109ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diaco", "link": "https://stackoverflow.com/users/4375077/diaco"}, "edited": false, "score": 0, "creation_date": 1423064352, "post_id": 28325292, "comment_id": 44998263, "body": "Problem is, I want that statement to be a part of the previous if-statement. I just dont want to repeat it in both the &quot;if and else&quot; of the &quot;if&quot;, if you understand what I mean"}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 216, "user_id": 4375077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1a9750355733c281b63269ccda6109ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diaco", "link": "https://stackoverflow.com/users/4375077/diaco"}, "edited": false, "score": 0, "creation_date": 1423064478, "post_id": 28325292, "comment_id": 44998372, "body": "@diaco Then just put it in the previous if statement?!"}, {"owner": {"reputation": 216, "user_id": 4375077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1a9750355733c281b63269ccda6109ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diaco", "link": "https://stackoverflow.com/users/4375077/diaco"}, "edited": false, "score": 0, "creation_date": 1423064630, "post_id": 28325292, "comment_id": 44998467, "body": "that was my intetion and I thought it actually was inside it now. Notice that I have previously been learning Python. Maybe that is why I am misunderstanding it. So everything inside { } is part of the if statement in other words?"}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 216, "user_id": 4375077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1a9750355733c281b63269ccda6109ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diaco", "link": "https://stackoverflow.com/users/4375077/diaco"}, "edited": false, "score": 0, "creation_date": 1423064724, "post_id": 28325292, "comment_id": 44998532, "body": "@diaco Yes, if you have a code block (<code>{}</code>) with the if statement all inside of this is part if the if statement. e.g. <code>if (condition) { &#47;&#47;If statement} else { &#47;&#47;else statement}</code> And if don&#39;t have the brackets it&#39;s only the next statement. e.g. <code>if (condition) statement; else statement;</code>"}], "tags": [], "owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "is_accepted": false, "score": 8, "last_activity_date": 1423064190, "creation_date": 1423064190, "answer_id": 28325292, "question_id": 28325228, "link": "https://stackoverflow.com/questions/28325228/else-without-a-previous-if/28325292#28325292", "title": "&#39;else&#39; without a previous &#39;if&#39;", "body": "<p>Your problem is here:</p>\n\n<pre><code>}\n    printf(\"burr \");  //&lt;---\nelse\n    printf(\"%d \",i);\n</code></pre>\n\n<p>You can't have any statements before the else block. So remove it or move it inside the else OR if block, something like this:</p>\n\n<pre><code>} else {\n    printf(\"burr \");\n    printf(\"%d \",i);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1456, "user_id": 3596604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47c77a08038828dd4c8f6908d70d31e7?s=128&d=identicon&r=PG&f=1", "display_name": "phil652", "link": "https://stackoverflow.com/users/3596604/phil652"}, "edited": false, "score": 1, "creation_date": 1423066020, "post_id": 28325306, "comment_id": 44999428, "body": "I&#39;m guessing this works for you, happy I could help you. Good luck!"}], "tags": [], "owner": {"reputation": 1456, "user_id": 3596604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47c77a08038828dd4c8f6908d70d31e7?s=128&d=identicon&r=PG&f=1", "display_name": "phil652", "link": "https://stackoverflow.com/users/3596604/phil652"}, "is_accepted": true, "score": 4, "last_activity_date": 1423065800, "last_edit_date": 1423065800, "creation_date": 1423064212, "answer_id": 28325306, "question_id": 28325228, "link": "https://stackoverflow.com/questions/28325228/else-without-a-previous-if/28325306#28325306", "title": "&#39;else&#39; without a previous &#39;if&#39;", "body": "<p>The problem is with your brackets. Indenting is important to understand where to open and close your brackets</p>\n\n<pre><code>int talet;\nscanf(\"%d\",&amp;talet);\n\nint i=1;\nwhile(i&lt;=99)\n{\nint a;\n\n    if (i%talet==0 || talet==(i/10)%10 ||talet==i%10)\n    {\n             if (talet%10==0)\n                  printf(\"\\n\");\n             else\n                  continue;\n\n        printf(\"burr \");\n    }\n    else\n    {\n        printf(\"%d \",i);\n    }\n    i=i+1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63736, "user_id": 245860, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/11c56b07a08ba381090605a5904dc0e4?s=128&d=identicon&r=PG", "display_name": "Claudio Redi", "link": "https://stackoverflow.com/users/245860/claudio-redi"}, "is_accepted": false, "score": 4, "last_activity_date": 1423064257, "creation_date": 1423064257, "answer_id": 28325322, "question_id": 28325228, "link": "https://stackoverflow.com/questions/28325228/else-without-a-previous-if/28325322#28325322", "title": "&#39;else&#39; without a previous &#39;if&#39;", "body": "<p>The problem is that you have a <code>printf</code> outside the <code>if</code> brackets. Because of this, compiler thinks that the <code>if</code> statement finished. When it reaches the <code>else</code>, throws an error since there is no open <code>if</code> condition</p>\n\n<p>You should have this</p>\n\n<pre><code>if (i%talet==0 || talet==(i/10)%10 ||talet==i%10)\n{\n    if (talet%10==0)\n        printf(\"\\n\");\n    else\n        continue;\n\n    printf(\"burr \"); // &lt;-- this was moved\n}\nelse\n    printf(\"%d \",i);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1423066643, "post_id": 28325580, "comment_id": 44999873, "body": "I don&#39;t know that I would call the first example &quot;oldschool&quot; nor would I associate the second example exclusively with Java. <a href=\"http://en.wikipedia.org/wiki/Indent_style\" rel=\"nofollow noreferrer\">Indent Style</a>"}], "tags": [], "owner": {"reputation": 113, "user_id": 4374663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908822edaf2e2384b9565edf47694334?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/4374663/christian"}, "is_accepted": false, "score": 1, "last_activity_date": 1423209279, "last_edit_date": 1423209279, "creation_date": 1423064954, "answer_id": 28325580, "question_id": 28325228, "link": "https://stackoverflow.com/questions/28325228/else-without-a-previous-if/28325580#28325580", "title": "&#39;else&#39; without a previous &#39;if&#39;", "body": "<p>try to keep your code-blocks as clean and readable as possible.\nThis will prevent you from making mistakes.</p>\n\n<p>You can write an if else Horstmann style:</p>\n\n<pre><code>if (condition)\n{\n    #statements\n}\nelse\n{\n    #statements\n}\n</code></pre>\n\n<p>or a bit more compact in TBS1 style:</p>\n\n<pre><code>if (condition) {\n    #statements\n} else {\n    #statements\n}\n</code></pre>\n\n<p>choose one you like, more styles in the comment provided by crashmstr (thanks to him), and stick to it.\nIt WILL improve your code quality.</p>\n"}], "owner": {"reputation": 216, "user_id": 4375077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1a9750355733c281b63269ccda6109ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diaco", "link": "https://stackoverflow.com/users/4375077/diaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30032, "favorite_count": 0, "accepted_answer_id": 28325306, "answer_count": 4, "score": 2, "last_activity_date": 1539137098, "creation_date": 1423064023, "last_edit_date": 1485188421, "question_id": 28325228, "link": "https://stackoverflow.com/questions/28325228/else-without-a-previous-if", "title": "&#39;else&#39; without a previous &#39;if&#39;", "body": "<p>I am just beginning to learn C programming, so I am not really on an advanced level. Bear with me!</p>\n\n<p>I have this piece of code, and I guess that it is pretty easy to understand what I am trying to do. However I get an error saying the last else is called without an if before it.</p>\n\n<p>I suspect that the problem is my if-else statement inbetween the if and else. How would you guys solve it? </p>\n\n<pre><code>int talet;\nscanf(\"%d\", &amp;talet);\n\nint i = 1;\nwhile (i &lt;= 99) {\n  int a; {\n    if (i % talet == 0 || talet == (i / 10) % 10 || talet == i % 10) {\n      if (talet % 10 == 0)\n        printf(\"\\n\");\n      else\n        continue;\n    }\n    printf(\"burr \");\n    else\n      printf(\"%d \", i);\n  }\n  i = i + 1;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "compiler-errors", "clang"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1423067836, "post_id": 28325097, "comment_id": 45000768, "body": "Hmm.. Download gcc sources and modify them to your needs?"}, {"owner": {"reputation": 50, "user_id": 4529209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jnXf9QzXrTY/AAAAAAAAAAI/AAAAAAAACzc/rnJcRpE90So/photo.jpg?sz=128", "display_name": "Sohib AL-Gotimel ", "link": "https://stackoverflow.com/users/4529209/sohib-al-gotimel"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1423068995, "post_id": 28325097, "comment_id": 45001614, "body": "@EugeneSh. im hoping if this feature is already implemented in gcc, modifying gcc will really take a long time to learn."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1423069809, "post_id": 28325097, "comment_id": 45002132, "body": "You can read clang docs about <code>#error</code>"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423069809, "post_id": 28325097, "comment_id": 45002133, "body": "Why did you tag the question <code>clang</code>?  Would you be okay with a Clang solution too?  Not that I know one but Clang is not GCC."}, {"owner": {"reputation": 50, "user_id": 4529209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jnXf9QzXrTY/AAAAAAAAAAI/AAAAAAAACzc/rnJcRpE90So/photo.jpg?sz=128", "display_name": "Sohib AL-Gotimel ", "link": "https://stackoverflow.com/users/4529209/sohib-al-gotimel"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423073625, "post_id": 28325097, "comment_id": 45004435, "body": "@5gon12eder clang or gcc are fine if there is similar solution to clang i would take it."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423074953, "post_id": 28325097, "comment_id": 45005154, "body": "@SohibAL-Gotimel That is quite relevant to your question so I have edited it accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1423075795, "last_edit_date": 1423075795, "creation_date": 1423075339, "answer_id": 28328957, "question_id": 28325097, "link": "https://stackoverflow.com/questions/28325097/compiler-error-message-customization/28328957#28328957", "title": "Compiler Error Message Customization", "body": "<p>Error messages are localized, you could change the error message catalog for your language to suite your needs.</p>\n\n<p>Alternatively, you could modify some passes reporting the error e.g. with your plugin (or even some <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> extension).</p>\n\n<p>But I am surprized you are asking, the GCC source code contains a catalog of error messages, in the <a href=\"https://gcc.gnu.org/viewcvs/gcc/trunk/gcc/po/\" rel=\"nofollow\">gcc/po/</a> subdirectory of the source code.</p>\n\n<p>Notice that the message catalog is using the <a href=\"http://man7.org/linux/man-pages/man3/gettext.3.html\" rel=\"nofollow\">gettext(3)</a> machinery, so the message id is actually the English (C locale) message itself.</p>\n"}], "owner": {"reputation": 50, "user_id": 4529209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jnXf9QzXrTY/AAAAAAAAAAI/AAAAAAAACzc/rnJcRpE90So/photo.jpg?sz=128", "display_name": "Sohib AL-Gotimel ", "link": "https://stackoverflow.com/users/4529209/sohib-al-gotimel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 28328957, "answer_count": 1, "score": 1, "last_activity_date": 1423075795, "creation_date": 1423063706, "last_edit_date": 1423074918, "question_id": 28325097, "link": "https://stackoverflow.com/questions/28325097/compiler-error-message-customization", "title": "Compiler Error Message Customization", "body": "<p>I'm trying to get error numbers or error IDs printed with the error messages from my C compiler.  I am currently using GCC but if it would be easier using Clang, that would be okay too.</p>\n\n<p>This is an example for an error message as I get it:</p>\n\n<pre><code>error: syntax error before '}' token\n</code></pre>\n\n<p>This is how I want it to be instead:</p>\n\n<pre><code>error(ERRID): syntax error before '}' token -- \n</code></pre>\n\n<p><em><code>ERRID</code></em> is a number or unique string for that error.</p>\n\n<p>Is that possible with GCC or Clang? And if it is possible, how to do it?</p>\n\n<p>I want this feature to make error messages searchable and identifiable for easy parsing and analyzing of errors.</p>\n"}, {"tags": ["ios", "c", "opengl-es", "avfoundation", "core-video"], "answers": [{"comments": [{"owner": {"reputation": 4158, "user_id": 51700, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/43c427f1fe62eb5f74fe6782a257f2ac?s=128&d=identicon&r=PG", "display_name": "Mark Essel", "link": "https://stackoverflow.com/users/51700/mark-essel"}, "reply_to_user": {"reputation": 57972, "user_id": 131140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/11b4048e49b8b89f670cc984059d1677?s=128&d=identicon&r=PG", "display_name": "Goz", "link": "https://stackoverflow.com/users/131140/goz"}, "edited": false, "score": 0, "creation_date": 1424358793, "post_id": 28594294, "comment_id": 45523455, "body": "not sure this will help but if preferredTransform a &amp; d == -1.0 it&#39;ll specify which way to rotate I think, not 100% sure on which element is which"}], "tags": [], "owner": {"reputation": 4158, "user_id": 51700, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/43c427f1fe62eb5f74fe6782a257f2ac?s=128&d=identicon&r=PG", "display_name": "Mark Essel", "link": "https://stackoverflow.com/users/51700/mark-essel"}, "is_accepted": false, "score": 0, "last_activity_date": 1424294947, "creation_date": 1424294947, "answer_id": 28594294, "question_id": 28324815, "link": "https://stackoverflow.com/questions/28324815/converting-a-cgaffinetransform-to-a-glkmatrix3/28594294#28594294", "title": "Converting a CGAffineTransform to a GLKMatrix3", "body": "<p>You need to know which way the landscape video was rotated -90 or 90 in order to invert that transform for display</p>\n\n<p>3x3 affine matrix</p>\n\n<pre><code>xx    xy    x0\nyx    yy    y0\n0     0     1\n</code></pre>\n\n<p>not sure how a,b,c,d,tx,ty map but expect apple's docs may help </p>\n\n<p>Here's an example of an affine with angle a\n// rotate, counter clockwise, a radians</p>\n\n<pre><code>cos(a)   -sin(a)    0\nsin(a)    cos(a)    0\n0         0         1\n</code></pre>\n"}], "owner": {"reputation": 57972, "user_id": 131140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/11b4048e49b8b89f670cc984059d1677?s=128&d=identicon&r=PG", "display_name": "Goz", "link": "https://stackoverflow.com/users/131140/goz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424294947, "creation_date": 1423062936, "question_id": 28324815, "link": "https://stackoverflow.com/questions/28324815/converting-a-cgaffinetransform-to-a-glkmatrix3", "title": "Converting a CGAffineTransform to a GLKMatrix3", "body": "<p>I'm trying to render a video to a texture surface but I'm having a few problems with texture coordinates.</p>\n\n<p>I'm using CoreVideo to grab the texture surface using an CVOpenGLESTextureCacheCreateTextureFromImage call.  This part is working fine.  Now I want to rotate the video so it appears at the correct orientation.  It struck me that one way to do this would be via a texture coordinate matrix.  To that end I grab the preferredTransform and naturalSize from my AVAssetTrack.</p>\n\n<p>Now I start to get problems.  The preferredTransform contains a translation (tx, ty) in pixels but I need this \"normalised\" so I do the following to get my matrix:</p>\n\n<pre><code>    CGSize transSize    = CGSizeApplyAffineTransform( videoSize, videoTransform );\n    videoTransform.tx   /= -transSize.width;\n    videoTransform.ty   /= -transSize.height;\n</code></pre>\n\n<p>(Note I'm not sure why I need to negate the transformed size but if I don't then things will not end up in the 0->1 range).</p>\n\n<p>I then form a GLKMatrix3 as follows:</p>\n\n<pre><code>GLKMatrix3 CGAffineTransformToGLKMatrix3( CGAffineTransform affineTransform )\n{\n    return GLKMatrix3Make(  affineTransform.a,  affineTransform.b,  0,\n                            affineTransform.c,  affineTransform.d,  0,\n                            affineTransform.tx, affineTransform.ty, 1 );\n}\n</code></pre>\n\n<p>This does appear to transform everything nearly perfectly.  However while videos shot in landscape appear perfectly, videos that are shot in portrait appear upside down.  </p>\n\n<p>So obviously I'm doing something wrong but I've spent a fair bit of time on this and got nowhere.  Does anyone have any ideas where I'm going wrong?</p>\n"}, {"tags": ["c", "copy", "bmp"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1423063010, "post_id": 28324706, "comment_id": 44997362, "body": "OK, what did you find out while you were debugging the code?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423063487, "post_id": 28324706, "comment_id": 44997679, "body": "Also please properly indent your code. Like this it&#39;s no fun reading it."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1423064625, "post_id": 28324706, "comment_id": 44998463, "body": "the wrong direction part seem to be on purpose in <code>for(i = information-&gt;width-1; i &gt;=0; i--)</code>"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 1, "creation_date": 1423065070, "post_id": 28324706, "comment_id": 44998763, "body": "also note that in BMP scanlines are padded with 0 so that the size of each scanline is divisible with 4"}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1423065188, "post_id": 28324706, "comment_id": 44998848, "body": "Please indent your code.  Also, compile and run it through a debugger like <code>gdb</code>.  That will help."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4529117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8130181317060cd3a54856d375eb6e69?s=128&d=identicon&r=PG&f=1", "display_name": "user4529117", "link": "https://stackoverflow.com/users/4529117/user4529117"}, "edited": false, "score": 0, "creation_date": 1423123108, "post_id": 28326050, "comment_id": 45022981, "body": "thanks for the help, sorry the mess, i always a bit messy in everything, ive tryed to make it a littile better.                                                                       about the padding im using digital mars complier, it dosent get 0, but it is padded (the Header is 14 bytes, the infoheader is 40 bytes).                                                      about the loops, well the only reason i did it oppside down is because ive read that the reading of the bytes of bmp file is oppside down, anyway if i change it to from 0 till the end i still get it oppside down and 3 times."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "reply_to_user": {"reputation": 9, "user_id": 4529117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8130181317060cd3a54856d375eb6e69?s=128&d=identicon&r=PG&f=1", "display_name": "user4529117", "link": "https://stackoverflow.com/users/4529117/user4529117"}, "edited": false, "score": 0, "creation_date": 1423132206, "post_id": 28326050, "comment_id": 45027923, "body": "Yes, bitmaps are upside-down. (Usually or always, I do not remember.)  But I was not referring at all to the direction of counting along the Y axis.  I was referring to the fact that your Y loop must be the outer loop and your X loop must be the inner loop, not the other way around."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "reply_to_user": {"reputation": 9, "user_id": 4529117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8130181317060cd3a54856d375eb6e69?s=128&d=identicon&r=PG&f=1", "display_name": "user4529117", "link": "https://stackoverflow.com/users/4529117/user4529117"}, "edited": false, "score": 0, "creation_date": 1423132433, "post_id": 28326050, "comment_id": 45028081, "body": "As for the triplicates, I do not know, maybe the problem will go away if you fix the nesting of your loops, maybe not, but I cannot really put much effort at reading your code because it is formatted horrendously."}], "tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1423350782, "last_edit_date": 1423350782, "creation_date": 1423066274, "answer_id": 28326050, "question_id": 28324706, "link": "https://stackoverflow.com/questions/28324706/trying-to-copy-data-from-bmp-file-to-a-text-file/28326050#28326050", "title": "Trying to copy data from bmp file to a text file", "body": "<p>Instead of this:</p>\n\n<pre><code>for(i = 0; i &lt; information-&gt;width; i++)    \n{\n    for(j = 0; j &lt; information-&gt;height; j++)   \n</code></pre>\n\n<p>use something like this:</p>\n\n<pre><code>for(y = 0; y &lt; information-&gt;height; y++)    \n{\n    for(x = 0; x &lt; information-&gt;width; x++)   \n</code></pre>\n\n<p>(and of course do the same when you are scanning the bitmap.)</p>\n"}], "owner": {"reputation": 9, "user_id": 4529117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8130181317060cd3a54856d375eb6e69?s=128&d=identicon&r=PG&f=1", "display_name": "user4529117", "link": "https://stackoverflow.com/users/4529117/user4529117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423350782, "creation_date": 1423062622, "last_edit_date": 1423123637, "question_id": 28324706, "link": "https://stackoverflow.com/questions/28324706/trying-to-copy-data-from-bmp-file-to-a-text-file", "title": "Trying to copy data from bmp file to a text file", "body": "<p>im trying to copy pixel data from a bmp file to a text file in c (white will be 0, every other color will be 1), but for some reason the text file comes out trippled (three areas of 1) and in the wrong direction, i cant figure out why. anyway this is my scipt: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;alloc.h&gt;\n#pragma pack(1)\ntypedef struct {\nunsigned char type1;                 /* Magic identifier            */\nunsigned char type2;\nunsigned int size;                       /* File size in bytes          */\nunsigned int reserved;\nunsigned long offset;                     /* Offset to image data, bytes */\n} Header;\n#pragma pack(2)\ntypedef struct {\nunsigned int size;               /* Header size in bytes      */\nint width,height;                /* Width and height of image */\nunsigned short int planes;       /* Number of colour planes   */\nunsigned short int bits;         /* Bits per pixel            */\nunsigned int compression;        /* Compression type          */\nunsigned int imagesize;          /* Image size in bytes       */\nunsigned int xresolution,yresolution;     /* Pixels per meter          */\nunsigned int ncolours;           /* Number of colours         */\nunsigned int importantcolours;   /* Important colours         */\n} Infoheader;\n\ntypedef struct\n{   unsigned char Red, Green, Blue,Reserved;\n} Pixel;\n\n\nvoid main()\n{\nint n;\nFILE *fin;\nHeader *fileheader;\nInfoheader *information;\nPixel *ppixel,**pImage;\nfin=fopen(\"TEST_web.bmp\",\"rb\");\n    if (fin==NULL)\n    {\n    printf(\"Error reading image\\n\");\n    exit(1);\n    }\nint i,j;\nfileheader=(Header *)malloc(sizeof(Header));\ninformation=(Infoheader *)malloc(sizeof(Infoheader));\nppixel=(Pixel *)malloc(sizeof(Pixel));\nfread(fileheader,sizeof(Header),1,fin);\n    if ((*fileheader).type1!='B'&amp;&amp;(*fileheader).type2!='M')\n    {\n    printf(\"Not a bmp file\\n\");\n    exit(1);\n    }\nn=fread(information, sizeof(Infoheader),1,fin);\n    if(n!=1)\n    {\n    printf(\"Error reading image information\\n\");\n    exit(1);\n    }\npImage = (Pixel **)malloc(sizeof(Pixel *) * information-&gt;height);\n    for(i = 0; i &lt; information-&gt;height; i++)\n    {   pImage[i] = (Pixel *)malloc(sizeof(Pixel) * information-&gt;width);\n    }\nfseek(fin,fileheader-&gt;offset,SEEK_SET);\n    for(i = 0; i &lt; information-&gt;width; i++)\n\n    {   for(j = 0; j &lt; information-&gt;height; j++)\n\n    {   fread(&amp;(*ppixel).Red, sizeof(unsigned char), 1, fin);\n\n        fread(&amp;(*ppixel).Green, sizeof(unsigned char), 1, fin);\n\n        fread(&amp;(*ppixel).Blue, sizeof(unsigned char), 1, fin);\n\n\n        pImage[i][j] = *ppixel;\n\n    }\n\n}\nchar data[information-&gt;width][information-&gt;height];\n        for(i = 0; i &lt;information-&gt;width; i++)\n\n        {   for(j= 0; j&lt;information-&gt;height; j++)\n\n            {   \n                if((pImage[i][j]).Red==255&amp;&amp;(pImage[i][j]).Green==255&amp;&amp; Image[i][j]).Blue==255)\n                data[i][j]='0';\n                else\n                data[i][j]='1';\n            }\n        }\nFILE *fout;\nfout=fopen(\"text.txt\",\"wt\");\n\nfor(i = 0; i &lt; information-&gt;width; i++)\n\n{   for(j = 0; j &lt; information-&gt;width ; j++)\n\n    {             fputc(data[i][j],fout);\n\n\n\n}\nfputs(\"\\n\",fout);\n}\n\nfree(fileheader);\nfree(information);\nfree(ppixel);\nfor(i = 0; i &lt; information-&gt;height; i++)\n    free(pImage[i]);\nfclose(fin);\n</code></pre>\n\n<p>}</p>\n\n<p><a href=\"http://dasl.mem.drexel.edu/alumni/bGreen/www.pages.drexel.edu/_weg22/TEST_web.bmp\" rel=\"nofollow\">Im working for now with this picture</a></p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1423062223, "post_id": 28324290, "comment_id": 44996838, "body": "The <code>losetup</code> command can do that (with <code>-o</code> and <code>--sizelimit</code>). Not a C solution, but perhaps a starting point."}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 2653261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4b3d21b625b994bc962b49f783f7d7?s=128&d=identicon&r=PG", "display_name": "Chloride Cull", "link": "https://stackoverflow.com/users/2653261/chloride-cull"}, "edited": false, "score": 0, "creation_date": 1423064110, "post_id": 28324620, "comment_id": 44998108, "body": "I&#39;ll take a peek at the API, and the changing the offset isn&#39;t harder than changing a #define ;)"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 590, "user_id": 2653261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4b3d21b625b994bc962b49f783f7d7?s=128&d=identicon&r=PG", "display_name": "Chloride Cull", "link": "https://stackoverflow.com/users/2653261/chloride-cull"}, "edited": false, "score": 0, "creation_date": 1423065384, "post_id": 28324620, "comment_id": 44998977, "body": "@ChlorideCull: Cool, but note that if the library gets messy you can always call the command directly. For this particular case I don&#39;t think anybody would object."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 2, "last_activity_date": 1423062424, "creation_date": 1423062424, "answer_id": 28324620, "question_id": 28324290, "link": "https://stackoverflow.com/questions/28324290/creating-a-block-device-entry-from-an-offset-of-another-block-device/28324620#28324620", "title": "Creating a block device entry from an offset of another block device", "body": "<p><code>devicemapper</code> can do this. I don't know about the C interface, but you can read the source code of <code>dmsetup</code>.</p>\n\n<p>In particular:</p>\n\n<pre><code>echo \"$SIZE linear /dev/$DEVICE $OFFSET\" | dmsetup create NEWDEVICE\n</code></pre>\n\n<p>will create a device named <code>/dev/mapper/NEWDEVICE</code>.</p>\n\n<p>The funny thing is that <code>$SIZE</code> and <code>$OFFSET</code> are in number of blocks, not bytes. And block size is usually 512 bytes, so your offset of 128 bytes will be impossible to do. But anyway, you do not want to misalign the blocks in your device, do you?</p>\n\n<p><strong>UPDATE</strong>: Ok, I looked at it. <code>dmsetup</code> uses this cool library <code>libdevmapper</code> to do the hard work.</p>\n"}], "owner": {"reputation": 590, "user_id": 2653261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d4b3d21b625b994bc962b49f783f7d7?s=128&d=identicon&r=PG", "display_name": "Chloride Cull", "link": "https://stackoverflow.com/users/2653261/chloride-cull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "accepted_answer_id": 28324620, "answer_count": 1, "score": 0, "last_activity_date": 1423062424, "creation_date": 1423061475, "question_id": 28324290, "link": "https://stackoverflow.com/questions/28324290/creating-a-block-device-entry-from-an-offset-of-another-block-device", "title": "Creating a block device entry from an offset of another block device", "body": "<p>I am writing what I can guess would be classed as a file system, that's 100% compatible with LUKS/dm-crypt, except for a 128 byte metadata block in the beginning of the device. I don't see a way to specify an offset from <code>crypt_load</code>, <code>crypt_format</code> or <code>crypt_activate_by_passphrase</code>.</p>\n\n<p>So, in the search of a more general solution: <strong>How can I, from C (or C++), create a block device pointing to an offset of another block device?</strong></p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1423061511, "post_id": 28324225, "comment_id": 44996356, "body": "You are assigning type <code>struct RDMPacket</code> to type <code>struct* RDMPacket</code>. Assign the pointer the ADDRESS of the struct instead."}], "answers": [{"tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 1, "last_activity_date": 1423062293, "last_edit_date": 1423062293, "creation_date": 1423061440, "answer_id": 28324279, "question_id": 28324225, "link": "https://stackoverflow.com/questions/28324225/incompatible-types-when-initialising-pointer-to-structs/28324279#28324279", "title": "Incompatible types when initialising pointer to structs", "body": "<p>You must put addresses to pointers. Use <code>&amp;</code> operator to get address:</p>\n\n<pre><code>RDMPacket *pRDMWriteBuf = &amp;rdmRxBufA;\nRDMPacket *pRDMSpareBuf = &amp;rdmRxBufB;\nRDMPacket *pRDMReadBuf  = &amp;rdmRxBufC;\n</code></pre>\n\n<hr>\n\n<p>It is a bit unclear from question, but if you actually want arrays of structs, same way you have arrays of <code>unit8_t</code>, then just make them arrays of structs:</p>\n\n<pre><code>RDMPacket rdmRxBufA[NumberOfChannels];\nRDMPacket rdmRxBufB[NumberOfChannels];\nRDMPacket rdmRxBufC[NumberOfChannels];\n</code></pre>\n\n<p>Now <code>rdmRxBufA</code> and so on give pointer the first element of the array, and you can again assign to pointers directly.</p>\n\n<hr>\n\n<p>You seem to be confused about different semantics of arrays and structs, if you thought you didn't need the <code>&amp;</code> operator.</p>\n\n<p>With arrays like <code>int a[]</code>, <code>a</code> alone gives pointer to the first element of the array, <code>&amp;(a[0])</code>.<br> (A side note: <code>&amp;a</code> also returns pointer with same value, but to a different type, pointer to the whole array, and is very rarely correct).</p>\n\n<p>However, structs are more \"normal\" types. You can use them as values, such as pass them as arguments and assign them to other variables of same type, so you could say for example <code>rdmRxBufA = rdmRxBufB;</code> and that is valid assignment. If you want the address, you need the <code>&amp;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1505, "user_id": 2634447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IqpKe.jpg?s=128&g=1", "display_name": "Dimitri Mockelyn", "link": "https://stackoverflow.com/users/2634447/dimitri-mockelyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1423061492, "creation_date": 1423061492, "answer_id": 28324297, "question_id": 28324225, "link": "https://stackoverflow.com/questions/28324225/incompatible-types-when-initialising-pointer-to-structs/28324297#28324297", "title": "Incompatible types when initialising pointer to structs", "body": "<p>The first three are arrays of <code>uint8_t</code>. It means that dmxRxBuf is a pointer to the first element, thus, a <code>uint8_t*</code> The others are just <code>RDMPacket</code>. If you want to pass their address, you could use this :</p>\n\n<pre><code>RDMPacket *pRDMWriteBuf = &amp;rdmRxBufA;\nRDMPacket *pRDMSpareBuf = &amp;rdmRxBufB;\nRDMPacket *pRDMReadBuf  = &amp;rdmRxBufC;\n</code></pre>\n\n<p>Or create arrays of <code>RDMPacket</code>, as you did for uint8_t</p>\n\n<pre><code>RDMPacket rdmRxBufA[];\nRDMPacket rdmRxBufB[];\nRDMPacket rdmRxBufC[];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1423061504, "creation_date": 1423061504, "answer_id": 28324302, "question_id": 28324225, "link": "https://stackoverflow.com/questions/28324225/incompatible-types-when-initialising-pointer-to-structs/28324302#28324302", "title": "Incompatible types when initialising pointer to structs", "body": "<p>Using an array without index let's the array decay to a pointer to it's 1st element.</p>\n\n<p>This </p>\n\n<pre><code>uint8_t * pDMXWriteBuf = dmxRxBufA;\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>uint8_t * pDMXWriteBuf = &amp;dmxRxBufA[0];\n</code></pre>\n\n<p>The <code>struct</code>s aren't arrays, so they won't decay. Use <code>&amp;</code>, the <code>Address Of</code>-operator instead.</p>\n\n<pre><code>RDMPacket * pRDMWriteBuf = &amp;rdmRxBufA;\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 4478695, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/aed5ebc3aecfae90cf38964b0a8195fc?s=128&d=identicon&r=PG&f=1", "display_name": "RobbG", "link": "https://stackoverflow.com/users/4478695/robbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 28324297, "answer_count": 3, "score": 0, "last_activity_date": 1423062293, "creation_date": 1423061247, "question_id": 28324225, "link": "https://stackoverflow.com/questions/28324225/incompatible-types-when-initialising-pointer-to-structs", "title": "Incompatible types when initialising pointer to structs", "body": "<p>I have the following in my code, <code>RDMPacket</code> is a struct defined in an included header file. The first 3 buffer pointers (DMX buffers) work fine but the second 3 (the RDM buffers) do not. Am I doing something wrong? How else could I refer to a set of structs with pointers?</p>\n\n<pre><code>uint8_t dmxRxBufA[NumberOfChannels];\nuint8_t dmxRxBufB[NumberOfChannels];\nuint8_t dmxRxBufC[NumberOfChannels];\n\nuint8_t *pDMXWriteBuf = dmxRxBufA;\nuint8_t *pDMXSpareBuf = dmxRxBufB;\nuint8_t *pDMXReadBuf  = dmxRxBufC;\n\nRDMPacket rdmRxBufA;\nRDMPacket rdmRxBufB;\nRDMPacket rdmRxBufC;\n\nRDMPacket *pRDMWriteBuf = rdmRxBufA;\nRDMPacket *pRDMSpareBuf = rdmRxBufB;\nRDMPacket *pRDMReadBuf  = rdmRxBufC;\n\nuart.c:90:27: error: incompatible types when initializing type 'struct RDMPacket *' using type 'RDMPacket'\nuart.c:91:27: error: incompatible types when initializing type 'struct RDMPacket *' using type 'RDMPacket'\nuart.c:92:26: error: incompatible types when initializing type 'struct RDMPacket *' using type 'RDMPacket'\n</code></pre>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1423060601, "post_id": 28323947, "comment_id": 44995729, "body": "<code>main()</code> should be <code>int main(void)</code>"}, {"owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "edited": false, "score": 0, "creation_date": 1423060657, "post_id": 28323947, "comment_id": 44995780, "body": "Add a -fomit-frame-pointer during compilation and observe the output."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1519933808, "post_id": 28323947, "comment_id": 85119834, "body": "The <code>mov %rbp, %rsp</code> part of <code>leave</code> isn&#39;t needed when <code>%rsp</code> is still pointing to the right place, so <code>pop %rbp</code> is faster.  <code>gcc</code> will still use <code>leave</code> (with most tuning options) if it needed a frame pointer <i>and</i> it had to reserve some extra stack space."}], "answers": [{"tags": [], "owner": {"reputation": 1829, "user_id": 4242097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1347add4ae303c0258a3db358ed77c55?s=128&d=identicon&r=PG", "display_name": "Parham Alvani", "link": "https://stackoverflow.com/users/4242097/parham-alvani"}, "is_accepted": true, "score": 0, "last_activity_date": 1519928069, "last_edit_date": 1519928069, "creation_date": 1423061465, "answer_id": 28324287, "question_id": 28323947, "link": "https://stackoverflow.com/questions/28323947/why-am-i-getting-popq-rbp-instead-of-leave/28324287#28324287", "title": "Why am I getting &quot;popq %rbp&quot; instead of &quot;leave&quot;?", "body": "<p>Intel64 and IA-32 Architectures Software Developer's Manual says:</p>\n\n<blockquote>\n  <p>The <code>LEAVE</code> instruction, which does not any operands, reverses the action of the previous <code>ENTER</code> instruction. The <code>LEAVE</code> instruction copies the contents of the <code>EBP</code> register into the <code>ESP</code> register to release all stack space allocated to the procedure. Then it restores the old value of the <code>EBP</code> register from the stack. This simultaneously restores the <code>ESP</code> register to its original value. A subsequent <code>RET</code> instruction then can remove any arguments and the return address pushed on the stack by the calling program for use by the procedure.</p>\n</blockquote>\n\n<p>and gcc do this manually.</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1423087343, "post_id": 28324617, "comment_id": 45011723, "body": "<code>gcc-4.8</code> <i>does</i> occasionally emit <code>leave</code>. Probably something to do with alignment or the size of the function."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1475299087, "post_id": 28324617, "comment_id": 66898380, "body": "@EOF: If RSP is already pointing to the right place, it just uses POP.  Otherwise it uses LEAVE, e.g. at the end of a function with a C99 variable-length array.  (gcc6.2 still does this, like in this example: <a href=\"https://godbolt.org/g/xRsk0m\" rel=\"nofollow noreferrer\">godbolt.org/g/xRsk0m</a>).  clang uses mov / pop.  Agner Fog says LEAVE is 3 uops, but I wonder if his measurement method accounted for extra stack-engine uops.  (e.g. a sequence of <code>mov %rbp, %rsp</code> / <code>pop %rbp</code> would also be 3 uops per pair)."}], "tags": [], "owner": {"reputation": 19872, "user_id": 3144770, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hN6jT.png?s=128&g=1", "display_name": "Sep Roland", "link": "https://stackoverflow.com/users/3144770/sep-roland"}, "is_accepted": false, "score": 1, "last_activity_date": 1423062420, "creation_date": 1423062420, "answer_id": 28324617, "question_id": 28323947, "link": "https://stackoverflow.com/questions/28323947/why-am-i-getting-popq-rbp-instead-of-leave/28324617#28324617", "title": "Why am I getting &quot;popq %rbp&quot; instead of &quot;leave&quot;?", "body": "<p><strong>I don't see what I am doing wrong</strong>  </p>\n\n<p>It's up to GCC to decide if it uses ENTER/LEAVE.<br>\nSince even INTEL deprecates the use of ENTER/LEAVE it's no wonder GCC doesn't use it (anymore).<br>\nAlso <code>movq %rbp,%rsp</code> wasn't needed here and so you only found <code>popq %rbp</code>.</p>\n"}], "owner": {"reputation": 1034, "user_id": 2917269, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a74a0e80421f4813efc87bcc0d2606?s=128&d=identicon&r=PG&f=1", "display_name": "joakim", "link": "https://stackoverflow.com/users/2917269/joakim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "closed_date": 1423064280, "accepted_answer_id": 28324287, "answer_count": 2, "score": 1, "last_activity_date": 1519928069, "creation_date": 1423060410, "question_id": 28323947, "link": "https://stackoverflow.com/questions/28323947/why-am-i-getting-popq-rbp-instead-of-leave", "closed_reason": "Duplicate", "title": "Why am I getting &quot;popq %rbp&quot; instead of &quot;leave&quot;?", "body": "<p>I don't see what I am doing wrong, this is my C code:</p>\n\n<pre><code>main() {\n    int i = 0;\n    if (i == 0) i++;\n    return 0;\n}\n</code></pre>\n\n<p>Compiling with gcc -S test.c</p>\n\n<p>I was expecting \"leave\" instead of \"popq %rbp\".</p>\n\n<pre><code>.L2:\nmovl $0, %eax\npopq %rbp\nret\n</code></pre>\n"}, {"tags": ["c", "eclipse", "crash", "malloc"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1423060209, "post_id": 28323734, "comment_id": 44995460, "body": "There&#39;s probably something in the ps listing when Eclipse is running that causes a buffer overflow in your code (e.g. a char[] buffer that isn&#39;t big enough). Try running your code under valgrind to catch the bug."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1423060331, "post_id": 28323734, "comment_id": 44995548, "body": "If you can repeat the bug just by launching Eclipse, then you should be able to simply run your program through a debugger and see where it crashes?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1423061068, "post_id": 28323734, "comment_id": 44996058, "body": "The eclipse startup command is loooong. I bet it&#39;s a buffer overlow when reading/parsing(?) it."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1423061207, "post_id": 28323734, "comment_id": 44996152, "body": "&quot;... crashes with a Segmentation Fault, every time.&quot; Consider yourself fortunate. Fortunate in that in all likelihood your program is invoking undefined behavior and doing so <i>predictably</i>. That is a not-so-subtle request for &quot;Please attach a debugger to me, then launch Eclipse.&quot; And I&#39;d crunch that thing under Valgrind as well. Chances are it isn&#39;t the only problem in that code."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1423064227, "post_id": 28323734, "comment_id": 44998186, "body": "(Or consider yourself fortunate because your program blocks Eclipse from executing. That&#39;s a pretty amazing program actually! It will make your life so much better.)"}, {"owner": {"reputation": 5495, "user_id": 663456, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2f512b864f482087008751c4554b2bdb?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/663456/philip"}, "edited": false, "score": 0, "creation_date": 1423071860, "post_id": 28323734, "comment_id": 45003421, "body": "What is the relevant portion of the output of <code>ps \u2013efj \u2013ww</code> when Eclipse is running?"}, {"owner": {"reputation": 265, "user_id": 3772839, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8677e65108deeeed7d67f82766ad6f72?s=128&d=identicon&r=PG&f=1", "display_name": "user3772839", "link": "https://stackoverflow.com/users/3772839/user3772839"}, "edited": false, "score": 0, "creation_date": 1423073966, "post_id": 28323734, "comment_id": 45004621, "body": "THANKS PAUL!   It was indeed a buffer overflow problem.  The -ww portion of the command returned a string way too big for the char[300] data structure item.  I changed the command for --width 200 and it&#39;s fine with some extra spaces left."}], "owner": {"reputation": 265, "user_id": 3772839, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8677e65108deeeed7d67f82766ad6f72?s=128&d=identicon&r=PG&f=1", "display_name": "user3772839", "link": "https://stackoverflow.com/users/3772839/user3772839"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1423061804, "creation_date": 1423059780, "last_edit_date": 1423061804, "question_id": 28323734, "link": "https://stackoverflow.com/questions/28323734/starting-eclipse-makes-c-program-to-crash-immediately", "title": "Starting Eclipse makes C program to crash immediately", "body": "<p>I am working on the migration of a 20+ year old set of C programs (about 206,000 lines) from Solaris to RHEL (el6.x86_64).  On both architechture, the programs are compiled 32-bits.  One difference is that on Solaris, we use (cc) and on Linux we use (gcc). </p>\n\n<p>There is a set of programs that monitor the list of all processes returned by the (ps \u2013efj \u2013ww) command in order to identify if a specific process has been called.  All the active processes are put into a linked list and scanned in order to find the specific process and its sub-processes among other things.  Then, after one minute, the linked list is cleared and the cycle restarts: the linked list of processes is build again.  This runs fine for weeks and months without a glitch, until we start Eclipse (Helios or Luna) from another user/session.  Then, our C program crashes with a Segmentation Fault, every time.  And here, we're not doing anything with Eclipse yet other than starting it.</p>\n\n<p>How can this be possible?  As soon as Eclipse is being run by a user on the server (using X11/Putty), our C program, which is running from another user account (like a service account) is crashing immediately.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423059531, "post_id": 28323590, "comment_id": 44995019, "body": "A good practice: always check for the success of <code>fopen()</code> before accessing the returned pointer."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1423059591, "post_id": 28323590, "comment_id": 44995051, "body": "you&#39;re looking for newline chars. if the last line DOESN&#39;T end with a newline, you&#39;ll completely ignore it."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423059608, "post_id": 28323590, "comment_id": 44995058, "body": "You might like to try to debug this yourself: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423059663, "post_id": 28323590, "comment_id": 44995098, "body": "Also it&#39;s <code>int main(void)</code> at least."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423059672, "post_id": 28323590, "comment_id": 44995105, "body": "Llso, what do you mean by <code>does not respond</code>. Can you please clarify?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423059710, "post_id": 28323590, "comment_id": 44995131, "body": "Also^2: Is there any reason you skip the array&#39;s 1st element here: <code>for(i=1;i&lt;101;i++)</code>?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423059813, "post_id": 28323590, "comment_id": 44995206, "body": "Also^3: This statement <code>(arr[i])++;</code> seem to access <code>arr</code> out of bounds."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1423060103, "post_id": 28323590, "comment_id": 44995391, "body": "<code>fgetc</code> returns an <code>int</code>, not a <code>char</code>. If your file contains a 0xFF, you will stop, even if the file is longer."}, {"owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060573, "post_id": 28323590, "comment_id": 44995710, "body": "By does not respond, I mean, it goes into an infinite loop"}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1423065324, "post_id": 28323590, "comment_id": 44998934, "body": "PLEASE indent your code.  It is hard to read, and gives people headaches who try to.  Then run it through a debugger like <code>gdb</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060452, "post_id": 28323680, "comment_id": 44995632, "body": "Then it shouldn&#39;t be working for 33 lines either, right?"}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "reply_to_user": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060842, "post_id": 28323680, "comment_id": 44995913, "body": "I think so. Logic OR ( || operator ) just widen condition"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1423061756, "post_id": 28323680, "comment_id": 44996529, "body": "Also change <code>char ch;</code> --&gt; <code>int ch;</code>"}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 0, "last_activity_date": 1423059618, "creation_date": 1423059618, "answer_id": 28323680, "question_id": 28323590, "link": "https://stackoverflow.com/questions/28323590/issue-with-reading-files-in-c/28323680#28323680", "title": "Issue with reading files in C", "body": "<p>The problem is in the logic. You just count <code>'\\n'</code> symbol, but last line in the file has not this one in the end. Change condition to <code>if(ch == '\\n' || ch == EOF) numLines++;</code></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060413, "post_id": 28323766, "comment_id": 44995600, "body": "but why is it that it works for 33 lines, and suddenly, when I increase the line and again run the program, it goes into an infinite loop. :/"}, {"owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060525, "post_id": 28323766, "comment_id": 44995680, "body": "i started it from 1, because i wanted to increase the respective values of the indices :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060662, "post_id": 28323766, "comment_id": 44995786, "body": "@Aneesh I&#39;m not saying that&#39;s the <i>only</i> problem you have in your code, but once an undefined behaviour, always an undefined behaviour. You cannot justify <i>any</i> output of a code showing undefined behaviour."}, {"owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060833, "post_id": 28323766, "comment_id": 44995909, "body": "I see. So, what do you suggest I do? How do I rectify it?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423060940, "post_id": 28323766, "comment_id": 44995968, "body": "@Aneesh control the value of <code>i</code> while using <code>(arr[i])++;</code> . the condition should be <i>0 &lt;= i &lt; 101</i>."}, {"owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423061323, "post_id": 28323766, "comment_id": 44996223, "body": "Besides, why is it running into an infinite loop for 34 and above number of lines?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423060746, "last_edit_date": 1423060746, "creation_date": 1423059870, "answer_id": 28323766, "question_id": 28323590, "link": "https://stackoverflow.com/questions/28323590/issue-with-reading-files-in-c/28323766#28323766", "title": "Issue with reading files in C", "body": "<p>Along with other logical issues [already pointed out in other answer and comments], what I can see, in your code</p>\n\n<pre><code>(arr[i])++;\n</code></pre>\n\n<p><code>arr[i]</code> points to invalid memory location, as the value of <code>i</code> is not being reset after coming out of <code>for</code> loop. So, essentially you're accessing out-of-bound memory and facing <em>off-by-one</em> error. This will result in <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>Notes: </p>\n\n<ul>\n<li>in <code>for(i=1;i&lt;101;i++)</code>, looping should start from <code>0</code>, as C arrays have a starting index of <code>0</code>.</li>\n<li>always check for the success of <code>fopen()</code> before accessing the returned pointer.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423063097, "post_id": 28324623, "comment_id": 44997418, "body": "There is no scope for the number of digits to be zero, because, i have used rand() to generate the numbers in the text file and taken care that zero is not entered. And all the numbers are only between 1 and 100 for the same reason ."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "edited": false, "score": 0, "creation_date": 1423063998, "post_id": 28324623, "comment_id": 44998043, "body": "If a line <i>starts with</i> &quot;100&quot;, the &quot;1&quot; and the first &quot;0&quot; are read by two <code>fgetc()</code> calls and the next &quot;0&quot; by <code>fscanf()</code> and the fault I mention will happen."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1423065172, "last_edit_date": 1423065172, "creation_date": 1423062429, "answer_id": 28324623, "question_id": 28323590, "link": "https://stackoverflow.com/questions/28323590/issue-with-reading-files-in-c/28324623#28324623", "title": "Issue with reading files in C", "body": "<p>In addition to the EOF issue pointed out, I'll examine a 4-line section of the code line by line. In the first line <code>fscanf()</code> sets <code>i</code> to a number read from the file as text.</p>\n\n<pre><code>fscanf(fp,\"%d\",&amp;i);\n</code></pre>\n\n<p>In the next line, you haven't tested the value of <code>i</code> and if <code>i &lt; 0</code> or <code>i &gt; 100</code> it will break the array.</p>\n\n<pre><code>(arr[i])++;\n</code></pre>\n\n<p>This next line establishes how many digits there were in the number.</p>\n\n<pre><code>c=numOfDig(i);\n</code></pre>\n\n<p>Suppose the file contains the sequence \"a0\". You then resposition the file pointer, but if the number of digits <code>c == 0</code>, you will get an infinite loop, because the file pointer will rewind by 2 and re-read the same sequence.</p>\n\n<pre><code>fseek(fp,c-2,SEEK_CUR);\n</code></pre>\n\n<p>This is because your function <code>numOfDig()</code> is incorrect. When passed <code>0</code> it returns <code>0</code> instead of <code>1</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4445217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d3fd94def154252613d68dfc14cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Aneesh", "link": "https://stackoverflow.com/users/4445217/aneesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1423065172, "creation_date": 1423059378, "question_id": 28323590, "link": "https://stackoverflow.com/questions/28323590/issue-with-reading-files-in-c", "title": "Issue with reading files in C", "body": "<p>I have written a program to scan numbers from a file line wise, and find the number of occurrences of each number. It works, but only upto 33 lines. If my text file has 34 lines and above, it does not respond. May I know what is the issue, and what needs to be done? \nHere is the code:`</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nint numOfDig(int);\nint numOfLines(FILE*);\nmain()\n{\n  FILE *fp;  \n  char ch;\n  int c,i,flag=1,line=1,numLine;\n  int arr[101];\n  for(i=1;i&lt;101;i++)\n  {\n    arr[i]=0;\n  }  \n  fp = fopen(\"new1.txt\",\"r\");\n  numLine=numOfLines(fp);     \n  fclose(fp);\n  fp=fopen(\"new1.txt\",\"r\");\n  while(line&lt;=numLine)\n  {\n   ch=fgetc(fp);\n    while((ch=fgetc(fp)!=10))\n  {           \n    fscanf(fp,\"%d\",&amp;i);      \n    (arr[i])++;    \n    c=numOfDig(i);    \n      fseek(fp,c-2,SEEK_CUR);        \n  }\n  line++;  \n  }  \n  fclose(fp);  \n  for(i=1;i&lt;101;i++)\n  {\n    if(arr[i]!=0)\n      printf(\"%d = %d\\n\",i,arr[i]);  \n  }  \n  getch();\n}\n\nint numOfDig(int num)\n{\n  int n=0;\n  for(n=0;num&gt;0;num/=10)\n    n++;   \n  return(n);\n}\n\nint numOfLines(FILE *fp)\n{\n  int numLines=0;\n  char ch;\n  do \n  {``\n    ch = fgetc(fp);\n    if(ch == '\\n')\n      numLines++;\n  } while (ch != EOF);\n  printf(\"%d \",numLines);\n  return (numLines);      \n}\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor", "preprocessor-directive"], "comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1423065294, "post_id": 28323539, "comment_id": 44998914, "body": "what do you want to do? remove this directives? get the code between them? just print the lines containing them? get the line numbers?"}, {"owner": {"reputation": 21, "user_id": 4429115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133736dcb1c9bab0e3ebc82e24910ff0?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/4429115/archana"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1423066049, "post_id": 28323539, "comment_id": 44999449, "body": "Basically i need to identify them and even get the lines of code between them."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1423082680, "post_id": 28323539, "comment_id": 45009293, "body": "This answer <a href=\"http://stackoverflow.com/a/4092448/700170\">stackoverflow.com/a/4092448/700170</a> may solve your problem"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4429115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133736dcb1c9bab0e3ebc82e24910ff0?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/4429115/archana"}, "edited": false, "score": 0, "creation_date": 1423140589, "post_id": 28330667, "comment_id": 45033041, "body": "/usr/bin/run.sh: line 4: $&#39;\\r&#39;: command not found /usr/bin/run.sh: line 7: $&#39;\\r&#39;: command not found /usr/bin/run.sh: run.sh: line 34: syntax error near unexpected token <code>elif&#39; &#47;usr&#47;bin&#47;run.sh: run.sh: line 34: </code>    elif [ $elseLineNum -lt $endifLineNum -a &#39;elseLineNum -lt $elifLineNum ]. Can you please help me with it.. I am in windows environment using cygwin to run this script"}, {"owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "reply_to_user": {"reputation": 21, "user_id": 4429115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133736dcb1c9bab0e3ebc82e24910ff0?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/4429115/archana"}, "edited": false, "score": 0, "creation_date": 1423208238, "post_id": 28330667, "comment_id": 45063949, "body": "use dos2unix -ascii run.sh test.h, to convert the windows format to unix format, actually windows and unix have a different way of representing newline character in file. After converting the files run the script"}, {"owner": {"reputation": 21, "user_id": 4429115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133736dcb1c9bab0e3ebc82e24910ff0?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/4429115/archana"}, "edited": false, "score": 0, "creation_date": 1423211279, "post_id": 28330667, "comment_id": 45065194, "body": "I used the command you suggested and i can also confirm something is changing by seeing the last modified date of file after execution of that command. But still i am getting same error.. Any idea what could be the reason?"}, {"owner": {"reputation": 21, "user_id": 4429115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133736dcb1c9bab0e3ebc82e24910ff0?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/4429115/archana"}, "edited": false, "score": 0, "creation_date": 1423568856, "post_id": 28330667, "comment_id": 45192246, "body": "Thanks for all help..I have written my own utility to do this since none of the existing solutions helped me."}], "tags": [], "owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423081583, "last_edit_date": 1423081583, "creation_date": 1423081133, "answer_id": 28330667, "question_id": 28323539, "link": "https://stackoverflow.com/questions/28323539/selective-preprocessing-of-ifdefs-in-c/28330667#28330667", "title": "selective preprocessing of #ifdefs in c", "body": "<p>Try Running the Script, it will print the lines of code and code present inside the #if block.\nThis only scans the file statically. You can give it a try. </p>\n\n<pre><code># ./run.sh filename \"String to search in if\"\n# example ./run.sh test.h \"#if VALUE\"\n\n# Get the line number of Searching string locations\n# store it in a file\nawk \"/$2/{ print NR }\" $1 &gt; temp_if\n\n# to store total lines present inside the if contruct\ntotalLinesCount=0\n\n# read one line at a time, that is go through one occurance of string at a time\nwhile read matchLineNum\ndo\n    printf \"Match Found in line number $matchLineNum\\n\"\n    #search for first occurance of #elif from the matched string.\n    elifLineNum=$(tail -n +$(expr $matchLineNum + 1) $1 | awk \"/#elif/{ print NR;exit }\")\n    if [ \"$elifLineNum\" == \"\" ]\n    then\n        # if not found set it to some high value\n        elifLineNum=$(wc -c $1)\n    fi\n    elseLineNum=$(tail -n +$(expr $matchLineNum + 1) $1 | awk \"/#else/{ print NR;exit }\")\n    if [ \"$elseLineNum\" == \"\" ]\n    then\n        elseLineNum=$(wc -c $1)\n    fi\n    endifLineNum=$(tail -n +$(expr $matchLineNum + 1) $1 | awk \"/#endif/{ print NR;exit }\")\n\n    # check if #endif / #elif / #else occurs first\n    if [ $endifLineNum -lt $elseLineNum -a $endifLineNum -lt $elifLineNum ]\n    then\n        # store the code count\n        totalLinesCount=$(expr $totalLinesCount + $(expr $endifLineNum - 1))\n        # store the code\n        tail -n +$(expr $matchLineNum + 1) $1 | head -n $(expr $endifLineNum - 1) &gt;&gt; out\n\n    elif [ $elseLineNum -lt $endifLineNum -a $elseLineNum -lt $elifLineNum ]\n    then\n        totalLinesCount=$(expr $totalLinesCount + $(expr $elseLineNum - 1))\n        tail -n +$(expr $matchLineNum + 1) $1 | head -n $(expr $elseLineNum - 1) &gt;&gt; out\n\n    elif [ $elifLineNum -lt $elseLineNum -a $elifLineNum -lt $endifLineNum ]\n    then\n        totalLinesCount=$(expr $totalLinesCount + $(expr $elifLineNum - 1))\n        tail -n +$(expr $matchLineNum + 1) $1 | head -n $(expr $elifLineNum - 1) &gt;&gt; out\n\n    else\n        printf \"\\n Error \\n\"\n    fi\ndone &lt; temp_if\nprintf \"\\nTotal number of lines present inside the given condition is $totalLinesCount\\n\"\nrm -f temp_if\nprintf '\\nFinal Extracted Out\\n'\ncat out\nrm -f out\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4429115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133736dcb1c9bab0e3ebc82e24910ff0?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/4429115/archana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423081583, "creation_date": 1423059229, "last_edit_date": 1423059614, "question_id": 28323539, "link": "https://stackoverflow.com/questions/28323539/selective-preprocessing-of-ifdefs-in-c", "title": "selective preprocessing of #ifdefs in c", "body": "<p>I have large .c and .h files from which i have to select only preprocessors directives satisfying these conditions as below</p>\n\n<p><code>#if(VALUE==5) ||(VALUE==6)</code></p>\n\n<p>Rest of  preprocessors directives should remain untouched.I have already looked into <code>unifdef</code> and <code>sunifdef</code> they will allow me to identify <code>#if</code> and <code>#ifdef</code> but i want to chose selectively not all <code>#if</code>, <code>#ifdefs</code>. Is there a utility thats allows me to give, e.g., <code>VALUE==5</code> and chose only those? </p>\n\n<p>Basically I need preprocessor directives selection based on my input value.</p>\n"}, {"tags": ["c", "vtk", "voxel", "paraview"], "comments": [{"owner": {"reputation": 2650, "user_id": 1136458, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48a14b0ebd399307e8a0503f3a70e3c1?s=128&d=identicon&r=PG", "display_name": "lib", "link": "https://stackoverflow.com/users/1136458/lib"}, "edited": false, "score": 0, "creation_date": 1423079910, "post_id": 28323373, "comment_id": 45007745, "body": "since you tagged paraview, you can use the software as reference to see what the file represents (open the file - click the apply button - then in the principal window open a new &quot;spreadsheet&quot; view), as a spreadsheet you see which are the points and the data associated to them"}], "answers": [{"comments": [{"owner": {"reputation": 962, "user_id": 1343278, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eQLei.jpg?s=128&g=1", "display_name": "Jamie Stuart Robin Parsons", "link": "https://stackoverflow.com/users/1343278/jamie-stuart-robin-parsons"}, "edited": false, "score": 0, "creation_date": 1423149232, "post_id": 28331232, "comment_id": 45039087, "body": "Thanks for the reply, the fscanf method is great also (was using strtok_r to split each line up!). How would I use fscanf to split up the header efficiently (to use store the dims in a struct for example). Also (I am new to voxels) so how do the points relate to a co-ordinate? can you give an example I could visualise?"}], "tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 4, "last_activity_date": 1423160306, "last_edit_date": 1495540748, "creation_date": 1423083270, "answer_id": 28331232, "question_id": 28323373, "link": "https://stackoverflow.com/questions/28323373/vtk-structured-point-file/28331232#28331232", "title": "VTK Structured Point file", "body": "<p>You are correct regarding the meaning of fields in the header.\n<code>ORIGIN</code> corresponds to the coordinates of the 0-0-0 corner of the grid. \nAn example of a <code>DATASET STRUCTURED_POINTS</code> can be found in the <a href=\"http://www.vtk.org/VTK/img/file-formats.pdf\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>Starting from this, here is a small file with 6 shorts per point. Each line represents a point.</p>\n\n<pre><code># vtk DataFile Version 2.0\nVolume example\nASCII\nDATASET STRUCTURED_POINTS\nDIMENSIONS 3 4 2\nASPECT_RATIO 1 1 1\nORIGIN 0 0 0\nPOINT_DATA 24\nSCALARS volume_scalars char 6\nLOOKUP_TABLE default\n0 1 2 3 4 5\n1 1 2 3 4 5\n2 1 2 3 4 5\n0 2 2 3 4 5\n1 2 2 3 4 5\n2 2 2 3 4 5\n0 3 2 8 9 10\n1 3 2 8 9 10\n2 3 2 8 9 10\n0 4 2 8 9 10\n1 4 2 8 9 10\n2 4 2 8 9 10\n0 1 3 18 19 20\n1 1 3 18 19 20\n2 1 3 18 19 20\n0 2 3 18 19 20\n1 2 3 18 19 20\n2 2 3 18 19 20\n0 3 3 24 25 26\n1 3 3 24 25 26\n2 3 3 24 25 26\n0 4 3 24 25 26\n1 4 3 24 25 26\n2 4 3 24 25 26\n</code></pre>\n\n<p>The 3 first fields may be displayed to understand the data layout : x change faster than y, which change faster than z in file.</p>\n\n<p>If you wish to store the data in an array <code>a[2][4][3][6]</code>, just read while doing a loop :</p>\n\n<pre><code>for(k=0;k&lt;2;k++){ //z loop  \n  for(j=0;j&lt;4;j++){ //y loop : y change faster than z\n    for(i=0;i&lt;3;i++){ //x loop : x change faster than y \n      for(l=0;l&lt;6;l++){\n         fscanf(file,\"%d\",&amp;a[k][j][i][l]);\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>To read the header, <a href=\"http://www.cplusplus.com/reference/cstdio/fscanf/\" rel=\"nofollow noreferrer\"><code>fscanf()</code></a> may be used as well :</p>\n\n<pre><code>int sizex,sizey,sizez;\nchar headerpart[100];\nfscanf(file,\"%s\",headerpart);\nif(strcmp(headerpart,\"DIMENSIONS\")==0){\n   fscanf(file,\"%d%d%d\",&amp;sizex,&amp;sizey,&amp;sizez);\n}\n</code></pre>\n\n<p>Note than <code>fscanf()</code> need the pointer to the data (<code>&amp;sizex</code>, not <code>sizex</code>). A string being a pointer to an array of char terminated by <code>\\0</code>, <code>\"%s\",headerpart</code> works fine. It can be replaced by <code>\"%s\",&amp;headerpart[0]</code>. The function <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow noreferrer\"><code>strcmp()</code></a> compares two strings, and return <code>0</code> if strings are identical.</p>\n\n<p>As your grid seems large, smaller files can be obtained using the <code>BINARY</code> kind instead of <code>ASCII</code>, but watch for <a href=\"http://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianess</a> as specified <a href=\"https://stackoverflow.com/questions/19377028/are-vtk-files-endian-independent-when-read-in-visualization-softwares-such-as-pa\">here</a>.  </p>\n"}], "owner": {"reputation": 962, "user_id": 1343278, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eQLei.jpg?s=128&g=1", "display_name": "Jamie Stuart Robin Parsons", "link": "https://stackoverflow.com/users/1343278/jamie-stuart-robin-parsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3645, "favorite_count": 0, "accepted_answer_id": 28331232, "answer_count": 1, "score": 1, "last_activity_date": 1423160306, "creation_date": 1423058705, "last_edit_date": 1423060193, "question_id": 28323373, "link": "https://stackoverflow.com/questions/28323373/vtk-structured-point-file", "title": "VTK Structured Point file", "body": "<p>I am trying to parse a VTK file in C by extracting its point data and storing each point in a 3D array. However, the file I am working with has 9 shorts per point and I am having difficulty understanding what each number means. </p>\n\n<p>I believe I understand most of the header information (please correct me if I have misunderstood):</p>\n\n<ul>\n<li>ASCII: Type of file (ASCII or Binary)</li>\n<li>DATASET: Type of dataset</li>\n<li>DIMENSIONS: dims of voxels (x,y,z)</li>\n<li>SPACING: Volume of each voxel (w,h,d)</li>\n<li>ORIGIN: Unsure</li>\n<li>POINT DATA: Total number of points/voxels (dimx.dimy.dimz)</li>\n</ul>\n\n<p>I have looked at the documentation and I am still not getting an understanding on how to interpret the data. Could someone please help me understand or point me to some helpful resources</p>\n\n<pre><code># vtk DataFile Version 3.0\nvtk output\nASCII\nDATASET STRUCTURED_POINTS\nDIMENSIONS 256 256 130\nSPACING 1 1 1.3\nORIGIN 86.6449 -133.929 116.786\nPOINT_DATA 8519680\nSCALARS scalars short\nLOOKUP_TABLE default\n0 0 0 0 0 0 0 0 0 \n0 0 7 2 4 5 3 3 4 \n4 5 5 1 7 7 1 1 2 \n1 6 4 3 3 1 0 4 2 \n2 3 2 4 2 2 0 2 6 \n...\n</code></pre>\n\n<p>thanks.</p>\n"}, {"tags": ["ios", "c", "gcc", "arm", "cross-compiling"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1423182885, "post_id": 28323367, "comment_id": 45056683, "body": "OS X no longer comes with GCC. It comes with <code>clang</code>, and <code>clang</code> does support cross-compiling to iOS. In fact \u2013 just drop the <code>.c</code> files into your project at the same place you would put your <code>.m</code> files. They&#39;ll be compiled just fine along with the Objective-C code (remember, Objective-C is a proper superset of C. If you can cross-compile Objective-C, you can cross-compile C as well.)"}], "answers": [{"comments": [{"owner": {"reputation": 458, "user_id": 3434545, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/8611217/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/3434545/dan"}, "edited": false, "score": 3, "creation_date": 1423229151, "post_id": 28356297, "comment_id": 45074570, "body": "Thanks Marko!  I was able to confirm exactly what you mentioned myself before your post (thanks for confirming regardless!).  I went through and replaced &#39;/bin/gcc&#39; with &#39;xcrun -sdk iphoneos clang -arch armv7&#39; and was able to compile everything for arm.  I know there is a way to make a universal library, which I&#39;ll do next and combine armv7, arm64 and x86 libraries together."}, {"owner": {"reputation": 2272, "user_id": 5562045, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/rWILr.png?s=128&g=1", "display_name": "rustyMagnet", "link": "https://stackoverflow.com/users/5562045/rustymagnet"}, "reply_to_user": {"reputation": 458, "user_id": 3434545, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/8611217/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/3434545/dan"}, "edited": false, "score": 2, "creation_date": 1503209269, "post_id": 28356297, "comment_id": 78515521, "body": "@Dan I have been hunting for that command.  Thanks! <code>xcrun -sdk iphoneos clang -arch armv7 main.c</code>"}], "tags": [], "owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "is_accepted": true, "score": 5, "last_activity_date": 1423268252, "last_edit_date": 1423268252, "creation_date": 1423180740, "answer_id": 28356297, "question_id": 28323367, "link": "https://stackoverflow.com/questions/28323367/compiling-c-source-for-ios/28356297#28356297", "title": "Compiling C Source for iOS", "body": "<p>Whilst GCC supports a good many CPU architecture and platforms, it is usually built for a single one.  To compile for ARM you generally need an ARM-cross-compiling GCC targeted appropriately. </p>\n\n<p>The default system compiler for MacOSX and iOS for all architectures is <code>clang</code> and has been for some time (the last version of GCC apple shipped in dev tools is creaking and obsolete, and definitely won't support ARMv8).</p>\n\n<p>The usual way of getting <code>clang</code> is to install Xcode (free from the App Store). There's a option in the installer (and in the UI of Xcode) to install the command-line tool package.   This installs sym-links in <code>/usr/bin</code> to the compiler, and installs a bunch of other stuff you might expect such as <code>make</code>. </p>\n\n<p><code>clang</code> is (mostly) command-line compatible with <code>gcc</code>, and furthermore, you'll find that if you run <code>gcc</code> from the command-line on a Mac with dev-tools installed, you in fact get clang. </p>\n\n<pre><code>$ gcc --version\nConfigured with: --    prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/c++/4.2.1\nApple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn)\nTarget: x86_64-apple-darwin14.0.0\nThread model: posix \n</code></pre>\n\n<p><code>clang</code> comes with ARMv7, ARMv8, i686, x86_64 on MacOSX, and can be configured to compile for any of these from the command line (See <a href=\"http://clang.llvm.org/docs/\" rel=\"nofollow\">documentation</a>)</p>\n\n<p>Given the above, there's a fair chance your code will compile with minimal changes to compiler-flags using the existing makefile.    You might want to read the documentation for <a href=\"http://www.manpages.info/macosx/lipo.1.html\" rel=\"nofollow\"><code>lipo</code></a> - which allows you to produce multi-architecture binaries. </p>\n"}], "owner": {"reputation": 458, "user_id": 3434545, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/8611217/picture?type=large", "display_name": "Dan", "link": "https://stackoverflow.com/users/3434545/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8694, "favorite_count": 2, "accepted_answer_id": 28356297, "answer_count": 1, "score": 8, "last_activity_date": 1423268252, "creation_date": 1423058686, "question_id": 28323367, "link": "https://stackoverflow.com/questions/28323367/compiling-c-source-for-ios", "title": "Compiling C Source for iOS", "body": "<p>I have some existing source code that is written in C that I want to build and include in my iOS project.  The entire source package is very large and is built using existing Makefiles and GCC.  It is producing static libraries (.a files) that I would love to move over to my iOS project.  However, the static libraries the Makefile produces is for x86 processors, which obviously won't work on iOS.</p>\n\n<p>Is there a way I can switch GCC to build for ARMv7/ARM64 instead, <strong>without making changes to the existing source</strong> (in most cases)?  I know there is the -march switch for GCC or you can download ARM specific GCC compilers, so I know the general concept of building for a different architecture than the build machine.</p>\n\n<p>To build for ARM on Mac OS, will I have to download a different GCC compiler or is that capability built into the default GCC?</p>\n\n<p>I'm sorry for the lack of understanding of basic concepts here; I'm primarily a Java and Objective-C developer, so building source for different architectures is a mostly foreign concept to me.</p>\n"}, {"tags": ["c", "sqlite", "callback"], "comments": [{"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1423059773, "post_id": 28323037, "comment_id": 44995171, "body": "Please fix your code&#39;s indentation. This is painful to read."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1423089823, "post_id": 28323037, "comment_id": 45012853, "body": "What data structure do you want to store the results in? (And why are you using C?)"}, {"owner": {"reputation": 371, "user_id": 3941654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/52a5bbe7c2268117556b9c950ba40d42?s=128&d=identicon&r=PG&f=1", "display_name": "K.K", "link": "https://stackoverflow.com/users/3941654/k-k"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1423115965, "post_id": 28323037, "comment_id": 45020110, "body": "@CL. I am so happy that you noticed this problem. I am actually following your suggestions[<a href=\"http://stackoverflow.com/questions/12984248/sqlite-in-c-c-sqlite3-exec-parameter-set-in-callback-function-is-pointing-to]\" title=\"sqlite in c c sqlite3 exec parameter set in callback function is pointing to%5d\">stackoverflow.com/questions/12984248/&hellip;</a> and [<a href=\"http://stackoverflow.com/questions/14437433/proper-use-of-callback-function-of-sqlite3-in-c?rq=1]\" title=\"proper use of callback function of sqlite3 in c\">stackoverflow.com/questions/14437433/&hellip;</a>  I want to accomplish this in C++. .  kindly follow link to my actual question [<a href=\"http://stackoverflow.com/questions/28213103/error-invalid-conversion-from-int-stdlistmyclass-int-char-char/28249248?noredirect=1#comment44870440_28249248]\" title=\"error invalid conversion from int stdlistmyclass int char char\">stackoverflow.com/questions/28213103/&hellip;</a>"}, {"owner": {"reputation": 371, "user_id": 3941654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/52a5bbe7c2268117556b9c950ba40d42?s=128&d=identicon&r=PG&f=1", "display_name": "K.K", "link": "https://stackoverflow.com/users/3941654/k-k"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1423116316, "post_id": 28323037, "comment_id": 45020239, "body": "@Tim\u010cas I apologise for the indention. I am new to SO. I will fix it. Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1423059107, "last_edit_date": 1423059107, "creation_date": 1423058607, "answer_id": 28323329, "question_id": 28323037, "link": "https://stackoverflow.com/questions/28323037/sqlite-in-c-sqlite3-exec-parameter-set-in-callback-function-prints-incomplete/28323329#28323329", "title": "SQLite in C. sqlite3_exec: parameter set in callback function prints incomplete data when called in main()", "body": "<p>I'm no expert in this, but a simple google search shows, the syntax of <code>sqlite3_exec()</code> is</p>\n\n<pre><code>int sqlite3_exec(\n  sqlite3*,                                  /* An open database */\n  const char *sql,                           /* SQL to be evaluated */\n  int (*callback)(void*,int,char**,char**),  /* Callback function */\n  void *,                                    /* 1st argument to callback */\n  char **errmsg                              /* Error msg written here */\n);\n</code></pre>\n\n<p>Note the 4th parameter, it is suppossed to be a <code>void *</code>.</p>\n\n<p>As per your definition of variables and calling convention,</p>\n\n<pre><code>char *param;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>rc = sqlite3_exec(db, sql, callback, &amp;param, &amp;zErrMsg);\n</code></pre>\n\n<p>you're getting the 4th param wrong. You may want to rewrite it as</p>\n\n<pre><code>rc = sqlite3_exec(db, sql, callback, (void *)param, &amp;zErrMsg);\n</code></pre>\n\n<p>Note: [If not being taken care already by <code>sqlite3_exec()</code>] You may need to allocate memory to <code>param</code> before being passed to <code>sqlite3_exec()</code>. Also, instead of directly passing <code>argv</code> to the callback, you may want to have some sanity and validity check of the same.</p>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 3941654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/52a5bbe7c2268117556b9c950ba40d42?s=128&d=identicon&r=PG&f=1", "display_name": "K.K", "link": "https://stackoverflow.com/users/3941654/k-k"}, "edited": false, "score": 0, "creation_date": 1424069902, "post_id": 28338605, "comment_id": 45386245, "body": "Thank you so much. You input were most helpful"}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 0, "last_activity_date": 1423122085, "last_edit_date": 1495535361, "creation_date": 1423122085, "answer_id": 28338605, "question_id": 28323037, "link": "https://stackoverflow.com/questions/28323037/sqlite-in-c-sqlite3-exec-parameter-set-in-callback-function-prints-incomplete/28338605#28338605", "title": "SQLite in C. sqlite3_exec: parameter set in callback function prints incomplete data when called in main()", "body": "<p>You took the code from <a href=\"https://stackoverflow.com/a/12986575/11654\">an answer</a> where the goal was to read a single result row.\nThe <code>strcpy</code> overwrites the previous value of the <em>same</em> variable.</p>\n\n<p>You should use the <a href=\"https://stackoverflow.com/a/14438228/11654\">cursor-based API</a>, and call <code>sqlite3_step</code> in a loop:</p>\n\n<pre><code>...\nwhile ((rc = sqlite3_step(stmt)) == SQLITE_ROW) {\n    my_object *o = new ...;\n    o-&gt;set_field(sqlite3_column_xxx(stmt, 1);\n    ...\n    my_list.add(o);\n}\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 3941654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/52a5bbe7c2268117556b9c950ba40d42?s=128&d=identicon&r=PG&f=1", "display_name": "K.K", "link": "https://stackoverflow.com/users/3941654/k-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1424069836, "creation_date": 1424069836, "answer_id": 28536022, "question_id": 28323037, "link": "https://stackoverflow.com/questions/28323037/sqlite-in-c-sqlite3-exec-parameter-set-in-callback-function-prints-incomplete/28536022#28536022", "title": "SQLite in C. sqlite3_exec: parameter set in callback function prints incomplete data when called in main()", "body": "<p>working on the suggestions suggested by CL. I started working on writing the code on cursor-based API. And I got the desired output.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sqlite3.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;list&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nclass sqliteDB\n{\n\nprivate:\n  int rc;\n  sqlite3 *db;\n  char *zErrMsg;\n  const char *sql;\n  sqlite3_stmt * stmt;\n  list&lt;string&gt; answer;\n\n\npublic:\n\n//================================XX=====================================//\n  bool connectDB()\n  {\n\n      rc = sqlite3_open(\"/DBsqlite3/foreign_key.db\", &amp;db);\n      if( rc )\n      {\n        cerr &lt;&lt; \"Can't open database: \" &lt;&lt; sqlite3_errmsg(db) &lt;&lt; endl;\n        sqlite3_close(db);\n        exit(1);\n      }\n      else\n      {\n            std::cout&lt;&lt;\"\\n\\nDatabase opened successfully\\n\\n\";\n      }\n   }\n\n//===============================XX=====================================//\n\n  void allEmp()\n  {\n     int AGE;\n\n     //Preparing the statement\n     rc=sqlite3_prepare(db,\"SELECT * FROM emp_info WHERE AGE&gt;40;\", -1, &amp;stmt, NULL ); \n     if (rc != SQLITE_OK){\n     throw string(sqlite3_errmsg(db));\n     }\n     else{\n     cout&lt;&lt;\"\\n\\nThe statement was prepared successfully\\n\\n\";\n     }\n\n    // Creating List Container //\n    cout &lt;&lt; \"\\n\\nList answer was created successfully\\n\\n\";\n    while(sqlite3_step(stmt) == SQLITE_ROW) {\n    cout &lt;&lt; \"Rows\" &lt;&lt; endl;\n\n    int column = sqlite3_column_count(stmt);\n\n       for(int i = 0; i &lt; column; i++)\n       {\n          cout &lt;&lt; \"Columns\" &lt;&lt; endl;\n          answer.push_back(string((const char *) sqlite3_column_text(stmt, i)));\n       }\n     }\n\n    sqlite3_finalize(stmt);\n\n    cout &lt;&lt; \"\\n\\nDatabase was closed successfully\\n\\n\";\n\n }\n\n//==============================XX=====================================//\n\n void printList(){\n    int s = answer.size();\n    for( list&lt;std::string&gt;::const_iterator it = answer.begin(); it != answer.end(); it++)\n      cout &lt;&lt; it-&gt;c_str() &lt;&lt; endl;\n  } \n\n\n//===================================XX===============================//    \n\n};\n\n\nint main()\n{\n  sqliteDB object1;\n  object1.connectDB();\n  object1.allEmp();\n  object1.printList();\n  cout &lt;&lt; \"\\n\\nAll the statement were executed properly\\n\\n\";\n\n return 0;\n}\n\n//========================END OF CODE===========================//\n</code></pre>\n\n<p>The Output is as follows</p>\n\n<pre><code> Database opened successfully\n\n\n\n The statement was prepared successfully\n\n\n\n List answer was created successfully\n\n Rows\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n\n\n Rows\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n\n\n Rows\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n Columns\n\n Database was closed successfully\n\n 7\n GGG\n 41\n MALE\n G1G2G3G4\n 307\n 7777GGG\n 77777\n 9833446677\n abi@gmail.com\n 07:08:1947\n NONE\n 8\n HHH\n 42\n FEMALE\n H1H2H3H4\n 308\n 8888HHH\n 88888\n 9833446688\n abj@gmail.com\n 08:09:1947\n NONE\n 9\n III\n 43\n FEMALE\n I1I2I3I4\n 309\n 9999IIII\n 99999\n 9833446699\n abk@gmail.com\n 09:10:1947\n NONE\n\n\n All the statement were executed properly\n</code></pre>\n\n<p>The major problem I faced was with the overloading of \"&lt;&lt;\" operator. </p>\n\n<p>Thank you CL.</p>\n"}], "owner": {"reputation": 371, "user_id": 3941654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/52a5bbe7c2268117556b9c950ba40d42?s=128&d=identicon&r=PG&f=1", "display_name": "K.K", "link": "https://stackoverflow.com/users/3941654/k-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2430, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1424069836, "creation_date": 1423057721, "last_edit_date": 1423116652, "question_id": 28323037, "link": "https://stackoverflow.com/questions/28323037/sqlite-in-c-sqlite3-exec-parameter-set-in-callback-function-prints-incomplete", "title": "SQLite in C. sqlite3_exec: parameter set in callback function prints incomplete data when called in main()", "body": "<p>I am trying to achieve something very basic. But unfortunately I am unable to get the expected result. </p>\n\n<p>I have a sqlite table named <strong>emp_info</strong>having 9 employee records in following fields:</p>\n\n<p><strong>SR_NO[0], NAME[1], AGE[2], SEX[3], ADDRESS[4], EMPID[5], CARDID[6] and SALARY[7]</strong>.</p>\n\n<p>To access the table and fetch the employee record as per sql query, I have following program in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sqlite3.h&gt; \n#include &lt;string.h&gt;\n\nstatic int callback(void *param, int argc, char *argv[], char **azColName){\n    int i=0;\n\n    if(argc == 0) return 0;\n    char **res = (char **)param;\n    *res = (char *)realloc(*res, sizeof(*res));\n\n  //for(i=0; i&lt;argc; i++){\n  //printf(\"%s = %s\\n\", azColName[i], argv[i] ? argv[i] : \"NULL\");\n\n    strcpy(*res, argv[1], sizeof(*res));\n    printf(\"%s\\n\", *res);\n // }\nreturn 0;\n}\n\nint main(int argc, char* argv[])\n{\nsqlite3 *db;\nchar *zErrMsg = 0;\nint rc;\nchar *sql;\nchar *param;\n\nrc = sqlite3_open(\"/DBsqlite3/foreign_key.db\", &amp;db);\n\n    if( rc )\n    {\n       fprintf(stderr, \"Can't open database: %s\\n\", sqlite3_errmsg(db));\n       exit(0);\n    }\n    else\n    {\n       fprintf(stderr, \"\\nOpened database successfully\\n\\n\");\n    }\n\nsql=\"select * from emp_info;\"\n\nrc = sqlite3_exec(db, sql, callback, &amp;param, &amp;zErrMsg);\n\n    if( rc != SQLITE_OK )\n    {\n      fprintf(stderr, \"SQL error: %s\\n\", zErrMsg);\n      sqlite3_free(zErrMsg);\n    }\n    else\n    {\n       fprintf(stdout, \"Operation done successfully\\n\\n\");\n       printf(\"the value of data is %s \\n\\n\", param);\n    }\n\n\nfree(param);\nsqlite3_close(db);\nreturn 0;\n}\n</code></pre>\n\n<p>The output is as follows:\n`\n    Opened database successfully</p>\n\n<pre><code>AAA\nBBB\nCCC\nDDD\nEEE \nFFF\nGGG\nHHH\nIII\nOperation done successfully\n\nthe value of data is III\n</code></pre>\n\n<p>I expected that all the AAA,BBB,CCC,.... will get stored in <strong>param</strong> and will get printed. But that's not happening. <strong>param</strong> takes only the last record only.</p>\n\n<p>Why is this happening ? I suspect strcpy() is creating the problem.</p>\n\n<p>Kindly help.</p>\n\n<p>Apart from this, my real aim is to get all the valid employee record (as per sql query) to get stored in <strong>param</strong> and it should display all the fields(SR_NO[0], NAME[1], AGE[2], SEX[3], ADDRESS[4], EMPID[5], CARDID[6] and SALARY[7]). say for example if i provide following query to <strong>sql</strong></p>\n\n<pre><code>sql=\"SELECT * FROM emp_info WHERE AGE&gt;40\";\n</code></pre>\n\n<p>then the <strong>param</strong> should display result as follow</p>\n\n<pre><code>7           GGG         41          MALE        G1G2G3G4    307         7777GGG     77777     \n\n8           HHH         42          FEMALE      H1H2H3H4    308         8888HHH     88888\n\n9           III         43          FEMALE      I1I2I3I4    309         9999IIII    99999\n</code></pre>\n\n<p>And not just a column.How can I achieve this ?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1423058009, "post_id": 28322939, "comment_id": 44994065, "body": "Other than doubling until it no longer fits? For what reason are you not using <code>malloc</code>?"}, {"owner": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "edited": false, "score": 4, "creation_date": 1423058081, "post_id": 28322939, "comment_id": 44994112, "body": "You are hitting the stack limit, use <code>malloc</code> and the heap memory."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "edited": false, "score": 0, "creation_date": 1423058824, "post_id": 28322939, "comment_id": 44994574, "body": "@meskobalazs answer time !"}], "answers": [{"comments": [{"owner": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423059698, "post_id": 28323486, "comment_id": 44995121, "body": "I always mix up this with c++, fixed."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 1, "creation_date": 1423065600, "post_id": 28323486, "comment_id": 44999143, "body": "since he defined the array at a file scope and not at a local scope, it should not be placed at the stack."}, {"owner": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1423069943, "post_id": 28323486, "comment_id": 45002228, "body": "@vlad_tepesch It seems I have overlooked that, you are right"}], "tags": [], "owner": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "is_accepted": true, "score": 2, "last_activity_date": 1423060060, "last_edit_date": 1423060060, "creation_date": 1423059099, "answer_id": 28323486, "question_id": 28322939, "link": "https://stackoverflow.com/questions/28322939/maximum-indexing-range-of-float-array/28323486#28323486", "title": "maximum indexing range of float array?", "body": "<p>You are hitting the stack limit with your allocation, you should use <code>malloc</code>, which does the allocation on the heap (a.k.a. dynamic) memory. Then you can use as much memory, as your OS allows you to.</p>\n\n<p>You can use it with the following syntax:</p>\n\n<pre><code>float p[];\np = malloc(85000000 * sizeof(float));\n</code></pre>\n\n<p>There is even a <a href=\"http://en.wikipedia.org/wiki/C_dynamic_memory_allocation\" rel=\"nofollow\">Wikipedia article</a> about <code>malloc</code> and the similar functions.</p>\n\n<p>As a side-note: this type of error is the <a href=\"http://en.wikipedia.org/wiki/Stack_overflow#Very_large_stack_variables\" rel=\"nofollow\">namesake</a> of this very site :)</p>\n"}], "owner": {"reputation": 43, "user_id": 4528658, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001068987317/picture?type=large", "display_name": "Brijesh Kumar", "link": "https://stackoverflow.com/users/4528658/brijesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1423059850, "accepted_answer_id": 28323486, "answer_count": 1, "score": -3, "last_activity_date": 1423060060, "creation_date": 1423057436, "last_edit_date": 1423057831, "question_id": 28322939, "link": "https://stackoverflow.com/questions/28322939/maximum-indexing-range-of-float-array", "closed_reason": "Duplicate", "title": "maximum indexing range of float array?", "body": "<p>I want to simulate mass distribution code for 10^10 particle of unit mass. </p>\n\n<p>But this code works only if number of particle is 10^8.</p>\n\n<pre><code>long par = 85000000;\nfloat p[85000000][2];\n</code></pre>\n\n<p>and this shows error if size goes to 10^9 or 10^10</p>\n\n<ul>\n<li>\"Relocation truncated to fit\"</li>\n</ul>\n\n<p>that is</p>\n\n<pre><code>long par = 85000000;\nfloat p[85000000][2];\n</code></pre>\n\n<p>how to find the maximum possible indexing range of float array?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;sys/time.h&gt;\n\nlong double net[4096][4096];\nint max = 4000;\nlong par = 85000000;\nfloat p[85000000][2];\n\nint main(int argc, char *argv[]) {\n    int i;\n    for( i = 0; i &lt; par/1000; i++) {\n        p[i][0]= ((long double)rand()/(long double)(RAND_MAX) * (long double)max);\n        p[i][1]= ((long double)rand()/(long double)(RAND_MAX) * (long double)max);\n    }\n\n    clock_t begin = clock();\n\n    for ( i = 0; i &lt; par/1000; i++) {\n        double x = p[i][0];\n        double y = p[i][1];\n\n        int left = (int)floor(x);\n        int right = left + 1;\n\n        if ( left &gt;= 4095)\n            printf(\"out of bound left is %d/n\", left);\n\n        int bottom = (int)floor(y);\n        int top = bottom +1;\n\n        double fL = x - left;\n        double fR = 1 - fL;\n\n        double fB = y - bottom;\n        double fT = 1 - fB;\n\n        net[left][bottom]   =   net[left][bottom]   +( fT * fR ) ;\n        net[right][bottom]  =   net[right][bottom]  +( fT * fL ) ;\n        net[left][top]      =   net[left][top]      +( fB * fR ) ;\n        net[right][top]     =   net[right][top]     +( fB * fL ) ;\n    }\n\n    clock_t close = clock();\n\n    FILE *f = fopen(\"file.txt\", \"a\");\n    if (!f) {\n            printf(\"Error opening file!\\n\");\n            exit(1);\n    }\n\n    fprintf (f,\"Computation time for grid size %d X %d and %ld particle is \"\n        \"%4.6lf ,\\n\",max, max,par,(double)(close-begin) );\n\n    fclose(f);\n}\n</code></pre>\n"}, {"tags": ["c", "embedded", "xilinx"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 15, "creation_date": 1423057560, "post_id": 28322914, "comment_id": 44993749, "body": "Looks like an experienced coder who has been burned by compilers before.  That code works even after someone has come along later and changed the uint8_t or changed the definition of uint8_t..."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 7, "creation_date": 1423059013, "post_id": 28322914, "comment_id": 44994677, "body": "Alternatively an artifact of code written before <code>uint8_t</code> was used."}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1423059810, "post_id": 28322914, "comment_id": 44995202, "body": "That coder was looking out for us.  He/she made it obvious that <code>value</code> is intended to be an 8-bit value and we don&#39;t even have to go looking for the declaration."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1423060555, "post_id": 28322914, "comment_id": 44995699, "body": "Xilinx has been around a lot longer than stdint.h"}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1423060952, "post_id": 28323289, "comment_id": 44995977, "body": "By 1-byte I guess you really mean 8-bit. That programmer was very likely bit in the past by a non-8bit char, then later he changed char to uint8_t but kept the mask."}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1423061160, "post_id": 28323289, "comment_id": 44996122, "body": "@user3528438: yes, I also think something like this was what happened. But we may never know..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1423063776, "post_id": 28323289, "comment_id": 44997880, "body": "The conversion back to <code>uint8_t</code> during assignment already ensures that only the last byte of of the value is kept. So I don&#39;t believe this answer is correct. More likely, the masking is there to silence compiler warnings caused by integer promotion. See my answer."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1423076755, "post_id": 28323289, "comment_id": 45006097, "body": "@Lundin : The mask would not suppress a warning, the type of the expression on the right-hand-side of the assignment is <code>int</code>.  You need an explicit cast to suppress a warning (if you even got one; static analysis tools certainly could generate a warning, but most compilers would not).   The mask ensures the intended value regardless of the integral type of value, which may change under maintenance.."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1423152321, "post_id": 28323289, "comment_id": 45041188, "body": "@Clifford I know of at least one compiler (Freescale Codewarrior) that gives such warning, and you can solve it on that compiler with the 0xFF mask. Because then the compiler can tell that the value will never be larger than 255 and therefore optimize away the whole integer promotion. A compiler doesn&#39;t need to perform integer promotion as long as it can deduce that omitting the promotion doesn&#39;t affect the behavior of the program."}], "tags": [], "owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "is_accepted": true, "score": 18, "last_activity_date": 1423061182, "last_edit_date": 1423061182, "creation_date": 1423058450, "answer_id": 28323289, "question_id": 28322914, "link": "https://stackoverflow.com/questions/28322914/why-does-this-code-for-incrementing-an-uint8-t-include-0xff/28323289#28323289", "title": "Why does this code for incrementing an uint8_t include `&amp; 0xFF`?", "body": "<p>My guess is that this code was intended to work correctly even if <code>value</code> is <em>not</em> a 1-byte (8-bit) type. The bitmask <code>0xFF</code> makes sure that only the last byte of the value is kept.</p>\n"}, {"comments": [{"owner": {"reputation": 2820, "user_id": 4306452, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/80bb98fe04e45f8c9f10470b4005ff15?s=128&d=identicon&r=PG&f=1", "display_name": "John-Philip", "link": "https://stackoverflow.com/users/4306452/john-philip"}, "edited": false, "score": 0, "creation_date": 1423075262, "post_id": 28325066, "comment_id": 45005318, "body": "For the sake of completeness, this is called &quot;applying a mask&quot;. By performing a &quot;logical and&quot; operation with 0xFF (255) you are shutting off any bits that would make the value greater than the mask. So this act as incrementing value and reseting it to 255 if it overflows this value."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 2820, "user_id": 4306452, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/80bb98fe04e45f8c9f10470b4005ff15?s=128&d=identicon&r=PG&f=1", "display_name": "John-Philip", "link": "https://stackoverflow.com/users/4306452/john-philip"}, "edited": false, "score": 2, "creation_date": 1423076770, "post_id": 28325066, "comment_id": 45006103, "body": "@user2010913 you mean 0, not 255."}, {"owner": {"reputation": 2820, "user_id": 4306452, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/80bb98fe04e45f8c9f10470b4005ff15?s=128&d=identicon&r=PG&f=1", "display_name": "John-Philip", "link": "https://stackoverflow.com/users/4306452/john-philip"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423077558, "post_id": 28325066, "comment_id": 45006514, "body": "@Quentin, 0xFF is 255, if the value overflows 255 it will always be 255 (not 0)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 2820, "user_id": 4306452, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/80bb98fe04e45f8c9f10470b4005ff15?s=128&d=identicon&r=PG&f=1", "display_name": "John-Philip", "link": "https://stackoverflow.com/users/4306452/john-philip"}, "edited": false, "score": 2, "creation_date": 1423078236, "post_id": 28325066, "comment_id": 45006899, "body": "@user2010913 If the value gets to 0x100 (256) the 1 will be cut off, sot it wraps back to 0. Or am I nuts ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2820, "user_id": 4306452, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/80bb98fe04e45f8c9f10470b4005ff15?s=128&d=identicon&r=PG&f=1", "display_name": "John-Philip", "link": "https://stackoverflow.com/users/4306452/john-philip"}, "edited": false, "score": 0, "creation_date": 1423078803, "post_id": 28325066, "comment_id": 45007197, "body": "@user2010913 That&#39;s completely incorrect... It is <i>bitwise/binary</i> AND. The decimal value doesn&#39;t mean a thing, it merely masks out the eight least significant bits of the value. If any of the eight lsbs of value are binary ones, they will be preserved. If there are any binary ones outside the 8 lsbs, they will be discarded. This is (should be) really fundamental stuff... no explanation should be need, you should be able to safely assume that a C programmer understands binary arithmetic."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423080344, "post_id": 28325066, "comment_id": 45008005, "body": "A better way to silence that warning is <code>++value;</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423120357, "post_id": 28325066, "comment_id": 45021747, "body": "@BenVoigt Won&#39;t make any difference, <code>value</code> will still get integer promoted."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423121847, "post_id": 28325066, "comment_id": 45022369, "body": "@Lundin No it won&#39;t. The usual arithmetic conversions are not performed for increment."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423122654, "post_id": 28325066, "comment_id": 45022751, "body": "@BenVoigt I referred to the integer promotion rules, not &quot;the usual&quot;. But I just double-checked, apparently integer promotion is indeed not used during ++, while it is used in all other cases of unary operators (+ - ~ ! etc). Yet another inconsistency in the C language. Still, I wouldn&#39;t count on the average C programmer to be aware of such subtle details."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423124296, "post_id": 28325066, "comment_id": 45023528, "body": "It&#39;s not an inconsistency. All those other operators read their operands only. Increment and decrement modify the operand. Promotions and conversions (which result in rvalues) are never applied to an operand that is modified (must be an lvalue). Perfectly consistent across all the forms of assignment and compound assignment (increment effectively is a compound assignment, <code>value += 1;</code>)"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 10, "last_activity_date": 1423064058, "last_edit_date": 1495540702, "creation_date": 1423063649, "answer_id": 28325066, "question_id": 28322914, "link": "https://stackoverflow.com/questions/28322914/why-does-this-code-for-incrementing-an-uint8-t-include-0xff/28325066#28325066", "title": "Why does this code for incrementing an uint8_t include `&amp; 0xFF`?", "body": "<p>This kind of code is common when you want to avoid problems with <a href=\"https://stackoverflow.com/questions/17312545/type-conversion-unsigned-to-signed-int-char/17312930#17312930\">implicit type promotions</a>, or when you simply wish to demonstrate that you have considered implicit promotions when you wrote the code, which is good programming practice.</p>\n\n<p><code>uint8_t</code> is a small integer type and therefore always promoted to <code>int</code> whenever you use it in an expression. The result of <code>(value + 1)</code> is always <code>int</code>.</p>\n\n<p>Without the masking, some compilers give warnings such as \"attempting to store int in uint8_t\". I've encountered such warnings on several compilers. Theoretically <code>int &amp; 0xFF</code> is still an int, but since it cannot have a value larger than 0xFF, the compiler is likely able to optimize the type down to uint8_t and the warning will go away.</p>\n\n<p>Alternatively you could write <code>value = (uint8_t)(value + 1u);</code> which has the same meaning (but is a MISRA-C compatible version of the code).</p>\n"}], "owner": {"reputation": 1119, "user_id": 2515198, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2fab23c172a58b3a22fb6ac0dd0be0d1?s=128&d=identicon&r=PG", "display_name": "TheFisherman", "link": "https://stackoverflow.com/users/2515198/thefisherman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2841, "favorite_count": 0, "accepted_answer_id": 28323289, "answer_count": 2, "score": 18, "last_activity_date": 1611783571, "creation_date": 1423057374, "last_edit_date": 1423058095, "question_id": 28322914, "link": "https://stackoverflow.com/questions/28322914/why-does-this-code-for-incrementing-an-uint8-t-include-0xff", "title": "Why does this code for incrementing an uint8_t include `&amp; 0xFF`?", "body": "<p>When reading through some example codes for DMAs from Xilinx, I came across this piece of code:</p>\n\n<pre><code>value = (value + 1) &amp; 0xFF\n</code></pre>\n\n<p>where value is an uint8_t.</p>\n\n<p>What is the point of the <code>&amp; 0xFF</code>? Why not simply write <code>value = value + 1</code>?</p>\n"}, {"tags": ["c", "if-statement", "scanf"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1423057401, "post_id": 28322838, "comment_id": 44993624, "body": "You should always test the result of <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\">scanf(3)</a> which gives the number of <i>successfully scanned items</i>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1423058046, "post_id": 28322838, "comment_id": 44994090, "body": "BTW, don&#39;t forget to compile with all warnings &amp; debug info (e.g. <code>gcc -Wall -Wextra -g</code>) then <b>use the debugger</b> (<code>gdb</code>)"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1423059956, "post_id": 28322838, "comment_id": 44995293, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1669821/scanf-skips-every-other-while-loop-in-c\">Scanf skips every other while loop in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4475299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Sgic9.jpg?s=128&g=1", "display_name": "Sharad Gaur", "link": "https://stackoverflow.com/users/4475299/sharad-gaur"}, "edited": false, "score": 0, "creation_date": 1423062058, "post_id": 28322874, "comment_id": 44996736, "body": "Thankyou. I have one more doubt. Why int main() instead of void main(). I&#39;m confused with return(0) , and i searched about return many times but still not getting the perfect answer. same here why are we using return(0) here ?"}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "reply_to_user": {"reputation": 131, "user_id": 4475299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Sgic9.jpg?s=128&g=1", "display_name": "Sharad Gaur", "link": "https://stackoverflow.com/users/4475299/sharad-gaur"}, "edited": false, "score": 0, "creation_date": 1423110856, "post_id": 28322874, "comment_id": 45018605, "body": "@SharadGaur - There are not only operating systems&#39; architecture which vary but also hardware platform architecture. Hence to keep a standardized way of writing code <code>C</code> and <code>C++</code> were standardized by ISO. They mandate that <code>main</code> should return <code>int</code>"}], "tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": true, "score": 3, "last_activity_date": 1423057942, "last_edit_date": 1495542607, "creation_date": 1423057270, "answer_id": 28322874, "question_id": 28322838, "link": "https://stackoverflow.com/questions/28322838/im-not-able-to-use-scanf-in-else-statment/28322874#28322874", "title": "I&#39;m not able to use scanf() in else statment", "body": "<p>When you enter the data in the first read of this scanf:</p>\n\n<pre><code>scanf(\"%c\", &amp;ms);\n</code></pre>\n\n<p>A newline character remains in the keyboard. To solve this put a space in your second scanf:</p>\n\n<pre><code>scanf(\" %c\",&amp;s);\n</code></pre>\n\n<p>This is to consume any trailing character in the <code>stdin</code> that might have been left by previous user input (like the <code>carriage return</code>), before the <code>scanf</code> reads the user input. Also note that you missed the <code>&amp;</code> in <code>scanf(\"%d\",age);</code>:</p>\n\n<p>Also note <a href=\"https://stackoverflow.com/questions/19419569/how-does-the-main-method-work-in-c/19419617#19419617\"><code>main</code> should return <code>int</code></a>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()    \n{   \n    int age;    \n    char s,ms;    \n    printf(\"Please enter M if you are married or U if you are un-married\\n\");    \n    scanf(\"%c\", &amp;ms);        \n    if(ms=='M')    \n        printf(\"\\nyou are recruted\");    \n    else if(ms=='U')  \n    {    \n        printf(\"\\nenter sex- A for male &amp; B for female\\n\");\n        scanf(\" %c\",&amp;s);    \n        if(s=='A')   \n        {    \n            printf(\"\\nEnter your age\\n\");    \n            scanf(\"%d\",&amp;age);    \n            if(age&gt;30)    \n                printf(\"\\nYou are selected\");    \n            else    \n                printf(\"\\nYour age is less for this job\");    \n        }    \n        else if(s=='B')    \n        {    \n            printf(\"\\nEnter your age\\n\");    \n            scanf(\"%d\",&amp;age);    \n            if(age&gt;25)    \n                printf(\"\\nyou are recruted\");    \n            else    \n                printf(\"\\nyour age is less to be recruted\");    \n        }    \n        else    \n        {    \n            printf(\"Please enter A for male or B for female\");    \n        }    \n    }\n    else    \n    {    \n        printf(\"PLEASE ENTER THE CORRECT VALUE\\n please enter M for Married or U for un-married\");    \n    }    \n    getchar();    \n    return 0;\n}\n</code></pre>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/26391465/why-is-adding-a-leading-space-in-a-scanf-format-string-recommended\"><code>Why is adding a leading space in a scanf format string recommended?</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1423057502, "post_id": 28322915, "comment_id": 44993706, "body": "What about the newline left in the buffer?"}], "tags": [], "owner": {"reputation": 3366, "user_id": 2193418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12788df365569bd764b6c51f7ed22199?s=128&d=identicon&r=PG&f=1", "display_name": "lqhcpsgbl", "link": "https://stackoverflow.com/users/2193418/lqhcpsgbl"}, "is_accepted": false, "score": 0, "last_activity_date": 1423057945, "last_edit_date": 1423057945, "creation_date": 1423057377, "answer_id": 28322915, "question_id": 28322838, "link": "https://stackoverflow.com/questions/28322838/im-not-able-to-use-scanf-in-else-statment/28322915#28322915", "title": "I&#39;m not able to use scanf() in else statment", "body": "<p>You forget to add a <code>&amp;</code> when input the age value and you can use <code>getchar()</code> to deal the new line in buffer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int age;\n    char s,ms;\n    printf(\"Please enter M if you are married or U if you are un-marriedn\");\n    scanf(\"%c\", &amp;ms);\n    getchar();       // deal with thre newline in buffer\n    if(ms=='M')\n    printf(\"nyou are recruted\");\n    else if(ms=='U')\n    {\n        printf(\"nenter sex- A for male &amp; B for femalen\");\n        scanf(\"%c\",&amp;s);\n        getchar();    // deal with thre newline in buffer\n        if(s=='A')\n        {\n            printf(\"nEnter your agen\");\n            scanf(\"%d\",&amp;age);    // add &amp; when you use scanf\n            if(age&gt;30)\n            printf(\"nYou are selected\");\n            else\n            printf(\"nYour age is less for this job\");\n        }\n        else if(s=='B')\n        {\n            printf(\"nEnter your agen\");\n            scanf(\"%d\",&amp;age); // add &amp; when you use scanf\n            if(age&gt;25)\n            printf(\"nyou are recruted\");\n            else\n            printf(\"nyour age is less to be recruted\");\n        }\n        else\n        {\n            printf(\"Please enter A for male or B for female\");\n        }\n    }\n    else\n    {\n        printf(\"PLEASE ENTER THE CORRECT VALUEn please enter M for Married or U for un-married\");\n    }\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Besides, <code>int main()</code> and <code>return 0;</code> is better.</p>\n"}], "owner": {"reputation": 131, "user_id": 4475299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Sgic9.jpg?s=128&g=1", "display_name": "Sharad Gaur", "link": "https://stackoverflow.com/users/4475299/sharad-gaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28322874, "answer_count": 2, "score": 0, "last_activity_date": 1423058521, "creation_date": 1423057119, "last_edit_date": 1423058521, "question_id": 28322838, "link": "https://stackoverflow.com/questions/28322838/im-not-able-to-use-scanf-in-else-statment", "title": "I&#39;m not able to use scanf() in else statment", "body": "<p>can we use scanf() function in else , like i used in this code.\nBec i'm not able to enter value(char) for sex variable.\nso i want to why i'm not able to enter the value for sex variable ?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nvoid main()\n{\n    clrscr();\n\n    int age;\n    char s,ms;\n\n    printf(\"Please enter M if you are married or U if you are un-married\\n\");\n    scanf(\"%c\", &amp;ms);\n\n    if(ms=='M')\n        printf(\"\\nyou are recruted\");\n    else if(ms=='U')\n    {\n        printf(\"\\nenter sex- A for male &amp; B for female\\n\");\n        scanf(\"%c\",&amp;s);\n\n        if(s=='A')\n        {\n            printf(\"\\nEnter your age\\n\");\n            scanf(\"%d\",age);\n\n            if(age&gt;30)\n                printf(\"\\nYou are selected\");\n            else\n                printf(\"\\nYour age is less for this job\");\n        }\n        else if(s=='B')\n        {\n            printf(\"\\nEnter your age\\n\");\n            scanf(\"%d\",age);\n\n            if(age&gt;25)\n                printf(\"\\nyou are recruted\");\n            else\n                printf(\"\\nyour age is less to be recruted\");\n        }\n        else\n        {\n            printf(\"Please enter A for male or B for female\");\n        }\n    }\n    else\n    {\n        printf(\"PLEASE ENTER THE CORRECT VALUE\\n please enter M for Married or U for un-married\");\n    }\n    getch();\n}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>Please enter M if you are married or U if you are un-married\nU\nenter sex A for male or B for female\nPlease enter A for male or B for female\n</code></pre>\n"}, {"tags": ["c", "linux", "gtk"], "answers": [{"tags": [], "owner": {"reputation": 7536, "user_id": 771066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d207f95c530f2b59f763d7b699f6d81?s=128&d=identicon&r=PG", "display_name": "ebassi", "link": "https://stackoverflow.com/users/771066/ebassi"}, "is_accepted": false, "score": 1, "last_activity_date": 1423082064, "creation_date": 1423082064, "answer_id": 28330915, "question_id": 28322773, "link": "https://stackoverflow.com/questions/28322773/gtk-vb-ole-object/28330915#28330915", "title": "Gtk VB OLE object", "body": "<p>On X11, you can use <code>GtkPlug</code> and <code>GtkSocket</code> to embed a foreign window inside your application. You will have to establish a protocol for obtaining the XID of the application window, for instance by using DBus.</p>\n\n<p>In practice, though, this behaviour is highly discouraged, as it's not portable.</p>\n\n<p>If you want to view a PDF, you can use Poppler (which is what Evince uses), or you can re-use the Evince UI components, which Evince exposes as a library: <a href=\"https://developer.gnome.org/evince/3.14/\" rel=\"nofollow\">https://developer.gnome.org/evince/3.14/</a></p>\n\n<p>If you want the text editing capabilities of gedit, you can use <code>GtkSourceView</code>: <a href=\"https://developer.gnome.org/gtksourceview/3.14/\" rel=\"nofollow\">https://developer.gnome.org/gtksourceview/3.14/</a></p>\n\n<p>In general, many GNOME and GTK+ applications are componentized and based on shared libraries that other applications can re-use.</p>\n"}], "owner": {"reputation": 33, "user_id": 3433566, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac5d69c765a89295f619997c1e599552?s=128&d=identicon&r=PG&f=1", "display_name": "hrlinc", "link": "https://stackoverflow.com/users/3433566/hrlinc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423082064, "creation_date": 1423056900, "question_id": 28322773, "link": "https://stackoverflow.com/questions/28322773/gtk-vb-ole-object", "title": "Gtk VB OLE object", "body": "<p>visual basic ole(Object Linking and Embedding) allows programmer to run external program inside the program. Dose gtk have something like that? which let me run another gtk program like evince, gedit, etc inside main. \nactually I want to draw empty window then open gedit inside my window.</p>\n"}, {"tags": ["c", "linux", "event-handling", "x11", "xcb"], "comments": [{"owner": {"reputation": 305, "user_id": 3638059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27c55f748701b356db78a5cee5b0bd8d?s=128&d=identicon&r=PG&f=1", "display_name": "jdk1.0", "link": "https://stackoverflow.com/users/3638059/jdk1-0"}, "edited": false, "score": 0, "creation_date": 1599214923, "post_id": 28322442, "comment_id": 112711733, "body": "I think you can access /dev/input/* directly (using <code>ioctl</code>) to get that info for every window if you have <code>root</code> access.  I was able to open an <code>evevt*</code> file, and read keyboard presses.  <a href=\"https://cboard.cprogramming.com/linux-programming/166412-intercepting-usb-traffic-generated-mouse.html\" rel=\"nofollow noreferrer\">Possibly helpful reference for mouse</a>"}, {"owner": {"reputation": 601, "user_id": 4414935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c21256ef2c8fe05d838dfe5a0699dc4?s=128&d=identicon&r=PG", "display_name": "jarno", "link": "https://stackoverflow.com/users/4414935/jarno"}, "edited": false, "score": 0, "creation_date": 1601218434, "post_id": 28322442, "comment_id": 113331540, "body": "I think you have to use the Xinput2 extension. That is what <code>xinput --test-xi2 --root</code> does, but for some reason only one instance of <code>xinput</code> may be running. Does <a href=\"https://stackoverflow.com/q/39363761/4414935\">this</a> help?"}], "answers": [{"comments": [{"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 0, "creation_date": 1457763829, "post_id": 28351174, "comment_id": 59564954, "body": "Wow very deep answer. I think this might be the solution to a problem I&#39;m having. May you please take a look at my topic and see if this solution you posted here fits me? Thank you so much my question is here - <a href=\"http://stackoverflow.com/questions/35906243/no-error-on-xcb-grab-key-but-event-loop-not-catching-global-hotkey\" title=\"no error on xcb grab key but event loop not catching global hotkey\">stackoverflow.com/questions/35906243/&hellip;</a>"}, {"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 0, "creation_date": 1457766845, "post_id": 28351174, "comment_id": 59565563, "body": "The reason I ask is because when I tried your code I keep getting a non-null value for <code>xcb_poll_for_event</code> telling me error &quot;another window manager is already running&quot;."}, {"owner": {"reputation": 2946, "user_id": 1002965, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EHzyL.jpg?s=128&g=1", "display_name": "cedlemo", "link": "https://stackoverflow.com/users/1002965/cedlemo"}, "reply_to_user": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 1, "creation_date": 1457773624, "post_id": 28351174, "comment_id": 59567048, "body": "I have tested it just 2 minutes ago to be sure but no everything went fine for me, the compilation and the execution. Did you follow the instruction,s I meen using Xephyr to create a new display &quot;:1&quot; and launch the simple_window_manager on it ?"}, {"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 0, "creation_date": 1457781008, "post_id": 28351174, "comment_id": 59569180, "body": "Ah thank you very much, I realize now this is not my solution, I&#39;m not needing to createa a new display, I&#39;m just trying to get the events of the current display. :( Thanks for your reply in my other topic Ill reply there as well :)"}], "tags": [], "owner": {"reputation": 2946, "user_id": 1002965, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EHzyL.jpg?s=128&g=1", "display_name": "cedlemo", "link": "https://stackoverflow.com/users/1002965/cedlemo"}, "is_accepted": false, "score": 10, "last_activity_date": 1423160242, "creation_date": 1423160242, "answer_id": 28351174, "question_id": 28322442, "link": "https://stackoverflow.com/questions/28322442/xcb-get-events-of-all-windows-x-org/28351174#28351174", "title": "XCB get events of all windows X.Org", "body": "<p>So if you want to capture all the buttons events, I have just a solution but I don't know if this could fit your needs. </p>\n\n<p>Its like a little window manager here is 4 files:</p>\n\n<ul>\n<li>simple_window_manager.c</li>\n<li>events.c</li>\n<li>events.h</li>\n<li>Makefile</li>\n</ul>\n\n<p><em>simple_window_manager.c</em></p>\n\n<pre><code>#include &lt;xcb/xcb.h&gt;\n#include &lt;xcb/xcb_event.h&gt;\n#include &lt;xcb/xcb_aux.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"events.h\"\n\nxcb_connection_t * connection;\n\nint main (int argc, char **argv)\n{\n  xcb_screen_t      *screen;\n\n  /*open connection and check for error*/\n  connection = xcb_connect( NULL, NULL);\n\n  printf(\"launch connection\");\n\n    if (xcb_connection_has_error(connection))\n  {\n    perror(\"cannot open display\\n\");\n    exit(1);\n  }\n\n  /*get first screen*/\n  screen = xcb_setup_roots_iterator(xcb_get_setup(connection)).data;\n\n  /*define the application as window manager*/\n    const uint32_t select_input_val[] =\n    {\n        XCB_EVENT_MASK_SUBSTRUCTURE_REDIRECT | XCB_EVENT_MASK_SUBSTRUCTURE_NOTIFY\n        | XCB_EVENT_MASK_ENTER_WINDOW | XCB_EVENT_MASK_LEAVE_WINDOW\n        | XCB_EVENT_MASK_STRUCTURE_NOTIFY | XCB_EVENT_MASK_PROPERTY_CHANGE\n        | XCB_EVENT_MASK_BUTTON_PRESS | XCB_EVENT_MASK_BUTTON_RELEASE\n        | XCB_EVENT_MASK_FOCUS_CHANGE\n    };\n    xcb_change_window_attributes(connection,\n                                 screen-&gt;root,\n                                 XCB_CW_EVENT_MASK, select_input_val);\n    /* Need to xcb_flush to validate error handler */\n  xcb_aux_sync(connection);\n\n    if (xcb_poll_for_event(connection) != NULL)\n    {\n        perror(\"another window manager is already running\");\n        exit(1);\n    };\n\n  /*flush all request*/\n  xcb_flush(connection);\n\n  xcb_generic_event_t *the_events;\n  int done; \n\n    /*enter the main loop*/\n  done = 0;\n  while (!done &amp;&amp; (the_events = xcb_wait_for_event(connection)))\n  {\n    switch(the_events-&gt;response_type)\n    {\n      /*(re)draw the window*/\n      case XCB_EXPOSE:\n        printf (\"EXPOSE\\n\");\n        break;\n      /*exit on keypress*/\n      case XCB_KEY_PRESS:\n        done = 1;\n        break;\n      default:\n        event_management(the_events);\n        printf(\"The events = %s\\n\",xcb_event_get_label(the_events-&gt;response_type));\n    }\n    free(the_events);\n  }\n  /*close connection to server*/\n  xcb_disconnect(connection);\n  return 0;\n}\n</code></pre>\n\n<p><em>events.c</em></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;xcb/xcb.h&gt;\n#include &lt;xcb/xcb_util.h&gt;\n#include \"events.h\"\n\n\nstatic void button_press_management(xcb_button_press_event_t * event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void button_release_management(xcb_button_release_event_t * event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void configure_request_management(xcb_configure_request_event_t * event)\n{\n    uint16_t config_win_mask = 0;\n  uint32_t config_win_vals[7];\n  unsigned short i = 0;\n\nif(event-&gt;value_mask &amp; XCB_CONFIG_WINDOW_X)\n    {\n        config_win_mask |= XCB_CONFIG_WINDOW_X;\n        config_win_vals[i++] = 300;\n        printf(\" XCB_CONFIG_WINDOW_X\\n\");\n    }\n    if(event-&gt;value_mask &amp; XCB_CONFIG_WINDOW_Y)\n    {\n        config_win_mask |= XCB_CONFIG_WINDOW_Y;\n        config_win_vals[i++] = 300;\n        printf(\" XCB_CONFIG_WINDOW_Y\\n\");\n    }\n    if(event-&gt;value_mask &amp; XCB_CONFIG_WINDOW_WIDTH)\n    {\n        config_win_mask |= XCB_CONFIG_WINDOW_WIDTH;\n        config_win_vals[i++] = event-&gt;width;\n        printf(\" XCB_CONFIG_WINDOW_WIDTH\\n\");\n    }\n    if(event-&gt;value_mask &amp; XCB_CONFIG_WINDOW_HEIGHT)\n    {\n        config_win_mask |= XCB_CONFIG_WINDOW_HEIGHT;\n        config_win_vals[i++] = event-&gt;height;\n        printf(\"XCB_CONFIG_WINDOW_HEIGHT\");\n    }\n    if(event-&gt;value_mask &amp; XCB_CONFIG_WINDOW_BORDER_WIDTH)\n    {\n        config_win_mask |= XCB_CONFIG_WINDOW_BORDER_WIDTH;\n        config_win_vals[i++] = event-&gt;border_width;\n        printf(\" XCB_CONFIG_WINDOW_BORDER_WIDTH\\n\");\n    }\n    if(event-&gt;value_mask &amp; XCB_CONFIG_WINDOW_SIBLING)\n    {\n        config_win_mask |= XCB_CONFIG_WINDOW_SIBLING;\n        config_win_vals[i++] = event-&gt;sibling;\n        printf(\" XCB_CONFIG_WINDOW_SIBLING\\n\");\n    }\n    if(event-&gt;value_mask &amp; XCB_CONFIG_WINDOW_STACK_MODE)\n    {\n        config_win_mask |= XCB_CONFIG_WINDOW_STACK_MODE;\n        config_win_vals[i++] = event-&gt;stack_mode;\n        printf(\" XCB_CONFIG_WINDOW_STACK_MODE\\n\");\n    }\n\n  xcb_configure_window(connection, event-&gt;window, config_win_mask, config_win_vals);\n  xcb_flush(connection);\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void client_message_management(xcb_client_message_event_t * event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void expose_management(xcb_expose_event_t *event)\n{\n        printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void focus_in_management(xcb_focus_in_event_t *event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void key_press_management(xcb_key_press_event_t *event)\n{\n\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void key_release_management(xcb_key_release_event_t *event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void motion_notify_management(xcb_motion_notify_event_t * event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void map_request_management(xcb_map_request_event_t * event)\n{\n  xcb_map_window(connection, event-&gt;window);\n  xcb_flush(connection);\n  xcb_grab_button(connection,0, event-&gt;window,XCB_EVENT_MASK_BUTTON_PRESS, XCB_GRAB_MODE_ASYNC, XCB_GRAB_MODE_ASYNC, XCB_NONE, XCB_NONE, XCB_BUTTON_INDEX_ANY, XCB_MOD_MASK_ANY);\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void mapping_notify_management(xcb_motion_notify_event_t * event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void reparent_notify_management(xcb_reparent_notify_event_t * event)\n{\n\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void unmap_notify_management(xcb_unmap_notify_event_t * event)\n{\n\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void enter_notify_management(xcb_enter_notify_event_t * event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\nstatic void leave_notify_management(xcb_leave_notify_event_t * event)\n{\n    printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n}\n\nvoid event_management(xcb_generic_event_t *event)\n{   \n    uint8_t response_type = XCB_EVENT_RESPONSE_TYPE(event);\n\n    if(response_type == 0)\n        {\n      /* This is an error, not a event */\n      perror(\"response_type = 0\");\n      return;\n      }\n\n    switch(response_type)\n        {\n            case XCB_BUTTON_PRESS:\n                button_press_management((void *) event);\n                break;\n            case XCB_BUTTON_RELEASE:\n                button_release_management((void *)event);\n                break;\n            case XCB_CONFIGURE_REQUEST:\n                configure_request_management((void *)event);\n                break;\n            case XCB_CLIENT_MESSAGE:\n                client_message_management((void *)event);\n                break;\n            case XCB_EXPOSE:\n                expose_management((void *)event);\n                break;\n            case XCB_FOCUS_IN:\n                focus_in_management((void *)event);\n                break;\n            case XCB_KEY_PRESS:\n                key_press_management((void *)event);\n                break;\n            case XCB_KEY_RELEASE:\n                key_release_management((void *)event);\n                break;\n            case XCB_MAP_REQUEST:\n                map_request_management((void *)event);\n                break;\n            case XCB_MAPPING_NOTIFY:\n                mapping_notify_management((void *)event);\n                break;case XCB_MOTION_NOTIFY:\n                motion_notify_management((void *)event);\n                break;\n            case XCB_REPARENT_NOTIFY:\n                reparent_notify_management((void *)event);\n                break;\n            case XCB_UNMAP_NOTIFY:\n                unmap_notify_management((void *)event);\n                break;\n            case XCB_ENTER_NOTIFY:\n                enter_notify_management((void *)event);\n                break;\n            case XCB_LEAVE_NOTIFY:\n                leave_notify_management((void *)event);\n                break;\n            default:\n                printf(\"event = %s\\n\",xcb_event_get_label(event-&gt;response_type));   \n                printf(\"%d\\n\",response_type);\n                perror(\"this kind of event is not managed\\n\");\n                break;\n        }\n}\n</code></pre>\n\n<p><em>events.h</em></p>\n\n<pre><code>#include &lt;xcb/xcb.h&gt;\nextern xcb_connection_t * connection;\nvoid event_management(xcb_generic_event_t *);\n</code></pre>\n\n<p><em>Makefile</em></p>\n\n<pre><code>CC = gcc \nCFLAGS = -Wall\nEXEC_NAME = simple_window_manager \nINCLUDES = \nLIBS =-lxcb -lxcb-util\nOBJ_FILES = simple_window_manager.o events.o\nINSTALL_DIR = ./my_exec/\n\nall : $(EXEC_NAME)\nclean :\n    rm $(EXEC_NAME) $(OBJ_FILES)\n\n$(EXEC_NAME) : $(OBJ_FILES)\n    $(CC) -o $(EXEC_NAME) $(OBJ_FILES) $(LIBS)\n\n%.o: %.c\n    $(CC) $(CFLAGS) $(INCLUDES) -o $@ -c $&lt;\n\ninstall :\n    cp $(EXEC_NAME) $(INSTALL_DIR)$(EXEC_NAME)\n</code></pre>\n\n<p>Copy those 4 files, run </p>\n\n<pre><code>Makefile\n</code></pre>\n\n<p>then try this in a shell session (I will explain why after):</p>\n\n<pre><code>Xephyr -br -noreset -screen \"1024x640\" :1&amp;\nDISPLAY=:1.0 ./simple_window_manager&amp;\nDISPLAY=:1.0 gnome-calculator #for example\n</code></pre>\n\n<p>In order to get all the events to the root window, you have to configure the root window like if your application is a window manager. But it can be only one window manager that is the reason why simple_window_manager cannot be run under gnome or kde for example. You have to use Xephyr for your test.</p>\n\n<p>That is the only way I know to get all the events. I am not an expert, I hope this can help you.</p>\n"}], "owner": {"reputation": 71, "user_id": 4528683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c0979582b0e1cbc7c6a7f0d9787cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Beneter", "link": "https://stackoverflow.com/users/4528683/beneter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3819, "favorite_count": 6, "answer_count": 1, "score": 7, "last_activity_date": 1423160242, "creation_date": 1423055927, "last_edit_date": 1423060322, "question_id": 28322442, "link": "https://stackoverflow.com/questions/28322442/xcb-get-events-of-all-windows-x-org", "title": "XCB get events of all windows X.Org", "body": "\n\n<p>I'm currently working on a latency test for Linux. For minimizing side effects I try to write a C-program which directly accesses the X-Server with XCB.\nBecause not having any experience in C, but only in Java, nor in XCB, I ran into a few difficulties.</p>\n\n<p>Everything the application should do is to show a white frame and if the button of the mouse is pressed at any time (outside the window), it should change to black in an instant.\nThe test-application doesn't have to be beautiful or safe in any way but only react fast. It is just used for this one test (please don't judge my crappy style ;-) ).</p>\n\n<p>The mouse can not be in the same window, because there is another independent application which also needs to process the event (the one measuring the latency).</p>\n\n<hr>\n\n<p>After reading <a href=\"http://xcb.freedesktop.org/tutorial/events/\" rel=\"noreferrer\">the XCB tutorial</a> I have modified the sample code to open a window and log the mouse clicks inside the window:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;xcb/xcb.h&gt;\n\nmain ()\n{\n    /* Open the connection to the X server */\n    xcb_connection_t *connection = xcb_connect (NULL, NULL);\n\n    /* Get the first screen */\n    xcb_screen_t *screen = xcb_setup_roots_iterator (xcb_get_setup (connection)).data;\n\n    /* Create black (foreground) graphic context */\n    xcb_drawable_t  window;\n    uint32_t        mask;\n    uint32_t        values[2];\n\n    /* Create a window */\n    window = xcb_generate_id (connection);\n\n    mask = XCB_CW_BACK_PIXEL | XCB_CW_EVENT_MASK;\n    values[0] = screen-&gt;white_pixel;\n    values[1] = XCB_EVENT_MASK_BUTTON_PRESS;\n\n    xcb_create_window (connection, XCB_COPY_FROM_PARENT, window, screen-&gt;root, 0, 0, 500, 500, 10, XCB_WINDOW_CLASS_INPUT_OUTPUT, screen-&gt;root_visual, mask, values );\n\n    /* Map the window on the screen and flush*/\n    xcb_map_window (connection, window);\n    xcb_flush (connection);\n\n    /* Get XCB_EVENT_MASK_BUTTON_PRESS event */\n    xcb_generic_event_t *event;\n    while ((event = xcb_wait_for_event (connection))) {\n        switch (event -&gt;response_type &amp; ~0x80) {\n        case XCB_EVENT_MASK_BUTTON_PRESS:\n            printf(\"Button pressed!\\n\");\n            break;\n        default: \n            /* Unknown event type */\n            printf(\"Unknown event!\\n\");\n            break;\n        }\n        /* free (event); */\n    }\n    return 0;\n}\n</code></pre>\n\n<p>For getting the events of all windows, I guess I have to change the <code>window</code> variable to the root window. But anything I try produces a Segmentation Fault, or simply does not work.</p>\n\n<p>Maybe a child of root (my application) does not have enough rights for getting events of it's parent? But how is <code>xwininfo -root</code> working then?\nBest attempt:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>xcb_connection_t *connection = xcb_connect (NULL, NULL);\nxcb_screen_t *screen = xcb_setup_roots_iterator (xcb_get_setup (connection)).data;\nxcb_drawable_t window = screen-&gt;root; /* !!! */\nuint32_t mask = XCB_CW_BACK_PIXEL | XCB_CW_EVENT_MASK;\nuint32_t values[2];\nvalues[0] = screen-&gt;white_pixel;\nvalues[1] = XCB_EVENT_MASK_BUTTON_PRESS;\nxcb_change_window_attributes (connection, window, mask, values); /* !!! */\nxcb_map_window (connection, window);\nxcb_flush (connection);\n</code></pre>\n\n<hr>\n\n<p><strong>How do I have to change the above code to react to all BUTTON_PRESS events on the whole X.Org-Server?</strong></p>\n"}, {"tags": ["c", "parallel-processing", "pthreads"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423064893, "post_id": 28322356, "comment_id": 44998638, "body": "The idea of SO is to solve specific coding issues. A good question should be backed by an example showing the latter. General tutorials can be found in books or the net."}, {"owner": {"reputation": 51, "user_id": 1889368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52a8dcf1917aacc2939a543b46b1515d?s=128&d=identicon&r=PG", "display_name": "nikhs", "link": "https://stackoverflow.com/users/1889368/nikhs"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423065426, "post_id": 28322356, "comment_id": 44999005, "body": "@alk, I am doing coding on concurrent skiplist, so in that case I am getting issue of segmentation fault, as the delete function goes on checking for element large amount of time, in a loop. So I was thinking, if its possible to enter some elements first and then proceed with deletion"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423065510, "post_id": 28322356, "comment_id": 44999068, "body": "So why not show us a minimal example of what you actually are coding then?"}, {"owner": {"reputation": 51, "user_id": 1889368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52a8dcf1917aacc2939a543b46b1515d?s=128&d=identicon&r=PG", "display_name": "nikhs", "link": "https://stackoverflow.com/users/1889368/nikhs"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1423066527, "post_id": 28322356, "comment_id": 44999788, "body": "@alk, will putting a counter that is incremented atomically (using __sync_fetch_and_add()) during insertion be used in the area of code commented above to satisfy the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1423055973, "creation_date": 1423055973, "answer_id": 28322459, "question_id": 28322356, "link": "https://stackoverflow.com/questions/28322356/thread-waiting-in-c/28322459#28322459", "title": "Thread waiting in C", "body": "<p>You should use <a href=\"http://www.freebsd.org/cgi/man.cgi?query=condvar&amp;sektion=9\" rel=\"nofollow\">condition variables</a>(condvar), <a href=\"https://www.sourceware.org/pthreads-win32/manual/pthread_mutex_init.html\" rel=\"nofollow\">mutices</a> etc to synchronize your threads.</p>\n\n<pre><code>delete()\n{\n  wait_on_cond();\n  take_lock();\n  actual_insert();\n  release_loc();\n}\n\ninsert()\n{\n  take_lock();\n  actual_insert()\n  release_lock();\n  signal_condition();\n}\n</code></pre>\n\n<p>This is basic idea on how can one use conditions. You need to check the actual documentation of library you plan to use.</p>\n"}], "owner": {"reputation": 51, "user_id": 1889368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52a8dcf1917aacc2939a543b46b1515d?s=128&d=identicon&r=PG", "display_name": "nikhs", "link": "https://stackoverflow.com/users/1889368/nikhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423066270, "creation_date": 1423055624, "last_edit_date": 1423066270, "question_id": 28322356, "link": "https://stackoverflow.com/questions/28322356/thread-waiting-in-c", "title": "Thread waiting in C", "body": "<p>I am implementing a parallel code in C with pthreads. Right now I am trying mixed operation on a specific data structure with mutex locks. Say for example I have a data set of 5,00,000 and I have employed 4 threads to insert into the structure and 4 threads to delete from it parallely (the whole data). I need the 4 threads of deletion to start only after the 4 threads of insertion have completed atleast 30 - 50 % portion of the data to be inserted. Is it possible to delay the threads? Can the condition format of pthreads be used for the same? Any resources leading to the same if provided will be useful.</p>\n\n<p>A sample code:</p>\n\n<pre><code>thds = (pthread_t *)malloc((nthdsIns + nthdsDel - 1) * sizeof(pthread_t));\nthdArg = (tArg *)malloc((nthdsIns + nthdsDel - 1) * sizeof(tArg));\n\nfor(i = 0; i &lt; nthdsIns; i++){\n    thdArg[i].num = numsIns; // array of elements to be inserted\n    thdArg[i].start = i * iterIns; //starting index\n    if(nthdsIns == 1)\n        thdArg[i].end = nValIns-1; //ending index\n    else\n        thdArg[i].end = (i+1) * iterIns - 1;\n}\n\nfor(k=0; k &lt; nthdsIns; k++)\n    pthread_create(&amp;thds[k], NULL, pThdIns, &amp;thdArg[k]);//spawning threads\n\ntemp = k;\n\n/*Need to put some condition here inorder to allow the insertion threads to complete half of the insertion part*/\n\n\n\nfor(j = i, k = 0; k &lt; nthdsDel; j++, k++){\n    thdArg[j].num = numsDel;//array for deletion\n    thdArg[j].start = k * iterIns;\n    thdArg[j].end = (k+1) * iterIns - 1;\n}\n\nfor(k = 0, j = temp; k &lt; nthdsDel; k++, j++)\n    pthread_create(&amp;thds[j], NULL, pThdDel, &amp;thdArg[j]);//spawning threads\n\nfor(i=0; i &lt; (nthdsIns + nthdsDel); i++)\n    pthread_join(thds[i], NULL);//joining threads\n</code></pre>\n"}, {"tags": ["objective-c", "c", "arrays", "char"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1423055294, "post_id": 28322162, "comment_id": 44992204, "body": "That is not a C program, neither is it C++. Possibly Objective-C."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1423055366, "post_id": 28322162, "comment_id": 44992257, "body": "Your title mentions <code>NSStringWithFormat</code>, which is Objective-C, but your code or question body don&#39;t even seem relevant to the title."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1423055541, "post_id": 28322162, "comment_id": 44992378, "body": "Oh, and <code>a[i] = input;</code> will make each array element point to the same <code>char input[100];</code> which also goes out of scope outside the <code>for</code> loop."}, {"owner": {"reputation": 1846, "user_id": 739119, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dEsdS.jpg?s=128&g=1", "display_name": "MrBr", "link": "https://stackoverflow.com/users/739119/mrbr"}, "edited": false, "score": 0, "creation_date": 1423055745, "post_id": 28322162, "comment_id": 44992506, "body": "Sorry for the wrong title. That was an old browser cache error."}], "answers": [{"comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1423055584, "post_id": 28322329, "comment_id": 44992402, "body": "I would guess that it would be undefined behavior in Objective-C as well."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1423055536, "creation_date": 1423055536, "answer_id": 28322329, "question_id": 28322162, "link": "https://stackoverflow.com/questions/28322162/copy-char-input-into-array-of-strings/28322329#28322329", "title": "Copy char input into array of strings", "body": "<p><strong><em>If</em></strong> that was a C program, you would have <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behavior</em></a> because you have an array of pointers, and each pointer you make point to a variable inside a nested scope, which means that variable will be out of scope outside of the loop, and the pointers (who are all pointing to the same memory) will be stray leading to said undefined behavior.</p>\n"}], "owner": {"reputation": 1846, "user_id": 739119, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dEsdS.jpg?s=128&g=1", "display_name": "MrBr", "link": "https://stackoverflow.com/users/739119/mrbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 28322329, "answer_count": 1, "score": 0, "last_activity_date": 1423056028, "creation_date": 1423055131, "last_edit_date": 1423056028, "question_id": 28322162, "link": "https://stackoverflow.com/questions/28322162/copy-char-input-into-array-of-strings", "title": "Copy char input into array of strings", "body": "<p>I'm currently refreshing my C skills and having trouble with the following code:</p>\n\n<pre><code>int main (int argc, const char * argv[]) {\n\n    @autoreleasepool {\n\n        int numberOfTestCases;\n\n        scanf(\"%d\", &amp;numberOfTestCases);\n\n        char *a[numberOfTestCases];\n\n        for (int i = 0; i &lt; numberOfTestCases; i++) {\n\n            char input[100];\n            scanf(\"%s\", input);\n            a[i] = input;\n        }\n\n        for (int k = 0; k &lt; numberOfTestCases; k++) {\n            printf(\"%s\\n\", a[k]);\n        }\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>First I want to enter the user a number to determine how many strings she/he wants to enter.</p>\n\n<p>Second I want to let the user enter the number of strings and store them in an array of strings. </p>\n\n<p>Last I want to loop over that array and print out all the values. So my test input is e.g. something like:</p>\n\n<p>5</p>\n\n<p>My</p>\n\n<p>name</p>\n\n<p>is</p>\n\n<p>John</p>\n\n<p>Doe</p>\n\n<p><strong>with an expected result of</strong> </p>\n\n<p>My</p>\n\n<p>name</p>\n\n<p>is</p>\n\n<p>John</p>\n\n<p>Doe</p>\n\n<p><strong>Instead the result is:</strong></p>\n\n<p>Doe</p>\n\n<p>Doe </p>\n\n<p>Doe </p>\n\n<p>Doe </p>\n\n<p>Doe</p>\n\n<p>I can't figure out how to insert the input in the array.. very thankful for a hint in the right direction.</p>\n"}, {"tags": ["c", "linux", "networking", "interface", "gateway"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1423054442, "post_id": 28321877, "comment_id": 44991672, "body": "read <code>&#47;proc&#47;net&#47;if_inet6</code>"}, {"owner": {"reputation": 83, "user_id": 4528397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fd9b3b745ca98a3992f3208a641a81?s=128&d=identicon&r=PG&f=1", "display_name": "SPYFF", "link": "https://stackoverflow.com/users/4528397/spyff"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 1, "creation_date": 1423064070, "post_id": 28321877, "comment_id": 44998086, "body": "According to this page: <a href=\"http://www.tldp.org/HOWTO/Linux+IPv6-HOWTO/proc-net.html\" rel=\"nofollow noreferrer\">link</a>  Thats not exactly what I need, but thank you for the reply."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1423055663, "creation_date": 1423055663, "answer_id": 28322370, "question_id": 28321877, "link": "https://stackoverflow.com/questions/28321877/get-multiple-network-interface-gateway-address-in-linux/28322370#28322370", "title": "Get multiple network interface gateway address in linux", "body": "<p>Under Linux an IPv4 interface's gateway can be read from <code>/proc/net/route</code>. </p>\n"}], "owner": {"reputation": 83, "user_id": 4528397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fd9b3b745ca98a3992f3208a641a81?s=128&d=identicon&r=PG&f=1", "display_name": "SPYFF", "link": "https://stackoverflow.com/users/4528397/spyff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1307, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455206632, "creation_date": 1423054245, "last_edit_date": 1455206632, "question_id": 28321877, "link": "https://stackoverflow.com/questions/28321877/get-multiple-network-interface-gateway-address-in-linux", "title": "Get multiple network interface gateway address in linux", "body": "<p>There are many ways to get the network interfaces IP adresses in GNU/Linux (for example with ioctl calls). And also, default gateway from the routing table is available in C.</p>\n\n<p>But I have 2 network interfaces in 2 different networks. Each of these have unique router IP addresses (gateway addresses). How can I get these addresses? The DHCP offers tells them as well and I'm able to get them with <code>nmcli device list</code> for example. But where is this information stored? The NetworkManager database? I want to reach them from C.</p>\n"}, {"tags": ["c", "algorithm", "dynamic-programming", "brute-force"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1423054286, "post_id": 28321858, "comment_id": 44991553, "body": "That&#39;s a nice assignment. What have you tried to solve it? How did it work? What problems (if any) do you have with your solution?"}, {"owner": {"reputation": 63, "user_id": 3429486, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f9e7cd2b74ff8e621615826920d086d?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Singh", "link": "https://stackoverflow.com/users/3429486/vishal-singh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1423054466, "post_id": 28321858, "comment_id": 44991686, "body": "I have not done anything yet, just thinking about this problem as of know. do i need to try all combinations possible ?(Beginner i am in this world :p)"}, {"owner": {"reputation": 3159, "user_id": 4450134, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0207987892f359cb7d9b56e8aa4fc75c?s=128&d=identicon&r=PG&f=1", "display_name": "HavelTheGreat", "link": "https://stackoverflow.com/users/4450134/havelthegreat"}, "edited": false, "score": 1, "creation_date": 1423054511, "post_id": 28321858, "comment_id": 44991715, "body": "To answer the question in your title directly, no, you do not have to form every combination."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1423054522, "post_id": 28321858, "comment_id": 44991722, "body": "In that case I recommend you go and read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. You might also want to learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 1, "creation_date": 1423055214, "post_id": 28321858, "comment_id": 44992149, "body": "look up knapsack problems"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423058091, "post_id": 28321858, "comment_id": 44994122, "body": "Would be better suited to <a href=\"https://puzzling.stackexchange.com\">Puzzling</a> or <a href=\"https://math.stackexchange.com\">Mathematics</a> I believe."}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1423058674, "post_id": 28321858, "comment_id": 44994499, "body": "This is the <a href=\"http://en.wikipedia.org/wiki/Partition_problem\" rel=\"nofollow noreferrer\">Partition Problem</a>. <a href=\"http://stackoverflow.com/q/23160454/572670\">This thread</a> for example answers it."}], "answers": [{"tags": [], "owner": {"reputation": 21989, "user_id": 715269, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/81265cf97af6195bd098512acbf47d03?s=128&d=identicon&r=PG", "display_name": "Gangnus", "link": "https://stackoverflow.com/users/715269/gangnus"}, "is_accepted": false, "score": 0, "last_activity_date": 1423059855, "creation_date": 1423059855, "answer_id": 28323760, "question_id": 28321858, "link": "https://stackoverflow.com/questions/28321858/would-i-need-to-form-all-permutations-and-combinations-for-the-following/28323760#28323760", "title": "Would I need to form all permutations and combinations for the following?", "body": "<p>No. You needn't create all 2^n combinations. There are two ways for avoiding it.</p>\n\n<ol>\n<li>Even if you will create many combinations and compare them, you can use <strong>preliminary filtering</strong>. While you have made only part of the combination, setting some m (m &lt; n) stones, you can some times check, if you can develop from it a good combination. For example, you can already have too big weight in one of the piles.</li>\n<li>Maybe you can find some existing algorithm, that will create the needed composition without any combinations. You can invent it yourself or find an already existent one. </li>\n</ol>\n\n<p>Even if you'll find an algorithm, remember, you MUST learn how to create your own algorithm for the sorting with preliminary filtering. For there are many tasks in real life where you will need this skill.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4524985"}, "is_accepted": true, "score": 1, "last_activity_date": 1423284706, "last_edit_date": 1423284706, "creation_date": 1423063288, "answer_id": 28324938, "question_id": 28321858, "link": "https://stackoverflow.com/questions/28321858/would-i-need-to-form-all-permutations-and-combinations-for-the-following/28324938#28324938", "title": "Would I need to form all permutations and combinations for the following?", "body": "<p>Although this is a one dimensional knastpsack problem, here is another mathematical way of doing this.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>Algorithm: 1D Optimization\r\nInput: weights (sequenc of weights)\r\nOutput: left and right, two sequences with difference between sum of elements minimized\r\n***************************************************************************************\r\n\r\n1) Sort weights in descending order\r\n2) initialize leftsum = 0, rightsum = 0\r\n3) initialize leftseq = [], rightseq = []\r\n4) for each weight in weights repeat\r\n\t4.1) if leftsum = 0 then\r\n\t\t4.1.1) leftsum = weight\r\n\t\t4.1.2) leftseq.add(weight)\r\n\t4.2) else if rightsum = 0 then\r\n\t\t4.2.1) rightsum = weight\r\n\t\t4.2.2) rightseq.add(weight)\r\n\t4.3) else\r\n\t\t4.3.1) error_left = absolute(leftsum - weight)\r\n\t\t       error_right = absolute(rightsum - weight)\r\n\t\t4.3.2) if error_left &gt;= error_right then\r\n\t\t\t4.3.2.1) rightsum = rightsum + weight\r\n\t\t\t4.3.2.2) rightseq.add(weight)\r\n\t\t4.3.3) else\r\n\t\t\t4.3.3.1) leftsum = leftsum + weight\r\n\t\t\t4.3.3.2) leftseq.add(weight)\r\n \r\n\r\n// And here is a sample implementation of the above hypothesis in python\r\n\r\nnumbers = [1, 23, 100, 857, 890, 78, 54, 789, 34, 47, 900];\r\n#numbers = [1, 23, 16, 5, 2]\r\nprint numbers\r\nnumbers.sort(reverse=True)\r\nprint numbers\r\n\r\nleftSum = 0;\r\nrightSum = 0;\r\n\r\nleftSeq = [];\r\nrightSeq = [];\r\n\r\nfor num in numbers:\r\n\tif leftSum == 0:\r\n\t\tleftSum = num;\r\n\t\tleftSeq.append(num);\r\n\telif rightSum == 0:\r\n\t\trightSum = num;\r\n\t\trightSeq.append(num);\r\n\telse:\r\n\t\terrorLeft = abs(leftSum - num);\r\n\t\terrorRight = abs(rightSum - num);\r\n\t\tif errorLeft &gt;= errorRight:\r\n\t\t\trightSum += num;\r\n\t\t\trightSeq.append(num);\r\n\t\telse:\r\n\t\t\tleftSum += num;\r\n\t\t\tleftSeq.append(num);\r\n\r\nprint leftSum;\r\nprint rightSum;\r\nprint leftSeq;\r\nprint rightSeq;\r\n\t\t</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>It should work. Your sequences are now in leftseq and rightseq.</p>\n"}], "owner": {"reputation": 63, "user_id": 3429486, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f9e7cd2b74ff8e621615826920d086d?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Singh", "link": "https://stackoverflow.com/users/3429486/vishal-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 1, "accepted_answer_id": 28324938, "answer_count": 2, "score": 0, "last_activity_date": 1580050828, "creation_date": 1423054222, "last_edit_date": 1580050828, "question_id": 28321858, "link": "https://stackoverflow.com/questions/28321858/would-i-need-to-form-all-permutations-and-combinations-for-the-following", "title": "Would I need to form all permutations and combinations for the following?", "body": "<p>You have a number of stones with known weights w1, \u2026, wn. </p>\n\n<p>Write a program that will rearrange the stones into two piles such that weight difference between the piles is minimal.</p>\n"}, {"tags": ["c", "spi"], "comments": [{"owner": {"reputation": 866, "user_id": 1068054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3232e5767d04fce1f458cc055ba1871?s=128&d=identicon&r=PG", "display_name": "Jan Henke", "link": "https://stackoverflow.com/users/1068054/jan-henke"}, "edited": false, "score": 3, "creation_date": 1423053675, "post_id": 28321608, "comment_id": 44991191, "body": "What have you tried so far? Please post some code so we can answer a concrete question."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423053739, "post_id": 28321608, "comment_id": 44991227, "body": "we,, your <code>receive()</code> or <code>read()</code> or similar function should return you the number of bytes successfully read, right? from there, you can have your calculations on the received packet."}], "answers": [{"comments": [{"owner": {"reputation": 2548, "user_id": 802997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/03f53c19a23c299133b7ee4ebb58cb7a?s=128&d=identicon&r=PG&f=1", "display_name": "totten", "link": "https://stackoverflow.com/users/802997/totten"}, "edited": false, "score": 0, "creation_date": 1423054033, "post_id": 28321710, "comment_id": 44991397, "body": "If you&#39;re compiling with GCC, use <code>__attribute__((__packed__))</code> to align bytes by 1."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 2548, "user_id": 802997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/03f53c19a23c299133b7ee4ebb58cb7a?s=128&d=identicon&r=PG&f=1", "display_name": "totten", "link": "https://stackoverflow.com/users/802997/totten"}, "edited": false, "score": 1, "creation_date": 1423054168, "post_id": 28321710, "comment_id": 44991471, "body": "@totten: gcc also supports <code>#pragma pack</code> for compatibility with other compilers."}, {"owner": {"reputation": 57, "user_id": 3789035, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/59ce1964db04f588940332bf92e8c6b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3789035", "link": "https://stackoverflow.com/users/3789035/user3789035"}, "edited": false, "score": 0, "creation_date": 1423056189, "post_id": 28321710, "comment_id": 44992797, "body": "Thank you Paul R for the answer. Can you please show me a simple function/routine that fills the structure elements?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 57, "user_id": 3789035, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/59ce1964db04f588940332bf92e8c6b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3789035", "link": "https://stackoverflow.com/users/3789035/user3789035"}, "edited": false, "score": 0, "creation_date": 1423056371, "post_id": 28321710, "comment_id": 44992917, "body": "@user3789035: I&#39;ve edited the answer now to include an example using <a href=\"http://linux.die.net/man/2/read\" rel=\"nofollow noreferrer\">read()</a>."}, {"owner": {"reputation": 57, "user_id": 3789035, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/59ce1964db04f588940332bf92e8c6b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3789035", "link": "https://stackoverflow.com/users/3789035/user3789035"}, "edited": false, "score": 0, "creation_date": 1423058427, "post_id": 28321710, "comment_id": 44994344, "body": "let assume that spi_read() returns one consecutive byte from the packet,  what would be the routine to save all received bytes into the structure msg elements?"}, {"owner": {"reputation": 57, "user_id": 3789035, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/59ce1964db04f588940332bf92e8c6b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3789035", "link": "https://stackoverflow.com/users/3789035/user3789035"}, "edited": false, "score": 0, "creation_date": 1423059699, "post_id": 28321710, "comment_id": 44995122, "body": "Can you please write the function definition of  read(fd, &amp;msg, sizeof(msg));"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1423059757, "post_id": 28321710, "comment_id": 44995161, "body": "<code>read()</code> is a standard C library call - I put a link to the man page in my comment above. <code>spi_read()</code> has a similar function signature."}, {"owner": {"reputation": 57, "user_id": 3789035, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/59ce1964db04f588940332bf92e8c6b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3789035", "link": "https://stackoverflow.com/users/3789035/user3789035"}, "edited": false, "score": 0, "creation_date": 1423063127, "post_id": 28321710, "comment_id": 44997433, "body": "Should I first, save the packet into a buffer before I parse the data into the structure?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1423063387, "post_id": 28321710, "comment_id": 44997604, "body": "Why would you want to do that ? It would just be a redundant copy. You can just read the data directly to the struct, as I explained in the answer above."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1423056308, "last_edit_date": 1423056308, "creation_date": 1423053745, "answer_id": 28321710, "question_id": 28321608, "link": "https://stackoverflow.com/questions/28321608/how-to-parse-received-data-with-variable-length/28321710#28321710", "title": "How to parse received data with variable length", "body": "<p>One approach is to define a packed struct which represents the largest possible packet size:</p>\n\n<pre><code>#pragma pack(push,1) // make sure everything is packed to byte level\ntypedef struct {\n    uint8_t        Length;\n    uint8_t        SrcArsDev;\n    uint32_t       Src_ID;\n    uint8_t        DstArsDev;\n    uint32_t       Dst_ID;\n    uint32_t       Session;\n    uint8_t        CMD;\n    uint8_t        payload[96 + 2]; // payload + CRC\n} Message;\n#pragma pack(pop)    // restore struct packing\n</code></pre>\n\n<p>Your read routine then reads directly to such a struct, and then all the elements of the message can subsequently be accessed as fields within the struct.</p>\n\n<p>The only tricky part is that you'll need to work out where the actual CRC bytes are based on <code>Length</code> and then extract these from the <code>payload[]</code> buffer, but this is not too difficult:</p>\n\n<pre><code>Message msg;\n\nssize_t n = read(fd, &amp;msg, sizeof(msg));            // read data into `msg`\n\nuint16_t crc = *(int16_t*)&amp;msg.payload[msg.Length]; // extract CRC\n\n// validate CRC + perhaps also verify that n is consistent with msg.Length\n\n// then access elements as needed:\n\nsrc_id = msg.Src_ID;\ndst_id = msg.Dst_ID;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1423054766, "creation_date": 1423054766, "answer_id": 28322036, "question_id": 28321608, "link": "https://stackoverflow.com/questions/28321608/how-to-parse-received-data-with-variable-length/28322036#28322036", "title": "How to parse received data with variable length", "body": "<p>When you do not mind to check the CRC with a special function, you can cast a struct like @Paul defined. When you have read the inputbuf, you can use</p>\n\n<pre><code>struct *Message payload;   \npayload = (Message *) inputbuf;\n</code></pre>\n\n<p>Now you can access payload members without copying them first.</p>\n"}], "owner": {"reputation": 57, "user_id": 3789035, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/59ce1964db04f588940332bf92e8c6b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3789035", "link": "https://stackoverflow.com/users/3789035/user3789035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 937, "favorite_count": 0, "accepted_answer_id": 28321710, "answer_count": 2, "score": -5, "last_activity_date": 1423059990, "creation_date": 1423053442, "last_edit_date": 1423059990, "question_id": 28321608, "link": "https://stackoverflow.com/questions/28321608/how-to-parse-received-data-with-variable-length", "title": "How to parse received data with variable length", "body": "<p>Let us say I am receiving a packet with variable length data payload.</p>\n\n<pre><code>**byte_num**    **size**     **type**\n   0             1        Length\n   1             1        SrcArsDev\n   2             4        Src_ID\n   6             1        DstArsDev\n   7             4        Dst_ID\n  11             4        Session\n  15             1        CMD\n  16             N        N bytes payload N&lt;=96\n 16+N            2        CRC\n</code></pre>\n\n<p>The data will be received over SPI communication. What is the general method for parsing the packets so I can later manipulate the distinct elements?</p>\n\n<p>Can you please show me a simple function/routine that fills the structure elements?</p>\n"}, {"tags": ["c", "animation", "math", "vertex", "skinning"], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 3102190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51e2951dd9509d28b2d7a2c5ba0a9e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Raphael Mayer", "link": "https://stackoverflow.com/users/3102190/raphael-mayer"}, "is_accepted": true, "score": 2, "last_activity_date": 1423083462, "creation_date": 1423083462, "answer_id": 28331291, "question_id": 28321033, "link": "https://stackoverflow.com/questions/28321033/calculating-bind-pose-skinning-matrix-from-world-space-bone-matrices/28331291#28331291", "title": "Calculating bind pose/skinning matrix from world space bone matrices", "body": "<p>Ok, looks like i got it working.</p>\n\n<p>Math Equation is (simplified):</p>\n\n<pre><code>v' = SUM { w * m * v }\n</code></pre>\n\n<p>where </p>\n\n<blockquote>\n  <ol>\n  <li>w is the weight (all bones have 1.0 weight currently)</li>\n  <li>m is the world space bone matrix (animation bone)</li>\n  <li>v is the relative vertex position of the bind pose</li>\n  </ol>\n</blockquote>\n\n<pre><code>inv_bone_mat = the inverted world space bone matrix\nbone_mat = world space bone matrix\n</code></pre>\n\n<p>to calculate v:</p>\n\n<pre><code>vec3 v_relative = bind_bones[bone_index].inv_bone_mat * vertex_object_space\n</code></pre>\n\n<p>now all that was needed is:</p>\n\n<pre><code>vec3 skinned_vertex = frame[current_frame].anim_bones[bone_index].bone_mat * v_relative\n</code></pre>\n\n<p>ofc this can be extended by multiple bones/weight influences</p>\n\n<p>i hope this helps future readers.</p>\n"}], "owner": {"reputation": 610, "user_id": 3102190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51e2951dd9509d28b2d7a2c5ba0a9e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Raphael Mayer", "link": "https://stackoverflow.com/users/3102190/raphael-mayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2142, "favorite_count": 0, "accepted_answer_id": 28331291, "answer_count": 1, "score": 1, "last_activity_date": 1423083462, "creation_date": 1423051797, "last_edit_date": 1423063384, "question_id": 28321033, "link": "https://stackoverflow.com/questions/28321033/calculating-bind-pose-skinning-matrix-from-world-space-bone-matrices", "title": "Calculating bind pose/skinning matrix from world space bone matrices", "body": "<p>Currently i store all bones in world space and load them directly from binary file.</p>\n\n<p>I check this skeleton by placing an \"arrow object\" with the matrix bone_mat as \"modelmatrix\". Works as expected.</p>\n\n<p><img src=\"https://i.stack.imgur.com/B9jIT.png\" alt=\"enter image description here\"></p>\n\n<pre><code>Variable explanations:\n\n 1. bone_mat        = world_space bone matrix (loaded from file)\n 2. bind_pose_mat   = relative transformation from parent bone to current bone\n 3. skinning_mat    = final joint transformation matrix\n</code></pre>\n\n<p>The next step is to calculate the bind pose matrix. The relative bone matrix to its parent.</p>\n\n<p>I do it this way:</p>\n\n<pre><code>    /* bone mat * inverse(parent bone mat) */\n    mesh-&gt;anim_data.skeleton[i].bind_pose_mat = \nurdMat4MulMat4( mesh-&gt;anim_data.skeleton[i].bone_mat, urdMat4Inverse(parent_bone-&gt;bone_mat) );\n</code></pre>\n\n<p>I check this matrix by getting it into world space again like this:</p>\n\n<pre><code>    world_space_mat = \nurdMat4MulMat4( mesh-&gt;anim_data.skeleton[i].bind_pose_mat, parent_bone-&gt;bone_mat);\n</code></pre>\n\n<p>Which results in the same matrix as bone_mat.</p>\n\n<p>Root bones are stored in world space, as they are not relative to any parent</p>\n\n<pre><code>root_bone.bind_pose_mat = bone_mat\n</code></pre>\n\n<p>so now that im in local space, i though all i needed to do was</p>\n\n<pre><code>/* interpolated vertex = base_vertex * bones[bone_index].bind_pose_mat */ \nmesh-&gt;interpolated[i].vertex = urdMat4MulVec3(skeleton[bone_index].bind_pose_mat , mesh-&gt;base[i].vertex);\n</code></pre>\n\n<p>which results in a distorted mesh.</p>\n\n<p><img src=\"https://i.stack.imgur.com/YYJk9.png\" alt=\"vertex skinning done wrong\"></p>\n\n<p>Edit: After some thoughts, it looks like im not in local space, but in relative space (bind_pose is currently the relative matrix to its parent).</p>\n\n<p>But im stuck with theory there. </p>\n"}, {"tags": ["c++", "c", "opengl", "qglwidget"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423051975, "post_id": 28320857, "comment_id": 44990300, "body": "Well, while your question may be genuine, I doubt that whether SO prefers this kind of <i>open-ended</i> q&#39;s."}, {"owner": {"reputation": 1, "user_id": 4297409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d4b676a93d8cccd7a12b43ba6952c0?s=128&d=identicon&r=PG&f=1", "display_name": "RMG", "link": "https://stackoverflow.com/users/4297409/rmg"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423052171, "post_id": 28320857, "comment_id": 44990405, "body": "I want to perform it in Linux"}], "answers": [{"tags": [], "owner": {"reputation": 4575, "user_id": 746569, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7816351c392c2da71dc1019017b8dde?s=128&d=identicon&r=PG", "display_name": "MichaelCMS", "link": "https://stackoverflow.com/users/746569/michaelcms"}, "is_accepted": true, "score": 0, "last_activity_date": 1423051558, "creation_date": 1423051558, "answer_id": 28320956, "question_id": 28320857, "link": "https://stackoverflow.com/questions/28320857/create-a-new-open-glwindow-and-instert-a-picture/28320956#28320956", "title": "Create a new open GLWindow and instert a picture", "body": "<p>This isn't how openGL works (inserting pictures inside).</p>\n\n<p>To draw a picture you will need to create a quad and then assign a texture to it.</p>\n\n<p>For a tutorial, google Hello Triangle openGL then move from that point forward.</p>\n"}, {"tags": [], "owner": {"reputation": 636, "user_id": 3223328, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/6dSg3.jpg?s=128&g=1", "display_name": "DanceIgel", "link": "https://stackoverflow.com/users/3223328/danceigel"}, "is_accepted": false, "score": -1, "last_activity_date": 1423052528, "last_edit_date": 1495541191, "creation_date": 1423052115, "answer_id": 28321142, "question_id": 28320857, "link": "https://stackoverflow.com/questions/28320857/create-a-new-open-glwindow-and-instert-a-picture/28321142#28321142", "title": "Create a new open GLWindow and instert a picture", "body": "<p>This question is aleready asked several times before. As MichaelCMS mentioned. This is not how OpenGL works. You can do this (creating a window and insert a picture) with Qt too.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/10804377/the-best-opengl-tutorial-for-a-beginner-objects-light\">here</a>, <a href=\"https://stackoverflow.com/questions/16222231/good-opengl-tutorial\">here</a> or <a href=\"https://stackoverflow.com/questions/4636406/up-to-date-opengl-tutorials-or-books-for-c\">here</a>.</p>\n\n<p>Creating a window doesn't depend on OpenGL. You can use GLUT or the Qt Libarys to do this platform independent. There exist a lot of tutorials for this.</p>\n\n<p>For a GLUT-tutorial, see <a href=\"http://www.lighthouse3d.com/opengl/glut/\" rel=\"nofollow noreferrer\">here</a>, <a href=\"http://www.lighthouse3d.com/tutorials/glut-tutorial/http://\" rel=\"nofollow noreferrer\">here</a> or here.</p>\n\n<p>For a tutorial for Qt, see <a href=\"http://doc.qt.io/qt-5/gettingstartedqt.html\" rel=\"nofollow noreferrer\">here</a>. Qt offers a lot of own classes for a easier use of OpenGL too. </p>\n"}], "owner": {"reputation": 1, "user_id": 4297409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d4b676a93d8cccd7a12b43ba6952c0?s=128&d=identicon&r=PG&f=1", "display_name": "RMG", "link": "https://stackoverflow.com/users/4297409/rmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1423056315, "accepted_answer_id": 28320956, "answer_count": 2, "score": -2, "last_activity_date": 1423061164, "creation_date": 1423051224, "last_edit_date": 1423061164, "question_id": 28320857, "link": "https://stackoverflow.com/questions/28320857/create-a-new-open-glwindow-and-instert-a-picture", "closed_reason": "Not suitable for this site", "title": "Create a new open GLWindow and instert a picture", "body": "<p>I would like to create a window using open GL but i can't find any good tutorial, can anybody tell me one?</p>\n\n<p>Once the window will be create, i want to insert a picture on it!</p>\n"}, {"tags": ["c", "pointers", "constants"], "answers": [{"tags": [], "owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "is_accepted": true, "score": 10, "last_activity_date": 1423050821, "last_edit_date": 1495542281, "creation_date": 1423050821, "answer_id": 28320734, "question_id": 28320538, "link": "https://stackoverflow.com/questions/28320538/creating-a-const-array-of-const-elements/28320734#28320734", "title": "Creating a const array of const elements", "body": "<p>As you've stated:</p>\n\n<blockquote>\n  <p>const applies to the thing left of it. If there is nothing on the left then it applies to the thing right of it.</p>\n</blockquote>\n\n<pre><code>const char* const foobar[2] = { foo, bar };\n</code></pre>\n\n<p>can be re-written as:</p>\n\n<pre><code>char const * const foobar[2] = { foo, bar };\n</code></pre>\n\n<p>Now imagine the paratheses encapsulating <code>const</code> qualifier and the entity qualified:</p>\n\n<pre><code>((char const) (* const)) foobar[2] = // doesn't matter\n</code></pre>\n\n<p>You've written that <em>the second const would apply to same char as well</em>. This is not true - the second <code>const</code> refers to the <code>*</code>, which means it's a constant pointer.</p>\n\n<p>All in all, <strong><code>foobar</code> is an array of constant pointers to constant chars</strong>.</p>\n\n<p>You may also want to read this thread: <a href=\"https://stackoverflow.com/questions/10091825/constant-pointer-vs-pointer-on-a-constant-value\">constant pointer vs pointer on a constant value</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "is_accepted": false, "score": 4, "last_activity_date": 1423051467, "creation_date": 1423051467, "answer_id": 28320931, "question_id": 28320538, "link": "https://stackoverflow.com/questions/28320538/creating-a-const-array-of-const-elements/28320931#28320931", "title": "Creating a const array of const elements", "body": "<p><code>foobar</code> is an array of <code>const</code> pointers to <code>const char</code>. An array is always constant, there is no way to explicitly make it <code>const</code>.</p>\n\n<p>In the declaration of function arguments, arrays decay to pointers, and a <code>const</code> pointer does exist; in this case, <code>const</code> can be put inside the <code>[]</code>. These are equivalent:</p>\n\n<pre><code>void func(int foo[const]) { ... }\nvoid func(int *const foo) { ... }\n</code></pre>\n\n<p>The spiral rule isn't perfect (it fails for some complex declarations), and I personally don't find it helpful in combination with qualifiers (<code>const</code>, <code>volatile</code> etc). I don't know of anything rendering the rules exactly but the grammar itself (C11 6.7 and 6.7.6).</p>\n\n<p>In this case, however, it seems to work:</p>\n\n<pre><code>                    +--------------+\n                    |      +---+   |\n                    |      ^   |   |\n       const char *const foobar[2] |\n             ^      ^          |   |\n             |      +----------+   |\n             +---------------------+\n</code></pre>\n\n<p>\"<code>foobar</code> is an array (with 2 elements) of <code>const</code> pointers to <code>const char</code>.\"</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 6, "last_activity_date": 1423053097, "last_edit_date": 1495542281, "creation_date": 1423053097, "answer_id": 28321489, "question_id": 28320538, "link": "https://stackoverflow.com/questions/28320538/creating-a-const-array-of-const-elements/28321489#28321489", "title": "Creating a const array of const elements", "body": "<p>A finicky but important point; in C it is not possible to have a <code>const</code> array. (Ref: C11 6.3.2.3/2). </p>\n\n<p>Everything that looks like it might be one is actually a non-const array whose elements are <code>const</code>.  <a href=\"https://stackoverflow.com/questions/28062095/pass-a-two-dimensional-array-to-a-function-of-constant-parameter/28062262#28062262\">Link to related discussion</a>.  </p>\n\n<p>In your example <code>const char* const foobar[2] = { foo, bar };</code>, the two <code>const</code> keywords mean:</p>\n\n<ul>\n<li>The two pointers in the array cannot be made to point elsewhere</li>\n<li>The characters being pointed to by those pointers shall not be modified through those pointers.</li>\n</ul>\n\n<p>The text description is \"foobar is an array 2 of constant pointer to a char constant\".</p>\n\n<p>Note the small but important distinction again that the chars being pointed to might actually be non-const <code>char</code>, because a <code>const char *</code> can point to both const and non-const. The effect of the first <code>const</code> is to say that we might not know whether the chars are const or not, and so we can't safely write to them, so the compiler will generate an error if we try to use this pointer ot write to them.</p>\n"}], "owner": {"reputation": 6627, "user_id": 804495, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0ce15ea7e32a97fed041e271fa046c73?s=128&d=identicon&r=PG", "display_name": "apscience", "link": "https://stackoverflow.com/users/804495/apscience"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9655, "favorite_count": 1, "accepted_answer_id": 28320734, "answer_count": 3, "score": 6, "last_activity_date": 1423053097, "creation_date": 1423050202, "last_edit_date": 1495541333, "question_id": 28320538, "link": "https://stackoverflow.com/questions/28320538/creating-a-const-array-of-const-elements", "title": "Creating a const array of const elements", "body": "<p>I want to declare a constant array of constant char arrays. If I write it like this:</p>\n\n<pre><code>const char foo[] = \"Foo\";\nconst char bar[] = \"Bar\";\nconst char* const foobar[2] = { foo, bar };\n</code></pre>\n\n<p>It seems to work, but if I try to read it using <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">\"the spiral rule\"</a>, foobar is read as:</p>\n\n<p>\"foobar is an array 2 of constant (??) to a pointer to a char constant\"</p>\n\n<p>Using this <a href=\"https://stackoverflow.com/a/5503393/804495\">stack overflow</a> answer, </p>\n\n<blockquote>\n  <p>const applies to the thing left of it. If there is nothing on the left then it applies to the thing right of it.</p>\n</blockquote>\n\n<p>the first <code>const</code> would apply to the char, and the second <code>const</code> would apply to same char as well. </p>\n\n<p>Both ways of reading it doesn't make sense, but the code does function (in Arduino [sorry], at least). Which <code>const</code> is making which a constant? Is there a more logical way to write it?</p>\n"}, {"tags": ["c", "for-loop", "syntax", "standards"], "answers": [{"comments": [{"owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "reply_to_user": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1423052500, "post_id": 28320652, "comment_id": 44990558, "body": "The post was edited by OP. Should I edit the answer too?"}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1423052689, "post_id": 28320652, "comment_id": 44990654, "body": "Ugh. Let&#39;s just note here that it was originally just <code>short int i;</code> and be done with it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "edited": false, "score": 0, "creation_date": 1423052926, "post_id": 28320652, "comment_id": 44990782, "body": "So in the for loop we can write the initialization, conditional and updation expression in any order it doesn&#39;t matter rt ?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1423053231, "post_id": 28320652, "comment_id": 44990953, "body": "@RohitSaluja: Of course it matters! If it didn&#39;t, how would the compiler know which is which?"}, {"owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "edited": false, "score": 0, "creation_date": 1423053258, "post_id": 28320652, "comment_id": 44990972, "body": "^Yes we can write it in any order. The middle expression decides when the loop terminates (if at all)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423053835, "post_id": 28320652, "comment_id": 44991284, "body": "Aren&#39;t the first (and maybe third) part statements, not just expressions ? You can write declarations within."}, {"owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "edited": false, "score": 0, "creation_date": 1423054531, "post_id": 28320652, "comment_id": 44991726, "body": "C99 and C11 allows declaration of variables too. I dont think that was supported in C89."}], "tags": [], "owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "is_accepted": true, "score": 2, "last_activity_date": 1423054942, "last_edit_date": 1423054942, "creation_date": 1423050563, "answer_id": 28320652, "question_id": 28320508, "link": "https://stackoverflow.com/questions/28320508/syntactical-sour/28320652#28320652", "title": "Syntactical Sour", "body": "<p>The for statement has the following form :</p>\n\n<pre><code>for(expression; expression; expression);\n</code></pre>\n\n<p>The three expressions can be any valid expressions allowed in the C language.\nSo the code is syntactically valid. However due to uninitialized variable, the behaviour will be undefined. Also, it is advisable to use <code>int main(void)</code> and return an exit code.</p>\n\n<p>Starting with C99 and C11, declarations are also allowed in place of the first expressions making it a statement. Thus it is :</p>\n\n<pre><code>for(statement; expression; expression);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1423050615, "creation_date": 1423050615, "answer_id": 28320674, "question_id": 28320508, "link": "https://stackoverflow.com/questions/28320508/syntactical-sour/28320674#28320674", "title": "Syntactical Sour", "body": "<p>For loops are:</p>\n\n<pre><code>for( run_this_once_at_start;  check_this_each_time;  run_this_after_each_iteration)\n</code></pre>\n\n<p>The actual code in those three areas can be any expression at all so long as the second one is a expression that's a valid operand for the <code>!</code> operator.    The first one can even contain a declaration, in C99 and later.</p>\n\n<p>In your example there are no syntax errors. The first and third conditions don't do what would be considered good style, however they are not illegal.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "edited": false, "score": 1, "creation_date": 1423053059, "post_id": 28320871, "comment_id": 44990859, "body": "Well your answer is very well explained. Thanks"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423053127, "post_id": 28320871, "comment_id": 44990901, "body": "@RohitSaluja Glad it helped. :-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1423055296, "post_id": 28320871, "comment_id": 44992207, "body": "Thank you @MohitJain sir. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423055405, "last_edit_date": 1495541161, "creation_date": 1423051263, "answer_id": 28320871, "question_id": 28320508, "link": "https://stackoverflow.com/questions/28320508/syntactical-sour/28320871#28320871", "title": "Syntactical Sour", "body": "<p>Ok, as per the <code>for</code> loop is concerned, the <em>simplified</em> syntax <sup>#</sup> is</p>\n\n<pre><code>for( run_this_once_at_start;  check_this_each_time;  run_this_after_each_iteration)\n</code></pre>\n\n<p><sup>Credit: Mr. Matt</sup></p>\n\n<p>Compiler will only check for the matching syntax. Let's compare it with your code, which says</p>\n\n<pre><code>for(i&lt;=5&amp;&amp;i&gt;=-1 ;++i; i&gt;0)\n</code></pre>\n\n<p>so, after breakdown, </p>\n\n<ul>\n<li><code>run_this_once_at_start</code> is <code>i&lt;=5&amp;&amp;i&gt;=-1</code> <sup>Note</sup></li>\n<li><code>check_this_each_time</code> is <code>++i</code></li>\n<li><code>run_this_after_each_iteration</code> is <code>i&gt;0</code></li>\n</ul>\n\n<p>which <em>all</em> are valid expressions from the <em>syntax</em> point-of-view. So, compiler's happy, no warnings.</p>\n\n<p>Note: to break down <code>i&lt;=5&amp;&amp;i&gt;=-1</code>, in <code>C</code>, <code>&lt;=</code> has higher <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">precedence</a> over <code>&amp;&amp;</code>, so effectively, your code behaves like <code>((i&lt;=5) &amp;&amp; (i&gt;=-1))</code> which is perfectly valid.</p>\n\n<p>[#] - For a detailed idea, see <a href=\"https://stackoverflow.com/a/27398592/2173917\">this answer</a> of mine.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 28320652, "answer_count": 3, "score": 2, "last_activity_date": 1423055530, "creation_date": 1423050118, "last_edit_date": 1423055530, "question_id": 28320508, "link": "https://stackoverflow.com/questions/28320508/syntactical-sour", "title": "Syntactical Sour", "body": "<p>Well there are just some weird syntax question thrown to you by some author of the books just to check the understanding of the syntax while I think these kind of weird syntax may not be used by any programmer but just for the sake of understanding, I would like to understand how the following for loop behaves and why the compiler doesn't throws any syntactical error</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    short int i=0;\n    for(i&lt;=5&amp;&amp;i&gt;=-1 ;++i; i&gt;0)\n      printf(\"%d\",i);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "bit-manipulation", "integer-overflow", "bitwise-xor"], "comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 35, "creation_date": 1423051969, "post_id": 28320454, "comment_id": 44990297, "body": "XOR is a bitwise operation. It does not generate integers, it generates bit patterns. The result is logically either a trap representation, or a non-trap representation of a value. It&#39;s not possible to get a &quot;too large&quot; result because the &quot;too large&quot; result would not be representable."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 1, "creation_date": 1423052092, "post_id": 28320454, "comment_id": 44990364, "body": "@YvesDaoust, why do you think it could <i>not</i> possibly lead to a large integer? Must the result of XOR always be a <i>small</i> integer? Perhaps you misread &#39;large&#39; as &#39;larger&#39;?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1423052875, "post_id": 28320454, "comment_id": 44990753, "body": "@davmac I think it would be reasonable to assume that OP meant <i>larger</i> specifically. One might assume that he&#39;s expanding on the previous sentence which is a question about <i>too large</i> integer. The result can only be too large if it is <i>larger</i> than the operands which are <i>not too large</i> by definition (in the context of overflow)."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1423053650, "post_id": 28320454, "comment_id": 44991171, "body": "@user2079303 I completely disagree that it is reasonable to make such an assumption, especially given the context and the repeated &quot;large integer&quot; in the following question (labelled 1), which expounds to &quot;such a large integer that cannot be stored in the <code>int</code> type?&quot;. That such an integer must be larger than the operands is your own intuition/knowledge, it is not being stated by the OP. In any case XOR can certainly result in a <i>larger</i> value than either operand, so why the &quot;how ???&quot; question?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 11, "creation_date": 1423053705, "post_id": 28320454, "comment_id": 44991210, "body": "<code>x^y</code> can be bigger than <code>max(x, y)</code>, so in that respect you can get a &quot;large integer&quot; for some definition of large."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 1, "creation_date": 1423053957, "post_id": 28320454, "comment_id": 44991356, "body": "This question is rather unexpected, given that the OP knows that XOR can generate &quot;large&quot; numbers, without knowing why nor how."}, {"owner": {"reputation": 9866, "user_id": 1105805, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7a694594978a256520ac4d5b938aea5b?s=128&d=identicon&r=PG", "display_name": "Rasmi Ranjan Nayak", "link": "https://stackoverflow.com/users/1105805/rasmi-ranjan-nayak"}, "edited": false, "score": 0, "creation_date": 1423059870, "post_id": 28320454, "comment_id": 44995241, "body": "I have one more question, if the array is <code>int arr[] = {10, 20, 30 ,5, 6, 20, 10,30 };</code>. Will this logic work? Because it did not work for me"}, {"owner": {"reputation": 507073, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 9866, "user_id": 1105805, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7a694594978a256520ac4d5b938aea5b?s=128&d=identicon&r=PG", "display_name": "Rasmi Ranjan Nayak", "link": "https://stackoverflow.com/users/1105805/rasmi-ranjan-nayak"}, "edited": false, "score": 2, "creation_date": 1423065595, "post_id": 28320454, "comment_id": 44999139, "body": "@RasmiRanjanNayak: No, this algorithm will not &quot;find&quot; lonely integers. It&#39;s only proposition is <code>LonelyInteger != 0  \u2192  there is a lonely value</code> (notice it&#39;s not a <code>\u2194</code>, as can be seen from the example <code>{1,2,3}</code>)"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 507073, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 3, "creation_date": 1423073862, "post_id": 28320454, "comment_id": 45004562, "body": "@Bergi: If there&#39;s only one lonely integer, it will result in that value.  If there&#39;s multiples, then you&#39;re right that the only information is if it&#39;s !=0"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 5, "creation_date": 1423124465, "post_id": 28320454, "comment_id": 45023606, "body": "@harold <code>x^y &lt;= x+y &lt; 2*max(x,y)</code> , so you cannot set any bit higher than was already set in either operand. Example: 128^127 = 255, which is still an 8-bit quantity."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1423239422, "post_id": 28320559, "comment_id": 45080818, "body": "But do we have sufficient guarantees that <code>int</code> is binary-like?  That the max int happens at a limit of <code>2^n-1</code> for some <code>n</code>?"}, {"owner": {"reputation": 1873, "user_id": 2566065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61eea6e2addff0321618ffe6c2582c9b?s=128&d=identicon&r=PG", "display_name": "assembly_wizard", "link": "https://stackoverflow.com/users/2566065/assembly-wizard"}, "edited": false, "score": 0, "creation_date": 1423605758, "post_id": 28320559, "comment_id": 45214942, "body": "This is about bitwise XOR, so of course it&#39;s binary like. If it wasn&#39;t we&#39;d have to define a non-bitwise xor (not binary)."}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "reply_to_user": {"reputation": 1873, "user_id": 2566065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61eea6e2addff0321618ffe6c2582c9b?s=128&d=identicon&r=PG", "display_name": "assembly_wizard", "link": "https://stackoverflow.com/users/2566065/assembly-wizard"}, "edited": false, "score": 0, "creation_date": 1423614813, "post_id": 28320559, "comment_id": 45218628, "body": "@ThatWeirdo binarity of XOR was never disputed here, but the binarity of <code>int</code>s. What if they happen to be stored in 9-trit register of a ternary computer, and the maximum value is not one less than a power of two?"}, {"owner": {"reputation": 970, "user_id": 4018460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/4018460/bhaskar"}, "reply_to_user": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1423649116, "post_id": 28320559, "comment_id": 45230513, "body": "@JanDvorak : Where did you see a ternary computer? Or, is your question just theoretical?"}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "reply_to_user": {"reputation": 970, "user_id": 4018460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/4018460/bhaskar"}, "edited": false, "score": 0, "creation_date": 1423651454, "post_id": 28320559, "comment_id": 45231866, "body": "@L16H7 I was mostly thinking about <a href=\"http://ternary.me/wiki/index.php?n=Main.HomePage\" rel=\"nofollow noreferrer\">3niti</a>, but <a href=\"http://en.wikipedia.org/wiki/Ternary_computer\" rel=\"nofollow noreferrer\">there have been a few (two or three notable) hardware implementations</a> as well."}, {"owner": {"reputation": 970, "user_id": 4018460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/4018460/bhaskar"}, "reply_to_user": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 1, "creation_date": 1423736682, "post_id": 28320559, "comment_id": 45273295, "body": "@JanDvorak : What&#39;s the definition (or truth table) of XOR operator for ternary system? I think even C and C++ don&#39;t know. If ternary computer is designed, I think a new programming language have to be created from scratch."}], "tags": [], "owner": {"reputation": 46725, "user_id": 34065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d21d33ac8f67242d2c1dd61c8696d358?s=128&d=identicon&r=PG", "display_name": "schnaader", "link": "https://stackoverflow.com/users/34065/schnaader"}, "is_accepted": true, "score": 120, "last_activity_date": 1423052390, "last_edit_date": 1423052390, "creation_date": 1423050272, "answer_id": 28320559, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28320559#28320559", "title": "Can XOR of two integers go out of bounds?", "body": "<p><code>XOR</code> will never go out of bounds because it combines bits and doesn't create new bits where no bits were set before.</p>\n\n<p>The result <code>5</code> is correct. Look at the binary representation of your value and the <code>XOR</code> result</p>\n\n<pre><code>10    00001010\n20    00010100\n30    00011110\n 5    00000101\n20    00010100\n10    00001010\n30    00011110\n--------------\n      00000101 =&gt; 5\n</code></pre>\n\n<p>An easy help for calculating a result of many <code>XOR</code>ed values is: The result will have a bit set where an odd number of bits are combined, no bit set for even number of bits.</p>\n\n<blockquote>\n  <p>If it is not possible that this can happen then is there a proof for this?</p>\n</blockquote>\n\n<p><code>XOR</code> is equivalent to addition without carry on the individual bits. When you add bits without carry, no overflow can happen and so the <code>int</code> value can't go out of bounds.</p>\n"}, {"comments": [{"owner": {"reputation": 1847, "user_id": 683104, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4497fac3d0712a4b2302835529305aa5?s=128&d=identicon&r=PG", "display_name": "Expert Novice", "link": "https://stackoverflow.com/users/683104/expert-novice"}, "edited": false, "score": 0, "creation_date": 1423052004, "post_id": 28320623, "comment_id": 44990318, "body": "<code>Only if the operands are negative.</code> How?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1847, "user_id": 683104, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4497fac3d0712a4b2302835529305aa5?s=128&d=identicon&r=PG", "display_name": "Expert Novice", "link": "https://stackoverflow.com/users/683104/expert-novice"}, "edited": false, "score": 0, "creation_date": 1423052189, "post_id": 28320623, "comment_id": 44990415, "body": "@ExpertNovice Because, (assuming 2&#39;s complement), the most significant bit of negative numbers is <code>1</code>. And it is <code>0</code> for positive numbers. If both operands are negative, then it follows that both of their most significant bit is <code>1</code>. <code>1 XOR 1</code> is <code>0</code>. Therefore the most significant bit of XOR of two negative numbers is <code>0</code> i.e. the integer is positive. Positive numbers are larger than negative."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1847, "user_id": 683104, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4497fac3d0712a4b2302835529305aa5?s=128&d=identicon&r=PG", "display_name": "Expert Novice", "link": "https://stackoverflow.com/users/683104/expert-novice"}, "edited": false, "score": 0, "creation_date": 1423054161, "post_id": 28320623, "comment_id": 44991462, "body": "I take that back about only negative operands having larger result. XOR of positive numbers can be larger than operands as well. But not larger than fits in the number of bits of operands. I got the implication backwards. The result is always larger if both operands are negative, but they&#39;re not the only case of larger result. My bad."}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1423162828, "post_id": 28320623, "comment_id": 45047602, "body": "right, <code>1 ^ 4</code> is <code>5</code> which is larger than either \u2014 but the <i>highest bit set</i> doesn&#39;t increase. And the ability to represent <code>4</code> implies the ability to represent <code>5</code>, <code>6</code>, and <code>7</code> as well (C99 6.2.6.2)"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 11, "last_activity_date": 1424965572, "last_edit_date": 1424965572, "creation_date": 1423050438, "answer_id": 28320623, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28320623#28320623", "title": "Can XOR of two integers go out of bounds?", "body": "<blockquote>\n  <p>Is it even possible that XOR will generate such a large integer value that cannot be stored in the int type?</p>\n</blockquote>\n\n<p>If the operands are <code>int</code>, then no.</p>\n\n<blockquote>\n  <p>If it is not possible that this can happen then is there a proof for this?</p>\n</blockquote>\n\n<p>Well, it's trivial from the definition. This is hardly a mathematically rigorous proof, but you could consider that a bit in the output of XOR will only be 1 if one of the operands has 1 in that position. Since an out of range bit cannot be 1 in the operands, there is not output bit with value 1 that is out of range.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423052565, "post_id": 28320774, "comment_id": 44990590, "body": "In C++ it doesn&#39;t actually say what happens when negative zero is generated, so far as I can see"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1423058817, "post_id": 28320774, "comment_id": 44994569, "body": "nit: The C standard allows all bits zero but the sign bit to trap for 2&#39;s complement (that is, <code>INT_MIN</code> may be <code>-INT_MAX</code> and <code>INT_MAX ^ -1</code> undefined). While I know of examples of non-2&#39;s complement machines, I don&#39;t know if such a 2&#39;s complement implementation exists, though (maybe it&#39;s just in the standard because it usually isn&#39;t a burden for the programmer)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 2, "creation_date": 1423075043, "post_id": 28320774, "comment_id": 45005204, "body": "@mafso: I believe some two&#39;s-complement implementations define INT_MIN to be -32767 so as to avoid any obligation to handle some corner cases with things like printf, division, etc.  For example, on a machine which only has a signed right-shift operation, evaluation of n/4 when n is negative might compute -(-n)&gt;&gt;2.  If n=-32767, that would yield -8191, but if n=-32768 it would yield 8192.  If INT_MIN is -32767, computation of (-32768)/4 would be Undefined Behavior, so having it yield 8192 would be perfectly legitimate."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 2, "creation_date": 1423075479, "post_id": 28320774, "comment_id": 45005435, "body": "@mafso: Additionally, while I don&#39;t know of any hardware that regards -INT_MAX-1 as either a trap or a NaN, there are certainly times when a NaN would be useful (being able to test after the fact if overflow occurred at any stage in a computation could likely be more efficient than having to have code check for and trap overflows at each stage, especially on systems that support out-of-order execution).  I&#39;m not sure such hardware could get past the chicken-and-egg problem, but I wouldn&#39;t mind having such a thing available."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 1, "creation_date": 1423161184, "post_id": 28320774, "comment_id": 45046589, "body": "The next words after your quote are &quot;other than as part of an exceptional condition such as an overflow, and this cannot occur with unsigned types.&quot; - generating a value with the sign bit 1 and all other bits 0 (i.e. <code>-INT_MAX-1</code> on a twos-complement system), on a system which defines this as a trap representation, could definitely be regarded as an overflow."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1423175368, "post_id": 28320774, "comment_id": 45054101, "body": "@Random832 &quot;overflow&quot; normally implies a value being out of range, and the bitwise operations don&#39;t work with values, although perhaps &quot;overflow&quot; could also describe this situation as you are suggesting. Maybe we need another question about what exactly &quot;overflow&quot; means."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 27, "last_activity_date": 1423052292, "last_edit_date": 1592644375, "creation_date": 1423050957, "answer_id": 28320774, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28320774#28320774", "title": "Can XOR of two integers go out of bounds?", "body": "<p>(This post applies to C, not C++)</p>\n<p>The bitwise operators cannot cause a trap representation due to setting invalid padding bits, see C11 6.2.6.2/1 footnote:</p>\n<blockquote>\n<p>...no arithmetic operation on valid values can generate a trap\nrepresentation...</p>\n</blockquote>\n<p>(The meaning of &quot;arithmetic operation&quot; <a href=\"https://stackoverflow.com/questions/24665835/what-is-the-definition-of-arithmetic-operation-in-c99\">is unclear</a> but the index links to 6.5.11 which is the definition of XOR).</p>\n<p>However, in C they can cause a <em>negative zero</em> to be generated. In 2's complement there is no negative zero. But say you were on a system with 1's complement then you could generate negative zero via <code>^</code> and this might cause a trap representation. 6.2.6.2/3 explicitly says that this is possible:</p>\n<blockquote>\n<p>If the implementation supports negative zeros, they shall be generated only by:</p>\n<p>\u2014 the &amp;, |, ^, ~, &lt;&lt;, and &gt;&gt; operators with operands that produce such a value;</p>\n</blockquote>\n<p>Finally 6.2.6.2/2 implies (I'm pretty sure anyway) that it's not possible to have any combination of value bits that would represent an integer exceeding <code>INT_MAX</code></p>\n<hr />\n<p>To summarise, the possible results of <code>^</code> on two <code>int</code>s are:</p>\n<ul>\n<li>Another valid <code>int</code> value (perhaps with different but non-trapping padding bits to other versions of the same value)</li>\n<li>A negative zero, which may or may not cause a trap</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1423076344, "post_id": 28320919, "comment_id": 45005895, "body": "Will this invalid result cause undefined behavior?"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1423136566, "post_id": 28320919, "comment_id": 45030499, "body": "@Ruslan: For C++, I&#39;d say yes; the standard doesn&#39;t say much about exactly which signed values are valid, and what happens in the case of invalid ones, so the behaviour doesn&#39;t seem to be defined. I can&#39;t speak for C."}], "tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 38, "last_activity_date": 1423052434, "last_edit_date": 1423052434, "creation_date": 1423051429, "answer_id": 28320919, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28320919#28320919", "title": "Can XOR of two integers go out of bounds?", "body": "<p>The result can never be \"too large\" in the sense of its representation requiring more bits than <code>int</code> provides, since the operation is defined to combine bit values of its operands, not produce any new bits. Perhaps a better question might be, can the result be something other than a valid value representation of an <code>int</code>?</p>\n\n<p>For unsigned integers, no. All bit patterns, and hence the result of all bitwise operations, are valid value representations.</p>\n\n<p>For signed integers, it depends on the implementation-defined representation of negative values. Every implementation you're likely to encounter uses 2's-complement, in which again every bit pattern is valid; so again, the result of any bitwise operation will be a valid representation.</p>\n\n<p>However, the standard also allows other representations, in which there may be one or more invalid bit patterns. In that case, it's possible for a bitwise operation, with two valid operands, to produce that pattern, and hence produce an invalid result.</p>\n"}, {"comments": [{"owner": {"reputation": 2495, "user_id": 1507941, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/114b90a751acafeb9d30d2efbb60bf77?s=128&d=identicon&r=PG", "display_name": "Pluto", "link": "https://stackoverflow.com/users/1507941/pluto"}, "edited": false, "score": 0, "creation_date": 1423068478, "post_id": 28320950, "comment_id": 45001254, "body": "Use the backticks for inline code. For example <b>Max value of `int` is `x = 999999999;`</b> becomes <b>Max value of <code>int</code> is <code>x = 999999999;</code></b>"}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 5, "creation_date": 1423157490, "post_id": 28320950, "comment_id": 45044497, "body": "This doesn&#39;t prove anything."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 2, "creation_date": 1423174881, "post_id": 28320950, "comment_id": 45053900, "body": "999,999,999 xor 73,741,824 is 1,073,741,823. However, the max value of int is unlikely to be 999,999,999."}], "tags": [], "owner": {"reputation": 1796, "user_id": 3709988, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/mqHbf.jpg?s=128&g=1", "display_name": "Arun Tyagi", "link": "https://stackoverflow.com/users/3709988/arun-tyagi"}, "is_accepted": false, "score": 3, "last_activity_date": 1423088225, "last_edit_date": 1423088225, "creation_date": 1423051538, "answer_id": 28320950, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28320950#28320950", "title": "Can XOR of two integers go out of bounds?", "body": "<p>Suppose</p>\n\n<pre><code>int xor  = x^y;\nMax value of int is x = 999999999;\nMax value of Xor will come if y=0;\nand Max Xor is 999999999;\n</code></pre>\n\n<p>which is in limit. :)</p>\n"}, {"comments": [{"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 5, "creation_date": 1423070531, "post_id": 28321993, "comment_id": 45002626, "body": "C and C++ don&#39;t require that every possible sequence of n bits represent a valid value.  On modern machines, they typically will, but some wacky architectures might not."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1423072752, "post_id": 28321993, "comment_id": 45003969, "body": "@cHao that only appears with trap representation. On 1 or 2&#39;s complement or sign-magnitude all bit patterns are valid"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1423075647, "post_id": 28321993, "comment_id": 45005522, "body": "@L\u01b0uV\u0129nhPh&#250;c: I think a two&#39;s-complement machine may legitimately define INT_MIN to be -INT_MAX, freeing itself of any obligation to ensure that arithmetic involving -INT_MIN-1 behaves sensibly."}], "tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 10, "last_activity_date": 1537840344, "last_edit_date": 1537840344, "creation_date": 1423054623, "answer_id": 28321993, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28321993#28321993", "title": "Can XOR of two integers go out of bounds?", "body": "<p>XOR, AND, OR, NOT and any other bitwise operators produce <em>bitwise</em> results, with the bits in the result combined from the bits at exactly the same position in the inputs. So n-bit inputs produce n-bit without any higher bit, so how can it goes off bounds?</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 4529830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd8c9996090b2b5a15190331697cbd8?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Best", "link": "https://stackoverflow.com/users/4529830/eric-best"}, "is_accepted": false, "score": 7, "last_activity_date": 1424210759, "last_edit_date": 1424210759, "creation_date": 1423072678, "answer_id": 28328155, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28328155#28328155", "title": "Can XOR of two integers go out of bounds?", "body": "<p>In a <strong>GENERAL CASE</strong> the described algorithm cannot really find a lonely integer in an array.\nWhat it really finds is <code>XOR</code> of all elements that occur odd number times there.</p>\n\n<p>So, if there is just one 'lonely' element there, say an element <code>'a'</code>, and all the other elements occur EVEN number times in the array, then it works 'as required' -> it finds this lonely element <code>'a'</code>.</p>\n\n<p>Why?</p>\n\n<p>The algorithm carries out <code>XOR</code> of all the elements in the array <code>(a ^ b ^ c ^ d ^ ...)</code></p>\n\n<p>The <code>XOR</code> operation has the following properties:</p>\n\n<p>1)  <code>a ^ a = 0                    (non-equivalence)</code></p>\n\n<p>2)  <code>a ^ 0 = a                    (neutrality of 0)</code></p>\n\n<p>3)  <code>a ^ b = b ^ a                (commutative property)</code></p>\n\n<p>4) <code>(a ^ b) ^ c = a ^ (b ^ c)    (associative property)</code></p>\n\n<p>Let's assume, for instance, an array with elements: <code>{a, b, c, a, c, b, a, c}</code></p>\n\n<p>(element <code>'a'</code> - 3 times, element <code>'b'</code> - twice, element <code>'c'</code> - 3 times)</p>\n\n<p>Then, according to the above mentioned <code>XOR</code> properties, the algorithm result</p>\n\n<p><code>R = (((((((a ^ b) ^ c) ^ a) ^ c) ^ b) ^ a) ^ c)</code></p>\n\n<p>can be rearranged as follows:</p>\n\n<p><code>R = (a ^ b) ^ (c ^ a) ^ (c ^ b) ^ (a ^ c) =</code></p>\n\n<p><code>=   (a ^ a) ^ (b ^ b) ^ (c ^ c) ^ (a ^ c) =</code></p>\n\n<p><code>=      0    ^    0    ^    0    ^ (a ^ c) = (a ^ c)</code></p>\n\n<p>i.e.,</p>\n\n<p>a) ...<strong>all elements that occur an EVEN number times result in zero</strong></p>\n\n<p>b) ...<strong>all elements that occur an ODD number times are XOR-ed</strong> and create the final result</p>\n\n<p><code>XOR</code> is a <strong>bit-wise</strong> operation, so it never can overflow, of course.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 5, "creation_date": 1423138398, "post_id": 28334793, "comment_id": 45031683, "body": "I can&#39;t really endorse this comment: the C Standard directly says that you can XOR two integers ."}, {"owner": {"reputation": 2713, "user_id": 2195451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb815b3ece6a8a7668baab05c4787a9?s=128&d=identicon&r=PG", "display_name": "The Spooniest", "link": "https://stackoverflow.com/users/2195451/the-spooniest"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423151527, "post_id": 28334793, "comment_id": 45040665, "body": "C lets you do something that looks like XOR&#39;ing two integers, using the bitwise XOR operation as specified in section 6.5.12, but that operation still treats the operands like bags of bits. Some &quot;logical operators&quot; do exist that operate on the values of integers (specifically, AND, OR, and NOT; C renders these as &amp;&amp;, ||, and !). But there is no logical operator for XOR."}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1423615111, "post_id": 28334793, "comment_id": 45218712, "body": "I can treat integers as infinitely large bags of bits, XOR those and always end up with a valid integer... In fact, I can also do that for any binary fraction. Non-terminating fractions do cause 0.9999... problems, though."}, {"owner": {"reputation": 2713, "user_id": 2195451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb815b3ece6a8a7668baab05c4787a9?s=128&d=identicon&r=PG", "display_name": "The Spooniest", "link": "https://stackoverflow.com/users/2195451/the-spooniest"}, "reply_to_user": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1423662192, "post_id": 28334793, "comment_id": 45238291, "body": "@JanDvorak: If you use some kind of variable-length encoding for integers, then yes, you can do this. You can also do it for fractions, or, in fact, for anything else, as long as you have some way to map them to bags of bits and vice versa. But the XOR operation still treats them as bags of bits, not as the variable-length numbers or fractions or whatever other structure you may have initially used."}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1423663963, "post_id": 28334793, "comment_id": 45239483, "body": "@TheSpooniest I&#39;m not using a variable-length encoding. I&#39;m using an infinite-length encoding, which there is a natural one for integers. As for a definition without using binary, there&#39;s the mex operation = minimal excluded value: f(x,y) is the least non-negative integer that is different from every f(x&#39;,y) for x&#39;&lt;y and from every f(x,y&#39;) for every y&#39;. It turns out to be isomorphic to the XOR operation."}, {"owner": {"reputation": 2713, "user_id": 2195451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb815b3ece6a8a7668baab05c4787a9?s=128&d=identicon&r=PG", "display_name": "The Spooniest", "link": "https://stackoverflow.com/users/2195451/the-spooniest"}, "reply_to_user": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1423664848, "post_id": 28334793, "comment_id": 45240089, "body": "@JanDvorak: I assume that you&#39;re talking about writing down integers the way that we do in real life, but that&#39;s not infinite-length unless you write out every integer with an infinite number of leading zeroes: in normal usage it is variable-length. Either way, the XOR operation still treats the two integers as bags of bits. The mex operator that you mention is interesting, but it doesn&#39;t apply to integers in general: it only works properly on the Grundy numbers."}], "tags": [], "owner": {"reputation": 2713, "user_id": 2195451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb815b3ece6a8a7668baab05c4787a9?s=128&d=identicon&r=PG", "display_name": "The Spooniest", "link": "https://stackoverflow.com/users/2195451/the-spooniest"}, "is_accepted": false, "score": 21, "last_activity_date": 1423100323, "creation_date": 1423100323, "answer_id": 28334793, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28334793#28334793", "title": "Can XOR of two integers go out of bounds?", "body": "<p><strong>Strictly speaking, you can't XOR two integers</strong>. You can XOR two integer-sized bags of bits, and you can treat those bags of bits as integers at other times. You can even treat them as integers at <em>all</em> other times.</p>\n\n<p><strong>But at the moment you perform the XOR operation, you're treating them as something quite different from integers, or even numbers, <em>per se</em></strong>: they're just two sequences of bits, where corresponding bits get compared. The concept of overflow doesn't apply to that, and so if you then decide to treat the result as an integer, it cannot overflow either.</p>\n"}, {"tags": [], "owner": {"reputation": 20407, "user_id": 1017941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/yocPw.jpg?s=128&g=1", "display_name": "Hauleth", "link": "https://stackoverflow.com/users/1017941/hauleth"}, "is_accepted": false, "score": 10, "last_activity_date": 1504102993, "last_edit_date": 1504102993, "creation_date": 1423168454, "answer_id": 28353507, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28353507#28353507", "title": "Can XOR of two integers go out of bounds?", "body": "<p>No it cannot. Unlike others answers mine would be mathematical proof.</p>\n\n<p><code>XOR</code> is shortcut for <em>exclusive or</em> or <em>exclusive disjunction</em> (<code>\u2295</code>) and can be defined as:</p>\n\n<pre><code>A \u2295 B = (A \u222a B)\\(A \u2229 B)\n</code></pre>\n\n<p>Your thesis is that</p>\n\n<pre><code>\u2203x: x \u2209 A \u2227 x \u2209 B \u2227 x \u2208 (A \u2295 B)\n</code></pre>\n\n<p>So from first equation</p>\n\n<pre><code>x \u2208 (A \u222a B)\\(A \u2229 B)\n</code></pre>\n\n<p>What can be expressed as</p>\n\n<pre><code>x \u2208 (A \u222a B) \u2227 x \u2209 (A \u2229 B)\n</code></pre>\n\n<p>The second part can be expressed as:</p>\n\n<pre><code>x \u2209 A \u2227 x \u2209 B\n</code></pre>\n\n<p>The first part can be expressed as:</p>\n\n<pre><code>x \u2208 A \u2228 x \u2208 B\n</code></pre>\n\n<p>What collide with our assumption that <code>x \u2209 A \u2227 x \u2209 B</code> so thesis is false for any set <code>A</code> and <code>B</code>.</p>\n\n<p>Q.E.D.</p>\n"}, {"tags": [], "owner": {"reputation": 5516, "user_id": 2128327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG", "display_name": "Khaled.K", "link": "https://stackoverflow.com/users/2128327/khaled-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1423642662, "last_edit_date": 1423642662, "creation_date": 1423642108, "answer_id": 28449379, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds/28449379#28449379", "title": "Can XOR of two integers go out of bounds?", "body": "<blockquote>\n  <p>Is it even possible that XOR will generate such a large integer value\n  that cannot be stored in the int type?</p>\n</blockquote>\n\n<pre><code>Data-Type3 = Data-Type1 operator Data-Type2\n</code></pre>\n\n<blockquote>\n  <p>If it is not possible that this can happen then is there a proof for\n  this?</p>\n</blockquote>\n\n<p>We've <code>Data-Type3</code> in case of Integers is the one out of <code>Data-Type1</code> and <code>Data-Type2</code> that has a bigger size, even in case of addition or multiplication.</p>\n\n<pre><code>SIZE(Data-Type3) = MAX(SIZE(Data-Type1), SIZE(Data-Type2))\n</code></pre>\n\n<p>So if <code>Data-Type1 = Data-Type2</code> then that's the return-type too.</p>\n\n<pre><code>Short + Short   = Short\nShort + Integer = Integer\nShort + Long    = Long\n\nInteger + Short   = Integer\nInteger + Integer = Integer\nInteger + Long    = Long\n\nLong + Short   = Long\nLong + Integer = Long\nLong + Long    = Long\n</code></pre>\n\n<p>What can happen is an overflow, which can occur when an operation have a carry. In 2's complement, it's when the carry into the high order column doesn't equal the carry out of the high order column. <em><a href=\"http://chortle.ccsu.edu/assemblytutorial/Chapter-08/ass08_23.html\" rel=\"nofollow\">read more</a></em></p>\n\n<p>But <strong>XOR operation cannot overflow</strong>, because XOR operation does not generate a carry, since <strong>XOR is a bit-wise operation</strong> like NOT.</p>\n"}], "owner": {"reputation": 1847, "user_id": 683104, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4497fac3d0712a4b2302835529305aa5?s=128&d=identicon&r=PG", "display_name": "Expert Novice", "link": "https://stackoverflow.com/users/683104/expert-novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13978, "favorite_count": 7, "protected_date": 1423588809, "accepted_answer_id": 28320559, "answer_count": 10, "score": 53, "last_activity_date": 1537840344, "creation_date": 1423049965, "last_edit_date": 1537804672, "question_id": 28320454, "link": "https://stackoverflow.com/questions/28320454/can-xor-of-two-integers-go-out-of-bounds", "title": "Can XOR of two integers go out of bounds?", "body": "<p>I had been studying the algorithm for finding lonely integers in an array, and here is the implementation:</p>\n\n<pre><code>int arr[] = {10, 20, 30, 5, 20, 10, 30};\nint LonelyInteger = 0;\nfor(int i=0; i&lt; 7; i++)\n{\n    LonelyInteger = LonelyInteger ^ arr[i];\n}\n</code></pre>\n\n<p>The result is <code>5</code>.</p>\n\n<p>My question is - supposedly the integers (getting generated by the <code>XOR</code> operation) are <strong>too large</strong> due to this operation:</p>\n\n<pre><code>LonelyInteger ^ arr[i]\n</code></pre>\n\n<p>Which leads to a potentially large integer which cannot be represented by the datatype say <code>int</code> in this case. My questions are:</p>\n\n<ol>\n<li>Is it even possible that <code>XOR</code> will generate such a large integer value that cannot be stored in the <code>int</code> type?</li>\n<li>If it is not possible that this can happen then is there a proof for this?</li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1423048595, "post_id": 28319944, "comment_id": 44988472, "body": "What entries you actually insert to the list? (Hint, add debug prints to <code>creat</code>). Also, check return value of <code>scanf</code>, because if there is parse error, your <code>inp</code> and <code>bindrange</code> will be left uninitialized."}, {"owner": {"reputation": 154, "user_id": 4497639, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-RLLqItvwRik/AAAAAAAAAAI/AAAAAAAAABg/L0Ij-MTw0FQ/photo.jpg?sz=128", "display_name": "Abhilash Cherukat", "link": "https://stackoverflow.com/users/4497639/abhilash-cherukat"}, "edited": false, "score": 0, "creation_date": 1423048624, "post_id": 28319944, "comment_id": 44988485, "body": "Try to pass the Head Pointer to the Display function and assign that to the new_node variable."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423048911, "last_edit_date": 1423048911, "creation_date": 1423048564, "answer_id": 28320005, "question_id": 28319944, "link": "https://stackoverflow.com/questions/28319944/singly-linked-list-display-for-checking-in-c/28320005#28320005", "title": "Singly Linked List Display for checking in C", "body": "<p>In your code, you're defining</p>\n\n<pre><code>int inp[4];\n</code></pre>\n\n<p>and then you're reading</p>\n\n<pre><code>for(i=0;i&lt;5;i++)\n    {\n        scanf(\"%d\",&amp;inp[i]);\n    }\n</code></pre>\n\n<p>Clearly past the allocated memory when <code>i</code> is 4 [array indexing in c starts from <code>0</code>]. So, <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Also, as Mr. Joachim Pileborg mentioned, <code>struct node * current</code> is local to the <code>creat()</code> function, as goes out-of-scope each and every time the function is finished. </p>\n\n<p>Side Effects:</p>\n\n<ul>\n<li>Every time you start with a fresh <code>current</code> having garbage [you did not initialize].</li>\n<li>You'll be dereferencing uninitialized memory.</li>\n</ul>\n\n<p>You need a way to store the value. Otherwise, again, UB.</p>\n\n<p>P.S - Both the cases cause UB in their own ways. :-)</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1423048676, "creation_date": 1423048676, "answer_id": 28320039, "question_id": 28319944, "link": "https://stackoverflow.com/questions/28319944/singly-linked-list-display-for-checking-in-c/28320039#28320039", "title": "Singly Linked List Display for checking in C", "body": "<p>The variable <code>current</code> is a <strong><em>local</em></strong> variable inside the <code>creat</code> function, and it goes out of scope (and \"disappears\") every time the <code>creat</code> function exits.</p>\n\n<p>That means two things: The variable will always be uninitialized everytime you call the function, and by dereferencing the (uninitialized) pointer you have <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behavior</em></a>.</p>\n\n<p>The reason for the undefined behavior is just because the variable is uninitialized. Uninitialized non-static local variables have an <em>indeterminate</em> value, and in reality if will be seemingly random. So what you are doing is taking this pointer that points to a \"random\" location and write to it.</p>\n\n<p>There are three possible solutions: One is to make the <code>current</code> variable <code>static</code>, the other is to make it global, and the third is to not have it at all and find the end every time the function is called. Oh, and if you go for one of the two first, you should probably rename it to <code>end</code> (or something similar) because that's what it is, a pointer to the end of the list.</p>\n"}], "owner": {"reputation": 27, "user_id": 4407209, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1dde393b0d08d7afdb697446ea2db910?s=128&d=identicon&r=PG&f=1", "display_name": "imagineracoon", "link": "https://stackoverflow.com/users/4407209/imagineracoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 28320039, "answer_count": 2, "score": -2, "last_activity_date": 1423048911, "creation_date": 1423048398, "question_id": 28319944, "link": "https://stackoverflow.com/questions/28319944/singly-linked-list-display-for-checking-in-c", "title": "Singly Linked List Display for checking in C", "body": "<p>I am implementing Singly Linked List on my program. Now I have this display function to display what is inside my singly linked list. Now the problem is when I call my display function. It only prints the head. For example <code>20--&gt;NULL</code>. Display function for checking if I implement Singly linked list correctly.</p>\n\n<pre><code>struct node\n{\n    int data;\n    struct node *next;\n}*start=NULL;\n\nvoid display()\n{\n struct node *new_node;\n printf(\"The Linked List : \");\n new_node=start;\n while(new_node!=NULL)\n   {\n   printf(\"%d---&gt;\",new_node-&gt;data);\n   new_node=new_node-&gt;next;\n   }\n  printf(\"NULL\");\n}\n\n\n\nvoid creat(int num)\n{\n      struct node *new_node,*current;\n\n      new_node=malloc(sizeof(struct node));\n\n\n      new_node-&gt;data=num;\n      new_node-&gt;next=NULL;\n\n      if(start==NULL)\n      {\n      start=new_node;\n      current=new_node;\n      }\n      else\n      {\n      current-&gt;next=new_node;\n      current=new_node;\n      }\n      //printf(\"%d-&gt;\",new_node-&gt;data);\n}\n\nvoid main()\n{\n\n    int binrange,max=100,n,i,divi;\n    int inp[4];\n    clrscr();\n    printf(\"enter 5 numbers: \");\n    for(i=0;i&lt;5;i++)\n    {\n        scanf(\"%d\",&amp;inp[i]);\n    }\n    printf(\"\\nenter range: \");\n    scanf(\"%d\",&amp;binrange);\n    n=max/binrange;\n    divi=max/n;\n\n    for(i=0;i&lt;=max;i++)\n    {\n        if(i%divi==0 &amp;&amp; i&gt;0)\n        {\n            //create nodes here\n            //store i into nodes\n            creat(i);\n\n\n        }\n\n\n    }\n\n    display();\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c", "function", "declaration"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 2, "creation_date": 1423048341, "post_id": 28319836, "comment_id": 44988330, "body": "It&#39;s a variable declaration, not a function declaration. The variable name is <code>func</code>, and the variable type is &quot;pointer to a function that takes an <code>int</code> value and a <code>float</code> value as input, and returns an <code>int*</code> value as output&quot;."}, {"owner": {"reputation": 21, "user_id": 4528267, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wKhTy-A67ZI/AAAAAAAAAAI/AAAAAAAAAEk/2EPxo-1f9SI/photo.jpg?sz=128", "display_name": "Fotis RSL", "link": "https://stackoverflow.com/users/4528267/fotis-rsl"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1423048638, "post_id": 28319836, "comment_id": 44988493, "body": "Thanks a lot for a fast answer !"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1423049691, "post_id": 28319836, "comment_id": 44989066, "body": "See this tool: <a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a> - which unfortunately doesn&#39;t work if your variable is called <code>func</code>, apparently, but is otherwise very useful for this kind of task."}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1423048383, "creation_date": 1423048383, "answer_id": 28319939, "question_id": 28319836, "link": "https://stackoverflow.com/questions/28319836/complicated-function-declaration-in-c/28319939#28319939", "title": "Complicated function declaration in c", "body": "<p>No, read it from inside out, it's a pointer to a function, which takes two arguments, an <code>int</code> and a <code>float</code>, and returns a pointer to <code>int</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 4528267, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wKhTy-A67ZI/AAAAAAAAAAI/AAAAAAAAAEk/2EPxo-1f9SI/photo.jpg?sz=128", "display_name": "Fotis RSL", "link": "https://stackoverflow.com/users/4528267/fotis-rsl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1423048396, "creation_date": 1423048130, "last_edit_date": 1423048288, "question_id": 28319836, "link": "https://stackoverflow.com/questions/28319836/complicated-function-declaration-in-c", "title": "Complicated function declaration in c", "body": "<p>I have a question about a line of code that I cant really figure out </p>\n\n<pre><code>int *(*func)(int a, float b);   \n</code></pre>\n\n<p>I can't seem to understand what this means , is it a pointer to a pointer that points in a function that returns int ?</p>\n"}, {"tags": ["c", "gcc", "int", "embedded-linux", "short"], "comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 2, "creation_date": 1423046095, "post_id": 28319113, "comment_id": 44986988, "body": "There is no difference."}], "answers": [{"comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1423046130, "post_id": 28319145, "comment_id": 44987010, "body": "Same for long and long int."}, {"owner": {"reputation": 1380, "user_id": 3560873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4i37O.jpg?s=128&g=1", "display_name": "searchengine27", "link": "https://stackoverflow.com/users/3560873/searchengine27"}, "edited": false, "score": 0, "creation_date": 1598033371, "post_id": 28319145, "comment_id": 112336564, "body": "Does anyone know the history behind this? Why it was included at all?"}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 11, "last_activity_date": 1423046084, "creation_date": 1423046084, "answer_id": 28319145, "question_id": 28319113, "link": "https://stackoverflow.com/questions/28319113/what-is-the-difference-between-short-int-and-short-in-c/28319145#28319145", "title": "What is the difference between &quot;short int&quot; and &quot;short&quot; in c?", "body": "<p><code>short</code> is short for <code>short int</code>, they are equivalent in any C compiler. </p>\n\n<p>The same for <code>long int</code> vs <code>long</code>, <code>long long int</code> vs <code>long long</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1423047186, "post_id": 28319165, "comment_id": 44987664, "body": "You forget <code>auto signed short int</code> :P"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1423049121, "post_id": 28319165, "comment_id": 44988739, "body": "@AlterMann: <code>auto</code> is a storage class specifier, like <code>static</code>, <code>extern</code>, <code>register</code>, etc.  It doesn&#39;t specify a type."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1423049404, "post_id": 28319165, "comment_id": 44988903, "body": "@DietrichEpp, I mean <code>auto signed short int x;</code> =  <code>short x;</code>, but it&#39;s a joke ..."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1423046550, "last_edit_date": 1423046550, "creation_date": 1423046142, "answer_id": 28319165, "question_id": 28319113, "link": "https://stackoverflow.com/questions/28319113/what-is-the-difference-between-short-int-and-short-in-c/28319165#28319165", "title": "What is the difference between &quot;short int&quot; and &quot;short&quot; in c?", "body": "<p><code>short</code>, <code>short int</code>, <code>signed short int</code>, and <code>signed short</code> are all same data-types.</p>\n\n<p>So <code>sizeof(short) == sizeof(short int)</code></p>\n\n<p>The same goes for <code>long</code></p>\n"}], "owner": {"reputation": 113, "user_id": 3413894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7833a1b57acde6aaa786061d9f66b1?s=128&d=identicon&r=PG&f=1", "display_name": "Narasimha Reddy.P", "link": "https://stackoverflow.com/users/3413894/narasimha-reddy-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5309, "favorite_count": 2, "closed_date": 1423046169, "accepted_answer_id": 28319145, "answer_count": 2, "score": 9, "last_activity_date": 1423046550, "creation_date": 1423045989, "question_id": 28319113, "link": "https://stackoverflow.com/questions/28319113/what-is-the-difference-between-short-int-and-short-in-c", "closed_reason": "Duplicate", "title": "What is the difference between &quot;short int&quot; and &quot;short&quot; in c?", "body": "<p>what is the difference between declaring the variables as short int and short?\nIn gcc compiler the short  occupies 2 bytes(checked with sizeof(short)),and short int is also giving the 2bytes of size.Is both are same are different?In which case these declarations will helpful?</p>\n\n<p>Thanks In Advance</p>\n"}, {"tags": ["c", "command-prompt", "recycle-bin"], "comments": [{"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 1, "creation_date": 1423044864, "post_id": 28318658, "comment_id": 44986259, "body": "Did you try to replace the environment variable with the value in the string you pass to <code>system</code>?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1423045182, "post_id": 28318658, "comment_id": 44986457, "body": "Try using // instead of / and \\\\ instead of \\."}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1423073068, "post_id": 28318658, "comment_id": 45004141, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/28328052/why-do-i-have-to-use-double-backslashes-for-file-paths-in-code\">Why do I have to use double backslashes for file-paths in code?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1423048276, "post_id": 28319840, "comment_id": 44988298, "body": "There should be a question like &quot;why are files specified with a single backslash in code not being found&quot; so we can mark all such questions as duplicates to it."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1423049662, "post_id": 28319840, "comment_id": 44989049, "body": "@sashoalm There probably is, although I couldn&#39;t find one. I guess that questions on this don&#39;t have the appropriate keywords in the title. If you can&#39;t find one you can always change the title of this question."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1423048139, "creation_date": 1423048139, "answer_id": 28319840, "question_id": 28318658, "link": "https://stackoverflow.com/questions/28318658/empty-recyclebin-using-c-program/28319840#28319840", "title": "Empty Recyclebin using c program", "body": "<p>You need to escape the <code>\\</code> character:</p>\n\n<pre><code>int BinFiles()\n{   \n    char folderCommand[]= \"rd /s %systemdrive%\\\\$Recycle.bin\";\n    system(folderCommand);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 716, "user_id": 3126999, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dzCAQ.jpg?s=128&g=1", "display_name": "Amranur Rahman", "link": "https://stackoverflow.com/users/3126999/amranur-rahman"}, "is_accepted": false, "score": 0, "last_activity_date": 1544683077, "creation_date": 1544683077, "answer_id": 53756258, "question_id": 28318658, "link": "https://stackoverflow.com/questions/28318658/empty-recyclebin-using-c-program/53756258#53756258", "title": "Empty Recyclebin using c program", "body": "<pre><code>rd /s c:\\$Recycle.Bin\n</code></pre>\n\n<p>(In the above command, \u201cc\u201d is your Windows drive)</p>\n\n<p>Then Press Y key </p>\n\n<pre><code>C:\\WINDOWS\\system32&gt;rd /s c:\\#Recycle.Bin\nc:\\#Recycle.Bin, Are you sure (Y/N)? Y\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 4380490, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/xZ6TW.png?s=128&g=1", "display_name": "Zimad", "link": "https://stackoverflow.com/users/4380490/zimad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544683077, "creation_date": 1423044627, "last_edit_date": 1495540170, "question_id": 28318658, "link": "https://stackoverflow.com/questions/28318658/empty-recyclebin-using-c-program", "title": "Empty Recyclebin using c program", "body": "<p>I cant empty my recycle bin using <strong>c program it gives a \"file path not specified\" error.</strong>\nIt works perfectly when i past the <a href=\"https://stackoverflow.com/questions/9238953/how-to-empty-recyclebin-through-command-prompt\">command in the command prompt</a> but not in the c program. \nEven tried running visual studio in administrator mode.</p>\n\n<pre><code>int BinFiles()\n{   \nchar folderCommand[]= \"rd /s %systemdrive%\\$Recycle.bin\";\nsystem(folderCommand);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "malloc", "glib", "dlopen", "gtk2"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1423044569, "post_id": 28318565, "comment_id": 44986081, "body": "Use <code>int main(void)</code> instead of <code>void main()</code>"}, {"owner": {"reputation": 5844, "user_id": 4481808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3030aa9dce2e94a4e889ab2ea65d929?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Stigler", "link": "https://stackoverflow.com/users/4481808/sebastian-stigler"}, "edited": false, "score": 0, "creation_date": 1423044848, "post_id": 28318565, "comment_id": 44986253, "body": "Is the shared library  compiled with the <code>-fPIC</code> parameter? Have a look at <a href=\"http://stackoverflow.com/questions/5311515/gcc-fpic-option\">stackoverflow.com/questions/5311515/gcc-fpic-option</a>"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1423046193, "post_id": 28318565, "comment_id": 44987056, "body": "Do I correctly understand that in case of the shared library <code>malloc</code> is called inside the shared object and <code>free</code> inside the main executable? If so, then at least on Windows this is a no go (not sure about UNIX though),  try calling <code>free</code> in the same heap where <code>malloc</code> is called."}, {"owner": {"reputation": 41, "user_id": 1748059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6d184068537e26a32d19b2df5e79eb?s=128&d=identicon&r=PG", "display_name": "assen.totin", "link": "https://stackoverflow.com/users/1748059/assen-totin"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1423046199, "post_id": 28318565, "comment_id": 44987059, "body": "@AlterMann <code>main_f()</code> is not necessarily the <code>main()</code> function; as I explained, the code above is an example. On a side note, <code>void main()</code> is both perfectly legal and irrelevant to the issue discussed here."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1423046412, "post_id": 28318565, "comment_id": 44987189, "body": "No, <code>void main</code> is not legal, from the standard: The function called at program startup is named main. The implementation declares no prototype for this function. <b>It shall be defined with a return type of int</b> and with no parameters or with two parameters (referred to here as argc and argv)"}, {"owner": {"reputation": 41, "user_id": 1748059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6d184068537e26a32d19b2df5e79eb?s=128&d=identicon&r=PG", "display_name": "assen.totin", "link": "https://stackoverflow.com/users/1748059/assen-totin"}, "reply_to_user": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1423046441, "post_id": 28318565, "comment_id": 44987217, "body": "@RudolfsBundulis No, <code>free()</code> is also called in the shared library&#39;s code (and while the library is still opened). Also, the error happens at <code>return</code>, not at <code>free()</code>."}, {"owner": {"reputation": 41, "user_id": 1748059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6d184068537e26a32d19b2df5e79eb?s=128&d=identicon&r=PG", "display_name": "assen.totin", "link": "https://stackoverflow.com/users/1748059/assen-totin"}, "reply_to_user": {"reputation": 5844, "user_id": 4481808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3030aa9dce2e94a4e889ab2ea65d929?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Stigler", "link": "https://stackoverflow.com/users/4481808/sebastian-stigler"}, "edited": false, "score": 0, "creation_date": 1423046772, "post_id": 28318565, "comment_id": 44987426, "body": "@SebastianStigler Yes, the code for the shared library is linked with <code>-fPIC</code>. I use <code>libtool</code> which takes care of this."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1423049394, "post_id": 28318565, "comment_id": 44988898, "body": "&quot;The crash happens when return is called&quot; but when exactly? It might help to pinpoint the exact assembler instruction that causes the segfault."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1423049833, "post_id": 28318565, "comment_id": 44989142, "body": "@assen.totin can you please ensure that you post the <b>exact code</b> which has been observed to show the problem (along with the compiler&#39;s build string for each file in this case) .  In creating a simplified example you may have left out some important detail. Creating a simplified example is good but you must also check that the simplified example still exhibits the problem."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1423051425, "post_id": 28318565, "comment_id": 44989982, "body": "&quot;<i>Debugging the code reveals that the crash happens exactly when return is called.</i>&quot; this strongly smells like a memory corruption, that happend (long?) before the actual crash. You might like to consider running the whole program using a memory-(access-)checker like Valgrind (http:/valgrind.org)."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1423049765, "post_id": 28320312, "comment_id": 44989100, "body": "<code>free(NULL)</code> is well-defined and does nothing. (Perhaps null pointers are dereferenced before being freed though, which would cause a problem)"}, {"owner": {"reputation": 41, "user_id": 1748059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6d184068537e26a32d19b2df5e79eb?s=128&d=identicon&r=PG", "display_name": "assen.totin", "link": "https://stackoverflow.com/users/1748059/assen-totin"}, "edited": false, "score": 0, "creation_date": 1423051561, "post_id": 28320312, "comment_id": 44990053, "body": "Of course, the actual code has proper validation of malloc()&#39;s return value and in case of failure nothing is ever attempted with this pointer. But I&#39;ll keep digging, thanks."}], "tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": false, "score": 1, "last_activity_date": 1423049508, "creation_date": 1423049508, "answer_id": 28320312, "question_id": 28318565, "link": "https://stackoverflow.com/questions/28318565/sigsegv-when-returning-pointer-to-malloc-in-dlopened-library/28320312#28320312", "title": "SIGSEGV when returning pointer to malloc() in dlopen()&#39;ed library", "body": "<p>Short answer, you either have a bug OR bad hardware. I strongly suspect a bug.  If a bug, you have either a pointer that's run amuck and trashed your code or you're improperly free'ing memory. </p>\n\n<p>I recognize you provided a simplified example to demonstrate what was happening, but even in your example there is a bug. You <code>malloc</code> but never test for error. If you later on try to free NULL, this could be the cause.</p>\n\n<p>That fact that you can make a minor modification to your code that mysteriously solving the problem only reinforces the bug theory. </p>\n\n<p>However, if you are 100% sure there is no bug (and then you check again and are REALLY sure there's no bug), then your hardware problem is likely just bad ram.  Try running your code on another machine. If it crashes there -- then it's a bug.  Otherwise a simple RAM swap should confirm if you have h/w failure.</p>\n"}], "owner": {"reputation": 41, "user_id": 1748059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6d184068537e26a32d19b2df5e79eb?s=128&d=identicon&r=PG", "display_name": "assen.totin", "link": "https://stackoverflow.com/users/1748059/assen-totin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423049508, "creation_date": 1423044308, "last_edit_date": 1423047224, "question_id": 28318565, "link": "https://stackoverflow.com/questions/28318565/sigsegv-when-returning-pointer-to-malloc-in-dlopened-library", "title": "SIGSEGV when returning pointer to malloc() in dlopen()&#39;ed library", "body": "<p>I'm observing some weird behaviour from a relatively simple piece of code and would like to ask if anybody has seen such before. </p>\n\n<p>The code below is a basic example for allocating memory inside a function and returning a pointer to it (you can find similar in most C textbooks).</p>\n\n<pre><code>// BROKEN CODE EXAMPLE:\n// Function which returns a char pointer\nchar *f() {\n    // Allocate some memory; 1024 is merely an example\n    char *c = malloc(1024);\n    return c;\n}\n\n// Calling function\nvoid main_f() {\n    char *c = f();\n    // Do some stuff here\n    free(c);\n}\n</code></pre>\n\n<p>In my actual program the <code>main_f()</code> function is repeatedly called from its main loop. Everything works as expected when the <code>main_f()</code> function is compiled into the program's executable or comes from a library that the executable is linked to. </p>\n\n<p>However, if the code resides in a shared library that the executable loads using <code>dlopen()</code>, a strange thing happens: after a random number of iterations (which may be 5, 15, 50 or even more) the code crashes with SIGSEGV. Debugging the code reveals that the crash happens exactly when <code>return</code> is called.</p>\n\n<p>Adding to the weirdness is that, found by trial and error, a simple cure for the crash is not to return a pointer from the <code>f()</code> function, but supply the function with a double pointer:</p>\n\n<pre><code>// WORKING CODE EXAMPLE:\n// Modify the function to use a double pointer\nvoid f(char **c) {\n    // Allocate some memory; 1024 is merely an example\n    *c = malloc(1024);\n}\n\n// Calling function\nvoid main_f() {\n    char *c;\n    f(&amp;c);\n    // Do some stuff here\n    free(c);\n}\n</code></pre>\n\n<p>The actual code is part of a GTK+ program and runs inside the main loop of GLib. The said program does not create additional threads but executes the above stanza once a minute via timer (and runs do not overlap). The shared library is loaded only once via <code>dlopen()</code> at init time.</p>\n\n<p>Could it be that malloc(), dlopen() and GLib do not always play nice? The actual program is UNIX-only, so we saw no need to resort to GLib-provided portable functions like <code>g_malloc()</code> or larger objects like <code>GModule</code>; would it make any sense to prefer them though?</p>\n\n<p>Has anybody else seen this issue?</p>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1423043881, "post_id": 28318213, "comment_id": 44985600, "body": "I&#39;m not sure what you mean by &quot;pop sin_zero&quot;? What you should pass to <code>connect</code> is a <code>sockaddr*</code>. There&#39;s nothing that says that the <code>sockaddr</code> struct has to be stack-allocated, nor should the <code>connect</code> function care."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1423045295, "post_id": 28318213, "comment_id": 44986511, "body": "Hint: these functions accept <code>struct sockaddr*</code> but you are normally passing a different thing altogether, <code>struct sockaddr_in*</code>. Do you know why?"}, {"owner": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "edited": false, "score": 0, "creation_date": 1423051738, "post_id": 28318213, "comment_id": 44990156, "body": "Michael: I&#39;m saying &quot;pop sin_zero&quot; refering to when the function finish&#39; sin_zero is subtracted from the stack."}, {"owner": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "edited": false, "score": 0, "creation_date": 1423051919, "post_id": 28318213, "comment_id": 44990279, "body": "n.m.: I prefer use sockaddr_in."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1423054932, "post_id": 28318213, "comment_id": 44991963, "body": "<code>RET n</code> is the stdcall convention, linux and C in general uses cdecl where the caller pops the arguments and the caller knows how many bytes it pushed. Even for stdcall, in this case the argument is a pointer (as you have been told above) so the argument size is fixed at the pointer size, unrelated to the struct size."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1423055191, "post_id": 28318213, "comment_id": 44992128, "body": "@Rob I don&#39;t think you understand the problem here. If you look at the prototype of <code>connect</code> in the documentation, you see something like <code>int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen);</code> But you are not using <code>struct sockaddr</code>, you are using <code>struct sockaddr_in</code>. It&#39;s not merely because you &quot;prefer&quot; to, it&#39;s because you want to connect over <i>an internet</i> (<code>_in</code> stands for &#39;internet&#39;)."}, {"owner": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "edited": false, "score": 0, "creation_date": 1423056287, "post_id": 28318213, "comment_id": 44992857, "body": "Jester: &quot;is fixed at the pointer size&quot;, but building the structure in asm I push the family, the port and the address and no more and move esp to my pointer. The pointer don&#39;t know when finish. The connect() function is who access to [esp+ determinated_n]."}, {"owner": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "edited": false, "score": 0, "creation_date": 1423056390, "post_id": 28318213, "comment_id": 44992934, "body": "n.m.: I&#39;m saying these strcutures are equivalent, but the problem is in these 8 bytes that are trash, not in the structure."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1423057007, "post_id": 28318213, "comment_id": 44993374, "body": "&quot;I&#39;m saying these strcutures are equivalent&quot;. Not really, they are not."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "edited": false, "score": 0, "creation_date": 1423051511, "post_id": 28318566, "comment_id": 44990026, "body": "Nice answer. I&#39;ve edited the post specifying more because I don&#39;t know how process sin_zero."}, {"owner": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "edited": false, "score": 0, "creation_date": 1423054234, "post_id": 28318566, "comment_id": 44991513, "body": "What? I&#39;m speaking of how the system process sin_zero, value assigned or no."}, {"owner": {"reputation": 806, "user_id": 4373784, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jY9up.jpg?s=128&g=1", "display_name": "Szymon Roziewski", "link": "https://stackoverflow.com/users/4373784/szymon-roziewski"}, "reply_to_user": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "edited": false, "score": 0, "creation_date": 1423058181, "post_id": 28318566, "comment_id": 44994193, "body": "I found quite interesting example of using sin_zero. <a href=\"http://www.opensource.apple.com/source/xnu/xnu-517.3.15/bsd/netinet/ip_divert.c?txt\" rel=\"nofollow noreferrer\">here</a> In <code>sin_zero</code> you can put some additional data. <i>you can look at sockaddr.sa_family first, if it is AF_INET then interpret the entire sockaddr as a sockaddr_in</i> <a href=\"http://stackoverflow.com/questions/9312113/why-can-we-cast-sockaddr-to-sockaddr-in\">link</a>"}], "tags": [], "owner": {"reputation": 806, "user_id": 4373784, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jY9up.jpg?s=128&g=1", "display_name": "Szymon Roziewski", "link": "https://stackoverflow.com/users/4373784/szymon-roziewski"}, "is_accepted": false, "score": 1, "last_activity_date": 1423056591, "last_edit_date": 1423056591, "creation_date": 1423044312, "answer_id": 28318566, "question_id": 28318213, "link": "https://stackoverflow.com/questions/28318213/what-care-the-parameter-sizeofsockaddr-in/28318566#28318566", "title": "What care the parameter sizeof(sockaddr_in)", "body": "<p>A <code>sockaddr_in</code> is a structure containing an internet address. This structure is defined in <code>&lt;netinet/in.h&gt;</code>. This is server/client address <code>struct sockaddr_in serv_addr, cli_addr;</code> Here is the definition:</p>\n\n<pre><code>struct sockaddr_in {\n    short   sin_family;\n    u_short sin_port;\n    struct  in_addr sin_addr;\n    char    sin_zero[8];\n};\n</code></pre>\n\n<p><code>sin_family</code> \u2013 use AF_INET\n<code>sin_port</code> \u2013 port number (in network byte order => use <code>htons(port)</code>)\n<code>sin_addr</code> \u2013 Internet address described by struct <code>in_addr</code></p>\n\n<pre><code>struct in_addr {\n        unsigned long s_addr;\n};\n</code></pre>\n\n<p>Set <code>s_addr</code> to INADDR_ANY => local internet address.\n<code>sin_zero[]</code> \u2013 set to <code>0</code> with <code>bzero()</code> or <code>memset()</code>. Padding to make structure the same size as <code>SOCKADDR</code>. </p>\n\n<p>bind() example</p>\n\n<pre><code>int mysock,err;\nstruct sockaddr_in myaddr; \nmysock = socket(AF_INET,SOCK_STREAM,0);\nmyaddr.sin_family = AF_INET;\nmyaddr.sin_port = htons( portnum );\nmyaddr.sin_addr.s_addr = INADDR_ANY;\nbzero(&amp;(myaddr.sin_zero),sizeof(myaddr.sin_zero));\nerr = bind(mysock, (struct sockaddr *) &amp;myaddr, sizeof(myaddr));\n</code></pre>\n\n<p>I have found some info about <code>sin_zero</code> (Unix network programming chapter 3.2)</p>\n\n<blockquote>\n  <p>The POSIX specification requires only three members in the structure: sin_family, sin_addr, and sin_port. It is acceptable for a POSIX-compliant implementation to define additional structure members, and this is normal for an Internet socket address structure. Almost all implementations add the sin_zero member so that all socket address structures are at least 16 bytes in size. </p>\n</blockquote>\n\n<p>And the definition of <code>sin_zero</code></p>\n\n<pre><code>unsigned char  __pad[__SOCK_SIZE__ - sizeof(short int)\n                    - sizeof(unsigned short int) - sizeof(struct in_addr)];\n};\n#define sin_zero        __pad\n</code></pre>\n\n<blockquote>\n  <p>Most of the net code does not use sockaddr_in, it uses sockaddr.  When you use a function like sendto, you must explicitly cast sockaddr_in, or whatever address your using, to sockaddr.  sockaddr_in is the same size as sockaddr, but internally the sizes are the same because of a slight hack.</p>\n</blockquote>\n\n<p>That hack is sin_zero.  Really the length of useful data in sockaddr_in is shorter than sockaddr.  But the difference is padded in sockaddr_in using a small buffer; that buffer is sin_zero. </p>\n\n<p>On some architectures, it wont cause any problems not clearing sin_zero.  But on other architectures it might.  Its required by specification to clear sin_zero, so you must do this if you intend your code to be bug free for now and in the future.</p>\n\n<p>Please, have a look at <a href=\"https://silviocesare.wordpress.com/2007/10/22/setting-sin_zero-to-0-in-struct-sockaddr_in/\" rel=\"nofollow\">page</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1829, "user_id": 4242097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1347add4ae303c0258a3db358ed77c55?s=128&d=identicon&r=PG", "display_name": "Parham Alvani", "link": "https://stackoverflow.com/users/4242097/parham-alvani"}, "is_accepted": false, "score": 1, "last_activity_date": 1423044429, "creation_date": 1423044429, "answer_id": 28318594, "question_id": 28318213, "link": "https://stackoverflow.com/questions/28318213/what-care-the-parameter-sizeofsockaddr-in/28318594#28318594", "title": "What care the parameter sizeof(sockaddr_in)", "body": "<p>I think, kernel uses size parameter to see your sockaddr is ipv6 address or not because ipv6 address size is bigger than other net address in linux and unix.</p>\n"}, {"tags": [], "owner": {"reputation": 5859, "user_id": 2143128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2CZQF.jpg?s=128&g=1", "display_name": "Ratul Sharker", "link": "https://stackoverflow.com/users/2143128/ratul-sharker"}, "is_accepted": false, "score": 0, "last_activity_date": 1423045962, "creation_date": 1423045962, "answer_id": 28319108, "question_id": 28318213, "link": "https://stackoverflow.com/questions/28318213/what-care-the-parameter-sizeofsockaddr-in/28319108#28319108", "title": "What care the parameter sizeof(sockaddr_in)", "body": "<p>Maybe it's the architecture issue, on different architecture like 64-bit / 32-bit size of primitive declared in the <code>sockaddr_in</code> will be different. That's why it may be a parameter declared in the <code>connect()</code> function.</p>\n"}], "owner": {"reputation": 79, "user_id": 4482939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5022a9e0ff3231a6102c20b7d94e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4482939/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4882, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1423056591, "creation_date": 1423043275, "last_edit_date": 1495542662, "question_id": 28318213, "link": "https://stackoverflow.com/questions/28318213/what-care-the-parameter-sizeofsockaddr-in", "title": "What care the parameter sizeof(sockaddr_in)", "body": "<p>In functions as <code>connect()</code> the last parameter is the size of the <code>sockaddr_in</code> structure. </p>\n\n<p>All well, but <code>sin_zero</code> is unused (the system doesn't \"pop sin_zero\" as I understood in <a href=\"https://stackoverflow.com/questions/28280581/how-kernels-recognize-sin-zero-sockaddr-in-structure-pushed\">stackoverflow.com/questions/28280581/how-kernels-recognize-sin-zero-sockaddr-in-structure-pushed</a>), so for what the functions need this parameter?</p>\n\n<p>I.e. asm or when C is compiled to asm, the RET of connect() must specify the number of bytes to delete (RET n), bytes that are the connect() arguments. Why n is a fixed number (don't change I specify the sin_zero or no) if I can push or no sin_zero in asm and assign value to sin_zero in C. And if I create a program in asm and I don't push sin_zero to the stack, the programs works perfectly... but n is the same number!</p>\n"}, {"tags": ["c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 806, "user_id": 2281389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dc11d8256d5dc9edfd420e8f5f72271c?s=128&d=identicon&r=PG", "display_name": "Ryan Newman", "link": "https://stackoverflow.com/users/2281389/ryan-newman"}, "edited": false, "score": 0, "creation_date": 1423043475, "post_id": 28318257, "comment_id": 44985350, "body": "Oh wow I completely looked over that. That fixed at least that error. Thank you!"}], "tags": [], "owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "is_accepted": true, "score": 5, "last_activity_date": 1423043393, "creation_date": 1423043393, "answer_id": 28318257, "question_id": 28318196, "link": "https://stackoverflow.com/questions/28318196/fatal-error-with-make-command/28318257#28318257", "title": "Fatal error with make command", "body": "<p>Problem's here:</p>\n\n<pre><code>bin/st_driver.o: src/drivers/st_driver.c src/include/st.h \n    ${CC} ${CFLAGS} -o /bin/st_driver.o -c src/drivers/st_driver.c\n</code></pre>\n\n<p>You are referring to <code>/bin/st_driver.o</code>, and you wanted to refer to <code>bin/st_driver.o</code>.</p>\n"}], "owner": {"reputation": 806, "user_id": 2281389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dc11d8256d5dc9edfd420e8f5f72271c?s=128&d=identicon&r=PG", "display_name": "Ryan Newman", "link": "https://stackoverflow.com/users/2281389/ryan-newman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 28318257, "answer_count": 1, "score": 0, "last_activity_date": 1423107565, "creation_date": 1423043228, "last_edit_date": 1423107565, "question_id": 28318196, "link": "https://stackoverflow.com/questions/28318196/fatal-error-with-make-command", "title": "Fatal error with make command", "body": "<p>I am trying to write a make file for my project and I am trying to debug issues using </p>\n\n<pre><code>make -n\n</code></pre>\n\n<p>command and I finally got it down to </p>\n\n<blockquote>\n  <p>Fatal error: can't create /bin/st_driver.o: Permission denied</p>\n</blockquote>\n\n<p>and I can't for the life of me figure out what is going on. </p>\n\n<p>My code is</p>\n\n<pre><code>CC=gcc\nCFLAGS=-g -Wall\nTARGETS=st_driver\n\n.PHONY: all clean dist\n\nall: ./${TARGETS}\n\nst_driver: bin/st_driver.o bin/st.o bin/er.o bin/hashtable.o\n    ${CC} ${CFLAGS} -o st_driver bin/st_driver.o bin/st.o bin/er.o bin/hashtable.o\n\nbin/st_driver.o: src/drivers/st_driver.c src/include/st.h \n    ${CC} ${CFLAGS} -o /bin/st_driver.o -c src/drivers/st_driver.c\n\nbin/st.o: src/st/st.c src/include/st.h\n    ${CC} ${CFLAGS} -c src/st/st.c -o bin/st.o\n\nbin/er.o: src/er/er.c src/include/er.h\n    ${CC} ${CFLAGS} -c src/er/er.c -o bin/er.o\n\nbin/hashtable.o: src/util/hashtable.c src/include/hashtable.h\n    ${CC} ${CFLAGS} -c src/util/hashtable.o -o bin/hashtable.o\n\nbin/list.o: src/util/list.c include/list.h\n    ${CC} ${CFLAGS} -c src/util/list.c -o bin/list.o\n\nclean:\n    rm -rf bin/*\n\nrun_valgrind: ${TARGETS}\n    valgrind -v --leak-check=yes bin/CS480_pcc\n</code></pre>\n"}, {"tags": ["c++", "c", "data-structures"], "comments": [{"owner": {"reputation": 26033, "user_id": 1047662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8aXzf.jpg?s=128&g=1", "display_name": "Cyclonecode", "link": "https://stackoverflow.com/users/1047662/cyclonecode"}, "edited": false, "score": 0, "creation_date": 1423043150, "post_id": 28318122, "comment_id": 44985155, "body": "<code>memcpy(&amp;a, &amp;b, sizeof(a));</code>?"}, {"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "reply_to_user": {"reputation": 26033, "user_id": 1047662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8aXzf.jpg?s=128&g=1", "display_name": "Cyclonecode", "link": "https://stackoverflow.com/users/1047662/cyclonecode"}, "edited": false, "score": 1, "creation_date": 1423043238, "post_id": 28318122, "comment_id": 44985198, "body": "@Cyclone, &quot;I have two <b>different</b> structures. Both have <b>some</b> members of same type &amp; name.&quot; I think that means they are not exactly the same (whats the point of having 2 exactly same structs anyway?)"}, {"owner": {"reputation": 7529, "user_id": 599192, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8e2d1fc37053061e858f1918090a19ee?s=128&d=identicon&r=PG", "display_name": "Phil Lello", "link": "https://stackoverflow.com/users/599192/phil-lello"}, "edited": false, "score": 1, "creation_date": 1423043250, "post_id": 28318122, "comment_id": 44985209, "body": "Write a function to copy from a to b. In C++, you could call that function a::operator="}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "reply_to_user": {"reputation": 26033, "user_id": 1047662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8aXzf.jpg?s=128&g=1", "display_name": "Cyclonecode", "link": "https://stackoverflow.com/users/1047662/cyclonecode"}, "edited": false, "score": 1, "creation_date": 1423043263, "post_id": 28318122, "comment_id": 44985223, "body": "@Cyclone memcpy will not work; he&#39;s interested in copying only certain members, not the whole data structure"}, {"owner": {"reputation": 26033, "user_id": 1047662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8aXzf.jpg?s=128&g=1", "display_name": "Cyclonecode", "link": "https://stackoverflow.com/users/1047662/cyclonecode"}, "reply_to_user": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 0, "creation_date": 1423043300, "post_id": 28318122, "comment_id": 44985246, "body": "@SingerOfTheFall - Oh, I thought it said <code>same</code>."}, {"owner": {"reputation": 1012, "user_id": 1784153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098b4d71603f3703483465f1d78ca51a?s=128&d=identicon&r=PG", "display_name": "Oragon Efreet", "link": "https://stackoverflow.com/users/1784153/oragon-efreet"}, "edited": false, "score": 2, "creation_date": 1423043338, "post_id": 28318122, "comment_id": 44985271, "body": "Made the same reading mistake :/"}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1423043406, "post_id": 28318122, "comment_id": 44985310, "body": "@satya There is no general good way to copy data structure members with the same name between data structures; as far as the compiler is concerned, there is no such thing, it identifies each data member by a different, regenerated name."}], "answers": [{"tags": [], "owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "is_accepted": false, "score": 3, "last_activity_date": 1423043392, "creation_date": 1423043392, "answer_id": 28318256, "question_id": 28318122, "link": "https://stackoverflow.com/questions/28318122/how-to-copy-members-with-same-names-in-different-structures/28318256#28318256", "title": "How to copy members with same names in different Structures?", "body": "<p>Just make an assignment operator, and copy everything you want there</p>\n\n<pre><code>struct a{ int i; int j; };\nstruct b{ \nvoid operator=(const a &amp; other)\n{\n    j = other.j;\n}\nint j; \nint k;\n};\n</code></pre>\n\n<p>Then you can just write</p>\n\n<pre><code>a one;\nb two;\ntwo = one;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1423044056, "post_id": 28318323, "comment_id": 44985720, "body": "Upvoted, but you could improve the clarity be renaming the members of <code>struct a</code> and <code>struct b</code> (other than <code>common</code>) so that they do not correspond either with each other or with members of <code>struct c</code>."}], "tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 3, "last_activity_date": 1423044269, "last_edit_date": 1423044269, "creation_date": 1423043616, "answer_id": 28318323, "question_id": 28318122, "link": "https://stackoverflow.com/questions/28318122/how-to-copy-members-with-same-names-in-different-structures/28318323#28318323", "title": "How to copy members with same names in different Structures?", "body": "<p>Since there is some set of matching members of the same type maybe the solution is to pack them together to common type.</p>\n\n<pre><code>struct c{ int i, int j};\nstruct a{ c common, int k, int l, ..., double u};\nstruct b{ c common, int a, int b, ..., float u, int v};\n\na one;\nb two;\n\none.common = two.common;\n</code></pre>\n\n<p>If it is impossible because you cannot change the code this way, then I would suggest to write some copy function, but not assignment operator because some time later you or someone else may and probably will use that assignment incorrectly, thinking that it copies all members.</p>\n\n<pre><code>void copySharedMembersOfAB( a&amp;, a const&amp; b)\n{\n    a.i = b.i;\n    a.j = b.j;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4527941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf74b3ffd8b95e11f2c691c057ffa4b3?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4527941/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1423044269, "creation_date": 1423042968, "last_edit_date": 1423043276, "question_id": 28318122, "link": "https://stackoverflow.com/questions/28318122/how-to-copy-members-with-same-names-in-different-structures", "title": "How to copy members with same names in different Structures?", "body": "<p>I have two different structures. Both have some members of same type &amp; name.</p>\n\n<p>How can I copy all those matching members all at once?</p>\n\n<pre><code>struct a{ int i, int j};\nstruct b{ int j, int k};\n</code></pre>\n\n<p>I wanna perform <code>a=b</code>, kind of operation, where <code>b.j</code> get copied into <code>a.j</code>.\nLike wise, how any such matching members should get copied?</p>\n"}, {"tags": ["c", "math", "recursion", "calculus", "derivative"], "answers": [{"tags": [], "owner": {"reputation": 1829, "user_id": 4242097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1347add4ae303c0258a3db358ed77c55?s=128&d=identicon&r=PG", "display_name": "Parham Alvani", "link": "https://stackoverflow.com/users/4242097/parham-alvani"}, "is_accepted": false, "score": 5, "last_activity_date": 1423048359, "last_edit_date": 1423048359, "creation_date": 1423043783, "answer_id": 28318381, "question_id": 28317868, "link": "https://stackoverflow.com/questions/28317868/recursively-find-the-second-derivative/28318381#28318381", "title": "Recursively find the second derivative", "body": "<p>I change your code into following code and it works as expected.</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>double derivative(double (*f)(double), double x0, int order)\n{\n         const double delta = 1.0e-6;\n         if (order == 1) {\n                  double x1 = x0 - delta;\n                  double x2 = x0 + delta;\n                  double y1 = f(x1);\n                  double y2 = f(x2);\n\n                  return (y2 - y1) / (x2 - x1);\n          } else if(order == 2) {\n                  double x1 = x0 - delta;\n                  double x2 = x0 + delta;\n                  double y1 = derivative(f, x1, 1);\n                  double y2 = derivative(f, x2, 1);\n\n                  return (y2 - y1) / (x2 - x1);\n          } else {\n                  printf(\"order too high error \\n\");\n                  return 0;\n          }\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": true, "score": 2, "last_activity_date": 1423049285, "creation_date": 1423049285, "answer_id": 28320240, "question_id": 28317868, "link": "https://stackoverflow.com/questions/28317868/recursively-find-the-second-derivative/28320240#28320240", "title": "Recursively find the second derivative", "body": "<p>I would implement it like this:</p>\n\n<pre><code>double derivative(double (*f)(double), double x0, int order)\n{\n         const double delta = 1.0e-6;\n         double x1 = x0 - delta;\n         double x2 = x0 + delta;\n         if (order == 1) {\n                  double y1 = f(x1);\n                  double y2 = f(x2);\n\n                  return (y2 - y1) / (x2 - x1);\n          } else {\n                  double y1 = derivative(f, x1, order - 1);\n                  double y2 = derivative(f, x2, order - 1);\n\n                  return (y2 - y1) / (x2 - x1);\n          }\n }\n</code></pre>\n\n<p>Because then there is no need for a \"order too high error\".</p>\n"}, {"comments": [{"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 1, "creation_date": 1423059442, "post_id": 28320505, "comment_id": 44994958, "body": "For &quot;normal&quot; functions, one finds that <code>eps=10^(-16&#47;(2+order))</code> or more general <code>eps=pow(mu,1.0&#47;(2+order))</code> has about the minimal order for symmetric divided differences. The general error term is <code>scale(f&#39;)*mu&#47;eps^order+scale( diff(f,order+2 )*eps^2</code>, the error is minimal where both terms are about equal."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1423061190, "post_id": 28320505, "comment_id": 44996143, "body": "Good observation, thanks. I had briefly tested this with the not-so-fancy founctions <code>x&#179;</code> and <code>sin(x)</code> up to the fourth derivative and found that <code>1e-6</code> gave me corrupt results. A bigger epsilon fixed that, but made the first derivative more inaccurate. That matches your observation that the epsilon should be chosen depending on the order."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1423050108, "creation_date": 1423050108, "answer_id": 28320505, "question_id": 28317868, "link": "https://stackoverflow.com/questions/28317868/recursively-find-the-second-derivative/28320505#28320505", "title": "Recursively find the second derivative", "body": "<p>Parham Alvani has already answered your question and pointed out the logical error in your function. So this is not really an answer, just some additional remarks.</p>\n\n<p>You can make the function entirely recursive without treating any case except the base case separately:</p>\n\n<pre><code>double derivative(double (*f)(double), double x, int order)\n{\n    const double eps = 1.0e-3;\n\n    if (order == 0) return f(x);\n\n    double y1 = derivative(f, x - eps, order - 1);\n    double y2 = derivative(f, x + eps, order - 1);\n\n    return (y2 - y1) / (2 * eps);\n}\n</code></pre>\n\n<p>For higher-order derivatives, you end up evaluating the same function values several times, however, so you could evaluate the derivatives recursively beforhand and hard-code the relations:</p>\n\n<pre><code>  \u0394f(x) / \u0394x = (f(x + \u03b5) - f(x - \u03b5)) / (2\u00b7\u03b5)\n\u0394\u00b2f(x) / \u0394x\u00b2 = (f(x + 2\u00b7\u03b5) - 2\u00b7f(x) + f(x - 2\u00b7\u03b5)) / (4\u00b7\u03b5\u00b2)\n\u0394\u00b3f(x) / \u0394x\u00b3 = (f(x + 3\u00b7\u03b5) - 3\u00b7f(x + \u03b5) + 3\u00b7f(x - \u03b5) - f(x - 3\u00b7\u03b5)) / (8\u00b7\u03b5\u00b3)\n</code></pre>\n\n<p>and so on. For the higher-order derivatives, chosing the <code>\u03b5</code> value gets tricky, however. Chosing it too small will lead to errors when the difference between the evaluated function values is small.</p>\n"}], "owner": {"reputation": 1111, "user_id": 1790803, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ee793f7b16bb432cfd455d4a2884d5af?s=128&d=identicon&r=PG", "display_name": "Henrik Hillestad L&#248;vold", "link": "https://stackoverflow.com/users/1790803/henrik-hillestad-l%c3%b8vold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 1, "accepted_answer_id": 28320240, "answer_count": 3, "score": 1, "last_activity_date": 1423050108, "creation_date": 1423042262, "question_id": 28317868, "link": "https://stackoverflow.com/questions/28317868/recursively-find-the-second-derivative", "title": "Recursively find the second derivative", "body": "<p>I'm attempting to write a program in C which finds the numeric value of the second derivative of f(x) where x is given. When I use my function to find the first derivative, everything seems to be working okay, but the recursive second derivative part always gives me 0.0. Here's my function:</p>\n\n<pre><code>double derivative(double (*f)(double), double x0, int order) {\n    if(order == 1){\n        const double delta = 1.0e-6;\n        double x1 = x0-delta;\n        double x2 = x0+delta;\n        double y1 = f(x1);\n        double y2 = f(x2);\n\n        return (y2 - y1) / (x2 - x1);\n    } else if(order == 2) {\n        const double delta = 1.0e-6;\n        double x1 = derivative(f, x0, 1)-delta;\n        double x2 = derivative(f, x0, 1)+delta;\n        double y1 = derivative(f, f(x1), 1)-delta;\n        double y2 = derivative(f, f(x2), 1)+delta;\n\n        return (y2 - y1) / (x2 - x1);\n    } else {\n        printf(\"order too high error \\n\");\n        return 0;\n    }\n}\n</code></pre>\n\n<p>I understand why it doesn't work as intended -- here I attempt to find the second derivative of f by deriving based on the function f and the value of f'(x). But I've been working on this for hours, and I cannot come up with a proper algorithm to do this.</p>\n\n<p>Any help would be very appreciated. Thanks in advance!</p>\n"}, {"tags": ["c++", "objective-c", "c", "macos", "cocoa"], "comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1423042055, "post_id": 28317641, "comment_id": 44984476, "body": "While I&#39;ve given an answer, it does sound like you&#39;re asking the wrong question - are you trying to create a cache of some type?"}, {"owner": {"reputation": 167, "user_id": 2132128, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/551bca5b8e10da06b7db0fd01dd0ef54?s=128&d=identicon&r=PG", "display_name": "john fedric", "link": "https://stackoverflow.com/users/2132128/john-fedric"}, "reply_to_user": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1423042410, "post_id": 28317641, "comment_id": 44984685, "body": "@Petesh The main point is i am creating an application through which i am providing some trial files to the user, and those files are also usable by other application which recognises them. After trial expiry, i want to delete those files, but user can always move my files to a different location and use them forever, how to protect those files from permanent use?"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 2132128, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/551bca5b8e10da06b7db0fd01dd0ef54?s=128&d=identicon&r=PG", "display_name": "john fedric", "link": "https://stackoverflow.com/users/2132128/john-fedric"}, "edited": false, "score": 0, "creation_date": 1423042182, "post_id": 28317705, "comment_id": 44984550, "body": "You could add the feature yourself,with an accompanying agent that would trawl for files with the metadata and delete them when the time came. I think creating an application for this must be launched by system so anyone user using the system may stop that application?"}, {"owner": {"reputation": 167, "user_id": 2132128, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/551bca5b8e10da06b7db0fd01dd0ef54?s=128&d=identicon&r=PG", "display_name": "john fedric", "link": "https://stackoverflow.com/users/2132128/john-fedric"}, "edited": false, "score": 0, "creation_date": 1423042591, "post_id": 28317705, "comment_id": 44984797, "body": "The main point is i am creating an application through which i am providing some trial files to the user, and those files are also usable by other application which recognises them. After trial expiry, i want to delete those files, but user can always move my files to a different location and use them forever, how to protect those files from permanent use?"}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 167, "user_id": 2132128, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/551bca5b8e10da06b7db0fd01dd0ef54?s=128&d=identicon&r=PG", "display_name": "john fedric", "link": "https://stackoverflow.com/users/2132128/john-fedric"}, "edited": false, "score": 1, "creation_date": 1423044949, "post_id": 28317705, "comment_id": 44986316, "body": "Now that I understand your reasoning, I would suggest accepting that the files will not be deleted and start from that point. There are far too many ways of getting the files into a state where they can&#39;t be deleted even <b>if</b> you could track them. If I put the file on a windows server, would you expect the windows server to respect the &#39;delete me&#39; flag and erase the file?"}, {"owner": {"reputation": 820, "user_id": 4520294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31142413de4a4586e357bc2c073fe3e2?s=128&d=identicon&r=PG&f=1", "display_name": "Sheen Vempeny", "link": "https://stackoverflow.com/users/4520294/sheen-vempeny"}, "edited": false, "score": 0, "creation_date": 1423045040, "post_id": 28317705, "comment_id": 44986357, "body": "After trial expiry when user launches the application, you can do the metadata search in system using NSMetaDataQuery for finding those files and you can remove."}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 820, "user_id": 4520294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31142413de4a4586e357bc2c073fe3e2?s=128&d=identicon&r=PG&f=1", "display_name": "Sheen Vempeny", "link": "https://stackoverflow.com/users/4520294/sheen-vempeny"}, "edited": false, "score": 0, "creation_date": 1423045555, "post_id": 28317705, "comment_id": 44986687, "body": "@SheenVempeny That won&#39;t find files in <code>.zip</code> files, time machine archives, etc. If there is other software which can read the files, what happens if that software copies the data out - you can&#39;t attach metadata to that as it&#39;s not created in your application. I&#39;m suggesting that the OP try a different approach."}], "tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423041774, "creation_date": 1423041774, "answer_id": 28317705, "question_id": 28317641, "link": "https://stackoverflow.com/questions/28317641/osx-auto-delete-file-after-x-time/28317705#28317705", "title": "OSX- Auto Delete file after x-time", "body": "<p>No, there is no built-in mechanism to auto-delete a file based on some metadata.</p>\n\n<p>You could add the feature yourself, with an accompanying agent that would trawl for files with the metadata and delete them when the time came.</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 2132128, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/551bca5b8e10da06b7db0fd01dd0ef54?s=128&d=identicon&r=PG", "display_name": "john fedric", "link": "https://stackoverflow.com/users/2132128/john-fedric"}, "edited": false, "score": 0, "creation_date": 1423127483, "post_id": 28329165, "comment_id": 45025151, "body": "Have a special &quot;trial file&quot; format which is the same as the ordinary format - which is readable by other apps - but encrypted and includes an expiry date, How other apps using my files would be able to decrypt that?"}, {"owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "reply_to_user": {"reputation": 167, "user_id": 2132128, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/551bca5b8e10da06b7db0fd01dd0ef54?s=128&d=identicon&r=PG", "display_name": "john fedric", "link": "https://stackoverflow.com/users/2132128/john-fedric"}, "edited": false, "score": 0, "creation_date": 1423129151, "post_id": 28329165, "comment_id": 45026090, "body": "I may have misunderstood, I assumed the usability of the trial file by apps other than yours was not a concern."}], "tags": [], "owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "is_accepted": false, "score": 1, "last_activity_date": 1423076016, "last_edit_date": 1495542511, "creation_date": 1423076016, "answer_id": 28329165, "question_id": 28317641, "link": "https://stackoverflow.com/questions/28317641/osx-auto-delete-file-after-x-time/28329165#28329165", "title": "OSX- Auto Delete file after x-time", "body": "<p>If you are doing this for good housekeeping you can follow @Petesh answer.</p>\n\n<p>If you are doing this because you really want those files gone then no. The user could move the file to a USB stick and remove it, or edit the metadata, etc.</p>\n\n<p>Your earlier question <a href=\"https://stackoverflow.com/questions/28008635/completely-restricting-all-types-of-access-to-a-folder\">\"Completely restricting all types of access to a folder\"</a> seems to addressing the same issue and the suggestions are the same as given there - use encryption or implement your own file system.</p>\n\n<p>E.g. have a special \"trial file\" format which is the same as the ordinary format - which is readable by other apps - but encrypted and includes an expiry date. Your app then decrypts the file, checks the date, and either does its thing or reports to the user the file is out of date.</p>\n\n<p>The system isn't unbreakable, but its a reasonable barrier - easy for you to do, too hard for the average user to break.</p>\n"}], "owner": {"reputation": 167, "user_id": 2132128, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/551bca5b8e10da06b7db0fd01dd0ef54?s=128&d=identicon&r=PG", "display_name": "john fedric", "link": "https://stackoverflow.com/users/2132128/john-fedric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423076016, "creation_date": 1423041575, "last_edit_date": 1423053785, "question_id": 28317641, "link": "https://stackoverflow.com/questions/28317641/osx-auto-delete-file-after-x-time", "title": "OSX- Auto Delete file after x-time", "body": "<p>Can we add metadata to unlink/remove a file after x-time automatically. That is system automatically removes that file, if it finds that particular metadata attached with that file</p>\n\n<p><strong>Note</strong>- file can be present at any location, and user may move that file anywhere on their system, but based on that metadata file should get deleted(i.e system should call unlink/remove) for that file.</p>\n\n<p>Is there a cocoa/objective-c/c++ api to set such metadata/attributes of a file?</p>\n\n<p>The main point is i am creating an application through which i am providing some trial files to the user, and those files are also usable by other application which recognises them. After trial expiry, i want to delete those files, but user can always move my files to a different location and use them forever, how to protect those files from permanent use?</p>\n"}, {"tags": ["c", "function", "filenames", "trace"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1423041338, "post_id": 28317334, "comment_id": 44984023, "body": "Also, ask your colleagues to explain you how they are working on that code base."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1423041787, "post_id": 28317334, "comment_id": 44984316, "body": "What kind of code, what size of code, are you talking about? Please edit your question to improve it."}, {"owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 1, "creation_date": 1423042423, "post_id": 28317334, "comment_id": 44984699, "body": "On linux, you can use strace or similar profiling tools, that display the full call stack."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1423041243, "post_id": 28317374, "comment_id": 44983958, "body": "AFAIK, <code>gdb</code> is able to put a breakpoint on many places with a single command."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1423041366, "post_id": 28317374, "comment_id": 44984041, "body": "@BasileStarynkevitch Absolutely right sir. In this regard, to set a <i>disposable</i> breakpoint, we can use <code>tbreak</code>. Am i right?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423041496, "last_edit_date": 1423041496, "creation_date": 1423040774, "answer_id": 28317374, "question_id": 28317334, "link": "https://stackoverflow.com/questions/28317334/display-filename-line-number-and-function-in-c-without-modifying-the-source-cod/28317374#28317374", "title": "display filename, line number and function in C without modifying the source code", "body": "<p>If you're on linux, <code>gdb</code> might come handy.</p>\n\n<p>You can compile the code using <code>-g</code> or <code>-g3</code> option with <code>gcc</code>, then run the binary using <code>gdb ./&lt;executable_name&gt;</code>, set a breakpoint on desired function in any of the source files and check the call.</p>\n\n<p>While stepping through the application, it will show the filename and line number of the executing instruction.</p>\n\n<p>Note: Please check <a href=\"http://staffwww.fullcoll.edu/sedwards/Gdb/GdbInfo.html\" rel=\"nofollow\">this</a> and  <a href=\"http://www.dirac.org/linux/gdb/04-Breakpoints_And_Watchpoints.php\" rel=\"nofollow\">this</a> for a detailed understanding.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1423041810, "last_edit_date": 1423041810, "creation_date": 1423041435, "answer_id": 28317597, "question_id": 28317334, "link": "https://stackoverflow.com/questions/28317334/display-filename-line-number-and-function-in-c-without-modifying-the-source-cod/28317597#28317597", "title": "display filename, line number and function in C without modifying the source code", "body": "<p>I assume you develop on Linux. Then you could also customize the <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a> compiler, in particular using <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> (a lispy domain specific language to extend GCC), to have the compiler add some logging at many places. For that you'll need to insert a new GCC \"optimization\" pass doing such a job, and most importantly, you'll need to understand some details about GCC internal representations (Gimple, Tree-s, Basic blocks, ...)</p>\n\n<p>However, that would probably require more than a week of work from your part. Unless your code base is really big (at least half a million\n of lines) that might not worth the effort</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "closed_date": 1423050233, "answer_count": 2, "score": 0, "last_activity_date": 1423050122, "creation_date": 1423040662, "last_edit_date": 1592644375, "question_id": 28317334, "link": "https://stackoverflow.com/questions/28317334/display-filename-line-number-and-function-in-c-without-modifying-the-source-cod", "closed_reason": "Duplicate", "title": "display filename, line number and function in C without modifying the source code", "body": "<p>I am new in a company, working with C source code which almost lacks any kind of tracing mechanism.\nI would like to know whether or not the application passes through a certain file and where (which function).\nI could do this using breakpoints, but the concerned file contains a huge lot of functions.</p>\n<p>Therefore I'm looking for some kind of tool, that I can attach to the application, and that gives an output of following kind:</p>\n<blockquote>\n<p>-- Main.c (main_function())</p>\n<p>---- submain.c (submain_function())</p>\n<p>...</p>\n</blockquote>\n<p>From that, I then could deduce where (which filename, which function) the application is passing.</p>\n<p>Does anybody know whether or not such a tool exists?\nThanks</p>\n"}, {"tags": ["c", "types", "micro-optimization"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1423040795, "post_id": 28317311, "comment_id": 44983705, "body": "It is operating system, compiler, optimization, ABI, and target processor specific."}, {"owner": {"reputation": 1535, "user_id": 3896330, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/91bfbe26ae69ceea219c9d728639435b?s=128&d=identicon&r=PG&f=1", "display_name": "DainDwarf", "link": "https://stackoverflow.com/users/3896330/daindwarf"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1423041465, "post_id": 28317311, "comment_id": 44984107, "body": "gcc on Debian, -std=c99 without -O2, 32bit i686 processor. I hope that clarifies a bit."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 4, "creation_date": 1423041548, "post_id": 28317311, "comment_id": 44984168, "body": "If you are looking for performance, the typedef int_fast#_t, with # replaced by the width, designates the fastest signed integer type with a width of at least # bits."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1423041825, "post_id": 28317311, "comment_id": 44984342, "body": "Do they say that performance is the driving factor? To me, the documentation value is important. The choice of an 8 bit signed value tells me that this parameter will be in that range."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1423044219, "post_id": 28317311, "comment_id": 44985843, "body": "Want numbers? Measure."}], "answers": [{"comments": [{"owner": {"reputation": 1535, "user_id": 3896330, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/91bfbe26ae69ceea219c9d728639435b?s=128&d=identicon&r=PG&f=1", "display_name": "DainDwarf", "link": "https://stackoverflow.com/users/3896330/daindwarf"}, "edited": false, "score": 0, "creation_date": 1423041665, "post_id": 28317653, "comment_id": 44984238, "body": "I thought those conversions would append at compile time rather than execution time."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 1535, "user_id": 3896330, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/91bfbe26ae69ceea219c9d728639435b?s=128&d=identicon&r=PG&f=1", "display_name": "DainDwarf", "link": "https://stackoverflow.com/users/3896330/daindwarf"}, "edited": false, "score": 0, "creation_date": 1423041748, "post_id": 28317653, "comment_id": 44984283, "body": "@DainDwarf You cannot know what value variable has at runtime, so conversion must be done at runtime (excluding constant expressions)."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 2, "creation_date": 1423042974, "post_id": 28317653, "comment_id": 44985045, "body": "Furthermore, there used to be a period of time when the manuals of the then-latest-and-greatest intel CPUs (early 386 if I remember correctly) clearly stated that many instructions accepting a byte operand would take one clock cycle longer to execute than the equivalent instructions dealing with a dword operand."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1423043060, "post_id": 28317653, "comment_id": 44985107, "body": "@user694733 in this simple case it may be calculated in compile time after optimization but in most case you can&#39;t simply do that in compile time except for constants. Write some functions using <code>int8_t</code> and you&#39;ll see it uses a lot of sign/zero extension to int and masking the type back to <code>int8_t</code>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 1, "creation_date": 1423043603, "post_id": 28317653, "comment_id": 44985438, "body": "@MikeNakis Not much different from today I guess: My ARM compiler manual says to avoid 8/16-bit types in favor of 32-bit types for these reasons."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1423043810, "post_id": 28317653, "comment_id": 44985558, "body": "@user694733 oops sorry, I intended to tag the OP, not you"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1598304659, "post_id": 28317653, "comment_id": 112410239, "body": "Sign-extension can be optimized away within a function, only needed when used with an <code>int</code> or pointer.  It does depend on the ABI, though; some like x86 allow high garbage, so there can be zero overhead for <code>int8_t</code> <a href=\"https://godbolt.org/z/E3hx34\" rel=\"nofollow noreferrer\">godbolt.org/z/E3hx34</a> shows that for x86, but shows overhead for ARM.  Also that it does it inefficiently, clearing high bits of both inputs instead of after adding.  Also, some microcontrollers with only 8-bit registers need extended precision to implement 16-bit <code>int</code>.  (e.g. AVR).  So <code>int8_t</code> is much faster there."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 15, "last_activity_date": 1423042511, "last_edit_date": 1423042511, "creation_date": 1423041606, "answer_id": 28317653, "question_id": 28317311, "link": "https://stackoverflow.com/questions/28317311/is-there-any-performance-difference-in-using-int-versus-int8-t/28317653#28317653", "title": "Is there any performance difference in using int versus int8_t", "body": "<p><code>int</code> is generally equivalent of the size of register on CPU. C standard says that any smaller types must be converted to <code>int</code> before using operators on them.</p>\n\n<p>These conversions (sign extension) can be costly.</p>\n\n<pre><code>int8_t a=1, b=2, c=3;\n ...\na = b + c; // This will translate to: a = (int8_t)((int)b + (int)c);\n</code></pre>\n\n<p>If you need speed, <code>int</code> is a safe bet, or use <code>int_fast8_t</code> (even safer). If exact size is important, use <code>int8_t</code> (if available).</p>\n"}, {"tags": [], "owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "is_accepted": false, "score": 1, "last_activity_date": 1598278884, "last_edit_date": 1598278884, "creation_date": 1423043147, "answer_id": 28318172, "question_id": 28317311, "link": "https://stackoverflow.com/questions/28317311/is-there-any-performance-difference-in-using-int-versus-int8-t/28318172#28318172", "title": "Is there any performance difference in using int versus int8_t", "body": "<p>when you talk about code performance, there are several things you need to take into account which affect this:</p>\n<ul>\n<li><p>CPU architecture, more to the point, which data types does the cpu support natively ( does it support 8 bit operations? 16 bit? 32 bit? etc...)</p>\n</li>\n<li><p>compiler, working with a well known compiler is not enough, you need to be familiar with it: they way you write your code influences the code it generates</p>\n</li>\n<li><p>data types and compiler intrinsics: these are always considered by the compiler when generating code, using the correct data type (even signed vs unsigned matters) can have a dramatic performance impact.</p>\n<p>&quot;Trying to be smarter than the compiler is always a bad idea&quot; - that is not actually true; remember, the compiler is written to optimize the general case and you are interested in you particular case; it's always a good idea to try and be smarter than the compiler.</p>\n</li>\n</ul>\n<p>Your question is really too broad for me to give a &quot;to the point&quot; answer (i.e. what is better performance wise). The only way to know for sure is to check the generated assembly code; at least count the number of cycles the code would take to execute in both cases. But you need to understand the code to understand how to help the compiler.</p>\n"}], "owner": {"reputation": 1535, "user_id": 3896330, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/91bfbe26ae69ceea219c9d728639435b?s=128&d=identicon&r=PG&f=1", "display_name": "DainDwarf", "link": "https://stackoverflow.com/users/3896330/daindwarf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3416, "favorite_count": 1, "accepted_answer_id": 28317653, "answer_count": 2, "score": 14, "last_activity_date": 1598278884, "creation_date": 1423040591, "question_id": 28317311, "link": "https://stackoverflow.com/questions/28317311/is-there-any-performance-difference-in-using-int-versus-int8-t", "title": "Is there any performance difference in using int versus int8_t", "body": "<p>My main question is, <strong>Is there any difference between int and int8_t for execution time</strong> ?</p>\n\n<p>In a framework I am working on, I often read code where some paramteres are set as <code>int8_t</code> in function because \"that particular parameter cannot be outside the -126,125 range\".</p>\n\n<p>In many places, <code>int8_t</code> is used for communication protocol, or to cut a packet into many fields into a <code>__attribute((packed)) struct</code>.</p>\n\n<p>But at some point, it was mainly put there because someone thought it would be better to use a type that match more closely the size of the data, probably think ahead of the compiler.</p>\n\n<p>Given that the code is made to run on Linux, compiled with gcc using glibc, and that memory or portability is not an issue, I am wondering if it is actually a good idea, performance-wise.</p>\n\n<p>My first impression comes from the rule \"Trying to be smarter than the compiler is always a bad idea\" (unless you know where and how you need to optimize). </p>\n\n<p>However, I do not know if using <code>int8_t</code> is actually a cost for performance (more testing and computation to match the <code>int8_t</code> size, more operations are needed to ensure the variable do not go out of bounds, etc.), or if it does improve performance in some way.</p>\n\n<p>I am not good at reading simple asm, so I did not compile a test code into asm to try to know which one is better.</p>\n\n<p>I tried to find a related question, but all discussion I found on <code>int&lt;size&gt;_t</code> versus <code>int</code> is about portability rather than performance.</p>\n\n<p>Thanks for your input. Assembly samples explained or sources about this issue would be greatly appreciated.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 1518, "user_id": 2064818, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/86cf4281383bf9b2818433f8292a32d6?s=128&d=identicon&r=PG", "display_name": "KiaMorot", "link": "https://stackoverflow.com/users/2064818/kiamorot"}, "edited": false, "score": 0, "creation_date": 1423040686, "post_id": 28317276, "comment_id": 44983632, "body": "You return a reference to local variable <code>input</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1423040687, "post_id": 28317276, "comment_id": 44983633, "body": "<code>p = &amp;input[0];</code> Although Returns the local address is invalid when the local address is outside the scope."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1423040703, "post_id": 28317276, "comment_id": 44983643, "body": "You&#39;re returning a pointer to a local array (<code>input[]</code>), goes out of scope (i.e. becomes invalid) when you return from <code>getIn()</code>."}, {"owner": {"reputation": 125, "user_id": 2659525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e080e13f3018b3b5a98d58a5a01d04b?s=128&d=identicon&r=PG", "display_name": "Max_S", "link": "https://stackoverflow.com/users/2659525/max-s"}, "edited": false, "score": 0, "creation_date": 1423041896, "post_id": 28317276, "comment_id": 44984381, "body": "thanks guys. I added malloc however it still doesn&#39;t work..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423045595, "post_id": 28317276, "comment_id": 44986712, "body": "That is because <code>input[]</code> is on the stack and the stack frame is destroyed on return from the function, no matter what you try to do with another pointer. You can try <code>static char input[30];</code> and remove the <code>malloc()</code> business (which causes a memory leak anyway)."}, {"owner": {"reputation": 125, "user_id": 2659525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e080e13f3018b3b5a98d58a5a01d04b?s=128&d=identicon&r=PG", "display_name": "Max_S", "link": "https://stackoverflow.com/users/2659525/max-s"}, "edited": false, "score": 0, "creation_date": 1423045712, "post_id": 28317276, "comment_id": 44986782, "body": "I thought malloc creates memory on the heap. This way I can pass pointer to this memory"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1423045753, "post_id": 28317276, "comment_id": 44986816, "body": "You allocated memory for 1 byte and then discarded it by re-assigning <code>p</code>."}], "owner": {"reputation": 125, "user_id": 2659525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e080e13f3018b3b5a98d58a5a01d04b?s=128&d=identicon&r=PG", "display_name": "Max_S", "link": "https://stackoverflow.com/users/2659525/max-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1423040653, "answer_count": 0, "score": 0, "last_activity_date": 1423041794, "creation_date": 1423040463, "last_edit_date": 1423041794, "question_id": 28317276, "link": "https://stackoverflow.com/questions/28317276/get-a-string-from-function-and-keep-it-in-c", "closed_reason": "Duplicate", "title": "Get a string from function and keep it in C", "body": "<p>I've got the following piece of code. I got a pointer from the function and keep it in array of char pointers. Everything looks OK however when I try to print from main function array[0] it prints some symbols but not what I need.\nI use now memory allocation in the function as advised however still not there</p>\n\n<p>Many thanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\n\nchar *getIn();\n\n\nint main(void)\n{\n  char *array[3];\n\n  array[0] = getIn();\n  array[1] = getIn();\n  array[2] = getIn();\n\n  printf(\"%s\\n\", array[0]);\n\n\n  return 0;\n}\n\nchar* getIn()\n{\n   char *p;\n   char input[30];\n\nprintf(\"Please enter something: \");\nfgets(input, 20, stdin);\n\ninput[strlen(input) - 1] = '\\0';\n\np = (char *) malloc(sizeof(char));\np = input;\nreturn p;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "algorithm", "concurrency", "synchronization", "locking"], "comments": [{"owner": {"reputation": 1556, "user_id": 4430998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c720a12ccc8a8aef8204eb794be8c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jarlax", "link": "https://stackoverflow.com/users/4430998/jarlax"}, "edited": false, "score": 0, "creation_date": 1423046060, "post_id": 28317104, "comment_id": 44986975, "body": "In what programming language are you trying to solve this?"}, {"owner": {"reputation": 1459, "user_id": 117263, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d991be03ac4d7b55ad49e401e9b1692?s=128&d=identicon&r=PG", "display_name": "Arnaud Gouder de Beauregard", "link": "https://stackoverflow.com/users/117263/arnaud-gouder-de-beauregard"}, "reply_to_user": {"reputation": 1556, "user_id": 4430998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c720a12ccc8a8aef8204eb794be8c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jarlax", "link": "https://stackoverflow.com/users/4430998/jarlax"}, "edited": false, "score": 0, "creation_date": 1423046699, "post_id": 28317104, "comment_id": 44987384, "body": "My actual implementation is in C. However, I think the algorithm could/should be independent of a programming language."}, {"owner": {"reputation": 1556, "user_id": 4430998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c720a12ccc8a8aef8204eb794be8c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jarlax", "link": "https://stackoverflow.com/users/4430998/jarlax"}, "edited": false, "score": 0, "creation_date": 1423053872, "post_id": 28317104, "comment_id": 44991301, "body": "Most languages have synchronization primitives that solve this problem. In case of C it probably (I&#39;m not an expert) will be something platform specific - I recommend to add tag <code>C</code> to the question and look what people will respond. In any case custom solution will not be language independent and it would be &quot;reinventing the wheel&quot;."}, {"owner": {"reputation": 2645, "user_id": 3310838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2wIwE.png?s=128&g=1", "display_name": "hayesti", "link": "https://stackoverflow.com/users/3310838/hayesti"}, "edited": false, "score": 0, "creation_date": 1434386704, "post_id": 28317104, "comment_id": 49744786, "body": "It might be slightly esoteric, but you might be interested in using software transactional memory for the problem. You could just put your &quot;do something with resource n&quot; line into atomic blocks."}], "answers": [{"tags": [], "owner": {"reputation": 2085, "user_id": 3787736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083a38739359a3cb689c5be4cd7a1985?s=128&d=identicon&r=PG", "display_name": "dho", "link": "https://stackoverflow.com/users/3787736/dho"}, "is_accepted": false, "score": 0, "last_activity_date": 1434385779, "creation_date": 1434385779, "answer_id": 30850310, "question_id": 28317104, "link": "https://stackoverflow.com/questions/28317104/algorithm-for-fine-grained-locking-of-many-resources/30850310#30850310", "title": "Algorithm for fine-grained locking of many resources", "body": "<p>Taken at face value, you seem to be asking two things:</p>\n\n<ol>\n<li>Is this a common pattern?</li>\n<li>Am I doing it correctly?</li>\n</ol>\n\n<p>To address #1, yes, this is common, but there is not to my knowledge a standard API or algorithm for doing this in C, especially when your resources are dynamically allocated. If you can pre-allocate your resources, and they are always accessed with an integer, you can simply do something like this:</p>\n\n<pre><code>#define N_RESOURCES 1024\n#define lock_resource(n) pthread_mutex_lock(&amp;(resources[(n)].mtx))\n#define unlock_resource(n) pthread_mutex_unlock(&amp;(resources[(n)].mtx))\n\nstruct resource *resources = calloc(N_RESOURCES, sizeof (*resources));\n</code></pre>\n\n<p>If <code>struct resource *</code> isn't an opaque pointer to you, and they are dynamically allocated, you can always do:</p>\n\n<pre><code>#define lock_resource(r) pthread_mutex_lock(&amp;((r)-&gt;mtx))\n#define unlock_resource(r) pthread_mutex_unlock(&amp;((r)-&gt;mtx))\n</code></pre>\n\n<p>If it is an opaque pointer:</p>\n\n<pre><code>struct locked_resource {\n    struct resource *r;\n    pthread_mutex_t mtx;\n}\n</code></pre>\n\n<p>And use the above locking strategy.</p>\n\n<p>If resources are dynamic and you need to initialize the lock when they're allocated and you cannot preallocate them, but you can set an upper limit to the number of resources you deal with, you can use a vector of locks and maintain a free-list. You could also use a <a href=\"http://research.swtch.com/sparse\" rel=\"nofollow\">sparse array</a>. Of course if the resources are also allocated concurrently, you'll have to protect your vector / free list / lock pool when resources are allocated / destroyed.</p>\n\n<p>This may be the case you're trying to avoid, at which point it might just be worth asking whether you could better identify your work model in terms of queueing producers and consumers and use <a href=\"http://concurrencykit.org/\" rel=\"nofollow\">a non-blocking data structure</a> instead.</p>\n\n<p>To address #2, it's impossible to say because you haven't really demonstrated what you're actually doing. In that light, I somewhat doubt that this is the kind of answer you're looking for. In particular, it seems like your resources may be dynamically allocated and they could disappear at some point (perhaps making <code>lock(n)</code> result in undefined behavior).</p>\n\n<p>If you can provide a better example, or show the code you are using to solve this problem, I (or someone) might perhaps be better able to answer your question.</p>\n"}], "owner": {"reputation": 1459, "user_id": 117263, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d991be03ac4d7b55ad49e401e9b1692?s=128&d=identicon&r=PG", "display_name": "Arnaud Gouder de Beauregard", "link": "https://stackoverflow.com/users/117263/arnaud-gouder-de-beauregard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434385779, "creation_date": 1423039898, "last_edit_date": 1423468924, "question_id": 28317104, "link": "https://stackoverflow.com/questions/28317104/algorithm-for-fine-grained-locking-of-many-resources", "title": "Algorithm for fine-grained locking of many resources", "body": "<p>I'm looking for an algorithm to solve the following problem:</p>\n\n<p>Two cores both are trying to use a resource from a pool of many resources. In general they will not be using the same resources at the same time, but of course they might. Only in that case, one core should wait for the other core to finish. Otherwise they can/should do their work in parallel.</p>\n\n<p>So the cores will be doing something like:</p>\n\n<pre><code>    lock(n);\n    \"do something with resource n\"\n    unlock(n);\n</code></pre>\n\n<p>Where n is the number of the resource, and there are many resources. </p>\n\n<p>I already implemented some code that seems to work, but I really don't want to reinvent the wheel, and I'm afraid that my code contains some odd race-condition that will show up somewhere in the future. Does anybody know if there is a standard algorithm for this?</p>\n\n<p>Best regards,</p>\n\n<p>Arnaud</p>\n"}]