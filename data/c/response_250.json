[{"tags": ["c", "loops", "linked-list"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1571873824, "post_id": 58532206, "comment_id": 103388120, "body": "<code>head-&gt;next</code> is not initialized."}, {"owner": {"reputation": 97, "user_id": 12265849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8cf6273ece31c4988cfbc7f10c65d2?s=128&d=identicon&r=PG&f=1", "display_name": "fresh42juice", "link": "https://stackoverflow.com/users/12265849/fresh42juice"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1571874372, "post_id": 58532206, "comment_id": 103388213, "body": "@wildplasser thank you, but that doesnt fix everything right?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571875754, "post_id": 58532206, "comment_id": 103388453, "body": "provide complete compilable code."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571879981, "post_id": 58532206, "comment_id": 103389132, "body": "<a href=\"https://www.geeksforgeeks.org/josephus-circle-using-circular-linked-list/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/josephus-circle-using-circular-linked-list</a>"}], "owner": {"reputation": 97, "user_id": 12265849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8cf6273ece31c4988cfbc7f10c65d2?s=128&d=identicon&r=PG&f=1", "display_name": "fresh42juice", "link": "https://stackoverflow.com/users/12265849/fresh42juice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571873418, "creation_date": 1571873418, "question_id": 58532206, "link": "https://stackoverflow.com/questions/58532206/how-to-traverse-through-linked-list-multiple-times-and-eliminate-nodes", "title": "How to traverse through linked list multiple times and eliminate nodes?", "body": "<p>I am trying to solve the Josephus problem using a linked list - <a href=\"https://en.wikipedia.org/wiki/Josephus_problem\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Josephus_problem</a>. Basically we have a specified number of people - let's say 6 with k being 3. I start counting from the start of the line/ circle of people and when k is reached, that person is eliminated. I then move onto the next person and k is reset and increased until the next person is reached. We do this until one person is remaining. Note - when counting people, we skip people that have already been eliminated. So in my example of 6 people and k = 3, the first person to be eliminated would be person 3 (or in array terms, index 2), with the last person to survive being person 1 (or index = 0).</p>\n\n<p>I have already solved this problem using an array and for loops. However, now I want to try to solve using a linked list as that is what I am learning. I have already created my linked list. I think the logic here is the same, count through the nodes of the linked list and eliminate the node when k is reached and so on. My problem is that I don't know how to traverse through the linked list multiple times and how to successfully eliminate until there is one (node)remaining.</p>\n\n<p>Firstly, creating the linkedlist with the specified number of people (valn):</p>\n\n<pre><code>int counter = 0;\nListNode * head = NULL;\nhead = malloc(sizeof(ListNode));\nhead -&gt; value = counter;\nListNode *current = &amp;head;\nwhile ( valn - 1 &gt; counter)\n{\n  current -&gt; next = malloc(sizeof*(current -&gt; next));\n  current = current -&gt; next;\n  current -&gt; value = counter;\n  current -&gt; next = NULL;\n  counter++;\n}\n</code></pre>\n\n<p>Head is then returned to main (which is already provided so I am certain it is correct)</p>\n\n<p>I then have a function that is supposed to count through the linked list and figure out which one to eliminate.</p>\n\n<p>This is what I have so far (with valk being the number to eliminate), head and valkn are passed into this function (which is void):</p>\n\n<pre><code>int counter = 0;\nListNode * p = head;\nwhile ( p != NULL)\n{\n  if (counter == valk)\n  {\n    ListNode * todelete = p;\n    printListNode (todelete); // Print function that was already provided (already correct) - basically print the value of the node to be eliminated.\n    deleteNode(head,todelete); // passed on to another function to delete - not sure how to delete yet\n    counter = 0;\n   }\n  p = p -&gt; next;\n  counter++;\n}\n</code></pre>\n\n<p>The header file (all the relevant libraries are included. Header file was also given):</p>\n\n<pre><code>typedef struct node {\n  int value;\n  struct node * next;\n} ListNode;\n\nvoid printListNode(ListNode * head);\nListNode * createList(int valn);\nvoid eliminate(ListNode * head, int valk);\nListNode * deleteNode(ListNode * head, ListNode * todelete);\n</code></pre>\n\n<p>Expected results are as described above, if my inputs are 6 and 3, I go through the linked list until the 1st (with value 0) node is remaining.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "variable-assignment"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1571872613, "post_id": 58532104, "comment_id": 103387883, "body": "You&#39;re not overwriting the array, you&#39;re reassigning the pointer."}, {"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 1, "creation_date": 1571872617, "post_id": 58532104, "comment_id": 103387884, "body": "The variable <code>string</code> is just a pointer to <code>char</code>, you&#39;re just changing what char it&#39;s pointing to."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1571872648, "post_id": 58532104, "comment_id": 103387894, "body": "You&#39;re not allowed to do <code>strcpy(string, &quot;changed&quot;);</code>, that would overwrite the array."}, {"owner": {"reputation": 381, "user_id": 11352579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f766d9ac410a6ecf7559b6300e2a28dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/11352579/jules"}, "edited": false, "score": 0, "creation_date": 1571872667, "post_id": 58532104, "comment_id": 103387898, "body": "this is what I assumed, but when I debug this code, I notice that the memory addresses are extremely close. as if I am concatenating the newly assigned string to the old string"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1571872675, "post_id": 58532104, "comment_id": 103387899, "body": "And it has nothing to do with whether you&#39;re using a pointer, it&#39;s because it points to a string literal rather than a writable string."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1571872700, "post_id": 58532104, "comment_id": 103387904, "body": "@Jules The compiler happens to put all the string data near each other in memory."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571873427, "post_id": 58532104, "comment_id": 103388044, "body": "If you open your executable with a text editor you can actually see the words somewhere in the binary noise. Once the program is loaded in memory, starts and the assignment is executed your pointer points to these bytes."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571880482, "post_id": 58532104, "comment_id": 103389232, "body": "<code>string</code> point to a location in memory you simply change that location."}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 6, "last_activity_date": 1571916937, "last_edit_date": 1571916937, "creation_date": 1571872943, "answer_id": 58532151, "question_id": 58532104, "link": "https://stackoverflow.com/questions/58532104/why-am-i-able-to-re-assign-a-new-string-to-a-char-pointer-in-c-like-so-ch-str/58532151#58532151", "title": "Why am I able to re-assign a new string to a char pointer in C like so ( ch *string = &quot;hello&quot;; string = &quot;assign&quot;;)", "body": "<p>Think about this (explanations to follow).\nThere are big differences between</p>\n\n<pre><code>char *string1 = \"hello\";\nchar *string2 = \"world\";\nstring1 = string2;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>char string3[] = \"hello\";\nchar string4[] = \"world\";\nstrcpy(string3, string4);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>char *string5 = \"hello\";\nchar *string6 = \"world\";\nstrcpy(string5, string6);            /* WRONG */\n</code></pre>\n\n<p>and</p>\n\n<pre><code>char string7[] = \"hello\";\nchar string8[] = \"world\";\nstring7 = string8;                   /* VERY WRONG */\n</code></pre>\n\n<p>Make sure you understand how the 1/2 and 3/4 cases are different but both work.  Make sure you understand why both the 5/6 and 7/8 cases are wrong and won't work (but for different reasons).</p>\n\n<hr>\n\n<p>Explanations:</p>\n\n<p>After</p>\n\n<pre><code>char string3[] = \"hello\";\nchar string4[] = \"world\";\n</code></pre>\n\n<p>you have two arrays initialized in memory that look like this:</p>\n\n<pre><code>         +---+---+---+---+---+---+\nstring3: | h | e | l | l | o |\\0 |\n         +---+---+---+---+---+---+\n\n         +---+---+---+---+---+---+\nstring4: | w | o | r | l | d |\\0 |\n         +---+---+---+---+---+---+\n</code></pre>\n\n<p>And after calling</p>\n\n<pre><code>strcpy(string3, string4);\n</code></pre>\n\n<p>you end up with</p>\n\n<pre><code>         +---+---+---+---+---+---+\nstring3: | w | o | r | l | d |\\0 |\n         +---+---+---+---+---+---+\n\n         +---+---+---+---+---+---+\nstring4: | w | o | r | l | d |\\0 |\n         +---+---+---+---+---+---+\n</code></pre>\n\n<p><code>strcpy</code> copied characters from <code>array4</code> to <code>array3</code>.  (Note, too, that the original <code>string3</code> and <code>string4</code> happened to have the same length.  It also would have worked if <code>string4</code> had been shorter, but if <code>string4</code> had been longer, there would have been an array overflow when copying it to <code>string3</code>.)</p>\n\n<p>Now to the pointer case.  After</p>\n\n<pre><code>char *string1 = \"hello\";\nchar *string2 = \"world\";\n</code></pre>\n\n<p>you have two anonymous arrays, typically in read-only memory, pointed to by two pointer variables that look like this:</p>\n\n<pre><code>         +-----------+      +---+---+---+---+---+---+\nstring1: |     *-----------&gt;| h | e | l | l | o |\\0 |\n         +-----------+      +---+---+---+---+---+---+\n\n         +-----------+      +---+---+---+---+---+---+\nstring2: |     *-----------&gt;| w | o | r | l | d |\\0 |\n         +-----------+      +---+---+---+---+---+---+\n</code></pre>\n\n<p>And then after</p>\n\n<pre><code>string1 = string2;\n</code></pre>\n\n<p>the pointers are rearranged to look like this:</p>\n\n<pre><code>         +-----------+      +---+---+---+---+---+---+\nstring1: |     *     |      | h | e | l | l | o |\\0 |\n         +-----|-----+      +---+---+---+---+---+---+\n               |\n               +--------------+\n                              |\n                              V\n         +-----------+      +---+---+---+---+---+---+\nstring2: |     *-----------&gt;| w | o | r | l | d |\\0 |\n         +-----------+      +---+---+---+---+---+---+\n</code></pre>\n\n<blockquote>\n  <p>But I was under the impression that char arrays initialized as a pointer (char *string as opposed to char string[]) are read-only and cannot be overwritten?</p>\n</blockquote>\n\n<p>Right.  And that's what goes wrong in the</p>\n\n<pre><code>char *string5 = \"hello\";\nchar *string6 = \"world\";\nstrcpy(string5, string6);            /* WRONG */\n</code></pre>\n\n<p>case.  <code>strcpy</code> tries to write new characters to <code>string5</code>, which fails if the pointed-to string has been stored in read-only memory.  For the same reason you can't do something like</p>\n\n<pre><code>string5[0] = 'H';                    /* WRONG */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 5, "last_activity_date": 1571873041, "creation_date": 1571873041, "answer_id": 58532161, "question_id": 58532104, "link": "https://stackoverflow.com/questions/58532104/why-am-i-able-to-re-assign-a-new-string-to-a-char-pointer-in-c-like-so-ch-str/58532161#58532161", "title": "Why am I able to re-assign a new string to a char pointer in C like so ( ch *string = &quot;hello&quot;; string = &quot;assign&quot;;)", "body": "<p>The string data could be laid out like this in memory:</p>\n\n<pre><code>Addr Contents\n---- --------\n1000 h e l l o \\0\n1006 c h a n g e d \\0\n1014 c h a n g e d   a g a i n \\0\n</code></pre>\n\n<p>When you initialize the variable <code>string</code>, it contains the address <code>1000</code>. The first reassignment changes it to <code>1006</code>, the second changes it to <code>1014</code>. The string data itself is not being overwritten.</p>\n"}, {"tags": [], "owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "is_accepted": false, "score": 0, "last_activity_date": 1571873815, "creation_date": 1571873815, "answer_id": 58532244, "question_id": 58532104, "link": "https://stackoverflow.com/questions/58532104/why-am-i-able-to-re-assign-a-new-string-to-a-char-pointer-in-c-like-so-ch-str/58532244#58532244", "title": "Why am I able to re-assign a new string to a char pointer in C like so ( ch *string = &quot;hello&quot;; string = &quot;assign&quot;;)", "body": "<blockquote>\n  <p>\"But I was under the impression that char arrays initialized as a\n  pointer (char *string as opposed to char string[]) are read-only and\n  cannot be overwritten?\"</p>\n</blockquote>\n\n<p>That's \"kinda sorta\" true, depending on how you look at it.  When the compiler hits an assignment to a literal, it sets aside a bit of memory for the literal and points your <code>char*</code> to it.  Depending on compiler and architecture you might not be able to change that memory.  In all cases you should <strong>never</strong> try to change that memory (after all you don't know where it's been).  In that way the actually memory where the string literal (the actual character values) is stored may very well be read-only.</p>\n\n<p>In the case you have shown you aren't changing the memory that contains the characters.  You are changing the address that <code>string</code> points to.  Assuming you are defining <code>string</code> in a function, the value will be allocated on the stack.  It will be <code>sizeof(void *)</code> and that memory can be changed \u2026 it is changed when you change what <code>string</code> points to.  You are changing the address where \"changed\" is stored to the address where \"changed again\" is stored.</p>\n"}], "owner": {"reputation": 381, "user_id": 11352579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f766d9ac410a6ecf7559b6300e2a28dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/11352579/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1571916937, "creation_date": 1571872500, "question_id": 58532104, "link": "https://stackoverflow.com/questions/58532104/why-am-i-able-to-re-assign-a-new-string-to-a-char-pointer-in-c-like-so-ch-str", "title": "Why am I able to re-assign a new string to a char pointer in C like so ( ch *string = &quot;hello&quot;; string = &quot;assign&quot;;)", "body": "<p>I would like to know why the following code is legal</p>\n\n<pre><code>char *string = \"hello\";\nstring = \"changed\";\nstring = \"changed again\";\n</code></pre>\n\n<p>This does not cause any problem with the compiler.</p>\n\n<p>But I was under the impression that char arrays initialized as a pointer (char *string as opposed to char string[]) are read-only and cannot be overwritten?</p>\n"}, {"tags": ["c", "brute-force"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1571871568, "post_id": 58531924, "comment_id": 103387655, "body": "<code>array[i+j] = !key[j]</code> should be <code>array[i+j] != key[j]</code>"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1571871679, "post_id": 58531924, "comment_id": 103387687, "body": "You should be adding <code>const</code> to pointer parameters that point to something you don&#39;t intend to change. It would have found the problem, for starters."}, {"owner": {"reputation": 1, "user_id": 8794374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103d9553e5fb460ba053c1e3cd0aad03?s=128&d=identicon&r=PG&f=1", "display_name": "J.Antoniou", "link": "https://stackoverflow.com/users/8794374/j-antoniou"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571873682, "post_id": 58531924, "comment_id": 103388096, "body": "that ain&#39;t it I corrected it before posting here I just forgot copy pasta again thanks though"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571877036, "post_id": 58531924, "comment_id": 103388665, "body": "<code>flag</code> should be set to zero inside the &quot;<code>i</code>&quot; loop. The first <code>if</code> should <code>break</code> instead of clearing the flag. The third <code>if</code> should be inside the body of the second."}, {"owner": {"reputation": 2416, "user_id": 12188799, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x2Us7lDjK_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbvJBo6jnFH2eAReBMTWM_XkFHSw/photo.jpg?sz=128", "display_name": "Javier Silva Ort&#237;z", "link": "https://stackoverflow.com/users/12188799/javier-silva-ort%c3%adz"}, "edited": false, "score": 0, "creation_date": 1571881868, "post_id": 58531924, "comment_id": 103389499, "body": "@JAntoniou I tested the code, the only difference being that I changed <code>array[i+j] = !key[j]</code> to be <code>array[i+j] != key[j]</code> and it actually does what you want, it returns the start index  of <code>key</code> in <code>array</code>. I also added <code>getchar()</code> after the <code>printf</code> to prevent the program from quickly closing right after printing the value, now it waits for you to hit the <code>enter</code> key."}, {"owner": {"reputation": 1, "user_id": 8794374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103d9553e5fb460ba053c1e3cd0aad03?s=128&d=identicon&r=PG&f=1", "display_name": "J.Antoniou", "link": "https://stackoverflow.com/users/8794374/j-antoniou"}, "edited": false, "score": 0, "creation_date": 1571906960, "post_id": 58531924, "comment_id": 103397491, "body": "flag should be set to zero inside the &quot;i&quot; loop. The first if should break instead of clearing the flag. The third if should be inside the body of the second.  It works after these changes for me, thanks everyone"}], "owner": {"reputation": 1, "user_id": 8794374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103d9553e5fb460ba053c1e3cd0aad03?s=128&d=identicon&r=PG&f=1", "display_name": "J.Antoniou", "link": "https://stackoverflow.com/users/8794374/j-antoniou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571871103, "creation_date": 1571871103, "question_id": 58531924, "link": "https://stackoverflow.com/questions/58531924/function-is-behaving-like-it-destroys-the-table-inside-the-if-statement", "title": "Function is behaving like it destroys the table inside the if statement", "body": "<p>It does returns the i value since for some reason it does not adds +1 to the counter and it cannot enter the if statement</p>\n\n<p>The function is supposed to be returning the starting position of the word hi when it matches it with the other table since it is comparing them.\nIt takes the table from main as I tested in the start of the for with a print but It does not print the table after the for </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int Brute_Force(char array[],char key[])  \n{\n    int i,j,flag=0;\n    for(i=0; i&lt;=8; i++)  \n    {\n       for(j=0; j&lt;2; j++) \n        {\n            if(array[i+j]=!key[j]) \n            {\n                flag=0;\n            }\n            if(array[i+j]==key[j])\n            {\n                flag=flag+1;\n            }\n            if(flag == 2)\n            {\n                return i;\n            }\n\n\n        }\n    }\n   return -1;  \n}\nint main()\n{\n   int show;\n\n char A[10] = {'o','h',' ','h','i',' ','m','i','k','e'};\n char B[2] = {'h','i'};  \n\n\n show = Brute_Force(A,B); \n\n   printf(\"%d\",show);\n\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 715, "user_id": 9808614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6c3462738284986bc8fa1d18ef30e3?s=128&d=identicon&r=PG", "display_name": "OrdoFlammae", "link": "https://stackoverflow.com/users/9808614/ordoflammae"}, "edited": false, "score": 1, "creation_date": 1571872861, "post_id": 58531869, "comment_id": 103387928, "body": "Hi. Welcome to Stack Overflow. You certainly didn&#39;t fall into the trap of not providing ENOUGH information! Try reading <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">A Minimal, Reproducible Example</a>. A couple of specific tips for this post: Only provide enough information to cause the problem. Rewrite your program, and only include the bare minimum to cause your error. Also, give the specific error that this program gives. Is it not reversed, or did you get a segmentation fault?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12173526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzxPjRgKOo49w2nu4eHveePF4HF76ASYAHZpDk=k-s128", "display_name": "mario segale", "link": "https://stackoverflow.com/users/12173526/mario-segale"}, "edited": false, "score": 0, "creation_date": 1571929783, "post_id": 58532254, "comment_id": 103409871, "body": "Thanks for your help.  It gave me an idea for what I was doing wrong."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12265627"}, "is_accepted": true, "score": 1, "last_activity_date": 1571873913, "creation_date": 1571873913, "answer_id": 58532254, "question_id": 58531869, "link": "https://stackoverflow.com/questions/58531869/im-making-a-linked-list-that-has-to-swap-its-order/58532254#58532254", "title": "I&#39;m making a linked list that has to swap it&#39;s order", "body": "<p>Based on <a href=\"https://www.geeksforgeeks.org/reverse-a-doubly-linked-list/\" rel=\"nofollow noreferrer\">this</a>, you can reverse the list this way:</p>\n\n<pre><code>/* Function to reverse a Doubly Linked List */\nvoid reverse(soldier **head_ref)  \n{  \n    soldier *temp = NULL;  \n    soldier *current = *head_ref;  \n\n    /* swap next and prev for all nodes of  \n    doubly linked list */\n    while (current != NULL)  \n    {  \n        temp = current-&gt;prev;  \n        current-&gt;prev = current-&gt;next;  \n        current-&gt;next = temp;              \n        current = current-&gt;prev;  \n    }  \n\n    /* Before changing the head, check for the cases like empty  \n        list and list with only one node */\n    if(temp != NULL )  \n        *head_ref = temp-&gt;prev;  \n} \n</code></pre>\n\n<p>Note that it does not make a new list which is reversed, instead it destructively takes the list and reverses it, also to do this you need to pass it a pointer to a \"pointer to the head\", and then you can reach the result in the \"pointer to the head\" (must be the same thing you passed the pointer of).\nIf however you would like to keep the original list in one piece, you can copy the whole list first, then reverse that new list.\nCode for copying list, based on <a href=\"https://stackoverflow.com/questions/13633182/c-program-to-make-a-second-copy-of-a-linked-list\">this</a>: </p>\n\n<pre><code>soldier *copy(soldier *start1)\n{\n    if(start1==NULL) return;\n    soldier *temp=(soldier *) malloc(sizeof(soldier));\n    temp-&gt;prev=start1-&gt;prev;\n    temp-&gt;data=start1-&gt;data;\n    temp-&gt;next=copy(start1-&gt;next);\n    return temp;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12173526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzxPjRgKOo49w2nu4eHveePF4HF76ASYAHZpDk=k-s128", "display_name": "mario segale", "link": "https://stackoverflow.com/users/12173526/mario-segale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 58532254, "answer_count": 1, "score": 1, "last_activity_date": 1571873913, "creation_date": 1571870737, "last_edit_date": 1571872156, "question_id": 58531869, "link": "https://stackoverflow.com/questions/58531869/im-making-a-linked-list-that-has-to-swap-its-order", "title": "I&#39;m making a linked list that has to swap it&#39;s order", "body": "<p>I'm writing a program that uses a doubly linked list.  first, it takes 2 numbers from the input.  the second number is to be used later but the first number, n, is used in a function to arrange the linked list so that it goes from n to 1 like n->n-1->n-2->...->1 while using next or prev to move between nodes.  Then another function takes the same linked list and swaps it around so it goes from 1 to 'n' but I can't figure out how to get it to swap.  Everything I change or try either shows up as a segmentation fault or returns the same list without changing anything.  Also, this is my first time having to use this website for any issues I have with coding so if I am doing something wrong, kindly let me know so I can avoid making any mistakes</p>\n\n<p>This is for a homework assignment in my computer science 1 class that is due 10/25/2019.  I just need help on the part of the code that is giving me the issues I cannot fix.</p>\n\n<pre><code>typedef struct nod{\n  int data;\n  struct nod *next;\n  struct nod *prev;\n}soldier;\nsoldier *head = NULL;\n\n\nsoldier* create_soldier (int sequence);\nsoldier* create_reverse_circle(int n);\nsoldier* rearrange_circle(soldier *head);\nvoid display(soldier *head);\nint kill(soldier* head, int n, int k);\n\n//dynamically allocates a solider node\nsoldier* create_soldier (int sequence){\n  soldier *temp = (soldier *)malloc(sizeof(soldier));\n  temp-&gt;data = sequence;\n  temp-&gt;next = NULL;\n  temp-&gt;prev = NULL;\n  return temp;\n}\n\n//creates a list of soliders from n to 1\nsoldier* create_reverse_circle(int n){\n  soldier *temp = NULL;\n  soldier *t = NULL;\n  int i;\n  //printf(\"w\");\n  for(i = n; i &gt; 0; i--){\n    temp = create_soldier(i);\n\n    if(head==NULL){\n      head=temp;\n      temp-&gt;next=head;\n    }\n    else{\n      t=head;\n      t-&gt;prev = t;\n      while(t-&gt;next!=head){\n        t=t-&gt;next;\n      }\n      t-&gt;next=temp;\n      temp-&gt;prev = t;\n      temp-&gt;next=head;\n    }\n  }\n\n  return head;\n}\n\n //rearranges the soliders in the list to go from 1 to n\n //the function I am having issues with\nsoldier* rearrange_circle(soldier* head){\n  soldier *t = (soldier *)malloc(sizeof(soldier));\n  soldier *temp = NULL;\n  soldier *exc = head;\n  int h = 0;\n  int k = 1;\n\n  //printf(\"\\ntest 1:\");  for test purposes\n  while(exc != head){\n    //tamp-&gt;data = k;\n    temp = exc;\n    temp-&gt;next = exc-&gt;prev;\n    temp-&gt;prev = exc-&gt;next;\n\n    if(h != 1){\n      head = temp;\n      temp-&gt;next = head;\n      h = 1;\n    }\n    else{\n\n      t = head;\n      while(t-&gt;next != head)\n        t=t-&gt;next;\n      t-&gt;next = temp;\n      temp-&gt;prev = t;\n      head-&gt;next = t-&gt;next;\n      temp-&gt;next = head;\n    }\n\n    exc = exc-&gt;next;\n    temp = temp-&gt;next;\n    //k++;\n  }\n\n  //printf(\"h = %d\\n\", h); also for test purposes\n\n\n  return head;\n}\n\n//displays the head of the list\n void display(soldier* head){\n  soldier *temp=head;\n  while(temp-&gt;next != head){\n    printf(\"%d-&gt;\", temp-&gt;data);\n    temp = temp-&gt;next;\n  }\n  printf(\"%d\", temp-&gt;data);\n\n}\n</code></pre>\n\n<p>The user is suppose to input 2 numbers.  the first number, n, determines the loop and the second number, k, will be used later.  the first function, create_reverse_circle, should take n and return a doubly linked list going from n to 1 to the main function to get printed in the display function.  Then, another function, rearrange_circle, takes that linked list, reverses the order so it goes from 1 to n, and returns it to main function to get printed again in the display function (which only prints the same result it did the first time, given that there isn't a segmentation fault).  Once the list has been swapped, an int function that I've left out because I have it solved, should use the linked list, N and the second number, K, to remove all the other nodes in the function until k+1 is remaining and return that value to be printed in the main.</p>\n"}, {"tags": ["c", "function", "return-value", "function-parameter"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1571870002, "post_id": 58531744, "comment_id": 103387309, "body": "In the first example, you have ignored the return value from <code>foo()</code>. You don&#39;t <i>have</i> to use it, but in this case it is pointless calling the function if you ignore its result. In the second example, you pass its return value to <code>printf()</code>."}, {"owner": {"reputation": 41, "user_id": 12265745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-igaxQh5MCRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcy2R9o0HCt2UsaDbW04Rr63PobVg/photo.jpg?sz=128", "display_name": "l0ngcat", "link": "https://stackoverflow.com/users/12265745/l0ngcat"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571870233, "post_id": 58531744, "comment_id": 103387364, "body": "Could you dumb it down a bit for me? I am very new to programming in general. What do you mean by I have ignored the return value in the first example? I am currently under the impression that the &#39;bar&#39; variable being returned within &#39;foo()&#39; would be passed into the parameters of the function. Is that not it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571870405, "post_id": 58531744, "comment_id": 103387398, "body": "Well, you say <code>foo()</code> does not return a value, but it does. You can obtain and report that value with, say, <code>int retval = foo(10); printf(&quot;%d\\n&quot;, retval);</code> It&#39;s the second example which is more tricky, as you never see the return value, but are feeding it directly into <code>printf</code>."}, {"owner": {"reputation": 1081, "user_id": 468603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d863f374f48bdb8cc516e006dc5196f4?s=128&d=identicon&r=PG", "display_name": "Xofo", "link": "https://stackoverflow.com/users/468603/xofo"}, "edited": false, "score": 0, "creation_date": 1571870416, "post_id": 58531744, "comment_id": 103387402, "body": "Your function <code>foo()</code> returns a value. You need to &#39;catch&#39; that value in either a variable (another integer) or through a function (as you did using <code>printf()</code>). In your first example you did nothing with the return variable of <code>foo()</code>&#39; ."}, {"owner": {"reputation": 41, "user_id": 12265745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-igaxQh5MCRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcy2R9o0HCt2UsaDbW04Rr63PobVg/photo.jpg?sz=128", "display_name": "l0ngcat", "link": "https://stackoverflow.com/users/12265745/l0ngcat"}, "edited": false, "score": 0, "creation_date": 1571870512, "post_id": 58531744, "comment_id": 103387423, "body": "All great answers, I understand now. Thanks!"}, {"owner": {"reputation": 1081, "user_id": 468603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d863f374f48bdb8cc516e006dc5196f4?s=128&d=identicon&r=PG", "display_name": "Xofo", "link": "https://stackoverflow.com/users/468603/xofo"}, "edited": false, "score": 0, "creation_date": 1571870576, "post_id": 58531744, "comment_id": 103387440, "body": "Accept the answer below (see the checkmark)."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 12265745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-igaxQh5MCRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcy2R9o0HCt2UsaDbW04Rr63PobVg/photo.jpg?sz=128", "display_name": "l0ngcat", "link": "https://stackoverflow.com/users/12265745/l0ngcat"}, "edited": false, "score": 0, "creation_date": 1571870456, "post_id": 58531792, "comment_id": 103387412, "body": "I think I understand it now. So the function is correctly returning the value, but since there is no variable being used to store the return value or a printf statement to print the return, it never shows up when the program executes?"}], "tags": [], "owner": {"reputation": 1165, "user_id": 3981539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a09Pb.jpg?s=128&g=1", "display_name": "Kavitha Karunakaran", "link": "https://stackoverflow.com/users/3981539/kavitha-karunakaran"}, "is_accepted": true, "score": 4, "last_activity_date": 1571870040, "creation_date": 1571870040, "answer_id": 58531792, "question_id": 58531744, "link": "https://stackoverflow.com/questions/58531744/how-function-calls-with-parameters-work-in-c/58531792#58531792", "title": "How function calls with parameters work in C?", "body": "<p>The function call foo(10) in </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    int foo(bar){\n        return bar * 2;\n    }\n\n    int main(){\n        foo(10);\n    }\n</code></pre>\n\n<p>indeed returns the value. But you were not capturing it in any variable or printing the returned value. Your second example actually prints the value returned from <code>foo(10);</code></p>\n"}, {"tags": [], "owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "is_accepted": false, "score": 0, "last_activity_date": 1571871451, "creation_date": 1571871451, "answer_id": 58531969, "question_id": 58531744, "link": "https://stackoverflow.com/questions/58531744/how-function-calls-with-parameters-work-in-c/58531969#58531969", "title": "How function calls with parameters work in C?", "body": "<p>There's already a useful answer, so here is a more-technical answer:</p>\n\n<p>In your second example, you <em>print</em>ed the result of <code>foo(10)</code>, but there is a way to really <em>return</em> a value from a C program.</p>\n\n<pre><code>int main() {\n    return 14;\n}\n</code></pre>\n\n<p>Immediately after running the script in the shell, <code>echo $?</code> (or <code>echo %errorlevel%</code> on Windows) will print the exit code of the program, which for a simple C program, is the value returned by <code>main</code>.</p>\n\n<p>Usually, a value of 0 represents success, and anything else indicates some error or another. The other common way to generate an exit code is by passing an integer (or the constants <code>EXIT_SUCCESS</code> or <code>EXIT_FAILURE</code>) to the <code>exit</code> function from <code>stdlib.h</code>.</p>\n\n<p>(Of course, you usually want to print the results of your program, or write them to a file, so they are easy to look at or save for later, but it's the type of distinction that might be useful to know about, even if it doesn't come up as often.)</p>\n"}], "owner": {"reputation": 41, "user_id": 12265745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-igaxQh5MCRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcy2R9o0HCt2UsaDbW04Rr63PobVg/photo.jpg?sz=128", "display_name": "l0ngcat", "link": "https://stackoverflow.com/users/12265745/l0ngcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 58531792, "answer_count": 2, "score": 1, "last_activity_date": 1571871451, "creation_date": 1571869708, "question_id": 58531744, "link": "https://stackoverflow.com/questions/58531744/how-function-calls-with-parameters-work-in-c", "title": "How function calls with parameters work in C?", "body": "<p>I am learning C and came across something I was curious about. For me, calling foo in main like follows does not return anything:</p>\n\n<pre><code>int foo(bar){\n    return bar * 2;\n}\n\nint main(){\n    foo(10);\n}\n</code></pre>\n\n<p>Only when I format the output with printf will it return the result from foo to main. Is this intended or am I missing something? The following example works:</p>\n\n<pre><code>int foo(bar){\n    return bar * 2;\n}\n\nint main(){\n    // will return 20\n    printf(\"%d\\n\", foo(10));\n}\n</code></pre>\n"}, {"tags": ["c", "file", "file-io"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571865953, "post_id": 58531160, "comment_id": 103386165, "body": "Aside: <code>char ch</code> should be <code>int ch</code> as returned by function <code>fgetc()</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1571866276, "post_id": 58531160, "comment_id": 103386283, "body": "If you want to open the <i>same</i> file every time, use <code>char file_name[] = &quot;Data.txt&quot;;</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1571866327, "post_id": 58531160, "comment_id": 103386299, "body": "What are you learning from that says to use <code>gets()</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1571866459, "post_id": 58531160, "comment_id": 103386339, "body": "...especially with such a small buffer <code>file_name[25];</code>"}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1571959021, "post_id": 58531160, "comment_id": 103421341, "body": "@JohnFore I have updated your accepted answer for completeness and posterity. Perhaps investigating the different options will help you understand the many ways C allows you to approach solving a problem."}], "answers": [{"comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 2, "creation_date": 1571866371, "post_id": 58531254, "comment_id": 103386314, "body": "Why not just <code>char* file_name = &quot;Data.txt&quot;;</code> ?"}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1571866523, "post_id": 58531254, "comment_id": 103386356, "body": "Removing <code>gets()</code> prevents it from being overwritten. Why not <code>const char</code>? Why not <code>snprintf()</code>? How long is a piece of string!?"}], "tags": [], "owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "is_accepted": true, "score": -1, "last_activity_date": 1571958537, "last_edit_date": 1571958537, "creation_date": 1571866282, "answer_id": 58531254, "question_id": 58531160, "link": "https://stackoverflow.com/questions/58531160/how-to-read-and-print-the-contents-of-a-txt-file-in-c/58531254#58531254", "title": "How to read and print the contents of a txt file in C", "body": "<p>There are a few ways to define the filename without user intervention. In all cases, remove</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>printf(\"Enter name of a file you wish to see\\n\");\ngets(file_name);\n</code></pre>\n\n<hr>\n\n<p>Replace <code>gets(file_name);</code> with <code>strcpy(file_name, \"Data.txt\");</code>.</p>\n\n<p>You will need to also <code>#include &lt;string.h&gt;</code>.</p>\n\n<hr>\n\n<p>Replace <code>file_name[25]</code> with <code>file_name[] = \"Data.txt\"</code></p>\n\n<hr>\n\n<p>Replace <code>char ch, file_name[25];</code> with <code>char ch; char *file_name = \"Data.txt\";</code>\nYou could also declare the string as constant: <code>const char *file_name = \"Data.txt\";</code>.</p>\n\n<hr>\n\n<p>Replace <code>gets(file_name);</code> with <code>snprintf(file_name, (sizeof(file_name)/sizeof(file_name[0]))-1, \"Data.txt\");</code></p>\n\n<p><code>sizeof(file_name)/sizeof(file_name[0])</code> calculates the maximum length of the array by dividing the total array's size by the length of a single element. We subtract 1 to reserve an element for the string termination character <code>'\\0'</code>.</p>\n\n<p><code>snprintf()</code> would allow you to build the filename programmatically.</p>\n\n<hr>\n\n<p>Remove <code>, file_name[25]</code>.</p>\n\n<p>Replace <code>fp = fopen(file_name, \"r\");</code> with <code>fp = fopen(\"Data.txt\", \"r\");</code>.</p>\n\n<p>Replace <code>printf(\"The contents of %s file are:\\n\", file_name);</code> with <code>printf(\"The contents of the file are:\\n\");</code></p>\n\n<p>(Note the loss of functionality)</p>\n"}, {"tags": [], "owner": {"reputation": 732, "user_id": 6382968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59bbc59eca5c51c0ea62e2d9cb0de53a?s=128&d=identicon&r=PG&f=1", "display_name": "MCI", "link": "https://stackoverflow.com/users/6382968/mci"}, "is_accepted": false, "score": 3, "last_activity_date": 1571866368, "creation_date": 1571866368, "answer_id": 58531267, "question_id": 58531160, "link": "https://stackoverflow.com/questions/58531160/how-to-read-and-print-the-contents-of-a-txt-file-in-c/58531267#58531267", "title": "How to read and print the contents of a txt file in C", "body": "<p>Will you always be reading from Data.txt ? If so you can hardcode the file name and replace <code>gets(file_name);</code> with <code>char * file_name = \"Data.txt\"</code> . If you do this also remove the current definition of <code>file_name</code> to avoid a redefinition error.</p>\n"}], "owner": {"reputation": 41, "user_id": 11411854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wf1qhbexaps/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3fUvqesIdynm2jZwB5zCVdtJILg/mo/photo.jpg?sz=128", "display_name": "John Fore", "link": "https://stackoverflow.com/users/11411854/john-fore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 58531254, "answer_count": 2, "score": 1, "last_activity_date": 1571958537, "creation_date": 1571865747, "question_id": 58531160, "link": "https://stackoverflow.com/questions/58531160/how-to-read-and-print-the-contents-of-a-txt-file-in-c", "title": "How to read and print the contents of a txt file in C", "body": "<p>I am trying to find an easier way of reading a text file. I have never programed in C before so this is all new to me. My goal is to be able to run my program and have it automatically print to the screen. What I have below works but I have to enter the file in every time. Any help would be greatly appreciated. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\n    char ch, file_name[25];\n    FILE *fp;\n\n       printf(\"Enter name of a file you wish to see\\n\");\n       gets(file_name);\n\n       fp = fopen(file_name, \"r\"); // read mode\n\n       if (fp == NULL)\n       {\n          perror(\"Error while opening the file.\\n\");\n          exit(EXIT_FAILURE);\n       }\n\n       printf(\"The contents of %s file are:\\n\", file_name);\n\n       while((ch = fgetc(fp)) != EOF)\n          printf(\"%c\", ch);\n\n       fclose(fp);\n       return 0;\n}\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>Enter name of a file you wish to see\nwarning: this program uses gets(), which is unsafe.\nData.txt\nThe contents of Data.txt file are:\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n</code></pre>\n"}, {"tags": ["c++", "c", "clang", "clang-format"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 6, "creation_date": 1571865339, "post_id": 58531030, "comment_id": 103385972, "body": "Why would you want that style? It&#39;s confusing to read. Indentation level often indicates scope changes. The style you suggest confuses the reader, leading them to believe that the variables are placed in the global scope when they actually belong within the function&#39;s scope."}, {"owner": {"reputation": 121, "user_id": 10977033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b481acf5d5db6290dcf3fa07724541d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/10977033/jenny"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1571865429, "post_id": 58531030, "comment_id": 103386009, "body": "Hi Myst: Well, that&#39;s the prefered style of our company"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 2, "creation_date": 1571865571, "post_id": 58531030, "comment_id": 103386053, "body": "I&#39;m sorry for that. Must be confusing to read... the only solution I can think of is to use <code>&#47;&#47; clang-format off</code> and <code>&#47;&#47; clang-format on</code> around these variable declarations. There&#39;s probably a better answer somewhere, so I&#39;ll avoid posting anything."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571865588, "post_id": 58531030, "comment_id": 103386062, "body": "What do you do with a variable defined at block scope? Does it appear on the left margin?"}, {"owner": {"reputation": 121, "user_id": 10977033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b481acf5d5db6290dcf3fa07724541d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/10977033/jenny"}, "edited": false, "score": 0, "creation_date": 1571866048, "post_id": 58531030, "comment_id": 103386201, "body": "@ Weather Vane: Yes, it does."}, {"owner": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1571866813, "post_id": 58531030, "comment_id": 103386434, "body": "Just a pedantic note: &quot;<i>initial parameters</i>&quot; Those aren&#39;t parameters. They&#39;re just local variables."}, {"owner": {"reputation": 1095, "user_id": 13501674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c01e5dc07ebbf5f191d177303accdf?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Backus", "link": "https://stackoverflow.com/users/13501674/eric-backus"}, "edited": false, "score": 0, "creation_date": 1598382033, "post_id": 58531030, "comment_id": 112439662, "body": "No, <code>clang-format</code> has no way to do that."}], "owner": {"reputation": 121, "user_id": 10977033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b481acf5d5db6290dcf3fa07724541d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/10977033/jenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571865009, "creation_date": 1571865009, "question_id": 58531030, "link": "https://stackoverflow.com/questions/58531030/how-do-i-remove-spaces-before-parameters-initialization-in-clang-format", "title": "How do I remove spaces before parameters initialization in clang-format?", "body": "<p>In clang-format file code is appared in the same verticle position as initial parameters. I'd like to have the initial parameters have no space but rest of the code should have space of 4 spaces(single tab size). How do I achieve the desired format?</p>\n\n<p><strong>I have this:</strong></p>\n\n<pre><code>int main() {\n    int i;\n    int j; //parameters initialized\n    if() {\n        // stuff    //rest of the code\n    }\n}\n</code></pre>\n\n<p><strong>I want this:</strong></p>\n\n<pre><code>int main() {\nint i;\nint j; //parameters initialized\n    if() {\n        // stuff    //rest of the code\n    }\n}\n</code></pre>\n\n<p><strong>My clang-format file looks like this:</strong></p>\n\n<pre><code># Abge\u00e4nderte .clang-format-Datei\n# Anhaltspunkt ist https://clang.llvm.org/docs/ClangFormatStyleOptions.html\n# sowie: https://clangformat.com\n\n#for visual studio 2017 you have to comment this one thing:\n#BreakInheritanceList: AfterColon\n\n#version for visual studio 2017:\n#Language: Cpp\n#BasedOnStyle: LLVM\nAccessModifierOffset: 0\nAlignAfterOpenBracket: Align\nAlignConsecutiveAssignments: false\nAlignConsecutiveDeclarations: false\nAlignEscapedNewlinesLeft: true\nAlignOperands:   true\nAlignTrailingComments: false\nAllowAllParametersOfDeclarationOnNextLine: true\nAllowShortBlocksOnASingleLine: true\nAllowShortCaseLabelsOnASingleLine: true\nAllowShortIfStatementsOnASingleLine: true\nAllowShortFunctionsOnASingleLine: true\nAllowShortLoopsOnASingleLine: true\nAlwaysBreakAfterDefinitionReturnType: None\nAlwaysBreakAfterReturnType: None\nAlwaysBreakBeforeMultilineStrings: false\nAlwaysBreakTemplateDeclarations: false\nBinPackArguments: true\nBinPackParameters: true\nBreakBeforeBinaryOperators: None\nBreakBeforeBraces: Attach\nBreakBeforeTernaryOperators: false\nBreakConstructorInitializers: AfterColon\n#BreakInheritanceList: AfterColon\nColumnLimit:     300\nContinuationIndentWidth: 2\nCpp11BracedListStyle: false\nDerivePointerAlignment: false\nDisableFormat:   false\nSortIncludes: false\nIndentCaseLabels: true\nIndentWidth:     2\nIndentWrappedFunctionNames: true\nKeepEmptyLinesAtTheStartOfBlocks: false\nMaxEmptyLinesToKeep: 2\nNamespaceIndentation: All\n#PenaltyBreakBeforeFirstCallParameter: 19\n#PenaltyBreakComment: 300\n#PenaltyBreakFirstLessLess: 120\n#PenaltyBreakString: 1000\n#PenaltyExcessCharacter: 1000000\n#PenaltyReturnTypeOnItsOwnLine: 60\nPointerAlignment: Right\nReflowComments:  true\nSpaceAfterCStyleCast: false\nSpaceAfterTemplateKeyword: true\nSpaceBeforeAssignmentOperators: true\nSpaceBeforeParens: Never\nSpaceInEmptyParentheses: false\nSpacesBeforeTrailingComments: 4\nSpacesInAngles:  true\nSpacesInContainerLiterals: true\nSpacesInCStyleCastParentheses: false\nSpacesInParentheses: true\nSpacesInSquareBrackets: true\nTabWidth:        4\nUseTab:          Never\n</code></pre>\n"}, {"tags": ["c++", "c", "singly-linked-list"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1571864682, "post_id": 58530921, "comment_id": 103385750, "body": "<code>char character;</code> --&gt; <code>int character;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1571864737, "post_id": 58530921, "comment_id": 103385767, "body": "Please specify C or C++. They are different languages with different rules. For example in C++, <code>typedef struct wordNode{ ... }wordNode;</code> is wasted time. <code>struct wordNode{ ... };</code> is sufficient and in C the cast in <code>current = (wordNode*)malloc(sizeof(wordNode));</code> is not required. `"}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571864961, "post_id": 58530921, "comment_id": 103385856, "body": "Looks more like C; I don&#39;t know if it&#39;s possible to just remove the C++ tag. If C++ is desired, then are you fine just using <code>std::list&lt;T&gt;</code>, or does this have to be self-made?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1571865094, "post_id": 58530921, "comment_id": 103385895, "body": "Consider separating the linked list logic from the rest. It is almost always easier to get the linked list figured out on its own. Once you have a functional linked list, THEN it&#39;s safe to write code that uses it. If you try to integrate the two, you often spend many times longer debugging. In general, do one thing. Prove it works correctly. Move on to doing the next thing."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1571865309, "post_id": 58530921, "comment_id": 103385962, "body": "Your bug: Nothing in <code>if (head==NULL)</code>&#39;s <code>else</code> case links new <code>wordNode</code> to anything other nodes. <code>head</code> is left pointing to NULL and the rest of the nodes are leaked."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571868638, "post_id": 58530921, "comment_id": 103386977, "body": "I recommend using <code>std::string</code> in your node for text.  The <code>char</code> arrays will get messy and may inject issues especially when copying or initializing the node."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571868708, "post_id": 58530921, "comment_id": 103386993, "body": "BTW, any statements after <code>exit()</code> will not be executed, because your program has exited to the operating system."}, {"owner": {"reputation": 11, "user_id": 12265455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a887ff3985bf6224ed226e8b42c835e?s=128&d=identicon&r=PG&f=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/12265455/shawn"}, "edited": false, "score": 0, "creation_date": 1571869937, "post_id": 58530921, "comment_id": 103387295, "body": "I am using c language."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1571882061, "post_id": 58530921, "comment_id": 103389534, "body": "Please simplify your example. Try counting the words in a single file whose name is hardcoded into your code. (Don&#39;t parse command line arguments until you have the logic working.) Better yet, hardcode the text to process and don&#39;t open a file. Don&#39;t fork a new process. If that works, add back complications one at a time until the problem resurfaces. Then re-simplify, removing the unneeded complications and narrowing down the problem to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1571896520, "post_id": 58530921, "comment_id": 103392754, "body": "Do you want to insert every character you encounter or a string separated by spaces. Also do you want to insert them at the start of the list or end of the list?"}], "owner": {"reputation": 11, "user_id": 12265455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a887ff3985bf6224ed226e8b42c835e?s=128&d=identicon&r=PG&f=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/12265455/shawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571864440, "creation_date": 1571864440, "question_id": 58530921, "link": "https://stackoverflow.com/questions/58530921/putting-strings-into-linked-list", "title": "putting strings into linked list", "body": "<p>My wordcount function has some issues. If anyone can please help.\nI am reading characters from input file, converting them into words. I add them to linked list\nand using print statements checking that every word is going into linked list. When i call My printList\nfunction in wordcount function it only prints the head. Apparently head->next is null</p>\n\n<pre><code>typedef struct wordNode{\n    int data;\n    char *word;\n    struct wordNode *next;\n}wordNode;\n\nvoid wordCount(char *FileName); // function prototype\nvoid printList(wordNode *head);\n\nint main(int argc, char *argv[]){\n    int i,j;\n    int count = argc-1; // the count basically tells the for loop how many times to runs i.e number of files\n    pid_t childpid[count], wpid; // making a childpid array for forking more than one process\n        int status=0; // for parent process to wait for child\n\n        if(argc &gt;= 1){\n            for(j=1; j&lt;argc; j++){\n                    childpid[j] = fork();\n\n                    if(childpid[j] == -1)\n                        printf(\"The fork didn't go through for process %d\\n\", j);\n                    else if(childpid[j] == 0){\n                       // printf(\"got here\\n\");\n                        wordCount(argv[j]);\n                }\n\n            }\n        }\n\n        else {\n            printf(\"incorrect no. of argc\\n\"); }\n\n\n        //here the following code makes parent to wait for all the child processes to terminate\n\n        while((wpid = wait(&amp;status)) &gt; 0){\n\n            if ((wpid == -1)){\n                printf(\"Father didn't wait for child to term\");\n                break;\n            }\n        }\n\n        printf(\"All %d files have been counted\\n\", count);\n        return 0;\n\n}\n\n\nvoid wordCount(char *FileName){\n    char prev;  // keep track of last word that was read\n    char character;// to keep track of each character when reading input data\n    int words=0; // keep count of words\n    FILE* fp;\n    char thisword[100];\n\n    int k=0;\n\n    wordNode *head;\n    wordNode *current;\n    head=NULL;\n\n    current = NULL;\n\n    fp=fopen(FileName,\"r\");\n    prev='\\0';\n\n    if(fp==NULL){\n        printf(\"unable to open the file\\n\");\n        exit(EXIT_FAILURE); }\n    else{\n\n    while((character = fgetc(fp)) != EOF ){\n\n        if(character == ' ' || character == '\\t' || character=='\\0' || character =='\\n' ){\n            printf(\"in here\\n\");\n\n            words++; \n            thisword[k]='\\0';\n            printf(\"HERE THE WORD is %s\\n\", thisword);\n            printf(\"\\n\");\n            if (head==NULL){\n\n                head = malloc(sizeof(wordNode));\n                head-&gt;next = malloc(sizeof(wordNode));\n                head-&gt;word = (char *)calloc(strlen(thisword) + 1, strlen(thisword));\n                strcpy(head-&gt;word, thisword);\n\n                printf(\"%s \\n\", head-&gt;word);\n                current = head-&gt;next;\n            }\n\n            else{\n                current = (wordNode*)malloc(sizeof(wordNode));\n                current-&gt;word = (char *)calloc(strlen(thisword) + 1,  strlen(thisword));\n                strcpy(current-&gt;word, thisword);\n                current-&gt;next = NULL;\n                printf(\"%s\\n \", current-&gt;word);\n                current = current-&gt;next;\n            }\n\n            k=0;\n         }\n\n         else {\n            thisword[k++] = tolower(character);   \n         }\n\n    }\n        printList(head);\n        printf(\"Child process for %s: number of words is %d\\n\", FileName,words);\n        exit(0);\n        fclose(fp);\n    }   \n\n}\n\n\n\nvoid printList(wordNode *head)\n{\n    while(head != NULL)\n    {\n        printf(\"%s \", head-&gt;word);\n        head = head-&gt;next;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers", "memory", "memory-leaks"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1571862909, "post_id": 58530570, "comment_id": 103385083, "body": "What exactly do you expect to &quot;leak&quot;, here? You appear to be operating under a misunderstanding that you must always <code>free</code> after using a pointer. This is incorrect. You must always <code>free</code> everything that was <code>malloc</code>ed, at some point. Nothing more, nothing less. I don&#39;t see any <code>malloc</code>ing going on in the shown code, so there&#39;s nothing to <code>free</code> here."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1571862912, "post_id": 58530570, "comment_id": 103385085, "body": "Your variable is a <i>local copy</i> of the struct. It has automatic storage duration. Your code is also bad because it is probably a needless copy."}, {"owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1571863282, "post_id": 58530570, "comment_id": 103385260, "body": "@SamVarshavchik That&#39;s the point of asking a question... I was probably misunderstanding/missing something. Thanks for your comment, seem pretty obvious now."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1571863337, "post_id": 58530570, "comment_id": 103385281, "body": "kind of &lt;O/T&gt;, since speed seems to be a concern for you, you should probably pass a pointer to <code>st_displayLines</code> to <code>updateScreen</code>, like this: <code>void updateScreen(const st_displayLines* st_toDisplay);</code> As is, each time you call that function, a copy of the entire structure is made, which will take a little extra time. However, there&#39;s not enough code to know if that&#39;s really what you want/need. With a pointer, only the pointer is copied, which is less data than the overall struct."}, {"owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571863479, "post_id": 58530570, "comment_id": 103385338, "body": "@yano I am passing the struct as value, so indeed I loose time copying the whole memory to the argument. Thanks for the advice, I&#39;ll change to pass just a pointer for the first element of the struct."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1571863680, "post_id": 58530570, "comment_id": 103385412, "body": "Any particular reason you&#39;re using a struct instead of a 2D array for everything, i.e. <code>char st_toDisplay[6][13]</code>?  it would make it easier to index the rows and columns."}, {"owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1571863947, "post_id": 58530570, "comment_id": 103385519, "body": "@dbush Well noticed, backward compatibility is the reason. One of the reasons for the pointer is for making easier the indexing part of it."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1571862939, "creation_date": 1571862939, "answer_id": 58530644, "question_id": 58530570, "link": "https://stackoverflow.com/questions/58530570/memory-leakage-when-accessing-using-pointer-elements-from-a-struct-received-by/58530644#58530644", "title": "Memory Leakage when accessing, using pointer, elements from a struct received by argument", "body": "<p>Memory leaks happen when memory allocated with <code>malloc</code> no longer has a pointer pointing to it and the memory is not free'ed.  The code as you've shown it doesn't allocate memory, so there's no leak.  </p>\n\n<p>Simply using a pointer variable is no different from using an <code>int</code>.  The variable is in scope at the point it is declared and goes out of scope at the end of the enclosing compound statement.  So no need to free anything.</p>\n"}], "owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571862939, "creation_date": 1571862633, "question_id": 58530570, "link": "https://stackoverflow.com/questions/58530570/memory-leakage-when-accessing-using-pointer-elements-from-a-struct-received-by", "title": "Memory Leakage when accessing, using pointer, elements from a struct received by argument", "body": "<p><strong>A little of context:</strong> I have recently developed a generic function to update a display image based just on which parts of it have changed. For that I receive as parameter a known struct which members are arrays of chars (display lines) and I compare it to the currently displayed information in order to update just the necessary, improving the performance. It is an embedded system for arm cortex-m0 in case it matters.\nBelow is the code code snippet for the struct.</p>\n\n<pre><code>struct displayLines {\n    char firstLine[13];\n    char secondLine[13];\n    char thirdLine[13];\n    char fourthLine[13];\n    char fivethLine[13];\n    char sixthLine[13];\n};\ntypedef struct displayLines st_displayLines;\n</code></pre>\n\n<p>Based on that struct I use a pointer, initialized with the first element address and operate with it to access the whole struct data (all lines). Below is the code snippet showing how I initialize the pointer.</p>\n\n<pre><code>void updateScreen(st_displayLines st_toDisplay)\n{\n    char *ptrtoUpdate  = st_toDisplay.firstLine;\n    char *ptrDisplayed = st_currentlyDisplayed.firstLine;\n\n    //Here is the update code which consumes the pointers.\n}\n</code></pre>\n\n<p>After operating with the same pointer variable (using arithmetic over it) and consuming its data I just return from the function, without using calling <b>free</b> operation over the pointer variable. \n<br><br><strong>The question finally is:</strong>\n<br>Is this a memory leakage? Or the allocated memory for creating the pointers will be released once I'm outside the function scope?\n<br>If it is a leakage, would it hold 1 byte per each pointer variable of my memory every time I call this function? In a manner that (making numbers now) if I have just 10 bytes of memory available, on the 6th call of the function my program would crash?</p>\n"}, {"tags": ["c++", "c", "arrays", "partitioning"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1571859330, "post_id": 58529819, "comment_id": 103383621, "body": "<a href=\"https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Bresenham%27s_line_algorithm</a>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1571859486, "post_id": 58529819, "comment_id": 103383677, "body": "maybe try <code>section[0] = size&#47;n; section[1] = (size - section[0])&#47;(n-1); section[2] = (size-section[0]-section[1])&#47;(n-2);</code> ..."}, {"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1571859796, "post_id": 58529819, "comment_id": 103383800, "body": "(Both comments will produce the same result, but unless you need it to be very fast - which was the idea for the line drawing algorithm -, @pmg&#39;s is the simpler one to comprehend)"}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 6, "last_activity_date": 1571860453, "creation_date": 1571860453, "answer_id": 58530102, "question_id": 58529819, "link": "https://stackoverflow.com/questions/58529819/split-a-list-into-equal-parts/58530102#58530102", "title": "Split a list into equal parts?", "body": "<p>The usual approach, when you\u2019re fine with grouping all the larger pieces, is</p>\n\n<pre><code>const int total=/*\u2026*/,pieces=/*\u2026*/;\nconst int base=total/pieces,extra=total%pieces;\n</code></pre>\n\n<p>Then the first <code>extra</code> (perhaps 0) pieces have size <code>base+1</code> and the (<code>pieces-extra</code>) others have size <code>base</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 11672706, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-haTDPwh5luU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcoR0zt23FgGX1ijRYutTEaFj7tJQ/mo/photo.jpg?sz=128", "display_name": "Jedediah Heal", "link": "https://stackoverflow.com/users/11672706/jedediah-heal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58530102, "answer_count": 1, "score": 3, "last_activity_date": 1571860453, "creation_date": 1571859076, "question_id": 58529819, "link": "https://stackoverflow.com/questions/58529819/split-a-list-into-equal-parts", "title": "Split a list into equal parts?", "body": "<p>I have an array of <code>size</code> elements, and I have a function that will split it into roughly equal sections. It does this by setting the size of the first <code>size-1</code> sections with <code>size/num_of_sections</code>, and setting the size of the last section with whatever is left. The code is simple, works correctly and looks like so:</p>\n\n<pre><code>int section_size = size / num_of_sections;\nint last_section_size = size - ( section_size * (num_of_sections - 1) );\n</code></pre>\n\n<p>The only problem is that there are some combinations of <code>size</code> and <code>num_of_sections</code> that does not split very well. For example, if <code>size = 10</code> and <code>num_of_sections = 6</code>, then the first four sections will be 1 element each, and the last section will be 6 elements.</p>\n\n<p>How can I change this to an algorithm that will split it up more evenly, specifically, so that all sections are either size <code>X</code> or <code>X+1</code>? In the above example, the first four sections would be size 2, then the last two sections will be 1 each. There would obviously need to be a third variable produced that indicates a section number where all previous sections up to and including it are size <code>X</code> and all following are size <code>X+1</code>.</p>\n"}, {"tags": ["php", "c", "centos", "php-extension"], "comments": [{"owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "edited": false, "score": 0, "creation_date": 1571880946, "post_id": 58529455, "comment_id": 103389315, "body": "I assume that <code>get_property_ptr_ptr</code> is a library function. You may have multiple versions of libzip, and your compiler chose an unwanted one. You are failing while compiling object files, so check your header files."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "reply_to_user": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "edited": false, "score": 0, "creation_date": 1571915127, "post_id": 58529455, "comment_id": 103401829, "body": "Thanks @BruceShen. I don&#39;t think it would not be possible for me to have multiple installations of <code>libzip-devel</code>, as I am in Docker, and I assume it is not a default installation of Centos 7."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "reply_to_user": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "edited": false, "score": 0, "creation_date": 1571915255, "post_id": 58529455, "comment_id": 103401900, "body": "The good news though is that I have a fix, which I will write up when I have some free time. I bumped from zip-1.11.0 to zip-1.12.3, which fixed it. It&#39;s not completely ideal, since my prod servers really do have PHP 5.4 with zip-1.11.0, but I can&#39;t think this minor difference is doing to make much of a difference to the intended development usage of this image."}], "answers": [{"tags": [], "owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "is_accepted": true, "score": 1, "last_activity_date": 1574875411, "last_edit_date": 1574875411, "creation_date": 1572020370, "answer_id": 58562263, "question_id": 58529455, "link": "https://stackoverflow.com/questions/58529455/how-to-trace-the-reason-for-compilation-errors-in-a-pecl-zip-install-operation/58562263#58562263", "title": "How to trace the reason for compilation errors in a pecl zip install operation (with a legacy version of PHP)?", "body": "<p>I finally fixed this.</p>\n\n<p>In case it is helpful to record what did not work, I first noticed that I had a patch-level PHP version discrepancy. My production server is on 5.4.16, and I was building for 5.4.45. I adjusted that, confident that it would download the correct code to link with other libraries, only to find that it made no difference.</p>\n\n<p>I then analysed how many version numbers I had to bump up in the pecl zip extension to get a next available stable version, which took me from zip-1.11.0 to zip-1.12.3. This compiled fine. It is not ideal, because my production server really does mix zip 1.11.0 with PHP 5.4.16, but no matter - we have been developing using 5.6 for around a year, even though we target 5.4 in production. Thus, the new image is still a substantial win, given that it takes us much closer to our live environment.</p>\n"}], "owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 58562263, "answer_count": 1, "score": 0, "last_activity_date": 1574875411, "creation_date": 1571857285, "last_edit_date": 1571916028, "question_id": 58529455, "link": "https://stackoverflow.com/questions/58529455/how-to-trace-the-reason-for-compilation-errors-in-a-pecl-zip-install-operation", "title": "How to trace the reason for compilation errors in a pecl zip install operation (with a legacy version of PHP)?", "body": "<p>I have an unavoidable need to develop systems based on PHP 5.4. I am aware that this is well out of security updates, but it is what I have for now. I wish to create a PHP 5.4 Docker image for development purposes. Historically my team and I have been using a PHP 5.6 image based on Centos, since there are no 5.4 Centos images available.</p>\n\n<p>Thus, I am trying to compile PHP 5.4. With a lot of trial and error, I have got it to compile PHP with minimal compiled-in extensions, and then with a bunch of dynamically loadable extensions on top. This means that my various downstream projects can select what extensions they need just by adding the right <code>php.ini</code> extension commands.</p>\n\n<p>Here is my <code>Dockerfile</code>:</p>\n\n<pre><code># A custom Docker/PHP build for 5.4\n#\n# PHP 5.4 is no longer available as a standard image as it is\n# well out of support. Centos has been chosen to mirror live\n# servers.\n\nFROM centos:7 AS build\n\n# Do OS updates using fastest mirrors\nRUN yum update -y\n\n# Here is the raw OS (give up if repo is down)\nRUN timeout 3m yum install -y wget curl gcc make\n# Here are some dependencies (give up if repo is down)\nRUN timeout 3m yum install -y \\\n        libxml2-devel libssh-devel \\\n        openssl-devel curl-devel postgresql-devel \\\n        autoconf\n\nWORKDIR /root\n\nRUN wget https://www.php.net/distributions/php-5.4.45.tar.gz &amp;&amp; \\\n    tar -xf php-5.4.45.tar.gz\n\nWORKDIR /root/php-5.4.45\n\n# Compile here\n# OpenSSL/curl are used nearly everywhere, e.g. Compose\n# zlib is useful but not required for Composer\nRUN ./configure \\\n    --with-config-file-path=/usr/local/etc/php \\\n    --with-config-file-scan-dir=/usr/local/etc/php/conf.d \\\n    --with-openssl \\\n    --with-openssl-dir \\\n    --with-curl=/usr/local/bin \\\n    --with-zlib \\\n    --with-pdo-mysql\nRUN make &amp;&amp; make install\n\n# Create a store for the modules\nRUN mkdir /root/exts\n\n# Compile some PHP extensions (keep in alpha order please)\nRUN cd ext/bcmath    &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/bcmath.so    /root/exts/\nRUN yum install -y bzip2-devel\nRUN cd ext/bz2       &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/bz2.so       /root/exts/\nRUN cd ext/calendar  &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/calendar.so  /root/exts/\nRUN yum install -y enchant-devel\nRUN cd ext/enchant   &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/enchant.so   /root/exts/\nRUN cd ext/exif      &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/exif.so      /root/exts/\nRUN cd ext/ftp       &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/ftp.so       /root/exts/\nRUN yum install -y libpng-devel\nRUN cd ext/gd        &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/gd.so        /root/exts/\nRUN cd ext/gettext   &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/gettext.so   /root/exts/\nRUN yum install -y gmp-devel\nRUN cd ext/gmp       &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/gmp.so       /root/exts/\n\n# Investigate this one\n# igbinary\n\nRUN yum install -y libicu-devel gcc-c++\nRUN cd ext/intl      &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/intl.so      /root/exts/\nRUN cd ext/mbstring  &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/mbstring.so  /root/exts/\n\n# See comments under https://www.mojowill.com/geek/php-mcrypt-on-centos-6/ to\n# install \"Centos Extras\"\nRUN yum install epel-release -y &amp;&amp; yum update -y\nRUN yum install -y libmcrypt-devel\nRUN cd ext/mcrypt    &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/mcrypt.so    /root/exts/\n\n# This is not included in the source bundle, so we need to fetch and compile\nRUN yum install -y libmemcached-devel zlib-devel autoconf gcc make\nRUN pecl install memcached-2.2.0\nRUN cp /usr/local/lib/php/extensions/no-debug-non-zts-20100525/memcached.so /root/exts/\n\nRUN cd ext/mysql     &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/mysql.so     /root/exts/\nRUN cd ext/mysqli    &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/mysqli.so    /root/exts/\nRUN cd ext/pcntl     &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/pcntl.so     /root/exts/\nRUN cd ext/pdo       &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/pdo.so       /root/exts/\n\nRUN cd ext/pdo_pgsql &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/pdo_pgsql.so /root/exts/\nRUN yum install -y libedit-devel readline-devel\nRUN cd ext/readline  &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/readline.so  /root/exts/\n\n# Investigate this one\n#RUN cd ext/redis     &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/redis.so     /root/exts/\n\nRUN cd ext/shmop     &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/shmop.so     /root/exts/\nRUN cd ext/soap      &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/soap.so      /root/exts/\nRUN cd ext/sockets   &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/sockets.so   /root/exts/\nRUN cd ext/sysvmsg   &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/sysvmsg.so   /root/exts/\nRUN cd ext/sysvsem   &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/sysvsem.so   /root/exts/\nRUN cd ext/sysvshm   &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/sysvshm.so   /root/exts/\nRUN cd ext/wddx      &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/wddx.so      /root/exts/\nRUN cd ext/xml       &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/xml.so       /root/exts/\nRUN cd ext/xmlrpc    &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/xmlrpc.so    /root/exts/\nRUN yum install -y libxslt-devel\nRUN cd ext/xsl       &amp;&amp; phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; cp modules/xsl.so       /root/exts/\n\n# The PECL compile fails, but the version of libzip (0.10.1) looks exactly right\nRUN yum install -y libzip-devel gcc\nRUN pecl install zip-1.11.0\n# Does not compile either on Centos 6 or 7\n</code></pre>\n\n<p>This works completely except for the last piece, which is the pecl installation of the zip extension. Here is my console output (from a Docker step):</p>\n\n<pre><code>Step 52/70 : RUN pecl install zip-1.11.0\n ---&gt; Running in 06d2ef53ba56\ndownloading zip-1.11.0.tgz ...\nStarting to download zip-1.11.0.tgz (263,909 bytes)\n......................................................done: 263,909 bytes\n93 source files, building\nrunning: phpize\nConfiguring for:\nPHP Api Version:         20100412\nZend Module Api No:      20100525\nZend Extension Api No:   220100525\nbuilding in /tmp/pear/temp/pear-build-defaultuserhYPzzK/zip-1.11.0\nrunning: /tmp/pear/temp/zip/configure\nchecking for grep that handles long lines and -e... /usr/bin/grep\nchecking for egrep... /usr/bin/grep -E\nchecking for a sed that does not truncate output... /usr/bin/sed\nchecking for cc... cc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables...\nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether cc accepts -g... yes\nchecking for cc option to accept ISO C89... none needed\nchecking how to run the C preprocessor... cc -E\nchecking for icc... no\nchecking for suncc... no\nchecking whether cc understands -c and -o together... yes\nchecking for system library directory... lib\nchecking if compiler supports -R... no\nchecking if compiler supports -Wl,-rpath,... yes\nchecking build system type... x86_64-unknown-linux-gnu\nchecking host system type... x86_64-unknown-linux-gnu\nchecking target system type... x86_64-unknown-linux-gnu\nchecking for PHP prefix... /usr/local\nchecking for PHP includes... -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib\nchecking for PHP extension directory... /usr/local/lib/php/extensions/no-debug-non-zts-20100525\nchecking for PHP installed headers prefix... /usr/local/include/php\nchecking if debug is enabled... no\nchecking if zts is enabled... no\nchecking for re2c... no\nconfigure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.\nchecking for gawk... gawk\nchecking for zip archive read/writesupport... yes, shared\nchecking for the location of libz... no\nchecking pcre install prefix... no\nchecking for the location of zlib... /usr\nchecking for ANSI C header files... yes\nchecking for sys/types.h... yes\nchecking for sys/stat.h... yes\nchecking for stdlib.h... yes\nchecking for string.h... yes\nchecking for memory.h... yes\nchecking for strings.h... yes\nchecking for inttypes.h... yes\nchecking for stdint.h... yes\nchecking for unistd.h... yes\nchecking for int8_t... yes\nchecking for int16_t... yes\nchecking for int32_t... yes\nchecking for int64_t... yes\nchecking for uint8_t... yes\nchecking for uint16_t... yes\nchecking for uint32_t... yes\nchecking for uint64_t... yes\nchecking for ssize_t... yes\nchecking size of short... 2\nchecking size of int... 4\nchecking size of long... 8\nchecking size of long long... 8\nchecking size of off_t... 8\nchecking size of size_t... 8\nchecking for touch... /usr/bin/touch\nchecking for unzip... no\nchecking whether struct tm is in sys/time.h or time.h... time.h\nchecking for struct tm.tm_zone... yes\nchecking for ld used by cc... /usr/bin/ld\nchecking if the linker (/usr/bin/ld) is GNU ld... yes\nchecking for /usr/bin/ld option to reload object files... -r\nchecking for BSD-compatible nm... /usr/bin/nm -B\nchecking whether ln -s works... yes\nchecking how to recognize dependent libraries... pass_all\n/tmp/pear/temp/zip/configure: line 6197: /usr/bin/file: No such file or directory\nchecking dlfcn.h usability... yes\nchecking dlfcn.h presence... yes\nchecking for dlfcn.h... yes\nchecking the maximum length of command line arguments... 1572864\nchecking command to parse /usr/bin/nm -B output from cc object... ok\nchecking for objdir... .libs\nchecking for ar... ar\nchecking for ranlib... ranlib\nchecking for strip... strip\nchecking if cc supports -fno-rtti -fno-exceptions... no\nchecking for cc option to produce PIC... -fPIC\nchecking if cc PIC flag -fPIC works... yes\nchecking if cc static flag -static works... no\nchecking if cc supports -c -o file.o... yes\nchecking whether the cc linker (/usr/bin/ld) supports shared libraries... yes\nchecking whether -lc should be explicitly linked in... no\nchecking dynamic linker characteristics... GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking whether stripping libraries is possible... yes\nchecking if libtool supports shared libraries... yes\nchecking whether to build shared libraries... yes\nchecking whether to build static libraries... no\n\ncreating libtool\nappending configuration tag \"CXX\" to libtool\nconfigure: creating ./config.status\nconfig.status: creating config.h\nrunning: make\n/bin/sh /tmp/pear/temp/pear-build-defaultuserhYPzzK/zip-1.11.0/libtool --mode=compile cc  -I. -I/tmp/pear/temp/zip -DPHP_ATOM_INC -I/tmp/pear/temp/pear-build-defaultuserhYPzzK/zip-1.11.0/include -I/tmp/pear/temp/pear-build-defaultuserhYPzzK/zip-1.11.0/main -I/tmp/pear/temp/zip -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g -O2   -c /tmp/pear/temp/zip/php_zip.c -o php_zip.lo\nmkdir .libs\n cc -I. -I/tmp/pear/temp/zip -DPHP_ATOM_INC -I/tmp/pear/temp/pear-build-defaultuserhYPzzK/zip-1.11.0/include -I/tmp/pear/temp/pear-build-defaultuserhYPzzK/zip-1.11.0/main -I/tmp/pear/temp/zip -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -c /tmp/pear/temp/zip/php_zip.c  -fPIC -DPIC -o .libs/php_zip.o\n/tmp/pear/temp/zip/php_zip.c: In function 'php_zip_get_property_ptr_ptr':\n/tmp/pear/temp/zip/php_zip.c:882:3: warning: passing argument 3 of 'std_hnd-&gt;get_property_ptr_ptr' makes pointer from integer without a cast [enabled by default]\n   retval = std_hnd-&gt;get_property_ptr_ptr(object, member, type, key TSRMLS_CC);\n   ^\n/tmp/pear/temp/zip/php_zip.c:882:3: note: expected 'const struct _zend_literal *' but argument is of type 'int'\n/tmp/pear/temp/zip/php_zip.c:882:3: error: too many arguments to function 'std_hnd-&gt;get_property_ptr_ptr'\n/tmp/pear/temp/zip/php_zip.c: In function 'zm_startup_zip':\n/tmp/pear/temp/zip/php_zip.c:2759:43: warning: assignment from incompatible pointer type [enabled by default]\n  zip_object_handlers.get_property_ptr_ptr = php_zip_get_property_ptr_ptr;\n                                           ^\nmake: *** [php_zip.lo] Error 1\nERROR: `make' failed\n</code></pre>\n\n<p>This is rather an unexpected compilation error - \"too many arguments\" feels like there is a library mismatch or something, but I have specifically selected 1.11, which is the version of the extension on the production servers. Could it be that my version of <code>libzip-devel</code> is too new, and if so, can I obtain an earlier one, and have it work in a maintained version of Centos?</p>\n\n<p>I have not encountered this issue on any other extension, so perhaps it is just bad luck I have a tricker problem on the last one!</p>\n\n<h2>Update</h2>\n\n<p>The native version of <code>libzip-devel</code> in the version of Centos I am using is 0.10.1, which matches the version of <code>libzip</code> that is reported by the production servers (via <code>php -i</code>). Here is the info from the Docker image:</p>\n\n<pre><code>[root@0b093624d012 /]# yum info libzip-devel\nLoaded plugins: fastestmirror, ovl\nLoading mirror speeds from cached hostfile\n * base: mirror.freethought-internet.co.uk\n * epel: mirror.freethought-internet.co.uk\n * extras: mirror.freethought-internet.co.uk\n * updates: mirror.freethought-internet.co.uk\nAvailable Packages\nName        : libzip-devel\nArch        : i686\nVersion     : 0.10.1\nRelease     : 8.el7\nSize        : 77 k\nRepo        : base/7/x86_64\nSummary     : Development files for libzip\nURL         : http://www.nih.at/libzip/index.html\nLicense     : BSD\nDescription : The libzip-devel package contains libraries and header files for\n            : developing applications that use libzip.\n\nName        : libzip-devel\nArch        : x86_64\nVersion     : 0.10.1\nRelease     : 8.el7\nSize        : 77 k\nRepo        : base/7/x86_64\nSummary     : Development files for libzip\nURL         : http://www.nih.at/libzip/index.html\nLicense     : BSD\nDescription : The libzip-devel package contains libraries and header files for\n            : developing applications that use libzip.\n</code></pre>\n\n<p>I doubt that changing my C compiler might help, but I am certainly open to ideas in that direction.</p>\n"}, {"tags": ["c", "types", "sizeof"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1571855747, "post_id": 58529076, "comment_id": 103382181, "body": "Try number <code>5</code> instead of <code>sizeof</code>. You will end up with a similar but simplified question."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1571855751, "post_id": 58529076, "comment_id": 103382183, "body": "The return type of <code>sizeof</code> is always the same, it doesn&#39;t change"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571855775, "post_id": 58529076, "comment_id": 103382195, "body": "See <a href=\"https://stackoverflow.com/questions/27296011/correct-format-specifier-for-return-value-of-sizeof-in-c\" title=\"correct format specifier for return value of sizeof in c\">stackoverflow.com/questions/27296011/&hellip;</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571855806, "post_id": 58529076, "comment_id": 103382211, "body": "I&#39;ll let someone else pick the appropriate dupe...."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571856135, "post_id": 58529076, "comment_id": 103382342, "body": "<code>sizeof is usually used with the %zu</code> - no, sizeof should only be used with <code>%zu</code>. It&#39;s not &quot;usually&quot;, it&#39;s &quot;can only be&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571856296, "post_id": 58529076, "comment_id": 103382399, "body": "@KamilCuk Except the common case of M$ who do not support <code>%zu</code>...."}, {"owner": {"reputation": 61, "user_id": 10601264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/909e776be1e1ac04ad08432362fb704a?s=128&d=identicon&r=PG&f=1", "display_name": "Mihalache Rares", "link": "https://stackoverflow.com/users/10601264/mihalache-rares"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571856669, "post_id": 58529076, "comment_id": 103382567, "body": "@KamilCuk ok, but still what happens when i use %f? Why it prints out as nan?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571856809, "post_id": 58529076, "comment_id": 103382637, "body": "Because it is <i>undefined behavior</i>. You are telling the <code>printf</code> that you are giving it <code>float</code> while actually giving it <code>size_t</code>.  These two are represented differently in memory."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571857403, "post_id": 58529076, "comment_id": 103382897, "body": "@EugeneSh. what is M$, sir ?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1571857415, "post_id": 58529076, "comment_id": 103382904, "body": "This has nothing to do with the <code>sizeof</code> operator, and everything with <code>printf()</code>&#39;s varargs nature."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1571857598, "post_id": 58529076, "comment_id": 103382960, "body": "@snr Well, urban jargon for MS AKA Microsoft :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571859076, "post_id": 58529076, "comment_id": 103383522, "body": "@EugeneSh. you are carrying your loaded opinion which is incorrect. MSVC supports <code>&quot;%zu&quot;</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571859925, "post_id": 58529076, "comment_id": 103383843, "body": "@WeatherVane mingw gcc with microsoft C runtime library <a href=\"https://stackoverflow.com/questions/44382862/how-to-printf-a-size-t-without-warning-in-mingw-w64-gcc-7-1\">is not supporting it</a>. It is not &quot;loaded opinion&quot; but a personal experience."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571863217, "post_id": 58529076, "comment_id": 103385225, "body": "@EugeneSh. <code>&quot;%zu&quot;</code> in MSVC is documented on <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/format-specification-syntax-printf-and-wprintf-functions?view=vs-2017\" rel=\"nofollow noreferrer\">this page</a> and confirmed in the question you linked - since 2013. Perhaps MS did not support it as soon as others did. Telling the OP that &quot;M$ do not support %zu&quot; is misleading, and your earlier comment came across as yet another tedious pop at MS."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571893755, "post_id": 58529076, "comment_id": 103391946, "body": "@EugeneSh. thx sir (:"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 4, "last_activity_date": 1571857505, "creation_date": 1571857505, "answer_id": 58529506, "question_id": 58529076, "link": "https://stackoverflow.com/questions/58529076/sizeof-with-different-specificators/58529506#58529506", "title": "Sizeof with different specificators", "body": "<p><code>sizeof</code> evaluates to a value of type <code>size_t</code>. The proper specifier for <code>size_t</code> in C99 is <code>%zu</code>. You can use <code>%u</code> on systems where <code>size_t</code> and <code>unsigned int</code> are the same type or at least have the same size and representation. On 64-bit systems, <code>size_t</code> values have 64 bits and therefore are larger than 32-bit ints. On 64-bit linux and OS/X, this type is defined as <code>unsigned long</code> and on 64-bit Windows as <code>unsigned long long</code>, hence using <code>%lu</code> or <code>%llu</code> on these systems is fine too.</p>\n\n<p>Passing a <code>size_t</code> for an incompatible conversion specification has undefined behavior:</p>\n\n<ul>\n<li>the program could crash (and it probably will if you use <code>%s</code>)</li>\n<li>the program could display the expected value (as it might for <code>%d</code>)</li>\n<li>the program could produce weird output such as <code>nan</code> for <code>%f</code> or something else...</li>\n</ul>\n\n<p>The reason for this is integers and floating point values are passed in different ways to <code>printf</code> and they have a different representation. Passing an integer where <code>printf</code> expects a <code>double</code> will let <code>printf</code> retrieve the floating point value from registers or memory locations that have random contents. In your case, the floating point register just happens to contain a <code>nan</code> value, but it might contain a different value elsewhere in the program or at a later time, nothing can be expected, the behavior is undefined.</p>\n\n<p>Some legacy systems do not support <code>%zu</code>, notably C runtimes by Microsoft. On these systems, you can use <code>%u</code> or <code>%lu</code> and use a cast to convert the <code>size_t</code> to an <code>unsigned</code> or an <code>unsigned long</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int a = 0;\nlong long d = 1000000000000;\nint s = a + d;\nprintf(\"%u\\n\", (unsigned)sizeof(a + d));       // should print 8\nprintf(\"%lu\\n\", (unsigned long)sizeof(s));     // should print 4\nprintf(\"%llu\\n\", (unsigned long long)sizeof(d)); // prints 4 or 8 depending on the system\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1571861338, "creation_date": 1571861338, "answer_id": 58530303, "question_id": 58529076, "link": "https://stackoverflow.com/questions/58529076/sizeof-with-different-specificators/58530303#58530303", "title": "Sizeof with different specificators", "body": "<blockquote>\n  <p>I want to know for my own knowledge what happens behind and why it prints <code>nan</code> when I use it with <code>%f</code> or a long number when used with <code>%lf</code></p>\n</blockquote>\n\n<p>Several reasons.</p>\n\n<p>First of all, <code>printf</code> doesn't know the types of the additional arguments you actually pass to it.  It's relying on the format string to tell it the number and types of additional arguments to <em>expect</em>.  If you pass a <code>size_t</code> as an additional argument, but tell <code>printf</code> to expect a <code>float</code>, then <code>printf</code> will interpret the bit pattern of the additional argument as a <code>float</code>, not a <code>size_t</code>.  Integer and floating point types have radically different representations, so you'll get values you don't expect (including NaN).    </p>\n\n<p>Secondly, different types have different sizes.  If you pass a 16-bit <code>short</code> as an argument, but tell <code>printf</code> to expect a 64-bit <code>double</code> with <code>%f</code>, then <code>printf</code> is going to look at the extra bytes immediately following that argument.  It's not guaranteed that <code>size_t</code> and <code>double</code> have the same sizes, so <code>printf</code> may either be ignoring part of the actual value, or using bytes from memory that isn't part of the value.  </p>\n\n<p>Finally, it depends on how arguments are being passed.  Some architectures use registers to pass arguments (at least for the first few arguments) rather than the stack, and different registers are used for floats vs. integers, so if you pass an integer and tell it to expect a double with <code>%f</code>, <code>printf</code> may look in the <em>wrong place altogether</em> and print something completely random.  </p>\n\n<p><code>printf</code> is not smart.  It relies on you to use the correct conversion specifier for the type of the argument you want to pass.  </p>\n"}], "owner": {"reputation": 61, "user_id": 10601264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/909e776be1e1ac04ad08432362fb704a?s=128&d=identicon&r=PG&f=1", "display_name": "Mihalache Rares", "link": "https://stackoverflow.com/users/10601264/mihalache-rares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1571863196, "answer_count": 2, "score": -1, "last_activity_date": 1571861338, "creation_date": 1571855587, "last_edit_date": 1571856829, "question_id": 58529076, "link": "https://stackoverflow.com/questions/58529076/sizeof-with-different-specificators", "closed_reason": "Duplicate", "title": "Sizeof with different specificators", "body": "<p>I want to know why <code>sizeof</code> doesn't work with different types of format specifiers.</p>\n\n<p>I know that <code>sizeof</code> is usually used with the <code>%zu</code> format specifier, but I want to know for my own knowledge what happens behind and why it prints <code>nan</code> when I use it with <code>%f</code> or a long number when used with <code>%lf</code> </p>\n\n<pre><code>int a = 0;\nlong long d = 1000000000000;\nint s = a + d;\nprintf(\"%d\\n\", sizeof(a + d));  // prints normal size of expression\nprintf(\"%lf\\n\", sizeof(s));     // prints big number\nprintf(\"%f\", sizeof(d));        // prints nan\n</code></pre>\n"}, {"tags": ["c", "linux", "assembly", "hex", "byte"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1571855367, "post_id": 58528968, "comment_id": 103382040, "body": "<code>od</code> has the <code>--endian={big|little}</code> switch."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1571855372, "post_id": 58528968, "comment_id": 103382046, "body": "Looks like an issue of endianess."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9016680"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571855535, "post_id": 58528968, "comment_id": 103382098, "body": "@EugeneSh. how would i put that on command"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1571857968, "post_id": 58528968, "comment_id": 103383093, "body": "<code>od -x --endian=big output.bin</code>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1571858010, "post_id": 58528968, "comment_id": 103383112, "body": "<i><a href=\"http://man7.org/linux/man-pages/man1/od.1.html\" rel=\"nofollow noreferrer\">Look here</a></i> for how to use <code>od</code> with <code>endian</code> switch."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1571858026, "creation_date": 1571858026, "answer_id": 58529601, "question_id": 58528968, "link": "https://stackoverflow.com/questions/58528968/using-od-command-on-linux-has-it-backwards/58529601#58529601", "title": "Using od command on linux has it backwards?", "body": "<p>By default <code>od</code> reads 16-bit values in the current system's endianness.</p>\n\n<p>Use <code>od -b</code> or <code>od -t x1</code> to read the input as bytes.</p>\n\n<p>Some implementations of <code>od</code> have a <code>--endian</code> command line option to select the endianness to use, but neither the BSD version available on OS/X nor the GNU version on linux support it.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9016680"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "closed_date": 1571863267, "answer_count": 1, "score": 0, "last_activity_date": 1571940982, "creation_date": 1571855135, "last_edit_date": 1571940982, "question_id": 58528968, "link": "https://stackoverflow.com/questions/58528968/using-od-command-on-linux-has-it-backwards", "closed_reason": "Not suitable for this site", "title": "Using od command on linux has it backwards?", "body": "<p>Story of the situation, building an assembler with a pre-made assembly language. I am building the commands in my C program. It works, but it comes up backward. </p>\n\n<p>My program reads through the test case, and then afterward you should do an od on Linux on the output binary file. Here is an example of the test case, the hex assembly, and the output:</p>\n\n<pre><code>add r1 r2 r3 (11 23)\ninterrupt 0 (80 00)\n</code></pre>\n\n<p>That's just a short snippet of one of my unit tests. Whenever I do the od command on linux, this is what I get:</p>\n\n<pre><code>od -x output.bin\n0000000 2311 0080\n</code></pre>\n\n<p>They get flipped backwards. Really, it should be:</p>\n\n<pre><code>0000000 1123 8000\n</code></pre>\n\n<p>I have tried using the linux command od -t x1 output.bin and that works, however it split's it by 2 bits. There has to be a way to flip the bytes.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "is_accepted": true, "score": 2, "last_activity_date": 1571861123, "last_edit_date": 1571861123, "creation_date": 1571860791, "answer_id": 58530179, "question_id": 58528670, "link": "https://stackoverflow.com/questions/58528670/c-program-not-running-properly-on-raspberry-pi/58530179#58530179", "title": "C program not running properly on raspberry pi", "body": "<p>Looks like you have far more than just one problem, but let's just start with the first one:</p>\n\n<pre><code>char binStr[ bitLen ], binStrErr[ bitLen ];\n</code></pre>\n\n<p>The string you are requesting next contains not just the 16 bytes you get as input, but also an additional sentinel character as the 17th character.</p>\n\n<p>So at this point you already had 2 buffer overflows, which you can already see nicely in the output from the Pi. The same buffer overflow also occurs in the first example, except the memory layout is different enough so that it doesn't yield visible artifacts.</p>\n\n<pre><code>for (int c = 0; c &lt;= i; c++)\n{\n    binNum[c - 1] = binNum[c];\n    binNumErr[c - 1] = binNumErr[c];\n}\n</code></pre>\n\n<p>Here comes the next buffer overflow, respectively actually an underflow this time. You are writing to <code>binNum[-1]</code> which is a memory location outside of the memory <code>binNum</code> is pointing to.</p>\n\n<p>Anyway, a buffer overflow means the behavior of your program is undefined.</p>\n\n<p>Get used to <a href=\"http://valgrind.org/docs/manual/quick-start.html\" rel=\"nofollow noreferrer\">valgrind</a> or similar tools for checking your code for undefined with regard to such errors.</p>\n"}], "owner": {"reputation": 89, "user_id": 3918161, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a5a5b67ce1a1df32468c06e4758fdfe3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Loh", "link": "https://stackoverflow.com/users/3918161/adam-loh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58530179, "answer_count": 1, "score": -1, "last_activity_date": 1571861123, "creation_date": 1571853944, "question_id": 58528670, "link": "https://stackoverflow.com/questions/58528670/c-program-not-running-properly-on-raspberry-pi", "title": "C program not running properly on raspberry pi", "body": "<p>I'm currently designing a hemming code. This code works perfectly on my computer but when I port it over to my pi, it just does not work properly. I have no idea why and I am pretty new at C and the raspberry pi. Any help would be greatly appreciated.</p>\n\n<p>Below is my full code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void){\n    int bitLen, errorLoc;\n\n    printf(\"\\nLength of the data bits: \");\n    scanf(\"%d\", &amp;bitLen);\n\n    char binStr[ bitLen ], binStrErr[ bitLen ];\n    printf(\"Data stream without error: \");\n    scanf(\"%s\", &amp;binStr);\n\n    if(strlen(binStr) &gt; bitLen || strlen(binStr) &lt; bitLen)\n    {\n        printf(\"\\nLength of data stream given does not match stated input length!\");\n        return 0;\n    }\n\n    printf(\"Location of data bit that has error: \");\n    scanf(\"%d\", &amp;errorLoc);\n\n    if(errorLoc &gt; bitLen)\n    {\n        printf(\"\\nValue given is bigger than the input length!\");\n        return 0;\n    }\n\n    //Number Of Check Bits Needed\n    int rBit = 1;\n    while (pow(2, rBit) &lt; (bitLen + rBit + 1))\n    {\n        rBit = rBit + 1;\n    }\n\n    int checkBitsArr[rBit];\n    int checkBitsErrArr[rBit]; \n\n    //Actual size of array\n    bitLen = bitLen + rBit;\n\n    int binNum[bitLen];\n    int binNumErr[bitLen];\n    int size = sizeof(binNum) / sizeof(binNum[0]);\n    int binNumPos = size;\n\n    printf(\"\\nData stream: \");\n    //Flipping the error bit and storing into another string\n    printf(\"\\nOriginal data stream: \");\n    for (int i = 0; i &lt; strlen(binStr); i++){\n        printf(\"%c\", binStr[i]);\n        if(i == (strlen(binStr)) - errorLoc){\n            int temp = ((binStr[i] - '0') == 0) ? 1 : 0;\n            binStrErr[i] = temp + '0';\n        }\n        else{\n            binStrErr[i] = binStr[i];\n        }\n    }\n\n\n    printf(\"\\nData stream with error: \");\n    for (int i = 0; i &lt; strlen(binStr); i++){\n        printf(\"%c\", binStrErr[i]);\n    }\n\n    //Filling in the bits into two arrays: One is the correct data stream and one with error\n    for (int i = strlen(binStr); i &gt;= 0; i--)\n    {\n        binNum[binNumPos] = binStr[i] - '0';\n        binNumErr[binNumPos] = binStrErr[i] - '0';\n\n        binNumPos--;\n    }\n\n    printf(\"\\n\\n\");\n    //Moving bits to left to make space\n    int position = 1;\n    for (int i = size - 1; i &gt;= 0; i--)\n    {\n        if ((position &amp; (position - 1)) == 0)\n        {\n            for (int c = 0; c &lt;= i; c++)\n            {\n                binNum[c - 1] = binNum[c];\n                binNumErr[c - 1] = binNumErr[c];\n            }\n            binNum[i] = 33;\n            binNumErr[i] = 33;\n        }\n        position++;\n    }\n\n    //Settings check bits into place\n    position = 1;\n    int checkBitIndex = 0;\n    for (int i = size - 1; i &gt;= 0; i--)\n    {\n        //Get check bit position\n        if ((position &amp; (position - 1)) == 0)\n        {\n            int temp = 0;//number of 1s in relation to the check bit\n            int tempErr = 0;\n\n            int maxNum = (i - position) + 1;\n            if (maxNum &lt; 0)\n                maxNum = maxNum + (-1 * maxNum);\n\n            //first part of check\n            while (maxNum &lt; i)\n            {\n                if (binNum[maxNum] == 1)\n                {\n                    temp++;\n                }\n                if (binNumErr[maxNum] == 1)\n                {\n                    tempErr++;\n                }\n                maxNum++;\n            }\n            int startNum = (i - position) + 1;\n\n            //If the start number is less than zero, make it zero\n            if (startNum &lt; 0)\n                startNum = startNum + (-1 * startNum);\n\n            //Skip check method. Get the next set of check values in relation to the current check bit\n            for (int x = startNum - (position * 2); x &gt;= 0; x = x - (position * 2))\n            {\n                int k = 0;\n                while (k &lt; position)\n                {\n                    if (binNum[x + k] == 1)\n                    {\n                        temp++;\n                    }\n                    if (binNumErr[x + k] == 1)\n                    {\n                        tempErr++;\n                    }\n                    k++;\n                }\n            }\n            //Set the value of check bit\n            binNum[i] = (temp % 2 == 0) ? 0 : 1;\n            binNumErr[i] = (tempErr % 2 == 0) ? 0 : 1;\n\n            //Replace the current value with the correct checkbit\n            checkBitsArr[checkBitIndex] = binNum[i];\n            checkBitsErrArr[checkBitIndex] = binNumErr[i];\n            temp = 0;\n            tempErr = 0;\n\n            checkBitIndex++;\n        }\n        position++;\n    }\n\n\n    printf(\"\\nSEC code: \");\n    printf(\"\\nOriginal data stream: \");\n    for (int i = 0; i &lt; size; i++)\n    {\n        printf(\"%d\", binNum[i]);\n    }\n    printf(\"\\nData stream with error: \");\n    for (int i = 0; i &lt; size; i++)\n    {\n        printf(\"%d\", binNumErr[i]);\n    }\n\n    printf(\"\\n\\n\");\n    int checkIndex = (int)pow(2, rBit - 1);\n    printf(\"\\n\\nCheckbits of data bits without error: \\n\");\n    for (int i = checkBitIndex - 1; i &gt;= 0; i--)\n    {\n        printf(\"C%d: %d   \", checkIndex, checkBitsArr[i]);\n        checkIndex = checkIndex/2;\n    }\n    checkIndex = (int)pow(2, rBit - 1);\n    printf(\"\\n\\nCheckbits of data bits with error: \\n\");\n    for (int i = checkBitIndex - 1; i &gt;= 0; i--)\n    {\n        printf(\"C%d: %d   \", checkIndex, checkBitsErrArr[i]);\n        checkIndex = checkIndex/2;\n    }\n    checkIndex = (int)pow(2, rBit - 1);\n    int posError = 0;\n    printf(\"\\n\\nSyndrome code: \\n\");\n    for (int i = checkBitIndex - 1; i &gt;= 0; i--)\n    {\n        int x = checkBitsErrArr[i] ^ checkBitsArr[i];\n        if(x == 1){\n            posError += checkIndex;\n        }\n        printf(\"C%d: %d   \", checkIndex, x);\n        checkIndex = checkIndex/2;\n    }\n    printf(\"\\n\\n\");\n    printf(\"\\nPosition of error: %d\\n\\n\", posError);\n    // printf(\"\\n\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>These are the inputs for the scanf:</p>\n\n<pre><code>Length of the data bits: 16\nData stream without error: 0011001100110011\nLocation of data bit that has error: 8\n</code></pre>\n\n<p>Below are my results on both computer and pi:</p>\n\n<p>Computer result (correct):</p>\n\n<p><a href=\"https://i.stack.imgur.com/hlUtr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hlUtr.png\" alt=\"Computer result\"></a></p>\n\n<p>Pi result (wrong):</p>\n\n<p><a href=\"https://i.stack.imgur.com/VraOn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VraOn.png\" alt=\"Pi result\"></a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 1, "creation_date": 1571854409, "post_id": 58528639, "comment_id": 103381622, "body": "(5,10) is the same as (10).  I don&#39;t think that is what you intended."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1571855196, "post_id": 58528639, "comment_id": 103381974, "body": "<code>-5E-273</code> is a possible result for you? I think, maybe, you want random integers between -15000 and 15000 ... divided by 10000."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1571858451, "post_id": 58528639, "comment_id": 103383271, "body": "for IEEE doubles, maybe <a href=\"https://ideone.com/igicf6\" rel=\"nofollow noreferrer\">something like this ideone</a>? (just having fun!)"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571856441, "post_id": 58528845, "comment_id": 103382470, "body": "<code>float num;</code> and then <code>num = (double)...</code> ??"}], "tags": [], "owner": {"reputation": 138, "user_id": 10398557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16adfa5edb0e05ca0f376256ed8673e?s=128&d=identicon&r=PG&f=1", "display_name": "kennemat", "link": "https://stackoverflow.com/users/10398557/kennemat"}, "is_accepted": false, "score": -1, "last_activity_date": 1571854681, "creation_date": 1571854681, "answer_id": 58528845, "question_id": 58528639, "link": "https://stackoverflow.com/questions/58528639/to-generate-10-random-numbers-between-1-5-and-1-5-and-write-them-in-a-ran-dat-f/58528845#58528845", "title": "To generate 10 random numbers between -1.5 and 1.5 and write them in a ran.dat file", "body": "<p>This will create 10 random numbers between -1.5 and 1.5. </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(){ \n    int i;\n    float num; \n    srand(time(NULL));\n    FILE *fp;\n    fp = fopen(\"ran.dat\",\"w\");\n\n    for(i=0; i &lt; 10; i++)\n    {\n        num = (double)rand()/RAND_MAX * 3.0 - 1.5;\n        fprintf(fp,\"%f\\n\", num);\n    }\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 472, "user_id": 10801822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146a7214b29438ffcb5a9ee6ce8b90ff?s=128&d=identicon&r=PG", "display_name": "LeoVen", "link": "https://stackoverflow.com/users/10801822/leoven"}, "is_accepted": false, "score": 0, "last_activity_date": 1571883208, "last_edit_date": 1571883208, "creation_date": 1571855768, "answer_id": 58529135, "question_id": 58528639, "link": "https://stackoverflow.com/questions/58528639/to-generate-10-random-numbers-between-1-5-and-1-5-and-write-them-in-a-ran-dat-f/58529135#58529135", "title": "To generate 10 random numbers between -1.5 and 1.5 and write them in a ran.dat file", "body": "<p>You can generalize it by creating a function like so:</p>\n\n<pre><code>float random_float(float min, float max)\n{\n    return ((float)rand() / ((float)RAND_MAX)) * (max - min) + min;\n}\n</code></pre>\n\n<p>With both <code>min</code> and <code>max</code> inclusive.</p>\n\n<p>This is the complete code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nfloat random_float(float min, float max)\n{\n    return ((float)rand() / ((float)RAND_MAX)) * (max - min) + min;\n}\n\nint main()\n{\n    srand(time(NULL));\n\n    FILE *fp;\n    fp = fopen(\"ran.dat\", \"w\");\n\n    int i;\n    for (i = 0; i &lt; 9; i++)\n    {\n        fprintf(fp, \"%f\\n\", random_float(-1.5, 1.5));\n    }\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>A few things I changed:</p>\n\n<ul>\n<li>Declared the variable <code>i</code> immediately before the <code>for</code> loop. This is a good practice, declaring things only when you are about to use them;</li>\n<li>Removed declaration of <code>float num</code> as it was unnecessary.</li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 12264768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4ab79e3523520f02824125c99f771e?s=128&d=identicon&r=PG&f=1", "display_name": "kashyap", "link": "https://stackoverflow.com/users/12264768/kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571888602, "creation_date": 1571853794, "last_edit_date": 1571888602, "question_id": 58528639, "link": "https://stackoverflow.com/questions/58528639/to-generate-10-random-numbers-between-1-5-and-1-5-and-write-them-in-a-ran-dat-f", "title": "To generate 10 random numbers between -1.5 and 1.5 and write them in a ran.dat file", "body": "<p><strong>I have tried this</strong> </p>\n\n<p><em>Fix the range and also compute average and number of data greater than average</em></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n    int i;\n    float num;\n    srand(time(NULL));\n\n    FILE *fp;\n    fp = fopen(\"ran.dat\", \"w\");\n\n    for (i = 0; i &lt; 9; i++)\n    {\n        num = rand() % (-1.5,1.5);\n        fprintf(fp, \"%f\\n\", num);\n    }\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "taylor-series"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1571854594, "post_id": 58528609, "comment_id": 103381715, "body": "7 isn&#39;t probably enough for 240 or 300. But you can&#39;t go farther with integer factorial unless you use long long"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571855001, "post_id": 58528609, "comment_id": 103381892, "body": "Note that <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/math.h.html#tag_13_26\" rel=\"nofollow noreferrer\">a POSIX-compliant system will define <code>M_PI</code> to the value of pi in <code>&lt;math.h&gt;</code></a>."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 1, "creation_date": 1571861447, "post_id": 58528609, "comment_id": 103384467, "body": "You should forget about degree conversions when doing mathematical analysis, and work &quot;natively&quot; in radians."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1571863635, "post_id": 58528609, "comment_id": 103385400, "body": "<code>pow</code> can be very bad too... you want to calculate the powers by just multiplying in the loop."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571855237, "post_id": 58528854, "comment_id": 103381996, "body": "Also, note some of the points brought up on this question and answers regarding greater floating-point precision:  <a href=\"https://stackoverflow.com/questions/13516476/long-double-gcc-specific-and-float128\" title=\"long double gcc specific and float128\">stackoverflow.com/questions/13516476/&hellip;</a>"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1571858666, "post_id": 58528854, "comment_id": 103383355, "body": "I think your changes are excessive (albeit likely improvements). The core problem with OP&#39;s code is the overflow in <code>fact</code>, and possibly also insufficient <code>TERMS</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1571858725, "post_id": 58528854, "comment_id": 103383374, "body": "Yes, you&#39;re right. My notes at the end of the answer explain that. The key point is : if TERMS is small then there&#39;s loss of precision, and if TERMS is &gt;= 7 you get overflow unless you use int64_t or double. If you think you can edit the answer to make it more focused on the real issue, I see no issue with that."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1571858834, "post_id": 58528854, "comment_id": 103383423, "body": "The coefficients could be precomputed in their entirety too, not just fact."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1571858975, "post_id": 58528854, "comment_id": 103383480, "body": "true! an example where ideas of improvements came when writing the answer"}, {"owner": {"reputation": 47, "user_id": 11023675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IyWyB-652r0/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNgvkABnDwrnhboWZ0s6R2CTBdPWw/mo/photo.jpg?sz=128", "display_name": "FNF", "link": "https://stackoverflow.com/users/11023675/fnf"}, "edited": false, "score": 0, "creation_date": 1571917587, "post_id": 58528854, "comment_id": 103403093, "body": "Thanks for the all the help. I have implemented my own power function and changed the the fact function to return a long long and these changes solved my issues."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1571858938, "last_edit_date": 1571858938, "creation_date": 1571854727, "answer_id": 58528854, "question_id": 58528609, "link": "https://stackoverflow.com/questions/58528609/taylor-series-in-c-problem-with-sin240-and-sin300/58528854#58528854", "title": "Taylor Series in C (problem with sin(240) and sin(300))", "body": "<p>The key point is:</p>\n\n<p><code>TERMS</code> is too small to have proper precision. And if you increase <code>TERMS</code>, you have to change <code>fact</code> implementation as it will likely overflow when working with <code>int</code>.</p>\n\n<p>I would use a sign to toggle the -1 power instead of <code>pow(-1,n)</code> overkill.</p>\n\n<p>Then use <code>double</code> for the value of PI to avoid losing too many decimals</p>\n\n<p>Then for high values, you should increase the number of terms (this is the main issue). using <code>long long</code> for your factorial method or you get overflow. I set 10 and get proper results:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nconst int TERMS = 10;\nconst double PI =  3.14159265358979;\n\nlong long fact(int n) {\n    return n&lt;= 0 ? 1 : n * fact(n-1);\n}\ndouble powd(double x,int n) {\n    return n&lt;= 0 ? 1 : x * powd(x,n-1);\n}\n\n\ndouble sine(int x) {\n    double rad = x * (PI / 180);\n    double sin = 0;\n\n\n    int n;\n    int sign = 1;\n    for(n = 0; n &lt; TERMS; n++) { // That's Taylor series!!\n        sin += sign  * powd(rad, (2 * n) + 1)/ fact((2 * n) + 1);\n        sign = -sign;\n    }\n    return sin;\n}\n\n\ndouble cosine(int x) {\n    double rad = x * (PI / 180);\n    double cos = 0;\n\n    int n;\n    int sign = 1;\n    for(n = 0; n &lt; TERMS; n++) { // That's also Taylor series!\n         cos += sign * powd(rad, 2 * n) / fact(2 * n);\n         sign = -sign;\n    }\n    return cos;\n  }\n\nint main(void){\n   int y;\n   scanf(\"%d\",&amp;y);\n   printf(\"sine(%d)= %lf\\n\",y, sine(y));\n   printf(\"cosine(%d)= %lf\\n\",y, cosine(y));\n\n  return 0;\n}\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>240\nsine(240)= -0.866026\ncosine(240)= -0.500001\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>my recusive implementation of <code>pow</code> using successive multiplications is probably not needed, since we're dealing with floating point. It introduces accumulation error if n is big.</li>\n<li><code>fact</code> could be using floating point to allow bigger numbers and better precision. Actually I suggested <code>long long</code> but it would be better not to assume that the size will be enough. Better use standard type like <code>int64_t</code> for that.</li>\n<li><code>fact</code> and <code>pow</code> results could be pre-computed/hardcoded as well. This would save computation time.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1571868272, "post_id": 58530467, "comment_id": 103386881, "body": "It is also a non-trivial issue that ther naive servies used in the OP&#39;s code is simply slow to converge. Chosing a faster converging series would help."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1572118004, "post_id": 58530467, "comment_id": 103464284, "body": "@dmckee, that&#39;s the reason for the recommendation made in this answer.  If you limit the absolute value of the angle below one radian, the convergence of the series is very quick, becoming slower as you depart from the origin value (in the case shown <code>0.0</code>)"}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 5, "last_activity_date": 1571862068, "creation_date": 1571862068, "answer_id": 58530467, "question_id": 58528609, "link": "https://stackoverflow.com/questions/58528609/taylor-series-in-c-problem-with-sin240-and-sin300/58530467#58530467", "title": "Taylor Series in C (problem with sin(240) and sin(300))", "body": "<p>You should calculate the functions in the first quadrant only [0, pi/2). Exploit the properties of the functions to get the values for other angles. For instance, for values of x between [pi/2, pi), sin(x) can be calculated by sin(pi - x). </p>\n\n<p>The sine of 120 degrees, which is 40 past 90 degrees, is the same as 50 degrees: 40 degrees before 90. Sine starts at 0, then rises toward 1 at 90 degrees, and then falls again in a mirror image to zero at 180.</p>\n\n<p>The negative sine values from pi to 2pi are just -sin(x - pi). I'd handle everything by this recursive definition:</p>\n\n<pre><code>sin(x):\n  cases x of:\n    [0, pi/2)   -&gt; calculate (Taylor or whatever)\n    [pi/2, pi)  -&gt; sin(pi - x)\n    [pi/2, 2pi) -&gt; -sin(x - pi)\n    &lt; 0         -&gt; sin(-x)\n    &gt;= 2pi      -&gt; sin(fmod(x, 2pi))  // floating-point remainder\n</code></pre>\n\n<p>A similar approach for <code>cos</code>, using identity cases appropriate for it.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 9927425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-th4EvU1tNNA/AAAAAAAAAAI/AAAAAAAAAec/_5nsC1ycISs/photo.jpg?sz=128", "display_name": "ismail ak\u0131n &#231;elik", "link": "https://stackoverflow.com/users/9927425/ismail-ak%c4%b1n-%c3%a7elik"}, "is_accepted": false, "score": 0, "last_activity_date": 1572006678, "creation_date": 1572006678, "answer_id": 58558609, "question_id": 58528609, "link": "https://stackoverflow.com/questions/58528609/taylor-series-in-c-problem-with-sin240-and-sin300/58558609#58558609", "title": "Taylor Series in C (problem with sin(240) and sin(300))", "body": "<pre><code>const double TERMS = 14;\nconst double PI = 3.14159265358979;\n\ndouble fact(double n) {return n &lt;= 0.0 ? 1 : n * fact(n - 1);}\n\ndouble sine(double x)\n{\n    double rad = x * (PI / 180);\n    rad = fmod(rad, 2 * PI);\n    double sin = 0;\n\n    for (double n = 0; n &lt; TERMS; n++) \n        sin += pow(-1, n) * pow(rad, (2 * n) + 1) / fact((2 * n) + 1);\n\n    return sin;\n}\n\ndouble cosine(double x)\n{\n    double rad = x * (PI / 180);\n    rad = fmod(rad,2*PI);\n    double cos = 0;\n\n    for (double n = 0; n &lt; TERMS; n++)\n        cos += pow(-1, n) * pow(rad, 2 * n) / fact(2 * n);\n\n    return cos;\n}\n\n int main()\n{\n\n    printf(\"sine(240)= %lf\\n\",  sine(240));\n    printf(\"cosine(300)= %lf\\n\",cosine(300));\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 11023675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IyWyB-652r0/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNgvkABnDwrnhboWZ0s6R2CTBdPWw/mo/photo.jpg?sz=128", "display_name": "FNF", "link": "https://stackoverflow.com/users/11023675/fnf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1572006678, "creation_date": 1571853669, "last_edit_date": 1571855007, "question_id": 58528609, "link": "https://stackoverflow.com/questions/58528609/taylor-series-in-c-problem-with-sin240-and-sin300", "title": "Taylor Series in C (problem with sin(240) and sin(300))", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nconst int TERMS = 7;\nconst float PI =  3.14159265358979;\n\nint fact(int n) {\n    return n&lt;= 0 ? 1 : n * fact(n-1);\n}\n\n\ndouble sine(int x) {\n    double rad = x * (PI / 180);\n    double sin = 0;\n\n\n    int n;\n    for(n = 0; n &lt; TERMS; n++) { // That's Taylor series!!\n        sin += pow(-1, n) * pow(rad, (2 * n) + 1)/ fact((2 * n) + 1);\n    }\n    return sin;\n}\n\n\ndouble cosine(int x) {\n    double rad = x * (PI / 180);\n    double cos = 0;\n\n    int n;\n\n    for(n = 0; n &lt; TERMS; n++) { // That's also Taylor series!\n         cos += pow(-1, n) * pow(rad, 2 * n) / fact(2 * n);\n    }\n    return cos;\n  }\n\nint main(void){\n   int y;\n   scanf(\"%d\",&amp;y);\n   printf(\"sine(%d)= %lf\\n\",y, sine(y));\n   printf(\"cosine(%d)= %lf\\n\",y, cosine(y));\n\n  return 0;\n}\n</code></pre>\n\n<p>The code above was implemented to compute sine and cosine using Taylor series.\nI tried testing the code and it works fine for sine(120).\nI am getting wrong answers for sine(240) and sine(300).</p>\n\n<p>Can anyone help me find out why those errors occur?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15, "user_id": 12244631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SiK6aKoqTiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdPVmGSP5bZPC6o4MSGeeN8rIYL8g/photo.jpg?sz=128", "display_name": "Atilla Gun", "link": "https://stackoverflow.com/users/12244631/atilla-gun"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571853586, "post_id": 58528547, "comment_id": 103381255, "body": "I&#39;m entering number then it wants more numbers from me."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 3, "creation_date": 1571853609, "post_id": 58528547, "comment_id": 103381266, "body": "0/10 is 0. you&#39;re repeating while number greater than <b>or equal to</b> 0"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1571853732, "post_id": 58528547, "comment_id": 103381323, "body": "So you have an infinite loop. @pmg has the root cause."}], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 10801822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146a7214b29438ffcb5a9ee6ce8b90ff?s=128&d=identicon&r=PG", "display_name": "LeoVen", "link": "https://stackoverflow.com/users/10801822/leoven"}, "is_accepted": false, "score": 2, "last_activity_date": 1571856915, "creation_date": 1571856915, "answer_id": 58529384, "question_id": 58528547, "link": "https://stackoverflow.com/questions/58528547/im-having-problem-with-my-c-function-code/58529384#58529384", "title": "I&#39;m having problem with my C function code", "body": "<p>As <a href=\"https://stackoverflow.com/questions/58528547/im-having-problem-with-my-function-codeim-new#comment103381266_58528547\">pmg</a> pointed out you are falling into an infinite loop. This line:</p>\n\n<pre><code>while (number &gt;= 0)\n</code></pre>\n\n<p>Should instead be:</p>\n\n<pre><code>while (number &gt; 0)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 12244631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SiK6aKoqTiQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdPVmGSP5bZPC6o4MSGeeN8rIYL8g/photo.jpg?sz=128", "display_name": "Atilla Gun", "link": "https://stackoverflow.com/users/12244631/atilla-gun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1571878289, "answer_count": 1, "score": -1, "last_activity_date": 1571869463, "creation_date": 1571853420, "last_edit_date": 1571869463, "question_id": 58528547, "link": "https://stackoverflow.com/questions/58528547/im-having-problem-with-my-c-function-code", "closed_reason": "Not suitable for this site", "title": "I&#39;m having problem with my C function code", "body": "<p>I want it show me sum of numbers that I enter for example:123=1+2+3 but it wants number from me forever</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint totalOfNumbers(int number)\n{\n    int i, total = 0;\n    while (number &gt;= 0)\n    {\n        i = number % 10;\n        total += i;\n        number = number / 10;\n    }\n    return total;\n}\n\nint main()\n{\n    int x;\n    scanf(\"%d\", &amp;x);\n    printf(\"%d\", totalOfNumbers(x));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pangocairo"], "comments": [{"owner": {"reputation": 47, "user_id": 1092750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d39c6cfe83de35daae44186d4e404f9?s=128&d=identicon&r=PG", "display_name": "zmij", "link": "https://stackoverflow.com/users/1092750/zmij"}, "edited": false, "score": 0, "creation_date": 1571851345, "post_id": 58528024, "comment_id": 103380355, "body": "Without rotations the behaviour is the same."}], "owner": {"reputation": 47, "user_id": 1092750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d39c6cfe83de35daae44186d4e404f9?s=128&d=identicon&r=PG", "display_name": "zmij", "link": "https://stackoverflow.com/users/1092750/zmij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571852616, "creation_date": 1571851265, "last_edit_date": 1571852616, "question_id": 58528024, "link": "https://stackoverflow.com/questions/58528024/pangocairo-shows-cluttered-text-when-cairo-context-is-scaled", "title": "PangoCairo shows cluttered text when cairo context is scaled", "body": "<p>I'm playing around with PangoCairo and found out that if the cairo context is scaled, pango draws letters closer together when scale is less than 1 and spaced from each other when scale is more than one.</p>\n\n<p>Here is the minimum example (I've took it from <a href=\"https://developer.gnome.org/pango/stable/pango-Cairo-Rendering.html\" rel=\"nofollow noreferrer\">https://developer.gnome.org/pango/stable/pango-Cairo-Rendering.html</a> PangoCairo documentation and just added scale)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;math.h&gt;\n#include &lt;pango/pangocairo.h&gt;\n\nstatic void\ndraw_text (cairo_t *cr)\n{\n#define RADIUS 150\n#define N_WORDS 10\n#define FONT \"Sans Bold 27\"\n#define SCALE .5\n\n  PangoLayout *layout;\n  PangoFontDescription *desc;\n  int i;\n\n  /* Center coordinates on the middle of the region we are drawing\n   */\n  cairo_translate (cr, RADIUS, RADIUS);\n\n  /* Create a PangoLayout, set the font and text */\n  layout = pango_cairo_create_layout (cr);\n\n  pango_layout_set_text (layout, \"Text\", -1);\n  desc = pango_font_description_from_string (FONT);\n  pango_layout_set_font_description (layout, desc);\n  pango_font_description_free (desc);\n\n  /* Draw the layout N_WORDS times in a circle */\n  for (i = 0; i &lt; N_WORDS; i++)\n    {\n      int width, height;\n      double angle = (360. * i) / N_WORDS;\n      double red;\n\n      cairo_save (cr);\n\n      /* Gradient from red at angle == 60 to blue at angle == 240 */\n      red   = (1 + cos ((angle - 60) * G_PI / 180.)) / 2;\n      cairo_set_source_rgb (cr, red, 0, 1.0 - red);\n\n      cairo_rotate (cr, angle * G_PI / 180.);\n\n      /* Inform Pango to re-layout the text with the new transformation */\n      pango_cairo_update_layout (cr, layout);\n\n      pango_layout_get_size (layout, &amp;width, &amp;height);\n      cairo_move_to (cr, - ((double)width / PANGO_SCALE) / 2, - RADIUS);\n      pango_cairo_show_layout (cr, layout);\n\n      cairo_restore (cr);\n    }\n\n  /* free the layout object */\n  g_object_unref (layout);\n}\n\nint main (int argc, char **argv)\n{\n  cairo_t *cr;\n  char *filename;\n  cairo_status_t status;\n  cairo_surface_t *surface;\n\n  if (argc != 2)\n    {\n      g_printerr (\"Usage: cairosimple OUTPUT_FILENAME\\n\");\n      return 1;\n    }\n\n     filename = argv[1];\n\n  surface = cairo_image_surface_create (CAIRO_FORMAT_ARGB32,\n                                        2 * RADIUS * SCALE, 2 * RADIUS * SCALE);\n  cr = cairo_create (surface);\n\n  cairo_set_source_rgb (cr, 1.0, 1.0, 1.0);\n  cairo_paint (cr);\n  cairo_scale(cr, SCALE, SCALE);\n  draw_text (cr);\n  cairo_destroy (cr);\n\n  status = cairo_surface_write_to_png (surface, filename);\n  cairo_surface_destroy (surface);\n\n  if (status != CAIRO_STATUS_SUCCESS)\n    {\n      g_printerr (\"Could not save png to '%s'\\n\", filename);\n      return 1;\n    }\n\n  return 0;\n}\n</code></pre>\n\n<p>Here how the rendered text looks like when there are no modification to the tutorial source or <code>SCALE</code> is set to 1:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ajaEc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ajaEc.png\" alt=\"At scale 1.0\"></a></p>\n\n<p>With <code>SCALE</code> 0.5:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DsCIM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DsCIM.png\" alt=\"At scale 0.5\"></a></p>\n\n<p>And with <code>SCALE</code> 1.5:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4nZnL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4nZnL.png\" alt=\"At scale 1.5\"></a></p>\n\n<p>I'm sure I'm doing something wrong, but googling doesn't help many.</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1571851533, "post_id": 58527862, "comment_id": 103380429, "body": "@ryyker Yes I am being coerced into using <code>get_string()</code> from <code>cs50</code>. Unfortunately it&#39;s really a challenge to describe the problem since the error messages aren&#39;t evident. In fact, I have no problem running the program but it&#39;s in the result of the program."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1571856995, "post_id": 58527862, "comment_id": 103382721, "body": "Take a look at <i><a href=\"https://cs50.stackexchange.com/questions/29516/week-1-get-int-get-string-errors\">this question and answer(s)</a></i>.  Take note also the site that it is posted on.  I did not realize <code>cs50</code> has its own <i><a href=\"https://cs50.stackexchange.com/tour\">dedicated place to ask</a></i> questions.  You may have better luck posting this question there.  The question is not exactly a match to what you are looking for, but the site is much more aligned with <code>cs50</code> than this one.  Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1573856576, "post_id": 58883232, "comment_id": 104037974, "body": "I agree that you have to be careful mixing <code>int</code> and <code>double</code> because of the implicit conversions, (and that may be the the problem,) but I don&#39;t know what you mean by rounding; <code>int</code> <i>is</i> a whole number."}, {"owner": {"reputation": 26, "user_id": 7553919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cea4498ade473efd262af3282dc917?s=128&d=identicon&r=PG&f=1", "display_name": "aj1980", "link": "https://stackoverflow.com/users/7553919/aj1980"}, "reply_to_user": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1573901585, "post_id": 58883232, "comment_id": 104045719, "body": "Wouldn&#39;t storing in an int just eliminate the decimals? For example a result of 3.68 will be 3?"}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 1, "creation_date": 1573940985, "post_id": 58883232, "comment_id": 104055747, "body": "I see what you mean, now: round the <code>double</code> expression and cast it into <code>int grade</code>. In addition, for example, <code>100 * letter &#47; word</code> will be integer division, OP probably meant <code>100.0</code> (probably a minor point, in this case, since it&#39;s scaled up, it can&#39;t make more than 1% difference.) I checked out the assignment, and they do say to round, so this is probably the advice I would give, too."}], "tags": [], "owner": {"reputation": 26, "user_id": 7553919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cea4498ade473efd262af3282dc917?s=128&d=identicon&r=PG&f=1", "display_name": "aj1980", "link": "https://stackoverflow.com/users/7553919/aj1980"}, "is_accepted": true, "score": 1, "last_activity_date": 1573844842, "creation_date": 1573844842, "answer_id": 58883232, "question_id": 58527862, "link": "https://stackoverflow.com/questions/58527862/finding-out-readability-level-using-coleman-liau-index-using-c/58883232#58883232", "title": "Finding out readability level using Coleman-Liau index using C", "body": "<p>You have the grade as an int. You need to round the grade so that it rounds to the nearest whole number. That should fix the issues. </p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 13985600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e63ec805a66eddeea9a8527db3539ca?s=128&d=identicon&r=PG&f=1", "display_name": "jliu1999", "link": "https://stackoverflow.com/users/13985600/jliu1999"}, "is_accepted": false, "score": 0, "last_activity_date": 1595595456, "last_edit_date": 1595595456, "creation_date": 1595550676, "answer_id": 63065078, "question_id": 58527862, "link": "https://stackoverflow.com/questions/58527862/finding-out-readability-level-using-coleman-liau-index-using-c/63065078#63065078", "title": "Finding out readability level using Coleman-Liau index using C", "body": "<p>Other than the round() problem, there are two more problems with this line of code &quot;if (i &lt; n - 1 &amp;&amp; isspace(article[i]) &amp;&amp; isalnum(article[i + 1]))&quot;.</p>\n<p>First, you didn't consider the situation in which the next word started with &quot; or '. The latter two are not alphanumeric.</p>\n<p>Second, suppose someone accidentally typed in more spaces between two words, this line of code wouldn't get the word count right. The CS50 assignment does require to consider such a situation.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14082962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993462dfcc1072cc1e9e38d358cff617?s=128&d=identicon&r=PG&f=1", "display_name": "ermias", "link": "https://stackoverflow.com/users/14082962/ermias"}, "is_accepted": false, "score": 0, "last_activity_date": 1597089564, "creation_date": 1597089564, "answer_id": 63347186, "question_id": 58527862, "link": "https://stackoverflow.com/questions/58527862/finding-out-readability-level-using-coleman-liau-index-using-c/63347186#63347186", "title": "Finding out readability level using Coleman-Liau index using C", "body": "<p>I think you have a number of mistakes. for instance, how can your 'for loop' count the number of letters without counting spaces, commas, exclamation mark....?</p>\n<p>second what does this mean?</p>\n<pre><code>    &quot;if (i &lt; n - 1 &amp;&amp; isspace(article[i]) &amp;&amp; isalnum(article[i + 1]))&quot;???\n</code></pre>\n<p>I think this is wrong.\nBy the way if you want to count the number of words, it is just enough you to know the number of spaces. Then you know that:</p>\n<p>words= space +1.</p>\n"}, {"comments": [{"owner": {"reputation": 581, "user_id": 1255970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb4e792e6677cd7786682ee86d82023?s=128&d=identicon&r=PG", "display_name": "guysherman", "link": "https://stackoverflow.com/users/1255970/guysherman"}, "edited": false, "score": 0, "creation_date": 1614383345, "post_id": 66390270, "comment_id": 117378010, "body": "This answer would be more helpful if it was broken up and came with some explanation."}], "tags": [], "owner": {"reputation": 1, "user_id": 15291829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3e50d9877fc542537176230a41c407b?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Lee", "link": "https://stackoverflow.com/users/15291829/ryan-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1614360359, "creation_date": 1614360359, "answer_id": 66390270, "question_id": 58527862, "link": "https://stackoverflow.com/questions/58527862/finding-out-readability-level-using-coleman-liau-index-using-c/66390270#66390270", "title": "Finding out readability level using Coleman-Liau index using C", "body": "<p>I myself took an easier version of this, so here is one version:</p>\n<pre><code>def count_letters(text):\n    num_letters = 0\n    for letter in text:\n        if letter.isalpha():\n            num_letters += 1 \n    return num_letters\n\ndef count_words(text):\n    num_words = 1\n    space = [' ']\n    for word in text:\n        if word in space:\n            num_words += 1 \n    return num_words\n\ndef count_sentences(text):\n    num_sentences = 0\n    punctuation = ['.', '!', '?']\n    for sentence in text:\n        if sentence in punctuation:\n            num_sentences += 1 \n    return num_sentences\n\n\ntext = input(&quot;Text: &quot;)\n\nletters = count_letters(text)\nwords = count_words(text)\nsentences = count_sentences(text)\n\nindex = 0\nL = letters / words * 100\nS = sentences / words * 100\nindex = 0.0588 * L - 0.296 * S - 15.8\nindex = round(index)\n\nif index &lt; 0:\n    print(&quot;Before Grade 1&quot;)\nif index &gt; 0 and index &lt; 16:\n    print(f&quot;Grade {index}&quot;)\nif index &gt; 15:\n    print(&quot;Grade 16+&quot;)    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15424851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd5c2dd5de3adc65323380fd5a60ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Siqueira", "link": "https://stackoverflow.com/users/15424851/fernando-siqueira"}, "is_accepted": false, "score": 0, "last_activity_date": 1616353070, "creation_date": 1616353070, "answer_id": 66736340, "question_id": 58527862, "link": "https://stackoverflow.com/questions/58527862/finding-out-readability-level-using-coleman-liau-index-using-c/66736340#66736340", "title": "Finding out readability level using Coleman-Liau index using C", "body": "<p>You must, for example, multiply by 100.000 to cast to float.\nOne another tip is to consider increment word at the end of the loop that runs the article chars.</p>\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\n// Points assigned to each letter of the alphabet\nint POINTS[] = {1, 3, 3, 2, 1, 4, 2, 4, 1, 8, 5, 1, 3, 1, 1, 3, 10, 1, 1, 1, \n1, 4, 4, 8, 4, 10};\n\n\n//analyse letters, words, sentences\nvoid analyse_text(string text);\n\n//compute grade\nint compute_grade(int letters, int words, int sentences);\n\n\nint main(void)\n{\n    // Get input words from both players\n    string text = get_string(&quot;Text: &quot;);\n    analyse_text(text);\n}\n\n\nvoid analyse_text(string text)\n{\n\n    int grade = 0;\n    int letters = 0;\n    int words = 0;\n    int sentences = 0;\n\n    for (int i = 0, n = strlen(text); i &lt; n; i++)\n    {\n        char lower_char = tolower(text[i]);\n\n        if ('a' &lt;=  lower_char &amp;&amp; lower_char &lt;= 'z')\n        {\n            letters++;\n        }\n        else if(lower_char == ' ')\n        {\n            words++;\n        }\n        else if (lower_char == '.' || lower_char == '!' || lower_char == '?')\n        {\n            sentences++;\n        }\n    }\n    words++;\n\n    grade = compute_grade(letters, words, sentences);\n\n    if (0 &lt; grade &amp;&amp; grade &lt; 16)\n    {\n        printf(&quot;Grade %i\\n&quot;, grade);\n    }\n    else if (grade &lt; 1)\n    {\n        printf(&quot;Before Grade 1\\n&quot;);\n    }\n    else\n    {\n        printf(&quot;Grade 16+\\n&quot;);\n    }\n\n}\n\n// calculate grade: grade = 0.0588 * L - 0.296 * S - 15.8\nint compute_grade(int letters, int words, int sentences)\n{\n    float L = 100.0000 * letters / words;\n    float S = 100.0000 * sentences / words;\n\n    float f =  0.0588 * L - 0.296 * S - 15.8;\n    //printf(&quot;index: %f&quot;, f);\n    return (int) round(f);\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 10102089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c088427631033f5e5b9e8b84f3ff42a?s=128&d=identicon&r=PG&f=1", "display_name": "JasonTheMarketer", "link": "https://stackoverflow.com/users/10102089/jasonthemarketer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10634, "favorite_count": 0, "accepted_answer_id": 58883232, "answer_count": 5, "score": 0, "last_activity_date": 1616353070, "creation_date": 1571850560, "last_edit_date": 1571862623, "question_id": 58527862, "link": "https://stackoverflow.com/questions/58527862/finding-out-readability-level-using-coleman-liau-index-using-c", "title": "Finding out readability level using Coleman-Liau index using C", "body": "<p>I am writing a program to find out number of letters, words, and sentences. Using these values, I am using <a href=\"https://en.wikipedia.org/wiki/Coleman%E2%80%93Liau_index\" rel=\"nofollow noreferrer\">Coleman-Liau index</a> to find out the article's readability level.</p>\n\n<p>I think I have a pretty solid program with the help online but I don't know why some of the errors are happening in the link below. \n<a href=\"https://submit.cs50.io/check50/35e7ae7e4b968d6b06a8152f61a0e83381b376ab\" rel=\"nofollow noreferrer\">https://submit.cs50.io/check50/35e7ae7e4b968d6b06a8152f61a0e83381b376ab</a></p>\n\n<p>For context, please see <a href=\"https://cs50.harvard.edu/college/psets/2/readability/\" rel=\"nofollow noreferrer\">https://cs50.harvard.edu/college/psets/2/readability/</a></p>\n\n<p>Here's the code that I am having trouble with: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint letter;\nint word;\nint sentence;\n\n\nint main(void)\n{\n\n// prompt the user with the question\n\n    string article = get_string(\"What's the article?: \");\n\n// set the length of article\n\n    int n = strlen(article);\n\n// add +1 if the article starts with alphanumeric letter\n\n    if (isalnum(article[0]))\n    {\n        word = 1;\n    }\n\n// count words\n\n    for (int i = 0; i &lt; n;  i++)\n    {\n        // count letters\n\n        if (isalnum(article[i]))\n        {\n            letter++;\n        }\n\n        // count words\n\n        if (i &lt; n - 1 &amp;&amp; isspace(article[i]) &amp;&amp; isalnum(article[i + 1]))\n        {\n            word++;\n        }\n\n        // count sentences\n\n        if (i &gt; 0 &amp;&amp; (article[i] == '!' || article[i] == '?' || article[i] == '.') &amp;&amp; isalnum(article[i - 1]))\n        {\n            sentence++;\n        }\n\n    }\n\n// calculate Coleman-Liau index\n\n    int grade = 0.0588 * (100 * letter / word) - 0.296 * (100 * sentence / word) - 15.8;\n\n// debugger\n\n    printf(\"Letters: %i\\n Words: %i\\n Sentences: %i\\n\", letter, word, sentence);\n\n// print result\n    if (grade &lt;= 1)\n    {\n        printf(\"Before Grade 1\\n\");\n    }\n    else if (grade &lt; 16)\n    {\n        printf(\"Grade %i\\n\", grade);\n    }\n    else\n    {\n        printf(\"Grade 16+\\n\");\n    }\n}\n</code></pre>\n\n<p>As far as I can see, I can't see why some of the results are skewed. </p>\n"}, {"tags": ["c", "linux", "security", "format-string", "lab"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1571852669, "post_id": 58527709, "comment_id": 103380868, "body": "Now edit your Q to show what is in the file <code>input</code>. When you look at that, does it make sense vs the <code>printf</code> cmd used to produce it? (I&#39;m thinking it doesn&#39;t ;-) ). Saw the last lines of your post. I am <b>not</b> an expert. Try looking at <a href=\"https://security.stackexchange.com\">security.stackexchange.com</a> help and see if your Q is appropriate to post there but <b>don&#39;t</b> crosspost! . Good luck."}, {"owner": {"reputation": 19, "user_id": 11778053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a65bd1e32378c5b167148bb5c64db29?s=128&d=identicon&r=PG&f=1", "display_name": "EMMJAY", "link": "https://stackoverflow.com/users/11778053/emmjay"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1571852691, "post_id": 58527709, "comment_id": 103380882, "body": "@shellter thank you"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1571853796, "post_id": 58527709, "comment_id": 103381347, "body": "Try changing to <code>echo $(printf &quot;.%x.%x.%x.%x.%x.%n&quot;, &quot;\\x04\\xf3\\xff\\xbf&quot;) &gt; input</code> You may need to separate the values, i.e. <code>&quot;\\x04&quot; &quot;\\xf3&quot; &quot;\\xff&quot; &quot;\\xbf&quot;</code> or maybe something else. That&#39;s probably all I can help with and I am busy the rest of this week. Good luck."}], "owner": {"reputation": 19, "user_id": 11778053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a65bd1e32378c5b167148bb5c64db29?s=128&d=identicon&r=PG&f=1", "display_name": "EMMJAY", "link": "https://stackoverflow.com/users/11778053/emmjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 710, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571853023, "creation_date": 1571849826, "last_edit_date": 1571853023, "question_id": 58527709, "link": "https://stackoverflow.com/questions/58527709/format-string-vulnerability-lab", "title": "Format String Vulnerability Lab", "body": "<p>First year Cybersecurity student here (I am new to a lot of things, like Linux and such)</p>\n\n<p>I am having some trouble modifying a secret value in my lab.\nHere is what I need to do for it</p>\n\n<ul>\n<li><p>gcc -z execstack -o vul_prog vul_prog.c</p></li>\n<li><p>sudo chown root vul_prog</p></li>\n<li><p>sudo chmod +s vul_prog</p></li>\n</ul>\n\n<p>Do the following successfully using a string format vulnerability\n Crash program</p>\n\n<ul>\n<li><p>Print secret value secret</p></li>\n<li><p>Modify secret value secret</p></li>\n<li><p>Modify secret value secret with a predetermined value 0x42454546</p></li>\n<li><p>Get a root shell (extra credit)</p></li>\n</ul>\n\n<p>here is the code that we are using </p>\n\n<pre><code>/*vul_prog.c*/\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n#define SECRET 0x44\n\nint main(int argc, char*argv[]) {\n    char user_input[200];\n    int secret;\n    int a, b, c, d; /*other variables, not used here.*/\n\n    /*getting the secret*/\n    secret = SECRET;\n\n    printf(\"The variable secret\u00e2\u20ac\u2122s address is 0x%8x\\n\", (unsigned int)&amp;secret);\n    printf(\"The variable secret\u00e2\u20ac\u2122s value is 0x%x or %d\\n\", (unsigned int)secret, secret);\n\n    printf(\"Please enter a string\\n\");\n    scanf(\"%s\", user_input); /*getting a string from user*/\n\n    /*Vulnerable place*/\n    printf(user_input);\n    printf(\"\\n\");\n\n    /*Verify whether your attack is successful*/\n    printf(\"The original secret: 0x%x or %d\\n\", SECRET, SECRET);\n    printf(\"The new secret: 0x%x or %d\\n\", secret, secret);\n\n    return 0;\n}\n</code></pre>\n\n<p>I know what my secret value is, but I couldn't modify it. I know the commands that I have to use. I need to modify where 44 is stored at. In my case, the address is 0xbfffeb60</p>\n\n<pre><code>[10/23/19]seed@VM:~/Desktop$ ./vul_prog\nThe variable secret\u2019s address is 0xbfffeb60\nThe variable secret\u2019s value is 0x44 or 68\nPlease enter a string\n.%x.%x.%x.%x.%x.%x.%x.%x.%x.%x\n.bfffeb64.44.b7fd6b28.b7ff37ec.0.b7fff000.bfffece4.44.2e78252e.252e7825\nThe original secret: 0x44 or 68\nThe new secret: 0x44 or 68\n</code></pre>\n\n<p>The commands I used so far</p>\n\n<p><code>sudo sysctl -w kernel.randomize_va_space=0</code></p>\n\n<p><code>gcc -z execstack -o vul_prog vul_prog.c</code></p>\n\n<p><code>sudo chown root vul_prog</code></p>\n\n<p><code>sudo chmod +s vul_prog</code></p>\n\n<p>after that, I ran the program <code>./vul_prog</code> and entered a bunch of %x to get address printed out. My professor said that the code for <code>vul_prog.c</code> is slightly modified from the original, and my book uses the original code and it gives the steps on how to modify it by using </p>\n\n<p><code>echo $(printf \"\\x04\\xf3\\xff\\xbf\").%x.%x.%x.%x.%x.%n &gt; input</code></p>\n\n<p><code>vul &lt; input</code></p>\n\n<p>here's what input file looks like after</p>\n\n<p><code>P\u00f3\u00ff\u00bf.%x.%x.%x.%x.%x.%x.%x.%x.%n</code></p>\n\n<p>after I run these commands, nothing changes. Then I added 3 more of \".%x\" and %n at the end and still nothing. When I try to do it with only </p>\n\n<p><code>.%x.%x.%x.%x.%x.%x.%x.%x.%n</code></p>\n\n<p>it will give me a segmentation error</p>\n\n<p>I tried emailing him today in the morning to ask him if I could meet him in his office and show him what I am doing wrong and he haven't responded yet, so I am hoping to get some more guidance from anyone who is an expert in his field.</p>\n\n<p>I will add more information if needed.</p>\n"}, {"tags": ["c++", "c", "matrix", "mpi", "reduction"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571883330, "post_id": 58527622, "comment_id": 103389756, "body": "what are you exactly trying to achieve? the input and output buffers passed to <code>MPI_Reduce()</code> have the same type and size, so a reduce&#39;d matrix is a matrix. If you reduce a row, the result will also be a row. If you expect to &quot;reduce&quot; a matrix into a row, then <code>MPI_Reduce()</code> is not a fit."}, {"owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571898763, "post_id": 58527622, "comment_id": 103393630, "body": "Thanks for your answer. I expext MPI_Reduce() to go through my matrix columns and sum every row, just like it sums every array in the example above. Do I have to make a recvbuf also a raw type as a sendbuf for this or it&#39;s just not possible with MPI_Reduce()?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571899379, "post_id": 58527622, "comment_id": 103393897, "body": "<code>MPI_Reduce()</code> takes a single <code>datatype</code> that is used for both <code>sendbuf</code> and <code>recvbuf</code>. I still do not understand what you want to achieve, and all I can say is <code>MPI_Reduce()</code> can sum the matrices from all your ranks into a resulting matrix with the same dimensions. If this is what you want to do, you can do it on one shot instead of iterating over the columns and/or rows."}, {"owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571900044, "post_id": 58527622, "comment_id": 103394190, "body": "Sorry for my english ) Just want every proc to have the respective raw sum of my matrix A. So if I have 4 proc and A[4][4] I want for instance 0 proc to have A[0][0] + A[0][1]+A[0][2]+A[0][3]"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571900618, "post_id": 58527622, "comment_id": 103394441, "body": "<code>MPI_Reduce()</code> reduces accross the MPI ranks. For example, you would get the sum of <b>all</b> <code>A[0]0]</code> in <code>result[0][0]</code>. If you want to sum <code>result[0][0:3]</code>, then it is up to you to do it (read MPI cannot help you here)."}, {"owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571901370, "post_id": 58527622, "comment_id": 103394821, "body": "Oh, now I see, I got it! Thank you so much for your time!"}], "owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571863074, "creation_date": 1571849423, "last_edit_date": 1571863074, "question_id": 58527622, "link": "https://stackoverflow.com/questions/58527622/c-mpi-reduce-rows-of-the-matrix", "title": "C++ MPI_Reduce rows of the matrix", "body": "<p>I am a new to MPI and struggling to do the global reduce operation for my matrix. I have done the reduction, using the materials I have found. But I want to do this not with a generated 1D arrays, but with the randomly filled 2D matrix rows.</p>\n\n<p>I could not find any materials for reduction and matrix.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include \"mpi.h\"\n#include &lt;time.h&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n\nint main(int argc, char* argv[])\n{\n    int rank, size;\n    double sum = 0;\n\n\n    if (MPI_Init(&amp;argc, &amp;argv) != MPI_SUCCESS) {\n        perror(\"Error initializing MPI\");\n        exit(1);\n    }\n\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    int sendbuf[size] = { 0 };\n    int recvbuf[size] = { 0 };\n\n    for (int i = 0; i &lt; size; i++)\n        sendbuf[i] = 1 + rank + size * i;\n\n    printf(\"Initial %d: \", rank);\n    for (int i = 0; i &lt; size; i++) printf(\"%d \", sendbuf[i]);\n    printf(\"\\n\");\n\n        MPI_Reduce(&amp;sendbuf, &amp;recvbuf, size, MPI_INT,\n            MPI_SUM, 0, MPI_COMM_WORLD);\n\n// if I have a matrix A[4][4], I want smth like:\n// for(int i = 0; i &lt; rows_number; i++)\n//   MPI_Reduce(&amp;A[i], &amp;recvbuf, size, MPI_INT,\n//           MPI_SUM, 0, MPI_COMM_WORLD);\n\n    if (rank == 0) {\n\n        for (int i = 0; i &lt; size; i++)\n            cout &lt;&lt; \"Reduced = \" &lt;&lt; recvbuf[i] &lt;&lt; endl;\n\n    }\n\n\n\n    MPI_Finalize();\n    return 0;\n}```\n\n\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1571849536, "post_id": 58527589, "comment_id": 103379558, "body": "Anything wrong with <code>printf(&quot;%d.%02d&quot;, buf[14], buf[15])</code> ? <code>Serial.printf</code> I guess this isn&#39;t C. <code>do 2s compliment to get the correct sign</code> - I don&#39;t understand this. If the second byte stores the number after the decimal point, can it also be negative? Can it be greater then 100? Why and how is 2s complement related in this? If you have received the bytes, why do you care about how the bits are stored? Is your target machine not twos complement?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1571849917, "post_id": 58527589, "comment_id": 103379714, "body": "In your code, what is the definition of <code>bin</code> <code>dec</code> <code>twosComp</code>, <code>binary_Size</code> <code>onecComp</code>? You seem to be working with null terminated strings, why are you working with null terminated strings at all? <code>Convert binary to decimal number</code> - how can you store a &quot;decimal number&quot; or &quot;binary number&quot; in an <code>int</code> and what does that mean? Isn&#39;t it <i>the same number</i> that is stored differently? How do you store a number in &quot;decimal&quot; in an <code>int</code>?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1571850637, "post_id": 58527589, "comment_id": 103380000, "body": "If you actually want a float variable in memory at the end of the process, then I can see the quick prinf fix is probably not going to work. You could try creating an integer number that is 100 times too big, convert that to float, then divide by 100 to get the float value you actually want?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1571850843, "post_id": 58527589, "comment_id": 103380102, "body": "I don&#39;t see how you get <code>-31</code> from <code>0xE5</code> which would be <code>-27</code>."}, {"owner": {"reputation": 1, "user_id": 8252069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104c37e1509347916b26ddf36a75010b?s=128&d=identicon&r=PG&f=1", "display_name": "Melt Brink", "link": "https://stackoverflow.com/users/8252069/melt-brink"}, "edited": false, "score": 0, "creation_date": 1571852126, "post_id": 58527589, "comment_id": 103380673, "body": "Binary size is 8 and all the rest required to do ones and two converion char binary[binary_size + 1]; char onesComp[binary_size + 1]; char twosComp[binary_size + 1]; int carry=1;"}, {"owner": {"reputation": 1, "user_id": 8252069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104c37e1509347916b26ddf36a75010b?s=128&d=identicon&r=PG&f=1", "display_name": "Melt Brink", "link": "https://stackoverflow.com/users/8252069/melt-brink"}, "edited": false, "score": 0, "creation_date": 1571852593, "post_id": 58527589, "comment_id": 103380837, "body": "I need to upload the end result to a webserver, the reason im trying to convert between all the number systems is to get form th e two hex chars to  the  signed float with a decimal point. Hence the question there must be an easier way"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571926595, "post_id": 58527589, "comment_id": 103408087, "body": "Have you tried the function: <code>strtod()</code> from the header file:  <code>stdlib.h</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8252069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104c37e1509347916b26ddf36a75010b?s=128&d=identicon&r=PG&f=1", "display_name": "Melt Brink", "link": "https://stackoverflow.com/users/8252069/melt-brink"}, "is_accepted": false, "score": 0, "last_activity_date": 1587998660, "creation_date": 1587998660, "answer_id": 61461510, "question_id": 58527589, "link": "https://stackoverflow.com/questions/58527589/add-correct-sign-decimal-point-and-convert-to-float-from-two-char-in-a-buffer/61461510#61461510", "title": "add correct sign, decimal point and convert to float from two char in a buffer", "body": "<p>The following worked for me in the end</p>\n\n<pre><code>signed char i = 0xFF;\n signed char twosCompliment = ((i&lt;&lt;8) | buf_copy[14]); // get 2s compliment for negative value\nsprintf(saveTemperatureBeaconTemperature, \"%d.%d\" , twosCompliment,buf_copy[15]);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8252069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104c37e1509347916b26ddf36a75010b?s=128&d=identicon&r=PG&f=1", "display_name": "Melt Brink", "link": "https://stackoverflow.com/users/8252069/melt-brink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1587998660, "creation_date": 1571849225, "last_edit_date": 1571851984, "question_id": 58527589, "link": "https://stackoverflow.com/questions/58527589/add-correct-sign-decimal-point-and-convert-to-float-from-two-char-in-a-buffer", "title": "add correct sign, decimal point and convert to float from two char in a buffer", "body": "<p>Im reading a buffer and one char in the buffer represents the number before the decimal and char represent the number after the decimal. I need to concat these, add the decimal, then do 2s compliment to get the correct sign. lastly represent the number (i.e -34.05) as a float.</p>\n\n<p>I have tried to copy the two hex chars out of the buffer so I can work with them.\nconvert it to binary\nuse one's, then two's complement to get the sign\nuse strtoul to get binary back to int\nconvert the int to decimal (here im not getting the correct value)\nif I did get the correct value I would do the same for the other char then concat them and convert to float.\nThis is a very long process and im hoping to get a better solution. </p>\n\n<p>I cant seem to get from  twos compliment back to int back to dec</p>\n\n<pre><code>              Serial.printf(\"bin:%s\\n\",bin); // prints out the bin no for testing\n\n\n            for(i=0; i&lt;binary_size; i++)\n                {\n                    if(bin[i] == '1')\n                    {\n                        onesComp[i] = '0'; // invert\n                    }\n                    else if(bin[i] == '0')\n                    {\n                        onesComp[i] = '1'; // invert\n                    }\n                }\n                onesComp[binary_size] = '\\0'; // add terminating 0\n\n            // convert to 2's comp for correct sign\n                for(i=binary_size-1; i&gt;=0; i--)\n                {\n                    if(onesComp[i] == '1' &amp;&amp; carry == 1)\n                    {\n                        twosComp[i] = '0';\n                    }\n                    else if(onesComp[i] == '0' &amp;&amp; carry == 1)\n                    {\n                        twosComp[i] = '1';\n                        carry = 0;\n                    }\n                    else\n                    {\n                        twosComp[i] = onesComp[i];\n                    }\n                }\n                twosComp[binary_size] = '\\0';     //dont put a terminating 0\n\n                    Serial.printf(\"\\nones:%s   \",onesComp); // prints out the onesComp  for testing\n                    Serial.printf(\"\\ntwos:%s   \",twosComp); // prints out the twosComp  for testing\n\n\n            char * pEnd;\n            signed  int int_out;\n            int_out = strtoul (twosComp, &amp;pEnd, 8);\n            Serial.printf (\" twos_comp_int : %d.\\n\", int_out);\n\n                    decimal = convert(int_out); // convert back to decimal\n                    Serial.printf (\" decimal : %d.\\n\", decimal);\n            }\n\n\n\n            // Convert binary to decimal number pass an argument Bin and returns int Dec\n            int convert(int bin_to_dec)\n            {\n                int rem, i=0, dec=0;\n\n                while(bin_to_dec!=0)\n                {\n                    rem = bin_to_dec%10;\n                    dec += (rem*pow(2,i));\n                    bin_to_dec/=10; //bin=bin/10;\n                    i++;\n                }\n\n                return dec;\n            }\n</code></pre>\n\n<p>from an input \n         buf[14]=e5;\n         buf[15]=01;</p>\n\n<p>I need a result float = -27.01</p>\n"}, {"tags": ["c", "function", "pointers", "struct", "enums"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12264102, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mghvz2gKGSE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYntUJD4f-x4keJDN5v0coU0x_Dg/photo.jpg?sz=128", "display_name": "Yasir Ali", "link": "https://stackoverflow.com/users/12264102/yasir-ali"}, "edited": false, "score": 0, "creation_date": 1571861035, "post_id": 58528789, "comment_id": 103384286, "body": "Is it possible to indirectly access each elements of struct array with pointers without declaring it as struct type?"}, {"owner": {"reputation": 1154, "user_id": 5329483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540d2cd6d0b20c87290f01247f8aae17?s=128&d=identicon&r=PG&f=1", "display_name": "user5329483", "link": "https://stackoverflow.com/users/5329483/user5329483"}, "reply_to_user": {"reputation": 1, "user_id": 12264102, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mghvz2gKGSE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYntUJD4f-x4keJDN5v0coU0x_Dg/photo.jpg?sz=128", "display_name": "Yasir Ali", "link": "https://stackoverflow.com/users/12264102/yasir-ali"}, "edited": false, "score": 0, "creation_date": 1571938191, "post_id": 58528789, "comment_id": 103413839, "body": "I don&#39;t understand why you want to avoid a struct. In your OP you write that the user provides a category and a boolean flag for that category. Why not glue them together and pack them in a struct?"}], "tags": [], "owner": {"reputation": 1154, "user_id": 5329483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540d2cd6d0b20c87290f01247f8aae17?s=128&d=identicon&r=PG&f=1", "display_name": "user5329483", "link": "https://stackoverflow.com/users/5329483/user5329483"}, "is_accepted": false, "score": 0, "last_activity_date": 1571854420, "creation_date": 1571854420, "answer_id": 58528789, "question_id": 58527478, "link": "https://stackoverflow.com/questions/58527478/c-pointers-to-array-of-struct-in-function/58528789#58528789", "title": "C: Pointers to array of struct in function", "body": "<p>There are basically two ways to send a variable length array from one function to another. One variant is to provide the array (basically a pointer to its first element) and the number of elements. The other option is to define a special terminating element. Just like strings in C - they are terminated with a special character with the code 0. Here my code, based on your code and some corrections. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\ntypedef enum MODES {mode1, mode2, mode3, modeTerminus} modes;\n\ntypedef struct MYSTRUCT\n{\n    enum MODES modes;\n    int8_t catNumber;\n    const char * name; //As we intend to store a string here, a simple 'char name' is insufficient\n    bool flag;\n} mystruct;\n\nmystruct Variable[] =\n{\n    [0] ={\n        .modes=mode1,\n        .catNumber=1,.name = \"catA\",\n        .flag=false\n    },\n\n    [1] = {\n        .modes =mode2,\n        .catNumber=2,.name = \"catB\",\n        .flag=false\n    },\n\n    [2] = {\n        .modes =mode3,\n        .catNumber=3,.name = \"catC\",\n        .flag=false\n    },\n    [3] = {\n        .modes =modeTerminus\n    },\n};\nvoid theDataProcessor1(mystruct* theList)\n{\n   for (const mystruct* theItem=theList; theItem-&gt;modes!=modeTerminus; theItem++)\n      printf(\"theDataProcessor1: modes=%d catNumber=%d name=%s flag=%d\\n\",\n              theItem-&gt;modes,\n              theItem-&gt;catNumber,\n              theItem-&gt;name,\n              theItem-&gt;flag\n            );\n}\nvoid theDataProcessor2(mystruct* theList, int Count)\n{\n    for (int i=0; i&lt;Count; i++)\n      printf(\"theDataProcessor2: modes=%d catNumber=%d name=%s flag=%d\\n\",\n              theList[i].modes,\n              theList[i].catNumber,\n              theList[i].name,\n              theList[i].flag\n            );\n}\nint main()\n{\n    theDataProcessor1(Variable);\n    theDataProcessor2(Variable, 3);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12264102, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mghvz2gKGSE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYntUJD4f-x4keJDN5v0coU0x_Dg/photo.jpg?sz=128", "display_name": "Yasir Ali", "link": "https://stackoverflow.com/users/12264102/yasir-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571854420, "creation_date": 1571848757, "last_edit_date": 1571849060, "question_id": 58527478, "link": "https://stackoverflow.com/questions/58527478/c-pointers-to-array-of-struct-in-function", "title": "C: Pointers to array of struct in function", "body": "<p>I want to create a function that will enable or disable the some parts of the functions with conditions. I have created a struct that contains 4 members (enum types, uint8 catNumber, char Name, bool flag). </p>\n\n<pre><code>typedef struct MYSTRUCT\n{\n enum modes;\n uint8 catNumber;\n char name;\n bool flag;\n }mystruct;\n</code></pre>\n\n<p>Enum contains:</p>\n\n<pre><code>typedef emum MODES {mode1, mode2, mode3}modes;\n</code></pre>\n\n<p>So after creating a struct template, I have declare a array variable of struct type. i.e. Struct mystruct variable[3]. And I have initialized the each member of mystruct.</p>\n\n<pre><code>mystruct  Variable[3] = \n{\n[0] ={.modes=mode1,\n.catNumber=1,.name = \u201ccatA\u201d,\n.flag=false},\n\n[1] = {.modes =mode2,\n.catNumber=2,.name = \u201ccatB\u201d,\n.flag=false},\n\n[2] = {.modes =mode3,\n.catNumber=3,.name = \u201ccatC\u201d,\n.flag=false},\n};\n</code></pre>\n\n<p>So the user has to enter the category number and the true/false Flag to enable or disable the part of the function i.e different categories from struct and with each corresponding mode print a mode name to check it is enable. So the task is the user can enable one or more than one category. For eg . User enters: 1 2 true. Which enables the both categories 1 and 2. </p>\n\n<p>Could anyone guide me how do I do this task?\nAnd is it possible not to pass the whole struct data type as an func argument. I just want to declare pointers as an argument to point struct array elements in main().</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 1, "creation_date": 1571847959, "post_id": 58527213, "comment_id": 103378835, "body": "It&#39;s not really clear what&#39;s not working for you in the code that you have posted (apart from changing that loop to iterate 490 times instead of 3 times)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1571848354, "post_id": 58527213, "comment_id": 103379033, "body": "You also need to specify the language, C and C++ are different languages."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1571848584, "post_id": 58527213, "comment_id": 103379134, "body": "Do you have signals below <code>100</code>? If so, how should they be formatted? &quot;<code>._001</code>&quot; or perhaps &quot;<code>._1</code>&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12227875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac8febe3e3cc08d724931fd9327354a?s=128&d=identicon&r=PG&f=1", "display_name": "user12227875", "link": "https://stackoverflow.com/users/12227875/user12227875"}, "edited": false, "score": 0, "creation_date": 1571859506, "post_id": 58527292, "comment_id": 103383689, "body": "yes exactly, this is exactly what i want. Thank you"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 3, "last_activity_date": 1571848069, "creation_date": 1571848069, "answer_id": 58527292, "question_id": 58527213, "link": "https://stackoverflow.com/questions/58527213/how-to-loop-over-defined-name-pattern/58527292#58527292", "title": "How to loop over defined name pattern", "body": "<p>You probably want something this:</p>\n\n<pre><code>for (i = 1; i &lt;= 490 - 100; i++)\n{\n  SPrint(signal, \"Dem_AllEventsStatusByte._%d\", i + 100);\n</code></pre>\n\n<p>or maybe this:</p>\n\n<pre><code>for (i = 101; i &lt;= 490; i++)\n{\n  SPrint(signal, \"Dem_AllEventsStatusByte._%d\", i);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12227875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac8febe3e3cc08d724931fd9327354a?s=128&d=identicon&r=PG&f=1", "display_name": "user12227875", "link": "https://stackoverflow.com/users/12227875/user12227875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1571865113, "accepted_answer_id": 58527292, "answer_count": 1, "score": -2, "last_activity_date": 1571848303, "creation_date": 1571847651, "last_edit_date": 1571848303, "question_id": 58527213, "link": "https://stackoverflow.com/questions/58527213/how-to-loop-over-defined-name-pattern", "closed_reason": "Needs details or clarity", "title": "How to loop over defined name pattern", "body": "<p>I have around 500 signals with the naming pattern</p>\n\n<pre><code>\"Dem_AllEventsStatusByte._101\"\n\"Dem_AllEventsStatusByte._102\"\n\"Dem_AllEventsStatusByte._103\"\n...\n\"Dem_AllEventsStatusByte._490\"\n</code></pre>\n\n<p>I want to loop over all of them. </p>\n\n<p>I tried the following code but when i=10 then my signal name is like \" Dem_AllEventsStatusByte._1010\" which is false it should be 110 at the end.</p>\n\n<pre><code>for (i=1; i&lt;=3;i++)\n  {\n    SPrint(signal, \"Dem_AllEventsStatusByte._10%d\", i);\n</code></pre>\n\n<p>How to loop over 490 signals of same name pattern? please help! Thank you</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1571852886, "post_id": 58527204, "comment_id": 103380971, "body": "by <code>malloc array</code> do you really mean you want to allocate it, or that you need to pass a pointer to the array into your function &quot;like you do for malloc&quot;?"}, {"owner": {"reputation": 11, "user_id": 11891526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb16841c3a316f37eeb09be4d756812?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11891526/david"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1571857998, "post_id": 58527204, "comment_id": 103383105, "body": "@GemTaylor i just want to pass a pointer to the array"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1571848520, "creation_date": 1571848520, "answer_id": 58527419, "question_id": 58527204, "link": "https://stackoverflow.com/questions/58527204/how-to-convert-a-2d-array-which-is-globally-available-to-a-malloc-arraywhich-ca/58527419#58527419", "title": "how to convert a 2d array which is globally available to a malloc array(which can be passed as a parameter)", "body": "<p>If the <code>COLUMN</code> is a compile-time constant then the function can be declared like</p>\n\n<pre><code>void draw_grid( char grid[][COLUMN], int row, int col);\n</code></pre>\n\n<p>and a dynamically allocated array can be obtained the following way</p>\n\n<pre><code>char ( *grid )[COLUMN] = malloc( sizeof( char[ROW][COLUMN] ) );\n</code></pre>\n\n<p>If the compiler supports variable length arrays then the function can be also declared like</p>\n\n<pre><code>void draw_grid( int row, int col, char grid[][col] );\n</code></pre>\n\n<p>the dynamically allocated array can be created the same way as above.</p>\n"}], "owner": {"reputation": 11, "user_id": 11891526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb16841c3a316f37eeb09be4d756812?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11891526/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571848520, "creation_date": 1571847613, "question_id": 58527204, "link": "https://stackoverflow.com/questions/58527204/how-to-convert-a-2d-array-which-is-globally-available-to-a-malloc-arraywhich-ca", "title": "how to convert a 2d array which is globally available to a malloc array(which can be passed as a parameter)", "body": "<p>I want to change my globally available 2d array to a malloc array and pass it to the following function</p>\n\n<p>I have this 2d array as a global variable</p>\n\n<pre><code>char grid[ROW][COLUMN];\n</code></pre>\n\n<p>I want to pass it to this functionas a parameter, but using a malloc array</p>\n\n<pre><code>void draw_grid(int row, int col) \n{\n\n\n     printf(\" \");\n    for (int c = 0; c &lt; col; ++c) \n    {\n        printf(\" \");\n        printf(\" %d\", c);\n     //   printf(\" \");\n}\n\n       printf(\"\\n\");\n\n\n    for (int r = 0; r &lt; row; ++r) \n    {    \n\n        printf(\"%d\", r);\n        printf(\"|\");\n\n        for(int dot = 0; dot &lt; (row*col); ++dot) \n        {\n            grid[r][dot] = ' ';                        \n\n\n            printf(\"|\");\n            printf(\"%c\", grid[r][dot]);\n\n            printf(\" \");\n\n            // Dots needs to remain within the grids bounds\n            if (dot == (col) - 1) \n            {\n                printf(\"|| \\n\");\n                //printf(\"\\n\");\n                break;\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management", "malloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571846952, "post_id": 58527022, "comment_id": 103378355, "body": "Have you ever used the &quot;standard&quot; <code>malloc</code> ? Do you know how it behaves in this case? Yes, it is totally broken in most of such cases."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 2, "creation_date": 1571847006, "post_id": 58527022, "comment_id": 103378380, "body": "Yes, writing over the allocation boundary results in undefined behavior, which (in many cases) means that the allocator is now broken. Some allocators will test for this during the call to <code>free</code> and crash the program. Some allocators might not. Not all allocators have a per-allocation metadata block that can be used for this."}, {"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 1, "creation_date": 1571849635, "post_id": 58527022, "comment_id": 103379608, "body": "If you also have pointers in that metadata (maybe only on free blocks, to store them into a free list), a malicious user could overwrite them to obtain a <i>write one word anywhere</i> primitive, which can be used to overwrite in turn some function pointer, return address or similar, and then obtain <i>arbitrary code execution</i>. For more info, look into <i>heap overflows</i>."}], "owner": {"reputation": 53, "user_id": 9165191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a57473edcddc63e52ee89e77d79dd1?s=128&d=identicon&r=PG&f=1", "display_name": "abt jeremie", "link": "https://stackoverflow.com/users/9165191/abt-jeremie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571847761, "creation_date": 1571846875, "last_edit_date": 1571847761, "question_id": 58527022, "link": "https://stackoverflow.com/questions/58527022/boundary-tag-being-overwritten", "title": "boundary tag being overwritten", "body": "<p>I'm writing an allocator as a school project to replace the reel malloc, the Boundaries Tags (where you write as metadata before and after each allocated block the size of the block and if it is used or free) seems to be a good technic, but I wonder one thing, what is going on if the users's write beyond the range he required allocation for and rewrite your tags,then your malloc is totally broken ? Is it ok or did I miss something ?</p>\n"}, {"tags": ["c", "serialization", "protocol-buffers", "proto", "nanopb"], "answers": [{"tags": [], "owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "is_accepted": true, "score": 1, "last_activity_date": 1571846907, "creation_date": 1571846907, "answer_id": 58527039, "question_id": 58526355, "link": "https://stackoverflow.com/questions/58526355/protocol-buffer-nanopb-serializing-string-and-decoding-error-utf-8-character/58527039#58527039", "title": "Protocol Buffer nanopb Serializing string and decoding error utf-8 character", "body": "<pre><code>ProtoExample Message;\nMessage.Value1= S_generalConfig_s.EntityType;\nMessage.Value2[0] = 'a';\n</code></pre>\n\n<p>It's a good idea to initialize the message structures. Otherwise if you forget to initialize some field, it will contain random data. So change first line to:</p>\n\n<pre><code>ProtoExample Message = ProtoExample_init_default;\n</code></pre>\n\n<p>Here <code>ProtoExample_init_default</code> is a initialization macro generated by nanopb, which will contain any default values defined in .proto file. You can also use <code>ProtoExample_init_zero</code> to initialize to empty values instead.</p>\n\n<p>The actual issue is that your string is unterminated. In C, strings have to end in '\\0' character to be valid. So you'll need to add:</p>\n\n<pre><code>Message.Value2[1] = '\\0';\n</code></pre>\n\n<p>to set the terminator after your single character. If you add the default initialization, it will set all the bytes to zero. In that case  this is kind-of redundant, but it's generally good programming practice to ensure strings are terminated.</p>\n"}], "owner": {"reputation": 195, "user_id": 3788048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fSvcW.jpg?s=128&g=1", "display_name": "Asan", "link": "https://stackoverflow.com/users/3788048/asan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 58527039, "answer_count": 1, "score": 0, "last_activity_date": 1571846907, "creation_date": 1571844569, "question_id": 58526355, "link": "https://stackoverflow.com/questions/58526355/protocol-buffer-nanopb-serializing-string-and-decoding-error-utf-8-character", "title": "Protocol Buffer nanopb Serializing string and decoding error utf-8 character", "body": "<p>I am currently trying to serialize a string using nanopb and decoding the message in python/java.\nThe ints I have no trouble and I can serialize and deserialize. But when it comes to string, I keep getting the same error:\n'utf-8' codec can't decode byte 0xff in position 2: 'utf-8' codec can't decode byte 0xff in position 2: invalid start byte in field:  </p>\n\n<p>I thought it might be a Python decoding problem so I modified:\n<code>with open('FileSerialized.bin', 'rb') as f:</code>  to </p>\n\n<pre><code>with open('FileSerialized.bin', encode='utf-8') as f:\n</code></pre>\n\n<p>I tried with a parser in Java an it gave the same error. Therefore I assume the problem is in the way I am encoding the message in C. I am doing the following:</p>\n\n<p>After nanopb provided the conversion of the .proto:</p>\n\n<pre><code>typedef struct _ProtoExample {\n    int32_t Value1;  //this is deserialized correctly\n    char Value2[6]; //here is where I have trouble\n}\n</code></pre>\n\n<p>And I tried to populate the char array by doing the following: </p>\n\n<pre><code>pb_ostream_t stream = pb_ostream_from_buffer( buffer, BUFFER_SIZE );\nProtoExample Message;\nMessage.Value1= S_generalConfig_s.EntityType;\nMessage.Value2[0] = 'a';\n\npb_encode( &amp;stream, ProtoExample _fields, &amp;Message);\n</code></pre>\n\n<p>Once trying to decode, I find the error when trying to read Value2.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1571844527, "post_id": 58526306, "comment_id": 103377117, "body": "Welcome! It is not very clear what you are asking. Can you please post the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a> that shows the problem. You might benefit by reading the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571844614, "post_id": 58526306, "comment_id": 103377170, "body": "Please make an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. That will simplify describing where in your code you should not write a newline and where to do it instead."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1571845853, "post_id": 58526306, "comment_id": 103377800, "body": "It looks like an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY-problem</a> to me. What exactly do you want to achieve?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 3, "creation_date": 1571846197, "post_id": 58526306, "comment_id": 103377966, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/escape\" rel=\"nofollow noreferrer\"><code>&#39;\\b&#39;</code></a> is a character that does not have any special meaning in a file. A terminal <i>could</i> interpret it as a <a href=\"https://en.wikipedia.org/wiki/Backspace\" rel=\"nofollow noreferrer\">backspace</a>, meaning it will move the cursor one column to the left, allowing the next character to be typed over the one before the <code>&#39;\\b&#39;</code> (overwriting it visually). If such a &quot;next character&quot; is not printed, the cursor remains under/over the character that precedes the <code>&#39;\\b&#39;</code>. The backspace character does not remove it."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571846520, "post_id": 58526306, "comment_id": 103378135, "body": "You&#39;re misusing <code>fopen_s()</code>.  See <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/fopen-s-wfopen-s?redirectedfrom=MSDN&amp;view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/c-runtime-library/reference/&hellip;</a>  Of course, using <code>fopen_s()</code> won&#39;t improve the security of your application, but it will result in non-portable code"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571846558, "post_id": 58526306, "comment_id": 103378156, "body": "I don&#39;t see any <code>\\n</code> in your code."}, {"owner": {"reputation": 1, "user_id": 12264035, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBDrgFYSq1R1cl37R_p6s06tI7NwZ4AxHIm1qf3vQ=k-s128", "display_name": "India_Ink", "link": "https://stackoverflow.com/users/12264035/india-ink"}, "edited": false, "score": 0, "creation_date": 1571846712, "post_id": 58526306, "comment_id": 103378221, "body": "Sorry guys, i am not good at english. So hard to explain. also i edited misstake."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571847210, "post_id": 58526306, "comment_id": 103378486, "body": "<code>\\b</code> will not backspace the file pointer,   Instead, use: <code>fseek()</code> to move the file pointer back one character, then use <code>truncate()</code> to trim off the last character"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571852586, "post_id": 58526306, "comment_id": 103380834, "body": "You can try any on-line translator to get better English. But please check the translation that it matches your intent."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12264035, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBDrgFYSq1R1cl37R_p6s06tI7NwZ4AxHIm1qf3vQ=k-s128", "display_name": "India_Ink", "link": "https://stackoverflow.com/users/12264035/india-ink"}, "edited": false, "score": 0, "creation_date": 1571846662, "post_id": 58526696, "comment_id": 103378207, "body": "thank you so much. that&#39;s what i want."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1571846700, "last_edit_date": 1571846700, "creation_date": 1571845799, "answer_id": 58526696, "question_id": 58526306, "link": "https://stackoverflow.com/questions/58526306/while-file-writing-mode-how-to-backspace-work-at-c/58526696#58526696", "title": "while file writing mode how to backspace work at C", "body": "<p>Writing a back space in a file won't erase the last character written to the file, it just will write the <code>\\b</code> value (which is 8 I think) to the file.</p>\n\n<p>Also your code writes a NUL character after each character written, which is strange (if not wrong) for a text file. I suppose you want to write a text file because you open the file with <code>\"wt\"</code>.</p>\n\n<p>You probably want this:</p>\n\n<pre><code>FILE *fout;\nfout = fopen(FILENAME, \"wt\");  // you probbaly want fopen here, not fopen_s\nif (fout == NULL)              // fopen can fail\n{\n  // show error message and abort\n  ...\n}\nchar data[3] = {'A', 'B', 'C'};\n\nfor (int i = 0; i &lt; 3; i++){\n    fputc(data[i], fout);   // write character\n    if (i &lt;= 2)\n      fputc('\\n', fout);    // write a line ending if we're not on the last line\n}\n\nfclose(fout);\n</code></pre>\n\n<p>The file will contain 3 lines, and the last line won't end with a <code>\\n</code>.</p>\n\n<p>It will look like this:</p>\n\n<pre><code>A\nB\nC\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12264035, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBDrgFYSq1R1cl37R_p6s06tI7NwZ4AxHIm1qf3vQ=k-s128", "display_name": "India_Ink", "link": "https://stackoverflow.com/users/12264035/india-ink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1571860464, "answer_count": 1, "score": 0, "last_activity_date": 1571847653, "creation_date": 1571844400, "last_edit_date": 1571847653, "question_id": 58526306, "link": "https://stackoverflow.com/questions/58526306/while-file-writing-mode-how-to-backspace-work-at-c", "closed_reason": "Needs details or clarity", "title": "while file writing mode how to backspace work at C", "body": "<p><em>Sorry guys, i am not good at english. So hard to explain. also i edited misstake.</em></p>\n\n<p>i did write data and write '\\n' and then when data writing is End, want backspace to make EOF after data.</p>\n\n<pre><code>FILE *fout;\nfopen_s(&amp;fout, FILENAME, \"wt\");\nchar data[3] = {'A', 'B', 'C'};\nfor (int i = 0; i &lt; 3; i++){\n    fputc(data[i], fout);\n    fputc('\\n', fout);\n}\nfputc('\\b', fout); // to make EOF after String\nfclose(fout);\n</code></pre>\n\n<p>file write ex) </p>\n\n<pre><code>A (i don't want)  A (i want)\nB                 B\nC                 C(EOF)\n(EOF)\n</code></pre>\n\n<p>but i tried '\\b' it doesn't work, just show circle symbol thing.</p>\n"}, {"tags": ["c", "string", "c-strings", "string-literals", "nul"], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571844254, "post_id": 58526132, "comment_id": 103376980, "body": "You should mention the <code>char str[] = &quot;hello&quot;;</code> case."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571844314, "post_id": 58526132, "comment_id": 103377014, "body": "@Jabberwocky This is a community wiki, feel free to edit and contribute."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571844349, "post_id": 58526132, "comment_id": 103377030, "body": "... and maybe also the <code>char *str = &quot;hello&quot;;</code> ...<code>str[0] = foo;</code> problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571844955, "post_id": 58526132, "comment_id": 103377343, "body": "Perhaps extend the implication of using <code>sizeof</code> to its use on a function parameter, especially when defined as an array."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571845047, "post_id": 58526132, "comment_id": 103377380, "body": "@WeatherVane Should be covered by another FAQ here: <a href=\"https://stackoverflow.com/questions/492384/how-to-find-the-sizeof-a-pointer-pointing-to-an-array\" title=\"how to find the sizeof a pointer pointing to an array\">stackoverflow.com/questions/492384/&hellip;</a>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1571845323, "post_id": 58526132, "comment_id": 103377535, "body": "A c string is (part of) a character array in which one of the elements (not necessarily the last) is <code>0</code> ... or, depending on context, a pointer to an element of a character array which contains a <code>0</code> in a subsequent element."}, {"owner": {"reputation": 10586, "user_id": 170383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4d9f7a30948dca1bbd05eaf27f277ae6?s=128&d=identicon&r=PG", "display_name": "David R Tribble", "link": "https://stackoverflow.com/users/170383/david-r-tribble"}, "edited": false, "score": 0, "creation_date": 1571848505, "post_id": 58526132, "comment_id": 103379101, "body": "I have been using the <code>char[n+1]</code> paradigm of explicitly providing room for the null terminator within string declarations for decades. It is a true example of &#39;self-documenting code&#39;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571883591, "post_id": 58526132, "comment_id": 103389811, "body": "Could introduce term <i>null character</i> for <code>&#39;\\0&#39;</code> to match the C spec."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573111332, "post_id": 58526132, "comment_id": 103776434, "body": "I disagree with the &quot;contiguous sequence of characters&quot; change. This is aimed to teach beginners, not to be some formally correct language-lawyer statement. I did a rollback."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 13, "last_activity_date": 1613053867, "last_edit_date": 1613053867, "creation_date": 1571843876, "answer_id": 58526132, "question_id": 58526131, "link": "https://stackoverflow.com/questions/58526131/how-should-character-arrays-be-used-as-strings/58526132#58526132", "title": "How should character arrays be used as strings?", "body": "<p><strong>A C string is a character array that ends with a <em>null terminator</em>.</strong></p>\n<p>All characters have a symbol table value. The null terminator is the symbol value <code>0</code> (zero). It is used to mark the end of a string. This is necessary since the size of the string isn't stored anywhere.</p>\n<p>Therefore, every time you allocate room for a string, you must include sufficient space for the null terminator character. Your example does not do this, it only allocates room for the 5 characters of <code>&quot;hello&quot;</code>. Correct code should be:</p>\n<pre><code>char str[6] = &quot;hello&quot;;\n</code></pre>\n<p>Or equivalently, you can write self-documenting code for 5 characters plus 1 null terminator:</p>\n<pre><code>char str[5+1] = &quot;hello&quot;;\n</code></pre>\n<p>But you can also use this and let the compiler do the counting and pick the size:</p>\n<pre><code>char str[] = &quot;hello&quot;; // Will allocate 6 bytes automatically\n</code></pre>\n<p>When allocating memory for a string dynamically in run-time, you also need to allocate room for the null terminator:</p>\n<pre><code>char input[n] = ... ;\n...\nchar* str = malloc(strlen(input) + 1);\n</code></pre>\n<p>If you don't append a null terminator at the end of a string, then library functions expecting a string won't work properly and you will get &quot;undefined behavior&quot; bugs such as garbage output or program crashes.</p>\n<p>The most common way to write a null terminator character in C is by using a so-called &quot;octal escape sequence&quot;, looking like this: <code>'\\0'</code>. This is 100% equivalent to writing <code>0</code>, but the <code>\\</code> serves as self-documenting code to state that the zero is explicitly meant to be a null terminator. Code such as <code>if(str[i] == '\\0')</code> will check if the specific character is the null terminator.</p>\n<p>Please note that the term null terminator has nothing to do with null pointers or the <code>NULL</code> macro! This can be confusing - very similar names but very different meanings. This is why the null terminator is sometimes referred to as <code>NUL</code> with one L, not to be confused with <code>NULL</code> or null pointers. See answers to <a href=\"https://stackoverflow.com/questions/1296843/what-is-the-difference-between-null-0-and-0\">this SO question</a> for further details.</p>\n<p>The <code>&quot;hello&quot;</code> in your code is called a <em>string literal</em>. This is to be regarded as a read-only string. The <code>&quot;&quot;</code> syntax means that the compiler will append a null terminator in the end of the string literal automatically. So if you print out <code>sizeof(&quot;hello&quot;)</code> you will get 6, not 5, because you get the size of the array including a null terminator.</p>\n<hr />\n<blockquote>\n<p>It compiles cleanly with gcc</p>\n</blockquote>\n<p>Indeed, not even a warning. This is because of a subtle detail/flaw in the C language that allows character arrays to be initialized with a string literal that contains exactly as many characters as there is room in the array and then silently discard the null terminator (C17 6.7.9/15). The language is purposely behaving like this for historical reasons, see <a href=\"https://stackoverflow.com/questions/31296727/inconsistent-gcc-diagnostic-for-string-initialization\">Inconsistent gcc diagnostic for string initialization</a> for details. Also note that C++ is different here and does not allow this trick/flaw to be used.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1580711366, "last_edit_date": 1580711366, "creation_date": 1571844479, "answer_id": 58526329, "question_id": 58526131, "link": "https://stackoverflow.com/questions/58526131/how-should-character-arrays-be-used-as-strings/58526329#58526329", "title": "How should character arrays be used as strings?", "body": "<p>From the C Standard (7.1.1 Definitions of terms)</p>\n\n<blockquote>\n  <p>1 <strong>A string is a contiguous sequence of characters terminated by and\n  including the first null character.</strong> The term multibyte string is\n  sometimes used instead to emphasize special processing given to\n  multibyte characters contained in the string or to avoid confusion\n  with a wide string. A pointer to a string is a pointer to its initial\n  (lowest addressed) character. The length of a string is the number of\n  bytes preceding the null character and the value of a string is the\n  sequence of the values of the contained characters, in order.</p>\n</blockquote>\n\n<p>In this declaration</p>\n\n<pre><code>char str [5] = \"hello\";\n</code></pre>\n\n<p>the string literal <code>\"hello\"</code> has the internal representation like</p>\n\n<pre><code>{ 'h', 'e', 'l', 'l', 'o', '\\0' }\n</code></pre>\n\n<p>so it has 6 characters including the terminating zero. Its elements are used to initialize the character array <code>str</code> which reserve space only for 5 characters.</p>\n\n<p>The C Standard (opposite to the C++ Standard) allows such an initialization of a character array when the terminating zero of a string literal is not used as an initializer.</p>\n\n<p>However as a result the character array <code>str</code> does not contain a string.</p>\n\n<p>If you want that the array would contain a string you could write</p>\n\n<pre><code>char str [6] = \"hello\";\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>char str [] = \"hello\";\n</code></pre>\n\n<p>In the last case the size of the character array is determined from the number of initializers of the string literal that is equal to 6.</p>\n"}, {"comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1605106008, "post_id": 58530560, "comment_id": 114550557, "body": "I like this answer, in that it introduces the idea of an additional layer of semantics on strings. An array of <code>char</code> is just that. Now, I can define a string to be <i>\u201can array of characters, the last of which has value 0\u201d</i>. But I could also define it in another way (eg: <i>\u201can array of characters, the first of which indicates how many follow\u201d</i> - aka pascal strings). It is not that a string must end with a 0, but that the C library defines the word string to have that meaning."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1605108546, "post_id": 58530560, "comment_id": 114551895, "body": "Yep, the semantics are C (and <code>.c_str()</code> in C++), Pascal strings or concepts in other languages do things differently. The goal is the same. Imagine a Pascal string with the length information missing <code>:)</code>"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1571862928, "last_edit_date": 1571862928, "creation_date": 1571862590, "answer_id": 58530560, "question_id": 58526131, "link": "https://stackoverflow.com/questions/58526131/how-should-character-arrays-be-used-as-strings/58530560#58530560", "title": "How should character arrays be used as strings?", "body": "<p>Can all <em>strings</em> be considered an <em>array of characters</em> (<strong>Yes</strong>), can all <em>character arrays</em> be considered <em>strings</em> (<strong>No</strong>).</p>\n\n<p><strong>Why Not? and Why does it matter?</strong></p>\n\n<p>In addition to the other answers explaining that the length of a string is not stored anywhere as part of the string and the references to the standard where a string is defined, the flip-side is \"How do the C library functions handle strings?\"</p>\n\n<p>While a character array can hold the same characters, it is simply an array of characters unless the last character is followed by the <em>nul-terminating</em> character. That <em>nul-terminating</em> character is what allows the array of characters to be considered (handled as) a string.</p>\n\n<p>All functions in C that expect a string as an argument expect the sequence of characters to be <em>nul-terminated</em>. <em>Why?</em></p>\n\n<p>It has to do with the way all string functions work. Since the length isn't included as part of an array, string-functions, scan forward in the array until the <em>nul-character</em> (e.g. <code>'\\0'</code> -- equivalent to decimal <code>0</code>) is found. See <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII Table and Description</a>. Regardless whether you are using <code>strcpy</code>, <code>strchr</code>, <code>strcspn</code>, etc.. All string functions rely on the <em>nul-terminating</em> character being present to define where the end of that string is.</p>\n\n<p>A comparison of two similar functions from <code>string.h</code> will emphasize the importance of the <em>nul-terminating</em> character. Take for example:</p>\n\n<pre><code>    char *strcpy(char *dest, const char *src);\n</code></pre>\n\n<p>The <code>strcpy</code> function simply copies bytes from <code>src</code> to <code>dest</code> until the <em>nul-terminating</em> character is found telling <code>strcpy</code> where to stop copying characters. Now take the similar function <code>memcpy</code>:</p>\n\n<pre><code>    void *memcpy(void *dest, const void *src, size_t n);\n</code></pre>\n\n<p>The function performs a similar operation, but does not consider or require the <code>src</code> parameter to be a string. Since <code>memcpy</code> cannot simply scan forward in <code>src</code> copying bytes to <code>dest</code> until a <em>nul-terminating</em> character is reached, it requires an explicit number of bytes to copy as a third parameter. This third parameter provides <code>memcpy</code> with the same size information <code>strcpy</code> is able to derive simply by scanning forward until a <em>nul-terminating</em> character is found.</p>\n\n<p>(which also emphasizes what goes wrong in <code>strcpy</code> (or any function expecting a string) if you fail to provide the function with a <em>nul-terminated</em> string -- it has no idea where to stop and will happily race off across the rest of your memory segment invoking <em>Undefined Behavior</em> until a <em>nul-character</em> just happens to be found somewhere in memory -- or a Segmentation Fault occurs)</p>\n\n<p>That is <em>why</em> functions expecting a <em>nul-terminated</em> string must be passed a <em>nul-terminated</em> string and <em>why it matters</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 45514, "user_id": 31945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53d0faa0590f1146851b2a3959d2e95?s=128&d=identicon&r=PG", "display_name": "Artelius", "link": "https://stackoverflow.com/users/31945/artelius"}, "is_accepted": false, "score": 0, "last_activity_date": 1571876023, "creation_date": 1571876023, "answer_id": 58532479, "question_id": 58526131, "link": "https://stackoverflow.com/questions/58526131/how-should-character-arrays-be-used-as-strings/58532479#58532479", "title": "How should character arrays be used as strings?", "body": "<h2>Intuitively...</h2>\n\n<p>Think of an array as a variable (holds things) and a string as a value (can be placed in a variable).</p>\n\n<p><strong>They are certainly not the same thing.</strong> In your case the variable is too small to hold the string, so the string gets cut off. (\"quoted strings\" in C have an implicit null character at the end.)</p>\n\n<p>However it's possible to store a string in an array that is <em>much larger</em> than the string.</p>\n\n<p>Note that the usual assignment and comparison operators (<code>=</code> <code>==</code> <code>&lt;</code> etc.) don't work as you might expect. But the <code>strxyz</code> family of functions comes pretty close, once you know what you're doing. See the <a href=\"http://c-faq.com/\" rel=\"nofollow noreferrer\">C FAQ</a> on <a href=\"http://c-faq.com/charstring/index.html\" rel=\"nofollow noreferrer\">strings</a> and <a href=\"http://c-faq.com/aryptr/index.html\" rel=\"nofollow noreferrer\">arrays</a>.</p>\n"}], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 3, "accepted_answer_id": 58526132, "answer_count": 4, "community_owned_date": 1571875329, "score": 11, "last_activity_date": 1613053867, "creation_date": 1571843876, "last_edit_date": 1571875456, "question_id": 58526131, "link": "https://stackoverflow.com/questions/58526131/how-should-character-arrays-be-used-as-strings", "title": "How should character arrays be used as strings?", "body": "<p>I understand that strings in C are just character arrays. So I tried the following code, but it gives strange results, such as garbage output or program crashes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n  char str [5] = \"hello\";\n  puts(str);\n}\n</code></pre>\n\n<p>Why doesn't this work?</p>\n\n<p>It compiles cleanly with <code>gcc -std=c17 -pedantic-errors -Wall -Wextra</code>. </p>\n\n<hr>\n\n<p><sub><strong>Note:</strong> This post is meant to be used as a canonical FAQ for problems stemming from a failure to allocate room for a NUL terminator when declaring a string.</sub></p>\n"}, {"tags": ["c", "linux", "mmu", "virtual-address-space", "page-fault"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1571843307, "post_id": 58525907, "comment_id": 103376469, "body": "You are aware that it is talking about kernel mode, not user mode, right?"}, {"owner": {"reputation": 559, "user_id": 3576334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fjRbx.jpg?s=128&g=1", "display_name": "alireza sadeghpour", "link": "https://stackoverflow.com/users/3576334/alireza-sadeghpour"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571868518, "post_id": 58525907, "comment_id": 103386949, "body": "@Eugene_Sh i am beginner in linux, so excuse me. but i could not understand why it should be on kernel mode? author did not indicated that."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571876961, "post_id": 58525907, "comment_id": 103388646, "body": "Even in user mode, one can set two virtual addresses to point to the same physical memory. The <code>shmat</code> routine and related routines map shared memory segments. A process can map the same shared memory segment to different addresses, and it can request various permissions for it when attaching it or by calling <code>mprotect</code>."}], "owner": {"reputation": 559, "user_id": 3576334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fjRbx.jpg?s=128&g=1", "display_name": "alireza sadeghpour", "link": "https://stackoverflow.com/users/3576334/alireza-sadeghpour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571843178, "creation_date": 1571843178, "question_id": 58525907, "link": "https://stackoverflow.com/questions/58525907/how-can-two-virtual-memory-pointing-to-same-physical-memory-in-linux", "title": "How can two virtual memory pointing to same physical memory in linux", "body": "<p>i was reading a page that told:</p>\n\n<p>\"My microbenchmark begins by allocating one memory page, then creates two virtual address aliases pointing to it\"</p>\n\n<p>First Question. i want to know how can i create two virtual address that pointing to same memory page in linux with c?</p>\n\n<p>again on that page he told that:</p>\n\n<p>\"One of the virtual pages (which we\u2019ll call the \u201csetup\u201d pointer) is set to allow access from user mode. The second virtual page (\u201ctest\u201d pointer) is set to varying permissions, then used to perform a load.\"</p>\n\n<p>Second Question. can we change permission bit of a virtual address in virtual page table of my programe? as he did with second pointer.</p>\n"}, {"tags": ["java", "c", "compiler-construction", "abstract-syntax-tree", "bison"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1571865020, "post_id": 58525683, "comment_id": 103385874, "body": "That&#39;s a lot of code to look at, and it still isn&#39;t a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so looking at it is about all one can do. If you are uncertain about whether your AST functions work, why not write some simple test cases which don&#39;t involve parsing? Equally, you can use <a href=\"https://stackoverflow.com/a/50821204/1566221\">bison&#39;s trace facility</a> to show you how bison is handling the input, without necessarily building an AST. The key to debugging is simplifying tests to isolate possible errors; constructing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is a good way to approach this task."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1571865133, "post_id": 58525683, "comment_id": 103385909, "body": "Also, you might look at Eric Lippert&#39;s guide to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">Debugging small programs</a>"}, {"owner": {"reputation": 1, "user_id": 12263060, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6D79ZUL2BcQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf0RBeXQSg1SXzUICqUsBnQWvK0zg/photo.jpg?sz=128", "display_name": "Michele ", "link": "https://stackoverflow.com/users/12263060/michele"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1572210489, "post_id": 58525683, "comment_id": 103481108, "body": "Thanks @rici , I found the error. It was related to the list_append function, when I added a list in the queue I didn&#39;t update the value of LeafVet."}, {"owner": {"reputation": 1, "user_id": 12263060, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6D79ZUL2BcQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf0RBeXQSg1SXzUICqUsBnQWvK0zg/photo.jpg?sz=128", "display_name": "Michele ", "link": "https://stackoverflow.com/users/12263060/michele"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1572211016, "post_id": 58525683, "comment_id": 103481211, "body": "Excuse me @rici , another question: is it possible to go through the Abstract Syntax Tree in pre-order to manage semantic checks and translation?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1572213500, "post_id": 58525683, "comment_id": 103481714, "body": "I&#39;m not sure what you&#39;re asking. You&#39;re writing a computer program in a general purpose programming language; in essence, you can do whatever you want as long as you can describe the algorithm. So clearly a depth-first traverse is possible. Of course, a bottom-up parser such as the one generated by bison naturally executes parser actions in pre-order, so an additional pre-order walk might not be necessary. Nonetheless, if you are asking whether it is reasonable to do a pre-order walk at the end instead of trying to do it as you parse, I&#39;d say it&#39;s fine since the code might be clearer."}], "owner": {"reputation": 1, "user_id": 12263060, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6D79ZUL2BcQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf0RBeXQSg1SXzUICqUsBnQWvK0zg/photo.jpg?sz=128", "display_name": "Michele ", "link": "https://stackoverflow.com/users/12263060/michele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571842513, "creation_date": 1571842513, "question_id": 58525683, "link": "https://stackoverflow.com/questions/58525683/how-to-manage-list-of-element-of-a-grammar-in-the-abstract-syntax-tree-generated", "title": "How to manage list of element of a grammar in the Abstract Syntax Tree generated by Bison", "body": "<p>I'm making a java to python translator with the help of the flex and bison tools. The bison rules refer to a restriction of java grammar. In addition to creating the rules in bison, I also created the Abstract Syntax Tree as an Intermediate Representation. The respective nodes of the AST were created in the semantic actions alongside the bison rules.</p>\n\n<p>My problem concerns the management of lists of elements (or recursion) in the bison rules.</p>\n\n<p>Giving the translator the following text file, the parsing is completed without syntactical errors but when I cross the AST in pre-order for test purposes, it would seem that the crossing stops in the first child node of the list, and therefore does not cycle on the remaining children of the lists.</p>\n\n<p>TEXT FILE IN INPUT:</p>\n\n<pre><code>import java.util.*;\nclass table {\n   int a;\n   int c;\n}\nclass ball {\n   int a;\n}\n</code></pre>\n\n<p>I put the grammar rules of bison involved in it:</p>\n\n<pre><code>Program\n       : ImportStatement ClassDeclarations      { set_parse_tree($$ = program_new($1,$2,2));}\n       ;\n\nImportStatement\n               :  IMPORT LIBRARY SEMICOLON  {$$ = import_new($2,1); printf(\"Type di import: %d \\n\", $$-&gt;type);}\n               |  %empty                    {$$ = import_new(NULL,0); }\n               ;\n\n\nClassDeclarations\n                 : ClassDeclaration                     { $$ = list_new(CLASS_DECLARATIONS,$1,NULL,2);  }\n                 | ClassDeclarations ClassDeclaration   { list_append( $$ = $1, list_new(CLASS_DECLARATIONS,$2,NULL,2)); }\n                 ;\n\nClassDeclaration\n                : CLASS NameID LBRACE FieldDeclarations RBRACE        { $$ = classDec_new($2,$4,2); }\n                | PUBLIC CLASS NameID LBRACE FieldDeclarations RBRACE { $$ = classDec_new($3,$5,2);}\n                ;\n\nFieldDeclarations\n                 : FieldDeclaration                    {$$ = list_new(FIELD_DECLARATIONS,$1,NULL,2); }\n                 | FieldDeclarations FieldDeclaration  { list_append( $$ = $1, list_new(FIELD_DECLARATIONS,$2,NULL,2)); }\n                 ;\n\nFieldDeclaration\n                : VariableFieldDeclaration           {$$ = fieldDec_new($1,NULL,NULL,3);}\n                | PUBLIC VariableFieldDeclaration    {$$ = fieldDec_new($2,NULL,NULL,3);}\n                | MethodFieldDeclaration             {$$ = fieldDec_new(NULL,$1,NULL,3);}\n                | ConstructorDeclaration             {$$ = fieldDec_new(NULL,NULL,$1,3);}\n                ;\n\nVariableFieldDeclaration\n                        : Type VariableDeclarations SEMICOLON   {$$ = variableFieldDec_new($1,$2,2);}\n                        ;\n\nVariableDeclarations\n                     : VariableDeclaration                              {$$ = list_new(VARIABLE_DECLARATIONS,$1,NULL,2); }\n                     | VariableDeclarations COMMA VariableDeclaration   { list_append( $$ = $1, list_new(VARIABLE_DECLARATIONS,$3,NULL,2)); }     \n                     ;\n\nVariableDeclaration\n                   : NameID                                              {$$ = varDec_new($1,NULL,NULL,NULL,NULL,5);}\n                   | NameID ASSIGNOP ExpressionStatement                 {$$ = varDec_new($1,$3,NULL,NULL,NULL,5);}\n                   | NameID LSBRACKET RSBRACKET                          {$$ = varDec_new($1,NULL,NULL,NULL,NULL,5); }\n                   | LSBRACKET RSBRACKET NameID                          {$$ = varDec_new($3,NULL,NULL,NULL,NULL,5); }\n                   | NameID LSBRACKET RSBRACKET ASSIGNOP NEW Type LSBRACKET Dimension RSBRACKET      {$$ = varDec_new($1,NULL,$6,$8,NULL,5); } \n                   | LSBRACKET RSBRACKET NameID  ASSIGNOP NEW Type LSBRACKET Dimension RSBRACKET     {$$ = varDec_new($3,NULL,$6,$8,NULL,5); }\n                   | NameID LSBRACKET RSBRACKET ASSIGNOP LBRACE VariableInitializers RBRACE    {$$ = varDec_new($1,NULL,NULL,NULL,$6,5); }\n                   | LSBRACKET RSBRACKET NameID  ASSIGNOP LBRACE VariableInitializers RBRACE    {$$ = varDec_new($3,NULL,NULL,NULL,$6,5); }\n                   | NameID LSBRACKET RSBRACKET ASSIGNOP LBRACE RBRACE   {$$ = varDec_new($1,NULL,NULL,NULL,NULL,5); }\n                   | LSBRACKET RSBRACKET NameID  ASSIGNOP LBRACE RBRACE  {$$ = varDec_new($3,NULL,NULL,NULL,NULL,5); }\n                   ;\n\nType\n    : INT               {$$ = typeId_new($1,1);} \n    | CHAR              {$$ = typeId_new($1,1);}\n    | FLOAT             {$$ = typeId_new($1,1);}\n    | DOUBLE            {$$ = typeId_new($1,1);} \n    ;\n\nNameID\n      : ID          {$$ = nameID_new($1, 1);}    \n      ;\n</code></pre>\n\n<p>In the general structure of a node of the ast there are: </p>\n\n<ul>\n<li>the type of each node, </li>\n<li>a union structure containing the different structures of each possible node,</li>\n<li>an integer variable (numLeaf) which represents the maximum possible number of leaves for each parent node (it is passed from bison in semantic actions as the last parameter of the functions) </li>\n<li>an array of pointers (leafVet) to structures that will have the number of leaves as the size and each location will contain a pointer to a possible child (if the child is not present it will be NULL).</li>\n</ul>\n\n<p>These last two variables are used to manage the crossing of the tree. I will cycle on each vector to pass to the children of each node.</p>\n\n<p>I think the problem refers mainly to the structures of the lists (ClassDeclarations, FieldDeclarations, VariableDeclarations...). \nThe structure of each list is as follows and this structure is part of the union of possible structures of each node.</p>\n\n<p>STRUCT LIST: </p>\n\n<pre><code>struct {\n        int type;\n        struct ast_node *head; //pointer to the head of the list\n        struct ast_node *tail; //pointer to the tail of the list\n} list;\n</code></pre>\n\n<p>The functions that refer to the creation of list nodes are the following:</p>\n\n<pre><code>static ast_node *newast(int type)\n{\n    ast_node *node = malloc(sizeof(ast_node));\n    node-&gt;type = type;\n    return node;\n}\n\nast_list *list_new(int type, ast_node *head, ast_list *tail, int numLeaf)\n{\n    ast_list *l = newast(AST_LIST); //allocates memory for the AST_LIST type node\n    l-&gt;list.type = type;\n    l-&gt;list.head = head;\n    l-&gt;list.tail = tail;\n    l-&gt;numLeaf = numLeaf;\n    l-&gt;LeafVet[0] = head;\n    l-&gt;LeafVet[1] = tail;\n    return l;\n}\n\nvoid list_append(ast_list *first, ast_list *second)\n{\n    while (first &amp;&amp; first-&gt;list.tail)\n    {\n        first = first-&gt;list.tail;\n    }\n    if (first)\n    {\n        first-&gt;list.tail = second;\n    }\n    first-&gt;numLeaf = 2;\n}\n</code></pre>\n\n<p>I think the error could be in the list_append function because when I run through the pre-order tree, it manages to enter the first leaf node of the lists but does not proceed with the remaining leaf nodes. Specifically, referring to the initial text file, the crossing stops after reaching the NameID node of VariableDeclaration (to be precise, it stops at the first variable of the first class) without giving any error. Immediately afterwards it should parse the second leaf node of fieldDeclarations as there is a second variable declaration (variableFieldDeclaration), but trying to print the nonzero leaf numbers of each list, I always get 1, so it would seem that the append of the lists do not work properly.</p>\n\n<p>The error could also be in the crossing algorithm that I write below:</p>\n\n<pre><code>void print_ast(ast_node *node) //ast preorder\n{\n  int leaf;\n  leaf = node-&gt;numLeaf;\n  printf(\"Num leaf: %d \\n\",leaf);\n\n  switch(node-&gt;type)\n    {\n        case AST_LIST:\n        break;\n\n        case AST_PROGRAM:\n        break;\n\n        case AST_IMPORT:    \n            printf(\"Import: %s \\n\", node-&gt;import.namelib);\n        break;\n\n        case AST_CLASSDEC:\n            printf(\"name class: %s\\n\", node-&gt;classDec.nameClass-&gt;nameID.name);\n        break;\n\n        case AST_TYPEID:        \n        break;\n\n        case AST_VARFIELDDEC:                 \n        break;\n\n        case AST_VARDEC:\n        break;\n\n        case AST_FIELDDEC:\n        break;\n\n        case AST_NAMEID:\n            printf(\"Il valore della variabile e': %s \\n\", node-&gt;nameID.name);\n        break;\n\n        default:            \n            printf(\"Error in node selection!\\n\");\n            exit(1);\n    }\n\n  for (int i=0; i&lt;leaf; i++)\n  { \n      if(node-&gt;LeafVet[i] == NULL ){\n         continue;\n      } else{\n         printf(\"%d \\n\", node-&gt;LeafVet[i]-&gt;type);\n         print_ast(node-&gt;LeafVet[i]);\n      }\n   }\n\n}\n</code></pre>\n\n<p>I hope you can help me, thanks a lot.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 4, "creation_date": 1571842394, "post_id": 58525531, "comment_id": 103375953, "body": "@Blaze In general it is not recommended to use <code>scanf</code>. Too many things can go wrong. For example if this code is run in loop."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1571842487, "post_id": 58525531, "comment_id": 103376007, "body": "<a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/strtod.html\" rel=\"nofollow noreferrer\"><code>strtod()</code></a> ... <code>char *err; double value = strtod(input, &amp;err); &#47;* check errno, *err *&#47;</code> or use <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/strtoul.html\" rel=\"nofollow noreferrer\"><code>strtoull()</code></a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571842756, "post_id": 58525531, "comment_id": 103376186, "body": "Don&#39;t use <code>scanf</code>. Use <code>fgets</code> and scan the string yourself using possibly <code>sscanf</code> or <code>strtod</code>, <code>strtol</code> etc."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1571842844, "post_id": 58525531, "comment_id": 103376238, "body": "scanf may result in false positives, eg with <code>if (sscanf(&quot;42foo&quot;, &quot;%d&quot;, &amp;n) == 1) &#47;* &quot;42foo&quot; accepted as number *&#47;;</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571843331, "post_id": 58525531, "comment_id": 103376481, "body": "Actually the <code>scanf</code> family of functions should only be used if you&#39;re sure the input format <i>actually</i> matches the scanf format string. You can&#39;t be sure of anything with user input."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571843359, "post_id": 58525531, "comment_id": 103376504, "body": "Write a dedicated function, passing a prompt message, and the min/max acceptable values."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571843738, "post_id": 58525531, "comment_id": 103376677, "body": "The second answer is usually my approach. Not familiar with the C99 functions in the first answer, but they certainly look useful: <a href=\"https://stackoverflow.com/questions/7021725/how-to-convert-a-string-to-integer-in-c?rq=1\" title=\"how to convert a string to integer in c\">stackoverflow.com/questions/7021725/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16, "user_id": 12264837, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/cb6be3c9c65291007ca98767bec72901?s=128&d=identicon&r=PG", "display_name": "BalaSriRamanan", "link": "https://stackoverflow.com/users/12264837/balasriramanan"}, "edited": false, "score": 0, "creation_date": 1571853989, "post_id": 58528656, "comment_id": 103381426, "body": "the if statement in 13th line of the code should be considered to be included the code"}], "tags": [], "owner": {"reputation": 16, "user_id": 12264837, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/cb6be3c9c65291007ca98767bec72901?s=128&d=identicon&r=PG", "display_name": "BalaSriRamanan", "link": "https://stackoverflow.com/users/12264837/balasriramanan"}, "is_accepted": true, "score": -1, "last_activity_date": 1571859032, "last_edit_date": 1571859032, "creation_date": 1571853892, "answer_id": 58528656, "question_id": 58525531, "link": "https://stackoverflow.com/questions/58525531/validating-input-for-numbers-in-c/58528656#58528656", "title": "Validating input for numbers in c", "body": "<p>This program will find and gives error when it doesn't find any number in the input and it will specify the index in which the character is given as a input.</p>\n\n<p>if you wanna declare the numbers you can by using a series of if-else conditions.</p>\n\n<p>here I am basically differentiate the numbers and the character.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n    int i;\n    char a[100];\n    printf(\"enter the input value\");\n    replay:\n    scanf(\"%s\",&amp;a);\n    for(i=0;a[i]!='\\0';i++)\n    {\n\n\n        if(a[i]=='1'||a[i]=='2'||a[i]=='3'||a[i]=='4'||a[i]=='5'||a[i]=='6'||a[i]=='7'||a[i]=='8'||a[i]=='9'||a[i]=='0')\n        {\n\n            printf(\"It Contains only numbers\");\n\n        }\n        else\n        {\n            printf(\"\\n error occured in %c position %d:\\nEnter a valid number:\",a[i],i);\n            goto replay;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12263798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4f423986f74273f4d35637ee86d698?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/12263798/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 58528656, "answer_count": 1, "score": -1, "last_activity_date": 1571859032, "creation_date": 1571842051, "question_id": 58525531, "link": "https://stackoverflow.com/questions/58525531/validating-input-for-numbers-in-c", "title": "Validating input for numbers in c", "body": "<p>how can I validate user input for only entering numbers, if user entered something (string, character, etc) instead of number, it should show the error in.   c programming language</p>\n"}, {"tags": ["c", "macos", "unix", "valgrind"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1571841051, "post_id": 58525060, "comment_id": 103375225, "body": "That&#39;s <i>weird</i>... What macOS version?"}, {"owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 2, "creation_date": 1571841411, "post_id": 58525060, "comment_id": 103375441, "body": "Added to the post"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571842095, "post_id": 58525060, "comment_id": 103375797, "body": "OT:  <code>getpgid()</code> returns <code>pid_t</code>, not <code>int</code>.  If <code>pid_t</code> is not really an <code>int</code>, you might be losing information - or wind up with negative &quot;process ids&quot;."}, {"owner": {"reputation": 291, "user_id": 10038206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a163c49db039b5a7c35b81f00e524e?s=128&d=identicon&r=PG&f=1", "display_name": "Topher", "link": "https://stackoverflow.com/users/10038206/topher"}, "edited": false, "score": 0, "creation_date": 1571842235, "post_id": 58525060, "comment_id": 103375867, "body": "Why not getpgrp?"}, {"owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "reply_to_user": {"reputation": 291, "user_id": 10038206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a163c49db039b5a7c35b81f00e524e?s=128&d=identicon&r=PG&f=1", "display_name": "Topher", "link": "https://stackoverflow.com/users/10038206/topher"}, "edited": false, "score": 0, "creation_date": 1571842454, "post_id": 58525060, "comment_id": 103375991, "body": "@Topher Yes, <code>getpgrp</code> is available. @AndrewHenle The variable type do not change anything. pid_t can be an int typedef so..."}, {"owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "reply_to_user": {"reputation": 291, "user_id": 10038206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a163c49db039b5a7c35b81f00e524e?s=128&d=identicon&r=PG&f=1", "display_name": "Topher", "link": "https://stackoverflow.com/users/10038206/topher"}, "edited": false, "score": 0, "creation_date": 1571842538, "post_id": 58525060, "comment_id": 103376048, "body": "@Topher I can&#39;t use getpgrp, it&#39;s for a bigger program where I fork, and I need to get the pgid from the parent process..."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1571844504, "post_id": 58525060, "comment_id": 103377104, "body": "@rSim <code>pid_t</code> is not limited to an <code>int</code>. <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_types.h.html#tag_13_67\" rel=\"nofollow noreferrer\">POSIX specifies only this</a>: &quot;The implementation shall support one or more programming environments in which the widths of <code>blksize_t</code>, <code>pid_t</code>, <code>size_t</code>, <code>ssize_t</code>, and <code>suseconds_t</code> are no greater than the width of type long.&quot;  Note well that whether a <code>pid_t</code> is signed or unsigned is unspecified."}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "is_accepted": true, "score": 1, "last_activity_date": 1571845775, "creation_date": 1571845775, "answer_id": 58526688, "question_id": 58525060, "link": "https://stackoverflow.com/questions/58525060/getpgid-not-implemented-with-valgrind/58526688#58526688", "title": "getpgid not implemented with valgrind", "body": "<p>It seem that valgrind could have some trouble to perform some syscall.</p>\n\n<p>In the valgrind trace, I'm having :</p>\n\n<pre><code>--17135-- WARNING: unhandled amd64-darwin syscall: unix:151\n--17135-- You may be able to write your own handler.\n--17135-- Read the file README_MISSING_SYSCALL_OR_IOCTL.\n--17135-- Nevertheless we consider this a bug.  Please report\n--17135-- it at http://valgrind.org/support/bug_reports.html.\n</code></pre>\n\n<p>So I need to create a wrapper for the function, and it should work.\nI will report the bug to the support.</p>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 1, "last_activity_date": 1571853457, "last_edit_date": 1571853457, "creation_date": 1571853076, "answer_id": 58528457, "question_id": 58525060, "link": "https://stackoverflow.com/questions/58525060/getpgid-not-implemented-with-valgrind/58528457#58528457", "title": "getpgid not implemented with valgrind", "body": "<p>You shouldn't test via valgrind <strong>on Mac OS X</strong> because after Sierra, it is not supported. Instead, also it is what I do, install ubuntu via an virtual machine software then run valgrind.</p>\n\n<p>macOS Mojave 10.14.6's <code>unistd.h</code> has the following part,</p>\n\n<pre><code>#if __DARWIN_UNIX03\nvoid     encrypt(char *, int) __DARWIN_ALIAS(encrypt);\n#else /* !__DARWIN_UNIX03 */\nint  encrypt(char *, int);\n#endif /* __DARWIN_UNIX03 */\nint  fchdir(int);\nlong     gethostid(void);\npid_t    getpgid(pid_t);\npid_t    getsid(pid_t);\n</code></pre>\n\n<p>Rule of thumb, always try to be portable!</p>\n\n<hr>\n\n<p>Incidentally, as @Andrew Henle mentions, <code>pid_t</code> can be of system-dependent type. But, it shouldn't be <em>unsigned type</em> to preserve portability since it can be returned as <code>-1</code> in the case of a failure. Moreover, on Mac OS X its type is <code>int</code>, as seen below</p>\n\n<pre><code>typedef int               __int32_t;\ntypedef __int32_t         __darwin_pid_t;         /* [???] process and group IDs */\ntypedef __darwin_pid_t    pid_t;\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 58526688, "answer_count": 2, "score": 7, "last_activity_date": 1571853457, "creation_date": 1571840648, "last_edit_date": 1571843358, "question_id": 58525060, "link": "https://stackoverflow.com/questions/58525060/getpgid-not-implemented-with-valgrind", "title": "getpgid not implemented with valgrind", "body": "<p>Considering this example : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint     main()\n{\n    int pgid;\n\n    if ((pgid = getpgid(0)) == -1)\n        perror(\"getpgid\");\n    else\n        printf(\"pgid : %d\\n\", pgid);\n}\n</code></pre>\n\n<p>When I'm running this program without valgrind, everything is going right, and the pgid is printed.\nWhenever I'm using valgrind, <code>perror</code> will print <code>getpgid: Function not implemented</code>.</p>\n\n<ul>\n<li><p>Is it normal that <code>getpgid</code> is <strong>not available under valgrind</strong> ? </p></li>\n<li><p>Is there any <strong>alternative to get the pgid of a specific pid</strong> (excluding\n<code>getpgrp</code>) ?</p></li>\n</ul>\n\n<p>I'm using macOS Sierra 10.12.6 and valgrind-3.15.0.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1571840349, "post_id": 58524957, "comment_id": 103374801, "body": "<code>struct PipeReadThreadData data;</code> There is no type named <code>PipeReadThreadData</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571840465, "post_id": 58524957, "comment_id": 103374867, "body": "What does pipes have to do with CreateThread? Pipes are normally used for IPC. CreateThread has a parameter that should be used for passing data to the thread. So what exactly are you trying to do here?"}, {"owner": {"reputation": 105, "user_id": 11609849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a097987ecbb2997fa21c0e44975147b?s=128&d=identicon&r=PG&f=1", "display_name": "Gunner", "link": "https://stackoverflow.com/users/11609849/gunner"}, "edited": false, "score": 0, "creation_date": 1571840499, "post_id": 58524957, "comment_id": 103374887, "body": "Thanks that did the trick"}], "answers": [{"tags": [], "owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "is_accepted": true, "score": 1, "last_activity_date": 1571840582, "creation_date": 1571840582, "answer_id": 58525034, "question_id": 58524957, "link": "https://stackoverflow.com/questions/58524957/problem-passing-data-to-thread-using-c-under-windows/58525034#58525034", "title": "Problem passing data to thread using c under windows", "body": "<p>When using a struct you need to write</p>\n\n<pre><code>struct PipeReadThreadData data;\n</code></pre>\n\n<p>or typedef the struct like so</p>\n\n<pre><code> typedef struct\n {\n    LPCWSTR pipename;\n    HANDLE handle;\n } PipeReadThreadData;\n</code></pre>\n\n<p>and then you can use it with</p>\n\n<pre><code>PipeReadThreadData data;\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 11609849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a097987ecbb2997fa21c0e44975147b?s=128&d=identicon&r=PG&f=1", "display_name": "Gunner", "link": "https://stackoverflow.com/users/11609849/gunner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 1, "closed_date": 1571866386, "accepted_answer_id": 58525034, "answer_count": 1, "score": 0, "last_activity_date": 1571840582, "creation_date": 1571840293, "question_id": 58524957, "link": "https://stackoverflow.com/questions/58524957/problem-passing-data-to-thread-using-c-under-windows", "closed_reason": "Not suitable for this site", "title": "Problem passing data to thread using c under windows", "body": "<p>I want to pass data to a thread using the CreateThread function.\nThis is all coded in a single .c file\nOutside of any function I have</p>\n\n<pre><code>struct PipeReadThreadData\n{\n   LPCWSTR pipename;\n   HANDLE handle;\n};\n</code></pre>\n\n<p>Then inside the function creating the thread I  have </p>\n\n<pre><code>PipeReadThreadData data;\n</code></pre>\n\n<p>But the compiler says </p>\n\n<pre><code>error C2065: 'PipeReadThreadData': undeclared identifier\n</code></pre>\n\n<p>Why is it an undeclared identifier?</p>\n"}, {"tags": ["c", "pointers", "memory-management", "c-strings"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571840150, "post_id": 58524850, "comment_id": 103374676, "body": "What is char **array = malloc(pow(strlen(s), 2));?!"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1571840324, "post_id": 58524850, "comment_id": 103374786, "body": "You&#39;re missing a NUL terminator for the copied strings (you&#39;re allocating <code>strlen</code> instead of <code>strlen + 1</code> for each string)... also, you should probably treat this as a <code>char *</code>, seeing as you are performing a single allocation - <code>buf + (strlen(s) + 1)</code> will mark the beginning of the second string."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 1, "creation_date": 1571840404, "post_id": 58524850, "comment_id": 103374827, "body": "@picklerick You are wrong. He needs to allocate only strlen pointers of the type char *."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1571840562, "post_id": 58524850, "comment_id": 103374926, "body": "@picklerick One more see its statement char **array = malloc(pow(strlen(s), 2)); And see the type of array."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1571840664, "post_id": 58524850, "comment_id": 103374992, "body": "@picklerick It is you who doesn not undersand the declaration. The declaration does not make any sense."}, {"owner": {"reputation": 546, "user_id": 2556381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9189a3cc00250a0a0195dc42c10a0e77?s=128&d=identicon&r=PG", "display_name": "Aaron Garton", "link": "https://stackoverflow.com/users/2556381/aaron-garton"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571841061, "post_id": 58524850, "comment_id": 103375232, "body": "@VladfromMoscow is there something wrong with the return type for <code>char **array = malloc(pow(strlen(s)+1, 2));</code>?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571841312, "post_id": 58524850, "comment_id": 103375392, "body": "@AaronGarton This entirely does not make any sense. See my answer."}], "answers": [{"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 546, "user_id": 2556381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9189a3cc00250a0a0195dc42c10a0e77?s=128&d=identicon&r=PG", "display_name": "Aaron Garton", "link": "https://stackoverflow.com/users/2556381/aaron-garton"}, "edited": false, "score": 0, "creation_date": 1571844848, "post_id": 58525189, "comment_id": 103377287, "body": "@AaronGarton - you&#39;re welcome. Please consider accepting the answer. It&#39;s the common way to say &quot;thank you&quot; on SO :)"}, {"owner": {"reputation": 546, "user_id": 2556381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9189a3cc00250a0a0195dc42c10a0e77?s=128&d=identicon&r=PG", "display_name": "Aaron Garton", "link": "https://stackoverflow.com/users/2556381/aaron-garton"}, "edited": false, "score": 0, "creation_date": 1571849927, "post_id": 58525189, "comment_id": 103379719, "body": "accepted your answer, because it fixed my problem :D but I don&#39;t think one long string is the best way to go about doing this?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 546, "user_id": 2556381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9189a3cc00250a0a0195dc42c10a0e77?s=128&d=identicon&r=PG", "display_name": "Aaron Garton", "link": "https://stackoverflow.com/users/2556381/aaron-garton"}, "edited": false, "score": 0, "creation_date": 1571851567, "post_id": 58525189, "comment_id": 103380447, "body": "@AaronGarton - I edited the answer to answer the question in your comment. I hope you will see that, in this specific case, using &quot;one long string&quot; is actually better. If the strings had to be reallocated during runtime, it might be a different matter."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 2, "last_activity_date": 1571851445, "last_edit_date": 1571851445, "creation_date": 1571841098, "answer_id": 58525189, "question_id": 58524850, "link": "https://stackoverflow.com/questions/58524850/problem-storing-strings-inside-double-pointer/58525189#58525189", "title": "Problem storing strings inside double pointer", "body": "<p>I left this as a comment, but since it might not be clear, I'll post my answer in code...</p>\n\n<p>As stated in my comment, there's no point allocating a pointer array - on a 64 bit machine, that would be 6 pointers, each requiring 8 bytes to point at a 7 byte long data block - <strong>a total of 104 bytes</strong> (ignoring the added allocator padding per allocation).</p>\n\n<p>Instead, <strong>a single allocation could suffice, allocating 42 bytes</strong> to contain all the \"wave\" strings and their NUL byte in a single block of memory (saving memory while improving locality).</p>\n\n<pre><code>int main(void) {\n  /* Assuming string \"hello\" */\n  const char *org = \"hello\";\n  /* Calculate length only once and store value */\n  const size_t len = strlen(org);\n  const size_t len_with_nul = len + 1;\n  /* Allocate `len` strings in a single allocation */\n  char *buf = malloc(len * len_with_nul);\n  /* Copy each string to it's place in the buffer */\n  for (size_t i = 0; i &lt; len; ++i) {\n    /* position in the buffer */\n    char *pos = buf + (i * len_with_nul);\n    /* copy the NUL as well */\n    memcpy(pos, org, len_with_nul); \n    /* Wave... */\n    pos[i] = toupper(pos[i]);\n  }\n  /* Print result */\n  for (size_t i = 0; i &lt; len; i++) {\n    char *pos = buf + (i * len_with_nul);\n    printf(\"s = %s\\n\", pos);\n  }\n  /* Free buffer */\n  free(buf);\n  return 0;\n}\n</code></pre>\n\n<p><strong>EDIT - Why is using a single memory block better?</strong>:</p>\n\n<p>In this case we allocate a single memory \"block\" (blob / slice). This offers a number of advantages:</p>\n\n<ul>\n<li><p>We perform a single allocation and deallocation instead of a larger number of allocations and deallocations.</p>\n\n<p>This improves speed by performing less actions.</p></li>\n<li><p>We also improve memory locality, <a href=\"https://stackoverflow.com/questions/1126529/what-is-the-cost-of-an-l1-cache-miss\">which minimizes CPU cache misses and improves performance</a>.</p></li>\n<li><p>We use less memory.</p>\n\n<p>Each memory allocation comes with a price - we need a pointer to hold the memory address for the memory we allocated. A pointer \"costs\" 8 bytes on a 64bit machine and 4 bytes on a 32bit machine.</p>\n\n<p>By using a single allocation, we \"pay\" less.</p>\n\n<p>This is true even if we ignore the metadata attached to the memory block allocated (which requires memory from the memory allocator).</p></li>\n</ul>\n\n<p>I should note that C doesn't really care about the contents of a memory block, <strong>it's all zeros and ones</strong>. The meaning given to these zeros and ones is left to the developer.</p>\n\n<p>Even the <code>printf</code> function doesn't care about the contents of the memory it's reading - it simply reads the memory according to the formatting it was instructed to follow by the developer (the <code>%s</code> informs the function that the memory relates to a NUL terminated string).</p>\n\n<p>There are some concerns about memory alignment which are CPU and system specific - but these don't apply to single byte strings. They apply to multi-byte types (such as <code>short</code>, <code>int</code>, and <code>long</code>). So we don't need to worry about them in this example.</p>\n\n<p>In this sense, it basically means that <strong>the developer is free to manage the memory and the contents as they see fit</strong> (putting aside memory alignment).</p>\n\n<p>This is not to say that it's always better to allocate a single block of memory (if you need to use <code>realloc</code>, you might prefer smaller chunks)... but usually a single block of memory is better.</p>\n"}, {"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1571841661, "post_id": 58525261, "comment_id": 103375572, "body": "I upvoted the answer (even if <a href=\"https://stackoverflow.com/a/58525189/4025095\">I would have avoided the multiple allocation sequence</a>)... however: I would recommend to store the result for <code>strlen</code> in a variable. It&#39;s true that the compiler usually performs the optimization, but still, it&#39;s good practice to avoid repeated function calls when possible."}, {"owner": {"reputation": 546, "user_id": 2556381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9189a3cc00250a0a0195dc42c10a0e77?s=128&d=identicon&r=PG", "display_name": "Aaron Garton", "link": "https://stackoverflow.com/users/2556381/aaron-garton"}, "edited": false, "score": 0, "creation_date": 1571842692, "post_id": 58525261, "comment_id": 103376143, "body": "Thanks for the answer, works perfectly! I was a little confused about how to do the allocation for a double pointer. And as for using <code>size_t</code>, is it always better to use <code>size_t</code> over <code>int</code>?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 546, "user_id": 2556381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9189a3cc00250a0a0195dc42c10a0e77?s=128&d=identicon&r=PG", "display_name": "Aaron Garton", "link": "https://stackoverflow.com/users/2556381/aaron-garton"}, "edited": false, "score": 0, "creation_date": 1571842874, "post_id": 58525261, "comment_id": 103376246, "body": "@AaronGarton the return type of the function strlen is size_t. An object of the type int can be too small to hold any value of an object of the type size_t."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1571842054, "last_edit_date": 1571842054, "creation_date": 1571841276, "answer_id": 58525261, "question_id": 58524850, "link": "https://stackoverflow.com/questions/58524850/problem-storing-strings-inside-double-pointer/58525261#58525261", "title": "Problem storing strings inside double pointer", "body": "<p>For starters it is unclear why you are allocating dynamically memory for the string literal \"hello\". </p>\n\n<pre><code>char *s = malloc(6);\nstrcpy(s, \"hello\");\n</code></pre>\n\n<p>It does not make any sense.</p>\n\n<p>Just write</p>\n\n<pre><code>const char *s = \"hello\";\n</code></pre>\n\n<p>This declaration</p>\n\n<pre><code>char **array = malloc(pow(strlen(s), 2));\n</code></pre>\n\n<p>also does not make sense. What you need is the following.</p>\n\n<pre><code>size_t n = strlen( s );\n\nchar **array = malloc( n * sizeof( char * ) );\nfor ( size_t i = 0; i &lt; n; i++ )\n{\n    array[i] = malloc( n + 1 );\n} \n</code></pre>\n\n<p>The function <code>wave</code> can be defined the following way</p>\n\n<pre><code>void wave( const char *s, char **array )\n{\n    size_t n = strlen( s );\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        strcpy( array[i], s );\n        array[i][i] = toupper( ( unsigned char )s[i] );\n    }\n}\n</code></pre>\n\n<p>and then in main after the function call</p>\n\n<pre><code>for ( size_t i = 0; i &lt; n; i++ )\n{\n    puts( array[i] );\n}\n\nfor ( size_t i = 0; i &lt; n; i++ ) free( array[i] );\nfree( array );\n</code></pre>\n\n<p>Here is the full program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid wave( const char *s, char **array )\n{\n    size_t n = strlen( s );\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        strcpy( array[i], s );\n        array[i][i] = toupper( ( unsigned char )s[i] );\n    }\n}\n\nint main(void) \n{\n    const char *s = \"hello\";\n    size_t n = strlen( s );\n\n    char **array = malloc( n * sizeof( char * ) );\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        array[i] = malloc( n + 1 );\n    }\n\n    wave( s, array );\n\n    for ( size_t i = 0; i &lt; n; i++ )\n    {\n        puts( array[i] );\n    }\n\n    for ( size_t i = 0; i &lt; n; i++ ) free( array[i] );\n    free( array );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>Hello\nhEllo\nheLlo\nhelLo\nhellO\n</code></pre>\n"}], "owner": {"reputation": 546, "user_id": 2556381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9189a3cc00250a0a0195dc42c10a0e77?s=128&d=identicon&r=PG", "display_name": "Aaron Garton", "link": "https://stackoverflow.com/users/2556381/aaron-garton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 58525189, "answer_count": 2, "score": 1, "last_activity_date": 1571851445, "creation_date": 1571839960, "last_edit_date": 1571842888, "question_id": 58524850, "link": "https://stackoverflow.com/questions/58524850/problem-storing-strings-inside-double-pointer", "title": "Problem storing strings inside double pointer", "body": "<p>I've been doing this <a href=\"https://www.codewars.com/kata/58f5c63f1e26ecda7e000029\" rel=\"nofollow noreferrer\">code wars challenge</a> in which you have to take a string, and capitalize each letter, forming a Mexican wave-looking array of strings. For example, an input string like</p>\n\n<p><code>hello</code></p>\n\n<p>will result in <code>[\"Hello\", \"hEllo\", \"heLlo\", \"helLo\", \"hellO\"]</code></p>\n\n<p>I managed to complete it in JavaScript, and decided to attempt it in C. The actual code itself <em>is</em> working, as it prints the correct output, but the problem I am having is actually storing the string inside a double pointer.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid wave(char *s, char **array);\n\nint main(void)\n{\n    char *s = malloc(6);\n    strcpy(s, \"hello\");\n\n    char **array = malloc(pow(strlen(s)+1, 2));\n\n    wave(s, array);\n\n    for (int i = 0; i &lt; strlen(s); i++)\n    {\n        printf(\"s = %s\\n\", array[i]);\n    }\n\n    free(array);\n    free(s);\n\n    return 0;\n}\n\nvoid wave(char *s, char **array)\n{\n    char s2[strlen(s)+1];\n\n    for (int i = 0; i &lt; strlen(s); i++)\n    {\n        s[i] = tolower(s[i]);\n    }\n\n    int array_index = 0;\n\n    for (int i = 0; i &lt; strlen(s); i++)\n    {\n        strcpy(s2, s);\n\n        if (s[i] != ' ')\n        {\n\n            s2[i] = toupper(s2[i]); // Printing out `s2` here results in the correct output\n            array[array_index++] = s2; // Adding it here works, but when trying to access it outside of this function, it gives the incorrect output\n        }\n    }\n}\n</code></pre>\n\n<p>When printing the string inside the function, I get the following output (which is correct):</p>\n\n<pre><code>Hello\nhEllo\nheLlo\nhelLo\nhellO\n</code></pre>\n\n<p>But when I try to print it out inside the <code>main()</code> function, I get the following:</p>\n\n<pre><code>s = hellO\ns = hellO\ns = hellO\ns = hellO\ns = hellO\n</code></pre>\n\n<p><br />\nIt seems like it is adding/accessing only the last string in the array. I cannot understand why accessing the element inside the <code>wave()</code> function works, but accessing it outside of that function doesn't.</p>\n\n<p>I've had this problem twice before, both in <code>C</code> and <code>C++</code>, and have been unable to solve it, and it is really annoying me.</p>\n"}, {"tags": ["c", "linux", "ubuntu", "unix"], "comments": [{"owner": {"reputation": 715, "user_id": 9808614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6c3462738284986bc8fa1d18ef30e3?s=128&d=identicon&r=PG", "display_name": "OrdoFlammae", "link": "https://stackoverflow.com/users/9808614/ordoflammae"}, "edited": false, "score": 3, "creation_date": 1571839991, "post_id": 58524847, "comment_id": 103374575, "body": "What is happening that is wrong? Please include more detail about what the code actually does, versus what it should do."}, {"owner": {"reputation": 1, "user_id": 12263600, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gBJtzs3OCpk/AAAAAAAAAAI/AAAAAAAAAEA/jTHGxnsl880/photo.jpg?sz=128", "display_name": "HIP HOP", "link": "https://stackoverflow.com/users/12263600/hip-hop"}, "reply_to_user": {"reputation": 715, "user_id": 9808614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6c3462738284986bc8fa1d18ef30e3?s=128&d=identicon&r=PG", "display_name": "OrdoFlammae", "link": "https://stackoverflow.com/users/9808614/ordoflammae"}, "edited": false, "score": 0, "creation_date": 1571840584, "post_id": 58524847, "comment_id": 103374945, "body": "The first prog should send even numbers , second odd numbers , and third should receive and add this numbers together (sum). The first and second programs seem to perform their task but the third is not and freezes."}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1571840586, "post_id": 58524847, "comment_id": 103374947, "body": "Yes there is a problem in prog3, you should put a pointer to a instead of a in the read function."}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1571840654, "post_id": 58524847, "comment_id": 103374986, "body": "And this is actually a problem in prog1 and 2 as well, just read the function description. <a href=\"https://linux.die.net/man/2/write\" rel=\"nofollow noreferrer\">linux.die.net/man/2/write</a>"}, {"owner": {"reputation": 1, "user_id": 12263600, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gBJtzs3OCpk/AAAAAAAAAAI/AAAAAAAAAEA/jTHGxnsl880/photo.jpg?sz=128", "display_name": "HIP HOP", "link": "https://stackoverflow.com/users/12263600/hip-hop"}, "edited": false, "score": 0, "creation_date": 1571840964, "post_id": 58524847, "comment_id": 103375177, "body": "descriptor = open(fifo, O_RDONLY);         read(descriptor,*a, sizeof(a));         close(descriptor);         descriptor = open(fifo, O_RDONLY);         read(descriptor,*b, sizeof(b));         close(descriptor);         printf(&quot;Sum : %d&quot;,a+b);         i++;"}, {"owner": {"reputation": 1, "user_id": 12263600, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gBJtzs3OCpk/AAAAAAAAAAI/AAAAAAAAAEA/jTHGxnsl880/photo.jpg?sz=128", "display_name": "HIP HOP", "link": "https://stackoverflow.com/users/12263600/hip-hop"}, "edited": false, "score": 0, "creation_date": 1571841025, "post_id": 58524847, "comment_id": 103375214, "body": "in this  way or no ?"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1571842001, "post_id": 58524847, "comment_id": 103375751, "body": "@HIPHOP Please <a href=\"https://stackoverflow.com/posts/58524847/edit\">edit</a> your question and add all requested information or clarification there instead of writing comments."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1571842535, "post_id": 58524847, "comment_id": 103376046, "body": "If you want to write the binary integer values in prog 1 and 2 you should use <code>write(descriptor, &amp;b, sizeof(b));</code>. Your current program would interpret the number stored in <code>b</code> as an address and read from this address one byte more than the size of an <code>int</code>. This is undefined behavior. Your program will send garbage data or may even crash.  Some errors in your code should produce compiler warnings. Maybe you have to enable warnings. Please fix all warnings."}, {"owner": {"reputation": 1, "user_id": 12263600, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gBJtzs3OCpk/AAAAAAAAAAI/AAAAAAAAAEA/jTHGxnsl880/photo.jpg?sz=128", "display_name": "HIP HOP", "link": "https://stackoverflow.com/users/12263600/hip-hop"}, "edited": false, "score": 0, "creation_date": 1571843261, "post_id": 58524847, "comment_id": 103376434, "body": "i did as you said , but the third program still does not display anything,now i change code in our question"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1571843924, "post_id": 58524847, "comment_id": 103376802, "body": "You had the same error in prog3. Now you use uninitialized pointers <code>a</code> and <code>b</code> in prog3. Don&#39;t use <code>sizeof(b)+1</code>. This will also read a byte after the end of the memory that holds variable <code>b</code>. Compare with the code in my previous comment. <b>BTW:</b> There is no guarantee that prog3 will read one value from prog1 and one value from prog2. It may as well happen that e.g. prog1 writes all values first then prog2 writes all values."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571847800, "post_id": 58524847, "comment_id": 103378757, "body": "the first program causes the compiler to output: &quot;untitled.c:34:2: warning: \u2018descriptor\u2019 is used uninitialized in this function [-Wuninitialized]&quot;   Don&#39;t expect your code to work when it does not cleanly compile."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571869583, "post_id": 58524847, "comment_id": 103387219, "body": "OT: for ease of readability and understanding: 1) consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571869650, "post_id": 58524847, "comment_id": 103387235, "body": "in prog3, regarding: <code>int *a;         int *b;</code>   these declare pointers to <code>int</code>, but no where in your program do you actually point those pointers to memory that your program owns"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571869767, "post_id": 58524847, "comment_id": 103387262, "body": "when compiling, always enable the warnings, then fix those warnings.  ( for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std-gnu11</code> )  Note: other compilers use different options to produce the same results"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571870127, "post_id": 58524847, "comment_id": 103387339, "body": "Note that prog3 fails to close and delete the FIFO after reading all the data."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571870247, "post_id": 58524847, "comment_id": 103387365, "body": "strongly suggest reading all the data into two arrays in prog3, then walking through those arrays, summing and displaying the values"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571870372, "post_id": 58524847, "comment_id": 103387387, "body": "individual programs run asynchronously, so how is prog3 expected to differentiate the data when it does not even check to see which (odd/even) program a specific data comes from?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571870499, "post_id": 58524847, "comment_id": 103387419, "body": "Please, when changing the code in the question, always include a &#39;edit&#39; so we know what was changed"}], "answers": [{"tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": false, "score": 0, "last_activity_date": 1571994864, "creation_date": 1571994864, "answer_id": 58555553, "question_id": 58524847, "link": "https://stackoverflow.com/questions/58524847/communicate-over-the-fifo-queue-linux/58555553#58555553", "title": "Communicate over the fifo queue linux", "body": "<p>Apart from errors using correct address and size of the data you want to read, the main error is that you should not repeatedly open and close the FIFO in the loop.</p>\n\n<p>Opening a FIFO for reading or writing will block until the other end is also opened. So both prog1 and prog2 will wait until prog3 opens the FIFO for reading, and prog3 will wait until at least one of prog1 and prog2 opens the FIFO for writing.</p>\n\n<p>Closing the FIFO on the writing end will cause an EOF condition on the reading end. Closing the FIFO on the reading end will cause a \"broken pipe\" error on the writing end.</p>\n\n<p>The programs also lack error handling. <code>mkfifo</code>, <code>open</code>, <code>read</code>, <code>write</code>, <code>close</code> may return an error, <code>read</code> and <code>write</code> may also return a number of bytes less than what you wanted to read or write. This will probably not happen with your small amount of data in your example, but you will most probably notice this when you try to transfer large amounts of data.</p>\n\n<p>Here are improved versions of your programs:</p>\n\n<p>prog1</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid prog1(char *fifo)\n{\n    int descriptor;\n    int a=0;\n    int i=0;\n    descriptor = open(fifo, O_WRONLY);\n    while (i!=10)\n    {\n\n        a+=2;\n        write(descriptor,&amp;a, sizeof(a));\n        printf(\"Even number %d : %d\\n\", i, a);\n        i++;\n    }\n    close(descriptor);\n}\n\nint main(void)\n{\n    char * fifo = \"/tmp/myfifo_file\";\n    mkfifo(fifo, 0666);\n    prog1(fifo);\n    return 0;\n}\n</code></pre>\n\n<p>prog2</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\nvoid prog2(char *fifo)\n{\n    int descriptor;\n    int b=1;\n    int i=0;\n\n    descriptor = open(fifo, O_WRONLY);\n\n    while (i!=10)\n    {\n        write(descriptor, &amp;b, sizeof(b));\n        printf(\"Odd number %d: %d\\n\", i, b);\n        b+=2;\n        i++;\n    }\n    close(descriptor);\n}\n\nint main(void)\n{\n    char * fifo = \"/tmp/myfifo_file\";\n    mkfifo(fifo, 0666);\n    prog2(fifo);\n    return 0;\n}\n</code></pre>\n\n<p>prog3</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid prog3(char *fifo)\n{\n    int descriptor;\n    int a;\n    int b;\n    int i=0;\n\n    descriptor = open(fifo, O_RDONLY);\n\n    while (i!=10)\n    {\n        read(descriptor,&amp;a, sizeof(a));\n        read(descriptor,&amp;b, sizeof(b));\n        printf(\"Sum %d: %d + %d = %d\\n\", i, a, b, a+b);\n        i++;\n    }\n\n    close(descriptor);\n}\n\nint main(void)\n{\n    char * fifo = \"/tmp/myfifo_file\";\n    mkfifo(fifo, 0666);\n    prog3(fifo);\n    return 0;\n}\n</code></pre>\n\n<p>When running the programs I get this (varying) output:</p>\n\n<pre><code>$ ./prog1&amp;./prog2&amp;\n[1] 8410\n[2] 8411\n$ ./prog3         \nSum 0: 1 + 2 = 3\nOdd number 0: 1\nEven number 0 : 2\nOdd number 1: 3\nSum 1: 3 + 4 = 7\nEven number 1 : 4\nOdd number 2: 5\nSum 2: 5 + 6 = 11\nOdd number 3: 7\nEven number 2 : 6\nOdd number 4: 9\nEven number 3 : 8\nSum 3: 7 + 9 = 16\nOdd number 5: 11\nEven number 4 : 10\nOdd number 6: 13\nSum 4: 8 + 11 = 19\nEven number 5 : 12\nOdd number 7: 15\nSum 5: 10 + 13 = 23\nEven number 6 : 14\nOdd number 8: 17\nSum 6: 12 + 15 = 27\nOdd number 9: 19\nEven number 7 : 16\nSum 7: 14 + 17 = 31\nEven number 8 : 18\nSum 8: 16 + 19 = 35\nEven number 9 : 20\nSum 9: 18 + 20 = 38\n[2]  + 8411 done       ./prog2\n[1]  + 8410 done       ./prog1\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12263600, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gBJtzs3OCpk/AAAAAAAAAAI/AAAAAAAAAEA/jTHGxnsl880/photo.jpg?sz=128", "display_name": "HIP HOP", "link": "https://stackoverflow.com/users/12263600/hip-hop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571994864, "creation_date": 1571839943, "last_edit_date": 1571843463, "question_id": 58524847, "link": "https://stackoverflow.com/questions/58524847/communicate-over-the-fifo-queue-linux", "title": "Communicate over the fifo queue linux", "body": "<p>This is our task : Write three programs that communicate over the fifo queue. The first program will send the even numbers, the second program will send the odd numbers, and the third program will receive\nthe numbers and add them together. All processes should display the results of their work on the\nscreen.\nI tried to solve it ,but my code is not working properly, maybe problem in 3 program , please help.\nThe first prog should send even numbers , second odd numbers , and third should receive and add this numbers together (sum). The first and second programs seem to perform their task but the third is not and freezes\nMy code:</p>\n\n<p>//1 program</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid prog1(int descriptor,char *fifo)\n{\n\n        int a=0;\n        int i=0;\nwhile (i!=10)\n    {\n\n            a+=2;\n        descriptor = open(fifo, O_WRONLY);\n        write(descriptor,&amp;a, sizeof(a)+1);\n        puts(\"\");\n  printf(\" Even number : %d\",a);\n        close(descriptor);\n        i++;\n\n    }\n}\nint main()\n{\n    int descriptor;\n    char * fifo = \"/tmp/myfifo_file\";\n   mkfifo(fifo, 0666);\n prog1(descriptor,fifo);\n    return 0;\n}\n</code></pre>\n\n<p>//2 program</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\nvoid prog2(int descriptor,char *fifo)\n{\n\n        int b=1;\n        int i=0;\n\nwhile (i!=10)\n    {\n\n\n        descriptor = open(fifo, O_WRONLY);\n        write(descriptor, &amp;b, sizeof(b)+1);\n        puts(\"\");\n        printf(\"Odd number : %d\",b);\n        b+=2;\n        close(descriptor);\n       i++;\n\n    }\n}\nint main()\n{\n    int descriptor;\n    char * fifo = \"/tmp/myfifo_file\";\n   mkfifo(fifo, 0666);\n prog2(descriptor,fifo);\n    return 0;\n}\n</code></pre>\n\n<p>//3 program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid prog3(int descriptor,char *fifo)\n{\n\n        int *a;\n        int *b;\n        int i=0;\nwhile (i!=10)\n    {\n\n\n        descriptor = open(fifo, O_RDONLY);\n        read(descriptor,a, sizeof(a));\n        close(descriptor);\n        descriptor = open(fifo, O_RDONLY);\n        read(descriptor,b, sizeof(b));\n        close(descriptor);\n        printf(\"Sum : %d\",(*a)+(*b));\n        i++;\n\n    }\n}\nint main()\n{\n    int descriptor;\n    char * fifo = \"/tmp/myfifo_file\";\n   mkfifo(fifo, 0666);\n prog3(descriptor,fifo);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571839985, "post_id": 58524810, "comment_id": 103374570, "body": "I am not sure you can read <code>\\n</code> as part of the input. Normally it is an input terminator. You can let your program loop, reading input after each action."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571840067, "post_id": 58524810, "comment_id": 103374621, "body": "It would also be a good idea to assign a file descriptor to <code>fd</code>."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571840191, "post_id": 58524810, "comment_id": 103374704, "body": "You most likely read 4k (or at least BUFFER_SIZE, or at least as much as is available) data (i.e., all of it), encounter the first newline and then throw 3.99k away upon return. Btw, if you are indeed reading text input I strongly recommend (f)scanf or fgets. Reading strings or numbers with scanf skips any whitespace including newlines which frees you from the fiddling with low-level input (and makes the program more tolerant towards the input format)."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1571840542, "post_id": 58524810, "comment_id": 103374908, "body": "@Paul of course they can read &#39;\\n&#39;; it&#39;s a common source of error, actually."}, {"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571840644, "post_id": 58524810, "comment_id": 103374982, "body": "@PaulOgilvie, can you please elaborate a bit on what you mean by &#168;let your program loop, reading input after each action.&#168;"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571840762, "post_id": 58524810, "comment_id": 103375056, "body": "@Paul and <code>fd = (opt-&gt;inputPath == NULL) ? 0 : open(opt-&gt;inputPath, O_RDONLY);</code> does assign a file descriptor, quite elegantly, although it is never checked (but since input is read from stdin anyway, there is no path name issue here)."}, {"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571840860, "post_id": 58524810, "comment_id": 103375118, "body": "@PeterA.Schneider, I\u013al keep in my the point about scanf/fgets. But at the moment I am trying to understand how I should modify the <code>ReadInputData</code> function to make the input separated by a newline and at the same time not terminate the program."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1571841132, "post_id": 58524810, "comment_id": 103375276, "body": "<code>do { ... } while(!feof(fp))</code>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1571841454, "post_id": 58524810, "comment_id": 103375460, "body": "@JL2210 There is no <code>fp</code> ;-). You&#39;ll have to check the return value of <code>read()</code> for 0."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571841603, "post_id": 58524810, "comment_id": 103375547, "body": "@PeterA.Schneider, I see...He didn&#39;t assign in his second version."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571841665, "post_id": 58524810, "comment_id": 103375576, "body": "@PeterA.Schneider, yes, you can read <code>\\n</code>, but you need a next function call to read the next line. That is what I mean with &quot;input terminator&quot;."}, {"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571842090, "post_id": 58524810, "comment_id": 103375793, "body": "@PaulOgilvie, you\u0155e right. That was a typing error. I edited the question.  A concrete answer would be very helpful."}, {"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571842562, "post_id": 58524810, "comment_id": 103376062, "body": "@PeterA.Schneider, if I check <code>read()</code> return value for 0, it only indicates the EOF. But I want the input to be separated by <code>\\n</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1571842896, "post_id": 58524810, "comment_id": 103376254, "body": "Why not simply read the input line by line with <code>fgets</code>?"}, {"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1571844377, "post_id": 58524810, "comment_id": 103377046, "body": "@interjay because I would like to read binary data as well and I suppose <code>fgets</code> is not suitable for that purpose."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1571844688, "post_id": 58524810, "comment_id": 103377213, "body": "<code>fgets</code> works just fine with binary data if it&#39;s delimited by <code>\\n</code> (which you say in your question). Though delimiting binary data with newlines is somewhat strange and limiting because the data itself won&#39;t be able to hold <code>\\n</code> characters."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571870860, "post_id": 58524810, "comment_id": 103387505, "body": "regarding: <code>opt = GetDefaultOptions();</code>   The variable <code>opt</code> is not defined as a pointer and that is ALL that can get assigned to <code>opt</code> in this manner.  Also, this seems to be a <code>java</code> function, not a <code>c</code> function"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571871116, "post_id": 58524810, "comment_id": 103387561, "body": "When asking a question about a run-time problem, as this question is doing, please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can duplicate the problem and help you debug it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571871325, "post_id": 58524810, "comment_id": 103387608, "body": "regarding <code>for (bytesReadTotal = 0;; bytesReadTotal += bytesRead) {</code>  strongly suggest using the results of the call to <code>read()</code> as the conditional in a <code>while()</code> loop to control the reading"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571871624, "post_id": 58524810, "comment_id": 103387673, "body": "regarding: <code>bytesRead = read(fd, startOfBlock, BUFFER_SIZE);</code>   The second parameter should point to where the read bytes are placed.  However, <code>startOfBlock</code> is declared a <code>size_t</code>, not a pointer"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1571905566, "post_id": 58524810, "comment_id": 103396731, "body": "I think you need to show your <code>main</code> function with the <code>while(1)</code> loop because, if your <code>exit(0)</code> is inside it, that&#39;ll be the problem. NB You don&#39;t need to call <code>exit</code> from <code>main</code>, just return the value you want."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1571909449, "post_id": 58524810, "comment_id": 103398810, "body": "Perhaps you want to step back and reconsider your choice of IO APIs. <code>&lt;stdio.h&gt;</code> exists for a reason. You might just as well use it."}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": true, "score": 1, "last_activity_date": 1571908806, "last_edit_date": 1571908806, "creation_date": 1571906758, "answer_id": 58537560, "question_id": 58524810, "link": "https://stackoverflow.com/questions/58524810/how-to-make-a-c-program-execute-continuously-while-accepting-input-from-stdin/58537560#58537560", "title": "How to make a C program execute continuously while accepting input from stdin?", "body": "<p>There are quite a lot of problems with the code in <code>ReadInputData</code>. The biggest one is that your input is not preserved between calls. <code>read</code> will get all the data available to it (up to the count you pass in). So if there happens to be two lines available, <code>ReadInputData</code> will get both of them into <code>tmpBuffer</code>. You save the first one and the second is discarded when <code>tmpBuffer</code> goes out of scope. </p>\n\n<p>You need a buffer that is preserved across calls.</p>\n\n<p>Another problem is this test:</p>\n\n<pre><code>else if (bytesReadTotal &gt; DMTXWRITE_BUFFER_SIZE)\n</code></pre>\n\n<p>if <code>DMTXWRITE_BUFFER_SIZE</code> is quite small such that the first two lines added together are greater than this, there will be a fatal error. I'm pretty sure you really need something like:</p>\n\n<pre><code>if (bytesReadTotal == BUFFER_SIZE)\n{\n    FatalError(EX_DATAERR, _(\"Message to be encoded is too large\"));\n}\nbytesRead = read(fd, startOfBlock, min(DMTXWRITE_BUFFER_SIZE BUFFER_SIZE, BUFFER_SIZE - bytesReadTotal));\n\n</code></pre>\n\n<p>i.e. you need to be sure there is space in the buffer <em>before</em> you do the read. Also, there's no point in reading more than you are allowed to.</p>\n\n<hr>\n\n<p>Returning to the first problem, there are two ways you can solve this.</p>\n\n<ol>\n<li><p>Make <code>tmpBuffer</code> and <code>bytesReadTotal</code> static variables</p></li>\n<li><p>Put them in a <code>struct</code> and pass a pointer to it into the call </p></li>\n</ol>\n\n<pre><code>struct ReadBuffer\n{\n    char tmpBuffer[BUFFER_SIZE];\n    size_t bytesReadTotal;\n}\n\nint main(int argc, char *argv[])\n{\n    struct ReadBuffer buffer;\n    buffer.bytesReadTotal = 0;\n\n    // stuff \n\n    codeBufferSize = ReadInputData(codeBuffer, &amp;opt, &amp;buffer);\n\n    // stuff\n\n}\n\nstatic size_t ReadInputData(unsigned char *codeBuffer, UserOptions *opt, struct ReadBuffer *buffer)\n{\n    // stuff\n\n    startOfBlock = buffer.tmpBuffer + buffer.bytesReadTotal;\n    // and so on\n}\n\n</code></pre>\n\n<p>Then you need to add in all your code to manage the buffer and so on, but such a thing already exists in the C library, it's called a <code>FILE</code>. If you used the standard library buffered <code>FILE</code> API instead of raw Unix system calls, your life will be much easier. There's even a function (that many in comments are telling you to use, which reads and returns input up to the next <code>\\n</code>. It's called <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\">fgets()</a>.</p>\n\n<hr>\n\n<p>Just spotted another problem. You open the file each time you call <code>ReadInputData</code>. It's not a problem for <code>stdin</code> because you just use file descriptor 0. However, for any other file, you'll just read the first line each time until your process runs out of file descriptors. In my solution above, you'd have to open the file in <code>main</code> and add the file descriptor to the <code>ReadBuffer</code> struct. If you do that, you are definitely reinventing the C library <code>FILE</code>. </p>\n\n<p>Here's a rough reimplementation</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n   UserOptions opt;\n   DmtxEncode *enc;\n   unsigned char codeBuffer[BUFFER_SIZE];\n   ssize_t codeBufferSize;\n   opt = GetDefaultOptions();\n\n   FILE* input = opt-&gt;inputPath == NULL ? stdin : open(opt-&gt;inputPath, \"r\");\n   if (input == NULL)\n   {\n       // Handle the error\n   } \n\n   while(1)\n   {\n\n       /* Read input data into buffer */\n       codeBufferSize = fgets(codeBuffer, BUFFER_SIZE, input);\n       if (codeBufferSize == -1)\n       {\n           // Handfle IO error\n       }\n       else if (codeBufferSize == 0) \n       { \n           // reached end of file\n       }\n       else if (codeBuffer[codeBufferSize - 1] != '\\n')\n       {\n           // Handle input truncated because line was too long\n       }\n       else \n       { \n           //do something with the input dat\n       }\n   }\n   if (input != NULL)  \n   {\n       fclose(input);\n   }\n}\n\n\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 58537560, "answer_count": 1, "score": 2, "last_activity_date": 1571908806, "creation_date": 1571839847, "last_edit_date": 1571905849, "question_id": 58524810, "link": "https://stackoverflow.com/questions/58524810/how-to-make-a-c-program-execute-continuously-while-accepting-input-from-stdin", "title": "How to make a C program execute continuously while accepting input from stdin?", "body": "<p>The following is an excerpt from myprogram.c: </p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n   UserOptions opt;\n   DmtxEncode *enc;\n   unsigned char codeBuffer[BUFFER_SIZE];\n   int codeBufferSize;\n   opt = GetDefaultOptions();\n\n\n   /* Read input data into buffer */\n   codeBufferSize = ReadInputData(codeBuffer, &amp;opt);\n\n   //do something with the input data\n\n   exit(0);\n}\n\nstatic size_t ReadInputData(unsigned char *codeBuffer, UserOptions *opt)\n{\n   int fd;\n   ssize_t bytesRead;\n   size_t bytesReadTotal;\n\n   /* Open file or stdin for reading */\n   fd = (opt-&gt;inputPath == NULL) ? 0 : open(opt-&gt;inputPath, O_RDONLY);\n\n   /* Read input contents into buffer */\n   for(bytesReadTotal = 0;; bytesReadTotal += bytesRead) {\n      bytesRead = read(fd, codeBuffer + bytesReadTotal, BUFFER_SIZE);\n      if(bytesRead == 0)\n         break;\n   }\n\n   return bytesReadTotal;\n}\n</code></pre>\n\n<p>This takes the input in the form of <code>echo 1234 | myprogram</code> and the program generates an output and terminates. </p>\n\n<p>I would like to make this program execute continuously and accept user inputs where two separate inputs are differentiated by a newline (<code>\\n</code>) character. Say for example I would like to give <code>1234 \\n 5678 \\n 6363 \\n</code> as the input. The program should first take the input <code>1234</code>, generate an output for it, then see that there is a newline and treat <code>5678</code> as the second input, generate an output and so on. </p>\n\n<p>I have tried modifying the <code>ReadInputData</code> function as follows:</p>\n\n<pre><code>static size_t ReadInputData(unsigned char *codeBuffer, UserOptions *opt) {\n    int fd;\n    ssize_t bytesRead;\n    size_t bytesReadTotal;\n    size_t startOfBlock;\n    unsigned char tmpBuffer[BUFFER_SIZE];\n\n    /* Open file or stdin for reading */\n    fd = (opt-&gt;inputPath == NULL) ? 0 : open(opt-&gt;inputPath, O_RDONLY);\n\n    for (bytesReadTotal = 0;; bytesReadTotal += bytesRead) {\n\n        startOfBlock = tmpBuffer + bytesReadTotal;\n        bytesRead = read(fd, startOfBlock, BUFFER_SIZE);\n\n        for (int i = startOfBlock; i &lt; startOfBlock + bytesRead; i++) {\n            if (tmpBuffer[i] != '\\n')\n                codeBuffer[i] = tmpBuffer[i];\n            else\n                break;\n    }\n    }\n\n\n    return bytesReadTotal;\n}\n</code></pre>\n\n<p>and enclosed the workings of the <code>main</code> within a <code>while(1)</code> loop but this just produces the output for a single input and terminates the program.  </p>\n\n<p>Can someone help me figure out what I am doing wrong here?</p>\n\n<p>EDIT: According to the suggestions, I modified the <code>ReadInputData</code> function as follows:</p>\n\n<pre><code>static size_t\nReadInputData(unsigned char *codeBuffer, UserOptions *opt) {\n    int fd;\n    ssize_t bytesRead;\n    size_t bytesReadTotal;\n    unsigned char* startOfBlock;\n    unsigned char tmpBuffer[BUFFER_SIZE];\n\n    /* Open file or stdin for reading */\n    fd = (opt-&gt;inputPath == NULL) ? 0 : open(opt-&gt;inputPath, O_RDONLY);\n\n    for (bytesReadTotal = 0;; bytesReadTotal += bytesRead) {\n\n        startOfBlock = tmpBuffer + bytesReadTotal;\n        bytesRead = read(fd, startOfBlock, DMTXWRITE_BUFFER_SIZE);\n\n        if (bytesRead == 0)\n            break;\n        if (bytesRead == -1)\n            FatalError(EX_IOERR, _(\"Message read error\"));\n        else if (bytesReadTotal &gt; DMTXWRITE_BUFFER_SIZE)\n            FatalError(EX_DATAERR, _(\"Message to be encoded is too large\"));\n\n        for (int i = 0; i &lt; bytesRead; i++) {\n            if (startOfBlock[i] != '\\n')\n                codeBuffer[i] = startOfBlock[i];\n            else\n                break;\n        }\n\n    }\n</code></pre>\n\n<p>This solves the problem of newline characters but the program exits after taking one input instead of accepting continuous inputs. The contents of <code>main</code> are inside a <code>while(1)</code> loop.</p>\n\n<p>EDIT: \n<code>main</code> with while loop. No <code>exit(0)</code> present in <code>main</code>.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n   UserOptions opt;\n   DmtxEncode *enc;\n   unsigned char codeBuffer[BUFFER_SIZE];\n   int codeBufferSize;\n   opt = GetDefaultOptions();\n\n   while(1){\n\n   /* Read input data into buffer */\n   codeBufferSize = ReadInputData(codeBuffer, &amp;opt);\n\n   //do something with the input data\n\n   }\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 13306, "user_id": 162698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HnjBG.png?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/162698/rob"}, "edited": false, "score": 2, "creation_date": 1571839087, "post_id": 58524541, "comment_id": 103373990, "body": "And your question is what?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1571839151, "post_id": 58524541, "comment_id": 103374035, "body": "And what if ints are not the samesize as a pointer?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1571839174, "post_id": 58524541, "comment_id": 103374054, "body": "An <code>int</code> is not necessarily big enough to hold a pointer.  This smells like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>.  What are you <b>actually</b> trying to accomplish?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1571839280, "post_id": 58524541, "comment_id": 103374110, "body": "That you have to &quot;update the pointer during runtime&quot; is a very vague requirement. You should ask whoever gave you the task for clarification."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571840091, "post_id": 58524541, "comment_id": 103374641, "body": "Compile with all warnings enabled and consider the warnings you get as errors."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 3, "last_activity_date": 1571839161, "creation_date": 1571839161, "answer_id": 58524599, "question_id": 58524541, "link": "https://stackoverflow.com/questions/58524541/setting-an-address-directly-to-pointer-in-c/58524599#58524599", "title": "Setting an address directly to Pointer in C", "body": "<p>This here:</p>\n\n<pre><code>int add = &amp;var;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>int* add = &amp;var;\n</code></pre>\n\n<p>Otherwise the address gets truncated when you try to assign it to an <code>int</code>, which very likely is smaller than a pointer. Your compiler should give you all kinds of type mismatch/indirection level warnings.</p>\n\n<p>Also note that the correct format specifier for printing a pointer is <code>%p</code>, not <code>%d</code>.</p>\n"}], "owner": {"reputation": 83, "user_id": 4403284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/591d82cdea028924dc2174752b9ffa05?s=128&d=identicon&r=PG&f=1", "display_name": "Cool_Binami", "link": "https://stackoverflow.com/users/4403284/cool-binami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1571861820, "accepted_answer_id": 58524599, "answer_count": 1, "score": 0, "last_activity_date": 1571892777, "creation_date": 1571839007, "last_edit_date": 1571892777, "question_id": 58524541, "link": "https://stackoverflow.com/questions/58524541/setting-an-address-directly-to-pointer-in-c", "closed_reason": "Needs details or clarity", "title": "Setting an address directly to Pointer in C", "body": "<p>There is an requirment that i have to update the pointer during runtime, so written code like for checking.</p>\n\n<pre><code>int main()\n{\n    printf(\"Hello World\");\n     int *ptr = NULL;\n     int var = 10;\n     ptr = &amp;var;\n     printf (\"\\nvalue is %d\\t\", ptr);\n     printf (\"\\nvalue is %d\\t\", &amp;var);\n     printf (\"\\nvalue is %d\\t\", *ptr);\n     int add = &amp;var;\n     ptr = (int*)add;\n     printf (\"\\nvalue is %d\\t\", ptr); //printing address of var, which is expected\n     printf (\"\\nvalue is %d\\t\", *ptr); //segmentation fault in this line\n     printf (\"\\nvalue is %d\\t\", add);\n\n    return 0;\n}\n</code></pre>\n\n<p>if i print pointer, address of var was correctly present. But why *ptr gives seg fault? It should not be the value of var = 10?</p>\n"}, {"tags": ["c", "visual-studio-code", "msvc12", "vcpkg"], "comments": [{"owner": {"reputation": 100127, "user_id": 67392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e28ac250c4604a6f9d7e34705c3259?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/67392/richard"}, "edited": false, "score": 1, "creation_date": 1571838697, "post_id": 58524308, "comment_id": 103373765, "body": "What error does it give you?"}, {"owner": {"reputation": 1, "user_id": 11001709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iX2qw.jpg?s=128&g=1", "display_name": "Ragnar Lothbrok", "link": "https://stackoverflow.com/users/11001709/ragnar-lothbrok"}, "reply_to_user": {"reputation": 100127, "user_id": 67392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e28ac250c4604a6f9d7e34705c3259?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/67392/richard"}, "edited": false, "score": 0, "creation_date": 1571838998, "post_id": 58524308, "comment_id": 103373942, "body": "<code>mmapTest.c c:\\Users\\ansga\\OneDrive\\Pulpit\\notGithub\\C_tests\\mmapTest\\mm&zwnj;&#8203;apTest.c(6): fatal error C1083: Cannot open include file: &#39;mman.h&#39;: No such file or directory The terminal process terminated with exit code: 1</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1571839430, "post_id": 58524308, "comment_id": 103374218, "body": "If I am correct, <code>&#47;I</code> is to specify an include <i>path</i>. You let it end in a <code>.c</code> <i>file</i>. That is not a path."}, {"owner": {"reputation": 1, "user_id": 11001709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iX2qw.jpg?s=128&g=1", "display_name": "Ragnar Lothbrok", "link": "https://stackoverflow.com/users/11001709/ragnar-lothbrok"}, "edited": false, "score": 0, "creation_date": 1571841518, "post_id": 58524308, "comment_id": 103375495, "body": "There is a space <code>..\\\\sys\\\\ {SomeProjectFileToLink.c}</code>, but even if I end it like `\\\\sys\\` The same error still occurs, I cant figure out whats wrong here."}, {"owner": {"reputation": 100127, "user_id": 67392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e28ac250c4604a6f9d7e34705c3259?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/67392/richard"}, "edited": false, "score": 1, "creation_date": 1571842517, "post_id": 58524308, "comment_id": 103376028, "body": "You have a backslash between the <code>&#47;I</code> and the start of the path: Windows paths that include a drive letter do not start with a single backslash."}, {"owner": {"reputation": 1, "user_id": 11001709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iX2qw.jpg?s=128&g=1", "display_name": "Ragnar Lothbrok", "link": "https://stackoverflow.com/users/11001709/ragnar-lothbrok"}, "edited": false, "score": 0, "creation_date": 1571846135, "post_id": 58524308, "comment_id": 103377927, "body": "Without it its the same error unfortunately. I took that syntax from <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/i-additional-include-directories?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a> Cause local dir starts with backslash there, like in git-bash or cygwin. But I dont know what Im doing, c\\cpp with its prehistoric useless imports is such a mess."}, {"owner": {"reputation": 1, "user_id": 11001709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iX2qw.jpg?s=128&g=1", "display_name": "Ragnar Lothbrok", "link": "https://stackoverflow.com/users/11001709/ragnar-lothbrok"}, "edited": false, "score": 0, "creation_date": 1571846441, "post_id": 58524308, "comment_id": 103378101, "body": "Ok, I guess it should look like this `/IC:\\\\Users\\\\ansga\\\\vcpkg\\\\packages\\\\mman_x86-windows\\\\incl&zwnj;&#8203;ude\\\\mman\\\\sys\\` and the VSCode should be started from VS dev console, at least it works. Cheers."}], "owner": {"reputation": 1, "user_id": 11001709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iX2qw.jpg?s=128&g=1", "display_name": "Ragnar Lothbrok", "link": "https://stackoverflow.com/users/11001709/ragnar-lothbrok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571838339, "creation_date": 1571838269, "last_edit_date": 1571838339, "question_id": 58524308, "link": "https://stackoverflow.com/questions/58524308/how-to-properly-include-header-files-with-msvc-in-vscode", "title": "How to properly include header files with msvc in vscode?", "body": "<p>I did <code>vcpkg install mman.h &amp;&amp; vcpkg integrate install</code>.</p>\n\n<p>Now default C\\CPP Linter in VSCode sees that header file, but compiler doesnt.</p>\n\n<p>My tasks.json file :</p>\n\n<pre><code>{\n    \"tasks\": [\n        {\n            \"type\": \"shell\",\n            \"label\": \"cl.exe build active file\",\n            \"command\": \"cl.exe\",\n            \"args\": [\n                \"/Zi\",\n                \"/EHsc\",\n                \"/I\\\\C:\\\\Users\\\\ansga\\\\vcpkg\\\\packages\\\\mman_x86-windows\\\\include\\\\mman\\\\sys mmmapTest.c\",\n                \"/Fe:\",\n                \"${fileDirname}\\\\${fileBasenameNoExtension}.exe\",\n                \"${file}\",\n\n            ]\n        }\n    ],\n    \"version\": \"2.0.0\"\n</code></pre>\n\n<p>Still gives me error on <code>#include &lt;mman.h&gt;</code>.</p>\n"}, {"tags": ["c", "binaryfiles", "fread"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1571836486, "post_id": 58523645, "comment_id": 103372416, "body": "Search for the fourth &#39;\\n&#39; char in your file (opened in binary mode)."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 3, "creation_date": 1571836493, "post_id": 58523645, "comment_id": 103372422, "body": "<code>What am i doing wrong</code> How we will know? Please include <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ."}, {"owner": {"reputation": 1780, "user_id": 10988580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9885afb3fe782ac4c8e89a3b5904b8f6?s=128&d=identicon&r=PG&f=1", "display_name": "virolino", "link": "https://stackoverflow.com/users/10988580/virolino"}, "edited": false, "score": 0, "creation_date": 1571836508, "post_id": 58523645, "comment_id": 103372434, "body": "First, you should show us the code you are using to accomplish that task."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571838429, "post_id": 58523645, "comment_id": 103373597, "body": "<i>&quot; I tried the fread &quot;</i>: where is your code? Please read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1599, "user_id": 9948091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JANyt.png?s=128&g=1", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/9948091/hal9000"}, "edited": false, "score": 0, "creation_date": 1571850080, "post_id": 58523756, "comment_id": 103379768, "body": "No need to implent a read buffer when <code>FILE *</code> is allready buffered. Just use <code>fgetc()</code> to look for the <code>&#39;&#47;n&#39;</code>"}], "tags": [], "owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "is_accepted": false, "score": 1, "last_activity_date": 1571836528, "creation_date": 1571836528, "answer_id": 58523756, "question_id": 58523645, "link": "https://stackoverflow.com/questions/58523645/reading-from-binary-file-c-programming/58523756#58523756", "title": "Reading from binary file C programming", "body": "<p>You are actually looking for the data after the first five '\\n' characters.</p>\n\n<p>You can read the first 256 bytes of the file, and look for the new lines. if they are there, you start reading your binary data, right after the fifth occurrence. if you did not find five '\\n' character, continue reading the next chunk of 256 bytes, and look for the remaining number of '\\n' characters. The binary data shall be read after the first five lines were consumed.</p>\n\n<p>That's all</p>\n"}], "owner": {"reputation": 1, "user_id": 12188438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gjtZSGW9Itc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdYCRf6IFH4Jfaq40tvYfIe8h9zqw/photo.jpg?sz=128", "display_name": "mithlorans", "link": "https://stackoverflow.com/users/12188438/mithlorans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571837275, "creation_date": 1571836236, "last_edit_date": 1571837275, "question_id": 58523645, "link": "https://stackoverflow.com/questions/58523645/reading-from-binary-file-c-programming", "title": "Reading from binary file C programming", "body": "<p>I need to read binary which contains 3d dots coordinates but first there are 5 lines which are written to file in normal mode, so first I need to skip that part and read the dots. I tried the <code>fread</code> but failed. What am i doing wrong</p>\n\n<pre><code>VERSION 1\nDOTS x y z\nDOTCOUNT 10\nDATA binary\n33\u00cbB3\u00b3\u00caB33\u00caBf\u00e6\u00caBff\u00caBf\u00e6\u00c9B\u0161\u2122\u00caB\u0161\u00caB\u0161\u2122\u00c9B\u00cdL\u00caB\u00cd\u00cc\u00c9B\u00cdL\u00c9B\n</code></pre>\n"}, {"tags": ["c", "linux-device-driver", "kernel-module", "userspace"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1571839749, "post_id": 58523625, "comment_id": 103374420, "body": "<code>stringToSend, strlen(stringToSend));</code> - message will <b>not</b> be zero terminated. Don&#39;t use <code>%s</code> to print it. You could use <code>%.*s</code>."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "edited": false, "score": 0, "creation_date": 1571839715, "post_id": 58524616, "comment_id": 103374393, "body": "Thank you for your interraction. I will modify my module and give a try again. But I did not understand you when you told &quot; never modify message &quot;"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "edited": false, "score": 2, "creation_date": 1571839970, "post_id": 58524616, "comment_id": 103374560, "body": "@gaston: In your code, you display <code>message</code> (in <code>exer_write</code> function), but you never try to change its value."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1571841934, "post_id": 58524616, "comment_id": 103375716, "body": "The <code>%s</code> requires a null-terminated string."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 1, "last_activity_date": 1571842255, "last_edit_date": 1571842255, "creation_date": 1571839216, "answer_id": 58524616, "question_id": 58523625, "link": "https://stackoverflow.com/questions/58523625/how-to-make-communication-between-user-space-program-and-linux-kernel-module-in/58524616#58524616", "title": "How to make communication between user space program and Linux kernel module in order to print a message sent from user program to the kernel", "body": "<p>First problem: you never modify <code>message</code>.</p>\n\n<p>Then, you cannot use directly the user memory in the kernel context</p>\n\n<p>You have to translate it before: <a href=\"https://www.fsl.cs.sunysb.edu/kernel-api/re257.html\" rel=\"nofollow noreferrer\">copy_from_user</a> is for that.</p>\n\n<p>Your write function could looks like </p>\n\n<pre><code>#define MAX 256\n/* here, message is defined as 256 bytes +1 one.\n   The extra char is here to be compatible with the `%s` formatter */\nstatic char message[MAX+1] =\"\";\n\nssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset) {\n    if (length &gt; MAX)\n        return -EINVAL;\n\n    if (copy_from_user(message, buffer, length) != 0)\n        return -EFAULT;\n\n    printk(KERN_INFO \"Received %s characters from the user\\n\", message);\n    return 0;\n\n}   \n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 58524616, "answer_count": 1, "score": 3, "last_activity_date": 1571842255, "creation_date": 1571836173, "question_id": 58523625, "link": "https://stackoverflow.com/questions/58523625/how-to-make-communication-between-user-space-program-and-linux-kernel-module-in", "title": "How to make communication between user space program and Linux kernel module in order to print a message sent from user program to the kernel", "body": "<p>I have developed a simple linux kernel module which I will send to it a char message from user space program.</p>\n\n<p>This is the module : </p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/fs.h&gt;\n#include &lt;linux/device.h&gt;  \n#include &lt;linux/kernel.h&gt;\n\n\nMODULE_LICENSE(\"GPL\");      \nMODULE_AUTHOR(\"Gaston\");  \nMODULE_DESCRIPTION(\"A simple Linux char driver\"); \nMODULE_VERSION(\"0.1\"); \n\n\nstatic char message[256] = {0};\n\nssize_t exer_open(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device has been opened\\n\");\n    return 0;\n}\n\n\n\nssize_t exer_read(struct file *pfile, char __user *buffer, size_t length, loff_t *offset) {\n\n    return 0;\n}\n\n\nssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset) {\n\n    printk(KERN_INFO \"Received %s characters from the user\\n\", message);\n    return 0;\n\n}\n\n\nssize_t exer_close(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device successfully closed\\n\");\n    return 0;\n}\n\n\nstruct file_operations exer_file_operations = { \n    .owner = THIS_MODULE,\n    .open = exer_open,\n    .read = exer_read,\n    .write = exer_write,\n    .release = exer_close,\n};\n\n\nint exer_simple_module_init(void) {\n\n    printk(KERN_INFO \"Initializing the LKM\\n\");\n    register_chrdev(240, \"Simple Char Drv\", &amp;exer_file_operations);\n    return 0;\n}\n\n\n\nvoid exer_simple_module_exit(void) {\n\n    unregister_chrdev(240, \"Simple Char Drv\");\n}\n\nmodule_init(exer_simple_module_init);\nmodule_exit(exer_simple_module_exit);\n</code></pre>\n\n<p>And this my C program :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n\n\n#define BUFFER_LENGTH 256 \n\nint main()\n\n{\n\nint ret, fd;\nchar stringToSend[BUFFER_LENGTH];\n\n\nfd = open(\"/dev/char_device\", O_RDWR);             // Open the device with read/write access\n\nif (fd &lt; 0)\n    {\n            perror(\"Failed to open the device...\");\n            return errno;\n    }\n\n\nprintf(\"Type in a short string to send to the kernel module:\\n\");\n\nscanf(\"%s\", stringToSend);                // Read in a string (with spaces)\n\nprintf(\"Writing message to the device [%s].\\n\", stringToSend);\n\nret = write(fd, stringToSend, strlen(stringToSend)); // Send the string to the LKM\n\nif (ret &lt; 0)\n    {\n            perror(\"Failed to write the message to the device.\");\n            return errno;\n    }\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>After inserting the module with <code>insmod</code> , and when I execute the program and examin the kernel logs using <code>tail -f /var/log/messages</code> command I can see :</p>\n\n<pre><code>Oct  1 13:57:37 auth.info login[306]: root login on 'ttyS0'\nOct  1 13:58:22 user warn kernel: exer_simple_char_drv: loading out-of-tree module taints kernel.\nOct  1 13:58:22 user.info kernel: Initializing the LKM\nOct  1 13:58:35 user.info kernel: Device has been opened\nOct  1 13:58:39 user.info kernel: Received  characters from the user\nOct  1 13:58:39 user.info kernel: Device successfully closed\n</code></pre>\n\n<p>Same thing when I run <code>dmesg</code> :</p>\n\n<pre><code>exer_simple_char_drv: loading out-of-tree module taints kernel.\nInitializing the LKM\nDevice has been opened\nReceived  characters from the user\nDevice successfully closed\n</code></pre>\n\n<p>The problem is That I am not able to see the message that I entred manually when I executed my C program. What I am missing here please ?</p>\n"}, {"tags": ["c", "linux-kernel", "kernel-module", "rootkit"], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 78, "user_id": 12262789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7ucY.jpg?s=128&g=1", "display_name": "Caio", "link": "https://stackoverflow.com/users/12262789/caio"}, "edited": false, "score": 0, "creation_date": 1571851666, "post_id": 58525271, "comment_id": 103380484, "body": "KASLR has been around since kernel version 3.14. I&#39;ve edited my answer to mention that KASLR can be disabled at boot time using the <code>nokaslr</code> kernel command line parameter."}, {"owner": {"reputation": 567, "user_id": 9181725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b714ab602fbfa00737948f5a781fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9181725/steven"}, "edited": false, "score": 0, "creation_date": 1610862481, "post_id": 58525271, "comment_id": 116263407, "body": "If we can get the address of <code>system_wq</code> in live system, why can&#39;t we get <code>sys_call_table</code> &#39;s? Instead, we get it by adding offset to the address of <code>system_wq</code> in live system."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 567, "user_id": 9181725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b714ab602fbfa00737948f5a781fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9181725/steven"}, "edited": false, "score": 1, "creation_date": 1610888134, "post_id": 58525271, "comment_id": 116268690, "body": "@Steven The <code>sys_call_table</code> symbol is not exported to modules, but <code>system_wq</code> is."}, {"owner": {"reputation": 567, "user_id": 9181725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b714ab602fbfa00737948f5a781fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9181725/steven"}, "edited": false, "score": 0, "creation_date": 1610895019, "post_id": 58525271, "comment_id": 116270866, "body": "Got it, thanks for explain"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 4, "last_activity_date": 1571851218, "last_edit_date": 1571851218, "creation_date": 1571841301, "answer_id": 58525271, "question_id": 58523370, "link": "https://stackoverflow.com/questions/58523370/kernel-module-crash-when-reading-system-call-table-function-address/58525271#58525271", "title": "Kernel module crash when reading system call table function address", "body": "<blockquote>\n  <p>(0. Why does it crash and what can i do about it?)</p>\n</blockquote>\n\n<p>If the kernel configuration includes <code>CONFIG_RANDOMIZE_BASE=y</code>, the system call table will be at a random offset from the address specified in the System.map file due to kernel address space layout randomization (KASLR). There is not much you can do about the randomization other than use a kernel without this configuration option, or boot with the <code>nokaslr</code> option.</p>\n\n<p>You can exploit the fact that global symbols are shifted by the same random amount. If <code>sys_call_table</code> has an address of 0x0xffffffff81c002a0 in System.map, and <code>system_wq</code> has an address of 0xffffffff821204b8 in System.map, then you know that <code>sys_call_table</code> will start 0x520218 bytes before <code>system_wq</code> in the live system.</p>\n\n<blockquote>\n  <ol>\n  <li>Why does \"%p\" print a different value than that of \"%lx\"?</li>\n  </ol>\n</blockquote>\n\n<p>The kernel's default handling for <code>%p</code> with no appended modifiers for printing pointers to different things is to print a hashed version of the pointer value to avoid leaking addresses to userspace. However, <code>%lx</code> doesn't do that.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Why does \"%p\" print different values after reboots while \"%lx\" always prints the correct value?</li>\n  </ol>\n</blockquote>\n\n<p>The hashed pointer values printed by <code>%p</code> are hashed with a random key set during kernel initialization.</p>\n"}], "owner": {"reputation": 78, "user_id": 12262789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7ucY.jpg?s=128&g=1", "display_name": "Caio", "link": "https://stackoverflow.com/users/12262789/caio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 58525271, "answer_count": 1, "score": 3, "last_activity_date": 1574807480, "creation_date": 1571835378, "last_edit_date": 1574807480, "question_id": 58523370, "link": "https://stackoverflow.com/questions/58523370/kernel-module-crash-when-reading-system-call-table-function-address", "title": "Kernel module crash when reading system call table function address", "body": "<p>I am studying rootkits and trying to hook the system call table. As i can already dynamically retrieve the table's address from /boot/System.map-$(uname -r), i traced and isolated the problematic part of the code into an independent, simpler module, shown below. It tries to retrieve and display the address of the kill system call, but insmod returns \"Killed\" on module load, which is an error provoked specifically on the emphasized line.</p>\n\n<p><strong>Kernel version</strong>: 5.2.0-3-amd64</p>\n\n<p><strong>Module</strong>:</p>\n\n<pre><code>#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n\ntypedef asmlinkage int (*sys_kill_ptr_t)(pid_t, int);\n\nstatic sys_kill_ptr_t sys_kill_ptr;\nstatic unsigned long *syscall_table;\n\nstatic int __init lkm_init(void)\n{\n    printk(\"[+] LKM: init\\n\");\n\n    // System call table address in /boot/System.map-$(uname -r)\n    syscall_table = (unsigned long *)0xffffffff81c002a0;\n\n    printk(KERN_INFO \"[+] LKM: syscall_table @ 0x%p\\n\",  syscall_table);\n    printk(KERN_INFO \"[+] LKM: syscall_table @ 0x%lx\\n\", (unsigned long)syscall_table);\n\n    /* Error */\n    sys_kill_ptr = (sys_kill_ptr_t)syscall_table[__NR_kill];\n    /* Error */\n\n    printk(KERN_INFO \"[+] LKM: sys_kill_ptr @ 0x%p\\n\", (void *)sys_kill_ptr);\n\n    return 0;\n}\n\nstatic void __exit lkm_exit(void)\n{\n    printk(\"[-] LKM: exit\\n\");\n}\n\nmodule_init(lkm_init);\nmodule_exit(lkm_exit);\n</code></pre>\n\n<p><strong>dmesg</strong>:</p>\n\n<pre><code>[ 3708.343306] [+] LKM: init\n[ 3708.343309] [+] LKM: syscall_table @ 0x000000004853bd64\n[ 3708.343360] [+] LKM: syscall_table @ 0xffffffff81c002a0\n[ 3708.343407] BUG: unable to handle page fault for address: ffffffff81c00490\n[ 3708.343460] #PF: supervisor read access in kernel mode\n[ 3708.343501] #PF: error_code(0x0000) - not-present page\n</code></pre>\n\n<p><strong>dmesg</strong> (after a reboot):</p>\n\n<pre><code>[   86.822522] [+] LKM: init\n[   86.822525] [+] LKM: syscall_table @ 0x0000000000248a4b\n[   86.822644] [+] LKM: syscall_table @ 0xffffffff81c002a0\n[   86.822757] BUG: unable to handle page fault for address: ffffffff81c00490\n[   86.822903] #PF: supervisor read access in kernel mode\n[   86.823005] #PF: error_code(0x0000) - not-present page\n</code></pre>\n\n<p>I have the following questions:<br>\n (0. Why does it crash and what can i do about it?)<br>\n 1. Why does \"%p\" print a different value than that of \"%lx\"?<br>\n 2. Why does \"%p\" print different values after reboots while \"%lx\" always prints the correct value?</p>\n"}, {"tags": ["c", "arrays", "undefined-behavior"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1571834704, "post_id": 58523146, "comment_id": 103371332, "body": "You&#39;re not initializing <code>foo[4]</code> anywhere in either code snippet. Thus printing <code>foo[4]</code> is UB and you&#39;re not guaranteed any particular result."}, {"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1571834780, "post_id": 58523146, "comment_id": 103371380, "body": "@Blaze Yes, i know. But why does it cause undefined behavior either? I&#180;ve defined the array proper."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1571834820, "post_id": 58523146, "comment_id": 103371404, "body": "@RobertS are you using C or C++?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1571834837, "post_id": 58523146, "comment_id": 103371412, "body": "Unless you explicitly initialize local variables (including arrays) their values and contents will be <i>indeterminate</i>. In C++ even reading indeterminate values is undefined behavior (unlike C where it only <i>might</i> be, so please pick the language you&#39;re really programming in)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1571834840, "post_id": 58523146, "comment_id": 103371420, "body": "Yes, you&#39;ve defined an array, but you never defined it&#39;s value.  That means it has an undefined valued."}, {"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1571834928, "post_id": 58523146, "comment_id": 103371473, "body": "@GuillaumeRacicot  i have used gcc.exe, not g++.exe, so i think C. did not tested it with g++.exe btw."}, {"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571835632, "post_id": 58523146, "comment_id": 103371868, "body": "@Someprogrammerdude I did not know, that it is causing undefined behavior then. I&#180;ve thought it is just when i go over the bounds of an array. Does the same apply also to normal variables if i do not initialize them?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571836484, "post_id": 58523146, "comment_id": 103372414, "body": "Yes, it&#39;s the same for <i>all</i> local non-static variables. Global variables or local static variables will be initialized though."}, {"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571836589, "post_id": 58523146, "comment_id": 103372501, "body": "@Someprogrammerdude Thanks for the helpful informations. i really appreciate that."}], "answers": [{"comments": [{"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "edited": false, "score": 0, "creation_date": 1571835970, "post_id": 58523252, "comment_id": 103372063, "body": "I did not know this, thank you very much. Do you have any documentation reference to this? Maybe in the Standards? Does the same thing apply to normal variables, when i do not initialise them?"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 2, "last_activity_date": 1571835280, "last_edit_date": 1571835280, "creation_date": 1571834938, "answer_id": 58523252, "question_id": 58523146, "link": "https://stackoverflow.com/questions/58523146/non-initialisation-of-proper-array-element-causes-undefined-behavior/58523252#58523252", "title": "Non-initialisation of proper array element causes undefined behavior", "body": "<blockquote>\n  <p>Why is happening here undefined behavior at foo[4]? The array is\n  defined proper with 12 elements</p>\n</blockquote>\n\n<p><strong><em>It is because of out of luck in one word.</em></strong></p>\n\n<p>That is, when you define local array as below.</p>\n\n<pre><code>int foo[12];\n</code></pre>\n\n<p>each element of <code>foo</code> will be having indeterminate values until explicitly initialized.</p>\n"}, {"comments": [{"owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "edited": false, "score": 0, "creation_date": 1571835815, "post_id": 58523256, "comment_id": 103371976, "body": "Thank you very much for this information. I did not know that this is causing undefined behavior. Does the same thing apply to not initialised (normal) variables?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "edited": false, "score": 0, "creation_date": 1571842597, "post_id": 58523256, "comment_id": 103376081, "body": "There I was a time I wasn&#39;t aware of that either @RobertS, and that&#39;s why I upvoted your question! :) As for the local (the normal as you say) variables, the same philosophy applies too! Check this <a href=\"https://stackoverflow.com/questions/1597405/what-happens-to-a-declared-uninitialized-variable-in-c-does-it-have-a-value\">What happens to a declared, uninitialized variable in C? Does it have a value?</a>. There, you&#39;ll find references to the Standard too. Hope that helps!"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571843947, "post_id": 58523256, "comment_id": 103376818, "body": "In C89, an indeterminate value was defined as either an unspecified value or a trap representation, and the notion that accessing indeterminate values invoked UB was confined to a non-normative annex describing <i>general</i> constructs that may invoke UB.  Without knowing whether <code>int</code> has trap representations, one couldn&#39;t know whether the above would have defined behavior.  On platforms where <code>int</code> has no trap representations, however, the above would output Unspecified values."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 2, "last_activity_date": 1571842473, "last_edit_date": 1571842473, "creation_date": 1571834945, "answer_id": 58523256, "question_id": 58523146, "link": "https://stackoverflow.com/questions/58523146/non-initialisation-of-proper-array-element-causes-undefined-behavior/58523256#58523256", "title": "Non-initialisation of proper array element causes undefined behavior", "body": "<blockquote>\n  <p>The issue is about the output of <code>foo[4]</code>.</p>\n</blockquote>\n\n<p>Not only.</p>\n\n<p>The issue is with every <strong>uninitialized</strong> element of your array, which you later access -  those elements have <em>indeterminate</em> (garbage) values.</p>\n\n<p>You don't initialize the 5 first elements of your array, but you access them in the for loop, which invokes <em><a href=\"https://stackoverflow.com/questions/367633/what-are-all-the-common-undefined-behaviours-that-a-c-programmer-should-know-a\">Undefined Behavior</a></em> (UB).</p>\n\n<p>You were just (un)lucky that the first four elements of you array happened to be, today, in your machine, at this time, initialized to the value that you would like them to be.</p>\n\n<p>Here is the output I got by running your code <a href=\"https://wandbox.org/permlink/ZeDoQlDQHTlQCSJB\" rel=\"nofollow noreferrer\">online</a>:</p>\n\n<pre><code>foo[0] = 0\nfoo[1] = 0\nfoo[2] = 4195741\nfoo[3] = 0\nfoo[4] = 0\nfoo[5] = 6\nfoo[6] = 7\nfoo[7] = 8\nfoo[8] = 9\nfoo[9] = 10\nfoo[10] = 11\nfoo[11] = 12\n</code></pre>\n"}], "owner": {"reputation": 12724, "user_id": 12139179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50aa08ca41bf24e8478a9b4dbc067c3?s=128&d=identicon&r=PG&f=1", "display_name": "RobertS supports Monica Cellio", "link": "https://stackoverflow.com/users/12139179/roberts-supports-monica-cellio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1571835025, "accepted_answer_id": 58523256, "answer_count": 2, "score": 0, "last_activity_date": 1571842473, "creation_date": 1571834616, "last_edit_date": 1571835050, "question_id": 58523146, "link": "https://stackoverflow.com/questions/58523146/non-initialisation-of-proper-array-element-causes-undefined-behavior", "closed_reason": "Duplicate", "title": "Non-initialisation of proper array element causes undefined behavior", "body": "<p>I made some tests in VSC to check the behaviors of arrays. I\u00b4ve encountered in the output of one test the issue, that there was apparently happend undefined behavior despite the array element was defined proper, but just not initialized (with proper i mean the array element was defined with the array itself, not additionally over the bounds of the array which causes well-known undefined behavior).</p>\n\n<p>Here is my code, and the output of it below it:</p>\n\n<p>The issue is about the output of <code>foo[4]</code> which is 8 instead of 0.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nint main()\n{\n    int foo[12];\n    int i;\n\n    foo[5] = 6; \n    foo[6] = 7;\n    foo[7] = 8;\n    foo[8] = 9;\n    foo[9] = 10;\n    foo[10] = 11;\n    foo[11] = 12;\n\n    for(i=0 ; i&lt;=11 ; i++)\n    {\n        printf(\"foo[%d] = %d\\n\",i,foo[i]);\n    }\n}\n\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>foo[0] = 0\nfoo[1] = 0\nfoo[2] = 0\nfoo[3] = 0\nfoo[4] = 8\nfoo[5] = 6\nfoo[6] = 7\nfoo[7] = 8\nfoo[8] = 9\nfoo[9] = 10\nfoo[10] = 11\nfoo[11] = 12\n</code></pre>\n\n<p>Thereafter i tried it else and wanted to see if <code>foo[5]</code> might is influenced also, if i do not initialise it as well, but it wasn\u00b4t the case. <code>foo[4]</code> still had the wrong value btw:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nint main()\n{\n    int foo[12];\n    int i;\n\n    // foo[5] = 6; \n    foo[6] = 7;\n    foo[7] = 8;\n    foo[8] = 9;\n    foo[9] = 10;\n    foo[10] = 11;\n    foo[11] = 12;\n\n    for(i=0 ; i&lt;=11 ; i++)\n    {\n        printf(\"foo[%d] = %d\\n\",i,foo[i]);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>foo[0] = 0\nfoo[1] = 0\nfoo[2] = 0\nfoo[3] = 0\nfoo[4] = 8\nfoo[5] = 0\nfoo[6] = 7\nfoo[7] = 8\nfoo[8] = 9\nfoo[9] = 10\nfoo[10] = 11\nfoo[11] = 12\n</code></pre>\n\n<p>My Question is: Why is happening here undefined behavior at <code>foo[4]</code>? The array is defined proper with 12 elements.</p>\n"}, {"tags": ["c", "doxygen"], "comments": [{"owner": {"reputation": 11, "user_id": 12255529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97320956eb8729f4b6fadfc2e759897?s=128&d=identicon&r=PG&f=1", "display_name": "375", "link": "https://stackoverflow.com/users/12255529/375"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1571834185, "post_id": 58522915, "comment_id": 103371080, "body": "thanks @kiran Biradar, I don&#39;t know how to display pictures directly."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 1, "creation_date": 1571834280, "post_id": 58522915, "comment_id": 103371128, "body": "You speak of &#39;include group&#39; and &#39;src group&#39; or did you mean &#39;include folder&#39; / &#39;include directory&#39; etc? Which version of doxygen did you use? Which configuration settings did you make different from the default  settings?"}, {"owner": {"reputation": 11, "user_id": 12255529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97320956eb8729f4b6fadfc2e759897?s=128&d=identicon&r=PG&f=1", "display_name": "375", "link": "https://stackoverflow.com/users/12255529/375"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1571834593, "post_id": 58522915, "comment_id": 103371285, "body": "doxygen 1.8.11, only set SOURCE_BROWSER = YES. I just want the header files to appear separate from the source files, which makes them look clearer."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1571834674, "post_id": 58522915, "comment_id": 103371317, "body": "Are they in the same directory or in separate directories? (Note 1.8.11 is quite old December 2015, the current version is is 1.8.16)"}, {"owner": {"reputation": 11, "user_id": 12255529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97320956eb8729f4b6fadfc2e759897?s=128&d=identicon&r=PG&f=1", "display_name": "375", "link": "https://stackoverflow.com/users/12255529/375"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1571834800, "post_id": 58522915, "comment_id": 103371391, "body": "They are in separete directories. I installed it using the apt command, it seems that I need to manually install a latest version."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1571835072, "post_id": 58522915, "comment_id": 103371550, "body": "I have the files <code>aa.h</code> and <code>bb.h</code> in the <code>include</code> directory and <code>aa.c</code> and <code>bb.c</code> in the <code>src</code> directory and I see with the 1.8.11 version and with the current version the &quot;non-mixed&quot; version. My <code>Doxyfile</code>  only contains the lines: <code>RECURSIVE=YES</code> and as you use it <code>SOURCE_BROWSER=YES</code>. As you say you only changed <code>SOURCE_BROWSER</code> how can it see the files in the sub-directories, so I think either you see nothing from the sub-directories or you have some other settings set as well."}, {"owner": {"reputation": 11, "user_id": 12255529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97320956eb8729f4b6fadfc2e759897?s=128&d=identicon&r=PG&f=1", "display_name": "375", "link": "https://stackoverflow.com/users/12255529/375"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1571836511, "post_id": 58522915, "comment_id": 103372436, "body": "I mean the first picture, they are in separate directories. In my experimental program, all files are in the same directory, i don&#39;t know how to set it up to achieve this effect.I will install the latest version first and check if they are still mixed. Thanks very much, you always appear in time."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1571836964, "post_id": 58522915, "comment_id": 103372745, "body": "In the newest version they will be mixed as well, I don&#39;t know of a way doxygen could know how to place the files in a tree structure unless the tree structure is present."}, {"owner": {"reputation": 11, "user_id": 12255529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97320956eb8729f4b6fadfc2e759897?s=128&d=identicon&r=PG&f=1", "display_name": "375", "link": "https://stackoverflow.com/users/12255529/375"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1571885337, "post_id": 58522915, "comment_id": 103390140, "body": "It seems to be, maybe only through the original tree structure to achieve this effect."}], "owner": {"reputation": 11, "user_id": 12255529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97320956eb8729f4b6fadfc2e759897?s=128&d=identicon&r=PG&f=1", "display_name": "375", "link": "https://stackoverflow.com/users/12255529/375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571833917, "creation_date": 1571833782, "last_edit_date": 1571833917, "question_id": 58522915, "link": "https://stackoverflow.com/questions/58522915/confused-with-doxygen", "title": "Confused with doxygen", "body": "<p>I want to use doxygen to generate a file group. like this\uff1a\n<img src=\"https://i.stack.imgur.com/xyzpb.png\" alt=\"https://i.stack.imgur.com/xyzpb.png][1]\">]<a href=\"https://i.stack.imgur.com/xyzpb.png\" rel=\"nofollow noreferrer\">1</a></p>\n\n<p>All header files are in the include group, and all source files are in the src group. \nWhat should I do\uff1fNow all the files are mixed together\uff0c like this:\n<a href=\"https://i.stack.imgur.com/nDqMe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDqMe.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "arrays", "escaping", "printf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571833463, "post_id": 58522758, "comment_id": 103370685, "body": "Welcome to the wonderful world of <i>undefined behavior</i>. Because some of your arrays are missing the string null terminator all standard string functions handling them will go out of bounds of the arrays looking for that terminator. Going out of bounds of an array is UB."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571833537, "post_id": 58522758, "comment_id": 103370731, "body": "What&#39;s worse, you also have mismatching format specifier and argument type (with <code>printf(&quot;%s\\n&quot;, dot)</code>). That is <i>also</i> undefined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 1, "last_activity_date": 1571834290, "last_edit_date": 1571834290, "creation_date": 1571833637, "answer_id": 58522870, "question_id": 58522758, "link": "https://stackoverflow.com/questions/58522758/termination-character-in-char-array/58522870#58522870", "title": "Termination character in char array", "body": "<p>The reason why you're getting weird output is because you have undefined behavior. Functions handling strings (including printing them with the <code>%s</code> format specifier with <code>printf</code>) expect them to be null terminated, otherwise you get undefined behavior. And if that happens, no particular output is guaranteed. It can work as expected, it can give weird output, it can crash the program or do something different. Usually with printing strings, it will just go on printing until there is an access violation and it crashes, or until it encounters the next null byte (which will probably happen sooner rather than later, and until it happens, it prints \"rubbish\").</p>\n\n<p>This is also why changing seemingly unrelated things can change the UB to manifest in different ways. Due to the changes in Example 2, the stack looks differently, and when it is wrongly accessed due to UB, it will access different things. It is possible that the dot that was printed in Example 1 when you printed <code>hello</code> is actually the dot from the <code>char dot = '.';</code>.</p>\n\n<pre><code>char hello[6] = {'h', 'e', 'l', 'l', 'o', '\\n'};\n</code></pre>\n\n<p>Printing this is undefined behavior because it's not null terminated.</p>\n\n<pre><code>char bye[5] = {'b', 'y', 'e', '\\n', '\\0'};\n</code></pre>\n\n<p>You can print this one as a string, as it is null terminated.</p>\n\n<pre><code>char end[] = \"end\";\n</code></pre>\n\n<p>Since you made this with a string literal, a null-terminator is added automatically; you can print that. <code>char end[]</code> is an array of <strong>four</strong> chars: <code>'e'</code>, <code>'n'</code>, <code>'d'</code> and <code>'\\0'</code>.</p>\n\n<pre><code>char dot = '.';\n</code></pre>\n\n<p>This is one <code>char</code>, not a string. Printing that with <code>%s</code> is undefined behavior and your compiler probably warns you. Print it with <code>%c</code> instead.</p>\n\n<pre><code>char oops[] = {'o', 'o', 'p', 's'};\n</code></pre>\n\n<p>Same as the first one, the null terminator is missing, so printing it with <code>%s</code> is undefined behavior.</p>\n\n<blockquote>\n  <p>The rubbish are still there! I am feeling good for them but why the\n  end was printed twice?</p>\n</blockquote>\n\n<p>Compilers often put all strings next to each other in the program's binary. So it can happen that your <code>end</code> string will come right after the not null-terminated <code>oops</code>. So in the memory it looks like <code>oopsend\\0</code>, which is why it can print <code>\"oopsend\"</code> (or do something entirely different, as it's still undefined behavior).</p>\n\n<p>Generally there's not much to gain from wondering why UB does what it does as it is not consistent (it could do something different each time you run it, on a different compiler/machine, or work until you demonstrate it to someone else and then suddenly crash the program). Just look at it as something wrong that you should not do.</p>\n"}, {"tags": [], "owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "is_accepted": false, "score": 1, "last_activity_date": 1571833768, "creation_date": 1571833768, "answer_id": 58522908, "question_id": 58522758, "link": "https://stackoverflow.com/questions/58522758/termination-character-in-char-array/58522908#58522908", "title": "Termination character in char array", "body": "<p>Your first string array is not null terminated.</p>\n\n<pre><code> char hello[6] = {'h', 'e', 'l', 'l', 'o', '\\n'};\n</code></pre>\n\n<p>When passing a string which is not null terminated to printf (and other string related functions like strlen,strdup,strcat etc.), the behavior is undefined.\nIt may prints more bytes after your array, until it reaches a null (zero) byte (like at your case, shown as garbage), or it can crash the program.</p>\n\n<p>To fix the behavior, you need all your string arrays end with null, i.e. have '\\0' character at the end.</p>\n\n<p>If you initialize a string like this</p>\n\n<pre><code> char end[] = \"end\";\n</code></pre>\n\n<p>It is automatically null terminated and allocated the correct length to the char array declared.</p>\n"}], "owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 58522870, "answer_count": 2, "score": 2, "last_activity_date": 1571834290, "creation_date": 1571833263, "last_edit_date": 1571833470, "question_id": 58522758, "link": "https://stackoverflow.com/questions/58522758/termination-character-in-char-array", "title": "Termination character in char array", "body": "<p>I am trying to print some characters on screen. I have used a big variation of wrong implementations. For example:</p>\n\n<p><strong>Example 1:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char const *argv[]) {\n  char hello[6] = {'h', 'e', 'l', 'l', 'o', '\\n'};\n  char bye[5] = {'b', 'y', 'e', '\\n', '\\0'};\n  char end[] = \"end\";\n  char dot = '.';\n  char oops[] = {'o', 'o', 'p', 's'};\n\n  printf(\"%s\\n\", hello);\n  printf(\"%s\\n\", bye);\n  printf(\"%s\\n\", end);\n  printf(\"%s\\n\", dot);\n  printf(\"%s\\n\", oops);\n  return 0;\n}\n</code></pre>\n\n<p><strong>Output 1:</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/517Ig.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/517Ig.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Questions:</strong></p>\n\n<p>Why the <code>dot</code> character has been printed before <code>bye</code>?</p>\n\n<p>What are these rubbish after  the <code>dot</code> character?</p>\n\n<p><strong>Example 2 (<em>removed <code>dot</code> declaration/definition, print</em>):</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char const *argv[]) {\n  char hello[6] = {'h', 'e', 'l', 'l', 'o', '\\n'};\n  char bye[5] = {'b', 'y', 'e', '\\n', '\\0'};\n  char end[] = \"end\";\n  char oops[] = {'o', 'o', 'p', 's'};\n\n  printf(\"%s\\n\", hello);\n  printf(\"%s\\n\", bye);\n  printf(\"%s\\n\", end);\n  printf(\"%s\\n\", oops);\n  return 0;\n}\n</code></pre>\n\n<p><strong>Output 2:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/ixiY3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ixiY3.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Questions</strong></p>\n\n<p>The rubbish are still there! I am feeling good for them but why the <code>end</code> was printed twice?</p>\n\n<p>I managed to do it correctly using termination character whenever it should be used, but why do I have this kind of inconsistency in printing? I am coming from a Java background and I am already feeling weird!</p>\n"}, {"tags": ["c", "petsc"], "answers": [{"tags": [], "owner": {"reputation": 2359, "user_id": 3801449, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/04t78.jpg?s=128&g=1", "display_name": "Eenoku", "link": "https://stackoverflow.com/users/3801449/eenoku"}, "is_accepted": true, "score": 0, "last_activity_date": 1575294170, "creation_date": 1575294170, "answer_id": 59140179, "question_id": 58522587, "link": "https://stackoverflow.com/questions/58522587/petsc-hangs-on-matview/59140179#59140179", "title": "PETSc hangs on MatView()", "body": "<p>This was was caused, strangely enough, by some bug in MPI packages of Lubuntu 18.10. As soon as I updated to Lubuntu 19.04, the problem vanished.</p>\n\n<hr>\n\n<p><strong>TIP:</strong> Always try to run <code>make check</code> in such case. Set of test will be built and run automatically and you can observe the PETSc behavior without extensive manual trial-and-error.</p>\n"}], "owner": {"reputation": 2359, "user_id": 3801449, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/04t78.jpg?s=128&g=1", "display_name": "Eenoku", "link": "https://stackoverflow.com/users/3801449/eenoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 59140179, "answer_count": 1, "score": 0, "last_activity_date": 1575294170, "creation_date": 1571832692, "question_id": 58522587, "link": "https://stackoverflow.com/questions/58522587/petsc-hangs-on-matview", "title": "PETSc hangs on MatView()", "body": "<p>I'm trying to create and print <a href=\"https://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MATDENSE.html\" rel=\"nofollow noreferrer\">MATDENSE</a> matrix in PETSc. My MWE looks like this:</p>\n\n<pre><code>static char help[] = \"\";\n\n#include &lt;petscmat.h&gt;\n#include &lt;petscviewer.h&gt;\n\nint main(int argc,char **args)\n{\n  Mat            A;\n  PetscInt       Istart,Iend,m = 2,n = 2;\n  PetscErrorCode ierr;\n  PetscMPIInt    rank,size;\n  PetscViewer    viewer;\n\n  ierr = PetscInitialize(&amp;argc,&amp;args,(char*)0,help);if (ierr) return ierr;\n  ierr = MPI_Comm_rank(PETSC_COMM_WORLD,&amp;rank);CHKERRQ(ierr);\n  ierr = MPI_Comm_size(PETSC_COMM_WORLD,&amp;size);CHKERRQ(ierr);\n  ierr = PetscOptionsGetInt(NULL,NULL,\"-m\",&amp;m,NULL);CHKERRQ(ierr);\n  ierr = PetscOptionsGetInt(NULL,NULL,\"-n\",&amp;n,NULL);CHKERRQ(ierr);\n\n  ierr = MatCreateDense(PETSC_COMM_WORLD, PETSC_DECIDE, PETSC_DECIDE, m, n, NULL, &amp;A); CHKERRQ(ierr);\n  ierr = MatSetUp(A);CHKERRQ(ierr);\n\n  ierr = MatGetOwnershipRange(A,&amp;Istart,&amp;Iend);CHKERRQ(ierr);\n\n  MatZeroEntries(A);\n\n  printf(\"rank: %d, istart: %d, iend: %d\\n\", rank, Istart, Iend);\n\n  ierr = MatAssemblyBegin(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr);\n  ierr = MatAssemblyEnd(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr);\n\n  ierr = MatSetOption(A,MAT_SYMMETRIC,PETSC_TRUE);CHKERRQ(ierr);\n\n  ierr = PetscViewerCreate(PETSC_COMM_WORLD,&amp;viewer);CHKERRQ(ierr);\n  ierr = PetscViewerASCIIOpen(PETSC_COMM_WORLD, \"out.txt\", &amp;viewer);\n  ierr = MatView(A, viewer); CHKERRQ(ierr);\n\n  ierr = MatDestroy(&amp;A);CHKERRQ(ierr);\n  ierr = PetscViewerDestroy(&amp;viewer);CHKERRQ(ierr);\n  ierr = PetscFinalize();\n  return ierr;\n}\n</code></pre>\n\n<p>The problem is, that when running on more that one process, program suddenly hangs on <a href=\"https://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MatView.html\" rel=\"nofollow noreferrer\">MatView()</a> function instead of writing into <code>out.txt</code> file. What am I doing wrong here?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571833286, "post_id": 58522529, "comment_id": 103370581, "body": "It return the address of the first token. There is no such thing as a &quot;string&quot; typer in C. Basically in C a &quot;string&quot; is a pointer to the first character of the string."}, {"owner": {"reputation": 47, "user_id": 11384648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29985ec7196a89adeac6b764bdcf8655?s=128&d=identicon&r=PG&f=1", "display_name": "yassoplaya", "link": "https://stackoverflow.com/users/11384648/yassoplaya"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571833541, "post_id": 58522529, "comment_id": 103370734, "body": "if it returns the adress, when I try to print it without asterisk like printf(&quot;%d&quot;,ptr), why does this not give me the address?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571833672, "post_id": 58522529, "comment_id": 103370798, "body": "It kind of does, but you can&#39;t use %d for printing the value of a pointer, you need to use %p. But that&#39;s just a memory address which is not really useful to you."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1571833832, "post_id": 58522529, "comment_id": 103370891, "body": "You can use <code>%s</code> to print the value of a string."}, {"owner": {"reputation": 47, "user_id": 11384648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29985ec7196a89adeac6b764bdcf8655?s=128&d=identicon&r=PG&f=1", "display_name": "yassoplaya", "link": "https://stackoverflow.com/users/11384648/yassoplaya"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571834290, "post_id": 58522529, "comment_id": 103371132, "body": "@Jabberwocky So when I print it with a star for my undestanding it should display the value to which it is pointing right?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571834484, "post_id": 58522529, "comment_id": 103371228, "body": "@yassoplaya yes, more or less. <code>printf(&quot;%c&quot;, *ptr)</code> will print the first character of the string pointed by <code>ptr</code>. I think you need to read the chapter dealing with pointers in your beginner&#39;s C text book."}, {"owner": {"reputation": 47, "user_id": 11384648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29985ec7196a89adeac6b764bdcf8655?s=128&d=identicon&r=PG&f=1", "display_name": "yassoplaya", "link": "https://stackoverflow.com/users/11384648/yassoplaya"}, "edited": false, "score": 0, "creation_date": 1571834699, "post_id": 58522529, "comment_id": 103371330, "body": "I understood it now , thanks for explaining"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1571834064, "last_edit_date": 1571834064, "creation_date": 1571833363, "answer_id": 58522786, "question_id": 58522529, "link": "https://stackoverflow.com/questions/58522529/can-not-quite-undestand-pointers/58522786#58522786", "title": "Can not quite undestand pointers", "body": "<p>In this statement</p>\n\n<pre><code>ptr = strtok(input,\" \");\n</code></pre>\n\n<p>the function <code>strtok</code> returns a pointer to the first element of the entered string that is not equal to the balnk character. That is the function returns pointer to the first character of substring that is delimited by blank characters.</p>\n\n<p>Pay attention to that it is better to write at least like</p>\n\n<pre><code>ptr = strtok(input,\"\\n \");\n</code></pre>\n\n<p>because the function fgtes can append the new line character to the entered string.</p>\n\n<p>Consider the following demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char s[] = \"123 456 789\";\n\n    char *p = strtok( s, \" \" );\n\n    while ( p != NULL )\n    {\n        int x = atoi( p );\n        printf( \"%d\\n\", x );\n        p = strtok( NULL, \" \" );\n    }        \n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>123\n456\n789\n</code></pre>\n\n<p>After the first call of strtok the function changed the source string replacing the blank character with the terminaring zero character the following way</p>\n\n<pre><code>\"123 456 789\" ===&gt; \"123\\000456 789\"\n                       ^^^^ \n</code></pre>\n\n<p>and returned a pointer to the extracted substring <code>\"123\"</code></p>\n\n<p>in the second call the function deals with the string <code>\"456 789\"</code>.</p>\n\n<p>Again it builds a substring by inserting the terminating zero character</p>\n\n<pre><code>\"456 789\" ===&gt; \"456\\000789\"\n</code></pre>\n\n<p>and returns a pointer to the substring \"456\". And so on.</p>\n"}, {"tags": [], "owner": {"reputation": 1153, "user_id": 11345381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3322e1e397dd7f2626bd3b7280585b1?s=128&d=identicon&r=PG&f=1", "display_name": "rtoijala", "link": "https://stackoverflow.com/users/11345381/rtoijala"}, "is_accepted": true, "score": 3, "last_activity_date": 1571833372, "creation_date": 1571833372, "answer_id": 58522791, "question_id": 58522529, "link": "https://stackoverflow.com/questions/58522529/can-not-quite-undestand-pointers/58522791#58522791", "title": "Can not quite undestand pointers", "body": "<p>Lets say your input looks like this:</p>\n\n<pre><code>--------------------\n|2|3| |5| |1|2|3|\\0|\n--------------------\n</code></pre>\n\n<p>The final <code>\\0</code> is the string terminator. Everything after that is ignored.</p>\n\n<p>When you first call <code>ptr = strtok(input, \" \")</code>, <code>strtok</code> will return the location of the first character that is not a space. It will also replace the first space with <code>\\0</code>, and use an internally saved pointer to remember how far it got.\nThe  situation will look like this:</p>\n\n<pre><code>---------------------\n|2|3|\\0|5| |1|2|3|\\0|\n---------------------\n ^      ^\n ptr    internal pointer\n</code></pre>\n\n<p>So <code>ptr</code> is a pointer to a position inside the array (<code>ptr</code>'s type is <code>char*</code>).</p>\n\n<p>You then call <code>atoi(ptr)</code> to transform the string <code>23\\0</code> into an integer, <code>23</code>. This works because <code>strtok</code> replaced the space with a <code>\\0</code>.</p>\n\n<p>You then call <code>ptr = strtok(NULL, \" \")</code>. Passing <code>NULL</code> as the first parameter tells <code>strtok</code> to use its internally saved pointer as the starting point while looking for the next token. The result is this (extra space added for clarity):</p>\n\n<pre><code>-------------------------\n|2|3|\\0|5|   \\0|1|2|3|\\0|\n-------------------------\n        ^    ^\n        ptr  internal pointer\n</code></pre>\n\n<p>So what <code>atoi</code> sees is <code>5\\0</code>, i.e. the string <code>\"5\"</code>, which it translates into the integer <code>5</code>. Then you again call <code>strtok(NULL, \" \")</code>, and you get the result <code>123</code> from <code>atoi</code>. Then the following <code>strtok</code> returns <code>NULL</code>, since it finds no more tokens, and you start again with the next line of input.</p>\n"}], "owner": {"reputation": 47, "user_id": 11384648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29985ec7196a89adeac6b764bdcf8655?s=128&d=identicon&r=PG&f=1", "display_name": "yassoplaya", "link": "https://stackoverflow.com/users/11384648/yassoplaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58522791, "answer_count": 2, "score": 1, "last_activity_date": 1571834064, "creation_date": 1571832507, "last_edit_date": 1571833182, "question_id": 58522529, "link": "https://stackoverflow.com/questions/58522529/can-not-quite-undestand-pointers", "title": "Can not quite undestand pointers", "body": "<p>I am quite new to C and still got problems understanding pointers.</p>\n\n<pre><code>int main() {\n    char input[20];\n    char* ptr;\n    node* head = NULL;\n    head = (node*) malloc(sizeof(node));\n\n    do {\n        printf(\"Eingabe: \");\n        fgets(input,20,stdin);\n\n        if (*input == '0') { \n            break;\n        }\n\n        ptr = strtok(input,\" \");\n\n        while(ptr!=NULL){\n            int val = atoi(ptr);\n            push(head,val);\n            ptr = strtok(NULL, \" \");\n        }   \n\n        bubbleSort(head);\n        printf(\"Ausgabe: \");\n        printList(head);\n        printf(\"\\n\");\n\n    } while(*input != '0');\n\n    free(head);\n    return 0;\n}\n</code></pre>\n\n<p>In this code, <code>strtok(input,\" \");</code> does the function <code>strtok</code> return the address of the first token, or the value of this token?</p>\n\n<p>I was thinking that if you want the value, you have to dereference it with an asterisk. </p>\n\n<p>I tried to print the <code>ptr</code> with the star and this gives me the address of this token and not the value. This even confused me more. Can someone expalin this to me?</p>\n"}, {"tags": ["c", "windows"], "answers": [{"comments": [{"owner": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "edited": false, "score": 0, "creation_date": 1573285537, "post_id": 58770226, "comment_id": 103839779, "body": "Interesting... Your last comment <i>but after closing the file size is ok</i> sounds to me like a hint about a caching problem.  The file is cached in memory by the kernel and it looks like it&#39;s not handling concurrency properly. When you <code>close()</code> the handle, it&#39;s flushed, and thus synchronized. Just a thought though..."}, {"owner": {"reputation": 21, "user_id": 12262766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4df831c152b0dadffd948822f8ce3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user12262766", "link": "https://stackoverflow.com/users/12262766/user12262766"}, "reply_to_user": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "edited": false, "score": 0, "creation_date": 1573288931, "post_id": 58770226, "comment_id": 103840323, "body": "Yes, kernel caching is what I suspected. Maybe some other things as someone suggested in the msdn/c++ forum. I didn&#39;t get any comments or replies for some time, so I posted it here <a href=\"https://social.msdn.microsoft.com/Forums/en-US/56f3cdf6-c14b-4053-aaeb-e121706f2866/ioh-file-operations?forum=vcgeneral\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 12262766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4df831c152b0dadffd948822f8ce3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user12262766", "link": "https://stackoverflow.com/users/12262766/user12262766"}, "reply_to_user": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "edited": false, "score": 0, "creation_date": 1573290724, "post_id": 58770226, "comment_id": 103840633, "body": "Ont the other hand, the behaviour of the windows-version calling the windows functions CreatFile(),... directly might be acceptable, so perhaps it is the implementation of the posix-like functions _open, _write, ..."}, {"owner": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "edited": false, "score": 0, "creation_date": 1573305063, "post_id": 58770226, "comment_id": 103843455, "body": "Microsoft was somehow &quot;lazy&quot; with their posix conformance (just as nVidia is with OpenCL vs. Cuda) so they might have done something just for code to compile, without much optimization; but then, it should at least be mentioned in the documentation."}, {"owner": {"reputation": 21, "user_id": 12262766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4df831c152b0dadffd948822f8ce3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user12262766", "link": "https://stackoverflow.com/users/12262766/user12262766"}, "reply_to_user": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "edited": false, "score": 0, "creation_date": 1573464991, "post_id": 58770226, "comment_id": 103877975, "body": "Then again the crt is statically linked and I get the same results with different compilers. Thus it is not the crt, if it works on win7."}], "tags": [], "owner": {"reputation": 21, "user_id": 12262766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4df831c152b0dadffd948822f8ce3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user12262766", "link": "https://stackoverflow.com/users/12262766/user12262766"}, "is_accepted": true, "score": 1, "last_activity_date": 1573674667, "last_edit_date": 1573674667, "creation_date": 1573229807, "answer_id": 58770226, "question_id": 58522324, "link": "https://stackoverflow.com/questions/58522324/file-operation-error-on-windows-network-drives/58770226#58770226", "title": "File operation error on windows network drives", "body": "<p>(partial answer and more details; workaround)</p>\n\n<p>The write() operation updates the current offset in the file. If the write() starts at eof, the new offset becomes the new eof. Another file handle could have a different offset, though the file size and eof should be the same (\"global\" information) for all.\nSo if the eof is updated after the current offset is updated for the handle that is writing at eof, and if e.g. the os (or some driver) is not taking further precautions, maybe it could happen that <code>lseek(fd, 0, SEEK_CUR)</code> and <code>lseek(fd, 0, SEEK_END)</code> return different positions.</p>\n\n<p>Here is an update of the example above that shows something like this on Windows 10 and a network drive.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;io.h&gt;\n\nchar file[] = \"file.txt\";\n\nint main() {\n\n    int fd = 0;\n    int ret = 0;\n    int len = 0;\n    off_t pos = 0,\n          pos_eof = 0,\n          last_pos = 0,\n          last_eof = 0;\n    char buffer[] = \"12345\";\n    int buflen = 0;\n    int n = 0;\n\n\n    buflen = strlen(buffer);\n\n    //unlink(file);\n\n    fd = _open(file, _O_CREAT|_O_RDWR, _S_IREAD|_S_IWRITE);\n\n    ret = _close(fd);\n\n    for (n = 0; n &lt; 10000; n++)\n    {\n        fd = _open(file, _O_RDWR, _S_IREAD|_S_IWRITE);\n\n        pos_eof = _lseek(fd, 0, SEEK_END);\n        if (last_eof &gt; 0 &amp;&amp; pos_eof != last_eof) {\n            fprintf(stderr, \"ERROR [%d] eof: %ld last_eof: %ld\\n\", n, pos_eof, last_eof);\n            pos = _lseek(fd, 0, SEEK_CUR);\n            fprintf(stderr, \"CUR pos: %ld\\n\", pos);\n            exit(1);\n        }\n\n        len = _write(fd, buffer, buflen);\n\n        pos     = _lseek(fd, 0, SEEK_CUR);\n        pos_eof = _lseek(fd, 0, SEEK_END);\n\n        last_pos = pos;\n        last_eof = pos_eof;\n\n        ret = _close(fd);\n\n        if (last_pos != (n+1)*buflen) {\n            fprintf(stderr, \"ERROR [%d] pos: %ld\\n\", n, last_pos);\n            //exit(1);\n        }\n        if (last_eof != (n+1)*buflen) {\n            fprintf(stderr, \"ERROR [%d] eof: %ld (pos: %ld)\\n\", n, last_eof, last_pos);\n            //exit(1);\n        }\n    }\n\n    fprintf(stdout, \"[%d] EOF: %ld\\n\", n, last_eof);\n\n    return 0;\n}\n</code></pre>\n\n<p>Since I never get errors&lt;0 from the file operations, there is no error handling.\nIf there is no other process touching (reading) the file, it runs without errors. If there is some other process opening the file, I usually get an output like this:</p>\n\n<pre><code>ERROR [460] eof: 2295 last_eof: 2300\nCUR pos: 2295\n</code></pre>\n\n<p>If I replace the io-functions with windows CreateFile, WriteFile, SetFilePointer, ... (version (b)) it runs a lot faster, but still I get e.g.</p>\n\n<pre><code>ERROR [39] eof: 195 (pos: 200)\nERROR [40] eof: 200 last_eof: 195\nCUR pos: 200\n</code></pre>\n\n<p>The posix-like calls (that call CreateFile, WriteFile, ...) need more time, and it looks like the file is closed before eof is updated. After re-opening the last 5 bytes are gone.</p>\n\n<p>In the windows-version (b), the windows calls show a difference between the current position and eof, eof is not up-to-date, when SetFilePointer is called a 2nd time in</p>\n\n<pre><code>        pos     = SetFilePointer(hFile, 0, NULL, FILE_CURRENT); //_lseek(fd, 0, SEEK_CUR)\n        pos_eof = SetFilePointer(hFile, 0, NULL, FILE_END); //_lseek(fd, 0, SEEK_END);\n</code></pre>\n\n<p>but after closing the file size is ok.</p>\n\n<p>EDIT:\nalso posted here</p>\n\n<p><a href=\"https://social.msdn.microsoft.com/Forums/en-US/56f3cdf6-c14b-4053-aaeb-e121706f2866/ioh-file-operations?forum=vcgeneral\" rel=\"nofollow noreferrer\">https://social.msdn.microsoft.com/Forums/en-US/56f3cdf6-c14b-4053-aaeb-e121706f2866/ioh-file-operations?forum=vcgeneral</a></p>\n\n<p>UPDATE:</p>\n\n<p>As mentioned in the link above, setting the following win10 registry keys circumvent the problem (as far as I tested...):</p>\n\n<pre><code>HKLM\\system\\currentcontrolset\\services\\lanmanworkstation\\parameters\nFileInfoCacheLifetime       REG_DWORD 0x0\nFileNotFoundCacheLifetime   REG_DWORD 0x0\nDirectoryCacheLifetime      REG_DWORD 0x0\n</code></pre>\n\n<p>Looks like caching parameters for the smb protocol, have to read more about it. I believe the default values are different; it would be nice if it worked without setting these values (to zero).</p>\n\n<p>The workaround is also described here\n<a href=\"https://answers.microsoft.com/en-us/msoffice/forum/msoffice_access-mso_winother-msoversion_other/access-database-is-getting-corrupt-again-and-again/d3fcc0a2-7d35-4a09-9269-c5d93ad0031d?messageId=c9ddd419-da56-42dd-a7ca-f93d29cf2c7f&amp;page=13&amp;auth=1\" rel=\"nofollow noreferrer\">https://answers.microsoft.com/en-us/msoffice/forum/msoffice_access-mso_winother-msoversion_other/access-database-is-getting-corrupt-again-and-again/d3fcc0a2-7d35-4a09-9269-c5d93ad0031d?messageId=c9ddd419-da56-42dd-a7ca-f93d29cf2c7f&amp;page=13&amp;auth=1</a>\n(a bug in the leasing mode in Windows 10 affects Access Database)</p>\n\n<p>INFO:</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-7/ff686200(v=ws.10)\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-7/ff686200(v=ws.10)</a></p>\n"}], "owner": {"reputation": 21, "user_id": 12262766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4df831c152b0dadffd948822f8ce3ae?s=128&d=identicon&r=PG&f=1", "display_name": "user12262766", "link": "https://stackoverflow.com/users/12262766/user12262766"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 58770226, "answer_count": 1, "score": 1, "last_activity_date": 1573674667, "creation_date": 1571831750, "last_edit_date": 1572600242, "question_id": 58522324, "link": "https://stackoverflow.com/questions/58522324/file-operation-error-on-windows-network-drives", "title": "File operation error on windows network drives", "body": "<p>Recently I have problems with low-level file oprations (in old legacy code)</p>\n\n<pre><code>fd = open(file, O_RDWR);\n...\nlseek(fd, 0L, SEEK_END);\nwrite(fd, buffer, len);\n...\nlseek(fd, pos, SEEK_SET);\nread(fd, buffer, len);\n</code></pre>\n\n<p>on Windows 10 (client), if the file is on a shared network drive provided by e.g. Windows Server 2012 or 2016.\nIn case of Windows Server 2012 the SMB version of the connection is 3.02, for Windows Server 2016 it is 3.1.1.</p>\n\n<p>The error does not occur every time or at the same position, sometimes the return values of lseek() indicate an error, but most of the times it seems that lseek() does not return the right EOF position, or that the write() operation at EOF was not finished before the next lseek(), kind of a synchronisation/cache problem. Also tried fsync(fd) (or _commit(fd)), O_SYNC, and delays, but it does not seem to be reliable.</p>\n\n<p>With Windows 7 as client it works like it worked for many years on local drives. Also when I mount that drive in Linux, it works with SMB versions 2.1, 3.02, 3.1.1.</p>\n\n<p>So my question is, are there known issues with the SMB protocol, network shares and Windows 10, such that these low-level file operations like lseek() are affected?</p>\n\n<p>UPDATE:</p>\n\n<p>Here is an example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/stat.h&gt;\n\n#ifdef _WIN32\n    #include &lt;io.h&gt;\n#else\n    #include &lt;unistd.h&gt;\n    #define  _O_CREAT   O_CREAT\n    #define  _O_RDWR    O_RDWR\n    #define  _S_IREAD   S_IREAD\n    #define  _S_IWRITE  S_IWRITE\n    #define  _open      open\n    #define  _write     write\n    #define  _lseek     lseek\n    #define  _close     close\n#endif\n\nchar file[] = \"file.txt\";\n\nint main() {\n\n    int fd = 0;\n    int ret = 0;\n    int len = 0;\n    off_t pos = 0;\n    off_t last_eof = 0;\n    char buffer[] = \"12345\";\n    int buflen = 0;\n    int n = 0;\n\n    buflen = strlen(buffer);\n\n    //unlink(file);\n\n    fd = _open(file, _O_CREAT|_O_RDWR, _S_IREAD|_S_IWRITE);\n    if (fd == -1) { fprintf(stderr, \"ERROR open\\n\"); exit(1); }\n\n    ret = _close(fd);\n    if (ret == -1) { fprintf(stderr, \"ERROR close\\n\"); exit(1); }\n\n    for (n = 0; n &lt; 10000; n++)\n    {\n        fd = _open(file, _O_RDWR, _S_IREAD|_S_IWRITE);\n        if (fd == -1) { fprintf(stderr, \"ERROR open [%d]\\n\", n); exit(1); }\n\n        pos = _lseek(fd, 0, SEEK_END);\n        if (pos == -1) { fprintf(stderr, \"ERROR lseek1 [%d] pos: %ld\\n\", n, pos); exit(1); }\n        if (last_eof &gt; 0 &amp;&amp; pos != last_eof) {\n            fprintf(stderr, \"ERROR [%d] eof: %ld last_eof: %ld\\n\", n, pos, last_eof);\n            exit(1);\n        }\n\n        len = _write(fd, buffer, buflen);\n        if (len != buflen) { fprintf(stderr, \"ERROR write [%d]\\n\", n); exit(1); }\n\n        pos = _lseek(fd, 0, SEEK_END);\n        if (pos == -1) { fprintf(stderr, \"ERROR lseek2 [%d] pos: %ld\\n\", n, pos); exit(1); }\n\n        last_eof = pos;\n\n        ret = _close(fd);\n        if (ret == -1) { fprintf(stderr, \"ERROR close [%d]\\n\", n); exit(1); }\n\n        if (last_eof != (n+1)*buflen) {\n            fprintf(stderr, \"ERROR [%d] eof: %ld\\n\", n, last_eof);\n            exit(1);\n        }\n    }\n\n    fprintf(stdout, \"[%d] EOF: %ld\\n\", n, last_eof);\n\n    return 0;\n}\n</code></pre>\n\n<p>(delete <code>file.txt</code> before running!)</p>\n\n<p>Compiled with visual studio, executed on Windows 10 and a network drive it happens that it exits with \"eof-error\", e.g.</p>\n\n<pre><code>&gt; seek5win.exe\nERROR [112] eof: 555 last_eof: 560\n</code></pre>\n\n<p>i.e. the file was closed with eof/size 560, then re-opened with eof/size 555.\nIf there is no other process accessing the file, it finishes without error. However if the Explorer or some other process scans the directory, the lseek/eof-estimate is sometimes off.\nUsing <code>_sopen_s()</code> with different sh_flags didn't help.</p>\n\n<p>In ProcessMonitor it looks like this (when Explorer and sublime-text come into play):</p>\n\n<pre><code>08:41:10,3133  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 540, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,3191  seek5win.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,3192  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 4.096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal\n08:41:10,3347  seek5win.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Generic Read/Write, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a, OpenResult: Opened\n08:41:10,3460  seek5win.exe  QueryDeviceInformationVolume  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  DeviceType: Disk, Characteristics: Remote\n08:41:10,3594  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 540, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,3643  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 539, Length: 1, Priority: Normal\n08:41:10,3644  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 540, I/O Flags: Non-cached, Paging I/O, Priority: Normal\n08:41:10,3754  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 540, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,3838  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 540, Length: 5\n08:41:10,4013  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 545, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,4101  seek5win.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,4102  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 4.096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal\n08:41:10,4363  seek5win.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Generic Read/Write, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a, OpenResult: Opened\n08:41:10,4537  seek5win.exe  QueryDeviceInformationVolume  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  DeviceType: Disk, Characteristics: Remote\n08:41:10,4751  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 545, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,4870  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 544, Length: 1, Priority: Normal\n08:41:10,4870  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 545, I/O Flags: Non-cached, Paging I/O, Priority: Normal\n08:41:10,5171  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 545, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,5239  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 545, Length: 5\n08:41:10,5375  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 550, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,5475  seek5win.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,5476  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 4.096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal\n08:41:10,5646  seek5win.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Generic Read/Write, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a, OpenResult: Opened\n08:41:10,5957  seek5win.exe  QueryDeviceInformationVolume  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  DeviceType: Disk, Characteristics: Remote\n08:41:10,6111  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 550, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,6210  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 549, Length: 1, Priority: Normal\n08:41:10,6211  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 550, I/O Flags: Non-cached, Paging I/O, Priority: Normal\n08:41:10,6418  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 550, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,6501  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 550, Length: 5\n08:41:10,6547  Explorer.exe  QueryDirectory                \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Filter: file.txt, 1: file.txt\n08:41:10,6715  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 555, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,6934  seek5win.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,6935  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 4.096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal\n08:41:10,6962  Explorer.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened\n08:41:10,7229  seek5win.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Generic Read/Write, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a, OpenResult: Opened\n08:41:10,7408  Explorer.exe  QueryBasicInformationFile     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  CreationTime: 31.10.2019 08:41:00, LastAccessTime: 31.10.2019 08:41:00, LastWriteTime: 31.10.2019 08:41:12, ChangeTime: 31.10.2019 08:41:12, FileAttributes: A\n08:41:10,7456  seek5win.exe  QueryDeviceInformationVolume  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  DeviceType: Disk, Characteristics: Remote\n08:41:10,7483  Explorer.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,7585  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 555, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,7645  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 554, Length: 1, Priority: Normal\n08:41:10,7646  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 555, I/O Flags: Non-cached, Paging I/O, Priority: Normal\n08:41:10,7886  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 555, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,8013  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 555, Length: 5\n08:41:10,8221  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 560, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,8246  sublime_.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened\n08:41:10,8319  seek5win.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,8319  seek5win.exe  WriteFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 0, Length: 4.096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal\n08:41:10,8453  seek5win.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Generic Read/Write, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a, OpenResult: Opened\n08:41:10,8477  sublime_.exe  QueryBasicInformationFile     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  CreationTime: 31.10.2019 08:41:00, LastAccessTime: 31.10.2019 08:41:00, LastWriteTime: 31.10.2019 08:41:12, ChangeTime: 31.10.2019 08:41:12, FileAttributes: A\n08:41:10,8679  seek5win.exe  QueryDeviceInformationVolume  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  DeviceType: Disk, Characteristics: Remote\n08:41:10,8690  sublime_.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,8843  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 555, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,8918  sublime_.exe  CreateFile                    \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened\n08:41:10,8925  seek5win.exe  ReadFile                      \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  Offset: 554, Length: 1, Priority: Normal\n08:41:10,9146  sublime_.exe  QueryBasicInformationFile     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  CreationTime: 31.10.2019 08:41:00, LastAccessTime: 31.10.2019 08:41:00, LastWriteTime: 31.10.2019 08:41:12, ChangeTime: 31.10.2019 08:41:12, FileAttributes: A\n08:41:10,9167  seek5win.exe  QueryStandardInformationFile  \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  AllocationSize: 4.096, EndOfFile: 555, NumberOfLinks: 1, DeletePending: False, Directory: False\n08:41:10,9324  sublime_.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n08:41:10,9485  seek5win.exe  CloseFile                     \\\\;LanmanRedirector\\...\\file.txt  SUCCESS  \n</code></pre>\n\n<p>It happens with smb versions 3.02 and 2.1.</p>\n\n<p>On local drives I never observed this. On Windows 7 it runs through the loop without errors on the network drive (other processes scanning the file can make it very slow). On Linux it also works on the network drive (mount -t cifs ..).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1267, "user_id": 7521600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a118ea176c1fb59d35087439ef34edc8?s=128&d=identicon&r=PG&f=1", "display_name": "Yuvraj Jaiswal", "link": "https://stackoverflow.com/users/7521600/yuvraj-jaiswal"}, "edited": false, "score": 0, "creation_date": 1571830577, "post_id": 58521951, "comment_id": 103369036, "body": "Does your code do some sort of IO or other network-based calls? Such things do not have precise execution time in real-world environments./"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1571830755, "post_id": 58521951, "comment_id": 103369134, "body": "The results of <code>&#47;* code *&#47;</code> seem to be discarded, so that the compiler may optimize the code away. You are essentially measuring scheduler delays."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1571830876, "post_id": 58521951, "comment_id": 103369195, "body": "I guess if you run the code with a higher priority you will get more close run times."}, {"owner": {"reputation": 633, "user_id": 10819212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J8mjR.png?s=128&g=1", "display_name": "Felix G", "link": "https://stackoverflow.com/users/10819212/felix-g"}, "edited": false, "score": 5, "creation_date": 1571830906, "post_id": 58521951, "comment_id": 103369205, "body": "If your code doesn&#39;t run as a realtime thread on a realtime OS, there is no guarantee whatsoever on the execution time. Technically the OS could decide to do whatever it wants for how long it wants, and your code may actually take 5 seconds to run. EDIT: if you&#39;re using linux, this problem can be solved by installing the PREEMPT_RT patchset, configuring the kernel for full preemption, and running your application with the SCHED_FIFO scheduling class"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1571831394, "post_id": 58521951, "comment_id": 103369485, "body": "Your numbers differ by less than 1%.  Sounds pretty consistent to me."}, {"owner": {"reputation": 11, "user_id": 12243016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7ebc930a346c9e3fb08be9dd48347e?s=128&d=identicon&r=PG&f=1", "display_name": "Yazan33", "link": "https://stackoverflow.com/users/12243016/yazan33"}, "edited": false, "score": 0, "creation_date": 1571990504, "post_id": 58521951, "comment_id": 103428573, "body": "Thnak you all for your help, as far as i understood I can&#39;t have a precise execution and have the same time every time i execute the code, sometimes it only differ by 1% and sometimes i get way far results, I think its something has to do with how the CPU work and how the OS handles process."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12243016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7ebc930a346c9e3fb08be9dd48347e?s=128&d=identicon&r=PG&f=1", "display_name": "Yazan33", "link": "https://stackoverflow.com/users/12243016/yazan33"}, "edited": false, "score": 0, "creation_date": 1571990730, "post_id": 58522164, "comment_id": 103428691, "body": "Thank you very much for your explanation, but I would like to add that sometimes i get sometiong like 30 to 60 milliseconds deviation and that&#39;s do a lot of harm the reliability of my experiment, is there is way to get something more stable, or to have a constant measurements of time ?"}, {"owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "reply_to_user": {"reputation": 11, "user_id": 12243016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7ebc930a346c9e3fb08be9dd48347e?s=128&d=identicon&r=PG&f=1", "display_name": "Yazan33", "link": "https://stackoverflow.com/users/12243016/yazan33"}, "edited": false, "score": 0, "creation_date": 1572003465, "post_id": 58522164, "comment_id": 103434688, "body": "@Yazan33, question to clarify: do you plan to measure &quot;just your code&quot; execution time? or OS-wide change of time between two execution points (like you do now)?"}], "tags": [], "owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "is_accepted": false, "score": 4, "last_activity_date": 1571832123, "last_edit_date": 1571832123, "creation_date": 1571831169, "answer_id": 58522164, "question_id": 58521951, "link": "https://stackoverflow.com/questions/58521951/execution-time-is-different-everytime-for-the-same-code/58522164#58522164", "title": "Execution time is different everytime for the same code", "body": "<p>3-5 milliseconds deviation is not a thing to worry about. This is almost up to rounding &amp; measures.</p>\n\n<p>If the difference is bigger, then many factors can come into play here:</p>\n\n<ol>\n<li>Cache status (recently used parts of memory are faster to process)</li>\n<li>Process priority</li>\n<li>Multitasking rate (other processes may compete with you for the resources of any kind)</li>\n<li>System calls latency (are they user-space only? kernel-space?)</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 12243016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7ebc930a346c9e3fb08be9dd48347e?s=128&d=identicon&r=PG&f=1", "display_name": "Yazan33", "link": "https://stackoverflow.com/users/12243016/yazan33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571832123, "creation_date": 1571830468, "last_edit_date": 1571830739, "question_id": 58521951, "link": "https://stackoverflow.com/questions/58521951/execution-time-is-different-everytime-for-the-same-code", "title": "Execution time is different everytime for the same code", "body": "<p>I'm trying to get the precise execution time for some code i'll use in an experiment in the lab. I was trying some simple code but i'm always getting different execution time. Can you please help me in solving this?</p>\n\n<p>The code i was trying is this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/time.h&gt;\n\nint main() {\n    long start, end;\n    struct timeval timecheck;\n\n    gettimeofday(&amp;timecheck, NULL);\n    start = (long)timecheck.tv_sec * 1000 + (long)timecheck.tv_usec / 1000;\n\n    usleep(200000);  // 200ms\n   for (int i = 0; i &lt; 10000000; ++i)\n    {/* \n        code \n    */}\n\n    gettimeofday(&amp;timecheck, NULL);\n    end = (long)timecheck.tv_sec * 1000 + (long)timecheck.tv_usec / 1000;\n\n    printf(\"%ld milliseconds elapsed\\n\", (end - start));\n\n    return 0;\n}\n</code></pre>\n\n<p>And the results are someting like this</p>\n\n<p>227 milliseconds elapsed</p>\n\n<p>231 milliseconds elapsed</p>\n\n<p>228 milliseconds elapsed</p>\n"}, {"tags": ["c", "netbeans"], "answers": [{"tags": [], "owner": {"reputation": 12435, "user_id": 2985643, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eaacaf1426f7e6d02914fcf99dc0a33b?s=128&d=identicon&r=PG&f=1", "display_name": "skomisa", "link": "https://stackoverflow.com/users/2985643/skomisa"}, "is_accepted": true, "score": 1, "last_activity_date": 1571862478, "creation_date": 1571862478, "answer_id": 58530540, "question_id": 58521913, "link": "https://stackoverflow.com/questions/58521913/how-to-run-c-program-in-netbeans/58530540#58530540", "title": "How to run C program in Netbeans", "body": "<blockquote>\n  <p>how can I do the same using NetBeans?</p>\n</blockquote>\n\n<ul>\n<li>Select your C project in the <strong>Projects</strong> panel.</li>\n<li>Right-click it to open the context menu, then select <strong>Properties > Run > Run Command</strong>. </li>\n<li><p>Enter your command to be run in the <strong>Run Command</strong> field.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HXqQv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HXqQv.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>This is the <strong>Help</strong> for <strong>Run Command</strong> in NetBeans 8.2: </p>\n\n<p><em>Enter a command to be executed when you run the project. The IDE runs the command as /bin/sh -c \"run-command\" which enables you to use any shell syntax including redirection and pipes. <strong>Type the command in the Run Command field the same way you would run it from the command line.</strong> For example, you could type my-script -opt1 -opt2 to run a script and specify two options, or mycommand > output.log to run your command and send the output to a logfile. The Run Command list maintains history of previous entries so you can go back to the default value or select among several different commands you have entered.</em></p></li>\n</ul>\n"}], "owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 58530540, "answer_count": 1, "score": 0, "last_activity_date": 1571862478, "creation_date": 1571830353, "question_id": 58521913, "link": "https://stackoverflow.com/questions/58521913/how-to-run-c-program-in-netbeans", "title": "How to run C program in Netbeans", "body": "<p>I am trying to run the dmtx project from Git (link: <a href=\"https://github.com/dmtx/dmtx-utils\" rel=\"nofollow noreferrer\">https://github.com/dmtx/dmtx-utils</a>) in Netbeans. I have configured the <code>Project Properties</code> in NetBeans and the project is building correctly. </p>\n\n<p>When I run a particular C file (dmtxwrite.c) through bash it gives the correct output. As mentioned in the README, the correct way to run it in Bash  is:</p>\n\n<p><code>$ echo -n 123456 | dmtxwrite &gt; image.png</code>. </p>\n\n<p>Now my question is how can I do the same using NetBeans? </p>\n\n<p>Till now I only found answers related to passing command line arguments. However, that does not work.</p>\n"}, {"tags": ["c", "linux", "sockets", "bind"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 4, "creation_date": 1571829892, "post_id": 58521725, "comment_id": 103368639, "body": "<code>bind(listenfd, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr));       if ((bind(listenfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)))</code> - you bind twice. The second will fail, because the first has taken the port. Just remove the first <code>bind</code>"}, {"owner": {"reputation": 149, "user_id": 12262022, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA3duJvUd344pOReRR_k5qbES-60u1bIkOf3A0Eow=k-s128", "display_name": "timosmd", "link": "https://stackoverflow.com/users/12262022/timosmd"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571831305, "post_id": 58521725, "comment_id": 103369422, "body": "Thank you very much for your quick response.   This is one of the exceptions I added myself - seems to be wrong then.  But the original version only contains the first bind comand and still doesn&#39;t work/shows the same error.  The original code can be found on &quot;<a href=\"https://www.thegeekstuff.com/2011/12/c-socket-programming/?utm_source=feedburner\" rel=\"nofollow noreferrer\">thegeekstuff.com/2011/12/c-socket-programming/&hellip;</a>&quot; (hope I am allowed to post hyperlinks here)."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571831442, "post_id": 58521725, "comment_id": 103369516, "body": "I removed the first bind and then you&#39;re program works successfully on my machine. Check if there is something else listening to the port."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1571832499, "post_id": 58521725, "comment_id": 103370120, "body": "In any case: <code>bind()</code> returns a value. (zero or -1). If this return value is -1, you could (should!) check errno (which <i>could</i> be EADDRINUSE)"}, {"owner": {"reputation": 149, "user_id": 12262022, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA3duJvUd344pOReRR_k5qbES-60u1bIkOf3A0Eow=k-s128", "display_name": "timosmd", "link": "https://stackoverflow.com/users/12262022/timosmd"}, "edited": false, "score": 0, "creation_date": 1571850387, "post_id": 58521725, "comment_id": 103379887, "body": "Thanks for your support. I will try it tomorrow again and let you guys know if it worked."}, {"owner": {"reputation": 685, "user_id": 537959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949c4705ccb19fbf41c98d649b411e66?s=128&d=identicon&r=PG", "display_name": "Oldest Software Guy", "link": "https://stackoverflow.com/users/537959/oldest-software-guy"}, "edited": false, "score": 0, "creation_date": 1571893652, "post_id": 58521725, "comment_id": 103391914, "body": "Try a different port.  Check in the file /etc/services because 22 TCP/UDP belongs to ssh(1) daemon."}, {"owner": {"reputation": 149, "user_id": 12262022, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA3duJvUd344pOReRR_k5qbES-60u1bIkOf3A0Eow=k-s128", "display_name": "timosmd", "link": "https://stackoverflow.com/users/12262022/timosmd"}, "edited": false, "score": 0, "creation_date": 1572015042, "post_id": 58521725, "comment_id": 103440715, "body": "Thank you very much - it works again!  I forgot to add &quot;&amp;&quot; when executing my c program (./readpin_socket_server &amp;) so I thought it hanged although the program was just waiting for the client to adress it."}], "owner": {"reputation": 149, "user_id": 12262022, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA3duJvUd344pOReRR_k5qbES-60u1bIkOf3A0Eow=k-s128", "display_name": "timosmd", "link": "https://stackoverflow.com/users/12262022/timosmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571829692, "creation_date": 1571829692, "question_id": 58521725, "link": "https://stackoverflow.com/questions/58521725/c-socket-bind-errno-22-no-time-wait-sockets", "title": "C - socket bind() errno 22 - no time-wait sockets", "body": "<p>I am quite new to C &amp; Linux and I tried to setup a TCP socket server for Data exchange with a C-Code I compiled and executed on a Ubuntu System.</p>\n\n<p>From a Tutorial I copied the following code (see below, the original version didn't include exception handling) and it worked to start the server and receive data (time &amp; date) with a client code (on the same machine for test purpose). </p>\n\n<p>Then I restarted the Ubuntu machine and since then I can't start the server anymore. </p>\n\n<p>I then added exception handling to the code below and it throws \"unable to bind\" with errorno 22, which means \"invalid argument\"? This doesn't make sense to me, as the same code worked before quite good.</p>\n\n<p>I assumed that the \"old\" socket is in a time-wait state or not closed yet, but I checked all connections with \"ss -all state xxx\" for all different states and everything seems alright.</p>\n\n<p>Also tried to use different ports and codes - same problem.</p>\n\n<p>Hope anyone can help me with this problem as I don't know what else to try.</p>\n\n<pre><code>// C-Code Server\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;time.h&gt; \n\nint main(int argc, char *argv[])\n{\n\n    int listenfd = 0, connfd = 0;\n    struct sockaddr_in serv_addr; \n\n    char sendBuff[1025];\n    time_t ticks; \n\n    //Open a socket\n    listenfd = socket(AF_INET, SOCK_STREAM, 0);\n    memset(&amp;serv_addr, '0', sizeof(serv_addr));\n    memset(sendBuff, '0', sizeof(sendBuff)); \n    if (listenfd == -1) {\n        printf(\"Error: unable to open a socket\\n\");\n        exit(1);\n    }\n\n    //Create an Adress\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = htons(INADDR_ANY);\n    serv_addr.sin_port = htons(1234); \n\n\n    //Macht schon benutzte Adresse mit SO_REUSEADDR nutzbar\n    int opt = 1;\n    if (setsockopt(listenfd, SOL_SOCKET, SO_REUSEADDR, (char *)&amp;opt, sizeof(opt))&lt;0) {\n        perror(\"setsockopt\");exit(EXIT_FAILURE);\n    }\n    if(setsockopt(listenfd, SOL_SOCKET, SO_REUSEPORT, (char *)&amp;opt, sizeof(opt))&lt;0)   {\n        perror(\"setsockopt\");exit(EXIT_FAILURE);\n    }\n\n\n    bind(listenfd, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)); \n\n    if ((bind(listenfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr))) == -1) {\n        printf(\"Error: unable to bind\\n\");\n        printf(\"Error code: %d\\n\", errno);\n        exit(1);\n    }\n\n\n\n    listen(listenfd, 10); \n\n    while(1)\n    {\n        connfd = accept(listenfd, (struct sockaddr*)NULL, NULL); \n\n        if (connfd == -1) {\n            printf(\"Error: unable to accept connections\\n\");\n            printf(\"Error code: %d\\n\", errno);\n            exit(1);\n        }\n\n\n\n        ticks = time(NULL);\n        snprintf(sendBuff, sizeof(sendBuff), \"%.24s\\r\\n\", ctime(&amp;ticks));\n        write(connfd, sendBuff, strlen(sendBuff)); \n\n        close(connfd);\n        sleep(1);\n     } \n}\n</code></pre>\n"}, {"tags": ["c", "linux-kernel"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1571830416, "post_id": 58521628, "comment_id": 103368947, "body": "Welcome to Stack Overflow! While &quot;homework&quot; questions are not prohibited here, we won&#39;t do the homework <b>for you</b>. However, we could <b>help you</b> in doing your homework, but for that you need to specify a <b>problem</b> which you cannot solve and with which you need a help. Examples of problems: &quot;How to implement system call?&quot;, &quot;How to list processes&quot;, &quot;My code lists processes, but does that too slow&quot;."}], "owner": {"reputation": 11, "user_id": 12262746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC0C2H6tMb8hJxAjyiQzYnvIUNz_LND0dhX3_Jr=k-s128", "display_name": "Tiger Baby", "link": "https://stackoverflow.com/users/12262746/tiger-baby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1571836014, "creation_date": 1571829393, "last_edit_date": 1571836014, "question_id": 58521628, "link": "https://stackoverflow.com/questions/58521628/get-process-info-current-proc-parent-proc-oldest-child-proc", "title": "Get Process Info (Current proc, parent proc, oldest child proc)", "body": "<p>I have an exercise about adding a system call in the Linux kernel, but I'm struggling to implement it. Below is the description:</p>\n\n<p>The main part of this assignment is to implement a new system call that lets the user determine the information about both the parent and the oldest child process. The information about the processes' information is represented through the following struct:</p>\n\n<pre><code>struct procinfos{\n    long studentID;\n    struct proc_info proc;\n    struct proc_info parent_proc;\n    struct proc_info oldest_child_proc;\n};\n</code></pre>\n\n<p>Where <code>proc_info</code> is defined as follows:</p>\n\n<pre><code>struct proc_info{\n    pid_t pid;\n    char name[16];\n};\n</code></pre>\n\n<p><code>procinfos</code> contains information of three processes:</p>\n\n<ul>\n<li><code>proc</code>, the current process or process with PID</li>\n<li><code>parent_proc</code>, the parent of the first process</li>\n<li><code>oldest_child_proc</code>, the oldest child process of the first process</li>\n</ul>\n\n<p>The processes' information is stored in the struct <code>proc_info</code> and contains:</p>\n\n<ul>\n<li><code>pid</code>, the pid of the process</li>\n<li><code>name</code>, the name of the program which is executed</li>\n</ul>\n\n<p>The prototype of our system call is described below:</p>\n\n<p>To invoke <code>get_proc_info</code> system call, the user must provide the PID of the process or <code>\u22121</code> in the case of the current process. If the system call finds the process with the given PID, it will get the process' information, put it in output parameter <code>*info</code>, and return <code>0</code>. However, if the system call cannot find such a process, it will return\n<code>EINVAL</code>.</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;unistd.h&gt;\nstruct procinfos{\n    long studentID;\n    struct proc_info proc;\n    struct proc_info parent_proc;\n    struct proc_info oldest_child_proc;\n};\nstruct proc_info{\n    pid_t pid;\n    char name[16];\n};\nasmlinkage long sys_get_proc_info(pid_t pid, struct proinfos *info){\n// TODO: implement the system call\n}\n</code></pre>\n\n<p>HINT:</p>\n\n<ul>\n<li>To find the current process: look at <code>arch/x86/include/asm/current.h</code> or for simple use macro current (current -> pid).</li>\n<li>To find info about each process, look at <code>include/linux/sched.h</code>.</li>\n<li>To after the trimming process the time to build the kernel is reduced to about 10 minutes but it is till a long time to compile. To make to the development of system call as fast as possible, you can use kernel module to test the system call represented as a module in advance (Appd B).</li>\n</ul>\n\n<p>How to implement this system call?</p>\n"}, {"tags": ["linux-kernel", "c"], "comments": [{"owner": {"reputation": 166, "user_id": 11747252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rm_VanUFE_8/AAAAAAAAAAI/AAAAAAAABWc/I_W7oml-Tys/photo.jpg?sz=128", "display_name": "Johan Myr&#233;en", "link": "https://stackoverflow.com/users/11747252/johan-myr%c3%a9en"}, "edited": false, "score": 1, "creation_date": 1571835754, "post_id": 58665952, "comment_id": 103634936, "body": "Where are you expecting to see the message &quot;Hello World !&quot;? You are not printing it, or doing anything with it for that matter."}, {"owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "reply_to_user": {"reputation": 166, "user_id": 11747252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rm_VanUFE_8/AAAAAAAAAAI/AAAAAAAABWc/I_W7oml-Tys/photo.jpg?sz=128", "display_name": "Johan Myr&#233;en", "link": "https://stackoverflow.com/users/11747252/johan-myr%c3%a9en"}, "edited": false, "score": 0, "creation_date": 1571835981, "post_id": 58665952, "comment_id": 103634937, "body": "How can I do that ? How can I pass this message ( &quot;Hello World!&quot;) from my user space program in order to be written in the file device of the module and be printed when I tape <code>tail -f &#47;var&#47;log&#47;messages</code> or <code>dmesg</code> ?"}, {"owner": {"reputation": 166, "user_id": 11747252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rm_VanUFE_8/AAAAAAAAAAI/AAAAAAAABWc/I_W7oml-Tys/photo.jpg?sz=128", "display_name": "Johan Myr&#233;en", "link": "https://stackoverflow.com/users/11747252/johan-myr%c3%a9en"}, "edited": false, "score": 0, "creation_date": 1571836602, "post_id": 58665952, "comment_id": 103634938, "body": "Your string is passed to the <code>exer_read</code> function in the <code>buffer</code> parameter. Before you can do anything with it in the kernel, you will have to copy it using the <code>copy_from_user</code> function."}, {"owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "reply_to_user": {"reputation": 166, "user_id": 11747252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rm_VanUFE_8/AAAAAAAAAAI/AAAAAAAABWc/I_W7oml-Tys/photo.jpg?sz=128", "display_name": "Johan Myr&#233;en", "link": "https://stackoverflow.com/users/11747252/johan-myr%c3%a9en"}, "edited": false, "score": 0, "creation_date": 1571837006, "post_id": 58665952, "comment_id": 103634939, "body": "so I have to add <code>copy_from_user</code> function inside <code>exer_read</code> function ?"}, {"owner": {"reputation": 166, "user_id": 11747252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rm_VanUFE_8/AAAAAAAAAAI/AAAAAAAABWc/I_W7oml-Tys/photo.jpg?sz=128", "display_name": "Johan Myr&#233;en", "link": "https://stackoverflow.com/users/11747252/johan-myr%c3%a9en"}, "edited": false, "score": 3, "creation_date": 1571852342, "post_id": 58665952, "comment_id": 103634940, "body": "Sorry, I made a mistake, I meant <code>copy_to_user</code> in the read function (and <code>copy_from_user</code> in the write function.) But yes, you need to call these functions to copy data between user space and the kernel. I strongly recommend to read up on these things before trying to build a driver. One good book (though a bit old already) is &quot;Linux Device Drivers&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "is_accepted": true, "score": 0, "last_activity_date": 1572858634, "creation_date": 1572858634, "answer_id": 58690153, "question_id": 58665952, "link": "https://stackoverflow.com/questions/58665952/unable-to-print-the-message-sent-from-user-space-c-application-to-linux-kernel-m/58690153#58690153", "title": "Unable to print the message sent from user space C application to linux kernel module", "body": "<p>For people who still can't find a solution for that, I have an answer.</p>\n\n<p>This is the module :</p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/fs.h&gt;\n#include &lt;linux/device.h&gt;  \n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/uaccess.h&gt;\n\n\nMODULE_LICENSE(\"GPL\");      \nMODULE_AUTHOR(\"Gaston\");  \nMODULE_DESCRIPTION(\"A simple Linux char driver\"); \nMODULE_VERSION(\"0.1\"); \n\n#define MAX 256\n\nstatic char message[MAX] =\"\";           ///&lt; Memory for the string that is passed from userspace\n\n\nssize_t exer_open(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device has been opened\\n\");\n    return 0;\n}\n\n\nssize_t exer_read(struct file *pfile, char __user *buffer, size_t length, loff_t *offset) {\n\n    return 0;\n}\n\n\nssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset) {\n    if (length &gt; MAX)\n        return -EINVAL;\n\n    if (copy_from_user(message, buffer, length) != 0)\n        return -EFAULT;\n\n    printk(KERN_INFO \"Received %s characters from the user\\n\", message);\n    return 0;\n\n}   \n\n\nssize_t exer_close(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device successfully closed\\n\");\n    return 0;\n}\n\n\nstruct file_operations exer_file_operations = { \n    .owner = THIS_MODULE,\n    .open = exer_open,\n    .read = exer_read,\n    .write = exer_write,\n    .release = exer_close,\n};\n\n\nint exer_simple_module_init(void) {\n\n    printk(KERN_INFO \"Initializing the LKM\\n\");\n    register_chrdev(240, \"Simple Char Drv\", &amp;exer_file_operations);\n    return 0;\n}\n\n\nvoid exer_simple_module_exit(void) {\n\n    unregister_chrdev(240, \"Simple Char Drv\");\n}\n\nmodule_init(exer_simple_module_init);\nmodule_exit(exer_simple_module_exit);\n</code></pre>\n\n<p>Ans this is the application :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n\n\n#define BUFFER_LENGTH 256 \n\nint main()\n\n{\n\nint ret, fd;\nchar stringToSend[BUFFER_LENGTH];\n\n\nfd = open(\"/dev/char_device\", O_RDWR);             // Open the device with read/write access\n\nif (fd &lt; 0)\n    {\n            perror(\"Failed to open the device...\");\n            return errno;\n    }\n\n\nprintf(\"Type in a short string to send to the kernel module:\\n\");\n\nscanf(\"%s\", stringToSend);                // Read in a string (with spaces)\n\nprintf(\"Writing message to the device [%s].\\n\", stringToSend);\n\nret = write(fd, stringToSend, strlen(stringToSend)); // Send the string to the LKM\n\nif (ret &lt; 0)\n    {\n            perror(\"Failed to write the message to the device.\");\n            return errno;\n    }\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>You will see that this will work fine.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1572642677, "question_id": 548300}, "owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 1, "accepted_answer_id": 58690153, "answer_count": 1, "score": 5, "last_activity_date": 1572858634, "creation_date": 1571829350, "question_id": 58665952, "link": "https://stackoverflow.com/questions/58665952/unable-to-print-the-message-sent-from-user-space-c-application-to-linux-kernel-m", "title": "Unable to print the message sent from user space C application to linux kernel module", "body": "<p>I have developed a simple linux kernel module :</p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/fs.h&gt;\n\n\nssize_t exer_open(struct inode *pinode, struct file *pfile) {\n\n    return 0;\n}\n\nssize_t exer_read(struct file *pfile, char __user *buffer, size_t length, loff_t *offset) {\n\n    return 0;\n}\n\nssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset) {\n\n    return length;\n}\n\nssize_t exer_close(struct inode *pinode, struct file *pfile) {\n\n    return 0;\n}\n\nstruct file_operations exer_file_operations = { \n    .owner = THIS_MODULE,\n    .open = exer_open,\n    .read = exer_read,\n    .write = exer_write,\n    .release = exer_close,\n};\n\nint exer_simple_module_init(void) {\n\n    printk(KERN_ALERT \"Inside the %s function\\n\", __FUNCTION__);\n    register_chrdev(240, \"Simple Char Drv\", &amp;exer_file_operations);\n    return 0;\n}\n\nvoid exer_simple_module_exit(void) {\n\n    unregister_chrdev(240, \"Simple Char Drv\");\n}\n\nmodule_init(exer_simple_module_init);\nmodule_exit(exer_simple_module_exit);\n</code></pre>\n\n<p>I insert this module to the kernel using <code>insmod</code> command without any problem.</p>\n\n<p>I want to use this module to print a message sent to it by user space program that I have developed too :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n\n\nint main()\n\n{\n\nint ret, fd;\nchar stringToSend[] = \"Hello World !\";\n\nfd = open(\"/dev/char_device\", O_RDWR);             // Open the device with read/write access\n\nif (fd &lt; 0)\n    {\n            perror(\"Failed to open the device...\");\n            return errno;\n    }\n\nret = write(fd, stringToSend, strlen(stringToSend)); // Send the string to the LKM\n\nif (ret &lt; 0)\n    {\n            perror(\"Failed to write the message to the device.\");\n            return errno;\n    }\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>When I execute the program and examin the kernel logs using <code>tail -f /var/log/messages</code> command I can see : <code>user.alert kernel: Inside the exer_read function</code> But I cant see the message \" Hello World !\"</p>\n\n<p>I don't know what I am missing here especially I still beginner in developing modules and using it. Help me please!</p>\n"}, {"tags": ["c", "linux", "process", "multiprocessing"], "comments": [{"owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "edited": false, "score": 2, "creation_date": 1571828662, "post_id": 58521377, "comment_id": 103367991, "body": "Child process starts its execution from the line where the <code>fork</code> is called"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1571828699, "post_id": 58521377, "comment_id": 103368006, "body": "The program prints \u201chello\u201d and then forks. Neither the parent nor the child resets to earlier code; they both continue from the fork."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 7336280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9605f3c1266ea0b73917c65c14b5eb45?s=128&d=identicon&r=PG&f=1", "display_name": "shiqo", "link": "https://stackoverflow.com/users/7336280/shiqo"}, "is_accepted": false, "score": 0, "last_activity_date": 1571828646, "creation_date": 1571828646, "answer_id": 58521423, "question_id": 58521377, "link": "https://stackoverflow.com/questions/58521377/why-this-code-does-not-print-two-hello-when-using-multi-process/58521423#58521423", "title": "Why this code does not print two &quot;hello&quot; when using multi process?", "body": "<p>you're making <code>printf(\"hello\\n\");</code> before the call to the <code>fork()</code> function .</p>\n"}, {"comments": [{"owner": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "edited": false, "score": 0, "creation_date": 1571828934, "post_id": 58521466, "comment_id": 103368143, "body": "Thank you for your answer but I have one confuse. Why istack *= 2  happens before fork() but child process still perform this code?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "edited": false, "score": 0, "creation_date": 1571829035, "post_id": 58521466, "comment_id": 103368198, "body": "@T1412 I cannot understand your question, sorry."}, {"owner": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "edited": false, "score": 0, "creation_date": 1571829435, "post_id": 58521466, "comment_id": 103368399, "body": "I mean that child process still perform istack*2"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "edited": false, "score": 2, "creation_date": 1571829526, "post_id": 58521466, "comment_id": 103368451, "body": "@T1412 The child process starts after the statement with <code>fork</code> and it gets a copy of <code>istack</code> with whatever value it had before <code>fork</code>."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1571828946, "last_edit_date": 1571828946, "creation_date": 1571828792, "answer_id": 58521466, "question_id": 58521377, "link": "https://stackoverflow.com/questions/58521377/why-this-code-does-not-print-two-hello-when-using-multi-process/58521466#58521466", "title": "Why this code does not print two &quot;hello&quot; when using multi process?", "body": "<p><code>printf(\"hello\\n\");</code> happens before <code>fork()</code>.</p>\n\n<p>When the output is a terminal, <code>stdout</code> is line-buffered by default, it outputs 1 <code>hello</code> because <code>stdout</code> gets flushed on <code>\\n</code>.</p>\n\n<p>When the output is redirected into a file or a pipe, <code>stdout</code> is block-buffered by default, it outputs 2 <code>hello</code>s because both the parent and child processes have <code>hello</code> buffered and the buffers get flushed on <code>exit()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1008, "user_id": 1518661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f4837de83793bf897a324260dec671?s=128&d=identicon&r=PG&f=1", "display_name": "kjohri", "link": "https://stackoverflow.com/users/1518661/kjohri"}, "is_accepted": false, "score": 0, "last_activity_date": 1571840523, "creation_date": 1571840523, "answer_id": 58525023, "question_id": 58521377, "link": "https://stackoverflow.com/questions/58521377/why-this-code-does-not-print-two-hello-when-using-multi-process/58525023#58525023", "title": "Why this code does not print two &quot;hello&quot; when using multi process?", "body": "<p>Trace the program flow. First there is only one process executing this program. This process prints \"hello\". Next, there is a fork system call inside the switch statement. Now there are two processes, parent and child. The child is a clone of the parent. Everything, except the process id, is the same for both. Even the next instruction to be executed is the same for both. Both, the parent and child execute the switch statement next. The child never had a chance to print \"hello\".</p>\n"}], "owner": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58521466, "answer_count": 3, "score": 0, "last_activity_date": 1571840523, "creation_date": 1571828480, "question_id": 58521377, "link": "https://stackoverflow.com/questions/58521377/why-this-code-does-not-print-two-hello-when-using-multi-process", "title": "Why this code does not print two &quot;hello&quot; when using multi process?", "body": "<p>I am learning about multi process and know that when using fork() child process is created, and the child obtains copies of the parent\u2019s stack, data, heap, and text segments.</p>\n\n<p>So why this code below does not print two \"hello\"?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic int idata = 111; /* Allocated in data segment */\n\nint main(int argc, char *argv[])\n{\n\n    int istack = 222; /* Allocated in stack segment */\n    pid_t childPid;\n    idata *= 2;\n    istack *= 2;\n    printf(\"hello\\n\");\n\n    switch (childPid = fork()) {\n            case -1:\n                    printf(\"fork fail\\n\");\n                    exit(0);\n            case 0:\n                    idata *= 3;\n                    istack *= 3;\n                    break;\n            default:\n                    sleep(3); // Give child a chance to execute\n                    break;\n    }\n    /* Both parent and child come here */\n\n    printf(\"PID=%ld %s idata=%d istack=%d\\n\", (long) getpid(),\n    (childPid == 0) ? \"(child) \" : \"(parent)\", idata, istack);\n\n    exit(0);\n}\n</code></pre>\n\n<p>The result is </p>\n\n<p>hello</p>\n\n<p>PID=591 (child)  idata=666 istack=1332</p>\n\n<p>PID=590 (parent) idata=222 istack=444</p>\n\n<p>why this code does not print two \"hello\"?</p>\n"}, {"tags": ["c", "compilation", "linker", "arm"], "comments": [{"owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "edited": false, "score": 0, "creation_date": 1571828245, "post_id": 58521133, "comment_id": 103367790, "body": "I&#39;m also digging for a solution in the compiler manual <a href=\"http://downloads.ti.com/docs/esd/SPNU151M/index.html#SPNU151M_HTML/linking-c-c-code.html#4_Linking_C_C++_Code%3FTocPath%3D4%2520Linking%2520C%252FC%252B%252B%2520Code%7C_____0\" rel=\"nofollow noreferrer\">downloads.ti.com/docs/esd/SPNU151M/index.html#SPNU151M_HTML/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1571829556, "post_id": 58521133, "comment_id": 103368469, "body": "If you used GCC, the usual way would be to use the weak attribute, but I cannot see this mentioned in your compiler manual. I.e. your standard functions would be weak but still resolved by the linker unless you provide a strong mock function. <a href=\"https://github.com/diacritic/Mimick\" rel=\"nofollow noreferrer\">Mimick</a> works by poisoning the <a href=\"https://en.wikipedia.org/wiki/Global_Offset_Table\" rel=\"nofollow noreferrer\">GOT</a> which also works for dynamic modules only."}, {"owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1571830324, "post_id": 58521133, "comment_id": 103368882, "body": "@Groo would this be the #pragma WEAK (symbol) directive? <a href=\"http://downloads.ti.com/docs/esd/SPNU151M/index.html#SPNU151M_HTML/arm-c-c-language-implementation.html#STDZ0556591\" rel=\"nofollow noreferrer\">downloads.ti.com/docs/esd/SPNU151M/index.html#SPNU151M_HTML/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1571830570, "post_id": 58521133, "comment_id": 103369033, "body": "Hey, yes, this seem to be the same thing! Perhaps you can try it and then post your own answer if it works."}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "edited": false, "score": 0, "creation_date": 1571830455, "post_id": 58521429, "comment_id": 103368964, "body": "Solution #1 is actually used in the code when the whole HAL-layer is stubbed, but now I&#39;d like to keep all the other things chugging along, which makes it a bit impractical.  I&#39;ll consider the other ideas, thanks!"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 2, "last_activity_date": 1571828673, "creation_date": 1571828673, "answer_id": 58521429, "question_id": 58521133, "link": "https://stackoverflow.com/questions/58521133/test-embedded-code-by-replacing-static-symbols-at-compile-time/58521429#58521429", "title": "Test embedded code by replacing static symbols at compile time", "body": "<p>One solution could be to have multiple .c files for each module, one the production code and one the test code, and compile and link with one of the two. The globals and function signatures in both .c file must be at least the same (at least: there may be more symbols but not less).</p>\n\n<p>Another solution, building on the previous one, is to have two libraries, one with the production code and one with the test code, and link with one of both. You could ieven link with both lubraries, with the test version first, as linkers often resolve symbols in the order they are encountered.</p>\n\n<p>And, as you said, you could work with a bunch of <code>#ifdef</code>s, which would have the advantage of having just one .c file, but making tyhe code less readable.</p>\n\n<p>I would not go for <code>#ifdef</code>s on the function level, i.e. defining just one function of a .c file for test and keeping the others as is; however, if necessary, it could be away. And if necessary, you could have one .c file (two) for each function, but that would negate the module concept.</p>\n\n<p>I think the first approach would be the cleanest.</p>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "edited": false, "score": 0, "creation_date": 1571830589, "post_id": 58521916, "comment_id": 103369046, "body": "I just had the same idea myself, and I think it&#39;s the next-best thing to the #pragma weak (haven&#39;t tried yet). Thanks for both ideas!"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "edited": false, "score": 0, "creation_date": 1571830661, "post_id": 58521916, "comment_id": 103369088, "body": "@vindarmagnus: NP, although I think if you get the weak directive working, it would be better to post your own answer and accept it to help future readers."}, {"owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "edited": false, "score": 0, "creation_date": 1571831096, "post_id": 58521916, "comment_id": 103369325, "body": "Sure, I will do that."}], "tags": [], "owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "is_accepted": false, "score": 2, "last_activity_date": 1571830364, "creation_date": 1571830364, "answer_id": 58521916, "question_id": 58521133, "link": "https://stackoverflow.com/questions/58521133/test-embedded-code-by-replacing-static-symbols-at-compile-time/58521916#58521916", "title": "Test embedded code by replacing static symbols at compile time", "body": "<p>One additional approach (apart from Paul Ogilvie's) would be to have your mocking header also create a define which will replace the original function symbol at the pre-processing stage.</p>\n\n<p>I.e. if your mocking header looks like this:</p>\n\n<pre><code>// mock.h\n\n#ifdef MOCKING_ENABLED\n\n  adcdata_t GetAdcMeasurement_mocked(void);\n  stuff_t   GetSomeStuff_mocked(void);\n\n  #define GetAdcMeasurement GetAdcMeasurement_mocked\n  #define GetSomeStuff GetSomeStuff_mocked\n\n#endif\n</code></pre>\n\n<p>Then whenever you include the file, the preprocessor will replace the calls before it even hits the compiler:</p>\n\n<pre><code>#include \"mock.h\"\n\nvoid SomeOtherFunc(void)\n{\n    // preprocessor will change this symbol into 'GetAdcMeasurement_mocked'\n    adcdata_t data = GetAdcMeasurement();\n}\n</code></pre>\n\n<p>The approach might confuse the unsuspected reader of your code, because they won't necessarily realize that you are calling a different function altogether. Nevertheless, I find this approach to have the least impact to the production code (apart from adding the include, obviously).</p>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "edited": false, "score": 0, "creation_date": 1571831058, "post_id": 58522109, "comment_id": 103369293, "body": "FYI: This is the accepted answer, but I have to wait 2 days for it. Again, thanks!"}], "tags": [], "owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "is_accepted": true, "score": 1, "last_activity_date": 1571831018, "creation_date": 1571831018, "answer_id": 58522109, "question_id": 58521133, "link": "https://stackoverflow.com/questions/58521133/test-embedded-code-by-replacing-static-symbols-at-compile-time/58522109#58522109", "title": "Test embedded code by replacing static symbols at compile time", "body": "<p><em>(This is a quick sum up the discussion in the comments, thanks for answers)</em></p>\n\n<p>A function can be redefined if it has the weak attribute, see\n<a href=\"https://en.wikipedia.org/wiki/Weak_symbol\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Weak_symbol</a></p>\n\n<p>On GCC that would be the weak attribute, e.g.</p>\n\n<pre><code>int __attribute__((weak)) power2(int x);\n</code></pre>\n\n<p>and on the armcl (as in my question) that would be the pragma directive</p>\n\n<pre><code>#pragma weak power2\n\nint power2(int x);\n</code></pre>\n\n<p>Letting the production code consist of partly weak functions will allow a test framework to replace single functions. </p>\n"}], "owner": {"reputation": 174, "user_id": 2863943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b7f1df1bf125104f46e61139477fde?s=128&d=identicon&r=PG&f=1", "display_name": "vindarmagnus", "link": "https://stackoverflow.com/users/2863943/vindarmagnus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58522109, "answer_count": 3, "score": 1, "last_activity_date": 1571831018, "creation_date": 1571827669, "question_id": 58521133, "link": "https://stackoverflow.com/questions/58521133/test-embedded-code-by-replacing-static-symbols-at-compile-time", "title": "Test embedded code by replacing static symbols at compile time", "body": "<p><strong>Background</strong></p>\n\n<p>I'm building a C application for an embedded Cortex M4 TI-RTOS SYS/BIOS target, however this question should apply to all embedded targets where a single binary is loaded onto some microprocessor. </p>\n\n<p><strong>What I want</strong></p>\n\n<p>I'd like to do some in situ regression tests on the target where I just replace a single function with some test function instead. E.g. a GetAdcMeasurement() function would return predefined values from a read-only array instead of doing the actual measurement and returning that value. </p>\n\n<p>This could of course be done with a mess of #ifndefs, but I'd rather keep the production code as untouched as possible. </p>\n\n<p><strong>My attempt</strong></p>\n\n<p>I figure one way to achieve this would be to have duplicate symbol definitions at the linker stage, and then have the linker prioritise the definitions from the test suite (given some #define).</p>\n\n<p>I've looked into using LD_PRELOAD, but that doesn't really seem to apply here (since I'm using only static objects).</p>\n\n<p><strong>Details</strong></p>\n\n<p>I'm using TI Code Composer, with TI-RTOS &amp; SYS/BIOS on the Sitara AM57xx platform, compiling for the M4 remote processor (denoted IPU1). \nHere's the path to the compiler and linker</p>\n\n<pre><code>/opt/ti/ccsv7/tools/compiler/ti-cgt-arm_16.9.6.LTS/bin/armcl\n</code></pre>\n"}, {"tags": ["c", "arduino", "ide"], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 11662858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387a1057b1d97a52cbc121eff1628e44?s=128&d=identicon&r=PG&f=1", "display_name": "Paulson Raja L", "link": "https://stackoverflow.com/users/11662858/paulson-raja-l"}, "edited": false, "score": 0, "creation_date": 1572165921, "post_id": 58522180, "comment_id": 103470855, "body": "Sir, Thank you so much for your support the code is working fine, without your help, I would not have completed the task . Thank you."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "reply_to_user": {"reputation": 309, "user_id": 11662858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387a1057b1d97a52cbc121eff1628e44?s=128&d=identicon&r=PG&f=1", "display_name": "Paulson Raja L", "link": "https://stackoverflow.com/users/11662858/paulson-raja-l"}, "edited": false, "score": 0, "creation_date": 1572250810, "post_id": 58522180, "comment_id": 103488544, "body": "@PaulsonRajaL If it works you can accept the answer."}], "tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": true, "score": 2, "last_activity_date": 1571831250, "creation_date": 1571831250, "answer_id": 58522180, "question_id": 58521030, "link": "https://stackoverflow.com/questions/58521030/is-there-a-possibility-to-glow-the-led-in-55-matrix-in-a-square-shape-with-the/58522180#58522180", "title": "Is there a possibility to glow the led in 5*5 matrix in a square shape with the common anode configuration", "body": "<p>In your specific case you could switch on the first and last row for e.g. 1msec then switch on the first and last column for 1msec and repeat this. I further suggest to switch off all LEDs before switching on a new pattern.</p>\n\n<pre><code>void loop() { \n      static int show_rows = 0;\n\n      switch_all_off();\n      if(show_rows) {\n          first_last_row();\n      } else {\n          first_last_column();\n      }\n      show_rows = !show_rows;\n      delay(10);\n}\n\nvoid switch_all_off()\n{\n    int off = 0;\n    for( j = 0 ; j &lt; Loop_Count ; j++ )\n    {\n          digitalWrite(Led_Row_Pins[i],off);\n          digitalWrite(Led_Column_Pins[j],!off);\n    }\n}\n\n</code></pre>\n\n<p>With this first step the LEDs that are contained both in the rows and in the columns will be brighter. To fix this you can exclude the corner LEDs either from the rows or from the columns, e.g.</p>\n\n<pre><code>void first_last_column()\n{\n\n    for( j = 0 ; j &lt; Loop_Count ; j++ )// Led First And Last Column\n    {\n        for( i = 0 ; i &lt; Loop_Count ; i++)\n        {\n            if((i != 0) &amp;&amp; (i != 4) &amp;&amp; ( j == 0 || j == 4 ))\n            {\n                digitalWrite(Led_Row_Pins[i],state);//    Led_On_State\n                digitalWrite(Led_Column_Pins[j],!state);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>For a more general solution you have to loop over the rows, activate one row after the other and switch the column pins as necessary for the current row.</p>\n\n<pre><code>#define MAXLEDS 5\nint states[MAXLEDS][MAXLEDS] = {\n    { 1, 0, 0, 0, 1 },\n    { 0, 1, 0, 1, 0 },\n    { 0, 0, 1, 0, 0 },\n    { 0, 1, 0, 1, 0 },\n    { 1, 0, 0, 0, 1 }\n};\n\nvoid switch_leds(int row) {\n    int i;\n\n    /* switch off all rows */\n    for(i = 0; i &lt; MAXLEDS, i++) {\n        digitalWrite(Led_Row_Pins[i], 0);\n    }\n\n    /* switch columns according to current row */\n    for(i = 0; i &lt; MAXLEDS; i++) {\n        digitalWrite(Led_Column_Pins[i], !states[row][i]);\n    }\n\n    /* switch on current row */\n    digitalWrite(Led_Row_Pins[row], 1);\n\n}\n\nvoid loop() { \n    static int row = 0;\n    /* switch on LEDs in a single row */\n    switch_leds(row);\n    /* next row */\n    row++; row %= MAXLEDS;\n    /* The processing delay between calls to loop() is added to this delay. */\n    delay(5);\n}\n\n</code></pre>\n\n<p>All code examples are untested and may contain errors.</p>\n"}], "owner": {"reputation": 309, "user_id": 11662858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387a1057b1d97a52cbc121eff1628e44?s=128&d=identicon&r=PG&f=1", "display_name": "Paulson Raja L", "link": "https://stackoverflow.com/users/11662858/paulson-raja-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58522180, "answer_count": 1, "score": 3, "last_activity_date": 1572271459, "creation_date": 1571827283, "last_edit_date": 1572271459, "question_id": 58521030, "link": "https://stackoverflow.com/questions/58521030/is-there-a-possibility-to-glow-the-led-in-55-matrix-in-a-square-shape-with-the", "title": "Is there a possibility to glow the led in 5*5 matrix in a square shape with the common anode configuration", "body": "<p>I have a led-matrix that is common anode in row-wise and common cathode in column-wise. I need to glow the matrix in the shape of a square(first row &amp;&amp; last row &amp;&amp; first column &amp;&amp; last column) , but I was not able to do it. I was able to glow the first and last row separately and first and second column separately)</p>\n\n<pre><code>void first_last_row();\nvoid first_last_column();\n\nint Led_Row_Pins[] = { 2 , 3 , 4 , 5 , 6 } ;             //   Anode pins are shorted in row_wise_manner\nint Led_Column_Pins[] = {8  , 9 , 10 , 11 , 12} ;          //   Column Pins are shorted in column_wise_manner   \nint Loop_Count = 5 ;\nint Wait_Time_On = 1000 ;\nint Wait_Time_Off = 500 ;\nint i = 0 ;\nint j = 0 ;\nint state = 1 ;\n\nvoid setup() {\n  for( i = 0 ; i &lt; Loop_Count ; i++ ){     // Anode Pins are connected in row_wise manner and are made LOW so that they dont conduct       \n    pinMode(Led_Row_Pins[i],OUTPUT);\n    digitalWrite(Led_Row_Pins[i],LOW);\n    pinMode(Led_Column_Pins[i],OUTPUT);    // Cathode Pins are connected in column_wise manner and are made HIGH so that they dont conduct\n    digitalWrite(Led_Column_Pins[i],HIGH); \n  }\n}\n\nvoid loop() { \n      first_last_row();\n      delay(1000);\n      first_last_column();\n}\n\n\nvoid first_last_row()\n{\n  for( i = 0 ; i &lt; Loop_Count ; i++ )// Led First And Last Row \n   {\n     for( j = 0 ; j &lt; Loop_Count ; j++)\n     {\n       if( i == 0 || i == 4 )\n       {\n         digitalWrite(Led_Row_Pins[i],state); //Led_On_State\n         digitalWrite(Led_Column_Pins[j],!state);\n       }\n     }\n   }\n}\n\n\nvoid first_last_column()\n{\n\n  for( j = 0 ; j &lt; Loop_Count ; j++ )// Led First And Last Column\n   {\n     for( i = 0 ; i &lt; Loop_Count ; i++)\n     {\n       if( j == 0 || j == 4 )\n       {\n        digitalWrite(Led_Row_Pins[i],state);//    Led_On_State\n        digitalWrite(Led_Column_Pins[j],!state);\n       }\n     }\n   }\n}\n\n</code></pre>\n\n<p>I need the first row and the last row and first column and last column led glow together so that it forms the shape of a square but I was able to glow them separately only first row and last row together and first column and last  column.</p>\n"}, {"tags": ["c", "fopen"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 2, "creation_date": 1571826986, "post_id": 58520915, "comment_id": 103367126, "body": "Hahaha, no. First you have to <code>sprintf</code>  the value of <code>username</code> into an appropriate buffer, then use that buffer as input to <code>fopen</code> (i.e., you cannot combine these two operations into one)."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 3, "last_activity_date": 1571827160, "creation_date": 1571827160, "answer_id": 58520994, "question_id": 58520915, "link": "https://stackoverflow.com/questions/58520915/opening-a-file-with-a-user-given-name-fopen-in-c/58520994#58520994", "title": "opening a file with a user given name (fopen in c)", "body": "<p>You had right idea but did not use correct function to do it.</p>\n\n<pre><code>char *filename = malloc(strlen(username) + strlen(\".txt\")+1);\n\nif (filename) {\n  sprintf(filename, \"%s.txt\", username);\n  fopen(filename, \"r+\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "is_accepted": true, "score": 4, "last_activity_date": 1571827201, "creation_date": 1571827201, "answer_id": 58521005, "question_id": 58520915, "link": "https://stackoverflow.com/questions/58520915/opening-a-file-with-a-user-given-name-fopen-in-c/58521005#58521005", "title": "opening a file with a user given name (fopen in c)", "body": "<p>Try this:</p>\n\n<pre><code>char* ext = \".txt\";\nchar* filename = malloc(strlen(username) + strlen(ext) + 1);\nsprintf(filename, \"%s%s\", username, ext);\nFILE* file = fopen(filename, \"r+\");\nfree(filename);\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 10913584, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gmW-rmW1laI/AAAAAAAAAAI/AAAAAAAA5LY/omaqxcup9GQ/photo.jpg?sz=128", "display_name": "Rafael Elkoby", "link": "https://stackoverflow.com/users/10913584/rafael-elkoby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 58521005, "answer_count": 2, "score": 0, "last_activity_date": 1571827201, "creation_date": 1571826915, "question_id": 58520915, "link": "https://stackoverflow.com/questions/58520915/opening-a-file-with-a-user-given-name-fopen-in-c", "title": "opening a file with a user given name (fopen in c)", "body": "<p>I need to get a user name from a user and open a file with his name if it already exists.\nif the file doesn't exist I need to create one.\nnow I don't really know how to do it. (in c)</p>\n\n<p>is this code line legal?</p>\n\n<pre><code>fopen(\"%s.txt\", \"r+\", username);\n</code></pre>\n\n<p>and if not what alternatives do I have?\nmaybe there is a better way to do it?</p>\n\n<p>thanks for the help :)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 5, "creation_date": 1571824362, "post_id": 58520107, "comment_id": 103365818, "body": "What does your compiler tell you when you try to compile it?"}, {"owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "edited": false, "score": 0, "creation_date": 1571824526, "post_id": 58520107, "comment_id": 103365910, "body": "Question is compiler dependent. I expect most will compile this (<code>gcc</code> would surely do it). And for the return statement, again its up the compiler that you decided to use. <code>gcc</code> would compile without return statement and you&#39;d be able to run."}, {"owner": {"reputation": 971, "user_id": 12232029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJKC8.jpg?s=128&g=1", "display_name": "THess", "link": "https://stackoverflow.com/users/12232029/thess"}, "edited": false, "score": 0, "creation_date": 1571824625, "post_id": 58520107, "comment_id": 103365962, "body": "Well... is there really an <b>after</b> the loop when talking about an infinite loop? It won&#39;t reach it so it&#39;s obsolete, right?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1571824656, "post_id": 58520107, "comment_id": 103365970, "body": "If the function never returns, why bother with a return value?  Just make it <code>void is_thing_five()</code>."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1571825817, "post_id": 58520107, "comment_id": 103366562, "body": "@AndrewHenle The function does return if the condition is met. There is no infinite loop involved here."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571826084, "post_id": 58520107, "comment_id": 103366700, "body": "@Gerhardh The title specifically calls it an &quot;infinite loop&quot;.  I probably should have been clear that I was pointing out the contradiction between the title and the posted code..."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571826223, "post_id": 58520107, "comment_id": 103366763, "body": "@AndrewHenle I assume the author calls any loop with a condition that is always true an &quot;infinite&quot; loop. Therefore I doubt the point will be understood in that way. And the author doesn&#39;t claim it never returns."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1571828362, "post_id": 58520107, "comment_id": 103367847, "body": "You could change the function to break out of the infinite loop when the thing is ready and return the value at the end of the function."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571826321, "post_id": 58520200, "comment_id": 103366807, "body": "<i>So, no you don&#39;t need the <code>return</code> statement, and you wouldn&#39;t need it even if the end of the function was reachable, so long as a caller of the function doesn&#39;t use the return value.</i>  Except that in a few years someone will add a <code>break</code> to the loop so flow does reach the bottom of the function, and then someone will actually use the return value.  Given the code with <code>return 0;</code> at the bottom has already been written, there&#39;s no point in leaving it out, and there&#39;s potential substantial future consequences if it is left out. &quot;This will never happen&quot; is a bad start if you want reliability."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1571826434, "post_id": 58520200, "comment_id": 103366862, "body": "@AndrewHenle: In that case, I think a runtime assertion is superior to a return. At least then you might get a new compiler warning issued during a build, and failing that, a runtime failure if the assertion is reached."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1571826014, "last_edit_date": 1592644375, "creation_date": 1571824593, "answer_id": 58520200, "question_id": 58520107, "link": "https://stackoverflow.com/questions/58520107/do-i-need-a-return-statement-after-an-infinite-loop/58520200#58520200", "title": "Do i need a return statement after an infinite loop?", "body": "<p>In C, the behaviour of <em>using</em> a return value from a non-void function that does not have an explicit return value is <em>undefined</em>.</p>\n<p>So, no you don't need the <code>return</code> statement, and you wouldn't need it even if the end of the function was reachable, so long as a caller of the function doesn't use the return value.</p>\n<p><code>int main</code> is an exception to this rule: you are allowed to call <code>main</code> from itself (indirectly or otherwise), and you are allowed to assume an implicit <code>return 0;</code> on any branch that doesn't have an explicit return value.</p>\n<hr>\n<p>Interesting, before C11 the behaviour of a function with an infinite loop that &quot;did nothing&quot; was <em>undefined</em>. But C11 defines the behaviour by way of a footnote in the standard:</p>\n<p>C11, 6.8.5 ad 6:</p>\n<blockquote>\n<p>An iteration statement whose controlling expression is not a constant expression,<sup>156)</sup> that performs no input/output operations, does not access volatile objects, and performs no synchronization or atomic operations in its body, controlling expression, or (in the case of a for statement) its expression-3, may be assumed by the implementation to terminate.<sup>157)</sup></p>\n<hr />\n<p><sup>157)</sup><sub>This is intended to allow compiler transformations such as removal of empty loops even when termination cannot be proven.</sub></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "is_accepted": false, "score": 0, "last_activity_date": 1571824949, "creation_date": 1571824949, "answer_id": 58520326, "question_id": 58520107, "link": "https://stackoverflow.com/questions/58520107/do-i-need-a-return-statement-after-an-infinite-loop/58520326#58520326", "title": "Do i need a return statement after an infinite loop?", "body": "<p>Well, you don't needed it. Some compilers however will give you a warning which you would suppress with a pragma, or suppress by having an extra return. And then that might also get you a warning on a different compiler, because the statement is unreachable.</p>\n\n<p>For that piece of code, I'd try to move the if test into the while, so you have</p>\n\n<pre><code>int is_thing_five() \n{\n    while (not thing_is_ready)\n    {\n         update_thing();\n    }\n    return thing == 5;\n}\n</code></pre>\n\n<p>which is somewhat clearer as it doesn't have an infinite loop with a test to break out of it in the middle.</p>\n"}], "owner": {"reputation": 7892, "user_id": 3310334, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/BTb0z.jpg?s=128&g=1", "display_name": "theonlygusti", "link": "https://stackoverflow.com/users/3310334/theonlygusti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 58520200, "answer_count": 2, "score": 1, "last_activity_date": 1571826014, "creation_date": 1571824310, "question_id": 58520107, "link": "https://stackoverflow.com/questions/58520107/do-i-need-a-return-statement-after-an-infinite-loop", "title": "Do i need a return statement after an infinite loop?", "body": "<p>Is this good code (is it readable, will the compiler compile it):</p>\n\n<pre><code>int is_thing_five() {\n  while (1) {\n    if (thing_is_ready) {\n      return thing == 5;\n    }\n\n    update_thing();\n  }\n}\n</code></pre>\n\n<p>or does it have to have a return statement after the infinite loop</p>\n\n<pre><code>int is_thing_five() {\n  while (1) {\n    if (thing_is_ready) {\n      return thing == 5;\n    }\n\n    update_thing();\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 4, "creation_date": 1571823685, "post_id": 58519896, "comment_id": 103365463, "body": "Run as long as the bitwise-inverted return value of <code>scanf</code> is not equal to the value of <code>EOF</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1571823740, "post_id": 58519896, "comment_id": 103365494, "body": "Knowing what <a href=\"https://en.cppreference.com/w/cpp/io/c/fscanf#Return_value\" rel=\"nofollow noreferrer\"><code>scanf</code> returns</a> might help. But I still think it doesn&#39;t make much sense with the bitwise complement <code>~</code>. Where did you see this code? What is the context?"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 1, "creation_date": 1571823865, "post_id": 58519896, "comment_id": 103365559, "body": "And since: [We can move the <code>~</code> to the other side of the equation] AND [<code>EOF</code> is typically all 1s], this is equivalent to &quot;run until <code>scanf</code> returns 0&quot;."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1571823992, "post_id": 58519896, "comment_id": 103365620, "body": "It assumes that <code>EOF</code> is <code>-1</code> and works as long as <code>scanf</code> returns <code>1</code>, which negated is <code>-2</code> in two&#39;s complement, which is not equal to <code>-1</code>. When <code>scanf</code> returns <code>0</code> it is <code>-1</code> after negation, which is NOT unequal <code>-1</code> so the loop stops. It&#39;s a misleading, needlessly complicated way of just writing <code>while(scanf(&quot;%s&quot;, word+1))</code> that also relies on a couple of assumptions for no good reason."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 5, "creation_date": 1571824014, "post_id": 58519896, "comment_id": 103365639, "body": "@goodvibration While that <i>does</i> make sense in a perverted kind of way, it raises more question though, like who the h*ll wrote code like that?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 3, "creation_date": 1571824301, "post_id": 58519896, "comment_id": 103365788, "body": "This code should be in the (yet to be created) Stack Overflow &quot;Repository of Deliberately Dodgy Code!&quot;"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571824506, "post_id": 58519896, "comment_id": 103365903, "body": "@Someprogrammerdude: Good point, I have enclosed a variation of it in my answer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571825039, "post_id": 58519896, "comment_id": 103366168, "body": "And <code>strlen()</code> returns <code>size_t</code>, not <code>int</code>.  Someone who thought he was clever really isn&#39;t."}, {"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 1, "creation_date": 1571825313, "post_id": 58519896, "comment_id": 103366315, "body": "the meaning of &quot;while(~scanf... != EOF) is that the person who wrote the code was either (a) writing for an obfuscated code challenge or (b) too clever for their own good or (c) had to obey a coding standard that required all I/O to explicitly check for EOF (or any combination thereof)"}], "answers": [{"tags": [], "owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "is_accepted": true, "score": 5, "last_activity_date": 1571824421, "creation_date": 1571824421, "answer_id": 58520144, "question_id": 58519896, "link": "https://stackoverflow.com/questions/58519896/what-does-whilescanf-mean-in-c/58520144#58520144", "title": "what does while(~scanf mean in C?", "body": "<p>Analyzing the expression <code>while(~scanf(\"%s\", word+1) != EOF)</code>:</p>\n\n<blockquote>\n  <p>Run as long as the bitwise-inverted return value of <code>scanf</code> is not equal to the value of <code>EOF</code>.</p>\n</blockquote>\n\n<p>Analyzing the equivalent expression <code>while(scanf(\"%s\", word+1) != ~EOF)</code>:</p>\n\n<blockquote>\n  <p>Run as long as the return value of <code>scanf</code> is not equal to the bitwise-inverted value of <code>EOF</code>.</p>\n</blockquote>\n\n<p>Assuming that <code>EOF</code> is typically all 1s, this expression is essentially equivalent to:</p>\n\n<p><code>while(scanf(\"%s\", word+1) != 0)</code></p>\n\n<p>Which means:</p>\n\n<blockquote>\n  <p>Run as long as the return value of <code>scanf</code> is not <code>0</code>.</p>\n</blockquote>\n\n<p>Or simply:</p>\n\n<blockquote>\n  <p>Run until the return value of <code>scanf</code> is <code>0</code>.</p>\n</blockquote>\n\n<p>I'm still scratching my head as to whether or not this analysis is correct.</p>\n\n<p>Good question for a job interview (and a good example for how to not write code).</p>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 1264830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a84fd83d4de659ff527d252d06b98d?s=128&d=identicon&r=PG&f=1", "display_name": "AliA", "link": "https://stackoverflow.com/users/1264830/alia"}, "is_accepted": false, "score": 0, "last_activity_date": 1571906288, "creation_date": 1571906288, "answer_id": 58537419, "question_id": 58519896, "link": "https://stackoverflow.com/questions/58519896/what-does-whilescanf-mean-in-c/58537419#58537419", "title": "what does while(~scanf mean in C?", "body": "<p>On success scanf will return the number of input items successfully matched. In this case there is only one input item to match therefore on success scanf will return 1, The code above will bitwise invert 1 which will make it -2. Since -2 != EOF, the loop will not end. Since EOF has a value of -1.</p>\n\n<p>If scanf encounters an error or reaches end of input, for example because the user pressed Ctrl-D, it will return EOF and no new value will be placed in the memory location word+1. The code will bitwise invert EOF, which becomes 0, because ~EOF=0. Since 0 != EOF the loop will not end. The call to strlen will return the length of string that was in memory location word+1 prior to calling scanf.</p>\n\n<p>The loop will only end if scanf returns 0, because ~0 = -1 = EOF. This will only happen if scanf was unable to match the input to a string for the conversion specifier \"%s\".</p>\n"}], "owner": {"reputation": 63, "user_id": 12241805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9bdea906b8107fad72a5b45f26ef071?s=128&d=identicon&r=PG&f=1", "display_name": "SyntAx", "link": "https://stackoverflow.com/users/12241805/syntax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 58520144, "answer_count": 2, "score": 2, "last_activity_date": 1571906288, "creation_date": 1571823599, "last_edit_date": 1571823748, "question_id": 58519896, "link": "https://stackoverflow.com/questions/58519896/what-does-whilescanf-mean-in-c", "title": "what does while(~scanf mean in C?", "body": "<p>i watch some code and i don't know what the meaning of <code>while(~scanf</code></p>\n\n<pre><code>while(~scanf(\"%s\", word+1) !=EOF)\n{\n    int a= strlen(word+1);\n</code></pre>\n\n<p>i already search google and found nothing on this. Please help</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 12262248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDqWNAAIhJZCKXwlTgG7LS77GqpT0z_WYWCDtdwkQ=k-s128", "display_name": "Ballen Abdullah", "link": "https://stackoverflow.com/users/12262248/ballen-abdullah"}, "edited": false, "score": 0, "creation_date": 1571823518, "post_id": 58519740, "comment_id": 103365370, "body": "Thank you for the clarification! One thing regarding the syntax of your code I don&#39;t understand is &quot;-&gt;&quot;. How does that work in this code:       scanf_s(&quot;%d&quot;, &amp;pCourse-&gt;courseCode);"}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 0, "creation_date": 1571823940, "post_id": 58519740, "comment_id": 103365595, "body": "&#39;-&gt;&#39; is for accessing &#39;courseCode&#39; field of &#39;pCourse&#39; pointer to struct."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1571823095, "creation_date": 1571823095, "answer_id": 58519740, "question_id": 58519619, "link": "https://stackoverflow.com/questions/58519619/how-do-i-create-a-table-using-inputs-from-a-user-the-amount-of-which-changes-de/58519740#58519740", "title": "How do I create a table using inputs from a user, the amount of which changes depending on a previously specified input from the user?", "body": "<p>Use dynamic memory allocation in a linked list. Look at <code>malloc</code>. Your list structure could look like:</p>\n\n<pre><code>typedef struct COURSES {\n    int courseCode;\n    int courseDay;\n    int courseTime;\n    struct COURSES *next;\n} t_Courses;\n</code></pre>\n\n<p>You allocate a list element as follows:</p>\n\n<pre><code>    t_Courses *pCourse= malloc(sizeof(t_Courses));\n</code></pre>\n\n<p>and then read the data as you do now, e.g.:</p>\n\n<pre><code>    scanf_s(\"%d\", &amp;pCourse-&gt;courseCode);\n</code></pre>\n\n<p>Managing a linked list is not simple. I leave it to you as part of the homework. There are numerous examples on the internet and on Stack Exchange.</p>\n"}], "owner": {"reputation": 25, "user_id": 12262248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDqWNAAIhJZCKXwlTgG7LS77GqpT0z_WYWCDtdwkQ=k-s128", "display_name": "Ballen Abdullah", "link": "https://stackoverflow.com/users/12262248/ballen-abdullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571823095, "creation_date": 1571822702, "last_edit_date": 1571822924, "question_id": 58519619, "link": "https://stackoverflow.com/questions/58519619/how-do-i-create-a-table-using-inputs-from-a-user-the-amount-of-which-changes-de", "title": "How do I create a table using inputs from a user, the amount of which changes depending on a previously specified input from the user?", "body": "<p>I am not allowed to use arrays. I need to list all of the course codes, days, and times for as many courses as the user has specified in the first scanf_s call. I have no idea how to proceed without using arrays. Any help hint/help would be appreciated.</p>\n\n<pre><code>printf(\"Please enter the number of courses you'd like to take: \");\nint numOfCourses;\nscanf_s(\"%d\", &amp;numOfCourses);\nint courseCode;\nint courseDay;\nint courseTime;\n\nint i = 0;\nwhile (i &lt; numOfCourses) {\n    printf(\"Please enter the code of the course: \");\n    scanf_s(\"%d\", &amp;courseCode);\n    printf(\"Please enter the day of the course: \");\n    scanf_s(\"%d\", &amp;courseDay);\n    printf(\"Please enter the time of the course: \");\n    scanf_s(\"%d\", &amp;courseTime);\n    i++;\n}\n</code></pre>\n"}, {"tags": ["c", "asynchronous", "tcl", "eventqueue"], "answers": [{"tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": true, "score": 1, "last_activity_date": 1572163016, "creation_date": 1572163016, "answer_id": 58577522, "question_id": 58519265, "link": "https://stackoverflow.com/questions/58519265/event-queue-cleanup/58577522#58577522", "title": "Event queue cleanup", "body": "<p>On the first point, that seems OK to me. It is very much like running <code>update</code> at the TCL level.</p>\n\n<p>I'm not sure about the second point, as it isn't part of the API that I have explored a lot. It might be that way to allow multiple events to be scheduled per notification, or because there are other uses for the call, but I really don't know.</p>\n\n<p>On the third point, it sounds fine. I think you never need special event sources just to do inter-thread messaging.</p>\n"}], "owner": {"reputation": 108, "user_id": 1254127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e3009dacebe9475cb1d2d1d5006094d?s=128&d=identicon&r=PG", "display_name": "user1254127", "link": "https://stackoverflow.com/users/1254127/user1254127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58577522, "answer_count": 1, "score": 0, "last_activity_date": 1572163016, "creation_date": 1571821651, "question_id": 58519265, "link": "https://stackoverflow.com/questions/58519265/event-queue-cleanup", "title": "Event queue cleanup", "body": "<p>In my Tcl extension, a secondary thread is filling the Tcl event queue with events; the events contain pointers to structures with a dynamic life time.  </p>\n\n<p>What is the right strategy for ensuring that no events with dangling pointers to de-allocated structures remain in the event queue?  I can prevent the secondary thread from creating new events; currently I call <code>Tcl_DoOneEvent(TCL_DONTWAIT)</code> in a loop till it returns 0 (i.e., event queue is empty) after ensuring no new events can be created and before de-allocating the structure.</p>\n\n<p>Is that the right way to do it?</p>\n\n<p>On a related note, I am unsure of the purpose of <code>Tcl_ThreadAlert()</code>: if this is needed after every call to <code>Tcl_ThreadQueueEvent()</code>, why isn't the alert included in <code>Tcl_ThreadQueueEvent()</code>?</p>\n\n<p>Finally, my code does not call <code>Tcl_CreateEventSource()</code>, since it doesn't seem to be  needing a setup nor a check procedure as a second thread is involved.  Is that cause for concern?</p>\n"}, {"tags": ["c", "microcontroller", "esp32", "esp-idf"], "comments": [{"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1571827006, "post_id": 58518956, "comment_id": 103367140, "body": "you could modifying the esp8266 version <a href=\"https://github.com/igrr/esptool-ck\" rel=\"nofollow noreferrer\">github.com/igrr/esptool-ck</a>"}, {"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 4, "creation_date": 1571832947, "post_id": 58518956, "comment_id": 103370408, "body": "Why do you want that? Why can&#39;t you use the python tool provided?"}, {"owner": {"reputation": 151, "user_id": 8605976, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/beb437755f3383a5e9dced6d068cff1d?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/8605976/daniel"}, "reply_to_user": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1572114128, "post_id": 58518956, "comment_id": 103463367, "body": "@TarickWelling Because I might not have access to python, what then? how can I flash without having python?"}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 0, "creation_date": 1573759447, "post_id": 58518956, "comment_id": 103999292, "body": "Not your only option; you could also write your own programmer from the <a href=\"https://github.com/espressif/esptool/wiki/Serial-Protocol\" rel=\"nofollow noreferrer\">protocol documentation</a> or reverse engineer it. But generally, any &quot;easy way&quot; would involve using provided tools. Python isn&#39;t much harder to get than a computer with a suitable serial port."}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 3023349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23881d23353df3f9563259f12b341e2?s=128&d=identicon&r=PG&f=1", "display_name": "phatpaul", "link": "https://stackoverflow.com/users/3023349/phatpaul"}, "is_accepted": false, "score": 0, "last_activity_date": 1599703330, "last_edit_date": 1599703330, "creation_date": 1599702676, "answer_id": 63821732, "question_id": 58518956, "link": "https://stackoverflow.com/questions/58518956/esp32-flashing-with-c-and-not-python/63821732#63821732", "title": "esp32 flashing with c and not python", "body": "<p>You can build the python program into a stand-alone .exe file.</p>\n<pre><code>REM Script for building esptool.exe\n@REM Author: Paul Abbott, 2019\n@ECHO OFF\nSETLOCAL EnableDelayedExpansion\n\nREM %CD% gives current dir, but \nSET THISDIR=%CD%\nREM %~dp0 gives the directory of this batch file (with a trailing \\)\nSET SCRIPTDIR=%~dp0\nSET &quot;PROGRAMMER=%SCRIPTDIR%..\\..\\Tools\\esp-idf\\components\\esptool_py\\esptool\\esptool.py&quot;\n\npip2 install pyinstaller pyserial\n\nrmdir /s /q build_tmp\nmkdir build_tmp\nC:\\Python27\\scripts\\pyinstaller ^\n    --onefile ^\n    --specpath build_tmp ^\n    --workpath build_tmp\\build ^\n    --distpath %SCRIPTDIR% ^\n    %PROGRAMMER%\n    \nREM Output: build_tmp\\dist\\esptool.exe\n</code></pre>\n<p>The output esptool.exe will work without installing anything on any Windows XP, 7, 10.  (there's probably a similar way to build for other OS too)</p>\n<p>Now you can call that .exe file that you built from a production programming script.  Here's my batchprog-esp32.cmd for example:</p>\n<pre><code>@REM Script for assembly line programming of ESP32\n@REM Author: Paul Abbott, 2019\n@ECHO OFF\nSETLOCAL EnableDelayedExpansion\n\nREM %CD% gives current dir, but \nSET THISDIR=%CD%\nREM %~dp0 gives the directory of this batch file (with a trailing \\)\nSET SCRIPTDIR=%~dp0\n\nSET &quot;PROGRAMMER=%SCRIPTDIR%\\esptool.exe&quot;\nSET /a DUTNUMBER=1\n\nIF /i NOT EXIST %PROGRAMMER% (\n    MORE %SCRIPTDIR%readme.md\n    ECHO Programmer %PROGRAMMER% does not exist!.\n    GOTO :DIE\n)\n\nrem Restore the color of the screen\nCOLOR 07\nCLS\nECHO Batch Programmer\nECHO/\nECHO In Directory:\nECHO  %THISDIR%\nECHO/\nECHO Found .bin files in directory:\nECHO **************************************************************************\nSET AppSel=0\nSET AppIndex=0\nSET FDataSel=0\nSET FDataIndex=0\nFOR %%F IN (%THISDIR%\\*.bin) DO (\n  SET THISFILE=%%~nxF\n  IF NOT &quot;!THISFILE:bootloader=!&quot;==&quot;!THISFILE!&quot; (\n    ECHO Bootloader: %%~nxF\n    SET BOOTLOADER_BIN=%%~nxF\n  ) ELSE IF NOT &quot;!THISFILE:partitions=!&quot;==&quot;!THISFILE!&quot; (\n    ECHO Partitions: %%~nxF\n    SET PARTITION_BIN=%%~nxF\n  ) ELSE IF NOT &quot;!THISFILE:ota_data=!&quot;==&quot;!THISFILE!&quot; (\n    ECHO OTA_Init: %%~nxF\n    SET OTAINITDATA_BIN=%%~nxF\n  ) ELSE IF NOT &quot;!THISFILE:nvs_data=!&quot;==&quot;!THISFILE!&quot; (\n    ECHO NVS_Init: %%~nxF\n    SET NVSINITDATA_BIN=%%~nxF\n  ) ELSE IF NOT &quot;!THISFILE:phy_init=!&quot;==&quot;!THISFILE!&quot; (\n    ECHO PHY-Init: %%~nxF\n    SET PHYINITDATA_BIN=%%~nxF\n  ) ELSE IF NOT &quot;!THISFILE:factory_data=!&quot;==&quot;!THISFILE!&quot; (\n    SET FDataSel.!FDataIndex!=%%~nxF\n    ECHO FData: %%~nxF\n    SET /A FDataSel = !FDataIndex!\n    SET /A FDataIndex += 1\n  ) ELSE (\n  REM Print all other .bin files that didn't match above as potential Factory App\n    SET AppSel.!AppIndex!=%%~nxF\n    ECHO App: %%~nxF\n    SET /A AppSel = !AppIndex!\n    SET /A AppIndex += 1\n  )\n)\nECHO **************************************************************************\nECHO/\n\nIF !AppIndex! LEQ 1 GOTO :SKIP_APP_SELECT\nREM App Select\nECHO Please choose factory app from this list:\nECHO **************************************************************************\nSET /A NUMAPPS=!AppIndex!-1\nFOR /L %%G IN (0,1,%NUMAPPS%) DO (\n    ECHO %%G: !AppSel.%%G!\n)\nECHO **************************************************************************\nECHO/\nSET /P AppSel= Choose the file to program to Factory App Partition [%AppSel%]^&gt;\n:SKIP_APP_SELECT\nIF &quot;!AppSel.%AppSel%!&quot;==&quot;&quot; (\n    ECHO WARNING: No App Partition!   \n) ELSE (\n    SET FACTORYAPP_BIN=!AppSel.%AppSel%!\n)\n\nIF !FDataIndex! LEQ 0 (\n    REM no factorydata partition found, assume app offset at 0x10000\n    SET FACTORYAPP_OFFSET=0x10000\n) ELSE (\n    REM found a factorydata partition (new format), assume app offset at 0x20000\n    SET FACTORYAPP_OFFSET=0x20000\n)\nIF !FDataIndex! LEQ 1 GOTO :SKIP_FDATA_SELECT\nREM FData Select\nECHO Please choose factory data from this list:\nECHO **************************************************************************\nSET /A NUMFDATAS=!FDataIndex!-1\nFOR /L %%G IN (0,1,%NUMFDATAS%) DO (\n    ECHO %%G: !FDataSel.%%G!\n)\nECHO **************************************************************************\nECHO/\nSET /P AppSel= Choose the file to program to Factory Data Partition [%FDataSel%]^&gt;\n:SKIP_FDATA_SELECT\nIF NOT &quot;!FDataSel.%FDataSel%!&quot;==&quot;&quot; SET FACTORYDATA_BIN=!FDataSel.%FDataSel%!\n\nREM Configure COM port\nif NOT EXIST UART_COM.CFG (\n    set SERCOMNO=COM1\n) else (\n    set /P SERCOMNO= &lt; UART_COM.CFG\n)\nREM remove spaces\nset SERCOMNO=%SERCOMNO: =%\necho Enter the COM_PORT_NUMBER (as COM1 ~ COM99) [%SERCOMNO%]\nset /p SERCOMNO=\nREM remove spaces\nset SERCOMNO=%SERCOMNO: =%\nIF !SERCOMNO!==&quot;&quot; GOTO :DIE\necho %SERCOMNO% &gt; UART_COM.CFG\n\nSET PROGRAMMER=%PROGRAMMER% --chip esp32 ^\n--port !SERCOMNO! ^\n--baud 921600 ^\n--before default_reset ^\n--after no_reset ^\nwrite_flash -z ^\n--flash_mode dio ^\n--flash_freq 80m ^\n--flash_size 16MB\n\nIF NOT &quot;%NVSINITDATA_BIN%&quot;==&quot;&quot; SET PROGRAMMER=%PROGRAMMER% 0x9000 %THISDIR%/%NVSINITDATA_BIN%\nIF NOT &quot;%OTAINITDATA_BIN%&quot;==&quot;&quot; SET PROGRAMMER=%PROGRAMMER% 0xd000 %THISDIR%/%OTAINITDATA_BIN%\nIF NOT &quot;%BOOTLOADER_BIN%&quot;==&quot;&quot; SET PROGRAMMER=%PROGRAMMER% 0x1000 %THISDIR%/%BOOTLOADER_BIN%\nIF NOT &quot;%PHYINITDATA_BIN%&quot;==&quot;&quot; SET PROGRAMMER=%PROGRAMMER% 0xf000 %THISDIR%/%PHYINITDATA_BIN%\nIF NOT &quot;%PARTITION_BIN%&quot;==&quot;&quot; SET PROGRAMMER=%PROGRAMMER% 0x8000 %THISDIR%/%PARTITION_BIN%\nIF NOT &quot;%FACTORYDATA_BIN%&quot;==&quot;&quot; SET PROGRAMMER=%PROGRAMMER% 0x10000 %THISDIR%/%FACTORYDATA_BIN%\nIF NOT &quot;%FACTORYAPP_BIN%&quot;==&quot;&quot; SET PROGRAMMER=%PROGRAMMER% %FACTORYAPP_OFFSET% %THISDIR%/%FACTORYAPP_BIN%\n\nREM Restore the color of the screen\nCOLOR 07\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\n:START\nECHO/\nECHO/\nECHO/\nECHO/\nECHO Batch Programmer\nECHO/\nECHO In Directory:\nECHO  %THISDIR%\nECHO/ \nECHO Programming these files:\nECHO **************************************************************************\nIF NOT &quot;%NVSINITDATA_BIN%&quot;==&quot;&quot; ECHO %NVSINITDATA_BIN%\nIF NOT &quot;%OTAINITDATA_BIN%&quot;==&quot;&quot; ECHO %OTAINITDATA_BIN%\nIF NOT &quot;%BOOTLOADER_BIN%&quot;==&quot;&quot; ECHO %BOOTLOADER_BIN%\nIF NOT &quot;%PHYINITDATA_BIN%&quot;==&quot;&quot; ECHO %PHYINITDATA_BIN% \nIF NOT &quot;%PARTITION_BIN%&quot;==&quot;&quot; ECHO %PARTITION_BIN% \nIF NOT &quot;%FACTORYDATA_BIN%&quot;==&quot;&quot; ECHO %FACTORYDATA_BIN% \nIF NOT &quot;%FACTORYAPP_BIN%&quot;==&quot;&quot; ECHO %FACTORYAPP_BIN% to %FACTORYAPP_OFFSET%\nECHO **************************************************************************\nECHO/\nSET /P G= Hit 'Enter' to Program device #%DUTNUMBER%^&gt;\n\nREM Restore the color of the screen\nCOLOR 07\nECHO %PROGRAMMER%\nECHO/\nECHO/\nECHO Starting Programmer.  Please Wait...\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nECHO/\nCALL %PROGRAMMER%\nIF %ERRORLEVEL% NEQ 0 goto :FAILURE\n\n:SUCCESS\nREM Color the screen green\ncolor 2f\nECHO *********************************\nECHO ***    Programming SUCCESS^^!   ***\nECHO *********************************\nECHO/\nSET /a DUTNUMBER=%DUTNUMBER% + 1\ngoto :START\n\n:FAILURE\nREM Color the screen red\ncolor 4f\nECHO *********************************\nECHO ***    Programming FAILURE^^!   ***\nECHO *********************************\nECHO/\ngoto :START\n\n:DIE\nREM Color the screen red\nCOLOR 4f\nECHO ERROR!\nPAUSE\nGOTO :QUIT\n\n:QUIT\nREM Restore the Color of the screen\nCOLOR 07\nGOTO :eof\n</code></pre>\n<p>Now I just push that esptool.exe file and batchprog-esp32.cmd script into a git repository along with my release binaries.  My contract manufacturer pulls the repo and can program without installing anything.</p>\n"}], "owner": {"reputation": 151, "user_id": 8605976, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/beb437755f3383a5e9dced6d068cff1d?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/8605976/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1599703330, "creation_date": 1571820576, "last_edit_date": 1571967018, "question_id": 58518956, "link": "https://stackoverflow.com/questions/58518956/esp32-flashing-with-c-and-not-python", "title": "esp32 flashing with c and not python", "body": "<p>I want to <code>flash</code> my binaries to an esp32. Is there an easy way to <code>flash</code> binaries, without using the <code>esptool.py</code> tool?  Is my only option to port <code>esptool.py</code> myself?</p>\n"}, {"tags": ["c", "multithreading", "sockets", "multiprocessing", "pthreads"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1571818493, "post_id": 58518116, "comment_id": 103362735, "body": "Do you use datagrams (UDP) or a stream (TCP)? A thread pool might be useful if processing the response must be done while receiving the next response. Otherwise one thread for the <i>other stuff</i> and one  for receiving and processing the responses would be sufficient. If you really need parallel processing of the responses: Don&#39;t use multiple threads that read from the same file descriptor. I suggest to use one thread that reads from the fd until it has received a complete response and pass the response to a thread for processing. If you use a stream you should also handle partial reads."}, {"owner": {"reputation": 1195, "user_id": 2801516, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/f24c327fa4c8280ba681792842dee995?s=128&d=identicon&r=PG&f=1", "display_name": "Shaz", "link": "https://stackoverflow.com/users/2801516/shaz"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571819194, "post_id": 58518116, "comment_id": 103363080, "body": "I am using: socket(AF_INET, SOCK_STREAM, 0) i.e. TCP streaming. The responses are incoming in order and I&#39;d like to process one after the other (not parallel). Currently, I am thinking with the above approach is only one thread handling all the responses (note: cause server is sending them fast one after other in while loop)? ...is it hard to tell with limited code?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1571822646, "post_id": 58518116, "comment_id": 103364857, "body": "<code>recv()</code> can return (i) a positive value, indicating success; (ii) zero, indicating end of stream; (iii) a negative value, indicating an error. It is therefore totally incorrect to merely test the result for non-zero. It is also hard to see why you think you need multiple receiving threads for a single socket."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571827397, "post_id": 58518116, "comment_id": 103367357, "body": "@Shaz Please <a href=\"https://stackoverflow.com/posts/58518116/edit\">edit</a> your question and include all additional information there. You don&#39;t need more than one thread for receiving and processing the responses if you want to do it in order one after the other. If you don&#39;t enable non-blocking mode, the <code>send</code> operation in your server will block automatically if the client doesn&#39;t <code>recv</code> the data fast enough. To get useful recommendations you should add a rough description of your communication protocol including the size of the data and how you identify the start of a new response."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571827586, "post_id": 58518116, "comment_id": 103367451, "body": "Of course your server must be able to handle several clients either by using a separate thread or process per connection or by using <code>select</code> and non-blocking operations. On both ends your code must be able to handle partial reads, e.g. only half of the response with the rest following later."}], "owner": {"reputation": 1195, "user_id": 2801516, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/f24c327fa4c8280ba681792842dee995?s=128&d=identicon&r=PG&f=1", "display_name": "Shaz", "link": "https://stackoverflow.com/users/2801516/shaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571817362, "creation_date": 1571817362, "question_id": 58518116, "link": "https://stackoverflow.com/questions/58518116/client-server-how-to-handle-incoming-server-responses-while-loop-in-multi-t", "title": "Client-Server: How to handle incoming server response(s) (while loop) in multi-threads in client? [C Program]", "body": "<p>So I have a server that sends a response object in a while loop.</p>\n\n<ul>\n<li>The while loop continues until x number of response objects is sent to the client.</li>\n</ul>\n\n<p>I want to handle the incoming requests in threads (so the client is able to still do other stuff i.e. enter user inputs.)</p>\n\n<p><strong>Current approach: In client I have a 'thread pool' that is randomly creating threads and \n<code>handleNextReceiveClient</code> will handle incoming request.</strong></p>\n\n<pre><code>// client\n\n  int num_handler_threads = 100;  // random number (knowing responses will be less than 100 at any time.)\n\n        int thr_id[num_handler_threads]; /* thread IDs  */\n\n        /* create the request-handling threads */\n        for (i = 0; i &lt; num_handler_threads; i++)\n        {\n            //TO DO\n            // CREATE THREADS - Threads to call handleNextReceiveClient() function\n            pthread_t t;\n            pthread_attr_t attr;\n            pthread_attr_init(&amp;attr);\n            pthread_create(&amp;t, &amp;attr, (void *)(void *)handleNextReceiveClient, (void *)&amp;data1);\n        }\n</code></pre>\n\n<p><strong>Thread function:</strong></p>\n\n<pre><code>void handleNextReceiveClient(void *ptr)\n{\n\n    thdata *data;\n    data = (thdata *)ptr; /* type cast to a pointer to thdata */\n\n    if (recv(data-&gt;sockfd, &amp;response, sizeof(response_t), 0))\n    {\n\n       // Display response  \n       // exit(0); // exit out of THREAD so I am able to use the client while server sends next reponse object in a few seconds.x`  \n\n   }\n    else\n    {\n\n        exit(0);\n    }\n\n    printf(\"\\n break.....\\n\");\n}\n</code></pre>\n\n<p><strong>Server sending response in a while loop</strong></p>\n\n<pre><code>// server\nwhile(numberOfResponseObjects != total) {\n\n    send(response, fdNew); // send a reponse. \n    sleep(3); // wait few seconds before sending next response object to client.\n\n}\n</code></pre>\n\n<p><strong>PROBLEM: What happends</strong>: As soon as the server sends the first response to client thread, it displays as expected but doesn't end the thread and then the next response is displayed until all responses are displayed (WITHOUT) client being able to do anything else in between, only after until all response objects from the server are displayed client is free to do other stuff...</p>\n\n<p><strong>What is wrong with my approach? ideas?</strong></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1571817256, "post_id": 58518052, "comment_id": 103362147, "body": "<code>byte</code> is a datatype, possibly an alias for <code>char</code> or something similar. <i>&quot;what does print_str = &quot;%s*%s%s and print_str = &quot;%s %s%s&quot; mean?&quot;</i> It assigns the address of the string to the <code>char* print_str </code>. Looks like it&#39;s being used for formatted string printing, such as with <code>printf</code>."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571818339, "post_id": 58518052, "comment_id": 103362671, "body": "I guess you didn&#39;t copy the whole function did you ?"}, {"owner": {"reputation": 29, "user_id": 9653834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc315fc964a2a1cfcfde77716513a565?s=128&d=identicon&r=PG&f=1", "display_name": "SKmay", "link": "https://stackoverflow.com/users/9653834/skmay"}, "edited": false, "score": 0, "creation_date": 1571822022, "post_id": 58518052, "comment_id": 103364532, "body": "hi Guillaume, yes, i didnt copy the whole function. the code is snipped for the print_str part that i didnt understand ."}], "owner": {"reputation": 29, "user_id": 9653834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc315fc964a2a1cfcfde77716513a565?s=128&d=identicon&r=PG&f=1", "display_name": "SKmay", "link": "https://stackoverflow.com/users/9653834/skmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571817092, "creation_date": 1571817092, "question_id": 58518052, "link": "https://stackoverflow.com/questions/58518052/byte-declaration-and-meaning-of-sss", "title": "&quot;byte&quot; declaration and meaning of %s*%s%s", "body": "<p>I have snippet from the C code (for LCD display). The code has no error. I just didn't understand some of snippet codes. </p>\n\n<p>In the code below, lcd_size is declared as byte, but why it can use with normal integer in this code <code>if(lcd_size &gt;16)</code> ? </p>\n\n<p>May I know what does \"byte\" do, when as declaration? </p>\n\n<p>what does <code>print_str = \"%s*%s%s</code> and <code>print_str = \"%s %s%s\"</code> mean? </p>\n\n<pre><code>#define LONGEST 60;    \nbyte register(char *temp_str,byte lcd_size,byte userlevel, byte unitsplit)\n{ \n    char temp_str2[LONGEST];\n    char *print_str;  //declares a pointer to a character called \"print_str\"//\n     if (unitsplit) \n        print_str = \"%s*%s%s\"; //what does this line mean? \n\n    else {\n              if (lcd_size &gt; 16) \n                {\n                   print_str = \"%s %s%s\"; //what does this line mean? \n                 } \n              else \n                 {\n                    print_str = \"%s%s%s\"; //what does this line mean? \n                  }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "logging", "protocol-buffers", "proto", "nanopb"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 3788048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fSvcW.jpg?s=128&g=1", "display_name": "Asan", "link": "https://stackoverflow.com/users/3788048/asan"}, "edited": false, "score": 0, "creation_date": 1571820363, "post_id": 58518687, "comment_id": 103363657, "body": "If I understood correctly, isn&#39;t .max_count refer to the maximum number of repetitions you expect (which I don&#39;t know) ? I don&#39;t understand why you set it to 1. I know it is to avoid the callback, but why to 1? Thanks for the explanation @jpa."}, {"owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "reply_to_user": {"reputation": 195, "user_id": 3788048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fSvcW.jpg?s=128&g=1", "display_name": "Asan", "link": "https://stackoverflow.com/users/3788048/asan"}, "edited": false, "score": 1, "creation_date": 1571820851, "post_id": 58518687, "comment_id": 103363902, "body": "@A.San If you only want to encode one sensors submessage at a time, 1 is enough. But yeah, you won&#39;t be able to decode the combined message that way with nanopb, you&#39;d need callbacks for that."}, {"owner": {"reputation": 195, "user_id": 3788048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fSvcW.jpg?s=128&g=1", "display_name": "Asan", "link": "https://stackoverflow.com/users/3788048/asan"}, "edited": false, "score": 0, "creation_date": 1571821284, "post_id": 58518687, "comment_id": 103364147, "body": "Ok, In this case I just need to encode with nanopb and decode elsewhere. So this should do the job of encoding."}], "tags": [], "owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "is_accepted": true, "score": 1, "last_activity_date": 1571819545, "creation_date": 1571819545, "answer_id": 58518687, "question_id": 58518051, "link": "https://stackoverflow.com/questions/58518051/streaming-data-with-protobuf-to-log-file-with-a-header/58518687#58518687", "title": "Streaming data with ProtoBuf to log file with a header", "body": "<blockquote>\n  <p>I want to avoid Pb_callback functions that emerge from using \"repeated\" fields in the .proto</p>\n</blockquote>\n\n<p>Note that you can specify <code>max_count</code> for repeated fields just like you've specified <code>max_size</code> for strings, and then you'll get a simple array instead of a callback.</p>\n\n<blockquote>\n  <p>While if I split it in 2 messages I have not been able to deserialize them in one go with one proto file.</p>\n</blockquote>\n\n<p>Protobuf deserialization needs to know the message type. The most common way to handle this is to have a single top-level message with submessages:</p>\n\n<pre><code>message LogMessage {\n   optional LogHeader header = 1;\n   optional Sensors sensors = 2;\n}\n</code></pre>\n\n<p>Then you can set either or both of the header and sensor fields, and <code>has_header</code> and <code>has_sensors</code> to true or false to indicate whether you want to include that subfield. But no matter the contents, you always serialize and deserialize as <code>LogMessage</code>, so there is no confusion between the different message types.</p>\n\n<blockquote>\n  <p>I would need to know the length of the first two messages, deserialize them and then start from there on with the log.</p>\n</blockquote>\n\n<p>Yeah, that is a common beginner problem with protobuf also. Protobuf messages themselves do not encode their length, so if you have multiple messages in a single file you need to separate them somehow.</p>\n\n<p>A <a href=\"https://developers.google.com/protocol-buffers/docs/techniques\" rel=\"nofollow noreferrer\">quite common way</a> is to add a length prefix, as done by nanopb's <code>pb_encode_delimited()</code> and <code>pb_decode_delimited()</code>. This format is also supported by the C++ protobuf library. However, a drawback of that is that many command line tools like <code>protoc</code> do not support the delimited format, and e.g. Python protobuf library makes decoding them <a href=\"https://stackoverflow.com/questions/43897955/receive-delimited-protobuf-message-in-python-via-tcp\">somewhat complex</a>.</p>\n\n<p>Another option is to make the whole file appear like it was a single message, but write it in multiple parts. Protobufs have the merge feature, that is, if you just append messages after one another, they'll merge together. This can be done by including repeated fields in the <code>LogMessage</code>:</p>\n\n<pre><code>message LogMessage {\n   optional LogHeader header = 1;\n   repeated Sensors sensors = 2 [(nanopb).max_count = 1];\n}\n</code></pre>\n\n<p>Now if you encode multiple copies of the <code>LogMessage</code>, each with a single <code>sensors</code> entry, they'll merge together. Then if you decode the file it will appear like a single <code>LogMessage</code> with multiple <code>sensors</code> entries.</p>\n"}], "owner": {"reputation": 195, "user_id": 3788048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fSvcW.jpg?s=128&g=1", "display_name": "Asan", "link": "https://stackoverflow.com/users/3788048/asan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 58518687, "answer_count": 1, "score": 2, "last_activity_date": 1571819545, "creation_date": 1571817088, "question_id": 58518051, "link": "https://stackoverflow.com/questions/58518051/streaming-data-with-protobuf-to-log-file-with-a-header", "title": "Streaming data with ProtoBuf to log file with a header", "body": "<p>I am trying to stream data to a log file on an SD card on a microcontroller that reads from some sensors and stores the value in the file.</p>\n\n<p>To serialize the data I will be using NanoPB, the protobuf implementation for C which is quite resource efficient.</p>\n\n<p>The log file has the following structure: It needs to write a short header composed of a GUID, and a firmware version. After the header, the stream of data should be continuous and it should log the fields from the sensors but not the header values (this should only occur once and at the beginning).</p>\n\n<p>The limitation is that I can only use one .proto file to serialize and deserialize and I want to avoid Pb_callback functions that emerge from using \"repeated\" fields in the .proto and then using the C implementation of nanopb. <a href=\"https://jpa.kapsi.fi/nanopb/docs/concepts.html\" rel=\"nofollow noreferrer\">https://jpa.kapsi.fi/nanopb/docs/concepts.html</a> .</p>\n\n<p>The implementation i've tried is the following (fields are just examples): </p>\n\n<pre><code>syntax = \"proto3\";\n\nimport \"timestamp.proto\";\nimport \"nanopb.proto\";\n\nmessage LogHeader {\n    string firmware = 1 [(nanopb).max_size = 11];  \n    string GUID = 2 [(nanopb).max_size = 11];       \n}\n\nmessage Sensors {\n    int32 TimeStamp = 3;        \n    // Sensory data\n    int32 Sens1 = 4;\n    int32 Sens2 = 5;\n    int32 Sens3 = 6;\n    int32 Sens4 = 7;\n    int32 Sense5 = 8;\n</code></pre>\n\n<p>}</p>\n\n<p>The idea would be to have a log file that would look like this once processed:</p>\n\n<pre><code>firmware \"1.0.0\"\nGUID \"1231214211321\" (example)\nTimestamp 123123\nSens1 2343\nSens2 13123\nSens3 13443\nSens4 1231\nSens5 190\nTimestamp 123124\nSens1 2345\nSens2 2312\n...\n</code></pre>\n\n<p>But if all fields were to be in the same message the GUID and firmware will be logged every repetition. While if I split it in 2 messages I have not been able to deserialize them in one go with one proto file. I would need to know the length of the first two messages, deserialize them and then start from there on with the log.</p>\n"}, {"tags": ["c", "makefile", "compilation", "static-libraries", "patch"], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1571817516, "creation_date": 1571817516, "answer_id": 58518157, "question_id": 58517878, "link": "https://stackoverflow.com/questions/58517878/how-can-i-efficiently-patch-an-external-library-and-compile-it-in-a-makefile-for/58518157#58518157", "title": "How can I efficiently patch an external library and compile it in a Makefile for a C project?", "body": "<p>I've done exactly this before, when building cross compiler etc with my patches for my operating system kernel. You can use the <code>wget</code> or <code>curl</code> commands in the Makefile. For  example something like</p>\n\n<pre><code># foo.tar.gz needs to be downloaded\nfoo.tar.gz:\n    wget https://download.source.from/here/foo.tar.gz -O foo.tar.gz\n\n# the makefile requires the downloaded file.\nfoo_src/CMakeLists.txt: foo.tar.gz\n    mkdir -p foo_src\n    cd foo_src &amp;&amp; tar xfz ../foo.tar.gz\n\n# patch the library if flag not present\nfoo_patched.flag:\n    cd foo_src &amp;&amp; patch -p1 ../foo.patch\n    touch foo_patched.flag\n\n# this depends on patching\nlibpatched.a: foo_src/CMakeLists.txt foo_patched.flag \n    cd foo_src &amp;&amp; cmake\n    cp foo_src/libfoo.a libpatched.a\n</code></pre>\n\n<p>The Makefile format is very simple - unlike CMake! - the rules just say: \"to generate the file on the left, please build the prerequisites on the right side first. Then execute these commands to actually generate the file on the left hand side\"</p>\n"}], "owner": {"reputation": 351, "user_id": 9279164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c77489561985bcde6095f03a8876243?s=128&d=identicon&r=PG&f=1", "display_name": "es483", "link": "https://stackoverflow.com/users/9279164/es483"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 58518157, "answer_count": 1, "score": 1, "last_activity_date": 1571817516, "creation_date": 1571816509, "question_id": 58517878, "link": "https://stackoverflow.com/questions/58517878/how-can-i-efficiently-patch-an-external-library-and-compile-it-in-a-makefile-for", "title": "How can I efficiently patch an external library and compile it in a Makefile for a C project?", "body": "<p>I'm working on a C project which needs an external open source library.\nIn particular, it needs a version I patched myself in order to add some needed features.</p>\n\n<p>At the moment I'm using a Makefile which expects a statically compiled version of the patched library inside the <code>./lib</code> folder (let's call it <code>libpatched.a</code>), and the corresponding header files in <code>./include/libpatched</code>.\nThe following are the main parts of the aforementioned Makefile:</p>\n\n<pre><code>EXECNAME=MyExecutable\n\nCC=gcc\n\nSRC_DIR=src\nOBJ_DIR=obj\n\nSRC=$(wildcard $(SRC_DIR)/*.c)\n\nOBJ=$(SRC:$(SRC_DIR)/%.c=$(OBJ_DIR)/%.o)\n\nCFLAGS += -Wall -O2 -Iinclude -Iinclude/libpatched\nLDFLAGS += -Llib\nLDLIBS += -lpatched\n\n.PHONY: all clean\n\nall: $(EXECNAME)\n\n$(EXECNAME): $(OBJ_CC)\n    $(CC) $(LDFLAGS) $^ $(LDLIBS) -o $@\n\n$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c\n    $(CC) $(CFLAGS) -c $&lt; -o $@\n\nclean:\n    $(RM) $(OBJ_DIR)/*.o\n</code></pre>\n\n<p>This Makefile is working correctly; however, I was looking for a more flexible solution, which does not need any statically compiled library before <code>make</code> is called.\nWhat I would like to accomplish is having a Makefile which does something like:</p>\n\n<ol>\n<li><p>Download a specific version of the original library (in order to never have any compatibility problem)</p></li>\n<li><p>Apply a patch using <code>patch</code> and a diff file (<code>.patch</code>)</p></li>\n<li><p>Compile the patched library (either statically or dynamically) for the current platform, using <code>cmake</code>, as required by the original library</p></li>\n<li><p>Compile my project, using <code>libpatched</code></p></li>\n</ol>\n\n<p>Are these steps valid in your opinion, or is there a much better way to handle this need for a patched library?</p>\n\n<p>If yes, as I'm not an expert at all in creating Makefiles, is there an easy way to reach this goal by simply leveraging on a properly written Makefile?</p>\n\n<p>Which could be the best way to do so?</p>\n\n<p>Thank you very much in advance.</p>\n"}, {"tags": ["c", "makefile", "c-preprocessor"], "comments": [{"owner": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1571822826, "post_id": 58517780, "comment_id": 103364960, "body": "Please show us what &quot;does not work as expected&quot;. Better yet, read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 31, "user_id": 12181890, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ojx4J8L91w8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyL22fxrHuzRGI4sdKO7TuMrBu2w/photo.jpg?sz=128", "display_name": "Komal R.", "link": "https://stackoverflow.com/users/12181890/komal-r"}, "reply_to_user": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1571822901, "post_id": 58517780, "comment_id": 103364999, "body": "Error: NAME_header.h is not found"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1571825994, "post_id": 58517780, "comment_id": 103366659, "body": "In string literals there is no macro expansion done at any compiling stage."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1571847930, "post_id": 58517780, "comment_id": 103378815, "body": "Depending on your compiler, you can force the include on the command line.  For example GCC and clang both allow <code>--include=some_file.h</code> so you can add that to your <code>CFLAGS</code> (or better, <code>CPPFLAGS</code>).  Note, however, that these includes happen before any other part of the source file is read in so it won&#39;t work if you require them in some other order."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1571848708, "last_edit_date": 1571848708, "creation_date": 1571823293, "answer_id": 58519807, "question_id": 58517780, "link": "https://stackoverflow.com/questions/58517780/how-to-include-makefile-variable-in-include-preprocessor-directive/58519807#58519807", "title": "How to include makefile variable in include preprocessor directive", "body": "<p>A working solution:</p>\n\n<p>Makefile:</p>\n\n<pre><code>DISC := left\nCFLAGS += -DNAME=$(DISC)\n</code></pre>\n\n<p>C or C++ source:</p>\n\n<pre><code>#define STR(s) STR2(s)\n#define STR2(s) #s\n#define EXPAND(s) s\n\n#include STR(EXPAND(NAME)_header.h)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1571824654, "creation_date": 1571824654, "answer_id": 58520221, "question_id": 58517780, "link": "https://stackoverflow.com/questions/58517780/how-to-include-makefile-variable-in-include-preprocessor-directive/58520221#58520221", "title": "How to include makefile variable in include preprocessor directive", "body": "<p><strong>Alternative solution;</strong> consider using a proxy file. See more details below about mixing macros and #include.</p>\n\n<p>In the Makefile, create v_header.h</p>\n\n<blockquote>\n  <p>echo '#include \"${DISC}_header.h\"' > v_header.h</p>\n</blockquote>\n\n<p>Which can be included</p>\n\n<blockquote>\n  <p>#include \"v_header.h\"</p>\n</blockquote>\n\n<p>At this time, the cpp grammer does not allow the usage of macros as part of the '#include' statement. It must be '\"path.h\"' or ''. The \"stringifaction\" operators (both '#' and '##') are not processed for pre-processor directives (line starting with '#')</p>\n\n<pre><code>// Not working\n#include NAME\n#include #NAME\n#include \"#NAME\"\n#include \"##NAME\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12181890, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ojx4J8L91w8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyL22fxrHuzRGI4sdKO7TuMrBu2w/photo.jpg?sz=128", "display_name": "Komal R.", "link": "https://stackoverflow.com/users/12181890/komal-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1571848708, "creation_date": 1571816212, "last_edit_date": 1571824454, "question_id": 58517780, "link": "https://stackoverflow.com/questions/58517780/how-to-include-makefile-variable-in-include-preprocessor-directive", "title": "How to include makefile variable in include preprocessor directive", "body": "<p>I want to include header files based on makefile variables.</p>\n\n<p>MakeFile</p>\n\n<pre><code>DISC     := left\n</code></pre>\n\n<p>Pass this variable to the C program like below:</p>\n\n<pre><code>CFLAGS += -DNAME=\\\"$(DISC)\\\"\n</code></pre>\n\n<p>In main.c, need to include header for correct disc based on makefile variable.</p>\n\n<p>Is it possible to do</p>\n\n<pre><code>#include \"NAME_header.h\" \n</code></pre>\n\n<p>(where NAME is passed from makefile)</p>\n\n<p>I am getting compilation error\nError: NAME_header.h is not found.</p>\n\n<p>Is this really possible to include header files in this way?</p>\n"}, {"tags": ["c", "visual-c++"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1571815912, "post_id": 58517576, "comment_id": 103361488, "body": "The expression <code>(const te_expr*[]){__VA_ARGS__}</code> is a <a href=\"https://en.cppreference.com/w/c/language/compound_literal\" rel=\"nofollow noreferrer\"><i>compound literal</i></a>, and there&#39;s really no nice way to backport that feature as used in the macro for old pre-C99 compilers. VS2005 is getting very old by now, and there are free variants of more modern and up-to-date Visual Studio versions that handle C99 much better. Please consider to update Visual Studio."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571815993, "post_id": 58517576, "comment_id": 103361536, "body": "Also for future questions please copy-paste the actual error message you get, in full and complete. Don&#39;t retype it."}, {"owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571816274, "post_id": 58517576, "comment_id": 103361661, "body": "@Someprogrammerdude Thanks for the advice, but at the moment I can&#39;t update visual studio, the software must be able to work on visual studio 2005"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571816993, "post_id": 58517576, "comment_id": 103362018, "body": "Actually, it&#39;s not possible <i>at all</i> in older compilers, as vararg macros and <code>__VA_ARGS__</code> is a C99 addition. You could make a new vararg <i>function</i> <code>new_expr_va</code> where you pass a null-terminated list of <code>te_expr *</code> arguments, and which creates the array and calls the real <code>new_expr</code> function, but there&#39;s no way to create a macro like the one shown."}, {"owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571817295, "post_id": 58517576, "comment_id": 103362163, "body": "@Someprogrammerdude please put the code in the answer so that I can accept it, for me it is not important that it is a macro, I can replace it with any code."}], "answers": [{"comments": [{"owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "edited": false, "score": 0, "creation_date": 1571819534, "post_id": 58518311, "comment_id": 103363249, "body": "I&#39;ve tried you code, but I have this error: 1&gt;.\\tinyexpr.c(117) : warning C4013: &#39;va_start&#39; undefined; assuming extern returning int 1&gt;.\\tinyexpr.c(120) : warning C4013: &#39;va_arg&#39; undefined; assuming extern returning int 1&gt;.\\tinyexpr.c(120) : error C2275: &#39;te_expr&#39;: illegal use of this type as an expression"}, {"owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "edited": false, "score": 0, "creation_date": 1571820305, "post_id": 58518311, "comment_id": 103363640, "body": "I&#39;m sorry I&#39;m missing #include &lt;stdarg.h&gt;,  but &quot; 1&gt;.\\tinyexpr.c(120) : error C2275: &#39;te_expr&#39;: illegal use of this type as an expression&quot;  error remains"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1571818111, "creation_date": 1571818111, "answer_id": 58518311, "question_id": 58517576, "link": "https://stackoverflow.com/questions/58517576/how-to-convert-c-code-for-old-visual-studio-2005-especially-the-tinyexpr-source/58518311#58518311", "title": "How to convert C code for old Visual Studio 2005, especially the TinyExpr source code", "body": "<p>As I said in a comment there's really no nice way to do this in older compiler.</p>\n\n<p>One possible way is to use a wrapper vararg function, which creates the array dynamically, call the real <code>new_expr</code> function, and then free's the temporary array.</p>\n\n<p>Perhaps something like</p>\n\n<pre><code>te_expr *new_expr_va(const int type, ...) {\n    re_expr *result = NULL;  /* The resulting expression structure to return */\n    size_t argument_count = 0;  /* The number of te_expr arguments passed */\n\n    /*\n     * We do two passes over the arguments, once to get the number of them,\n     * and once to get the actual values.\n     */\n\n    /* First get the number of arguments */\n    {\n        va_list va;\n\n        va_start(va, type);\n\n        /* Loop until we get a null pointer */\n        while (va_arg(va, te_expr *) != NULL)\n            ++argument_count;\n\n        va_end(va);\n    }\n\n    /* Now allocate the array */\n    te_expr **parameters = malloc(argument_count * sizeof(te_expr *));\n\n    /* And populate the array */\n    {\n        va_list va;\n        size_t index = 0;\n        te_expr *expr;\n\n        va_start(va, type);\n\n        /* Get all arguments and add to the allocated array */\n        while ((expr = va_arg(va, te_expr *)) != NULL)\n            parameters[index++] = expr;\n\n        va_end(va);\n    }\n\n    /* Now we call the actual function */\n    result = new_expr(type, parameters);\n\n    /* Free the memory we allocated for the array */\n    free(parameters);\n\n    /* And return the result */\n    return result;\n}\n</code></pre>\n\n<p>Can be used such as</p>\n\n<pre><code>/* Argument list must be terminated by a NULL */\nnew_expr_va(TE_FUNCTION1 | TE_FLAG_PURE, base(s), NULL);\n</code></pre>\n\n<p>Note that this is all untested and doesn't have any kind of error checking.</p>\n"}], "owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58518311, "answer_count": 1, "score": 0, "last_activity_date": 1571818111, "creation_date": 1571815555, "question_id": 58517576, "link": "https://stackoverflow.com/questions/58517576/how-to-convert-c-code-for-old-visual-studio-2005-especially-the-tinyexpr-source", "title": "How to convert C code for old Visual Studio 2005, especially the TinyExpr source code", "body": "<p>I want to convert the source code of \nTinyExpr (<a href=\"https://github.com/codeplea/tinyexpr\" rel=\"nofollow noreferrer\">https://github.com/codeplea/tinyexpr</a>) in\na C compatible code for Visual Studio 2005 ( I think it is \nC89/90 compliant).\nIn particular I have a problem to convert this macro in ( present in tinyexpr.c ):</p>\n\n<pre><code>#define NEW_EXPR(type, ...) new_expr((type), (const te_expr*[]){__VA_ARGS__})\n</code></pre>\n\n<p>with: </p>\n\n<pre><code>typedef struct te_expr {\n    int type;\n    union {double value; const double *bound; const void *function;};\n    void *parameters[1];\n} te_expr;\n\nstatic te_expr *new_expr(const int type, const te_expr *parameters[]) {\n ...\n}\n\nstatic te_expr *base(state *s) {\n  ...\n}\n</code></pre>\n\n<p>The problem arise in the calling: <code>NEW_EXPR(TE_FUNCTION1 | TE_FLAG_PURE, base(s));</code>\nwhere I have a :</p>\n\n<blockquote>\n  <p>error C2059: sintax error : '{'</p>\n</blockquote>\n"}, {"tags": ["c", "floating-point", "int", "void-pointers"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571812578, "post_id": 58516724, "comment_id": 103359837, "body": "In which way did it fail to use the obvious <code>*((float*)token) = *((float*)value1) - *((int*)value2);</code> or the more explicit <code>*((float*)token) = *((float*)value1) - 1.0*(*((int*)value2));</code> ?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1571813143, "post_id": 58516724, "comment_id": 103360097, "body": "Is there any particular reason to pass those two numeric values as <code>void *</code>? Can&#39;t you declare a function  accepting two <code>float</code>s (or <code>double</code>s)?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1571813365, "post_id": 58516724, "comment_id": 103360197, "body": "You need to fix the problem at the point where the function is called. But you haven&#39;t shown the function call. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571813501, "post_id": 58516724, "comment_id": 103360254, "body": "user3386109 Is on to something. Please explain how much and which influence you have on the source of those numbers. Can you make somehow sure that both void pointers actually do already point to floats?"}, {"owner": {"reputation": 167, "user_id": 9906573, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w7lBTlmEvHA/AAAAAAAAAAI/AAAAAAAAABo/1iusV_Cxr3s/photo.jpg?sz=128", "display_name": "yosmo78", "link": "https://stackoverflow.com/users/9906573/yosmo78"}, "edited": false, "score": 0, "creation_date": 1571813607, "post_id": 58516724, "comment_id": 103360323, "body": "I have no influence and they must be void pointers."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571813659, "post_id": 58516724, "comment_id": 103360353, "body": "Please <a href=\"https://stackoverflow.com/posts/58516724/edit\">edit</a> that info into your question. It might turn into a dupe of <a href=\"https://stackoverflow.com/a/58281061/7733418\">stackoverflow.com/a/58281061/7733418</a>"}, {"owner": {"reputation": 167, "user_id": 9906573, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w7lBTlmEvHA/AAAAAAAAAAI/AAAAAAAAABo/1iusV_Cxr3s/photo.jpg?sz=128", "display_name": "yosmo78", "link": "https://stackoverflow.com/users/9906573/yosmo78"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1571813785, "post_id": 58516724, "comment_id": 103360426, "body": "@user3386109  the function header is just 2 void pointers as parameters."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571813972, "post_id": 58516724, "comment_id": 103360537, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> by editing your question. Also make sure that the MRE demonstrates all unknowns of your problem. I.e. call the function once with float, int and once with int, float, if that is the case. I assume that <code>token</code> is a parameter, too? The dupe seems more and more likely."}, {"owner": {"reputation": 167, "user_id": 9906573, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w7lBTlmEvHA/AAAAAAAAAAI/AAAAAAAAABo/1iusV_Cxr3s/photo.jpg?sz=128", "display_name": "yosmo78", "link": "https://stackoverflow.com/users/9906573/yosmo78"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571814041, "post_id": 58516724, "comment_id": 103360573, "body": "@Yunnosch you are right, it is a dupe. I couldn&#39;t find your answer when I was searching earlier."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571814083, "post_id": 58516724, "comment_id": 103360596, "body": "With OP comment on my answer, I am now convinced that this is a duplicate. No problem. I only found it because I kind of happened to know. :-)"}, {"owner": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1571972534, "post_id": 58516724, "comment_id": 103423773, "body": "Are there restrictions on the ranges of the int and the float? For example, most practical, everyday integers have several leading zero bits. Their bit pattern as a float would be very small."}, {"owner": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1571972774, "post_id": 58516724, "comment_id": 103423811, "body": "This is not a duplicate because there is a much better chance of their being usable restrictions that will allow a bit pattern to be classified."}, {"owner": {"reputation": 167, "user_id": 9906573, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w7lBTlmEvHA/AAAAAAAAAAI/AAAAAAAAABo/1iusV_Cxr3s/photo.jpg?sz=128", "display_name": "yosmo78", "link": "https://stackoverflow.com/users/9906573/yosmo78"}, "reply_to_user": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1572150541, "post_id": 58516724, "comment_id": 103468889, "body": "@PatriciaShanahan there was no restriction on input, well the restriction was INT_MAX and INT_MIN for ints ;/"}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571813029, "post_id": 58516813, "comment_id": 103360045, "body": "Hmmm, I think you might answer &quot;I don&#39;t kow which is the int and which the float.&quot; in that case allow me to refer to another answer of mine: <a href=\"https://stackoverflow.com/a/58281061/7733418\">stackoverflow.com/a/58281061/7733418</a> (I might actually make that question a dupe-proposal in this case)."}, {"owner": {"reputation": 167, "user_id": 9906573, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w7lBTlmEvHA/AAAAAAAAAAI/AAAAAAAAABo/1iusV_Cxr3s/photo.jpg?sz=128", "display_name": "yosmo78", "link": "https://stackoverflow.com/users/9906573/yosmo78"}, "edited": false, "score": 1, "creation_date": 1571813888, "post_id": 58516813, "comment_id": 103360479, "body": "if that is the case, where there is not enough information. Then I will be forced to just pass extra information in ;( I was trying to avoid doing so."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1571812620, "creation_date": 1571812620, "answer_id": 58516813, "question_id": 58516724, "link": "https://stackoverflow.com/questions/58516724/how-to-cast-void-of-an-int-to-a-float-so-value-is-properly-converted-w-o-know/58516813#58516813", "title": "How to cast void* of an int to a float* so value is properly converted. W/O knowing about the type beforehand", "body": "<p>Don't cast. Convert.</p>\n\n<pre><code>*((float*)token) = *((float*)value1) - 1.0f*(*((int*)value2)); /* to be explicit about it */\n</code></pre>\n\n<p>or just trust the compiler to do math correctly</p>\n\n<pre><code>*((float*)token) = *((float*)value1) - *((int*)value2);\n</code></pre>\n\n<p>Apart from the fact that you need an actual place which <code>token</code> refers to.</p>\n\n<pre><code>anotherfloat = 0.0;\ntoken = &amp;anotherfloat;\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 9906573, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w7lBTlmEvHA/AAAAAAAAAAI/AAAAAAAAABo/1iusV_Cxr3s/photo.jpg?sz=128", "display_name": "yosmo78", "link": "https://stackoverflow.com/users/9906573/yosmo78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "closed_date": 1571814101, "answer_count": 1, "score": 0, "last_activity_date": 1571813719, "creation_date": 1571812250, "last_edit_date": 1571813719, "question_id": 58516724, "link": "https://stackoverflow.com/questions/58516724/how-to-cast-void-of-an-int-to-a-float-so-value-is-properly-converted-w-o-know", "closed_reason": "Duplicate", "title": "How to cast void* of an int to a float* so value is properly converted. W/O knowing about the type beforehand", "body": "<p>I have two values, one an int and one a float pointed to by void pointers (value1 and value2). They are received from a function call in any order. First the float then the int or vice versa. I would like to typecast the int to a float and then perform floating point math between them.</p>\n\n<p>However if you were to typecast the int* to a float* then dereference it, you would get the bit pattern of the number interpreted as a float and it does not go through the int to float conversion. </p>\n\n<p>So I was wondering if there was a clean way to cast one to the other without having to pass extra data about the types then doing a bunch of if statements.</p>\n\n<p>For example</p>\n\n<pre><code>float x = -1.1;//types can be int on input\nint y = 3;     //will be float if other is int\nvoid* value1 = &amp;x;\nvoid* value2 = &amp;y;\nfloat z = 0;\nvoid* token = &amp;z;\n*((float*)token) = *((float*)value1) - *((float*)value2); //but written to work\n</code></pre>\n\n<p>I want *((float*)token) to equal -4.1, but currently it would equal -1.1.</p>\n"}, {"tags": ["c", "malloc", "virtual-memory"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1571812170, "post_id": 58516691, "comment_id": 103359656, "body": "more details of the system are needed..."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1571812225, "post_id": 58516691, "comment_id": 103359684, "body": "operating system + version, compiler version, compiler target architecture..."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1571812382, "post_id": 58516691, "comment_id": 103359748, "body": "I have free memory 16G and could malloc 20G. It depends."}], "answers": [{"tags": [], "owner": {"reputation": 200, "user_id": 10514594, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7feLo-vctLY/AAAAAAAAAAI/AAAAAAAADig/TO_wIG0T0o4/photo.jpg?sz=128", "display_name": "Danish Shakeel", "link": "https://stackoverflow.com/users/10514594/danish-shakeel"}, "is_accepted": true, "score": 4, "last_activity_date": 1571817958, "last_edit_date": 1571817958, "creation_date": 1571812417, "answer_id": 58516772, "question_id": 58516691, "link": "https://stackoverflow.com/questions/58516691/why-cannot-i-allocate-more-memory-than-the-available-in-ram/58516772#58516772", "title": "Why cannot I allocate more memory than the available in RAM?", "body": "<p><code>malloc()</code> does not work this way. <strong>malloc() allocates a single contiguous block of memory</strong>. <br>\nYou are trying to allocate more memory than contiguously available, hence the error.<br></p>\n"}], "owner": {"reputation": 195, "user_id": 11179897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LW0MF.png?s=128&g=1", "display_name": "Sergio6Rey", "link": "https://stackoverflow.com/users/11179897/sergio6rey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58516772, "answer_count": 1, "score": 0, "last_activity_date": 1571817958, "creation_date": 1571812073, "question_id": 58516691, "link": "https://stackoverflow.com/questions/58516691/why-cannot-i-allocate-more-memory-than-the-available-in-ram", "title": "Why cannot I allocate more memory than the available in RAM?", "body": "<p>I was trying to execute a malloc sentence like the following one:</p>\n\n<pre><code>TYPODATO *prof=(TYPODATO *)malloc((size_t)H*V*B2*sizeof(TYPODATO));\n</code></pre>\n\n<p>with being <code>H*V*B2*sizeof(TYPODATO)</code> equal to 13037160840 B = 13.04 GB. If I execute the command <code>free -m</code> in the console to obtain the available memory in MB, I get 13486 MB = 13.486 GB.</p>\n\n<p>However, the previous malloc statement returns a NULL pointer, indicating that such an amount of memory cannot be allocated. The requested amount of memory is not as much as the available in the system, but even if it was I should be able to successfully allocate it, cause the system can use the virtual memory. Why is not the system using the virtual memory in this case?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571812402, "post_id": 58516636, "comment_id": 103359760, "body": "Declare a pointer-to-pointer (e.g. <code>char **lines;</code>), allocate some initial number of pointers, assign them to lines. Then read each line with (e.g. <code>fgets()</code>), trim the newline, allocate based on <code>length+1</code>, assign the new memory to <code>lines[next]</code> and copy from your buffer filled by <code>fgets()</code> to <code>lines[next]</code>. You keep count of the number of pointers and when <code>used == available</code>, you <code>realloc (lines, ...</code> doubling the number of pointers and keep going. See <a href=\"https://stackoverflow.com/questions/50778328/how-can-i-read-a-known-number-of-strings-of-unknown-size-from-a-txt-file-and-st\">this answer</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571812552, "post_id": 58516636, "comment_id": 103359823, "body": "Or this one <a href=\"https://stackoverflow.com/questions/46656208/reading-an-unknown-number-of-lines-with-unknown-length-from-stdin\">Reading an unknown number of lines with unknown length from stdin</a>  <code>stdin</code> is just a file-stream, so open a file and replace <code>stdin</code> with your file stream pointer."}, {"owner": {"reputation": 3, "user_id": 12258633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FuHju3aHOvQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdh-TdUHN2aaC7Hjn6f5AsoCI095Q/photo.jpg?sz=128", "display_name": "Luk&#225;\u0161 Pavl&#237;k", "link": "https://stackoverflow.com/users/12258633/luk%c3%a1%c5%a1-pavl%c3%adk"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571813335, "post_id": 58516636, "comment_id": 103360185, "body": "@DavidC.Rankin thank you for your answer. I should have been more clear with question. I&#39;m not by far an expert in C but reading a file with unknown number of lines is not a problem for me. My question is more about how to read the separate parts of the example file possibly without using large number of if-else or nested loops. Again I apologize for misleading you."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571815094, "post_id": 58516636, "comment_id": 103361108, "body": "Okay, that not much worse at all. Once you read the line into your buffer (I&#39;d just use a simple char array of 2048 or so chars (enough to hold the longest anticipated line -- and then doubled). Then depending on what your delimiters are (a space, a comma, or comma-space, etc...) you can either use a &#39;start&#39; and &#39;end&#39; pointer to walk down your buffer bracketing and copying separate words (tokens). (you can use <code>strcspn()</code> and <code>strspn()</code> to the same end) Or you can use <code>strtok()</code> to separate on the delimiters (or <code>strsep()</code> if you must preserve empty-fields)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571815290, "post_id": 58516636, "comment_id": 103361196, "body": "You may want to <a href=\"https://stackoverflow.com/questions/54261257/splitting-a-string-and-returning-an-array-of-strings/54263440#54263440\">Look Here</a> for an example. (there are many ways to do it)"}], "answers": [{"tags": [], "owner": {"reputation": 1957, "user_id": 12056564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec003d02adbcf6a3065097f6f29fa29?s=128&d=identicon&r=PG&f=1", "display_name": "Gerd", "link": "https://stackoverflow.com/users/12056564/gerd"}, "is_accepted": true, "score": 0, "last_activity_date": 1571836698, "creation_date": 1571836698, "answer_id": 58523808, "question_id": 58516636, "link": "https://stackoverflow.com/questions/58516636/reading-file-containing-multiple-data-formats/58523808#58523808", "title": "Reading file containing multiple data formats", "body": "<p>You could read the file line by line and check every time if a new section starts. If this is the case, you allocate new memory for a new section and read all the following lines to the data structure for that new section. </p>\n\n<p>For dynamic memory allocation, you will need some counters so you know how many lines per section and how many sections in total you have read. </p>\n\n<p>To illustrate the idea (no complete code):</p>\n\n<pre><code>typedef struct {\n    int count;\n    char **lines;\n} tSection;\n\nint section_counter = 0;\ntSection *sections = NULL;\ntSection *current_section = NULL;\nchar line[MAXLINE];\n\nwhile (fgets(line, MAXLINE, file)) {\n    if (isalpha(line[0])) {  // if line is identifier, start new section\n        sections = realloc(sections, sizeof(tSection)*(section_counter+1));\n        current_section = &amp;sections[section_counter];\n        current_section-&gt;lines = NULL;\n        current_section-&gt;count = 0;\n        section_counter++;\n    }\n    else {  // if line contains data, add new line to structure of current section\n        current_section-&gt;lines = realloc(current_section-&gt;lines, sizeof(char*)*(current_section-&gt;count+1));\n        current_section-&gt;lines[current_section-&gt;count] = malloc(sizeof(char)*MAXLINE);\n        strcpy(current_section-&gt;lines[current_section-&gt;count], line);\n        current_section-&gt;count++;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 1264830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a84fd83d4de659ff527d252d06b98d?s=128&d=identicon&r=PG&f=1", "display_name": "AliA", "link": "https://stackoverflow.com/users/1264830/alia"}, "is_accepted": false, "score": 0, "last_activity_date": 1572045282, "creation_date": 1572045282, "answer_id": 58566753, "question_id": 58516636, "link": "https://stackoverflow.com/questions/58516636/reading-file-containing-multiple-data-formats/58566753#58566753", "title": "Reading file containing multiple data formats", "body": "<p>If each section in the file has a fixed format and the section header has a fixed format, you can use fscanf and a state machine based approach. For example in the code below, the function readsec reads a section based on the parameters passed to it. The arguments to readsec depends on which state it is in.</p>\n\n<pre><code>void readsec(FILE* f, const char* fmt, int c, char sec) {\n    printf(\"\\nReading section %c\\n\",sec);\n    int data[3];\n    int ret=0;\n    while ((ret=fscanf(f, fmt, &amp;data[0], &amp;data[1], &amp;data[2]))!=EOF){\n        if (ret!=c) {\n            return;\n        }\n        // processData(sec, c, &amp;data); &lt;-- process read data based on section\n    }\n}\n\n\nint main() {\n    FILE * f = fopen(\"file\",\"r\");\n    int ret = 0;\n    char sect = 0;\n\n    while ((ret=fscanf(f, \"%c%*c\\n\", &amp;sect))!=EOF){\n        switch (sect) {\n            case 'A':\n                readsec(f, \"%d\", 1, 'A');break;\n            case 'B':\n                readsec(f, \"%d %d\", 2, 'B');break;\n            case 'C':\n                readsec(f, \"%d %d %d\", 3, 'C');break;\n            default:break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12258633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FuHju3aHOvQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdh-TdUHN2aaC7Hjn6f5AsoCI095Q/photo.jpg?sz=128", "display_name": "Luk&#225;\u0161 Pavl&#237;k", "link": "https://stackoverflow.com/users/12258633/luk%c3%a1%c5%a1-pavl%c3%adk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 58523808, "answer_count": 2, "score": 0, "last_activity_date": 1572045282, "creation_date": 1571811827, "question_id": 58516636, "link": "https://stackoverflow.com/questions/58516636/reading-file-containing-multiple-data-formats", "title": "Reading file containing multiple data formats", "body": "<p>I'm supposed to read a file in C with a structure that looks like this</p>\n\n<pre><code>A:\n1\n2\n3\n4\nB:\n1 1\n2 2\n3 3\n4 4\nC:\n1 1 1\n2 2 2\n3 3 3\n4 4 4\n</code></pre>\n\n<p>The file is always separated into three parts and each part starts with an identifier (A:, B:,..).\nIdentifier is followed by unspecified number of rows containing data. But in each part the format of the data is different. Also it's not just integers but that's not important in this question. </p>\n\n<p>I don't have a problem reading the file. My question is what would be an optimal way to read such a file? It can contain thousands of rows or even more parts than just three. The result should be for example string arrays each containing rows from a different part of the file.</p>\n\n<p>I didn't post any code because I don't need/want you to post any code either. Idea is good enough for me.</p>\n"}, {"tags": ["c", "pointers", "malloc", "global-variables"], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1571811190, "post_id": 58516374, "comment_id": 103359288, "body": "&quot;<i>stored [...] its reference</i>&quot; better word this as &quot;stored its address&quot;. Although &quot;references&quot; do not exist in C, they do in C++, and are something different, and as C and C++ are cousins, this might cause confusion."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1571811455, "post_id": 58516374, "comment_id": 103359390, "body": "@alk I agree with you. Thank you."}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 3, "last_activity_date": 1571811254, "last_edit_date": 1571811254, "creation_date": 1571810539, "answer_id": 58516374, "question_id": 58516364, "link": "https://stackoverflow.com/questions/58516364/what-happens-to-a-local-pointer-variable-inside-a-function-that-has-been-dynamic/58516374#58516374", "title": "What happens to a local pointer variable inside a function that has been dynamically allocated?", "body": "<blockquote>\n  <p>Does the data (5 in this case) live on in the heap even though the\n  pointer is destroyed?</p>\n</blockquote>\n\n<p>Yes, it is called memory leak. You allocated memory and stored its reference in pointer <code>p</code>, when <code>p</code> is destroyed you lost only the reference to allocated memory introducing a memory leak.</p>\n"}, {"tags": [], "owner": {"reputation": 3038, "user_id": 1383932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTWBS.png?s=128&g=1", "display_name": "fiveelements", "link": "https://stackoverflow.com/users/1383932/fiveelements"}, "is_accepted": false, "score": 2, "last_activity_date": 1571810984, "creation_date": 1571810984, "answer_id": 58516457, "question_id": 58516364, "link": "https://stackoverflow.com/questions/58516364/what-happens-to-a-local-pointer-variable-inside-a-function-that-has-been-dynamic/58516457#58516457", "title": "What happens to a local pointer variable inside a function that has been dynamically allocated?", "body": "<p>Memory allocated using <code>malloc()</code> or <code>calloc()</code> is not freed automatically. You have to call <code>free()</code> explicitly to de-allocate the memory.</p>\n\n<pre><code>// Allocate\nint* p = (int*)malloc(10 * sizeof(int)); \n\n// De-allocate\nfree(p);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1571824270, "creation_date": 1571824270, "answer_id": 58520091, "question_id": 58516364, "link": "https://stackoverflow.com/questions/58516364/what-happens-to-a-local-pointer-variable-inside-a-function-that-has-been-dynamic/58520091#58520091", "title": "What happens to a local pointer variable inside a function that has been dynamically allocated?", "body": "<p>In this function</p>\n\n<pre><code>void testing(){\n   int *p = malloc(sizeof(int));\n   *p = 5;\n}\n</code></pre>\n\n<p>the local variable (pointer) <code>p</code> has the automatic storage duration. </p>\n\n<blockquote>\n  <p>For such an object that does not have a variable length array type,\n  its lifetime extends from entry into the block with which it is\n  associated until execution of that block ends in any way.(the C\n  Standard).</p>\n</blockquote>\n\n<p>The object that occupies the allocated memory with malloc has the allocated memory duration. </p>\n\n<blockquote>\n  <p>The lifetime of an allocated object extends from the allocation until\n  the deallocation. (the C Standard).</p>\n</blockquote>\n\n<p>So as the memory was not explicitly deallocated then the lifetime of the object extends until the program will be finished. You can not access the object or reuse the allocated memory because the address of it stored in the local variable <code>p</code>  is lost after exiting the function. This situation invokes a memory leak.</p>\n"}], "owner": {"reputation": 381, "user_id": 11352579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f766d9ac410a6ecf7559b6300e2a28dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/11352579/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1571824270, "creation_date": 1571810484, "last_edit_date": 1571810563, "question_id": 58516364, "link": "https://stackoverflow.com/questions/58516364/what-happens-to-a-local-pointer-variable-inside-a-function-that-has-been-dynamic", "title": "What happens to a local pointer variable inside a function that has been dynamically allocated?", "body": "<p>I'm curious to know what happens if you declare an int pointer inside a function, and then dynamically allocate it using malloc</p>\n\n<pre><code>void testing(){\n   int *p = malloc(sizeof(int));\n   *p = 5;\n}\n</code></pre>\n\n<p>Does the data (5 in this case) live on in the heap even though the pointer is destroyed after the function is finished executing?</p>\n"}, {"tags": ["c", "stm32", "keil"], "comments": [{"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1572533973, "post_id": 58516098, "comment_id": 103597232, "body": "please format your code properly, this is just unreadable. (hint it&#39;s probably something with mixing tabs and spaces)"}, {"owner": {"reputation": 13, "user_id": 12134644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e8ed13447eca7f7e513075181812e9b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan Khedkar", "link": "https://stackoverflow.com/users/12134644/mohan-khedkar"}, "reply_to_user": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1572580513, "post_id": 58516098, "comment_id": 103612231, "body": "@TarickWelling,thanks for your response sir.First time i asked question in this environment,so sorry for the mistake done in writing code.Now i edited it please check it once."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12134644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e8ed13447eca7f7e513075181812e9b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan Khedkar", "link": "https://stackoverflow.com/users/12134644/mohan-khedkar"}, "edited": false, "score": 0, "creation_date": 1572527500, "post_id": 58516972, "comment_id": 103593479, "body": "@Petitjean thanks for your  response sir,i refer your suggestion and made some changes in my code as given above,please check it once and correct me.By this code i am getting ascii value of each digit and stored in a array but when i am trying to check it on hyperterminal or docklight ,it shows garbage value.Any suggestion over it sir?"}], "tags": [], "owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "is_accepted": false, "score": 0, "last_activity_date": 1571815440, "last_edit_date": 1571815440, "creation_date": 1571813348, "answer_id": 58516972, "question_id": 58516098, "link": "https://stackoverflow.com/questions/58516098/conversion-of-decimal-to-string/58516972#58516972", "title": "Conversion of decimal to string", "body": "<p>Generally speaking, to convert an integer to a string, you can use the <code>sprintf</code> function. It should be available in <code>newlib</code>and even <code>newlib-nano</code> standard C libraries.</p>\n\n<p>However my guess here is that you have an array of integers where each element is a number between 0 and 9 ?</p>\n\n<p>If this is true you have several issues: you seem to handle the variable <code>n</code> like an integer and not an address. Also your string should be one element longer and composed of chars.</p>\n\n<p>You may do something like this:</p>\n\n<pre><code>char a[11];\nfor(i=0;i&lt;10;i++)\n{\n   a[i]=n[i]%10 +'0'; \n}\na[11]='\\0';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1571850908, "post_id": 58522544, "comment_id": 103380133, "body": "<code>str[INT_MAX];</code> - this is creating a VERY VERY BIG string. You don&#39;t want <code>INT_MAX</code> bytes, you want enough bytes to store <code>INT_MAX</code> in base-10 representation, that is <code>log10(INT_MAX)</code>, which is like 10 characters for 32-bit <code>int</code>. So <code>char str[11]</code> is enough."}, {"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571857020, "post_id": 58522544, "comment_id": 103382731, "body": "@KamilCuk feel free to add to the post. It was just a quick bit of code which at least didn&#39;t have a buffer overflow in it. But yeah <code>INT_MAX</code> is quite stupid."}, {"owner": {"reputation": 13, "user_id": 12134644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e8ed13447eca7f7e513075181812e9b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan Khedkar", "link": "https://stackoverflow.com/users/12134644/mohan-khedkar"}, "edited": false, "score": 0, "creation_date": 1572524998, "post_id": 58522544, "comment_id": 103592029, "body": "@Tarick Welling,thanks for your response sir.I used this snprintf(str, sizeof(str), &quot;%d&quot;, yourToBeConvertedNumber);  but it just display  ASCII value ,I want to transmit this ASCII value in matlab for that we have to store this value in a array,so how can i do it?"}, {"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1572534131, "post_id": 58522544, "comment_id": 103597337, "body": "of course it displays garbage. What is <code>0x30 + 9</code> and what is different when you do <code>0x30 + 10</code>? You didn&#39;t read/do the last part of the answer"}, {"owner": {"reputation": 13, "user_id": 12134644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e8ed13447eca7f7e513075181812e9b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan Khedkar", "link": "https://stackoverflow.com/users/12134644/mohan-khedkar"}, "edited": false, "score": 0, "creation_date": 1572580041, "post_id": 58522544, "comment_id": 103612158, "body": "@Tarick Welling,thanks for your quick response sir,0x30+9 this is for taking ascii value of 9.Initially i get decimal value like 3695 and converting each digit into ascii by seperating each digit."}], "tags": [], "owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "is_accepted": false, "score": 3, "last_activity_date": 1571850743, "last_edit_date": 1571850743, "creation_date": 1571832564, "answer_id": 58522544, "question_id": 58516098, "link": "https://stackoverflow.com/questions/58516098/conversion-of-decimal-to-string/58522544#58522544", "title": "Conversion of decimal to string", "body": "<p>The error is produced by:</p>\n\n<pre><code>n = n / 10;\n</code></pre>\n\n<p>What this would do if <code>n</code> was a pointer (<code>int* n</code>) is that it would repoint <code>n</code> to a location one tenth the original number. <a href=\"https://www.tutorialspoint.com/cprogramming/c_arrays.htm\" rel=\"nofollow noreferrer\">You will need to begin using normal array operators if you want your code to work properly.</a></p>\n\n<p>The second problem you have is the following:\nYou declare <code>n</code> as a array of 10 integers of type and with <code>int</code>.</p>\n\n<pre><code>int n[10];\n</code></pre>\n\n<p>Then in your for loop you try to do this:</p>\n\n<pre><code>n &gt; 0; \n</code></pre>\n\n<p>This is an invalid operation as <code>n</code> wil decay into a pointer and as such the address of your array is compared to <code>0</code>. This will always evaluate as TRUE!</p>\n\n<p>A good way to convert a integer to a string (char array) is <a href=\"https://stackoverflow.com/a/8257728/8548828\">this answer</a>.\nIn your sitaution that would be </p>\n\n<pre><code>int yourToBeConvertedNumber;\nchar str[INT_MAX]; // or any other reasonable upper bound you have set for the input data.\nsnprintf(str, sizeof(str), \"%d\", yourToBeConvertedNumber);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12134644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e8ed13447eca7f7e513075181812e9b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan Khedkar", "link": "https://stackoverflow.com/users/12134644/mohan-khedkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572580279, "creation_date": 1571809024, "last_edit_date": 1572580279, "question_id": 58516098, "link": "https://stackoverflow.com/questions/58516098/conversion-of-decimal-to-string", "title": "Conversion of decimal to string", "body": "<p>I'm trying to convert a decimal value into a string. I use the STM32CubeIDE IDE but am getting an error like <em>'Invalid binary operator'</em>. I'm able to set <code>&amp;n</code> to the decimal value <code>3695</code>.  I need to convert that into a string. How would I do that?</p>\n\n<pre><code>void main() \n{\n\n    uint8_t TxArr;\n    uint16_t Data;\n    int a[10];\n    int i;\n   while (1)\n   {\n     HAL_I2C_Master_Transmit(&amp;hi2c1,0x16, &amp;TxArr, 1, 1000);\n     HAL_I2C_Master_Receive(&amp;hi2c1, 0x17, &amp;Data, 2, 1000);\n     for(i=0;i&lt;4;i++)\n      {\n      a[i]=Data%10+0x30;     //value in Data is 3695.\n      Data=Data/10;\n      HAL_UART_Transmit(&amp;huart3, a[i], 11, 100);\n      HAL_Delay(300);\n      }\n\n      }\n</code></pre>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "edited": false, "score": 0, "creation_date": 1571808864, "post_id": 58516041, "comment_id": 103358496, "body": "What is the question?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1571809221, "post_id": 58516041, "comment_id": 103358579, "body": "If you want to print all prime numbers between <code>l</code> and <code>u</code> you must do the check <code>x == i</code> inside the loop from <code>l</code> to <code>u</code>. At the moment, you return a single value (but only if <code>i==x</code>; you should return a useful value for all paths through the function) and print that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11802931"}, "edited": false, "score": 0, "creation_date": 1571810325, "post_id": 58516041, "comment_id": 103358958, "body": "print prime numbers between two numbers a and b including a and b"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11802931"}, "edited": false, "score": 0, "creation_date": 1571810366, "post_id": 58516041, "comment_id": 103358975, "body": "ex &gt;between [3 and 23 ] 3 5 7 11 13 17 19 23"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11802931"}, "edited": false, "score": 0, "creation_date": 1571811064, "post_id": 58516136, "comment_id": 103359246, "body": "IT CLEARED ALL MY DOUBTS ABOUT 4 TYPES OF FUCTIONS ."}], "tags": [], "owner": {"reputation": 3038, "user_id": 1383932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTWBS.png?s=128&g=1", "display_name": "fiveelements", "link": "https://stackoverflow.com/users/1383932/fiveelements"}, "is_accepted": false, "score": 1, "last_activity_date": 1571809205, "creation_date": 1571809205, "answer_id": 58516136, "question_id": 58516041, "link": "https://stackoverflow.com/questions/58516041/find-prime-numbers-including-and-between-two-numbers-using/58516136#58516136", "title": "find prime numbers including and between two numbers using", "body": "<p>You are printing the value returned from <code>check_prime()</code> and that will be one value only. If you want to print all the prime numbers in a range, i suggest instead of returning value from <code>check_prime()</code> you print the value in that function.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid check_prime(int l,int u){\n  int x,i;\n\n  for(x=l;x&lt;=u;x++){\n    for(i=2;i&lt;x;i++){\n      if(x%i==0)\n        break;\n    }\n    if(i==x){\n      printf(\"%d \", x);\n    }\n  }\n\n}\n\nint main(){\n  int x,y;\n  scanf(\"%d%d\",&amp;x,&amp;y);\n  check_prime(x,y);\n  return 0;\n}\n</code></pre>\n\n<p>Here is the executable code: <a href=\"https://repl.it/@fiveelements/PrintPrimeNumbersInARange?language=c\" rel=\"nofollow noreferrer\">https://repl.it/@fiveelements/PrintPrimeNumbersInARange?language=c</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11802931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571809455, "creation_date": 1571808655, "last_edit_date": 1571809455, "question_id": 58516041, "link": "https://stackoverflow.com/questions/58516041/find-prime-numbers-including-and-between-two-numbers-using", "title": "find prime numbers including and between two numbers using", "body": "<p>I need to find prime numbers between and including two numbers, using functions.\nFor example, with &lt;&lt;(3 23)>> the output is 3 5 7 11 13 17 19 23 </p>\n\n<p>This is my code so far, but I\u2019m having troubles with it. What am I doing wrong or how can I improve my solution?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint check_prime(int l,int u){\n    int x, i;\n\n    for (x = l; x &lt;= u; x++){\n        for (i = 2; i &lt; x; i++){\n            if (x % i == 0) break;\n        }\n    }\n    if (i == x) return x;\n}\n\nint main(){\n    int x, y, f;\n    scanf(\"%d%d\", &amp;x, &amp;y);\n    f = check_prime(x, y);\n    printf(\"%d\", f);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "interrupt-handling"], "comments": [{"owner": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 1, "creation_date": 1571808728, "post_id": 58515799, "comment_id": 103358471, "body": "in_irq()? See preempt.h for details"}, {"owner": {"reputation": 109, "user_id": 3743752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a5e61a398d43ee2f39feea323e35fa34?s=128&d=identicon&r=PG&f=1", "display_name": "scopichmu", "link": "https://stackoverflow.com/users/3743752/scopichmu"}, "reply_to_user": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 0, "creation_date": 1571808977, "post_id": 58515799, "comment_id": 103358518, "body": "@Alex Hoppus Thank you!"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 0, "creation_date": 1571904648, "post_id": 58515799, "comment_id": 103396321, "body": "@AlexHoppus, I guess <code>in_interrupt()</code> more generic in this case. Interrupts can be soft."}], "owner": {"reputation": 109, "user_id": 3743752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a5e61a398d43ee2f39feea323e35fa34?s=128&d=identicon&r=PG&f=1", "display_name": "scopichmu", "link": "https://stackoverflow.com/users/3743752/scopichmu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571807053, "creation_date": 1571807053, "question_id": 58515799, "link": "https://stackoverflow.com/questions/58515799/does-linux-have-any-macro-to-check-whether-current-cpu-core-is-executed-in-inter", "title": "Does linux have any macro to check whether current CPU core is executed in interrupt context?", "body": "<p>I have some code which I don't want to be executed from interrupt context. To detect this, I want to trigger BUG() from my code, but I need some macro which will tell me whether my code executed from interrupt handler or not.\nDoes Linux have such macro?</p>\n"}, {"tags": ["c", "sockets", "mqtt", "freertos", "lwip"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1571809108, "post_id": 58515645, "comment_id": 103358549, "body": "Can you explain precisely what you mean by &quot;gracefully closes the socket&quot;? You don&#39;t mean that you call some version of <code>close</code> do you? Do you have some case where a socket can be closed while it&#39;s still in use through a call to <code>lwip_select</code>? That&#39;s <i>definitely</i> not going to work. You can shut the connection down, but you must not close the socket while it&#39;s in use!"}, {"owner": {"reputation": 189, "user_id": 5076401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10153206931477284/picture?type=large", "display_name": "Prashant Ravi", "link": "https://stackoverflow.com/users/5076401/prashant-ravi"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1571810578, "post_id": 58515645, "comment_id": 103359056, "body": "By &quot;gracefully close socket&quot; I mean the MQTT task will finish its job without error and call lwip_close. There is no case when the socket can be closed while its still in use, there are only 2 tasks that are active, the MQTT task and the helper task. MQTT task is responsible for opening, using and closing the socket. The helper task(snippet posted above) will only check if there are any packets to be received, if yes it will wake up MQTT task. However when MQTT task closes the socket and exits, the helper task is still blocking on lwip_select."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1571849111, "post_id": 58515645, "comment_id": 103379383, "body": "Are you asking how to make it so that the task blocked on <code>lwip_select</code> unblocks because you haven&#39;t done anything to make it unblock? Or are you asking why it doesn&#39;t unblock because you&#39;ve done something to make it unblock? If the latter, what did you do to make it unblock? To be clear, the task in <code>lwip_select</code> is <i>not</i> selecting on the socket that you are closing, right? Because if so, you are closing the socket while it&#39;s still in use. Selecting on a socket is using that socket. (The generic answer for how one task can unblock another task in select is to send a dummy byte on a pipe.)"}], "owner": {"reputation": 189, "user_id": 5076401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10153206931477284/picture?type=large", "display_name": "Prashant Ravi", "link": "https://stackoverflow.com/users/5076401/prashant-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571805877, "creation_date": 1571805877, "question_id": 58515645, "link": "https://stackoverflow.com/questions/58515645/lwip-select-blocks-even-after-socket-is-closed", "title": "lwip_select blocks even after socket is closed", "body": "<p>In my current application, I am having an MQTT task, this MQTT task is woken up by another helper task whenever there is data available on the socket. I am currently achieving this by using lwip_select. So whenever there is an event, I use that to trigger a wakeup to MQTT task. </p>\n\n<p>My helper task looks somewhat like this:</p>\n\n<pre><code>...\n...\nfd_set      read_fds;\nfd_set      write_fds;\nfd_set      err_fds;\n\nFD_ZERO (&amp;read_fds);\nFD_ZERO (&amp;write_fds);\nFD_ZERO (&amp;err_fds);\n\nFD_SET  (s, &amp;read_fds);\nFD_SET  (s, &amp;err_fds);\n\nctx-&gt;state = SST_RX_READY;\nwhile( 1 )\n{\n    if (ctx-&gt;state == SST_RX_CLOSING)\n    {\n        ctx-&gt;state = SST_RX_CLOSED;\n        vTaskDelete( NULL );\n    }\n    if( lwip_select( s + 1, &amp;read_fds, &amp;write_fds, &amp;err_fds, NULL ) == -1 )\n    {\n        //if socket is closed lwip_select will return -1\n        vTaskDelete( NULL );\n        return;\n    }\n\n    if( FD_ISSET( s, &amp;read_fds ) )\n    {\n        configASSERT( ctx-&gt;rx_callback );\n        ctx-&gt;rx_callback( ( Socket_t )ctx );\n        //vTaskDelay( 10 ); // delay a little bit to yield time for RX\n    }\n}\n...\n...\n</code></pre>\n\n<p>In the while loop I keep calling lwip_select and the timeout parameter is kept NULL on purpose because I do not want this task to time out at all, there could be long periods of time when there is no data to receive from MQTT. However if my main MQTT task finishes its job and gracefully closes the socket, this helper task is still active and is blocking on lwip_select.</p>\n\n<p>Some extra info:\nOS: Freertos 10.0.1\nHW platform: Cortex m3\nLWIP version: 2.4.0</p>\n\n<p>Any possible leads to solve this will be helpful.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "matrix", "multidimensional-array", "dynamic-arrays"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1571804579, "post_id": 58515425, "comment_id": 103357534, "body": "Use <code>f(A, 3, 3)</code>, don\u2019t dereference the variables."}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1571807424, "post_id": 58515585, "comment_id": 103358140, "body": "C99 introduced <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">variable length arrays (VLAs)</a> and C11 made them optional. So not all compilers will support the code in this answer, but it&#39;s definitely the best solution for compilers that do support it."}], "tags": [], "owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "is_accepted": true, "score": 1, "last_activity_date": 1571805804, "last_edit_date": 1571805804, "creation_date": 1571805432, "answer_id": 58515585, "question_id": 58515425, "link": "https://stackoverflow.com/questions/58515425/unsized-matrixes-in-c-how-to-pass-them-as-an-argument-to-a-function-manipulate/58515585#58515585", "title": "Unsized Matrixes in C: how to pass them as an argument to a function, manipulate and return them in my code?", "body": "<p>Though multi-dimensional arrays have long been second-class citizens in C, modern versions give them much better support. If the array sizes are included prior to the actual array in the list of function parameters, they can form dimensions of that array. Note that <code>A</code> and <code>B</code> are now the <em>last</em> parameter to the function <code>f()</code>:</p>\n\n<pre><code>void f(int w, int h, int m[w][h]);\n\nint main()\n{\n  int A[3][3]={{1,2,3},{4,5, 6},{7,8,9}};\n  int B[3][2]={{1,2},{3, 4}, {5, 6}};\n\n  f(3, 3, A);\n  f(3, 2, B);\n\n  return 0;\n}\n\nvoid f(int w, int h, int m[w][h])\n{\n    int n[w][h];\n\n    int i, j;\n\n    for(int i;i&lt;w;i++)\n    {\n      for(int j;j&lt;h;j++)\n        n[i][j] = m[i][j] + 1;\n      printf(\"%5d\", m[i][j]);\n    }\n}\n</code></pre>\n\n<p>I don't recall which version of C introduced this, but for sure the <code>int **m</code> parameter is incorrect because <code>m</code> is not a pointer to a pointer (or an array of pointers).</p>\n\n<p>It's also important that this syntax doesn't force arrays to be re-ranked according to the parameters, so if an array is <code>[10][3]</code> when you define it, it ought to be <code>[10][3]</code> when you describe it to a function. This is syntactic sugar for array access only.</p>\n"}], "owner": {"reputation": 11, "user_id": 4833616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D2mHo.jpg?s=128&g=1", "display_name": "herbNotz", "link": "https://stackoverflow.com/users/4833616/herbnotz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58515585, "answer_count": 1, "score": 0, "last_activity_date": 1571805804, "creation_date": 1571804261, "last_edit_date": 1571804998, "question_id": 58515425, "link": "https://stackoverflow.com/questions/58515425/unsized-matrixes-in-c-how-to-pass-them-as-an-argument-to-a-function-manipulate", "title": "Unsized Matrixes in C: how to pass them as an argument to a function, manipulate and return them in my code?", "body": "<p>I would like to know how to pass a matrix of variable lines and columns to a function, transform it inside the function and them returning it in C.</p>\n\n<p>Here lies the code I am trying to build to make it happen.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nvoid **f(int **m, int w, int h);\n\nint main()\n{\n  int A[3][3]={{1,2,3},{4,5, 6},{7,8,9}};\n  int B[3][2]={{1,2},{3, 4}, {5, 6}};\n\n  f(A, 3, 3);\n  f(B, 3, 2);\n\n  return 0;\n}\n\nvoid **f(int **m, int w, int h )\n{\n    int i,j;\n    int n[w][h];\n\n    for(i=0;i&lt;w;i++)\n    {\n      for(j=0;j&lt;h;j++)\n        n[i][j] = m[i][j] + 1;\n        printf(\"%5d\", m[i][j]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Whose compilation is returning the following errors:</p>\n\n<blockquote>\n  <p>main.c:20:5: warning: passing argument 1 of \u2018f\u2019 makes pointer from integer without a cast [->Wint-conversion]<br>\n  main.c:13:8: note: expected \u2018int **\u2019 but argument is of type \u2018int\u2019<br>\n  main.c:21:5: warning: passing argument 1 of \u2018f\u2019 makes pointer from integer without a cast [->Wint-conversion]<br>\n  main.c:13:8: note: expected \u2018int **\u2019 but argument is of type \u2018int\u2019<br>\n  Segmentation fault (core dumped) </p>\n</blockquote>\n"}, {"tags": ["c", "dynamic", "static", "scoping"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11088404, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JxF6b_NVkk4/AAAAAAAAAAI/AAAAAAAAAAc/zxDY4qG8WMQ/photo.jpg?sz=128", "display_name": "Sage Thomas", "link": "https://stackoverflow.com/users/11088404/sage-thomas"}, "edited": false, "score": 0, "creation_date": 1571803854, "post_id": 58515302, "comment_id": 103357388, "body": "so if I am analyzing statically  my print out for  line 7 will be z line 13 will be 2.6 line 17 will be z again?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 25, "user_id": 11088404, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JxF6b_NVkk4/AAAAAAAAAAI/AAAAAAAAAAc/zxDY4qG8WMQ/photo.jpg?sz=128", "display_name": "Sage Thomas", "link": "https://stackoverflow.com/users/11088404/sage-thomas"}, "edited": false, "score": 0, "creation_date": 1571804277, "post_id": 58515302, "comment_id": 103357474, "body": "No. The letter printed at 7 will be <code>&#39;e&#39;</code> (aka 101) because that\u2019s the value in <code>a</code> when <code>q()</code> is called, isn\u2019t it? Your values for lines 23 and 17 are correct."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1571803364, "creation_date": 1571803364, "answer_id": 58515302, "question_id": 58515248, "link": "https://stackoverflow.com/questions/58515248/trying-to-understand-the-difference-between-static-and-dynamic-scoping-in-this-c/58515302#58515302", "title": "Trying to understand the difference between static and dynamic scoping in this C program", "body": "<p>At line 7, <code>b</code> refers to the argument to <code>q()</code>; it is the nearest declaration of <code>b</code>.</p>\n\n<p>At line 13, <code>b</code> refers to the local variable.</p>\n\n<p>At line 17, <code>b</code> refers to the global variable; there is no other candidate to use.  </p>\n"}], "owner": {"reputation": 25, "user_id": 11088404, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JxF6b_NVkk4/AAAAAAAAAAI/AAAAAAAAAAc/zxDY4qG8WMQ/photo.jpg?sz=128", "display_name": "Sage Thomas", "link": "https://stackoverflow.com/users/11088404/sage-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 58515302, "answer_count": 1, "score": 1, "last_activity_date": 1571805601, "creation_date": 1571802961, "last_edit_date": 1571805601, "question_id": 58515248, "link": "https://stackoverflow.com/questions/58515248/trying-to-understand-the-difference-between-static-and-dynamic-scoping-in-this-c", "title": "Trying to understand the difference between static and dynamic scoping in this C program", "body": "<p>So I am just trying to take a look at this little bit of code in C. Basically I am trying to learn how to read / determine the differences when using static and dynamic scoping and how the output will be different depending on which I am using. I have picked 3 lines and was gonna just try to compare the symbol table for static vs dynamic but don't know where to begin.</p>\n\n<pre><code># include &lt;stdio.h&gt;            \nint a = 101; \nchar b = 'z'; int q(char b) {\n  int a = 89;\n  printf (\"%c\\n\",a);      \n  printf(\"%d\\n\",b);        // line 7\n  return a;\n}\nvoid p() {\n  double b = 2.6;\n  printf(\"%c\\n\",a);\n  printf(\"%f\\n\",b);               // line 13 \n  a = q(a);\n}\nint main() {\n  char a = 'L'; \n  printf(\"%c\\n\",b);      // line 17 \n  p();\n  return 0;\n}\n</code></pre>\n\n<p>Code runs fine I just am not sure if I can choose to use static vs dynamic scoping or how. Really just being able to understand whats going on is what I need.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571802396, "post_id": 58515051, "comment_id": 103357118, "body": "cyril caro, Why repeatedly read into the same place with <code>scanf(&quot;%s&quot;,&amp;matrix[i]);</code>?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1571802936, "post_id": 58515051, "comment_id": 103357202, "body": "<code>&quot;%s&quot;</code> will attempt to read a string. To read numbers, declare the matrix as an array of <code>int</code>, and use <code>&quot;%d&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10651992, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A40LXV2ep94/AAAAAAAAAAI/AAAAAAAAADk/JYfE1zJ7KkQ/photo.jpg?sz=128", "display_name": "cyril caro", "link": "https://stackoverflow.com/users/10651992/cyril-caro"}, "edited": false, "score": 0, "creation_date": 1571806545, "post_id": 58515440, "comment_id": 103357944, "body": "what is the purpose of that !flag i mean is it the same with the break;"}, {"owner": {"reputation": 1519, "user_id": 9373509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee85b2e77da0aaa34e30c9cf7749f2e1?s=128&d=identicon&r=PG&f=1", "display_name": "aafulei", "link": "https://stackoverflow.com/users/9373509/aafulei"}, "reply_to_user": {"reputation": 11, "user_id": 10651992, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A40LXV2ep94/AAAAAAAAAAI/AAAAAAAAADk/JYfE1zJ7KkQ/photo.jpg?sz=128", "display_name": "cyril caro", "link": "https://stackoverflow.com/users/10651992/cyril-caro"}, "edited": false, "score": 0, "creation_date": 1571807218, "post_id": 58515440, "comment_id": 103358097, "body": "<code>break</code> breaks out of only one layer of loop, in this case the inner loop. In the outer loop, once the program sees <code>flag == 1</code>, it will end the outer loop as well. So <code>!flag</code> is one of the conditions for the outer <code>for</code> loop to continue -- in this mean it requires <code>flag</code> to be <code>0</code>."}, {"owner": {"reputation": 11, "user_id": 10651992, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A40LXV2ep94/AAAAAAAAAAI/AAAAAAAAADk/JYfE1zJ7KkQ/photo.jpg?sz=128", "display_name": "cyril caro", "link": "https://stackoverflow.com/users/10651992/cyril-caro"}, "edited": false, "score": 0, "creation_date": 1571808057, "post_id": 58515440, "comment_id": 103358311, "body": "I still can&#39;t find the correct detection cause it needs to check all both row and column so the matrix is unique, do I need to make some 2nd loop just to check the column. it just likes playing sudoku but there&#39;s no rule for differences in 1 square matrix only row and column must have a different number"}], "tags": [], "owner": {"reputation": 1519, "user_id": 9373509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee85b2e77da0aaa34e30c9cf7749f2e1?s=128&d=identicon&r=PG&f=1", "display_name": "aafulei", "link": "https://stackoverflow.com/users/9373509/aafulei"}, "is_accepted": false, "score": 0, "last_activity_date": 1571812154, "last_edit_date": 1571812154, "creation_date": 1571804334, "answer_id": 58515440, "question_id": 58515051, "link": "https://stackoverflow.com/questions/58515051/checking-whether-a-number-exist-in-the-same-row-or-column-matrix/58515440#58515440", "title": "Checking whether a number exist in the same row or column matrix", "body": "<p>Your have a logic problem. Your flag is reset on every element in the matrix and thus only reflects the result of the last check.</p>\n\n<p>In addition, you need a <code>break;</code> in your nested loop. The logic is, if your <code>flag</code> becomes <code>1</code>, you are sure to say <code>Nay</code>, and you don't want the <code>flag</code> to be reset to <code>0</code>.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int flag = 0;\nfor (int i = 0; i != size &amp;&amp; !flag; ++i) {\n    for (int j = 0; j != size; ++j) {\n        if ( /* detection */ ) {\n            flag = 1;\n            break;\n        }\n    }\n}\nif (flag)\n    printf(\"Nay\\n\");\nelse\n    printf(\"Yay\\n\");\n</code></pre>\n\n<p>Note: The commented <code>/* detection */</code> part requires more work. <em>Since it's your homework, you may try it first. You could use a hash table for memorization. Or brutal force to make the program simply work. It seems that your detection only checks for neighboring elements, which is not sufficient to assert that an element is unique in its row or column. Consider</em></p>\n\n<pre><code>1 2 1\n3 4 5\n6 7 8\n</code></pre>\n\n<p><strong>I can't do your homework for you.</strong> The following is the brutal-force way you may consider.</p>\n\n<p>The <code>if ( /* detection */ )</code> part could be <code>if (has_same_element(matrix, i, j))</code>, with a function (pseudo code)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int has_same_element(matrix, row, col)\n{\n    for each element a in matrix's row except matrix[row][col] itself\n        if (a == matrix[row][col])\n            return 1\n    for each element b in matrix's col except matrix[row][col] itself\n        if (b == matrix[row][col])\n            return 1\n    return 0\n}\n</code></pre>\n\n<p><em>Of course there are smarter ways, like using a hash table, in which case you don't even need the nested loop. For the time being, work out a feasible solution, instead of the best solution.</em></p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10651992, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A40LXV2ep94/AAAAAAAAAAI/AAAAAAAAADk/JYfE1zJ7KkQ/photo.jpg?sz=128", "display_name": "cyril caro", "link": "https://stackoverflow.com/users/10651992/cyril-caro"}, "edited": false, "score": 0, "creation_date": 1571806421, "post_id": 58515550, "comment_id": 103357920, "body": "from the above comment I realize that the flag always been reset so I add break; and now I need some new detection because the current detection still not working"}], "tags": [], "owner": {"reputation": 1628, "user_id": 11455105, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jPwYiUfnicM/AAAAAAAAAAI/AAAAAAAASEw/uL-N0UuPi_U/photo.jpg?sz=128", "display_name": "Amal K", "link": "https://stackoverflow.com/users/11455105/amal-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1571808006, "last_edit_date": 1571808006, "creation_date": 1571805204, "answer_id": 58515550, "question_id": 58515051, "link": "https://stackoverflow.com/questions/58515051/checking-whether-a-number-exist-in-the-same-row-or-column-matrix/58515550#58515550", "title": "Checking whether a number exist in the same row or column matrix", "body": "<p>Your matrix is a 2D array and you are referencing it using only a single subscript <code>matrix[index]</code> at several places which returns the address of the row. Index it using both the row and column indices. Try the code below:</p>\n\n<pre><code>{\n    int size;\n    int flag;\n    scanf(\"%d\",&amp;size);\n    char matrix[size][size];\n    for (int i = 0; i &lt; size; i++)\n    {\n        for (int l = 0; l &lt; size; l++)\n        {\n            scanf(\"%s\",&amp;matrix[i][l]);\n        }\n    }\nfor(int j = 0; j &lt; size; j++){\n    for (int k = 0; j &lt; size; j++){\n            if(matrix[j][0]== matrix[j][k] || matrix[k][0]==matrix[k][j])\n            {\n                flag = 1;\n                 break;\n            }\n            else\n            {\n                flag = 0;\n            }\n        }\n    }\n    if (flag == 1)\n    {\n        printf(\"Nay\\n\");\n    }\n    else \n    {\n        printf(\"Yay\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10651992, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A40LXV2ep94/AAAAAAAAAAI/AAAAAAAAADk/JYfE1zJ7KkQ/photo.jpg?sz=128", "display_name": "cyril caro", "link": "https://stackoverflow.com/users/10651992/cyril-caro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571812154, "creation_date": 1571801401, "last_edit_date": 1571806584, "question_id": 58515051, "link": "https://stackoverflow.com/questions/58515051/checking-whether-a-number-exist-in-the-same-row-or-column-matrix", "title": "Checking whether a number exist in the same row or column matrix", "body": "<p>I want to output Yay if the matrix doesn't contain the same number on the same row or column otherwise output Nay </p>\n\n<p>this is for my college homework. I already tried to check the column and row in the same loop but the output still not right</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int size;\n    int flag;\n    scanf(\"%d\",&amp;size);\n    char matrix[size][size];\n    for (int i = 0; i &lt; size; i++)\n    {\n        for (int l = 0; l &lt; size; l++)\n        {\n            scanf(\"%s\",&amp;matrix[i]);\n        }\n    }\n    for (int j = 0; j &lt; size; j++){\n        for (int k = 0; k &lt; size; k++){\n            if(matrix[j] == matrix[j+1] || matrix[j][k]==matrix[j][k+1])\n            {\n                flag = 1;\n            }\n            else\n            {\n                flag = 0;\n            }\n        }\n    }\n    if (flag == 1)\n    {\n        printf(\"Nay\\n\");\n    }\n    else \n    {\n        printf(\"Yay\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I expect to output \"Nay\" when I input</p>\n\n<pre><code>3\n1 2 3\n1 2 3\n2 1 3\n</code></pre>\n\n<p>and \"Yay\" when i input\n    3\n    1 2 3\n    2 3 1\n    3 1 2</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 1, "creation_date": 1571800521, "post_id": 58514940, "comment_id": 103356778, "body": "I think this is technically undefined behavior."}, {"owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "reply_to_user": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1571800602, "post_id": 58514940, "comment_id": 103356786, "body": "@MateenUlhaq why would it be undefined? &amp;foo is simply an address value at the end of the day. And there are 8 bytes located there, which is what a long int comprises of."}, {"owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "reply_to_user": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1571800676, "post_id": 58514940, "comment_id": 103356806, "body": "@MateenUlhaq chars are always 1 byte = 8 bits."}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1571800835, "post_id": 58514940, "comment_id": 103356834, "body": "g++ is complaining that <code>error: cannot convert \u2018char (*)[8]\u2019 to \u2018long int*\u2019 in initialization</code>, so this is actually probably invalid code, not merely undefined."}, {"owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "reply_to_user": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1571800932, "post_id": 58514940, "comment_id": 103356857, "body": "@MateenUlhaq use gcc without arguments. It will just give a warning, not error. I do not see how it is invalid, because addresses are addresses and bytes are bytes."}, {"owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "reply_to_user": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1571801020, "post_id": 58514940, "comment_id": 103356872, "body": "@MateenUlhaq same output when I cast the pointer (also warning goes away)"}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1571801042, "post_id": 58514940, "comment_id": 103356877, "body": "Using gcc 9.2.0, I get the same error."}, {"owner": {"reputation": 10216, "user_id": 946915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209786ac3200fb3d4fd70094743a2a5c?s=128&d=identicon&r=PG", "display_name": "Jonathan Callen", "link": "https://stackoverflow.com/users/946915/jonathan-callen"}, "edited": false, "score": 0, "creation_date": 1571801650, "post_id": 58514940, "comment_id": 103356985, "body": "It is not true that addresses are addresses and bytes are bytes.  Due to the strict aliasing rule, it is undefined behavior to use a <code>long int *</code> to point to an object that was declared as <code>char[8]</code>. <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\" title=\"what is the strict aliasing rule\">stackoverflow.com/questions/98650/&hellip;</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1571802659, "post_id": 58514940, "comment_id": 103357163, "body": "@Fuad in C <code>char</code> is always 1 byte is true, but 1 byte can have more than 8 bits. See <a href=\"https://stackoverflow.com/q/2098149/995714\">What platforms have something other than 8-bit char?</a>. And you have UB on both of your <code>printf</code> lines"}], "answers": [{"comments": [{"owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "edited": false, "score": 0, "creation_date": 1571801190, "post_id": 58515007, "comment_id": 103356903, "body": "&quot;the value you see is those first 4 bytes in the reverse order&quot;. But I cannot figure it out. Reverse order of the first 4 bytes would be 0201, which is not 131073."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "edited": false, "score": 1, "creation_date": 1571801420, "post_id": 58515007, "comment_id": 103356944, "body": "@Fuad No, its 00 02 00 01 hex = 131073 dec which is the first 4 bytes in reverse order."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1571802585, "post_id": 58515007, "comment_id": 103357151, "body": "<code>printf(&quot;%d\\n&quot;, sizeof(long int))</code> is a more serious issue. <code>sizeof</code> returns <code>size_t</code> which <a href=\"https://stackoverflow.com/q/27296011/995714\">must be printed using <code>%zu</code></a>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1571801349, "last_edit_date": 1571801349, "creation_date": 1571801007, "answer_id": 58515007, "question_id": 58514940, "link": "https://stackoverflow.com/questions/58514940/interpreting-c-char-array-as-a-long-via-a-long-pointer/58515007#58515007", "title": "Interpreting C char array as a long via a long pointer", "body": "<p>You're not reading all the bytes of the number because you're using the wrong format specifier.</p>\n\n<p>The <code>%x</code> format specifier expects an <code>unsigned int</code>, but you're passing a <code>long int</code>.  Formally, using the wrong format specifier invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  Also, casting the address of one type to the address of another type besides <code>char</code> and subsequently dereferencing that pointer is also undefined behavior.  That being said, here's what is probably happening.</p>\n\n<p>Assuming an <code>int</code> is 4 bytes and a <code>long int</code> is 8 bytes, that means that only the first 4 bytes of the value are read.  Assuming again that your machine is little-endian, meaning that the least significant byte for an integer type comes first, the value you see is those first 4 bytes in the reverse order.</p>\n\n<p>But again, this is undefined behavior.  You would most likely see something very different if you passed in a floating point value when the format specifier expects an integer or vice versa.  You could also crash your program if your <code>char</code> array isn't properly aligned for a <code>long</code>.</p>\n\n<p>To fix this, change the format specifier to <code>%lx</code> which expects an <code>unsigned long int</code> however passing a <code>long int</code> is also permissible.</p>\n"}], "owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58515007, "answer_count": 1, "score": -1, "last_activity_date": 1571801349, "creation_date": 1571800378, "last_edit_date": 1571800854, "question_id": 58514940, "link": "https://stackoverflow.com/questions/58514940/interpreting-c-char-array-as-a-long-via-a-long-pointer", "title": "Interpreting C char array as a long via a long pointer", "body": "<p>The following program outputs <code>0x20001</code> which is <code>131073</code> in decimal.</p>\n\n<pre><code>int main()\n{\n    char foo[8] = {1,0,2,0,3,0,4,0};\n    long int *derp = &amp;foo;\n    printf(\"%d\\n\", sizeof(long int)); // THIS OUTPUTS 8\n    printf(\"0x%x\\n\",derp[0]);\n    return 0;\n}\n</code></pre>\n\n<p>I know </p>\n\n<ul>\n<li>The long pointer dereference (i.e. <code>derp[0]</code>) will interpret all 8 bytes.</li>\n<li>Endianness is at play here. (I am on an Intel PC, so I am expecting little endian)</li>\n</ul>\n\n<p>However, I cannot figure out how the above answer is reached.</p>\n"}, {"tags": ["java", "c", "object", "memory", "memory-management"], "comments": [{"owner": {"reputation": 11517, "user_id": 1470327, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bbfda31206a98c9fc947cec762db13e5?s=128&d=identicon&r=PG", "display_name": "bas", "link": "https://stackoverflow.com/users/1470327/bas"}, "edited": false, "score": 0, "creation_date": 1571810894, "post_id": 58514855, "comment_id": 103359187, "body": "Objects are created on the heap for managed languages like c#/java. In cpp you can create objects on the stack just as well"}, {"owner": {"reputation": 381, "user_id": 11352579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f766d9ac410a6ecf7559b6300e2a28dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/11352579/jules"}, "reply_to_user": {"reputation": 11517, "user_id": 1470327, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bbfda31206a98c9fc947cec762db13e5?s=128&d=identicon&r=PG", "display_name": "bas", "link": "https://stackoverflow.com/users/1470327/bas"}, "edited": false, "score": 0, "creation_date": 1571811115, "post_id": 58514855, "comment_id": 103359267, "body": "Why did the creators of Java / C# decide to exclusively store objects on the heap?"}, {"owner": {"reputation": 11517, "user_id": 1470327, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bbfda31206a98c9fc947cec762db13e5?s=128&d=identicon&r=PG", "display_name": "bas", "link": "https://stackoverflow.com/users/1470327/bas"}, "edited": false, "score": 0, "creation_date": 1571813638, "post_id": 58514855, "comment_id": 103360345, "body": "I <i>think</i> for the sake of simplicity. Storing objects on the stack and passing them a level deeper involves copying the object on the stack, which involves copy-constructors. I didn&#39;t google for a correct answer, but I&#39;m sure you can find a more satisfying answer yourself (or somebody else will elaborate on this side question)"}, {"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1571840156, "post_id": 58514855, "comment_id": 103374683, "body": "@Jules objects in java could still be &quot;decomponsed&quot; at run-time (called <code>scalar-replacement</code>) into just plain fields that live on the stack only; but that is something that <code>JIT</code> does, not <code>javac</code>."}, {"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 0, "creation_date": 1573044691, "post_id": 58514855, "comment_id": 103751688, "body": "\u201cheap\u201d is just a name for a set of properties associated with allocated objects/memory. In C/C++ you can select from two different sets of properties, called \u201cstack\u201d and \u201cheap\u201d, in C# and Java, all object allocations have the same specified behavior, which goes under the name \u201cheap\u201d, which doesn\u2019t imply that these properties are the same as for the C/C++ \u201cheap\u201d, in fact, they aren\u2019t. This doesn\u2019t mean that implementations can\u2019t have different strategies for managing the objects, it implies that those strategies are irrelevant to the application logic."}], "answers": [{"comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1575634610, "post_id": 58514932, "comment_id": 104642261, "body": "<code>int</code> is not 8 bytes on a 64-bit platform. It&#39;s still 4. Along with that, the compiler is very likely to optimize the third <code>int</code> out of the stack into the return register. In fact, the two arguments are also likely to be in registers on any 64-bit platform."}, {"owner": {"reputation": 15985, "user_id": 312594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8b523b0f454b7aff317d8e392df69fd?s=128&d=identicon&r=PG&f=1", "display_name": "par", "link": "https://stackoverflow.com/users/312594/par"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1575664233, "post_id": 58514932, "comment_id": 104655256, "body": "I&#39;ve edited my answer to remove the statement about 8-byte <code>int</code>s on 64-bit platforms.  You are correct that <code>int</code> remains 4-bytes in Java.  I&#39;ve left the remainder of my answer however because I believe getting into compiler optimization puts the cart before the horse.  Yes you are also correct on these points, but the <i>question</i> asks for clarification on stacks vs. heaps.  RVO, argument passing via registers, code elision, etc. overburdens the basic concepts and gets in the way of understanding the fundamentals."}], "tags": [], "owner": {"reputation": 15985, "user_id": 312594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8b523b0f454b7aff317d8e392df69fd?s=128&d=identicon&r=PG&f=1", "display_name": "par", "link": "https://stackoverflow.com/users/312594/par"}, "is_accepted": false, "score": 5, "last_activity_date": 1575736639, "last_edit_date": 1575736639, "creation_date": 1571800310, "answer_id": 58514932, "question_id": 58514855, "link": "https://stackoverflow.com/questions/58514855/are-object-initializations-in-java-foo-f-new-foo-essentially-the-same-as/58514932#58514932", "title": "Are object initializations in Java &quot;Foo f = new Foo() &quot; essentially the same as using malloc for a pointer in C?", "body": "<p>In C, <code>malloc()</code> allocates a region of memory in the heap and returns a pointer to it.  That's all you get.  Memory is uninitialized and you have no guarantee that it's all zeros or anything else.</p>\n\n<p>In Java, calling <code>new</code> does a heap based allocation just like <code>malloc()</code>, but you also get a ton of additional convenience (or overhead, if you prefer).  For example, you don't have to explicitly specify the number of bytes to be allocated.  The compiler figures it out for you based on the type of object you're trying to allocate.  Additionally, object constructors are called (which you can pass arguments to if you'd like to control how initialization occurs).  When <code>new</code> returns, you're guaranteed to have an object that's initialized.</p>\n\n<p>But yes, at the end of the call both the result of <code>malloc()</code> and <code>new</code> are simply pointers to some chunk of heap-based data.</p>\n\n<p>The second part of your question asks about the differences between a stack and a heap.  Far more comprehensive answers can be found by taking a course on (or reading a book about) compiler design.  A course on operating systems would also be helpful.  There are also numerous questions and answers on SO about the stacks and heaps.</p>\n\n<p>Having said that, I'll give a general overview I hope isn't too verbose and aims to explain the differences at a fairly high level.</p>\n\n<p>Fundamentally, the main reason to have two memory management systems, i.e. a heap and a stack, is for <em>efficiency</em>.  A secondary reason is that each is better at certain types of problems than the other.</p>\n\n<p>Stacks are somewhat easier for me to understand as a concept, so I start with stacks.  Let's consider this function in C...</p>\n\n<pre><code>int add(int lhs, int rhs) {\n    int result = lhs + rhs;\n    return result;\n}\n</code></pre>\n\n<p>The above seems fairly straightforward. We define a function named <code>add()</code> and pass in the left and right addends.  The function adds them and returns a result.  Please ignore all edge-case stuff such as overflows that might occur, at this point it isn't germane to the discussion.</p>\n\n<p>The <code>add()</code> function's purpose seems pretty straightforward, but what can we tell about its lifecycle?  Especially its memory utilization needs?</p>\n\n<p>Most importantly, the compiler knows <em>a priori</em> (i.e. at compile time) how large the data types are and how many will be used. The <code>lhs</code> and <code>rhs</code> arguments are <code>sizeof(int)</code>, 4 bytes each.  The variable <code>result</code> is also <code>sizeof(int)</code>.  The compiler can tell that the <code>add()</code> function uses <code>4 bytes * 3 ints</code> or a total of 12 bytes of memory.</p>\n\n<p>When the <code>add()</code> function is called, a hardware register called the <em>stack pointer</em> will have an address in it that points to the top of the stack.  In order to allocate the memory the <code>add()</code> function needs to run, all the function-entry code needs to do is issue one single assembly language instruction to decrement the stack pointer register value by 12.  In doing so, it creates storage on the stack for three <code>ints</code>, one each for <code>lhs</code>, <code>rhs</code>, and <code>result</code>.  Getting the memory space you need by executing a single instruction is a massive win in terms of speed because single instructions tend to execute in one clock tick (1 billionth of a second a 1 GHz CPU).</p>\n\n<p>Also, from the compiler's view, it can create a map to the variables that looks an awful lot like indexing an array:</p>\n\n<pre><code>lhs:     ((int *)stack_pointer_register)[0]\nrhs:     ((int *)stack_pointer_register)[1]\nresult:  ((int *)stack_pointer_register)[2]\n</code></pre>\n\n<p>Again, all of this is very fast.</p>\n\n<p>When the <code>add()</code> function exits it has to clean up.  It does this by subtracting 12 bytes from the stack pointer register.  It's similar to a call to <code>free()</code> but it only uses one CPU instruction and it only takes one tick.  It's very, very fast.</p>\n\n<hr>\n\n<p>Now consider a heap-based allocation.  This comes into play when we don't know <em>a priori</em> how much memory we're going to need (i.e. we'll only learn about it at runtime).</p>\n\n<p>Consider this function:</p>\n\n<pre><code>int addRandom(int count) {\n    int numberOfBytesToAllocate = sizeof(int) * count;\n    int *array = malloc(numberOfBytesToAllocate);\n    int result = 0;\n\n    if array != NULL {\n        for (i = 0; i &lt; count; ++i) {\n            array[i] = (int) random();\n            result += array[i];\n        }\n\n        free(array);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>Notice that the <code>addRandom()</code> function doesn't know at compile time what the value of the <code>count</code> argument will be.  Because of this, it doesn't make sense to try to define <code>array</code> like we would if we were putting it on the stack, like this:</p>\n\n<pre><code>int array[count];\n</code></pre>\n\n<p>If <code>count</code> is huge it could cause our stack to grow too large and overwrite other program segments.  When this <em>stack overflow</em> happens your program crashes (or worse).</p>\n\n<p>So, in cases where we don't know how much memory we'll need until runtime, we use <code>malloc()</code>.  Then we can just ask for the number of bytes we need when we need it, and <code>malloc()</code> will go check if it can vend that many bytes.  If it can, great, we get it back, if not, we get a NULL pointer which tells us the call to <code>malloc()</code> failed.  Notably though, the program doesn't crash!  Of course you as the programmer can decide that your program isn't allowed to run if resource allocation fails, but programmer-initiated termination is different than a spurious crash.</p>\n\n<p>So now we have to come back to look at efficiency.  The stack allocator is super fast - one instruction to allocate, one instruction to deallocate, and it's done by the compiler, but remember the stack is meant for things like local variables of a known size so it tends to be fairly small.</p>\n\n<p>The heap allocator on the other hand is several orders of magnitude slower.  It has to do a lookup in tables to see if it has enough free memory to be able to vend the amount of memory the user wants.  It has to update those tables after it vends the memory to make sure no one else can use that block (this bookkeeping may require the allocator to reserve memory <em>for itself</em> in addition to what it plans to vend).  The allocator has to employ locking strategies to make sure it vends memory in a thread-safe way.  And when memory is finally <code>free()</code>d, which happens at different times and in no predictable order typically, the allocator has to find contiguous blocks and stitch them back together to repair heap fragmentation.  If that sounds like it's going to take more than a single CPU instruction to accomplish all of that, you're right!  It's very complicated and it takes a while.</p>\n\n<p>But heaps are big.  Much larger than stacks.  We can get lots of memory from them and they're great when we don't know at compile time how much memory we'll need.  So we trade off speed for a managed memory system that declines us politely instead of crashing when we try to allocate something too large.</p>\n\n<p>I hope that helps answer some of your questions.  Please let me know if you'd like clarification on any of the above.</p>\n"}], "owner": {"reputation": 381, "user_id": 11352579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f766d9ac410a6ecf7559b6300e2a28dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/11352579/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1575736639, "creation_date": 1571799733, "last_edit_date": 1571800248, "question_id": 58514855, "link": "https://stackoverflow.com/questions/58514855/are-object-initializations-in-java-foo-f-new-foo-essentially-the-same-as", "title": "Are object initializations in Java &quot;Foo f = new Foo() &quot; essentially the same as using malloc for a pointer in C?", "body": "<p>I am trying to understand the actual process behind object creations in Java - and I suppose other programming languages.</p>\n\n<p>Would it be wrong to assume that object initialization in Java is the same as when you use malloc for a structure in C?</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Foo f = new Foo(10);\n</code></pre>\n\n<pre><code>typedef struct foo Foo;\nFoo *f = malloc(sizeof(Foo));\n</code></pre>\n\n<p>Is this why objects are said to be on the heap rather than the stack? Because they are essentially just pointers to data?</p>\n"}, {"tags": ["c", "memory-leaks", "pthreads", "valgrind"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571927054, "post_id": 58514595, "comment_id": 103408351, "body": "regarding: <code>numberThreads = atoi((char *) argv[1]);</code>  Never access beyond <code>argv[0]</code> without first checking <code>argc</code> to assure the user actually entered the expected number of command line arguments.   Also, the <code>argv[1]</code> is already a pointer to char, so the cast is superfluous."}], "answers": [{"tags": [], "owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "is_accepted": true, "score": 1, "last_activity_date": 1571815445, "creation_date": 1571815445, "answer_id": 58517552, "question_id": 58514595, "link": "https://stackoverflow.com/questions/58514595/why-does-valgrind-report-different-results-no-leaks-are-possible-still-reacha/58517552#58517552", "title": "Why does valgrind report different results (no leaks are possible / still reachable) just by running the program multiple times?", "body": "<p>I tried running your program and I saw the same behavior. I also found that removing one row, the pthread_exit in the workers, removed the valgrind warning about still reachable memory.</p>\n\n<p>I started to suspect glibc, and this was confirmed by a similar SO question/answer:\n<a href=\"https://stackoverflow.com/questions/3844678/pthread-exit-vs-return\">glibc oddity with Valgrind</a></p>\n"}], "owner": {"reputation": 2937, "user_id": 9041075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dbc57d22544ef4eb8bc06d64ecbb3f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M", "link": "https://stackoverflow.com/users/9041075/dan-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58517552, "answer_count": 1, "score": 0, "last_activity_date": 1571815445, "creation_date": 1571797409, "question_id": 58514595, "link": "https://stackoverflow.com/questions/58514595/why-does-valgrind-report-different-results-no-leaks-are-possible-still-reacha", "title": "Why does valgrind report different results (no leaks are possible / still reachable) just by running the program multiple times?", "body": "<p>While debugging a random segmentation fault, I ran valgrind, running the same program multiple times I get different results. Here is a simplified version of the program (I did not get a a random segmentation fault on this simplified version):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n\npthread_t* tid;\npthread_t prodId;\nint numberThreads = 0;\n\nvoid *worker(void *arg);\nvoid *producer(void *arg);\n\nint main(int argc, char** argv) {\n    numberThreads = atoi((char *) argv[1]);\n    tid = (pthread_t*) malloc(sizeof (pthread_t) * numberThreads);\n    pthread_create(&amp;prodId, NULL, producer, &amp;prodId);\n    pthread_join(prodId, NULL);\n    free(tid);\n    return (EXIT_SUCCESS);\n}\n\nvoid *producer(void *arg) {\n    for (int x = 0; x &lt; numberThreads; x++)\n        pthread_create(&amp;(tid[x]), NULL, worker, &amp;(tid[x]));\n    for (int x = 0; x &lt; numberThreads; x++)\n        pthread_join(tid[x], NULL);\n    pthread_exit(NULL);\n}\n\nvoid *worker(void *arg) {\n    pthread_exit(NULL);\n}\n</code></pre>\n\n<p>Here is the output of running the program a few times consecutively:</p>\n\n<pre><code>$ valgrind --leak-check=full --leak-check=full --show-leak-kinds=all  ./memleek 1\n==3044== Memcheck, a memory error detector\n==3044== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==3044== Using Valgrind-3.12.0.SVN and LibVEX; rerun with -h for copyright info\n==3044== Command: ./memleek 1\n==3044== \n==3044== \n==3044== HEAP SUMMARY:\n==3044==     in use at exit: 0 bytes in 0 blocks\n==3044==   total heap usage: 8 allocs, 8 frees, 2,222 bytes allocated\n==3044== \n==3044== All heap blocks were freed -- no leaks are possible\n==3044== \n==3044== For counts of detected and suppressed errors, rerun with: -v\n==3044== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n$ \n$ \n$ valgrind --leak-check=full --leak-check=full --show-leak-kinds=all  ./memleek 2\n==3047== Memcheck, a memory error detector\n==3047== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==3047== Using Valgrind-3.12.0.SVN and LibVEX; rerun with -h for copyright info\n==3047== Command: ./memleek 2\n==3047== \n==3047== \n==3047== HEAP SUMMARY:\n==3047==     in use at exit: 0 bytes in 0 blocks\n==3047==   total heap usage: 9 allocs, 9 frees, 2,502 bytes allocated\n==3047== \n==3047== All heap blocks were freed -- no leaks are possible\n==3047== \n==3047== For counts of detected and suppressed errors, rerun with: -v\n==3047== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n$\n$\n$ valgrind --leak-check=full --leak-check=full --show-leak-kinds=all  ./memleek 2\n==3051== Memcheck, a memory error detector\n==3051== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==3051== Using Valgrind-3.12.0.SVN and LibVEX; rerun with -h for copyright info\n==3051== Command: ./memleek 2\n==3051== \n==3051== \n==3051== HEAP SUMMARY:\n==3051==     in use at exit: 0 bytes in 0 blocks\n==3051==   total heap usage: 9 allocs, 9 frees, 2,502 bytes allocated\n==3051== \n==3051== All heap blocks were freed -- no leaks are possible\n==3051== \n==3051== For counts of detected and suppressed errors, rerun with: -v\n==3051== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n$\n$\n$ valgrind --leak-check=full --leak-check=full --show-leak-kinds=all  ./memleek 2\n==3055== Memcheck, a memory error detector\n==3055== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==3055== Using Valgrind-3.12.0.SVN and LibVEX; rerun with -h for copyright info\n==3055== Command: ./memleek 2\n==3055== \n==3055== \n==3055== HEAP SUMMARY:\n==3055==     in use at exit: 1,614 bytes in 4 blocks\n==3055==   total heap usage: 9 allocs, 5 frees, 2,502 bytes allocated\n==3055== \n==3055== 36 bytes in 1 blocks are still reachable in loss record 1 of 4\n==3055==    at 0x4C2BBAF: malloc (vg_replace_malloc.c:299)\n==3055==    by 0x401AE89: strdup (strdup.c:42)\n==3055==    by 0x4016676: _dl_load_cache_lookup (dl-cache.c:311)\n==3055==    by 0x4008A87: _dl_map_object (dl-load.c:2336)\n==3055==    by 0x4013B13: dl_open_worker (dl-open.c:237)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x4013608: _dl_open (dl-open.c:660)\n==3055==    by 0x517431C: do_dlopen (dl-libc.c:87)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x51743AE: dlerror_run (dl-libc.c:46)\n==3055==    by 0x5174421: __libc_dlopen_mode (dl-libc.c:163)\n==3055==    by 0x4E4966A: pthread_cancel_init (unwind-forcedunwind.c:52)\n==3055== \n==3055== 36 bytes in 1 blocks are still reachable in loss record 2 of 4\n==3055==    at 0x4C2BBAF: malloc (vg_replace_malloc.c:299)\n==3055==    by 0x400B4D3: _dl_new_object (dl-object.c:165)\n==3055==    by 0x400587C: _dl_map_object_from_fd (dl-load.c:1000)\n==3055==    by 0x400874B: _dl_map_object (dl-load.c:2470)\n==3055==    by 0x4013B13: dl_open_worker (dl-open.c:237)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x4013608: _dl_open (dl-open.c:660)\n==3055==    by 0x517431C: do_dlopen (dl-libc.c:87)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x51743AE: dlerror_run (dl-libc.c:46)\n==3055==    by 0x5174421: __libc_dlopen_mode (dl-libc.c:163)\n==3055==    by 0x4E4966A: pthread_cancel_init (unwind-forcedunwind.c:52)\n==3055== \n==3055== 360 bytes in 1 blocks are still reachable in loss record 3 of 4\n==3055==    at 0x4C2DBC5: calloc (vg_replace_malloc.c:711)\n==3055==    by 0x4010FBD: _dl_check_map_versions (dl-version.c:293)\n==3055==    by 0x4014076: dl_open_worker (dl-open.c:286)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x4013608: _dl_open (dl-open.c:660)\n==3055==    by 0x517431C: do_dlopen (dl-libc.c:87)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x51743AE: dlerror_run (dl-libc.c:46)\n==3055==    by 0x5174421: __libc_dlopen_mode (dl-libc.c:163)\n==3055==    by 0x4E4966A: pthread_cancel_init (unwind-forcedunwind.c:52)\n==3055==    by 0x4E49853: _Unwind_ForcedUnwind (unwind-forcedunwind.c:126)\n==3055==    by 0x4E47D7F: __pthread_unwind (unwind.c:121)\n==3055== \n==3055== 1,182 bytes in 1 blocks are still reachable in loss record 4 of 4\n==3055==    at 0x4C2DBC5: calloc (vg_replace_malloc.c:711)\n==3055==    by 0x400B215: _dl_new_object (dl-object.c:75)\n==3055==    by 0x400587C: _dl_map_object_from_fd (dl-load.c:1000)\n==3055==    by 0x400874B: _dl_map_object (dl-load.c:2470)\n==3055==    by 0x4013B13: dl_open_worker (dl-open.c:237)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x4013608: _dl_open (dl-open.c:660)\n==3055==    by 0x517431C: do_dlopen (dl-libc.c:87)\n==3055==    by 0x400F643: _dl_catch_error (dl-error.c:187)\n==3055==    by 0x51743AE: dlerror_run (dl-libc.c:46)\n==3055==    by 0x5174421: __libc_dlopen_mode (dl-libc.c:163)\n==3055==    by 0x4E4966A: pthread_cancel_init (unwind-forcedunwind.c:52)\n==3055== \n==3055== LEAK SUMMARY:\n==3055==    definitely lost: 0 bytes in 0 blocks\n==3055==    indirectly lost: 0 bytes in 0 blocks\n==3055==      possibly lost: 0 bytes in 0 blocks\n==3055==    still reachable: 1,614 bytes in 4 blocks\n==3055==         suppressed: 0 bytes in 0 blocks\n==3055== \n==3055== For counts of detected and suppressed errors, rerun with: -v\n==3055== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n$ \n</code></pre>\n\n<p>I noticed that if I run 4 workers, by passing 4 as the first argument, it constantly says </p>\n\n<blockquote>\n  <p>still reachable: 1,614 bytes in 4 blocks</p>\n</blockquote>\n\n<p>Considering that according to <a href=\"https://stackoverflow.com/questions/3840582/still-reachable-leak-detected-by-valgrind\">this</a>, the \"still reachable\" category within Valgrind's leak report refers to allocations that fit only the first definition of \"memory leak\". These blocks were not freed, but they could have been freed (if the programmer had wanted to) because the program still was keeping track of pointers to those memory blocks.</p>\n\n<p>Well, I want to free these blocks. Can anyone show me how? Thank you!</p>\n"}, {"tags": ["c", "heap", "address-sanitizer"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1571795823, "post_id": 58514379, "comment_id": 103355920, "body": "<code>productMatrixT = (double **)malloc(rowT*sizeof(double));</code> should be <code>productMatrixT = malloc(rowT*sizeof(double *));</code>, or better yet <code>productMatrixT = malloc(rowT*sizeof(*productMatrixT ));</code> There&#39;s no need for a cast. Note that you&#39;re not creating a 2-dimsional matrix - you&#39;re creating an array of pointers to one-dimensional matrices. To allocate a true multidimensional matrix, see <a href=\"https://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\" title=\"correctly allocating multi dimensional arrays\">stackoverflow.com/questions/42094465/&hellip;</a>"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 3, "creation_date": 1571799539, "post_id": 58514379, "comment_id": 103356633, "body": "You allocate space in <code>productMatrixT</code> as a <code>rowT</code> x <code>rowT</code> matrix, but access it as a <code>column</code> x <code>row</code> matrix."}, {"owner": {"reputation": 21, "user_id": 12120561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KenHP.png?s=128&g=1", "display_name": "hydra-bslash-0", "link": "https://stackoverflow.com/users/12120561/hydra-bslash-0"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1571800773, "post_id": 58514379, "comment_id": 103356824, "body": "@1201ProgramAlarm my friend told me I should free whatever part is in the first malloc, for instance, the rowT, but from your response, I&#39;m assuming I free whatever I access first?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1571800960, "post_id": 58514379, "comment_id": 103356862, "body": "Your free is ok, since you free what you allocate.  The problem is that <code>i</code> runs from 0 to <code>column</code>, and you use that as the first subscript to <code>productMatrixT[i]</code> but you&#39;ve only allocated <code>rowT</code> elements for <code>productMatrixT</code>.  If <code>column</code> &gt; <code>rowT</code> you&#39;ll have problems.  (Similarly for the <code>sum</code> line but you don&#39;t show the sizes of <code>matrix</code> and <code>matrixT</code>.)"}, {"owner": {"reputation": 21, "user_id": 12120561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KenHP.png?s=128&g=1", "display_name": "hydra-bslash-0", "link": "https://stackoverflow.com/users/12120561/hydra-bslash-0"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1571803817, "post_id": 58514379, "comment_id": 103357374, "body": "@1201ProgramAlarm sorry for the novice questions, but how would I be able to fix it? I tried messing around with parameters to allocate enough space (column in the first malloc and loop) and other parameters but it doesnt seem to work"}, {"owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "edited": false, "score": 0, "creation_date": 1571818882, "post_id": 58514379, "comment_id": 103362917, "body": "what are the values of <code>column</code> , <code>row</code> and <code>rowT</code> ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571925468, "post_id": 58514379, "comment_id": 103407443, "body": "For us to &#39;fix it&#39;, you need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571926116, "post_id": 58514379, "comment_id": 103407812, "body": "OT: regarding: <code>productMatrixT = (double **)malloc(rowT*sizeof(double));</code>  1)  In C, the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc  Suggest removing the cast.  2)  When calling any of the heap allocation functions: <code>malloc()</code>, <code>calloc()</code> and/or <code>realloc()</code>, always check (!=NULL) the returned value to assure the operation was successful."}], "answers": [{"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 0, "last_activity_date": 1571819039, "creation_date": 1571819039, "answer_id": 58518548, "question_id": 58514379, "link": "https://stackoverflow.com/questions/58514379/why-is-address-sanitizer-causing-a-heap-buffer-overflow-error-in-my-multiplicati/58518548#58518548", "title": "Why is address-sanitizer causing a heap-buffer-overflow error in my multiplication matrix?", "body": "<p>Your indexing is wrong, in</p>\n\n<pre><code>sum = sum + matrixT[i][k] * matrix[k][j];\n</code></pre>\n\n<p>you access <code>matrix</code> as <code>column x rowT</code> and <code>rowT x row</code> but you've allocated it as <code>rowT x column</code>.</p>\n\n<p>Also you should fix</p>\n\n<pre><code>productMatrixT = (double **)malloc(rowT*sizeof(double));\n</code></pre>\n\n<p>to be</p>\n\n<pre><code>productMatrixT = (double **)malloc(rowT*sizeof(double *));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1571925835, "creation_date": 1571925835, "answer_id": 58543120, "question_id": 58514379, "link": "https://stackoverflow.com/questions/58514379/why-is-address-sanitizer-causing-a-heap-buffer-overflow-error-in-my-multiplicati/58543120#58543120", "title": "Why is address-sanitizer causing a heap-buffer-overflow error in my multiplication matrix?", "body": "<p>regarding:</p>\n\n<pre><code>double sum = 0;\n</code></pre>\n\n<p>since it is declared as a <code>double</code>, it should be initialized as a <code>double</code>,  I.E.</p>\n\n<pre><code>double sum = 0.0;\n</code></pre>\n\n<p>regarding:</p>\n\n<pre><code>**sum = sum + matrixT[i][k] * matrix[k][j];\n</code></pre>\n\n<p>since 'sum' is a <code>double</code> and not a pointer to a pointer,  the <code>**</code> dereferencing is resulting in some random address.  This is what the <code>address sanitizer</code> is complaining about.</p>\n\n<p>As others have mentioned, there is plenty more wrong with the posted code.</p>\n"}], "owner": {"reputation": 21, "user_id": 12120561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KenHP.png?s=128&g=1", "display_name": "hydra-bslash-0", "link": "https://stackoverflow.com/users/12120561/hydra-bslash-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571925835, "creation_date": 1571795620, "question_id": 58514379, "link": "https://stackoverflow.com/questions/58514379/why-is-address-sanitizer-causing-a-heap-buffer-overflow-error-in-my-multiplicati", "title": "Why is address-sanitizer causing a heap-buffer-overflow error in my multiplication matrix?", "body": "<p>The error is: <strong>heap-buffer-overflow</strong>.\nI'm running a block of code that multiplies matrices. Address sanitizer is throwing me an error at a specific line while trying to multiply two matrices. On my IDE, no errors or warnings show up, however, address sanitizer is throwing an error here and I'm not too sure why. The matrix has entries scanned in from the user, below is a snippet of the code not working. The snippet address sanitizer is throwing an error on is bolded. Thanks.</p>\n\n<p>snippet:</p>\n\n<pre><code>double **productMatrixT;\n\nproductMatrixT = (double **)malloc(rowT*sizeof(double));\nfor(i = 0; i &lt; rowT; i++)\n{\n  productMatrixT[i] = malloc(column*sizeof(double));\n}\n\ndouble sum = 0;\nfor(i = 0; i &lt; column; i++)\n{\n  for(j = 0; j &lt; row; j++)\n   {\n     for(k = 0; k &lt; rowT; k++)\n      {\n        **sum = sum + matrixT[i][k] * matrix[k][j];** &lt;---- /*says this line is a cause for a problem*/\n      }\n       productMatrixT[i][j] = sum;\n       sum = 0;\n     }\n  }\n}\n\n</code></pre>\n\n<p>free:</p>\n\n<pre><code>for(i = 0; i &lt; rowT; i++)\n{\n free(productMatrixT[i]);\n}\nfree(productMatrixT);\n</code></pre>\n"}, {"tags": ["c", "file", "unix", "system"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571797203, "post_id": 58514364, "comment_id": 103356183, "body": "&quot;the function&quot;, which?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571797247, "post_id": 58514364, "comment_id": 103356188, "body": "Please fix your indentation and make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the discussed code."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571797303, "post_id": 58514364, "comment_id": 103356203, "body": "What makes you think that &quot;the program is not calling the function&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571829517, "post_id": 58515721, "comment_id": 103368445, "body": "Is there an answer in there?"}], "tags": [], "owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "is_accepted": false, "score": -1, "last_activity_date": 1571807683, "last_edit_date": 1571807683, "creation_date": 1571806505, "answer_id": 58515721, "question_id": 58514364, "link": "https://stackoverflow.com/questions/58514364/how-does-the-program-call-a-function/58515721#58515721", "title": "How does the program call a function?", "body": "<p>I have taken the liberty of converting the question code into an actual program that can be compiled and executed (which is proper etiquette, btw, for those who post questions).</p>\n\n<pre><code>            /*\n            These \"#include\" lines inform the compiler of external functions\n            and macro values used in the program.\n            */\n            #include &lt;stdio.h&gt;          // printf(), perror()\n            #include &lt;stdlib.h&gt;         // exit(), wait(), EXIT_SUCCESS\n            #include &lt;fcntl.h&gt;          // open(), O_RDONLY\n            #include &lt;unistd.h&gt;         // read(), fork(), lseek()\n\n            /*\n            The following line is called a \"function prototype\".  It gives the\n            compiler fore-knowledge that this function will be called by the\n            program, prior to it's actual definition.\n\n            Specifically, it tells the compiler that it will eventually find\n            a function definition for a function named \"printpos()\"; that\n            this function accepts a pointer to a character array (char *) for\n            the first parameter, and an integer value (int) for the second\n            value; and that the function will return an integer value to the\n            caller.  Additionally, compiler is informed that while the first\n            parameter is a pointer to a character array, the actual array\n            (const char *) may not be modified by the printpos() function.\n\n            Strictly speaking, the \"string\" and \"fildes\" labels are not \n            required, or useful, to the compiler.  Hence, the line may be \n            shortened to:\n\n                int printpos(const char *, int);\n\n            If the printpos() function is moved above main() (from where it\n            is called), the line can be eliminated.  Why? Because if the the \n            printpos() function is fully defined prior to main(), then the \n            compiler will know of the existence of the printpos() function \n            prior to it being referenced in main().\n            */\n            int printpos(const char *string, int filedes);\n\n            /*\n            This is a function definition, that defines the \"fatal()\" function.\n            This function returns no value, and accepts a pointer to a character\n            array as a parameter.\n            */\n            void fatal(char *s) {\n                perror(s);      /* Displays the string pointed to by parameter (s)\n                                   followed by the error message corresponding to\n                                   the current value of the global variable errno */\n                exit(1);        /* Terminates the program, returning an 8-bit status\n                                   value of (1) */\n                }\n\n            /*\n            This is a function definition, that defines the \"main()\" function.\n            The \"main()\" function is required in this program, and is where\n            the program execution begins.\n\n            This function returns an integer (int) value , and accepts no\n            parameters.\n            */\n            int main() {\n                int fd;           /* Causes the compiler to create a variable\n                                     called \"fd\", suitable for storing an\n                                     integer (int) value. */\n                pid_t pid;        /* Causes the compiler to create a variable\n                                     called \"pid\", suitable for storing a\n                                     process ID (pid_t) value. */\n                char buf[10];     /* Causes the compiler to create a variable\n                                     called \"buf\", suitable for storing ten\n                                     [10] characters in a sequencial array. */\n\n                /* This is a compound statement; which can be simplified as:\n\n                        fd = open(\"example.txt\", O_RDONLY); // Attempts read-only access to the file \"example.txt\"\n                                                            // Stores a \"file descriptor\" reference to the file in the variable \"fd\"\n                        if(fd == -1)                        // Checks to see if the \"open()\" function failed.\n                            fatal(\" open failed\");          // Prints an error and terminates the program.\n                */\n                if ((fd = open(\"example.txt\", O_RDONLY)) == -1)\n                    fatal(\" open failed\");\n\n                read(fd, buf, 10);                      // Attempts to read 10 bytes from the file referenced by \"fd\" into a character array \"buf\"\n                printpos(\"before fork\", fd);            // Displays \"before fork\", followed by the byte offset current location in the file referenced by \"fd\"\n\n                /* This is a compound statement; which can be simplified as:\n\n                        pid=fork();     // Attempts to create a new process.\n                        switch(pid) {   // Depending on the value of pid, take the action indicated by case values.\n\n                */\n                switch(pid = fork()) {\n                    case -1:                      // If the value of pid is (-1), the fork() function has failed.\n                        fatal(\"fork failed\");     // Prints an error and terminates the program.\n                        break;                    // Being that the fatal() function terminates the program, this \"break\" statement is not necessary.\n                    case 0:                       // If the value of pid is (0), then it is the new \"child\" process.\n                        printpos(\"child before read\", fd); // Displays \"child before read\", followed by the byte offset current location in the file referenced by \"fd\"\n                        read(fd, buf, 10);        // Attempts to read 10 bytes from the file referenced by \"fd\" into a character array \"buf\"\n                        printpos(\"child after read\", fd); // Displays \"child after read\", followed by the byte offset current location in the file referenced by \"fd\"\n                        break;                    // Breaks out of the switch statement to execute code beyond the next '}' brace.\n                    default:                      // if the value of pid did not match any case values, it is the parent process.\n                        wait((int *)0);           // This line causes the parent process to suspend until the child process has terminated.\n                        printpos(\"parent after wait\", fd); // Displays \"parent after wait\", followed by the byte offset current location in the file referenced by \"fd\"\n                    }\n\n                /* Returns control to the caller, with an integer (int) value of EXIT_SUCCESS (0).\n                   In this case, returning from the main() function causes the program to terminate.\n                */\n                return(EXIT_SUCCESS);\n                }\n\n\n            /*\n            This is a function definition, that defines the \"printpos()\" function.\n\n            This function's return value and parameter types must match its function\n            prototype (above).\n\n            This function accepts a pointer to a character array (char *) for the\n            first parameter, and an integer value (int) for the second value;\n            and the function will return an integer value to the caller.\n            Additionally, while the first parameter is a pointer to a character\n            array, the actual array (const char *) may not be modified by the\n            printpos() function.\n            */\n            int printpos(const char *string, int filedes) {\n                off_t pos;        /* Causes the compiler to create a variable\n                                     called \"pos\", suitable for storing a file\n                                     offset (off_t) value. */\n\n                /* This is a compound statement; which can be simplified as:\n\n                    pos = lseek(filedes, 0, SEEK_CUR);  // Sets the value of the pos variable to the current position of the file specified by the filedes variable.\n                    if(pos == -1)                       // Checks to see if the \"lseek()\" function failed.\n\n                */\n                if ((pos = lseek(filedes, 0, SEEK_CUR)) == -1)\n                    fatal(\"lseek failed\");             // If the lseek() function failed, Prints an error and terminates the program.\n                printf(\"%s:%lld\\n\", string, pos);    // Displays the array of characters \"string\" (specified by the caller), followed by the byte offset current location in the file referenced by \"filedes\"\n\n                /* Returns control to the caller, with an integer (int) value of EXIT_SUCCESS (0).\n                */\n                return(EXIT_SUCCESS);\n                }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11730854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b8jRv49oZ7M/AAAAAAAAAAI/AAAAAAAAEVg/ISA37Esa5BU/photo.jpg?sz=128", "display_name": "Prachi Rajesh Jansari", "link": "https://stackoverflow.com/users/11730854/prachi-rajesh-jansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1571807683, "creation_date": 1571795406, "last_edit_date": 1571799630, "question_id": 58514364, "link": "https://stackoverflow.com/questions/58514364/how-does-the-program-call-a-function", "title": "How does the program call a function?", "body": "<p>I am going through this code, just for my understanding \non this code works</p>\n\n<p>I have included a text file to read and , but the program is not calling the function. \nAlso i need to understand what does the function actually do?\nI have been tracing but not successful</p>\n\n<pre><code>int printpos(const char *string, int filedes);\n\nfatal(char *s) {\n  perror(s);\n  exit(1);\n  }\n\nint main() {\n  int fd;\n  pid_t pid; \n  char buf[10]; \n\n  if ((fd = open(\"example.txt\", O_RDONLY)) == -1)\n    fatal(\" open failed\");\n\n  read(fd, buf, 10); \n  printpos(\"before fork\", fd);\n\n  switch(pid = fork()) {\n    case -1: \n      fatal(\"fork failed\");\n      break;\n    case 0: \n      printpos(\"child before read\", fd),\n      read(fd, buf, 10);\n      printpos(\"child after read\", fd);\n      break;\n    default: \n      wait((int *)0);\n      printpos(\"parent after wait\", fd);\n    }\n  }\n\nint printpos(const char *string, int filedes) {\n  off_t pos;\n  if ((pos = lseek(filedes, 0, SEEK_CUR)) == -1)\n    fatal(\"lseek failed\"); \n  printf(\"%s:%ld\\n\", string, pos);\n  }\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1571795341, "post_id": 58514342, "comment_id": 103355814, "body": "&quot;why isn&#39;t &amp;foo taking the address of the pointer foo&quot; --&gt; <code>foo</code> is not a pointer.  It is an array.  <code>&amp;foo</code> is not &quot;the address of the pointer to the first element of the array&quot;.  It is the address of the array."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571796741, "post_id": 58514342, "comment_id": 103356096, "body": "Please <a href=\"https://stackoverflow.com/posts/58514342/edit\">edit</a> your non-answer below as additional info into this question."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571798050, "post_id": 58514342, "comment_id": 103356372, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.1p3\" rel=\"nofollow noreferrer\">C11 Standard - 6.3.2.1 Other Operands - Lvalues, arrays, and function designators(p3)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "edited": false, "score": 0, "creation_date": 1571796520, "post_id": 58514375, "comment_id": 103356055, "body": "char foo[8] = {1,0,2,0,3,0,4,0}; char* soo = foo; printf(&quot;%p\\n&quot;, foo); printf(&quot;%p\\n&quot;, &amp;foo); printf(&quot;%p\\n&quot;, soo); printf(&quot;%p\\n&quot;, &amp;soo);  0xffffcc18 0xffffcc18 0xffffcc18 0xffffcc10  cool."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571796536, "post_id": 58514375, "comment_id": 103356059, "body": "I found 6.5.3.2 of the standard &quot;The operand of the unary &amp; operator shall be ... <b>an lvalue</b> ...&quot;, which sounds like <code>&amp;array</code> is not allowed, since <code>array</code> alone (i.e. without <code>[]</code>) is not an lvalue. Could you clarify please? I ask because I tried to make a convincing answer from that ... and did not dare... I was hoping for something like an explicit &quot;<code>&amp;array</code> is undefined.&quot;"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571797267, "post_id": 58514375, "comment_id": 103356193, "body": "@Yunnosch <code>array</code> by itself is an lvalue, although not a modifiable one.  The passage I quoted specifies when an array is converted from an lvalue to an rvalue which excludes the three operators mentioned."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571797462, "post_id": 58514375, "comment_id": 103356237, "body": "Hmm &quot;is an lvalue, although not a modifiable one&quot; does not match my understanding of &quot;lvalue&quot;. Not saying that your are wrong, could you link to the definition of lvalue, to allow me reading up?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1571797597, "post_id": 58514375, "comment_id": 103356267, "body": "@Yunnosch 6.3.2.1p1 defines a <i>modifiable lvalue</i>.  Basically it means something that can appear on the left side of an assignment, which a bare array can not."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571798042, "post_id": 58514375, "comment_id": 103356371, "body": "OK, that debunks my (luckily unwritten) answer on arrays not being lvalues... Thank you very much. I just stumble about the non-obvious uses of &quot;lvalue&quot; in contrast to &quot;modifiable lvalue&quot;. I could understand &quot;normally modifiable lvalue under the effect of const&quot;. But that does not match arrays... Well, good enough for me. I have no language lawyer ambitions."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571835954, "post_id": 58514375, "comment_id": 103372053, "body": "<i>an array decays to a pointer to the first element of the array</i>  Personally, I prefer, &quot;an array decays to the address of the first element of the array (which is passed as a pointer in any function call)&quot; . That&#39;s obviously longer, but IMO it&#39;s a lot more accurate as it captures the inability to assign to a bare array."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1571795562, "creation_date": 1571795562, "answer_id": 58514375, "question_id": 58514342, "link": "https://stackoverflow.com/questions/58514342/c-ampersand-operator-applied-to-an-array-vs-pointer/58514375#58514375", "title": "C: Ampersand operator applied to an array vs pointer", "body": "<p>There is a common misconception that pointers and arrays are the same thing.  They are <em>not</em>, but they are related.</p>\n\n<p>Your first example works:</p>\n\n<pre><code>printf(\"%p\", foo);\n</code></pre>\n\n<p>Because in most contexts an array <strong>decays</strong> to a pointer to the first element of the array.</p>\n\n<p>One of the situations where this is <em>not</em> the case is when an array is the operand of the address-of operator <code>&amp;</code>.  This gives the address of the entire array, not just the first element (even though the values are the same).</p>\n\n<p>This is detailed in section 6.3.2.1p3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p>Except  when  it  is  the  operand  of  the <code>sizeof</code> operator, the\n  <code>_Alignof</code> operator, or the unary <code>&amp;</code> operator, or is a string \n  literal  used  to  initialize  an  array, an expression  that  has\n  type \"array of <em>type</em>\" is converted to an expression with type\n  \"pointer to <em>type</em>\"  that  points to  the  initial  element  of  the \n  array  object  and  is  not  an  lvalue.   If  the  array  object  has\n  register storage class, the behavior is undefined.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571836351, "post_id": 58523412, "comment_id": 103372316, "body": "<code>foo == &amp;foo</code> is like saying <code>42 == 42.0</code>.  In both cases, the <i>values</i> are equivalent, yet the <i>types</i> differ."}], "tags": [], "owner": {"reputation": 453, "user_id": 12212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d93f9b746b6b7988fb224d49ba07c9c?s=128&d=identicon&r=PG&f=1", "display_name": "VJAYSLN", "link": "https://stackoverflow.com/users/12212950/vjaysln"}, "is_accepted": false, "score": 0, "last_activity_date": 1571835505, "creation_date": 1571835505, "answer_id": 58523412, "question_id": 58514342, "link": "https://stackoverflow.com/questions/58514342/c-ampersand-operator-applied-to-an-array-vs-pointer/58523412#58523412", "title": "C: Ampersand operator applied to an array vs pointer", "body": "<p>Basically, Pointers used to access array elements in a alternative\n        ease way.In Low level Programming, each and every variable has an\n        address to allocate in memory. BTW, the array is also a variable\n        name as like scalar variable.</p>\n\n<p>Unlike Scalar Variables, Array variable has few things., </p>\n\n<ul>\n<li>List(sequences) of elements allocated in subsequent memory address.</li>\n<li>So we can get all the elements by using first element address</li>\n</ul>\n\n<p>FYI, Array Name == Address of the first element == Address of the array</p>\n\n<blockquote>\n  <p>(foo == &amp;foo == &amp;foo[0])</p>\n</blockquote>\n\n<p>So while you are trying to get elements by using this notation <em>foo, initially it points to <strong></em>(&amp;foo + 0)</strong> , so based on ith value you can access all the elements one by one.\nHope this Answer will helps.:)</p>\n"}, {"tags": [], "owner": {"reputation": 479, "user_id": 6485674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nKZYmgfSMVQ/AAAAAAAAAAI/AAAAAAAAAEg/WoxQB2mf_Vw/photo.jpg?sz=128", "display_name": "storenth", "link": "https://stackoverflow.com/users/6485674/storenth"}, "is_accepted": false, "score": 0, "last_activity_date": 1598284898, "creation_date": 1598284898, "answer_id": 63564607, "question_id": 58514342, "link": "https://stackoverflow.com/questions/58514342/c-ampersand-operator-applied-to-an-array-vs-pointer/63564607#63564607", "title": "C: Ampersand operator applied to an array vs pointer", "body": "<p>I prefer using <a href=\"https://blogs.oracle.com/linux/the-ksplice-pointer-challenge-v2\" rel=\"nofollow noreferrer\">this explanation</a> about '<em>&amp; basically means &quot;the address-of operator&quot;</em>' thesis. So, Arrays are not pointers! But an array can automatically &quot;decay&quot; into a pointer. Into <code>&amp;foo[0]</code>, in your case. But <code>&amp;foo</code> is a pointer to an array of four integers because of its type. To get PoC you need to check <code>ptype foo</code> vs <code>ptype &amp;foo</code> under <code>GDB</code>.</p>\n"}], "owner": {"reputation": 1147, "user_id": 4672156, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/fmHEN.jpg?s=128&g=1", "display_name": "Fuad", "link": "https://stackoverflow.com/users/4672156/fuad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1598284898, "creation_date": 1571795169, "question_id": 58514342, "link": "https://stackoverflow.com/questions/58514342/c-ampersand-operator-applied-to-an-array-vs-pointer", "title": "C: Ampersand operator applied to an array vs pointer", "body": "<p>Let's say we have</p>\n\n<pre><code>int foo[4] = {1, 2, 3, 4};\n</code></pre>\n\n<p><code>foo</code> would then be a pointer to the first element of the array.\nWe can do:</p>\n\n<pre><code>printf(\"%p\", foo); // OUTPUT is some address 0xffffcc00\n</code></pre>\n\n<p>Now if we do:</p>\n\n<pre><code>printf(\"%p\", &amp;foo); // OUTPUT is the same address 0xffffcc00\n</code></pre>\n\n<p>Looking online, I see this particular syntax for <code>&amp;&lt;array-name&gt;</code> takes the address of the entire array. This explains the two same values above, because the starting element's address is the same as the whole array's address.</p>\n\n<p>But in general, my understanding is that <code>&amp;</code> should take address of whatever is on its right. (i.e. in this case, <strong>it \"should\" have taken the address of the pointer to the first element of the array</strong>.)</p>\n\n<p>So why isn't <code>&amp;foo</code> taking the address of the pointer <code>foo</code>?\nIf this is an exception to the C language, is this the only exception, or are there other cases like this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 2, "creation_date": 1571794049, "post_id": 58514208, "comment_id": 103355569, "body": "Please provide an MVCE"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 3, "creation_date": 1571794546, "post_id": 58514208, "comment_id": 103355660, "body": "<code>arr</code> appears to be a a pointer to a 1D array of pointers to char arrays.  You need to access characters as <code>arr[row][col]</code>"}, {"owner": {"reputation": 472, "user_id": 10801822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146a7214b29438ffcb5a9ee6ce8b90ff?s=128&d=identicon&r=PG", "display_name": "LeoVen", "link": "https://stackoverflow.com/users/10801822/leoven"}, "edited": false, "score": 0, "creation_date": 1571798143, "post_id": 58514208, "comment_id": 103356389, "body": "Looks like you have not initialized <code>i</code> in the <code>for</code> loop too"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571799066, "post_id": 58514208, "comment_id": 103356552, "body": "<code>*(arr+i)</code> is a pointer to the ith row in <code>arr</code>. <code>*(*(arr + i) + j)</code> is the ith element."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571800659, "post_id": 58514208, "comment_id": 103356802, "body": "Welcome to Stack Overflow. Please read the <a href=\"http://stackoverflow.com/tour\"><b>About</b></a> page soon and also visit the links describing <a href=\"http://stackoverflow.com/questions/how-to-ask\"><b>How to Ask a Question</b></a> and <a href=\"http://stackoverflow.com/help/mcve\"><b>How to create a Minimal, Complete, and Verifiable example</b></a>. Providing the necessary details, including your code, compiler warnings and associated errors, if any, will allow everyone here to help you with your question."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10339058, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-THTvXV2id0k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPWyO7N8VxsytxyED3TlAV4-co95w/mo/photo.jpg?sz=128", "display_name": "Noah McCullah", "link": "https://stackoverflow.com/users/10339058/noah-mccullah"}, "edited": false, "score": 0, "creation_date": 1571812116, "post_id": 58514762, "comment_id": 103359637, "body": "You know, I&#39;ve been struggling with both learning 2D arrays and pointers at the same time, so that is really helpful! It ended up solving my problem."}], "tags": [], "owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "is_accepted": true, "score": 2, "last_activity_date": 1571798913, "creation_date": 1571798913, "answer_id": 58514762, "question_id": 58514208, "link": "https://stackoverflow.com/questions/58514208/why-does-printing-a-2d-array-of-characters-give-garbage-values/58514762#58514762", "title": "Why does printing a 2D array of characters give garbage values?", "body": "<p>If <code>arr</code> is really a <code>char**</code>, then you need to dereference twice to get a <code>char</code>.</p>\n\n<p>So, in your statement, <code>arr+i</code> is another <code>char**</code>, pointing at a <code>char*</code> <code>i</code> steps further along from the one <code>arr</code> points at. Hopefully <code>arr</code> points at the beginning of an array of <code>char*</code> at least <code>size</code> long.</p>\n\n<p>Now <code>*(arr+i)</code> dereferences it, fetching the <code>char*</code> pointed to by <code>arr+i</code>, giving you a <code>char*</code>.</p>\n\n<p>Now <code>*(arr+i)+7</code>, for example, is another <code>char*</code>, pointing at a <code>char</code> 7 steps further along from the one <code>*(arr+i)</code> points at. Hopefully <code>*(arr+i)</code> points at the beginning of an array of <code>char</code> at least 15 long.</p>\n\n<p>But you don't dereference it, so you're attempting to print the value of the pointer (i.e. the address it holds), not the value it points to (the <code>char</code>).</p>\n\n<p>Try <code>*(*(arr+i)+7)</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 10339058, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-THTvXV2id0k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPWyO7N8VxsytxyED3TlAV4-co95w/mo/photo.jpg?sz=128", "display_name": "Noah McCullah", "link": "https://stackoverflow.com/users/10339058/noah-mccullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 58514762, "answer_count": 1, "score": 1, "last_activity_date": 1571798913, "creation_date": 1571793836, "last_edit_date": 1571798473, "question_id": 58514208, "link": "https://stackoverflow.com/questions/58514208/why-does-printing-a-2d-array-of-characters-give-garbage-values", "title": "Why does printing a 2D array of characters give garbage values?", "body": "<p>I am implementing a function that prints a 2D array of characters only using a double-pointer and pointer notation. When I run the code, it prints a bunch of garbage values in the format I want instead of the correct characters.</p>\n\n<p>My professor instructed me not to use arr[row][col], instead, I must access it using <em>(</em>(arr+i)+j) or similar</p>\n\n<p>This is a project for a class and I can't change any of the code outside of this function. The characters are meant to be formatted like a word search puzzle. The arguments passed to my function are <code>char** arr, int size</code>.</p>\n\n<p>This is my function:</p>\n\n<pre><code>for(int i = 0; i &lt; size; i++){\n    printf(\"%c %c %c %c %c %c %c %c %c %c %c %c %c %c %c\\n\", *(arr+i), *(arr+i)+1, *(arr+i)+2, *(arr+i)+3, *(arr+i)+4, *(arr+i)+5, *(arr+i)+6, * \n(arr+i)+7, *(arr+i)+8, *(arr+i)+9, *(arr+i)+10, *(arr+i)+11, *(arr+i)+12, *(arr+i)+13, *(arr+i)+14 );   }\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>W D B M J Q D B C J N Q P T I\nI R Z U X U Z E A O I O R T N\nM N Z P L R N H L Y L X H M D\nM Y E K A I D P I U L Y O W I\nA O A B A R K U F V I H L A A\nL O N M R X K I O J N A V R N\nA E P T A A R A R T O W A I A\nS U C Z A U S I N A I A L Z V\nK O T A O N R K I S S I A O N\nA H X S V K A I A E A I B N E\nU D S X N X C C D W G S A A V\nO I S D W L E J N J T X M H A\nM O X W T N H Q D X O Q A Q D\nR U U V G E O R G I A Q V D A\nV F L O R I D A L G L W O X N\n</code></pre>\n\n<p>Actual output: </p>\n\n<pre><code>\u2591 \u2592 \u2593 \u2502 \u2524 \u2561 \u2562 \u2556 \u2555 \u2563 \u2551 \u2557 \u255d \u255c \u255b\n\u2261 \u00b1 \u2265 \u2264 \u2320 \u2321 \u00f7 \u2248 \u00b0 \u2219 \u00b7 \u221a \u207f \u00b2 \u25a0\n\n0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt;\nP Q R S T U V W X Y Z [ \\ ] ^\np q r s t u v w x y z { | } ~\n\u00c9 \u00e6 \u00c6 \u00f4 \u00f6 \u00f2 \u00fb \u00f9 \u00ff \u00d6 \u00dc \u00a2 \u00a3 \u00a5 \u20a7\n\u2591 \u2592 \u2593 \u2502 \u2524 \u2561 \u2562 \u2556 \u2555 \u2563 \u2551 \u2557 \u255d \u255c \u255b\n\u2568 \u2564 \u2565 \u2559 \u2558 \u2552 \u2553 \u256b \u256a \u2518 \u250c \u2588 \u2584 \u258c \u2590\n\u2261 \u00b1 \u2265 \u2264 \u2320 \u2321 \u00f7 \u2248 \u00b0 \u2219 \u00b7 \u221a \u207f \u00b2 \u25a0\n\n0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt;\nP Q R S T U V W X Y Z [ \\ ] ^\n\u2514 \u2534 \u252c \u251c \u2500 \u253c \u255e \u255f \u255a \u2554 \u2569 \u2566 \u2560 \u2550 \u256c\n` a b c d e f g h i j k l m n\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1571792830, "post_id": 58514080, "comment_id": 103355334, "body": "To be sure I understand, <code>name1</code> is declared as <code>char name1[100]</code>? How did you assign to it?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571793066, "post_id": 58514080, "comment_id": 103355383, "body": "I think the needed info is already in your question, but ideally please turn your shown code parts into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1571793205, "post_id": 58514080, "comment_id": 103355414, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">What is array decaying?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1571794924, "last_edit_date": 1571794924, "creation_date": 1571794283, "answer_id": 58514244, "question_id": 58514080, "link": "https://stackoverflow.com/questions/58514080/passing-the-value-of-a-string-array-to-another-function/58514244#58514244", "title": "Passing the value of a string array to another function", "body": "<p><code>void getname(char name1[0])</code> formally says you're going to pass a character array of zero size (side note: <a href=\"https://stackoverflow.com/a/9723093/14660\">zero size arrays are not allowed in standard C</a> but compilers sometimes allow them).</p>\n\n<p>What it really says is you're going to pass a character pointer, a <code>char *</code>. The size is ignored. It's equivalent to the less confusing: <code>void getname(char *name1)</code>.</p>\n\n<p>In addition, since you're not going to alter the string inside function you can declare it <code>const char *</code> and be warned if you try to alter it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid getname(const char *name1){\n    printf(\"Name1 is %s\",name1);\n\n    return;\n}\n\nint main() {\n    char name[100] = \"foo\";\n    getname(name);\n}\n</code></pre>\n\n<hr>\n\n<p><code>getname(name1[0]);</code> gives you garbage because instead of passing in the pointer to the start of the string, you're passing in the first character of the string. If the string is \"Yarrow Hock\" you're trying to pass in <code>Y</code> which is really the number 89. C will then try to read what's at memory address 89 which is probably garbage.</p>\n\n<p>You can see this if you print the memory address of <code>name1</code> using <code>%p</code>.</p>\n\n<pre><code>void getname(const char *name1){\n    printf(\"Name1 points to %p\\n\",name1);\n    printf(\"Name1 is %s\\n\",name1);\n\n    return;\n}\n</code></pre>\n\n<p>You should get a warning like:</p>\n\n<pre><code>incompatible integer to pointer conversion passing 'char' to parameter of\n      type 'const char *'; take the address with &amp; [-Wint-conversion]\n</code></pre>\n\n<hr>\n\n<p>Which leads us to a very important thing: compiler warnings. They are extremely important and by default they are off. Turning them on will save you hours of head scratching. There are a bewildering array of possible warnings and they're slightly different from compiler to compiler. Here's what I use with <code>clang</code>.</p>\n\n<pre><code>-Wall -Wshadow -Wwrite-strings -Wextra -Wconversion -std=c11 -pedantic\n</code></pre>\n\n<p>You can read what each of these mean in <a href=\"https://clang.llvm.org/docs/DiagnosticsReference.html\" rel=\"nofollow noreferrer\">Diagnostic flags in Clang</a>. And yes, \"-Wall\" does not mean \"all warnings\".</p>\n\n<p>A good code editor, I recommend <a href=\"https://atom.io/\" rel=\"nofollow noreferrer\">Atom</a>, will also give you warnings as you edit.</p>\n\n<hr>\n\n<p><code>getname(&amp;name1[0]);</code> works because it is equivalent to <code>getname(name1 + 0)</code> which is equivalent to <code>getname(name1)</code>. <code>name1[0]</code> is the first character of the string. <code>&amp;</code> gets its address, which is the start of the string just like <code>name1</code> itself. <code>printf</code> then prints characters until it hits a null byte.</p>\n\n<p>You can see this by trying <code>getname(&amp;name1[1])</code>, or more directly with pointer arithmetic as <code>getname(name1 + 1)</code>. This will pass in the address of the <em>second</em> character in name1. If <code>name1 = \"Yarrow Hock\"</code> it will print <code>arrow Hock</code>. This is a valid technique for skipping prefixes without altering the string.</p>\n"}], "owner": {"reputation": 31, "user_id": 12260325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35e24b881dce361e53874c71ada4d9a8?s=128&d=identicon&r=PG&f=1", "display_name": "codeorig12", "link": "https://stackoverflow.com/users/12260325/codeorig12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571794924, "creation_date": 1571792515, "last_edit_date": 1571793399, "question_id": 58514080, "link": "https://stackoverflow.com/questions/58514080/passing-the-value-of-a-string-array-to-another-function", "title": "Passing the value of a string array to another function", "body": "<p>I'm currently in my 1st year of programming and have solved the problem to some code using string arrays but have no idea why it worked. We are still studying pointers but I wanted to try arrays for a bit.</p>\n\n<p>I wanted to pass the value of a string from the main function, to pass to another function, to compare it with another string. If the two strings are equal, it prints \"equal\" otherwise, it prints \"not equal\". Although I've solved the problem , I'm confused by how this works:</p>\n\n<pre><code>       char name1[100];\n       scanf(\"%s\",name1);\n       getname(name1[0]); \n\nreturn 0;\n}\n\nvoid getname(char name1[0]){\n\n    printf(\"Name1 is %s\",name1);\n\n    return;\n}\n</code></pre>\n\n<p>If you run it this way, it will not run the function and will return a garbage value. However, if I change </p>\n\n<pre><code>getname(name1[0]);\n</code></pre>\n\n<p>into </p>\n\n<pre><code>getname(&amp;name1[0]);\n</code></pre>\n\n<p>it works perfectly fine, why is this?. Secondly, in the \"getname\" function. since I had to add the ampersand/address to the function call, I was taught that I needed to add an asterisk next to the variable to avoid getting the actual address but to get the actual value. Why is it in</p>\n\n<pre><code>printf(\"Name1 is %s\",name1);\n</code></pre>\n\n<p>it is able to print the string perfectly fine without needing it to be:</p>\n\n<pre><code>printf(\"Name1 is %s\",*name1);\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct"], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571792555, "post_id": 58514057, "comment_id": 103355280, "body": "... and there is the confirmation by OP."}, {"owner": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "edited": false, "score": 0, "creation_date": 1571792585, "post_id": 58514057, "comment_id": 103355283, "body": "So, how do I call the data in the struct without re-declaring data.  If I remove the first line, shows data.processes unresolved."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "edited": false, "score": 0, "creation_date": 1571792618, "post_id": 58514057, "comment_id": 103355291, "body": "@N.Colostate, I&#39;ve added a bit to show one way to do that."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571792691, "post_id": 58514057, "comment_id": 103355302, "body": "@Yunnosch, admittedly, the original question had <code>data</code> as a local within <code>FCFS()</code> so I <i>knew</i> it was different. The rest was just educated supposition as to what would cause the off-by-N behaviour rather than totally random content."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "edited": false, "score": 0, "creation_date": 1571792720, "post_id": 58514057, "comment_id": 103355312, "body": "@N.Colostate I think you might have been told by somebody recently, not to use a global variable for this. Just a hunch, because the code looks like it comes from having a global. Please comment."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571792839, "post_id": 58514057, "comment_id": 103355338, "body": "@Yunnosch, I&#39;m no JonSkeet but I do okay :-)"}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1571796067, "last_edit_date": 1571796067, "creation_date": 1571792302, "answer_id": 58514057, "question_id": 58514031, "link": "https://stackoverflow.com/questions/58514031/struct-not-returning-first-row/58514057#58514057", "title": "struct not returning first row", "body": "<pre><code>void FCFS() {\n    Scheduler data;\n    printf(\"Retrieved value: %d\\n\", data.processes[0][0]); \n    // prints 3\n    ...\n}\n</code></pre>\n\n<p>This creates a <em>local</em> copy of the structure that will bear no relationship to what was read in by <code>readfile()</code> into <em>its</em> local copy. It will most likely contain arbitrary data.</p>\n\n<p>I suspect the only reason it would have the actual data (offset by one row) is that <code>readfile()</code> had <em>other</em> local variables in there that put its <code>Scheduler</code> variable at a different address on the stack.</p>\n\n<p>Then, when calling <code>FCFS()</code>, the arbitrary data that it uses is the data left there in the stachk area by <code>readfile()</code> (slightly offset as previously mentioned).</p>\n\n<p>You could check this by printing out <code>&amp;data</code> in both those functions to see if they are offset slightly.</p>\n\n<p>To fix this, you need to make a <em>single</em> <code>data</code> variable that's shared somehow by the two functions. The easiest way would be to make a file-level global, instantiating it outside of the functions like:</p>\n\n<pre><code>static Scheduler data;\n\nvoid readfile(char *file) {\n    ....\n    ....\n    fclose(fp);\n    printf(\"Value assigned: %d\\n\", data.processes[0][0]); \n    // prints 2\n}\n\nvoid FCFS() {\n    printf(\"Retrieved value: %d\\n\", data.processes[0][0]); \n    // prints 3\n    ...\n}\n</code></pre>\n\n<p>There are <em>other</em> options (which would be better than globals in a non-trivial program) but you can probably get away with a global for now.</p>\n"}], "owner": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58514057, "answer_count": 1, "score": 0, "last_activity_date": 1571796067, "creation_date": 1571791970, "last_edit_date": 1571793068, "question_id": 58514031, "link": "https://stackoverflow.com/questions/58514031/struct-not-returning-first-row", "title": "struct not returning first row", "body": "<p>I'm trying to figure out why I'm missing the first row of a 2D array contained in my struct. I printed the first value of the first row prior to leaving the previous function, which assigns values to the 2D array. In the next function that is called, which will act based on the values in the array, I printed the value again to see if they match, but they don't.  The value that is printed is the first value of the second row. Printing the rest of the 2D array shows that I'm missing the entire first row, even though the last print statement prior to executing this function displayed that the first row is there.  There is no other statements between the last print statement and this print statement, other than calling the function.</p>\n\n<pre><code>filename.csv\nProcessID,AT,BT,Priority\n2,0,5,4\n3,0,3,2 \n1,9,8,1\n4,4,6,3\n...\n\ntypedef struct _Scheduler {\n    int processes[10][4];\n    ...\n} Scheduler;\n\nvoid readfile(char *file) {\n    Scheduler data;\n    FILE *fp = fopen(filename, \"r\");\n    // ignore first line\n    // add integers to 2D array\n    ....\n    ....\n    fclose(fp);\n    for(int i = 0; i &lt; 10; i++) {\n        for(int j = 0; j &lt; 4; j++) {\n             printf(\"%d,\", data.processes[i][j]);\n        }\n        ...\n        printf(\"\\n\");\n    } \n    // prints \n    // 2,0,5,4\n    // 3,0,3,2\n    // 1,9,8,1\n    // 4,4,6,3\n}\n\nvoid FCFS() {\n    Scheduler data;\n    for(int i = 0; i &lt; 10; i++) {\n        for(int j = 0; j &lt; 4; j++) {\n             printf(\"%d,\", data.processes[i][j]);\n        }\n        printf(\"\\n\");\n    } \n    // prints \n    // 3,0,3,2 \n    // 1,9,8,1\n    // 4,4,6,3\n}\n\nint main(int argc, char **argv) {\n    readfile(argv[1]);\n    FCFS();\n    ...\n}\n</code></pre>\n\n<p>I expect data.processes[0][0] in FCFS() to print 2, but it prints 3. Printing the rest of the values show that its missing the first row, even though at the end of the last function, it prints all 4 rows.</p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 1, "creation_date": 1571791612, "post_id": 58513913, "comment_id": 103355115, "body": "You need braces around your loops. The first call to <code>printf</code> is superfluous. <code>++i</code> should be <code>i += 2</code>, with a second loop counting down. Does it matter what order students toggle the lockers in?"}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "reply_to_user": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1571792025, "post_id": 58513913, "comment_id": 103355186, "body": "@LegendofPedro in the first loop, <code>i</code> represents the locker number, but in the second loop, the outer <code>i</code> is being used for the <i>student</i> number."}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 1, "creation_date": 1571792196, "post_id": 58513913, "comment_id": 103355223, "body": "Okay, so how does the result differ from what you expect?"}, {"owner": {"reputation": 29, "user_id": 3923150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e27708d10925814eb0b0b2ef10ec9921?s=128&d=identicon&r=PG&f=1", "display_name": "user3923150", "link": "https://stackoverflow.com/users/3923150/user3923150"}, "edited": false, "score": 0, "creation_date": 1571792286, "post_id": 58513913, "comment_id": 103355236, "body": "Toggling the lockers from different directions does affect the result. I think the result suppose to be 1, 2, 4, 8, 9..etc"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1571792412, "post_id": 58513913, "comment_id": 103355252, "body": "The main thing here is that the direction they are toggled alternates as well."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1571793644, "post_id": 58513913, "comment_id": 103355498, "body": "If even students always go up from 1 and odd students go down from 100, I think the output is the same if they go in order <code>1, 2, 3, 4...</code> or <code>1, 3, 5 ... 2, 4, 6 ...</code>."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1571793857, "post_id": 58513913, "comment_id": 103355537, "body": "I wonder if anyone approaches this problem with bit shifting and Boolean algebra."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1571795343, "post_id": 58513913, "comment_id": 103355815, "body": "<a href=\"https://onlinegdb.com/B19EbNpYB\" rel=\"nofollow noreferrer\">onlinegdb.com/B19EbNpYB</a>   I think the correct answer is The open lockers are: 1 2 3 8 18 20 29 32 37 50 51 52 65 69 72 76 83 85 92 93 97 98 99 100"}], "answers": [{"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1571793861, "post_id": 58514121, "comment_id": 103355539, "body": "I&#39;m not sure.  The way I read it the question says &quot;Student 2 toggles every 2nd locker starting from the first&quot; which means they ignore locker 1 and toggle locker 2 then 4, etc.  And the same with &quot;Student 3 toggles every 3rd locker, starting from the back (the 100th).&quot; which means they don&#39;t toggle 100 or 99 but toggles the third one he comes to: 98.  Also, maybe I am missing something, but where does your code do Student 4 through 100?"}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1571794311, "post_id": 58514121, "comment_id": 103355620, "body": "It would be clearer with <code>MAX_LOCKERS</code> and <code>MAX_STUDENTS</code>. <code>for(i=2:2:100) for(n=1:i:100)</code> has the even ith students (2,4,...100) toggle the ith locker."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1571794451, "post_id": 58514121, "comment_id": 103355644, "body": "&quot;Student 2 toggles every 2nd locker starting from the first.&quot; I.e. locker 1. &quot;Student 3 toggles every 3rd locker, starting from the back (the 100th).&quot; Seems clear to me, maybe I am reading it &quot;starts at the back&quot; though? Student 1 doesn&#39;t ignore the 1st locker."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1571795468, "post_id": 58514121, "comment_id": 103355843, "body": "I guess it depends on how you read it.  If someone said to me &quot;open every second locker starting from this end&quot; I wouldn&#39;t open the first locker.  And if they said &quot;Open every third locker starting from the back&quot;  I wouldn&#39;t open the last locker.  But I can see how you could read it that way."}], "tags": [], "owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "is_accepted": false, "score": 0, "last_activity_date": 1571829481, "last_edit_date": 1571829481, "creation_date": 1571793000, "answer_id": 58514121, "question_id": 58513913, "link": "https://stackoverflow.com/questions/58513913/student-locker-problem-requires-alternation-within-array/58514121#58514121", "title": "Student Locker Problem (Requires alternation within array)", "body": "<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define MAX_LOCKERS 100\n#define MAX_STUDENTS 100\n// You should use this preprocessor directive!\n\nint main (void)\n{\n    int i, n;\n    bool locker[MAX_LOCKERS + 1];\n\n    for ( n = 1; n &lt;= MAX_LOCKERS; ++n) // student 1\n        locker[n] = true;\n        // Be consistent with usage of i/n. Even better, use descriptive names!\n\n    for ( i = 2; i &lt;= MAX_STUDENTS; i+=2)  { // even students\n        for ( n = 1; n &lt;= MAX_LOCKERS; n += i ) {\n            // 2nd student goes from 1st to 100th, not ith to 100th\n            locker[n] = ! locker[n];\n        }\n    }\n    // Multiplying by -1 (toggle) is distributive and associative so we can split these loops up\n    for ( i = 3; i &lt;= MAX_STUDENTS; i+=2)  { // odd students\n        for ( n = MAX_LOCKERS; n &gt;= 1; n -= i )\n            locker[n] = ! locker[n];\n    }\n\n    printf (\"\\nThe open lockers are: \");\n    for ( i = 1; i &lt;= MAX_LOCKERS; ++i ) {\n        if ( locker[i] )\n            printf (\"%i \", i);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I typed this on my phone<s>, so I haven't tested it</s>. To test my assumption about being able to split the loop into two, hand calculate both ways with 5 lockers/students. <s>(I'll edit to add output/a proof when it's not 0215 and I shouldn't be sleeping!)</s></p>\n\n<p>I have commented corrections/suggestions.</p>\n\n<p>You could also use a single <code>while</code> loop, and determine adding or subtracting the iterator with <code>%</code>, the integer modulo operator.</p>\n\n<hr>\n\n<p>Output:</p>\n\n<pre><code>The open lockers are: 2 3 9 28 33 36 50 64 68 73 75 82 84 91 92 96 98\n</code></pre>\n\n<p>Here's the example showing that the toggling operations can be performed in any order:\n<a href=\"https://i.stack.imgur.com/arOGR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/arOGR.png\" alt=\"lockers-sequence\"></a></p>\n\n<p>You can perform a more rigorous proof, if you like, but I thought it was fairly easy to intuit.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1571797173, "last_edit_date": 1571797173, "creation_date": 1571795501, "answer_id": 58514369, "question_id": 58513913, "link": "https://stackoverflow.com/questions/58513913/student-locker-problem-requires-alternation-within-array/58514369#58514369", "title": "Student Locker Problem (Requires alternation within array)", "body": "<p>This is an interesting problem that should hinge on <em>odd/even</em> in determining whether to work from the <em>beginning to end</em> or from the <em>end to beginning</em> toggling locker doors through all students.</p>\n\n<p>Where you will horribly confuse yourself is mixing <em>element numbers</em> (e.g. <code>for ( i = 1; i &lt;= 100; ++i )</code>) with <em>array indexes</em> (e.g. <code>for (i = 0; i &lt; 100; i++)</code>). It is always best to keep in mind that arrays are <strong><em>zero indexed</em></strong> in C and be consistent in your loop limits loop <code>0 -&gt; n-1</code> instead of <code>1 -&gt; n</code> </p>\n\n<p>(<strong>note:</strong> both are of course legal, but using the actual index eliminates the potential for violating your array bounds with an <strong>off-by-one</strong> for failure to adjust your indexes when looping <code>1 -&gt; n</code>)</p>\n\n<p>(<strong>edit-note:</strong> I was off-by-one on the loop increment -- fixed)</p>\n\n<p>The basic approach after setting all lockers open is to loop with the actual remaining student <em>indexes</em>, looping <code>1 -&gt; n-1</code>. If the current student is <strong>odd</strong> then work from the beginning to end toggling lockers. If the current student is <strong>even</strong> compute the last index that can be reached with multiples of the current value (e.g. <code>end = (100 / current) * current)</code> with integer division intentional. (you may need <code>end = 100 - (current+1);</code> depending on if you want to start 3rd from the end with student 3, etc...)  Now loop from <code>end</code> while greater or equal to zero toggling lockers.</p>\n\n<p>It may help simplify things if you write a simple toggle locker function, e.g.</p>\n\n<pre><code>void toggle (int *locker, int idx)\n{\n    if (locker[idx])        /* if locker open */\n        locker[idx] = 0;    /* close it */\n    else                    /* otherwise */\n        locker[idx] = 1;    /* open it */\n}\n</code></pre>\n\n<p>Then you avoid duplicating the conditionals in main logic of your code. Your code uses <code>bool</code>, which is fine, but I generally simply use <code>int</code> instead. So for your main logic, you could use something similar to:</p>\n\n<pre><code>    int i, j;\n    int locker[MAX_LOCKERS + 1];\n\n    for (i = 0; i &lt; 100; i++)                   /* open all lockers */\n        locker[i] = 1;\n\n    for (i = 1; i &lt; 100; i++) {                 /* loop all other students */\n        if (i % 2 == 1)                         /* odd, from start */\n            for (j = i; j &lt; 100; j += (i+1))    /* loop j=i , j += (i+1) */\n                toggle (locker, j);             /* toggle lockers at j */\n        else {                                  /* if even index */\n            int end = (100 / i) * i;            /* get end index by i */\n            for (j = end; j &gt;= 0; j -= (i+1))   /* from end, loop j -= (i+1) */\n                toggle (locker, j);             /* toggle lockers at j */\n        }\n    }\n</code></pre>\n\n<p>Putting it altogether, (and leaving it to you to substitute <code>MAX_STUDENTS</code> for your use of <code>100</code> in your code), you could do something similar to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_LOCKERS 100\n#define MAX_STUDENTS 100\n\nvoid toggle (int *locker, int idx)\n{\n    if (locker[idx])        /* if locker open */\n        locker[idx] = 0;    /* close it */\n    else                    /* otherwise */\n        locker[idx] = 1;    /* open it */\n}\n\nint main (void)\n{\n    int i, j;\n    int locker[MAX_LOCKERS + 1];\n\n    for (i = 0; i &lt; 100; i++)                   /* open all lockers */\n        locker[i] = 1;\n\n    for (i = 1; i &lt; 100; i++) {                 /* loop all other students */\n        if (i % 2 == 1)                         /* odd, from start */\n            for (j = i; j &lt; 100; j += (i+1))    /* loop j=i , j += (i+1) */\n                toggle (locker, j);             /* toggle lockers at j */\n        else {                                  /* if even index */\n            int end = (100 / i) * i;            /* get end index by i */\n            for (j = end; j &gt;= 0; j -= (i+1))   /* from end, loop j -= (i+1) */\n                toggle (locker, j);             /* toggle lockers at j */\n        }\n    }\n\n    for (i = 0; i &lt; 100; i++) {     /* output results in grid form */\n        if (i &amp;&amp; i % 10 == 0)\n            putchar ('\\n');\n        printf (\" %s\", locker[i] ? \"[x]\" : \"[ ]\");\n    }\n    putchar ('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>Outputting the final state of the lockers in grid form, (you can do it however you like)</p>\n\n<pre><code>$ ../bin/openlockers2\n [ ] [ ] [x] [x] [ ] [ ] [ ] [x] [ ] [x]\n [x] [ ] [x] [ ] [ ] [x] [x] [ ] [ ] [ ]\n [ ] [ ] [ ] [x] [x] [x] [x] [x] [ ] [x]\n [x] [ ] [x] [x] [x] [x] [x] [ ] [ ] [ ]\n [ ] [ ] [x] [x] [ ] [x] [x] [x] [x] [ ]\n [ ] [x] [ ] [ ] [x] [ ] [x] [ ] [ ] [ ]\n [ ] [x] [x] [ ] [x] [x] [ ] [x] [x] [ ]\n [x] [ ] [x] [ ] [ ] [x] [ ] [x] [x] [ ]\n [ ] [x] [ ] [x] [ ] [x] [ ] [ ] [x] [x]\n [x] [ ] [x] [x] [x] [ ] [x] [x] [x] [x]\n</code></pre>\n\n<p><code>[x]</code> - locker open. (you may want to swap that if it makes more sense to you)</p>\n\n<p><strong>NOTE:</strong> This is intended to show an approach to handle your students working forward or backwards through the remaining number of students. <strong>I have not spent time verifying the logic is correct...</strong> I suspect it is (or is very close), but the final validation of the correctness is left to you.</p>\n\n<p>If using the alternate definition of <code>end</code> to, e.g. start toggling 3rd from end with the 3rd student, you would have:</p>\n\n<pre><code>            int end = 100 - (i+1);\n            for (j = end; j &gt;= 0; j -= (i+1))   /* from end, loop j -= (i+1) */\n                toggle (locker, j);             /* toggle lockers at j */\n</code></pre>\n\n<p>and consequently:</p>\n\n<pre><code>$ ./bin/openlockers2\n [x] [x] [x] [ ] [ ] [ ] [ ] [x] [ ] [ ]\n [ ] [ ] [ ] [ ] [ ] [ ] [ ] [x] [ ] [x]\n [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [x] [ ]\n [ ] [x] [ ] [ ] [ ] [ ] [x] [ ] [ ] [ ]\n [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [x]\n [x] [x] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ]\n [ ] [ ] [ ] [ ] [x] [ ] [ ] [ ] [x] [ ]\n [ ] [x] [ ] [ ] [ ] [x] [ ] [ ] [ ] [ ]\n [ ] [ ] [x] [ ] [x] [ ] [ ] [ ] [ ] [ ]\n [ ] [x] [x] [ ] [ ] [ ] [x] [x] [x] [x]\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 29, "user_id": 3923150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e27708d10925814eb0b0b2ef10ec9921?s=128&d=identicon&r=PG&f=1", "display_name": "user3923150", "link": "https://stackoverflow.com/users/3923150/user3923150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1571829481, "creation_date": 1571790614, "last_edit_date": 1571793458, "question_id": 58513913, "link": "https://stackoverflow.com/questions/58513913/student-locker-problem-requires-alternation-within-array", "title": "Student Locker Problem (Requires alternation within array)", "body": "<p>I have to solve this:</p>\n\n<blockquote>\n  <p>A school has 100 lockers and 100 students. Student 1 opens all lockers. Student 2 toggles every 2nd locker starting from the first. Student 3 toggles every 3rd locker, starting from the back (the 100th). This goes all the way to the Nth student. (They alternate, starting from the back or front). </p>\n</blockquote>\n\n<p>I have to display the open lockers at the end. I can't seem to figure out how to make the alternating requirement work. Here's the code so far: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define MAX_LOCKERS 100\n#define MAX_STUDENTS 100\n\nint main (void)\n{\nint i, n;\nbool locker[MAX_LOCKERS + 1];\n\nfor ( i = 1; i &lt;= 100; ++i )\n    locker[i] = true;\n\nfor ( i = 2; i &lt;= 100; ++i ) \n    for ( n = i; n &lt;= 100; n += i )\n        locker[n] = ! locker[n];\n        if ( locker[i] )\n            printf (\"%i \", i);\n\nprintf (\"\\nThe open lockers are: \");\n\nfor ( i = 1; i &lt;= 100; ++i )\n    if ( locker[i] )\n        printf (\"%i \", i);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "winapi"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1571792217, "post_id": 58513890, "comment_id": 103355227, "body": "You&#39;ll have to go lower level and not use <code>main</code> at all. Set an explicit <code>&#47;ENTRY</code> that goes to your replacement <code>main</code>. You&#39;ll also have to set the compiler options to avoid things like stack checking (which is where the <code>__RTC_...</code> references are coming from)."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1571826191, "post_id": 58513890, "comment_id": 103366744, "body": "Using /MT is wrong, that links the code that is normally in the &quot;runtime DLL&quot; into your program.  You&#39;ll have to do it like VB4 did it and use /MD.  And now it is no effort at all to avoid any such link dependencies."}, {"owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "edited": false, "score": 0, "creation_date": 1571829367, "post_id": 58513890, "comment_id": 103368366, "body": "after further testing I found /MT or /MD both result in no imports and the same file size as long as I don&#39;t call any C runtime functions."}, {"owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "edited": false, "score": 0, "creation_date": 1571830540, "post_id": 58513890, "comment_id": 103369025, "body": "The only difference now at initial execution is I see my app calls ntdll!_RtlUserThreadStart -&gt; KERNEL32!BaseThreadInitThunk  -&gt; imported DLL function; where as the VB4 app goes straight ntdll!_RtlUserThreadStart -&gt; imported DLL function, skipping over KERNEL32!BaseThreadInitThunk (At least based on WinDbg stack trace with breakpoint set on imported DLL function starting)"}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1571816146, "post_id": 58514502, "comment_id": 103361606, "body": "yes, only for what is rename <i>.cpp</i> to <i>.c</i> ? this is not need"}, {"owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1571822643, "post_id": 58514502, "comment_id": 103364851, "body": "it may not be needed but I wanted to create C program."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1571823140, "post_id": 58514502, "comment_id": 103365134, "body": "what is <i>c</i> program ? really <i>exe</i> is <i>exe</i> which language you use not play role here. we can do this and with <i>c++</i> too"}], "tags": [], "owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "is_accepted": false, "score": 1, "last_activity_date": 1571822927, "last_edit_date": 1571822927, "creation_date": 1571796664, "answer_id": 58514502, "question_id": 58513890, "link": "https://stackoverflow.com/questions/58513890/how-to-create-minimal-win32-c-program-with-no-windows-apis-in-import-table-with/58514502#58514502", "title": "How To Create Minimal Win32 C Program with no Windows APIs in Import Table with Visual Studio", "body": "<p>Raymond Chen's comment sent me in the right direction. To create this program in Visual Studio 2019 used </p>\n\n<ol>\n<li>New Project | C++ Console Program</li>\n<li>Renamed .cpp to .c (If you want to create a C program)</li>\n<li><p>Replaced code with custom entry point:</p>\n\n<p>int myMain()\n{\n}</p></li>\n<li><p>In Project properties | <strong>C/C++ Code Generation</strong> set <strong>Basic Runtime checks</strong> to nothing (erase the text), set <strong>Runtime library</strong> to Multi-threaded Debug (/MTd) for debug build or Multi-threaded (/MT) for release build, set <strong>Security Check</strong> to Disable Security Check (/GS-)</p></li>\n<li><p>In Project properties | <strong>Linker</strong> | <strong>Input</strong> | remove everything from <strong>Additional  Dependencies</strong> and set <strong>Ignore All Default Libraries</strong> to <strong>Yes (/NODEFAULTLIB)</strong></p></li>\n<li><p>In Project properties | <strong>Linker</strong> | <strong>Advanced</strong> set Entry point to myMain</p></li>\n</ol>\n\n<p>You now have a program with a completely empty import table.</p>\n"}], "owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571822927, "creation_date": 1571790317, "last_edit_date": 1571790705, "question_id": 58513890, "link": "https://stackoverflow.com/questions/58513890/how-to-create-minimal-win32-c-program-with-no-windows-apis-in-import-table-with", "title": "How To Create Minimal Win32 C Program with no Windows APIs in Import Table with Visual Studio", "body": "<p>I'm trying to replicate a bug from a legacy VB4 application. The EXE itself doesn't have any Windows APIs in the import table; instead they are all loaded from the VB runtime DLL.</p>\n\n<p>I want to recreate a similar scenario but using C in Visual Studio. Later I will create my equivalent of the runtime DLL with Windows API imports, however the first step is to ensure no Windows APIs are in the import table within my EXE.</p>\n\n<p>So far I have removed nearly everything from import table by using /SUBSYSTEM:CONSOLE, removing all .LIB from Linker -> Input -> Additional Dependencies , and setting runtime library to Multi-threaded Debug (/MTd). </p>\n\n<p>However kernel32.dll APIs are still in the import table. While I realise /SUBSYSTEM:NATIVE is typically for drivers, I'm not sure if that's what I need to use, however I couldn't get a minimal application (i.e. one that launches, then exits without crashing) to compile with that option.</p>\n\n<p>If I use Linker -> Input -> Ignore All Default Libraries -> Yes (/NODEFAULTLIB) I get the following errors:</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State   Suppression State\nError   LNK2001 unresolved external symbol _mainCRTStartup  Minimalist  C:\\Users\\chentiangemalc\\source\\repos\\Minimalist\\Minimalist\\LINK 1       \nError   LNK2019 unresolved external symbol __RTC_CheckEsp referenced in function _main  Minimalist  C:\\Users\\chentiangemalc\\source\\repos\\Minimalist\\Minimalist\\Minimalist.obj   1       \nError   LNK2001 unresolved external symbol __RTC_InitBase   Minimalist  C:\\Users\\chentiangemalc\\source\\repos\\Minimalist\\Minimalist\\Minimalist.obj   1       \nError   LNK2001 unresolved external symbol __RTC_Shutdown   Minimalist  C:\\Users\\chentiangemalc\\source\\repos\\Minimalist\\Minimalist\\Minimalist.obj   1\n</code></pre>\n\n<p>The code I'm trying to compile has no includes and is just:</p>\n\n<pre><code>int main()\n{\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1571790104, "post_id": 58513855, "comment_id": 103354872, "body": "You&#39;re declaring a new <code>x</code> variable in your <code>while</code> condition.  That&#39;s not going to work.  <code>x</code> is <i>already declared.</i>"}, {"owner": {"reputation": 19, "user_id": 10941771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-acMIck4XwyE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-zWXGUOktk9u4fUhCPsUMf69d5Q/mo/photo.jpg?sz=128", "display_name": "Damion Owens", "link": "https://stackoverflow.com/users/10941771/damion-owens"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1571790743, "post_id": 58513855, "comment_id": 103354987, "body": "@RobertHarvey Yeah i just typed it on the website wrong it still exits after i open it"}, {"owner": {"reputation": 19, "user_id": 10941771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-acMIck4XwyE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-zWXGUOktk9u4fUhCPsUMf69d5Q/mo/photo.jpg?sz=128", "display_name": "Damion Owens", "link": "https://stackoverflow.com/users/10941771/damion-owens"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1571790765, "post_id": 58513855, "comment_id": 103354990, "body": "@user3121023 this worked can you tell me why that is."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1571790809, "post_id": 58513855, "comment_id": 103354995, "body": "It works better if you just copy/paste your code into Stack Overflow instead of trying to retype it."}, {"owner": {"reputation": 19, "user_id": 10941771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-acMIck4XwyE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-zWXGUOktk9u4fUhCPsUMf69d5Q/mo/photo.jpg?sz=128", "display_name": "Damion Owens", "link": "https://stackoverflow.com/users/10941771/damion-owens"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1571790941, "post_id": 58513855, "comment_id": 103355014, "body": "@RobertHarvey yeah i would but i have to run this on a vm and my schools internet doesnt work if i have a VM on because it doesnt recognize my pc."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1571791022, "post_id": 58513855, "comment_id": 103355019, "body": "<code>fgets</code> may return NULL in case of read error so this is not a safe usage"}, {"owner": {"reputation": 19, "user_id": 10941771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-acMIck4XwyE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-zWXGUOktk9u4fUhCPsUMf69d5Q/mo/photo.jpg?sz=128", "display_name": "Damion Owens", "link": "https://stackoverflow.com/users/10941771/damion-owens"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1571791130, "post_id": 58513855, "comment_id": 103355036, "body": "@user3121023 oh okay im new to c so i dont know how to fully use these functions. Anyways thanks for the help. if you want credit for it go ahead and post the answer for it."}, {"owner": {"reputation": 19, "user_id": 10941771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-acMIck4XwyE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-zWXGUOktk9u4fUhCPsUMf69d5Q/mo/photo.jpg?sz=128", "display_name": "Damion Owens", "link": "https://stackoverflow.com/users/10941771/damion-owens"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1571791206, "post_id": 58513855, "comment_id": 103355046, "body": "@M.M Yeah i agree but my professor wanted me to use the fgets function"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1571791267, "post_id": 58513855, "comment_id": 103355055, "body": "Just remember that fgets stores EVERY character you type.  It stops AFTER you press Enter but by then it has already stored the Enter character."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1571791333, "post_id": 58513855, "comment_id": 103355071, "body": "@DamionOwens you should store the return value and check it to be non-null, before doing <code>strcmp</code> on it"}], "answers": [{"tags": [], "owner": {"reputation": 1939, "user_id": 3416302, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e06a91ad0f7bb56b03929c75bb866852?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Azim", "link": "https://stackoverflow.com/users/3416302/mohammad-azim"}, "is_accepted": false, "score": 0, "last_activity_date": 1571791505, "creation_date": 1571791505, "answer_id": 58513985, "question_id": 58513855, "link": "https://stackoverflow.com/questions/58513855/how-do-i-get-this-to-properly-exit-the-program/58513985#58513985", "title": "How do i get this to properly exit the program?", "body": "<p>The keyboard input contains a new line at the end. Change <code>\"exit\"</code> to <code>\"exit\\n\"</code> in call to <code>strcmp</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 10941771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-acMIck4XwyE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-zWXGUOktk9u4fUhCPsUMf69d5Q/mo/photo.jpg?sz=128", "display_name": "Damion Owens", "link": "https://stackoverflow.com/users/10941771/damion-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571791505, "creation_date": 1571789964, "last_edit_date": 1571791140, "question_id": 58513855, "link": "https://stackoverflow.com/questions/58513855/how-do-i-get-this-to-properly-exit-the-program", "title": "How do i get this to properly exit the program?", "body": "<p>So i am trying to get this program to simply exit but i can seem to get it to work.</p>\n\n<p>i tried a lot of things. one thing i found odd as well is if i made x = 0 in the while loop it would immediately exit the program so i had to make it x !=0. i dont understand what that is so if you can answer that as well that would be nice.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char a[256];\n    int x = 0;\n    while (x != 0) {\n        int y = strcmp(fgets(a, 256, stdin), \"exit\");\n        if (y==0) {\n            exit(0);\n        }\n        else {\n            printf(\"Line read:%s\\n\",a);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>so it should output right now something like this(i am also running this in a linux terminal):</p>\n\n<pre><code>//input://\n hello\n//output:// \n Line read: hello\n//(program stays open for more inputs)//\n//input//\n exit\n//(the program now closes in the terminal and you return to directory)//\n</code></pre>\n"}, {"tags": ["c++", "c", ".net", "oracle", "blob"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1572102078, "post_id": 58513806, "comment_id": 103460489, "body": "What are you trying to do with the results in pl/sql? What doe &quot;not working&quot; mean?"}, {"owner": {"reputation": 67, "user_id": 11936622, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157815706582780/picture?type=large", "display_name": "Pramod Kumar", "link": "https://stackoverflow.com/users/11936622/pramod-kumar"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1572102560, "post_id": 58513806, "comment_id": 103460607, "body": "The output looks like below when i run the query i mentioned in the post:     &quot;&amp;&quot;"}, {"owner": {"reputation": 67, "user_id": 11936622, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157815706582780/picture?type=large", "display_name": "Pramod Kumar", "link": "https://stackoverflow.com/users/11936622/pramod-kumar"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1572102741, "post_id": 58513806, "comment_id": 103460669, "body": "The data is coming a encrypted when using the query ......"}], "owner": {"reputation": 67, "user_id": 11936622, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157815706582780/picture?type=large", "display_name": "Pramod Kumar", "link": "https://stackoverflow.com/users/11936622/pramod-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572370562, "creation_date": 1571789507, "last_edit_date": 1572370562, "question_id": 58513806, "link": "https://stackoverflow.com/questions/58513806/read-a-oracle-blob-written-in-little-endian-using-c", "title": "Read a Oracle BLOB written in little endian using C++", "body": "<p>I have a Oracle table with BLOB Column that is visible from a application build in .NET. i am not able to extract the BLOB column as it is written in little endian.</p>\n\n<p>I tried to extract the BLOB via Oracle Code with below code but not able to do so. </p>\n\n<p>Not working:</p>\n\n<p>select utl_raw.cast_to_varchar2(dbms_lob.substr(BLOB_FIELD)) from TABLE_WITH_BLOB where ID = '';</p>\n\n<p>How to extract a BLOB which is written in c++ , stores the blob data in little endian ?</p>\n"}, {"tags": ["python", "c", "class", "struct"], "comments": [{"owner": {"reputation": 1309, "user_id": 9857620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/50JqF.jpg?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/9857620/frank"}, "edited": false, "score": 2, "creation_date": 1571786072, "post_id": 58513426, "comment_id": 103354090, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20066176/python-struct-ctypes\">Python - struct / ctypes</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1571786202, "post_id": 58513426, "comment_id": 103354123, "body": "Try using a <a href=\"https://docs.python.org/3/library/collections.html#collections.namedtuple\" rel=\"nofollow noreferrer\"><code>collections.nametuple</code></a> \u2014 they should be much smaller."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1571787326, "post_id": 58513426, "comment_id": 103354362, "body": "Is your question how to design a data structure or how to serialize a Python object to a file?"}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1571788432, "post_id": 58513426, "comment_id": 103354597, "body": "&quot;I couldn&#39;t read byte by byte because of the size of my class was 888 while in C it was 44&quot; - I don&#39;t understand: what exactly is it that you are trying to <code>read byte by byte</code>? Where did <code>simplefs.bin</code> come from, and what problem are you trying to solve by reading it in like this, exactly? Why not actually parse and interpret the file?"}, {"owner": {"reputation": 29, "user_id": 12260088, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6_zYZzmnSw/AAAAAAAAAAI/AAAAAAAAE4Y/P3Su1AwwwPA/photo.jpg?sz=128", "display_name": "Ozan Mudul", "link": "https://stackoverflow.com/users/12260088/ozan-mudul"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1571822296, "post_id": 58513426, "comment_id": 103364671, "body": "@mkrieger1 the exact thing I want is creating a structure then writing it to a file as binary then read it but it seems like python read the whole file and put the pointer to the end, here I have multiple problems to summarize  1. create a structure, 2. write the structure as binary to a file 3. read the binary file and convert to utf-8"}, {"owner": {"reputation": 29, "user_id": 12260088, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6_zYZzmnSw/AAAAAAAAAAI/AAAAAAAAE4Y/P3Su1AwwwPA/photo.jpg?sz=128", "display_name": "Ozan Mudul", "link": "https://stackoverflow.com/users/12260088/ozan-mudul"}, "reply_to_user": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1571822686, "post_id": 58513426, "comment_id": 103364876, "body": "@KarlKnechtel sorry I am pretty new to this platform forgive my foolish topic, I used pickle to dump the data as binary and write it to a file <a href=\"https://paste.ubuntu.com/p/85nST5QJVB/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/p/85nST5QJVB</a>      here I am trying to write my classes (which are structures I tried to create) then write to a file as binary and according to my output it is worked so far so good but then when I want to read like the C code given above I couldn&#39;t manage to do it"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1571824351, "post_id": 58513426, "comment_id": 103365811, "body": "If you pickled it before writing it to a file, you have to unpickle it again after reading the raw data. You cannot simply use the raw data as a class instance."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12260088, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6_zYZzmnSw/AAAAAAAAAAI/AAAAAAAAE4Y/P3Su1AwwwPA/photo.jpg?sz=128", "display_name": "Ozan Mudul", "link": "https://stackoverflow.com/users/12260088/ozan-mudul"}, "edited": false, "score": 0, "creation_date": 1571823081, "post_id": 58514578, "comment_id": 103365094, "body": "It makes sense but I don&#39;t know my structure size and before I do the reading operation I want the code to do that for me (I found out the size given above from my C code, I couldn&#39;t get the same result from python)"}], "tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": false, "score": 0, "last_activity_date": 1571797289, "creation_date": 1571797289, "answer_id": 58514578, "question_id": 58513426, "link": "https://stackoverflow.com/questions/58513426/best-way-to-design-c-like-struct-in-python/58514578#58514578", "title": "Best way to design c like struct in python", "body": "<p>You cannot design a struct and then try to read/write it to the file and expect it to be binary identical. If you want to parse any binary data, you have module <code>struct</code> that allows you to interpret the data you have read as <code>int</code>, <code>float</code> and a dozen of other formats. Still you have to write the formats manually. In your particular case:</p>\n\n<pre><code>import struct\n\nwith ('datafile.dat') as fin :\n    raw_data = fin.read()\n\ndata = struct.unpack_from( '11I', raw_data )  # 11 integers\ninode_bitmap = data[0]\ndata_bitmap = data[1:]\n</code></pre>\n\n<p>Or something along the lines...</p>\n"}], "owner": {"reputation": 29, "user_id": 12260088, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6_zYZzmnSw/AAAAAAAAAAI/AAAAAAAAE4Y/P3Su1AwwwPA/photo.jpg?sz=128", "display_name": "Ozan Mudul", "link": "https://stackoverflow.com/users/12260088/ozan-mudul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571797289, "creation_date": 1571786002, "question_id": 58513426, "link": "https://stackoverflow.com/questions/58513426/best-way-to-design-c-like-struct-in-python", "title": "Best way to design c like struct in python", "body": "<p>First of all, I just started python yet I really tried hard to find what fits for me. The thing I am going to do is a simple file system for linux but to tell the truth I don't even sure if it is achievable with python. So I need a bit help of here.</p>\n\n<p>I tried to create a class structure and named tuples (one at a time which one fits) and I decided classes would be better for me. The thing is I couldn't read byte by byte because of the size of my class was 888 while in C it was 44 (I used sys.getsizeof() there) It will be more understand what I want to achieve with some code below</p>\n\n<p>For this structure </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct sb{\n    int inode_bitmap;\n    int data_bitmap[10];\n};\n</code></pre>\n\n<p>I used </p>\n\n<pre><code>#SUPER BLOCK\nclass sb(object):\n    __slots__ = ['inode_bitmap', 'data_bitmap'] #REDUCE RAM USAGE\n    def __init__(bruh, inode_bitmap, data_bitmap):\n        bruh.inode_bitmap = inode_bitmap\n        bruh.data_bitmap = [None] * 10 #DEFINITION OF ARRAY\n</code></pre>\n\n<p>Everything was fine till I read it</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    FILE * fin = fopen(\"simplefs.bin\", \"r\");\n        struct inode slash;\n\n    fseek(fin, sizeof(struct sb), SEEK_SET);\n    fread(&amp;slash,sizeof(slash),1,fin);\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>fin = open(\"simplefs.bin\", \"rb\")\n\n\nslash = inode\n\nprint(\"pos:\", fin.tell())\ncontents = fin.read(sys.getsizeof(sb))\nprint(contents)\n</code></pre>\n\n<p>Since actual file size was smth like 4800 however when I was reading the size was approximately 318</p>\n\n<p>I am pretty aware that python is not C but I am just doing some experiments if it is achievable</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1571785195, "post_id": 58513308, "comment_id": 103353903, "body": "What have you tried and what isnt working ?"}, {"owner": {"reputation": 57, "user_id": 10935093, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pmRyNyW01Oc/AAAAAAAAAAI/AAAAAAAAAr4/6dPveqj4uok/photo.jpg?sz=128", "display_name": "Diogo Cruz", "link": "https://stackoverflow.com/users/10935093/diogo-cruz"}, "reply_to_user": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1571785302, "post_id": 58513308, "comment_id": 103353926, "body": "I&#39;ve tried the method that is in this question, with some minor tweeks but nothing seems to work to notice some worthy progress."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1571787368, "post_id": 58513308, "comment_id": 103354371, "body": "Try <code>mNx100[i*scalar][j]</code> --&gt; <code>mNx100[scalar][j]*i</code>"}, {"owner": {"reputation": 57, "user_id": 10935093, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pmRyNyW01Oc/AAAAAAAAAAI/AAAAAAAAAr4/6dPveqj4uok/photo.jpg?sz=128", "display_name": "Diogo Cruz", "link": "https://stackoverflow.com/users/10935093/diogo-cruz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571828698, "post_id": 58513308, "comment_id": 103368005, "body": "@chux it doesn&#39;t work"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571835858, "post_id": 58513308, "comment_id": 103372000, "body": "&quot;it doesn&#39;t work&quot; is not very informative.  What was seen?  What was expected?"}, {"owner": {"reputation": 195, "user_id": 4432916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773f5c33058603089e08b3f435dabde3?s=128&d=identicon&r=PG&f=1", "display_name": "thomachan", "link": "https://stackoverflow.com/users/4432916/thomachan"}, "edited": false, "score": 1, "creation_date": 1571906816, "post_id": 58513308, "comment_id": 103397403, "body": "mNx100[i*scalar][j] --&gt; mNx100[i][j]*scalar;"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12267024, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Bl8j6dOE-Zw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6x-z6Tx5YeZA-LI-cSiLWTuEq2g/photo.jpg?sz=128", "display_name": "SANDEEP S 19BCE10252", "link": "https://stackoverflow.com/users/12267024/sandeep-s-19bce10252"}, "is_accepted": false, "score": 0, "last_activity_date": 1571898469, "creation_date": 1571898469, "answer_id": 58535358, "question_id": 58513308, "link": "https://stackoverflow.com/questions/58513308/multiply-a-line-of-a-matrix-by-a-number-given/58535358#58535358", "title": "Multiply a line of a matrix by a number given", "body": "<p>I WROTE THIS CODING AND VERIFIED BY MYSELF IT WORKS SUCCESSFULLY.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    int main() \n    {\n        int i,j,a[5][5],b,c,d,m,n,r;\n        printf(\"Enter the number of rows and columns\\n\");\n        scanf(\"%d %d\",&amp;m,&amp;n);\n        printf(\"Enter the matrix\\n\");\n        for(i=1;i&lt;=m;i++)\n        {\n            for(j=1;j&lt;=n;j++)\n            {\n                scanf(\"%d\",&amp;a[i][j]);\n            }\n        }\n        printf(\"Enter the number to multiply the matrix\\n\");\n        scanf(\"%d\",&amp;b);\n        printf(\"Enter 0 to multiply row or 1 to multiply column\\n\");\n        scanf(\"%d\",&amp;d);\n        if(d==0)\n        {\n            printf(\"Enter the row number to be multiplied\\n\");\n            scanf(\"%d\",&amp;r);\n            for(i=r,j=1;j&lt;=n;j++)\n            {\n                a[i][j]*=b;\n            }\n        }\n        else if(d==1)\n        {\n            printf(\"Enter the row number to be multiplied\\n\");\n            scanf(\"%d\",&amp;c);\n            for(j=c,i=1;i&lt;=m;i++)\n            {\n                a[i][j]*=b;\n            }\n        }\n        printf(\"matrix after multiplied\\n\");\n        for(i=1;i&lt;=m;i++)\n        {\n            for(j=1;j&lt;=n;j++)\n            {\n                printf(\"%d  \",a[i][j]);\n            }\n            printf(\"\\n\");\n        }\n        return 0;\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nzyGA.png\" rel=\"nofollow noreferrer\">OUTPUT OF THIS CODING</a></p>\n"}, {"tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1571907279, "creation_date": 1571907279, "answer_id": 58537715, "question_id": 58513308, "link": "https://stackoverflow.com/questions/58513308/multiply-a-line-of-a-matrix-by-a-number-given/58537715#58537715", "title": "Multiply a line of a matrix by a number given", "body": "<blockquote>\n  <p>I'm supposed to multiply a certain line (I specify what line exactly in the 4th argument of the function) of a given matrix by a number</p>\n</blockquote>\n\n<p>Usually, <em>\"multiply a row of a matrix by a scalar\"</em> means to multiply <strong>every element</strong> of the row by a certain scalar value. That's not what the posted function does, it multiplies the <strong>index</strong> of the row by the passed argument:</p>\n\n<pre><code>void multiply_matrixNx100_line_by_scalar(int mNx100[][MAXCOLS100], int lines, int columns,\n                                         int line, int scalar) {\n    for (int i = 0; i &lt; lines; i++) {        // &lt;-- Useless, the row is known\n        for (int j = 0; j &lt; columns; j++) {\n            if(i == line){\n                printf(\"%d\\n\", mNx100[i*scalar][j] );\n                //                    ^^^^^^^^\n            }\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>If the intent is to only print the modified row, the previous function could be rewritten as</p>\n\n<pre><code>void multiply_matrixNx100_line_by_scalar(int mNx100[][MAXCOLS100], int lines, int columns,\n                                         int line, int scalar) {\n    if (line &lt; 0  ||  line &gt;= lines)\n        return;\n    for (int j = 0; j &lt; columns; j++) {\n        printf(\"%d\\n\", mNx100[line][j] * scalar);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>If instead the function is supposed to only modify the matrix, without printing it, we could use</p>\n\n<pre><code>mNx100[line][j] *= scalar;\n</code></pre>\n\n<p>Inside the loop, in place of the call to <code>printf</code>.</p>\n"}], "owner": {"reputation": 57, "user_id": 10935093, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pmRyNyW01Oc/AAAAAAAAAAI/AAAAAAAAAr4/6dPveqj4uok/photo.jpg?sz=128", "display_name": "Diogo Cruz", "link": "https://stackoverflow.com/users/10935093/diogo-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571907279, "creation_date": 1571785020, "question_id": 58513308, "link": "https://stackoverflow.com/questions/58513308/multiply-a-line-of-a-matrix-by-a-number-given", "title": "Multiply a line of a matrix by a number given", "body": "<p>I'm supposed to multiply a certain line (I specify what line exactly in the 4th argument of the function) of a given matrix by a number. </p>\n\n<p>The main function:</p>\n\n<pre><code>int main_tp05(int argc, const char *argv[]){\n    int mNx100[][MAXCOLS100] = {{1,2,3},{4,5,6},{7,8,9}};\n    multiply_matrixNx100_line_by_scalar(mNx100,3,3,1,2);\n    return  0;\n}\n</code></pre>\n\n<p>I've tried to solve it like so:</p>\n\n<pre><code>void multiply_matrixNx100_line_by_scalar(int mNx100[][MAXCOLS100], int lines, int columns, int line, int scalar){\n    for (int i = 0; i &lt; lines; i++) {\n        for (int j = 0; j &lt; columns; j++) {\n            if(i == line){\n                printf(\"%d\\n\", mNx100[i*scalar][j] );\n            }\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>To note that: </p>\n\n<pre><code>1- I can\u00b4t change the parameters.\n2- MAXCOLS100 is a macro on the .h file. I put it with the value of 3.\n3- The scalar is the number I want to multiply the line by. \n</code></pre>\n"}, {"tags": ["c", "data-structures", "linked-list", "space-complexity"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1571785059, "post_id": 58513288, "comment_id": 103353876, "body": "Sounds like homework..."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1571785206, "post_id": 58513288, "comment_id": 103353905, "body": "If the space complexity is not O(1) but rather O(N), how would you explain/prove that? Where is the function allocating memory in proportion to the size of the list? Which statements/expressions in the function allocate memory, using what discipline?"}, {"owner": {"reputation": 345, "user_id": 11042549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-udqcEy-M2l8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC-2rnozeBnfawya37GZi0pgQJ2A/mo/photo.jpg?sz=128", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/11042549/mohamed-moustafa"}, "edited": false, "score": 0, "creation_date": 1571786018, "post_id": 58513288, "comment_id": 103354076, "body": "Worth mentioning is the above function was created by me. The assignment was to comment about the memory required to traverse a linked list (which we needed to create in C) in reverse. I created several functions but a friend keeps insisting the above uses O(n) so I want a more experienced opinion."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1571794295, "post_id": 58513288, "comment_id": 103355616, "body": "@MohamedMoustafa Has your friend justified his claim? What is his justification?"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1571804235, "post_id": 58513288, "comment_id": 103357467, "body": "&quot;Space complexity&quot; requires a definition to answer your question. Mostly people are interested in space taken by the algorithm exclusive of inputs and outputs. Real programs use stack frame and heap memory. Your algorithm uses a few local variables in one stack frame (no recursion) and no heap (<code>malloc()</code>) . With these observations you should be able to answer your own question. Your friend might be reasoning that an input list of size n requires O(n) space. That&#39;s not a normal way to analyze algorithm memory use."}], "owner": {"reputation": 345, "user_id": 11042549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-udqcEy-M2l8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMC-2rnozeBnfawya37GZi0pgQJ2A/mo/photo.jpg?sz=128", "display_name": "Mohamed Moustafa", "link": "https://stackoverflow.com/users/11042549/mohamed-moustafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571794117, "creation_date": 1571784927, "last_edit_date": 1571794117, "question_id": 58513288, "link": "https://stackoverflow.com/questions/58513288/space-complexity-analysis-of-a-function-for-traversing-a-linked-list-in-reverse", "title": "Space complexity analysis of a function for traversing a linked list in reverse?", "body": "<p>Given a node with the following struct:</p>\n\n<pre><code>typedef struct listElementStruct{\n  void* data;\n  size_t size; //size of data not list\n  struct listElementStruct* next;\n  void (*print_func)(void*); //pointer to one of the custom print functions\n} listElement;\n\n</code></pre>\n\n<p>Does this function have a constant memory O(1) or linear O(n) space complexity?</p>\n\n<pre><code>void reverse_traverse(listElement* start){\n\n  listElement* current = start;\n  int size_of_list=0;\n\n  while(current != NULL){\n      current=current-&gt;next;\n      size_of_list++;\n  }\n\n  int nextVisit = size_of_list;\n\n  While(nextVisit&gt;=0){\n     current = start;\n     for(int i=0;i&lt;nextVisit;i++){\n         current = current-&gt;next;\n     } \n     current-&gt;print_func(current-&gt;data);\n     nextVisit--;\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1571781813, "post_id": 58512793, "comment_id": 103353055, "body": "<code>i&lt;=numemployees</code>. you want <code>&lt;</code> instead of <code>&lt;=</code>. Also in <code>print_array</code> you are printing the last element twice."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1571781865, "post_id": 58512793, "comment_id": 103353077, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">this article</a> for tips on debugging your code."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 2, "creation_date": 1571781904, "post_id": 58512793, "comment_id": 103353086, "body": "Do you want <code>%-25s</code>, to get left-justification rather than the default right-justification?"}, {"owner": {"reputation": 31, "user_id": 12206709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwuYp.gif?s=128&g=1", "display_name": "aticboy", "link": "https://stackoverflow.com/users/12206709/aticboy"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571782861, "post_id": 58512793, "comment_id": 103353304, "body": "@KamilCuk thanks, I did that but the array stars at 0 so when the user asks just for 2 employees, it asks for 3, that&#39;s why I changed that and put just  &quot;&lt;&quot; instead of &quot;&lt;=&quot;."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571782884, "post_id": 58512793, "comment_id": 103353311, "body": "But in the previous loop you have <code>i&lt;numemployees;</code>."}, {"owner": {"reputation": 31, "user_id": 12206709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwuYp.gif?s=128&g=1", "display_name": "aticboy", "link": "https://stackoverflow.com/users/12206709/aticboy"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1571783081, "post_id": 58512793, "comment_id": 103353357, "body": "@o11c left-justification"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1571783287, "post_id": 58512793, "comment_id": 103353414, "body": "In order to get the names to print correctly, you have two choices: 1) combine the first and last names into a single string, and output with <code>printf(&quot;%-25s&quot;, fullname);</code> or 2) use the return value from <code>printf</code>. <code>printf</code> returns the number of characters that it printed. So <code>int count = printf(&quot;%s %s&quot;, nom[i], lastname[i]);</code> will set <code>count</code> to the number of characters printed. Then you can print spaces till you reach 25 characters."}, {"owner": {"reputation": 31, "user_id": 12206709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwuYp.gif?s=128&g=1", "display_name": "aticboy", "link": "https://stackoverflow.com/users/12206709/aticboy"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571783307, "post_id": 58512793, "comment_id": 103353420, "body": "@KamilCuk That&#39;s it. Thanks I fixed it :)"}, {"owner": {"reputation": 1304, "user_id": 3277064, "user_type": "registered", "profile_image": "https://graph.facebook.com/4809672/picture?type=large", "display_name": "eewanco", "link": "https://stackoverflow.com/users/3277064/eewanco"}, "edited": false, "score": 0, "creation_date": 1571783346, "post_id": 58512793, "comment_id": 103353435, "body": "I think your maximum and minimum initial values (the lines where they are set to xxx[0]) should be moved outside the loop to just before it begins. Otherwise they are reset on every iteration and you lose the ones you&#39;ve already tracked. Also your floating point constants should always have a decimal point in them (the zero is optional); otherwise they are integers and you get into trouble. &quot;1 / 2&quot; evaluates to (int) 0; &quot;1. / 2.&quot; evaluates to (double) 0.5."}, {"owner": {"reputation": 31, "user_id": 12206709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwuYp.gif?s=128&g=1", "display_name": "aticboy", "link": "https://stackoverflow.com/users/12206709/aticboy"}, "reply_to_user": {"reputation": 1304, "user_id": 3277064, "user_type": "registered", "profile_image": "https://graph.facebook.com/4809672/picture?type=large", "display_name": "eewanco", "link": "https://stackoverflow.com/users/3277064/eewanco"}, "edited": false, "score": 0, "creation_date": 1571783910, "post_id": 58512793, "comment_id": 103353588, "body": "@eewanco can you please write where is it?"}, {"owner": {"reputation": 1304, "user_id": 3277064, "user_type": "registered", "profile_image": "https://graph.facebook.com/4809672/picture?type=large", "display_name": "eewanco", "link": "https://stackoverflow.com/users/3277064/eewanco"}, "edited": false, "score": 0, "creation_date": 1571796161, "post_id": 58512793, "comment_id": 103355990, "body": "@aticboy In your upper_* and lower_* functions, which I presume calculate maximums and minimums, just after the <code>for</code> statement, you have lines such as <code>mayor = &lt;something&gt;[0]</code> and <code>menor = &lt;something&gt;[0]</code>. If you&#39;re calculating the minimums and maximums (I don&#39;t know your native language so I&#39;m guessing based on my Latin skills at what the variables mean) these lines should be moved up out of the loop. As for the floating point constants, see your main() function starting at <code>if (sale[i] &lt;= 1000)</code> -- the 1000 should be 1000.0 as well as the constants in the following lines."}, {"owner": {"reputation": 31, "user_id": 12206709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwuYp.gif?s=128&g=1", "display_name": "aticboy", "link": "https://stackoverflow.com/users/12206709/aticboy"}, "reply_to_user": {"reputation": 1304, "user_id": 3277064, "user_type": "registered", "profile_image": "https://graph.facebook.com/4809672/picture?type=large", "display_name": "eewanco", "link": "https://stackoverflow.com/users/3277064/eewanco"}, "edited": false, "score": 0, "creation_date": 1571801462, "post_id": 58512793, "comment_id": 103356950, "body": "@eewanco thanks, I fixed that. However, that function in the <code>nom[nombre]</code> print, when I compile it, shows the same name in all cases (upper, lower) but the <code>mayor</code> and <code>menor</code> works good."}, {"owner": {"reputation": 1304, "user_id": 3277064, "user_type": "registered", "profile_image": "https://graph.facebook.com/4809672/picture?type=large", "display_name": "eewanco", "link": "https://stackoverflow.com/users/3277064/eewanco"}, "edited": false, "score": 0, "creation_date": 1571836074, "post_id": 58512793, "comment_id": 103372127, "body": "@aticboy I&#39;m not 100% sure this is your problem, but you are not initializing <code>nombre</code> and <code>apellido</code> to zero at the top, and you should, because if the first entry is a max or min, their values will be undefined. Automatic variables contain garbage by default. Your compiler <i>may</i> be setting them to zero for you, but not all compilers will and it&#39;s a good practice to always initialize before referencing."}, {"owner": {"reputation": 31, "user_id": 12206709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwuYp.gif?s=128&g=1", "display_name": "aticboy", "link": "https://stackoverflow.com/users/12206709/aticboy"}, "edited": false, "score": 0, "creation_date": 1571849711, "post_id": 58512793, "comment_id": 103379643, "body": "Thanks that fixed it."}], "owner": {"reputation": 31, "user_id": 12206709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwuYp.gif?s=128&g=1", "display_name": "aticboy", "link": "https://stackoverflow.com/users/12206709/aticboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571882235, "creation_date": 1571781246, "last_edit_date": 1571882235, "question_id": 58512793, "link": "https://stackoverflow.com/questions/58512793/problems-with-text-formatting", "title": "Problems with text formatting", "body": "<p>I'm trying to finish my program.The program will ask for <code>n</code> employees from a company, then the <code>name</code>, <code>salary</code>and <code>sale of the month</code>. The output will show the previous information plus the <code>comission</code>, <code>net salary</code> and a <code>total</code> of each one of them. </p>\n\n<p>For better understanding, this would be the output:</p>\n\n<pre><code>Name               Salary    Sale of the month           Comission    Net salary \nElena Gomez       2000.00              1000.00              35.00       2035.00\nElle Johns        4000.00              1345.00              60.53       4060.53 \nStefan Cox        3200.00              4000.00             216.00       3416.00 \nTotal             9200.00              6345.00             311.53       9511.53 \n\nEmployee with upper comission: Stefan Cox 216.00\nEmployee with lower comission: Elena Gomez 35.0\nEmployee with upper net salary: Elle Johns 4060.53\nEmployee with lower net salary: Elena Gomez 2035.00\n\nEmployees with sales upper than the prom (US$2115)\n\nName               Salary    Sale of the month           Comission    Net salary\nStefan Cox        3200.00              4000.00             216.00       3416.00 \n\n</code></pre>\n\n<p>This is the <code>main</code> code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n#define NUMBER_OF_STRING 6\n#define MAX_STRING_SIZE 50\n\nvoid print_array(const char arr[][MAX_STRING_SIZE]);\nvoid upper_comission (float [], char [5][50],char [5][50], int);\nvoid lower_comission (float[], char [5][50],char [5][50], int);\nvoid upper_netsalary (float [], char [5][50],char [5][50], int);\nvoid lower_netsalary (float[], char [5][50],char [5][50], int);\nfloat prom_sales(float[], int);\n\nint main ()\n{\n    int numemployees, cont=0;\n    float salary[50], salnet[50], sale[50], comission[50], ind=0, totalsales=0,totalsalary=0,totalsalnet=0, totalcomission=0, prom;\n    char header[0], nom[5][50], lastname[5][50];\n\nchar arr[NUMBER_OF_STRING][MAX_STRING_SIZE] =\n    { \"Name\",\n      \"salary\",\n      \"Sale of the month\",\n      \"Comission\",\n      \"Net salary\"\n    };\n\n    printf(\"Enter # of employees to consult: \\n\");\n    scanf(\"%d\",&amp;numemployees);\n\n     for(int i=0; i&lt;numemployees; i++)\n             {\n\n                  printf(\"Enter employee's %d name : \",i+1);\n                  scanf(\"%s\", &amp;nom[i]);\n\n                  printf(\"Enter employee's %d last name : \",i+1);\n                  scanf(\"%s\", &amp;lastname[i]);\n\n                  printf(\"Enter employee's %d salary : \",i+1);\n                  scanf(\"%f\", &amp;salary[i]);\n\n                  printf(\"Enter sale of the month of the employee %d : \",i+1);\n                  scanf(\"%f\", &amp;sale[i]);\n\n                  system(\"cls\");\n            }\n\n    print_array(arr); // function that shows the headers\n\n    for(int i=0; i&lt;=numemployees; i++)\n    {\n\n     if (sale[i] &lt;= 1000)\n        {\n            comission[i]=sale[i] * 0.035;\n            salnet[i]=salary[i]+comission[i];\n        }\n\n        if (sale [i] &lt; 2000 || sale [i] &gt; 1000)\n        {\n            comission[i]=sale[i] * 0.045;\n            salnet[i]=salary[i]+comission[i];\n        }\n\n        if (sale [i] &gt; 2000)\n        {\n            comission[i]=sale[i] * 0.054;\n            salnet[i]=salary[i]+comission[i];\n        }\n\n            totalsales+=sale[i];\n            totalsalary+=salary[i];\n            totalcomission+=comission[i];\n            totalsalnet+=salnet[i];\n\n    printf(\"%25s %s %25.2f   %25.2f  %25.2f   %25.2f \\n\",nom[i],lastname[i], salary[i], sale[i], comission[i],salnet[i]);\n    }\n\n\n    printf(\"\\t\\tTotal %25.2f   %25.2f  %25.2f   %25.2f\\n\",totalsalary, totalsales, totalcomission, totalsalnet);\n\n\n    upper_comission(comission, nom,lastname, numemployees);\n    lower_comission(comission, nom,lastname, numemployees);\n    upper_netsalary(salnet, nom,lastname, numemployees);\n    lower_netsalary(salnet, nom,lastname, numemployees);\n    prom=prom_sales(sale, numemployees);\n\n\n    printf(\"\\n\");\n    printf(\"Employees with sales upper than the prom (RD$%.2f) \\n\",prom);\n\n    for (int i=0; i &lt; numemployees; i++)\n    {\n\n    if (sale[i] &gt; prom)\n    {\n        print_array(arr);\n        printf(\"%25s %s %25.2f   %25.2f  %25.2f   %25.2f \\n\",nom[i],lastname[i], salary[i], sale[i], comission[i],salnet[i]);\n    }\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The functions: </p>\n\n<pre><code>\nvoid print_array(const char arr[NUMBER_OF_STRING][MAX_STRING_SIZE])\n{\n    for (int i = 0; i &lt; NUMBER_OF_STRING; i++)\n    {\n        printf(\"%25s \", arr[i]);\n\n        if (i == 5)\n        {\n            printf(\"%25s \\n\", arr[i]);\n        }\n\n    }\n}\nvoid upper_comission (float comission[],char nom[5][50],char lastname[5][50], int n)\n{\n    int i, nombre, apellido;\n    float mayor;\n    char name;\n\n    for (i=0; i&lt;n; i++)\n    {\n        mayor = comission[0];\n\n        if (mayor &lt; comission[i])\n        {\n            mayor = comission[i];\n            nombre=i;\n            apellido = i;\n        }\n\n    }\n    printf(\"Employee with upper comission: %s %s %.2f \\n\",nom[nombre],lastname[apellido], mayor);\n}\n\nvoid lower_comission (float comission[],char nom[5][50],char lastname[5][50], int n)\n{\n    int i, nombre, apellido;\n    float menor;\n\n    for (i=0; i&lt;n; i++)\n    {\n        menor = comission[0];\n\n        if (menor &gt; comission[i])\n        {\n            menor = comission[i];\n            nombre=i;\n            apellido=i;\n        }\n\n    }\n    printf(\"Employee with lower comission: %s %s %.2f \\n\",nom[nombre],lastname[apellido], menor);\n}\n\nvoid upper_netsalary (float salnet[],char nom[5][50],char lastname[5][50], int n)\n{\n\nint i, nombre, apellido;\n    float mayor;\n\n    for (i=0; i&lt;n; i++)\n    {\n        mayor = salnet[0];\n\n        if (mayor &lt; salnet[i])\n        {\n            mayor = salnet[i];\n            nombre=i;\n            apellido=i;\n        }\n\n    }\n    printf(\"Employee with upper net salary: %s %s %.2f \\n\",nom[nombre],lastname[apellido], mayor);\n}\n\nvoid lower_netsalary (float salnet[], char nom[5][50],char lastname[5][50], int n)\n{\nint i, nombre, apellido;\n    float menor;\n\n    for (i=0; i&lt;n; i++)\n    {\n        menor = salnet[0];\n\n        if (menor &gt; salnet[i])\n        {\n            menor = salnet[i];\n            nombre=i;\n            apellido=i;\n        }\n\n    }\n    printf(\"Employee with lower net salary: %s %s %.2f \\n\",nom[nombre],lastname[apellido], menor);\n}\n\nfloat prom_sales(float sale[], int n)\n{\n    float prom=0;\n    int i;\n\n    for (i=0; i&lt;n;i++)\n    {\n        prom += sale[i];\n    }\n\n\nreturn prom/n;\n}\n\n</code></pre>\n\n<p>My issues are these:</p>\n\n<ul>\n<li>The output shows the same name when it should be with the respective name of the comission/net salary <strong>[fixed]</strong>:</li>\n</ul>\n\n<pre><code> Name                    salary                  Sale of the month                       Comission                       Net salary\nmarie gomez                                500.00                                  850.00                                   38.25                                  538.25\nluca grus                                  856.00                                   80.00                                    3.60                                  859.60\nTotal                   1356.00                                                            930.00                                           41.85                                         1397.85\nEmployee with upper comission: luca grus 38.25\nEmployee with lower comission: luca grus 3.60\nEmployee with upper net salary: luca grus 859.60\nEmployee with lower net salary: luca grus 538.25\n\nEmployees with sales upper than the prom (RD$465.00)\nName                    salary                  Sale of the month                       Comission                       Net salary\nmarie gomez              500.00          850.00          38.25           538.25\n\n\n</code></pre>\n\n<ul>\n<li>Before, the program printed the next codes like <code>the employee with upper comission</code>, etc. But now it doesn't show it.<strong>[fixed]</strong></li>\n<li>The output should be well aligned, I tried with <code>printf(\"%25s\");</code> but I didn't get the output like the one in the beginning.  <strong>[fixed]</strong></li>\n</ul>\n\n<p>I don't know If I am doing something wrong so please check it out. Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 0, "creation_date": 1571781786, "post_id": 58512770, "comment_id": 103353044, "body": "can you try after dynamically allocating the space for the array n? (see malloc()) Here it seems the array ends up in the stack, when I would have expected the code to not even compile... And i should better be unsigned, but you&#39;re far from the maximum values, so it shouldn&#39;t matter much."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1571782337, "post_id": 58512770, "comment_id": 103353177, "body": "Yes, giant local arrays are often a problem.  (There are many duplicate questions about this.) Do try <code>int *n = malloc(N * sizeof(int));</code>."}, {"owner": {"reputation": 83, "user_id": 12100701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c7ac360e6f1df11b79c1e167f707f3?s=128&d=identicon&r=PG&f=1", "display_name": "MATT_BOOTY", "link": "https://stackoverflow.com/users/12100701/matt-booty"}, "edited": false, "score": 0, "creation_date": 1571783997, "post_id": 58512770, "comment_id": 103353607, "body": "So I allocated the memory, checked my task manager and I ended up hogging more memory than Chrome!! LOL."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1571786759, "post_id": 58512770, "comment_id": 103354246, "body": "@MATT_BOOTY : Well <code>n</code> requires ~4Mb of space - that is not an issue with malloc, that is what your code is asking for.  It is simply that the heap can satisfy that request, while that stack cannot, because it is fixed to typically 1Mb (Windows).  With the stack and the heap allocation, I&#39;d expect  &lt;5Mb for teh process. The default stack of a Windows thread for example is 1Mb, so the 400K you allocated for <code>n</code> is fine (though I&#39;ll advised - VLAs are generally a bad idea, but here you allow unconstrained size)."}], "owner": {"reputation": 83, "user_id": 12100701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c7ac360e6f1df11b79c1e167f707f3?s=128&d=identicon&r=PG&f=1", "display_name": "MATT_BOOTY", "link": "https://stackoverflow.com/users/12100701/matt-booty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571781114, "creation_date": 1571781114, "question_id": 58512770, "link": "https://stackoverflow.com/questions/58512770/why-doesnt-my-compiler-generate-n-number-of-random-numbers-when-i-use-106-but", "title": "Why doesn&#39;t my compiler generate N number of random numbers when I use 10^6 but is alright with 10^5?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, char* argv[])\n{\nint r = atoi(argv[1]);\nunsigned int N = atoi(argv[2]);\nint n[N];\nint i = 0;\nint rando = 0;\nint average = 0;\nint stddev = 0;\nfor(i = 0; i &lt; N; i++)\n{\nrando = rand () % r;\nn[i] = rando;\naverage += rando;\nstddev += pow(rando, 2);\n}\n\nfor(i = 0; i &lt; N; i++)\nprintf(\"Array Element %d:[%d]  \\n\", i, n[i]);\nprintf(\"The average of all numbers is %d\\n\", average / N);\nprintf(\"The standard deviation of all numbers is %lf\\n\", sqrt(stddev/N));\n}\n</code></pre>\n\n<p>I'm generating random integers such that I enter random numbers between 1 and r-1 N times. </p>\n\n<p>So, on my command line I type ./myprogram 10 1000000 and the compiler just sort of spits out nothing. </p>\n\n<p>If I were to say, type in ./myprogram 10 100000, it would work just fine, albeit a little slow. </p>\n\n<p>However, with another 0 it doesn't want to cooperate, why is this? </p>\n"}, {"tags": ["c", "assembly", "arm", "virtual-memory", "armv8"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1571783814, "post_id": 58512706, "comment_id": 103353558, "body": "How does this have anything to do with C?  Did you actually get such a fault in a C program?  Under what OS?  It sounds like you&#39;re talking about page-table management details that depend on the OS, not the C program making memory allocations."}, {"owner": {"reputation": 1, "user_id": 12259893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4c13f9aa8b6cdd874d3cd67c1657fc?s=128&d=identicon&r=PG&f=1", "display_name": "ohskr27", "link": "https://stackoverflow.com/users/12259893/ohskr27"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1571785734, "post_id": 58512706, "comment_id": 103354014, "body": "Yes, you&#39;re right, sorry for that. To be honest, I am not an expert in operating systems, the general idea I have is that when a program needs a page of RAM, the operating system is responsible for making that happen, however, I do not know the details of that process. Looking at the ARMv8 reference manual it seems to me that the bits [47:40] are not set by the operating system or software, so I do not understand how the address size fault can occur, can this fault only be generated by the hardware?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1571786530, "post_id": 58512706, "comment_id": 103354192, "body": "Bits <code>[47:40]</code> of what?  The virtual address?  Didn&#39;t your title say you&#39;re in 32-bit mode where registers / addressing-modes are 32-bit?  (Sorry, I only know HW page-table details for x86; for ARM mostly just user-space / compiler-target kind of things.)"}, {"owner": {"reputation": 1, "user_id": 12259893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4c13f9aa8b6cdd874d3cd67c1657fc?s=128&d=identicon&r=PG&f=1", "display_name": "ohskr27", "link": "https://stackoverflow.com/users/12259893/ohskr27"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1571867542, "post_id": 58512706, "comment_id": 103386655, "body": "Im working with 32bit, but ARMv8 use Long-descriptor translation table format. These are 64bit registers. According with the reference manual [39:30]bits specify the output addres, and [51:40] are SBZ (Should-be-Zero). Reference manual says: if [47:40]bits of the descriptor are not zero then a translation that uses the descriptor will generate an Address size fault. In addition: An Address size fault is generated if the translation table entries or the TTBR for the stage of translation have nonzero address bits above the most significant bit of the maximum output address size."}, {"owner": {"reputation": 1, "user_id": 12259893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4c13f9aa8b6cdd874d3cd67c1657fc?s=128&d=identicon&r=PG&f=1", "display_name": "ohskr27", "link": "https://stackoverflow.com/users/12259893/ohskr27"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1571867549, "post_id": 58512706, "comment_id": 103386658, "body": "It seems to me that something should be wrong in the process of translating from VA to PA that causes those bits to be set at a non-zero value, what I am trying to determine is what are the possible causes."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1571867791, "post_id": 58512706, "comment_id": 103386738, "body": "And you&#39;re writing your own custom kernel that manages the page tables?  Or are you getting this error while using some existing mainstream OS?  Please <a href=\"https://stackoverflow.com/posts/58512706/edit\">edit</a> details into your question."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1571868027, "post_id": 58512706, "comment_id": 103386817, "body": "Or if you&#39;re just wondering how it <i>could</i> happen, obviously in a correctly-designed system it wouldn&#39;t.  Do 64-bit processes use the same descriptor format?  If so, then they presumably have a purpose for 64-bit processes but must be zero for 32-bit processes.  (That&#39;s just my guess based on what you describe, I haven&#39;t checked ARM manuals.)"}], "owner": {"reputation": 1, "user_id": 12259893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4c13f9aa8b6cdd874d3cd67c1657fc?s=128&d=identicon&r=PG&f=1", "display_name": "ohskr27", "link": "https://stackoverflow.com/users/12259893/ohskr27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 710, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571783680, "creation_date": 1571780733, "last_edit_date": 1571783680, "question_id": 58512706, "link": "https://stackoverflow.com/questions/58512706/how-to-generate-an-address-size-fault-on-armv8-32-bits", "title": "How to generate an address size fault on ARMv8 32 bits?", "body": "<p>I am new in ARM and I am trying to understand the theory behind address translation in order to generate an address size fault at different levels. I know that during the process from virtual address to physical address translation the Long-descriptor translation table format descriptors are involved. Observing the formats \"Block\" and \"Table\" for level 1 and 2 and the format \"Page\" for level 3, if bits <code>[47:40]</code> are not zero then a translation that uses the descriptor will generate an Address size fault.</p>\n\n<p>What I don't understand is why the bits [47:40] will not be zero, that is, if I am working in C and a page of RAM need to be allocated, what possible reason would cause those bits to be set to a non-zero value?</p>\n"}, {"tags": ["c", "if-statement", "modulo"], "comments": [{"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 1, "creation_date": 1571779737, "post_id": 58512505, "comment_id": 103352474, "body": "You are repeating each if case twice (just flipping the order).  You will never hit the cases where semester is an even number.  Also, why do you check age at all?  You are checking if it is odd or even so that will always be true."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571780875, "post_id": 58512505, "comment_id": 103352779, "body": "There isn&#39;t sufficient information. The fact that Joe is a 35 year old student in his 3rd year tells us nothing about the number of semesters he has until he graduates. (Well, if you assume a 4-year program, it tells narrows down the possibilities to 3 or 4, but that&#39;s it.)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571784004, "post_id": 58512505, "comment_id": 103353610, "body": "This is a lot of branching. I would break everything down to units of semesters, do some math, then convert semesters to years to figure out how much time is left until graduation and how old the student will be then. But ikegami is right, you need to know the current semester in the current year to really answer when the student will graduate."}, {"owner": {"reputation": 27, "user_id": 9731835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YqdQ4.jpg?s=128&g=1", "display_name": "Machina", "link": "https://stackoverflow.com/users/9731835/machina"}, "edited": false, "score": 0, "creation_date": 1571811322, "post_id": 58512505, "comment_id": 103359332, "body": "Yes that&#39;s where I ended up at, that there is insufficient data"}], "owner": {"reputation": 27, "user_id": 9731835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YqdQ4.jpg?s=128&g=1", "display_name": "Machina", "link": "https://stackoverflow.com/users/9731835/machina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571779469, "creation_date": 1571779469, "question_id": 58512505, "link": "https://stackoverflow.com/questions/58512505/c-problem-requires-to-find-students-semester-propably-from-year-and-age", "title": "C problem requires to find students semester propably from year and age", "body": "<p>I have an exercise where I have as input the name, the age and the current university year of whoever, and it asks the minimum years for him to graduate, the person's age when he graduates and how many semesters till the graduation. How can we find the semester the person is in? Thought I had found a way but it duplicates logical expressions so it's not corrects. </p>\n\n<pre><code>/*My attempt*/\nif(age % 2 == 1 &amp;&amp; year == 1 || age % 2 == 0 &amp;&amp; year == 1)\n    semester = 1;\nelse if(age % 2 == 0 &amp;&amp; year == 1 || age % 2 == 1 &amp;&amp; year == 1)\n    semester = 2;\nelse if(age % 2 == 0 &amp;&amp; year == 2 || age % 2 == 1 &amp;&amp; year == 2)\n    semester = 3;\nelse if(age % 2 == 1 &amp;&amp; year == 2 || age % 2 == 0 &amp;&amp; year == 2)\n    semester = 4;\nelse if(age % 2 == 1 &amp;&amp; year == 3 || age % 2 == 0 &amp;&amp; year == 3)\n    semester = 5;\nelse if(age % 2 == 0 &amp;&amp; year == 3 || age % 2 == 1 &amp;&amp; year == 3)\n    semester = 6;\nelse if(age % 2 == 0 &amp;&amp; year == 4 || age % 2 == 1 &amp;&amp; year == 4)\n    semester = 7;\nelse if(age % 2 == 1 &amp;&amp; year == 4 || age % 2 == 0 &amp;&amp; year == 4)\n    semester = 8;\n</code></pre>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571781327, "post_id": 58512373, "comment_id": 103352919, "body": "The nests get confusing. You should use <a href=\"https://linux.die.net/man/3/strstr\" rel=\"nofollow noreferrer\">strstr</a> if you&#39;re allowed (or roll your own if you&#39;re not allowed).. either way, it should be a function call to tell you where <code>s2</code> is located in <code>s1</code>. After that you don&#39;t need any loops. You know where <code>s2</code> is located in <code>s1</code> and how long it is. That&#39;s enough information to build a new string that replaces <code>s2</code> in <code>s1</code> with <code>s3</code>. IMO it will be easier to deal with if you split out the different tasks into functions, rather than mashing it all together."}], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 12212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d93f9b746b6b7988fb224d49ba07c9c?s=128&d=identicon&r=PG&f=1", "display_name": "VJAYSLN", "link": "https://stackoverflow.com/users/12212950/vjaysln"}, "is_accepted": true, "score": 0, "last_activity_date": 1571837346, "creation_date": 1571837346, "answer_id": 58524010, "question_id": 58512373, "link": "https://stackoverflow.com/questions/58512373/changing-elements-of-an-array-to-user-input-with-pointer-arithmetic/58524010#58524010", "title": "Changing elements of an array to user input with pointer arithmetic", "body": "<p>You check some of the conditions.,\nIf pattern string was found in the original string, then check size_of(s2) with size_of(s3). if s3 >= s2 , then simply remove pattern string from original string and replace it with s3. Else case find the size difference between s3 and s2 and then remove pattern string from original string only with that size difference..Finally replace that place with s3.Hope This might helps:)</p>\n"}], "owner": {"reputation": 47, "user_id": 12100942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oUu64BOzMNE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdUoe9_Fqsnqw6Na-0uo_VkMUeqzg/photo.jpg?sz=128", "display_name": "Adam Menker", "link": "https://stackoverflow.com/users/12100942/adam-menker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 58524010, "answer_count": 1, "score": 0, "last_activity_date": 1571876738, "creation_date": 1571778709, "last_edit_date": 1571876738, "question_id": 58512373, "link": "https://stackoverflow.com/questions/58512373/changing-elements-of-an-array-to-user-input-with-pointer-arithmetic", "title": "Changing elements of an array to user input with pointer arithmetic", "body": "<p>I am trying to ask the user for 3 different strings, if the second string is a part of the first string it will replace that part with the third string. In addition to this, I must use pointer arithmetic to index through any arrays/strings. For example:</p>\n\n<pre><code>string1 = foobar  \nstring2 = oba  \nstring3 = 12345   \noutput = fo12345r\n</code></pre>\n\n<p>My program works when the pattern string (string2) and the replacement string (string3) are the same lengths, but if not I get weird results.</p>\n\n<p>For example: </p>\n\n<pre><code>s1: foobar  \ns2: obar  \ns3: 3333  \nr: fo3333 \n</code></pre>\n\n<p>(^works)</p>\n\n<pre><code>s1: foobar  \ns2: obar  \ns3: 33  \nr: fo33  ends without including the original last 2 characters ('a','r')  \n</code></pre>\n\n<p>(^doesn't work)</p>\n\n<pre><code>s1: foobar  \ns2: obar  \ns3: 12345  \nr: fo1234  ends without including the last new character ('5')  \n</code></pre>\n\n<p>(^doesn't work)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid GetString(char *str);\nvoid StringReplace(char *original, char *pattern, char *replacement);\n\nint main(void){\n    char originalstring[256];\n    char patternstring[32];\n    char replacement[32];\n\n    printf(\"Please enter the original string:\\n\");\n    GetString(originalstring);\n\n    printf(\"Please enter the pattern:\\n\");\n    GetString(patternstring);\n\n    printf(\"Please enter the replacement:\\n\");\n    GetString(replacement);\n\n    StringReplace(originalstring, patternstring, replacement);\n    printf(\"The Resultant string is %s\\n\", originalstring);\n}\n\n\nvoid StringReplace(char *original, char *pattern, char *replacement){\n    for(int i = 0; *(original + i) != '\\0'; i++){\n        if(*(pattern) == *(original + i)){\n            for(int x = 0; *(pattern + x) == *(original + i + x);  x++){\n                if(x == 1){  \n                    *(original + i + (x - 1)) = *(replacement + (x - 1));\n                    *(original + i + x) = *(replacement + x);\n                }\n                if(x &gt;= 2){\n                    *(original + i + x) = *(replacement + x);\n                }\n            }\n        }\n    }\n} // this is supposed to replace the pattern string with the replacement string if they have 2 or more similar characters in succession\n</code></pre>\n"}]