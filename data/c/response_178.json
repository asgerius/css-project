[{"tags": ["c", "pointers", "struct", "qsort", "pointer-to-pointer"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528328458, "post_id": 50731076, "comment_id": 88469870, "body": "Your comparator is given <code>const void *</code> values that are &#39;really&#39; <code>const FOO **</code> values, not <code>const FOO *</code> values.  If you sort an array of <code>int</code>, the comparator is given <code>int *</code> (cast to <code>const void *</code>).  You&#39;re sorting an array of <code>FOO *</code>; therefore, you are given <code>const FOO **</code> values cast to <code>const void *</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528328717, "post_id": 50731076, "comment_id": 88469923, "body": "See also <a href=\"https://stackoverflow.com/a/19468561/15168\">My qsort comparison function causes strange stuff in memory</a>."}], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 0, "last_activity_date": 1528328753, "creation_date": 1528328753, "answer_id": 50731143, "question_id": 50731076, "link": "https://stackoverflow.com/questions/50731076/qsort-on-dynamic-array-of-dynamic-structs/50731143#50731143", "title": "qsort on dynamic array of dynamic structs", "body": "<p>Well, your comparison-function is off.</p>\n\n<p>The arguments it gets are pointers to the elements in the array <code>qsort()</code> tries to sort, so pointers to <code>FOO*</code>.</p>\n\n<p>The fixed comparison-function is:</p>\n\n<pre><code>int foocmp(const void * p, const void * q) {\n    const FOO* const * pp = p;\n    const FOO* const * qq = q;\n\n    return (*qq)-&gt;x - (*pp)-&gt;x; // Beware of overflow / underflow\n}\n</code></pre>\n\n<p>I also left out the superfluous casts.</p>\n\n<p>As an aside, avoid <code>sizeof(TYPE)</code>. Use <code>sizeof expr</code> instead, so you don't repeat the type scattered all over your code.</p>\n"}], "owner": {"reputation": 13, "user_id": 9906019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab59f61ff57c9b941c1aff285b8693c5?s=128&d=identicon&r=PG&f=1", "display_name": "Yese1967", "link": "https://stackoverflow.com/users/9906019/yese1967"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "closed_date": 1528328925, "accepted_answer_id": 50731143, "answer_count": 1, "score": 1, "last_activity_date": 1528328753, "creation_date": 1528328178, "question_id": 50731076, "link": "https://stackoverflow.com/questions/50731076/qsort-on-dynamic-array-of-dynamic-structs", "closed_reason": "Duplicate", "title": "qsort on dynamic array of dynamic structs", "body": "<p>I have the following struct</p>\n\n<pre><code>struct FOO {\n    int x;\n    double y;\n}\n</code></pre>\n\n<p>and the array</p>\n\n<pre><code>FOO **manyfoos;\nmanyfoos = malloc( 10 * sizeof(FOO *) );\n</code></pre>\n\n<p>After this <code>manyfoos</code> is filled with dynamically allocated <code>FOO *</code> elements</p>\n\n<pre><code>manyfoos[i] = malloc( sizeof(FOO) );\nmanyfoos[i]-&gt;x = x;\nmanyfoos[i]-&gt;y = y;\n</code></pre>\n\n<p>I now want to sort <code>manyfoos</code> with <code>qsort()</code> and the following compare function</p>\n\n<pre><code>int foocmp(const void * p, const void * q) {\n    const FOO * pp = (const FOO *)p;\n    const FOO * qq = (const FOO *)q;\n\n    return qq-&gt;x - pp-&gt;x;\n}\n</code></pre>\n\n<p>Unfortunately the following command is giving unexpected results (<code>qq-&gt;x</code> and <code>pp-&gt;x</code> are random weird numbers).</p>\n\n<pre><code>qsort(manyfoos, 10, sizeof(FOO *), foocmp);\n</code></pre>\n\n<p>How can I make this work as expected?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1528327746, "post_id": 50730977, "comment_id": 88469678, "body": "On the first iteration <code>num_array[9]</code> breaks the bounds of the allocated memory. Also, the memory pointer allocated to <code>num_array</code> is discarded when the function returns, resulting in a memory leak. Moreover, why does this <code>populate_array</code> function return a value, when it is always <code>0</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1528328107, "post_id": 50730977, "comment_id": 88469778, "body": "... and even if it did work, how would the caller know how many digits are in that array? If <code>raw_num</code> is <code>5</code> there will be one element. If <code>raw_num</code> is <code>42</code> there will be two elements. Perhaps that is what the function should return."}, {"owner": {"reputation": 1, "user_id": 3134064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ddd4730f35184fa2c45265c3b82d4dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3134064", "link": "https://stackoverflow.com/users/3134064/user3134064"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1528328156, "post_id": 50730977, "comment_id": 88469794, "body": "populate_array returns 0 because its meant to be the else case, I removed the if case for testing purposes but it would have returned 1 if its condition was met. As for the memory being exceeded, how exactly does that happen?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528328165, "post_id": 50730977, "comment_id": 88469797, "body": "Your populate code returns 0 under all circumstances.  Given that, it may as well be a <code>void</code> function.  It would be better, though, if it returned the length of the array."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1528328234, "post_id": 50730977, "comment_id": 88469817, "body": "An array of 9 elements may be indexed from 0 thru 8 - this is <b>elementary</b>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1528328311, "post_id": 50730977, "comment_id": 88469836, "body": "If someone is cruel enough to pass a 10-digit number to the code, you overwrite the boundaries.  You don&#39;t enforce that the number is plausibly valid (bigger than zero, less than 1 billion) \u2014 at least, not in the code shown, but that&#39;s all we have to go on.  (Please read about creating an MCVE \u2014 <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> \u2014 because an MCVE helps us see what&#39;s crucial and what&#39;s incidental much better.)"}, {"owner": {"reputation": 1, "user_id": 3134064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ddd4730f35184fa2c45265c3b82d4dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3134064", "link": "https://stackoverflow.com/users/3134064/user3134064"}, "edited": false, "score": 0, "creation_date": 1528328330, "post_id": 50730977, "comment_id": 88469838, "body": "Sorry, I just made an edit to the question, for testing purposes assume the length of the raw_num is always 9"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1528328508, "post_id": 50730977, "comment_id": 88469879, "body": "A 32-bit <code>int</code> may well be a 10-digit number."}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1528328633, "post_id": 50730977, "comment_id": 88469905, "body": "32-bit in is +/- 2,147,483,647, unsigned is 4,294,967,295."}], "answers": [{"tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 0, "last_activity_date": 1528328744, "last_edit_date": 1528328744, "creation_date": 1528328353, "answer_id": 50731096, "question_id": 50730977, "link": "https://stackoverflow.com/questions/50730977/why-does-my-luhn-algorithm-code-not-return-anything/50731096#50731096", "title": "Why does my Luhn algorithm code not return anything?", "body": "<p>You allocate a new array num_array of size int[9]. Either use the one passed, or allocate a new one if passed NULL.</p>\n\n<pre><code>#define MAXDIGITS (10)\n\nint*\npopulate_array(int raw_num, int* num_array)\n{\n    if(!num_array)\n        num_array= malloc(sizeof(int)*9); //Allocate memory for num_array\n    int count=MAXDIGITS-1;\n    while (raw_num != 0){\n        num_array[count--]=raw_num%10;\n        if(count&lt;0) break;\n        raw_num=raw_num/10;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Call this either by passing NULL, and using returned pointer, or pass array,</p>\n\n<pre><code>int stuff[9];\nint* pstuff = NULL;\npopulate_array(12345, stuff);\npstuff = populate_array(98765, NULL);\n//then either print stuff, or pstuff\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3134064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ddd4730f35184fa2c45265c3b82d4dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3134064", "link": "https://stackoverflow.com/users/3134064/user3134064"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528331927, "creation_date": 1528327488, "last_edit_date": 1528331927, "question_id": 50730977, "link": "https://stackoverflow.com/questions/50730977/why-does-my-luhn-algorithm-code-not-return-anything", "title": "Why does my Luhn algorithm code not return anything?", "body": "<p>I finished putting these functions together yesterday and it's basically meant to be an implementation of the Luhn algorithm. The first function is supposed to take an integer and array as input then split the integer into digits to fill the array. And the second is supposed to check if the number is valid and return 1 or 0. My issue is that as far as I can tell my code looks okay and doesn't give any errors or warnings but when I try to run it nothing happens. I'd appreciate any assistance. Thanks in advance</p>\n\n<pre><code>int populate_array(int raw_num, int num_array[]){\n    //Assume length of raw_num will always be 9\n\n    num_array= malloc(sizeof(int)*9); //Allocate memory for num_array\n    int count=9;\n\n    while (raw_num){\n        num_array[count]=raw_num%10;\n        raw_num=raw_num/10;\n        count--;\n        }\n    return 0;\n}\n\n/*\n*Takes an 9 element integer array representing a candidateSIN number.\n*It returns 0 if the number given is a valid Canadian SIN number, and 1 otherwise.\n*/\n\nint sin_checker(int sin_array[]){ \n    int sin_sum=0;\n\n    for (int i=1; i&lt;9; i+=2){\n        sin_array[i]*=2; \n        }\n\n    for (int j=0; j&lt;9;j++){\n        if (sin_array[j]&gt;9){\n            sin_sum+= sin_array[j]/10;\n            sin_sum+= sin_array[j]%10;\n        }\n        else{\n            sin_sum+=sin_array[j];\n        }\n    }\n\n    if (sin_sum % 10==0){\n        return 0;\n    }\n    else{\n        return 1;\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c", "python-3.x", "python-extensions"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1528327924, "post_id": 50730811, "comment_id": 88469725, "body": "I think you have answered your own question.  Compile your DLL as 64-bit."}], "owner": {"reputation": 434, "user_id": 6578141, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/220pq.jpg?s=128&g=1", "display_name": "David Montgomery", "link": "https://stackoverflow.com/users/6578141/david-montgomery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1528326229, "creation_date": 1528326229, "question_id": 50730811, "link": "https://stackoverflow.com/questions/50730811/extending-python-with-c-on-windows-importerror-dll-load-failed-1-is-not-a-v", "title": "Extending Python with C on Windows - ImportError: DLL load failed: %1 is not a valid Win32 application", "body": "<p>So, I'm interested in communicating between a C program and a Python program so that I can neatly send tasks and data between the two. </p>\n\n<p>I figured I'd go ahead and start with <a href=\"https://www.tutorialspoint.com/python/python_further_extensions.htm\" rel=\"nofollow noreferrer\" title=\"this guide\">this guide</a>. In this guide I have a C file with contents outlined in the example in the link right above the \"Building and Installing Extensions\" title and the python code from right under it. After I run the <code>python setup.py install</code> command I try to import the created module through</p>\n\n<pre><code>&gt;&gt;&gt;import helloworld                                                                                                   \nImportError: DLL load failed: %1 is not a valid Win32 application.  \n</code></pre>\n\n<p>So I suppose the issue is that the extension is 32-bit while my Python installation is 64-bit? The python I'm using is</p>\n\n<pre><code>Python 3.6.4 |Anaconda, Inc.| (default, Jan 16 2018, 10:22:32) [MSC v.1900 64 bit (AMD64)] on win32\n</code></pre>\n\n<p>All help appreciated! </p>\n"}, {"tags": ["c", "python-2.7"], "comments": [{"owner": {"reputation": 1200, "user_id": 2105333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjpCl.jpg?s=128&g=1", "display_name": "bobrobbob", "link": "https://stackoverflow.com/users/2105333/bobrobbob"}, "edited": false, "score": 0, "creation_date": 1528392873, "post_id": 50730736, "comment_id": 88501793, "body": "from the page <a href=\"https://stackoverflow.com/help/no-one-answers\">stackoverflow.com/help/no-one-answers</a> it says you can update your question with the research you made since you posted it first. don&#39;t lose hope, surely someone knowledgeable will come and read your question"}, {"owner": {"reputation": 11, "user_id": 9905901, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q6vaRA1xq2o/AAAAAAAAAAI/AAAAAAAAACc/1c_GLnAPmS4/photo.jpg?sz=128", "display_name": "Whitney", "link": "https://stackoverflow.com/users/9905901/whitney"}, "reply_to_user": {"reputation": 1200, "user_id": 2105333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjpCl.jpg?s=128&g=1", "display_name": "bobrobbob", "link": "https://stackoverflow.com/users/2105333/bobrobbob"}, "edited": false, "score": 2, "creation_date": 1528394431, "post_id": 50730736, "comment_id": 88502553, "body": "thank you @bobrobob. Sorry, I&#39;m new to stackoverflow and still understanding it."}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1528741645, "post_id": 50730736, "comment_id": 88613862, "body": "to be strict, print() is not global function (like seems in high-level), but method in Python object. <a href=\"https://docs.python.org/2/extending/newtypes.html\" rel=\"nofollow noreferrer\">docs.python.org/2/extending/newtypes.html</a>"}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1528742444, "post_id": 50730736, "comment_id": 88614227, "body": "... and print() as I understand can be &quot;wrapped&quot; by pure python code <a href=\"https://docs.python.org/2/reference/simple_stmts.html#the-print-statement\" rel=\"nofollow noreferrer\">docs.python.org/2/reference/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9905901, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q6vaRA1xq2o/AAAAAAAAAAI/AAAAAAAAACc/1c_GLnAPmS4/photo.jpg?sz=128", "display_name": "Whitney", "link": "https://stackoverflow.com/users/9905901/whitney"}, "is_accepted": false, "score": 0, "last_activity_date": 1528736962, "creation_date": 1528736962, "answer_id": 50802879, "question_id": 50730736, "link": "https://stackoverflow.com/questions/50730736/how-to-write-a-python-wrapper-for-print/50802879#50802879", "title": "How to write a Python wrapper for print()?", "body": "<p>I figured out the answer...</p>\n\n<pre><code>static PyObject* NumberPrintWrapper(PyObject* self, PyObject* reference){\n\n    FILE* out = NULL;\n    size_t size;\n\n    // create buffer\n    char* buffer = malloc(sizeof(*buffer));\n    if (buffer == NULL)\n    {\n        handle_error(\"buffer\");\n    }\n\n    // map buffer to stream using open_memstream()\n    out = open_memstream(&amp;buffer, &amp;size);\n    if (out == NULL)\n    {\n        handle_error(\"open_memstream\");\n    }\n\n    // call function that requires stream\n    long* s = PyLong_AsUnsignedLong(reference);\n    NumPrint(s, out);\n\n    // close file handle\n    fclose(out);\n\n    // hand over to Python\n    PyObject* string = PyString_FromString(buffer);\n\n    free(buffer);\n\n    return string;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9905901, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q6vaRA1xq2o/AAAAAAAAAAI/AAAAAAAAACc/1c_GLnAPmS4/photo.jpg?sz=128", "display_name": "Whitney", "link": "https://stackoverflow.com/users/9905901/whitney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528736962, "creation_date": 1528325755, "last_edit_date": 1528394854, "question_id": 50730736, "link": "https://stackoverflow.com/questions/50730736/how-to-write-a-python-wrapper-for-print", "title": "How to write a Python wrapper for print()?", "body": "<p>I have a little experience working with Python C Binding wrappers but the function that's giving me the most grief right now is a print(). For example, in the C header file the function looks like </p>\n\n<pre><code>void NumPrint(void* self, FILE* stream)\n</code></pre>\n\n<p>and that function <strong>prints a description of an object instance to a stream.</strong> It takes two parameters, the first being a reference to a number object that should be printed, the second being a stream to which the description should be printed</p>\n\n<p>I am unsure about how to approach the wrapper for this. Here's an example of a simple wrapper that wraps add() which adds two numbers together...</p>\n\n<pre><code>static PyObject *wrapper(PyObject *self, PyObject *args)\n{\n    // return a C double representation\n    double inX = PyFloat_AsDouble(args);\n\n    // PyObject to return\n    PyObject* ret;\n\n    // run function\n    double out = c_add(inX, inX);\n\n    // build result into PyFloatObject**strong text**\n    ret = PyFloat_FromDouble(out);\n\n    return ret;\n}\n</code></pre>\n"}, {"tags": ["c", "hashtable"], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "edited": false, "score": 0, "creation_date": 1528324995, "post_id": 50730587, "comment_id": 88468920, "body": "maybe i should have posted it in the question, but the bucket is defined like this: user *bucket, if i set it to null that position is set to null and i cant do that since it will mess up the &quot;contains&quot; method. i need to mark a position as free to use and at the same time saying there was an item there so keep searching for more after this one"}, {"owner": {"reputation": 1688, "user_id": 1056460, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AuP3C.jpg?s=128&g=1", "display_name": "DanielM", "link": "https://stackoverflow.com/users/1056460/danielm"}, "reply_to_user": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "edited": false, "score": 0, "creation_date": 1528325095, "post_id": 50730587, "comment_id": 88468953, "body": "Then in that case you should create a copy of user cause I assume setting occupied to false means empty"}, {"owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "edited": false, "score": 0, "creation_date": 1528325295, "post_id": 50730587, "comment_id": 88469022, "body": "yes it means the spot is now available to use, but i am not setting it to false when transfering it to the inactive users hashtable so i dont understand why is saying its not"}, {"owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "edited": false, "score": 0, "creation_date": 1528325557, "post_id": 50730587, "comment_id": 88469096, "body": "so i am using the pointer to a struct in two different hashtable, and when i updated it in one since its the same pointer it updates its values in the other hashtable?"}], "tags": [], "owner": {"reputation": 1688, "user_id": 1056460, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AuP3C.jpg?s=128&g=1", "display_name": "DanielM", "link": "https://stackoverflow.com/users/1056460/danielm"}, "is_accepted": true, "score": 1, "last_activity_date": 1528324715, "creation_date": 1528324715, "answer_id": 50730587, "question_id": 50730485, "link": "https://stackoverflow.com/questions/50730485/having-two-hashtable-when-deleting-an-item-in-one-it-deletes-in-the-other/50730587#50730587", "title": "Having two hashtable, when deleting an item in one, it deletes in the other", "body": "<p><code>occupied</code> is a field of the struct <code>user</code> which you are setting to false on <code>delete_item</code>..</p>\n\n<p>Instead you should set buckets to null</p>\n\n<pre><code>void delete_item(hashtable *HashTable, char *nick){\n    int position = contains(HashTable, nick);\n    if(position != -1){\n        HashTable[position].buckets = null;\n        HashTable-&gt;elements--;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 50730587, "answer_count": 1, "score": -1, "last_activity_date": 1528324715, "creation_date": 1528323908, "question_id": 50730485, "link": "https://stackoverflow.com/questions/50730485/having-two-hashtable-when-deleting-an-item-in-one-it-deletes-in-the-other", "title": "Having two hashtable, when deleting an item in one, it deletes in the other", "body": "<p>I implemented a hashtable and i initialize two different ones like this:</p>\n\n<pre><code>hashtable *active_users = create();\nhashtable *inactive_users = create();\n</code></pre>\n\n<p>An element of the hashtable above looks like this:</p>\n\n<pre><code>typedef struct user{\n    char nick[6];\n    char name[26];\n    int n_messages;\n    bool occupied;\n}user;\n</code></pre>\n\n<p>In my main program i have a function that deletes an user from <code>active_users</code> and inserts it in the <code>inactive_users</code>, the problem is when deleting the item from the <code>active_users</code>after inserting it into <code>inactive_users</code> it deletes it in both for some reason.</p>\n\n<pre><code>hashtable * delete_user(hashtable *active_users, hashtable *inactive_users, char *input_a){\n    if(contains(active_users, input_a) != -1){\n        user *tmp = get_item(active_users, input_a); //gets the user from the active_users hashtable\n        if(load_factor(inactive_users)) //checks the hashtable size\n            inactive_users = resize_HashTable(inactive_users); // if needed it resizes\n        insert2(inactive_users, tmp); //insert in inactive_users\n        print_table(inactive_users);\n        printf(\"\\n\");\n        delete_item(active_users, input_a); //deletes from active_users\n        print_table(inactive_users);\n        printf(\"+ user %s removed\\n\", input_a);\n    }else{\n        printf(\"+ user %s doesnt exist\\n\", input_a);\n    }\n    return inactive_users;\n}\n</code></pre>\n\n<p>In the code above i printed the <code>inactive_users</code> hashtable after inserting the new user there and after deleting the same user from the <code>active_users</code> so you can see the problem.</p>\n\n<p><code>inactive_users</code> after inserting:</p>\n\n<pre><code>i: 0, nick: me, name: mig\ni: 1, nick: -, name: -\ni: 2, nick: -, name: -\ni: 3, nick: -, name: -\ni: 4, nick: -, name: -\n</code></pre>\n\n<p><code>inactive_users</code> after deleting from <code>active_users</code></p>\n\n<pre><code>i: 0, nick: -, name: -\ni: 1, nick: -, name: -\ni: 2, nick: -, name: -\ni: 3, nick: -, name: -\ni: 4, nick: -, name: -\n</code></pre>\n\n<p>To delete an item from the hashtable i simply mark its variable \"occupied\" as false meaning the spot is now free to use for insertion. the code:</p>\n\n<pre><code>void delete_item(hashtable *HashTable, char *nick){\n    int position = contains(HashTable, nick);\n    if(position != -1){\n        HashTable[position].buckets-&gt;occupied = false;\n        HashTable-&gt;elements--;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "bluetooth-lowenergy", "uart", "geckosdk"], "comments": [{"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1528327591, "post_id": 50730338, "comment_id": 88469642, "body": "That&#39;s a loaded question... Sounds like you need a tutorial."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1528353366, "post_id": 50730338, "comment_id": 88476550, "body": "<i>&quot;How can I transfer my received messages...&quot;</i> -- That&#39;s dictated by whatever message protocol your mystery <i>&quot;RF module&quot;</i> requires."}], "owner": {"reputation": 31, "user_id": 9785623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZsXdd8FEjFI/AAAAAAAAAAI/AAAAAAAACa8/oFntIeeX3Y0/photo.jpg?sz=128", "display_name": "Shikhar Tandon", "link": "https://stackoverflow.com/users/9785623/shikhar-tandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528322922, "creation_date": 1528322922, "question_id": 50730338, "link": "https://stackoverflow.com/questions/50730338/how-can-i-send-messages-from-my-ble-microcontroller-to-an-rf-module-via-uart", "title": "How can I send messages from my BLE microcontroller to an RF module via UART?", "body": "<p>I have a BLE enabled microcontroller(Blue gecko bgm13p22). It takes in commands from a client(laptop). \nNow I have connected my microcontroller to an RF module via UART(rx,tx,vcc,gnd). How can I transfer my received messages which cam from bluetooth over to RF module via UART.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "linux", "pipe", "fifo"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1528322449, "post_id": 50730214, "comment_id": 88468175, "body": "A single read can read data from multiple writes, as you\u2019ve demonstrated. Atomicity of writes means that writes from separate processes won\u2019t be interleaved; either all of P1\u2019s message will precede all of P2\u2019s message or vice verse, subject to size limits."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1528323744, "post_id": 50730214, "comment_id": 88468537, "body": "Put your <code>read()</code> in a loop. BTW: you are sending &quot;hello&quot; plus a NUL character (totoal size=6)"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1528328513, "post_id": 50730214, "comment_id": 88469882, "body": "The writer process is not blocking until a read, it is blocking until the open.  That is <code>open</code> in the writer is blocking until the reader calls <code>open</code>.  Then the writer is filling up a buffer.  Add some diagnostics around the open calls."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 1, "creation_date": 1528333249, "post_id": 50730214, "comment_id": 88470984, "body": "Whichever <b>open</b> is first blocks until the other (by default), but once both ends are open the data is buffered and the writer can get ahead of the reader by an amount that can depend on the system; <a href=\"https://stackoverflow.com/questions/4624071/pipe-buffer-size-is-4k-or-64k\">for (modern) Linux it defaults to 64kiB</a>."}, {"owner": {"reputation": 1213, "user_id": 3263864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/41c98358d847c68ff3b45bffc099d98f?s=128&d=identicon&r=PG&f=1", "display_name": "DeepDeadpool", "link": "https://stackoverflow.com/users/3263864/deepdeadpool"}, "edited": false, "score": 0, "creation_date": 1528386387, "post_id": 50730214, "comment_id": 88498418, "body": "That explains why sometimes my output is non-deterministic; it&#39;s just a race condition. So if I modified my data to prepend the size of the incoming message, then the programs could look out for that."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528444442, "post_id": 50730214, "comment_id": 88519572, "body": "@jonathanleffler, Atomicity of writes is a consequence of blocking the inode in the <code>write(2)</code>  call.  This warrants two individual writes don&#39;t overwrite each other."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1528444590, "post_id": 50730214, "comment_id": 88519641, "body": "@wildplasser, sending the null is a good thing to delimit the actual strings.... this means you cannot <code>printf(3)</code> what you have received... as it will cut part of the received thing... but anyway, as my answer shows, you don&#39;t receive more than what was written."}], "answers": [{"comments": [{"owner": {"reputation": 1213, "user_id": 3263864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/41c98358d847c68ff3b45bffc099d98f?s=128&d=identicon&r=PG&f=1", "display_name": "DeepDeadpool", "link": "https://stackoverflow.com/users/3263864/deepdeadpool"}, "edited": false, "score": 0, "creation_date": 1528481483, "post_id": 50755887, "comment_id": 88540001, "body": "Thanks now I have a much greater understanding of pipes."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 1, "last_activity_date": 1528444255, "creation_date": 1528444255, "answer_id": 50755887, "question_id": 50730214, "link": "https://stackoverflow.com/questions/50730214/why-are-my-writes-not-blocking-to-this-pipe/50755887#50755887", "title": "Why are my writes not blocking to this pipe?", "body": "<p>What is happening there is that the kernel blocks the writer process in the <code>open(2)</code> system call until you have a reader opening it for reading.  (A fifo requires both ends connected to processes to work)  Once the reader does the first <code>read(2)</code> call (either the writer or the reader blocks, who gets first for the system call) The kernel passes all the data from the writer to the reader, and awakens both processes (that's the reason of receiving only the first command line parameter, and not the first 16 bytes from the writer, you get only the six characters <code>{'h', 'e', 'l', 'l', 'o', '\\0' }</code> from the blocking writer)</p>\n\n<p>Finally, as the reader just closes the fifo, the writer gets killed with a <code>SIGPIPE</code> signal, as no more readers have the fifo open.  If you install a signal handler on the writer process (or ignore the signal) you'll get an error from the <code>write(2)</code> syscall, telling you that no more readers were blocked on the fifo (<code>EPIPE</code> errno value) on the blocking write.</p>\n\n<p>Just notice that this is a feature, and not a bug, a means of knowing that  writes will not reach any reader until you close and reopen the fifo.</p>\n\n<p>The kernel blocks the inode of the fifo for the whole <code>read(2)</code> or <code>write(2)</code> calls, so even another process doing another <code>write(2)</code> on the fifo will be blocked, and you'll not get the data on the reader from that second writer (should you have one).  You can try if you like, to start two writers and see what happens.</p>\n\n<pre><code>$ pru I am the best &amp;\n[1] 271\n$ pru\nRead 2 bytes: I\nWrote 2 bytes: I\nWrote 3 bytes: am\n[1]+  Broken pipe             pru I am the best  &lt;&lt;&lt; this is the kill to the writer process, announced by the shell.\n$ _\n</code></pre>\n"}], "owner": {"reputation": 1213, "user_id": 3263864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/41c98358d847c68ff3b45bffc099d98f?s=128&d=identicon&r=PG&f=1", "display_name": "DeepDeadpool", "link": "https://stackoverflow.com/users/3263864/deepdeadpool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50755887, "answer_count": 1, "score": 2, "last_activity_date": 1528444255, "creation_date": 1528322217, "question_id": 50730214, "link": "https://stackoverflow.com/questions/50730214/why-are-my-writes-not-blocking-to-this-pipe", "title": "Why are my writes not blocking to this pipe?", "body": "<p>I'm writing a little Linux fifo test program.</p>\n\n<p>I created a pipe using <code>mkfifo mpipe</code>. The program should perform one write per argument sent to it. If no arguments are sent, then it performs one read from the pipe.</p>\n\n<p>Here is my code</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    if (argc &gt; 1)\n    {\n       int fd = open(\"./mpipe\", O_WRONLY);\n       int i = 1;\n       for (i; i &lt; argc; i++)\n       {\n           int bytes = write(fd, argv[i], strlen(argv[i]) + 1);\n           if (bytes &lt;= 0)\n           {\n               printf(\"ERROR: write\\n\");\n               close(fd);\n               return 1;\n           }\n           printf(\"Wrote %d bytes: %s\\n\", bytes, argv[i]);\n       }\n\n       close(fd);\n       return 0;\n    }\n\n    /* Else perform one read */\n    char buf[64];\n    int bytes = 0;\n\n    int fd = open(\"./mpipe\", O_RDONLY);\n    bytes = read(fd, buf, 64);\n    if (bytes &lt;= 0)\n    {\n        printf(\"ERROR: read\\n\");\n        close(fd);\n        return 1;\n    }\n    else\n    {\n        printf(\"Read %d bytes: %s\\n\", bytes, buf);\n    }\n\n    close(fd);\n    return 0;\n}\n</code></pre>\n\n<p>I would expect the behavior to be something like this...</p>\n\n<p>I call <code>./pt hello i am the deepest guy</code>, and I would expect it to block for 6 reads. Instead one read seems enough to trigger multiple writes. My output looks like</p>\n\n<pre><code># Term 1 - writer\n$: ./pt hello i am the deepest guy # this call blocks until a read, but then cascades.\nJust wrote hello\nJust wrote i\nJust wrote am\nJust wrote the # output ends here\n\n# Term 2 - reader\n$: ./pt\nRead 6 bytes: hello\n</code></pre>\n\n<p>Could someone help explain this weird behavior? I thought that every read would have to match with a write with regards to pipe communication.</p>\n"}, {"tags": ["c", "sockets", "buffer"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1528322382, "post_id": 50730178, "comment_id": 88468153, "body": "This one look suspicious: <i>//the message size is properly calculated to include the &#39;\\0&#39; at the end</i>. Usually when people say that, it is not true."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1528322485, "post_id": 50730178, "comment_id": 88468190, "body": "By the way, <code>buffer + startPtr</code> is invalid in standard C, as it does not allow pointer arithmetic on <code>void*</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528323633, "post_id": 50730178, "comment_id": 88468507, "body": "Posting how data was sent is useful to add clarity in how to receive it."}, {"owner": {"reputation": 4533, "user_id": 1342581, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3UuMS.jpg?s=128&g=1", "display_name": "Victoria Ruiz", "link": "https://stackoverflow.com/users/1342581/victoria-ruiz"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1528323634, "post_id": 50730178, "comment_id": 88468508, "body": "Thanks for that tip, @EugeneSh. The error message moved to line 20 ((*string)[thisStringPtr] = a;. I had accidentally removed that line from the code I pasted before, so it might be a big part of the problem..."}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1528323868, "post_id": 50730178, "comment_id": 88468566, "body": "Thought 1: I would drop <code>* sizeof(char)</code> everywhere you&#39;re using it. The <code>sizeof</code> a <code>char</code> in C is 1 by definition. So that just clutters your code."}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 3, "creation_date": 1528324390, "post_id": 50730178, "comment_id": 88468724, "body": "Thought 2: You should never, never, never trust that a buffer you received over the network contains a certain character (like a null). That&#39;s a recipe for creating a buffer overrun security vulnerability. Instead, either pass the expected length to <code>bufferToString</code> and ensure that function doesn&#39;t go beyond the length. Or simply force a null at the end of the buffer immediately after the <code>recv</code> to ensure the terminator will be found: <code>((char *)buffer)[msgSize - 1] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1528325782, "post_id": 50730178, "comment_id": 88469165, "body": "The message you receiver would the first thing I would suspect: Have the message dumped to stdout right after reception and check that it actually contains a zero byte. If you don&#39;t know how to handle a Debugger (you should learn!), this should do as well: ` char* msg = buffer; for(size_t i = 0; i &lt; msgSize; ++i) printf(&quot;%c&quot;, msg[i]); printf(&quot;###\\n&quot;);` BTW: Usw appropriate data types, e.g. <code>size_t</code> for non-negative sizes. Why do you Hand over the <code>string</code> as <code>char**</code>? Whats wrong sich a simple <code>char*</code>?"}, {"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1528325893, "post_id": 50730178, "comment_id": 88469190, "body": "And dont cast from <code>void*</code>, you dont have to."}, {"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1528326288, "post_id": 50730178, "comment_id": 88469297, "body": "You dont do something like this: <code>memcpy((paquete + puntero),&amp;length,sizeof(int));</code> and transmitting over the net: <code>int</code> might have a different size in the receiving machine. And byte order might mess up things."}, {"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1528326554, "post_id": 50730178, "comment_id": 88469365, "body": "And at least in the code above, you dont read the two <code>int</code>s before trying to extract the string, do you? And if you read <code>length</code> out of the packet, pay attention to my last commend - you might geht garbage..."}], "answers": [{"comments": [{"owner": {"reputation": 4533, "user_id": 1342581, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3UuMS.jpg?s=128&g=1", "display_name": "Victoria Ruiz", "link": "https://stackoverflow.com/users/1342581/victoria-ruiz"}, "edited": false, "score": 0, "creation_date": 1528324465, "post_id": 50730510, "comment_id": 88468748, "body": "Thanks, Mike. I didn&#39;t think to follow the convention when I created the function, but I do use strcpy in the right order in bufferToString2: strcpy(string, (char*) (buffer + startPtr)); As I commented earlier, casting buffer before doing pointer arithmetic will still show issues, albeit different ones."}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 2, "creation_date": 1528325110, "post_id": 50730510, "comment_id": 88468962, "body": "Strictly speaking, you need to cast a <code>void *</code> to <code>char *</code> <i>before</i> doing arithmetic on it. <code>gcc</code> lets you get away with adding byte offsets to a <code>void *</code>, but it&#39;s not standard C."}, {"owner": {"reputation": 291, "user_id": 3063727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PgNzc.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/3063727/mike"}, "edited": false, "score": 0, "creation_date": 1528338150, "post_id": 50730510, "comment_id": 88472088, "body": "ah. you are right... i misread the code. I would agree with Gil&#39;s point that you should use memcpy instead of strcpy because you can&#39;t assume the buffer is null terminated. recv just gets a buffer (at least in POSIX). I think the lack of NULL terminated stream is your most likely culprit"}], "tags": [], "owner": {"reputation": 291, "user_id": 3063727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PgNzc.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/3063727/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1528324071, "creation_date": 1528324071, "answer_id": 50730510, "question_id": 50730178, "link": "https://stackoverflow.com/questions/50730178/parse-single-message-coming-over-socket-containing-2-strings-in-c/50730510#50730510", "title": "Parse single message coming over socket containing 2 strings in C", "body": "<p>Do you have your src and dst the right way around?\nThe destination (or target if you prefer) of memory services in C is the first parameter, so:\nstrcpy(string, buffer)\nwill copy buffer <strong>into</strong> string. (<a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strcpy.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/c_standard_library/c_function_strcpy.htm</a>)</p>\n\n<p><strong>But</strong>: bufferToString2 is being called with buffer as the first parameter (and it's the source in this case).</p>\n\n<p>In the first case, as was pointed out, you can't do arithmetic on a void* because the math is trying to go to the Nth element if you say:\n*(x + N)\nand if x is 'void' it has no size, and therefore the Nth element isn't meaningful. </p>\n"}, {"tags": [], "owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "is_accepted": false, "score": 0, "last_activity_date": 1528489891, "last_edit_date": 1528489891, "creation_date": 1528489185, "answer_id": 50767888, "question_id": 50730178, "link": "https://stackoverflow.com/questions/50730178/parse-single-message-coming-over-socket-containing-2-strings-in-c/50767888#50767888", "title": "Parse single message coming over socket containing 2 strings in C", "body": "<p>Since there is not an answer yet that eventually solved the problem ostensibly, and no further progress on this question, I will summarize what I partially mentioned in my comments to at least provide hints where to start looking for the problem:</p>\n\n<p>A lot of information is, unfortunately, missing to seriously treat this question.</p>\n\n<p>For example, which kind of socket do you use to send / receive your messages?\nIs it a pipe, or a network socket - which kind of transport do you use then?</p>\n\n<p>How do you ensure that you received the entire message?\nYou should at least check the return value of <code>recv</code> (which happens to be the number of received octets) and check with the expected length if there is one.</p>\n\n<p>When having received your message,have the message dumped as is - if you are not familiar with using a debugger, a function like this would do as a starter:</p>\n\n<pre><code>void dump(const char* buffer, size_t length) {\n    for(size_t i = 0; i &lt; length; ++i) {\n        printf(\"%x\", buffer[i] &amp; 0xff);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>and invoke it in your code after the <code>ssize_t received = recv(...)</code> like <code>dump(buffer,  received)</code>.</p>\n\n<p>Furthermore, you don't provide the way you calculate <code>msgSize</code> in your first code snippet - how do you guarantee that the string in <code>mensaje</code> you pass over to <code>serializePacket</code> is not longer than <code>msgSize</code> ?</p>\n\n<p>Then, in <code>serializePacket</code>, you create a buffer filled like this:</p>\n\n<p><code>\n|  codigo (int) | length (int) |  mensaje ( = terminal zero) |\n</code></p>\n\n<p>but what you read back at the other end is just a c string - you ought to read the 2 ints as well, ought you not?</p>\n\n<p>Then, there is another problem with this bit of serialization: Even if you read back the 2 ints, you would have a piece of code that is entirely unportable and works only if both sender and receiver run on an architecture that represent <code>int</code>s precisely the same way and in the same bit order. if you run the sender on a 32 bit system and the receiver on a 64 bit system, you write 4 byte integers, while attempt to read back 8 byte integers. Better use \ntypes with precisely defined width (like <code>uint32_t</code> from <a href=\"http://pubs.opengroup.org/onlinepubs/007904975/basedefs/inttypes.h.html\" rel=\"nofollow noreferrer\"><code>inttypes.h</code></a> ) and explicitly convert to/from network byte order using e.g. <a href=\"https://linux.die.net/man/3/ntohl\" rel=\"nofollow noreferrer\"><code>ntohl(3)</code> / <code>htonl(3)</code></a>.</p>\n\n<p>Lastly, I want to add some remarks to improve the quality of code, that might prevent a lot of potential errors:</p>\n\n<p>Take as example your <code>bufferToString</code>:</p>\n\n<ol>\n<li>You passed in <code>string</code> as <code>char**</code> - why?</li>\n<li>Use appropriate data types - don't use a signed <code>int</code> where you deal with non-negative sizes - use the standard type <code>size_t</code> instead</li>\n<li>Don't use <code>void*</code> as type unless really necessary - you loose a hell lot of compile time error checking. C automatically converts from <code>void*</code> in assignments. So declaring <code>buffer</code> as <code>char*</code> is highly suggested.</li>\n</ol>\n\n<p>This function, e.g. can harshly be simplified:</p>\n\n<pre><code>size_t bufferToString(const char* buffer, char* string, size_t offset) {\n    for(size_t i = offset; 0 != buffer[i]; ++i) {\n        string[i] = buffer[i];\n    }\n    return ++i;\n}\n</code></pre>\n\n<p>I can only emphazise that network code tends to be hard to debug - there are all kinds of external error sources you cannot really oversee.</p>\n\n<p>Hopefully these hints help to track down the root cause of your problem.</p>\n"}], "owner": {"reputation": 4533, "user_id": 1342581, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3UuMS.jpg?s=128&g=1", "display_name": "Victoria Ruiz", "link": "https://stackoverflow.com/users/1342581/victoria-ruiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528489891, "creation_date": 1528322048, "last_edit_date": 1528325029, "question_id": 50730178, "link": "https://stackoverflow.com/questions/50730178/parse-single-message-coming-over-socket-containing-2-strings-in-c", "title": "Parse single message coming over socket containing 2 strings in C", "body": "<p>I'm trying to read a message that contains 2 strings. This message contains 2 strings that could be anything, and it is sent over a socket. </p>\n\n<p>Note that I'm using C in Ubuntu environment. </p>\n\n<p>The format of the message is, in a single <code>void* buffer</code>: </p>\n\n<p><code>[string1]\\0[string2]\\0</code></p>\n\n<p>I figured I'd be able to separate them once they arrive, using the '\\0' to figure out where to split them. I'm using a function to read just the string and it sort of works, but I keep getting complaints from Valgrind, and I don't understand why. </p>\n\n<p>I'm going to use an example where only 1 string is read from the buffer, but I mention the strategy because I'm not able to just put the message into a <code>char* buffer</code>. I need the function to extract a string from more complex buffers.</p>\n\n<p>It all starts like this: </p>\n\n<pre><code>void* buffer = malloc(msgSize * sizeof(char)); //the message size is properly calculated to include the '\\0' at the end\nchar* instanceId = malloc(msgSize * sizeof(char));\n\nif(recv(socket_desc, (void*) buffer, msgSize * sizeof(char), MSG_WAITALL) &lt;= 0) {\n        log_error(logger, \"Message failed.\");\n        return;\n    }\n\n    bufferToString(buffer, &amp;instanceId, 0);\n    bufferToString2(buffer, instanceId, 0);\n</code></pre>\n\n<p>I made several attempts to make bufferToString work, as you can see... Of course I don't invoke them all at the same time, but I want to share those lines in case I'm making a mistake there. </p>\n\n<p><strong>Attempt #Number 1: char by char</strong></p>\n\n<pre><code>int bufferToString(void* buffer, char** string, int startPtr) {\n    //startPtr can be used to read strings that are in the middle of a buffer\n    char a;\n    int thisStringPtr = 0; \n\n    do {\n        a = *(char*) (buffer + startPtr);\n        (*string)[thisStringPtr] = a;\n        startPtr++;\n        thisStringPtr++;\n    } while (a != '\\0');\n    return startPtr; //return end position to use for extracting more values later\n</code></pre>\n\n<p>}</p>\n\n<p>This one complains:</p>\n\n<pre><code>==23047== Invalid read of size 1\n==23047==    at 0x403A27A: bufferToString (buffer.c:16)\n==23047==    by 0x804A0C2: handleHiloInstancia (coordinador.c:232)\n==23047==    by 0x8049C54: procesarConexion (coordinador.c:85)\n==23047==    by 0x4066294: start_thread (pthread_create.c:333)\n==23047==    by 0x41650AD: clone (clone.S:114)\n==23047==  Address 0x423bc8a is 0 bytes after a block of size 10 alloc'd\n==23047==    at 0x402C17C: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)\n==23047==    by 0x804A063: handleHiloInstancia (coordinador.c:225)\n==23047==    by 0x8049C54: procesarConexion (coordinador.c:85)\n==23047==    by 0x4066294: start_thread (pthread_create.c:333)\n==23047==    by 0x41650AD: clone (clone.S:114)\n</code></pre>\n\n<p>Line 16 of bufferToString is the first line inside the <code>do</code> statement. </p>\n\n<p><strong>Attempt 2: cast and copy</strong></p>\n\n<pre><code>int bufferToString2(void* buffer, char* string, int startPtr) {\n    strcpy(string, (char*) (buffer + startPtr));\n    return (strlen(string) + 1)*sizeof(char);\n}\n</code></pre>\n\n<p>With or without the +startPtr, this causes slightly different problems: </p>\n\n<pre><code>==23190== Invalid read of size 1\n==23190==    at 0x402F489: strcpy (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)\n==23190==    by 0x403A1E3: bufferToString2 (buffer.c:3)\n==23190==    by 0x804A0C1: handleHiloInstancia (coordinador.c:232)\n==23190==    by 0x8049C54: procesarConexion (coordinador.c:85)\n==23190==    by 0x4066294: start_thread (pthread_create.c:333)\n==23190==    by 0x41650AD: clone (clone.S:114)\n==23190==  Address 0x423bc8a is 0 bytes after a block of size 10 alloc'd\n</code></pre>\n\n<p>I tried a few other combinations (like using char** string and all the required modifications in bufferToString2), but I keep getting similar error messages. What am I not seeing?</p>\n\n<p>UPDATE: How message is being sent: </p>\n\n<pre><code>    int bufferSize;\n    void* buffer = serializePackage(HANDSHAKE_INSTANCE_ID ,instancia_config-&gt;nombre, &amp;bufferSize );\n    printf(\"Buffer size: %i - Instancia Name = %s - Socket num: %i\\n\", bufferSize, instancia_config-&gt;nombre, socket_coordinador); //this shows right data\n    if (send(socket_coordinador,buffer,bufferSize, 0) &lt;= 0) {\n        log_error(logger, \"Could not send ID.\");\n        endProcess(EXIT_FAILURE);\n    }\n</code></pre>\n\n<p>instancia_config->nombre is of type char*</p>\n\n<pre><code>void* serializePackage(int codigo,char * mensaje, int* tamanioPaquete){\n\n    int puntero = 0;\n    int length = strlen(mensaje);\n\n    int sizeOfPaquete = strlen(mensaje) * sizeof(char) + 1 + 2 * sizeof(int);\n    void * paquete = malloc(sizeOfPaquete);\n\n\n    memcpy((paquete + puntero) ,&amp;codigo,sizeof(int));\n    puntero += sizeof(int);\n\n    memcpy((paquete + puntero),&amp;length,sizeof(int));\n    puntero += sizeof(int);\n\n    memcpy((paquete + puntero),mensaje,length * sizeof(char) + 1);\n\n    *tamanioPaquete = sizeOfPaquete;\n    return paquete;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1528319500, "post_id": 50729625, "comment_id": 88467091, "body": "What <code>&quot;%d&quot;+1</code> is even supposed to do?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1528320244, "post_id": 50729625, "comment_id": 88467403, "body": "The answer to #2 is &quot;definitely not&quot;."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1528325011, "post_id": 50729625, "comment_id": 88468931, "body": "If it&#39;s not obvious, this is a trick question.  The code is like none you will ever see in a real C program (except perhaps by mistake).  It doesn&#39;t do anything remotely useful.  It&#39;s just to get you thinking; it&#39;s to make sure you understand exactly how strings work, and how pointers work, and how <code>printf</code> works.  If you know C well, it&#39;s immediately obvious what it does, but if it&#39;s not obvious to you yet, don&#39;t worry; this is not the step that&#39;s standing in the way of your making progress learning about normal C programming."}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1528327972, "post_id": 50729625, "comment_id": 88469738, "body": "Your confusion regarding behavior of string literal followed by +1 is partially caused by the variation in how some languages use &#39;+&#39; for string concatenation, and perform automatic coercion of numeric 1 to string &quot;1&quot;. Specifically, &quot;%d&quot;+1 is not concat(&quot;%d&quot;,&quot;1&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 9905549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSqsB.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/9905549/goku"}, "edited": false, "score": 0, "creation_date": 1528319643, "post_id": 50729679, "comment_id": 88467165, "body": "can you please explain this why 127 will get ignored?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1528319705, "post_id": 50729679, "comment_id": 88467195, "body": "Because <code>printf(&quot;d&quot;, ...)</code> has nothing to do with whatever is coming after <code>,</code>."}, {"owner": {"reputation": 91, "user_id": 9905549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSqsB.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/9905549/goku"}, "edited": false, "score": 0, "creation_date": 1528319872, "post_id": 50729679, "comment_id": 88467256, "body": "one more, why did you say that %d is a pointer, i don&#39;t get it. what i have learned is that pointer is a variable which stores address of another variable.."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 91, "user_id": 9905549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSqsB.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/9905549/goku"}, "edited": false, "score": 1, "creation_date": 1528319949, "post_id": 50729679, "comment_id": 88467285, "body": "@Goku Well you are not incorrect, but you should also learn about literals. &quot;&quot;adasf&quot;, &#39;c&#39;, 34, 3.4, 3.4F, 3U, 3L, 3UL, 0x34, 08, etc, a lot will be denoted to int, others double, &quot;asd&quot; is an address in read-only memory area that points to the character &#39;a&#39;, read as a string, all characters until &#39;\\0&#39; will be read from that address"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 91, "user_id": 9905549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSqsB.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/9905549/goku"}, "edited": false, "score": 0, "creation_date": 1528320225, "post_id": 50729679, "comment_id": 88467393, "body": "@Goku in C when you cite a string literal such as <code>&quot;%d&quot;</code> you are actually referring to a <i>pointer to the string &quot;%d&quot; (with trailing 0)</i> in memory. You really should get a good C textbook and dig into it. A lot of fundamental things to learn there."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 91, "user_id": 9905549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSqsB.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/9905549/goku"}, "edited": false, "score": 1, "creation_date": 1528320517, "post_id": 50729679, "comment_id": 88467504, "body": "@Goku: A string literal such as <code>&quot;%d&quot;</code> is an array expression (since strings are stored as arrays).  Under most circumstances, array expressions are converted to pointer expressions which point to the first element of the array.  If you add 1 to a pointer, the result is a pointer to the next object (in this case, the second character of the string).  So <code>printf</code> sees the string <code>&quot;d&quot;</code> as the first argument.  Since <code>&quot;d&quot;</code> doesn&#39;t have any conversion specifiers in it, <code>printf</code> won&#39;t check for any additional arguments - the parameter <code>127</code> is ignored."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1528321534, "post_id": 50729679, "comment_id": 88467855, "body": "I can recommend that of several books you flip through in any decent book store, which grips you most. I.e. flip through the pages and the book you do not put down after reading a few paragraphs, that is the right one for you. The favorite book of any user here might be the wrong one, too expensive or take too long to be delivered. Book store, browse, like, buy. That is the 1hour recipe."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 91, "user_id": 9905549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSqsB.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/9905549/goku"}, "edited": false, "score": 2, "creation_date": 1528321997, "post_id": 50729679, "comment_id": 88468008, "body": "@Goku I think you should make more effort to understand this answer, which explains what you see, and why the argument <code>127</code> is ignored. A good book will help, but his answer is quite specific to your problem."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1528323340, "post_id": 50729679, "comment_id": 88468423, "body": "Suggest adding that not only is 127 is &quot;ignored&quot;, it is OK (well defined) to use <code>printf()</code> with extra arguments.  <code>printf(&quot;%d&quot; , 127, rand());</code> is OK.  <code>rand()</code> is still called, but the results are not used."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1528324020, "post_id": 50729679, "comment_id": 88468610, "body": "@chux Good point, any side effects will of course occur before ignoring, edited it into answer. Thanks."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1528324175, "post_id": 50729679, "comment_id": 88468651, "body": "Goku, if everything is clear now, then I have to conclude that you are not aware of this: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 19, "last_activity_date": 1528324466, "last_edit_date": 1528324466, "creation_date": 1528319502, "answer_id": 50729679, "question_id": 50729625, "link": "https://stackoverflow.com/questions/50729625/effect-of-1-after-the-format-string-parameter-to-printf/50729679#50729679", "title": "Effect of &quot;+1&quot; after the format string parameter to printf()", "body": "<p>First parameter is a pointer to <code>char</code>.<br>\nThe literal <code>\"%d\"</code> would be a pointer to the <code>'%'</code>, which is implicitly followed by <code>'d'</code> and <code>'\\0'</code>. It is a pointer to <code>char</code>, because that is the C representation of string literals: sequences of characters with a <code>'\\0'</code> at the end; represented for use as parameters etc. as a pointer to <code>char</code>.<br>\nBut <code>\"%d\"+1</code>, according to pointer arithmetic, is a pointer to <code>'d'</code>, followed by <code>'\\0'</code>.<br>\nBoth are zero-terminated, as fitting for a parameter to printf.</p>\n\n<p>So the output is the same as</p>\n\n<pre><code>printf(\"d\", ignored);\n</code></pre>\n\n<p>127 turns into \"ignored\", i.e. it is ignored, because the <code>\"d\"</code> tells printf not to expect anything, because it does not have any of the special character sequences, e.g. \"%someletter\". So it will not expect, not look for anything and will not do any printing beyond the perfectly normal string it thinks to have been given.<br>\nNote however that the additional parameters, those not covered by anything in the format string, do get evaluated and <strong>then</strong> ignored. This is relevant, because any side effects (e.g. function calls) of that evaluation do in fact occur.<br>\nSee e.g. here for details:<br>\n<a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"noreferrer\">http://en.cppreference.com/w/c/io/fprintf</a></p>\n"}, {"tags": [], "owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "is_accepted": false, "score": 5, "last_activity_date": 1528327502, "last_edit_date": 1528327502, "creation_date": 1528326036, "answer_id": 50730781, "question_id": 50729625, "link": "https://stackoverflow.com/questions/50729625/effect-of-1-after-the-format-string-parameter-to-printf/50730781#50730781", "title": "Effect of &quot;+1&quot; after the format string parameter to printf()", "body": "<p>Let me try to help and add to @Yunnosch answer, you could do following:</p>\n\n<pre><code> char *str = \"%d\";\n printf (str, 127);\n</code></pre>\n\n<p>and output should be:</p>\n\n<pre><code>127\n</code></pre>\n\n<p>In above example <code>str</code> is stored in memory like this (this is just an example and in real life addresses are like 0xabcdef12345678):</p>\n\n<pre><code>address | memory\n--------+--------------\n0       | %\n1       | d\n3       | \\0\n</code></pre>\n\n<p>so <code>str</code> points to address <code>0</code> (or equivalent on your system) which holds <code>%</code>, <code>printf()</code> gets that address and starts reading from there, reads until it hits the NULL character '\\0'. Now every time it sees the <code>%</code> it looks for next character <code>d</code>, <code>c</code>, <code>x</code> etc. it reads next argument from argument list. If you supplied <code>d</code> it will output decimal, if you supply <code>c</code> it will print character, <code>x</code> is for hex and there is many more. So <code>printf()</code> will read all characters and replace <code>%&lt;place holder&gt;</code> with appropriate parameter until it hits the NULL character <code>\\0</code>, but it will start at supplied address.</p>\n\n<p>Your case:</p>\n\n<pre><code>printf(\"%d\"+1, 127);\n</code></pre>\n\n<p>is same as:</p>\n\n<pre><code>char *str = \"%d\";\nprintf (str + 1, 127); // printf receives address of character `d` as starting point\n</code></pre>\n\n<p>or it is similar to</p>\n\n<pre><code>char *str = \"%d\";\nchar *str1 = str+1; // increment the address of string by one\nprintf (str1, 127)\n</code></pre>\n\n<p>in both cases it receives address of <code>d</code> and reads from there until it hits <code>\\0</code>.</p>\n\n<p>If you do following:</p>\n\n<pre><code>printf (\"%d\" + 2, 127);\n</code></pre>\n\n<p>This would be the same as:</p>\n\n<pre><code>char *str = \"%d\";\nprintf (str + 2, 127);\n</code></pre>\n\n<p>it would output nothing because, <code>printf()</code> will get the address of <code>\\0</code>. and as @Yunnosh said <code>127</code> would be ignored.</p>\n\n<p>So <code>+1</code> and <code>+2</code> do not get converted to a string they get added to the address of the string.</p>\n\n<p>I hope this helps, I think I answered both of your questions.</p>\n"}], "owner": {"reputation": 91, "user_id": 9905549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSqsB.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/9905549/goku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 2, "accepted_answer_id": 50729679, "answer_count": 2, "score": 6, "last_activity_date": 1528327502, "creation_date": 1528319259, "last_edit_date": 1528320318, "question_id": 50729625, "link": "https://stackoverflow.com/questions/50729625/effect-of-1-after-the-format-string-parameter-to-printf", "title": "Effect of &quot;+1&quot; after the format string parameter to printf()", "body": "<p>I have some problems related with this code. The parameter of printf is of type <code>const char*</code> and <code>...</code> (variable argument list). </p>\n\n<p>1) Why the output of the program is <code>d</code> and not <code>127</code>?<br>\n2) Is it that the <code>+1</code> would get converted into string and passed to parameter variable of type <code>const char*</code>?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n   printf(\"%d\"+1 , 127); //how this will get executed?\n   return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>d\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1528318734, "post_id": 50729484, "comment_id": 88466749, "body": "When <code>fopen</code> fails, use <code>perror</code> to print the error message.  That will tell you <i>why</i> it failed."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528318806, "post_id": 50729484, "comment_id": 88466787, "body": "the code looks OK. And it prints &quot;Error &quot; ? print <code>fichier</code> before feeding it to <code>fopen</code> And initialize <code>fp</code> with <code>NULL</code>."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528319151, "post_id": 50729484, "comment_id": 88466947, "body": "lol didn&#39;t notice the bottom line."}, {"owner": {"reputation": 99, "user_id": 9905618, "user_type": "registered", "profile_image": "https://graph.facebook.com/646524305692767/picture?type=large", "display_name": "Tran Quoc Gia Cat", "link": "https://stackoverflow.com/users/9905618/tran-quoc-gia-cat"}, "edited": false, "score": 0, "creation_date": 1528403854, "post_id": 50729484, "comment_id": 88507254, "body": "I tried to use str[] = &quot;text.txt&quot;, but it didn&#39;t run."}, {"owner": {"reputation": 99, "user_id": 9905618, "user_type": "registered", "profile_image": "https://graph.facebook.com/646524305692767/picture?type=large", "display_name": "Tran Quoc Gia Cat", "link": "https://stackoverflow.com/users/9905618/tran-quoc-gia-cat"}, "edited": false, "score": 0, "creation_date": 1528488716, "post_id": 50729484, "comment_id": 88542952, "body": "I modified some ways but all didn&#39;t run: if use (str[] = &quot;text.txt&quot;), when print the str: text.txt and (str[] = &quot;\\&quot;text.txt\\&quot;&quot;), it print the str: &quot;text.txt&quot;  readTraceTxt(str,&amp;expeTrace) and readTraceTxt(&amp;str,&amp;expeTrace); if remove the &amp; in the function with paramettre str, there are the notification show:  The instruction at 0x7668ecc0 referenced memory at 0x0000000. the memory could be written. Click on ok to terminate the program"}], "owner": {"reputation": 99, "user_id": 9905618, "user_type": "registered", "profile_image": "https://graph.facebook.com/646524305692767/picture?type=large", "display_name": "Tran Quoc Gia Cat", "link": "https://stackoverflow.com/users/9905618/tran-quoc-gia-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528404620, "creation_date": 1528318658, "last_edit_date": 1528327247, "question_id": 50729484, "link": "https://stackoverflow.com/questions/50729484/cant-open-the-file-in-the-function-in-c-by-call-pointer-char", "title": "Can&#39;t open the file in the function in C by call pointer char", "body": "<p>I can't open the file. The file is in the same C: drive. \nHow can I fix this?</p>\n\n<pre><code>  void readTraceTxt(char* fichier, trace* uneTrace){\n        int i = 0;\n        FILE *fp;\n        fp = fopen(fichier,\"r\");\n        if (fp == NULL)\n            printf (\"Error\");\n        else{\n            fscanf(fp,\"%s\",uneTrace-&gt;comment);\n            fscanf(fp,\"%d\",uneTrace-&gt;nbpts);\n            for (int i = 0; i&lt;uneTrace-&gt;nbpts; i++)\n                fscanf(fp,\"%f %f\",uneTrace-&gt;time, uneTrace-&gt;value);\n           }\n        fclose(fp); } \n\nchar str[] = \"\\\"text.txt\\\"\";\nreadTraceTxt(&amp;str,&amp;expeTrace);\n</code></pre>\n"}, {"tags": ["c", "vmd"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1528317847, "post_id": 50729266, "comment_id": 88466365, "body": "There&#39;s no need to put <code>(int)</code> before <code>parts[i].pos[1]</code>, since it&#39;s declared to be <code>int</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1528317921, "post_id": 50729266, "comment_id": 88466401, "body": "I don&#39;t see anything in this function that would cause that error. You probably have undefined behavior somewhere else in your program, and it&#39;s corrupting the heap."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1528317956, "post_id": 50729266, "comment_id": 88466411, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast malloc</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1528318495, "post_id": 50729266, "comment_id": 88466647, "body": "That shouldn&#39;t fix anything."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 2, "creation_date": 1528318845, "post_id": 50729266, "comment_id": 88466803, "body": "Where is the code that calls <code>free()</code>?"}, {"owner": {"reputation": 143, "user_id": 8095408, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FIH9m91bUPo/AAAAAAAAAAI/AAAAAAAAANs/Df5yIXLS4tY/photo.jpg?sz=128", "display_name": "SpacemanSpiff", "link": "https://stackoverflow.com/users/8095408/spacemanspiff"}, "edited": false, "score": 0, "creation_date": 1528319876, "post_id": 50729266, "comment_id": 88467257, "body": "Yeah it fixed it for a second and then went back to error. I&#39;m pretty new toC so I&#39;m not sure what I need free() for."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528323076, "post_id": 50729266, "comment_id": 88468353, "body": "Note: rather than <code>parts = (Molecule*) malloc(npart * sizeof(Molecule));</code>, consider <code>parts = malloc(sizeof *parts * npart);</code>.  It is easier to code correctly, review and maintain.  Not likely the cause of your present issue.  A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help."}], "owner": {"reputation": 143, "user_id": 8095408, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FIH9m91bUPo/AAAAAAAAAAI/AAAAAAAAANs/Df5yIXLS4tY/photo.jpg?sz=128", "display_name": "SpacemanSpiff", "link": "https://stackoverflow.com/users/8095408/spacemanspiff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528319988, "creation_date": 1528317714, "last_edit_date": 1528319988, "question_id": 50729266, "link": "https://stackoverflow.com/questions/50729266/c-i-need-to-iterate-through-an-array-of-structs-but-i-keep-getting-an-error-fo", "title": "C: I need to iterate through an array of structs, but I keep getting an error for an incorrect checksum. How do I fix this?", "body": "<p>The error message is \"incorrect checksum for freed object - object was probably modified after being freed.\"</p>\n\n<p>This is the function that is giving me trouble. 'npart' and 'parts' are global variables. 'npart' is an int while 'parts' is an array of structs (see declaration below). </p>\n\n<pre><code>typedef struct {\n    int bSites;\n    int rotState; // Direction\n    int pos[2]; // Array index and layer\n} Molecule;\n\nMolecule *parts;\n</code></pre>\n\n<p>Here, I cast the quotient to an int to truncate the decimal places.</p>\n\n<pre><code>void printXYZ() {\n\n    fprintf(fp, \"%d\\n\\n\", npart);\n    for (int i = 0; i &lt; npart; i++){\n        char type = ((int) xyz[i][0]) == 3 ? 'S' : 'O';\n\n        double x, y, z;\n        z = parts[i].pos[0];\n        y = ((int) parts[i].pos[1] / size) * 1.73205080757 / 2.0;\n        if (((int) parts[i].pos[1] / size) % 2 == 0)\n            x = (double)(parts[i].pos[1] % size);\n        else\n            x = ((double)(parts[i].pos[1] % size)) / 2.0;\n        printf(\"%c\\t%f\\t%f\\t%f\\n\", type, x, y, z);\n        fprintf(fp, \"%c\\t%f\\t%f\\t%f\\n\", type, x, y, z);\n    }\n\n}\n</code></pre>\n\n<p>I allocate memory for the 'parts' array and call the printXYZ() function in main:</p>\n\n<pre><code>parts = (Molecule*) malloc(npart * sizeof(Molecule));\n</code></pre>\n\n<p>Please help!</p>\n"}, {"tags": ["c", "assembly", "floating-point", "x86", "ieee-754"], "answers": [{"comments": [{"owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "edited": false, "score": 0, "creation_date": 1528317308, "post_id": 50729116, "comment_id": 88466128, "body": "Do you know of C source code for this functionality?"}, {"owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "edited": false, "score": 1, "creation_date": 1528317511, "post_id": 50729116, "comment_id": 88466225, "body": "Here&#39;s a great online tool for <code>IEEE 754</code> conversions: <a href=\"https://www.h-schmidt.net/FloatConverter/IEEE754.html\" rel=\"nofollow noreferrer\">FloatConverter</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "edited": false, "score": 2, "creation_date": 1528317577, "post_id": 50729116, "comment_id": 88466256, "body": "@janniks I have added a program that does this.   If you ever write assembly code, please never encode floating point literals as integers.  That&#39;s just terrible for the next person to read your code."}, {"owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "edited": false, "score": 0, "creation_date": 1528318009, "post_id": 50729116, "comment_id": 88466446, "body": "Thanks! I will try to use <code>.float</code> for floats in most cases - maybe use the conversion for some proof-of-concept optimizations..."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1528319944, "post_id": 50729116, "comment_id": 88467284, "body": "<code>unsigned long</code> may vary from C implementation to C implementation.It would be better to use <code>uint32_t</code>. Then the <code>printf</code> needs to use <code>&quot;0x%08&quot; PRIx32 &quot;\\n&quot;</code>. <code>float</code> may vary too (although four bytes is overwhelmingly common), so testing its size would not be a bad idea. (Also, there is no need for parentheses on <code>return</code> statements, and <code>u32</code> is a more common and clear name for an unsigned 32-bit integer than <code>i32</code>.)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528320022, "post_id": 50729116, "comment_id": 88467314, "body": "Using <code>.float</code> or <code>.double</code> in assembly runs the risk that a poor assembler will round improperly when converting. I expect the compiler generates <code>.long</code> to avoid that. Programmers using <code>.float</code> or <code>.double</code> should check the quality of their assembler in this regard."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528320064, "post_id": 50729116, "comment_id": 88467334, "body": "@EricPostpischil Feel free to edit the code.  Parentheses around return statements follow KNF, the remaining things are design decisions made to remove clutter from the code."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1528320117, "post_id": 50729116, "comment_id": 88467349, "body": "@EricPostpischil Since there are only two assemblers the recognizes this syntax (Solaris as and GNU as) and both have high quality floating point parsing routines, there is little to worry about."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528324110, "post_id": 50729116, "comment_id": 88468633, "body": "@EricPostpischil: good call, compiled for x86-64 SysV (where <code>unsigned long</code> is 64 bit), we happen to get lucky that gcc decides to assume the upper half of the 64-bit <code>i32</code> union member is zero, and uses <code>movd esi, xmm0</code> for type punning.  But without optimization the upper 4 bytes come from uninitialized stack space.  <a href=\"https://godbolt.org/g/CjxzQ8\" rel=\"nofollow noreferrer\">godbolt.org/g/CjxzQ8</a>"}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 5, "last_activity_date": 1528324791, "last_edit_date": 1528324791, "creation_date": 1528317174, "answer_id": 50729116, "question_id": 50729068, "link": "https://stackoverflow.com/questions/50729068/convert-a-float-literal-to-int-representation-in-x86-assembly/50729116#50729116", "title": "Convert a float literal to int representation in x86 assembly?", "body": "<p>x86 FPU hardware uses <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">IEEE754 binary32</a> / binary64 representations for <code>float</code> / <code>double</code>.</p>\n\n<p>Determining the IEEE 754 representation of a floating point number is not trivial for humans.  In handwritten assembly code, it's usually a good idea to use the <code>.float</code> or <code>.double</code> directives instead:</p>\n\n<pre><code>.float 3.0    # generates 3.0 as a 32 bit float\n.double 3.0   # generates 3.0 as a 64 bit float\n</code></pre>\n\n<hr>\n\n<p>If you really want to compute this manually, refer to the <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">explanations on Wikipedia</a>.  It might be interesting to do so as an exercise, but for actual programming it's tedious and mostly useless.</p>\n\n<p>Compilers do the conversion (with rounding to the nearest representable FP value) internally, because FP values often don't come directly from a literal in the source; they can come from constant folding.  e.g. <code>1.23 * 4.56</code> is evaluated at compile time, so the compiler already ends up with FP values in float or double binary representation.  Printing them back to decimal for the assembler to parse and re-convert to binary would be slower and might require a lot of decimal places.</p>\n\n<hr>\n\n<p>To compute the representation of a 32 bit float as a 32 bit integer, you can use <a href=\"https://www.h-schmidt.net/FloatConverter/IEEE754.html\" rel=\"nofollow noreferrer\">an online IEEE754 converter</a>, or a program like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nint main(int argc, char *argv[])\n{\n    union { uint32_t u32; float f32; } intfloat;\n\n    if (argc != 2) {\n        fprintf(stderr, \"Usage: %s some-number\\n\", argv[0]);\n        return EXIT_FAILURE;\n    }\n\n    intfloat.f32 = atof(argv[1]);\n\n    printf(\"0x%08\" PRIx32 \"\\n\", intfloat.u32);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 2250, "user_id": 1139105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m3xAB.png?s=128&g=1", "display_name": "janniks", "link": "https://stackoverflow.com/users/1139105/janniks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "accepted_answer_id": 50729116, "answer_count": 1, "score": 2, "last_activity_date": 1530278203, "creation_date": 1528316962, "last_edit_date": 1530278203, "question_id": 50729068, "link": "https://stackoverflow.com/questions/50729068/convert-a-float-literal-to-int-representation-in-x86-assembly", "title": "Convert a float literal to int representation in x86 assembly?", "body": "<p>The following C code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main()\n{\n    float f;\n    f = 3.0;\n}\n</code></pre>\n\n<p>Is converted to the following assembly instructions:</p>\n\n<pre class=\"lang-x86 prettyprint-override\"><code>main:\n  pushl %ebp\n  movl %esp, %ebp\n  subl $16, %esp\n  flds .LC0\n  fstps -4(%ebp)\n  movl $0, %eax\n  leave\n  ret\n.LC0:\n  .long 1077936128\n</code></pre>\n\n<p>What is the correct way to calculate the <code>.long</code>/<code>int</code> representation of the <code>float</code> literal?</p>\n\n<p><em>e.g.</em> <code>1077936128</code> generated from <code>3.0</code> for the example shown above</p>\n\n<hr>\n\n<blockquote>\n  <p>For this example <code>gcc</code> is used with the <code>-m32 -S -O0 -fno-stack-protector -fno-asynchronous-unwind-tables</code> flags using intel settings to generate the assembly output.</p>\n</blockquote>\n\n<p><strong>References</strong>:</p>\n\n<p><a href=\"https://godbolt.org/g/X6mgaT\" rel=\"nofollow noreferrer\">Compiler Explorer Link</a>  with compilation flags and other settings</p>\n"}, {"tags": ["c++", "c", "segmentation-fault", "stack-overflow"], "comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 6, "creation_date": 1528314287, "post_id": 50728345, "comment_id": 88464728, "body": "You can jump over the guard page and hit another mapped region."}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 4, "creation_date": 1528314295, "post_id": 50728345, "comment_id": 88464732, "body": "It could cause your program to branch to an invalid instruction"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 8, "creation_date": 1528314325, "post_id": 50728345, "comment_id": 88464750, "body": "The program <i>could</i> behave correctly and as expected."}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 2, "creation_date": 1528314327, "post_id": 50728345, "comment_id": 88464752, "body": "Is highly OS related."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 6, "creation_date": 1528314387, "post_id": 50728345, "comment_id": 88464778, "body": "<a href=\"https://www.qualys.com/2017/06/19/stack-clash/stack-clash.txt\" rel=\"nofollow noreferrer\">qualys.com/2017/06/19/stack-clash/stack-clash.txt</a>"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1528314399, "post_id": 50728345, "comment_id": 88464782, "body": "@Ivan: You mean, if your stack frame is larger than a single page?"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 1, "creation_date": 1528314440, "post_id": 50728345, "comment_id": 88464800, "body": "@einpoklum Yes. You can even return back successfully after corrupting some other page."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 6, "creation_date": 1528314445, "post_id": 50728345, "comment_id": 88464806, "body": "The answer, essentially, is &quot;anything.&quot; Sure, most (all?) common modern OS&#39;s have guard pages, but there&#39;s nothing that guarantees one. Once you&#39;re accessing random memory, almost anything can happen. You might, in the absence of read-only code pages or execute protection bits, create gibberish code or try to execute non-code memory. You might corrupt a function pointer stored by some other part of the program, causing it to jump somewhere else. And so on..."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1528314446, "post_id": 50728345, "comment_id": 88464807, "body": "In our OpenMP program, it once caused silent overwriting of data of some other data structures. The program then finished correctly, just with incorrect results, and it was not easy to figure out the cause. (Setting <code>OMP_STACKSIZE</code> resolved the problem.)"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1528314459, "post_id": 50728345, "comment_id": 88464813, "body": "@Stefan: I understand that could be the case; if it is, an answer would be an example of an OS where this <i>always</i> happens and an OS with which something <i>else</i> can happen."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1528314517, "post_id": 50728345, "comment_id": 88464832, "body": "Of course, <i>visting</i> Stack Overflow often leads to <i>fixing</i> your segmentation fault... :)"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1528314563, "post_id": 50728345, "comment_id": 88464858, "body": "@Linuxios: It may result in brain stack overflow though, causing another kind of segmentation fault... :-)"}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1528314754, "post_id": 50728345, "comment_id": 88464952, "body": "@einpoklum: yes, I understand. MS-DOS was the first to pop into my mind, but I see you excluded that one ;-) It&#39;s a bit tricky since there are a lot of os-es... so... there must be a faulty one somewhere.... Asking if something else <i>can</i> happen is like asking if <i>all</i> are working properly, which I think will not be the case. I know, it lacks an example."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1528315477, "post_id": 50728345, "comment_id": 88465318, "body": "Undefined Behaviour is undefined. Anything could happen, all bets are off and you&#39;ve left the land of guaranteed behaviour for <i>anything</i>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1528315534, "post_id": 50728345, "comment_id": 88465338, "body": "Have anyone mentioned <a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">nasal demons</a> already?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1528315736, "post_id": 50728345, "comment_id": 88465439, "body": "This classic comes to mind: <a href=\"http://insecure.org/stf/smashstack.html\" rel=\"nofollow noreferrer\">Smashing The Stack For Fun And Profit</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 5, "creation_date": 1528314778, "post_id": 50728450, "comment_id": 88464968, "body": "Out of curiosity: do any of the standard compilers emit a warning on code like this? Some &quot;Stack-allocated local variable ... likely to overflow...&quot;?"}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 2, "creation_date": 1528314834, "post_id": 50728450, "comment_id": 88464987, "body": "Wouldn&#39;t (isn&#39;t) that (be) a big potential exploit?"}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528314973, "post_id": 50728450, "comment_id": 88465073, "body": "@melpomene: lol, I up-ed that one a minute ago and putted it on my reading list."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1528315138, "post_id": 50728450, "comment_id": 88465164, "body": "@Linuxios: I remember seeing warnings for large stack frame sizes back in the 1990s (maybe with MrC or Metrowerks) but for the life of me I can&#39;t get GCC or Clang to emit warnings for the obviously dangerous function written above."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1528315261, "post_id": 50728450, "comment_id": 88465217, "body": "@DietrichEpp: Weird. It would seem reasonably trivial to sum the sizeof&#39;s of a functions stack variables and just emit a warning if it&#39;s more than a worst-case guard page size. Maybe there&#39;s a missing subtlty here? Or maybe GCC and Clang are just assuming no one would write code like this..."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 7, "creation_date": 1528315276, "post_id": 50728450, "comment_id": 88465229, "body": "@Linuxios MSVC inserts <code>_chkstk</code> call in functions whose frame is larger than a single page. Its purpose is to avoid segfaults during stack expansion (Windows specific thing), but afair it also detects  stack overflow and raises Structured Exception. This should guarantee that stack overflow always leads to an exception and avoids silent data corruption."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1528315949, "post_id": 50728450, "comment_id": 88465534, "body": "@Ivan: Huh, interesting. After reading bits of the link from melporneme, it looks like there is an option for GCC that does something similar, writing a byte to every page in a stack expansion, ensuring that the guard page is hit and a segfault occurs."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1528316490, "post_id": 50728450, "comment_id": 88465765, "body": "Since stack allocation/size is a linker/loader responsibility, a compiler cannot easily/reliably emit warnings/errors."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1528322372, "post_id": 50728450, "comment_id": 88468151, "body": "@einpoklum: I am unhappy with the choice of emphasis in your edit."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1528323014, "post_id": 50728450, "comment_id": 88468334, "body": "@DietrichEpp: Fair enough, it&#39;s your answer."}, {"owner": {"reputation": 2752, "user_id": 2015911, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BaMzg.jpg?s=128&g=1", "display_name": "BlueMoon93", "link": "https://stackoverflow.com/users/2015911/bluemoon93"}, "edited": false, "score": 0, "creation_date": 1528973076, "post_id": 50728450, "comment_id": 88713772, "body": "I don&#39;t understand, why is this a stack overflow?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 2752, "user_id": 2015911, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BaMzg.jpg?s=128&g=1", "display_name": "BlueMoon93", "link": "https://stackoverflow.com/users/2015911/bluemoon93"}, "edited": false, "score": 0, "creation_date": 1528997896, "post_id": 50728450, "comment_id": 88728560, "body": "@BlueMoon93: Local variables are stored in a part of memory called the stack. If you put too much data there, you get a stack overflow."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 31, "last_activity_date": 1528322386, "last_edit_date": 1528322386, "creation_date": 1528314568, "answer_id": 50728450, "question_id": 50728345, "link": "https://stackoverflow.com/questions/50728345/can-a-stack-overflow-result-in-something-other-than-a-segmentation-fault/50728450#50728450", "title": "Can a stack overflow result in something other than a segmentation fault?", "body": "<p>Yes, even on a standard OS (Linux) and standard hardware (x86).</p>\n\n<pre><code>void f(void) {\n    char arr[BIG_NUMBER];\n    arr[0] = 0; // stack overflow\n}\n</code></pre>\n\n<p>Note that on x86, the stack grows down, so we are assigning to the beginning of the array to trigger the overflow. The usual disclaimers apply... the exact behavior depends on more factors than are discussed in this answer, including the particulars of your C compiler.</p>\n\n<p>If the BIG_NUMBER is just barely large enough to overflow, you will run into the stack guard and get a segmentation fault. That's what the stack guard is there for, and it can be as small as a single 4 KiB page (but no smaller, and this 4 KiB size is used prior to Linux 4.12) or it can be larger (1 MiB default on Linux 4.12, see <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=1be7107fbe18eed3e319a6c3e83c78254b693acb\" rel=\"noreferrer\">mm: large stack guard gap</a>), but it is always some particular size.</p>\n\n<p>If BIG_NUMBER is large enough, the overflow can skip over the stack guard and land on some other piece of memory, potentially memory that is valid. This may result in your program behaving incorrectly but not crashing, which is basically the worst-case scenario: we <em>want</em> our programs to crash when they are incorrect rather than do something unintended.</p>\n"}, {"comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1528325795, "post_id": 50728825, "comment_id": 88469169, "body": "On Windows with MSVC it is very well defined."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1528326199, "post_id": 50728825, "comment_id": 88469269, "body": "MSVC does not follow c standard."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1528328468, "post_id": 50728825, "comment_id": 88469872, "body": "OP wasn&#39;t asking about standard C. Also standard C is meaningless because programs are not written in &quot;standard C&quot;."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1528371284, "post_id": 50728825, "comment_id": 88487751, "body": "@Ivan; Can you provide some quote where it is well defined in MSVC?"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1528371511, "post_id": 50728825, "comment_id": 88487894, "body": "@Ivan I don&#39;t have any link on me, but MSVC emits <code>_chkstk</code> call for functions with large frame. With guard page and emergency guard  page this makes it possible to handle stack overflow. Unlike other platforms there is a guarantee that you will get structured exception, not random data corruption."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1528316092, "creation_date": 1528316092, "answer_id": 50728825, "question_id": 50728345, "link": "https://stackoverflow.com/questions/50728345/can-a-stack-overflow-result-in-something-other-than-a-segmentation-fault/50728825#50728825", "title": "Can a stack overflow result in something other than a segmentation fault?", "body": "<p>Stackoverflow is one of the <a href=\"https://stackoverflow.com/q/367633/2455888\">many reasons</a> for <a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">undefined behavior</a> of a program. In this case you can get an expected result or segmentation fault or your hard disk could be erased, etc. Do not expect any defined behaviour because it's undefined behaviour. </p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1528318051, "post_id": 50729290, "comment_id": 88466459, "body": "I wasn&#39;t talking about overstepping array bounds, just perfectly valid program behavior except for exceeding the space allocated for the stack. Let me clarify that in the question."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1528318254, "post_id": 50729290, "comment_id": 88466540, "body": "@einpoklum exceeding the size of the stack is <i>not</i> valid program behaviour and would equally result in UB."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1528318367, "post_id": 50729290, "comment_id": 88466587, "body": "One of the ways (and the most common one) to overflow a stack <i>is</i> to access a stack allocated array out of its bounds."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1528318606, "post_id": 50729290, "comment_id": 88466693, "body": "@JesperJuhl: When you write your program, you don&#39;t know what the size of the stack is going to be."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1528318687, "post_id": 50729290, "comment_id": 88466732, "body": "@einpoklum Just because you don&#39;t know what the (available) size will be does not make it legal to exceed it. And what happens if you do is undefined."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 2, "creation_date": 1528318709, "post_id": 50729290, "comment_id": 88466743, "body": "@einpoklum You mean the space allocated for stack, or the usage? The former one you can know for sure. The latter can be bounded or estimated."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 7, "last_activity_date": 1529357856, "last_edit_date": 1529357856, "creation_date": 1528317822, "answer_id": 50729290, "question_id": 50728345, "link": "https://stackoverflow.com/questions/50728345/can-a-stack-overflow-result-in-something-other-than-a-segmentation-fault/50729290#50729290", "title": "Can a stack overflow result in something other than a segmentation fault?", "body": "<p>One thing is what happens at runtime when you overflow the stack, which can be many things. Including, but not limited to; segmentation fault, overwriting variables following whatever you overflow, causing an illegal instruction, nothing at all and much more. The \"old\" classic paper <a href=\"http://insecure.org/stf/smashstack.html\" rel=\"nofollow noreferrer\">Smashing The Stack For Fun And Profit</a> describes a lot of ways one can have \"fun\" with this stuff.</p>\n\n<p>Another thing is what can happen at compile time. In both C and C++, writing beyond an array or exceeding the size of the stack is Undefined Behaviour and when a program contains UB <em>anywhere</em> the compiler is basically free to do <em>whatever it wants</em> to <em>any</em> part of your program. And modern compilers are becoming very aggressive in exploiting UB for optimization purposes - often by assuming that UB never happens, leading them to simply remove the code containing UB or causing a branch to always or never be taken because the alternative would cause UB. Sometimes the compiler will introduce <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633\" rel=\"nofollow noreferrer\">time travel</a> or <a href=\"https://kristerw.blogspot.com/2017/09/why-undefined-behavior-may-call-never.html\" rel=\"nofollow noreferrer\">call a function that was never called in the source code</a> and many, many other things that can cause really confusing run-time behaviour.</p>\n\n<p>See also:</p>\n\n<p><a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">What Every C Programmer Should Know About Undefined Behavior #1/3</a></p>\n\n<p><a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_14.html\" rel=\"nofollow noreferrer\">What Every C Programmer Should Know About Undefined Behavior #2/3</a></p>\n\n<p><a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_21.html\" rel=\"nofollow noreferrer\">What Every C Programmer Should Know About Undefined Behavior #3/3</a></p>\n\n<p><a href=\"https://blog.regehr.org/archives/213\" rel=\"nofollow noreferrer\">A Guide to Undefined Behavior in C and C++, Part 1</a></p>\n\n<p><a href=\"https://blog.regehr.org/archives/226\" rel=\"nofollow noreferrer\">A Guide to Undefined Behavior in C and C++, Part 2</a></p>\n\n<p><a href=\"https://blog.regehr.org/archives/232\" rel=\"nofollow noreferrer\">A Guide to Undefined Behavior in C and C++, Part 3</a></p>\n"}, {"tags": [], "owner": {"reputation": 1597, "user_id": 5162810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDGmO.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/5162810/graham"}, "is_accepted": false, "score": 6, "last_activity_date": 1528331556, "creation_date": 1528331556, "answer_id": 50731422, "question_id": 50728345, "link": "https://stackoverflow.com/questions/50728345/can-a-stack-overflow-result-in-something-other-than-a-segmentation-fault/50731422#50731422", "title": "Can a stack overflow result in something other than a segmentation fault?", "body": "<p>Other answers have covered the PC side fairly well. I'll touch on some of the issues in the embedded world.</p>\n\n<p>Embedded code does have something similar to a segfault. Code is stored in some kind of non-volatile storage (usually flash these days, but some kind of ROM or PROM in the past). Writing to this needs special operations to set it up; normal memory accesses can read from it but not write to it. In addition, embedded processors usually have large gaps in their memory maps. If the processor gets a write request for memory which is read-only, or if it gets a read or write request for an address which does not physically exist, the processor will usually throw a hardware exception. If you have a debugger connected, you can check the state of the system to find what went wrong, as with a core dump.</p>\n\n<p>There's no guarantee that this will happen for a stack overflow though. The stack can be placed anywhere in RAM, and this will usually be alongside other variables. The result of stack overflow will usually be to corrupt those variables.</p>\n\n<p>If your application also uses heap (dynamic allocation) then it is common to assign a section of memory where the stack begins at the bottom of that section and expands upwards, and the heap begins at the top of that section and expands downwards. Clearly this means dynamically-allocated data will be the first casualty.</p>\n\n<p>If you're unlucky, you may not even notice when it happens, and then you need to work out why your code is not behaving correctly.  In the most ironic case, if the data being overwritten is a pointer then you may still get a hardware exception when the pointer tries to access invalid memory - but this will be some time after the stack overflow and the natural assumption will usually be that it's a bug in your code.</p>\n\n<p>Embedded code has a common pattern to deal with this, which is to \"watermark\" the stack by initialising every byte to a known value. Sometimes the compiler can do this; or sometimes you may need to implement it yourself in the startup code before main(). You can look back from the end of the stack to find where it is no longer set to this value, at which point you know the high-water-mark for stack usage; or if it is all incorrect then you know you have an overflow. It is common (and good practise) for embedded applications to poll this continuously as a background operation, and to be able to report it for diagnostic purposes.</p>\n\n<p>Having made it possible to track stack usage, most companies will set an acceptable worst-case margin to avoid overflows. This is typically somewhere from 75% to 90%, but there will always be some spare. Not only does this allow for the possibility that there is a worse worst-case which you have not yet seen, but it also makes life easier for future development when new code needs to be added which uses more stack.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2382, "favorite_count": 7, "accepted_answer_id": 50728450, "answer_count": 4, "score": 36, "last_activity_date": 1529357856, "creation_date": 1528314182, "last_edit_date": 1528339525, "question_id": 50728345, "link": "https://stackoverflow.com/questions/50728345/can-a-stack-overflow-result-in-something-other-than-a-segmentation-fault", "title": "Can a stack overflow result in something other than a segmentation fault?", "body": "<p>In a compiled program (let's say C or C++, but I guess this question could extend to any non-VM-ish language with a call stack) - very often when you overflow your stack, <a href=\"https://stackoverflow.com/a/2685434/1593077\">you get a segmentation fault</a>:</p>\n\n<blockquote>\n  <p>Stack overflow is [a] cause, segmentation fault is the result.</p>\n</blockquote>\n\n<p>Is this always the case, though? Can a stack overflow result in other kinds of program/OS behavior?</p>\n\n<p>I'm asking also about non-Linux, non-Windows OSes and non-X86 hardware. (Of course if you don't have hardware memory protection or OS support for it (e.g. MS-DOS) then there's no such thing as a segmentation fault; I'm asking about cases where you <em>could</em> get a segmentation fault but something else happens).</p>\n\n<p>Note: Assume that other than the stack overflow, the program is valid and does not try to access arrays beyond their bounds, dereference invalid pointers, etc.</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 361, "user_id": 3174148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb7f4331f05adbf4c47d076055ffdea?s=128&d=identicon&r=PG&f=1", "display_name": "scrapper", "link": "https://stackoverflow.com/users/3174148/scrapper"}, "edited": false, "score": 0, "creation_date": 1528316376, "post_id": 50728285, "comment_id": 88465716, "body": "are you trying to read the same word cycle_count times?"}, {"owner": {"reputation": 9, "user_id": 9905284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/9905284/alex"}, "reply_to_user": {"reputation": 361, "user_id": 3174148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb7f4331f05adbf4c47d076055ffdea?s=128&d=identicon&r=PG&f=1", "display_name": "scrapper", "link": "https://stackoverflow.com/users/3174148/scrapper"}, "edited": false, "score": 0, "creation_date": 1528317157, "post_id": 50728285, "comment_id": 88466053, "body": "yes, I don&#39;t think that&#39;s the problem, is it?"}], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 3174148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb7f4331f05adbf4c47d076055ffdea?s=128&d=identicon&r=PG&f=1", "display_name": "scrapper", "link": "https://stackoverflow.com/users/3174148/scrapper"}, "is_accepted": false, "score": 0, "last_activity_date": 1528317874, "creation_date": 1528317874, "answer_id": 50729302, "question_id": 50728285, "link": "https://stackoverflow.com/questions/50728285/how-8-bit-memory-access-behaves-when-we-replace-replace-the-dev-mem-mapping-wit/50729302#50729302", "title": "How 8 bit memory access behaves when we replace replace the /dev/mem mapping with a normal memory allocation", "body": "<p>Take a look at this:</p>\n\n<p>sum += *buf++;</p>\n\n<p>You are adding the value that buf points to into sum and then incrementing buf. So you are actually incrementing the address, not the value.\nJust adding a parenthesis should fix the problem:</p>\n\n<pre><code> sum += (*buf)++;\n</code></pre>\n\n<p>You should read more about the postfix increment operator and <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 9905284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/9905284/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528317874, "creation_date": 1528313920, "question_id": 50728285, "link": "https://stackoverflow.com/questions/50728285/how-8-bit-memory-access-behaves-when-we-replace-replace-the-dev-mem-mapping-wit", "title": "How 8 bit memory access behaves when we replace replace the /dev/mem mapping with a normal memory allocation", "body": "<p>So, I was observing how execution time behaves for various bit word, below is example of a program that read 8 bits word. I wanted to check how it behaves when we replace the /dev/mem mapping with a 'normal' memory allocation (i.e by malloc/calloc). But my code started giving segmentation fault (Core dump). Any help?</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\nstatic uint32_t map_size = 0x08000000;\nstatic uint32_t map_base = 0x18000000;\nstatic uint32_t map_addr = 0x00000000;\nstatic uint64_t cycle_count = 0x1000000;\n\n\nstatic char *dev_mem = \"/dev/mem\";\n\nint main(int argc, char **argv) {\nint fd;\nuint8_t *buf;\nif ((fd = open(dev_mem, O_RDWR | O_SYNC)) == -1) {\n    printf(\"can't open /dev/mem .\\n\");\n    exit(EXIT_FAILURE);\n}\n\nbuf = (uint8_t *) malloc(sizeof(uint8_t));\nif (buf == 0) {\n    printf(\"Can't be mapped. \\n\");\n    exit(EXIT_FAILURE);\n} else\n    map_addr = (long unsigned) buf;\n\nuint8_t sum = 0;\n\nwhile (cycle_count-- &gt; 0)\n    sum += *buf++;\n\nprintf(\"%u\\n\", sum);\nclose(fd);\nexit(EXIT_SUCCESS);\n\n\nreturn 0;\n  }\n</code></pre>\n\n<p>I am new to this, so sorry if the errors are silly.</p>\n"}, {"tags": ["c", "visual-studio", "debugging", "compiler-errors", "visual-studio-debugging"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528324615, "post_id": 50727989, "comment_id": 88468789, "body": "<code>(void)</code> is suspicious in <code>arg = (PyObject*)((void)(lltr...</code>.  Unclear to its usefulness here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528324825, "post_id": 50727989, "comment_id": 88468861, "body": "BTW, picture does not match posted code in line 4399"}, {"owner": {"reputation": 35, "user_id": 8268564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNpxU.jpg?s=128&g=1", "display_name": "Akinohana", "link": "https://stackoverflow.com/users/8268564/akinohana"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528328224, "post_id": 50727989, "comment_id": 88469814, "body": "@chux I dont see the difference between code in text and in picture... btw I dont think it&#39;s the problem about any specific code, should be something wrong in compiler settings I dont know...s"}], "owner": {"reputation": 35, "user_id": 8268564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNpxU.jpg?s=128&g=1", "display_name": "Akinohana", "link": "https://stackoverflow.com/users/8268564/akinohana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528312547, "creation_date": 1528312547, "question_id": 50727989, "link": "https://stackoverflow.com/questions/50727989/debugging-with-vs2013-on-a-program-with-no-optimization-but-still-there-is-no-sy", "title": "Debugging with VS2013 on a program with no optimization but still there is no symbol in the current context for local variables", "body": "<p>I am trying to debug Python2.7 to understand more about how python works.</p>\n\n<p>when I trying to debug ceval.c at line 4399, I noticed I cant see value of <code>arg</code> in my IDE, <strong>I checked optimization is disabled and /DEBUG option is on.</strong></p>\n\n<ol>\n<li>I looked disassembly  and I do see <code>arg</code> have a value, code was\nexecuted.</li>\n<li>I tried to debug in both VS2013 and VS2017, both are the same even\nPDB is loaded</li>\n<li>I tried with WinDbg using <code>dv</code> command ,it's still unable to see any\nlocal variables</li>\n</ol>\n\n<p>my compile command is :</p>\n\n<pre><code>/GS /analyze- /W3 /Gy /Zc:wchar_t /I\"H:\\project\\cpython-2.7\\Include\" /I\"H:\\project\\cpython-2.7\\PC\" /Zi /Gm- /Od /Fd\"H:\\project\\cpython-2.7\\PCbuild\\obj\\win32_Debug\\python\\vc120.pdb\" /fp:precise /D \"_CONSOLE\" /D \"WIN32\" /D \"_WIN32\" /D \"_DEBUG\" /D \"_MBCS\" /errorReport:prompt /GF /WX- /Zc:forScope /Gd /Oy- /MDd /Fa\"H:\\project\\cpython-2.7\\PCbuild\\obj\\win32_Debug\\python\\\" /nologo /Fo\"H:\\project\\cpython-2.7\\PCbuild\\obj\\win32_Debug\\python\\\" /Fp\"H:\\project\\cpython-2.7\\PCbuild\\obj\\win32_Debug\\python\\python_d.pch\" \n</code></pre>\n\n<p>my link command is :</p>\n\n<pre><code>/OUT:\"H:\\project\\cpython-2.7\\PCBuild\\python_d.exe\" /MANIFEST:NO /NXCOMPAT /PDB:\"H:\\project\\cpython-2.7\\PCBuild\\python_d.pdb\" /DYNAMICBASE \"kernel32.lib\" \"user32.lib\" \"gdi32.lib\" \"winspool.lib\" \"comdlg32.lib\" \"advapi32.lib\" \"shell32.lib\" \"ole32.lib\" \"oleaut32.lib\" \"uuid.lib\" \"odbc32.lib\" \"odbccp32.lib\" \"H:\\project\\cpython-2.7\\PCBuild\\python27_d.lib\" /STACK:\"2000000\" /DEBUG /BASE:\"0x1d000000\" /MACHINE:X86 /NODEFAULTLIB:\"LIBC\" /SAFESEH /PGD:\"H:\\project\\cpython-2.7\\PCBuild\\python_d.pgd\" /SUBSYSTEM:CONSOLE /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /ManifestFile:\"H:\\project\\cpython-2.7\\PCbuild\\obj\\win32_Debug\\python\\python_d.exe.intermediate.manifest\" /ERRORREPORT:PROMPT /NOLOGO /LIBPATH:\"H:\\project\\cpython-2.7\\PCBuild\\\" /TLBID:1 \n</code></pre>\n\n<p>so far I can only read <code>pp_stack</code> and <code>oparg</code>  ,I can't read value of any local variables</p>\n\n<pre><code>static PyObject *\ncall_function(PyObject ***pp_stack, int oparg\n#ifdef WITH_TSC\n                , uint64* pintr0, uint64* pintr1\n#endif\n                )\n{\n    int na = oparg &amp; 0xff;\n    int nk = (oparg&gt;&gt;8) &amp; 0xff;\n    int n = na + 2 * nk;\n    PyObject **pfunc = (*pp_stack) - n - 1;\n    PyObject *func = *pfunc;\n    PyObject *x, *w;\n\n    /* Always dispatch PyCFunction first, because these are\n       presumed to be the most frequent callable object.\n    */\n    if (PyCFunction_Check(func) &amp;&amp; nk == 0) {\n        int flags = PyCFunction_GET_FLAGS(func);\n        PyThreadState *tstate = PyThreadState_GET();\n\n        PCALL(PCALL_CFUNCTION);\n        if (flags &amp; (METH_NOARGS | METH_O)) {\n            PyCFunction meth = PyCFunction_GET_FUNCTION(func);\n            PyObject *self = PyCFunction_GET_SELF(func);\n            if (flags &amp; METH_NOARGS &amp;&amp; na == 0) {\n                C_TRACE(x, (*meth)(self,NULL));\n            }\n            else if (flags &amp; METH_O &amp;&amp; na == 1) {\n                //PyObject *arg = EXT_POP(*pp_stack);\n\n\n                //EXT_POP-------------------\n                PyObject *arg = (PyObject*)((void)(lltrace &amp;&amp;  prtrace((*pp_stack)[-1], \"ext_pop\")), *--(*pp_stack));\n</code></pre>\n\n<p>so in this case, where is the problem at? why I cant see the value from IDE?</p>\n\n<p><a href=\"https://i.stack.imgur.com/C1b99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C1b99.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ZyzWL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZyzWL.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/6jaMW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6jaMW.png\" alt=\"PDB is loaded but I can see only some of the variable\"></a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1528309430, "post_id": 50727035, "comment_id": 88462435, "body": "1. <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">You should not cast malloc</a> 2. Should check the return value from <code>fopen</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1528309473, "post_id": 50727035, "comment_id": 88462458, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29575109/assigning-a-char-pointer-to-char-array-in-c\">Assigning a char pointer to char array in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 3, "creation_date": 1528309521, "post_id": 50727129, "comment_id": 88462488, "body": "Shouldn&#39;t <code>current -&gt; word = newword;</code> use <code>strcpy</code>?"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1528309731, "post_id": 50727129, "comment_id": 88462584, "body": "@EdHeal: Yes, thanks; edit was made by krpra (thank you)."}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1528310229, "post_id": 50727129, "comment_id": 88462826, "body": "Works until strlen(word)&gt;20, and since strcpy used, overwrites buffer"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1528310315, "post_id": 50727129, "comment_id": 88462872, "body": "I have added a check to ensure no buffer overrun and <code>fopen</code> check."}], "tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": false, "score": 1, "last_activity_date": 1528310313, "last_edit_date": 1528310313, "creation_date": 1528309393, "answer_id": 50727129, "question_id": 50727035, "link": "https://stackoverflow.com/questions/50727035/adding-a-char-array-to-a-linked-list/50727129#50727129", "title": "Adding a char array to a linked list", "body": "<p>You only allocate one node (<code>head</code>) and then change its contents each iteration of the loop. To create a linked list, you need to allocate a new <code>node</code> for each word (each iteration of the loop). Something like this should do it:</p>\n\n<pre><code>int main(){\n    FILE *ifp;\n    char newword[20];\n    node * head = NULL;\n    node  *last = NULL;\n    node  *current;\n\n    ifp = fopen(\"para.txt\",\"r\");\n    if (ifp == NULL) {\n        fprintf(stderr, \"Unable to open file para.txt\\n\");\n        return EXIT_FAILURE;\n    }\n    while(fscanf(ifp,\"%19s\",newword) != EOF){\n         current = malloc(sizeof(node));\n         strcpy(current -&gt; word,newword);\n         if(last) {\n             last-&gt;next = current;\n         }\n         else {\n             head = current;\n         }\n         last = current;\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 0, "last_activity_date": 1528310157, "creation_date": 1528310157, "answer_id": 50727332, "question_id": 50727035, "link": "https://stackoverflow.com/questions/50727035/adding-a-char-array-to-a-linked-list/50727332#50727332", "title": "Adding a char array to a linked list", "body": "<p>Keep track of a head and tail, or just push at head. The following appends to end, efficiently.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node{\n    struct node * next;\n    char word[1];\n    //or, char word[20];//fixed length word\n}node;\n\nnode*\nnodeNew(char* word) {\n    if(!word) return NULL;\n    //either dynamically allocate for strlen(word)\n    node* pnode = malloc( sizeof(node)+strlen(word) );\n    //or fixed len word \n    if( pnode ) {\n        pnode-&gt;next = NULL;\n        strcpy(pnode-&gt;word, word);\n        //or, strncpy(pnode-&gt;word, word, 20-1); //fixed length\n    }\n    return pnode;\n}\n\nint main()\n{\n    FILE *ifp;\n    char newword[200]; //since using fscanf, need to avoid buffer overflow, should use fgets and strtok instead\n    node * head;\n\n    if( !(ifp = fopen(\"para.txt\",\"r\") ) { printf(\"error\\n\"); exit(0); }\n    head = NULL;\n\n    while(fscanf(ifp,\"%s\",newword) != EOF){\n        if( !head ) { tail = head = nodeNew(newword); }\n        else { tail-&gt;next = nodeNew(newword);\n    }\n    //head points to first element, head-&gt;next points to next element\n    //tail points to last element\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9446575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882068c61f97e8c82dc14cadeaa81b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Dulanjali", "link": "https://stackoverflow.com/users/9446575/dulanjali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1528310313, "creation_date": 1528308980, "last_edit_date": 1528309081, "question_id": 50727035, "link": "https://stackoverflow.com/questions/50727035/adding-a-char-array-to-a-linked-list", "title": "Adding a char array to a linked list", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node{\n    char word[20];\n    struct node * next;\n}node;\n\nint main(){\n    FILE *ifp;\n    char newword[20];\n    node * head;\n\n    ifp = fopen(\"para.txt\",\"r\");\n    head = (node * )malloc(sizeof(node));\n\n    while(fscanf(ifp,\"%s\",newword) != EOF){\n         head -&gt; next = NULL;\n         head -&gt; word = newword;\n     }\n\n    return 0;\n}\n</code></pre>\n\n<p>I want to add the words which is read by the text file to a link list. I tried to do with this code but I couldn't. How can I fix this.</p>\n"}, {"tags": ["c", "list", "file", "data-structures"], "comments": [{"owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "edited": false, "score": 0, "creation_date": 1528309875, "post_id": 50727025, "comment_id": 88462646, "body": "You can use <code>array of pointers</code> instead."}, {"owner": {"reputation": 27, "user_id": 9851355, "user_type": "registered", "profile_image": "https://graph.facebook.com/779372398934383/picture?type=large", "display_name": "Walter Palma", "link": "https://stackoverflow.com/users/9851355/walter-palma"}, "reply_to_user": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "edited": false, "score": 0, "creation_date": 1528310574, "post_id": 50727025, "comment_id": 88463007, "body": "Well, im forced to do it this way, I just dont know how im gonna save the first pointer of rental of every node of client"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1528315564, "post_id": 50727025, "comment_id": 88465354, "body": "You will want to review: <a href=\"http://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\">Is it a good idea to <b>typedef</b> pointers?</a>. (hint: the answer is No)"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "is_accepted": false, "score": 0, "last_activity_date": 1528327561, "creation_date": 1528327561, "answer_id": 50730990, "question_id": 50727025, "link": "https://stackoverflow.com/questions/50727025/c-list-of-a-list/50730990#50730990", "title": "C list of a list", "body": "<p><code>Arraylist</code> (Array of <code>pointers</code> in <code>C</code>) is good choice for implementing <code>list of list</code> but as you are forced to do in this way, I am showing a Simple method how you can develop <code>list of list</code> in <code>C</code>.</p>\n\n<p>It is very simple,suppose you have a list of 3 numbers: 1,2,3 i.e list_1,list of 2 numbers: 5,6 i.e list_2.Now these list_1 and list_2 can be linked in a similar way as the numbers in list linked above.Look at this scenario </p>\n\n<p>list_1:<code>1-&gt;2-&gt;3-&gt;Null</code></p>\n\n<p>list_2:<code>5-&gt;6-&gt;Null</code></p>\n\n<p>list_of_list : <code>list_1-&gt;list_2-&gt;Null</code> i.e. <code>(1-&gt;2-&gt;3-&gt;Null) -&gt; (5-&gt;6-&gt;Null) -&gt; Null</code></p>\n\n<p>Here is a Sample program to insert list of <code>ints</code> in Last:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n// for list of Intergers\nstruct node{\n    int Data;\n    struct node *next;\n};\n\n// this is for list of nodes i.e list of lists\nstruct list{\n    struct node *start;\n    struct list *listnext;\n};\n\n\n// insert integers in list \n\nvoid insertNode(struct node **head ,int data){\n    struct node *temp,*current;\n    temp=malloc(sizeof(struct node));\n    temp-&gt;Data=data;\n    temp-&gt;next=NULL;\n\n    if((*head)==NULL){\n        (*head)=temp;\n    }\n    else{\n        current=(*head);\n        while(current-&gt;next!=NULL){\n            current=current-&gt;next;\n        }\n        current-&gt;next=temp;\n    }\n}\n\n//  insert lists of integers in a list\n\nvoid insertList(struct list **Listhead,struct node *head){\n    struct list *temp,*current;\n    temp=malloc(sizeof(struct list));\n    temp-&gt;start=head;\n    temp-&gt;listnext=NULL;\n    if((*Listhead)==NULL){\n        (*Listhead)=temp;\n    }\n    else{\n        current=(*Listhead);\n        while(current-&gt;listnext!=NULL){\n            current=current-&gt;listnext;\n        }\n        current-&gt;listnext=temp;\n    }\n}\n\n// Show all the list with their data\n\nvoid show(struct list *Listhead){\n    int i=1;\n    struct list *current;\n    struct node *currentlist;\n    current=Listhead;\n    while(current!=NULL){\n        currentlist=current-&gt;start;\n        printf(\"List %d: \",i);\n        while(currentlist!=NULL){\n            printf(\"%d \",currentlist-&gt;Data);\n            currentlist=currentlist-&gt;next;\n        }\n        i++;\n        printf(\"\\n\");\n        current=current-&gt;listnext;\n    }\n}\n\nint main(){\n    struct node *head1=NULL,*head2=NULL,*head3=NULL; // 3 lists of integers\n    struct list *Listhead=NULL;  // Listhead will be the head of lists of list\n    insertNode(&amp;head1,20);  // inserting in first list\n    insertNode(&amp;head1,13);\n    insertNode(&amp;head1,22);\n    insertNode(&amp;head1,18);\n    insertNode(&amp;head2,42);  // inserting in second list\n    insertNode(&amp;head2,15);\n    insertNode(&amp;head3,12);  // inserting in third list\n    insertNode(&amp;head3,14);\n    insertNode(&amp;head3,28);\n    insertList(&amp;Listhead,head1); // inserting lists in list\n    insertList(&amp;Listhead,head2);\n    insertList(&amp;Listhead,head3);\n    show(Listhead);\n}\n</code></pre>\n\n<p>Output for this Program:</p>\n\n<pre><code>List 1: 20 13 22 18\nList 2: 42 15\nList 3: 12 14 28\n</code></pre>\n\n<p>I hope you got the point.     </p>\n"}], "owner": {"reputation": 27, "user_id": 9851355, "user_type": "registered", "profile_image": "https://graph.facebook.com/779372398934383/picture?type=large", "display_name": "Walter Palma", "link": "https://stackoverflow.com/users/9851355/walter-palma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1354, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528337044, "creation_date": 1528308915, "last_edit_date": 1528337044, "question_id": 50727025, "link": "https://stackoverflow.com/questions/50727025/c-list-of-a-list", "title": "C list of a list", "body": "<p>im having a problem, im trying to make a list of a list where inicioC refers to the first node of clients, and every node of clients will have a list of rentals, referred as inicioA. The thing is, i dont know how to save the first pointer of the rentals, like, the first node of clients will only be saved one time, but wont the first node of every rental be different?</p>\n\n<p>this are the structs:</p>\n\n<pre><code>typedef struct _aluguer\n{\n    int id, estado, diaI, mesI, anoI, diaE, mesE, anoE;\n    struct _aluguer *prox;\n}aluguer, *pAluguer;\n\ntypedef struct _registo\n{\n    int nif,nalu;\n    char nome[100];\n    struct _registo *prox;\n    pAluguer *inicioA;\n}registo, *pRegisto;\n</code></pre>\n\n<p>and this is the code I use to extract the info from a file into the list of lists</p>\n\n<pre><code>pRegisto iniC(pRegisto inicioC, pAluguer inicioA)\n{\n\nFILE *c;\nint j, nif, nalu, l=0;\nchar nome[100];\n\nc = fopen(\"clientes.txt\", \"r\"); // abrir ficheiro\n\nif(c == NULL)\n{\n    printf(\"Erro ao abrir ficheiro %s\", \"clientes.txt\");\n    exit(0);\n}\n\n\nwhile(fscanf(c, \"%d %d %s\", &amp;nif, &amp;nalu, nome) == 3) //format of info\n{\n    pRegisto novoC = malloc(sizeof(registo));\n    if(novoC == NULL)\n    {\n        printf(\"erro alocacao memoria\\n\");\n        return inicioC;\n    }\n    novoC -&gt; prox = NULL;\n    pAluguer inicioA = NULL;\n\n    pRegisto aux = inicioC;\n    pRegisto p = NULL;\n\n    novoC-&gt;nif=nif;\n    novoC-&gt;nalu=nalu;\n    strcpy(novoC-&gt;nome, nome);\n\n    while(aux != NULL)\n    {\n        p = aux;\n        aux = aux-&gt;prox;\n    }\n\n    if( aux == inicioC)\n    {\n        inicioC=novoC;\n    }\n    else\n    {\n        p-&gt;prox = novoC;\n    }\n\n\n    for(j=0; j&lt;novoC-&gt;nalu; j++) // repeat is equal to the number of rentals\n    {\n        l++;\n        pAluguer novoA = malloc(sizeof(aluguer));\n\n        if(novoA == NULL)\n        {\n            printf(\"erro alocacao memoria\\n\");\n            return inicioC;\n        }\n        novoA -&gt; prox = NULL;\n\n        pAluguer aux = inicioA;\n        pAluguer p = NULL;\n\n        fscanf(c, \"%d %d\", &amp;(novoA-&gt;id), &amp;(novoA-&gt;estado));\n\n        if(novoA-&gt;estado == 0)\n        {\n            fscanf(c, \" %d %d %d\", &amp;(novoA-&gt;diaI), &amp;(novoA-&gt;mesI), &amp;(novoA-&gt;anoI));\n        }\n        else\n        {\n            fscanf(c, \" %d %d %d %d %d %d\", &amp;(novoA-&gt;diaI), &amp;(novoA-&gt;mesI), &amp;(novoA-&gt;anoI), &amp;(novoA-&gt;diaE), &amp;(novoA-&gt;mesE), &amp;(novoA-&gt;anoE));\n        }\n\n\n        while(aux != NULL)\n        {\n            p = aux;\n            aux = aux-&gt;prox;\n        }\n\n        if( aux == inicioA)\n        {\n            inicioA=novoA;\n        }\n        else\n        {\n            p-&gt;prox = novoA;\n        }\n    }\n}\n\nfclose(c);\n\nreturn inicioC;\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1528383865, "post_id": 50726675, "comment_id": 88496727, "body": "If you have systemd in your OS you can use <code>coredumpctl</code> to list all coredumped programs. Your segfaulting program should be in that list. If your goal is to monitor your program crashes you can use <code>coredumpctl</code>, I guess."}], "owner": {"reputation": 24752, "user_id": 351984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f3133cf8379692c9b8c52bbcb6438aae?s=128&d=identicon&r=PG", "display_name": "Paul Rubel", "link": "https://stackoverflow.com/users/351984/paul-rubel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 758, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528310428, "creation_date": 1528307646, "last_edit_date": 1528310428, "question_id": 50726675, "link": "https://stackoverflow.com/questions/50726675/generating-trap-segfault-messages-in-dmesg", "title": "generating trap/segfault messages in dmesg", "body": "<p>I had a program that was segfaulting. </p>\n\n<p>When I went to investigate and ran dmesg  I could see lines like this: </p>\n\n<pre><code>[955.915050]  traps: foo_bar[123] general protection ip:7f5fcc2d4306 sp:7ffd9e5868b8 ...\n</code></pre>\n\n<p>Now the program has been fixed and I'm trying to write some analysis scripts across different systems to find similar messages and was hoping to induce a line in the dmesg log to get a baseline for what to look for and see if there's a difference between, say, a sigbus(10) and a sigill(4)</p>\n\n<p>I tried to do it via <code>kill -11</code> on the command line . No entry in dmesg</p>\n\n<p>I tried to do it via <code>signal(getpid(), 11)</code> in the code. No entry in dmesg</p>\n\n<p>I tried to do it via <code>signal 11</code> after attaching in gdb . No entry in dmesg</p>\n\n<p>I tried to do it via writing bad code and it worked for SEGV, but I can't figure out how to trigger a SIGBUS (for example)</p>\n\n<p>I'm guessing that there is more than one path for handling the signal depending on how it occurs and my attempts above just aren't doing it the right way. </p>\n\n<p>How can I trigger/send a signal to my program that'll get a line in dmesg? Is there some kernel or log configuration I can twiddle to get those lines? </p>\n\n<p>Update:</p>\n\n<p>\"<a href=\"https://stackoverflow.com/questions/35734759/builtin-trap-when-to-use-it?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\"> __builtin_trap: when to use it?</a> \" shows how to get a SIGILL but alas doesn't have a signal-agnostic solution)</p>\n"}, {"tags": ["c", "fortran", "fftw"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 2, "creation_date": 1528307495, "post_id": 50726456, "comment_id": 88461467, "body": "This is one of the best <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>s I&#39;ve ever seen on <a href=\"https://stackoverflow.com\">Stack Overflow</a> !"}, {"owner": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1528309094, "post_id": 50726456, "comment_id": 88462274, "body": "@francescalus I just did, but there were no changes in the power spectrum. That is to be expected, as the spectrum shouldn&#39;t depend on the phase of the wave."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1528311017, "post_id": 50726456, "comment_id": 88463223, "body": "Indeed.  My first guess was &quot;discretization error&quot;, but happy to see it isn&#39;t that simple."}, {"owner": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "edited": false, "score": 0, "creation_date": 1528311142, "post_id": 50726456, "comment_id": 88463275, "body": "I first suspected a precision error, but weirdly enough, C has a lower precision than Fortran doubles, yet gives the better results...."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 2, "creation_date": 1528312371, "post_id": 50726456, "comment_id": 88463855, "body": "How about the same <code>0</code>, <code>1</code> offset thing when computing/comparing <code>distances_k</code> (still guessing)?"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1528317452, "post_id": 50726456, "comment_id": 88466192, "body": "The usage of floats instead of doubles in C is strange. fftw_complex is double precision."}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "edited": false, "score": 0, "creation_date": 1528313443, "post_id": 50727954, "comment_id": 88464338, "body": "that&#39;s it! Although the results are still not exactly the same: here is the updated fortran image: <a href=\"https://imgur.com/jRtRxJH\" rel=\"nofollow noreferrer\">imgur.com/jRtRxJH</a> The first peak (green line) is a bit shifted to the left, ~10% off, while the C version seems way better. Although the general shape of the power spectrum seems very similar."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "edited": false, "score": 0, "creation_date": 1528315661, "post_id": 50727954, "comment_id": 88465397, "body": "The bins are to be corrected as well. <code>distances_k[0]</code> is 0, while <code>distances_k(1)</code> first item of the Fortran array, Could you try <code>distances_k(i) = (i-1)*kmax&#47;nsamples</code> ?"}, {"owner": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "edited": false, "score": 0, "creation_date": 1528320950, "post_id": 50727954, "comment_id": 88467645, "body": "unfortunately, no. Independently of how I define the bins, the loop just bins the values at a higher/lower <code>i</code>"}, {"owner": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "edited": false, "score": 0, "creation_date": 1528361563, "post_id": 50727954, "comment_id": 88481276, "body": "Short update: I tried comparing the created wave arrays directly to rule out that I&#39;m passing different initial conditions. (This includes your proposed update, changing floats to doubles in the C file and changing i -&gt; i-1 and j-&gt;j-1 when generating initial conditions in the fortran file.) I printed the arrays up to 18 decimals, and they are identical. I have no idea what to do now :)"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "edited": false, "score": 1, "creation_date": 1528401430, "post_id": 50727954, "comment_id": 88506056, "body": "Investigating the bins of the histograms, it seems that it is <code>distances_k[i]= 1.0001*i&#47;nsamples*kmax;</code> in C, while it is <code>distances_k(i) = i*1.001*kmax&#47;nsamples</code> in Fortran ( the 1.001 is in the previous line). I tried to change for <code>distances_k(i) = (i-1)*1.0001*kmax&#47;nsamples</code> and it seems to help! The artificial frequencies in the cas lambda=0.7 are induced by spectral leakage. Applying a window to attenuate the discontinuity of the periodized frame may improve the power spectrum."}], "tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 5, "last_activity_date": 1528312390, "creation_date": 1528312390, "answer_id": 50727954, "question_id": 50726456, "link": "https://stackoverflow.com/questions/50726456/fortran-2d-fftw-inconsistent-with-c-2d-fftw-results/50727954#50727954", "title": "fortran 2d-FFTW inconsistent with C 2d-FFTW results", "body": "<p>In the computation of the histogram, the first index of the loop corresponds to the average, i. e. \"zero frequency\".</p>\n\n<p>In C, when i=0, j=0, ix=0, iy=0 and d=0. That is correct. For the same item of the array in fortran, the index i=1, then ix=1 and d is not null anymore.</p>\n\n<p>That's for the null frequency, but the whole histogram is sligthly polluted due to the difference of indexing between C and Fortran. In particular, the modification might affect positive frequencies and negative frequencies in different ways, thus triggering the observed double peaks in the plots.</p>\n\n<p>Could you try to modify the computation of ix and iy in Fortran as:</p>\n\n<pre><code>  if (i-1&lt;Nx/2+1) then\n    ix = i-1\n  else\n    ix = -Nx+i-1\n  endif\n  if (j-1&lt;Ny/2+1) then\n    iy = j-1\n  else\n    iy = -Ny+j-1\n  endif\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 6168231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODcuz.png?s=128&g=1", "display_name": "mivkov", "link": "https://stackoverflow.com/users/6168231/mivkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 50727954, "answer_count": 1, "score": 6, "last_activity_date": 1528312390, "creation_date": 1528306867, "question_id": 50726456, "link": "https://stackoverflow.com/questions/50726456/fortran-2d-fftw-inconsistent-with-c-2d-fftw-results", "title": "fortran 2d-FFTW inconsistent with C 2d-FFTW results", "body": "<p>I am learning how to handle the FFTW package with fortran. To produce an easily verifiable example, I compute the power spectrum of a 2d plane, which I fill with two distinct superpositioned waves. This way, I know exactly where to expect peaks in the power spectrum.</p>\n\n<p>As the FFTW documentation is more extensive for C, I first implemented the algorithm in C, which gives me quite satisfactory results:\n<a href=\"https://i.stack.imgur.com/6ImFi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6ImFi.png\" alt=\"power spectrum obtained with C\"></a> \n\"lambda1\" and \"lambda2\" are the known, expected wavelengths. The blue line is the obtained power spectrum.</p>\n\n<p>Then I tried to do exactly the same with fortran, which gives weird results:\n<a href=\"https://i.stack.imgur.com/5uNi8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5uNi8.png\" alt=\"power spectrum obtained with fortran\"></a></p>\n\n<p>I have no idea where to look for possible errors. The codes execute without a hitch. Can anybody help?</p>\n\n<p>Here is the C code, compiled with: <code>gcc stackexchange.c -o a.out -I/home/myname/.local/include -lfftw3 -lm -g -Wall</code> (gcc 5.4.0)</p>\n\n<pre><code>#include &lt;fftw3.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    // parameters\n    int Nx = 200;\n    int Ny = 100;            \n    int nsamples = 200;\n    float pi = 3.1415926;\n    float physical_length_x = 20;\n    float physical_length_y = 10;\n    float lambda1 = 0.5;\n    float lambda2 = 0.7;\n    float dx = physical_length_x/Nx;\n    float dy = physical_length_y/Ny;\n    float dkx = 2*pi/physical_length_x;\n    float dky = 2*pi/physical_length_y;\n\n    // counters/iterators\n    int ind, i, j, ix, iy, ik;\n\n    // power spectra stuff\n    float *Pk, *distances_k, d, kmax;\n    float *Pk_field;\n\n\n    // FFTW vars and arrays\n    fftw_complex *in, *out;\n    fftw_plan my_plan;\n\n    // allocate arrays for input/output\n    in  = (fftw_complex *) fftw_malloc(sizeof(fftw_complex) * Nx * Ny);\n    out = (fftw_complex *) fftw_malloc(sizeof(fftw_complex) * Nx * Ny);\n\n    // Create Plan\n    int n[2]; n[0] = Nx; n[1] = Ny;\n    my_plan = fftw_plan_dft(2, n, in, out, FFTW_FORWARD, FFTW_ESTIMATE);\n\n    // fill up array with a wave\n    for (i=0; i&lt;Nx; i++){\n      for (j=0; j&lt;Ny; j++){\n        ind = i*Ny + j;\n        in[ind][0] = cos(2.0*pi/lambda1*i*dx) + sin(2.0*pi/lambda2*j*dy);\n      }\n    }\n\n    // execute fft\n    fftw_execute(my_plan); /* repeat as needed */\n\n    // Calculate power spectrum: P(kx, ky) = |F[delta(x,y)]|^2\n    Pk_field = malloc(sizeof(float)*Nx*Ny);\n    for (i=0; i&lt;Nx; i++){\n      for (j=0; j&lt;Ny; j++){\n        ind = i*Ny+j;\n        Pk_field[ind] = out[ind][0]*out[ind][0] + out[ind][1]*out[ind][1];\n      }\n    }\n\n    Pk = calloc(nsamples, sizeof(float));\n    distances_k = malloc(nsamples*sizeof(float));\n    kmax = sqrt(pow((Nx/2+1)*dkx, 2) + pow((Ny/2+1)*dky, 2));\n    for(i=0; i&lt;nsamples; i++){\n      distances_k[i]= 1.0001*i/nsamples*kmax; // add a little more to make sure kmax will fit\n    }\n\n    // histogrammize P(|k|)\n    for (i=0; i&lt;Nx; i++){\n\n      if (i&lt;Nx/2+1)\n        { ix = i; }\n      else\n        { ix = -Nx+i; }\n\n      for (j=0; j&lt;Ny; j++){\n\n        if (j&lt;Ny/2+1)\n          { iy = j; }\n        else\n          { iy = -Ny+j; }\n\n        ind = i*Ny + j;\n        d = sqrt(pow(ix*dkx,2)+pow(iy*dky,2));\n\n        for(ik=0; ik&lt;nsamples; ik++){\n          if (d&lt;=distances_k[ik] || ik==nsamples){\n            break;\n          }\n        }\n\n        Pk[ik] += Pk_field[ind];\n      }\n    }\n\n\n    //-----------------------------------\n    // write arrays to file.\n    // can plot them with plot_fftw.py\n    //-----------------------------------\n    FILE *filep;\n    filep = fopen(\"./fftw_output_2d_complex.txt\", \"w\");\n    for (i=0; i&lt;nsamples; i++){\n      fprintf(filep, \"%f\\t%f\\n\", distances_k[i], Pk[i]);\n    }\n    fclose(filep);\n\n    printf(\"Finished! Written results to ./fftw_output_2d_complex.txt\\n\");\n\n\n    //----------------------\n    // deallocate arrays\n    //----------------------\n    fftw_destroy_plan(my_plan);\n    fftw_free(in); fftw_free(out);\n\n    return 0;\n}\n</code></pre>\n\n<p>This is the Fortran code, compiled with: <code>gfortran stackexchange.f03 -o a.out -L/home/my_name/.local/lib/ -I/home/my_name/.local/include/ -lfftw3 -g -Wall</code></p>\n\n<pre><code>program use_fftw\n\n  use,intrinsic :: iso_c_binding\n  implicit none\n  include 'fftw3.f03'\n\n  integer, parameter     :: dp=kind(1.0d0)\n  integer, parameter     :: Nx = 200\n  integer, parameter     :: Ny = 100\n  integer, parameter     :: nsamples = 200\n  real(dp), parameter    :: pi = 3.1415926d0\n  real(dp), parameter    :: physical_length_x = 20.d0\n  real(dp), parameter    :: physical_length_y = 10.d0\n  real(dp), parameter    :: lambda1 = 0.5d0\n  real(dp), parameter    :: lambda2 = 0.7d0\n  real(dp), parameter    :: dx = physical_length_x/real(Nx,dp)\n  real(dp), parameter    :: dy = physical_length_y/real(Ny,dp)\n  real(dp), parameter    :: dkx = 2.d0 * pi / physical_length_x\n  real(dp), parameter    :: dky = 2.d0 * pi / physical_length_y\n\n  integer :: i, j, ix, iy, ik\n  real(dp):: kmax, d\n\n  complex(dp), allocatable, dimension(:,:)    :: arr_in, arr_out, Pk_field\n  real(dp), allocatable, dimension(:)         :: Pk, distances_k\n  integer*8                                   :: my_plan\n  integer                                     :: n(2) = (/Nx, Ny/)\n\n\n  allocate(arr_in( 1:Nx,1:Ny))\n  allocate(arr_out(1:Nx,1:Ny))\n\n  ! call dfftw_plan_dft_2d(my_plan, Nx, Ny, arr_in, arr_out, FFTW_FORWARD, FFTW_ESTIMATE) ! doesn't help either\n  call dfftw_plan_dft(my_plan, 2, n, arr_in, arr_out, FFTW_FORWARD, FFTW_ESTIMATE)\n\n  ! fill up wave\n  do i = 1, Nx\n    do j = 1, Ny\n      arr_in(i,j) =cmplx(cos(2.0*pi/lambda1*i*dx)+sin(2.0*pi/lambda2*j*dy) , 0.d0, kind=dp)\n    enddo\n  enddo\n\n  ! execute fft\n  call dfftw_execute_dft(my_plan, arr_in, arr_out)\n\n\n  allocate(Pk_field(1:Nx, 1:Ny))\n  allocate(distances_k(1:nsamples))\n  allocate(Pk(1:nsamples))\n  Pk=0\n  distances_k=0\n\n  ! Get bin distances\n  kmax = sqrt(((Nx/2+1)*dkx)**2+((Ny/2+1)*dky)**2)*1.001\n  do i = 1, nsamples\n    distances_k(i) = i*kmax/nsamples\n  enddo\n\n  ! Compute P(k) field, distances field\n  do i = 1, Nx\n    do j = 1, Ny\n      Pk_field(i,j) = arr_out(i,j)*conjg(arr_out(i,j))\n\n      if (i&lt;=Nx/2+1) then\n        ix = i\n      else\n        ix = -Nx+i\n      endif\n      if (j&lt;=Ny/2+1) then\n        iy = j\n      else\n        iy = -Ny+j\n      endif\n\n      d = sqrt((ix*dkx)**2+(iy*dky)**2)\n\n      do ik=1, nsamples\n        if (d&lt;=distances_k(ik) .or. ik==nsamples) exit\n      enddo\n\n      Pk(ik) = Pk(ik)+real(Pk_field(i,j))\n    enddo\n  enddo\n\n  ! write file\n  open(unit=666,file='./fftw_output_2d_complex.txt', form='formatted')\n  do i = 1, nsamples\n    write(666, '(2E14.5,x)') distances_k(i), Pk(i)\n  enddo\n  close(666)\n\n\n  deallocate(arr_in, arr_out, Pk, Pk_field, distances_k)\n  call dfftw_destroy_plan(my_plan)\n\n  write(*,*) \"Finished! Written results to fftw_output_2d_complex.txt\"\n\nend program use_fftw\n</code></pre>\n\n<p>For your convenience, this is my short python script that I use to plot the results:</p>\n\n<pre><code>#!/usr/bin/python3\n\n#====================================\n# Plots the results of the FFTW\n# example programs.\n#====================================\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom sys import argv\nfrom time import sleep\n\n\nerrormessage=\"\"\"\nI require an argument: Which output file to plot.\nUsage: ./plot_fftw.py &lt;case&gt;\noptions for case:\n    1   fftw_1d_complex.txt\n    2   fftw_2d_complex.txt\n    3   fftw_1d_real.txt\n    4   fftw_2d_real.txt\n\nPlease select a case: \"\"\"\n\n\n\n#----------------------\n# Hardcoded stuff\n#----------------------\n\nfile_dict={}\nfile_dict['1'] = ('fftw_output_1d_complex.txt', '1d complex fftw')\nfile_dict['2'] = ('fftw_output_2d_complex.txt', '2d complex fftw')\nfile_dict['3'] = ('fftw_output_1d_real.txt', '1d real fftw')\nfile_dict['4'] = ('fftw_output_2d_real.txt', '2d real fftw')\n\nlambda1=0.5\nlambda2=0.7\n\n\n\n\n#------------------------\n# Get case from cmdline\n#------------------------\n\ncase = ''\n\ndef enforce_integer():\n    global case\n    while True:\n        case = input(errormessage)\n        try:\n            int(case)\n            break\n        except ValueError:\n            print(\"\\n\\n!!! Error: Case must be an integer !!!\\n\\n\")\n            sleep(2)\n\n\nif len(argv) != 2:\n    enforce_integer()\nelse:\n    try:\n        int(argv[1])\n        case = argv[1]\n    except ValueError:\n        enforce_integer()\n\n\nfilename,title=file_dict[case]\n\n\n\n\n#-------------------------------\n# Read and plot data\n#-------------------------------\n\nk, Pk = np.loadtxt(filename, dtype=float, unpack=True)\n\nfig = plt.figure()\n\nax = fig.add_subplot(111)\nax.set_title(\"Power spectrum for \"+title)\nax.set_xlabel(\"k\")\nax.set_ylabel(\"P(k)\")\n#  ax.plot(k, Pk, label='power spectrum')\nax.semilogx(k[k&gt;0], Pk[k&gt;0], label='power spectrum') # ignore negative k\nax.plot([2*np.pi/lambda1]*2, [Pk.min()-1, Pk.max()+1], label='expected lambda1')\nax.plot([2*np.pi/lambda2]*2, [Pk.min()-1, Pk.max()+1], label='expected lambda2')\nax.legend()\n\nplt.show()\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1528306651, "post_id": 50726387, "comment_id": 88460989, "body": "WIth a picture of text you will not make people feel especially helpful."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1528306673, "post_id": 50726387, "comment_id": 88461001, "body": "An image may say more than a thousand words, but actual code, as text, says more than a thousand images."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1528306802, "post_id": 50726387, "comment_id": 88461065, "body": "I recommend writing an explanation of the luhn algorithm as you understand it. You will be surprised how much that helps to understand the code you are looking at."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 1, "creation_date": 1528308286, "post_id": 50726387, "comment_id": 88461859, "body": "Not only will explaining the algorithm (and its application here) to the best of your understanding help <i>you</i>, it will also help <i>us</i> figure out which parts you have right and just where you need help.  And <i>please</i> post the code as text, not picture."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1528316744, "post_id": 50726387, "comment_id": 88465875, "body": "Unconditionally returning from loop body doesn&#39;t look right..."}], "answers": [{"tags": [], "owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "is_accepted": false, "score": 0, "last_activity_date": 1528308827, "creation_date": 1528308827, "answer_id": 50727000, "question_id": 50726387, "link": "https://stackoverflow.com/questions/50726387/can-anyone-explain-the-luhn-algorithm-given-in-below-program/50727000#50727000", "title": "can anyone explain the luhn algorithm given in below program?", "body": "<p>After reading the Wikipedia article about the Luhn algorithm, the application int the program is clear.</p>\n\n<p>Every credit card number has a \"check digit\" as its last digit.  That digit makes it so that when the Luhn algorithm is applied, the result is an even multiple of 10.  If someone mistypes the card number, chances are good that it will not add up to a multiple of 10, catching the error before bothering to check the credit card with the CC company.</p>\n\n<p>That's what the program does: it checks that the credit card number \"looks\" legitimate.  Try it on your own CC, and then try it on the same CC number but with a mistake.</p>\n\n<p>The Luhn function you posted returns a true value if the result is evenly divisible by 10.</p>\n"}], "owner": {"reputation": 25, "user_id": 9904788, "user_type": "registered", "profile_image": "https://graph.facebook.com/966779693482362/picture?type=large", "display_name": "Cv Nikhil", "link": "https://stackoverflow.com/users/9904788/cv-nikhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528316608, "creation_date": 1528306596, "last_edit_date": 1528316608, "question_id": 50726387, "link": "https://stackoverflow.com/questions/50726387/can-anyone-explain-the-luhn-algorithm-given-in-below-program", "title": "can anyone explain the luhn algorithm given in below program?", "body": "<p><a href=\"https://i.stack.imgur.com/a3zPa.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>can anyone explain the program.\nthis program is given by our teacher he said it is about luhn algorithm i found out what is it but i am unable to understand to the program.</p>\n"}, {"tags": ["c", "pointers", "posix", "language-lawyer", "c11"], "comments": [{"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1528306288, "post_id": 50726231, "comment_id": 88460781, "body": "Yes, given that intptr_t is always guaranteed to be big enough to hold a pointer... Relevant link: <a href=\"https://stackoverflow.com/questions/6410294/what-is-intptr-t-is-it-a-type-for-integer-or-pointer\" title=\"what is intptr t is it a type for integer or pointer\">stackoverflow.com/questions/6410294/&hellip;</a>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1528306682, "post_id": 50726231, "comment_id": 88461007, "body": "@AlexG It is not enough to imply the integer equality. <code>==</code> is true for pointers if these point to the same object. Which can be interpreted differently, if we, say, have two different memory mappings of the same object."}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1528306738, "post_id": 50726231, "comment_id": 88461027, "body": "@EugeneSh. integer equality would be written as (*a) == (*b). OP asked for a == b thus address equality."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1528306787, "post_id": 50726231, "comment_id": 88461052, "body": "@AlexG I am using OP&#39;s terminology as is. The &quot;integer equality&quot; in this context is the equality of the pointer numerical values."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1528306817, "post_id": 50726231, "comment_id": 88461074, "body": "On an old Intel 80286 processor using a segmented memory model, this would not hold. For example, <code>(int *)0x00010001 == (int *)0x00000011</code> would be true."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528306937, "post_id": 50726231, "comment_id": 88461162, "body": "@LeeDanielCrocker Would it? Can you prove?"}, {"owner": {"reputation": 1689, "user_id": 6366251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bbb4d61b18d624070307e0b90b022474?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Jacob", "link": "https://stackoverflow.com/users/6366251/manuel-jacob"}, "reply_to_user": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 1, "creation_date": 1528306980, "post_id": 50726231, "comment_id": 88461184, "body": "@AlexG, EugeneSh. Yes, the &quot;integer equality&quot; terminology in the heading is a bit confusing, but it should be clear from the post that I mean the equality of the pointers converted to an integer."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528306989, "post_id": 50726231, "comment_id": 88461188, "body": "Prove? No. Remember, yes. I even wrote code to &quot;canonicalize&quot; pointers to avoid such problems."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528307045, "post_id": 50726231, "comment_id": 88461212, "body": "@LeeDanielCrocker Hm. That&#39;s weird. Even given my first comment I would not think it could be in reality..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528307708, "post_id": 50726231, "comment_id": 88461581, "body": "@LeeDanielCrocker Hey, wait. It&#39;s the opposite of what the OP is asking. Would <code>(intptr_t)(int *)0x00010001 == (intptr_t)(int *)0x00000011</code> ?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528307806, "post_id": 50726231, "comment_id": 88461634, "body": "@LeeDanielCrocker Me too! I wrote code to canonicalize them with the smallest possible offset, and to canonicalize with the largest possible offset, depending on in which way I wanted increment room in the resulting pointer."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528307918, "post_id": 50726231, "comment_id": 88461684, "body": "@LeeDanielCrocker But, ... was it true (e.g. in Microsoft&#39;s C) that differently configured <code>far</code> pointers referencing the same memory location <b>compared true</b> without being canonicalized first? That I don&#39;t recall.  If those pointers didn&#39;t compare true before being converted to integers, then they don&#39;t apply to this question. Maybe <i>huge</i> ones would have compared true but not <i>far</i> ones?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1528309268, "post_id": 50726231, "comment_id": 88462355, "body": "@Kaz The compiler would normally canonicalise pointers before comparison, but not before some other operations (like cast to an integer)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528311465, "post_id": 50726231, "comment_id": 88463425, "body": "Note that <code>(u)intptr_t</code> are <i>optional</i> types - not guaranteed to exist.  So integer equality can not well be access on all machines.  An alternative is <code>memcmp()</code> - yet that may be problematic due to padding."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1528313218, "post_id": 50726231, "comment_id": 88464228, "body": "Back then, there was no <code>uintptr_t</code>; that&#39;s a more recent thing. We just had <code>int</code> and <code>long</code>. I do not remember exactly how my compiler treated casts of far pointers to long. Memory fades with age..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528318425, "post_id": 50726231, "comment_id": 88466620, "body": "@LeeDanielCrocker As I recall, <code>FAR char *</code> to <code>long</code> was a bit copy.  <code>1234:5678 ==&gt; 0x12345678</code>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1528320183, "post_id": 50726231, "comment_id": 88467374, "body": "@n.m.: Converting pointers to canonical form is very expensive on the 8088, and the only time I would see it as useful is when converting a <code>far*</code> to a <code>huge*</code>.  Any <code>huge*</code> should already be in canonical form, and any two <code>far*</code> that identify portions of the same object should have matching segments.  I can&#39;t see any good reason code shouldn&#39;t use pointers where one of the above conditions wouldn&#39;t hold."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528501852, "post_id": 50726231, "comment_id": 88546781, "body": "@chux Right! Which was the basis for writing the canonicalization code."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1528311851, "post_id": 50726756, "comment_id": 88463620, "body": "Detail about &quot;the rule that converting an intptr_t back to a pointer type produces the original pointer still holds&quot; -  Hmmm, is not the C spec  that the round trip pointer - integer - pointer only produces a &quot;result will compare equal to the original pointer&quot;, not necessarily the same original bit pattern even in this   example?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1528314863, "post_id": 50726756, "comment_id": 88465005, "body": "With regard to your second example, compilers for the Intel 8086 generally had two kinds of 32-bit pointers which represented physical address <code>seg*16 + offset</code>, and each kind had a constraint: all <code>large</code> pointers identifying portions of the same object had to specify the same segment (individual objects were limited to 65,520 bytes), and all <code>huge</code> pointers had to have an offset in the range 0-15.  Still, your example for a system with pointers that are narrower than <code>uintptr_t</code> matches what I would have said if you hadn&#39;t beaten me to it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1528315104, "post_id": 50726756, "comment_id": 88465143, "body": "@chux: For the second example, if a compiler would regard two pointers with different bit patterns as equal, and if conversion to/from integer type kept the bit patterns, then converting two equal pointers with different bit patterns would yield different integers, but converting those different integers back to pointers would yield pointers that--like the originals--had different bit patterns but compare equal."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1528316992, "post_id": 50726756, "comment_id": 88465986, "body": "@supercat <a href=\"https://stackoverflow.com/questions/50726231/does-pointer-equality-imply-integer-equality/50726756?noredirect=1#comment88465143_50726756\">True</a>, but what if &quot;conversion to/from integer type kept the bit patterns&quot; way only &quot;to integer&quot; and the from integer back to pointer conversion lacked bit same bit-pattern (as unicorn-ish as that sounds), the resultant pointer would still compare equal, yet not same as original.  On both to/from conversions, the <i>same bit pattern</i> or not attribute is independently implementation dependent.  This answers last sentence seems to imply otherwise."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528317768, "post_id": 50726756, "comment_id": 88466325, "body": "@chux: Yes, a counterexample could be that the round-trip produces a pointer with a different bit representation but that compares equal to the original. (That does suggest the implementation is normalizing the oointer when converting to integer, which is likely to cause the integers to compare equal. It is legal for an implementation to behave otherwise, but practical implementations are less likely to be weird about it.)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1528318750, "post_id": 50726756, "comment_id": 88466759, "body": "@EricPostpischil: Am I correct in thinking that nothing in the Standard would forbid an implementation where converting any integer value that isn&#39;t a null pointer constant to a pointer yielded bit pattern 0x00000001, if the pointer equality operator treated such pointers as equal to all other pointers?  Such behavior would obviously be obtuse and useless, but the Standard makes no effort to forbid obtuse and useless behaviors since competent people writing quality compilers should have the common sense not to behave obtusely."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1528319497, "post_id": 50726756, "comment_id": 88467089, "body": "@supercat: <code>==</code> applied to pointers cannot yield true for all non-NULL operands. Pointers to different objects must compare as different (except that a pointer to one past the end of an array may compare equal to a pointer to the object that happens to immediately follow it in memory)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1528320295, "post_id": 50726756, "comment_id": 88467423, "body": "@EricPostpischil: Does the Standard say that a round-trip conversion of a pointer to an object yields a pointer to an object, or merely that round-trip conversion of a <code>void*</code> yields a <code>void*</code> that <i>compares equal</i> to the original?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1528323914, "post_id": 50726756, "comment_id": 88468579, "body": "@supercat: 6.3.2 1 sound round trips from a pointer to an object type to a pointer to void compares equal. 7.20.1.4 1 says round trips from pointers to void to <code>intptr_t</code> compare equal. One can compound these (which, strictly, should be done by <code>(intptr_t) (void *) foo</code> rather than just <code>(intptr_t) foo</code>) so that one round trip nests inside the other. The 6.5.9 6 tells us that pointers that compare equal do in fact point to the same object, except for the one-beyond-last-element-coincides-with-next-object exception. That loophole may be a defect in the standard, but the intent is clear."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1528324887, "post_id": 50726756, "comment_id": 88468880, "body": "@EricPostpischil: The Standard may intend that pointer equality be an equivalence relation, but I don&#39;t think compilers always treat it as one.  You may be right that the Standard might not allow compilers to be quite as obtuse as I was suggesting, but the fact remains that it relies upon compiler writers&#39; judgment as to what if anything code may <i>do</i> with a pointers produced by an integer-to-pointer cast other than compare them.  Such a cast could either yield a pointer to an object or a pointer just past the previous object, and there would be no way for code to distinguish those cases..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1528325145, "post_id": 50726756, "comment_id": 88468973, "body": "...using actions whose behavior would be defined in both of them."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1528441223, "post_id": 50726756, "comment_id": 88517919, "body": "&quot;Those bits might be left over from whatever was lying around previously.&quot; This would imply that C somehow allowed partial initialization/assignment of variables. A less unlikely case would be something like the compiler using one byte of the result as a padding byte to ensure alignment. Still, I don&#39;t think any real-world system behaves like that. This is all implementation-defined mostly because the standard doesn&#39;t specify the binary format of pointers. In a real world system, it would only make sense to compare two <code>intptr_t</code> if you do know the implementation-defined format."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 10, "last_activity_date": 1528323613, "last_edit_date": 1528323613, "creation_date": 1528307935, "answer_id": 50726756, "question_id": 50726231, "link": "https://stackoverflow.com/questions/50726231/does-pointer-equality-imply-integer-equality/50726756#50726756", "title": "Does pointer equality imply integer equality?", "body": "<p>This is not guaranteed by the C standard. (This answer does not address whether POSIX or other standards say about <code>intptr_t</code>.) What the C standard (2011, draft N1570) says about <code>intptr_t</code> is:</p>\n\n<blockquote>\n  <p>7.20.1.4 1 The following type designates a signed integer type with the property that any valid pointer to void can be converted to this type, then converted back to pointer to void, and the result will compare equal to the original pointer: <strong>intptr_t</strong></p>\n</blockquote>\n\n<p>As a theoretical proof, one counterexample is a system that has 24-bit addresses, where the high eight bits are unused, but the available integer types are 8-bit, 16-bit, and 32-bit. In this case, the C implementation could make <code>intptr_t</code> a 32-bit integer, and it could convert a pointer to <code>intptr_t</code> by copying the 24-bit address into the 32-bit integer and neglecting the high eight bits. Those bits might be left over from whatever was lying around previously. When the <code>intptr_t</code> value is converted back to a pointer, the compiler discards the high eight bits, which results in the original address. In this system, when <code>a == b</code> is evaluated for pointers <code>a</code> and <code>b</code>, the compiler implements this by comparing only the 24 bits of the address. Thus, if <code>a</code> and <code>b</code> point to the same object <code>a == b</code> will be true, but <code>(intptr_t) a == (intptr_t) b</code> may evaluate to false because of the neglected high bits. (Note that, strictly, <code>a</code> and <code>b</code> should be pointers to <code>void</code> or should be converted to pointers to <code>void</code> before being converted to <code>intptr_t</code>.)</p>\n\n<p>Another example would be a system which uses some base and offset addressing. In this system, a pointer might consist of 16 bits that specify some base address and 16 bits that specify an offset. The base might be in multiples of 64 bytes, so the actual address represented by  <em>base</em> and <em>offset</em> is <em>base</em>\u202264 + <em>offset</em>. In this system, if pointer <code>a</code> has base 2 and offset 10, it represents the same address as pointer <code>b</code> with base 1 and offset 74. When comparing pointers, the compiler would evaluate <em>base</em>\u202264 + <em>offset</em> for each pointer and compare the results, so <code>a == b</code> evaluates to true. However, when converting to <code>intptr_t</code>, the compiler might simply copy the bits, thus producing 131,082 (2\u202265536 + 10) for <code>(intptr_t) a</code> and 65,610 (1\u202265536 + 74) for <code>(intptr_t) b</code>. Then <code>(intptr_t) a == (intptr_t) b</code> evaluates to false. But the rule that converting an <code>intptr_t</code> back to a pointer type produces the original pointer still holds, as the compiler will simply copy the bits again.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528319673, "post_id": 50729053, "comment_id": 88467176, "body": "If <code>u == (uintptr_t) &amp;someObject</code>, then <code>* (typeOfObject *) u</code> necessarily compares equal to <code>&amp;someObject</code> and hence may be used to access <code>someObject</code> because of the rule about round-trip conversions. The result of <code>(uintptr_t) &amp;someObject</code> is a value, not an lvalue or object. If <code>u</code> equals it, then the value of <code>u</code> is the same value\u2014a value is characterized only by itself; it is not distinguished by the fact that it is the value of some object. Hence <code>(typeOfObject *) u</code> is the same as <code>(typeOfObject *) (uintptr_t) &amp;SomeObject</code>, and the round-trip rule says that is equal to <code>&amp;SomeObject</code>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528321331, "post_id": 50729053, "comment_id": 88467781, "body": "@EricPostpischil: The fact that two pointers compare equal does not imply that both may be used to access the same object.  It&#39;s certainly possible for a pointer-integer-pointer round-trip conversion to yield something that isn&#39;t a pointer to an object (e.g. if the original pointed just past the last object in memory).  It would certainly make sense that if the original was a pointer to an object, the result of the conversion should be likewise, but I see nothing in the Standard that actually <i>says</i> that."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528321724, "post_id": 50729053, "comment_id": 88467925, "body": "@EricPostpischil: Given something like <code>extern int x,y; void foo(void) { x=1; ((int volatile*)(uintptr_t)&amp;y)[1] = 2; return x;}</code>; should a compiler be required to allow for the possibility of the second statement setting <code>x</code> to 2 [if e.g. the caller had checked that <code>(uintptr_t)(1+&amp;y)==(uintptr_t)&amp;x</code>]?  Personally, I doubt that integer-to-pointer conversions are sufficiently common that treating the results of such conversions as Pointers of Officially Unknowable Provenance, at least when <code>volatile</code>, would be a significant burden, but I don&#39;t think the Standard requires such treatment."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528322940, "post_id": 50729053, "comment_id": 88468317, "body": "@EricPostpischil: Slight code correction: <code>int test(void){ x=1; *(int volatile*)(uintptr_t)(1+&amp;y) = 2; return x; }</code>.  If an implementation specifies a means of pointer-to-integer conversions that will always yield the same value for any given pointer, a programmer could ensure that the function would only get called if it should store 2 to <code>*(int volatile*)(uintptr_t)x</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528323008, "post_id": 50729053, "comment_id": 88468332, "body": "<code>((int volatile*)(uintptr_t)&amp;y)[1]</code> is prohibited by the last sentence of 6.5.6 8, since <code>((int volatile*)(uintptr_t)&amp;y)</code> is a pointer to <code>y</code> (or, worse, is a pointer to one beyond the last element of the array preceding <code>y</code>), so the expression evaluates to <code>y[1]</code>, which is <code>*(y+1)</code>, which is the prohibited evaluation."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528323447, "post_id": 50729053, "comment_id": 88468454, "body": "It may be that <code>*(int volatile *)(uintptr_t)(1+&amp;y) = 2</code> is a defect in the standard. Certainly the intent of 6.5.6 8 is that you should not do this. Aside from the last-element-coincides-with-next-object exception, 6.5.9 6 tells us that two pointers to object types that compare equal are pointers to the same object (it is an \u201cif and only if\u201d, so not only does it tells us that pointers to the same object are equal, but pointers that are equal are pointers to the same object)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528324282, "post_id": 50729053, "comment_id": 88468693, "body": "@EricPostpischil: My point is that the Standard doesn&#39;t specify any cases where an integer-to-pointer conversion would be guaranteed to yield a pointer to an object.  The language of the Standard is a bit clumsy in its definitions of &quot;object&quot; and addresses.  For example, given <code>struct s1 {int x1[2][1],y1;}; struct s2 { int x2[1][2],y2;}; union { struct s1 v1; struct s2 v2;} u;</code>, are <code>u.v1.y1</code> and <code>u.v1.y2</code> &quot;the same object&quot;?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528326273, "post_id": 50729053, "comment_id": 88469287, "body": "Yes, they are the same object (assuming they landed in the same place). Per 3.15, an object is a region of storage. I disagree; the round-trip requirement specifies that a <code>intptr_t</code> that resulted from a conversion from a pointer yields a pointer that is equal to the original, and this is necessarily a pointer to the same object (aside from issues with one-beyond-the-last-element)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1528382984, "post_id": 50729053, "comment_id": 88496107, "body": "@EricPostpischil: I meant <code>u.v2.y2</code>, since <code>u.v1</code> doesn&#39;t have a <code>y2</code> member.  Would they be the same object if e.g. one structure had used type <code>unsigned</code> in place of <code>signed</code>?  Also, if they&#39;re the same object, does that mean that after <code>struct s1 *p1 = &amp;u.v1; struct s2 *p2 = &amp;u.v2;</code>, both <code>p1-&gt;y1</code> and <code>p2-&gt;y2</code> would be the same object?  Both gcc and clang would assume they can&#39;t be."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1528316893, "creation_date": 1528316893, "answer_id": 50729053, "question_id": 50726231, "link": "https://stackoverflow.com/questions/50726231/does-pointer-equality-imply-integer-equality/50729053#50729053", "title": "Does pointer equality imply integer equality?", "body": "<p>Rather than trying to specify all the guarantees that should be upheld by quality implementations on commonplace platforms, the Standard instead seeks to avoid mandating any guarantees that might be expensive or problematic on any conceivable platform unless they are so valuable as to justify any possible cost.  The authors expected (reasonably at the time) that quality compilers for platforms which could offer stronger guarantees at essentially no cost would do so, and thus saw need to explicitly mandate things compilers were going to do anyway.</p>\n\n<p>If one looks at what the actual guarantee offered by the Standard, it's absurdly wimpy.  It specifies that converting a void* to a uintptr_t and then back to a void* will yield a pointer that may be compared to the original, and that the comparison will report that the two pointers are equal.  It says nothing about what will happen if code does anything else with round-trip-converted pointer.  A conforming implementation could perform integer-to-pointer conversions in a way that ignores the integer value (unless it is a Null Pointer Constant) and yields some arbitrary bit pattern that doesn't match any valid or null pointer, and then have its pointer-equality operators report \"equal\" whenever either operand holds that special bit pattern.  No quality implementation should behave in such a fashion of course, but nothing in the Standard would forbid it.</p>\n\n<p>In the absence of optimizations, it would be reasonable to assume that on any platform which uses \"linear\" pointers that are the same size as <code>uintptr_t</code>, quality compilers will process conversion of pointers to <code>uintptr_t</code> such that conversion of equal pointers will yield the same numeric value, and that given <code>uintptr_t u;</code>, if <code>u==(uintptr)&amp;someObject</code>, then <code>*(typeOfObject*)u</code> may be used to access <code>someObject</code>, at least between the time the address of <code>someObject</code> was converted to a <code>uintptr_t</code> and the next time <code>someObject</code> is accessed via other means, without regard for how <code>u</code> came to hold its value.  Unfortunately, some compilers are too primitive to recognize that conversion of an address to a <code>uintptr_t</code> would suggest that a pointer formed from a <code>uintptr_t</code> might be capable of identifying the same object.</p>\n"}], "owner": {"reputation": 1689, "user_id": 6366251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bbb4d61b18d624070307e0b90b022474?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Jacob", "link": "https://stackoverflow.com/users/6366251/manuel-jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1528323613, "creation_date": 1528306094, "last_edit_date": 1528307082, "question_id": 50726231, "link": "https://stackoverflow.com/questions/50726231/does-pointer-equality-imply-integer-equality", "title": "Does pointer equality imply integer equality?", "body": "<p>For <code>int *a, int *b</code>, does <code>a == b</code> imply <code>(intptr_t)a == (intptr_t)b</code>?  I know that it's true for example on a modern X86 CPU, but does the C standard or POSIX or any other standard give a guarantee for this?</p>\n"}, {"tags": ["c++", "c", "function-prototypes"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1528306054, "post_id": 50726174, "comment_id": 88460656, "body": "When the function is only to be used internally and is not part of the functionality exported/exposed by your header file."}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 1, "creation_date": 1528306093, "post_id": 50726174, "comment_id": 88460670, "body": "If your function is only used inside a single file, then it is perfectly valid to put it inside the cpp file itself. If your function is meant to be reused it&#39;s better to put it in header..."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1528306130, "post_id": 50726174, "comment_id": 88460699, "body": "Declare the internally used functions as static. Put the interface function declarations to header file."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1528306141, "post_id": 50726174, "comment_id": 88460707, "body": "Primarily opinion-based."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1528306157, "post_id": 50726174, "comment_id": 88460713, "body": "<i>Only</i> if the function is both defined and exclusively used in that file (in which case it might as well be explicitly declared <code>static</code>).  But an <code>extern</code> prototype in a <code>.c</code> file, for a function defined elsewhere, pretty much demolishes the whole point of prototypes.  (You weren&#39;t asking about <code>extern</code> prototypes, but I wanted to make this point.  See also <a href=\"https://stackoverflow.com/questions/50401100/compiler-warning-for-function-defined-without-prototype-in-scope\">this question</a>.)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528309411, "post_id": 50726174, "comment_id": 88462422, "body": "Opinion-based. I avoid prototypes for unexposed functions, preferring to implement the functions in an order where it is not necessary. I&#39;m lazy. I can&#39;t think of any good enough reasons to have to make two changes when I&#39;m forced to update the signature of a function that is only used internally."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528314000, "post_id": 50726174, "comment_id": 88464595, "body": "@user4581301 Yeah, me too.  I bet I&#39;m even lazier than you."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1528306242, "creation_date": 1528306242, "answer_id": 50726276, "question_id": 50726174, "link": "https://stackoverflow.com/questions/50726174/when-to-not-put-c-function-prototypes-in-header-files/50726276#50726276", "title": "When to not put C function prototypes in header files", "body": "<blockquote>\n  <p>Is there a reason why it might not be good practice to place C/C++ function prototypes in header files but instead place them at the top of the main .c/.cpp file?</p>\n</blockquote>\n\n<p>The only time that makes sense to me is when the functions are implementation details of other functions. Of course, in that case, I prefer to define them in the file scope using file scoped functions using <code>static</code> qualifier or putting them in a namespace specific to the .cpp file.</p>\n\n<p>For all other functions, I find it hard to justify not putting the declaration in a header file and <code>#include</code>ing the header file in the files that use the functions and in the file that defines the functions.</p>\n"}], "owner": {"reputation": 31, "user_id": 9904700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u2sGwlksfvY/AAAAAAAAAAI/AAAAAAAABBA/lr3zdeZWNOQ/photo.jpg?sz=128", "display_name": "James Downer", "link": "https://stackoverflow.com/users/9904700/james-downer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528306242, "creation_date": 1528305881, "question_id": 50726174, "link": "https://stackoverflow.com/questions/50726174/when-to-not-put-c-function-prototypes-in-header-files", "title": "When to not put C function prototypes in header files", "body": "<p>Is there a reason why it might not be good practice to place C/C++ function prototypes in header files but instead place them at the top of the main .c/.cpp file?</p>\n\n<p>For example, I could write a dothis.c file:</p>\n\n<pre><code>#include \"funcs.h\"\n\nint main(int argc, char ** argv) {\n   // some code\n   int result = doThis();\n   // more code\n\n   return 0;\n}\n\nint doThis(void) {\n   // code and return value\n}\n</code></pre>\n\n<p>And in my funcs.h file, I'd write:</p>\n\n<pre><code>#ifndef FUNCS_H\n#define FUNCS_H\n\nint doThis(void);\n\n// more function prototypes\n\n#endif // FUNCS_H\n</code></pre>\n\n<p>Is there any reason why it might be better to place the prototype(s) (assuming there are many) at the top of the .c/.cpp file instead? For example:</p>\n\n<pre><code>#include \"funcs.h\"\n\nint doThis(void);\n\n// more function prototypes\n\nint main(int argc, char ** argv) {\n   // some code\n   int result = doThis();\n   // more code\n\n   return 0;\n}\n\nint doThis(void) {\n   // code and return value\n}\n</code></pre>\n\n<p>In the first case, I feel it would be helpful to have many function prototypes in a separate header file plus documentation to logically separate declaration from implementation and to make it easier to concisely see what the main file is doing.</p>\n"}, {"tags": ["c", "graph", "colors", "backtracking"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1528306331, "post_id": 50725970, "comment_id": 88460806, "body": "What is your data structure for representing the <code>graph</code>?"}, {"owner": {"reputation": 1, "user_id": 9904631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a535375008db01e84efa5d3e7665b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "manJan", "link": "https://stackoverflow.com/users/9904631/manjan"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1528307074, "post_id": 50725970, "comment_id": 88461228, "body": "I don&#39;t have a proper data structure I can use array, matrix, ecc.. whatever I want. I&#39;ve to show on stdout the possible solutions (console project)"}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1528316525, "post_id": 50725970, "comment_id": 88465783, "body": "You can present <code>graph</code> as a <code>matrix</code> of the connections between nodes. Read <a href=\"https://www.geeksforgeeks.org/graph-and-its-representations/\" rel=\"nofollow noreferrer\">this</a> for more information."}], "answers": [{"tags": [], "owner": {"reputation": 702, "user_id": 8231798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60a5a335a4e08c198b252d409b8ac671?s=128&d=identicon&r=PG&f=1", "display_name": "Elysian Storm", "link": "https://stackoverflow.com/users/8231798/elysian-storm"}, "is_accepted": false, "score": 0, "last_activity_date": 1528378570, "creation_date": 1528378570, "answer_id": 50742688, "question_id": 50725970, "link": "https://stackoverflow.com/questions/50725970/backtracking-exercise-graph-color-in-c/50742688#50742688", "title": "Backtracking exercise graph color in C", "body": "<p>One approach to solve this problem is using two matrices:<br/>\n1.Matrix for adjacency<br/>\n2.Matrix for coloring</p>\n\n<p><strong>Approach:</strong></p>\n\n<ol>\n<li><p>Iterate through all the blocks(areas) with a <code>nested loop</code> and take input 1 if two areas are adjacent else take input 0. Store these values in your matrix corresponding to the areas<br/>\ni.e:</p>\n\n<p><code>if(input==1)\nadjacency[i][j]==adjacency[j][i]==1\nelse\nadjacency[i][j]==adjacency[j][i]==0</code></p>\n\n<p>This way you will have a matrix of elements showing the adjacency of each of them.</p></li>\n<li><p>Then create an empty matrix of same size for coloring. Iterate through this matrix diagonally (i.e. <code>color[i][i]</code>), assigning a color (in order) to the areas and then checking the adjacency matrix for adjacent areas.<br/> \nIf the areas are adjacent (i.e. <code>adjacency[i][j]==1</code>), then check the adjacent area's color (i.e. <code>color[j][j]</code>). If its same (i.e. <code>color[i][i]==color[j][j]</code>), then change your color to the next color and repeat the process again, till all of the areas are assigned a color.</p></li>\n</ol>\n\n<p><strong>NOTE:</strong> Neither the only way to solve it nor can I say it's the most effective way, you can work out a better logic that will have lower time and space complexities.</p>\n"}], "owner": {"reputation": 1, "user_id": 9904631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a535375008db01e84efa5d3e7665b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "manJan", "link": "https://stackoverflow.com/users/9904631/manjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528378570, "creation_date": 1528305070, "last_edit_date": 1528308611, "question_id": 50725970, "link": "https://stackoverflow.com/questions/50725970/backtracking-exercise-graph-color-in-c", "title": "Backtracking exercise graph color in C", "body": "<p>Can someone explain me the approach that I've to use to solve this type of exercise?</p>\n\n<p>I've a map with 5 areas, and I've 4 colours: Green, Red, Yellow and Blue.</p>\n\n<p><img src=\"https://i.stack.imgur.com/0SO8q.png\" alt=\"Image of the 5 areas\"></p>\n\n<p>I've to colour the areas with this 4 colours (adjacent areas may NOT have same colour)</p>\n\n<p>I've to show on stdout all the possible solutions </p>\n\n<p><img src=\"https://i.stack.imgur.com/Bexwx.png\" alt=\"Image of possible solution\"></p>\n\n<p>I had thought about using 2 arrays: 1 for the areas, and 1 for the colours, and try all the possible permutations. But how can I set the adjacent constraint in the array? Thanks.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 1, "creation_date": 1528304855, "post_id": 50725877, "comment_id": 88460014, "body": "<code>c</code> is not a 2d array. To pass a 2d array to the function, use at least <code>int **c</code>. Then <code>c[0]</code> points to the first subarray."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1528304859, "post_id": 50725877, "comment_id": 88460016, "body": "Looks like you are doing two dereferences on a one-star pointer.  I would guess you are treating it like an array of arrays rather than a 2D array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1528304919, "post_id": 50725877, "comment_id": 88460043, "body": "There is no 2D array here.  Post code that calls <code>calci()</code>, an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is even better."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1528304982, "post_id": 50725877, "comment_id": 88460084, "body": "What is being passed in  as arg <code>c</code>?"}, {"owner": {"reputation": 79, "user_id": 7802216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24eabe51db2b139baf277942fe34c040?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram Chowdary", "link": "https://stackoverflow.com/users/7802216/sriram-chowdary"}, "edited": false, "score": 0, "creation_date": 1528305939, "post_id": 50725877, "comment_id": 88460588, "body": "I have added the calling function. Please check"}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1528306281, "post_id": 50725877, "comment_id": 88460777, "body": "Add the  <code>max()</code> definition also. And what <code>calci()</code> supposed to return to <code>main()</code> ?"}, {"owner": {"reputation": 79, "user_id": 7802216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24eabe51db2b139baf277942fe34c040?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram Chowdary", "link": "https://stackoverflow.com/users/7802216/sriram-chowdary"}, "edited": false, "score": 0, "creation_date": 1528306791, "post_id": 50725877, "comment_id": 88461055, "body": "Added max() and calci()"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1528306890, "post_id": 50725877, "comment_id": 88461132, "body": "You changed the function signature of <code>calci</code>.  You should not do this as it invalidates previous comments."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1528306998, "post_id": 50725877, "comment_id": 88461194, "body": "but still <code>int arr[3][y+3]</code> doesn&#39;t match <code>int **c</code>"}, {"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 2, "creation_date": 1528307099, "post_id": 50725877, "comment_id": 88461237, "body": "Please indent!!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1528316029, "post_id": 50725877, "comment_id": 88465570, "body": "^^^^ this is sensibly unreadable."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1528316160, "post_id": 50725877, "comment_id": 88465625, "body": "The single-letter var names do not help with readabilty:("}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528318079, "post_id": 50725877, "comment_id": 88466467, "body": "Why do beginners think it is cool to write <code>*(*(c+2)+k)</code> instead of <code>c[2][k]</code>, which is simpler, shorter, and harder to get wrong."}], "answers": [{"tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": true, "score": 0, "last_activity_date": 1528307322, "creation_date": 1528307322, "answer_id": 50726586, "question_id": 50725877, "link": "https://stackoverflow.com/questions/50725877/how-to-assign-value-to-a-2d-array-from-reference-in-c/50726586#50726586", "title": "How to assign value to a 2d array from reference in c?", "body": "<p>You are performing two dereferences on a one-star pointer.  What you are attempting to do is treat it as an array of arrays, but what you are passing in is a 2D array that decays to a pointer.  A 2D array is a single contiguous block of memory that can be address with arithmetic to calculate the cell you want.  For an N x M matrix, if you want element [w][x], you can do arr[N*w + x].  Or with a modern C standard, you can adjust your function signature to be like this and access the array as normal:</p>\n\n<pre><code>int calci(int i, int j, int n, c[i][j])\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 7802216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24eabe51db2b139baf277942fe34c040?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram Chowdary", "link": "https://stackoverflow.com/users/7802216/sriram-chowdary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1528318099, "accepted_answer_id": 50726586, "answer_count": 1, "score": -1, "last_activity_date": 1528307322, "creation_date": 1528304755, "last_edit_date": 1528306974, "question_id": 50725877, "link": "https://stackoverflow.com/questions/50725877/how-to-assign-value-to-a-2d-array-from-reference-in-c", "closed_reason": "Needs details or clarity", "title": "How to assign value to a 2d array from reference in c?", "body": "<pre><code>int max(int x,int y){\nif(x&gt;=y)\n return x;\nelse\n return y;\n             }\nint calci(int i,int j,int n,int *c){\nint k,y,m;\nk=j;\ny = (n)/((2^i)*(2^j));\nfor(y=i;y&gt;=0;y--){\nfor(k=j;k&gt;=0;k--){\n *(*(c+2)+k) = max(y,calci(i+1,k,n,c)+calci(i+2,k,n,c)+calci(i,k+1,n,c));   \n    }\n for(y=0;y&lt;=j+2;y++){\n *(*(c+1)+y)=*(*(c+2)+y);\n*(*(c+0)+y)=*(*(c+1)+y);\n}\n}\n return *(*(c+2)+0);\n }\n\n\nint main(){\nint i,j,n,z,x,y;\nprintf(\"Enter the amount\\n\");\nscanf(\"%d\",&amp;n);\nx=log(n)/log(2);\ny=log(n)/log(3);\nint arr[3][y+3];\nfor(i=0;i&lt;=2;i++)\nfor(j=0;j&lt;=y;j++)\narr[i][j+2]=0;\nz = calci(x,y,n,arr);\nprintf(\"\\n%d\",z);\n}\n</code></pre>\n\n<p>Here I get error as invalid type argument of unary '*' (have 'int'). I am actually trying to assign the value returned by max function as array element of row 2 and column k.</p>\n"}, {"tags": ["c", "bash", "zenity"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1528304168, "post_id": 50725719, "comment_id": 88459636, "body": "There&#39;s probably a couple of duplicates of this question. TL;DR: You&#39;re suffering from buffering. <code>fflush(stdout);</code> after each <code>printf</code>."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528304441, "post_id": 50725719, "comment_id": 88459791, "body": "@melpomene Does the new line character not force a flush?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1528304489, "post_id": 50725719, "comment_id": 88459815, "body": "@ChristianGibbons, it does (by default) when output is to a TTY, not when it&#39;s to a pipe."}, {"owner": {"reputation": 106, "user_id": 1793754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29be3a8349325c546c2d3a348447750c?s=128&d=identicon&r=PG", "display_name": "WitcherGeralt", "link": "https://stackoverflow.com/users/1793754/witchergeralt"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528306821, "post_id": 50725719, "comment_id": 88461077, "body": "@melpomene, thank you."}, {"owner": {"reputation": 106, "user_id": 1793754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29be3a8349325c546c2d3a348447750c?s=128&d=identicon&r=PG", "display_name": "WitcherGeralt", "link": "https://stackoverflow.com/users/1793754/witchergeralt"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1528306875, "post_id": 50725719, "comment_id": 88461120, "body": "@CharlesDuffy, thank you too, i had no idea."}], "owner": {"reputation": 106, "user_id": 1793754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29be3a8349325c546c2d3a348447750c?s=128&d=identicon&r=PG", "display_name": "WitcherGeralt", "link": "https://stackoverflow.com/users/1793754/witchergeralt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1528304524, "answer_count": 0, "score": 0, "last_activity_date": 1528304075, "creation_date": 1528304075, "question_id": 50725719, "link": "https://stackoverflow.com/questions/50725719/an-issue-with-zenity-and-printf-c-stdio", "closed_reason": "Duplicate", "title": "An issue with zenity and printf (C stdio)", "body": "<p>I'm trying to make a graphical utility with <strong>bash</strong>, <strong>zenity</strong> and a script written in <strong>C</strong> and there is an issue with progressbar, zenity ignores input from the C script.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char *argv[]) {\n    for (int i=0; i &lt; 11; i++) {\n        printf(\"%d\\n\", i*10);\n        sleep(1);\n    }\n}\n</code></pre>\n\n<p>A bash version of the same:</p>\n\n<pre><code>for (( i=0; i &lt; 11; i++ )); do\n    echo $(( i*10 ))\n    sleep 1\ndone\n</code></pre>\n\n<p>This will give the same result in a terminal: 0,10,20..100 separated by a new line. But zenity will take it from echo and won't take it from printf. Why?</p>\n\n<p>That's how I use zenity with C scripts:</p>\n\n<pre><code>gcc -o pp pp.c # C script from above\n\n./pp | zenity --progress --auto-close\n</code></pre>\n\n<p>And how I use it with bash:</p>\n\n<pre><code>(for ((i=0; i&lt;11; i++)); do echo $(( i*10 )); sleep 1; done) | zenity --progress --auto-close\n</code></pre>\n\n<p>I even tried to replace <strong>echo</strong> by <strong>printf</strong> in bash:</p>\n\n<pre><code>printf \"%d\\n\" $(( i*10 ))\n</code></pre>\n\n<p>It also works fine.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 8, "creation_date": 1528304058, "post_id": 50725680, "comment_id": 88459576, "body": "Why do you think that the address <code>0x00018EA0</code> is valid?"}], "answers": [{"tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": false, "score": 2, "last_activity_date": 1528304295, "creation_date": 1528304295, "answer_id": 50725759, "question_id": 50725680, "link": "https://stackoverflow.com/questions/50725680/why-is-de-referencing-the-pointer-and-printing-the-value-crashing-the-program/50725759#50725759", "title": "Why is de-referencing the pointer and printing the value crashing the program", "body": "<p><code>0x00018EA0</code> is a random address that (as far as anyone can tell) has no significance. The chance that it is mapped to a page at all is miniscule; the chance that it is mapped to a page that your userspace process has permissions for even more so.</p>\n\n<p>As a result, when you <em>dereference</em> the pointer -- access that memory that may not exist and that you likely don't have permission to access -- you get an error, specifically a segmentation fault.</p>\n\n<p>The first program doesn't crash because it never accesses the memory -- it only looks at the value of a pointer that is never accessed.</p>\n"}, {"tags": [], "owner": {"reputation": 1765, "user_id": 8524503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXxXM.png?s=128&g=1", "display_name": "Abhijith Asokan", "link": "https://stackoverflow.com/users/8524503/abhijith-asokan"}, "is_accepted": true, "score": 2, "last_activity_date": 1528304664, "last_edit_date": 1528304664, "creation_date": 1528304344, "answer_id": 50725774, "question_id": 50725680, "link": "https://stackoverflow.com/questions/50725680/why-is-de-referencing-the-pointer-and-printing-the-value-crashing-the-program/50725774#50725774", "title": "Why is de-referencing the pointer and printing the value crashing the program", "body": "<p>First of all, you don't know if the address <code>0x00018EA0</code> is valid or not.</p>\n\n<p>In the first program, you are not accessing the memory location <code>0x00018EA0</code>, you are just accessing the address and the address of the pointer.</p>\n\n<pre><code>printf(\"%x\\n%x\\n%x\\n\",address,flashLocat,&amp;flashLocat);\n\n// address  --&gt; is value of pointer, so it is valid\n// flashLocat --&gt; is value of pointer, so it is valid\n// &amp;flashLocat--&gt; is the address of flashLocat, so it is valid\n</code></pre>\n\n<p>But in the second program, you are actually accessing the memory location, which gives you error, if the address is invalid.</p>\n\n<pre><code>printf(\"%x\\n%x\\n%x\\n%x\\n\",address,*flashLocat,flashLocat,&amp;flashLocat);\n\n// *flashLocat --&gt; trying to access the location, can be INVALID\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50725774, "answer_count": 2, "score": -1, "last_activity_date": 1528304664, "creation_date": 1528303913, "question_id": 50725680, "link": "https://stackoverflow.com/questions/50725680/why-is-de-referencing-the-pointer-and-printing-the-value-crashing-the-program", "title": "Why is de-referencing the pointer and printing the value crashing the program", "body": "<p>The following program gives the result correctly</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int address = 0x00018EA0;\n    int *flashLocat = (int*)address;\n    printf(\"%x\\n%x\\n%x\\n\",address,flashLocat,&amp;flashLocat);\n\n    return 0;\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>    18ea0\n    18ea0\n    180209e0\n</code></pre>\n\n<p>Whereas the above program in the following way </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int address = 0x00018EA0;\n    int *flashLocat = (int*)address;\n    printf(\"%x\\n%x\\n%x\\n%x\\n\",address,*flashLocat,flashLocat,&amp;flashLocat);\n\n    return 0;\n}\n</code></pre>\n\n<p>is crashing, why is it crashing? It would be great if someone answers. Thanks in advance.</p>\n"}, {"tags": ["c++", "c", "command-line", "arguments"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1528304053, "post_id": 50725671, "comment_id": 88459574, "body": "Even if there is none, it will consider as string only the part up  to the null character."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528304061, "post_id": 50725671, "comment_id": 88459579, "body": "The command line arguments are strings, terminated by a null byte.  Trying to pass binary data with embedded nulls fails because of that \u2014 the data for each argument is deemed terminated by the first null byte.  You have to accept that, and redesign your interface so null bytes are not needed or are specially encoded (and what else then needs encoding).  Or, if you&#39;re implementing your own o/s, you can go with a non-POSIX approach to handling command line arguments."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1528304105, "post_id": 50725671, "comment_id": 88459601, "body": "That&#39;s not passing binary data. That&#39;s passing a string representation of a hex number. <code>printf()</code> is not even interpreting it correctly, as <code>0x123</code> != <code>123</code>. And what you&#39;re passing to bash is not a valid anything."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1528304205, "post_id": 50725671, "comment_id": 88459659, "body": "it is not a good idea to pass binary data this way. Pass it through standard input or file."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1528304226, "post_id": 50725671, "comment_id": 88459668, "body": "@ken, <code>printf &quot;1\\x0123&quot; | od -c</code> shows 4 characters: <code>1 001   2   3</code>"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1528304278, "post_id": 50725671, "comment_id": 88459693, "body": "@glennjackman: Not according to the poster&#39;s example."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528304348, "post_id": 50725671, "comment_id": 88459732, "body": "@JonathanLeffler I think there is no prevention from C side if the OS is deciding to pass some data with zeros as the <code>argv</code> to <code>main</code>."}, {"owner": {"reputation": 1466, "user_id": 2689696, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/303b6001169b9992aee46c054b3c49bc?s=128&d=identicon&r=PG&f=1", "display_name": "tejas", "link": "https://stackoverflow.com/users/2689696/tejas"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1528304370, "post_id": 50725671, "comment_id": 88459747, "body": "@KenWhite Seems like so removed the character when i copy pasted"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1528304381, "post_id": 50725671, "comment_id": 88459755, "body": "@KenWhite: The poster&#39;s output does not reliably show which bytes are printed.  The variant with the embedded null byte gets called out; the variant without the null byte probably has an invisible control-A (<code>\\x01&#39;</code>) in the string."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1528304566, "post_id": 50725671, "comment_id": 88459859, "body": "@EugeneSh.: How does that work?  <a href=\"https://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1\" rel=\"nofollow noreferrer\">C11 &#167;5.1.2.2.1 Program startup</a> says: <i>If the value of <code>argc</code> is greater than zero, the array members <code>argv[0]</code> through <code>argv[argc-1]</code> inclusive shall contain pointers to strings, which are given implementation-defined values by the host environment prior to program startup.</i> and <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.1.1\" rel=\"nofollow noreferrer\">C11 &#167;7.1.1</a> defines a string as <i>A string is a contiguous sequence of characters terminated by and including the first null character.</i>  That doesn&#39;t leave much wriggle room."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528304693, "post_id": 50725671, "comment_id": 88459927, "body": "@JonathanLeffler Right. So I guess there is a prevention. But what if the hosting environment is putting some defined stuff after the terminating zero? I guess then C compiler will be free to assume it is not there..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1528304783, "post_id": 50725671, "comment_id": 88459973, "body": "Ah.. this question changed to c++ now.."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1528304869, "post_id": 50725671, "comment_id": 88460021, "body": "However I&#39;d expect that the output would be just &quot;1&quot;, not &quot;123&quot;. Clearly the &quot;\\x00&quot; is not passed down the params. However <code>printf &quot;1\\x0023&quot; | od -c</code> works - prints the zero character. Interesting :)"}, {"owner": {"reputation": 1466, "user_id": 2689696, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/303b6001169b9992aee46c054b3c49bc?s=128&d=identicon&r=PG&f=1", "display_name": "tejas", "link": "https://stackoverflow.com/users/2689696/tejas"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1528305102, "post_id": 50725671, "comment_id": 88460140, "body": "@axalis <code>|</code> would go to stdin not arguments"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1528305328, "post_id": 50725671, "comment_id": 88460262, "body": "Yep, true. So it seems that not possible directly with params, but you can read the binary string from stdin (or from a &quot;regular&quot; file indeed)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1528305373, "post_id": 50725671, "comment_id": 88460294, "body": "@axalis .. and it is completely different story.."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1528306671, "post_id": 50725671, "comment_id": 88460998, "body": "You <i>might</i> be able to do this sort of thing by calling <code>execl</code> or <code>execv</code>.  (But it probably wouldn&#39;t work, if the kernel has occasion to recopy the argument list, which it probably does.)"}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1528312661, "post_id": 50727091, "comment_id": 88463985, "body": "There are certainly utilities which will interpret an empty option argument as though it were a NUL byte (such as the <code>-d</code> options for Gnu <code>cut</code> and bash&#39;s <code>read</code>). But in general, it seems to me that if you are defining a mechanism such as the one you describe, implementing standard escape codes would be a lot cleaner, less error-prone, and not that much more difficult to write."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1528313025, "post_id": 50727091, "comment_id": 88464142, "body": "I agree that this is not a good way to do it \u2014 the &#39;by special arrangement&#39; means that only utilities that know about the scheme can use it.  And yes, for the most part, handling some sort of escape scheme would be simpler, whether that&#39;s as long-winded as &quot;string of pairs of hex digits&quot; or &quot;use <code>\\037</code> for octal; use <code>\\x1F</code> for hexadecimal; use <code>\\\\</code> for a backslash (\u2026and what else?\u2026)&quot;.  The use of backslashes is ubiquitous on Unix, of course, but doesn&#39;t necessarily work well with the shell (or, more accurately, requires you to be fully aware of which code is interpreting what and how)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1528314006, "post_id": 50727091, "comment_id": 88464596, "body": "Backslashes are not special inside single quotes, and c-style escapes are not special inside double quotes, all of which facilitates their use (for example in the printf format strings in the OP). There are confusing cases, but for the most part people don&#39;t think too hard before writing <code>printf &quot;%s\\n&quot;</code>. You do sometimes have to use four backslashes, which I guess speaks to your point. You could always use URL-style %-encoding, arguably even simpler but less ubiquitous."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1528310135, "last_edit_date": 1528310135, "creation_date": 1528309263, "answer_id": 50727091, "question_id": 50725671, "link": "https://stackoverflow.com/questions/50725671/binary-data-as-command-line-argument/50727091#50727091", "title": "Binary data as command line argument", "body": "<p>This answer is written in C, but can be compiled as C++ and works the same in both.  I quote from the C11 standard; there are equivalent definitions in the <a href=\"https://stackoverflow.com/questions/204476/\">C++ standards</a>.</p>\n\n<h3>There isn't a good way to pass null bytes to a program's arguments</h3>\n\n<blockquote>\n  <p><strong><a href=\"https://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1\" rel=\"nofollow noreferrer\">C11 \u00a75.1.2.2.1 Program startup</a>:</strong><br>\n  If the value of <code>argc</code> is greater than zero, the array members <code>argv[0]</code> through <code>argv[argc-1]</code> inclusive shall contain pointers to strings, which are given implementation-defined values by the host environment prior to program startup.</p>\n  \n  <p><strong><a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.1.1\" rel=\"nofollow noreferrer\">C11 \u00a77.1.1 Definitions of terms</a></strong><br>\n  A string is a contiguous sequence of characters terminated by and including the first null character.</p>\n</blockquote>\n\n<p>That means that each argument passed to <code>main()</code> in <code>argv</code> is a null-terminated string.  There is no reliable data after the null byte at the end of the string \u2014 searching there would be accessing out of bounds of the string.</p>\n\n<p>So, as noted at length in the comments to the question, it is not possible in the ordinary course of events to get null bytes to a program via the argument list because null bytes are interpreted as being the end of each argument.</p>\n\n<h3>By special agreement</h3>\n\n<p>That doesn't leave much wriggle room.  However, if both the calling/invoking program and the called/invoked program agree on the convention, then, even with the limitations imposed by the standards, you can pass arbitrary binary data, including arbitrary sequences of null bytes, to the invoked program \u2014 up to the limits on the length of an argument list imposed by the implementation.</p>\n\n<p>The convention has to be along the lines of:</p>\n\n<ul>\n<li>All arguments (except <code>argv[0]</code>, which is ignored, and the last argument, <code>argv[argc-1]</code>) consist of a stream of non-null bytes followed by a null.</li>\n<li>If you need adjacent nulls, you have to provide empty arguments on the command line.</li>\n<li>If you need trailing nulls, you have to provide empty arguments as the last arguments on the command line.</li>\n</ul>\n\n<p>This could lead to a program such as (<code>null19.c</code>):</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstatic void hex_dump(const char *tag, size_t size, const char *buffer);\n\nint main(int argc, char **argv)\n{\n    if (argc &lt; 2)\n    {\n        fprintf(stderr, \"Usage: %s arg1 [arg2 '' arg4 ...]\\n\", argv[0]);\n        exit(EXIT_FAILURE);\n    }\n\n    size_t len_args = 0;\n    for (int i = 1; i &lt; argc; i++)\n        len_args += strlen(argv[i]) + 1;\n\n    char buffer[len_args];\n\n    size_t offset = 0;\n    for (int i = 1; i &lt; argc; i++)\n    {\n        size_t arglen = strlen(argv[i]) + 1;\n        memmove(buffer + offset, argv[i], strlen(argv[i]) + 1);\n        offset += arglen;\n    }\n    assert(offset != 0);\n    offset--;\n\n    hex_dump(\"Argument list\", offset, buffer);\n    return 0;\n}\n\nstatic inline size_t min_size(size_t x, size_t y) { return (x &lt; y) ? x : y; }\n\nstatic void hex_dump(const char *tag, size_t size, const char *buffer)\n{\n    printf(\"%s (%zu):\\n\", tag, size);\n    size_t offset = 0;\n    while (size != 0)\n    {\n        printf(\"0x%.4zX:\", offset);\n        size_t count = min_size(16, size);\n        for (size_t i = 0; i &lt; count; i++)\n            printf(\" %.2X\", buffer[offset + i] &amp; 0xFF);\n        putchar('\\n');\n        size -= count;\n        offset += count;\n    }\n}\n</code></pre>\n\n<p>This could be invoked using:</p>\n\n<pre><code>$ ./null19 '1234' '5678' '' '' '' '' 'def0' ''\nArgument list (19):\n0x0000: 31 32 33 34 00 35 36 37 38 00 00 00 00 00 64 65\n0x0010: 66 30 00\n$\n</code></pre>\n\n<p>The first argument is deemed to consist of 5 bytes \u2014 four digits and a null byte.  The second is similar.  The third through sixth arguments each represent a single null byte (it gets painful if you need large numbers of contiguous null bytes), then there is another string of five bytes (three letters, one digit, one null byte).  The last argument is empty but ensures that there is a null byte at the end.  If omitted, the output would not include that final terminal null byte.</p>\n\n<pre><code>$ ./null19 '1234' '5678' '' '' '' '' 'def0' \nArgument list (18):\n0x0000: 31 32 33 34 00 35 36 37 38 00 00 00 00 00 64 65\n0x0010: 66 30\n$\n</code></pre>\n\n<p>This is the same as before except there is no trailing null byte in the data.  The two examples in the question are easily handled:</p>\n\n<pre><code>$ ./null19 $(printf \"1\\x0123\")\nArgument list (4):\n0x0000: 31 01 32 33\n$ ./null19 1 23\nArgument list (4):\n0x0000: 31 00 32 33\n$\n</code></pre>\n\n<p>This works strictly within the standard assuming only that empty strings are recognized as valid arguments.  In practice, those arguments are already contiguous in memory so it might be possible on many platforms to avoid the copying phase into the buffer.  However, the standard does not stipulate that the argument strings are laid out contiguously in memory.</p>\n\n<p>If you need multiple arguments with binary data, you can modify the convention.  For example, you could take a control argument of a string which indicates how many subsequent physical arguments make up one logical binary argument.</p>\n\n<p>All this relies on the programs interpreting the argument list as agreed.  It is not really a general solution.</p>\n"}], "owner": {"reputation": 1466, "user_id": 2689696, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/303b6001169b9992aee46c054b3c49bc?s=128&d=identicon&r=PG&f=1", "display_name": "tejas", "link": "https://stackoverflow.com/users/2689696/tejas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2248, "favorite_count": 1, "accepted_answer_id": 50727091, "answer_count": 1, "score": 0, "last_activity_date": 1528310135, "creation_date": 1528303883, "last_edit_date": 1528307695, "question_id": 50725671, "link": "https://stackoverflow.com/questions/50725671/binary-data-as-command-line-argument", "title": "Binary data as command line argument", "body": "<p>I have a simple c++ program (and a similar one for c) that just prints out the first argument</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char** argv)\n{\n    if(argc &gt; 1)\n        std::cout &lt;&lt; \"&gt;&gt;\" &lt;&lt; argv[1] &lt;&lt; \"&lt;&lt;\\n\";\n}\n</code></pre>\n\n<p>I can pass binary data (i have tried on bash) as argument like </p>\n\n<pre><code>$./a.out $(printf \"1\\x0123\")\n  &gt;&gt;1?23&lt;&lt;\n</code></pre>\n\n<p>If I try to pass a null there i get</p>\n\n<pre><code>./a.out $(printf \"1\\x0023\")\nbash: warning: command substitution: ignored null byte in input\n&gt;&gt;123&lt;&lt;\n</code></pre>\n\n<p>Clearly bash(?) does not allow this</p>\n\n<p>But is it possible to send a null as a command line argument this way?\nDo either c or c++ put any restrictions on this?</p>\n\n<p>Edit: I am not using this in day-to-day c++, this question is just out of curiosity</p>\n"}, {"tags": ["c", "i2c"], "comments": [{"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 0, "creation_date": 1528303607, "post_id": 50725538, "comment_id": 88459338, "body": "So the device doesn&#39;t ACK the read command that you verify is there?"}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1528303989, "post_id": 50725538, "comment_id": 88459544, "body": "Please explain &quot;I don&#39;t get missing Acks&quot;.  Do you mean you see no evidence of missing acks (the acks are there), or are you actually missing acks but accidentally typed a double negative?  Clarity is important."}, {"owner": {"reputation": 1, "user_id": 9900284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matthew Hanna", "link": "https://stackoverflow.com/users/9900284/matthew-hanna"}, "edited": false, "score": 0, "creation_date": 1528305602, "post_id": 50725538, "comment_id": 88460404, "body": "lol sorry, i will clearify. from what i understand when doing a read the I2C master is reponsabile for the Acks, which i am seeing on the scope waveform but the scope I2C analyzer sais im not getting an Ack. im getting responses from the read command and print them out to the terminal but they are just random numbers that have nothing to do with the actual flow rate im applying"}, {"owner": {"reputation": 1, "user_id": 9900284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matthew Hanna", "link": "https://stackoverflow.com/users/9900284/matthew-hanna"}, "edited": false, "score": 0, "creation_date": 1528305696, "post_id": 50725538, "comment_id": 88460452, "body": "im a little concerened this behavior is due to a 100 ns pulste on the clock lign directly before the Ack is expected, and ideas what might be causing that?"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 0, "creation_date": 1528306068, "post_id": 50725538, "comment_id": 88460661, "body": "I&#39;ve encountered stuff like this before, because reads on I2C are much more finicky than writes. My intuition would be that you&#39;re not properly implementing the read command format for the particular device OR you&#39;re trying to read registers that aren&#39;t readable via an I2C command."}, {"owner": {"reputation": 1, "user_id": 9900284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matthew Hanna", "link": "https://stackoverflow.com/users/9900284/matthew-hanna"}, "edited": false, "score": 0, "creation_date": 1528398112, "post_id": 50725538, "comment_id": 88504415, "body": "ok so it looks like the oscilloscope I&#39;m using is just way more sensitive than the ftdi dongle"}], "owner": {"reputation": 1, "user_id": 9900284, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matthew Hanna", "link": "https://stackoverflow.com/users/9900284/matthew-hanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528303417, "creation_date": 1528303417, "question_id": 50725538, "link": "https://stackoverflow.com/questions/50725538/ftdi-i2c-libmpsse", "title": "FTDI I2C libMPSSE", "body": "<p>I'm working on reading flow rates from a sensrion lg16 flow rate sensor using a USB FTDI I2C dongle. I have all the wiring done and I am able to write to it and verify I am able to write to it correctly using an oscilloscope with an I2C analyzer. My problem is when i try to do a read from the sensor, even when reading to a register after writing to it i dont get missing Acks on the I2C bus.</p>\n\n<p>here my code to read the register i want to see at the moment</p>\n\n<pre><code>bytesToTransfer=0;\nbytesTransfered=0;\nbuffer[bytesToTransfer++]=0xE5; \n//buffer[bytesToTransfer++]= 0x7f;\nstatus = I2C_DeviceWrite(ftHandle, slaveAddress, bytesToTransfer, buffer, \\\n    &amp;bytesTransfered,   I2C_TRANSFER_OPTIONS_START_BIT|I2C_TRANSFER_OPTIONS_STOP_BIT | I2C_TRANSFER_OPTIONS_FAST_TRANSFER_BYTES);\nprintf(\"bytestxd=%d\\n\",bytesTransfered);\nprintf(\"status=%d\\n\",status);\nAPP_CHECK_STATUS(status);\n</code></pre>\n"}, {"tags": ["c", "geospatial", "h3"], "answers": [{"comments": [{"owner": {"reputation": 1698, "user_id": 3778742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad62c6ebfd4440c951edde151cb76714?s=128&d=identicon&r=PG&f=1", "display_name": "alexsmn", "link": "https://stackoverflow.com/users/3778742/alexsmn"}, "edited": false, "score": 0, "creation_date": 1565681658, "post_id": 50725531, "comment_id": 101418433, "body": "any idea what resolution is used at Uber?"}, {"owner": {"reputation": 52856, "user_id": 380487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/053d583a4d4901a7a4a7be170eac482f?s=128&d=identicon&r=PG", "display_name": "nrabinowitz", "link": "https://stackoverflow.com/users/380487/nrabinowitz"}, "reply_to_user": {"reputation": 1698, "user_id": 3778742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad62c6ebfd4440c951edde151cb76714?s=128&d=identicon&r=PG&f=1", "display_name": "alexsmn", "link": "https://stackoverflow.com/users/3778742/alexsmn"}, "edited": false, "score": 1, "creation_date": 1565704651, "post_id": 50725531, "comment_id": 101430225, "body": "Different use cases require different resolutions, so different teams and systems choose resolutions that work for them. Res 9 is probably the most common at Uber - that\u2019s about the size of 1-2 city blocks."}, {"owner": {"reputation": 7863, "user_id": 9086770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JW6eS.jpg?s=128&g=1", "display_name": "bxod", "link": "https://stackoverflow.com/users/9086770/bxod"}, "edited": false, "score": 0, "creation_date": 1583552031, "post_id": 50725531, "comment_id": 107165546, "body": "@nrabinowitz given that edge lengths are averages, what\u2019s their plus/minus?"}, {"owner": {"reputation": 52856, "user_id": 380487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/053d583a4d4901a7a4a7be170eac482f?s=128&d=identicon&r=PG", "display_name": "nrabinowitz", "link": "https://stackoverflow.com/users/380487/nrabinowitz"}, "edited": false, "score": 0, "creation_date": 1583552982, "post_id": 50725531, "comment_id": 107165642, "body": "See this answer: <a href=\"https://gis.stackexchange.com/a/353120/4078\">gis.stackexchange.com/a/353120/4078</a> - I haven\u2019t calculated the edge lengths, but I think it\u2019s fair to assume the largest and smallest cells have the min/max edge length."}, {"owner": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1608055779, "post_id": 50725531, "comment_id": 115463633, "body": "Here is the updated link to the resolution table: <a href=\"https://h3geo.org/docs/core-library/restable\" rel=\"nofollow noreferrer\">h3geo.org/docs/core-library/restable</a>"}], "tags": [], "owner": {"reputation": 52856, "user_id": 380487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/053d583a4d4901a7a4a7be170eac482f?s=128&d=identicon&r=PG", "display_name": "nrabinowitz", "link": "https://stackoverflow.com/users/380487/nrabinowitz"}, "is_accepted": false, "score": 6, "last_activity_date": 1608090727, "last_edit_date": 1608090727, "creation_date": 1528303398, "answer_id": 50725531, "question_id": 50725530, "link": "https://stackoverflow.com/questions/50725530/how-to-choose-the-suitable-h3-resolutions-when-use-polyfill/50725531#50725531", "title": "How to choose the suitable h3 resolutions when use polyfill?", "body": "<p>You can see the <a href=\"https://h3geo.org/docs/core-library/restable\" rel=\"nofollow noreferrer\">resolution table</a> in the docs, which provides the average area and edge length for hexagons at each resolution (area will vary slightly within a resolution). You can also use the <code>hexArea</code> function to get this information dynamically.</p>\n<p>At that point you can make your own determination about the balance between accuracy around the edges of the polygon you're trying to fill, and the amount of memory/processing required. Each finer resolution will result in approximately 7x hexagons compared to the resolution before.</p>\n<p>Note that a hexagon at a given resolution does not exactly contain its children at the next finer resolution, so moving between resolutions introduces a margin of error around the edges. For this reason, if you need to share hexagon data between multiple systems, it's generally a good idea to pick one resolution appropriate to your use case and stick to it.</p>\n"}], "owner": {"reputation": 52856, "user_id": 380487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/053d583a4d4901a7a4a7be170eac482f?s=128&d=identicon&r=PG", "display_name": "nrabinowitz", "link": "https://stackoverflow.com/users/380487/nrabinowitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2415, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1608090727, "creation_date": 1528303398, "question_id": 50725530, "link": "https://stackoverflow.com/questions/50725530/how-to-choose-the-suitable-h3-resolutions-when-use-polyfill", "title": "How to choose the suitable h3 resolutions when use polyfill?", "body": "<p>The <a href=\"https://github.com/uber/h3\" rel=\"noreferrer\">H3 library</a> offers hexagon grids at many resolutions - how should I choose the suitable h3 resolutions when using <code>polyfill</code>?</p>\n"}, {"tags": ["c", "python-2.7", "math", "cpython"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1528301414, "post_id": 50724862, "comment_id": 88458211, "body": "Before calling this something else has to convert the integer <code>2</code> to the double <code>2.0</code>, but other than that I expect this is the code that does the real work. And after checking for some special cases, it ends up just calling <code>pow(x, y)</code>."}, {"owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "edited": false, "score": 0, "creation_date": 1528302107, "post_id": 50724862, "comment_id": 88458547, "body": "Python is probably punting to a C math library to compute the basic functions (pow, sin, cos, etc). In old Unix systems, that library was named libm.a or libm.so; I don&#39;t know how that stuff is organized these days. Anyway, I think that what you need to search for is &quot;source code for C library math functions&quot; or something like that. It seems likely that the same math library is used for different platforms (Linux, Windows, Mac) but that is not necessarily the case, so that&#39;s something else to consider."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1528302770, "post_id": 50724862, "comment_id": 88458880, "body": "What you could do is to download the complete source and make sure you can compile it. After that, just use your favorite tool to set a breakpoint, or you could glitch the code so that it does something wrong that you can detect."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 1, "creation_date": 1528304636, "post_id": 50724862, "comment_id": 88459893, "body": "The code you&#39;re looking for is <a href=\"https://github.com/python/cpython/blob/3ef769fcd378a7f1cda19c0dfec2e79613d79e48/Objects/floatobject.c#L684\" rel=\"nofollow noreferrer\">here</a>. It&#39;s separate from the <code>math.pow</code> implementation, and differs from it in a couple of details (e.g., handling of overflow). But just like <code>math.pow</code>, it <a href=\"https://github.com/python/cpython/blob/3ef769fcd378a7f1cda19c0dfec2e79613d79e48/Objects/floatobject.c#L788\" rel=\"nofollow noreferrer\">ends up calling</a> the C libm <code>pow</code> function for the basis <code>finite ** finite</code> case."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1528305327, "post_id": 50724862, "comment_id": 88460261, "body": "Side note: Don&#39;t forget that the Python git repository contains Python 2 and Python 3 sources and HEAD is Python 3. This makes it quite easy to get confused unless you restrict your searches to the respective branches. <code>**</code> calls usually <code>__pow__()</code> of the left-hand argument. For numbers, if at least one of them is a float, you end up in <a href=\"https://github.com/python/cpython/blob/67b7158d53f33ed644cc11ef394470a859ea8bad/Objects/floatobject.c#L818\" rel=\"nofollow noreferrer\"><code>float_pow()</code></a>, which calls libm <code>pow()</code>."}, {"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "edited": false, "score": 0, "creation_date": 1528305950, "post_id": 50724862, "comment_id": 88460595, "body": "looking here too <a href=\"https://stackoverflow.com/q/5246856/737051\">stackoverflow.com/q/5246856/737051</a>"}, {"owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1528306158, "post_id": 50724862, "comment_id": 88460715, "body": "@dhke I noticed the line <code>ix = pow(iv, iw);</code> which is <code>float_pow</code> calling on  <code>pow</code>"}], "answers": [{"comments": [{"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1528304767, "post_id": 50725814, "comment_id": 88459966, "body": "FWIW, the code the OP shows isn&#39;t the code that implements <code>2**0.5</code>. The code that implements <code>2**0.5</code> is in <code>Objects&#47;floatobject.c</code> in the Python source."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1528375568, "post_id": 50725814, "comment_id": 88490571, "body": "@MarkDickinson that function uses the native <code>pow()</code>, too. Vid.: <a href=\"https://github.com/python/cpython/blob/2.7/Objects/floatobject.c#L921\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/2.7/Objects/floatobject.c#L92&zwnj;&#8203;1</a>"}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1528388130, "post_id": 50725814, "comment_id": 88499416, "body": "Yep, that&#39;s true (and exactly what I already said in a comment on the OP&#39;s post :-).  I was merely pointing out that the &quot;let libm handle finite ** finite&quot; comment that you refer to doesn&#39;t actually come from the relevant code. (I should know: I <a href=\"https://github.com/python/cpython/commit/cec3f138d8cd6c5e3fd78200119a94d59440cfad\" rel=\"nofollow noreferrer\"><i>wrote</i></a> that comment :-)"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1528389586, "post_id": 50725814, "comment_id": 88500186, "body": "@MarkDickinson Ah, no wonder you name sounded vaguely familiar to me ;-) But thanks for your participation here at SO, not all developers do that."}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 5, "last_activity_date": 1528304503, "creation_date": 1528304503, "answer_id": 50725814, "question_id": 50724862, "link": "https://stackoverflow.com/questions/50724862/python-source-code-for-math-exponent-function/50725814#50725814", "title": "Python source code for math exponent function?", "body": "<p>As the comment  <code>/* let libm handle finite**finite */</code> in the source suggests, the actual function got outsourced to an external library. The name <code>libm</code> is a historic one and is the part of <code>libc</code> that does the math. Not everyone had a floating point unit, so not everyone needed a library handling floating point and because memory was expensive in that times it had been packed into a second library. (Yes, it was much more complicated than that, but basically ...)</p>\n\n<p>The code you are searching for is in the source for your <code>libc</code>. You may not be able to look into the source of <em>your</em> <code>libc</code> but the functions in it are standardized and you can take other libraries, like dietlibc, uClibc, newlib (cygwin), glibc and several more. (no links given to avoid link-rot, but a proper search-machine will find them all).</p>\n\n<p>Some of those libraries use the old SunPro code (e.g.: uClibc but also newlib) which is highly optimized, close to metal code but readable and commented, look for the file <code>e_pow.c</code> in uClibc or newlib.</p>\n\n<p>If you use Linux you might be tempted to look into the source of your GlibC where one of the many implementations of <code>pow()</code>can be found at <code>sysdeps/ieee754/dbl-64/e_pow.c</code>.</p>\n\n<p>Other libraries do it a bit differently although not much, e.g.: dietlibc uses hand-rolled i386 assembler for <code>log()</code> and <code>exp()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": false, "score": 2, "last_activity_date": 1528345917, "creation_date": 1528345917, "answer_id": 50732998, "question_id": 50724862, "link": "https://stackoverflow.com/questions/50724862/python-source-code-for-math-exponent-function/50732998#50732998", "title": "Python source code for math exponent function?", "body": "<p>This is easy to see/to verify in an experiment. I use valgrind for profiling, but obviously you can choose a tool of your liking. </p>\n\n<pre><code>#pow.py\na, b=2, 0.5\nfor _ in range(10**5):\n   a**b\n</code></pre>\n\n<p>and now</p>\n\n<pre><code>   valgrind --tool=callgrind python2.7 pow.py\n   kcachegrind\n</code></pre>\n\n<p>It is easy to see, that <code>PyNumber_Power</code> is called <code>10^5+1</code> times and the call-graph looks like following</p>\n\n<p><a href=\"https://i.stack.imgur.com/l5j3E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l5j3E.png\" alt=\"enter image description here\"></a></p>\n\n<p>kcachegrind tells me also, that the <code>exp</code> function is actually from <a href=\"https://github.com/lattera/glibc/blob/master/math/w_pow.c#L74\" rel=\"nofollow noreferrer\"><code>w_pow.c</code></a>.</p>\n\n<p>It would help to have a debug-build of python, so it would  be possible to figure out to which function <code>PyNumber_Power</code> was dispatched dynamically without much effort:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9gPlp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9gPlp.png\" alt=\"enter image description here\"></a></p>\n\n<p>This function is, as already figured out, <a href=\"https://github.com/python/cpython/blob/2.7/Objects/floatobject.c#L921\" rel=\"nofollow noreferrer\"><code>float_pow</code></a> from <a href=\"https://github.com/python/cpython/blob/2.7/Objects/floatobject.c\" rel=\"nofollow noreferrer\">floatobject.c</a>.</p>\n"}], "owner": {"reputation": 6238, "user_id": 737051, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4cbfcdd51d0ec56844b3540f62d06af3?s=128&d=identicon&r=PG", "display_name": "john mangual", "link": "https://stackoverflow.com/users/737051/john-mangual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1346, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1528345917, "creation_date": 1528301040, "last_edit_date": 1528306618, "question_id": 50724862, "link": "https://stackoverflow.com/questions/50724862/python-source-code-for-math-exponent-function", "title": "Python source code for math exponent function?", "body": "<p>When I do math computation in Python which library are we using. E.g. </p>\n\n<pre><code>&gt;&gt;&gt; 2**0.5\n1.4142135623730951\n</code></pre>\n\n<p>How can I find the source code that was used?  Is this just the <code>math.pow()</code> function? Unfortunately, <code>inspect.getsource(pow)</code> returns a kind of error.</p>\n\n<p>Searching on Github narrows it down to <a href=\"https://github.com/python/cpython/search?p=2&amp;q=math.pow&amp;unscoped_q=math.pow\" rel=\"noreferrer\">13</a> possible files.  And I don't fully understand how cPython is constructed.</p>\n\n<pre><code>/*[clinic input]\nmath.pow\n    x: double\n    y: double\n    /\nReturn x**y (x to the power of y).\n[clinic start generated code]*/\n\nstatic PyObject *\nmath_pow_impl(PyObject *module, double x, double y)\n/*[clinic end generated code: output=fff93e65abccd6b0 input=c26f1f6075088bfd]*/\n{\n    double r;\n    int odd_y;\n\n    /* deal directly with IEEE specials, to cope with problems on various\n       platforms whose semantics don't exactly match C99 */\n    r = 0.; /* silence compiler warning */\n    if (!Py_IS_FINITE(x) || !Py_IS_FINITE(y)) {\n        errno = 0;\n        if (Py_IS_NAN(x))\n            r = y == 0. ? 1. : x; /* NaN**0 = 1 */\n        else if (Py_IS_NAN(y))\n            r = x == 1. ? 1. : y; /* 1**NaN = 1 */\n        else if (Py_IS_INFINITY(x)) {\n            odd_y = Py_IS_FINITE(y) &amp;&amp; fmod(fabs(y), 2.0) == 1.0;\n            if (y &gt; 0.)\n                r = odd_y ? x : fabs(x);\n            else if (y == 0.)\n                r = 1.;\n            else /* y &lt; 0. */\n                r = odd_y ? copysign(0., x) : 0.;\n        }\n        else if (Py_IS_INFINITY(y)) {\n            if (fabs(x) == 1.0)\n                r = 1.;\n            else if (y &gt; 0. &amp;&amp; fabs(x) &gt; 1.0)\n                r = y;\n            else if (y &lt; 0. &amp;&amp; fabs(x) &lt; 1.0) {\n                r = -y; /* result is +inf */\n                if (x == 0.) /* 0**-inf: divide-by-zero */\n                    errno = EDOM;\n            }\n            else\n                r = 0.;\n        }\n    }\n    else {\n        /* let libm handle finite**finite */\n        errno = 0;\n        PyFPE_START_PROTECT(\"in math_pow\", return 0);\n        r = pow(x, y);\n        PyFPE_END_PROTECT(r);\n        /* a NaN result should arise only from (-ve)**(finite\n           non-integer); in this case we want to raise ValueError. */\n        if (!Py_IS_FINITE(r)) {\n            if (Py_IS_NAN(r)) {\n                errno = EDOM;\n            }\n            /*\n               an infinite result here arises either from:\n               (A) (+/-0.)**negative (-&gt; divide-by-zero)\n               (B) overflow of x**y with x and y finite\n            */\n            else if (Py_IS_INFINITY(r)) {\n                if (x == 0.)\n                    errno = EDOM;\n                else\n                    errno = ERANGE;\n            }\n        }\n    }\n\n    if (errno &amp;&amp; is_error(r))\n        return NULL;\n    else\n        return PyFloat_FromDouble(r);\n}\n</code></pre>\n\n<p>Is this the code that's being used when I find square root of 2 in Python <code>2**0.5</code> ?</p>\n\n<hr>\n\n<p>Looking around it seems that <code>**</code> is the same as <code>pow()</code> and we can look for the <code>__pow__()</code> method in the source code:</p>\n\n<ul>\n<li><a href=\"https://github.com/python/cpython/search?q=__pow__&amp;unscoped_q=__pow__\" rel=\"noreferrer\">search results for <code>__pow__</code></a></li>\n<li><a href=\"https://stackoverflow.com/questions/10282674/difference-between-the-built-in-pow-and-math-pow-for-floats-in-python\">Difference between the built-in pow() and math.pow() for floats, in Python?</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/a5293b4ff2c1b5446947b4986f98ecf5d52432d4/Lib/numbers.py\" rel=\"noreferrer\"><code>numbers.py</code></a> for How Python thinks of numbers</li>\n</ul>\n\n<p>The consensus seems to be that <code>pow</code> is coming from the <a href=\"https://sourceware.org/newlib/libm.html#pow\" rel=\"noreferrer\"><code>libm</code></a> library.  Possibly like <a href=\"https://github.com/bminor/glibc/blob/ee19f1de0d0da24114be554fdf94243c0ec6b86c/sysdeps/ieee754/flt-32/e_powf.c\" rel=\"noreferrer\">this one</a>, <code>e_powf.c</code>.  Also there is <a href=\"https://github.com/bminor/glibc/blob/ee19f1de0d0da24114be554fdf94243c0ec6b86c/sysdeps/ieee754/dbl-64/e_pow.c\" rel=\"noreferrer\"><code>e_pow.c</code></a> </p>\n\n<pre><code>/* e_powf.c -- float version of e_pow.c.\n * Conversion to float by Ian Lance Taylor, Cygnus Support, ian@cygnus.com.\n */\n\n/*\n * ====================================================\n * Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.\n *\n * Developed at SunPro, a Sun Microsystems, Inc. business.\n * Permission to use, copy, modify, and distribute this\n * software is freely granted, provided that this notice\n * is preserved.\n * ====================================================\n */\n\n#include &lt;math.h&gt;\n#include &lt;math_private.h&gt;\n\nstatic const float huge = 1.0e+30, tiny = 1.0e-30;\n\nstatic const float\nbp[] = {1.0, 1.5,},\ndp_h[] = { 0.0, 5.84960938e-01,}, /* 0x3f15c000 */\ndp_l[] = { 0.0, 1.56322085e-06,}, /* 0x35d1cfdc */\nzero    =  0.0,\none =  1.0,\ntwo =  2.0,\ntwo24   =  16777216.0,  /* 0x4b800000 */\n    /* poly coefs for (3/2)*(log(x)-2s-2/3*s**3 */\nL1  =  6.0000002384e-01, /* 0x3f19999a */\nL2  =  4.2857143283e-01, /* 0x3edb6db7 */\nL3  =  3.3333334327e-01, /* 0x3eaaaaab */\nL4  =  2.7272811532e-01, /* 0x3e8ba305 */\nL5  =  2.3066075146e-01, /* 0x3e6c3255 */\nL6  =  2.0697501302e-01, /* 0x3e53f142 */\nP1   =  1.6666667163e-01, /* 0x3e2aaaab */\nP2   = -2.7777778450e-03, /* 0xbb360b61 */\nP3   =  6.6137559770e-05, /* 0x388ab355 */\nP4   = -1.6533901999e-06, /* 0xb5ddea0e */\nP5   =  4.1381369442e-08, /* 0x3331bb4c */\nlg2  =  6.9314718246e-01, /* 0x3f317218 */\nlg2_h  =  6.93145752e-01, /* 0x3f317200 */\nlg2_l  =  1.42860654e-06, /* 0x35bfbe8c */\novt =  4.2995665694e-08, /* -(128-log2(ovfl+.5ulp)) */\ncp    =  9.6179670095e-01, /* 0x3f76384f =2/(3ln2) */\ncp_h  =  9.6179199219e-01, /* 0x3f763800 =head of cp */\ncp_l  =  4.7017383622e-06, /* 0x369dc3a0 =tail of cp_h */\nivln2    =  1.4426950216e+00, /* 0x3fb8aa3b =1/ln2 */\nivln2_h  =  1.4426879883e+00, /* 0x3fb8aa00 =16b 1/ln2*/\nivln2_l  =  7.0526075433e-06; /* 0x36eca570 =1/ln2 tail*/\n\nfloat\n__ieee754_powf(float x, float y)\n{\n    float z,ax,z_h,z_l,p_h,p_l;\n    float y1,t1,t2,r,s,t,u,v,w;\n    int32_t i,j,k,yisint,n;\n    int32_t hx,hy,ix,iy,is;\n\n    GET_FLOAT_WORD(hx,x);\n    GET_FLOAT_WORD(hy,y);\n    ix = hx&amp;0x7fffffff;  iy = hy&amp;0x7fffffff;\n\n    /* y==zero: x**0 = 1 */\n    if(iy==0) return one;\n\n    /* x==+-1 */\n    if(x == 1.0) return one;\n    if(x == -1.0 &amp;&amp; isinf(y)) return one;\n\n    /* +-NaN return x+y */\n    if(__builtin_expect(ix &gt; 0x7f800000 ||\n                iy &gt; 0x7f800000, 0))\n        return x+y;\n\n    /* determine if y is an odd int when x &lt; 0\n     * yisint = 0   ... y is not an integer\n     * yisint = 1   ... y is an odd int\n     * yisint = 2   ... y is an even int\n     */\n    yisint  = 0;\n    if(hx&lt;0) {\n        if(iy&gt;=0x4b800000) yisint = 2; /* even integer y */\n        else if(iy&gt;=0x3f800000) {\n        k = (iy&gt;&gt;23)-0x7f;     /* exponent */\n        j = iy&gt;&gt;(23-k);\n        if((j&lt;&lt;(23-k))==iy) yisint = 2-(j&amp;1);\n        }\n    }\n\n    /* special value of y */\n    if (__builtin_expect(iy==0x7f800000, 0)) {  /* y is +-inf */\n        if (ix==0x3f800000)\n        return  y - y;  /* inf**+-1 is NaN */\n        else if (ix &gt; 0x3f800000)/* (|x|&gt;1)**+-inf = inf,0 */\n        return (hy&gt;=0)? y: zero;\n        else            /* (|x|&lt;1)**-,+inf = inf,0 */\n        return (hy&lt;0)?-y: zero;\n    }\n    if(iy==0x3f800000) {    /* y is  +-1 */\n        if(hy&lt;0) return one/x; else return x;\n    }\n    if(hy==0x40000000) return x*x; /* y is  2 */\n    if(hy==0x3f000000) {    /* y is  0.5 */\n        if(__builtin_expect(hx&gt;=0, 1))  /* x &gt;= +0 */\n        return __ieee754_sqrtf(x);\n    }\n\n    ax   = fabsf(x);\n    /* special value of x */\n    if(__builtin_expect(ix==0x7f800000||ix==0||ix==0x3f800000, 0)){\n        z = ax;         /*x is +-0,+-inf,+-1*/\n        if(hy&lt;0) z = one/z; /* z = (1/|x|) */\n        if(hx&lt;0) {\n        if(((ix-0x3f800000)|yisint)==0) {\n            z = (z-z)/(z-z); /* (-1)**non-int is NaN */\n        } else if(yisint==1)\n            z = -z;     /* (x&lt;0)**odd = -(|x|**odd) */\n        }\n        return z;\n    }\n\n    /* (x&lt;0)**(non-int) is NaN */\n    if(__builtin_expect(((((u_int32_t)hx&gt;&gt;31)-1)|yisint)==0, 0))\n        return (x-x)/(x-x);\n\n    /* |y| is huge */\n    if(__builtin_expect(iy&gt;0x4d000000, 0)) { /* if |y| &gt; 2**27 */\n    /* over/underflow if x is not close to one */\n        if(ix&lt;0x3f7ffff8) return (hy&lt;0)? huge*huge:tiny*tiny;\n        if(ix&gt;0x3f800007) return (hy&gt;0)? huge*huge:tiny*tiny;\n    /* now |1-x| is tiny &lt;= 2**-20, suffice to compute\n       log(x) by x-x^2/2+x^3/3-x^4/4 */\n        t = ax-1;       /* t has 20 trailing zeros */\n        w = (t*t)*((float)0.5-t*((float)0.333333333333-t*(float)0.25));\n        u = ivln2_h*t;  /* ivln2_h has 16 sig. bits */\n        v = t*ivln2_l-w*ivln2;\n        t1 = u+v;\n        GET_FLOAT_WORD(is,t1);\n        SET_FLOAT_WORD(t1,is&amp;0xfffff000);\n        t2 = v-(t1-u);\n    } else {\n        float s2,s_h,s_l,t_h,t_l;\n        /* Avoid internal underflow for tiny y.  The exact value\n           of y does not matter if |y| &lt;= 2**-32.  */\n        if (iy &lt; 0x2f800000)\n          SET_FLOAT_WORD (y, (hy &amp; 0x80000000) | 0x2f800000);\n        n = 0;\n    /* take care subnormal number */\n        if(ix&lt;0x00800000)\n        {ax *= two24; n -= 24; GET_FLOAT_WORD(ix,ax); }\n        n  += ((ix)&gt;&gt;23)-0x7f;\n        j  = ix&amp;0x007fffff;\n    /* determine interval */\n        ix = j|0x3f800000;      /* normalize ix */\n        if(j&lt;=0x1cc471) k=0;    /* |x|&lt;sqrt(3/2) */\n        else if(j&lt;0x5db3d7) k=1;    /* |x|&lt;sqrt(3)   */\n        else {k=0;n+=1;ix -= 0x00800000;}\n        SET_FLOAT_WORD(ax,ix);\n\n    /* compute s = s_h+s_l = (x-1)/(x+1) or (x-1.5)/(x+1.5) */\n        u = ax-bp[k];       /* bp[0]=1.0, bp[1]=1.5 */\n        v = one/(ax+bp[k]);\n        s = u*v;\n        s_h = s;\n        GET_FLOAT_WORD(is,s_h);\n        SET_FLOAT_WORD(s_h,is&amp;0xfffff000);\n    /* t_h=ax+bp[k] High */\n        SET_FLOAT_WORD (t_h,\n                ((((ix&gt;&gt;1)|0x20000000)+0x00400000+(k&lt;&lt;21))\n                 &amp; 0xfffff000));\n        t_l = ax - (t_h-bp[k]);\n        s_l = v*((u-s_h*t_h)-s_h*t_l);\n    /* compute log(ax) */\n        s2 = s*s;\n        r = s2*s2*(L1+s2*(L2+s2*(L3+s2*(L4+s2*(L5+s2*L6)))));\n        r += s_l*(s_h+s);\n        s2  = s_h*s_h;\n        t_h = (float)3.0+s2+r;\n        GET_FLOAT_WORD(is,t_h);\n        SET_FLOAT_WORD(t_h,is&amp;0xfffff000);\n        t_l = r-((t_h-(float)3.0)-s2);\n    /* u+v = s*(1+...) */\n        u = s_h*t_h;\n        v = s_l*t_h+t_l*s;\n    /* 2/(3log2)*(s+...) */\n        p_h = u+v;\n        GET_FLOAT_WORD(is,p_h);\n        SET_FLOAT_WORD(p_h,is&amp;0xfffff000);\n        p_l = v-(p_h-u);\n        z_h = cp_h*p_h;     /* cp_h+cp_l = 2/(3*log2) */\n        z_l = cp_l*p_h+p_l*cp+dp_l[k];\n    /* log2(ax) = (s+..)*2/(3*log2) = n + dp_h + z_h + z_l */\n        t = (float)n;\n        t1 = (((z_h+z_l)+dp_h[k])+t);\n        GET_FLOAT_WORD(is,t1);\n        SET_FLOAT_WORD(t1,is&amp;0xfffff000);\n        t2 = z_l-(((t1-t)-dp_h[k])-z_h);\n    }\n\n    s = one; /* s (sign of result -ve**odd) = -1 else = 1 */\n    if(((((u_int32_t)hx&gt;&gt;31)-1)|(yisint-1))==0)\n        s = -one;   /* (-ve)**(odd int) */\n\n    /* split up y into y1+y2 and compute (y1+y2)*(t1+t2) */\n    GET_FLOAT_WORD(is,y);\n    SET_FLOAT_WORD(y1,is&amp;0xfffff000);\n    p_l = (y-y1)*t1+y*t2;\n    p_h = y1*t1;\n    z = p_l+p_h;\n    GET_FLOAT_WORD(j,z);\n    if (__builtin_expect(j&gt;0x43000000, 0))      /* if z &gt; 128 */\n        return s*huge*huge;             /* overflow */\n    else if (__builtin_expect(j==0x43000000, 0)) {  /* if z == 128 */\n        if(p_l+ovt&gt;z-p_h) return s*huge*huge;   /* overflow */\n    }\n    else if (__builtin_expect((j&amp;0x7fffffff)&gt;0x43160000, 0))/* z &lt;= -150 */\n        return s*tiny*tiny;             /* underflow */\n    else if (__builtin_expect((u_int32_t) j==0xc3160000, 0)){/* z == -150*/\n        if(p_l&lt;=z-p_h) return s*tiny*tiny;      /* underflow */\n    }\n    /*\n     * compute 2**(p_h+p_l)\n     */\n    i = j&amp;0x7fffffff;\n    k = (i&gt;&gt;23)-0x7f;\n    n = 0;\n    if(i&gt;0x3f000000) {      /* if |z| &gt; 0.5, set n = [z+0.5] */\n        n = j+(0x00800000&gt;&gt;(k+1));\n        k = ((n&amp;0x7fffffff)&gt;&gt;23)-0x7f;  /* new k for n */\n        SET_FLOAT_WORD(t,n&amp;~(0x007fffff&gt;&gt;k));\n        n = ((n&amp;0x007fffff)|0x00800000)&gt;&gt;(23-k);\n        if(j&lt;0) n = -n;\n        p_h -= t;\n    }\n    t = p_l+p_h;\n    GET_FLOAT_WORD(is,t);\n    SET_FLOAT_WORD(t,is&amp;0xfffff000);\n    u = t*lg2_h;\n    v = (p_l-(t-p_h))*lg2+t*lg2_l;\n    z = u+v;\n    w = v-(z-u);\n    t  = z*z;\n    t1  = z - t*(P1+t*(P2+t*(P3+t*(P4+t*P5))));\n    r  = (z*t1)/(t1-two)-(w+z*w);\n    z  = one-(r-z);\n    GET_FLOAT_WORD(j,z);\n    j += (n&lt;&lt;23);\n    if((j&gt;&gt;23)&lt;=0)  /* subnormal output */\n      {\n        z = __scalbnf (z, n);\n        float force_underflow = z * z;\n        math_force_eval (force_underflow);\n      }\n    else SET_FLOAT_WORD(z,j);\n    return s*z;\n}\nstrong_alias (__ieee754_powf, __powf_finite)\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "winapi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1528301043, "post_id": 50724768, "comment_id": 88458022, "body": "Windows have an invisible border around them for the drop shadow."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 7, "creation_date": 1528301797, "post_id": 50724768, "comment_id": 88458397, "body": "You are not doing anything wrong. That&#39;s specific to Windows 10, parts of the window&#39;s non-client area are transparent. See also <a href=\"https://stackoverflow.com/questions/34139450\">stackoverflow.com/questions/34139450</a>"}], "owner": {"reputation": 1711, "user_id": 941831, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZdiGx.jpg?s=128&g=1", "display_name": "Gediminas", "link": "https://stackoverflow.com/users/941831/gediminas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528300728, "creation_date": 1528300728, "question_id": 50724768, "link": "https://stackoverflow.com/questions/50724768/createwindowex-invalid-x-position-once-created", "title": "CreateWindowEx invalid X position once created", "body": "<p>I've noticed that once a window is created using \"CreateWindowEx\" with <strong>x=0, y=0</strong> position coordinates, window does not appear to be located in the the 0,0 corner of the screen. Instead it appears at the <strong>x=<em>9</em>, y=0</strong>.</p>\n\n<ul>\n<li>I'm using a single monitor. </li>\n<li>I'm not modyfing it's position anywhere else. </li>\n<li>Window is created as an overlapped parent window.</li>\n<li>When window is created, WM_MOVE get's called with x=8, y=31. (Those are \"client-area\" coordinates)</li>\n</ul>\n\n<p><em>(It's a bit strange that WM_MOVE y coordinate is 31px but in the screenshot you can see that it should be ~38px...)</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/korF5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/korF5.png\" alt=\"enter image description here\"></a></p>\n\n<p>Window is created by:</p>\n\n<pre><code>mHandle = ::CreateWindowEx(WS_EX_APPWINDOW, CLASS_NAME, APP_NAME, WS_OVERLAPPEDWINDOW, 0, 0, mWidth, mHeight, HWND_DESKTOP, nullptr, mInstance, this);\n</code></pre>\n\n<p>Any ideas on what I might be doing wrong? What might be the reason?</p>\n"}, {"tags": ["c", "security", "gcc", "c11", "tr24731"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 5, "creation_date": 1528300723, "post_id": 50724726, "comment_id": 88457832, "body": "This may provide some light on the Annex K situation: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm</a>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 7, "creation_date": 1528300861, "post_id": 50724726, "comment_id": 88457908, "body": "Their conclusion: <i>The design of the Bounds checking interfaces, though well-intentioned, suffers from far too many problems to correct. Using the APIs has been seen to lead to worse quality, less secure software than relying on established approaches or modern technologies. More effective and less intrusive approaches have become commonplace and are often preferred by users and security experts alike.  Therefore, we propose that Annex K be either removed from the next revision of the C standard, or deprecated and then removed.</i>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1528301020, "post_id": 50724726, "comment_id": 88458003, "body": "Weren&#39;t the Annex K functions a Microsoft initiative to begin with?  Or at least one that MS was deeply involved with?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1528301519, "post_id": 50724726, "comment_id": 88458268, "body": "What version of <code>gcc</code> are you using? I have version 4.7.2 and it knows about the safe <code>_s</code> versions."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1528301700, "post_id": 50724726, "comment_id": 88458348, "body": "@lurker: Where are you using GCC?  The problem is actually in the C library.  If you&#39;re using GCC on Windows and it is set up to know about the functions in the Microsoft C RunTime (CRT), then you&#39;d be able to use them.  If you&#39;re not on Windows, the functions are not generally available in the local C library.  You can find a few add-on implementations, but they&#39;re not necessarily complete.  See the N1967 paper for more details about what is (un)available."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528302259, "post_id": 50724726, "comment_id": 88458640, "body": "@JonathanLeffler under MINGW64, which I was wondering might be providing some &quot;extras&quot;? So yeah, must be that Windows is providing the extra goods."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1528302260, "post_id": 50724726, "comment_id": 88458642, "body": "@JohnBollinger: More or less.  The Annex K <code>*_s()</code> functions are closely related to, but critically different from, the <code>*_s()</code> functions that Microsoft added to MSVC.  Yes, I believe Microsoft was instrumental in getting the TR 24731-1 report produced, but the result was different in key aspects from what MS had already released in the wilds, and backwards compatibility then became a problem.  MS couldn&#39;t conform to the standard easily because it would break their backwards compatibility promises."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1528302405, "post_id": 50724726, "comment_id": 88458722, "body": "@lurker: That makes sense.  My understanding of MinGW is that it has GCC running on Windows making maximal use of the Windows services and libraries.  It therefore provides access to the MS CRT functions, including the <code>*_s()</code> functions \u2014 useful to know.  However, it emphasizes the difference between &#39;compiler&#39; and &#39;libraries&#39;, and also doesn&#39;t transfer to most other environments.  The <code>*_s()</code> functions are essentially not available except on the MS platform."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528302597, "post_id": 50724726, "comment_id": 88458811, "body": "@JonathanLeffler I understand the difference between the library and the compiler and it&#39;s worth emphasizing here. At first I assumed that along with a given version of <code>gcc</code> it came with an associated specific library set (that it was &quot;all part of the package&quot;), which evidently is not the case."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1528308460, "post_id": 50724726, "comment_id": 88461945, "body": "Also note that glibc&#39;s <code>scanf</code> implementation does include the Posix/TR-24731-2 memory allocation modifier (<code>m</code>), which is in many ways a superior interface."}], "answers": [{"comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1530115667, "post_id": 50724865, "comment_id": 89124214, "body": "Honestly the only part of Annex K that should always be implemented is <code>memset_s</code> and only to support security sensitive code. That said it would be nice to have a <code>strtok</code> replacement that&#39;s cross platform too."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1530115923, "post_id": 50724865, "comment_id": 89124338, "body": "@Mgetz: Use <code>strtok_r()</code> on Unix and <code>strtok_s()</code> on Windows; they&#39;re otherwise compatible.  Or, if you prefer, always call <code>strtok_s()</code> and use <code>static inline char *strtok_s(char **ptr, const char *delim) { return strtok_r(ptr, delim); }</code> on Unix."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1530116043, "post_id": 50724865, "comment_id": 89124402, "body": "Oh I&#39;ve done that, for <code>strtok</code> it would just be nice to have it be part of the standard rather than a happy happenstance. I do stand by the need for a <code>memset_s</code> that can&#39;t be optimized away though."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 3, "creation_date": 1530116413, "post_id": 50724865, "comment_id": 89124621, "body": "@Mgetz: I went and looked at C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.24.6.1\" rel=\"nofollow noreferrer\">&#167;7.24.6.1 The <code>memset</code> function</a> and <a href=\"http://port70.net/~nsz/c/c11/n1570.html#K.3.7.4.1\" rel=\"nofollow noreferrer\">&#167;K.3.7.4.1 The <code>memset_s</code> function</a> and the useful difference is indeed the requirement: <i>Unlike <code>memset</code>, any call to the <code>memset_s</code> function shall be evaluated strictly according to the rules of the abstract machine as described in (5.1.2.3). That is, any call to the <code>memset_s</code> function shall assume that the memory indicated by <code>s</code> and <code>n</code> may be accessible in the future and thus must contain the values indicated by <code>c</code>.</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 3, "creation_date": 1530116551, "post_id": 50724865, "comment_id": 89124705, "body": "That requirement means that calls to <code>memset_s()</code> may not be optimized away, even if the variable being set is not referenced again.  That, in turn, allows a programmer to ensure that passwords are nullified when no longer needed, and other similar operations.  The extra argument isn&#39;t really necessary; the extra semantics related to (non-)optimization most certainly are helpful in a small but significant set of use cases."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1530214170, "post_id": 50724865, "comment_id": 89168413, "body": "@JonathanLeffler: More important than a particular <code>memset_s</code> function, I think, would be a general means of forcing the compiler to synchronize the states of abstract-machine objects and the state of memory seen by the CPU.  Using an ordinary <code>memset</code> followed by a force synchronization would be equivalent to <code>memset_s</code>, but security-conscious code needs synchronization for other purposes as well.  For example, something like <code>unsigned u = *p; if (u &lt; ARRAY_SIZE) array[u]++;</code> could introduce a security vulnerability if <code>*p</code> gets loaded once for the compare and again for the indexing step."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 13, "last_activity_date": 1578691370, "last_edit_date": 1592644375, "creation_date": 1528301067, "answer_id": 50724865, "question_id": 50724726, "link": "https://stackoverflow.com/questions/50724726/why-didnt-gcc-or-glibc-implement-s-functions/50724865#50724865", "title": "Why didn&#39;t gcc (or glibc) implement _s functions?", "body": "<p>The <code>_s</code> functions are optional (<a href=\"https://port70.net/%7Ensz/c/c11/n1570.html#K\" rel=\"noreferrer\">Annex K of the C11 standard</a>).  They're widely regarded as 'not very beneficial'.</p>\n<p>In the answers to my question <a href=\"https://stackoverflow.com/q/372980/15168\">Do you use the TR-24731 &quot;safe&quot; functions?</a>, you can find information about where there are problems with the standard specification \u2014 such as crucial differences between the standard and Microsoft's implementation.  TR 24731-1 was a technical report from the C standard committee.  The report was incorporated almost verbatim \u2014 with an extra, previously omitted, function, IIRC \u2014 in the C11 standard as (optional but 'normative') Annex K.  There's also TR 24731-2 for a different set of functions \u2014 without the <code>_s</code> suffix.  It ran into resistance for a different set of reasons.</p>\n<p>Also, there is a proposal before the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/\" rel=\"noreferrer\">C Standard Committee</a> that the functions be removed from the next revision of the standard:</p>\n<ul>\n<li>N1967 <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"noreferrer\">Field Experience with Annex K \u2014 Bounds Checking Interfaces</a></li>\n</ul>\n<p>That paper is a straight-forward and compelling read of the reasons why the TR-24731 (<code>*_s()</code>) functions have not been widely implemented.</p>\n<p>Key reasons include:</p>\n<ul>\n<li>The problem is only spotted once, then fixed, and then the <code>*_s()</code> function is unnecessary.</li>\n<li>This makes it very hard to test the <code>*_s()</code> functions, or the code which uses them.</li>\n<li>It isn't easy to integrate the new functions into old code (which is where there'd be most benefit).</li>\n<li>The functions inherently slow down software with extensive but redundant checking.</li>\n</ul>\n<p>See the paper for more details.  The paper ends with the section:</p>\n<blockquote>\n<h3>Suggested Technical Corrigendum</h3>\n<p>Despite more than a decade since the original proposal and nearly ten years since the ratification of ISO/IEC TR 24731-1:2007, and almost five years since the introduction of the Bounds checking interfaces into the C standard, no viable conforming implementations has emerged. The APIs continue to be controversial and requests for implementation continue to be rejected by implementers.</p>\n<p>The design of the Bounds checking interfaces, though well-intentioned, suffers from far too many problems to correct. Using the APIs has been seen to lead to worse quality, less secure software than relying on established approaches or modern technologies. More effective and less intrusive approaches have become commonplace and are often preferred by users and security experts alike.</p>\n<p>Therefore, we propose that Annex K be either removed from the next revision of the C standard, or deprecated and then removed.</p>\n</blockquote>\n"}], "owner": {"reputation": 835, "user_id": 5841943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A62rN.png?s=128&g=1", "display_name": "suhdonghwi", "link": "https://stackoverflow.com/users/5841943/suhdonghwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3138, "favorite_count": 2, "accepted_answer_id": 50724865, "answer_count": 1, "score": 14, "last_activity_date": 1609137242, "creation_date": 1528300620, "last_edit_date": 1609137242, "question_id": 50724726, "link": "https://stackoverflow.com/questions/50724726/why-didnt-gcc-or-glibc-implement-s-functions", "title": "Why didn&#39;t gcc (or glibc) implement _s functions?", "body": "<p>_s functions, such as <code>scanf_s</code>, <code>printf_s</code> seems to be optional standard. MSVC has implemented these functions, but gcc hasn't.</p>\n<p>Is there specific reason for not implementing secure functions? Is <code>scanf</code> of glibc secure enough?</p>\n"}, {"tags": ["c", "function", "return"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 5, "creation_date": 1528299497, "post_id": 50724351, "comment_id": 88457053, "body": "Because <a href=\"https://stackoverflow.com/q/32132574/10077\">undefined behavior</a>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528299618, "post_id": 50724351, "comment_id": 88457134, "body": "Upped as this question is nicely written with a compilable example. Remember, C gives you the ability to shoot yourself in the foot. That&#39;s why you need to follow the rules. And please use a compiler that will puke if a function doesn&#39;t have an explicit return type: that&#39;s been banned since C99."}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "edited": false, "score": 0, "creation_date": 1528299784, "post_id": 50724351, "comment_id": 88457240, "body": "What program from ms office you used to compile this?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "edited": false, "score": 0, "creation_date": 1528299808, "post_id": 50724351, "comment_id": 88457256, "body": "@PetarVelev: Ahem! I have Microsoft Excel down as the best application ever written."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528299871, "post_id": 50724351, "comment_id": 88457291, "body": "@Bathsheba Then you most likely haven&#39;t seen much programs really"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528299916, "post_id": 50724351, "comment_id": 88457312, "body": "@Edenia: I&#39;ve seen enough. Sadly this ain&#39;t the site, but I can&#39;t resist. Care to state a couple of programs that you consider better?"}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528300039, "post_id": 50724351, "comment_id": 88457401, "body": "@Bathsheba Gladly: notepad, windows itself and this: <a href=\"http://i46.tinypic.com/293hj6w.jpg\" rel=\"nofollow noreferrer\">i46.tinypic.com/293hj6w.jpg</a>"}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528300045, "post_id": 50724351, "comment_id": 88457407, "body": "@Bathsheba Probably yes for its purpose. I had a different point there."}], "answers": [{"tags": [], "owner": {"reputation": 787, "user_id": 6715227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NB84a.png?s=128&g=1", "display_name": "stetoc", "link": "https://stackoverflow.com/users/6715227/stetoc"}, "is_accepted": false, "score": -1, "last_activity_date": 1528299606, "creation_date": 1528299606, "answer_id": 50724408, "question_id": 50724351, "link": "https://stackoverflow.com/questions/50724351/why-i-am-getting-sum-as-output-even-i-am-not-returning-the-value/50724408#50724408", "title": "Why i am getting sum as output even i am not returning the value?", "body": "<pre><code>int sum(int a,int b)\n {\n     int x;\n     x = a+b;\n     return x;\n }\n int main()\n { \n     printf(\"%d\",sum(2,3));\n }`\n</code></pre>\n\n<p>this is how your code should look, you're getting results <em>sometimes</em> as <code>x</code> is a local variable and its value persists on the stack until it's overwritten, so you may end up getting the value you want, or you may end up getting some garbage</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528299934, "post_id": 50724479, "comment_id": 88457322, "body": "Other than main()."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528299975, "post_id": 50724479, "comment_id": 88457357, "body": "@Bathsheba true indeed, but recursive call to main is not a very good idea, either, :)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528300008, "post_id": 50724479, "comment_id": 88457380, "body": "Worth adding to the answer though to make it correct? Note that calling main from itself is UB in C++."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528300096, "post_id": 50724479, "comment_id": 88457441, "body": "@Bathsheba there you go. :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1528302656, "post_id": 50724479, "comment_id": 88458834, "body": "@Bathsheba you gotta teach me the trick to the no-printing characters, please. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1528300030, "last_edit_date": 1528300030, "creation_date": 1528299865, "answer_id": 50724479, "question_id": 50724351, "link": "https://stackoverflow.com/questions/50724351/why-i-am-getting-sum-as-output-even-i-am-not-returning-the-value/50724479#50724479", "title": "Why i am getting sum as output even i am not returning the value?", "body": "<p>You are trying to make use of a function call return value and the function does not have a <code>return</code> statement in it.</p>\n\n<p>Directly quoting <code>C11</code>, chapter \u00a76.9.1 (<em>for functions other than <code>main()</code></em>, <sup>Footnote</sup>)</p>\n\n<blockquote>\n  <p>If the <code>}</code> that terminates a function is reached, and the value of the function call is used by\n  the caller, the behavior is undefined.</p>\n</blockquote>\n\n<hr>\n\n<p>Footnote:</p>\n\n<p>From chapter \u00a75.1.2.2.3</p>\n\n<blockquote>\n  <p>[...] reaching the <code>}</code> that terminates the\n  <code>main</code> function returns a value of 0.</p>\n</blockquote>\n"}], "owner": {"reputation": 15, "user_id": 9904204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Subham Kumar", "link": "https://stackoverflow.com/users/9904204/subham-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1528300343, "answer_count": 2, "score": -1, "last_activity_date": 1528303037, "creation_date": 1528299420, "last_edit_date": 1528303037, "question_id": 50724351, "link": "https://stackoverflow.com/questions/50724351/why-i-am-getting-sum-as-output-even-i-am-not-returning-the-value", "closed_reason": "Duplicate", "title": "Why i am getting sum as output even i am not returning the value?", "body": "<pre><code>sum(int a,int b)\n{\n    int x;\n    x = a+b;\n}\nint main()\n{ \n    printf(\"%d\",sum(2,3));\n}\n</code></pre>\n\n<p>If i remove the <code>x</code> then it will return first parameter always, but I am not returning any value.</p>\n"}, {"tags": ["c", "arrays", "string", "gcc", "char"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1528298965, "post_id": 50724171, "comment_id": 88456702, "body": "You are getting the value, but are trying to print it as a string, not a character, use <code>%c</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1528299021, "post_id": 50724171, "comment_id": 88456740, "body": "Just about any book or tutorial or lecture about C should have taught you that the <code>&quot;%s&quot;</code> format is to print <i>null-terminated strings</i> and the format for printing single characters is <code>&quot;%c&quot;</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1528299224, "post_id": 50724171, "comment_id": 88456869, "body": "Sorry, but which part of the warning was not clear?"}, {"owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528299749, "post_id": 50724171, "comment_id": 88457215, "body": "@Someprogrammerdude Understanding pointers and format strings is not easy, every beginner has problems with that. Not every book explains them in a way that works for every person."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7802042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd22afda6c9cb5d1f31a35f6e2e530fd?s=128&d=identicon&r=PG&f=1", "display_name": "jianu81", "link": "https://stackoverflow.com/users/7802042/jianu81"}, "edited": false, "score": 0, "creation_date": 1528299982, "post_id": 50724299, "comment_id": 88457365, "body": "Thanks for your answer!Do you know if char and char * can be compared  ?"}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 65, "user_id": 7802042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd22afda6c9cb5d1f31a35f6e2e530fd?s=128&d=identicon&r=PG&f=1", "display_name": "jianu81", "link": "https://stackoverflow.com/users/7802042/jianu81"}, "edited": false, "score": 0, "creation_date": 1528300363, "post_id": 50724299, "comment_id": 88457625, "body": "Didn&#39;t get exactly what you are asking ?.  Both <code>char</code> and <code>char*</code> are different. For e.g <code>char ch=&#39;h&#39;;</code> and <code>char *ptr=&quot;hello&quot;;</code> then you can compare <code>ch</code> and <code>*ptr</code> like <code>if(ch==*ptr) {  }</code> but you can&#39;t compare like <code>if(ch==ptr) {  }</code>."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 0, "last_activity_date": 1528299615, "last_edit_date": 1528299615, "creation_date": 1528299278, "answer_id": 50724299, "question_id": 50724171, "link": "https://stackoverflow.com/questions/50724171/why-do-i-get-the-location-of-the-element-of-an-array-instead-of-its-value-c/50724299#50724299", "title": "Why do i get the location of the element of an array instead of its value ? C", "body": "<p>The statement </p>\n\n<p><code>printf(\"%s\",h);</code> </p>\n\n<p>causes warning as you mentioned </p>\n\n<blockquote>\n  <p>warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2\n  has type \u2018int\u2019 [-Wformat=]</p>\n</blockquote>\n\n<p>because <code>h</code> is declared as <code>char</code> type and to print character variable format specifier is <code>%c</code>.  So use <code>%c</code> instead of <code>%s</code> as <code>%s</code> expects argument of <code>char*</code> type not <code>char</code> type.</p>\n\n<p><em>Why does h result in the position of the element,not the value ?</em> No if you print like <code>printf(\"%c\\n\",h);</code> it prints the value what <code>c[4]</code> holds.</p>\n"}, {"tags": [], "owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "is_accepted": false, "score": 0, "last_activity_date": 1528299446, "creation_date": 1528299446, "answer_id": 50724357, "question_id": 50724171, "link": "https://stackoverflow.com/questions/50724171/why-do-i-get-the-location-of-the-element-of-an-array-instead-of-its-value-c/50724357#50724357", "title": "Why do i get the location of the element of an array instead of its value ? C", "body": "<p>You are not getting the location, you are getting a random number retrieved from your memory.</p>\n\n<p><code>char h</code> is a single character.</p>\n\n<p><code>char[]</code> or <code>char*</code> is the address (memory location) of the start of a sequence of chars, one after the other.</p>\n\n<p><code>%s</code> expects you to give it a <code>char*</code>.</p>\n\n<p>You are giving it <code>h</code>, a single <code>char</code>.</p>\n\n<p>So what the computer does (for historical reasons) is that it lets you get away with this even though it is wrong (this warning should really be an error). Getting away with it means it takes the ASCII value of the character stored in h (and depending on whether you are on a 32-bit or 64-bit system, a few random bytes following that character in memory), so a random number, and interprets it as the memory address of a range of characters (a <code>char*</code>), and tries to print that.</p>\n\n<p>By all means this should crash, but you are \"getting lucky\" in that the number you happen to end up with seems to be a valid memory address in your program, so you're printing a few random characters.</p>\n\n<p>What you should be doing is something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main(){\n    char c[] = \"Hello\";\n    char h = c[4];\n    printf(\"%c\",h); // Change %s to %c, which is for char, not char*\n}\n</code></pre>\n\n<p>or alternately:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main(){\n    char c[] = \"Hello\";\n    char h[2] = { 0, 0 }; // Make sure you have an extra \"0\" at the end that indicates the end of the string.\n    h[0] = c[4];\n    printf(\"%s\",h);\n}\n</code></pre>\n\n<p>If your compiler is new enough, you could probably even write:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main(){\n    char c[] = \"Hello\";\n    char h[2] = { c[4], 0 }; // Make sure you have an extra \"0\" at the end that indicates the end of the string.\n    printf(\"%s\",h);\n}\n</code></pre>\n\n<p>for the last variant, but most older compilers can't understand that (again, for historical reasons).</p>\n"}], "owner": {"reputation": 65, "user_id": 7802042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd22afda6c9cb5d1f31a35f6e2e530fd?s=128&d=identicon&r=PG&f=1", "display_name": "jianu81", "link": "https://stackoverflow.com/users/7802042/jianu81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 50724299, "answer_count": 2, "score": -1, "last_activity_date": 1528299615, "creation_date": 1528298897, "question_id": 50724171, "link": "https://stackoverflow.com/questions/50724171/why-do-i-get-the-location-of-the-element-of-an-array-instead-of-its-value-c", "title": "Why do i get the location of the element of an array instead of its value ? C", "body": "<pre><code>#include &lt;stdio.h&gt;\nvoid main(){\n    char c[] = \"Hello\";\n    char h = c[4];\n    printf(\"%s\",h);\n</code></pre>\n\n<p>}\nWhy does h result in the position of the element,not the value ?The error is : warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018int\u2019 [-Wformat=]</p>\n"}, {"tags": ["c++", "c", "build", "cmake", "zlib"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1528300641, "post_id": 50724148, "comment_id": 88457774, "body": "You repeat <code>add_subdirectory(zlib-1.2.11)</code> call multiple times, and CMake complains about that. What about calling this only <b>once</b>?"}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 6618562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4d7da41244c1db116059e11aa6fbdd?s=128&d=identicon&r=PG&f=1", "display_name": "arun", "link": "https://stackoverflow.com/users/6618562/arun"}, "is_accepted": false, "score": 2, "last_activity_date": 1528359912, "last_edit_date": 1528359912, "creation_date": 1528359578, "answer_id": 50736239, "question_id": 50724148, "link": "https://stackoverflow.com/questions/50724148/altering-a-cmake-file-to-compile-dependency-from-source-instead-of-using-find-pa/50736239#50736239", "title": "Altering a Cmake File to compile Dependency from Source instead of using FIND_PACKAGE", "body": "<p>This is how, I add zlib to my project,</p>\n\n<pre><code>cmake_minimum_required (VERSION 3.0) \n\nproject (simple) \n\nSET(SIMPLE_EXAMPLE main.cpp) \n##Since your zlib folder is named as \"zlib-1.2.11\"\nset(ENV{PATH} \"${CMAKE_SOURCE_DIR}/zlib-1.2.11\")\n\nset(ZLIB_LIBRARY \"${CMAKE_SOURCE_DIR}/zlib-1.2.11\" ) \n\nadd_subdirectory (zlib-1.2.11)     \n\nADD_EXECUTABLE (simple ${SIMPLE_EXAMPLE}) \n\nTARGET_LINK_LIBRARIES(simple zlib)\n</code></pre>\n\n<p>In your code, <code>TARGET_LINK_LIBRARIES(xlsxio_read_${LINKTYPE} zlib-1.2.11 ${EXPAT_LIBRARIES})</code>\nreplace <code>zlib-1.2.11</code> with it with <code>zlib</code> or <code>zlibstatic</code> based on whether it is static or dynamic library.</p>\n\n<p><code>add_subdirectory (zlib-1.2.11)</code> should be done once. Preferably at the beginning of project declaration.\nThis will internally call the <code>CMakeLists.txt</code> inside <code>zlib-1.2.11</code> folder and build libraries which you can link in <code>TARGET_LINK_LIBRARIES</code>\nHope it helps. </p>\n"}], "owner": {"reputation": 1615, "user_id": 2779792, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gHE8l.png?s=128&g=1", "display_name": "Matthew James Briggs", "link": "https://stackoverflow.com/users/2779792/matthew-james-briggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1528359912, "creation_date": 1528298830, "question_id": 50724148, "link": "https://stackoverflow.com/questions/50724148/altering-a-cmake-file-to-compile-dependency-from-source-instead-of-using-find-pa", "title": "Altering a Cmake File to compile Dependency from Source instead of using FIND_PACKAGE", "body": "<p>I am trying to compile a library called <a href=\"https://github.com/brechtsanders/xlsxio/issues/26\" rel=\"nofollow noreferrer\">xlsxio</a> using Cmake. The Cmake file uses the <code>FIND_PACKAGE</code> command for Zlib (or miniz).</p>\n\n<p>Instead, I want to place the Zlib source as a subdirectory and compile from source, but I am unable to alter the xlsxio Cmake file sufficiently to make this work.</p>\n\n<p>I have the xlsxio repo, and into this I have placed a subdirectory <code>zlib-1.2.11</code>.</p>\n\n<p>The original xlsxio Cmake file is:</p>\n\n<pre><code>CMAKE_MINIMUM_REQUIRED(VERSION 2.6)\nPROJECT(xlsxio)\n\n# parameters\nOPTION(BUILD_STATIC \"Build static libraries\" ON)\nOPTION(BUILD_SHARED \"Build shared libraries\" ON)\nOPTION(BUILD_TOOLS \"Build tools\" ON)\nOPTION(BUILD_EXAMPLES \"Build examples\" ON)\nOPTION(WITH_LIBZIP \"Use libzip instead of Minizip\" OFF)\nOPTION(WITH_WIDE \"Also build UTF-16 library (libxlsxio_readw)\" OFF)\n\n# conditions\nIF(NOT BUILD_STATIC AND NOT BUILD_SHARED)\n  MESSAGE(FATAL_ERROR \"Cannot build with both BUILD_STATIC and BUILD_SHARED disabled\")\nENDIF()\n\n# dependancies\nSET(CMAKE_MODULE_PATH \"${CMAKE_CURRENT_SOURCE_DIR}/CMake\" ${CMAKE_MODULE_PATH})\nIF(WITH_LIBZIP)\nFIND_PACKAGE(LibZip REQUIRED)\nSET(ANYZIP_INCLUDE_DIRS ${LIBZIP_INCLUDE_DIRS})\nSET(ANYZIP_LIBRARIES ${LIBZIP_LIBRARIES})\nSET(ANYZIP_DEF USE_LIBZIP)\nELSE()\nFIND_PACKAGE(Minizip REQUIRED)\nSET(ANYZIP_INCLUDE_DIRS ${MINIZIP_INCLUDE_DIRS})\nSET(ANYZIP_LIBRARIES ${MINIZIP_LIBRARIES})\nSET(ANYZIP_DEF USE_MINIZIP)\nENDIF()\nFIND_PACKAGE(EXPAT REQUIRED)\nIF(WITH_WIDE)\nFIND_LIBRARY(EXPATW_LIBRARY NAMES expatw)\nENDIF()\nFIND_PACKAGE(Doxygen)\n\n# build parameters\nOPTION(BUILD_DOCUMENTATION \"Create and install API documentation (requires Doxygen)\" ${DOXYGEN_FOUND})\n#SET(CMAKE_CXX_FLAGS \"-g -Wall\")\n#ADD_SUBDIRECTORY(src)\n\nIF(NOT WIN32 AND NOT APPLE)\n  SET(THREADLIB \"-pthread\")\nENDIF()\n\nINCLUDE_DIRECTORIES(include)\nINCLUDE_DIRECTORIES(${ANYZIP_INCLUDE_DIRS})\nINCLUDE_DIRECTORIES(${EXPAT_INCLUDE_DIRS})\n\n# build definitions\nSET(ALLTARGETS)\nSET(LINKTYPES)\nIF(BUILD_STATIC)\n  LIST(APPEND LINKTYPES \"STATIC\")\nENDIF()\nIF(BUILD_SHARED)\n  LIST(APPEND LINKTYPES \"SHARED\")\nENDIF()\n\nFOREACH(LINKTYPE ${LINKTYPES})\n  ADD_LIBRARY(xlsxio_read_${LINKTYPE} ${LINKTYPE} lib/xlsxio_read.c lib/xlsxio_read_sharedstrings.c)\n  SET_TARGET_PROPERTIES(xlsxio_read_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n  SET_TARGET_PROPERTIES(xlsxio_read_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"BUILD_XLSXIO;${ANYZIP_DEF}\")\n  SET_TARGET_PROPERTIES(xlsxio_read_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_read)\n  TARGET_INCLUDE_DIRECTORIES(xlsxio_read_${LINKTYPE} PRIVATE lib)\n  TARGET_LINK_LIBRARIES(xlsxio_read_${LINKTYPE} ${ANYZIP_LIBRARIES} ${EXPAT_LIBRARIES})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_read_${LINKTYPE})\n\n  ADD_LIBRARY(xlsxio_write_${LINKTYPE} ${LINKTYPE} lib/xlsxio_write.c)\n  SET_TARGET_PROPERTIES(xlsxio_write_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n  SET_TARGET_PROPERTIES(xlsxio_write_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"BUILD_XLSXIO;${ANYZIP_DEF}\")\n  SET_TARGET_PROPERTIES(xlsxio_write_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_write)\n  TARGET_LINK_LIBRARIES(xlsxio_write_${LINKTYPE} ${ANYZIP_LIBRARIES} ${THREADLIB})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_write_${LINKTYPE})\n\n  IF(WITH_WIDE)\n    ADD_LIBRARY(xlsxio_readw_${LINKTYPE} ${LINKTYPE} lib/xlsxio_read.c lib/xlsxio_read_sharedstrings.c)\n    SET_TARGET_PROPERTIES(xlsxio_readw_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n    SET_TARGET_PROPERTIES(xlsxio_readw_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"XML_UNICODE;BUILD_XLSXIO;${ANYZIP_DEF}\")\n    SET_TARGET_PROPERTIES(xlsxio_readw_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_readw)\n    TARGET_INCLUDE_DIRECTORIES(xlsxio_readw_${LINKTYPE} PRIVATE lib)\n    TARGET_LINK_LIBRARIES(xlsxio_readw_${LINKTYPE} ${ANYZIP_LIBRARIES} ${EXPATW_LIBRARY})\n    SET(ALLTARGETS ${ALLTARGETS} xlsxio_readw_${LINKTYPE})\n\n    #ADD_LIBRARY(xlsxio_writew_${LINKTYPE} ${LINKTYPE} lib/xlsxio_write.c)\n    #SET_TARGET_PROPERTIES(xlsxio_writew_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n    #SET_TARGET_PROPERTIES(xlsxio_writew_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"XML_UNICODE;BUILD_XLSXIO;${ANYZIP_DEF}\")\n    #SET_TARGET_PROPERTIES(xlsxio_writew_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_write_w)\n    #TARGET_LINK_LIBRARIES(xlsxio_writew_${LINKTYPE} ${ANYZIP_LIBRARIES} ${THREADLIB})\n    #SET(ALLTARGETS ${ALLTARGETS} xlsxio_writew_${LINKTYPE})\n  ENDIF()\n\n  SET(EXELINKTYPE ${LINKTYPE})\nENDFOREACH()\n\nIF(BUILD_TOOLS)\n  ADD_EXECUTABLE(xlsxio_xlsx2csv src/xlsxio_xlsx2csv.c)\n  TARGET_LINK_LIBRARIES(xlsxio_xlsx2csv xlsxio_read_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_xlsx2csv)\n\n  ADD_EXECUTABLE(xlsxio_csv2xlsx src/xlsxio_csv2xlsx.c)\n  TARGET_LINK_LIBRARIES(xlsxio_csv2xlsx xlsxio_write_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_csv2xlsx)\nENDIF()\n\nIF(BUILD_EXAMPLES)\n  ADD_EXECUTABLE(example_xlsxio_write_getversion examples/example_xlsxio_write_getversion.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_write_getversion xlsxio_write_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_write_getversion)\n\n  ADD_EXECUTABLE(example_xlsxio_write examples/example_xlsxio_write.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_write xlsxio_write_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_write)\n\n  ADD_EXECUTABLE(example_xlsxio_read examples/example_xlsxio_read.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_read xlsxio_read_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_read)\n\n  ADD_EXECUTABLE(example_xlsxio_read_advanced examples/example_xlsxio_read_advanced.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_read_advanced xlsxio_read_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_read_advanced)\n\n  IF(WITH_WIDE)\n    ADD_EXECUTABLE(example_xlsxio_readw examples/example_xlsxio_read.c)\n    SET_TARGET_PROPERTIES(example_xlsxio_readw PROPERTIES COMPILE_DEFINITIONS \"XML_UNICODE\")\n    TARGET_LINK_LIBRARIES(example_xlsxio_readw xlsxio_readw_${EXELINKTYPE})\n    SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_readw)\n  ENDIF()\nENDIF()\n\nIF(BUILD_DOCUMENTATION)\n  IF(NOT DOXYGEN_FOUND)\n    MESSAGE(FATAL_ERROR \"Doxygen is needed to build the documentation.\")\n  ENDIF()\n  ADD_CUSTOM_TARGET(doc ALL\n    COMMAND ${DOXYGEN_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/doc/Doxyfile\n    #WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}\n    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}\n    COMMENT \"Generating API documentation with Doxygen\"\n    VERBATIM\n  )\n  INSTALL(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/doc/man\n    DESTINATION .\n  )\n  #INSTALL(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/doc/html\n  #  DESTINATION share/doc\n  #)\nENDIF()\n\n# install definitions\nINSTALL(TARGETS ${ALLTARGETS}\n  ARCHIVE DESTINATION lib\n  LIBRARY DESTINATION lib\n  RUNTIME DESTINATION bin\n)\nINSTALL(DIRECTORY include/\n  DESTINATION include \n  FILES_MATCHING PATTERN \"xlsxio*.h\"\n)\n</code></pre>\n\n<p>I have altered this to:</p>\n\n<pre><code>CMAKE_MINIMUM_REQUIRED(VERSION 3.0)\nPROJECT(xlsxio)\n\n# parameters\nOPTION(BUILD_STATIC \"Build static libraries\" ON)\nOPTION(BUILD_SHARED \"Build shared libraries\" OFF)\nOPTION(BUILD_TOOLS \"Build tools\" ON)\nOPTION(BUILD_EXAMPLES \"Build examples\" OFF)\nOPTION(WITH_LIBZIP \"Use libzip instead of Minizip\" ON)\nOPTION(WITH_WIDE \"Also build UTF-16 library (libxlsxio_readw)\" OFF)\n\n# conditions\nIF(NOT BUILD_STATIC AND NOT BUILD_SHARED)\n  MESSAGE(FATAL_ERROR \"Cannot build with both BUILD_STATIC and BUILD_SHARED disabled\")\nENDIF()\n\n# dependancies\nSET(CMAKE_MODULE_PATH \"${CMAKE_CURRENT_SOURCE_DIR}/CMake\" ${CMAKE_MODULE_PATH})\n\nSET(ANYZIP_INCLUDE_DIRS zlib-1.2.11)\nSET(ANYZIP_LIBRARIES zlib-1.2.11)\nSET(ANYZIP_DEF USE_LIBZIP)\n\nFIND_PACKAGE(EXPAT REQUIRED)\nIF(WITH_WIDE)\nFIND_LIBRARY(EXPATW_LIBRARY NAMES expatw)\nENDIF()\nFIND_PACKAGE(Doxygen)\n\n# build parameters\nOPTION(BUILD_DOCUMENTATION \"Create and install API documentation (requires Doxygen)\" ${DOXYGEN_FOUND})\n#SET(CMAKE_CXX_FLAGS \"-g -Wall\")\n#ADD_SUBDIRECTORY(src)\n\nIF(NOT WIN32 AND NOT APPLE)\n  SET(THREADLIB \"-pthread\")\nENDIF()\n\nINCLUDE_DIRECTORIES(include)\nINCLUDE_DIRECTORIES(${ANYZIP_INCLUDE_DIRS})\nINCLUDE_DIRECTORIES(${EXPAT_INCLUDE_DIRS})\n\n# build definitions\nSET(ALLTARGETS)\nSET(LINKTYPES)\nIF(BUILD_STATIC)\n  LIST(APPEND LINKTYPES \"STATIC\")\nENDIF()\nIF(BUILD_SHARED)\n  LIST(APPEND LINKTYPES \"SHARED\")\nENDIF()\n\nFOREACH(LINKTYPE ${LINKTYPES})\n  ADD_LIBRARY(xlsxio_read_${LINKTYPE} ${LINKTYPE} lib/xlsxio_read.c lib/xlsxio_read_sharedstrings.c)\n  SET_TARGET_PROPERTIES(xlsxio_read_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n  SET_TARGET_PROPERTIES(xlsxio_read_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"BUILD_XLSXIO;${ANYZIP_DEF}\")\n  SET_TARGET_PROPERTIES(xlsxio_read_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_read)\n  TARGET_INCLUDE_DIRECTORIES(xlsxio_read_${LINKTYPE} PRIVATE lib)\n  add_subdirectory(zlib-1.2.11)\n  TARGET_LINK_LIBRARIES(xlsxio_read_${LINKTYPE} zlib-1.2.11 ${EXPAT_LIBRARIES})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_read_${LINKTYPE})\n\n  ADD_LIBRARY(xlsxio_write_${LINKTYPE} ${LINKTYPE} lib/xlsxio_write.c)\n  SET_TARGET_PROPERTIES(xlsxio_write_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n  SET_TARGET_PROPERTIES(xlsxio_write_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"BUILD_XLSXIO;${ANYZIP_DEF}\")\n  SET_TARGET_PROPERTIES(xlsxio_write_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_write)\n  add_subdirectory(zlib-1.2.11)\n  TARGET_LINK_LIBRARIES(xlsxio_write_${LINKTYPE} ${ANYZIP_LIBRARIES} ${THREADLIB})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_write_${LINKTYPE})\n\n  IF(WITH_WIDE)\n    ADD_LIBRARY(xlsxio_readw_${LINKTYPE} ${LINKTYPE} lib/xlsxio_read.c lib/xlsxio_read_sharedstrings.c)\n    SET_TARGET_PROPERTIES(xlsxio_readw_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n    SET_TARGET_PROPERTIES(xlsxio_readw_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"XML_UNICODE;BUILD_XLSXIO;${ANYZIP_DEF}\")\n    SET_TARGET_PROPERTIES(xlsxio_readw_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_readw)\n    TARGET_INCLUDE_DIRECTORIES(xlsxio_readw_${LINKTYPE} PRIVATE lib)\n    add_subdirectory(zlib-1.2.11)\n    TARGET_LINK_LIBRARIES(xlsxio_readw_${LINKTYPE} ${ANYZIP_LIBRARIES} ${EXPATW_LIBRARY})\n    SET(ALLTARGETS ${ALLTARGETS} xlsxio_readw_${LINKTYPE})\n\n    #ADD_LIBRARY(xlsxio_writew_${LINKTYPE} ${LINKTYPE} lib/xlsxio_write.c)\n    #SET_TARGET_PROPERTIES(xlsxio_writew_${LINKTYPE} PROPERTIES DEFINE_SYMBOL \"BUILD_XLSXIO_DLL\")\n    #SET_TARGET_PROPERTIES(xlsxio_writew_${LINKTYPE} PROPERTIES COMPILE_DEFINITIONS \"XML_UNICODE;BUILD_XLSXIO;${ANYZIP_DEF}\")\n    #SET_TARGET_PROPERTIES(xlsxio_writew_${LINKTYPE} PROPERTIES OUTPUT_NAME xlsxio_write_w)\n    #TARGET_LINK_LIBRARIES(xlsxio_writew_${LINKTYPE} ${ANYZIP_LIBRARIES} ${THREADLIB})\n    #SET(ALLTARGETS ${ALLTARGETS} xlsxio_writew_${LINKTYPE})\n  ENDIF()\n\n  SET(EXELINKTYPE ${LINKTYPE})\nENDFOREACH()\n\nIF(BUILD_TOOLS)\n  ADD_EXECUTABLE(xlsxio_xlsx2csv src/xlsxio_xlsx2csv.c)\n  TARGET_LINK_LIBRARIES(xlsxio_xlsx2csv xlsxio_read_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_xlsx2csv)\n\n  ADD_EXECUTABLE(xlsxio_csv2xlsx src/xlsxio_csv2xlsx.c)\n  TARGET_LINK_LIBRARIES(xlsxio_csv2xlsx xlsxio_write_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} xlsxio_csv2xlsx)\nENDIF()\n\nIF(BUILD_EXAMPLES)\n  ADD_EXECUTABLE(example_xlsxio_write_getversion examples/example_xlsxio_write_getversion.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_write_getversion xlsxio_write_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_write_getversion)\n\n  ADD_EXECUTABLE(example_xlsxio_write examples/example_xlsxio_write.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_write xlsxio_write_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_write)\n\n  ADD_EXECUTABLE(example_xlsxio_read examples/example_xlsxio_read.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_read xlsxio_read_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_read)\n\n  ADD_EXECUTABLE(example_xlsxio_read_advanced examples/example_xlsxio_read_advanced.c)\n  TARGET_LINK_LIBRARIES(example_xlsxio_read_advanced xlsxio_read_${EXELINKTYPE})\n  SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_read_advanced)\n\n  IF(WITH_WIDE)\n    ADD_EXECUTABLE(example_xlsxio_readw examples/example_xlsxio_read.c)\n    SET_TARGET_PROPERTIES(example_xlsxio_readw PROPERTIES COMPILE_DEFINITIONS \"XML_UNICODE\")\n    TARGET_LINK_LIBRARIES(example_xlsxio_readw xlsxio_readw_${EXELINKTYPE})\n    SET(ALLTARGETS ${ALLTARGETS} example_xlsxio_readw)\n  ENDIF()\nENDIF()\n\nIF(BUILD_DOCUMENTATION)\n  IF(NOT DOXYGEN_FOUND)\n    MESSAGE(FATAL_ERROR \"Doxygen is needed to build the documentation.\")\n  ENDIF()\n  ADD_CUSTOM_TARGET(doc ALL\n    COMMAND ${DOXYGEN_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/doc/Doxyfile\n    #WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}\n    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}\n    COMMENT \"Generating API documentation with Doxygen\"\n    VERBATIM\n  )\n  INSTALL(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/doc/man\n    DESTINATION .\n  )\n  #INSTALL(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/doc/html\n  #  DESTINATION share/doc\n  #)\nENDIF()\n\n# install definitions\nINSTALL(TARGETS ${ALLTARGETS}\n  ARCHIVE DESTINATION lib\n  LIBRARY DESTINATION lib\n  RUNTIME DESTINATION bin\n)\nINSTALL(DIRECTORY include/\n  DESTINATION include \n  FILES_MATCHING PATTERN \"xlsxio*.h\"\n)\n</code></pre>\n\n<p>Cmake complains:</p>\n\n<pre><code>CMake Error at CMakeLists.txt:78 (add_subdirectory):\n      The binary directory\n\n        /Users/x/Documents/repos/xlsx-test/xlsxio/cmake-build-debug/zlib-1.2.11\n\n      is already used to build a source directory.  It cannot be used to build\n      source directory\n\n        /Users/x/Documents/repos/xlsx-test/xlsxio/zlib-1.2.11\n\n      Specify a unique binary directory name.\n</code></pre>\n\n<p>I have spent several hours trying many different approaches without success. Any help would be appreciated. A working Cmake file would be a Godsend. I can use a higher minimum Cmake version if that helps.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 6, "creation_date": 1528296207, "post_id": 50723206, "comment_id": 88454797, "body": "What is your problem?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1528296212, "post_id": 50723206, "comment_id": 88454804, "body": "What about you code does not work?"}, {"owner": {"reputation": 310, "user_id": 9733825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad2bff035413be52ad32f8d14bd71fbf?s=128&d=identicon&r=PG&f=1", "display_name": "Henkan", "link": "https://stackoverflow.com/users/9733825/henkan"}, "edited": false, "score": 0, "creation_date": 1528296220, "post_id": 50723206, "comment_id": 88454812, "body": "Give us the error returned"}, {"owner": {"reputation": 494, "user_id": 1383880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258c2172c30ab4b732d6fb83ffb2c586?s=128&d=identicon&r=PG", "display_name": "CannedMoose", "link": "https://stackoverflow.com/users/1383880/cannedmoose"}, "edited": false, "score": 5, "creation_date": 1528296292, "post_id": 50723206, "comment_id": 88454858, "body": "Did you try <code>scanf_s(&quot;%f&quot;, &amp;zahlen[i]);</code>?"}, {"owner": {"reputation": 59, "user_id": 9706897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LLVV7T94LFc/AAAAAAAAAAI/AAAAAAAAAYA/SkHkQQBfqL0/photo.jpg?sz=128", "display_name": "Serkan K.", "link": "https://stackoverflow.com/users/9706897/serkan-k"}, "edited": false, "score": 0, "creation_date": 1528296324, "post_id": 50723206, "comment_id": 88454884, "body": "If we run the program, the results are always 0"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1528296347, "post_id": 50723206, "comment_id": 88454905, "body": "Look at the comment just above yours"}, {"owner": {"reputation": 59, "user_id": 9706897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LLVV7T94LFc/AAAAAAAAAAI/AAAAAAAAAYA/SkHkQQBfqL0/photo.jpg?sz=128", "display_name": "Serkan K.", "link": "https://stackoverflow.com/users/9706897/serkan-k"}, "edited": false, "score": 0, "creation_date": 1528296393, "post_id": 50723206, "comment_id": 88454935, "body": "CannedMoose, yes I tried that"}, {"owner": {"reputation": 59, "user_id": 9706897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LLVV7T94LFc/AAAAAAAAAAI/AAAAAAAAAYA/SkHkQQBfqL0/photo.jpg?sz=128", "display_name": "Serkan K.", "link": "https://stackoverflow.com/users/9706897/serkan-k"}, "edited": false, "score": 0, "creation_date": 1528296520, "post_id": 50723206, "comment_id": 88455012, "body": "The values is always 0, but the program kinda works"}, {"owner": {"reputation": 494, "user_id": 1383880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258c2172c30ab4b732d6fb83ffb2c586?s=128&d=identicon&r=PG", "display_name": "CannedMoose", "link": "https://stackoverflow.com/users/1383880/cannedmoose"}, "edited": false, "score": 0, "creation_date": 1528296633, "post_id": 50723206, "comment_id": 88455094, "body": "@Serkan Did you enter <code>.</code> or something else as decimal separator? You need to enter <code>.</code> for floating point values."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1528296733, "post_id": 50723206, "comment_id": 88455166, "body": "You ignore the success/failure indication of the scanner function. You state the values are always 0 (which is probably the quasi-random value of an uninitialised variable - and UB). You do division by those values. You should get division by zero problems. The code cannot possibly achieve any of its goals. I think you have a weird idea of &quot;kinda works&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1528297251, "post_id": 50723206, "comment_id": 88455498, "body": "Save time.  Enable all compiler warnings.  A well enabled compiler will report issues with <code>float zahlen[2]; scanf_s(&quot;%d&quot;, &amp;zahlen[i]);</code> and save us all time.  This is more efficient that posting on SO."}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1528296398, "creation_date": 1528296398, "answer_id": 50723299, "question_id": 50723206, "link": "https://stackoverflow.com/questions/50723206/how-to-write-a-program-that-reads-2-float-numbers-using-scanf-with-sum-diffe/50723299#50723299", "title": "How to write a program, that reads 2 float numbers using scanf() with sum, difference, product, division and average?", "body": "<p>You handle floats</p>\n\n<pre><code> float zahlen[2];\n</code></pre>\n\n<p>You scan for integers, using <code>\"%d\"</code>:</p>\n\n<pre><code>scanf_s(\"%d\", &amp;zahlen[i]);\n</code></pre>\n\n<p>Whatever problem you are referring to, this needs to be fixed.<br>\nTo do so read the documentation for scanner functions and afterwards:</p>\n\n<p><a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html</a><br>\n<a href=\"https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\">How to read / parse input in C? The FAQ</a></p>\n"}, {"tags": [], "owner": {"reputation": 590, "user_id": 9848932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a484cace64c76f71d3bb1fab9410761?s=128&d=identicon&r=PG&f=1", "display_name": "jdc", "link": "https://stackoverflow.com/users/9848932/jdc"}, "is_accepted": true, "score": 1, "last_activity_date": 1528296456, "creation_date": 1528296456, "answer_id": 50723321, "question_id": 50723206, "link": "https://stackoverflow.com/questions/50723206/how-to-write-a-program-that-reads-2-float-numbers-using-scanf-with-sum-diffe/50723321#50723321", "title": "How to write a program, that reads 2 float numbers using scanf() with sum, difference, product, division and average?", "body": "<p>Your <code>scanf_s()</code> function is trying to read an integer in base 10 and store it into a float variable.  Therefore when you try to enter <code>3.14</code> for the first number, <code>scanf_s()</code> will stop at the \".\" character (but leave it in the input stream).  When you try to read the second decimal integer, it will enter an infinite loop waiting for a character it can consume.</p>\n\n<p>Short answer: Change the <code>%d</code> in <code>scanf_s()</code> to <code>%f</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 9706897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LLVV7T94LFc/AAAAAAAAAAI/AAAAAAAAAYA/SkHkQQBfqL0/photo.jpg?sz=128", "display_name": "Serkan K.", "link": "https://stackoverflow.com/users/9706897/serkan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 50723321, "answer_count": 2, "score": -4, "last_activity_date": 1528296456, "creation_date": 1528296121, "question_id": 50723206, "link": "https://stackoverflow.com/questions/50723206/how-to-write-a-program-that-reads-2-float-numbers-using-scanf-with-sum-diffe", "title": "How to write a program, that reads 2 float numbers using scanf() with sum, difference, product, division and average?", "body": "<p>I have a problem with my code in C.\nAll I have done is this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    float zahlen[2];\n    for (int i = 0; i &lt; 2; i++) {\n        printf(\"%d. Zahl\", i + 1);\n        scanf_s(\"%d\", &amp;zahlen[i]);\n    }\n    printf(\"Division: %f\\n\", zahlen[0]/zahlen[1]);\n    printf(\"Produkt: %f\\n\", zahlen[0]*zahlen[1]);\n    printf(\"Summe: %f\\n\", zahlen[0]+zahlen[1]);\n    printf(\"Diffenrenz: %f\\n\", zahlen[0]-zahlen[1]);\n    printf(\"Mittelwert: %f\\n\", (zahlen[0]+zahlen[1])/2);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Would appreciate your help. Thanks.</p>\n"}, {"tags": ["c", "memory", "memory-management", "dynamic-memory-allocation", "memory-fragmentation"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1528294577, "post_id": 50722561, "comment_id": 88453668, "body": "What makes you think that reallocating the array is waste? See second half of <a href=\"https://stackoverflow.com/a/47913740/841108\">this answer</a>"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528296348, "post_id": 50722561, "comment_id": 88454906, "body": "Does this array reallocation cause a measurable performance problem in your application?"}], "answers": [{"tags": [], "owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "is_accepted": true, "score": 2, "last_activity_date": 1528362936, "last_edit_date": 1528362936, "creation_date": 1528295464, "answer_id": 50722992, "question_id": 50722561, "link": "https://stackoverflow.com/questions/50722561/what-algorithm-to-apply-for-continuious-reallocation-of-small-memory-chunks/50722992#50722992", "title": "What algorithm to apply for continuious reallocation of small memory chunks?", "body": "<p>The best algorithm in this case would be <a href=\"https://en.wikipedia.org/wiki/Free_list\" rel=\"nofollow noreferrer\">free list</a> allocator + binary search tree.</p>\n\n<p>You are asking one big memory chunk from system, and then allocating memory blocks of fixed size from this chunk. When chunk is full you are allocating another one, and link them into red-black or AVL binary search interval tree (otherwise searching for a chunk during <code>free</code> by iterating over the chunks list becomes a bottleneck)</p>\n\n<p>And in the same time, multi-threading and thread synchronization becomes important. If you will simply use mutexes or trivial spin-locks, you will found you libc malloc works much faster than your custom memory allocator. Solution can be found in <a href=\"https://en.wikipedia.org/wiki/Hazard_pointer\" rel=\"nofollow noreferrer\">Hazard pointer</a>, i.e. each thread have it's own memory allocator (or one allocator per CPU core). This will add another problem - when one thread allocates memory and another releasing it, this will require searching for the exact allocator during free function, and strick locking or lock-free data structures.</p>\n\n<p>The best option - you can use <a href=\"http://jemalloc.net/\" rel=\"nofollow noreferrer\">jemalloc</a>, <a href=\"http://goog-perftools.sourceforge.net/doc/tcmalloc.html\" rel=\"nofollow noreferrer\">tcmalloc</a> or any another generic propose fast memory allocator to replace your libc (i.e. pdmalloc) default allocator completely or partially.</p>\n"}, {"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 2, "last_activity_date": 1528309573, "last_edit_date": 1528309573, "creation_date": 1528299730, "answer_id": 50724439, "question_id": 50722561, "link": "https://stackoverflow.com/questions/50722561/what-algorithm-to-apply-for-continuious-reallocation-of-small-memory-chunks/50724439#50724439", "title": "What algorithm to apply for continuious reallocation of small memory chunks?", "body": "<p>If you need to track these various buffers due to the functionality you are delivering then you are going to need to have some kind of buffer management functionality which includes allocating memory for the buffer management.</p>\n\n<p>However if you are worried about memory fragmentation, that is a different question.</p>\n\n<p>I have seen a lot written about how using <code>malloc()</code> and <code>free()</code> leads to memory fragmentation along with various ways to reduce or eliminate this problem.</p>\n\n<p>I suspect years ago, it may have been a problem. However these days I question whether most programmers can do as good a job at managing memory as the people who develop the run time of modern compilers. I am sure there are special applications but compiler runtime development is very much aware of memory fragmentation and there are a number of approaches they use to help mitigate the problem.</p>\n\n<p>For instance here is an older article from 2010 describing a modern compiler runtime implements <code>malloc()</code> and <code>free()</code>. <a href=\"https://www.cocoawithlove.com/2010/05/look-at-how-malloc-works-on-mac.html\" rel=\"nofollow noreferrer\">A look at how malloc works on the Mac</a></p>\n\n<p>Here is a bit about the <a href=\"https://www.gnu.org/software/libc/manual/html_node/The-GNU-Allocator.html\" rel=\"nofollow noreferrer\">GNU allocator</a>.</p>\n\n<p>This article from Nov of 2004 from IBM describes some of the considerations for memory management, <a href=\"https://www.ibm.com/developerworks/library/l-memory/index.html\" rel=\"nofollow noreferrer\">Inside memory management</a> and provides what they call \"code for a simplistic implementation of malloc and free to help demonstrate what is involved with managing memory.\" Notice that this is a simplistic example meant to illustrate some of the issues and is not a demonstration of current practice.</p>\n\n<p>I did a quick console application with Visual Studio 2015 that called a C function in a C source file that interspersed <code>malloc()</code> and <code>free()</code> calls of various sizes. I ran this while watching the process in Windows Task Manager. Peak Working Set (Memory) maxed out at 34MB. Watching the Memory (Private Working Set) measurement, I saw it rise and fall as the program ran.</p>\n\n<pre><code>#include &lt;malloc.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid funcAlloc(void)\n{\n    char *p[50000] = { 0 };\n    int   i;\n\n    for (i = 0; i &lt; 50000; i+= 2) {\n        p[i] = malloc(32 + (i % 1000));\n    }\n\n    for (i = 0; i &lt; 50000; i += 2) {\n        free(p[i]); p[i] = 0;\n    }\n    for (i = 1; i &lt; 50000; i += 2) {\n        p[i] = malloc(32 + (i % 1000));\n    }\n    for (i = 1; i &lt; 50000; i += 2) {\n        free(p[i]); p[i] = 0;\n    }\n\n    for (i = 0; i &lt; 50000; i++) {\n        p[i] = malloc(32 + (i % 1000));\n    }\n\n    for (i = 0; i &lt; 50000; i += 3) {\n        free(p[i]); p[i] = 0;\n    }\n    for (i = 1; i &lt; 50000; i += 3) {\n        free(p[i]); p[i] = 0;\n    }\n    for (i = 2; i &lt; 50000; i += 3) {\n        free(p[i]); p[i] = 0;\n    }\n}\n\nvoid funcMain(void)\n{\n    for (int i = 0; i &lt; 5000; i++) {\n        funcAlloc();\n    }\n}\n</code></pre>\n\n<p>Probably the only consideration that a programmer should practice to help the memory allocator under some conditions of churning memory with <code>malloc()</code> and <code>free()</code> is to use a set of standard buffer sizes for varying lengths of data.</p>\n\n<p>For example, if you are creating temporary buffers for several different data structs which are of varying sizes, use a standard buffer size of the largest <code>struct</code> for all of the buffers so that the memory manager is working with equal sized chunks of memory so it is able to more efficiently reuse chunks of free memory. I have seen some dynamic data structure functionality use this approach such as allocating a dynamic string with a minimum length of 32 characters or rounding up a buffer request to a multiple of four or eight.</p>\n"}], "owner": {"reputation": 87, "user_id": 9791115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mohammad Nabil", "link": "https://stackoverflow.com/users/9791115/mohammad-nabil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 50722992, "answer_count": 2, "score": 2, "last_activity_date": 1528362936, "creation_date": 1528294238, "question_id": 50722561, "link": "https://stackoverflow.com/questions/50722561/what-algorithm-to-apply-for-continuious-reallocation-of-small-memory-chunks", "title": "What algorithm to apply for continuious reallocation of small memory chunks?", "body": "<p>In C program I face transactions that require to have alot of memory chunks, I need to know if there is an algorithm or best practice teqnique used to handle all these malloc/free, I've used arrays to store these memory chunks but at some point the array itself gets full and reallocating the array is just more waste, what is the elegant way to handle this issue?</p>\n"}, {"tags": ["c++", "c", "leda"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528294267, "post_id": 50722467, "comment_id": 88453451, "body": "Add  <code>#include &lt;limits.h&gt;</code> before <code>#include &lt;LEDA&#47;core&#47;string.h&gt;</code> and add <code>return 0;</code> into main function."}, {"owner": {"reputation": 1, "user_id": 9878362, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nn Kk", "link": "https://stackoverflow.com/users/9878362/nn-kk"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528294560, "post_id": 50722467, "comment_id": 88453656, "body": "Thaaaanks!!!!!!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528301989, "post_id": 50722467, "comment_id": 88458489, "body": "<code>return</code> is optional in <code>main</code>."}], "owner": {"reputation": 1, "user_id": 9878362, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nn Kk", "link": "https://stackoverflow.com/users/9878362/nn-kk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1528294760, "creation_date": 1528293968, "last_edit_date": 1528294760, "question_id": 50722467, "link": "https://stackoverflow.com/questions/50722467/compiling-error-leda-6-1", "title": "Compiling error LEDA 6.1", "body": "<p>I am trying to compile the simple Hello World! program from this tutorial <a href=\"http://www.leda-tutorial.org/en/unofficial/ch01s03s01.html\" rel=\"nofollow noreferrer\">LEDA Tutorial, section 1.3</a> using LEDA 6.1 on the UNIX system of my department. </p>\n\n<pre><code>#include &lt;LEDA/core/string.h&gt;\n#include &lt;iostream&gt;\n\nusing leda::string;\nusing std::cout;\n\nint main ()\n{\n\n    string msg = \"Hello World!\";\n    cout &lt;&lt; msg &lt;&lt; \"\\n\";\n\n}\n</code></pre>\n\n<p>After setting the environment variable </p>\n\n<pre><code>LEDAROOT = /usr/local/LEDA-6.1\nexport LEDAROOT\n</code></pre>\n\n<p>I try to compile the file <code>leda1.c</code> containing the upper code</p>\n\n<pre><code>g++ -c leda1.c -I$LEDAROOT/incl\n</code></pre>\n\n<p>I get some errors witch are:</p>\n\n<pre><code>In file included from /usr/local/LEDA-6.1/incl/LEDA/system/basic.h:70,\n                 from /usr/local/LEDA-6.1/incl/LEDA/core/string.h:16,\n                 from leda1.c:1:\n/usr/local/LEDA-6.1/incl/LEDA/system/misc.h: In function \u2018int leda::Max_Value(int&amp;)\u2019:\n/usr/local/LEDA-6.1/incl/LEDA/system/misc.h:120: error: \u2018INT_MAX\u2019 was not declared in this scope\n/usr/local/LEDA-6.1/incl/LEDA/system/misc.h: In function \u2018int leda::Min_Value(int&amp;)\u2019:\n/usr/local/LEDA-6.1/incl/LEDA/system/misc.h:121: error: \u2018INT_MAX\u2019 was not declared in this scope\n</code></pre>\n\n<p>Can anyone help me with this problem?</p>\n"}, {"tags": ["c", "casting", "char", "quotes", "assign"], "comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 1, "creation_date": 1528293387, "post_id": 50722200, "comment_id": 88452856, "body": "I think this isn&#39;t the code you&#39;re actually looking at.  If you set a char* to 3 you will most likely get a segmentation fault (or garbage output) when trying to print it.  Maybe it&#39;s &quot;3&quot; ?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1528293448, "post_id": 50722200, "comment_id": 88452886, "body": "@cleblanc: Or maybe the print is <code>printf(&quot;%d\\n&quot;, test);</code>"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1528293508, "post_id": 50722200, "comment_id": 88452930, "body": "@FredLarson Gotta love undefined behavior."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1528293716, "post_id": 50722200, "comment_id": 88453064, "body": "Something like is not a very precise definition. What is exactly the line and how is used <code>test</code> later?"}, {"owner": {"reputation": 711, "user_id": 4802475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZETd6.png?s=128&g=1", "display_name": "Paradowski", "link": "https://stackoverflow.com/users/4802475/paradowski"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1528293737, "post_id": 50722200, "comment_id": 88453079, "body": "Thank you @FredLarson - it indeed looks like the comma operator"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1528293776, "post_id": 50722200, "comment_id": 88453115, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52550/what-does-the-comma-operator-do\">What does the comma operator , do?</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1528313582, "post_id": 50722200, "comment_id": 88464398, "body": "Hellofa way to generate a pointer with address <code>3</code> via the <i>comma operator</i> and a parenthetical grouping. Attempting to access address <code>3</code> will come with a sudden surprise.."}], "answers": [{"comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 1, "creation_date": 1528293844, "post_id": 50722395, "comment_id": 88453160, "body": "printing a char* with <code>%d</code> is still undefined behavior"}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1528294045, "post_id": 50722395, "comment_id": 88453296, "body": "yup @cleblanc agree. I thought of writing it but forgot to put it. modified."}, {"owner": {"reputation": 711, "user_id": 4802475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZETd6.png?s=128&g=1", "display_name": "Paradowski", "link": "https://stackoverflow.com/users/4802475/paradowski"}, "edited": false, "score": 0, "creation_date": 1528295016, "post_id": 50722395, "comment_id": 88453974, "body": "Thank you for explanation. To make things clear: the int value enclosed in my post in this assignment is not there by mistake. However I don&#39;t know why the original programmer put there this integer."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1528295240, "post_id": 50722395, "comment_id": 88454133, "body": "Welcome !! May be original programmer wanted to know whether one understood comma operator correctly or not. But you should be aware of all possible scenario specially with pointers."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 3, "last_activity_date": 1528294165, "last_edit_date": 1528294165, "creation_date": 1528293760, "answer_id": 50722395, "question_id": 50722200, "link": "https://stackoverflow.com/questions/50722200/what-is-happening-in-this-char-assignment-comma-operator-with-mixed-types/50722395#50722395", "title": "What is happening in this char* assignment? (comma operator with mixed types)", "body": "<p>Its because of <code>comma</code> operator &amp; manual page of <code>operator</code> says <em>when in an expression if multiple comma are there</em> then solve from <code>Left to Right</code> but it considers <strong>right most</strong> argument. </p>\n\n<p>In the statement </p>\n\n<pre><code>char* test = (\"someChar\", \"someChar2\", 3);\n</code></pre>\n\n<p><code>test</code> get assigned with right most argument that is <code>3</code>. And now it looks like</p>\n\n<pre><code>char *test = 3;\n</code></pre>\n\n<p>since <code>test</code> is <code>char pointer</code> &amp; it should initialize with <em>valid address</em> and <code>3</code> is not the valid address. So if you are just printing <code>test</code> like\n<code>printf(\"%d\\n\",test);</code> that doesn't cause any error but that causes <strong>undefined behavior</strong>. And if you are going to dereference it like <code>*test</code> then your program get crashed(Seg. fault), this is one of possible scenario you should keep in mind while dealing with pointers.</p>\n"}], "owner": {"reputation": 711, "user_id": 4802475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZETd6.png?s=128&g=1", "display_name": "Paradowski", "link": "https://stackoverflow.com/users/4802475/paradowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "accepted_answer_id": 50722395, "answer_count": 1, "score": 0, "last_activity_date": 1532686064, "creation_date": 1528293151, "last_edit_date": 1532686064, "question_id": 50722200, "link": "https://stackoverflow.com/questions/50722200/what-is-happening-in-this-char-assignment-comma-operator-with-mixed-types", "title": "What is happening in this char* assignment? (comma operator with mixed types)", "body": "<p>I'm working on some C code. In one of .c files I can see something like:</p>\n\n<pre><code>char* test = (\"someChar\", \"someChar2\", 3);\n</code></pre>\n\n<p>When I print out this variable, I get \"3\" on my screen.</p>\n\n<p>What is happening in this part of code? Why do I get 3 as a result of printing out this char*? I am the most curious about this <code>(\"someChar\", \"someChar2\", 3)</code> expression.</p>\n\n<p>EDIT(after the issue has been resolved):</p>\n\n<p>What made me scratch my head was also the fact, that there are two chars and one int in this expression. \nIf we use <code>printf(\"%u\", test)</code> we can get this number, but this code definitely doesn't look clean and I believe this is not an elegant way of assigning number to char*.</p>\n"}, {"tags": ["c", "calculator", "crc"], "comments": [{"owner": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "edited": false, "score": 0, "creation_date": 1528292540, "post_id": 50721943, "comment_id": 88452295, "body": "CRC-16-CCITT polynomial is - depending how you need it represented in your code - the following: <code>0x1021</code> (Normal), <code>0x8408</code> (Reversed), <code>0x811</code> (Reciprocal), <code>0x8810</code> (Reversed reciprocal). List of polynomial values can be found here: <a href=\"https://en.wikipedia.org/wiki/Cyclic_redundancy_check#Polynomial_representations_of_cyclic_redundancy_checks\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1528293188, "post_id": 50721943, "comment_id": 88452738, "body": "<a href=\"http://www.lammertbies.nl/comm/info/crc-calculation.html\" rel=\"nofollow noreferrer\">lammertbies.nl/comm/info/crc-calculation.html</a> has good references and source code for CRC computations. What is required to find yours: a known ASCII or Hexa text and its expected CRC."}, {"owner": {"reputation": 23, "user_id": 8421428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c435f7894655ca64bee21ba0218a4?s=128&d=identicon&r=PG&f=1", "display_name": "majkx00", "link": "https://stackoverflow.com/users/8421428/majkx00"}, "edited": false, "score": 0, "creation_date": 1528293233, "post_id": 50721943, "comment_id": 88452762, "body": "tried every one, but result is still different...should i post here code how i&#39;m calculating it ? Maybe error in it.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528294802, "post_id": 50721943, "comment_id": 88453825, "body": "Note: Sample <code>POLY</code> not defined."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528294984, "post_id": 50721943, "comment_id": 88453950, "body": "Perhaps how code calls <code>crc16()</code> is problem.  It is unclear why <code>unsigned short length</code> is a short and not a <code>size_t</code>.  (how big is the file?).  Posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help."}, {"owner": {"reputation": 23, "user_id": 8421428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c435f7894655ca64bee21ba0218a4?s=128&d=identicon&r=PG&f=1", "display_name": "majkx00", "link": "https://stackoverflow.com/users/8421428/majkx00"}, "edited": false, "score": 0, "creation_date": 1528308291, "post_id": 50721943, "comment_id": 88461863, "body": "Added files...code and source file is too long so i uploaded it to external server"}], "owner": {"reputation": 23, "user_id": 8421428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c435f7894655ca64bee21ba0218a4?s=128&d=identicon&r=PG&f=1", "display_name": "majkx00", "link": "https://stackoverflow.com/users/8421428/majkx00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1559, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528514542, "creation_date": 1528292325, "last_edit_date": 1528308246, "question_id": 50721943, "link": "https://stackoverflow.com/questions/50721943/calculating-crc16-ccitt", "title": "Calculating CRC16-ccitt", "body": "<p>i'm observing one problem i got to solve.</p>\n\n<p>I have to calculate CRC of Hexadecimal entry (from array) and compare it with expected. I don't have polynom.</p>\n\n<p>The array extracted from checksum looks like (example) : </p>\n\n<pre><code>unsigned short crcSrc[0x7FFE] = {0xB6FE, 0x8062, 0x2714, 0xB8FE, 0x8066, 0xA940, 0xA743, 0xBCF7, 0x0B87, 0x7E18, 0x070B...... };\n</code></pre>\n\n<p>entries are extracted from file which looks like (just beggining): </p>\n\n<pre><code>S0 5A00 0043 3A5C 4441 5445 4E5C 5072 6F6A 656B 7465 5C48 5648 5F48 3130 305F 3830 305C 4170 706C 6963 6174 696F 6E5C 506F 7273 6368 655C 4A31 5C53 6F66 7477 6172 655C 4275 696C 645C 4856 485F 506F 7273 6368 655F 4A31 2E70 726D B9S2 0600 0000 D7F2 30S2 24FE 8000 B6FE 8062 2714 B8FE 8066 A940 A743 BCF7 0B87 7E18 070B 8675 05B9 FE80 6927 10A6 B3S2 24FE 8020 F727 0CA8F71CF7E70B867D2074051B030011FF95A11B03001000BDFA001ED2207A\n</code></pre>\n\n<p>And what i need to do ? i got a right CRC result which is 0xd7f2 and i have to write a calculator to get it. I already found some solutions on internet ,but i still don't have Polynom which is needed to solve this. How can i get it ? Is it hidden somewhere in that file ? </p>\n\n<p>Thank you very much</p>\n\n<p>EDIT : I'm posting my code here how i'm calculating CRC</p>\n\n<pre><code>unsigned short crc16(char *data_p, unsigned short length)\n {\n  unsigned char i;\n  unsigned int data;\n  unsigned int crc = 0xffff;\n\n  if (length == 0)\n        return (~crc);\n\n  do\n  {\n        for (i=0, data=(unsigned int)0xff &amp; *data_p++;\n             i &lt; 8;\n             i++, data &gt;&gt;= 1)\n        {\n              if ((crc &amp; 0x0001) ^ (data &amp; 0x0001))\n                    crc = (crc &gt;&gt; 1) ^ POLY;\n              else  crc &gt;&gt;= 1;\n        }\n  } while (--length);\n\n  crc = ~crc;\n  data = crc;\n  crc = (crc &lt;&lt; 8) | (data &gt;&gt; 8 &amp; 0xff);\n  return (crc);\n}\n</code></pre>\n\n<p>EDIT 2 : Adding all source <a href=\"http://leteckaposta.cz/606729584\" rel=\"nofollow noreferrer\">Files to download</a></p>\n"}, {"tags": ["c", "linux", "sockets", "fork", "mmap"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1528291724, "post_id": 50721612, "comment_id": 88451694, "body": "It is operating system specific, and it could be file system specific"}, {"owner": {"reputation": 531, "user_id": 8339821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0148d1cfa01aea7231cf3195f54f2d78?s=128&d=identicon&r=PG&f=1", "display_name": "user14063792468", "link": "https://stackoverflow.com/users/8339821/user14063792468"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1528292362, "post_id": 50721612, "comment_id": 88452167, "body": "@BasileStarynkevitch Did an edit."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1528293119, "post_id": 50721612, "comment_id": 88452681, "body": "When you wrote &quot;setting file pointer&quot; did you mean &quot;setting file position&quot;? If so, you can use <code>lseek</code> or <code>llseek</code>. Or if you meant &quot;setting a <code>FILE *</code>&quot; you can use <code>fdopen</code>."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528295083, "post_id": 50721612, "comment_id": 88454019, "body": "How do the worker processes know what part of what file to read and provide to a socket connection? If the other end of the socket connection provides that info, then a small pool of threads (pool size depending on the storage medium used) can handle any number of socket clients. This is a common, solved problem; file servers do exactly this at their core."}, {"owner": {"reputation": 531, "user_id": 8339821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0148d1cfa01aea7231cf3195f54f2d78?s=128&d=identicon&r=PG&f=1", "display_name": "user14063792468", "link": "https://stackoverflow.com/users/8339821/user14063792468"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528295348, "post_id": 50721612, "comment_id": 88454217, "body": "@IanAbbott I meant file descriptor. lseek made my day. How could had i miss it?"}, {"owner": {"reputation": 531, "user_id": 8339821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0148d1cfa01aea7231cf3195f54f2d78?s=128&d=identicon&r=PG&f=1", "display_name": "user14063792468", "link": "https://stackoverflow.com/users/8339821/user14063792468"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528295710, "post_id": 50721612, "comment_id": 88454480, "body": "@NominalAnimal The other end of socket connection provides info about which file to read. The app forks, passes some information to exec. The new process will know the file, which part of it to read/send over socket."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1528295956, "post_id": 50721612, "comment_id": 88454634, "body": "You can also use <a href=\"http://man7.org/linux/man-pages/man2/pread.2.html\" rel=\"nofollow noreferrer\"><code>pread()</code></a>. It is particularly useful in the case where one process provides data read from a single file or small number of files to many socket clients, since only one descriptor per file is needed (as opposed to one descriptor per client). It essentially combines the seek and the read, except that the file position is unchanged (even for simultaneous access using the same file descriptor)."}, {"owner": {"reputation": 531, "user_id": 8339821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0148d1cfa01aea7231cf3195f54f2d78?s=128&d=identicon&r=PG&f=1", "display_name": "user14063792468", "link": "https://stackoverflow.com/users/8339821/user14063792468"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528296628, "post_id": 50721612, "comment_id": 88455090, "body": "@NominalAnimal Wow, never heard of pread(). I will definitely give it a try. BTW what you think of mmap() approach?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1528301718, "post_id": 50721612, "comment_id": 88458360, "body": "@\u042f\u0440\u043e\u0441\u043b\u0430\u0432\u041c\u0430\u0448\u043a\u043e: <code>mmap()</code> approach is excellent if the clients request smallish chunks at random addresses; it can outperform <code>read()</code>/<code>pread()</code> in some cases, as you can simply send the data directly from the mapping, without a buffer in between. The kernel is also surprisingly good at managing which pages of the mapping to keep in RAM. For linear accesses, say in 16k or larger chunks, <code>read()</code>/<code>pread()</code> is more efficient, in my experience."}, {"owner": {"reputation": 531, "user_id": 8339821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0148d1cfa01aea7231cf3195f54f2d78?s=128&d=identicon&r=PG&f=1", "display_name": "user14063792468", "link": "https://stackoverflow.com/users/8339821/user14063792468"}, "edited": false, "score": 0, "creation_date": 1528305789, "post_id": 50721612, "comment_id": 88460505, "body": "Thank you both for your valuable information."}], "owner": {"reputation": 531, "user_id": 8339821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0148d1cfa01aea7231cf3195f54f2d78?s=128&d=identicon&r=PG&f=1", "display_name": "user14063792468", "link": "https://stackoverflow.com/users/8339821/user14063792468"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528291949, "creation_date": 1528291386, "last_edit_date": 1528291949, "question_id": 50721612, "link": "https://stackoverflow.com/questions/50721612/multiple-processes-read-write-files-what-api-to-use", "title": "Multiple processes read/write files. What API to use?", "body": "<p>I have this situation when I need to spawn worker processes. On one side, worker processes should read evenly split parts of a file and pass data to socket connection. Other side should read that data and write it in parallel. I plan to split source file into parts beforehand so that each process gets only one part of a file to read from or write to.</p>\n\n<p>So I'm already using sockets with read/write. From that, I think, it is better for me to continue to use this simple API. But I can not find any means of setting file pointer when using file descriptors. I need that obviously, when reading from file that is divided to read/write parts.</p>\n\n<p>I've heard that mmap can help me somehow. But to my understanding mmap needs much RAM and my app will run multiple mentioned transfers. The app is also quite limited in CPU usage.\n The question is, what API should I use?</p>\n\n<p><strong>EDIT</strong> I be on Linux. Filesystem is ext4.</p>\n"}, {"tags": ["c", "string", "strtok"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1528291587, "post_id": 50721554, "comment_id": 88451582, "body": "<a href=\"https://en.wikipedia.org/wiki/Finite-state_machine\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Finite-state_machine</a>"}, {"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1528291666, "post_id": 50721554, "comment_id": 88451650, "body": "@wildplasser does it mean <i>write an algo</i> ?"}, {"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1528291825, "post_id": 50721554, "comment_id": 88451760, "body": "I would use regular expression to extract the differents parts"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1528291836, "post_id": 50721554, "comment_id": 88451776, "body": "@Cid Yes. It will probably be easier than splitting on <code>;</code> +recognising the <code>&quot;</code> and requoting the third field."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1528293137, "post_id": 50721554, "comment_id": 88452697, "body": "<code>strtok</code> is not the right tool for this job.  <code>strtok</code> does simpleminded splitting at delimiters.  It has no facility for quoting."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1528293327, "post_id": 50721554, "comment_id": 88452817, "body": "The delimiter string you hand to <code>strtok</code> is a <i>set</i> of single-character delimiters.  It is not a multi-character delimiter string.  When you call <code>strtok</code> with a delimiter string of <code>&quot;\\&quot;;\\&quot;&quot;</code>, you&#39;re saying that tokens are delimited by either <code>&quot;</code> or <code>;</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1528293472, "post_id": 50721554, "comment_id": 88452909, "body": "Doing this well is surprisingly tricky.  You can&#39;t just search for the explicit delimiter string <code>&quot;\\&quot;;\\&quot;&quot;</code>, because the input might contain whitespace around the <code>;</code>.  Also the input might not contain quotes around commands that don&#39;t need it.  Also for full generality you need to figure out a way to allow actual quotes inside a quoted string."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 1, "creation_date": 1528293741, "post_id": 50721554, "comment_id": 88453087, "body": "<i>&quot;the string is &quot;tab&quot;, and elements are separate by double quote and ;&quot;</i> This is not true. A <i>command</i> begins with <code>&quot;</code> (quote) AND ends with with <code>&quot;;</code> (quote followed by semicolon) OR <code>&quot;EOF</code> (quote and EOF). Just write a simple parser."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528299729, "post_id": 50721554, "comment_id": 88457203, "body": "`  &quot;command1&quot;;&quot;sleep 30; command2 -a ; command3&quot;;&quot;command4=&quot;MyTest&quot;&quot;` begins with a space.  Is this intended.  Is this important?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1528299934, "post_id": 50721554, "comment_id": 88457323, "body": "@Cid, Unclear about using &quot;regular expression&quot; in C code.  Are you referring to <code>*scanf()</code> functions or some other part of C?  Or maybe some extension to standard C?"}, {"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528300760, "post_id": 50721554, "comment_id": 88457854, "body": "@chux I&#39;m not referring to any specific functions or extensions but a potential way to achieve that goal, hence I commented rather than answered"}], "answers": [{"comments": [{"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 1, "creation_date": 1528297252, "post_id": 50722718, "comment_id": 88455500, "body": "Why downvoting?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1528298984, "post_id": 50722718, "comment_id": 88456713, "body": "@cid  NMDV, yet <code>100</code> is arbitrarily and insufficient for OP&#39;s <code>char mystring[1024]</code>.  The <code>&quot;%99s&quot;</code> will stop on white-space unlike OP&#39;s unclear <code>strtok(NULL, s);</code>."}, {"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528299168, "post_id": 50722718, "comment_id": 88456831, "body": "@chux What do you mean by NMVD ? Non Minimal Verified something?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1528299307, "post_id": 50722718, "comment_id": 88456929, "body": "@cid &quot;NMDV&quot; --&gt; not my down vote - I am attempting to provide some rational to another&#39;s down vote."}], "tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": false, "score": -1, "last_activity_date": 1528304195, "last_edit_date": 1528304195, "creation_date": 1528294669, "answer_id": 50722718, "question_id": 50721554, "link": "https://stackoverflow.com/questions/50721554/c-strtok-parse-complex-string/50722718#50722718", "title": "C strtok parse complex string", "body": "<p>You must be having the string as </p>\n\n<pre><code>char str[]=\"\\\"command1\\\";\\\"sleep 30; command2 -a ; command3\\\";\\\"command4=\\\"MyTest\\\"\\\"\";\n</code></pre>\n\n<p>You needn't use <code>strtok()</code> could use <code>sscanf()</code> like</p>\n\n<pre><code>char a[3][100];\nsscanf(str, \"\\\"%99[^\\\"]\\\";\\\"%99[^\\\"]\\\";\\\"%99s\", a[0], a[1], a[2]);\na[2][strlen(a[2])-1]='\\0';\nprintf(\"\\n%s\\n%s\\n%s\", a[0], a[1], a[2]);\n</code></pre>\n\n<p>The last <code>a[2]</code> would have an extra <code>\"</code> at the end this way. We remove it with <code>a[2][strlen(a[2])-1]='\\0';</code>.</p>\n\n<p><code>\\\"%[^\\\"]\\\"</code> means read a <code>\"</code>, read everything till before another <code>\"</code> (this part is stored in a character array) and read that <code>\"</code> as well.</p>\n\n<p>Width specifiers are used in <code>sscanf()</code> to prevent buffer overflow.</p>\n\n<p>You should check if <code>sscanf()</code> was successful by checking its return value like</p>\n\n<pre><code>if( sscanf(........) != 3)\n{\n    printf(\"\\nSomething went wrong.\");\n}\n</code></pre>\n\n<p><code>sscanf()</code> returns the number of successful assignments, which in this case must be <code>3</code>.</p>\n\n<p>Output is:</p>\n\n<pre><code>command1\nsleep 30; command2 -a ; command3\ncommand4=\"MyTest\"\n</code></pre>\n\n<p>Edit:</p>\n\n<p>The array size 100 was arbitrary. If more precise memory allocation is needed you could use dynamic memory allocation first. Like</p>\n\n<pre><code>sscanf(str, \"\\\"%*[^\\\"]%n\\\";\\\"%*[^\\\"]%n\\\";\\\"%*s%n\", &amp;size[0], &amp;size[1], &amp;size[2]);\nprintf(\"\\n%d, %d, %d\", size[0], size[1], size[2]);\nsize[2] = size[2]-size[1]-4;\nsize[1] = size[1]-4;\nsize[0] = size[0]-1;\nchar *p[3];\nfor(int i=0; i&lt;3; ++i)\n{\n    if( (p[i]=malloc(sizeof(char)*size[i]))==NULL )\n    {\n        perror(\"Memory allocation failed!\");\n        return 1;\n    }\n}\n</code></pre>\n\n<p>The <code>%n</code> format specifier returns the number of characters that are read. See <a href=\"https://stackoverflow.com/questions/3401156/what-is-the-use-of-the-n-format-specifier-in-c\">this</a> post.</p>\n\n<p>And the <code>*</code> is for suppressing. ie, the values are just discarded. This additional <code>scanf()</code> is done to get the sizes of the strings.</p>\n\n<p>But this is specific to this input.</p>\n"}, {"tags": [], "owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "is_accepted": false, "score": 0, "last_activity_date": 1528370427, "last_edit_date": 1528370427, "creation_date": 1528313295, "answer_id": 50728142, "question_id": 50721554, "link": "https://stackoverflow.com/questions/50721554/c-strtok-parse-complex-string/50728142#50728142", "title": "C strtok parse complex string", "body": "<p>The example below parses the input string as requested. It will need some adjustments to entirely fit your needs (replace <code>printf</code> with your actual processing code).</p>\n\n<p>To understand the code, start from the top comment where the syntax of your string is described. then go to <code>main</code> - use a debugger.</p>\n\n<p>Some explanations:</p>\n\n<ul>\n<li><code>iss_t</code> is an input string stream simulacrum. It is used by <code>iss_get_char</code> to read characters from the input string.</li>\n<li><code>wschar_t</code> is used to store a character read from input stream together with previous white spaces. This is necessary because you did not specify if there may be spaces between <code>\"</code> and <code>;</code>. It is used by <code>iss_get_wschar</code> and <code>iss_peek_wschar</code>.</li>\n<li><code>iss_get_wschar</code> reads white spaces until it finds a non-ws character.</li>\n<li><code>iss_peek_wschar</code>is the same as above except it does not extract the characters from the stream.</li>\n<li><code>token_t</code> describes the tokens a stream is made of.</li>\n<li><code>parser_get_token</code> extracts a token from the stream. It is, perharps, the most important function.</li>\n<li><code>parser_commands</code> extracts all commands from stream and it is the main function of the parser.</li>\n<li><code>parser_command</code> extracts a command from stream.</li>\n</ul>\n\n<p>You can test the code <a href=\"https://ideone.com/5uGGQp\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>  #include &lt;stdlib.h&gt;\n  #include &lt;ctype.h&gt;\n\n  /*\n  commands:\n    EOF\n    |\n    command commands\n\n  command:\n    command_begin string command_end\n\n  string:\n    anything but command_end\n\n  command_begin:\n    QUOTE\n\n  command_end:\n    QUOTE SEMICOLON\n    |\n    QUOTE EOF\n  */\n\n  struct iss_t\n  {\n    char* s;\n    char* g;\n  };\n  typedef struct iss_t iss_t;\n\n  char iss_get_char( iss_t* self )\n  {\n    if ( !*self-&gt;g )\n      return 0;\n    return *self-&gt;g++;\n  }\n\n  struct wschar_t\n  {\n    char c;\n    char s[ 1024 ];\n  };\n  typedef struct wschar_t wschar_t;\n\n  char iss_get_wschar( iss_t* self, wschar_t* r )\n  {\n    char* p = r-&gt;s;\n\n    while ( isspace( *p++ = r-&gt;c = iss_get_char( self ) ) )\n      ;\n    *p = 0;\n    return r-&gt;c;\n  }\n\n  char iss_peek_wschar( iss_t* self )\n  {\n    char* savedg = self-&gt;g;\n    wschar_t t;\n    iss_get_wschar( self, &amp;t );\n    self-&gt;g = savedg;\n    return t.c;\n  }\n\n  enum token_t\n  {\n    tk_done,\n    tk_beg,\n    tk_end,\n    tk_rest\n  };\n  typedef enum token_t token_t;\n\n  struct parser_t\n  {\n    iss_t* iss;\n    wschar_t wschar;\n    token_t token;\n  };\n  typedef struct parser_t parser_t;\n\n  token_t parser_get_token( parser_t* self )\n  {\n    iss_get_wschar( self-&gt;iss, &amp;self-&gt;wschar );\n\n    // if done\n    if ( self-&gt;wschar.c == 0 )\n      return self-&gt;token = tk_done;\n\n    // not a quote\n    if ( self-&gt;wschar.c != '\\\"' )\n      return self-&gt;token = tk_rest;\n\n    // it is quote: check the next token\n    switch ( iss_peek_wschar( self-&gt;iss ) )\n    {\n    case 0:\n    case ';':\n      iss_get_wschar( self-&gt;iss, &amp;self-&gt;wschar ); // eat\n      return self-&gt;token = tk_end;\n    default:\n      return self-&gt;token = tk_beg;\n    }\n  }\n\n  int parser_command( parser_t* self )\n  {\n    printf( \"COMMAND: \" );\n    if ( self-&gt;token != tk_beg )\n    {\n      printf( \"command begin expected\" );\n      return -1;\n    }\n\n    while ( parser_get_token( self ) == tk_rest || self-&gt;token == tk_beg )\n      printf( self-&gt;wschar.s );\n\n    if ( self-&gt;token != tk_end )\n    {\n      printf( \"command end expected\" );\n      return -1;\n    }\n\n    printf( \"\\n\" );\n\n    return 0;\n  }\n\n  void parser_commands( parser_t* self )\n  {\n    while ( 1 )\n    {\n      switch ( parser_get_token( self ) )\n      {\n\n      case tk_done:\n        return;\n\n      default:\n        if ( parser_command( self ) &lt; 0 )\n          return;\n\n      };\n    };\n  }\n\n\n  int main()\n  {\n    char* s = \"\\\"command1\\\"; \\\"sleep 30; command2 -a ; command3\\\"; \\\"command4=\\\"MyTest\\\"\\\"\";\n\n    iss_t iss = { s, s };\n    parser_t parser = { &amp;iss };\n    parser_commands( &amp;parser );\n\n    return 0;\n  }\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 9299601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5373926bae00b67f721c3fba623c662f?s=128&d=identicon&r=PG&f=1", "display_name": "ilapasle", "link": "https://stackoverflow.com/users/9299601/ilapasle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1528370427, "creation_date": 1528291230, "last_edit_date": 1528304398, "question_id": 50721554, "link": "https://stackoverflow.com/questions/50721554/c-strtok-parse-complex-string", "title": "C strtok parse complex string", "body": "<p>Hello I have a complex problem in C. I want to split this string (with this example I include all trap possibilities)</p>\n\n<pre><code> \"command1\";\"sleep 30; command2 -a ; command3\";\"command4=\"MyTest\"\"\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>command1\nsleep 30; command2 -a ; command3\ncommand4=\"MyTest\"\n</code></pre>\n\n<p>the string is \"tab\", and elements are separate by double quote and <code>;</code>\nHow can i use <code>strtok()</code> for this?</p>\n\n<p>I try to use <code>strtok()</code> with \";\" separator like this :</p>\n\n<pre><code>   char mystring[1024]=\"\\\"command1\\\";\\\"sleep 30; command2 -a ; command3\\\";\\\"command4=\\\"MyTest\\\"\\\"\";\n   token = strtok(mystring, \"\\\";\\\"\");\n\n   while( token != NULL ) {\n      error(token);\n      token = strtok(NULL, s);\n   }\n</code></pre>\n\n<p>but I have this output :</p>\n\n<pre><code>command1\n\"sleep 30\ncommand2 -a\ncommand3\"\n\"command4=\"MyTest\"\"\n</code></pre>\n\n<p>Thanks for advance for your help</p>\n"}, {"tags": ["c", "user-interface", "gtk", "glade", "acceleratorkey"], "comments": [{"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1528355978, "post_id": 50721223, "comment_id": 88478025, "body": "<code>modifiers=&quot;GDK_CONTROL_MASK&quot;</code> says they are not supposed to work without <code>ctrl</code> key pressed. What happens if you just remove this part?"}, {"owner": {"reputation": 29, "user_id": 3143155, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b55e919473294e3e161592ee054ab465?s=128&d=identicon&r=PG&f=1", "display_name": "user3143155", "link": "https://stackoverflow.com/users/3143155/user3143155"}, "reply_to_user": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1528395244, "post_id": 50721223, "comment_id": 88502935, "body": "@AlexanderDmitriev thank you very much, this was the problem, but removing it caused the gui to not show. But i searched for modifiers and found a workaround"}], "answers": [{"comments": [{"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1528437502, "post_id": 50747729, "comment_id": 88516246, "body": "<code>GDK_LOCK_MASK a Lock key (depending on the modifier mapping of the X server this may either be CapsLock or ShiftLock).</code> I&#39;m pretty sure it&#39;s a kludge, not a solution."}, {"owner": {"reputation": 29, "user_id": 3143155, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b55e919473294e3e161592ee054ab465?s=128&d=identicon&r=PG&f=1", "display_name": "user3143155", "link": "https://stackoverflow.com/users/3143155/user3143155"}, "reply_to_user": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1528538073, "post_id": 50747729, "comment_id": 88553283, "body": "yes i agree, but i tried all the other options for modifiers and nothing worked for me"}], "tags": [], "owner": {"reputation": 29, "user_id": 3143155, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b55e919473294e3e161592ee054ab465?s=128&d=identicon&r=PG&f=1", "display_name": "user3143155", "link": "https://stackoverflow.com/users/3143155/user3143155"}, "is_accepted": false, "score": 0, "last_activity_date": 1528395371, "creation_date": 1528395371, "answer_id": 50747729, "question_id": 50721223, "link": "https://stackoverflow.com/questions/50721223/glade-keyboard-escape-arrows-accelerators/50747729#50747729", "title": "glade keyboard (escape, arrows) accelerators", "body": "<p>What actually causes the problem is:\nmodifiers=\"GDK_CONTROL_MASK\".\nSo what worked for me is:\nsetting GDK_CONTROL_MASK to GDK_LOCK_MASK.</p>\n"}], "owner": {"reputation": 29, "user_id": 3143155, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b55e919473294e3e161592ee054ab465?s=128&d=identicon&r=PG&f=1", "display_name": "user3143155", "link": "https://stackoverflow.com/users/3143155/user3143155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528395371, "creation_date": 1528290422, "question_id": 50721223, "link": "https://stackoverflow.com/questions/50721223/glade-keyboard-escape-arrows-accelerators", "title": "glade keyboard (escape, arrows) accelerators", "body": "<p>I am using glade along with language C to develop a GUI. I am able to map all the number keys and letter keys from keyboard to glade buttons as accelerators. However, i cannot map the following buttons: ESC, Up, Down, Left, Right arrows.</p>\n\n<p>In glade when i type in the accelerator field up, down, left, right or esc nothing is stored. But if i type them in holding the CTRL it stores them as primary button.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bzOC6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bzOC6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Even in .glade file the keys are stored as they are supposed to be by working alone, but they only function when i hold also the CTRL.</p>\n\n<pre><code>&lt;object class=\"GtkButton\" id=\"button_left_roll\"&gt;\n  &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n  &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n  &lt;property name=\"receives_default\"&gt;True&lt;/property&gt;\n  &lt;property name=\"image\"&gt;image19&lt;/property&gt;\n  &lt;property name=\"always_show_image\"&gt;True&lt;/property&gt;\n  &lt;signal name=\"clicked\" handler=\"on_button_left_roll_clicked\" swapped=\"no\"/&gt;\n  &lt;accelerator key=\"Left\" signal=\"clicked\" modifiers=\"GDK_CONTROL_MASK\"/&gt;\n&lt;/object&gt;\n</code></pre>\n\n<p>How can i use them without holding down the CTRL key?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3879, "user_id": 7371784, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78e670334411962158df4d1ac6803ac9?s=128&d=identicon&r=PG&f=1", "display_name": "Kristjan Kica", "link": "https://stackoverflow.com/users/7371784/kristjan-kica"}, "edited": false, "score": 3, "creation_date": 1528290544, "post_id": 50721220, "comment_id": 88450804, "body": "I know this is not what you asked for, but please dont use goto"}, {"owner": {"reputation": 2605, "user_id": 4846598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56c681dc497676a33de782f84bc7a87f?s=128&d=identicon&r=PG&f=1", "display_name": "Hearner", "link": "https://stackoverflow.com/users/4846598/hearner"}, "edited": false, "score": 0, "creation_date": 1528290717, "post_id": 50721220, "comment_id": 88450928, "body": "There are many things useless in your code :  the loop <code>for</code>, the <code>if</code> statment. I tried 3 websites and they all gave me <code>000</code>"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1528290729, "post_id": 50721220, "comment_id": 88450934, "body": "In my PC I get <code>000</code> which seems to be the right answer. Don&#39;t know what website you used, but stick to the reliable compilers, such as gcc"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1528291948, "post_id": 50721220, "comment_id": 88451846, "body": "What websites? Some links please.."}, {"owner": {"reputation": 42, "user_id": 9779773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qQB9b.jpg?s=128&g=1", "display_name": "Anjana Madhav", "link": "https://stackoverflow.com/users/9779773/anjana-madhav"}, "edited": false, "score": 1, "creation_date": 1528293505, "post_id": 50721220, "comment_id": 88452928, "body": "thank you for helping me out. here are few links which baffled me. 1) <a href=\"https://www.sanfoundry.com/touch-c-programming-questions-goto-labels/\" rel=\"nofollow noreferrer\">sanfoundry.com/touch-c-programming-questions-goto-labels</a>  refer ques #8 2)<a href=\"http://studyhelpzone.com/c-programming-questions-answers-goto-labels.html\" rel=\"nofollow noreferrer\">studyhelpzone.com/&hellip;</a> refer ques #8"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1528441774, "post_id": 50721220, "comment_id": 88518199, "body": "Jumping into the middle of an uninitialized for loop is undefined behaviour... you can get anything.  Why do you post expressely bad code to ask a question about printf format specifiers?"}], "answers": [{"comments": [{"owner": {"reputation": 42, "user_id": 9779773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qQB9b.jpg?s=128&g=1", "display_name": "Anjana Madhav", "link": "https://stackoverflow.com/users/9779773/anjana-madhav"}, "edited": false, "score": 0, "creation_date": 1528294019, "post_id": 50721344, "comment_id": 88453285, "body": "thank you for clarifying. i just got confused as most of the websites including sanfoundry.com gave the same answer (&#39;0&#39;). Thought my compiler was faulty."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1528442389, "post_id": 50721344, "comment_id": 88518497, "body": "yes, it&#39;s U.B., as the execution of the for control statements is not defined when you have jump into the middle of an inner block from a goto statement.  You cannot ensure what the compiler will do, or the order it will execute the statements of the for loop since you have not passed to buy the ticket."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1528291142, "last_edit_date": 1528291142, "creation_date": 1528290747, "answer_id": 50721344, "question_id": 50721220, "link": "https://stackoverflow.com/questions/50721220/control-flow-and-loop-why-the-output-of-the-program-is-0-and-not-000/50721344#50721344", "title": "Control flow and loop: Why the output of the program is 0 and not 000?", "body": "<p>The output <em>should</em> be <code>000</code>. <code>%3d</code> will print two spaces if <code>i</code> is <code>0</code>: the <code>%03d</code> will print zeros instead of the spaces. The return value of <code>printf</code> is the number of characters that have been printed, so the loop that you've crashed into will terminate as <code>k &lt; 3</code> will be <code>0</code>.</p>\n\n<p>There's no <em>undefined behaviour</em> in the rather odd code you've presented. So if the leading two zeros are missing then the compiler and / or the runtime environment that you're using is defective.</p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1528442176, "post_id": 50721355, "comment_id": 88518389, "body": "avoiding thr fact that jumping into the middle of an uninitialized loop is U.B. and bad code, either."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1528461898, "post_id": 50721355, "comment_id": 88529331, "body": "@LuisColorado There&#39;s no initialization being skipped in this case, so it&#39;s not UB.  It is still bad code though."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1529554465, "post_id": 50721355, "comment_id": 88917375, "body": "for <i>initialization</i> I mean the first statement in the <code>for</code> loop and the condition evaluation.  Case they have side effects, they will not be executed.  Of course, in case there are local to block variables defined, it&#39;s not clear if space on the stack will be allocated for them, but anyway, no initialization would be made."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1528290764, "creation_date": 1528290764, "answer_id": 50721355, "question_id": 50721220, "link": "https://stackoverflow.com/questions/50721220/control-flow-and-loop-why-the-output-of-the-program-is-0-and-not-000/50721355#50721355", "title": "Control flow and loop: Why the output of the program is 0 and not 000?", "body": "<p>The proper output is <code>000</code>.</p>\n\n<p>The format specifier <code>%03d</code> contains the conversion specifier <code>d</code>, a field width of 3, and the flag <code>0</code>.  The <code>d</code> specifier means to print an <code>int</code>.  The field width of 3 means that the value will be printed in a field at least 3 characters wide.  The <code>0</code> flag means that any extra spaces in the field to print are padded on the left with a 0.</p>\n\n<p>Any compiler that does not output this is non-conforming.</p>\n"}], "owner": {"reputation": 42, "user_id": 9779773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qQB9b.jpg?s=128&g=1", "display_name": "Anjana Madhav", "link": "https://stackoverflow.com/users/9779773/anjana-madhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528291142, "creation_date": 1528290413, "question_id": 50721220, "link": "https://stackoverflow.com/questions/50721220/control-flow-and-loop-why-the-output-of-the-program-is-0-and-not-000", "title": "Control flow and loop: Why the output of the program is 0 and not 000?", "body": "<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\n    int i = 0, k;\n    if (i == 0)\n        goto label;\n        for (k = 0;k &lt; 3; k++)\n        {\n            printf(\"hi\\n\");\n            label: k = printf(\"%03d\", i);\n        }\n}\n</code></pre>\n\n<p>Can anybody explain how the output is 0 and not 000? When i run the program in devc++ it gives the output 000. But in most of the websites i found the right answer to be 0.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1528289884, "post_id": 50720990, "comment_id": 88450380, "body": "I don&#39;t see where you use the <code>commando</code> parameter in the function."}, {"owner": {"reputation": 3, "user_id": 9610861, "user_type": "registered", "profile_image": "https://graph.facebook.com/931774223646980/picture?type=large", "display_name": "Ivan", "link": "https://stackoverflow.com/users/9610861/ivan"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1528289971, "post_id": 50720990, "comment_id": 88450435, "body": "job * proceso = new_job(123,args[0],args,BACKGROUND); printf(&quot;%s&quot;,(proceso-&gt;commando)[0]); when i execute this"}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 3, "creation_date": 1528290081, "post_id": 50720990, "comment_id": 88450513, "body": "Try to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. That <code>#define new_list(name)</code> seems to be unused as far as the code you&#39;ve posted is concerned."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1528290099, "post_id": 50720990, "comment_id": 88450528, "body": "I think you are asking how to copy the <code>commando</code> parameter into <code>aux-&gt;commando</code>. To do that you need to know how many pointers <code>commando</code> contains."}, {"owner": {"reputation": 3, "user_id": 9610861, "user_type": "registered", "profile_image": "https://graph.facebook.com/931774223646980/picture?type=large", "display_name": "Ivan", "link": "https://stackoverflow.com/users/9610861/ivan"}, "edited": false, "score": 0, "creation_date": 1528290281, "post_id": 50720990, "comment_id": 88450640, "body": "the parameter commando is char** but i dont know how to copy that"}], "answers": [{"tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 0, "last_activity_date": 1528290641, "creation_date": 1528290641, "answer_id": 50721308, "question_id": 50720990, "link": "https://stackoverflow.com/questions/50720990/error-null-with-char-and-struct/50721308#50721308", "title": "Error (null) with char** and struct", "body": "<p>To copy the <code>char **</code> variable, you need to know how many pointers are in the array. It's just like in <code>main</code> where you get an <code>argc</code> that tells you how many pointers are in <code>argv</code>. Once you add that data, you can:</p>\n\n<pre><code>// Added num_commando parameter\njob * new_job(pid_t pid, const char * command, char ** commando, size_t num_commando, enum job_state state)\n{\n    job * aux;\n    aux=(job *) malloc(sizeof(job));\n    aux-&gt;pgid=pid;\n    aux-&gt;state=state;\n    aux-&gt;command=strdup(command);\n    // Create array of pointers\n    aux-&gt;commando = malloc(sizeof(char *) * num_commando); // or sizeof(*aux-&gt;commando)\n    // Duplicate every string\n    for (size_t i = 0; i &lt; num_commando; i++) {\n        aux-&gt;commando[i] = strdup(commando[i]);\n    }\n    aux-&gt;next=NULL;\n    return aux;\n}\n</code></pre>\n\n<p>You should also add the <code>num_commando</code> parameter to the struct so you know how many strings to <code>free()</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9610861, "user_type": "registered", "profile_image": "https://graph.facebook.com/931774223646980/picture?type=large", "display_name": "Ivan", "link": "https://stackoverflow.com/users/9610861/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 50721308, "answer_count": 1, "score": -1, "last_activity_date": 1528290641, "creation_date": 1528289742, "question_id": 50720990, "link": "https://stackoverflow.com/questions/50720990/error-null-with-char-and-struct", "title": "Error (null) with char** and struct", "body": "<p>I tried to save a char** in a struct, my code is:</p>\n\n<pre><code>job * proceso = new_job(123,args[0],args,BACKGROUND);\nprintf(\"%s\",(proceso-&gt;commando)[0]);\n</code></pre>\n\n<p>where args is the char**;</p>\n\n<p>and apperar (null);\nthe struct is:</p>\n\n<pre><code>job * new_job(pid_t pid, const char * command,char ** commando, enum job_state state){\n    job * aux;\n    aux=(job *) malloc(sizeof(job));\n    aux-&gt;pgid=pid;\n    aux-&gt;state=state;\n    aux-&gt;command=strdup(command);\n    aux-&gt;commando=malloc(1000);\n    aux-&gt;next=NULL;\n    return aux;}\n\n\ntypedef struct job_{\n   pid_t pgid; /* group id = process lider id */\n   char * command; /* program name */\n   char ** commando;\n   enum job_state state;\n   struct job_ *next; /* next job in the list */} job;\n\n\njob * new_job(pid_t pid, const char * command,char ** commando, enum job_state state);\n\nchar** com;\n#define new_list(name)           new_job(0,name,com,FOREGROUND)  // name must be const char *\n</code></pre>\n\n<p>I dont know the mistake;anyone can help me?</p>\n"}, {"tags": ["c", "function", "struct", "segmentation-fault", "pthreads"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1528289822, "post_id": 50720951, "comment_id": 88450344, "body": "Can you show how the thread is set up &amp; started?  The problem might be there."}, {"owner": {"reputation": 9, "user_id": 9666992, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Psaraftis", "link": "https://stackoverflow.com/users/9666992/alex-psaraftis"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1528290050, "post_id": 50720951, "comment_id": 88450496, "body": "Sure thing   rc = pthread_create(&amp;p1, NULL, Producers, (void*)t_args);"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528290102, "post_id": 50720951, "comment_id": 88450529, "body": "Your question refers to &quot;the error&quot; and &quot;the problem&quot; but does not actually describe the symptoms of &quot;the problem&quot; or describe &quot;the error&quot;."}, {"owner": {"reputation": 9, "user_id": 9666992, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Psaraftis", "link": "https://stackoverflow.com/users/9666992/alex-psaraftis"}, "edited": false, "score": 0, "creation_date": 1528290401, "post_id": 50720951, "comment_id": 88450711, "body": "Yes my bad. I put it in the tag so I thought it would be enough. The error is segmentation fault (core dumped)."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528290438, "post_id": 50720951, "comment_id": 88450738, "body": "And what is <code>cb</code> and <code>cb_push_back</code>?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1528290492, "post_id": 50720951, "comment_id": 88450772, "body": "How does <code>t_args</code> get allocated &amp; filled?"}, {"owner": {"reputation": 9, "user_id": 9666992, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Psaraftis", "link": "https://stackoverflow.com/users/9666992/alex-psaraftis"}, "edited": false, "score": 0, "creation_date": 1528290714, "post_id": 50720951, "comment_id": 88450925, "body": "The code in main function was too big to upload. Can I upload the main function separately. As for your question. I allocate the memory with (args*)malloc(sizeof(struct args)). The cb and cb_push_back are functions provided to me for the assignment. cb is a pointer to the struck circular buffer. As I said above the code was too big to upload altogether."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1528291568, "post_id": 50720951, "comment_id": 88451572, "body": "How do the fields of the struct get filled?"}, {"owner": {"reputation": 9, "user_id": 9666992, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Psaraftis", "link": "https://stackoverflow.com/users/9666992/alex-psaraftis"}, "edited": false, "score": 0, "creation_date": 1528291838, "post_id": 50720951, "comment_id": 88451778, "body": "This is what I did t_args-&gt;seed=(int*)atoi(argv[5]); t_args-&gt;rand_count=(int*)atoi(argv[4]); t_args-&gt;ID=1;"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1528292256, "post_id": 50720951, "comment_id": 88452084, "body": "&quot;This is what I did t_args-&gt;seed=(int*)atoi(argv[5]); t_args-&gt;rand_count=(int*)atoi(argv[4]); t_args-&gt;ID=1;&quot;. Oh, that explains it. You can&#39;t just convert the result of <code>atoi</code> to a pointer and and expect it to work. You need to point <code>t_args-&gt;seed</code> and <code>t_args-&gt;rand_count</code> to actual <code>int</code> variables."}, {"owner": {"reputation": 9, "user_id": 9666992, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Psaraftis", "link": "https://stackoverflow.com/users/9666992/alex-psaraftis"}, "edited": false, "score": 0, "creation_date": 1528293075, "post_id": 50720951, "comment_id": 88452663, "body": "I&#39;ll try it out tomorrow. Thanks!"}, {"owner": {"reputation": 9, "user_id": 9666992, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Psaraftis", "link": "https://stackoverflow.com/users/9666992/alex-psaraftis"}, "edited": false, "score": 0, "creation_date": 1528369241, "post_id": 50720951, "comment_id": 88486491, "body": "Turns out this was not the problem after all. I still get segmentation fault (core dumped) at that same point of the code and the for loop does not start."}], "owner": {"reputation": 9, "user_id": 9666992, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Psaraftis", "link": "https://stackoverflow.com/users/9666992/alex-psaraftis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528291867, "creation_date": 1528289627, "last_edit_date": 1528291867, "question_id": 50720951, "link": "https://stackoverflow.com/questions/50720951/trying-to-pass-a-struct-with-3-variables-in-a-thread-function-which-generates-a", "title": "Trying to pass a struct with 3 variables in a thread function which generates a sequence of random integers, to be placed in a circular buffer", "body": "<p>This function is executed by a thread. I believe the error occurs when I try to access rand_count which, is a variable of the struct called args. Note that the problem is located in the for loop of the producer.</p>\n\n<pre><code>void* Producers(void* fargs) {\n    printf(\"I am Producer and I am not locked\\n\");\n    args* f_args=(args*) fargs;\n    rc = pthread_mutex_lock(&amp;Mutex);\n    printf(\"I am Producer and I am locked\\n\");\n    if (rc != 0) {  \n        printf(\"ERROR: return code from pthread_mutex_lock() is %d\\n\", rc);\n        pthread_exit(&amp;rc);\n    }\n    printf(\" The ruler of all mutexes has passed from here and shall start creating random numbers\\n\");\n    for(int i=0; i &lt; *f_args-&gt;rand_count; ++i) {\n        printf ( \"Creating random number\\n\");\n        my_random =rand_r(f_args-&gt;seed)%255;\n\n        if(i==cb-&gt;capacity) {\n            printf(\" Your producer king will now sleep\\n\");\n            rc = pthread_cond_signal(&amp;Condition);\n            if (rc != 0) {  \n                printf(\"ERROR: return code from pthread_cond_signal() is %d\\n\", rc);\n                pthread_exit(&amp;rc);\n            }\n\n            rc = pthread_cond_wait(&amp;Condition, &amp;Mutex);\n            if (rc != 0) {  \n                printf(\"ERROR: return code from pthread_cond_wait() is %d\\n\", rc);\n                pthread_exit(&amp;rc);\n            }\n\n        }\n        cb_push_back(cb, &amp;my_random);\n        if(i==0) {\n            fp=fopen(\"prod_in.txt\", \"w\");\n        } else {\n            fp=fopen(\"prod_in.txt\", \"a\");\n        }\n        fprintf(fp, \"Producer %d: %d\\n\", f_args-&gt;ID, my_random);\n    }\n\n    rc = pthread_cond_signal(&amp;Condition);\n    if (rc != 0) {  \n        printf(\"ERROR: return code from pthread_cond_signal() is %d\\n\", rc);\n        pthread_exit(&amp;rc);\n    }\n\n    rc = pthread_mutex_unlock(&amp;Mutex);\n    if (rc != 0) {  \n        printf(\"ERROR: return code from pthread_mutex_unlock() is %d\\n\", rc);\n        pthread_exit(&amp;rc);\n    }\n}\n</code></pre>\n\n<p>This is the struct</p>\n\n<pre><code>typedef struct args{\n    int ID;             //Unique ID from 1 to n \n    int* seed;          //The seed used for rand_r\n    int* rand_count;    //The number of random generated numbers\n}args;\n</code></pre>\n"}, {"tags": ["c", "while-loop", "user-input", "infinite-loop"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1528288441, "post_id": 50720497, "comment_id": 88449484, "body": "Check the result of scanf."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1528288504, "post_id": 50720497, "comment_id": 88449523, "body": "<code>num</code> isn&#39;t changed if input is incorrect."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 628, "user_id": 8939165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gchW.jpg?s=128&g=1", "display_name": "Fabio_MO", "link": "https://stackoverflow.com/users/8939165/fabio-mo"}, "edited": false, "score": 1, "creation_date": 1528288661, "post_id": 50720497, "comment_id": 88449620, "body": "@Fabio_MO there is a conditional break!!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9902744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452d2f697916e5d626ecb77ccda39501?s=128&d=identicon&r=PG&f=1", "display_name": "Jero Won", "link": "https://stackoverflow.com/users/9902744/jero-won"}, "edited": false, "score": 0, "creation_date": 1528347127, "post_id": 50720750, "comment_id": 88474033, "body": "I appreciate your help. Your method was simple yet it works perfectly. Thanks again!"}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1528289114, "creation_date": 1528289114, "answer_id": 50720750, "question_id": 50720497, "link": "https://stackoverflow.com/questions/50720497/avoiding-an-infinite-while-loop/50720750#50720750", "title": "Avoiding an infinite while loop", "body": "<p><em>However, if I enter a character, a symbol or a real number with decimals ?</em>  Then you have <strong>undefined behaviour</strong> as <code>scanf()</code> expecting <code>int</code> argument but you are providing other than <code>int</code> argument.</p>\n\n<p><em>even integers such as <code>1.0</code> ?</em> No, <code>1.0</code> is not an <code>integer</code> it's a real number.</p>\n\n<p>Check the return value of <code>scanf()</code> to know whether it's success or fail. Open <code>man 3 scanf</code> and analyze. For e.g</p>\n\n<p><code>int ret = 0;</code></p>\n\n<p><code>ret = scanf(\"%d\",&amp;num);</code></p>\n\n<p><code>if(ret != 1) {\n  /* Error handling */\n }</code></p>\n"}], "owner": {"reputation": 1, "user_id": 9902744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452d2f697916e5d626ecb77ccda39501?s=128&d=identicon&r=PG&f=1", "display_name": "Jero Won", "link": "https://stackoverflow.com/users/9902744/jero-won"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "closed_date": 1528288974, "answer_count": 1, "score": 0, "last_activity_date": 1528291872, "creation_date": 1528288350, "last_edit_date": 1528291872, "question_id": 50720497, "link": "https://stackoverflow.com/questions/50720497/avoiding-an-infinite-while-loop", "closed_reason": "Duplicate", "title": "Avoiding an infinite while loop", "body": "<p>I'm stuck on a while loop exercise. The program seems to work fine as long as I only enter integers. However, if I enter a character, a symbol or a real number with decimals (even integers such as 1.0), I get a infinite loop. </p>\n\n<pre><code>int main() \n{\n    int num;\n    printf(\"Enter an odd number 1 and 10.\");\n    while(1) \n       {\n        printf(\"\\n\\nEnter : \");\n        scanf(\"%d\", &amp;num);\n\n        if(num == 0)\n            break;\n        else if(num &lt; 0 || num &gt; 10)\n            printf(\"You entered number is beyond the range.\");\n        else if(num % 2 == 0)\n            printf(\"You entered an even number.\");\n        else\n            printf(\"You entered a correct number.\");\n       }\n\n   printf(\"You are exiting the program.\");      \n   return 0;\n} \n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "edited": false, "score": 0, "creation_date": 1543589795, "post_id": 50719973, "comment_id": 93985239, "body": "Did you reach any answer since then?"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 9157915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e4e4db3a4a06411c2b548373fe24de?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9157915/rohit"}, "edited": false, "score": 1, "creation_date": 1528299507, "post_id": 50724205, "comment_id": 88457059, "body": "I want to understand as to how I can write complete startup myself. Are there any resources available online (I was unable to find any, hence the question)?"}, {"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "edited": false, "score": 0, "creation_date": 1528299511, "post_id": 50724205, "comment_id": 88457063, "body": "But, to clarify, the segfault occurred because there were no startup routines defined (apart from <code>_start()</code>)?"}, {"owner": {"reputation": 5396, "user_id": 304090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea21a0ee88ea25ce0fba351149362b29?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/304090/jens"}, "edited": false, "score": 0, "creation_date": 1528443051, "post_id": 50724205, "comment_id": 88518867, "body": "In your startup code, you would need to initialize static variables etc. That is probably something you missed. You will probably have to do this in assembler before using any code from the stdlib. Take a look into the startup code provided with your compiler, as (especially when you cross-compile) it is very much dependant on your target platform."}], "tags": [], "owner": {"reputation": 5396, "user_id": 304090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea21a0ee88ea25ce0fba351149362b29?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/304090/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1528299013, "creation_date": 1528299013, "answer_id": 50724205, "question_id": 50719973, "link": "https://stackoverflow.com/questions/50719973/how-should-i-write-code-for-nostartfiles-or-nostdlib-options-for-gcc/50724205#50724205", "title": "How should I write code for -nostartfiles or -nostdlib options for gcc?", "body": "<p>Yes, this is expected behaviour.\nIf you want to write your own startup-code or your own standard library, you need these options, otherwise you could not write your own code as symbols would be duplicated.</p>\n"}], "owner": {"reputation": 135, "user_id": 9157915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e4e4db3a4a06411c2b548373fe24de?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/9157915/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 718, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1528299541, "creation_date": 1528286669, "last_edit_date": 1528299541, "question_id": 50719973, "link": "https://stackoverflow.com/questions/50719973/how-should-i-write-code-for-nostartfiles-or-nostdlib-options-for-gcc", "title": "How should I write code for -nostartfiles or -nostdlib options for gcc?", "body": "<p>I came across <code>-nostartfiles</code> and <code>-nostdlib</code> options under gcc compilation options. I, however, do not understand as to how one can write code for the above options. Do you need to write every startup function (like <code>_start</code>, <code>__libc_csu_init</code> etc.)?</p>\n\n<p>Can I get a simplified code for both these options just to understand it's working?</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>Also I just discovered that using <code>static</code> along with <code>nostartfiles</code> throws a <code>segmentation fault</code>. A simple c code to reproduce the same:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nvoid _start()\n{\n    int x = main();\n    exit(x);\n}\n\nint main()\n{\n    printf(\"Hello world!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Compiled using:</p>\n\n<pre><code>gcc -nostartfiles -static -o foo foo.c\n</code></pre>\n\n<p>The output to the above code is a <code>segmentation fault</code>. Is it the expected output?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528287192, "post_id": 50719909, "comment_id": 88448633, "body": "Expressions involving binary operators are evaluated left to right, subject to the operator precedence rules, so the first two expressions are evaluated as <code>temf = (((9 &#47; 5) * temc) + 32)</code>. In the <code>(9 &#47; 5)</code> subexpression, both operands are integers, so it uses integer division, discarding the fractional part."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528287608, "post_id": 50719909, "comment_id": 88448940, "body": "In comparison, the third expression is evaluated as <code>temf = (((9 * temc) &#47; 5) + 32</code>. The <code>(9 * temc)</code> subexpression involves an <code>int</code> and a <code>double</code>, so the <code>int</code> <code>9</code> is converted to <code>double</code> and the result is a <code>double</code>. The <code>((9 * temc) &#47; 5)</code> subexpression therefore involves division of a <code>double</code> <code>(9 * temc)</code> by an <code>int</code> <code>5</code>, so the <code>int</code> <code>5</code> is converted to <code>double</code> and floating point division is used."}], "answers": [{"tags": [], "owner": {"reputation": 1801, "user_id": 7433460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h0Epz.jpg?s=128&g=1", "display_name": "Hossein Golshani", "link": "https://stackoverflow.com/users/7433460/hossein-golshani"}, "is_accepted": false, "score": 4, "last_activity_date": 1616913507, "last_edit_date": 1616913507, "creation_date": 1528286930, "answer_id": 50720046, "question_id": 50719909, "link": "https://stackoverflow.com/questions/50719909/operator-precedence-in-c-celsius-to-fahrenheit/50720046#50720046", "title": "Operator precedence in C, Celsius to Fahrenheit", "body": "<p><code>(9. / 5.) = 1.8</code> is double division and <code>(9/5) = 1</code> is int division.</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    double temf;\n    double temc = 17.0;\n\n    temf = (9. / 5.) * temc + 32.;\n    printf(&quot;%g\\n&quot;, temf);\n\n    temf = 9. / 5. * temc + 32.;\n    printf(&quot;%g\\n&quot;, temf);\n\n    temf = 9. * temc / 5. + 32.;\n    printf(&quot;%g\\n&quot;, temf);\n\n    temf = 32. + 9. * temc / 5.;\n    printf(&quot;%g\\n&quot;, temf);\n}\n</code></pre>\n<p>Results:</p>\n<pre><code>62.6\n62.6\n62.6\n62.6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 369, "user_id": 7400340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6380568a3888fda9ed87f3e4f13ea4?s=128&d=identicon&r=PG&f=1", "display_name": "sdobak", "link": "https://stackoverflow.com/users/7400340/sdobak"}, "is_accepted": false, "score": 4, "last_activity_date": 1528286989, "creation_date": 1528286989, "answer_id": 50720058, "question_id": 50719909, "link": "https://stackoverflow.com/questions/50719909/operator-precedence-in-c-celsius-to-fahrenheit/50720058#50720058", "title": "Operator precedence in C, Celsius to Fahrenheit", "body": "<p>In C, you should take care of the types of numerical constants, the constant itself will determine what type it will have. If you write a constant as <code>9</code> then it will be an integer, if you write <code>9.0</code> then it will be a double, if you write <code>9.0f</code>, then it will be a float.</p>\n\n<p>So if you just type <code>9/5</code> then it will be an integer division and will obey the rules of integer division.  The result of the integer / operator is the algebraic quotient with any fractional part discarded. <code>9/5 = 1.8</code>, if we discard the fractional part then it will be <code>1</code>. <code>1 * 17.0 = 17.0</code>.</p>\n\n<p>To get to proper result you should write <code>9.0/5.0</code>, this will be a division of two double values and the result will be 1.8 as a double.</p>\n"}], "owner": {"reputation": 23, "user_id": 5565053, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y0XYZWWQ-k8/AAAAAAAAAAI/AAAAAAAAADg/VCAMUiDcDBo/photo.jpg?sz=128", "display_name": "Stefan K.", "link": "https://stackoverflow.com/users/5565053/stefan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1528288403, "answer_count": 2, "score": 1, "last_activity_date": 1616913507, "creation_date": 1528286464, "question_id": 50719909, "link": "https://stackoverflow.com/questions/50719909/operator-precedence-in-c-celsius-to-fahrenheit", "closed_reason": "Duplicate", "title": "Operator precedence in C, Celsius to Fahrenheit", "body": "<p>I have this piece of code that turns a temperature in Celsius to Fahrenheit using various orders of expressions:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    double temf;\n    double temc = 17.0;\n\n    temf = (9 / 5) * temc + 32;\n    printf(\"%g\\n\", temf);\n\n    temf = 9 / 5 * temc + 32;\n    printf(\"%g\\n\", temf);\n\n    temf = 9 * temc / 5 + 32;\n    printf(\"%g\\n\", temf);\n\n    temf = 32 + 9 * temc / 5;\n    printf(\"%g\\n\", temf);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>And it returns</p>\n\n<pre><code>49\n49\n62.6\n62.6\n</code></pre>\n\n<p>Can someone explain to me why</p>\n\n<pre><code>(9/5) * 17.0 + 32 = 17.0 + 32\n</code></pre>\n\n<p>What is the actual expression being executed when you type the first 2 calculations?</p>\n"}, {"tags": ["c", "struct", "var"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1528286176, "post_id": 50719802, "comment_id": 88447964, "body": "<code>f</code> is a variable of type <code>Node</code>, which is essentially same as the type <code>struct node</code>."}, {"owner": {"reputation": 137, "user_id": 9655138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLyXz.jpg?s=128&g=1", "display_name": "Sun Voyager", "link": "https://stackoverflow.com/users/9655138/sun-voyager"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1528286351, "post_id": 50719802, "comment_id": 88448091, "body": "is this like f is a struct node variable?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1528286483, "post_id": 50719802, "comment_id": 88448169, "body": "Yes, it is....."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1528287887, "post_id": 50719802, "comment_id": 88449121, "body": "More struct related terminology can be found <i><a href=\"https://en.wikipedia.org/wiki/Struct_(C_programming_language)\" rel=\"nofollow noreferrer\">here</a></i>."}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1528287658, "post_id": 50719874, "comment_id": 88448977, "body": "<i>alias</i> is probably a better choice over <i>synonym</i> for describing what <code>Node</code> is."}], "tags": [], "owner": {"reputation": 540, "user_id": 8932168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ji9k2.jpg?s=128&g=1", "display_name": "rhaport", "link": "https://stackoverflow.com/users/8932168/rhaport"}, "is_accepted": false, "score": 2, "last_activity_date": 1528287496, "last_edit_date": 1528287496, "creation_date": 1528286321, "answer_id": 50719874, "question_id": 50719802, "link": "https://stackoverflow.com/questions/50719802/struct-variable/50719874#50719874", "title": "Struct variable", "body": "<p><code>f</code> is an input argument of the type <code>Node</code>. The type <code>Node</code> is synonym of the type <code>struct node</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 1, "last_activity_date": 1528287556, "last_edit_date": 1528287556, "creation_date": 1528286738, "answer_id": 50719989, "question_id": 50719802, "link": "https://stackoverflow.com/questions/50719802/struct-variable/50719989#50719989", "title": "Struct variable", "body": "<p>In the statement\n<code>typedef struct node Node;</code> \nyou are giving alias name of <code>struct node</code> as <code>Node</code> by using <code>typedef</code>.</p>\n\n<p>So in the definition of <code>function()</code></p>\n\n<p><code>int function(Node f){...}</code></p>\n\n<p><code>f</code> is nothing but variable of <code>struct node</code> type. </p>\n\n<p>Also you can see the <code>typedef</code> declaration and meanings here <a href=\"http://en.cppreference.com/w/c/language/typedef\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/language/typedef</a></p>\n"}], "owner": {"reputation": 137, "user_id": 9655138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLyXz.jpg?s=128&g=1", "display_name": "Sun Voyager", "link": "https://stackoverflow.com/users/9655138/sun-voyager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50719989, "answer_count": 2, "score": 0, "last_activity_date": 1528287556, "creation_date": 1528286107, "last_edit_date": 1528286695, "question_id": 50719802, "link": "https://stackoverflow.com/questions/50719802/struct-variable", "title": "Struct variable", "body": "<p>When we have :</p>\n\n<pre><code>struct node {\n    char...\n    int....\n    struct node *....\n}\n\ntypedef struct node Node;\n</code></pre>\n\n<p>and then we have a function like this:</p>\n\n<pre><code>int function(Node f){...}\n</code></pre>\n\n<p>What is this <code>f</code> ?</p>\n"}, {"tags": ["c", "raspberry-pi3"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1528288446, "post_id": 50719795, "comment_id": 88449490, "body": "It appears you have provided a good description of what code you have shown.  Then it appears you have made a (very poorly worded) request for someone to add a feature for you.  <code>void record_video(){ &#47;* Record video that has to be transmitted *&#47;</code>.  What attempt have you made to fill that section, and what problems did you have with it?"}, {"owner": {"reputation": 1, "user_id": 9903126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9av2.jpg?s=128&g=1", "display_name": "Rami Obead", "link": "https://stackoverflow.com/users/9903126/rami-obead"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1528288914, "post_id": 50719795, "comment_id": 88449793, "body": "this is the problem I want to capture a video using c which I cant unfortunately."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1528290025, "post_id": 50719795, "comment_id": 88450482, "body": "A request to <i>help with existing</i> code is fine, but a request to <i>create</i> code is generally way off-topic here.  Take your best shot at implementing the the thing you have described, then, if your implementation does not work, post your attempt, explaining what you have tried, how it failed and what expectations were not met."}], "owner": {"reputation": 1, "user_id": 9903126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9av2.jpg?s=128&g=1", "display_name": "Rami Obead", "link": "https://stackoverflow.com/users/9903126/rami-obead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1528288817, "creation_date": 1528286081, "last_edit_date": 1528288817, "question_id": 50719795, "link": "https://stackoverflow.com/questions/50719795/capture-a-video-in-raspberry-pi-camera-model-using-c-language", "title": "Capture a video in raspberry pi camera model using C language", "body": "<p>I wrote a server code as the main server for all the clients. This program is multi-threaded and waits for the clients to connect. Once all the threads are created, they wait on thread accept. Once the connection is accepted, they wait on reception of file from clients. At the end of these threads reception, all the threads join so that system is at common point. This behavior repeats after every 40 seconds. </p>\n\n<p>I need to capture video frames and transferring then integrated in the code?</p>\n\n<p>Server.c</p>\n\n<pre><code>// Server side C/C++ program to demonstrate Socket programming\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n#include&lt;pthread.h&gt; //for threading , link with lpthread\n\n\n#define LISTENING_PORT 8080\n#define CLIENT_COUNT 4\n\nvoid * handle_new_conn(void *server_fd)\n{\n    int valread;\n    char buffer[1024] = {0};\n    char *hello = \"Hello from server\";\n    int new_socket;\n    struct sockaddr_in address;\n    int addrlen = sizeof(address);\n\n    address.sin_family = AF_INET;\n    address.sin_addr.s_addr = INADDR_ANY;\n    address.sin_port = htons( LISTENING_PORT );\n\n    /* Accept connection from client */\n    if ((new_socket = accept(*((int *)server_fd),\n                    (struct sockaddr *)&amp;address,\n                    (socklen_t*)&amp;addrlen)) &lt; 0)\n    {\n        perror(\"accept\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* Code to handle new connection */\n    valread = read(new_socket, buffer, 1024);\n    printf(\"%s\\n\", buffer);\n\n    sleep(10);\n\n    send(new_socket, hello , strlen(hello), 0);\n    printf(\"Hello message sent\\n\");\n\n    sleep(2);\n\n    close(new_socket);\n}\n\nint main(int argc, char const *argv[])\n{\n    int server_fd, new_socket, valread;\n    struct sockaddr_in address;\n    int opt = 1;\n    int addrlen = sizeof(address);\n    char buffer[1024] = {0};\n    char *hello = \"Hello from server\";\n    pthread_t thread_id[4];\n    int client_no = 0;\n    int i;\n\n    // Creating socket file descriptor\n    if ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0)\n    {\n        perror(\"socket failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    // Forcefully attaching socket to the port 8080\n    if (setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT,\n                                                  &amp;opt, sizeof(opt)))\n    {\n        perror(\"setsockopt\");\n        exit(EXIT_FAILURE);\n    }\n    address.sin_family = AF_INET;\n    address.sin_addr.s_addr = INADDR_ANY;\n    address.sin_port = htons( LISTENING_PORT );\n\n    // Forcefully attaching socket to the port 8080\n    if (bind(server_fd, (struct sockaddr *)&amp;address,\n                                 sizeof(address))&lt;0)\n    {\n        perror(\"bind failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    if (listen(server_fd, CLIENT_COUNT - 1) &lt; 0)\n    {\n        perror(\"listen\");\n        exit(EXIT_FAILURE);\n    }\n\n    while (1)\n    {\n        for (i=0; i &lt; CLIENT_COUNT; i++)\n        {\n            /* Handle the accepted connection from client */\n            if (pthread_create(&amp;thread_id[client_no] , NULL,\n                        handle_new_conn, (void*) &amp;server_fd) &lt; 0)\n            {\n                perror(\"Couldn't create thread\");\n                exit(EXIT_FAILURE);\n            }\n\n            client_no++;\n        }\n        client_no = 0;\n        for (i=0; i &lt; CLIENT_COUNT; i++)\n        {\n            pthread_join(thread_id[client_no], NULL);\n            printf(\"Thread [%d] destroyed\\n\",\n                thread_id[client_no]);\n\n            client_no++;\n        }\n\n        /* Wait for the next interval to fetch the feed */\n        sleep(40);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>client.c</p>\n\n<pre><code>// Client side C/C++ program to demonstrate Socket programming\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n\n#define SERVER_PORT 8080\n\nvoid record_video()\n{\n    /* Record video that has to be transmitted */\n\n}\n\nvoid handle_request(int sock)\n{\n    char *hello = \"Hello from client\";\n    char * buffer[1024] = {0};\n    int valread;\n\n    printf(\"Client sock id: %d\\n\", sock);\n\n    sleep(2);\n\n    /* Connection to the server will be handled here */\n    send(sock , hello , strlen(hello) , 0 );\n    printf(\"Hello message sent\\n\");\n    valread = read( sock , buffer, 1024);\n    printf(\"%s\\n\",buffer );\n\n    close(sock);\n}\n\nint main(int argc, char const *argv[])\n{\n    struct sockaddr_in address;\n    int sock = 0, valread;\n    struct sockaddr_in serv_addr;\n    char *hello = \"Hello from client\";\n    char buffer[1024] = {0};\n    if ((sock = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n    {\n        printf(\"\\n Socket creation error \\n\");\n        return -1;\n    }\n\n    memset(&amp;serv_addr, '0', sizeof(serv_addr));\n\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_port = htons(SERVER_PORT);\n\n    // Convert IPv4 and IPv6 addresses from text to binary form\n    if(inet_pton(AF_INET, \"127.0.0.1\", &amp;serv_addr.sin_addr)&lt;=0)\n    {\n        printf(\"\\nInvalid address/ Address not supported \\n\");\n        return -1;\n    }\n\n    if (connect(sock, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0)\n    {\n        printf(\"\\nConnection Failed \\n\");\n        return -1;\n    }\n\n    record_video();\n\n    handle_request(sock);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 5, "creation_date": 1528286040, "post_id": 50719736, "comment_id": 88447865, "body": "You are compiling a <code>C</code> program and telling gcc to compile as if it was a <code>C++</code> program (<code>-x c++</code>).  They are different languages."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1528286106, "post_id": 50719736, "comment_id": 88447908, "body": "Needing <code>-fpermissive</code> is alywas <i>extremely</i> dodgy. You code is certainly not standard C++ and <i>probably</i> broken. Fixing all the underlying issues causing the warning to occur would be the real solution. Also, note that C is not a subset of C++ and thus not all C code can be compiles as C++."}, {"owner": {"reputation": 4000, "user_id": 885844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4acd838d39cbf02130ba75ea55e255b6?s=128&d=identicon&r=PG&f=1", "display_name": "w128", "link": "https://stackoverflow.com/users/885844/w128"}, "edited": false, "score": 0, "creation_date": 1528286234, "post_id": 50719736, "comment_id": 88448005, "body": "I understand the difference between C and C++. What I don&#39;t understand is if there is a proper way to get this to mix with gcc? Mixing C and C++ is not unheard of as long as conditions are met (which in this case should be, with extern C etc.), I believe?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1528286289, "post_id": 50719736, "comment_id": 88448051, "body": "@w128 <code>extern &quot;C&quot;</code> is not a silver bullet that somehow makes C-only language features standard C++."}, {"owner": {"reputation": 4000, "user_id": 885844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4acd838d39cbf02130ba75ea55e255b6?s=128&d=identicon&r=PG&f=1", "display_name": "w128", "link": "https://stackoverflow.com/users/885844/w128"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1528290903, "post_id": 50719736, "comment_id": 88451067, "body": "@BaummitAugen of course, and gcc doesn&#39;t know how to handle this automatically - what I was getting at are the multi-step solutions provided by the answers."}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 5, "last_activity_date": 1528292771, "last_edit_date": 1528292771, "creation_date": 1528286191, "answer_id": 50719831, "question_id": 50719736, "link": "https://stackoverflow.com/questions/50719736/why-does-gcc-produce-a-different-result-when-bulding-from-source-compared-to-lin/50719831#50719831", "title": "Why does gcc produce a different result when bulding from source compared to linking a static library?", "body": "<p>The error (and warning) you see are <em>compilation</em> errors (and warning) output by a C++ compiler when compiling C code.</p>\n\n<p>For instance, in C <code>\"literal\"</code> has type <code>char[]</code> while in C++ it has type <code>const char[]</code>.</p>\n\n<p>Would you get a C++ compiler build <code>libopen62541.a</code> from <code>open62541.c</code>, you would see the same errors (warnings). But a C compiler might be OK with it (depending on the state of that C source file).</p>\n\n<p>On the other hand, when you compile <code>my.cpp</code> and links it against <code>libopen62541.a</code>, the compiler doesn't see that offending C code, so no errors (warnings).</p>\n\n<hr>\n\n<p>From here, you basically have two options:</p>\n\n<ol>\n<li><p>Use the procompiled library if it suits you as is</p>\n\n<pre><code>g++ -std=c++14 -Wall -Wextra -Werror my.cpp -lopen62541.a -o out\n</code></pre></li>\n<li><p>Compile the library's code as a first step if you need to modify it</p>\n\n<pre><code>gcc -Wall -Wextra -Werror -c open62541.c\ng++ -std=c++14 -Wall -Wextra -Werror -c my.cpp\ng++ open62541.o my.o -o out\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 3, "last_activity_date": 1528286289, "creation_date": 1528286289, "answer_id": 50719865, "question_id": 50719736, "link": "https://stackoverflow.com/questions/50719736/why-does-gcc-produce-a-different-result-when-bulding-from-source-compared-to-lin/50719865#50719865", "title": "Why does gcc produce a different result when bulding from source compared to linking a static library?", "body": "<pre><code>gcc -x c++ -std=c++14 -Wall my.cpp open62541.c -lstdc++ -o out\n</code></pre>\n\n<p>This command forces the C code in <code>open62541.c</code> to be compiled as C++.  That file apparently contains constructs that are valid in C but not C++.</p>\n\n<p>What you should be doing is compiling each file as its own language and then linking them together:</p>\n\n<pre><code>gcc -std=gnu11 -Wall -c open62541.c\ng++ -std=gnu++14 -Wall -c my.cpp\ng++ -o out my.o open62541.o\n</code></pre>\n\n<p>Wrapping up those commands in an easily repeatable package is what Makefiles are for.</p>\n\n<p>If you're wondering why I changed from the strict <code>-std=c++14</code> to the loose <code>-std=gnu++14</code> mode, it's because the strict mode is so strict that it may break the system headers!  You don't need to deal with that on top of everything else.  If you want a more practical additional amount of strictness, try adding -Wextra and -Wpedantic instead ... but be prepared for that to throw lots of warnings that don't actually indicate bugs, on the third-party code. </p>\n"}], "owner": {"reputation": 4000, "user_id": 885844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4acd838d39cbf02130ba75ea55e255b6?s=128&d=identicon&r=PG&f=1", "display_name": "w128", "link": "https://stackoverflow.com/users/885844/w128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 50719831, "answer_count": 2, "score": 1, "last_activity_date": 1528292771, "creation_date": 1528285856, "question_id": 50719736, "link": "https://stackoverflow.com/questions/50719736/why-does-gcc-produce-a-different-result-when-bulding-from-source-compared-to-lin", "title": "Why does gcc produce a different result when bulding from source compared to linking a static library?", "body": "<p>I have a single C++14 file, <code>my.cpp</code>, and from within it I'm trying to use a C99 library called <em>open62541</em>. For the latter, both full source <code>open62541.c/.h</code> and a library <code>libopen62541.a</code> exist. In <code>my.cpp</code>, where I include the <code>open62541.h</code>, I'm using C++ specific code (e.g. iostream), so technically I'm mixing C and C++.</p>\n\n<p>I can get <code>my.cpp</code> to compile successfully by referencing the <code>libopen62541.a</code>:</p>\n\n<pre><code>gcc -x c++ -std=c++14 -Wall my.cpp -l:libopen62541.a -lstdc++ -o out\n</code></pre>\n\n<p>This outputs no warnings, and creates an executable <em>out</em>.</p>\n\n<p>However, if I try to compile using source code only:</p>\n\n<pre><code>gcc -x c++ -std=c++14 -Wall my.cpp open62541.c -lstdc++ -o out\n</code></pre>\n\n<p>I get a lot of ISO C++ warnings (e.g. \"<em>ISO C++ forbids converting a string constant to \u2018char</em>'*\") and some \"<em>jump to label</em>\" errors originating from within <code>open62541.c</code>, resulting in compilation failure. </p>\n\n<p>I can get compilation to succeed by using the <code>-fpermissive</code> switch:</p>\n\n<pre><code>gcc -x c++ -std=c++14 -Wall my.cpp open62541.c -lstdc++ -fpermissive -o out\n</code></pre>\n\n<p>which still outputs a lot of warnings, but creates the executable successfully. However, I'm unsure if doing this is a good idea.</p>\n\n<p>Perhaps worth mentioning is that <code>open62541.h</code> considers C++ at the beginning:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n</code></pre>\n\n<ol>\n<li><p>Given that .a library, which comes bundled with the <em>open62541</em> library code, is supposedly built from the same source, why are the first two approaches not consistent in terms of warnings and errors generated? Why does one work and the other doesn't?</p></li>\n<li><p>Should one method - linking .a vs referring to .c - be preferred to another? I was under impression that they should be equivalent, but apparently they aren't.</p></li>\n<li><p>Is using <code>-fpermissive</code> in this case more of a hack that could mask potential problems, and should thus be avoided?</p></li>\n</ol>\n"}, {"tags": ["c", "string", "strlen"], "comments": [{"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 7, "creation_date": 1528283799, "post_id": 50719026, "comment_id": 88446430, "body": "It&#39;s undefined behavior and you are just lucky that there is a zero byte right behind your array?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 4, "creation_date": 1528283836, "post_id": 50719026, "comment_id": 88446459, "body": "Neither of those buffers <i>have</i> &quot;first 39 characters&quot;, because they&#39;re only of size 10. You&#39;re observing undefined behaviour from reading past the buffers&#39; end."}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 0, "creation_date": 1528283855, "post_id": 50719026, "comment_id": 88446472, "body": "How do you know that there is dfinitely no &#39;\\0&#39; at the location after the last character in your buffer. The result is IMHO UB."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1528284652, "post_id": 50719026, "comment_id": 88446977, "body": "<code>for ( int i = 0; i &lt; 10; i++ ) bufferOnHeap[ i ] = &#39;a&#39; + i;</code> - instead of 10 similar lines."}], "answers": [{"comments": [{"owner": {"reputation": 3212, "user_id": 3357352, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nfb7n.jpg?s=128&g=1", "display_name": "OrenIshShalom", "link": "https://stackoverflow.com/users/3357352/orenishshalom"}, "edited": false, "score": 0, "creation_date": 1528285512, "post_id": 50719136, "comment_id": 88447498, "body": "when I use gdb, I see that indeed 0 is placed after bufferOnStack. Is this some kind of stack protection against buffer overflows?"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "reply_to_user": {"reputation": 3212, "user_id": 3357352, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nfb7n.jpg?s=128&g=1", "display_name": "OrenIshShalom", "link": "https://stackoverflow.com/users/3357352/orenishshalom"}, "edited": false, "score": 1, "creation_date": 1528287630, "post_id": 50719136, "comment_id": 88448956, "body": "@OrenIshShalom It&#39;s probably padding and it&#39;s zero-initialized because you were lucky. Don&#39;t expect it to be there. It&#39;s outside the memory region you are allowed to walk over."}], "tags": [], "owner": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "is_accepted": false, "score": 3, "last_activity_date": 1528283973, "creation_date": 1528283973, "answer_id": 50719136, "question_id": 50719026, "link": "https://stackoverflow.com/questions/50719026/what-happens-when-strnlen-is-used-with-a-larger-maximum-length-than-the-buffer/50719136#50719136", "title": "What happens when strnlen() is used with a larger maximum length than the buffer size actually is?", "body": "<p>Firstly, <a href=\"https://stackoverflow.com/a/605858/3791827\">don't cast malloc</a>.</p>\n\n<p>Secondly, you are reading past the end of your arrays. The memory outside your array bounds is undefined, and therefore there is no guarantee that it is not zero; in this instance, it is!</p>\n\n<p>In general, this kind of behaviour is sloppy - see <a href=\"https://stackoverflow.com/a/15647634/3791827\">this answer</a> for a good summary of the potential consequences</p>\n"}, {"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528285320, "post_id": 50719427, "comment_id": 88447375, "body": "I think the wording in the man page is a bit ambiguous when it says &quot;never beyond <code>s+maxlen</code>&quot;, but I think it really means <i>never at or beyond <code>s+maxlen</code></i>. There is no reason for it to access <code>s[maxlen]</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528285512, "post_id": 50719427, "comment_id": 88447499, "body": "@IanAbbott Is that so? I thought the length is taken, considering the null as the +1."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528285610, "post_id": 50719427, "comment_id": 88447565, "body": "Well before that bit it does say &quot;<b><code>strnlen()</code></b> looks only at the first <code>maxlen</code> characters ...&quot;."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528285749, "post_id": 50719427, "comment_id": 88447656, "body": "@IanAbbott Ah..now I see, Well, I cannot edit the quote, but edited my answer. :)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1528286821, "post_id": 50719427, "comment_id": 88448383, "body": "It&#39;s more explicit in the SUSv4 documentation: &quot;The <i>strnlen()</i> function shall never examine more than <i>maxlen</i> bytes of the array pointed to by <i>s</i>.&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528295509, "post_id": 50719427, "comment_id": 88454321, "body": "&quot;... need to make sure, for the value you provide for maxlen, the array idexing is valid for [maxlen -1] for the supplied string, i.e, the string has at least maxlen elements in it.&quot; --&gt; Hmm I would expect <code>strnlen(&quot;hello&quot;,39);</code> to be valid, yet does not meet that condition."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528295573, "post_id": 50719427, "comment_id": 88454379, "body": "If able, provide a link to the first citation."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528296022, "post_id": 50719427, "comment_id": 88454682, "body": "Note that with <code>strnlen(const char *s, size_t maxlen)</code>, <code>s</code> need not point to a <i>string</i>.  A  character array will do as in OP&#39;s case."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1528286817, "last_edit_date": 1528286817, "creation_date": 1528284888, "answer_id": 50719427, "question_id": 50719026, "link": "https://stackoverflow.com/questions/50719026/what-happens-when-strnlen-is-used-with-a-larger-maximum-length-than-the-buffer/50719427#50719427", "title": "What happens when strnlen() is used with a larger maximum length than the buffer size actually is?", "body": "<p>First of all, <a href=\"https://linux.die.net/man/3/strnlen\" rel=\"nofollow noreferrer\"><code>strnlen()</code></a> is not defined by C standard; it's a POSIX standard function.</p>\n\n<p>That being said, read the documentation <em>carefully</em> </p>\n\n<blockquote>\n  <p>The <code>strnlen()</code> function returns the number of bytes in the string pointed to by <code>s</code>, excluding the terminating null byte ('\\0'), but at most <code>maxlen</code>. In doing this, <code>strnlen()</code> looks only at the first <code>maxlen</code> bytes at <code>s</code> and never beyond <code>s+maxlen</code>.</p>\n</blockquote>\n\n<p>So that means, while calling the function, you need to make sure, for the value you provide for <code>maxlen</code>, the array idexing is valid for <code>[maxlen -1]</code> for the supplied string, i.e, the <em>string</em> has at least <code>maxlen</code> elements in it.</p>\n\n<p>Otherwise, while accessing the <em>string</em>, you'll venture into memory location which is not allocated to you (array out of bound access) hereby invoking <strong><a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a></strong>.</p>\n\n<p><strong>Remember,</strong> this function is to calculate the length of an array, upper-bound to a value (<code>maxlen</code>). That implies, the supplied arrays are at least equal to or greater than the bound, not the other way around. </p>\n\n<hr>\n\n<p>[Footnote]:</p>\n\n<p>By definition, a <em>string</em> is null-terminated.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a77.1.1, <em>Definitions of terms</em></p>\n\n<blockquote>\n  <p>A string is a contiguous sequence of characters terminated by and including the first null\n  character. [...]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1528289148, "post_id": 50719921, "comment_id": 88449934, "body": "How is a reader supposed to know what \u201cUB\u201d is when the answer does not define it?"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1528292335, "last_edit_date": 1528292335, "creation_date": 1528286491, "answer_id": 50719921, "question_id": 50719026, "link": "https://stackoverflow.com/questions/50719026/what-happens-when-strnlen-is-used-with-a-larger-maximum-length-than-the-buffer/50719921#50719921", "title": "What happens when strnlen() is used with a larger maximum length than the buffer size actually is?", "body": "<p>What happens when ... <strong>\"<a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined behaviour (UB)</a>\"</strong>? </p>\n\n<blockquote>\n  <p>\u201cWhen the compiler encounters [a given undefined construct] it is legal for it to make demons fly out of your nose\u201d</p>\n</blockquote>\n\n<p><em>Your heading is actually not <strong>UB</strong>, since calling <code>strnlen(\"hi\", 5)</code> is perfectly legal, but the specifics of your question shows it is indeed UB...</em></p>\n\n<p>Both <code>strlen</code> and <code>strnlen</code> expect a string, i.e. a nul-terminated <code>char</code> sequence. Providing your non-nul-terminated<code>char</code> array to the function is <strong>UB</strong>.</p>\n\n<p>What happens in your case is that the function reads the first 10 <code>char</code>s, finds no <code>'\\0'</code>, and since it hasn't went <em>out-of-bounds</em> it continues to read further, and by that invoking <strong>UB</strong> (reading un-allocated memory). It could be that your compiler took the liberty to end your array with <code>'\\0'</code>, it could be that the <code>'\\0'</code> was there before... the possibilities are limited only by the compiler designers.</p>\n"}, {"comments": [{"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1528657717, "post_id": 50722516, "comment_id": 88580619, "body": "Nice analogy! I&#39;d suggest to drop the first two attempts though. They don&#39;t really help to drive home the point..."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1528297525, "last_edit_date": 1528297525, "creation_date": 1528294111, "answer_id": 50722516, "question_id": 50719026, "link": "https://stackoverflow.com/questions/50719026/what-happens-when-strnlen-is-used-with-a-larger-maximum-length-than-the-buffer/50722516#50722516", "title": "What happens when strnlen() is used with a larger maximum length than the buffer size actually is?", "body": "<p>Your question is roughly equivalent to the following:</p>\n\n<blockquote>\n  <p>I know that a burglar alarm is supposed to prevent your house from getting robbed.  This morning when I left the house, I turned off the burglar alarm.  Sometime during the day when I was away, a burglar broke in and stole my stuff.  How did this happen?</p>\n</blockquote>\n\n<p>Or to this:</p>\n\n<blockquote>\n  <p>I know you can use the cruise control on your car to help you avoid getting speeding tickets.  Yesterday I was driving on a road where the speed limit was 65.  I set the cruise control to 95.  A cop pulled me over and I got a speeding ticket.  How did this happen?</p>\n</blockquote>\n\n<p>Actually, those aren't quite right.  Here's a more contrived analogy:</p>\n\n<blockquote>\n  <p>I live in a house with a 10 yard long driveway to the street.  I have trained my dog to fetch my newspaper.  One day I made sure there were no newspapers on the driveway.  I put my dog on a 39 yard leash, and I told him to fetch the newspapwer.  I expected him to go to the end of the leash, 39 yards away.  But instead, he only went 10 yards, then stopped.  How did this happen?</p>\n</blockquote>\n\n<p>And of course there are many answers.  Perhaps, when your dog got to the end of your newspaper-free driveway, right away he found someone else's newspaper in the gutter.  Or perhaps, when the leash failed to stop him at the end of the driveway and he continued into the street, he got run over by a car.</p>\n\n<p>The point of putting your dog on a leash is to restrict him to a safe area -- in this case, your property, that you control.  If you put him on such a long leash that he can go off into the street, or into the woods, you're kind of defeating the purpose of controlling him by putting him on a leash.</p>\n\n<hr>\n\n<p>Similarly, the whole point of <code>strnlen</code> is to behave gracefully if, within the buffer you have defined, there is no null character for <code>strnlen</code> to find.</p>\n\n<p>The problem with non-null-terminated strings is that functions like <code>strlen</code> (which blindly search for null terminators) sail off the end and rummage blindly around in undefined memory, desperately trying to find the terminator.  For example, if you say</p>\n\n<pre><code>char non_null_terminated_string[3] = \"abc\";\nint len = strlen(non_null_terminated_string);\n</code></pre>\n\n<p>the behavior is undefined, because <code>strlen</code> sails off the end.  One way to fix this is to use <code>strnlen</code>:</p>\n\n<pre><code>char non_null_terminated_string[3] = \"abc\";\nint len = strnlen(non_null_terminated_string, 3);\n</code></pre>\n\n<p>But if you hand a bigger number to <code>strnlen</code>, it defeats the whole purpose.  You're back wondering what will happen when <code>strnlen</code> sails off the end, and there's no way to answer that.</p>\n"}], "owner": {"reputation": 3212, "user_id": 3357352, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nfb7n.jpg?s=128&g=1", "display_name": "OrenIshShalom", "link": "https://stackoverflow.com/users/3357352/orenishshalom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 50719427, "answer_count": 4, "score": 0, "last_activity_date": 1528297525, "creation_date": 1528283643, "last_edit_date": 1528285161, "question_id": 50719026, "link": "https://stackoverflow.com/questions/50719026/what-happens-when-strnlen-is-used-with-a-larger-maximum-length-than-the-buffer", "title": "What happens when strnlen() is used with a larger maximum length than the buffer size actually is?", "body": "<p>I've written the following code to understand better how strnlen behaves:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char **argv)\n{\n    char bufferOnStack[10]={'a','b','c','d','e','f','g','h','i','j'};\n    char *bufferOnHeap = (char *) malloc(10);\n\n    bufferOnHeap[ 0]='a';\n    bufferOnHeap[ 1]='b';\n    bufferOnHeap[ 2]='c';\n    bufferOnHeap[ 3]='d';\n    bufferOnHeap[ 4]='e';\n    bufferOnHeap[ 5]='f';\n    bufferOnHeap[ 6]='g';\n    bufferOnHeap[ 7]='h';\n    bufferOnHeap[ 8]='i';\n    bufferOnHeap[ 9]='j';\n\n    int lengthOnStack = strnlen(bufferOnStack,39);\n    int lengthOnHeap  = strnlen(bufferOnHeap, 39);\n\n    printf(\"lengthOnStack = %d\\n\",lengthOnStack);\n    printf(\"lengthOnHeap  = %d\\n\",lengthOnHeap);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note the deliberate lack of null termination in both buffers.\nAccording to the documentation, it seems that the lengths should\nboth be 39:</p>\n\n<blockquote>\n  <p>RETURN VALUE\n         The strnlen() function returns strlen(s), if  that  is  less  than  maxlen,  or\n         maxlen if there is no null terminating ('\\0') among the first maxlen characters\n         pointed to by s.</p>\n</blockquote>\n\n<p>Here's my compile line:</p>\n\n<pre><code>$ gcc ./main_08.c -o main\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>$ ./main\nlengthOnStack = 10\nlengthOnHeap  = 10\n</code></pre>\n\n<p>What's going on here? Thanks!</p>\n"}, {"tags": ["c++", "c", "windows", "driver", "sd-card"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1528282595, "post_id": 50718646, "comment_id": 88445639, "body": "You probably need to consume the appropriate interface. What have you tried so far?"}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1528286309, "post_id": 50718646, "comment_id": 88448064, "body": "AFAIK there is no special solution, layer in MFC to wrap such functionality. Must use &quot;raw windows API&quot;"}], "owner": {"reputation": 29, "user_id": 8724364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a881c0a307777c28633a15ebd837a14f?s=128&d=identicon&r=PG&f=1", "display_name": "NIKHIL V S", "link": "https://stackoverflow.com/users/8724364/nikhil-v-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528285451, "creation_date": 1528282539, "last_edit_date": 1528285451, "question_id": 50718646, "link": "https://stackoverflow.com/questions/50718646/how-to-find-cid-of-sd-card-in-mfc-application", "title": "How to find CID of SD card in MFC application", "body": "<p>I need to identify each SD card and block or allow individually using MFC application .I tried with PNP id but its not working.Is there is any way to find the CID of Sd card ?</p>\n\n<pre><code>iRetValDeviceType = SetupDiGetDeviceRegistryProperty(hDevInfo, &amp;DevInfoData, SPDRP_COMPATIBLEIDS, &amp;dwDataTypeDeviceType, (PBYTE)pszBufferDeviceType, dwBuffSizeDeviceType, &amp;dwBuffSizeDeviceType); \n\n  CM_Get_Device_ID(DevInfoData.DevInst,pzsBufferPnpId,MAX_PATH,0); \n  csPnpId = (CString)pzsBufferPnpId;                \n  auto itSearch = NonStorageMap.find(csPnpId);\n\n   if(itSearch != NonStorageMap.end())\n    {\n       //pnp id found in map --&gt;allow the device\n    }\n   else \n   {\n     if( (StrStrI(pszBufferDeviceType,\"PCISTOR\")) || (StrStrI(pszBufferDeviceType,\"SD\"))\n       {\n\n       //pnp id not found in map --&gt;block the device    \n       lRetVal = DisableDevice(&amp;hDevInfo,&amp;DevInfoData, DICS_STOP, bRebootRequired);//DICS_DISABLE\n\n      }\n   }\n</code></pre>\n"}, {"tags": ["c", "apache-kafka", "producer"], "answers": [{"tags": [], "owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "is_accepted": false, "score": 1, "last_activity_date": 1528282749, "creation_date": 1528282749, "answer_id": 50718720, "question_id": 50718641, "link": "https://stackoverflow.com/questions/50718641/generating-uuid-in-response-to-message-sent-by-kafka-producer/50718720#50718720", "title": "Generating UUID in response to message sent by Kafka Producer", "body": "<p>Why not create another consumer topic that 'listens' for messages that have been acknowledged, and then removes them from the cache.  Then the producer can just push messages to that topic when required.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6375506, "user_type": "registered", "profile_image": "https://graph.facebook.com/222463611472150/picture?type=large", "display_name": "Ashutosh Shukla", "link": "https://stackoverflow.com/users/6375506/ashutosh-shukla"}, "edited": false, "score": 0, "creation_date": 1528287498, "post_id": 50719114, "comment_id": 88448862, "body": "Thank you for the response. I have implemented the example. After every delivery I get a response as &quot;XX bytes delivered successfully.&quot; When I send 10,000 messages the callbacks are delayed and messages are enqueued continuously. Now when I later receive multiple callbacks at once, I am unable to decide which message it is referring to. Can I attach some UUID to each message and get that UUID back in callback to know which message is response referring to ? This will help me later clear cache. Can I also customize batches myself to know which packets were included in a particular batch."}, {"owner": {"reputation": 18208, "user_id": 1765189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673318e1268e43679dc9ab6835a39604?s=128&d=identicon&r=PG", "display_name": "Mickael Maison", "link": "https://stackoverflow.com/users/1765189/mickael-maison"}, "reply_to_user": {"reputation": 1, "user_id": 6375506, "user_type": "registered", "profile_image": "https://graph.facebook.com/222463611472150/picture?type=large", "display_name": "Ashutosh Shukla", "link": "https://stackoverflow.com/users/6375506/ashutosh-shukla"}, "edited": false, "score": 0, "creation_date": 1528289369, "post_id": 50719114, "comment_id": 88450069, "body": "You get a pointer to the message (<code>rd_kafka_message_t *</code>) in the delivery report, so you can check the message content. You can also specify an opaque (for example set it to the UUID) when producing (<code>rd_kafka_produce</code>) and the opaque will be set in the delivery report."}], "tags": [], "owner": {"reputation": 18208, "user_id": 1765189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673318e1268e43679dc9ab6835a39604?s=128&d=identicon&r=PG", "display_name": "Mickael Maison", "link": "https://stackoverflow.com/users/1765189/mickael-maison"}, "is_accepted": false, "score": 1, "last_activity_date": 1528283913, "creation_date": 1528283913, "answer_id": 50719114, "question_id": 50718641, "link": "https://stackoverflow.com/questions/50718641/generating-uuid-in-response-to-message-sent-by-kafka-producer/50719114#50719114", "title": "Generating UUID in response to message sent by Kafka Producer", "body": "<p>When sending messages to Kafka, you can configure your Producer to request acknowledgments (usually exposed as a config called <code>acks</code>). That allows the producer to know if a message was successfully or not. </p>\n\n<p>For example, with <a href=\"https://github.com/edenhill/librdkafka\" rel=\"nofollow noreferrer\"><code>librdkafka</code></a> (in my opinion the best C Kafka client) you can get a delivery report callback when a produce request completes. It contains the message and an error in case of failure. That should enable you to easily identify which messages where sent successfully and mark them as done.</p>\n\n<p>See the <a href=\"https://github.com/mimaison/librdkafka/blob/master/src/rdkafka.h#L1016-L1035\" rel=\"nofollow noreferrer\"><code>rd_kafka_conf_set_dr_msg_cb</code></a> method to configure a delivery report callback. The <a href=\"https://github.com/mimaison/librdkafka/blob/master/examples/rdkafka_simple_producer.c\" rel=\"nofollow noreferrer\">simple producer example</a> demonstrate its usage.</p>\n"}], "owner": {"reputation": 1, "user_id": 6375506, "user_type": "registered", "profile_image": "https://graph.facebook.com/222463611472150/picture?type=large", "display_name": "Ashutosh Shukla", "link": "https://stackoverflow.com/users/6375506/ashutosh-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528283913, "creation_date": 1528282527, "question_id": 50718641, "link": "https://stackoverflow.com/questions/50718641/generating-uuid-in-response-to-message-sent-by-kafka-producer", "title": "Generating UUID in response to message sent by Kafka Producer", "body": "<p>I am trying to develop an application which reads byte arrays (representing a C structure and each array associated with a UUID) from a Cache and sends it to Kafka Server through a Producer application in C.</p>\n\n<p>The kafka producer application accumulates a fixed number of such packets and sends them at once.</p>\n\n<p>What I wish to accomplish is get an acknowledgment that which of the messages in the batch were successfully delivered and get their UUID back so that I can clear them from my cache application. I am new to kafka, Please guide me as what is the best way to get this done.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2035, "user_id": 4415502, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1026723693/picture?type=large", "display_name": "Mox", "link": "https://stackoverflow.com/users/4415502/mox"}, "edited": false, "score": 0, "creation_date": 1528280557, "post_id": 50717991, "comment_id": 88444377, "body": "your code merely placed the input into the array, there is no summation of the values."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1528280562, "post_id": 50717991, "comment_id": 88444381, "body": "You know how to add variables in C? Did you go to the lectures ;-)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1528280578, "post_id": 50717991, "comment_id": 88444389, "body": "Array indexes start at 0, not at 1."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1528280638, "post_id": 50717991, "comment_id": 88444421, "body": "Hint: among other problems: there is a very obvious problem here <code>scanf(&quot;%d&quot;, &amp;items[numOfMeal]);</code>"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1528280681, "post_id": 50717991, "comment_id": 88444449, "body": "- into the (non-existent) element beyond the last element in the array, that is."}, {"owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "edited": false, "score": 0, "creation_date": 1528283933, "post_id": 50717991, "comment_id": 88446529, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8300888/calculating-the-sum-of-integers-in-an-array\">Calculating the sum of integers in an array</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1528353488, "post_id": 50718128, "comment_id": 88476615, "body": "without some explanation this answer might be correct but is not really helpful."}, {"owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1528354691, "post_id": 50718128, "comment_id": 88477293, "body": "Actually, this is very basic program anyone can understand it just by reading and dry run. Hardly take a minute  :)"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1528354900, "post_id": 50718128, "comment_id": 88477423, "body": "Well then the question would not have been asked if it was that easy for OP."}, {"owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1528356124, "post_id": 50718128, "comment_id": 88478121, "body": "I have edited the answer. Please check it, if now it is holding the explanation."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1528356399, "post_id": 50718128, "comment_id": 88478297, "body": "This is a very good edit. A little tip, You can mark variables/refrences to the code by embracing it in ` then it looks like <code>this</code>."}], "tags": [], "owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1528358074, "last_edit_date": 1528358074, "creation_date": 1528280878, "answer_id": 50718128, "question_id": 50717991, "link": "https://stackoverflow.com/questions/50717991/calculating-sum-of-array/50718128#50718128", "title": "Calculating sum of array", "body": "<p>1.</p>\n\n<p>You should run the loop from 0 to <code>numOfMeal</code>-1 because array indexing starts from the 0, not 1. If you are accessing the nth element that is a segmentation fault.</p>\n\n<p>2.</p>\n\n<p>The second problem in your code is that you are not taking the input values in the array. Your loop is, again and again, overwriting the <code>items[numOfMeal]</code> which is the last element in your array.</p>\n\n<p>Write your code as below:   </p>\n\n<pre><code> int numOfMeal, items[50],sum=0;\n\n printf(\"Enter number of meals/snacks: \");\n scanf(\"%d\",&amp;numOfMeal);\n\n for(int i=0; i&lt;numOfMeal;i++) // run loop from 0 to numOfMeal-1\n {\n      printf(\"Enter kilojoules for item %d: \", i);\n      scanf(\"%d\", &amp;items[i]); // take the input at ith position in the array \n      sum+=items[i];  // sum them\n\n }\n  printf(\"Your total kilojoules are: %d\", sum);  // print the final result\n</code></pre>\n\n<p>The short code for this can be</p>\n\n<pre><code> int numOfMeal, item, sum=0;\n scanf(\"%d\",&amp;numOfMeal);\n for(int i=0; i&lt;numOfMeal;i++){\n      scanf(\"%d\", &amp;item);\n      sum+=item;\n }\n printf(\"Your total kilojoules are: %d\", sum);\n</code></pre>\n\n<p>In this code I am not storing the value in the array, just saving it temporarily in the variable and add it to sum variable.</p>\n"}, {"tags": [], "owner": {"reputation": 829, "user_id": 5569396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5Prh.jpg?s=128&g=1", "display_name": "Gor Asatryan", "link": "https://stackoverflow.com/users/5569396/gor-asatryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1528282210, "last_edit_date": 1528282210, "creation_date": 1528280962, "answer_id": 50718147, "question_id": 50717991, "link": "https://stackoverflow.com/questions/50717991/calculating-sum-of-array/50718147#50718147", "title": "Calculating sum of array", "body": "<p>1) change your <code>for</code> loop. indexes of array start at 0. change <code>i = 1</code> to <code>i = 0</code> and <code>i &lt;= numOfMeal</code> to <code>i &lt; numOfMeal</code></p>\n\n<p>2) you have to calculate sum of array elements in loop</p>\n\n<pre><code>...\nint result = 0;\nfor (int i = 0; i &lt; numOfMeal; i++)\n{\n    ...\n    result += items[i];\n}\nprintf(\"Your total kilojoules are: %d\", result);\n...\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 7738601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xnc8PC8D4qQ/AAAAAAAAAAI/AAAAAAAAAIw/y7CtgA4eg1E/photo.jpg?sz=128", "display_name": "Rino", "link": "https://stackoverflow.com/users/7738601/rino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": -7, "last_activity_date": 1528358074, "creation_date": 1528280452, "question_id": 50717991, "link": "https://stackoverflow.com/questions/50717991/calculating-sum-of-array", "title": "Calculating sum of array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n\nint numOfMeal, items[50];//, sum;\n\n printf(\"Enter number of meals/snacks: \");\n scanf(\"%d\",&amp;numOfMeal);\n\n for(int i=1; i&lt;=numOfMeal;i++)\n {\n  printf(\"Enter kilojoules for item %d: \", i);\n  scanf(\"%d\", &amp;items[numOfMeal]);\n\n  }\n  printf(\"Your total kilojoules are: %d\", items[numOfMeal]);\n\n\n\n\n return EXIT_SUCCESS;\n }\n</code></pre>\n\n<p>any ideas on how to calculate the sum of arrays, when i run this program it only displays the last kilojoule entered..</p>\n"}, {"tags": ["c", "pointers", "typedef"], "answers": [{"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 3, "last_activity_date": 1528281651, "last_edit_date": 1528281651, "creation_date": 1528280892, "answer_id": 50718132, "question_id": 50717927, "link": "https://stackoverflow.com/questions/50717927/alias-of-function-pointer/50718132#50718132", "title": "alias of function pointer", "body": "<p>Here in this statement</p>\n\n<p><code>typedef int (*callback) (int,int);</code></p>\n\n<p><code>/* now callback can be used as a type */</code></p>\n\n<p>You are typedefing a function pointer. Here <code>callback</code> is a function pointer which can point to any function, that functions has to take two argument of <code>int</code> type and returns <code>int</code></p>\n\n<p>Next time when you do like</p>\n\n<p><code>callback fptr;</code></p>\n\n<p>that means <code>fptr</code> is <strong>function pointer</strong> and that can point to any function who satisfies <code>callback</code> declaration properties.</p>\n\n<p>Next when you initializes <code>fptr</code> like this</p>\n\n<p><code>struct gate var;</code></p>\n\n<p><code>var.fptr = sum; /* here sum is the function which adds 2 int and returns int */</code></p>\n"}, {"tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 1, "last_activity_date": 1528281339, "creation_date": 1528281339, "answer_id": 50718266, "question_id": 50717927, "link": "https://stackoverflow.com/questions/50717927/alias-of-function-pointer/50718266#50718266", "title": "alias of function pointer", "body": "<p><code>typedef</code> is used for defining a new type.\nWhat this <code>typedef int (*callback) (int,int);</code> means is that you are defining a new type named <code>callback</code>. You can use this type to define variables. A variable having the type <code>callback</code> is actually a pointer to a function which takes two <code>int</code>s and returns an <code>int</code>.</p>\n\n<p>This explanation applies to your <code>struct gate</code> inside which you define <code>fptr</code> to be of type <code>callback</code>.</p>\n\n<p>Here is a simple example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint function1(int a, int b);\nint function2(int a, int b);\n\ntypedef int (*callback) (int,int);\n\nstruct gate{\n     char name[50];\n     callback fptr;\n};\n\n\nint main(void) {\n    struct gate g;\n    g.fptr = function1;\n    printf(\"The sum is: %d\\n\", g.fptr(4, 5));\n    return 0;\n}\n\nint function1(int a, int b)\n{\n    return a + b;\n}\n</code></pre>\n\n<p>Running the above program shows:\n<code>The sum is: 9</code></p>\n"}], "owner": {"reputation": 137, "user_id": 9655138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLyXz.jpg?s=128&g=1", "display_name": "Sun Voyager", "link": "https://stackoverflow.com/users/9655138/sun-voyager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 50718132, "answer_count": 2, "score": 2, "last_activity_date": 1528281651, "creation_date": 1528280267, "question_id": 50717927, "link": "https://stackoverflow.com/questions/50717927/alias-of-function-pointer", "title": "alias of function pointer", "body": "<p>when we have :</p>\n\n<pre><code>           int functon1(int a, int b);\n           int function2(int a, int b);\n           .....\n\n           typedef int (*callback) (int,int);\n\n           struct gate{\n                  char name[50];\n                  callback fptr;\n                  };\n</code></pre>\n\n<p>Where did we give and alias with typedef and what the callback fptr is?\nIs (int ,int ) an alias to (*callback)?</p>\n"}, {"tags": ["c", "windows", "mutex", "semaphore", "critical-section"], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "edited": false, "score": 0, "creation_date": 1528290225, "post_id": 50719580, "comment_id": 88450603, "body": "great explanation! Thank you so much!"}, {"owner": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "edited": false, "score": 0, "creation_date": 1528385813, "post_id": 50719580, "comment_id": 88498091, "body": "Just one more question if you have time. I was reading the official documentation and I found this: If a thread calls LeaveCriticalSection when it does not have ownership of the specified critical section object, an error occurs that may cause another thread using EnterCriticalSection to wait indefinitely. So is it correct to use a critical section to block the tunnel in this case? Because the thread that enters in the critical section could not be the same that leaves it."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "edited": false, "score": 0, "creation_date": 1528699528, "post_id": 50719580, "comment_id": 88589513, "body": "@Jacob Indeed, you&#39;re right... I was just lucky it work on my computer... Instead I sshould have used semaphore (editing....)"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 1, "last_activity_date": 1528700574, "last_edit_date": 1592644375, "creation_date": 1528285381, "answer_id": 50719580, "question_id": 50717773, "link": "https://stackoverflow.com/questions/50717773/single-lane-tunnel-mutex-example-in-c-windows/50719580#50719580", "title": "single lane tunnel mutex example in c windows", "body": "<p>The problem comes from your <code>WaitForSingleObject</code> call:</p>\n<blockquote>\n<p>Return code: <code>WAIT_ABANDONED 0x00000080L</code></p>\n<p>The specified object is a mutex object that was not released by the thread that owned the mutex object before the owning thread terminated. Ownership of the mutex object is granted to the calling thread and the mutex state is set to nonsignaled.</p>\n<p>If the mutex was protecting persistent state information, you should check it for consistency.</p>\n</blockquote>\n<p>Thread 2944 got the mutex on tunnel, made its car cross and finish, without releasing the mutex.</p>\n<p>When thread 3560 calls <code>WaitForSingleObject</code>, this function returns <code>WAIT_ABANDONED</code></p>\n<p>Your code cannot do what you want because <strong>a mutex took by a thread must be released by the same thread</strong>.</p>\n<p>A semaphore is more appropriated to lock the tunnel.</p>\n<hr />\n<p>Edit:</p>\n<p>I first post I suggested using <code>CriticalSection</code>, but like <code>Mutex</code>, a <code>CriticalSection</code> must be acquired and release by the same thread.</p>\n<hr />\n<p>Example implementation:</p>\n<pre><code>#define UNICODE\n#define _UNICODE\n#define _CRT_SECURE_NO_WARNINGS\n\n#include &lt;windows.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;WinBase.h&gt;\n#include &lt;process.h&gt; //include for function _beginthreadex\n\nint globalCarsCrossing = 0;\n\ntypedef struct {\n    int numTraversingCar;\n    int crossingTime;\n    int arrivalTime; //0 - arrivalTime -&gt; random number, how much time pass between cars arrival\n    HANDLE mutex;\n    HANDLE bridgeSem;\n    int direction;\n} ThParams;\n\nDWORD WINAPI thFunction(LPVOID thParamsPtr);\nvoid crossBridge();\n\nint _tmain(int argc, LPTSTR argv[])\n{\n    int timeL2R, timeR2L, timeARRIVAL, nL2R, nR2L;\n    LPHANDLE thL2Rarray, thR2Larray;\n    ThParams paramsL2R, paramsR2L;\n    HANDLE bridgeSem;\n\n    if (argc &lt; 6) \n    {\n        _ftprintf(stderr, _T(&quot;missing parameters: &lt;timeL2R&gt; &lt;timeR2L&gt; &lt;timeARRIVAL&gt; &lt;nL2R&gt; &lt;nR2L&gt;\\n&quot;));\n        exit(EXIT_FAILURE);\n    }\n\n    timeL2R = _ttoi(argv[1]); //WINDOWS version of &quot;atoi&quot;\n    timeR2L = _ttoi(argv[2]);\n    timeARRIVAL = _ttoi(argv[3]);\n    nL2R = _ttoi(argv[4]);\n    nR2L = _ttoi(argv[5]);\n\n    //allocates all threads array\n    thL2Rarray = (LPHANDLE)malloc(nL2R * sizeof(HANDLE));\n    thR2Larray = (LPHANDLE)malloc(nR2L * sizeof(HANDLE));\n\n    //initialize all parameters\n    bridgeSem = CreateSemaphore(NULL, 1, 1, NULL);\n\n    //create structs for threads\n    paramsL2R.mutex = CreateMutex(NULL, FALSE, NULL);\n    paramsL2R.bridgeSem = bridgeSem;\n    paramsL2R.arrivalTime = timeARRIVAL;\n    paramsL2R.numTraversingCar = 0;\n    paramsL2R.crossingTime = timeL2R;\n    paramsL2R.direction = 0;\n\n    //paramsR2L.criticalSectionPtr = &amp;criticalSectionR2L;\n    paramsR2L.mutex = CreateMutex(NULL, FALSE, NULL);\n    paramsR2L.bridgeSem = bridgeSem;\n    paramsR2L.arrivalTime = timeARRIVAL;\n    paramsR2L.numTraversingCar = 0;\n    paramsR2L.crossingTime = timeR2L;\n    paramsR2L.direction = 1;\n\n    //create L2R threads \n    for (int i = 0; i&lt;nL2R; i++)\n        thL2Rarray[i] = CreateThread(NULL, 0, thFunction, &amp;paramsL2R, 0, NULL);\n    //create R2L threads \n    for (int i = 0; i&lt;nR2L; i++)\n        thR2Larray[i] = CreateThread(NULL, 0, thFunction, &amp;paramsR2L, 0, NULL);\n\n    //wait for ALL threads to return\n    WaitForMultipleObjects(nL2R, thL2Rarray, TRUE, INFINITE);\n    WaitForMultipleObjects(nR2L, thR2Larray, TRUE, INFINITE);\n    _tprintf(_T(&quot;all threads are returned\\n&quot;));\n\n    //closa all thread handle\n    for (int i = 0; i&lt;nL2R; i++)\n        CloseHandle(thL2Rarray[i]);\n    for (int i = 0; i&lt;nR2L; i++)\n        CloseHandle(thR2Larray[i]);\n\n    ////free and release everything\n    free(thL2Rarray);\n    free(thR2Larray);\n    CloseHandle(bridgeSem);\n    CloseHandle(paramsR2L.mutex);\n    CloseHandle(paramsL2R.mutex);\n\n    return 0;\n}\n\nDWORD WINAPI thFunction(LPVOID thParamsPtr)\n{\n    ThParams *paramsPtr = (ThParams *)thParamsPtr;\n\n    WaitForSingleObject(paramsPtr-&gt;mutex, INFINITE);\n        paramsPtr-&gt;numTraversingCar = paramsPtr-&gt;numTraversingCar + 1;\n\n        if (paramsPtr-&gt;numTraversingCar == 1)\n            WaitForSingleObject(paramsPtr-&gt;bridgeSem, INFINITE);\n\n        globalCarsCrossing++;\n        _tprintf(_T(&quot;%d crossing direction: %d, TOT_cars_from_this_direction: %d,  GLOBAL_CARS_CROSSING: %d\\n&quot;), GetCurrentThreadId(), paramsPtr-&gt;direction, paramsPtr-&gt;numTraversingCar, globalCarsCrossing);\n    ReleaseMutex(paramsPtr-&gt;mutex);\n\n    crossBridge();\n\n    WaitForSingleObject(paramsPtr-&gt;mutex, INFINITE);\n        paramsPtr-&gt;numTraversingCar = paramsPtr-&gt;numTraversingCar - 1;\n        globalCarsCrossing--;\n        _tprintf(_T(&quot;%d end crossing direction: %d, TOT_cars_from_this_direction: %d,  GLOBAL_CARS_CROSSING %d\\n&quot;), GetCurrentThreadId(), paramsPtr-&gt;direction, paramsPtr-&gt;numTraversingCar, globalCarsCrossing);\n        if (paramsPtr-&gt;numTraversingCar == 0) {\n            _tprintf(_T(&quot;RELEASED\\n&quot;));\n            ReleaseSemaphore(paramsPtr-&gt;bridgeSem, 1, NULL);\n        }\n    ReleaseMutex(paramsPtr-&gt;mutex);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 50719580, "answer_count": 1, "score": 2, "last_activity_date": 1528700574, "creation_date": 1528279836, "question_id": 50717773, "link": "https://stackoverflow.com/questions/50717773/single-lane-tunnel-mutex-example-in-c-windows", "title": "single lane tunnel mutex example in c windows", "body": "<p>I'm trying to solve the classic \"single lane tunnel\" semaphore/mutex problem. \nThis is the code I wrote but it doesn't work and I can't understand why.\nIn theory the cars coming from opposite direction should cross ONLY if the tunnel is already in use by cars going in the same direction otherwise they should wait, the output should be something like:</p>\n\n<pre><code>car1_leftToRight crossing\ncar2_leftToRight crossing\ncar1_leftToRight end crossing\ncar2_leftToRight end crossing  (ALL cars leftToRight have crossed)\ncar1_rightToLeft start crossing \netc..\n</code></pre>\n\n<p>but my current output is the one that you can see in the image I attached.\nI also created a global variable (globalCarsCrossing) to keep track on how many cars are currently crossing the bridge and as you can see it seems that cars from opposite directions are crossing at the same time!\n<a href=\"https://i.stack.imgur.com/QzGUd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QzGUd.png\" alt=\"enter image description here\"></a></p>\n\n<p>Do you have some suggestion on what I'm doing wrong?</p>\n\n<pre><code>#define UNICODE\n#define _UNICODE\n#define _CRT_SECURE_NO_WARNINGS\n\n#include &lt;windows.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;WinBase.h&gt;\n#include &lt;process.h&gt; //include for function _beginthreadex\n\nint globalCarsCrossing = 0;\n\ntypedef struct {\n    int numTraversingCar;\n    int crossingTime;\n    int arrivalTime; //0 - arrivalTime -&gt; random number, how much time pass between cars arrival\n    HANDLE mutex;\n    LPHANDLE bridgeMutexPtr;\n    int direction;\n} ThParams;\n\nDWORD WINAPI thFunction(LPVOID thParamsPtr);\nvoid crossBridge();\n\nint _tmain(int argc, LPTSTR argv[])\n{\n    int timeL2R, timeR2L, timeARRIVAL, nL2R, nR2L;\n    LPHANDLE thL2Rarray, thR2Larray;\n    ThParams paramsL2R, paramsR2L;\n    HANDLE bridgeMutex;\n\n    if (argc &lt; 6) \n    {\n        _ftprintf(stderr, _T(\"missing parameters: &lt;timeL2R&gt; &lt;timeR2L&gt; &lt;timeARRIVAL&gt; &lt;nL2R&gt; &lt;nR2L&gt;\\n\"));\n        exit(EXIT_FAILURE);\n    }\n\n    timeL2R = _ttoi(argv[1]); //WINDOWS version of \"atoi\"\n    timeR2L = _ttoi(argv[2]);\n    timeARRIVAL = _ttoi(argv[3]);\n    nL2R = _ttoi(argv[4]);\n    nR2L = _ttoi(argv[5]);\n\n    //allocates all threads array\n    thL2Rarray = (LPHANDLE)malloc(nL2R * sizeof(HANDLE));\n    thR2Larray = (LPHANDLE)malloc(nR2L * sizeof(HANDLE));\n\n    //initialize all parameters\n    bridgeMutex = CreateMutex(NULL, FALSE, NULL);\n\n    //create structs for threads\n    paramsL2R.mutex = CreateMutex(NULL, FALSE, NULL);\n    paramsL2R.bridgeMutexPtr = &amp;bridgeMutex;\n    paramsL2R.arrivalTime = timeARRIVAL;\n    paramsL2R.numTraversingCar = 0;\n    paramsL2R.crossingTime = timeL2R;\n    paramsL2R.direction = 0;\n\n    //paramsR2L.criticalSectionPtr = &amp;criticalSectionR2L;\n    paramsR2L.mutex = CreateMutex(NULL, FALSE, NULL);\n    paramsR2L.bridgeMutexPtr = &amp;bridgeMutex;\n    paramsR2L.arrivalTime = timeARRIVAL;\n    paramsR2L.numTraversingCar = 0;\n    paramsR2L.crossingTime = timeR2L;\n    paramsR2L.direction = 1;\n\n    //create L2R threads \n    for (int i = 0; i&lt;nL2R; i++)\n        thL2Rarray[i] = CreateThread(NULL, 0, thFunction, &amp;paramsL2R, 0, NULL);\n    //create R2L threads \n    for (int i = 0; i&lt;nR2L; i++)\n        thR2Larray[i] = CreateThread(NULL, 0, thFunction, &amp;paramsR2L, 0, NULL);\n\n    //wait for ALL threads to return\n    WaitForMultipleObjects(nL2R, thL2Rarray, TRUE, INFINITE);\n    WaitForMultipleObjects(nR2L, thR2Larray, TRUE, INFINITE);\n    _tprintf(_T(\"all threads are returned\\n\"));\n\n    //closa all thread handle\n    for (int i = 0; i&lt;nL2R; i++)\n        CloseHandle(thL2Rarray[i]);\n    for (int i = 0; i&lt;nR2L; i++)\n        CloseHandle(thR2Larray[i]);\n\n    ////free and release everything\n    free(thL2Rarray);\n    free(thR2Larray);\n    CloseHandle(bridgeMutex);\n    CloseHandle(paramsR2L.mutex);\n    CloseHandle(paramsL2R.mutex);\n\n    return 0;\n}\n\nDWORD WINAPI thFunction(LPVOID thParamsPtr)\n{\n    ThParams *paramsPtr = (ThParams *)thParamsPtr;\n\n    WaitForSingleObject(paramsPtr-&gt;mutex, INFINITE);\n        paramsPtr-&gt;numTraversingCar = paramsPtr-&gt;numTraversingCar + 1;\n\n        if (paramsPtr-&gt;numTraversingCar == 1)\n            WaitForSingleObject(*(paramsPtr-&gt;bridgeMutexPtr), INFINITE);\n\n        globalCarsCrossing++;\n        _tprintf(_T(\"%d crossing direction: %d, TOT_cars_from_this_direction: %d,  GLOBAL_CARS_CROSSING: %d\\n\"), GetCurrentThreadId(), paramsPtr-&gt;direction, paramsPtr-&gt;numTraversingCar, globalCarsCrossing);\n    ReleaseMutex(paramsPtr-&gt;mutex);\n\n    crossBridge();\n\n    WaitForSingleObject(paramsPtr-&gt;mutex, INFINITE);\n        paramsPtr-&gt;numTraversingCar = paramsPtr-&gt;numTraversingCar - 1;\n        globalCarsCrossing--;\n        _tprintf(_T(\"%d end crossing direction: %d, TOT_cars_from_this_direction: %d,  GLOBAL_CARS_CROSSING %d\\n\"), GetCurrentThreadId(), paramsPtr-&gt;direction, paramsPtr-&gt;numTraversingCar, globalCarsCrossing);\n        if (paramsPtr-&gt;numTraversingCar == 0) {\n            _tprintf(_T(\"RELEASED\\n\"));\n            ReleaseMutex(*(paramsPtr-&gt;bridgeMutexPtr));\n        }\n    ReleaseMutex(paramsPtr-&gt;mutex);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "ibm-midrange"], "comments": [{"owner": {"reputation": 9819, "user_id": 2296441, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sf28F.jpg?s=128&g=1", "display_name": "jmarkmurphy", "link": "https://stackoverflow.com/users/2296441/jmarkmurphy"}, "edited": false, "score": 0, "creation_date": 1528283132, "post_id": 50717761, "comment_id": 88446009, "body": "Not real sure what your issue was, this worked for me without modification (other than changing the data area and library name, not the length of the constants). Apparently Point #1 is incorrect."}, {"owner": {"reputation": 9819, "user_id": 2296441, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sf28F.jpg?s=128&g=1", "display_name": "jmarkmurphy", "link": "https://stackoverflow.com/users/2296441/jmarkmurphy"}, "edited": false, "score": 0, "creation_date": 1528283228, "post_id": 50717761, "comment_id": 88446068, "body": "I am using v7.1"}, {"owner": {"reputation": 740, "user_id": 3441253, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/71f95d0131ba7d28414e825188343e11?s=128&d=identicon&r=PG&f=1", "display_name": "im_infamous", "link": "https://stackoverflow.com/users/3441253/im-infamous"}, "reply_to_user": {"reputation": 9819, "user_id": 2296441, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sf28F.jpg?s=128&g=1", "display_name": "jmarkmurphy", "link": "https://stackoverflow.com/users/2296441/jmarkmurphy"}, "edited": false, "score": 0, "creation_date": 1528363805, "post_id": 50717761, "comment_id": 88482894, "body": "@jmarkmurphy re Point #1: maybe I&#39;ve interpreted message <code>CZP0280(30) The initializer is too long.</code> for line <code>_DTAA_NAME_T dtaara = {&quot;ABCDEFGHIJ&quot;, &quot;KLMNOPQRST&quot;};</code> incorrectly? I&#39;m on v7.2 TR8"}, {"owner": {"reputation": 9819, "user_id": 2296441, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sf28F.jpg?s=128&g=1", "display_name": "jmarkmurphy", "link": "https://stackoverflow.com/users/2296441/jmarkmurphy"}, "edited": false, "score": 0, "creation_date": 1528457381, "post_id": 50717761, "comment_id": 88526645, "body": "I don&#39;t get that error. Is this the whole program?"}], "answers": [{"tags": [], "owner": {"reputation": 740, "user_id": 3441253, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/71f95d0131ba7d28414e825188343e11?s=128&d=identicon&r=PG&f=1", "display_name": "im_infamous", "link": "https://stackoverflow.com/users/3441253/im-infamous"}, "is_accepted": false, "score": 1, "last_activity_date": 1528279801, "creation_date": 1528279801, "answer_id": 50717762, "question_id": 50717761, "link": "https://stackoverflow.com/questions/50717761/unable-to-retrieve-data-area-value-using-qxxrtvda-and-brace-initialized-values/50717762#50717762", "title": "Unable to retrieve data area value using QXXRTVDA and brace-initialized values", "body": "<p>The workaround I've found is to avoid brace-initialization and initialize values with direct bytes copying:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;xxdtaa.h&gt;\n#include &lt;QSYSINC/MIH/CPYBLA&gt;\n\n#define DATA_AREA_LENGTH  30\n#define START             6\n#define LENGTH            7\n\nint main(void)\n{\n  char uda_area[DATA_AREA_LENGTH];\n  _DTAA_NAME_T dtaara;\n\n  memset( &amp;dtaara, ' ', sizeof(dtaara));\n  cpybla( dtaara.dtaa_name, \"USRDDA\", 6);\n  cpybla( dtaara.dtaa_lib, \"MYLIB\", 5);\n\n  /* Use the function to retrieve some data into uda_area.        */\n  QXXRTVDA(dtaname,START,LENGTH,uda_area);\n\n  /* Print the contents of the retrieved subset.                  */\n  printf(\"uda_area contains %7.7s\\n\",uda_area);\n}\n</code></pre>\n\n<p>Hope this helps somebody not to waste time on such a basic thing.</p>\n"}, {"comments": [{"owner": {"reputation": 740, "user_id": 3441253, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/71f95d0131ba7d28414e825188343e11?s=128&d=identicon&r=PG&f=1", "display_name": "im_infamous", "link": "https://stackoverflow.com/users/3441253/im-infamous"}, "edited": false, "score": 0, "creation_date": 1528357511, "post_id": 50724580, "comment_id": 88478889, "body": "Btw keep getting <code>CZP0280(30) The initializer is too long.</code> for line <code>_DTAA_NAME_T dtaara = {&quot;ABCDEFGHIJ&quot;, &quot;KLMNOPQRST&quot;};</code> What I&#39;m doing wrong? I&#39;m on v7.2 TR8"}, {"owner": {"reputation": 2281, "user_id": 4143022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a8f41cdd676e027b9006ddaae4dc35a?s=128&d=identicon&r=PG&f=1", "display_name": "Barbara Morris", "link": "https://stackoverflow.com/users/4143022/barbara-morris"}, "reply_to_user": {"reputation": 740, "user_id": 3441253, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/71f95d0131ba7d28414e825188343e11?s=128&d=identicon&r=PG&f=1", "display_name": "im_infamous", "link": "https://stackoverflow.com/users/3441253/im-infamous"}, "edited": false, "score": 0, "creation_date": 1528719815, "post_id": 50724580, "comment_id": 88601126, "body": "The C++ compiler issues that message. If you need to use C++ instead of C for this, then you&#39;ll have to use something like memcpy to set the values."}], "tags": [], "owner": {"reputation": 2281, "user_id": 4143022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a8f41cdd676e027b9006ddaae4dc35a?s=128&d=identicon&r=PG&f=1", "display_name": "Barbara Morris", "link": "https://stackoverflow.com/users/4143022/barbara-morris"}, "is_accepted": false, "score": 0, "last_activity_date": 1528300203, "creation_date": 1528300203, "answer_id": 50724580, "question_id": 50717761, "link": "https://stackoverflow.com/questions/50717761/unable-to-retrieve-data-area-value-using-qxxrtvda-and-brace-initialized-values/50724580#50724580", "title": "Unable to retrieve data area value using QXXRTVDA and brace-initialized values", "body": "<p>The null-termation byte is only used to initialize the array if there is room for it.</p>\n\n<pre><code>#include &lt;xxdtaa.h&gt;\n\nmain()\n{\n   _DTAA_NAME_T dtaara = {\"ABCDEFGHIJ\", \"KLMNOPQRST\"};\n   return;\n}\n</code></pre>\n\n<p>In debug:</p>\n\n<pre><code>EVAL dtaara:x 20                                                       \n   00000     C1C2C3C4 C5C6C7C8 C9D1D2D3 D4D5D6D7   - ABCDEFGHIJKLMNOP  \n   00010     D8D9E2E3 ........ ........ ........   - QRST............  \n</code></pre>\n"}], "owner": {"reputation": 740, "user_id": 3441253, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/71f95d0131ba7d28414e825188343e11?s=128&d=identicon&r=PG&f=1", "display_name": "im_infamous", "link": "https://stackoverflow.com/users/3441253/im-infamous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528300203, "creation_date": 1528279801, "question_id": 50717761, "link": "https://stackoverflow.com/questions/50717761/unable-to-retrieve-data-area-value-using-qxxrtvda-and-brace-initialized-values", "title": "Unable to retrieve data area value using QXXRTVDA and brace-initialized values", "body": "<p>I was trying to do simple data area value retrieval using C source from here:\n<a href=\"https://www.ibm.com/support/knowledgecenter/en/ssw_ibm_i_71/rtref/qxxrtvd.htm\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/en/ssw_ibm_i_71/rtref/qxxrtvd.htm</a></p>\n\n<p>And... the code failed to do certain retrieval.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>typedef struct _DTAA_NAME_T {\n   char dtaa_name[10]; /* name of data area */\n   char dtaa_lib[10];  /* library that contains data area */\n}_DTAA_NAME_T;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;xxdtaa.h&gt;\n\n#define DATA_AREA_LENGTH  30\n#define START             6\n#define LENGTH            7\n\nint main(void)\n{\n  char uda_area[DATA_AREA_LENGTH];\n\n /* Retrieve data from user-defined data area currently in MYLIB */\n  _DTAA_NAME_T dtaname = {\"USRDDA    \", \"MYLIB     \"};\n\n /* Use the function to retrieve some data into uda_area.        */\n  QXXRTVDA(dtaname,START,LENGTH,uda_area);\n\n /* Print the contents of the retrieved subset.                  */\n  printf(\"uda_area contains %7.7s\\n\",uda_area);\n\n}\n</code></pre>\n\n<p>There are several problems in this brace-intialized values:</p>\n\n<pre><code>_DTAA_NAME_T dtaname = {\"USRDDA    \", \"MYLIB     \"};\n</code></pre>\n\n<ol>\n<li>Values can not get initialized with 10 characters value - only 9 chars + null byte. \nInitializing values with 10 characters will lead to compilation error.</li>\n<li>Initializing it with anything less than 10 characters will lead to null byte appending thus the <code>QXXRTVDA</code> will not find any values as soon as there's no such library with null byte ending.   </li>\n</ol>\n"}, {"tags": ["c", "unix", "concurrency", "process", "multiprocessing"], "owner": {"reputation": 33, "user_id": 7106343, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g5yBWs3aAnM/AAAAAAAAAAI/AAAAAAAAADg/vc6W6sQhtgs/photo.jpg?sz=128", "display_name": "A D", "link": "https://stackoverflow.com/users/7106343/a-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528278700, "creation_date": 1528278337, "question_id": 50717205, "link": "https://stackoverflow.com/questions/50717205/creating-unknown-amount-of-process-in-child-without-pipe-and-semaphore", "title": "creating unknown amount of process in child without pipe and semaphore", "body": "<p>I am trying to make a modified shell.\nI have tried several times, I searched  a lot on the net, but I cannot fix my problem. first of all I do not want to run this code by pipe or semaphore.\nI think with semaphore it would be even more difficult, because I do not now how many process should be there (maybe I am wrong, but it seems at least in this way).\nIn the first way, program makes the file correctly, but I cannot run a loop until the user enter \"exit\". I am trying with while(1) but it does not give me more than one file and the stdin is active only once.\nin the second way, the user can use stdin until he inserts \"exit\", but again,\nit does not give more than one file, moreover there is nothing inside.\nI am trying to mix these two ways, I tried for more than one day, but I do not understand where is the problem. By the way, I think in the second way, \nit should be the file descriptor.\nalso, please let me know that do I use the wait system call correctly or not?\nThank you in advance.</p>\n\n<p>/<em>first way</em>/</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n\n//void MYshell(char *comm);\nint main(){\n    /*\n    char cmd[100];\n    printf(\"&lt;exit&gt; closes shell\\n\");\n    printf(\"MYshell:$ \");\n    fscanf(stdin,\"%s\",cmd);\n    do{\n        if(strcmp(cmd,\"exit\")==0){\n                printf(\"shell has been closed.\\n\");\n                break;\n                exit(EXIT_SUCCESS);\n            }\n        MYshell(cmd);\n        printf(\"MYshell:$ \");\n        fscanf(stdin,\"%s\",cmd);\n\n    }while(1);\n    */\n\n//void MYshell(char *comm){ \n    pid_t fork_ret;\n    int fd,dup_ret;\n    char cmd[100];\n    char name[100];\n\n    printf(\" &lt;exit&gt; closes shell\\n\");\n\n    printf(\"MYshell:$ \");\n    fscanf(stdin,\"%s\",cmd);\n\n    if(strcmp(cmd,\"exit\")==0){\n            printf(\"shell has been closed.\\n\");\n            //break;\n            exit(EXIT_SUCCESS);\n        }\n\n    fork_ret = fork();\n    if(fork_ret == -1)\n        exit(1);\n\n    if(fork_ret == 0){\n\n        sprintf(name,\"%d.log\",getpid());\n        fd = open(name,O_CREAT | O_WRONLY,S_IRWXU|S_IRWXG|S_IRWXO);\n        if(fd&lt;0){\n            printf(\"Error in opening or creating %s.\\n\",name);\n            exit(1);\n        }\n\n        dup_ret = dup2(fd,1);\n        if(dup_ret&lt;0){\n            printf(\"Error in duplicating stdout descriptor.\\n\");\n            exit(1);\n        }\n        system(cmd);\n        close(fd);\n        exit(0);\n        }\n        //close(fd);\n        //exit(EXIT_SUCCESS);\n\n    if(fork_ret&gt;0){\n        int stat;\n        pid_t child = wait(&amp;stat);\n        printf(\"child = %d\\n\",child);\n        if(WIFEXITED(stat))\n            printf(\"ok\\n\");\n        else\n            printf(\"error\\n\");\n        }\n        wait(NULL);\n        exit(EXIT_SUCCESS);\n}\n\n/* second way*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n\nint fd;\nchar cmd[100];\n\nvoid MYshell(void);\n\nint main(){\n\n    pid_t fork_ret;\n    //int fd,dup_ret;\n\n    printf(\" &lt;exit&gt; closes shell\\n\");\n    while(1){\n        printf(\"MYshell:$ \");\n        fscanf(stdin,\"%s\",cmd);\n        //tmp = fgets(cmd,sizeof(cmd),stdin);\n\n    if(strcmp(cmd,\"exit\")==0){\n        printf(\"shell has been closed.\\n\");\n        break;\n        exit(EXIT_SUCCESS);\n        }\n    }\n\n    fork_ret = fork();\n    if(fork_ret == -1)\n        exit(1);\n    if(fork_ret == 0){\n        MYshell();\n        exit(0);\n    }\n\n    if(fork_ret&gt;0){\n        wait(NULL);\n        exit(0);\n    }\n    wait(NULL);\n    exit(EXIT_SUCCESS);\n}\n\nvoid MYshell(void){\n    char name[BUFSIZ];\n    int fd,dup_ret;\n    sprintf(name,\"%d.log\",getpid());\n\n    fd = open(name, O_CREAT|O_RDWR , S_IRWXU|S_IRWXG|S_IRWXO);\n    if(fd&lt;0){\n        printf(\"Error in opening or creating %s.\\n\",name);\n        exit(1);\n    }\n\n    dup_ret = dup2(fd,1);\n    if(dup_ret&lt;0){\n        printf(\"Error in duplicating stdout descriptor.\\n\");\n        exit(1);\n    }\n    system(cmd);\n    close(fd);\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "server", "client"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1528277627, "post_id": 50716761, "comment_id": 88442419, "body": "All file descriptors in a process are unique.  Period.  Either you&#39;re closing the file descriptor and losing track of it, or your code is broken in other ways.  Hint:  it&#39;s much, much, much better to assume your code is bad than it is to assume there&#39;s something wrong with decades-old common code in operating systems with literally billions of installations worldwide."}, {"owner": {"reputation": 294, "user_id": 4208237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c755a1cc552ed94f2e6ef77bfdb64baf?s=128&d=identicon&r=PG&f=1", "display_name": "code kid", "link": "https://stackoverflow.com/users/4208237/code-kid"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1528298348, "post_id": 50716761, "comment_id": 88456259, "body": "I should that the client has multiple threads. That are sending requests. So it does actually use the same file descriptor"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1528299524, "post_id": 50716761, "comment_id": 88457071, "body": "How do you set <code>first</code> in your code?  How do you know that you don&#39;t reuse the <code>queue</code> elements and overwrite values from different threads?  You almost certainly have at least one race condition.  And just what do you think this line of code does:  <code>queue[first].fileName = fileName;</code>?  That last one is scary."}], "answers": [{"tags": [], "owner": {"reputation": 294, "user_id": 4208237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c755a1cc552ed94f2e6ef77bfdb64baf?s=128&d=identicon&r=PG&f=1", "display_name": "code kid", "link": "https://stackoverflow.com/users/4208237/code-kid"}, "is_accepted": true, "score": 0, "last_activity_date": 1529082896, "creation_date": 1529082896, "answer_id": 50880072, "question_id": 50716761, "link": "https://stackoverflow.com/questions/50716761/is-it-possible-to-get-unique-file-descriptors-from-accept/50880072#50880072", "title": "Is it possible to get unique file descriptors from accept", "body": "<p>Select will create new file descriptors as soon as the old one is closed  </p>\n"}], "owner": {"reputation": 294, "user_id": 4208237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c755a1cc552ed94f2e6ef77bfdb64baf?s=128&d=identicon&r=PG&f=1", "display_name": "code kid", "link": "https://stackoverflow.com/users/4208237/code-kid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 50880072, "answer_count": 1, "score": 0, "last_activity_date": 1529082896, "creation_date": 1528277103, "last_edit_date": 1528298539, "question_id": 50716761, "link": "https://stackoverflow.com/questions/50716761/is-it-possible-to-get-unique-file-descriptors-from-accept", "title": "Is it possible to get unique file descriptors from accept", "body": "<p>I am trying to implement a half sync, half async server. On the server side the requests should be read into a queue that is managed by one thread. I then have a pool of worker threads that are waiting for something to be added to the queue so they can process the request. I am having issues with my accept() call. The accept call returns the same file descriptor number and this messes up the worker threads because they stop writing in one place and write to another. Is there a way to get accept to return unique file descriptors? Thanks for the help in advance! The code is fairly large so it would be impractical to post it all but here is the problem area. It is also worth mentioning that  the client has multiple threads making requested to the server. When I print out the new file descriptor \u201cclient socket\u201d I can that it uses the same file descriptor number. </p>\n\n<pre><code>void accept_client_requests(int server_socket)\n{\n    int client_socket;\n    struct sockaddr_in client_addr;\n    socklen_t sin_size = sizeof client_addr;\n\n\n    while ( (client_socket= accept(server_socket, (struct sockaddr*)&amp;client_addr, &amp;sin_size)) &gt; 0 )\n    {\n        char fileName[BUFSIZ];\n        get_file_request(client_socket, fileName); \n\n        pthread_mutex_lock(&amp;mutex);  \n            queue[first].fileName = fileName;    \n            queue[first].socket = client_socket;\n            ++numInQ;\n\n        pthread_mutex_unlock(&amp;mutex); \n        pthread_mutex_unlock(&amp;empty); \n    }\n}\n</code></pre>\n"}, {"tags": ["c", "stm32", "sd-card", "stm32f4"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 9203137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ce6edfc9e684d21364ddca11d9e776?s=128&d=identicon&r=PG&f=1", "display_name": "sbtek", "link": "https://stackoverflow.com/users/9203137/sbtek"}, "is_accepted": false, "score": 0, "last_activity_date": 1528808026, "creation_date": 1528808026, "answer_id": 50817758, "question_id": 50716394, "link": "https://stackoverflow.com/questions/50716394/f-mount-function-is-not-working-with-stm32f401retx/50817758#50817758", "title": "F_mount function is not working with STM32F401ReTx", "body": "<p>Problem is probably heap size f407 has more initial heap size than f401. Try to increase heap size in linker file.</p>\n"}], "owner": {"reputation": 1, "user_id": 8995795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de283145c24b05f1ecfbb63d921815bf?s=128&d=identicon&r=PG&f=1", "display_name": "Elman Karimli", "link": "https://stackoverflow.com/users/8995795/elman-karimli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528808026, "creation_date": 1528275976, "question_id": 50716394, "link": "https://stackoverflow.com/questions/50716394/f-mount-function-is-not-working-with-stm32f401retx", "title": "F_mount function is not working with STM32F401ReTx", "body": "<p>I have written some simple code (with the help of STM32CubeMx) for STM32F407VGTx to create a file in SDcard. Although it works perfectly with 407, it is not working with STM32F401ReTx. To be clear, I have generated code with CubeMx specifically for 401(did not use the code for 407).</p>\n\n<p>Even for 407, I am able to work with only Version 21 of CubeMx and firmware version 16. I have added the code below. Any ideas?</p>\n\n<pre><code>int main(void)\n{\n\n  /* USER CODE BEGIN 1 */\n\n  /* USER CODE END 1 */\n\n  /* MCU Configuration----------------------------------------------------------*/\n\n  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */\n  HAL_Init();\n\n  /* USER CODE BEGIN Init */\n\n  /* USER CODE END Init */\n\n  /* Configure the system clock */\n  SystemClock_Config();\n\n  /* USER CODE BEGIN SysInit */\n\n  /* USER CODE END SysInit */\n\n  /* Initialize all configured peripherals */\n  MX_GPIO_Init();\n  MX_DMA_Init();\n  MX_SDIO_SD_Init();\n  MX_FATFS_Init();\n\n  /* USER CODE BEGIN 2 */\n  if(f_mount(&amp;myFatFS,SD_Path,1)==FR_OK)\n  {\n      HAL_Delay(1000);\n      f_open(&amp;myFil,\"new document.txt\\0\",FA_CREATE_ALWAYS | FA_WRITE);\n      f_close(&amp;myFil);\n  }\n\n  /* USER CODE END 2 */\n\n  /* Infinite loop */\n  /* USER CODE BEGIN WHILE */\n  while (1)\n  {\n  /* USER CODE END WHILE */\n\n  /* USER CODE BEGIN 3 */\n\n  }\n  /* USER CODE END 3 */\n\n}\n</code></pre>\n"}, {"tags": ["c", "codeblocks"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2575725"}, "reply_to_user": {"reputation": 17, "user_id": 9902252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yiFL2mjTfI8/AAAAAAAAAAI/AAAAAAAADP8/GgoyUztN2X8/photo.jpg?sz=128", "display_name": "Akshay Mittal", "link": "https://stackoverflow.com/users/9902252/akshay-mittal"}, "edited": false, "score": 0, "creation_date": 1528276119, "post_id": 50716300, "comment_id": 88441354, "body": "Wait a minute, are you saying that you gave input as <code>6881188</code>? if yes than sorry to say this, but <code>int</code> type alone cannot not handle such value."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528276303, "post_id": 50716300, "comment_id": 88441480, "body": "@Arvind any platform supporting 32bit <code>int</code> (nearly <i>everything</i> at this point, sans some  micro-controllers), will easily take that value."}, {"owner": {"reputation": 17, "user_id": 9902252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yiFL2mjTfI8/AAAAAAAAAAI/AAAAAAAADP8/GgoyUztN2X8/photo.jpg?sz=128", "display_name": "Akshay Mittal", "link": "https://stackoverflow.com/users/9902252/akshay-mittal"}, "edited": false, "score": 0, "creation_date": 1528276313, "post_id": 50716300, "comment_id": 88441487, "body": "i have added 1 and 1"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528276396, "post_id": 50716300, "comment_id": 88441555, "body": "@WhozCraig: OP says CodeBlocks, so I guess I and this guy assumed 16-bit <code>int</code> instead of 32-bits."}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "reply_to_user": {"reputation": 17, "user_id": 9902252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yiFL2mjTfI8/AAAAAAAAAAI/AAAAAAAADP8/GgoyUztN2X8/photo.jpg?sz=128", "display_name": "Akshay Mittal", "link": "https://stackoverflow.com/users/9902252/akshay-mittal"}, "edited": false, "score": 0, "creation_date": 1528276463, "post_id": 50716300, "comment_id": 88441606, "body": "@AkshayMittal Are you sure that you have compiled code after making <code>&amp;c</code> -&gt; <code>c</code> change?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1528276503, "post_id": 50716300, "comment_id": 88441635, "body": "@WedaPashi CodeBlocks is an ide, not a compiler toolchain. Unless he&#39;s running this on DOS from a quarter-century ago, that isn&#39;t the problem (and if it was, by some magic the <code>printf</code> of an 16-bit signed int is mysteriously delivering a number larger than 32767, max signed int for 16 bit."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528276558, "post_id": 50716300, "comment_id": 88441679, "body": "@WhozCraig: I&#39;d still wager at this point that the sum of hardware running 16 bit <code>int</code> is still greater than the sum of hardware running 32 bit <code>int</code>, if you&#39;d be so kind as to excuse my clumsy language."}, {"owner": {"reputation": 17, "user_id": 9902252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yiFL2mjTfI8/AAAAAAAAAAI/AAAAAAAADP8/GgoyUztN2X8/photo.jpg?sz=128", "display_name": "Akshay Mittal", "link": "https://stackoverflow.com/users/9902252/akshay-mittal"}, "edited": false, "score": 0, "creation_date": 1528276664, "post_id": 50716300, "comment_id": 88441748, "body": "i am a beginner.i dont know about that"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1528276667, "post_id": 50716300, "comment_id": 88441750, "body": "@Bathsheba Outstanding. I look forward to seeing CodeBlocks running on that sometime when I&#39;ve got spare time. Had he said Turbo C I would lean a lot harder that direction."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2575725"}, "is_accepted": false, "score": 2, "last_activity_date": 1528275669, "creation_date": 1528275669, "answer_id": 50716300, "question_id": 50716241, "link": "https://stackoverflow.com/questions/50716241/my-c-program-is-giving-same-result-of-calculation/50716300#50716300", "title": "my c program is giving same result of calculation", "body": "<p>While using <code>printf()</code> you are printing the location instead of value of <code>c</code> variable. Remove <code>&amp;</code> to get the actual value of <code>c</code>.</p>\n\n<pre><code>printf(\"the sum of two numbers is%d\",c)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 17, "user_id": 9902252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yiFL2mjTfI8/AAAAAAAAAAI/AAAAAAAADP8/GgoyUztN2X8/photo.jpg?sz=128", "display_name": "Akshay Mittal", "link": "https://stackoverflow.com/users/9902252/akshay-mittal"}, "edited": false, "score": 0, "creation_date": 1528276305, "post_id": 50716317, "comment_id": 88441481, "body": "Unless you provide us with what inputs you tested this with, no one can guarantee the behaviour. The OP says that you are using CodeBlocks IDE, I take that it could be a 16-bit <code>int</code> conforming, whereas <code>6881188</code> is a value which can not be accommodated in 16-bits."}], "tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 1, "last_activity_date": 1528276501, "last_edit_date": 1528276501, "creation_date": 1528275726, "answer_id": 50716317, "question_id": 50716241, "link": "https://stackoverflow.com/questions/50716241/my-c-program-is-giving-same-result-of-calculation/50716317#50716317", "title": "my c program is giving same result of calculation", "body": "<p>Look at your <code>printf</code>. You are using the address-of operator (<code>&amp;</code>), This operator gives the address of its operand. \nIn order to print the value of <code>c</code>, you need to change</p>\n\n<pre><code>printf(\"the sum of two numbers is%d\",&amp;c);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>printf(\"The sum of two numbers is %d\", c);\n//                                     ^\n</code></pre>\n\n<p>Update: Based on your inputs, I guess you are testing this with invalid inputs. Make sure that your inputs: <code>a</code>, <code>b</code> and its addition <code>c</code> does not exceed valid <code>int</code> value, else you are doomed.</p>\n\n<p>As a side note to improve, you might want change your <code>main()</code> function into</p>\n\n<pre><code>int main(void)    //or int main()\n</code></pre>\n\n<p>This is as per what standard recommends, and is a heavily discussed topic amongst language-lawyers. Read <a href=\"https://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\">this</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1528276970, "creation_date": 1528276970, "answer_id": 50716717, "question_id": 50716241, "link": "https://stackoverflow.com/questions/50716241/my-c-program-is-giving-same-result-of-calculation/50716717#50716717", "title": "my c program is giving same result of calculation", "body": "<ol>\n<li><p><strong>Always</strong> check the return value of <code>scanf</code>. Yours should be 2 if the standard input was able to be parsed into 2 <code>int</code>s. Note that an <code>int</code> could have a range as small as -32767 to +32767. Consider using a <code>long</code> instead?</p></li>\n<li><p>Use <code>c</code> in <code>printf</code> to <em>output</em> the <code>int</code> value. Don't pass the address. Otherwise that's <em>undefined behaviour</em>. Some folk might suggest to you that the <em>address</em> of <code>c</code> is being output, but the language standard says nothing of the sort, so neither should anyone else therefore.</p></li>\n<li><p>Change the function to <code>int main()</code>. That's the language standard; a <code>return 0;</code> is added implicitly in that particular function if you don't supply it.</p></li>\n</ol>\n\n<p>A final complexity: the behaviour of <code>a + b</code> is <em>undefined</em> if that exceeds the minimum or maximum size of an <code>int</code>. Ideally you should guard against this. But, surprisingly, this is an advanced topic! See <a href=\"https://stackoverflow.com/questions/30371505/add-integers-safely-and-prove-the-safety\">Add integers safely, and prove the safety</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9901472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccfea37eb3815160311fff7c9691511?s=128&d=identicon&r=PG", "display_name": "rjzou", "link": "https://stackoverflow.com/users/9901472/rjzou"}, "edited": false, "score": 0, "creation_date": 1528277824, "post_id": 50716832, "comment_id": 88442562, "body": "&gt; int main() { \tint a, b, c; \tprintf(&quot;write two numbers&quot;); \tscanf(&quot;%d %d&quot;, &amp;a, &amp;b); \tc = a + b; \tprintf(&quot;the sum of two numbers is%d&quot;, c);   \tgetchar(); \tgetchar(); \treturn 0; }"}, {"owner": {"reputation": 1, "user_id": 9901472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccfea37eb3815160311fff7c9691511?s=128&d=identicon&r=PG", "display_name": "rjzou", "link": "https://stackoverflow.com/users/9901472/rjzou"}, "edited": false, "score": 0, "creation_date": 1528279177, "post_id": 50716832, "comment_id": 88443500, "body": "you must input two int between space."}], "tags": [], "owner": {"reputation": 1, "user_id": 9901472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccfea37eb3815160311fff7c9691511?s=128&d=identicon&r=PG", "display_name": "rjzou", "link": "https://stackoverflow.com/users/9901472/rjzou"}, "is_accepted": false, "score": -1, "last_activity_date": 1528279857, "last_edit_date": 1528279857, "creation_date": 1528277305, "answer_id": 50716832, "question_id": 50716241, "link": "https://stackoverflow.com/questions/50716241/my-c-program-is-giving-same-result-of-calculation/50716832#50716832", "title": "my c program is giving same result of calculation", "body": "<p>you see that scanf line</p>\n\n<pre><code>scanf(\"%d%d\", &amp;a, &amp;b); \n</code></pre>\n\n<p>change to</p>\n\n<pre><code>scanf(\"%d %d\", &amp;a, &amp;b);\n</code></pre>\n\n<p>between  %d  insert space char .the progam can't distinguish difference two input int.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9779890, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lFc0TfG68Q/AAAAAAAAAAI/AAAAAAAAAT8/bbr-6h6Ecjg/photo.jpg?sz=128", "display_name": "Palash Jain", "link": "https://stackoverflow.com/users/9779890/palash-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1528278251, "last_edit_date": 1528278251, "creation_date": 1528277838, "answer_id": 50717033, "question_id": 50716241, "link": "https://stackoverflow.com/questions/50716241/my-c-program-is-giving-same-result-of-calculation/50717033#50717033", "title": "my c program is giving same result of calculation", "body": "<ol>\n<li><p><code>printf(\"the sum of two numbers is%d\",&amp;c);</code>\n As you can see that you are printing the address of the c by doing\n'&amp;c' instead of printing the actual value.</p></li>\n<li><p>And if we see the <code>printf</code> function are using the <code>%d</code> format specifier to print the address of 'c' . It will give you the signed integer value. Use the <code>%p</code> to print the pointer addresses.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 8058, "user_id": 619818, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qzq4k.jpg?s=128&g=1", "display_name": "Angus Comber", "link": "https://stackoverflow.com/users/619818/angus-comber"}, "is_accepted": false, "score": 0, "last_activity_date": 1528279716, "creation_date": 1528279716, "answer_id": 50717738, "question_id": 50716241, "link": "https://stackoverflow.com/questions/50716241/my-c-program-is-giving-same-result-of-calculation/50717738#50717738", "title": "my c program is giving same result of calculation", "body": "<p>&amp; is the address of operator and you use for functions requiring a pointer.</p>\n\n<p>The signature for scanf is:</p>\n\n<pre><code>int scanf ( const char * format, ... );\n</code></pre>\n\n<p>Where ... means additional arguments and pointers are required.  Why pointers for scanf?  Because the arguments are out args, not in args.  Basically scanf needs to know the type and size of the variable.  Otherwise if for example the input data is a long long but you say its an int then there will not be sufficient space reserved for the integer result.</p>\n\n<p>However, the signature for printf is:</p>\n\n<pre><code>int printf ( const char * format, ... );\n</code></pre>\n\n<p>where ... means additional arguments containing a 'value'.  For printf you pass a value of some type, it is an out argument.</p>\n\n<p>So you pass a pointer as additional argument to scanf but a value to printf.</p>\n\n<p>So change your code like this:</p>\n\n<pre><code>printf(\"the sum of two numbers is%d\",c);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>printf(\"the sum of two numbers is%d\",a + b);\n</code></pre>\n\n<p>The value you saw printed was the address of the c variable.  Which could be any positive integral value - and is dependent on where your computer decides to store the variable.</p>\n"}], "owner": {"reputation": 17, "user_id": 9902252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yiFL2mjTfI8/AAAAAAAAAAI/AAAAAAAADP8/GgoyUztN2X8/photo.jpg?sz=128", "display_name": "Akshay Mittal", "link": "https://stackoverflow.com/users/9902252/akshay-mittal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "answer_count": 6, "score": -1, "last_activity_date": 1528279857, "creation_date": 1528275515, "question_id": 50716241, "link": "https://stackoverflow.com/questions/50716241/my-c-program-is-giving-same-result-of-calculation", "title": "my c program is giving same result of calculation", "body": "<pre><code>#include &lt;stdio.h&gt;\nmain()\n{\n    int a,b,c;\n    printf(\"write two numbers\");\n    scanf(\"%d%d\", &amp;a,&amp;b);\n    c=a+b;\n    printf(\"the sum of two numbers is%d\",&amp;c);\n}\n</code></pre>\n\n<p>this my used code.\nI am using code blocks for compiling.</p>\n"}, {"tags": ["c", "pointers", "nodes", "singly-linked-list"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1528273962, "post_id": 50715515, "comment_id": 88440046, "body": "Did you try stepping through your code with a debugger? Side note: How is the question related to C++, since in C++ you can&#39;t declare a function named <code>delete</code>, so it cannot be C++."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1528274560, "post_id": 50715515, "comment_id": 88440383, "body": "A pen or pencil and a pad of paper are the best tools for both writing and debugging pointer-related code."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8735595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852e91a6885d61c518c24e5ec36f1d0?s=128&d=identicon&r=PG&f=1", "display_name": "Riddhiman Saikia", "link": "https://stackoverflow.com/users/8735595/riddhiman-saikia"}, "edited": false, "score": 0, "creation_date": 1595947018, "post_id": 50715840, "comment_id": 111646399, "body": "Thank you. Had just started coding back then and was a noob at the time of asking this :). Sorry for late reply. Thanks again!"}], "tags": [], "owner": {"reputation": 465, "user_id": 9332801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c2ffe184be01f4f1a8b5387e430f6e?s=128&d=identicon&r=PG", "display_name": "dodobhoot", "link": "https://stackoverflow.com/users/9332801/dodobhoot"}, "is_accepted": true, "score": 2, "last_activity_date": 1528274915, "last_edit_date": 1528274915, "creation_date": 1528274309, "answer_id": 50715840, "question_id": 50715515, "link": "https://stackoverflow.com/questions/50715515/linked-list-delete-node-freepointer-prints-0-in-next-node/50715840#50715840", "title": "Linked list delete node. Free(pointer) prints 0 in next node", "body": "<p>This is the dry run of the code:</p>\n\n<pre><code>20 --&gt; 2 --&gt; 19 --&gt; 7 --&gt; 3 --&gt; 6\n^\nhead\n\nwhile(position--) // position == 2\n{\n    if(!position) // position == 1, condition is false\n        head-&gt;next = head-&gt;next-&gt;next; \n    head = head-&gt;next;\n}\n\n20 --&gt; 2 --&gt; 19 --&gt; 7 --&gt; 3 --&gt; 6\n       ^\n       head\n\nwhile(position--) // position == 1\n{\n    if(!position) // position == 0, condition is true\n        head-&gt;next = head-&gt;next-&gt;next;\n    head = head-&gt;next;\n}\n\n            /-----\\\n20 --&gt; 2 --/ 19 --&gt; 7 --&gt; 3 --&gt; 6    // 2's next is pointing to 7 now\n                    ^\n                    head\n</code></pre>\n\n<p>Now <code>free(head)</code> will be executed which will delete the node containing number <code>7</code>. Now, when you print, you'll probably get:</p>\n\n<pre><code>20 -&gt; 2 -&gt; (reference to deleted node) -&gt; 3 -&gt; 6\n</code></pre>\n\n<p>I think this is undefined behavior that you are referencing the deleted node and it's printing <code>0</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 8735595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852e91a6885d61c518c24e5ec36f1d0?s=128&d=identicon&r=PG&f=1", "display_name": "Riddhiman Saikia", "link": "https://stackoverflow.com/users/8735595/riddhiman-saikia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 50715840, "answer_count": 1, "score": 1, "last_activity_date": 1528326292, "creation_date": 1528273254, "last_edit_date": 1528326292, "question_id": 50715515, "link": "https://stackoverflow.com/questions/50715515/linked-list-delete-node-freepointer-prints-0-in-next-node", "title": "Linked list delete node. Free(pointer) prints 0 in next node", "body": "<p>Below is a delete node in Linklist code that takes head pointer and position to delete as arguments (position index start at ZERO in Linklist). And after deleting, returns a pointer to head.</p>\n\n<pre><code>Node* delete(Node* head, int position) \n{\n    Node *p = head;\n    if(!position)\n    {\n        p = p-&gt;next;\n    }\n    else\n    {\n        while(position--)\n        {\n            if(!position) head-&gt;next = head-&gt;next-&gt;next; \n            head = head-&gt;next;\n        }\n    }\n    free(head);\n    return p; \n}\n</code></pre>\n\n<p>Suppose list: 20-2-19-7-3-6. And position to delete is 2 (node 19 to delete, since index start from zero).</p>\n\n<p>After deleting, and printing, it says: 20-2-0-3-6.(i.e. the node directly next to the one deleted prints 0)</p>\n\n<p>But if I remove the line \"free(head)\", then it prints: 20-2-7-3-6  (correctly).</p>\n\n<p>Please help and explain why.</p>\n\n<p>PS: There is no issue when deleting head node or tail node. But any other node in between shows 0 in next node.</p>\n"}, {"tags": ["c", "hex", "ascii", "data-conversion"], "comments": [{"owner": {"reputation": 19, "user_id": 9427053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3a6a0aa76554cd835db7ec29c1e1390?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/9427053/ashwini"}, "edited": false, "score": 0, "creation_date": 1528273160, "post_id": 50715481, "comment_id": 88439554, "body": "Code: int main(void){     char word[12] = { &#39;8&#39;, &#39;6&#39;,&#39;7&#39;,&#39;4&#39;,&#39;1&#39;,&#39;-&#39;,&#39;3&#39;,&#39;0&#39;,&#39;0&#39;,&#39;1&#39;,&#39;1&#39;};     char outword[20];     int i, len;     len = strlen(word);     printf(&quot;Input string: %s\\n&quot;, word);     //printf(&quot;Total length: %d\\n&quot;, len);     if(word[len-1]==&#39;\\n&#39;)         word[--len] = &#39;\\0&#39;;     for(i = 0; i&lt;len; i++)     { \t    if (isalnum(word[i]) == 0) {             printf(&quot;%c is not an alphanumeric character.\\n&quot;, word[i]); \t    }         else {             sprintf(outword+i*2 , &quot;%02X&quot;, word[i]);         }     }     printf(&quot;Hex output:%s\\n&quot;, outword);     return 0; }"}, {"owner": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1528274268, "post_id": 50715481, "comment_id": 88440225, "body": "It seems you whish to break the <code>for loop</code> when reading a non alphanumeric character. Have a look at <a href=\"https://www.tutorialspoint.com/cprogramming/c_break_statement.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_break_statement.htm</a>"}, {"owner": {"reputation": 19, "user_id": 9427053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3a6a0aa76554cd835db7ec29c1e1390?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/9427053/ashwini"}, "reply_to_user": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1528274576, "post_id": 50715481, "comment_id": 88440395, "body": "No, I need to skip nonalphanumeric character and continue to asciitohex data conversion until end of the string."}, {"owner": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1528274881, "post_id": 50715481, "comment_id": 88440573, "body": "Oh yes, excuse me I inverted your two lines. The printf &#39;not and alphanumeric&#39; does never occur?"}, {"owner": {"reputation": 19, "user_id": 9427053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3a6a0aa76554cd835db7ec29c1e1390?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/9427053/ashwini"}, "reply_to_user": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1528275271, "post_id": 50715481, "comment_id": 88440815, "body": "It prints for input char &#39;-&#39;(non alphanumeric). But issue is output fails to get characters after non alphanumeric characters."}, {"owner": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1528275928, "post_id": 50715481, "comment_id": 88441232, "body": "Playing around with your code, <a href=\"http://codepad.org/bgBv1dOJ\" rel=\"nofollow noreferrer\">codepad.org/bgBv1dOJ</a> I am sure the loop goes further the caret character, but have no idea why sprintf stops catenating."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1528276806, "post_id": 50715481, "comment_id": 88441830, "body": "your <code>outword</code> array only has room for 20 characters, and you&#39;re placing exactly that amount in it (10 digits times 2 hex characters each). That leaves no room for the null terminator <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1528277579, "post_id": 50715481, "comment_id": 88442364, "body": "What do you think <code>if(word[len-1]==&#39;\\n&#39;) word[--len] = &#39;\\0&#39;;</code> does? That is a &#39;partial&#39; check for use after a <i>line-oriented input</i> function such as <code>fgets</code> or POSIX <code>getline</code> -- it has absolutely nothing to do with <code>word</code>. The only possible relevance would be if you initialized <code>word</code> as <code>char word[13] = { &#39;8&#39;, &#39;6&#39;,&#39;7&#39;,&#39;4&#39;,&#39;1&#39;,&#39;-&#39;,&#39;3&#39;,&#39;0&#39;,&#39;0&#39;,&#39;1&#39;,&#39;1&#39;,&#39;\\n&#39;};</code>. Don&#39;t guess at using code found elsewhere -- know exactly what each line does and why you are using it. <code>char word[] = &quot;86741-30011&quot;;</code> would be a better way to initialize your array to contain the nul-terminated string."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1529395170, "post_id": 50715481, "comment_id": 88845928, "body": "If you got an answer that solved your problem, you might accept it."}], "answers": [{"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 1, "last_activity_date": 1528276082, "creation_date": 1528276082, "answer_id": 50716429, "question_id": 50715481, "link": "https://stackoverflow.com/questions/50715481/skip-special-characters-while-converting-ascii-to-hex-in-c/50716429#50716429", "title": "Skip special characters while converting ASCII to HEX in C", "body": "<p>You need to count input and output position separately.</p>\n\n<pre><code>for(i = 0; i&lt;len; i++) \n{\n    if (isalnum(word[i]) == 0) {\n        printf(\"%c is not an alphanumeric character.\\n\", word[i]);\n    } else {\n        sprintf(outword+i*2 , \"%02X\", word[i]);\n    }\n}\n</code></pre>\n\n<p>If your condition is true and you print the text, the counter <code>i</code> is incremented. This is not only used to get to the next in-character, but also do define the position in output-array. This means the 2 bytes in the out-array are not touched while you parse the input.</p>\n\n<p>If by accident you have 0 bytes there, your string is terminated here.</p>\n\n<p>This would lead to the following layout:\n<code>\"3836373431\\0\\03330303131\"</code> which is printed as <code>\"3836373431\"</code>.</p>\n\n<p>You might add another variable for output and only increment when you really convert to hex. </p>\n\n<pre><code>int outpos;\nfor(i = 0, outpos = 0; i&lt;len; i++)\n{\n    if (isalnum(word[i]) == 0) {\n        printf(\"%c is not an alphanumeric character.\\n\", word[i]);\n    } else {\n        sprintf(outword+outpos*2 , \"%02X\", word[i]);\n        outpos++;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 9776034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2e7de0d83f146e9f007856a33d16bf?s=128&d=identicon&r=PG&f=1", "display_name": "Cyril P Joy", "link": "https://stackoverflow.com/users/9776034/cyril-p-joy"}, "is_accepted": false, "score": 2, "last_activity_date": 1528276171, "creation_date": 1528276171, "answer_id": 50716454, "question_id": 50715481, "link": "https://stackoverflow.com/questions/50715481/skip-special-characters-while-converting-ascii-to-hex-in-c/50716454#50716454", "title": "Skip special characters while converting ASCII to HEX in C", "body": "<p>Use different variables for loop rotation and adding data into array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    char word[12] = { '8', '6','7','4','1','-','3','0','0','1','1'};\n    char outword[20];\n    int i, j, len;\n    len = strlen(word);\n    printf(\"Input string: %s\\n\", word);\n    //printf(\"Total length: %d\\n\", len);\n    if(word[len-1]=='\\n') word[--len] = '\\0';\n    for(i = 0,j=0; i&lt;len; i++) {\n        if (isalnum(word[i]) == 0) {\n            printf(\"%c is not an alphanumeric character.\\n\", word[i]);\n        } else {\n            sprintf(outword+j*2 , \"%02X\", word[i]);\n            j=j+1;\n        }\n    }\n    printf(\"Hex output:%s\\n\", outword); return 0;\n}\n</code></pre>\n\n<p>This code will give you the expected result  38363734313330303131.</p>\n"}], "owner": {"reputation": 19, "user_id": 9427053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3a6a0aa76554cd835db7ec29c1e1390?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/9427053/ashwini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528276171, "creation_date": 1528273120, "last_edit_date": 1528275458, "question_id": 50715481, "link": "https://stackoverflow.com/questions/50715481/skip-special-characters-while-converting-ascii-to-hex-in-c", "title": "Skip special characters while converting ASCII to HEX in C", "body": "<p>I need help to get the ascii to hex data output only for alphanumeric characters(excluding special characters).</p>\n\n<pre><code>Input String is: 86741-30011\nExpected result is: 38363734313330303131 \nActual Result  is: 3836373431\n</code></pre>\n\n<p>Output breaks after non alphanumeric characters. It contains output string only until non alphanumeric characters. </p>\n\n<p>Code:</p>\n\n<pre><code>int main(void){\n    char word[12] = { '8', '6','7','4','1','-','3','0','0','1','1'};\n    char outword[20];\n    int i, len;\n    len = strlen(word);\n    printf(\"Input string: %s\\n\", word);\n    //printf(\"Total length: %d\\n\", len);\n    if(word[len-1]=='\\n') word[--len] = '\\0';\n    for(i = 0; i&lt;len; i++) {\n        if (isalnum(word[i]) == 0) {\n            printf(\"%c is not an alphanumeric character.\\n\", word[i]);\n        } else {\n            sprintf(outword+i*2 , \"%02X\", word[i]);\n        }\n    }\n    printf(\"Hex output:%s\\n\", outword); return 0;\n}\n</code></pre>\n\n<p>Can anyone help me to get expected output?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 2, "creation_date": 1528272960, "post_id": 50715359, "comment_id": 88439423, "body": "Because, parameter passing in C is by value."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1528276862, "post_id": 50715359, "comment_id": 88441873, "body": "Additionally, you might want to check if <code>malloc</code> returned NULL."}], "answers": [{"tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": false, "score": 4, "last_activity_date": 1528273121, "creation_date": 1528273121, "answer_id": 50715482, "question_id": 50715359, "link": "https://stackoverflow.com/questions/50715359/why-does-insertion-into-a-list-require-a-pointer-to-a-pointer/50715482#50715482", "title": "Why does insertion into a list require a pointer to a pointer", "body": "<p>No, you can't. The problem with <code>insert1</code> is in the following line:</p>\n\n<pre><code>l = p;\n</code></pre>\n\n<p>This will set the value of <code>l</code> to <code>p</code>, but <code>l</code> is only a function-local variable holding the value of the pointer to the list. Changing <code>l</code> here will not have any effect outside of the function. So if I have a code like:</p>\n\n<pre><code>list *myList = /* ... */;\ninsert1(myList, 0);\n</code></pre>\n\n<p>The pointer <code>myList</code> here will not be changed. On the other hand, with the code:</p>\n\n<pre><code>list *myList = /* ... */;\ninsert(&amp;myList, 0);\n</code></pre>\n\n<p>The pointer <code>myList</code> will be updated to point to the newly inserted value.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 4728883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114d740782b199c8bda12da8ced9089c?s=128&d=identicon&r=PG&f=1", "display_name": "drewyu", "link": "https://stackoverflow.com/users/4728883/drewyu"}, "edited": false, "score": 0, "creation_date": 1528273820, "post_id": 50715486, "comment_id": 88439949, "body": "Thanks for the reply! Just to clarify, functions in C/C++ cannot modify a parameters value but can modify the address a pointer is referencing?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 105, "user_id": 4728883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114d740782b199c8bda12da8ced9089c?s=128&d=identicon&r=PG&f=1", "display_name": "drewyu", "link": "https://stackoverflow.com/users/4728883/drewyu"}, "edited": false, "score": 1, "creation_date": 1528280775, "post_id": 50715486, "comment_id": 88444508, "body": "@drewyu no, they cannot, however in C++ you can use references, (<code>void foo(int &amp; bar)...</code>)"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 105, "user_id": 4728883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114d740782b199c8bda12da8ced9089c?s=128&d=identicon&r=PG&f=1", "display_name": "drewyu", "link": "https://stackoverflow.com/users/4728883/drewyu"}, "edited": false, "score": 1, "creation_date": 1528313333, "post_id": 50715486, "comment_id": 88464276, "body": "@drewyu Functions can modify the <b>memory</b> a pointer is referencing. In the case of our double pointer argument (<code>list** l</code>), that memory happens to be the pointer variable <code>myList</code>, simply because we are passing its address with <code>&amp;myList</code>. So, when <code>insert()</code> changes the value of <code>*l</code>, it changes the value of <code>myList</code>. Since <code>myList</code> is indeed itself a pointer, it&#39;s value is indeed an address, also. But that&#39;s rather coincidence and not relevant to the pass-by-value discussion. Just remember: If, and only if I pass a pointer, the callee may change whatever memory is behind it."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 105, "user_id": 4728883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114d740782b199c8bda12da8ced9089c?s=128&d=identicon&r=PG&f=1", "display_name": "drewyu", "link": "https://stackoverflow.com/users/4728883/drewyu"}, "edited": false, "score": 1, "creation_date": 1528314042, "post_id": 50715486, "comment_id": 88464616, "body": "@drewyu Also, as Jabberwocky rightly notes, C and C++ behave very different in this respect. In C, <code>int foo = 42; bar(foo); assert(foo == 42);</code> is guaranteed to succeed. In C++, there is no such guarantee. And it&#39;s not the only difference between the two languages. I know it&#39;s tempting to think of C as just a subset of C++, I did so myself for a too long time. I think it&#39;s better to start thinking about C and C++ as <i>different</i> languages quickly, it may save you some nasty surprises. For instance, <code>list* p = malloc(sizeof(*p));</code> is recommended in C, but illegal in C++."}], "tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1528273128, "creation_date": 1528273128, "answer_id": 50715486, "question_id": 50715359, "link": "https://stackoverflow.com/questions/50715359/why-does-insertion-into-a-list-require-a-pointer-to-a-pointer/50715486#50715486", "title": "Why does insertion into a list require a pointer to a pointer", "body": "<p>Everything is passed by value in C. This includes your pointer. So, when you say <code>l = p;</code> at the end of your function, <em>this is without effect on the caller of <code>insert1()</code></em>. You are just modifying a local variable of <code>insert1()</code> (that happens to hold a pointer).</p>\n\n<p>However, when you say <code>*l = p;</code> at the end of <code>insert()</code>, you are writing the pointer to a memory location that's controlled by the caller. The caller typically does something similar to this:</p>\n\n<pre><code>list* myList = ...;\ninsert(&amp;myList, ...);\n</code></pre>\n\n<p>With this, the <code>*l = p;</code> directly modifies the value of <code>myList</code> in the caller, allowing the caller to actually see an effect.</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 3, "last_activity_date": 1528273687, "creation_date": 1528273687, "answer_id": 50715656, "question_id": 50715359, "link": "https://stackoverflow.com/questions/50715359/why-does-insertion-into-a-list-require-a-pointer-to-a-pointer/50715656#50715656", "title": "Why does insertion into a list require a pointer to a pointer", "body": "<p><em>Why does insertion into a list require a pointer to a pointer ?</em>  it's because if you do that modification in <code>*l</code> will affect in calling function also &amp; that's what our intention if you want to link nodes. This <code>*l = p;</code> in below code will modify the <code>head</code> node in the <code>calling</code> function probably <code>main()</code>.</p>\n\n<p><code>void insert (list **l, int x) {\n     /*. .. */\n}</code></p>\n\n<p>If you pass only pointer as you did in second code <code>*l</code> doesn't get modified in calling function. This <code>l = p;</code> doesn't change <code>head</code> node in calling function.</p>\n"}], "owner": {"reputation": 105, "user_id": 4728883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114d740782b199c8bda12da8ced9089c?s=128&d=identicon&r=PG&f=1", "display_name": "drewyu", "link": "https://stackoverflow.com/users/4728883/drewyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50715486, "answer_count": 3, "score": 4, "last_activity_date": 1528276787, "creation_date": 1528272731, "last_edit_date": 1528276787, "question_id": 50715359, "link": "https://stackoverflow.com/questions/50715359/why-does-insertion-into-a-list-require-a-pointer-to-a-pointer", "title": "Why does insertion into a list require a pointer to a pointer", "body": "<p>The textbook describes the insertion algorithm this way, my question is, can't it be accomplished by the second function, shown below which doesn't include a pointer to a pointer, instead working with *l and l. </p>\n\n<pre><code>void insert (list **l, int d)\n{\n    list *p; \n\n    p = malloc(sizeof(list)); \n    p.data = x;\n    p.next = *l; \n    *l = p;\n}\n\n\nvoid insert1 (list *l, int d){\n    list *p;\n    p = malloc(sizeof(list));\n    p.data = x;\n    p.next = l;\n    l = p; \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1528269601, "post_id": 50714366, "comment_id": 88437514, "body": "well without knowing what the variables are we can not say that is correct.... Please contribute an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1528269611, "post_id": 50714366, "comment_id": 88437522, "body": "What happened when you compiled and ran it ?"}, {"owner": {"reputation": 1644, "user_id": 8990695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sG6bg.jpg?s=128&g=1", "display_name": "Mr. Roshan", "link": "https://stackoverflow.com/users/8990695/mr-roshan"}, "edited": false, "score": 0, "creation_date": 1528269736, "post_id": 50714366, "comment_id": 88437585, "body": "what do you want actually to reverse a number or array??"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 3, "creation_date": 1528269760, "post_id": 50714366, "comment_id": 88437602, "body": "you definitly get out of bounds with <code>int a[n-1]</code>and<code>i&lt;n</code> in the for loop"}, {"owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "edited": false, "score": 0, "creation_date": 1528269775, "post_id": 50714366, "comment_id": 88437612, "body": "you will fail to reverse the number 0 using this code. but otherwise the logic for each element in the array seems correct"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "edited": false, "score": 0, "creation_date": 1528269893, "post_id": 50714366, "comment_id": 88437680, "body": "@IvayloStrandjev not if <code>t</code> is a non integer type. :)"}, {"owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1528270487, "post_id": 50714366, "comment_id": 88438015, "body": "@KamiKaze if t is non integer the code will not compile(unless you&#39;ve overloaded the <code>%</code> operator)"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "edited": false, "score": 0, "creation_date": 1528270728, "post_id": 50714366, "comment_id": 88438154, "body": "@IvayloStrandjev true."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1528273256, "post_id": 50714366, "comment_id": 88439605, "body": "&quot;unless you&#39;ve overloaded the % operator&quot; - wishing you well in your endeavours in doing that in C."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1528273267, "post_id": 50714366, "comment_id": 88439608, "body": "Do all your test cases pass?  Is your test set complete?  If the answer to either question is &quot;no&quot;, then it&#39;s not right."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1528273392, "post_id": 50714366, "comment_id": 88439683, "body": "P.S. It&#39;s totally wrong if any of the <code>scanf()</code> or <code>printf()</code> fails, since you never even look at the return values."}], "answers": [{"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 1, "last_activity_date": 1528270256, "creation_date": 1528270256, "answer_id": 50714634, "question_id": 50714366, "link": "https://stackoverflow.com/questions/50714366/reversing-a-number-in-c/50714634#50714634", "title": "reversing a number in C", "body": "<p>The code that you mentioned having <strong>undefined behavior</strong> in \n<code>for(i=0;i&lt;n;i++) { scanf(\"%d\",&amp;a[i]); }</code> as you are scanning <code>n</code> elements of array but you declared only <code>a[n-1]</code> i.e. one less. To overcome this declare <code>a[n]</code> and scan <code>n</code> elements.</p>\n\n<p>Also here you are just reverse printing, <code>a[i]</code> doesn't change.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5830395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61b5bb3c577518170edcbac6fd6e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Myallaen", "link": "https://stackoverflow.com/users/5830395/myallaen"}, "is_accepted": false, "score": 0, "last_activity_date": 1528272905, "creation_date": 1528272905, "answer_id": 50715414, "question_id": 50714366, "link": "https://stackoverflow.com/questions/50714366/reversing-a-number-in-c/50715414#50715414", "title": "reversing a number in C", "body": "<p>Your code should be able to display your number in reverse, but there is easier ways to do so.</p>\n\n<p>Declaring an array with a non-fixed size in the heap (<code>int a[n-1];</code>) is a functioning, albeit dirty, way of doing it. For this you rather use an allocation method as malloc.</p>\n\n<p>Using scanf to simultaneously read on stdin and convert in integer is attractive but can only read on stdin. If you want to read on an other File Descriptor a combinaison of read and atoi is better.</p>\n\n<p>Here's my way of doing it:</p>\n\n<p><pre></p>\n\n<code>int main()\n{\n    char buff[128];\n    int tmp;\n    int *t;\n\n    if (read(0, buff, 127) &lt;= 0)\n        return (1);\n    if ((tmp = atoi(buff)) &lt; 1)\n        return (1);\n    if ((t = malloc(sizeof(int) * tmp)) == NULL)\n        return (1);\n\n    for (int i = 0; i &lt; tmp; ++i) {\n        if (read(0, buff, 127) &lt;= 0)\n            return (1);\n        t[i] = atoi(buff);\n    }\n\n    for (int i = 0; i &lt; tmp; ++i) {\n        while (t &gt; 0) {\n            printf(\"%d\", t % 10);\n            t /= 10;\n        }\n        printf(\"\\n\");\n    }\n    free(t);\n    return (0);\n}\n</code></pre>\n\n<p></p>\n"}, {"tags": [], "owner": {"reputation": 531, "user_id": 8339821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0148d1cfa01aea7231cf3195f54f2d78?s=128&d=identicon&r=PG&f=1", "display_name": "user14063792468", "link": "https://stackoverflow.com/users/8339821/user14063792468"}, "is_accepted": false, "score": 0, "last_activity_date": 1528274298, "creation_date": 1528274298, "answer_id": 50715838, "question_id": 50714366, "link": "https://stackoverflow.com/questions/50714366/reversing-a-number-in-c/50715838#50715838", "title": "reversing a number in C", "body": "<p>You could convert your number to string, then use string reversing function on the string and after that convert the string back to number. Something along this lines:</p>\n\n<pre><code>int  v = 1234567890;\nchar cbuf[20];\n\n sprintf(cbuf,\"%d\",v);\n strrev(cbuf);\n sscanf(cbuf,\"%d\",&amp;v);\n\nprintf(\"V = %d\\n\");\n</code></pre>\n\n<p>You can find strrev implementation somewhere on the web. Be aware that trailing zero will need special handling in this implementation, and that is not included in my code.</p>\n"}], "owner": {"reputation": 69, "user_id": 9520961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B-hh_ru2s9E/AAAAAAAAAAI/AAAAAAAAAK4/-Y_xV56igQQ/photo.jpg?sz=128", "display_name": "Rakesh", "link": "https://stackoverflow.com/users/9520961/rakesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "closed_date": 1528280453, "answer_count": 3, "score": -1, "last_activity_date": 1528274538, "creation_date": 1528269450, "last_edit_date": 1528274538, "question_id": 50714366, "link": "https://stackoverflow.com/questions/50714366/reversing-a-number-in-c", "closed_reason": "Needs more focus", "title": "reversing a number in C", "body": "<p>Is this code right for reversing a number. Ignore the declaration of variables. Is there any other approach to do this?</p>\n\n<pre><code>scanf(\"%d\",&amp;n);\nint a[n-1];\n\nfor(i=0;i&lt;n;i++)\n{\n    scanf(\"%d\",&amp;a[i]);\n}\n\nfor(i=0;i&lt;n;i++)\n{\n    t=a[i];\n    while(t!=0)\n    {\n        last=t%10;\n        printf(\"%d\",last);\n        t=t/10;\n    }\n    printf(\"\\n\");\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1528268180, "post_id": 50713976, "comment_id": 88436674, "body": "Missing a couple of checks, I see."}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1528268225, "post_id": 50713976, "comment_id": 88436705, "body": "could you elaborate?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1528268332, "post_id": 50713976, "comment_id": 88436770, "body": "<a href=\"https://stackoverflow.com/q/5431941/2173917\">Check this one</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1528268655, "post_id": 50713976, "comment_id": 88436965, "body": "You need to check that <code>getline</code> was successful. <code>feof</code> becomes true <i>only after</i> the file was tried to be read after the end of file was met. Additionally it won&#39;t become true if the read fails because of an error."}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1528269388, "post_id": 50713976, "comment_id": 88437373, "body": "@AnttiHaapala thank you! your comment helped me narrow down the problem a lot and I ended up writing it like this: <a href=\"https://pastebin.com/ShEWsTxy\" rel=\"nofollow noreferrer\">pastebin.com/ShEWsTxy</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1528269539, "post_id": 50713976, "comment_id": 88437474, "body": "@BRHSM It is <i>better</i> but not yet <i>correct</i>! If an <i>error</i> occurs while reading the file, for example the filesystem is corrupted, your program will hang forever in the loop. Please read the answers to <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">the duplicate question carefully</a>"}], "owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1528268516, "answer_count": 0, "score": 0, "last_activity_date": 1528268042, "creation_date": 1528268042, "question_id": 50713976, "link": "https://stackoverflow.com/questions/50713976/program-reading-from-text-file-tries-to-read-extra-line-after-file-is-finished", "closed_reason": "Duplicate", "title": "Program reading from text file tries to read extra line after file is finished", "body": "<p>I'm working on a program which is suppose to read information from a text file. With the help of <a href=\"https://stackoverflow.com/questions/50698537/read-a-line-from-text-file-and-place-data-separated-by-spaces-inside-struct\">this question</a> I was able to make it read 1 line at the time. Now I've written a loop which runs trough the file and reads all of it:</p>\n\n<pre><code>int main(void)\n{\n    FILE * fp;\n    fp = open_file(\"test.txt\");\n    while(1){\n        if(feof(fp))\n            break;\n        product_t * product = read_line(fp);\n        print_product(product);\n    }\n    fclose(fp);\n    return(0);\n}\n</code></pre>\n\n<p>Here is the whole program I'm using to read from the text file: <a href=\"https://pastebin.com/pe1XZj7c\" rel=\"nofollow noreferrer\">https://pastebin.com/pe1XZj7c</a></p>\n\n<p>The file I'm trying to read from looks like this: </p>\n\n<pre><code>H235 Sportello_dx N246 15:20:43 15:27:55\nK542 Sportello_sx N247 10:03:10 10:15:30\nA356 Maniglia_fronte G102 18:40:11 18:52:23\n</code></pre>\n\n<p>The program reads the whole file and processes the data correctly but then I get a segmentation fault. Here is the output of the whole program:</p>\n\n<pre><code>product_t code_product: H235 \nproduct_t name: Sportello_dx \nproduct_t code_piece: N246 \nproduct_t enter: 15:20:43 \nproduct_t exit: 15:27:55 \nproduct_t code_product: K542 \nproduct_t name: Sportello_sx \nproduct_t code_piece: N247 \nproduct_t enter: 10:3:10 \nproduct_t exit: 10:15:30 \nproduct_t code_product: A356 \nproduct_t name: Maniglia_fronte \nproduct_t code_piece: G102 \nproduct_t enter: 18:40:11 \nproduct_t exit: 18:52:23 \nSegmentation fault\n</code></pre>\n\n<p>I used GDB to try to figure out what is causing the segmentation fault. Here is the output it gave me including the backtrace:</p>\n\n<pre><code>Starting program: /home/trie/Desktop/Progett Asd/a.out \nproduct_t code_product: H235 \nproduct_t name: Sportello_dx \nproduct_t code_piece: N246 \nproduct_t enter: 15:20:43 \nproduct_t exit: 15:27:55 \nproduct_t code_product: K542 \nproduct_t name: Sportello_sx \nproduct_t code_piece: N247 \nproduct_t enter: 10:3:10 \nproduct_t exit: 10:15:30 \nproduct_t code_product: A356 \nproduct_t name: Maniglia_fronte \nproduct_t code_piece: G102 \nproduct_t enter: 18:40:11 \nproduct_t exit: 18:52:23 \n\nProgram received signal SIGSEGV, Segmentation fault.\n__GI_____strtol_l_internal (nptr=0x0, endptr=endptr@entry=0x0, \n    base=base@entry=10, group=group@entry=0, \n    loc=0x7ffff7dd4400 &lt;_nl_global_locale&gt;) at ../stdlib/strtol_l.c:293\n293 ../stdlib/strtol_l.c: No such file or directory.\n(gdb) backtrace\n#0  __GI_____strtol_l_internal (nptr=0x0, endptr=endptr@entry=0x0, \n    base=base@entry=10, group=group@entry=0, \n    loc=0x7ffff7dd4400 &lt;_nl_global_locale&gt;) at ../stdlib/strtol_l.c:293\n#1  0x00007ffff7a70c82 in __strtol (nptr=&lt;optimized out&gt;, \n    endptr=endptr@entry=0x0, base=base@entry=10) at ../stdlib/strtol.c:106\n#2  0x00007ffff7a6e290 in atoi (nptr=&lt;optimized out&gt;) at atoi.c:27\n#3  0x0000555555554b5b in timestring_to_time (timestring=0x5555557589ea \"18\")\n    at assembly_line_manager.c:106\n#4  0x0000555555554a95 in read_line (fp=0x555555757010)\n    at assembly_line_manager.c:82\n#5  0x0000555555554924 in main () at assembly_line_manager.c:38\n</code></pre>\n\n<p>It seems like the program is trying to call the atoi function with invalid data after everything has bean read from the file. why is it doing that? how can I prevent it?</p>\n"}, {"tags": ["c", "scheduled-tasks", "scheduling", "mutual-exclusion"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1528265780, "post_id": 50713222, "comment_id": 88435452, "body": "I would see this as the definition of &quot;nested&quot; - one is inside the other. If the regions are just partially overlapping, they are not nested."}, {"owner": {"reputation": 255, "user_id": 9371052, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80c55dcd251c62a3a8e30e313396921d?s=128&d=identicon&r=PG&f=1", "display_name": "Qwerto", "link": "https://stackoverflow.com/users/9371052/qwerto"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1528268056, "post_id": 50713222, "comment_id": 88436584, "body": "Maybe i didn&#39;t use accurate words, but i think the problem is clear"}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1528273381, "post_id": 50713222, "comment_id": 88439671, "body": "What do you mean by &quot;the meaning of this assumption&quot; and &quot;why it is important&quot;? What you are showing us is just the definition of &quot;nested&quot;. The slides just explain what it is."}, {"owner": {"reputation": 739, "user_id": 8281970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abHXs.jpg?s=128&g=1", "display_name": "Ketan Mukadam", "link": "https://stackoverflow.com/users/8281970/ketan-mukadam"}, "edited": false, "score": 1, "creation_date": 1528275001, "post_id": 50713222, "comment_id": 88440648, "body": "It is a good practice to release locks in the <code>innermost to outermost</code> order. It avoids corrupt resources, deadlocks in cases like re-entrant locks and easier to debug."}, {"owner": {"reputation": 255, "user_id": 9371052, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80c55dcd251c62a3a8e30e313396921d?s=128&d=identicon&r=PG&f=1", "display_name": "Qwerto", "link": "https://stackoverflow.com/users/9371052/qwerto"}, "edited": false, "score": 0, "creation_date": 1528297351, "post_id": 50713222, "comment_id": 88455558, "body": "Thanks. I dont understand what you mean for &quot;It avoids corrupt resources&quot;, and which case of deadlock it prevents"}], "owner": {"reputation": 255, "user_id": 9371052, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80c55dcd251c62a3a8e30e313396921d?s=128&d=identicon&r=PG&f=1", "display_name": "Qwerto", "link": "https://stackoverflow.com/users/9371052/qwerto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1528272605, "creation_date": 1528265261, "last_edit_date": 1592644375, "question_id": 50713222, "link": "https://stackoverflow.com/questions/50713222/nested-critical-sections-in-scheduling", "title": "Nested Critical Sections in scheduling", "body": "<p>I'm studying scheduling and in particular the real time scheduling implemented in C.\nNow i'm stuck with a question about nested critical sections. The slides i'm studying use the assumption that if a task use a nested critical section, it always release first the inner resourse and then the second. Like pictured in this image:</p>\n<p><a href=\"https://i.stack.imgur.com/mn6t2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mn6t2.png\" alt=\"enter image description here\" /></a></p>\n<p>But, i dont know the meaning of this assumption, why it is important. Can you help me ?</p>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1528264471, "post_id": 50713045, "comment_id": 88434957, "body": "I think you should go back to whatever text-book or tutorial you&#39;re reading, and start over. You have multiple problems with the code you show, telling me you&#39;re kind of guessing about things than actually knowing anything."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1528264818, "post_id": 50713045, "comment_id": 88435091, "body": "Read up on the differences of the followoing pairs: type <code>char</code> and someting like &quot;January&quot;. <code>=</code> and <code>==</code>. Comparing strings and <code>==</code>.  Also join the fun of all the problems realted to <code>scanf()</code>. <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html</a> <a href=\"https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\" title=\"how to read parse input in c the faq\">stackoverflow.com/questions/35178520/&hellip;</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1528264945, "post_id": 50713045, "comment_id": 88435132, "body": "<code>char m</code> is far too short to hold a non-null string."}, {"owner": {"reputation": 467, "user_id": 9144272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1982ba98a7ab58e26186169640de8f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vipul Bhardwaj", "link": "https://stackoverflow.com/users/9144272/vipul-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1528264961, "post_id": 50713045, "comment_id": 88774195, "body": "Let me try and make it little simpler for you, try and ask yourself some <b>questions.</b> 1) Why do the two comparison statements look different in if block. 2) Is it actually not asking for input or is it. Try following your guide line by line, and you will figure your error out"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9901295, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wmyt8de3s4Y/AAAAAAAAAAI/AAAAAAAAAzw/kjPHG5O0RkE/photo.jpg?sz=128", "display_name": "JM Roberto", "link": "https://stackoverflow.com/users/9901295/jm-roberto"}, "edited": false, "score": 0, "creation_date": 1528380102, "post_id": 50713324, "comment_id": 88493967, "body": "You&#39;re awesome! @Siraj Thanks for explaining and correcting the syntax. I&#39;m still a newbie in coding and this is really helpful. We have not tackled strcmp() yet that&#39;s why I have no idea. I appreciate your input. :)"}, {"owner": {"reputation": 5349, "user_id": 5132337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fcj6b.jpg?s=128&g=1", "display_name": "Siraj Alam", "link": "https://stackoverflow.com/users/5132337/siraj-alam"}, "reply_to_user": {"reputation": 13, "user_id": 9901295, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wmyt8de3s4Y/AAAAAAAAAAI/AAAAAAAAAzw/kjPHG5O0RkE/photo.jpg?sz=128", "display_name": "JM Roberto", "link": "https://stackoverflow.com/users/9901295/jm-roberto"}, "edited": false, "score": 0, "creation_date": 1528397297, "post_id": 50713324, "comment_id": 88504031, "body": "I&#39;m glad i could helped you."}], "tags": [], "owner": {"reputation": 5349, "user_id": 5132337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fcj6b.jpg?s=128&g=1", "display_name": "Siraj Alam", "link": "https://stackoverflow.com/users/5132337/siraj-alam"}, "is_accepted": true, "score": 0, "last_activity_date": 1528266019, "last_edit_date": 1528266019, "creation_date": 1528265767, "answer_id": 50713324, "question_id": 50713045, "link": "https://stackoverflow.com/questions/50713045/display-holiday-name-based-on-the-month-and-day-entered-in-c-program/50713324#50713324", "title": "Display Holiday Name based on the Month and Day entered in c program", "body": "<p>Things you have to change in your program</p>\n\n<p>1 - Do not Use <code>char</code> type to store a <code>string</code>, you can use an array of characters.<br>\n  2 - <code>=</code> is not a comparison operator, it is an assignment operator, so you should use a function <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strcmp.htm\" rel=\"nofollow noreferrer\"><code>strcmp()</code></a> which is used to compare two string and return the number of different characters (and 0 if both strings are same).  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char m[10];\n    int d;\n    printf(\"Enter Month: \");\n    scanf(\"%s\", m);\n    printf(\"Enter Date: \");\n    scanf(\"%d\", &amp;d);\n\n    if ( !(strcmp(m, \"January\")) &amp;&amp; d == 1)\n        printf(\"New year's day \");\n    else if (!(strcmp(m, \"July\")) &amp;&amp; d == 1)\n        printf(\"Canada day \");\n    else if (!(strcmp(m, \"December\")) &amp;&amp; d == 25)\n        printf(\"Christmas day \");\n    else\n        printf(\"%s %d does not correspond to a fixed-date holiday \", m, d);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9901295, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Wmyt8de3s4Y/AAAAAAAAAAI/AAAAAAAAAzw/kjPHG5O0RkE/photo.jpg?sz=128", "display_name": "JM Roberto", "link": "https://stackoverflow.com/users/9901295/jm-roberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2154, "favorite_count": 0, "accepted_answer_id": 50713324, "answer_count": 1, "score": -1, "last_activity_date": 1528266019, "creation_date": 1528264332, "last_edit_date": 1528265017, "question_id": 50713045, "link": "https://stackoverflow.com/questions/50713045/display-holiday-name-based-on-the-month-and-day-entered-in-c-program", "title": "Display Holiday Name based on the Month and Day entered in c program", "body": "<p>I have a programming class and currently has a homework to show the holiday name based on the month and day entered by a user in C program.</p>\n\n<p>Whenever I compile and run the program, there is no error. However, if I enter any month and hit enter, it just returns New year's day and it does not ask for the date. It is supposed to require both the month and the date then display the corresponding holiday but it seems to be not working.</p>\n\n<p>I was wondering if you could provide inputs on what would be the correct syntax.</p>\n\n<p>Below is the code I tried to create:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\n\n    char m;\n    int d;\n\n    printf(\"Enter Month: \");\n    scanf(\"%c\", &amp;m);\n    printf(\"Enter Date: \");\n    scanf(\"%d\",&amp;d);\n\n    if (m =\"January\" &amp;&amp; d == 1)\n        printf(\"New year's day \");\n    else if (m =\"July\" &amp;&amp; d ==1 )\n        printf(\"Canada day \");\n    else if (m = \"December\" &amp;&amp; d ==25)\n        printf(\"Christmas day \");\n    else\n        printf(\"%c %d does not correspond to a fixed-date holiday \", m, d);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528264356, "post_id": 50712999, "comment_id": 88434917, "body": "Besides you writing the terminator out of bounds of your allocated memory, what is the problem you&#39;re having? What do you mean by &quot;does not work&quot;?"}, {"owner": {"reputation": 15, "user_id": 7654821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K_hluhmW-0w/AAAAAAAAAAI/AAAAAAAAA0o/isMRg-2Ydsw/photo.jpg?sz=128", "display_name": "Subrat Kumar", "link": "https://stackoverflow.com/users/7654821/subrat-kumar"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528264539, "post_id": 50712999, "comment_id": 88434990, "body": "When I run the program i just get the printf statement but reversed string i.e str is not printing out."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1528264588, "post_id": 50712999, "comment_id": 88435014, "body": "Then you should <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. If you do you should be able to find out the problem within a few minutes by stepping through the code line by line in a debugger."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1528268851, "post_id": 50712999, "comment_id": 88437086, "body": "Stack Overflow has got <i>tens of questions</i> if not <i>hundreds</i> about reversing a string in C. It might be worthwhile looking at those yourself and figuring out where you went wrong."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1528268904, "post_id": 50712999, "comment_id": 88437108, "body": "Also, it doesn&#39;t work on windows either."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1528273680, "post_id": 50712999, "comment_id": 88439862, "body": "In passing, I recommend that you read and understand <a href=\"/q/605845\">the question on why not to cast the return value of <code>malloc()</code> and family in C</a>."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7654821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K_hluhmW-0w/AAAAAAAAAAI/AAAAAAAAA0o/isMRg-2Ydsw/photo.jpg?sz=128", "display_name": "Subrat Kumar", "link": "https://stackoverflow.com/users/7654821/subrat-kumar"}, "edited": false, "score": 0, "creation_date": 1528264577, "post_id": 50713052, "comment_id": 88435007, "body": "null character is not in str[0] its in str[size+1] i.e str[6]."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1528265146, "post_id": 50713052, "comment_id": 88435207, "body": "The problem isn&#39;t that the OP writes the terminator to <code>str[0]</code>, but rather that <code>str[0]</code> is <i>uninitialized</i>."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1528270340, "post_id": 50713052, "comment_id": 88437934, "body": "And an additional problem is this out-of-bounds write : <code>str[size+1]=&#39;\\0&#39;;</code>"}], "tags": [], "owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "is_accepted": false, "score": 1, "last_activity_date": 1528265084, "last_edit_date": 1528265084, "creation_date": 1528264365, "answer_id": 50713052, "question_id": 50712999, "link": "https://stackoverflow.com/questions/50712999/linux-gcc-not-displaying-string/50713052#50713052", "title": "Linux GCC not displaying string", "body": "<p>Because you have <code>'\\0'</code> inside <code>str[0]</code>. And it is treated as empty string.</p>\n\n<p>You can easily check what is happening there using gdb:</p>\n\n<pre><code>&gt; gdb file\n...\n...\n(gdb) list\n1   #include &lt;stdio.h&gt;\n2   #include&lt;stdlib.h&gt;\n3   #include&lt;string.h&gt;\n4\n5\n6   int main(){\n7     char string[]=\"hello\";\n8     char *str;\n9     int size,i;\n10    size=strlen(string);\n(gdb) list\n11\n12    str=(char*)malloc(size+1);\n13\n14    for(i=0;i&lt;size;i++){\n15          str[size-i]=string[i];//Reversing the string\n16    }\n17    str[size+1]='\\0';\n18    printf(\"%d\\n\",str[0]);\n19    printf(\"The reversed string is %s\\n\",str);//Displaying the reversed string\n20\n(gdb) break 17\nBreakpoint 1 at 0x40063a: file file.c, line 17.\n(gdb) run\n...\n...\nBreakpoint 1, main () at file.c:17\n17    str[size+1]='\\0';\n...\n...\n(gdb) print str\n$1 = 0x602010 \"\"\n(gdb) print str[0]\n$2 = 0 '\\000'\n</code></pre>\n\n<p>Inside your loop, you skip putting value inside <code>str[0]</code>. So, it may happen that region that you have allocated will have <code>str[0]</code> filled with <code>null</code> and your string will be treated as empty.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1528270957, "creation_date": 1528270957, "answer_id": 50714840, "question_id": 50712999, "link": "https://stackoverflow.com/questions/50712999/linux-gcc-not-displaying-string/50714840#50714840", "title": "Linux GCC not displaying string", "body": "<p>Problem is that you are copying wrongly. Remember that indices of letters in a C-string <code>s</code> are from 0 to <code>strlen(s)-1</code> (all included) and that you have ASCII NUL at <code>strlen(s)</code>.\nBut your loop:</p>\n\n<pre><code>for (i=0;i&lt;size;i++){\n   str[size-i]=string[i];\n</code></pre>\n\n<p>fills indices from <code>strlen(string)</code> to 1 (size-(size-1)), thus <code>str[0]</code> is left uninitialized. Then trying to print <code>str</code> leads to <strong>Undefined Behavior</strong>, on many environement, <code>str[0]</code> will be 0 and then make <code>str</code> correspond to the empty string, but this is not guaranteed.</p>\n\n<p>Solution can be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main(){\n  char string[]=\"hello\";\n  char *str;\n  int size,i;\n\n  size=strlen(string);\n  str=(char*)malloc(size+1);\n  for(i=0;i&lt;size;i++){\n    str[size-1-i] = string[i]; // Copying in reverse\n  }\n  str[size]='\\0'; // end of string\n  printf(\"The reversed string is %s\\n\",str); // Displaying the reversed string\n}\n</code></pre>\n\n<p>Note:  you are not reversing the string, you are just building another string that is the reverse of the given one.</p>\n"}], "owner": {"reputation": 15, "user_id": 7654821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K_hluhmW-0w/AAAAAAAAAAI/AAAAAAAAA0o/isMRg-2Ydsw/photo.jpg?sz=128", "display_name": "Subrat Kumar", "link": "https://stackoverflow.com/users/7654821/subrat-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1528270957, "creation_date": 1528264096, "question_id": 50712999, "link": "https://stackoverflow.com/questions/50712999/linux-gcc-not-displaying-string", "title": "Linux GCC not displaying string", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\n\nint main(){\nchar string[]=\"hello\";\nchar *str;\nint size,i;\nsize=strlen(string);\n\nstr=(char*)malloc(size+1);\n\nfor(i=0;i&lt;size;i++){\n    str[size-i]=string[i];//Reversing the string\n}\nstr[size+1]='\\0';\nprintf(\"The reversed string is %s\\n\",str);//Displaying the reversed string\n\n\n}\n</code></pre>\n\n<p>Above code run fine in windows machine with gcc compiler but does not work in linux gcc. Can someone explain why? But when I am prinitng the str by character by character then it shows the output but not as a string.</p>\n"}, {"tags": ["c", "winsock2"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1528263385, "post_id": 50712860, "comment_id": 88434556, "body": "You can use <code>bind</code>."}, {"owner": {"reputation": 13, "user_id": 9901304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yarmouk", "link": "https://stackoverflow.com/users/9901304/yarmouk"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1528263697, "post_id": 50712860, "comment_id": 88434666, "body": "I can use bind to set Address for Server, but with client how can do this?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528267135, "post_id": 50712860, "comment_id": 88436071, "body": "@Yarmouk <code>bind()</code> works the same for both servers and clients. You <code>bind()</code> a server before listening. You can <code>bind()</code> a client before connecting."}, {"owner": {"reputation": 13, "user_id": 9901304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yarmouk", "link": "https://stackoverflow.com/users/9901304/yarmouk"}, "edited": false, "score": 0, "creation_date": 1528268411, "post_id": 50712860, "comment_id": 88436813, "body": "solved! Thanks god you are here!!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9901304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yarmouk", "link": "https://stackoverflow.com/users/9901304/yarmouk"}, "edited": false, "score": 0, "creation_date": 1528268438, "post_id": 50713002, "comment_id": 88436836, "body": "solved! Thanks!!!"}, {"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "reply_to_user": {"reputation": 13, "user_id": 9901304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yarmouk", "link": "https://stackoverflow.com/users/9901304/yarmouk"}, "edited": false, "score": 0, "creation_date": 1528268738, "post_id": 50713002, "comment_id": 88437015, "body": "@Yarmouk Glad it helped. You can <i>accept</i> my answer if it solves your problem. :-)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1528269030, "post_id": 50713002, "comment_id": 88437177, "body": "Rather than fixing te port to 27015, why not just set it to 0?"}, {"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1528269751, "post_id": 50713002, "comment_id": 88437596, "body": "@AnttiHaapala Good point. Updated the answer."}], "tags": [], "owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "is_accepted": true, "score": 2, "last_activity_date": 1528269732, "last_edit_date": 1528269732, "creation_date": 1528264103, "answer_id": 50713002, "question_id": 50712860, "link": "https://stackoverflow.com/questions/50712860/how-to-set-ip-address-for-client-in-c-with-winsock2/50713002#50713002", "title": "How to set IP Address for Client in C with WinSock2", "body": "<p>You can call <code>bind</code> before <code>connect</code>, to give client a specific IP address or port.</p>\n\n<pre><code>sockaddr_in service;\nservice.sin_family = AF_INET;\nservice.sin_addr.s_addr = inet_addr(\"192.168.0.2\"); // bind to specific IP address\nservice.sin_port = 0; // not to specify port number\n\niResult = bind(ListenSocket, (SOCKADDR *) &amp;service, sizeof (service));\n\n// then call connect()...\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9901304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yarmouk", "link": "https://stackoverflow.com/users/9901304/yarmouk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "closed_date": 1528268446, "accepted_answer_id": 50713002, "answer_count": 1, "score": 1, "last_activity_date": 1528269732, "creation_date": 1528263349, "last_edit_date": 1528267227, "question_id": 50712860, "link": "https://stackoverflow.com/questions/50712860/how-to-set-ip-address-for-client-in-c-with-winsock2", "closed_reason": "Duplicate", "title": "How to set IP Address for Client in C with WinSock2", "body": "<p>My computer has 2 IP addresses for 2 Ethernet cards. <code>192.168.0.1</code> is a server, but how to set <code>192.168.0.2</code> as client in <code>C</code> with <code>winsock2</code>. By default client is always <code>192.168.0.1</code>.</p>\n"}, {"tags": ["c", "ocaml"], "comments": [{"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1528355216, "post_id": 50712852, "comment_id": 88477595, "body": "Are string literals even allocated on the heap? I imagine the &quot;a&quot; is simply in the programs data section and not managed dynamically at all."}], "answers": [{"comments": [{"owner": {"reputation": 28350, "user_id": 2625442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a48a497d3aae41354bc1189d57db2c3?s=128&d=identicon&r=PG", "display_name": "ivg", "link": "https://stackoverflow.com/users/2625442/ivg"}, "edited": false, "score": 0, "creation_date": 1528292795, "post_id": 50713221, "comment_id": 88452476, "body": "ProTip: it is more efficient to use <code>caml_register_generational_global_root</code> provided that you&#39;re taking the responsibility to modify the value only via the <code>caml_modify_generational_global_root</code> function."}, {"owner": {"reputation": 57265, "user_id": 821679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f564c4721ee3125fa835f6c3a5283c?s=128&d=identicon&r=PG", "display_name": "Jeffrey Scofield", "link": "https://stackoverflow.com/users/821679/jeffrey-scofield"}, "reply_to_user": {"reputation": 28350, "user_id": 2625442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a48a497d3aae41354bc1189d57db2c3?s=128&d=identicon&r=PG", "display_name": "ivg", "link": "https://stackoverflow.com/users/2625442/ivg"}, "edited": false, "score": 0, "creation_date": 1528300651, "post_id": 50713221, "comment_id": 88457784, "body": "Yes, by all means read Section 19.5 if you&#39;re going to use these constructs in real code :-)"}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1528308170, "post_id": 50713221, "comment_id": 88461809, "body": "Does marking the root as global prevent the GC from moving it?"}, {"owner": {"reputation": 57265, "user_id": 821679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f564c4721ee3125fa835f6c3a5283c?s=128&d=identicon&r=PG", "display_name": "Jeffrey Scofield", "link": "https://stackoverflow.com/users/821679/jeffrey-scofield"}, "edited": false, "score": 0, "creation_date": 1528308650, "post_id": 50713221, "comment_id": 88462046, "body": "The thing that is marked is <code>data</code> (in this example). Obviously it can&#39;t be moved itself. The contents of <code>data</code> (the OCaml value) might easily be changed. So I think the short answer is no."}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1528340052, "post_id": 50713221, "comment_id": 88472446, "body": "@JeffreyScofield ... so when a compaction occurs, can the contents of <code>data</code> in C either a) become dangling or b) get changed by the OCaml runtime? <code>b</code> seems tolerable, but <code>a</code> seems scary."}, {"owner": {"reputation": 57265, "user_id": 821679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f564c4721ee3125fa835f6c3a5283c?s=128&d=identicon&r=PG", "display_name": "Jeffrey Scofield", "link": "https://stackoverflow.com/users/821679/jeffrey-scofield"}, "edited": false, "score": 0, "creation_date": 1528348662, "post_id": 50713221, "comment_id": 88474543, "body": "The contents of <code>data</code> will be changed, yes. The contents will not become dangling! That&#39;s the point of declaring <code>data</code> as a GC root. The GC will keep the value in <code>data</code> up to date with the latest state of the heap as objects are moved around etc."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1528355499, "post_id": 50713221, "comment_id": 88477735, "body": "Note that implies that you can not read out data after releasing the runtime lock and have to read out data again every time the GC might have run (like after allocating a new ocaml value). Not in this simple example but beware of it when you write more complex functions."}, {"owner": {"reputation": 57265, "user_id": 821679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f564c4721ee3125fa835f6c3a5283c?s=128&d=identicon&r=PG", "display_name": "Jeffrey Scofield", "link": "https://stackoverflow.com/users/821679/jeffrey-scofield"}, "edited": false, "score": 0, "creation_date": 1528390900, "post_id": 50713221, "comment_id": 88500826, "body": "(Threading issues are discussed in <a href=\"https://caml.inria.fr/pub/docs/manual-ocaml-4.05/intfc.html#sec453\" rel=\"nofollow noreferrer\">Section 19.11 of the OCaml manual</a>.)"}], "tags": [], "owner": {"reputation": 57265, "user_id": 821679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f564c4721ee3125fa835f6c3a5283c?s=128&d=identicon&r=PG", "display_name": "Jeffrey Scofield", "link": "https://stackoverflow.com/users/821679/jeffrey-scofield"}, "is_accepted": true, "score": 4, "last_activity_date": 1528265552, "last_edit_date": 1528265552, "creation_date": 1528265251, "answer_id": 50713221, "question_id": 50712852, "link": "https://stackoverflow.com/questions/50712852/keep-an-ocaml-value-alive-forever-off-heap-intentionally-leak-ocaml-value/50713221#50713221", "title": "Keep an OCaml value alive forever off heap / intentionally leak OCaml value", "body": "<p>There's virtually no reuse of memory going on in your small program, so I guess the string  \"a\" still looks the same after the garbage collection, even if it's not referenced by anything.</p>\n\n<p>If you call GC every time, it just returns things to a well-ordered state. It would be better to let the GC happen normally, which will run through many more possible memory states.</p>\n\n<p>You also have to do some looping to give it time to fail.</p>\n\n<p>A slightly modified version of your code does in fact segfault for me:</p>\n\n<pre><code>external make_string : string -&gt; unit = \"make_string\"\nexternal get_string : unit -&gt; string = \"get_string\"\n\nlet () =\n    while true do\n        let a = String.make (1024 * 1024) 'a' in\n        make_string a;\n        let b = String.make (1024 * 1024) 'b' in\n        Printf.printf \"%s %s\\n\" (get_string ()) b\n    done\n</code></pre>\n\n<p>The way to mark a value as a GC root is with <code>caml_register_global_root</code></p>\n\n<pre><code>caml_register_global_root(&amp;data);\n</code></pre>\n\n<p>Just as you expected, if I call this under <code>if (data == 0) {</code> there is no segfault.</p>\n\n<p>This is documented in <a href=\"https://caml.inria.fr/pub/docs/manual-ocaml-4.05/intfc.html#sec423\" rel=\"nofollow noreferrer\">Section 19.5 of the OCaml manual</a>.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 50713221, "answer_count": 1, "score": 2, "last_activity_date": 1528265552, "creation_date": 1528263274, "question_id": 50712852, "link": "https://stackoverflow.com/questions/50712852/keep-an-ocaml-value-alive-forever-off-heap-intentionally-leak-ocaml-value", "title": "Keep an OCaml value alive forever off heap / intentionally leak OCaml value", "body": "<p>What do you need to do to allocate an immortal OCaml object off-heap in a C function? In particular, how do you make an OCaml value that looks to the runtime like a global variable in OCaml source code would.</p>\n\n<p>Here is my attempt at producing an intentionally broken program that neglects to register a value as a GC root.</p>\n\n<p>Here's the OCaml source file driving everything.</p>\n\n<pre><code>(* immortal_string.ml *)\n\nexternal make_string : string -&gt; unit = \"make_string\"\nexternal get_string : unit -&gt; string = \"get_string\"\n\nlet () = make_string \"a\"\nlet () = Gc.full_major ()\nlet () = Printf.printf \"%s\\n\" (get_string ())\n</code></pre>\n\n<p>And the C implementation. There are probably better ways to do this than using <code>0</code> as a sentinel value and a function static, but I think the intent is clear. Note that multiple calls to <code>make_string</code> will clobber the value that was originally there, but that's okay. I want the memory pointed to by old values to be reclaimed by the garbage collector.</p>\n\n<pre><code>// lib_immortal_string.c\n\n#include &lt;caml/mlvalues.h&gt;\n#include &lt;caml/memory.h&gt;\n#include &lt;caml/alloc.h&gt;\n\nvalue *storage(void) {\n    // BAD! we haven't registered this thing\n    // as a GC root. No clue how you do that.\n    static value data = 0; // sentinel, will never be valid OCaml value\n    if (data == 0) {\n        data = caml_copy_string(\"\");\n    }\n    return &amp;data;\n}\n\nCAMLprim value\nmake_string(value ml_string) {\n    CAMLparam1(ml_string);\n    *storage() = ml_string;\n    CAMLreturn(Val_unit);\n}\n\nCAMLprim value\nget_string(value ml_unit) {\n    CAMLparam1(ml_unit);\n    CAMLreturn(*storage());\n}\n</code></pre>\n\n<p>I was expecting this program to segfault since there's nothing obvious keeping <code>data</code> in the <code>storage</code> function alive. <code>data</code> is not global and isn't on the stack. However, the program <em>appears</em> to run without reclaiming the string.</p>\n\n<pre><code>$ ocamlopt immortal_string.ml lib_immortal_string.c\n./a.out\na\n</code></pre>\n\n<p>So my question is, what is the proper way to make a global OCaml value / off-heap thing? And, furthermore, why does the above program appear to work instead of crashing?</p>\n"}, {"tags": ["c", "warnings"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1528262657, "post_id": 50712577, "comment_id": 88434339, "body": "<code>suffix</code> is a pointer,, so <code>sizeof(suffix)</code> is going to be probably 4 or 8 depending on your machine architecture. You most likely want the length of the string pointed to by <code>suffix</code>, or the size of the memory chunk it&#39;s pointing to (which you&#39;ll have to separately keep track of). Also, be careful with <code>strncpy</code>, it&#39;s not guaranteed to NUL terminate your destination string."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1528262816, "post_id": 50712577, "comment_id": 88434390, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12659486/what-does-sizeof-functionargument-return\">What does sizeof (function(argument)) return?</a>"}, {"owner": {"reputation": 73, "user_id": 9292431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12ce6ad11c41e7dba9d04cde5b6e32c?s=128&d=identicon&r=PG&f=1", "display_name": "himsikha", "link": "https://stackoverflow.com/users/9292431/himsikha"}, "edited": false, "score": 0, "creation_date": 1528262872, "post_id": 50712577, "comment_id": 88434406, "body": "Then i changed to strlen(suffix)."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1528263200, "post_id": 50712577, "comment_id": 88434507, "body": "@himsikha do you know what strncpy actually does? because that is not a very useful thing to do"}, {"owner": {"reputation": 73, "user_id": 9292431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12ce6ad11c41e7dba9d04cde5b6e32c?s=128&d=identicon&r=PG&f=1", "display_name": "himsikha", "link": "https://stackoverflow.com/users/9292431/himsikha"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1528263551, "post_id": 50712577, "comment_id": 88434618, "body": "@immibis strncpy will copy some bytes from source to destination."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1528266958, "post_id": 50712577, "comment_id": 88435981, "body": "If you use <code>strlen(suffix)</code> the result will be the same as using <code>strcpy</code>, which I&#39;m sure you are not using because someone said it is unsafe. The size is supposed to be the size of the target, to guard against overflowing it."}, {"owner": {"reputation": 73, "user_id": 9292431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12ce6ad11c41e7dba9d04cde5b6e32c?s=128&d=identicon&r=PG&f=1", "display_name": "himsikha", "link": "https://stackoverflow.com/users/9292431/himsikha"}, "edited": false, "score": 0, "creation_date": 1528267645, "post_id": 50712577, "comment_id": 88436316, "body": "its solved now,i changed to  sizeof(dest) instead of sizeof(src)."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1528273805, "post_id": 50712577, "comment_id": 88439939, "body": "If <code>dest</code> is the destination <i>array</i> and not a pointer, it should work."}, {"owner": {"reputation": 73, "user_id": 9292431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12ce6ad11c41e7dba9d04cde5b6e32c?s=128&d=identicon&r=PG&f=1", "display_name": "himsikha", "link": "https://stackoverflow.com/users/9292431/himsikha"}, "edited": false, "score": 0, "creation_date": 1528279975, "post_id": 50712577, "comment_id": 88444003, "body": "yeah,its working now."}], "owner": {"reputation": 73, "user_id": 9292431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d12ce6ad11c41e7dba9d04cde5b6e32c?s=128&d=identicon&r=PG&f=1", "display_name": "himsikha", "link": "https://stackoverflow.com/users/9292431/himsikha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1034, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528263479, "creation_date": 1528261565, "last_edit_date": 1528263479, "question_id": 50712577, "link": "https://stackoverflow.com/questions/50712577/warningargument-to-sizeof-werror-sizeof-pointer-memaccess", "title": "Warning:argument to &#39;sizeof&#39; [-Werror=sizeof-pointer-memaccess]", "body": "<p>I am  getting  the below warning while compiling with gcc4.8.5  : </p>\n\n<pre><code>Boolean_t bsnap_isFileExtensionValid (const char *suffix)\n{\n    .......\n    .......\n    ......... \n\n    strncpy (gbsnapSuffix, suffix,/*sizeof MAXPATHLEN*/(suffix ));\n\n}\n\n\n warning: argument to 'sizeof' in 'char* strncpy(char*, const char*, size_t)' call is the same expression as the source; did you mean to provide an explicit length? [-Werror=sizeof-pointer-memaccess]\n         strncpy (gbsnapSuffix, suffix,sizeof(suffix ));\n</code></pre>\n\n<p>How to solve this type of warning?\nDo i need to  disable the compilation option?</p>\n"}, {"tags": ["c++", "c", "popen", "compression"], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 2641059, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/jwT48.jpg?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/2641059/naman"}, "edited": false, "score": 0, "creation_date": 1528291444, "post_id": 50712624, "comment_id": 88451477, "body": "pclose() will close the file stream as well. How would I check it without closing the stream. If everything went well, I will still be closing the stream to check for any failure."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 881, "user_id": 2641059, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/jwT48.jpg?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/2641059/naman"}, "edited": false, "score": 0, "creation_date": 1528303927, "post_id": 50712624, "comment_id": 88459506, "body": "Just keep reading from the stream until the EOF. Then call pclose."}, {"owner": {"reputation": 881, "user_id": 2641059, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/jwT48.jpg?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/2641059/naman"}, "edited": false, "score": 0, "creation_date": 1528697448, "post_id": 50712624, "comment_id": 88588659, "body": "I used pclose() as suggested. But I am getting errno = ECHILD  for some of the cases. Can you please suggest what could be wrong here."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 881, "user_id": 2641059, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/jwT48.jpg?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/2641059/naman"}, "edited": false, "score": 0, "creation_date": 1528740234, "post_id": 50712624, "comment_id": 88613186, "body": "That&#39;s exactly the sign of a crash. See <a href=\"https://linux.die.net/man/3/pclose\" rel=\"nofollow noreferrer\">linux.die.net/man/3/pclose</a>"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1528261865, "creation_date": 1528261865, "answer_id": 50712624, "question_id": 50712525, "link": "https://stackoverflow.com/questions/50712525/check-for-error-in-command-passed-to-popen-api-in-cpp/50712624#50712624", "title": "Check for error in command passed to popen API in cpp", "body": "<p>When a process terminates normally, it is expected to return the exit code of 0 (legally, <code>EXIT_SUCCESS</code>) to the parent. Otherwise, in the case of a crash or any other abnormal termination, a non-zero value is expected to be returned. You can obtain the exit code by calling <code>pclose()</code>. If the code is 0, the child process most probably terminated successfully.</p>\n"}], "owner": {"reputation": 881, "user_id": 2641059, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/jwT48.jpg?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/2641059/naman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1528261865, "creation_date": 1528261126, "question_id": 50712525, "link": "https://stackoverflow.com/questions/50712525/check-for-error-in-command-passed-to-popen-api-in-cpp", "title": "Check for error in command passed to popen API in cpp", "body": "<p>There is a cpp application where I want to read following type of compressed file-</p>\n\n<ol>\n<li>file_name.gz</li>\n<li>file_name.Z</li>\n<li>file_name.tar.gz</li>\n</ol>\n\n<p>For this purpose, I check the file extension and choose decompression technique accordingly. E.g. file_name.gz will be decompressed using \"gunzip -C file_name.gz\".</p>\n\n<p>I want to get the FILE handle for decompressed file. I use popen() API for it. Now, there might be a case where gunzip/uncompress/tar fails while decompressing the file due to memory issues. How do I capture the failure in my CPP application. There is way to check if popen failed or not. What about command passed to popen(). </p>\n\n<p>Please help. I tried to find it at various places but could not get satisfactory solution. </p>\n"}, {"tags": ["c", "for-loop", "multidimensional-array", "input", "char"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1528261106, "post_id": 50712420, "comment_id": 88433841, "body": "You used too many newlines and printed the sublines in the wrong order."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1528261124, "post_id": 50712420, "comment_id": 88433848, "body": "First, do not <i>ever</i> use <code>gets</code>. Use <code>fgets</code> instead. Second, the output in your question was not produced by your code. You code does not call any functions for printing strings. Please add the real code to your question."}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1528479123, "post_id": 50712420, "comment_id": 88539056, "body": "Thank you point it out. I did not call any functions for printing strings. The ***  are the input, and the number(1,2,3) is the value of i I output.As Mr.Jo&#235;l says, it might depends on the compiler and the OS."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1528478909, "post_id": 50712765, "comment_id": 88538971, "body": "So, the size of character string I declared was [5][3]. So, if I reads 3 chars, it stores 4 chars in memory, I guess it is fine right? Since size of [3] means 0,1,2,3, which is size of 4."}, {"owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "reply_to_user": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1528494352, "post_id": 50712765, "comment_id": 88544981, "body": "No, that&#39;s no that. What I meant is : when <code>gets</code> read the three chars &quot;***&quot;, it stores &quot;***\\0&quot; in memory : it adds the zero ending string character. Since your array is only 3 chars sized, it&#39;ll make a memory overflow because of the fourth character."}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1528930051, "post_id": 50712765, "comment_id": 88698102, "body": "So, I input shape of &#39;0&#39; ( as new update above ) , and then did &quot;printf(&quot;%d\\n&quot;,strcmp(code[1],code[2]));     printf(&quot;%d\\n&quot;,strcmp(code[2],code[3]));&quot;"}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1528930161, "post_id": 50712765, "comment_id": 88698138, "body": "The result is -1 and -1 instead of 0 and 0. So, is it mean I cannot compare two lines like this;"}, {"owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "reply_to_user": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1528954371, "post_id": 50712765, "comment_id": 88703118, "body": "You have to use the  <code>strncmp</code> or <code>memcmp</code> functions for comparisons : <code>strncmp(code[1], code[2], 3)</code> or <code>memcmp(code[1], code[2], 3)</code>"}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1528990653, "post_id": 50712765, "comment_id": 88724918, "body": "Thank you, it worked! But for strcmp, it will stop before the new line character. In this case,strcmp does not work. Does it mean that the new line character got is not at the end of string because of the using of memcpy? I could not find out the why the strcmp does not work."}, {"owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "reply_to_user": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1529040021, "post_id": 50712765, "comment_id": 88740639, "body": "<code>strcmp</code> stops at the end string <code>\\0</code> character, not the newline <code>\\n</code>. In your array, there&#39;s no newline and no string ending characters beczuse of <code>memcpy</code> as you guessed ; there&#39;s only spaces and &#39;*&#39;. And without <code>\\0</code>, <code>strcmp</code> can&#39;t work."}], "tags": [], "owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "is_accepted": true, "score": 1, "last_activity_date": 1528262716, "creation_date": 1528262716, "answer_id": 50712765, "question_id": 50712420, "link": "https://stackoverflow.com/questions/50712420/how-can-i-initialize-2d-char-array-with-space-in-c/50712765#50712765", "title": "How can I initialize 2D char array with space in c", "body": "<p>I can't reproduce the problem with the code you gave, it must depends of the compiler and the OS it is running on.</p>\n\n<p>BUT: there's at least something wrong this code : when <code>gets</code> reads 3 chars, it stores 4 chars in memory because of the ending <code>\\0</code> added in the end. So you shouldn't read directly in the <code>code</code> array ; just read in another longer buffer and <code>memcpy</code> only 3 chars in the array.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\nint main(){\n    char code[5][3];\n    char line[100];\n    int i;\n    for(i = 0; i &lt; 5; i++){\n        fgets(line, sizeof line - 1, stdin);\n        memcpy(code[i], line, 3);\n        printf(\"%d\\n\",i);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 50712765, "answer_count": 1, "score": 0, "last_activity_date": 1528929886, "creation_date": 1528260472, "last_edit_date": 1528929886, "question_id": 50712420, "link": "https://stackoverflow.com/questions/50712420/how-can-i-initialize-2d-char-array-with-space-in-c", "title": "How can I initialize 2D char array with space in c", "body": "<p>I am doing a algorithm practice. Basically, the test case will input the shape of a number in several 3*5 matrix, and we need to get the number that the shape represents.</p>\n\n<p>the input(test case) will look like this, which represents 0123456789):\n<a href=\"https://i.stack.imgur.com/ts1pu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ts1pu.png\" alt=\"0123456789\"></a> </p>\n\n<p>So, I have created a 3*5 matrix\uff0cand I input some starts just for testing.\nHowever, it did not work that well.</p>\n\n<p>Since there is space in the input, so I assume that scanf will not work. I am using gets, for every row. </p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;string.h&gt;\n    int main(){\n       char code[5][3];\n       int i;\n       for(i = 0; i &lt; 5; i++){\n          gets(code[i]);\n          printf(\"%d\\n\",i);\n       }\n    }\n</code></pre>\n\n<p>So, if I run this code, I could not get out of the loop because i value never go over 3. i value does increment until 3 and then back to 0.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bubKW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bubKW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can someone tell me what is happening here?</p>\n\n<p>new update:\n<a href=\"https://i.stack.imgur.com/Q8p3g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q8p3g.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "linux", "gdb", "coredump"], "comments": [{"owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "edited": false, "score": 2, "creation_date": 1528259780, "post_id": 50712275, "comment_id": 88433465, "body": "Take the directory you found <code>gc_hal_kernel_hardware.c</code> in and use it in the <code>dir</code> command directly in GDB like so: <code>dir theDirectory</code>"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1528281227, "post_id": 50712275, "comment_id": 88444791, "body": "Run the gdb <code>bt</code> command and look at the part of the stack that includes code that you wrote (or that you&#39;re in a position to fix)."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1528262285, "last_edit_date": 1528262285, "creation_date": 1528259748, "answer_id": 50712323, "question_id": 50712275, "link": "https://stackoverflow.com/questions/50712275/analyzing-segmentation-fault-core-dump-gdb/50712323#50712323", "title": "Analyzing Segmentation fault Core Dump (gdb)", "body": "<p>Read <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">documentation of <code>gdb</code></a>, notably <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Source-Path.html\" rel=\"nofollow noreferrer\">9.5 Specifying Source Directories</a>. Since you have a <code>core</code> dump it is some <a href=\"https://en.wikipedia.org/wiki/User_space\" rel=\"nofollow noreferrer\">user-space</a> application which crashes (not the <a href=\"https://en.wikipedia.org/wiki/Kernel_(operating_system)\" rel=\"nofollow noreferrer\">kernel</a>; the kernel is supposed to never crash, and when it unfortunately does, you could have a frozen system). See also <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a>. Your <code>gc_hal_user_texture.c</code> belongs to that crashing <a href=\"https://en.wikipedia.org/wiki/Application_software\" rel=\"nofollow noreferrer\">application</a>, or to some <a href=\"https://en.wikipedia.org/wiki/Library_(computing)\" rel=\"nofollow noreferrer\">library</a> used by it.</p>\n\n<p>You might use <a href=\"http://man7.org/linux/man-pages/man1/file.1.html\" rel=\"nofollow noreferrer\">file(1)</a> to find out which program produces that <code>core</code>. Run <code>file core</code>. See also <a href=\"http://man7.org/linux/man-pages/man5/core.5.html\" rel=\"nofollow noreferrer\">core(5)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a>.</p>\n\n<p>Be sure to <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">compile</a> that program with <a href=\"https://en.wikipedia.org/wiki/DWARF\" rel=\"nofollow noreferrer\">DWARF</a> debug info and all warnings, so <code>gcc -g -Wall -Wextra</code></p>\n\n<p>Read <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating Systems: Three Easy Pieces</em></a> to understand the principles (and difference between user-space code and operating system kernel code).</p>\n\n<blockquote>\n  <p>But I couldn't find those file in the above Linux-boundary 4.1.15 kernel build. What are they referring to? </p>\n</blockquote>\n\n<p>These <code>gc_hal_user_texture.c</code> ... <code>src/glcore/gc_es_api.c</code> files refer to some application or library source code (of course they are not kernel source files).</p>\n"}], "owner": {"reputation": 51, "user_id": 6803006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81a9ebd84a31ed4ba0de8cadbbec30b2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter_Amond", "link": "https://stackoverflow.com/users/6803006/peter-amond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1844, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528262285, "creation_date": 1528259457, "last_edit_date": 1528261409, "question_id": 50712275, "link": "https://stackoverflow.com/questions/50712275/analyzing-segmentation-fault-core-dump-gdb", "title": "Analyzing Segmentation fault Core Dump (gdb)", "body": "<p>I am getting following segmentation faults while running a Linux based application on imax6q custom hardware design. I backtraced the core dump using Linux GDB and following you can see those core dumps. </p>\n\n<p>The kernel I'm using - Linux-boundary 4.1.15</p>\n\n<p>Seg fault Core dump 1</p>\n\n<pre><code>Program terminated with signal SIGSEGV, Segmentation fault.\n#0 gcoTEXTURE_BindTextureEx (Texture=0x263c6c4, Target=Target@entry=0, \nSampler=1, Sampler@entry=0, Info=Info@entry=0x23f0708, \ntextureLayer=textureLayer@entry=0)\nat gc_hal_user_texture.c:3804\n3804 gc_hal_user_texture.c: No such file or directory.\n</code></pre>\n\n<p>Seg fault Core dump 2</p>\n\n<pre><code>Program terminated with signal SIGSEGV, Segmentation fault.\n#0 _SetFenceCtx (fence=0x5c30d6c, head=0x5c2ab74) at \ngc_hal_user_hardware.c:5752\n5752 gc_hal_user_hardware.c: No such file or directory.\n</code></pre>\n\n<p>1) Those core dumps are directed to following source files. But I couldn't find those file in the above Linux-boundary 4.1.15 kernel build. What are they referring to? To overcome this problem what do you suggest?</p>\n\n<pre><code>gc_hal_user_texture.c\ngc_hal_user_hardware.c\nsrc/glcore/gc_es_draw.c:943\nsrc/glcore/gc_es_api.c:399\n</code></pre>\n\n<p>2) I could find a file called gc_hal_kernel_hardware.c in my kernel build. So is this the file the gdb back traced log is pointing out? Do you have any idea of this kind of segmentation faults?</p>\n"}, {"tags": ["c", "parsing", "linked-list", "insert"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1528258322, "post_id": 50712115, "comment_id": 88433102, "body": "You have been a member for a couple of years, with a few questions asked. You should know better than to ask this type of &quot;question&quot;. Please re-read <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a> and how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>. I also recommend <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this SO question checklist</a>. And of course that you read all of <a href=\"http://idownvotedbecau.se/\" rel=\"nofollow noreferrer\">idownvotedbecau.se</a>."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1528258682, "post_id": 50712115, "comment_id": 88433185, "body": "And there are multiple branches from node A. That make it at least a tree."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1528259230, "post_id": 50712240, "comment_id": 88433323, "body": "You are aware of that the question is tagged with C and not C++?"}, {"owner": {"reputation": 11, "user_id": 9900983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49918ca31ecd344162adab421b8e577?s=128&d=identicon&r=PG&f=1", "display_name": "Lifebot", "link": "https://stackoverflow.com/users/9900983/lifebot"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528259405, "post_id": 50712240, "comment_id": 88433375, "body": "I just wanted to give him a rough idea of what to do so I guess it doesn&#39;t matter as c and c++ are quite similar. Moreover, I don&#39;t know the sysntax of c very well."}, {"owner": {"reputation": 101, "user_id": 5695111, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b70842cbe990fb0eac8ddc1ef5c834bb?s=128&d=identicon&r=PG&f=1", "display_name": "user5695111", "link": "https://stackoverflow.com/users/5695111/user5695111"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528259868, "post_id": 50712240, "comment_id": 88433481, "body": "@Someprogrammerdude yes, this is C project."}], "tags": [], "owner": {"reputation": 11, "user_id": 9900983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49918ca31ecd344162adab421b8e577?s=128&d=identicon&r=PG&f=1", "display_name": "Lifebot", "link": "https://stackoverflow.com/users/9900983/lifebot"}, "is_accepted": false, "score": 1, "last_activity_date": 1528259119, "creation_date": 1528259119, "answer_id": 50712240, "question_id": 50712115, "link": "https://stackoverflow.com/questions/50712115/parsing-code-and-insert-them-into-linked-list-in-c/50712240#50712240", "title": "Parsing code and insert them into Linked List in C", "body": "<p>It would be better to make a node class which will have a vector of edges where edges would be another class with the origin node, dest node, and cost. i.e</p>\n\n<p><code>class edge\n{\n    public:\n        node* Origin;\n        node* Dest;\n        float cost;\n};</code></p>\n\n<p>And</p>\n\n<pre><code>class node\n{\n  public:\n    int value;\n    node *next;\n    node *prev;\n    vector&lt;edge&gt; edges; // edges connected to node\n};\n</code></pre>\n\n<p>Modify the classes according to your needs. Hope that helps!!</p>\n"}], "owner": {"reputation": 101, "user_id": 5695111, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b70842cbe990fb0eac8ddc1ef5c834bb?s=128&d=identicon&r=PG&f=1", "display_name": "user5695111", "link": "https://stackoverflow.com/users/5695111/user5695111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "closed_date": 1528280400, "answer_count": 1, "score": -1, "last_activity_date": 1528259119, "creation_date": 1528258004, "question_id": 50712115, "link": "https://stackoverflow.com/questions/50712115/parsing-code-and-insert-them-into-linked-list-in-c", "closed_reason": "Needs more focus", "title": "Parsing code and insert them into Linked List in C", "body": "<p>How can I create Linked List with node and cost also edge? \n<br> I have this code statement and I need to parse it like  <strong>node:A to node:B cost 10, node:A to node:F cost 6</strong>.\n<br>After I need to insert these variable inside the Link List</p>\n\n<pre><code>   char* getEdges()\n{\nreturn \"A_B_10,A_F_6, B_C_6,C_B,10,D_A_3,E_B_5,F_B_10,G_G_0\";\n}\n</code></pre>\n\n<p><br> Thanks for all response.</p>\n"}, {"tags": ["c", "compilation", "int", "preprocessor", "unsigned"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528257107, "post_id": 50711975, "comment_id": 88432786, "body": "<code>0b00001</code> is not standard C, try <code>1</code>."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1528257205, "post_id": 50711975, "comment_id": 88432808, "body": "Where are the preprocessor directives? I mean, which part is handled by the preprocessor?"}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528257241, "post_id": 50711975, "comment_id": 88432816, "body": "@chux gcc seems to be okay with it. Apparently an extension."}, {"owner": {"reputation": 11, "user_id": 4030423, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l1JI-i4f7v8/AAAAAAAAAAI/AAAAAAAAAmg/-7EhVuw-vzY/photo.jpg?sz=128", "display_name": "Rohan Chitnis", "link": "https://stackoverflow.com/users/4030423/rohan-chitnis"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528257287, "post_id": 50711975, "comment_id": 88432826, "body": "@chux do you mean to say unsigned int x = 1; ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528257355, "post_id": 50711975, "comment_id": 88432850, "body": "Yes. Try <code>x=1; y = 2; z = 4;</code>"}, {"owner": {"reputation": 11, "user_id": 4030423, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l1JI-i4f7v8/AAAAAAAAAAI/AAAAAAAAAmg/-7EhVuw-vzY/photo.jpg?sz=128", "display_name": "Rohan Chitnis", "link": "https://stackoverflow.com/users/4030423/rohan-chitnis"}, "edited": false, "score": 0, "creation_date": 1528257400, "post_id": 50711975, "comment_id": 88432865, "body": "that works fine. But I want to do something like show them in binary."}, {"owner": {"reputation": 11, "user_id": 4030423, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l1JI-i4f7v8/AAAAAAAAAAI/AAAAAAAAAmg/-7EhVuw-vzY/photo.jpg?sz=128", "display_name": "Rohan Chitnis", "link": "https://stackoverflow.com/users/4030423/rohan-chitnis"}, "edited": false, "score": 0, "creation_date": 1528257437, "post_id": 50711975, "comment_id": 88432873, "body": "can you please check this. <a href=\"https://www.tutorialspoint.com/cprogramming/c_bitwise_operators.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_bitwise_operators.htm</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1528257997, "post_id": 50711975, "comment_id": 88433012, "body": "@RohanChitnis Then use non-standard C or <code>enum bit { B00000, B00001, B00010, B00011, B00100 };</code> or the like.  There are no binary integer constants in standard C."}], "owner": {"reputation": 11, "user_id": 4030423, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l1JI-i4f7v8/AAAAAAAAAAI/AAAAAAAAAmg/-7EhVuw-vzY/photo.jpg?sz=128", "display_name": "Rohan Chitnis", "link": "https://stackoverflow.com/users/4030423/rohan-chitnis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1528258212, "answer_count": 0, "score": 1, "last_activity_date": 1528258151, "creation_date": 1528256749, "last_edit_date": 1528258151, "question_id": 50711975, "link": "https://stackoverflow.com/questions/50711975/preprocessor-giving-compilation-while-declaring-unsigned-int-x-and-initializing", "closed_reason": "Duplicate", "title": "Preprocessor giving compilation while declaring unsigned int x and initializing with a binary constant", "body": "<p>I am getting error in Pro* C pre-compilation when I have declared the variables as </p>\n\n<pre><code>unsigned int x = 0b00001;\nunsigned int y = 0b00010;\nunsigned int z = 0b00100;\n</code></pre>\n\n<p>When the pre-compilation happens in pro*c , error is </p>\n\n<pre><code>    ....................1\n    PCC-S-02201, Encountered the symbol \"B00001\" when expecting one of the following\n    :\n\n       ; , = ( [ * ? | &amp; &lt; &gt; + - / % . ^ *= /= %= += -= &lt;&lt;= &gt;&gt;= &amp;&amp;=\n       ||= ^= | &amp; == != &lt;= &gt;= &lt;&lt; &gt;&gt; ++ -- -&gt;\n    The symbol \";\" was substituted for \"B00001\" to continue.\n\n    GCC version is \n    gcc version 4.4.7 20120313 (Red Hat 4.4.7-18) (GCC)`enter code here`\n</code></pre>\n\n<p>When I try to run this code as a normal C code in a different file, it works just fine.  The issue only occurs while running a pro*c code.</p>\n\n<p>So, I want to understand what the exact problem is when a proc code is compiled and why no problem when C code compiles.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 119, "user_id": 7823546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/AWsOy.jpg?s=128&g=1", "display_name": "Noam Hudson", "link": "https://stackoverflow.com/users/7823546/noam-hudson"}, "reply_to_user": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1528256579, "post_id": 50711907, "comment_id": 88432677, "body": "Thanks. That solves it. Just thought maybe even though the field was the same type I would have to use the first syntax because the first struct was a pointer.. But clearly not!"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1528256635, "post_id": 50711907, "comment_id": 88432684, "body": "@txtechhelp: The first version is simply invalid. It is illegal to assign pointer values to integer objects in C."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1528256721, "post_id": 50711907, "comment_id": 88432703, "body": "@J...S: Considering that many modern C compilers have rather loose error checking and allow implicit pointer-to-integer conversions (with a mere warning), it is quite possible that both versions &quot;worked&quot; (i.e. at least &quot;compiled&quot;)."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 3908057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2144a81ff8226e80a656af060546a4cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Meyer", "link": "https://stackoverflow.com/users/3908057/nick-meyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1528258233, "last_edit_date": 1528258233, "creation_date": 1528256794, "answer_id": 50711983, "question_id": 50711907, "link": "https://stackoverflow.com/questions/50711907/small-c-pointer-issue/50711983#50711983", "title": "Small C pointer issue", "body": "<p>In C, a pointer is used to reference the address of the object in memory:</p>\n\n<pre><code>int *pointerToFirstIndexOfArray = users[0]; // The int * value now points to the location in memory\n</code></pre>\n\n<p>One uses the &amp; value to grab the actual <em>value</em> of the address in memory, rather than just where the location is:</p>\n\n<pre><code>int a = 0;\nint &amp;b = a; // B is now a reference to A, since B is literally the address in memory of where A is located\n</code></pre>\n\n<p>Lastly, using -> is the shorthand notation of (*).:</p>\n\n<pre><code>(*users[i]).valueInsideUserStruct = someValue; // these statements are equal\nusers[i]-&gt;valueInsideUserStruct = someValue; // these statements are equal\n</code></pre>\n\n<p>C does this because it is easier to read var->val rather than (*var).val </p>\n\n<p>To answer your question, the first code you posted only changes the value <em>to the address</em> (the operator &amp; literally returns the address), while the second code you posted actually changes the value to the value <em>at the address</em>.</p>\n"}], "owner": {"reputation": 119, "user_id": 7823546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/AWsOy.jpg?s=128&g=1", "display_name": "Noam Hudson", "link": "https://stackoverflow.com/users/7823546/noam-hudson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528258233, "creation_date": 1528256228, "question_id": 50711907, "link": "https://stackoverflow.com/questions/50711907/small-c-pointer-issue", "title": "Small C pointer issue", "body": "<p>Will this set the user_id (which is an 'int' field (i.e. non-pointer)) in the (pointer to a) struct nodes[i] to have the value equal to the user_id in the struct users[i]?</p>\n\n<pre><code>nodes[i]-&gt;user_id = &amp;users[i].user_id;\n</code></pre>\n\n<p>Or does this syntax work?</p>\n\n<pre><code>nodes[i]-&gt;user_id = users[i].user_id;\n</code></pre>\n\n<p>Clearly, I'm a bit confused about whether the left side is a pointer or a value here.</p>\n"}, {"tags": ["c", "pointers", "struct", "segmentation-fault"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1528255755, "post_id": 50711717, "comment_id": 88432525, "body": "Just what do you think <code>ret_result-&gt;elements[100];</code> does?"}], "answers": [{"tags": [], "owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "is_accepted": true, "score": 1, "last_activity_date": 1528255371, "creation_date": 1528255371, "answer_id": 50711804, "question_id": 50711717, "link": "https://stackoverflow.com/questions/50711717/writing-to-array-of-pointers-in-c/50711804#50711804", "title": "Writing to array of pointers in C", "body": "<p>You haven't initialized <code>ret_result-&gt;elements</code> to anything. The statement <code>ret_result-&gt;elements[100]</code> is a no-op, the only reason you're not segfaulting there too is because your compiler is cutting it out. If you want that field to be a pointer to an array of size 100 you must initialize it with malloc. I'm not sure why you're declaring it to be a <code>void **</code> double pointer here, but if it must be that way then something like this might work:</p>\n\n<pre><code>ret_result-&gt;elements = malloc(100 * sizeof(struct post *));\n</code></pre>\n\n<p>The call's arguments could also be <code>100 * sizeof(void *)</code>, but it might be a little what you intend to store there if you specify the struct to which the data will be pointing.</p>\n"}], "owner": {"reputation": 549, "user_id": 8548624, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/8fbd984504893a8592288bd056455cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Hews", "link": "https://stackoverflow.com/users/8548624/hews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 50711804, "answer_count": 1, "score": 0, "last_activity_date": 1528255371, "creation_date": 1528254612, "question_id": 50711717, "link": "https://stackoverflow.com/questions/50711717/writing-to-array-of-pointers-in-c", "title": "Writing to array of pointers in C", "body": "<p>I need to write the pointer address of a struct (struct is called \"Post\") that has reposted another Post. There's a fixed return type called <code>result</code> with the following declaration:</p>\n\n<pre><code>struct result {\n   void** elements;\n   size_t n_elements;\n};\n</code></pre>\n\n<p>For the Post struct, it has the following declaration:</p>\n\n<pre><code>struct post {\n   uint64_t pst_id;\n   uint64_t timestamp;\n   size_t* reposted_idxs;\n   size_t n_reposted;\n};\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>result* find_all_reposts(post* posts, size_t count, uint64_t post_id, query_helper* helper) {\n\nresult * ret_result = (result *) malloc(sizeof(result));\nret_result-&gt;elements[100];\nret_result-&gt;n_elements = 0;\n\nfor(int i = 0; i &lt; count; i++){\n\n    post * temp = &amp;posts[i];\n\n    size_t total_reposted = temp-&gt;n_reposted;\n\n    if(total_reposted &gt; 0){\n\n        for(int q = 0; q &lt; total_reposted; q++){\n\n            int index_of_repost = temp-&gt;reposted_idxs[q];\n            ret_result-&gt;elements[q] = &amp;posts[index_of_repost];\n            ret_result-&gt;n_elements++;\n        }   \n    }\n}\n\nreturn ret_result;\n}\n</code></pre>\n\n<p>However I get a SEGV error for <code>ret_result-&gt;elements[q] = &amp;posts[index_of_repost];</code>. I thought it could be originally that I hadn't initialised the elements field in the <code>ret_result</code> struct but I receive <code>warning: statement with no effect</code> for that:</p>\n\n<pre><code>warning: statement with no effect [-Wunused-value]- ret_result-&gt;elements[100];\n</code></pre>\n\n<p>I'm thinking that the <code>void **</code> type for the <code>elements</code> field in <code>result</code> might be messing me around. From what I understand that's a pointer to a pointer which can obviously be an array and hence is basically a pointer to an array of posts?</p>\n\n<p>I should clarify that <code>count</code> is the number of posts and that the returned-result is managed separately and hence any heap-allocated memory is freed in a separate process.</p>\n\n<p>Thanks for your help :)</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1528252773, "post_id": 50711458, "comment_id": 88431906, "body": "We ordinarily expect folks to perform some due diligence before posing a question here.  So what did your research into the significance of the <code>static</code> keyword in C tell you?"}, {"owner": {"reputation": 3, "user_id": 9900724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WqWAn.jpg?s=128&g=1", "display_name": "dushtuChele19", "link": "https://stackoverflow.com/users/9900724/dushtuchele19"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1528256143, "post_id": 50711458, "comment_id": 88432603, "body": "I&#39;m sorry I&#39;m new here. I even deleted this post, but then undeleted it thinking that someone else might also have the same question :/"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1528252965, "creation_date": 1528252965, "answer_id": 50711545, "question_id": 50711458, "link": "https://stackoverflow.com/questions/50711458/why-is-the-output-of-the-following-two-segments-different/50711545#50711545", "title": "Why is the output of the following two segments different?", "body": "<p>A variable declared as <code>static</code> inside of a function retains its value each time the function is called.  It is initialized only once, when the function is first called.  So when the function calls itself the value of <code>i</code> is retained from the prior call.</p>\n\n<p>A local variable that is <em>not</em> <code>static</code> is specific to a given call of a function, so each time the function is called a new copy of the variable is created and initialized.  This results in <code>i</code> being 5 each time, which in turn results in infinite recursion leading to a stack overflow and a core dump.</p>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 4427646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKQMQ.png?s=128&g=1", "display_name": "Lincoln Cheng", "link": "https://stackoverflow.com/users/4427646/lincoln-cheng"}, "is_accepted": true, "score": 0, "last_activity_date": 1528253204, "creation_date": 1528253204, "answer_id": 50711564, "question_id": 50711458, "link": "https://stackoverflow.com/questions/50711458/why-is-the-output-of-the-following-two-segments-different/50711564#50711564", "title": "Why is the output of the following two segments different?", "body": "<p>When you declare a <code>static</code> variable in a function, the function \"remembers\" the last value of the variable even after it terminates. </p>\n\n<pre><code>void Foo() {\n    static int x = 5;\n}\n</code></pre>\n\n<p>In the example above, you are telling the compiler that <code>x</code> shall be \"remembered\" and has an initial value of <code>5</code>. Subsequent calls to <code>Foo()</code> does not reassign <code>x</code> a value of <code>5</code>, but uses the previously remembered value.</p>\n\n<p>In contrast:</p>\n\n<pre><code>void Bar() {\n    int x = 5;\n}\n</code></pre>\n\n<p>Here, you are telling the compiler that everytime <code>Bar()</code> executes, a new variable <code>x</code> is to be created on the stack and assigned a value of <code>5</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9900724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WqWAn.jpg?s=128&g=1", "display_name": "dushtuChele19", "link": "https://stackoverflow.com/users/9900724/dushtuchele19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 50711564, "answer_count": 2, "score": -2, "last_activity_date": 1528253204, "creation_date": 1528252176, "last_edit_date": 1528252567, "question_id": 50711458, "link": "https://stackoverflow.com/questions/50711458/why-is-the-output-of-the-following-two-segments-different", "title": "Why is the output of the following two segments different?", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    static int i = 5;   // here\n    if (--i){\n        printf(\"%d \", i);\n        main();\n    }\n}\n</code></pre>\n\n<p>Output: 4 3 2 1</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n     int i = 5;   // here\n     if (--i){\n        printf(\"%d \", i);\n        main();\n    }\n}\n</code></pre>\n\n<p>Output: 4 4 4 4... (Segmentation fault)</p>\n\n<p>Any idea how static int variable is taken into account only once and int is taken over and over again?</p>\n"}, {"tags": ["c", "linux", "character-encoding"], "comments": [{"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1528265927, "post_id": 50711360, "comment_id": 88435506, "body": "Yes, you can, but other encodings are limited on number of characters. So if you want to be encoding independent, you must use minimal common set, which it is ASCII. [Really the C trigraphs show that minimal encoding is also smaller then ASCII, but since 1990 I think ASCII is safe."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528295228, "post_id": 50711360, "comment_id": 88454121, "body": "If you use POSIX.1 <a href=\"http://man7.org/linux/man-pages/man0/wchar.h.0p.html\" rel=\"nofollow noreferrer\">wide character functions</a>, the functions handle the conversion to the character set used by the locale."}, {"owner": {"reputation": 121, "user_id": 6703696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd40d7740bb9ced371b78b85345cc39?s=128&d=identicon&r=PG&f=1", "display_name": "joseph_m", "link": "https://stackoverflow.com/users/6703696/joseph-m"}, "reply_to_user": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1528330697, "post_id": 50711360, "comment_id": 88470416, "body": "@Giacomo Catenazzi <i>&quot;Yes, you can&quot;</i> after reading the duplicate question, it turned out that no you can&#39;t know the character encoding of the Terminal from within your program."}, {"owner": {"reputation": 121, "user_id": 6703696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd40d7740bb9ced371b78b85345cc39?s=128&d=identicon&r=PG&f=1", "display_name": "joseph_m", "link": "https://stackoverflow.com/users/6703696/joseph-m"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528331126, "post_id": 50711360, "comment_id": 88470509, "body": "@Nominal Animal Using the wide character functions only handle the conversion to the character set used by the locale of my program, and not to the character set used by the Terminal."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528341838, "post_id": 50711360, "comment_id": 88472765, "body": "@joseph_m: No, your terminal should use the character set defined by your locale -- or more properly, your terminal should be set to define the correct locale, including the character set (which is usually a suffix to the locale, e.g. <code>C.utf8</code> or <code>C.iso885915</code>). If not, your terminal is simply misconfigured."}, {"owner": {"reputation": 121, "user_id": 6703696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd40d7740bb9ced371b78b85345cc39?s=128&d=identicon&r=PG&f=1", "display_name": "joseph_m", "link": "https://stackoverflow.com/users/6703696/joseph-m"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528343063, "post_id": 50711360, "comment_id": 88473032, "body": "@Nominal Animal <i>&quot;your terminal should use the character set defined by your locale&quot;</i> You mean the locale of my program/process?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528345433, "post_id": 50711360, "comment_id": 88473583, "body": "@joseph_m: The locale (<code>LANG</code>, <code>LC_</code> environment variables) are set whenever you login; either a default one (see <code>&#47;etc&#47;default&#47;locale</code> in Debian/Ubuntu/Mint), or one you set yourself in your profile or shell startup files. If you use different terminals, you can examine the <code>TERM</code> environment variable (and others) to set the proper locale in your shell startup files; for Bash, this would be <code>.bashrc</code> in your home directory. The character set your program/process uses should always be dictated by <code>LANG</code>/<code>LC_</code>* environment variables."}, {"owner": {"reputation": 121, "user_id": 6703696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd40d7740bb9ced371b78b85345cc39?s=128&d=identicon&r=PG&f=1", "display_name": "joseph_m", "link": "https://stackoverflow.com/users/6703696/joseph-m"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528353197, "post_id": 50711360, "comment_id": 88476462, "body": "@Nominal Animal I am using Konsole as the Terminal. I changed the <code>LANG</code> variable in the <code>&#47;etc&#47;default&#47;locale</code> file, and restarted the computer. Now when I open Konsole and type the <code>locale</code> command, I see that the <code>LANG</code> variable for <code>bash</code> has changed to the value that I set in the <code>&#47;etc&#47;default&#47;locale</code> file, but Konsole still has the same character encoding that I set in its settings (so it was not affected by the <code>&#47;etc&#47;default&#47;locale</code> file) ."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528353919, "post_id": 50711360, "comment_id": 88476843, "body": "@joseph_m: So? The idea is that you can use whatever you want, but you must set them both (both <code>LANG</code>/<code>LC_</code> and the character set in your terminal). The terminal does not tell anyone what character set it is using; only the user who set or changed it knows. No, you cannot query it programmatically."}, {"owner": {"reputation": 121, "user_id": 6703696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd40d7740bb9ced371b78b85345cc39?s=128&d=identicon&r=PG&f=1", "display_name": "joseph_m", "link": "https://stackoverflow.com/users/6703696/joseph-m"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528354976, "post_id": 50711360, "comment_id": 88477459, "body": "@Nominal Animal I think I know where the misunderstanding comes from, when you said <i>&quot;your terminal should use the character set defined by your locale&quot;</i>, you meant that I should set the character set of the Terminal manually to the locale of my program, and not that the Terminal will automatically change its own character set, right?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1528379830, "post_id": 50711360, "comment_id": 88493749, "body": "@joseph_m: Right. It is up to the user to ensure their terminal settings agree with the locale in use, at any point in time. There is no way a program running in a terminal can check the character set used by the terminal; a program can check the size (number of rows and columns) of the window size, and can get notified (by SIGWINCH signal) if the window size changes, but that&#39;s about it. All programs are expected to follow the locale settings, and those are defined in the <code>LANG</code>, <code>LC_</code> environment variables."}], "owner": {"reputation": 121, "user_id": 6703696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd40d7740bb9ced371b78b85345cc39?s=128&d=identicon&r=PG&f=1", "display_name": "joseph_m", "link": "https://stackoverflow.com/users/6703696/joseph-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "closed_date": 1528282425, "answer_count": 0, "score": 0, "last_activity_date": 1528251387, "creation_date": 1528251387, "question_id": 50711360, "link": "https://stackoverflow.com/questions/50711360/can-i-write-a-console-program-that-works-with-multiple-character-encodings", "closed_reason": "Duplicate", "title": "Can I write a console program that works with multiple character encodings?", "body": "<p>I am writing a console program in C.</p>\n\n<p>I expect the Terminal that my program is running in to have its character encoding set to UTF-8. This means that I am sending UTF-8 encoded strings to the Terminal, and expecting to receive UTF-8 encoded strings from the Terminal.</p>\n\n<p>But if the Terminal was set to another character encoding (other than UTF-8) while my program is running, then my program will stop working as expected.</p>\n\n<p>So is there a way to know what character encoding the Terminal is set to from within my program (so that I can change my program behavior accordingly)? And even if there is such a way, should I even bother making my program work with multiple character encodings, or is it enough to only make it work with UTF-8?</p>\n"}, {"tags": ["c++", "c", "string", "vector"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528251892, "post_id": 50711254, "comment_id": 88431728, "body": "Stealing the C tag because C has no standard namespace. Or namespaces for that matter. Mind you you can make namespaces in C with some really neat code, but that&#39;s a little off topic for this question."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528252521, "post_id": 50711254, "comment_id": 88431849, "body": "<code>strlen(lines[i])</code> won&#39;t work. <code>strlen</code> works on a null-terminated character array. <code>std::string</code> typically contains a pointer to a null-terminated character array, but it itself is not a null-terminated character array. Instead <code>std::string</code> has a <code>size</code> function and a <code>length</code> function that both do the same thing: Give you the number of characters in the string. So <code>strlen(lines[i])</code> can be <code>lines[i].length()</code>. But this just gives you the length of the string and it looks like you want the last character in the string. See if your compiler has a <code>string::back</code> function you can use for that."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528252616, "post_id": 50711254, "comment_id": 88431869, "body": "A side note: you can get rid of the <code>vector</code> if you parse the line and sum up the weights as you read the line in."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528252684, "post_id": 50711254, "comment_id": 88431889, "body": "That said, it&#39;s really nice to see a beginning programmer using <code>string</code> and <code>vector</code> rather than muddling around with character arrays before they need to."}, {"owner": {"reputation": 19, "user_id": 9900657, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h7zz9t1xTKc/AAAAAAAAAAI/AAAAAAAAAxQ/usMeG4dY2uI/photo.jpg?sz=128", "display_name": "NewbCoder", "link": "https://stackoverflow.com/users/9900657/newbcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528303925, "post_id": 50711254, "comment_id": 88459505, "body": "Thank a lot for the response. I removed the strlen() and am instead working with *myStr.rbegin by my instructors request. This has presented new issues, however...."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528305836, "post_id": 50711254, "comment_id": 88460531, "body": "Ignoring the fact that <code>myStr</code> has not been defined, <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">your rubber duck wants to know</a> how you expect <code>char chr = *myStr.rbegin();</code> to behave before you read the information you need to parse from the file"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528306102, "post_id": 50711254, "comment_id": 88460678, "body": "A side note: you should not change a question this drastically after answers have started to roll in. More often than not, it makes the existing answers incomprehensible. Instead you should ask a new question based on the new code. In this case no answer really addressed your problem so so you get a bit lucky, but normally your edit would be reverted to preserve the integrity of the answers. In this case I recommend you edit the question again to restore the original code and then add your new solution as an addendum at the bottom."}, {"owner": {"reputation": 19, "user_id": 9900657, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h7zz9t1xTKc/AAAAAAAAAAI/AAAAAAAAAxQ/usMeG4dY2uI/photo.jpg?sz=128", "display_name": "NewbCoder", "link": "https://stackoverflow.com/users/9900657/newbcoder"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528311090, "post_id": 50711254, "comment_id": 88463257, "body": "will do, sorry about that."}], "answers": [{"tags": [], "owner": {"reputation": 11455, "user_id": 10888, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/adbf81127c90a370ceab11b3087a8e4e?s=128&d=identicon&r=PG", "display_name": "Leonard", "link": "https://stackoverflow.com/users/10888/leonard"}, "is_accepted": false, "score": 0, "last_activity_date": 1528251564, "creation_date": 1528251564, "answer_id": 50711378, "question_id": 50711254, "link": "https://stackoverflow.com/questions/50711254/calculating-weighted-unweighted-gpa-by-reading-text-file-into-string-vector/50711378#50711378", "title": "Calculating weighted/unweighted GPA by reading text file into string/vector", "body": "<p>(1)  Your code does not compile.  'Sum' is undeclared.  Please submit code that compiles.  (2)  The strlen call is trying to evaluate the length of a vector, not a string.  You then compare the string length to a letter.  You need to use the strlen as an index to a string before comparing it.</p>\n"}, {"tags": [], "owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "is_accepted": false, "score": 3, "last_activity_date": 1528259444, "last_edit_date": 1528259444, "creation_date": 1528252848, "answer_id": 50711538, "question_id": 50711254, "link": "https://stackoverflow.com/questions/50711254/calculating-weighted-unweighted-gpa-by-reading-text-file-into-string-vector/50711538#50711538", "title": "Calculating weighted/unweighted GPA by reading text file into string/vector", "body": "<p>I don't know an awful lot about C++, but since you tagged this with C and your code contains some C constructs I'm going to pretend that I am qualified to answer it anyway.</p>\n\n<p>Firstly, these lines are rather questionable:</p>\n\n<pre><code>system(\"pause\");\nreturn -1;\n</code></pre>\n\n<p>If you want to have the program wait (why?) the easiest way would probably be to just prompt for some input with getchar(). Also, don't return negative values from main(). The return should be between 0 and 127.</p>\n\n<p>More importantly though, you're doing a few things that are not going to work at all. strlen() calculates the length of a NUL terminated C string. C++ std::string's are very definitely not NUL terminated strings and the result will be completely undefined. If you want to find the length of an std::string, you must call <code>std::string.length()</code>, which is much preferable anyway since the result doesn't need to be calculated. Also, you cannot use getline with an std::string either.</p>\n\n<p>I actually wrote some code I was going to submit as a possible solution to your problem, but it was C code, and since I see you've removed the C tag from this question I won't include it.</p>\n\n<p>EDIT: Ah, the heck with it, this is how I'd do it in C.</p>\n\n<pre><code>#include &lt;err.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/stat.h&gt;\n\n#define FILENAME \"Grades.txt\"\n\nint main(void)\n{\n    struct stat st;\n    char *tok, *obuf, *buf;\n    FILE *fp = fopen(FILENAME, \"r\");\n\n    if (!fp || stat(FILENAME, &amp;st) != 0)\n        err(1, \"Failed to open/stat file %s\\n\", FILENAME);\n\n    buf = obuf = malloc(st.st_size + 1lu);\n    fread(buf, 1, st.st_size, fp);\n    buf[st.st_size] = '\\0';\n    fclose(fp);\n\n    int num_classes = 0;\n    double grade = 0;\n    while ((tok = strsep(&amp;buf, \"\\n\")) &amp;&amp; *tok) {\n        double weight = 1;\n        if (strstr(tok, \"AP\"))\n            weight = 2;\n        else if (strstr(tok, \"Honors\"))\n            weight = 1.5;\n\n        int grd;\n        switch(*(buf - 2lu)) {\n            case 'A': grd = 4; break;\n            case 'B': grd = 3; break;\n            case 'C': grd = 2; break;\n            case 'D': grd = 1; break;\n            default:  grd = 0; break;\n        }\n\n        grade += weight*(double)grd;\n        ++num_classes;\n    }\n\n    printf(\"The gpa is around %f\\n\", grade / (double)num_classes);\n\n    free(obuf);\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9900657, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h7zz9t1xTKc/AAAAAAAAAAI/AAAAAAAAAxQ/usMeG4dY2uI/photo.jpg?sz=128", "display_name": "NewbCoder", "link": "https://stackoverflow.com/users/9900657/newbcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1528311607, "creation_date": 1528250505, "last_edit_date": 1528311607, "question_id": 50711254, "link": "https://stackoverflow.com/questions/50711254/calculating-weighted-unweighted-gpa-by-reading-text-file-into-string-vector", "title": "Calculating weighted/unweighted GPA by reading text file into string/vector", "body": "<p>I'm aware that there are many GPA calc questions in existence but I haven't managed to find one involving weighted and unweighted distinction. </p>\n\n<p>I need to read the text file, input lines into a string or vector (not experienced with these), and parse the data (haven't done this before either) to calculate GPA and whether or not the credits are weighted. If the course is AP, the grade is weighted +1.0, if it is Honors, +0.5.</p>\n\n<p>I'm pretty sure what I have so far is very wrong, but I'm trying to hash out the syntax for this type of operation. </p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;fstream&gt;\n    #include &lt;string&gt;\n    #include &lt;vector&gt;\n    using namespace std;\n\n    int main(){\n\n        string data;\n        vector&lt;string&gt; lines;\n        ifstream myfile(\"Grades.txt\");\n\n        //test file open//\n        if (!myfile){\n\n            cout &lt;&lt; \"Error opening file\" &lt;&lt; endl;\n            system(\"pause\");\n            return -1;\n        }\n        //insert file text into vector//\n        while (getline(myfile, data)){\n\n            lines.push_back(data);\n        }\n        for (int i = 0; i &lt; 8; i++){\n\n            if ((strlen(lines[i]) - 1) == 'A'){\n                sum =+ 4;\n            }\n            else if ((strlen(lines[i]) - 1) == 'B'){\n                sum =+ 3;\n            }\n            else if ((strlen(lines[i]) - 1) == 'C'){\n                sum =+ 2;\n            }\n            else if ((strlen(lines[i]) - 1) == 'D'){\n                sum =+ 1;\n            }\n            else {\n                sum =+ 0;\n            }\n        }\n\n    }\n</code></pre>\n\n<p>This is the text file's contents:</p>\n\n<pre><code>    Math A\n    AP History C\n    Chemistry B\n    Honors Physics C\n    Ethics A\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory-address"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 2162978, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/fde1aef05ef5fcc9674e561d515d0fde?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Sacramento", "link": "https://stackoverflow.com/users/2162978/jo%c3%a3o-sacramento"}, "edited": false, "score": 0, "creation_date": 1528251517, "post_id": 50711291, "comment_id": 88431639, "body": "Thank you for the answer, I get it now! :)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1528251523, "last_edit_date": 1528251523, "creation_date": 1528250781, "answer_id": 50711291, "question_id": 50711244, "link": "https://stackoverflow.com/questions/50711244/address-of-a-pointer-knowing-the-initial-address/50711291#50711291", "title": "Address of a pointer knowing the initial address", "body": "<p>If we \"draw\" your array as it is laid out in memory it will look something like</p>\n\n<pre>\n+----+----+----+----+----+\n| 10 | 20 | 30 | 40 | 50 |\n+----+----+----+----+----+\n</pre>\n\n<p>Then you need to remember that arrays naturally decays to pointers to their first element, i.e. <code>tab</code> is equal to <code>&amp;tab[0]</code>. And then you need to remember that for any array or pointer <code>a</code> and index <code>i</code>, the expression <code>a[i]</code> is exactly equal to <code>*(a + i)</code>. From that it's easy to deduce that <code>tab + 4</code> is equal to <code>&amp;tab[4]</code>, i.e. a pointer to the fifth element.</p>\n\n<p>So if we again draw the array, but now with pointers:</p>\n\n<pre>\n+----+----+----+----+----+\n| 10 | 20 | 30 | 40 | 50 |\n+----+----+----+----+----+\n^                   ^\n|                   |\n&tab[0]             &tab[4]\n|\n&tab\n</pre>\n\n<p>If <code>&amp;tab[0]</code> is equal to <code>0x28fef8</code> then <code>&amp;tab[4]</code> is equal to <code>0x28fef8  + sizeof(int) * 4</code>, as it is pointing to index 4 of an <code>int</code> array, and it's indeed <code>0x28ff08</code>.</p>\n\n<p>Please note that while <code>&amp;tab[0]</code> and <code>&amp;tab</code> are pointing to the same location, they are semantically different. <code>&amp;tab[0]</code> is a pointer to a single elements and is of type <code>int *</code>, while <code>&amp;tab</code> is a pointer to the array and is of type <code>int (*)[5]</code>.</p>\n\n<hr>\n\n<p>On a related note, the correct format to print <code>void *</code> pointers is <code>\"%p\"</code>. So your printing should really be</p>\n\n<pre><code>printf(\"%d,%p,%p. \\n\", *ptr-1, (void *) &amp;tab, (void *) ptr);\n</code></pre>\n\n<p>Note that the cast to <code>void *</code> really is needed.</p>\n"}], "owner": {"reputation": 59, "user_id": 2162978, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/fde1aef05ef5fcc9674e561d515d0fde?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Sacramento", "link": "https://stackoverflow.com/users/2162978/jo%c3%a3o-sacramento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 50711291, "answer_count": 1, "score": 2, "last_activity_date": 1528251523, "creation_date": 1528250404, "question_id": 50711244, "link": "https://stackoverflow.com/questions/50711244/address-of-a-pointer-knowing-the-initial-address", "title": "Address of a pointer knowing the initial address", "body": "<p>I have the following code:</p>\n\n<pre><code>int main(){\nint tab[5]={10, 20, 30, 40, 50};\nint *ptr;\nptr=tab+4;\nprintf(\"%d,%#x,%#x. \\n\",*ptr-1,&amp;tab,ptr);\nreturn 0;}\n</code></pre>\n\n<p>\"tab\" is located in a memory zone that starts in the dress 0x28FEF8.</p>\n\n<p>I know that the value of *ptr-1 is 49, and the value of &amp;tab is 0x28FEF8.</p>\n\n<p>Can someone explain me why the value of \"ptr\" is 0x28FF08? I was guessing it would be 0x28FEFC.</p>\n\n<p>Thank you in the advance!</p>\n"}, {"tags": ["html", "c", "cgi"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 3, "creation_date": 1528246977, "post_id": 50710885, "comment_id": 88430760, "body": "If you aren&#39;t using CGI, how is your code running?"}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1528289385, "post_id": 50710885, "comment_id": 88450076, "body": "@SLaks I appreciate the irony, but can you elaborate please? Also, I updated the question."}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1528305039, "post_id": 50710885, "comment_id": 88460113, "body": "CGI means that the web server launches your code (whether interpreted or compiled), passes the request via stdin, and expects a response via stdout."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1528317295, "post_id": 50710885, "comment_id": 88466119, "body": "@SLaks Who and what describes its &quot;defined behavior&quot; ? Since I&#39;m using apache, is apache&#39;s implementation of CGI protocol .. is what I&#39;m using?"}], "answers": [{"comments": [{"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528315577, "post_id": 50711277, "comment_id": 88465362, "body": "can you please answer the two points I edited in. A theoretical answer would be enough for me, and I will accept your answer to close this question down."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528317336, "post_id": 50711277, "comment_id": 88466138, "body": "strange, I can&#39;t seem to tag you"}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528326200, "post_id": 50711277, "comment_id": 88469270, "body": "who would be a implementor in this case? Sorry, I didn&#39;t understand what you said."}, {"owner": {"reputation": 11455, "user_id": 10888, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/adbf81127c90a370ceab11b3087a8e4e?s=128&d=identicon&r=PG", "display_name": "Leonard", "link": "https://stackoverflow.com/users/10888/leonard"}, "reply_to_user": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528348792, "post_id": 50711277, "comment_id": 88474607, "body": "The implementor is anyone who writes the software.  I&#39;m sorry you don&#39;t understand me, but maybe this will make it clear:   I don&#39;t know the names of the people that wrote Apache, or the Perl CGI module, or who wrote tiny httpd, but those are the implementors."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528398567, "post_id": 50711277, "comment_id": 88504614, "body": "For perl, there is CGI.pm module, it resides on your computer when you install perl (including CGI.pm). That defines the CGI&#39;s &quot;standard behavior&quot;.   In my case, I want to know, where is the CGI files actually located. Inside apache ? What is the standard behavior of it?"}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1529323988, "post_id": 50711277, "comment_id": 88818420, "body": "I have accepted this answer, even though it does not answer 100% to my query, but still indirectly points at some useful leads. I must say, CGI as implemented by Apache is badly documented. Horribly short is the right expression I think."}], "tags": [], "owner": {"reputation": 11455, "user_id": 10888, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/adbf81127c90a370ceab11b3087a8e4e?s=128&d=identicon&r=PG", "display_name": "Leonard", "link": "https://stackoverflow.com/users/10888/leonard"}, "is_accepted": true, "score": 2, "last_activity_date": 1528324137, "last_edit_date": 1528324137, "creation_date": 1528250675, "answer_id": 50711277, "question_id": 50710885, "link": "https://stackoverflow.com/questions/50710885/passing-html-form-data-to-c-script-and-cgi-standard-behavior/50711277#50711277", "title": "Passing HTML form data to C script and CGI standard behavior", "body": "<p>Trying to help you is a bit difficult.  Your question, in particular the statement \"I'm trying to avoid using CGI at all\" implies that you're missing a conceptual overview.  In order to 'avoid CGI' you need to replace it with a mechanism to receive, parse and respond to HTTP requests.  That would mean (potentially) writing an HTTP server.  C is a compiled language.  When you wonder if you can do\naction=\"test.c\" it shows me that you're missing the fact that  C isn't an interpreted language.  </p>\n\n<p>You could use something like <a href=\"https://sourceforge.net/projects/tinyhttpd/\" rel=\"nofollow noreferrer\">tiny httpd</a> to get you started.</p>\n\n<p>This site about <a href=\"http://jkorpela.fi/forms/cgic.html\" rel=\"nofollow noreferrer\">cgi using C</a> will help you.  How CGI is implemented ends up being at the discretion of the implementor.  A hello world program is as simple as the compiled executable of </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n  printf(\"Content-Type: text/plain;charset=us-ascii\\n\\n\");\n  printf(\"Hello world\\n\\n\");\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 50711277, "answer_count": 1, "score": -1, "last_activity_date": 1528324137, "creation_date": 1528246796, "last_edit_date": 1528318371, "question_id": 50710885, "link": "https://stackoverflow.com/questions/50710885/passing-html-form-data-to-c-script-and-cgi-standard-behavior", "title": "Passing HTML form data to C script and CGI standard behavior", "body": "<p><s> I'm trying to make a login script in C. I want to know, how I can pass the HTML form data to my back-end c script. I'm new to C (coming from perl)</p>\n\n<p>Just do this? </p>\n\n<pre><code>&lt;form action=\"test.c\"&gt; or &lt;form action=\"test.a\"&gt; \n</code></pre>\n\n<p>How can the script explicitly differ between username and password? Earlier, I just had to do this (in perl):</p>\n\n<pre><code>$username = $cgi-&gt;param(\"username\");\n</code></pre>\n\n<p>How can I do this now in C. I'm trying to avoid using CGI at all. </p>\n\n<p>Edit 1: </p>\n\n<ol>\n<li><p>It seems I also need to know, how CGI basically works (in short). I'm guessing, the browser is a sort-of compiler for CGI? if not, then is it apache? </p></li>\n<li><p>Since C is not a interpreted language, how does CGI work with C? In perl, I could simply do:</p>\n\n<pre><code>#!/usr/bin/perl\nprint \"Content-type: text/html\\n\\n\";\nprint \"Hello, World.\";\n</code></pre></li>\n</ol>\n\n<p>How do I do this in C? </s></p>\n\n<p>Edit2: Ok, I went over to previously answered questions under the cgi tag here on stackoverflow. </p>\n\n<p>This seems to be the most voted one: <a href=\"https://stackoverflow.com/questions/2089271/what-is-common-gateway-interface-cgi\">What is Common Gateway Interface (CGI)?</a></p>\n\n<p>But it still doesn't clear a few things, which I'm asking here. </p>\n\n<p>Since RFC3875 is only a informational doc, and there is no finalized standard. </p>\n\n<ol>\n<li><p>Who implements CGI protocol? Who defines its \"standard behavior\" on servers such as Apache. </p></li>\n<li><p>How does C files work with CGI in modern environment. Please elaborate using a \"Hello World!\" as a response to a form submission. </p></li>\n</ol>\n"}, {"tags": ["c++", "c", "sonarqube"], "answers": [{"tags": [], "owner": {"reputation": 20794, "user_id": 2662707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ruzzB.jpg?s=128&g=1", "display_name": "G. Ann - SonarSource Team", "link": "https://stackoverflow.com/users/2662707/g-ann-sonarsource-team"}, "is_accepted": false, "score": 2, "last_activity_date": 1528266427, "creation_date": 1528266427, "answer_id": 50713522, "question_id": 50710774, "link": "https://stackoverflow.com/questions/50710774/how-do-i-get-sonarqube-scanner-to-analyze-c-and-c-code/50713522#50713522", "title": "How do I get SonarQube Scanner to analyze C and C++ code?", "body": "<p>You say you downloaded SonarCFamily and exploded the jar. This was not what you wanted to do. Instead, you should have installed the intact jar in <code>$SONARQUBE_HOME/extensions/plugins</code>. Then the download URL would have worked for you, <em>and</em> your analysis would have recognized and provided rules for your C files.</p>\n\n<p><strong>However</strong>, SonarCFamily is not one of the free code analyzers. It comes as part of <a href=\"https://www.sonarsource.com/plans-and-pricing/developer/\" rel=\"nofollow noreferrer\">Developer Edition</a>($), for which a paid license is required.</p>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 6022899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a567dd691a5862bca47a453daf1f4741?s=128&d=identicon&r=PG&f=1", "display_name": "George312", "link": "https://stackoverflow.com/users/6022899/george312"}, "is_accepted": false, "score": 0, "last_activity_date": 1528270717, "creation_date": 1528270717, "answer_id": 50714768, "question_id": 50710774, "link": "https://stackoverflow.com/questions/50710774/how-do-i-get-sonarqube-scanner-to-analyze-c-and-c-code/50714768#50714768", "title": "How do I get SonarQube Scanner to analyze C and C++ code?", "body": "<p>Alternative for SonarCFamily is <a href=\"https://github.com/SonarOpenCommunity/sonar-cxx\" rel=\"nofollow noreferrer\">sonar-cxx plugin</a></p>\n\n<p>but as far as i know it can only analyse with the result of other static/dynamic tools. I have used with Valgrind, Dr.Memory, Bullseye.</p>\n"}], "owner": {"reputation": 41, "user_id": 9778382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e26312ab7e243713b76561e1280b3ab8?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjit", "link": "https://stackoverflow.com/users/9778382/ranjit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4272, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1528270717, "creation_date": 1528245713, "question_id": 50710774, "link": "https://stackoverflow.com/questions/50710774/how-do-i-get-sonarqube-scanner-to-analyze-c-and-c-code", "title": "How do I get SonarQube Scanner to analyze C and C++ code?", "body": "<p>I am running the community edition of SonarQube 7.1 on RHEL 7.x.  When I run sonar-scanner -X, I see the output on the backend like this:</p>\n\n<pre><code>hello.py indexed with language 'py'\nhello.java indexed with language 'java'\nhello.cpp indexed with language 'null'\nhello.c indexed with language 'null'\n</code></pre>\n\n<p>I expected to see \"indexed with language cpp\" and \"indexed with language c\".  </p>\n\n<p>When I go to the web UI, see the hello.py and hello.java in the project directory.  But I see no reference to the .cpp or .c code.  I expect to see the .c and .cpp files in the web UI.  This has never worked, so let me give some background on what I did.</p>\n\n<p>To install the plugin for the .cpp and .c code, I downloaded a .zip file with the highest version number.  I initially tried to find it on the local SonarQube installation, but the URL \"<a href=\"http://localhost:9000/static/cpp/build-wrapper-linux-x86.zip\" rel=\"nofollow noreferrer\">http://localhost:9000/static/cpp/build-wrapper-linux-x86.zip</a>\" (and its derivatives for my own deployment) did not work for me.  As a side note, I am curious if there are alternative paths and why this path would lead to 404 or \"No page can be displayed\" messages in my web browser.</p>\n\n<p>After I unzipped the plugin for C++ and C, I ran (from the command prompt): build-wrapper-linux-x86-64 --out-dir bw_output make</p>\n\n<p>I also ran (from the command prompt): build-wrapper-linux-x86-64 --out-dir bw_output make sonar-scanner</p>\n\n<p>Both ran without errors.  It appears that SonarQube is not analyzing .c or .cpp source code.  I base this off two things.  One, the lack of output in the web UI when other files are analyzed in the same directory. Two, the output on the backend referring to language 'null' for .c and .cpp files.  What am I doing wrong in configuring SonarQube to analyze C and C++ code?</p>\n"}, {"tags": ["c", "pointers", "for-loop"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1528244439, "post_id": 50710625, "comment_id": 88430247, "body": "What is your while loop doing inside the for loop?"}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1528244579, "post_id": 50710625, "comment_id": 88430281, "body": "Why did you make &#39;cost&#39; a pointer to int, rather than simply an int? It&#39;s used to store a numeric value, presumably."}, {"owner": {"reputation": 101, "user_id": 5695111, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b70842cbe990fb0eac8ddc1ef5c834bb?s=128&d=identicon&r=PG&f=1", "display_name": "user5695111", "link": "https://stackoverflow.com/users/5695111/user5695111"}, "reply_to_user": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1528244699, "post_id": 50710625, "comment_id": 88430301, "body": "@Steephen its written there which inside for loop. But I am not sure of the truth,"}, {"owner": {"reputation": 101, "user_id": 5695111, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b70842cbe990fb0eac8ddc1ef5c834bb?s=128&d=identicon&r=PG&f=1", "display_name": "user5695111", "link": "https://stackoverflow.com/users/5695111/user5695111"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1528244826, "post_id": 50710625, "comment_id": 88430327, "body": "@jarmod because I need to keep address for adjacent cost."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528245056, "post_id": 50710625, "comment_id": 88430382, "body": "Please don&#39;t show screen dumps of plain text; include the text in the question (treat it as &#39;code&#39; \u2014 if you&#39;re fancy, include the line <code>&lt;!-- language: lang-none --&gt;</code> on its own, unindented and surrounded by blank lines, before the text."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1528245586, "post_id": 50710625, "comment_id": 88430507, "body": "<code>costs</code> is a local variable in <code>read_graph()</code>.  You store pointers to it in the adjacency graph.  When <code>read_graph()</code> returns, every single one of those pointers is invalid, and points at memory which will be reused for sundry other purposes.  This is not a recipe for happiness.  By far the easiest fix is to make your <code>cost</code> member a plain <code>int</code> variable and not a pointer.  If you must have pointers (why?) make sure that they point at memory that is allocated for as long as the adjacency list is, and remember to free it if it was allocated."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1528245710, "post_id": 50710625, "comment_id": 88430526, "body": "Also \u2014 <code>scanf(&quot;%d&quot;,&amp;costs);</code> where you have <code>int costs[10];</code> is a major bug too.  You are passing an <code>int (*)[10]</code> but telling <code>scanf()</code> to expect an <code>int *</code>; happiness does not ensue (you keep overwriting the same element in <code>costs</code> each time you make the call)."}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1528245938, "post_id": 50710625, "comment_id": 88430570, "body": "OK, if you know it&#39;s always going to be 10 ints then just declare int cost[10] in the struct. If it&#39;s a variable number then you&#39;re going to have to dynamically allocate it using malloc(N * sizeof(int)) rather than simply pointing it at the automatic int costs[10] that you have now in read_graph()."}], "answers": [{"tags": [], "owner": {"reputation": 427, "user_id": 8834967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xrf_YCVb2Vw/AAAAAAAAAAI/AAAAAAAAAAc/K52j8i_sYWw/photo.jpg?sz=128", "display_name": "Joy Allen", "link": "https://stackoverflow.com/users/8834967/joy-allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1528250719, "creation_date": 1528250719, "answer_id": 50711282, "question_id": 50710625, "link": "https://stackoverflow.com/questions/50710625/loop-with-two-variables-one-is-pointer-in-c-programming/50711282#50711282", "title": "Loop with two variables (one is pointer) in C programming", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct node{\n    int data;\n    int cost;\n    struct node *next;\n} node;\n\nvoid read_graph(node *ad[], int no_of_nodes);\nvoid print_graph(node *ad[],int no_of_nodes);\n\nvoid main()\n{\n    int i,j,k,nodes;\n    printf(\"\\nEnter the number of nodes :\");\n    scanf(\"%d\",&amp;nodes);\n\n    node *adj[nodes];\n    memset(adj, 0, sizeof(node *) * nodes);\n    read_graph(adj,nodes);\n    print_graph(adj,nodes);     \n}\n\nvoid read_graph(node *ad[], int no_of_nodes){\n    node *new_node;\n    node *last;\n    int i,j,k,val;  \n    int cost;\n    for(i=0; i&lt; no_of_nodes; i++){\n        last = NULL;\n\n        printf(\"\\nFor Node : %d\\n\",i+1);        \n        printf(\"\\n%5d. nodes cost is: \",i+1);\n        scanf(\"%d\",&amp;cost);\n\n        printf(\"    Number of neighbours = \");\n        scanf(\"%d\",&amp;k);\n\n        for(j=0; j&lt;k; j++){\n            printf(\"    Enter the %d. neighbours of %d : \",j+1,i+1);\n            scanf(\"%d\",&amp;val);\n            new_node = (node*) malloc(sizeof(node));\n            new_node-&gt;data = val;\n            new_node-&gt;next = NULL;\n            new_node-&gt;cost = cost;\n\n            if(ad[i]== NULL)\n                ad[i] = new_node;\n            else\n                last-&gt;next = new_node;\n            last =  new_node;           \n        }\n    }\n}\n\nvoid print_graph(node *ad[],int no_of_nodes){\n    node *ptr = NULL;\n    int i,j;\n    for(i=0; i&lt;no_of_nodes; i++){\n        ptr = ad[i];\n        printf(\"\\n Number %d node cost is = %d and its neighbours are :  \",i+1,ptr-&gt;cost);\n        while(ptr != NULL){\n            printf(\"%d\\t \",ptr-&gt;data);\n            ptr = ptr-&gt;next;\n        }\n    }\n}\n</code></pre>\n\n<p>The code work well for your request, however I suggest redefining struct node like:</p>\n\n<pre><code>typedef struct node\n{\n    int id;\n    int cost;\n    int neighbours;\n} node;\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5695111, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b70842cbe990fb0eac8ddc1ef5c834bb?s=128&d=identicon&r=PG&f=1", "display_name": "user5695111", "link": "https://stackoverflow.com/users/5695111/user5695111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528250719, "creation_date": 1528244289, "last_edit_date": 1528245386, "question_id": 50710625, "link": "https://stackoverflow.com/questions/50710625/loop-with-two-variables-one-is-pointer-in-c-programming", "title": "Loop with two variables (one is pointer) in C programming", "body": "<p>I briefly have a problem about for loop with 2 variables.\n<br> One variable classically <code>i=0 &gt; to the end of bound</code> and \n<br>the second one is <code>*(ptr-&gt;cost)</code> like that and show the value using the pointer.</p>\n\n<p>I have a problem the second one actually I cant place it in for loop. I get the <strong>cost</strong>  variable from user and I want to print them <strong>i and cost variables</strong> together. But my codes just print i variables and one variable of cost.<br>\nThis is my related code part:</p>\n\n<pre><code>void print_graph(struct node *ad[],int no_of_nodes){\n\n    struct node *ptr = NULL;\n    int i,j;\n    for(i=0; i&lt;no_of_nodes; i++){\n        ptr = ad[i];\n        printf(\"\\n Number %d node cost is = %d and its neighbours are :  \",i+1,*(ptr-&gt;cost));\n        while(ptr != NULL){\n            printf(\"%d\\t \",ptr-&gt;data,*(ptr-&gt;cost));\n            ptr = ptr-&gt;next;\n        }\n    }  \n}\n</code></pre>\n\n<p>and the out put<br>\n<a href=\"https://i.stack.imgur.com/gVTc2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gVTc2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Node 1 should be 50, but output show it 70. </p>\n\n<p>Also I think Cost variable does not included in for loop thats why it turns only one times and also reverse order. How can fix the problem?</p>\n\n<p>This is my whole code</p>\n\n<pre><code>struct node{\nint data;\nstruct node *next;\nint* cost;};\n\ntypedef struct node nodes;\n\nvoid read_graph(struct node *ad[], int no_of_nodes);\nvoid print_graph(struct node *ad[],int no_of_nodes);\n\nvoid main()\n{\n    int i,j,k,nodes;\n    printf(\"\\nEnter the number of nodes :\");\n    scanf(\"%d\",&amp;nodes);\n\n    struct node *adj[nodes];\n    for(i=0; i&lt;nodes; i++)\n        adj[i] = NULL;\n    read_graph(adj,nodes);\n    print_graph(adj,nodes);     \n\n}\n\nvoid read_graph(struct node *ad[], int no_of_nodes){\n    struct node *new_node;\n    int i,j,k,val;  \n    int costs[10];\n    for(i=0; i&lt; no_of_nodes; i++){\n        struct node *last = NULL;\n\n        printf(\"\\nFor Node : %d\\n\",i+1);        \n        printf(\"\\n%5d. nodes cost is: \",i+1);\n        scanf(\"%d\",&amp;costs);\n\n        printf(\"    Number of neighbours = \",i+1);\n        scanf(\"%d\",&amp;k);\n\n        for(j=0; j&lt;k; j++){\n            printf(\"    Enter the %d. neighbours of %d : \",j+1,i+1);\n            scanf(\"%d\",&amp;val);\n            new_node = (struct node*)malloc(sizeof(struct node));\n            new_node-&gt;data = val;\n            new_node-&gt;next = NULL;\n            (*new_node).cost = costs;  //////////////////////////////////////\n\n            if(ad[i]== NULL)\n                ad[i] = new_node;\n            else\n                last-&gt;next = new_node;\n            last =  new_node;           \n\n        }\n\n    }\n}\n\nvoid print_graph(struct node *ad[],int no_of_nodes){\n\n    struct node *ptr = NULL;\n    int i,j;\n    for(i=0; i&lt;no_of_nodes; i++){\n        ptr = ad[i];\n        printf(\"\\n Number %d node cost is = %d and its neighbours are :  \",i+1,*(ptr-&gt;cost));\n        while(ptr != NULL){\n            printf(\"%d\\t \",ptr-&gt;data,*(ptr-&gt;cost));\n            ptr = ptr-&gt;next;\n        }\n    }\n}\n</code></pre>\n\n<p>Finally, can anyone guide me about how should I follow path for sum cost and compare them for finding which one is lowest?</p>\n"}, {"tags": ["c", "repl.it"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1528242283, "post_id": 50710379, "comment_id": 88429762, "body": "<a href=\"https://repl.it/repls/WigglyGoldenConditional\" rel=\"nofollow noreferrer\">Could not reproduce</a>. I also don&#39;t see any numeric constant 12, especially not on line 1."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1528242372, "post_id": 50710379, "comment_id": 88429789, "body": "I copy pasted your code to repl.it, it doesn&#39;t give the errors you post. The code compiles fine"}, {"owner": {"reputation": 27, "user_id": 6484341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqO6dLh_E5w/AAAAAAAAAAI/AAAAAAAAAB4/sPsrAnNX_Gk/photo.jpg?sz=128", "display_name": "Mystic Developer", "link": "https://stackoverflow.com/users/6484341/mystic-developer"}, "edited": false, "score": 0, "creation_date": 1528242380, "post_id": 50710379, "comment_id": 88429792, "body": "That&#39;s so weird, I keep getting an error. Here is a screenshot of my error. <a href=\"https://ibb.co/dUywk8\" rel=\"nofollow noreferrer\">ibb.co/dUywk8</a>"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1528242618, "post_id": 50710379, "comment_id": 88429850, "body": "Your screenshot shows your program is not running (The &quot;Run&quot; button is present, you need to press it.), and you are writing into the repl window. The website will apparently try to compile anything you write into that window as C code. So when you type &quot;12&quot;, the web site saves what you typed in a file called main.c and tries to compile it"}, {"owner": {"reputation": 27, "user_id": 6484341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqO6dLh_E5w/AAAAAAAAAAI/AAAAAAAAAB4/sPsrAnNX_Gk/photo.jpg?sz=128", "display_name": "Mystic Developer", "link": "https://stackoverflow.com/users/6484341/mystic-developer"}, "edited": false, "score": 0, "creation_date": 1528242637, "post_id": 50710379, "comment_id": 88429861, "body": "Yeah Daniel it seems to work fine on your repl.it...when I cut and paste to my repl.it the error occurs again though. Im stumped."}, {"owner": {"reputation": 27, "user_id": 6484341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqO6dLh_E5w/AAAAAAAAAAI/AAAAAAAAAB4/sPsrAnNX_Gk/photo.jpg?sz=128", "display_name": "Mystic Developer", "link": "https://stackoverflow.com/users/6484341/mystic-developer"}, "edited": false, "score": 0, "creation_date": 1528242891, "post_id": 50710379, "comment_id": 88429936, "body": "nos, as soon as I press it i get an exit status -1 message, BUT then it says the &quot;How much is 2 times 6&quot; so it has to be running my code, just not sure whats up. This is a screenshot of what I get as soon as I press run. <a href=\"https://ibb.co/nvEK58\" rel=\"nofollow noreferrer\">ibb.co/nvEK58</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1528331223, "post_id": 50710379, "comment_id": 88470528, "body": "when writing a prototype for a function that takes no parameters, place <code>void</code> between the parens.  Note: the <code>void</code> is not needed in the actual function signature."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1528331529, "post_id": 50710379, "comment_id": 88470599, "body": "when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter values) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1528331911, "post_id": 50710379, "comment_id": 88470696, "body": "these &#39;scattered&#39; statements; <code>int counter = 0;</code> and <code>while (counter &lt; 10)</code> and <code>counter++;</code>  would be much better written as: <code>#define MAX_TRIES 10</code>  and <code>for( int counter=0; counter&lt; MAX_TRIES; counter++ ) {...}</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1528332094, "post_id": 50710379, "comment_id": 88470740, "body": "regarding: <code>srand(1712);</code> This will always produce the same sequence of random numbers. Suggest using: <code>#include &lt;time.h&gt;</code> and <code>srand( (unsigned) time( NULL ) );</code>"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 9900617, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yev Barkalov", "link": "https://stackoverflow.com/users/9900617/yev-barkalov"}, "is_accepted": false, "score": 0, "last_activity_date": 1528250388, "creation_date": 1528250388, "answer_id": 50711242, "question_id": 50710379, "link": "https://stackoverflow.com/questions/50710379/my-code-is-fully-functioning-in-clion-but-i-get-an-error-in-repl-it/50711242#50711242", "title": "My code is fully functioning in CLion but I get an error in repl.it", "body": "<p>Yev from Repl.it here, the code you gave me works in <code>repl.it</code>\n<a href=\"https://repl.it/@yevb/CarpalCarefulOffices\" rel=\"nofollow noreferrer\">https://repl.it/@yevb/CarpalCarefulOffices</a></p>\n"}], "owner": {"reputation": 27, "user_id": 6484341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqO6dLh_E5w/AAAAAAAAAAI/AAAAAAAAAB4/sPsrAnNX_Gk/photo.jpg?sz=128", "display_name": "Mystic Developer", "link": "https://stackoverflow.com/users/6484341/mystic-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528250388, "creation_date": 1528242113, "question_id": 50710379, "link": "https://stackoverflow.com/questions/50710379/my-code-is-fully-functioning-in-clion-but-i-get-an-error-in-repl-it", "title": "My code is fully functioning in CLion but I get an error in repl.it", "body": "<p>Can someone please help me? I am new to C Programming and I am getting a compile issue in repl.it that is not appearing when I run my code in CLion.</p>\n\n<p>The error is: \nexit status -1</p>\n\n<p>main.c:1:1: error: expected identifier or '(' before numeric constant\n 12\n ^~</p>\n\n<pre><code>/*\n * Description: This is a multiplication problem generator, for children.\n * Created By: Michael Isenhour\n * Date Written: June 6th, 2018\n */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint generateRandomNumber();\nvoid askQuestion(int, int);\n\nint main(void) {\n    srand(1712);\n    int counter = 0;\n    while (counter &lt; 10) {\n        int randomlyGeneratedFirstNumber = generateRandomNumber();\n        int randomlyGeneratedSecondNumber = generateRandomNumber();\n        int answer = randomlyGeneratedFirstNumber * randomlyGeneratedSecondNumber;\n        int userAnswer;\n        askQuestion(randomlyGeneratedFirstNumber, randomlyGeneratedSecondNumber);\n        scanf(\"%d\", &amp;userAnswer);\n\n        while (userAnswer != answer) {\n            puts(\"No, Please try again\");\n            askQuestion(randomlyGeneratedFirstNumber, randomlyGeneratedSecondNumber);\n            scanf(\"%d\", &amp;userAnswer);\n        }\n\n        puts(\"Very Good\");\n        counter++;\n\n    }\n    return 0;\n}\n\nint generateRandomNumber() {\n    int result;\n    result = 1 + (rand() % 9);\n    return result;\n}\n\nvoid askQuestion(int firstNumber, int secondNumber) {\n    printf(\"How much is %d times %d\\n\", firstNumber, secondNumber);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "if-statement", "null"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 3, "creation_date": 1528240608, "post_id": 50710147, "comment_id": 88429384, "body": "Pretty sure addition isn&#39;t defined for a pair of pointer operands, only subtraction. Even if it was defined with integer-like behavior, it introduces a theoretical risk of wraparound back to <code>NULL</code> (using <code>|</code> would eliminate that at least). Is <code>!p1 &amp;&amp; !p2 &amp;&amp; !p3</code> unacceptably verbose?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528240634, "post_id": 50710147, "comment_id": 88429390, "body": "You can subtract 2 pointers from each other (to determine the distance between them), but you can&#39;t add pointers together, and you can&#39;t OR them together, either.  You will have to type-cast the pointers to integers to do the kind of arithmetic you are looking for"}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528240793, "post_id": 50710147, "comment_id": 88429432, "body": "Gah, I missed the type-casting I used in my crash-free test environment"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1528240939, "post_id": 50710147, "comment_id": 88429471, "body": "Oh, hey, way to completely change the question!"}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1528240990, "post_id": 50710147, "comment_id": 88429485, "body": "@JohnBollinger I am sorry, now the question becomes a better question, otherwise it would just simply not compile, which in this case the question &quot;is it bad&quot; is totally absurd. I initially wanted to ask that, but forgot the type-casting. Sometimes I really need to copy-paste sometimes I better not."}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "edited": false, "score": 1, "creation_date": 1528241416, "post_id": 50710147, "comment_id": 88429575, "body": "But now with the casts &quot;it can save a lot of typing and code space&quot; is also totally absurd, isn&#39;t it?"}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "edited": false, "score": 0, "creation_date": 1528241558, "post_id": 50710147, "comment_id": 88429603, "body": "@sebrockm fair point hahaha. Kinda looses that point"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1528241662, "post_id": 50710147, "comment_id": 88429623, "body": "Casting to <code>unsigned</code> is liable to lose half the pointer, since <code>unsigned</code> can be 32-bit and a pointer 64-bit. So you could have a non-NULL pointer that ends up with the value 0 when cast to <code>unsigned</code>. In short, everything about this is absolutely horrible."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1528241828, "post_id": 50710147, "comment_id": 88429660, "body": "@user3386109 well one can type cast it with long long, but the results can be very well beyond that too, the matter is whether the expression can evaluate to 0 if it goes beyond the scope. If it does then the condition may fail, but in extremely rare cases."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1528240877, "post_id": 50710196, "comment_id": 88429459, "body": "No.  Pointer arithmetic on a pointer to a scalar is, according to the standard, handled as if the pointer pointed to a single-element array."}, {"owner": {"reputation": 1420, "user_id": 250248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af290f43c3299fcfd234bc7f1d7d58ee?s=128&d=identicon&r=PG", "display_name": "Player1st", "link": "https://stackoverflow.com/users/250248/player1st"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1528241129, "post_id": 50710196, "comment_id": 88429518, "body": "Fair point.  I should have clarified it a little more however this is more defined as an exception to make some specific pointer arithmetic work."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1528242850, "post_id": 50710196, "comment_id": 88429925, "body": "I&#39;d say rather that the standard acknowledges that there is no way to distinguish via a pointer whether the pointed-to object is an element of an array, and there&#39;s no particular reason to make such a distinction.  Exactly opposite to your claim, in fact."}], "tags": [], "owner": {"reputation": 1420, "user_id": 250248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af290f43c3299fcfd234bc7f1d7d58ee?s=128&d=identicon&r=PG", "display_name": "Player1st", "link": "https://stackoverflow.com/users/250248/player1st"}, "is_accepted": false, "score": 0, "last_activity_date": 1528240746, "creation_date": 1528240746, "answer_id": 50710196, "question_id": 50710147, "link": "https://stackoverflow.com/questions/50710147/using-to-check-if-multiple-pointers-are-all-null/50710196#50710196", "title": "Using + to check if multiple pointers are all NULL", "body": "<p>Using any sort of pointer arithmetic on non-array pointers is undefined behavior in C.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528240977, "post_id": 50710207, "comment_id": 88429481, "body": "Yes, @Edenia, you were, but if you give me a moment I&#39;ll address the revised question too."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528241275, "post_id": 50710207, "comment_id": 88429547, "body": "I feel bad now, if you want you can leave what you have wrote and I will edit my question with a follow-up question that relates to your initial answer. (but you may have to clarify that it responds to my follow-up question)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528242068, "post_id": 50710207, "comment_id": 88429704, "body": "Well, @Edenia, although we do strongly prefer that you not make such impactful changes to a question after positing it, I think it would be best to avoid posting a second question on this topic.  Don&#39;t feel badly; just do better next time.  And consider my revised comments."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 5, "last_activity_date": 1528243166, "last_edit_date": 1528243166, "creation_date": 1528240810, "answer_id": 50710207, "question_id": 50710147, "link": "https://stackoverflow.com/questions/50710147/using-to-check-if-multiple-pointers-are-all-null/50710207#50710207", "title": "Using + to check if multiple pointers are all NULL", "body": "<p>Regarding to the original version of the question, which omitted the casts ...</p>\n\n<blockquote>\n  <p>it can save a lot of typing and code space, but how bad is it?</p>\n</blockquote>\n\n<p>Very, very bad.  Its behavior is altogether undefined, and if your compiler fails to reject it then you should get yourself a better one.  Subtraction of one pointer from another is defined under some circumstances (and yields an integer result), but it is never meaningful to <em>add</em> two pointers.</p>\n\n<p>Inasmuch as it shouldn't even compile, every keystroke used to type it instead of something that works is wasted, so no, it doesn't save typing or code space.</p>\n\n<blockquote>\n  <p>I don't see how it could give a false result.</p>\n</blockquote>\n\n<p>If the compiler actually accepts it, the result can be anything at all.  It is <strong>undefined</strong>.</p>\n\n<blockquote>\n  <p>so is it bad to do this, not-common way of checking if plenty of pointers are all NULL?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<hr>\n\n<p>Regarding the modified question in which all but one of the pointers are cast to integer:</p>\n\n<p>The casts do not rescue the code -- multiple problems remain.</p>\n\n<ol>\n<li><p>If the remaining pointer does not point to a valid object, or if the sum of the integers is negative or greater than the number of elements in the array to which the pointer points then the result of the pointer addition is still undefined (where a pointer to a scalar is treated as a pointer to a one-element array).  Of course, the integer sum can't be negative in this particular case, but that's of minimal advantage.</p></li>\n<li><p>C does not guarantee that casting a null pointer to an integer yields the value 0.  It is common for it to do so, but the language does not require it.</p></li>\n<li><p>C does not guarantee that non-null pointers convert to nonzero integers, and with your particular code that's a genuine risk.  The type <code>unsigned</code> is not necessarily large enough to afford a distinct value to every distinct pointer.</p></li>\n<li><p>Even if all of the foregoing were not a problem for some particular implementation -- that is, if you could safely perform arithmetic on a NULL pointer, and NULL pointers reliably converted to integers as zero, and non-NULL pointers reliably converted to nonzero -- the test could <em>still</em> go wrong because two nonzero unsigned integers can sum to zero.  That happens where the arithmetic sum of the two is equal to <code>UINT_MAX + 1</code>.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528241725, "post_id": 50710296, "comment_id": 88429637, "body": "I see, I also tested this idea and for me it worked 50000 times in a loop, but as you say there is no reason to think this will be always the case."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528242218, "post_id": 50710296, "comment_id": 88429745, "body": "Very interesting and enlightening. Those were two very useful answers."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528242822, "post_id": 50710296, "comment_id": 88429919, "body": "I am a big fan of optimizational programming. And I never thought of <code>if ((uintptr_t) p1 | (uintptr_t) p2 | (uintptr_t) p3 == 0)</code> so this is like christmas present answer to me."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528242874, "post_id": 50710296, "comment_id": 88429931, "body": "Although I am really surprised that this is faster considering that converting values is usually a very slow task for the compiler."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 1, "creation_date": 1528243245, "post_id": 50710296, "comment_id": 88430021, "body": "@Edenia: Casting between types with identical width is typically <i>zero</i> work at runtime (the cost at compile time is meaningless in the context of everything else). The bit representation doesn&#39;t change here; the cast performs literally no work at all besides telling the compiler that integer-like operations are allowed."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528243603, "post_id": 50710296, "comment_id": 88430084, "body": "@Edenia: Note that I edited that code to insert more parentheses\u2014the <code>|</code> operator has lower precedence than <code>==</code>, so the OR operations must be enclosed in parentheses. And remember, this is only valid in C implementations that define the result of pointer conversions suitably; it is not standard C. And you will not notice much performance different except when the tests appear in performance-critical code, particularly in loops executed a great many times."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528244197, "post_id": 50710296, "comment_id": 88430201, "body": "@EricPostpischil I know, I started programming in an old SDL-based platform for game creation that used EiC interpreter. There you have FPS restriction, therefore it was performance-critical. Also I occasionally program 16 Mhz processors"}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1528244307, "post_id": 50710296, "comment_id": 88430227, "body": "@ShadowRanger I see. I reasoned like that, because I know float-integer conversions are in fact, really slow."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1528244509, "post_id": 50710296, "comment_id": 88430264, "body": "@Edenia: Yes, floating point is typically a whole different suite of registers, and the bit representations are barely related. By contrast, at least on x86/x86-64, pointers and identically sized integers are stored in the same register type, and casting between identically sized pointers and integer types is purely about code logic, not operation. If a pointer is stored in <code>%rax</code>, and you cast it to <code>uintptr_t</code> for an operation, all that does is allow you to do integer math with it without getting warnings, it still uses <code>%rax</code> unmodified. There&#39;s no difference from an assembly point of view."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1528243494, "last_edit_date": 1528243494, "creation_date": 1528241552, "answer_id": 50710296, "question_id": 50710147, "link": "https://stackoverflow.com/questions/50710147/using-to-check-if-multiple-pointers-are-all-null/50710296#50710296", "title": "Using + to check if multiple pointers are all NULL", "body": "<p>There are multiple reasons why this is not a reliable method.</p>\n\n<p>First, when you add an integer to a pointer, the C standard does not say what happens if the result is outside of the array into which the pointer points. (For these purposes, pointing just one past the last element, the end of the array, counts as inside, not outside. Also, a pointer to a single object counts as an array of one object.) Note that the C standard does not just not say what the <strong>result</strong> of the addition is; it does not say what the <strong>behavior of the entire program</strong> is. So, once you execute an addition that goes outside of an array, you cannot predict (from the C standard) what your program will do at all.</p>\n\n<p>One likely result is that the compiler will see <code>pointer + integer + integer</code> and reason (or, more technically, apply transformations as if this reasoning were used) that <code>pointer + integer</code> is valid only if <code>pointer</code> is not <code>NULL</code>, and then the result is never <code>NULL</code>, so the expression <code>pointer + integer</code> is never <code>NULL</code>. Similarly, <code>pointer + integer + integer</code> is never <code>NULL</code>. Therefore <code>pointer + integer + integer == NULL</code> is always false, and we can optimize the program by removing this code completely. Thus, the code to handle the case when all pointers are <code>NULL</code> will be silently removed from your program.</p>\n\n<p>Second, even if the C standard did guarantee a result of the addition, this expression could, hypothetically, evaluate to <code>NULL</code> even if none of the pointers were <code>NULL</code>.  For example, consider a 16-bit address space where the first pointer were represented with the address 0x7000, the second were 0x6000, and the third were 0x3000. (I will also suppose these are <code>char *</code> pointers, so one element is one byte.) If we add these, the mathematical result is 0x10000. In 16-bit arithmetic, that wraps, so the computed result is 0x0000. Thus, the expression could evaluate to zero, which is likely used for <code>NULL</code>.</p>\n\n<p>Third, <code>unsigned</code> may be narrower than pointers (for example, it may be 32 bits while pointers are 64), so the cast may lose information\u2014there may be non-zero bits in the bits that were lost during the conversion, so the test will fail to detect them.</p>\n\n<p>There are situations where we want to optimize pointer tests, and there are legitimate but non-standard ways to do it. On some processors, branching can be expensive, so doing some arithmetic with one test and one branch may be faster than doing three tests and three branches. C provides an integer type intended for working with pointer representations:  <code>uintptr_t</code>, declared in <code>&lt;stdint.h&gt;</code>. With that, we can write this code:</p>\n\n<pre><code>if (((uintptr_t) p1 | (uintptr_t) p2 | (uintptr_t) p3) == 0) \u2026\n</code></pre>\n\n<p>What this does is convert each pointer to an unsigned integer of a width suitable for working with pointer representations. The C standard does not say what the result of this conversion is, but it is intended to be unsurprising, and C implementations for flat address spaces may document that the result is the memory address. They may also document that <code>NULL</code> is the zero address. Once we have these integers, we OR them together instead of adding them. The result of an OR has a bit set if either of the corresponding bits in its operands was set. Thus, if any one of the addresses is not zero, then the result will not be zero either. So this code, if executed in a suitable C implementation, will perform the test you desire.</p>\n\n<p>(I have used such tests in special high-performance code to test whether all pointers were aligned as desired, rather than to test for <code>NULL</code>. In that case, I had direct access to the compiler developers and could ensure the compiler would behave as desired. This is <strong>not</strong> standard C code.)</p>\n"}], "owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 50710296, "answer_count": 3, "score": 2, "last_activity_date": 1528243494, "creation_date": 1528240386, "last_edit_date": 1528240761, "question_id": 50710147, "link": "https://stackoverflow.com/questions/50710147/using-to-check-if-multiple-pointers-are-all-null", "title": "Using + to check if multiple pointers are all NULL", "body": "<p>Syntactically it makes sense (Although it looks like some other language, which I don't particularly enjoy), it can save a lot of typing and code space, but how bad is it?</p>\n\n<pre><code>if(p1 + (unsigned)p2 + (unsigned)p3 == NULL)\n{\n    // all pointers are NULL, exit\n}\n</code></pre>\n\n<p>Using pointer arithmetic with a pointer rvalue, I don't see how it could give a false result (the entire expression to evaluate to NULL even though not all pointers are NULL), but I don't exactly know how much evilness this potentially hides, so is it bad to do this, not-common way of checking if plenty of pointers are all NULL?</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1528239567, "post_id": 50710016, "comment_id": 88429118, "body": "You have an array of 4 pointers;  it occupies <code>4 * sizeof(char **)</code>, which will be 16 or 32 bytes depending on whether it is a 32-but or 64-bit compilation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9397860"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528239629, "post_id": 50710016, "comment_id": 88429142, "body": "@JonathanLeffler Why are u grouping the double pointers together? Why is it not a pointer to an array of pointers?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1528239758, "post_id": 50710016, "comment_id": 88429172, "body": "Because it is a 2D array of <code>char **</code>, @bananateam.  Each element of the array is a <code>char **</code>.  There is no extra storage required."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528240146, "post_id": 50710016, "comment_id": 88429273, "body": "A pointer to an array of pointers would be written as <code>char *(*ptr_to_array_of_ptrs)[2];</code> if the target is a 1D array of pointers."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1528240464, "post_id": 50710016, "comment_id": 88429347, "body": "You could ask the compiler: <code>printf(&quot;%zu&quot;, sizeof(array))</code>. The compiler is never wrong ;)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1528240487, "post_id": 50710016, "comment_id": 88429355, "body": "@user3386109 unless they are using a MS compiler that does not support <code>%zu</code> :D"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9397860"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528240598, "post_id": 50710016, "comment_id": 88429383, "body": "@JonathanLeffler Thank you I didn&#39;t know there was a difference!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9397860"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1528240638, "post_id": 50710016, "comment_id": 88429392, "body": "@M.M I tried using sizeof on Xcode but it was giving me large negative numbers when I used &quot;%d&quot; and &quot;%lu&quot; as recommended by Xcode."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528240836, "post_id": 50710016, "comment_id": 88429451, "body": "See <a href=\"https://stackoverflow.com/a/9053835/15168\">Correct format specifier to print pointer address?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9397860"}, "edited": false, "score": 0, "creation_date": 1528243017, "post_id": 50710016, "comment_id": 88429969, "body": "@PeteBecker It seems like youre saying it\u2019s just a pointer, and it can point to anything, so it should be just 8 bytes but apparently this is an array of char**, and is 32 bytes because theres 4."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528285559, "post_id": 50710016, "comment_id": 88447532, "body": "@bananateam, the right operators have precedence over the left ones, so it&#39;s a two dimensional array with two positions in either direction.  The double pointer has nothing special over the single pointer, as they are represented by an address (well, one is an address of an address, while the other is an address to a char) so there are <code>2x2 = 4</code> pointers in the array.  @jonathanLeffler is right in his calculations, and no grouping is done."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1528285814, "post_id": 50710016, "comment_id": 88447697, "body": "@M.M, in case your compiler doesn&#39;t use <code>%zu</code> format (that&#39;s not a compiler problem, but rather a <code>printf()</code> implementation, so it&#39;s not VC specific. But then, you can use <code>%llu</code> and convert the pointer with a cast, as in <code>(unsigned long long) sizeof(array)</code> before passing it to printf.  (same for <code>%lu</code> and <code>(unsigned long) sizeof(array)</code> if your platform doesn&#39;t support 64bit addresses)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1528286058, "post_id": 50710016, "comment_id": 88447872, "body": "You are asking a question related to <code>printf(3)</code> format implementation, which is not a C++ function and tag the question as <b>C++</b>.   Remove the C++ tag as this question has nothing to do with the implementation of the <code>printf(3)</code> function, so it is not a C++ question."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9397860"}, "edited": false, "score": 0, "creation_date": 1528240512, "post_id": 50710110, "comment_id": 88429364, "body": "Okay this makes more sense. I thought it was creating the 2nd case you mention and didnt know there was a distinguishment like that between the 2. THANKS!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 9, "last_activity_date": 1528240224, "last_edit_date": 1528240224, "creation_date": 1528239921, "answer_id": 50710110, "question_id": 50710016, "link": "https://stackoverflow.com/questions/50710016/what-is-the-size-of-the-following-declaration/50710110#50710110", "title": "What is the size of the following declaration?", "body": "<p>As <a href=\"https://cdecl.org/\" rel=\"noreferrer\">cdecl</a> could have told you (with a little fiddling), your declaration</p>\n\n<blockquote>\n<pre><code>char ** array[2][2];\n</code></pre>\n</blockquote>\n\n<p>declares <code>array</code> as an array of two arrays of two pointers to pointers to <code>char</code>.  That means a total of four elements of type <code>char **</code> (and nothing else).  C does not specify how large pointers are, nor even that pointers to different types have the same size, but it is common on 64-bit implementations for all pointers to be 8 bytes wide.  On such an implementation, the size of the declared object is 2 * 2 * 8 == 32 bytes.  There is no extra pointer.</p>\n\n<p>If you wanted a pointer to a 2 x 2 array of <code>char *</code>, that would be different:</p>\n\n<pre><code>char * (*array)[2][2];\n</code></pre>\n\n<p>... and the size of that is indeed the size of one pointer.  No storage is reserved in that case for the pointed-to 2D array.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9397860"}, "edited": false, "score": 0, "creation_date": 1528241094, "post_id": 50710221, "comment_id": 88429512, "body": "hmm i  think i did sizeof the same and used %d but got a huge negative number, dont know what i did"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1528241265, "post_id": 50710221, "comment_id": 88429543, "body": "@bananateam: Using <code>%d</code> to print either pointers or <code>size_t</code> values (the result of <code>sizeof()</code>) is basically wrong.  Use <code>%p</code> for pointers (converting to <code>void *</code>) and use <code>%zu</code> for <code>size_t</code>."}], "tags": [], "owner": {"reputation": 3932, "user_id": 233981, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/26b77ef1ab3e3df3df030435aea70568?s=128&d=identicon&r=PG", "display_name": "srking", "link": "https://stackoverflow.com/users/233981/srking"}, "is_accepted": true, "score": 2, "last_activity_date": 1528299952, "last_edit_date": 1528299952, "creation_date": 1528240995, "answer_id": 50710221, "question_id": 50710016, "link": "https://stackoverflow.com/questions/50710016/what-is-the-size-of-the-following-declaration/50710221#50710221", "title": "What is the size of the following declaration?", "body": "<p>The compiler allocates your whole array (32 bytes). You can investigate these questions with sizeof():</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar ** array[2][2];\nint main() {\n    printf(\"size = %zu\\n\", sizeof(array));\n    printf(\"size[0] = %zu\\n\", sizeof(array[0]));\n    printf(\"size[0][0] = %zu\\n\", sizeof(array[0][0]));\n    return 0;\n}\n</code></pre>\n\n<p>On x86_64 architecture returns:</p>\n\n<pre><code>size = 32\nsize[0] = 16\nsize[0][0] = 8\n</code></pre>\n\n<p>Each pointer is 8 bytes long, and your two-dimensional array contains 4 total.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9397860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 50710221, "answer_count": 2, "score": 0, "last_activity_date": 1528299952, "creation_date": 1528239248, "last_edit_date": 1528293003, "question_id": 50710016, "link": "https://stackoverflow.com/questions/50710016/what-is-the-size-of-the-following-declaration", "title": "What is the size of the following declaration?", "body": "<p>My friend and I are arguing over this one. </p>\n\n<pre><code>char **array[2][2]; \n</code></pre>\n\n<p>Is the size that this takes up in memory <code>8 + 2*2*8</code> \u2014 8 for the pointer to the array of pointers and then 32 for the array of pointers?\nOr is it just 8 because we are declaring a pointer to an array of pointers. This declarations doesn't have to allocate space for the array of pointers, just the pointer?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1528238635, "post_id": 50709925, "comment_id": 88428880, "body": "If <code>wchar_t</code> is 16 bits on your platform, how about <code>putwchar</code> in wchar.h?"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1528239164, "post_id": 50709925, "comment_id": 88429024, "body": "Split your sample into two bytes. This lets you choose endianness. With the same technique you can also fill a ~50ms <code>char[4096]</code> buffer with 2048 sample and <code>write(1,buffer,4096);</code> them all in one go."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1528239376, "post_id": 50709925, "comment_id": 88429070, "body": "Is the intent to print out the sample as a set of ASCII characters representing the binary value, or to use stdout for binary output? If the latter, I would highly recommend just writing a file so you don&#39;t break anyone&#39;s terminal."}, {"owner": {"reputation": 243, "user_id": 8993395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3fdN.jpg?s=128&g=1", "display_name": "Skoddie", "link": "https://stackoverflow.com/users/8993395/skoddie"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1528239747, "post_id": 50709925, "comment_id": 88429168, "body": "@Linuxios This application needs to interface with different destinations in different contexts, and I&#39;ve found that piping the output is the quickest way to do so. I had considered writing a file, but that doesn&#39;t work for some of my use cases."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1528240182, "post_id": 50709925, "comment_id": 88429283, "body": "@Skoddie: OK. Might just want to add some kind of check of whether stdout is a terminal and abort."}, {"owner": {"reputation": 243, "user_id": 8993395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3fdN.jpg?s=128&g=1", "display_name": "Skoddie", "link": "https://stackoverflow.com/users/8993395/skoddie"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1528240231, "post_id": 50709925, "comment_id": 88429293, "body": "@Linuxios Good call, I will do that as a typo actually took my system down at one point. Thank you!"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1528240817, "post_id": 50709925, "comment_id": 88429441, "body": "Sure, comes from personal experience <code>cat</code>ing the wrong files..."}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 8993395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3fdN.jpg?s=128&g=1", "display_name": "Skoddie", "link": "https://stackoverflow.com/users/8993395/skoddie"}, "edited": false, "score": 0, "creation_date": 1528239849, "post_id": 50710034, "comment_id": 88429199, "body": "Awesome. I had been considering doing exactly this, but wasn&#39;t sure that it was actually a good way to do it. Much appreciated!"}], "tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": true, "score": 2, "last_activity_date": 1528239370, "creation_date": 1528239370, "answer_id": 50710034, "question_id": 50709925, "link": "https://stackoverflow.com/questions/50709925/what-should-i-use-instead-of-putchar-for-16-bit-data/50710034#50710034", "title": "What should I use instead of putchar() for 16-bit data?", "body": "<p>You want to output a value that is encoded in two bytes. So output these two bytes successively. Which two bytes? It depends on how the 16-bit value is supposed to be encoded in two 8-bit values, i.e. on the <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianness</a> of the system that will read those two bytes.</p>\n\n<p>Little-endian:</p>\n\n<pre><code>uint16_t w = sinco(\u2026);\nputchar(w &amp; 0xff);\nputchar((w &gt;&gt; 8) &amp; 0xff);\n</code></pre>\n\n<p>Big-endian:</p>\n\n<pre><code>uint16_t w = sinco(\u2026);\nputchar((w &gt;&gt; 8) &amp; 0xff);\nputchar(w &amp; 0xff);\n</code></pre>\n\n<p>If the system that reads the value has the same endianness as your CPU, then you can use a different strategy: write the value by dumping its memory contents. You can read any value in memory as an array of bytes, and you can use <code>fwrite</code> to write an array of bytes.</p>\n\n<pre><code>uint16_t w = sinco(\u2026);\nfwrite(&amp;w, 1, 2, stdout);\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 8993395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3fdN.jpg?s=128&g=1", "display_name": "Skoddie", "link": "https://stackoverflow.com/users/8993395/skoddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 50710034, "answer_count": 1, "score": 3, "last_activity_date": 1528240011, "creation_date": 1528238554, "last_edit_date": 1528240011, "question_id": 50709925, "link": "https://stackoverflow.com/questions/50709925/what-should-i-use-instead-of-putchar-for-16-bit-data", "title": "What should I use instead of putchar() for 16-bit data?", "body": "<p>I am fairly new to C, and have written a simple program which generates a sine wave with a specified frequency and sample rate, and sends that to stdout as an unsigned 8-bit byte.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdint.h&gt;\n\nuint8_t sinco(int iCarrier, int iSampleRate, unsigned long ulIndex){return (sin(iCarrier * (2 * M_PI) * ulIndex / iSampleRate) * 127) + 128;}\n\nvoid main(){    \n    unsigned long t;\n    const int iCarrier = 500;\n    const int iSampleRate = 8000;\n\n    for(t=0;;t++){\n        putchar(sinco(iCarrier, iSampleRate, t));\n    }\n}\n</code></pre>\n\n<p>I realize that putchar() was not the most appropriate function, but it worked for what I needed at the time. Now I am currently trying to modify the program to output an unsigned 16-bit number, but I'm not sure what to replace putchar() with.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdint.h&gt;\n\nuint16_t sinco(int iCarrier, int iSampleRate, unsigned long ulIndex){return (sin(iCarrier * (2 * M_PI) * ulIndex / iSampleRate) * 65535) + 65536;}\n\nvoid main(){    \n    unsigned long t;\n    const int iCarrier = 500;\n    const int iSampleRate = 8000;\n\n    for(t=0;;t++){\n        printf(%hu, sinco(iCarrier, iSampleRate, t));\n    }\n}\n</code></pre>\n\n<p>However once the value gets larger than 65,536, the program starts sending 32 bits to stdout. Is there a better alternative to putchar I can use which will correctly wrap around?</p>\n"}, {"tags": ["c++", "c", "visual-c++"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1528237333, "post_id": 50709681, "comment_id": 88428537, "body": "It means that the first part of the <code>for</code> statement was already set somewhere in the code. It would make more sense in a context - ie proper code provided."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1528237411, "post_id": 50709681, "comment_id": 88428558, "body": "You need basics to understand, see the for loop syntax: <a href=\"http://en.cppreference.com/w/cpp/language/for\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/for</a>"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1528238334, "post_id": 50709681, "comment_id": 88428809, "body": "That&#39;s the thing - it doesn&#39;t do anything.  The semi-colon is there to tell the compiler that what&#39;s coming next is the test to exit the loop (or not).  Presumably, <code>i</code> was setup beforehand."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9099762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd605f710f57b3ceb64656496b35b6f?s=128&d=identicon&r=PG&f=1", "display_name": "BonQuiQui", "link": "https://stackoverflow.com/users/9099762/bonquiqui"}, "edited": false, "score": 0, "creation_date": 1528237104, "post_id": 50709702, "comment_id": 88428456, "body": "so why is it there if it does nothing ?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 29, "user_id": 9099762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd605f710f57b3ceb64656496b35b6f?s=128&d=identicon&r=PG&f=1", "display_name": "BonQuiQui", "link": "https://stackoverflow.com/users/9099762/bonquiqui"}, "edited": false, "score": 0, "creation_date": 1528237125, "post_id": 50709702, "comment_id": 88428463, "body": "@BonQuiQui <code>for</code> has to have 3 parts, separated by 2 semicolons. All 3 parts are optional, but semicolons must remain there."}, {"owner": {"reputation": 29, "user_id": 9099762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd605f710f57b3ceb64656496b35b6f?s=128&d=identicon&r=PG&f=1", "display_name": "BonQuiQui", "link": "https://stackoverflow.com/users/9099762/bonquiqui"}, "edited": false, "score": 0, "creation_date": 1528237147, "post_id": 50709702, "comment_id": 88428471, "body": "wouldn&#39;t it be easier if it just wasn&#39;t there ?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 29, "user_id": 9099762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd605f710f57b3ceb64656496b35b6f?s=128&d=identicon&r=PG&f=1", "display_name": "BonQuiQui", "link": "https://stackoverflow.com/users/9099762/bonquiqui"}, "edited": false, "score": 2, "creation_date": 1528237178, "post_id": 50709702, "comment_id": 88428479, "body": "@BonQuiQui Then how would you determine which of 3 parts was omitted?"}, {"owner": {"reputation": 29, "user_id": 9099762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd605f710f57b3ceb64656496b35b6f?s=128&d=identicon&r=PG&f=1", "display_name": "BonQuiQui", "link": "https://stackoverflow.com/users/9099762/bonquiqui"}, "edited": false, "score": 0, "creation_date": 1528237231, "post_id": 50709702, "comment_id": 88428501, "body": "yeah, i got it now, thank you very much"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1528237187, "last_edit_date": 1528237187, "creation_date": 1528237037, "answer_id": 50709702, "question_id": 50709681, "link": "https://stackoverflow.com/questions/50709681/what-does-fori-mi-mean/50709702#50709702", "title": "What does for(;i&lt;=m;i++) mean?", "body": "<blockquote>\n  <p>The thing that i don't understand is why is there a \";\" with nothing in front of it. what does it do, what does it mean.</p>\n</blockquote>\n\n<p>It is a valid statement that does nothing.</p>\n\n<p>You can have empty statements any where you like. It's quite common to see them in looping constructs.</p>\n"}, {"tags": [], "owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "is_accepted": true, "score": 6, "last_activity_date": 1535514299, "last_edit_date": 1535514299, "creation_date": 1528237291, "answer_id": 50709741, "question_id": 50709681, "link": "https://stackoverflow.com/questions/50709681/what-does-fori-mi-mean/50709741#50709741", "title": "What does for(;i&lt;=m;i++) mean?", "body": "<p>A <code>for</code> statement has the following syntax:</p>\n\n<pre><code>for (declaration; condition; post-condition)\n</code></pre>\n\n<p>The declaration happens once and once only. The condition is checked at the start of each loop and determines whether the loop will proceed, and the post-condition happens at the end of the loop.</p>\n\n<p>Any and all of these statements can be omitted.</p>\n\n<p>Yours is simply a <code>for</code> loop that does not require a declaration, perhaps because something is already declared, like so:</p>\n\n<pre><code>int i = 0;\nfor (;i&lt;=m;++i)\n</code></pre>\n\n<p>If you wanted a loop to run indefinitely, you could omit the second statement:</p>\n\n<pre><code>for (int i = 0; ;++i)\n</code></pre>\n\n<p>In this regard, infinite loops are typically written as</p>\n\n<pre><code>for (;;)\n</code></pre>\n\n<p>You may wish to omit the post-condition, perhaps because you're using iterators and change it during the loop</p>\n\n<pre><code>for (auto it = std::begin(v); it != std::end(v);)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528238721, "post_id": 50709746, "comment_id": 88428906, "body": "Note that you can put anything you want in that space, including stuff that has absolutely nothing to do with the for loop&#39;s operation."}], "tags": [], "owner": {"reputation": 11, "user_id": 9893610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Vaibhav Setia", "link": "https://stackoverflow.com/users/9893610/vaibhav-setia"}, "is_accepted": false, "score": 1, "last_activity_date": 1528365497, "last_edit_date": 1528365497, "creation_date": 1528237334, "answer_id": 50709746, "question_id": 50709681, "link": "https://stackoverflow.com/questions/50709681/what-does-fori-mi-mean/50709746#50709746", "title": "What does for(;i&lt;=m;i++) mean?", "body": "<p>The i variable must have been initialized somewhere else.. so it picks the value from there and the loop iterates from that value of i.</p>\n"}, {"tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": false, "score": 4, "last_activity_date": 1528237379, "creation_date": 1528237379, "answer_id": 50709754, "question_id": 50709681, "link": "https://stackoverflow.com/questions/50709681/what-does-fori-mi-mean/50709754#50709754", "title": "What does for(;i&lt;=m;i++) mean?", "body": "<blockquote>\n  <p>what does it do, what does it mean ?</p>\n</blockquote>\n\n<p>It means that the initializing part of the for-loop is empty, i.e. no loop-variable is initialized in the scope of the loop.\nThis construct is most common in situations where you want to access the loop variable after the loop is left, e.g. in</p>\n\n<pre><code>int i = 7;\nfor(; i &lt; 100; ++i) {\n    if(isPrime(i)) break;\n}\nassert(i == 11); // can access i now\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 5322970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Df3yne9AKw/AAAAAAAAAAI/AAAAAAAAAfc/WwKrhiH-i7s/photo.jpg?sz=128", "display_name": "alfredmack", "link": "https://stackoverflow.com/users/5322970/alfredmack"}, "is_accepted": false, "score": 2, "last_activity_date": 1528237591, "creation_date": 1528237591, "answer_id": 50709792, "question_id": 50709681, "link": "https://stackoverflow.com/questions/50709681/what-does-fori-mi-mean/50709792#50709792", "title": "What does for(;i&lt;=m;i++) mean?", "body": "<p>This means a part of this statement is declared somewhere before.</p>\n\n<pre><code>i=0\n\nfor(;i&lt;=m;i++) \n</code></pre>\n\n<p>This loop says,for every time that i is smaller than m, I'm going to do whatever is in the code block. Whenever i reaches m value, I'll stop. After each iteration of the loop, it increments i by 1 (i++), so that the loop will eventually stop when it meets the i &lt;=m.</p>\n"}], "owner": {"reputation": 29, "user_id": 9099762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd605f710f57b3ceb64656496b35b6f?s=128&d=identicon&r=PG&f=1", "display_name": "BonQuiQui", "link": "https://stackoverflow.com/users/9099762/bonquiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1827, "favorite_count": 0, "closed_date": 1528237453, "accepted_answer_id": 50709741, "answer_count": 5, "score": 0, "last_activity_date": 1535514299, "creation_date": 1528236928, "last_edit_date": 1528237340, "question_id": 50709681, "link": "https://stackoverflow.com/questions/50709681/what-does-fori-mi-mean", "closed_reason": "Duplicate", "title": "What does for(;i&lt;=m;i++) mean?", "body": "<p>I'm studying for my exam and I bumped into this example that has a line that says:</p>\n\n<pre><code>for(;i&lt;=m;i++)\n</code></pre>\n\n<p>The thing I don't understand is why is there a <code>;</code> with nothing in front of it?\nwhat does it do? What does it mean?</p>\n"}, {"tags": ["c", "binary", "char", "binaryfiles"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1528236971, "post_id": 50709660, "comment_id": 88428425, "body": "Is that your code? The html <code>&lt;br&gt;</code> suggests you copied it. Please show a dump of the output file."}, {"owner": {"reputation": 15, "user_id": 9900172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G_AFx42tKMI/AAAAAAAAAAI/AAAAAAAABeU/qPrUPnpJDFA/photo.jpg?sz=128", "display_name": "mirzemehdi", "link": "https://stackoverflow.com/users/9900172/mirzemehdi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1528237081, "post_id": 50709660, "comment_id": 88428454, "body": "Yes. Actually i did it ,because when i write it without &lt;br&gt; it shows code messy"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1528237606, "post_id": 50709660, "comment_id": 88428609, "body": "Why have you destroyed my formatting correction? Rolled back to the code you posted."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1528237626, "post_id": 50709660, "comment_id": 88428612, "body": "There&#39;s no such thing as a &quot;binary&quot; or &quot;text&quot; file. Files are files, bytes are bytes. It is how one chooses to <i>interpret</i> those bytes that makes a file a certain type. In C, when you open a file in &quot;b&quot; mode, that means whatever bytes you write will go the the file as is: if you write a &#39;c&#39;, it will get a &#39;c&#39;. In text mode, the library may add or change some bytes, particularly things like line endings, to conform the system&#39;s idea of what &quot;text&quot; is, but the file itself is still just bytes."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1528237679, "post_id": 50709660, "comment_id": 88428629, "body": "The program (presumably a text editor) that you&#39;re opening the file in sees the <code>&#39;c&#39;</code> character as the only byte appearing in the file, sees that this byte represents the <code>c</code> character in your platform&#39;s default character set, and reaches the rightful conclusion that the file is actually a text file. When writing <code>int a = 5</code>, none of the bytes that make up the <code>int</code> represent a valid character in your platform&#39;s character set, thus leading the program to tell you that the file is &quot;binary&quot;."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528237718, "post_id": 50709660, "comment_id": 88428638, "body": "@LeeDanielCrocker : This is just spot on. I really wish more programmers understood the difference exactly this way."}, {"owner": {"reputation": 15, "user_id": 9900172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G_AFx42tKMI/AAAAAAAAAAI/AAAAAAAABeU/qPrUPnpJDFA/photo.jpg?sz=128", "display_name": "mirzemehdi", "link": "https://stackoverflow.com/users/9900172/mirzemehdi"}, "edited": false, "score": 0, "creation_date": 1528238761, "post_id": 50709660, "comment_id": 88428921, "body": "i didn&#39;t get it .Does it mean i can&#39;t write character or an array of characters to binary file?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9900172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G_AFx42tKMI/AAAAAAAAAAI/AAAAAAAABeU/qPrUPnpJDFA/photo.jpg?sz=128", "display_name": "mirzemehdi", "link": "https://stackoverflow.com/users/9900172/mirzemehdi"}, "edited": false, "score": 0, "creation_date": 1528237885, "post_id": 50709770, "comment_id": 88428683, "body": "it is still the same if i change mode to ab or rb+ . But i need to write this character to binary file"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 15, "user_id": 9900172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G_AFx42tKMI/AAAAAAAAAAI/AAAAAAAABeU/qPrUPnpJDFA/photo.jpg?sz=128", "display_name": "mirzemehdi", "link": "https://stackoverflow.com/users/9900172/mirzemehdi"}, "edited": false, "score": 0, "creation_date": 1528250172, "post_id": 50709770, "comment_id": 88431385, "body": "@mirzemehdi All files are binary; that is, a sequence of bytes.  If all the bytes in a file represent printable or whitespace characters, many programs will treat that file as a &quot;text file&quot;.  Your file contains only one byte, and it has the same value as a printable character, so those programs will claim or presume it to be text.  But if any program wants to treat it as a binary file and just read that byte, it still can, and will get the value you put in."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1528238378, "last_edit_date": 1528238378, "creation_date": 1528237473, "answer_id": 50709770, "question_id": 50709660, "link": "https://stackoverflow.com/questions/50709660/why-i-cant-write-char-to-binary-file-in-c-programming/50709770#50709770", "title": "Why i can&#39;t write char to binary file in C programming?", "body": "<p>You're writing to an existing file which was opened with mode \"wb\", <strong><a href=\"http://www.cplusplus.com/reference/cstdio/fopen/\" rel=\"nofollow noreferrer\">which will overwrite the existing contents of the file</a></strong>. So, your single character <code>'c'</code> is written to the beginning of the file, and regardless of whatever was in there before, it's now the only thing in your file.</p>\n\n<p>As for why it's no longer being considered binary, that's because <code>'c'</code> is a printable character. </p>\n"}], "owner": {"reputation": 15, "user_id": 9900172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G_AFx42tKMI/AAAAAAAAAAI/AAAAAAAABeU/qPrUPnpJDFA/photo.jpg?sz=128", "display_name": "mirzemehdi", "link": "https://stackoverflow.com/users/9900172/mirzemehdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1528248475, "creation_date": 1528236754, "last_edit_date": 1528248475, "question_id": 50709660, "link": "https://stackoverflow.com/questions/50709660/why-i-cant-write-char-to-binary-file-in-c-programming", "title": "Why i can&#39;t write char to binary file in C programming?", "body": "<pre><code>int main(){\n\n    FILE *fptr=fopen(\"clients.dat\",\"wb\");\n    char a='c';\n    //int b=5;\n    fwrite(&amp;a,sizeof(char),1,fptr);\n}\n</code></pre>\n\n<p>Why when i run this program \"clients.dat\" is not binary file.But if i comment char and uncomment int then clients.dat file is binary file.It is the same in struct. If there is only char inside struct then it doesn't create binary file,but if there is char and other data type then it creates binary file.</p>\n\n<p>Can anyone write the reason of this?</p>\n"}, {"tags": ["c", "threadpool", "mutex"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1528236769, "post_id": 50709626, "comment_id": 88428364, "body": "You mean destryLock?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528236792, "post_id": 50709626, "comment_id": 88428374, "body": "Um. Whoever that author is, they need a refresher course on abandoning mutexes. They lock <code>destroyLock</code>, then just flat out <code>return;</code> if <code>threadPool-&gt;canInsert </code> is zero. Woe be unto whoever is next in line to try that; they&#39;ll be waiting awhile. That code has &quot;someone other than the author added <code>destroyLock</code> after the fact&quot; written all over it."}, {"owner": {"reputation": 109, "user_id": 9837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993923eb5784f74211b791d799bdef8?s=128&d=identicon&r=PG&f=1", "display_name": "elihar", "link": "https://stackoverflow.com/users/9837518/elihar"}, "edited": false, "score": 0, "creation_date": 1528236889, "post_id": 50709626, "comment_id": 88428401, "body": "yes I meant destryLock."}, {"owner": {"reputation": 109, "user_id": 9837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993923eb5784f74211b791d799bdef8?s=128&d=identicon&r=PG&f=1", "display_name": "elihar", "link": "https://stackoverflow.com/users/9837518/elihar"}, "edited": false, "score": 0, "creation_date": 1528237003, "post_id": 50709626, "comment_id": 88428439, "body": "WhozCraig, can you elaborate on what you meant and how to fix it? I&#39;m not sure I understood... Thanks a lot!"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 2, "creation_date": 1528237144, "post_id": 50709626, "comment_id": 88428468, "body": "Also its ridiculous to drop one letter from a word to \u201cabbreviate\u201d it. Just makes it harder to spell. Anal retentive, I know, but annoying crap like that adds up. \u2018dstryLck\u2019 or \u2018destroyLock\u2019, the latter hardly being crazy long..."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 2, "creation_date": 1528237265, "post_id": 50709626, "comment_id": 88428509, "body": "@zzxyz Surely &#39;dstryLck&#39; is short for &#39;Does Try Luck&#39;."}, {"owner": {"reputation": 109, "user_id": 9837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993923eb5784f74211b791d799bdef8?s=128&d=identicon&r=PG&f=1", "display_name": "elihar", "link": "https://stackoverflow.com/users/9837518/elihar"}, "edited": false, "score": 0, "creation_date": 1528238320, "post_id": 50709626, "comment_id": 88428804, "body": "Can someone please explain to me how to fix that mistake that WhozCraig pointed out? Thanks!"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1528238778, "post_id": 50709626, "comment_id": 88428927, "body": "In <code>tpDestroy</code>, when you do the <code>return</code>, you are leaving the function with the <code>destryLock</code> mutex <i>locked</i>--not what you want. Add a <code>pthread_mutex_unlock(&amp;destryLock);</code> <i>before</i> the <code>return</code> (in the <code>else</code> clause). Do <i>not</i> move the old one (just below the <code>else</code> clause)--add a new one."}, {"owner": {"reputation": 109, "user_id": 9837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993923eb5784f74211b791d799bdef8?s=128&d=identicon&r=PG&f=1", "display_name": "elihar", "link": "https://stackoverflow.com/users/9837518/elihar"}, "edited": false, "score": 0, "creation_date": 1528239126, "post_id": 50709626, "comment_id": 88429015, "body": "thank you very much all. If its not too much to ask I would love to get an answer to my original question about the reason, if there is one, to define the destryLock not as part of the threadpool struct. Or more generally how should the mutexes be defined correctly?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1528239915, "post_id": 50709626, "comment_id": 88429226, "body": "@elihar The short answer is that in this particular case, the way the lock is used, it is effectively global (2 different thread pools objects would have to go through the lock section one at a time, even though that&#39;s not necessary to ensure what the locking area is trying to ensure (that each threadpool only gets destroyed once)).  So, in this case, it&#39;s wrong.  There&#39;s probably other wrong things, which is why the slow answer."}, {"owner": {"reputation": 109, "user_id": 9837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993923eb5784f74211b791d799bdef8?s=128&d=identicon&r=PG&f=1", "display_name": "elihar", "link": "https://stackoverflow.com/users/9837518/elihar"}, "edited": false, "score": 0, "creation_date": 1528240288, "post_id": 50709626, "comment_id": 88429306, "body": "So can you please tell me the correct way I should use it?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1528240740, "post_id": 50709626, "comment_id": 88429417, "body": "@elihar - Well, a good start is moving it into the threadpool struct and initializing it in the same place the others are being initialized in.  The problem there being I think there are other logic problems, such as dequeueing an object associated with that threadpool using the <code>lock</code> mutex potentially while the threadpool is being destroyed."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1528241040, "post_id": 50709626, "comment_id": 88429498, "body": "@elihar - If I was responsible for this code, I would probably spend half a day studying it, double-checking documentation, etc.  Certainly at least one person who had no clue what they were doing has worked on it.  Anyway, point being without spending more time than I have available, i&#39;d be reluctant to offer concrete advice.  That said, moving the mutex into the struct couldn&#39;t hurt anything, but is unlikely to help anything either, since there is almost certainly only one threadpool object."}], "answers": [{"tags": [], "owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "is_accepted": false, "score": 2, "last_activity_date": 1528259423, "creation_date": 1528259423, "answer_id": 50712267, "question_id": 50709626, "link": "https://stackoverflow.com/questions/50709626/how-and-where-to-declare-a-mutex/50712267#50712267", "title": "How and where to declare a mutex", "body": "<p>It's not completely clear from the code what the intent of the <code>destryLock</code> mutex is, especially since it's not initialized with the <a href=\"https://linux.die.net/man/3/pthread_mutex_init\" rel=\"nofollow noreferrer\"><code>PTHREAD_MUTEX_INITIALIZER</code></a> static initializer, nor is it initialized with <code>pthread_mutex_init</code>. It is destroyed however in that <code>tpDestroy</code> function, so any calls to <a href=\"https://linux.die.net/man/3/pthread_mutex_lock\" rel=\"nofollow noreferrer\"><code>pthread_mutex_lock</code></a> are likely producing the <code>EINVAL</code> error.</p>\n\n<p>That being said, based on what <code>tpDestroy</code> looks like it's <em>supposed</em> to do, that is, destroy the thread pool object created with <code>tpCreate</code>, it's not clear in that code what the intent was for the logic; it should be noted that a deadlock condition can occur with this:</p>\n\n<pre><code>pthread_mutex_lock(&amp;destryLock);\n// first time enter to tpDestory with valid thread pool\nif ( threadPool-&gt;canInsert != 0) {\n    threadPool-&gt;canInsert = 0;\n    // make sure tpDestroy will ne called only once for thr thread pool\n} else {\n    return; // dead lock since not unlocking after having locked\n}\npthread_mutex_unlock(&amp;destryLock);\n</code></pre>\n\n<p>This leads one to believe that this code was built (at least in part) by someone who didn't fully understand multi-threading, or didn't quite understand how the design was to fit with the thread pool.</p>\n\n<p>It would make sense to put the <code>destryLock</code> mutex within the thread pool struct itself since the function is operating on the thread pool object passed in, and not on a global one.</p>\n\n<blockquote>\n  <p>I would love to know the correct place to declare mutexes that are being used in the same way they are used here.</p>\n</blockquote>\n\n<p>This question is a little broad given your understanding of multi-threading and synchronization primitives, instead, I'll focus on <em>why</em> you want a mutex versus <em>where</em> you want it.</p>\n\n<p>A mutex allows for areas of code to be blocked off by multiple threads so that only one thread can access the code at a time. You do this because it's entirely possible on multi-core systems for multiple threads to access the same data at the same time, thus causing race conditions to occur and thus undefined behavior to occur.</p>\n\n<p>If you want to block off code from multiple threads, then the <em>where</em> can become a little more clear since you'll be able to ascertain if a mutex should be a global/local static object, or if it should be a member object.</p>\n\n<p>As an example, say I have a game with a bunch of enemies; I'll likely keep the set of enemies in a list of some sort. When I want to iterate over the list of enemies, say for collision detection, AI or other game effects, if I have multiple threads in my game acting on the enemy list, I might want a mutex to lock on the entire list while I preform whatever game logic on the enemies so the state of the enemies can be accurate for all threads. This however might not be the best option since it can introduce lag; instead, I might want a mutex on each enemy and only lock on the enemy who's affected by the logic.</p>\n\n<p>So it's more about what objects with a mutable state you want to protect.</p>\n\n<p>I hope that can help.</p>\n"}], "owner": {"reputation": 109, "user_id": 9837518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d993923eb5784f74211b791d799bdef8?s=128&d=identicon&r=PG&f=1", "display_name": "elihar", "link": "https://stackoverflow.com/users/9837518/elihar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1367, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1528259423, "creation_date": 1528236514, "question_id": 50709626, "link": "https://stackoverflow.com/questions/50709626/how-and-where-to-declare-a-mutex", "title": "How and where to declare a mutex", "body": "<p>I'm new to threading and I'm trying to figure out, why in this implementation of a threadpool with queue there is a mutex (dstrymutex)\nthat is defined in the c file and not as part of the struct threadpool as all the other mutexes. Is there a reason for this?\nAnd while we are at it, I would love to know the correct place to declare mutexes that are being used in the same way they are used here.\nThanks a lot!</p>\n\n<p>Here is the code:\nh file:</p>\n\n<pre><code>#ifndef __THREAD_POOL__\n#define __THREAD_POOL__\n\n#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include \"osqueue.h\"\n\n\n#define FAILURE -1\n#define SUCCESS 0\n#define DONT_WAIT_FOR_TASKS 0\n\ntypedef struct thread_pool\n{\n     //The field x is here because a struct without fields\n     //doesn't compile. Remove it once you add fields of your own\n     int numOfThreads;\n     pthread_t* threads;\n     struct os_queue* tasksQueue;\n     pthread_mutex_t lock;\n     pthread_mutex_t queueLock;\n     pthread_cond_t notify;\n     int stopped;\n     int canInsert;\n}ThreadPool;\n\n/**\n * creates a thread pool struct.\n * @param numOfThreads number of threads in the thread pool.\n * @return reference to new thread pool struct if succeeded, NULL if failed.\n */\nThreadPool* tpCreate(int numOfThreads);\n\n/**\n * Destroys the thread pool.\n * @param threadPool thread pool\n * @param shouldWaitForTasks 0 - dont wait for tasks in the queue, else - wait for tasks.\n */\nvoid tpDestroy(ThreadPool* threadPool, int shouldWaitForTasks);\n\n/**\n * inserts a task to the tasks queue of the thread pool.\n * @param threadPool thread pool\n * @param computeFunc task\n * @param param argument to the task\n * @return 0- success , -1 - fail\n */\nint tpInsertTask(ThreadPool* threadPool, void (*computeFunc) (void *), void* param);\n\n#endif\n</code></pre>\n\n<p>c file:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include \"threadPool.h\"\n#define STDERR_FD 2\n#define SYS_CALL_FAILURE 10\n\npthread_mutex_t destryLock;\n\ntypedef struct task\n{\n    void (*computeFunc)(void *param);\n    void* param;\n}Task;\n\n/**\n * prints error in sys call to stderr.\n */\nvoid printErrorInSysCallToSTDERR() {\n    char error_msg[] = \"Error in system call\\n\";\n    write(STDERR_FD, error_msg, sizeof(error_msg));\n}\n\n/**\n * threads function. tasks are taken and executed by the threads in the thread pool from the tasks queue.\n * @param args expected ThreadPool*\n * @return void\n */\nvoid* execute(void* args) {\n    ThreadPool* tp = (ThreadPool*)args;\n    struct os_queue* taskQueue = tp-&gt;tasksQueue;\n    printf(\"New thread was created\\n\");\n\n    while (!tp-&gt;stopped &amp;&amp; !(tp-&gt;canInsert == 0 &amp;&amp; osIsQueueEmpty(taskQueue))) {\n        /* Lock must be taken to wait on conditional variable */\n        pthread_mutex_lock(&amp;(tp-&gt;queueLock));\n\n        /* Wait on condition variable, check for spurious wakeups.\n           When returning from pthread_cond_wait(), we own the lock. */\n        if((osIsQueueEmpty(taskQueue)) &amp;&amp; (!tp-&gt;stopped)) {\n            printf(\"Busy\\n\");\n            pthread_cond_wait(&amp;(tp-&gt;notify), &amp;(tp-&gt;queueLock));\n        }\n        pthread_mutex_unlock(&amp;(tp-&gt;queueLock));\n\n        pthread_mutex_lock(&amp;(tp-&gt;lock));\n        if (!(osIsQueueEmpty(taskQueue))) {\n            // take task from the queue\n            Task* task = osDequeue(taskQueue);\n            pthread_mutex_unlock(&amp;(tp-&gt;lock));\n            // execute task\n            task-&gt;computeFunc(task-&gt;param);\n            free(task);\n        }\n        else {\n            pthread_mutex_unlock(&amp;(tp-&gt;lock));\n        }\n    }\n}\n\n/**\n * creates a thread pool struct.\n * @param numOfThreads number of threads in the thread pool.\n * @return reference to new thread pool struct if succeeded, NULL if failed.\n */\nThreadPool* tpCreate(int numOfThreads) {\n    int out = open(\"output\",  O_CREAT | O_TRUNC | O_WRONLY, 0644);\n    if (out == -1) {\n        printf(\"Failed to open output file\\n\");\n        printErrorInSysCallToSTDERR();\n        exit(SYS_CALL_FAILURE);\n    }\n    // replace standard output with output file\n    if (dup2(out, STDOUT_FILENO) == -1) {\n        printf(\"Failed to operate dup2 for out\\n\");\n        printErrorInSysCallToSTDERR();\n        exit(SYS_CALL_FAILURE);\n    }\n\n    ThreadPool* tp = (ThreadPool*)malloc(sizeof(ThreadPool));\n    if (tp == NULL) {\n        printf(\"Failure: allocate memory for thread pool struct\");\n        return NULL;\n    }\n    tp-&gt;numOfThreads = numOfThreads;\n\n    tp-&gt;threads = (pthread_t*)malloc(sizeof(pthread_t) * tp-&gt;numOfThreads);\n    if (tp-&gt;threads == NULL) {\n        printf(\"Failure: allocate memory for threads array\");\n        return NULL;\n    }\n\n    tp-&gt;tasksQueue = osCreateQueue();\n    pthread_mutex_init(&amp;(tp-&gt;lock), NULL);\n    tp-&gt;stopped = 0;\n    tp-&gt;canInsert = 1;\n\n    if (pthread_mutex_init(&amp;(tp-&gt;queueLock), NULL) != 0 ||\n            pthread_mutex_init(&amp;(tp-&gt;queueLock), NULL) != 0 ||\n            pthread_cond_init(&amp;(tp-&gt;notify), NULL) != 0) {\n        printf(\"Failure: initialize one required mutex or more\\n\");\n        tpDestroy(tp, 0);\n        return NULL;\n    }\n\n    int i;\n    for (i = 0; i &lt; tp-&gt;numOfThreads; i++) {\n         if(pthread_create(&amp;(tp-&gt;threads[i]), NULL, execute, (void *)tp) != 0) {\n             printf(\"Failure: creating a thread failed.\\n\");\n         }\n    }\n\n    return tp;\n}\n\n/**\n * inserts a task to the tasks queue of the thread pool.\n * @param threadPool thread pool\n * @param computeFunc task\n * @param param argument to the task\n * @return 0- success , -1 - fail\n */\nint tpInsertTask(ThreadPool* threadPool, void (*computeFunc) (void *), void* param) {\n    if(threadPool == NULL || computeFunc == NULL) {\n        return FAILURE;\n    }\n\n    if (!(threadPool-&gt;canInsert)) {\n        return FAILURE;\n    }\n\n    Task* task = (Task*)malloc(sizeof(Task));\n    if (task == NULL) {\n        printf(\"Failure: allocate memory for threads array\");\n        return FAILURE;\n    }\n\n    task-&gt;computeFunc = computeFunc;\n    task-&gt;param = param;\n\n    osEnqueue(threadPool-&gt;tasksQueue, (void *)task);\n\n    pthread_mutex_lock(&amp;(threadPool-&gt;queueLock));\n    // wake up thread that wait as long as the tasks queue is empty\n    if(pthread_cond_signal(&amp;(threadPool-&gt;notify)) != 0) {\n        printf(\"Failure: signal opertion in tpInsertTask\\n\");\n    }\n    pthread_mutex_unlock(&amp;(threadPool-&gt;queueLock));\n    return SUCCESS;\n}\n\n/**\n * Destroys the thread pool.\n * @param threadPool thread pool\n * @param shouldWaitForTasks 0 - dont wait for tasks in the queue, else - wait for tasks.\n */\nvoid tpDestroy(ThreadPool* threadPool, int shouldWaitForTasks) {\n    if (threadPool == NULL) {\n        return;\n    }\n\n    pthread_mutex_lock(&amp;destryLock);\n    // first time enter to tpDestory with valid thread pool\n    if ( threadPool-&gt;canInsert != 0) {\n        threadPool-&gt;canInsert = 0;\n        // make sure tpDestroy will ne called only once for thr thread pool\n    } else {\n        return;\n    }\n    pthread_mutex_unlock(&amp;destryLock);\n\n\n    if (shouldWaitForTasks == DONT_WAIT_FOR_TASKS) {\n        threadPool-&gt;stopped = 1;\n    }\n    int i, err;\n\n    pthread_mutex_lock(&amp;(threadPool-&gt;queueLock));\n\n    /* Wake up all worker threads */\n    if((pthread_cond_broadcast(&amp;(threadPool-&gt;notify)) != 0) ||\n       (pthread_mutex_unlock(&amp;(threadPool-&gt;queueLock)) != 0)) {\n        printf(\"Exit due failure in tpDestory\\n\");\n        exit(1);\n    }\n\n    for (i = 0; i &lt; threadPool-&gt;numOfThreads; i++) {\n        err = pthread_join(threadPool-&gt;threads[i], NULL);\n        if (err != 0) {\n            printf(\"Failure: waiting for thread no. %d\\n\", i);\n        }\n    }\n\n\n    threadPool-&gt;stopped = 1;\n\n    //free memory\n    while (!osIsQueueEmpty(threadPool-&gt;tasksQueue)) {\n        printf(\"Task was erased from tasks queue\\n\");\n        Task* task = osDequeue(threadPool-&gt;tasksQueue);\n        free(task);\n    }\n\n    osDestroyQueue(threadPool-&gt;tasksQueue);\n    free(threadPool-&gt;threads);\n    pthread_mutex_destroy(&amp;(threadPool-&gt;lock));\n    pthread_mutex_destroy(&amp;(threadPool-&gt;queueLock));\n    pthread_mutex_destroy(&amp;destryLock);\n    free(threadPool);\n}\n</code></pre>\n"}, {"tags": ["c", "parsing", "lexer", "jump-table"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 1, "creation_date": 1528235868, "post_id": 50709507, "comment_id": 88428118, "body": "create an enum?"}, {"owner": {"reputation": 927, "user_id": 466932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/424347075f5b5405bfb7ca79a9aa264b?s=128&d=identicon&r=PG", "display_name": "Unmanned Player", "link": "https://stackoverflow.com/users/466932/unmanned-player"}, "edited": false, "score": 0, "creation_date": 1528237999, "post_id": 50709507, "comment_id": 88428713, "body": "@h0m3 There is no such this as &quot;x86 Standard C (gcc)&quot;. There is  standard C and GCC which allows you to write code using standard C for x86 architectures. And to answer your question, the easiest way is to keep a sorted static array of keywords and do a binary search. For trivial things such as this, that&#39;s the easiest and fastest way."}, {"owner": {"reputation": 74, "user_id": 3178303, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000542915220/picture?type=large", "display_name": "h0m3", "link": "https://stackoverflow.com/users/3178303/h0m3"}, "reply_to_user": {"reputation": 927, "user_id": 466932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/424347075f5b5405bfb7ca79a9aa264b?s=128&d=identicon&r=PG", "display_name": "Unmanned Player", "link": "https://stackoverflow.com/users/466932/unmanned-player"}, "edited": false, "score": 0, "creation_date": 1528239053, "post_id": 50709507, "comment_id": 88428993, "body": "@UnmannedPlayer Yes. That is what i meant. (x86) (Standard C) (gcc).  Because even using Standards the compiler and architecture can influenciate on performance."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1528236209, "creation_date": 1528236209, "answer_id": 50709578, "question_id": 50709507, "link": "https://stackoverflow.com/questions/50709507/faster-way-to-read-a-keyword-list/50709578#50709578", "title": "Faster way to read a keyword list", "body": "<p>The fastest way is to hand-build a trie, or equivalently a state machine. Flex (or any other lex variant) would do that for you.</p>\n"}, {"tags": [], "owner": {"reputation": 38, "user_id": 8520951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8610983a35379209f46bd73465a9a2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Blackburn", "link": "https://stackoverflow.com/users/8520951/paul-blackburn"}, "is_accepted": false, "score": 1, "last_activity_date": 1528236308, "creation_date": 1528236308, "answer_id": 50709592, "question_id": 50709507, "link": "https://stackoverflow.com/questions/50709507/faster-way-to-read-a-keyword-list/50709592#50709592", "title": "Faster way to read a keyword list", "body": "<p>Theoretically a hash table provides lookup of O(1). However, I would implement a static look up table. Assuming the number of tokens you are searching for is small. A linear search of the table shouldn\u2019t prove too costly.</p>\n"}], "owner": {"reputation": 74, "user_id": 3178303, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000542915220/picture?type=large", "display_name": "h0m3", "link": "https://stackoverflow.com/users/3178303/h0m3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530734773, "creation_date": 1528235795, "last_edit_date": 1530734773, "question_id": 50709507, "link": "https://stackoverflow.com/questions/50709507/faster-way-to-read-a-keyword-list", "title": "Faster way to read a keyword list", "body": "<p>I'm writing a simple lexer for a general purpose programming language and one of the token types is a 'keyword' that has some predefined control flow tokens such as 'if', 'else', 'while', 'return'.</p>\n\n<p>I want to know the fastest way to check if some keyword is inside my list using x86 Standard C.</p>\n\n<p>My idea was to use a jump table but C string comparisons is problematic since C strings are arrays of char type.</p>\n"}, {"tags": ["c", "clion"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528234503, "post_id": 50709228, "comment_id": 88427667, "body": "Also, this is not valid C. Changing tag to C++."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1528238257, "post_id": 50709228, "comment_id": 88428791, "body": "@LeeDanielCrocker They might be using a C compiler with non-standard extension , it would be better to obtain clarification from OP"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1528238459, "post_id": 50709228, "comment_id": 88428834, "body": "BTW <code>f &lt; 0</code> is a clearer way to perform that test.  <code>0b10000000</code> has value <code>128</code> which is out of range of <code>int8_t</code>"}, {"owner": {"reputation": 53, "user_id": 3746423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b1c5d84bbebaf5474041284a0c2b49?s=128&d=identicon&r=PG&f=1", "display_name": "Hghrmnd", "link": "https://stackoverflow.com/users/3746423/hghrmnd"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1528239343, "post_id": 50709228, "comment_id": 88429066, "body": "@M.M I was using GCC and it has been working, didn&#39;t even realize that it wasn&#39;t standard C. Also that test is a good shout, I didn&#39;t think of that approach."}], "answers": [{"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": true, "score": 8, "last_activity_date": 1528234685, "creation_date": 1528234685, "answer_id": 50709305, "question_id": 50709228, "link": "https://stackoverflow.com/questions/50709228/clion-expression-can-be-simplified-message-on-bitwise-operation/50709305#50709305", "title": "CLion &quot;Expression can be simplified&quot; message on bitwise operation", "body": "<p>The bitwise \"and\" operator <code>&amp;</code> has lower precedence than <code>==</code>.</p>\n\n<p>Therefore, your expression <code>if (f &amp; 0b10000000 == 0b10000000)</code> is equivalent to <code>if (f &amp; (0b10000000 == 0b10000000))</code>.</p>\n\n<p>If you just want to test bit 7, try <code>if (f &amp; 0b10000000)</code>. Any non-zero value will be treated as \"true\".</p>\n\n<p>Also, yes: CLion is wrong. Your original expression is equivalent to <code>if (f &amp; 1)</code>,  which tests bit 0 (probably not what you intended).</p>\n"}], "owner": {"reputation": 53, "user_id": 3746423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b1c5d84bbebaf5474041284a0c2b49?s=128&d=identicon&r=PG&f=1", "display_name": "Hghrmnd", "link": "https://stackoverflow.com/users/3746423/hghrmnd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 50709305, "answer_count": 1, "score": 4, "last_activity_date": 1528239472, "creation_date": 1528234256, "last_edit_date": 1528239472, "question_id": 50709228, "link": "https://stackoverflow.com/questions/50709228/clion-expression-can-be-simplified-message-on-bitwise-operation", "title": "CLion &quot;Expression can be simplified&quot; message on bitwise operation", "body": "<p>I was working on a C project and i wrote the following line to check if the most significant bit of an int8_t is 1:</p>\n\n<pre><code>if (f &amp; 0b10000000 == 0b10000000) {\n</code></pre>\n\n<p>and CLion threw up a warning, telling me 'Expression can be simplified to \"f != 0\"'</p>\n\n<p>Would I be right in saying this is incorrect? I read over bitwise operations to be sure and I still feel like these are not equivalent operations, for instance f = 1 would return false with my expression, but this message is making me doubt myself.</p>\n\n<p>Thanks for any help you can give!</p>\n"}, {"tags": ["c", "gcc", "gcc-warning"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528233393, "post_id": 50709030, "comment_id": 88427205, "body": "Single quotes are for characters only, not strings. <code>&#39;10A&#39;</code> is not a single character."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528233623, "post_id": 50709030, "comment_id": 88427313, "body": "I tried double quotes (at first) but that gives me a warning (assignment makes int from pointer without a cast) and gives a output &quot;?&quot; which seems to something with encoding .. am i right?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 3, "creation_date": 1528233825, "post_id": 50709030, "comment_id": 88427400, "body": "How do you expect a single character variable to hold three characters?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528233909, "post_id": 50709030, "comment_id": 88427431, "body": "@tadman: Single quotes can be used for multi-character constants. Formally, there&#39;s nothing wrong with <code>&#39;10A&#39;</code>. Except for OP&#39;s expectations that is..."}, {"owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1528234081, "post_id": 50709030, "comment_id": 88427508, "body": "@AnT Can you also explain why does <code>A</code> get printed in this case?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "edited": false, "score": 0, "creation_date": 1528234333, "post_id": 50709030, "comment_id": 88427596, "body": "@Shubham I would assume the multi-character constant is being truncated to fit into the <code>char</code>.  I am uncertain as to whether it is undefined behavior."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "edited": false, "score": 3, "creation_date": 1528234356, "post_id": 50709030, "comment_id": 88427609, "body": "@Shubham: Interpretation of multi-character constants is entirely implementation-defined. Typically compilers use the characters as sequential bytes in the resultant <code>int</code> value. So, in this case the full value of <code>&#39;10A&#39;</code> happens to be something like <code>0x00313041</code> (depends on the encoding). When assigned to a single-byte variable <code>char username</code> the value gets truncated: all higher-order byes are lost, leaving behind only the least-significant one - <code>0x41</code>. Which is <code>&#39;A&#39;</code>."}, {"owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1528234783, "post_id": 50709030, "comment_id": 88427753, "body": "@AnT Can I also say from this behavior that the target machine could be following little endian architecture because the value <code>0x41</code> will be stored in the lower address and the <code>char</code> data type will pick this as its capacity is just <code>1</code> byte and hence <code>A</code> got printed?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "edited": false, "score": 1, "creation_date": 1528234999, "post_id": 50709030, "comment_id": 88427835, "body": "@Shubham: it is moderately likely that you&#39;ve guessed correctly, but the compiler is required to document what it does (it is implementation-defined, so the implementation must define what it does).  It isn&#39;t obliged to do what you suggest, though."}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528233843, "post_id": 50709083, "comment_id": 88427410, "body": "That is the way strings are handled in C."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528233993, "post_id": 50709083, "comment_id": 88427474, "body": "@Ahmad Bilal: Strings are arrays in C. No way around it. In this case you can also do <code>const char *username = &quot;10A&quot;;</code>."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528234119, "post_id": 50709083, "comment_id": 88427527, "body": "I saw that construction earlier, can you just explain .. the significance of the star sign, and how is it different from normal ?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1528234190, "post_id": 50709083, "comment_id": 88427549, "body": "The <code>*</code> symbol in this case deals with pointers.  They can be difficult to grasp at first, but are a powerful part of the C language."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1528234326, "post_id": 50709083, "comment_id": 88427593, "body": "Note that multi-character constants are a part of C (hence the warning, not an error), but the value of a multi-character constant is implementation defined and hence not portable.  It is an integer value; it is larger than fits in a <code>char</code>, so you get that warning.  You could have gotten almost anything as the output \u2014 <code>1</code>, <code>A</code> and a null byte could all be plausible.  So, while this answer is &#39;right for the OP at the moment&#39;, it is arguably glossing over an obscure corner of the standard which actually doesn&#39;t have much practical use."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528234443, "post_id": 50709083, "comment_id": 88427645, "body": "@JonathanLeffler I suppose I should add something about multi-character constants as a footnote for posterity."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528234586, "post_id": 50709083, "comment_id": 88427688, "body": "You could leave my comment as the footnote if you like.  As I said, you&#39;re &quot;right for the OP at the moment&quot;."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528234593, "post_id": 50709083, "comment_id": 88427691, "body": "Well, while making a login script, I expected C to have similar character assignment methods as PHP/Perl."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528234906, "post_id": 50709083, "comment_id": 88427793, "body": "JonathanLeffler, AnT, ChristianGibbons, WeatherVane, tadman Thank you for the help. Though as you would expect, this is only the beginning, and I would be hoping for your valuable inputs in the near future."}], "tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": true, "score": 4, "last_activity_date": 1528235282, "last_edit_date": 1528235282, "creation_date": 1528233549, "answer_id": 50709083, "question_id": 50709030, "link": "https://stackoverflow.com/questions/50709030/why-is-my-output-wrong-c-newbie/50709083#50709083", "title": "Why is my output wrong? C newbie", "body": "<p>You are trying to stuff multiple characters into a single set of <code>''</code>, and into a single <code>char</code> variable.  You need <code>\"\"</code> for string literals, and you'll need an array of characters to hold a string.  And to print a string, use <code>%s</code>.</p>\n\n<p>Putting all of this together, you get:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) \n{\n    char username[] = \"10A\";\n    printf(\"%s\\n\", username);\n    return 0;\n}\n</code></pre>\n\n<p><strong>Footnote</strong></p>\n\n<p>From Jonathan Leffler in the comments below regarding multi-character constants: </p>\n\n<p><em>Note that multi-character constants are a part of C (hence the warning, not an error), but the value of a multi-character constant is implementation defined and hence not portable. It is an integer value; it is larger than fits in a char, so you get that warning. You could have gotten almost anything as the output \u2014 1, A and a null byte could all be plausible.</em></p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1528234424, "post_id": 50709211, "comment_id": 88427637, "body": "Thank you and it fits with @JonathanLeffler comment."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1528234181, "creation_date": 1528234181, "answer_id": 50709211, "question_id": 50709030, "link": "https://stackoverflow.com/questions/50709030/why-is-my-output-wrong-c-newbie/50709211#50709211", "title": "Why is my output wrong? C newbie", "body": "<p><code>'10A'</code> is an allowed but obscure way to define a value.</p>\n\n<p>In the case of an <code>int</code> variable,</p>\n\n<pre><code>int username = '10A';\nprintf(\"%x\\n\", username);\n</code></pre>\n\n<p>will output </p>\n\n<pre><code>313041\n</code></pre>\n\n<p>These are pairs of hexadecimal values - each pair is</p>\n\n<p><code>0x31</code> is the <code>'1'</code> of your input.</p>\n\n<p><code>0x30</code> is the <code>'0'</code> of your input.</p>\n\n<p><code>0x41</code> is the <code>'A'</code> of your input.</p>\n\n<p>But a <code>char</code> type can't hold this.</p>\n"}, {"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1528236034, "post_id": 50709320, "comment_id": 88428165, "body": "I would not recommend a general rule of allocating dynamically by default.  With the heap being slower than the stack, I reserve heap allocation for scenarios that call for the advantages of the heap (such as if it will need to be dynamically resized)."}, {"owner": {"reputation": 38, "user_id": 8520951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8610983a35379209f46bd73465a9a2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Blackburn", "link": "https://stackoverflow.com/users/8520951/paul-blackburn"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1528236702, "post_id": 50709320, "comment_id": 88428347, "body": "@ChristianGibbons working with malloc will help grasp pointers. Thanks for pointing out the heap was slower than the stack. One follow up question though. Can you run into problems passing statically allocated pointers that are stored on the stack?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1528237147, "post_id": 50709320, "comment_id": 88428470, "body": "One problem you may have with arrays allocated on the stack is that they turn to garbage when they leave scope (so returning a pointer to a locally scoped array will give garbage to the calling function).  If you need to return the array to the calling function, that would be a case where you might consider allocating on the heap, or you may consider instead having the calling function allocate the array and pass a pointer to it as an argument to the called function."}], "tags": [], "owner": {"reputation": 38, "user_id": 8520951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8610983a35379209f46bd73465a9a2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Blackburn", "link": "https://stackoverflow.com/users/8520951/paul-blackburn"}, "is_accepted": false, "score": 1, "last_activity_date": 1528234749, "creation_date": 1528234749, "answer_id": 50709320, "question_id": 50709030, "link": "https://stackoverflow.com/questions/50709030/why-is-my-output-wrong-c-newbie/50709320#50709320", "title": "Why is my output wrong? C newbie", "body": "<p>In C there are no String objects. Instead Strings are arrays of characters (followed by a null character). Other answers have pointed out statically allocating this memory. However I recommend dynamically allocating Strings. Just remember C lacks a garbage memory collector (like there is in java). So remember to free your pointers. Have fun!!</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3447757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5649594a3e4578efd83eaf316abacdc3?s=128&d=identicon&r=PG&f=1", "display_name": "HalfWit", "link": "https://stackoverflow.com/users/3447757/halfwit"}, "is_accepted": false, "score": 0, "last_activity_date": 1528235971, "creation_date": 1528235971, "answer_id": 50709539, "question_id": 50709030, "link": "https://stackoverflow.com/questions/50709030/why-is-my-output-wrong-c-newbie/50709539#50709539", "title": "Why is my output wrong? C newbie", "body": "<p>You could use <code>char *username</code> to point to the beginning of the address and loop through the memory after. For instance use <code>sizeof(username)</code> to get the size and then loop printf until you have printed the amount of characters in username. However you may end up with major problems if you aren't careful... </p>\n"}], "owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 50709083, "answer_count": 4, "score": 1, "last_activity_date": 1528238651, "creation_date": 1528233267, "last_edit_date": 1528238651, "question_id": 50709030, "link": "https://stackoverflow.com/questions/50709030/why-is-my-output-wrong-c-newbie", "title": "Why is my output wrong? C newbie", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main(void) \n{\n    char username;\n    username = '10A';\n    printf(\"%c\\n\", username);\n    return 0;\n}\n</code></pre>\n\n<p>I just started learning C, and here is my first problem. Why is this program giving me 2 warnings (multi-character constant, overflow in implicit constant conversion)?</p>\n\n<p>And instead of giving <code>10A</code> as output, it is giving just <code>A</code>.</p>\n"}, {"tags": ["c", "encryption", "openssl", "aes"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1528231705, "post_id": 50708686, "comment_id": 88426438, "body": "Please don&#39;t blindly apply tags. I just fixed the misapplied &quot;linux&quot; tag."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1528231879, "post_id": 50708686, "comment_id": 88426513, "body": "Run few hundreds or thousands of encryption decryptin before jumping to conclusions"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1528232241, "post_id": 50708686, "comment_id": 88426677, "body": "And of course your question is not providing enough information. We don&#39;t even know which AES (sub)algorithm you are using and what is the implementation of these functions."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1528232248, "post_id": 50708686, "comment_id": 88426681, "body": "I have encrypted/decrypted 100 blocks for 100000 times, takes total time to perform 100 blocks for 100000 times and then take median of those 100000 different time ."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1528232294, "post_id": 50708686, "comment_id": 88426707, "body": "The code you posted doesn&#39;t reflect that.  It should."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1528232307, "post_id": 50708686, "comment_id": 88426715, "body": "I am using basic AES_encryption means ECB mode of AES. I don&#39;t care for time being about security of ECB right now ."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1528234453, "post_id": 50708686, "comment_id": 88427648, "body": "For ECB encryption algorithm s the very same as decryption. So something is wrong with your implementation. Or perhaps some cache quirks. Related: <a href=\"https://security.stackexchange.com/questions/38055/why-does-aes-encryption-take-more-time-than-decryption\" title=\"why does aes encryption take more time than decryption\">security.stackexchange.com/questions/38055/&hellip;</a>"}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1528376440, "post_id": 50708686, "comment_id": 88491238, "body": "Misaligned data possibly. Of course, as a user, you should be using the EVP_ based functions anyway, which may use hardware acceleration, when available. Creating a <code>bash</code> script is not a good way of testing; the application and data will be reloaded each time. The art of benchmarking..."}], "owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528232493, "creation_date": 1528231594, "last_edit_date": 1528232493, "question_id": 50708686, "link": "https://stackoverflow.com/questions/50708686/why-aes-encryption-time-is-so-smaller-than-aes-decryption-time", "title": "Why AES encryption time is so smaller than AES decryption time?", "body": "<p>I am calculating the time taken to perform AES encryption/decryption (Simple AES ECB mode) using C implementation of AES ( there exist assembly implementation too) in Core2Duo system running linux.</p>\n\n<p>I have tried with both rdtsc and clock_gettime.</p>\n\n<pre><code>pseudo code for time calculation\n//using rdtsc\nstart=rdtsc_timer_start();\nAES_en[de]crypt\nend=rdtsc_timer_end();\n\nTime_taken=end-start\n\n//using clock_gettime\nclock_gettime(CLOCK_PROCESS_CPUTIME_ID,&amp;start);\nAES_en[de]crypt for 100 blocks\nclock_gettime(CLOCK_PROCESS_CPUTIME_ID,&amp;end);\n\nTime_taken=(end.tv_sec-start.tv_sec)*1000000000+ (end.tv_nsec-start.tv_nsec);\n</code></pre>\n\n<p>To  my surprise, I am getting encryption time is very smaller than decryption time.</p>\n\n<p><strong>AES encryption time</strong> <strong>26231nsec</strong> using clock_gettime , <strong>61636ticks</strong> using rdtsc in Core2Duo system (2.2GHz).</p>\n\n<p><strong>AES decryption time</strong> <strong>43243nsec</strong> using clock_gettime , <strong>118196ticks</strong>  using rdtsc in Core2Duo system (2.2GHz).</p>\n\n<p>My experience is just opposite of this post <a href=\"https://security.stackexchange.com/questions/38055/why-does-aes-encryption-take-more-time-than-decryption\">encryption time greater than decryption time</a> , but similar to this post <a href=\"https://stackoverflow.com/questions/20171704/why-aes-encryption-is-faster-than-decryption\">why encryption is faster than decryption</a>. </p>\n\n<p><strong>EDIT 1:</strong> \nI made a bash script to run the above AES encryption/decryption 100000 times.<br>\nSo basically I am calculating time taken to perform AES encryption/decryption of 100 blocks of data 100000 times and then take median of that time.  </p>\n"}, {"tags": ["c", "pthreads", "max"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1528231946, "post_id": 50708612, "comment_id": 88426545, "body": "All those <code>*arr.countI</code> etc references are ugly. Where is the mutual exclusion that makes sure that no thread is modifying anything inside <code>arr</code> while another thread is also modifying it? You have <code>*arr.countI = 0;</code> for example, but no visible mutual exclusion. You have <code>*arr.max = abs(arr.a[*arr.countI][*arr.countJ]);</code> and no mutual exclusion. You have <code>++(*arr.countJ);</code> and no mutual exclusion. None of the threads has the first clue about what&#39;s going on. Maybe you&#39;re lucky and <code>*arr.countI == *arr.l</code> so they don&#39;t enter the loop. But you&#39;ve no concurrency control so everything is guesswork."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528232738, "post_id": 50708612, "comment_id": 88426919, "body": "I think you should stop using <code>countI</code> and <code>countJ</code> from the global data, and also <code>arr.max</code> most of the time. Those should be replaced by per-thread local variables (<code>int i; int j; int max;</code>). If you&#39;re scanning down the main diagonal, you don&#39;t need nested loops \u2014 you can simply step down the diagonal. Your code is very complex for a very simple job. You still need a mutex to allow <code>*arr.max</code> to be set reliably.  <code>arr.a</code> and <code>*arr.l</code> are &#39;OK&#39; (why is <code>*arr.l</code> a pointer?) because you don&#39;t modify those. You promise to return a <code>void *</code> and return nothing. Lying to your compiler is a Bad Idea."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1528233275, "post_id": 50708612, "comment_id": 88427144, "body": "And if this function is called by <code>pthread_create()</code>, it is missing its input argument.  The thread function is passed a <code>void *</code> argument, which it may or may not really use."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1528401399, "last_edit_date": 1592644375, "creation_date": 1528234052, "answer_id": 50709189, "question_id": 50708612, "link": "https://stackoverflow.com/questions/50708612/second-pthread-wont-enter-second-loop/50709189#50709189", "title": "Second pthread won&#39;t enter second loop", "body": "<p>As previously noted in comments, you have no mutual exclusion, so your threads are all busily manipulating elements of the global array without regard to what other threads are doing.</p>\n<blockquote>\n<p>All those <code>*arr.countI</code> etc references are ugly. Where is the mutual exclusion that makes sure that no thread is modifying anything inside <code>arr</code> while another thread is also modifying it? You have <code>*arr.countI = 0;</code>, for example, but no visible mutual exclusion. You have <code>*arr.max = abs(arr.a[*arr.countI][*arr.countJ]);</code> and no mutual exclusion. You have <code>++(*arr.countJ);</code> and no mutual exclusion. None of the threads has the first clue about what's going on. Maybe you're lucky and <code>*arr.countI == *arr.l</code> so they don't enter the loop. But you've no concurrency control so everything is guesswork.</p>\n<p>I think you should stop using <code>countI</code> and <code>countJ</code> from the global data, and also <code>arr.max</code> most of the time. Those should be replaced by per-thread local variables (<code>int i; int j; int max;</code>). If you're scanning down the main diagonal, you don't need nested loops \u2014 you can simply step down the diagonal. Your code is very complex for a very simple job. You still need a mutex to allow <code>*arr.max</code> to be set reliably. <code>arr.a</code> and <code>*arr.l</code> are 'OK' (but why is <code>*arr.l</code> a pointer?) because you don't modify those. You promise to return a <code>void *</code> and return nothing. Lying to your compiler is a Bad Idea\u2122.</p>\n</blockquote>\n<p>If your threads store anything into your global structure (<code>arr</code>), you need to make sure there is mutual exclusion in place.  I assume you have or add a member <code>mtx</code> which is a pointer to a <code>pthread_mutex_t</code> that is initialized before the thread functions are invoked.  I'm also assuming your <code>findMax()</code> function is called from <code>pthread_create()</code> (and passed to it as a function pointer).</p>\n<p>You could use much simpler code for the task, like this:</p>\n<pre><code>void *findMax(void *arg)\n{\n    assert(arg == 0);\n\n    for (int i = 0; i &lt; *arr.l; i++) {\n        for (int j = 0; j &lt; *arr.l; j++) {\n            printf(&quot;%d &quot;, arr.a[i][j]);\n        }\n        printf(&quot;\\n&quot;);\n    }\n\n    int max = abs(arr.a[0][0]);\n    for (int i = 1; i &lt; *arr.l; i++)\n    {\n        int absval = abs(arr.a[i][i]);\n        if (absval &gt; max)\n            max = absval;\n    }\n\n    if (pthread_mutex_lock(arr.mtx) == 0)\n    {\n        *arr.max = max;\n        pthread_mutex_unlock(arr.mtx);\n    }\n\n    printf(&quot;max = %d\\n&quot;, *arr.max);\n    return 0;\n}\n</code></pre>\n<p><sup><em>Warning: uncompiled code!</em></sup></p>\n"}], "owner": {"reputation": 97, "user_id": 9160673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YT3dBTDRsd0/AAAAAAAAAAI/AAAAAAAAAQs/lt4dWyKqaOg/photo.jpg?sz=128", "display_name": "Marios Koni", "link": "https://stackoverflow.com/users/9160673/marios-koni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50709189, "answer_count": 1, "score": 0, "last_activity_date": 1528401399, "creation_date": 1528231278, "last_edit_date": 1528231626, "question_id": 50708612, "link": "https://stackoverflow.com/questions/50708612/second-pthread-wont-enter-second-loop", "title": "Second pthread won&#39;t enter second loop", "body": "<p>I'm facing a problem with my threads. I'm trying to find the max element of the main diagonal in a 2-dimensional array. The first pthread will do its thing and find the max element. But, when the second and thrird and so on array \"joins the party\" they will not enter the second while. My function looks like this:</p>\n\n<pre><code>void* findMax() {\n    //int t = 1;\n\n    //*arr.times = 0;\n\n    for (*arr.countI = 0; *arr.countI &lt; *arr.l; (*arr.countI)++) {\n        for (*arr.countJ = 0; *arr.countJ &lt; *arr.l; (*arr.countJ)++) {\n            printf(\"%d \", arr.a[*arr.countI][*arr.countJ]);\n            if (*arr.l - *arr.countJ == 1)\n                printf(\"\\n\");\n        }\n    }\n\n    *arr.countI = 0;\n    *arr.countJ = 0;\n\n    while (*arr.countI != *arr.l) {\n        while (*arr.countJ != *arr.l) {\n            if (*arr.countI == *arr.countJ) {\n                if (abs(arr.a[*arr.countI][*arr.countJ]) &gt; *arr.max)\n                    *arr.max = abs(arr.a[*arr.countI][*arr.countJ]);\n            }\n\n            ++(*arr.countJ);\n        }\n\n        ++(*arr.countI);\n\n        /*if (++(*arr.times) == 1) {\n            *arr.times = 0;\n            break;\n        }*/\n    }\n\n    printf(\"max = %d\\n\", *arr.max);\n}\n</code></pre>\n\n<p>So if I enter this array</p>\n\n<pre><code> 4 1 1\n 1 6 1\n 1 1 3\n</code></pre>\n\n<p>the max will equal 4 which is not right of course.</p>\n\n<p><code>arr</code> is a struct (global) that has everything I need; <code>arr.a</code> is the array.</p>\n\n<p>I have messed with it a lot over the last couple of days but with no luck...</p>\n"}]