[{"tags": ["c"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490831215, "post_id": 43106047, "comment_id": 73293411, "body": "Run your program under debugger and set a watchpoint associated with the variable <code>j</code>. The debugger will stop the program at the moment the value of <code>j</code> changes. At least you will see which line of the program is responsible for the change, and I bet it&#39;s not the <code>assert</code>."}, {"owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490831475, "post_id": 43106047, "comment_id": 73293493, "body": "of course it&#39;s not assert. As I said earlier, the line that changes j is the header of while statement (so <code>while (!(children-&gt;next-&gt;root == children-&gt;root)) { </code>)"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490831539, "post_id": 43106047, "comment_id": 73293515, "body": "It&#39;s probably not that line, either. So, run the debugger."}, {"owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 0, "creation_date": 1490831616, "post_id": 43106047, "comment_id": 73293545, "body": "Is it possible for the <code>children</code> pointer to point to garbage data?"}, {"owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "edited": false, "score": 0, "creation_date": 1490832251, "post_id": 43106047, "comment_id": 73293711, "body": "No, it points to a proper struct _Node, but its values do change, its root changes just like i and j, and &#39;next&#39; and previous pointers before &#39;while&#39; point to children itself, and after &#39;while&#39; they point to completely different Node that is stored in an array (the array is accesible in this scope though)"}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 1, "creation_date": 1490833397, "post_id": 43106047, "comment_id": 73294021, "body": "Because your <code>delete_subtree_aux</code> is recursive I don&#39;t think you viewed the <code>j</code> as you expected in debugger. Please check your <code>j</code> holds -4 and holds -3 has the same ADDRESS or not."}, {"owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "edited": false, "score": 0, "creation_date": 1490833652, "post_id": 43106047, "comment_id": 73294078, "body": "I&#39;ve updated the question"}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 2, "creation_date": 1490834800, "post_id": 43106047, "comment_id": 73294355, "body": "I think you viewed the different LEVEL of the <code>delete_subtree_aux</code> function so there is no problem in fact.  At recursion, your function has multiple call stacks. Is the final result wrong?"}, {"owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "edited": false, "score": 0, "creation_date": 1490835197, "post_id": 43106047, "comment_id": 73294448, "body": "Well, just after this &quot;weird behaviour&quot; in execution of the program it tries to get_children() of a node and gets a Node that is garbage (the &#39;root&#39; is 0, while all nodes from get_children() should have negative root)"}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 0, "creation_date": 1490836153, "post_id": 43106047, "comment_id": 73294684, "body": "I think the problem is the <code>get_first</code>&#39;s logic. Can you post all source ? Includes how the tree is constructed."}, {"owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "edited": false, "score": 0, "creation_date": 1490837663, "post_id": 43106047, "comment_id": 73295043, "body": "get_first is just return n-&gt;next; (I implemented list as a Node, with next pointing to first node, and previous pointing to the last one) (get_children returns such list; every list has negative root, while regular nodes have positive roots)"}, {"owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "edited": false, "score": 0, "creation_date": 1490838100, "post_id": 43106047, "comment_id": 73295141, "body": "Updated the question with the rest of the code"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "is_accepted": false, "score": 0, "last_activity_date": 1490872005, "creation_date": 1490872005, "answer_id": 43116074, "question_id": 43106047, "link": "https://stackoverflow.com/questions/43106047/c-value-of-initialised-variable-changes-by-itself-after-comparison/43116074#43116074", "title": "C Value of initialised variable changes by itself after comparison", "body": "<p>The problem was that when <code>get_first(children) == get_last(children)</code>  the while loop should have its last iteration. However, <code>delete_subtree_aux</code> fails to update where <code>children-&gt;next</code> points to. When <code>children</code> of the node at this address are free'd, the while loop instead of stopping, tries to do one more iteration (since <code>children-&gt;next</code> points to some <code>Node</code>-like garbage in memory that is different to <code>children</code>). This time however, it tries to access free'd <code>children</code>, and that of course causes error.</p>\n\n<p>The mysterious changing of 'i', 'j', 'children', and 'n' between before <code>while</code> and inside were a result of viewing different levels of recursive function on the stack, as pointed out by @Holsety in the comments.</p>\n"}], "owner": {"reputation": 21, "user_id": 7788716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e237a9b63bf53b51fd87615c2bac767a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/7788716/tomasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490872005, "creation_date": 1490830827, "last_edit_date": 1490838019, "question_id": 43106047, "link": "https://stackoverflow.com/questions/43106047/c-value-of-initialised-variable-changes-by-itself-after-comparison", "title": "C Value of initialised variable changes by itself after comparison", "body": "<p>I am implementing a simple tree structure in C. The program showed some strange behaviour, and I was able to narrow it down to a place, where value stored in a memory location and accessed by using pointers unexpectedly changes. It is replicable, but only happens after a few runs (depending deterministically on the input) of a recursive function. It is in somewhere in the header of 'while' statement. I have checked that just before 'while' all pointers point to memory cells that have expected, well-defined etc. content. What bugs me most, is that even if I assign copy of the value to another variable that variable changes too. I have no idea how it is possible, though I suspect there's something obvious I'm missing. Below are relevant code fragments. </p>\n\n<pre><code>typedef struct _Node {\n    int root;\n    struct _Node *children;\n    struct _Node *next;\n    struct _Node *previous;\n} Node;\n\nint delete_subtree_aux(Node *n) {\n\n    Node *children = get_children(n);\n\n    int i = children-&gt;root;\n    int j = i;\n\n    // At this point i and j both equal e.g. -4\n\n    while (!(children-&gt;next-&gt;root == children-&gt;root)) {\n\n        i = children-&gt;root; \n\n        // At this point i equals -3\n\n        assert(i == j);\n\n        // And j equals -3 too!\n\n        delete_subtree_aux(get_first(children));\n\n    }\n\n    free_node(children);\n}\n</code></pre>\n\n<p>All help is greatly appreciated!</p>\n\n<p>Edit:</p>\n\n<p>After setting additional breakpoint at <code>free_node(children);</code> I have noticed that something is off with the order of instructions executed. At one time program goes straight from <code>free_node(children);</code> to the inside of the loop bypassing <code>while</code> condition checking. 'n', 'i', 'j' and 'children' change together and correspond to different function inputs. Setting data breakpoints revealed that different 'j's are at two different memory addresses. </p>\n\n<p>It seems to me, like for some reason that a few instances of this function are somehow executed in paralell, but that's not my intention. My follow-up question is, can freeing memory in such conditions cause errors? If yes, what should I do to fix it?</p>\n\n<p>Edit 2:\nSource for other functions called in the code above:</p>\n\n<pre><code>int free_node(Node *n) {\n    free(n);\n}\n\nNode *get_children(Node *n) {\n    return n-&gt;children;\n}\n\nNode *get_first(Node *list) {\n    return list-&gt;next;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490830855, "post_id": 43105989, "comment_id": 73293315, "body": "Step through the code in your debugger, and see when the variables go wrong."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1490831026, "creation_date": 1490831026, "answer_id": 43106079, "question_id": 43105989, "link": "https://stackoverflow.com/questions/43105989/trying-to-create-linked-list-in-c-but-only-half-the-requested-nodes-are-created/43106079#43106079", "title": "Trying to create linked list in C. But only half the requested nodes are created", "body": "<p>You're going to the next node in the list twice. You do it in the <code>for()</code> loop header:</p>\n\n<pre><code>for(temp=start;temp-&gt;link!=NULL;temp=next-&gt;link){\n                                ^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>and also at the bottom of the loop:</p>\n\n<pre><code>    next=temp-&gt;link;\n</code></pre>\n\n<p>Just do one or the other, not both. Change the header to:</p>\n\n<pre><code>for(temp=start;temp-&gt;link!=NULL;temp=temp-&gt;link){\n</code></pre>\n\n<p>and get rid of the line at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 2241, "user_id": 6284825, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z7dY9qEIYqY/AAAAAAAAAAI/AAAAAAAAABE/DUXNdvdCo9I/photo.jpg?sz=128", "display_name": "Abhilekh Singh", "link": "https://stackoverflow.com/users/6284825/abhilekh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1490831090, "creation_date": 1490831090, "answer_id": 43106095, "question_id": 43105989, "link": "https://stackoverflow.com/questions/43105989/trying-to-create-linked-list-in-c-but-only-half-the-requested-nodes-are-created/43106095#43106095", "title": "Trying to create linked list in C. But only half the requested nodes are created", "body": "<p>I have corrected your program. You were trying to create n+1 nodes and iterating in wrong way. Just use one variable from start and stop till you reach NULL value. Let me know if you din't understand any part of it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node{\n\n    int student;\n    int exam;\n    struct node *link;\n};\n\nint main(void){\n\n    int student_num, exam_num, node_num, i;\n    struct node *start;\n    struct node *next;\n    struct node *temp;\n\n    printf(\"How many nodes?: \");\n    scanf(\"%d\",&amp;node_num);\n\n    if(node_num == 0) {\n        return 0;\n    }\n\n    temp = (node*)malloc(sizeof(struct node));\n    start = temp;\n\n    start-&gt;link = NULL;\n\n    next = start;\n\n    //Creates node_num nodes\n    for(i=1;i&lt;node_num;i++){\n\n        temp = (node*)malloc(sizeof(struct node));\n\n        next-&gt;link=temp;\n\n        next=temp;\n        next-&gt;link=NULL;\n    }\n\n    //Fills in the numbers\n    for(temp=start;temp!=NULL;temp=temp-&gt;link){\n\n        printf(\"\\nStudent number: \");\n        scanf(\"%d\",&amp;student_num);\n\n        temp-&gt;student=student_num;\n\n        printf(\"Exam number: \");\n        scanf(\"%d\",&amp;exam_num);\n\n        temp-&gt;exam=exam_num;\n\n    }\n\n    //Shows the result\n    for(temp=start;temp!=NULL;temp=temp-&gt;link){\n\n        printf(\"\\nStudent number: %d\\tExam number: %d\\n\",temp-&gt;student,temp-&gt;exam);\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7622063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e464c732344c55c8fdb998b37828aa6c?s=128&d=identicon&r=PG&f=1", "display_name": "Joao M.", "link": "https://stackoverflow.com/users/7622063/joao-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490831090, "creation_date": 1490830435, "question_id": 43105989, "link": "https://stackoverflow.com/questions/43105989/trying-to-create-linked-list-in-c-but-only-half-the-requested-nodes-are-created", "title": "Trying to create linked list in C. But only half the requested nodes are created", "body": "<p>I'm trying to create a program that creates a linked list with nodes made up of 2 integers. It asks for the number of nodes.</p>\n\n<p>If I input an even number of nodes, the program only creates half of them but if I input an odd number, then it crashes after half of the nodes.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node{\n\n    int student;\n    int exam;\n    struct node *link;\n};\n\nint main(void){\n\n    int student_num, exam_num, node_num, i;\n    struct node *start;\n    struct node *next;\n    struct node *temp;\n\n    printf(\"How many nodes?: \");\n    scanf(\"%d\",&amp;node_num);\n\n\n    temp = malloc(sizeof(struct node));\n    start = temp;\n\n    start-&gt;link = NULL;\n\n    next = start;\n\n    //Creates node_num nodes\n    for(i=1;i&lt;=node_num;i++){\n\n        temp = malloc(sizeof(struct node));\n\n        next-&gt;link=temp;\n\n        next=temp;\n        next-&gt;link=NULL;\n    }\n\n    next=start-&gt;link;\n\n    //Fills in the numbers\n    for(temp=start;temp-&gt;link!=NULL;temp=next-&gt;link){\n\n        printf(\"\\nStudent number: \");\n        scanf(\"%d\",&amp;student_num);\n\n        temp-&gt;student=student_num;\n\n        printf(\"Exam number: \");\n        scanf(\"%d\",&amp;exam_num);\n\n        temp-&gt;exam=exam_num;\n\n        next=temp-&gt;link;\n    }\n\n    next=start-&gt;link;\n\n    //Shows the result\n    for(temp=start;temp-&gt;link!=NULL;temp=next-&gt;link){\n\n        printf(\"\\nStudent number: %d\\tExam number: %d\\n\",temp-&gt;student,temp-&gt;exam);\n        next=temp-&gt;link;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory", "void"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1490829594, "post_id": 43105826, "comment_id": 73292907, "body": "you don&#39;t need to know the type of the pointer in order to check it for null"}, {"owner": {"reputation": 3, "user_id": 7361538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f98a56584ded824fc426555f9ef4934?s=128&d=identicon&r=PG&f=1", "display_name": "quigen", "link": "https://stackoverflow.com/users/7361538/quigen"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1490829641, "post_id": 43105826, "comment_id": 73292921, "body": "@yellowantphil Yes, we don&#39;t need to bother about container - actually I should&#39;ve deleted it in the code I posted because it has nothing to do with the memCheck function. All I want is to perform deleteStructure before exiting the program."}, {"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1490830059, "post_id": 43105826, "comment_id": 73293048, "body": "I didn&#39;t read your question well enough. My non-authoritative answer is that your idea will work and is fine according to the C standard. Don&#39;t quote me on the standard though..."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490830172, "post_id": 43105826, "comment_id": 73293087, "body": "Yes, you can do this. But use <code>perror()</code> instead of <code>fprintf()</code>, as it has been specifically designed to report errors."}, {"owner": {"reputation": 3, "user_id": 7361538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f98a56584ded824fc426555f9ef4934?s=128&d=identicon&r=PG&f=1", "display_name": "quigen", "link": "https://stackoverflow.com/users/7361538/quigen"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1490830260, "post_id": 43105826, "comment_id": 73293124, "body": "@yellowantphil Yes I have several structures involving pointers, where I use malloc. And I want to check for every type of pointer I have in my project if allocation was successful. For ex I do  <code>Node* newNode = (Node*)malloc(sizeof(Node)); TreeElement* element = (TreeElement*)malloc(sizeof(TreeElement)); Node* *arrayOfNodes = (Node**)malloc(ARR_SIZE * sizeof(Node*));</code>  And I would like to check for every mallocation if it was succesfull, so I would love to use it like that:  <code>memAllocCheck(container,newNode); memAllocCheck(container,element); memAllocCheck(container,arrayOfNodes);</code>"}, {"owner": {"reputation": 3, "user_id": 7361538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f98a56584ded824fc426555f9ef4934?s=128&d=identicon&r=PG&f=1", "display_name": "quigen", "link": "https://stackoverflow.com/users/7361538/quigen"}, "edited": false, "score": 0, "creation_date": 1490830384, "post_id": 43105826, "comment_id": 73293159, "body": "Thank you so much guys for answering."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1490835233, "post_id": 43105826, "comment_id": 73294455, "body": "Better to write a function which allocates it and checks for failure at the same time."}], "owner": {"reputation": 3, "user_id": 7361538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f98a56584ded824fc426555f9ef4934?s=128&d=identicon&r=PG&f=1", "display_name": "quigen", "link": "https://stackoverflow.com/users/7361538/quigen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490829261, "creation_date": 1490829261, "question_id": 43105826, "link": "https://stackoverflow.com/questions/43105826/memory-allocation-check-for-different-pointer-types", "title": "Memory allocation check for different pointer types", "body": "<p>I have some structures in my C project and I would like to make a function that checks if allocation was successful. Can I use the void* pointer so I could pass different pointer types as an argument?</p>\n\n<pre><code>void memAllocCheck(Structure *container, void *pointer) {\n    if(pointer == NULL) {\n        fprintf(stderr, ALLOCATION_FAILED);\n\n        deleteStructure(container);\n        exit(1);\n    }\n}\n</code></pre>\n\n<p>Is it legal? Is it a good way to deal with memory allocation check?</p>\n"}, {"tags": ["c", "fractals", "space-filling-curve"], "comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 2, "creation_date": 1490830789, "post_id": 43105458, "comment_id": 73293287, "body": "If the architecture uses <a href=\"https://en.wikipedia.org/wiki/IEEE_floating_point#Basic_and_interchange_formats\" rel=\"nofollow noreferrer\">IEEE 754 Binary64</a> type for <code>double</code>, and the same byte order for <code>double</code> as it does for the <code>uint64_t</code> integer type, -- and this is the case on e.g. x86-64 architecture (64-bit Intel/AMD) --, and all your <code>double</code>s have a finite value, then you can copy the storage of the <code>double</code> into an <code>uint64_t</code>, and subtract 2\u2076&#179; = 9,223,372,036,854,775,808, and use the result as an unsigned 64-bit integer. This mapping preserves the order of all finite values, and is invertible (back to <code>double</code>)."}, {"owner": {"reputation": 1522, "user_id": 1094209, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/701d071f955ce63bd19b103516998a57?s=128&d=identicon&r=PG", "display_name": "Anderson Carniel", "link": "https://stackoverflow.com/users/1094209/anderson-carniel"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1490831409, "post_id": 43105458, "comment_id": 73293470, "body": "@NominalAnimal Thank you for the suggestion. Therefore, I would do this proposed conversion and call the function without any changing? my double values can be negative too. In addition, I need to get a double value as return too."}], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 1289198, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ed1ed50abd03457dd455c60a4e80d7c6?s=128&d=identicon&r=PG", "display_name": "yakoudbz", "link": "https://stackoverflow.com/users/1289198/yakoudbz"}, "is_accepted": false, "score": 0, "last_activity_date": 1510237989, "creation_date": 1510237989, "answer_id": 47204449, "question_id": 43105458, "link": "https://stackoverflow.com/questions/43105458/how-to-calculate-the-hilbert-index-from-double-coordinates/47204449#47204449", "title": "How to calculate the hilbert index from double coordinates?", "body": "<p>For anyone wandering, the <a href=\"https://en.wikipedia.org/wiki/Hilbert_curve#Applications_and_mapping_algorithms\" rel=\"nofollow noreferrer\">wikipedia page</a> has a very fast method to compute Hilbert 1D coordinates. I've used Hilbert in multiple programs (I do research on Delaunay Triangulation and we need it to speed-up the process) and I can assure you it's the best one can find.</p>\n"}], "owner": {"reputation": 1522, "user_id": 1094209, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/701d071f955ce63bd19b103516998a57?s=128&d=identicon&r=PG", "display_name": "Anderson Carniel", "link": "https://stackoverflow.com/users/1094209/anderson-carniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 950, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1510237989, "creation_date": 1490827194, "question_id": 43105458, "link": "https://stackoverflow.com/questions/43105458/how-to-calculate-the-hilbert-index-from-double-coordinates", "title": "How to calculate the hilbert index from double coordinates?", "body": "<p>I would like to transform a coordinate pair represented by two double values (x, y) into a Hilbert value. I have found the following implementation (<a href=\"http://web.archive.org/web/20041102084739/http://www.caam.rice.edu/~dougm/twiddle/Hilbert/hilbert.c\" rel=\"nofollow noreferrer\">from this link</a>):</p>\n\n<pre><code>/*****************************************************************\n * hilbert_c2i\n * \n * Convert coordinates of a point on a Hilbert curve to its index.\n * Inputs:\n *  nDims:      Number of coordinates.\n *  nBits:      Number of bits/coordinate.\n *  coord:      Array of n nBits-bit coordinates.\n * Outputs:\n *  index:      Output index value.  nDims*nBits bits.\n * Assumptions:\n *      nDims*nBits &lt;= (sizeof bitmask_t) * (bits_per_byte)\n */\nbitmask_t\nhilbert_c2i(unsigned nDims, unsigned nBits, bitmask_t const coord[])\n{\n  if (nDims &gt; 1)\n    {\n      unsigned const nDimsBits = nDims*nBits;\n      bitmask_t index;\n      unsigned d;\n      bitmask_t coords = 0;\n      for (d = nDims; d--; )\n    {\n      coords &lt;&lt;= nBits;\n      coords |= coord[d];\n    }\n\n      if (nBits &gt; 1)\n    {\n      halfmask_t const ndOnes = ones(halfmask_t,nDims);\n      halfmask_t const nd1Ones= ndOnes &gt;&gt; 1; /* for adjust_rotation */\n      unsigned b = nDimsBits;\n      unsigned rotation = 0;\n      halfmask_t flipBit = 0;\n      bitmask_t const nthbits = ones(bitmask_t,nDimsBits) / ndOnes;\n      coords = bitTranspose(nDims, nBits, coords);\n      coords ^= coords &gt;&gt; nDims;\n      index = 0;\n      do\n        {\n          halfmask_t bits = (coords &gt;&gt; (b-=nDims)) &amp; ndOnes;\n          bits = rotateRight(flipBit ^ bits, rotation, nDims);\n          index &lt;&lt;= nDims;\n          index |= bits;\n          flipBit = (halfmask_t)1 &lt;&lt; rotation;\n          adjust_rotation(rotation,nDims,bits);\n        } while (b);\n      index ^= nthbits &gt;&gt; 1;\n    }\n      else\n    index = coords;\n      for (d = 1; d &lt; nDimsBits; d *= 2)\n    index ^= index &gt;&gt; d;\n      return index;\n    }\n  else\n    return coord[0];\n}\n</code></pre>\n\n<p>However, this is for integer values as input. How would be the adaptation for my double values?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 1, "creation_date": 1490827470, "post_id": 43105438, "comment_id": 73292297, "body": "How many <code>node</code>s will you be processing? That is, any time complexity requirements?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1490827482, "post_id": 43105438, "comment_id": 73292300, "body": "There is a semicolon missing after your struct definition. #thedevilisinthedetail"}, {"owner": {"reputation": 341, "user_id": 3192468, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/81157635e6d725ded3a2bb31bec177f6?s=128&d=identicon&r=PG&f=1", "display_name": "adriam", "link": "https://stackoverflow.com/users/3192468/adriam"}, "reply_to_user": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 0, "creation_date": 1490827621, "post_id": 43105438, "comment_id": 73292333, "body": "@cubrr no time complexity requirements. I&#39;ll probably be processing at max 100 nodes, but that will be super rare, so on average around 3-10 nodes."}, {"owner": {"reputation": 341, "user_id": 3192468, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/81157635e6d725ded3a2bb31bec177f6?s=128&d=identicon&r=PG&f=1", "display_name": "adriam", "link": "https://stackoverflow.com/users/3192468/adriam"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490827643, "post_id": 43105438, "comment_id": 73292340, "body": "@wildplasser lol I didnt copy and paste this code I typed it up quickly haha I love that hashtag"}, {"owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 1, "creation_date": 1490827772, "post_id": 43105438, "comment_id": 73292379, "body": "You could apply basically any sorting algorithm here, but when you compare two <code>node</code>s, just perform the word comparison if the two <code>data</code> are equal."}, {"owner": {"reputation": 341, "user_id": 3192468, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/81157635e6d725ded3a2bb31bec177f6?s=128&d=identicon&r=PG&f=1", "display_name": "adriam", "link": "https://stackoverflow.com/users/3192468/adriam"}, "reply_to_user": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 0, "creation_date": 1490827905, "post_id": 43105438, "comment_id": 73292421, "body": "@cubrr Im super new to C and data structures, any suggestion on the sorting algorithm?"}, {"owner": {"reputation": 750, "user_id": 6876037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42acf7e5bb30e124f2597567bfd9aab1?s=128&d=identicon&r=PG&f=1", "display_name": "anonymoose", "link": "https://stackoverflow.com/users/6876037/anonymoose"}, "edited": false, "score": 2, "creation_date": 1490828095, "post_id": 43105438, "comment_id": 73292479, "body": "You could try converting the linked list to an array (find the length, create an array of nodes, and go through each element and set it) and then use <code>qsort</code> and convert it back."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1490828489, "post_id": 43105438, "comment_id": 73292587, "body": "The advantage of <code>qsort()</code> is that it has the sorting organized; you just have to write a comparison function (also called a comparator).  Your comparator might look like: <code>int cmp_node(const void *v1, const void *v2) { const struct node *np1 = *(node **)v1; const struct node *np2 = *(node **)v2; if (np1-&gt;data &lt; np2-&gt;data) return -1; else if (np1-&gt;data &gt; np2-&gt;data) return +1; else return strcmp(np1-&gt;word, np2-&gt;word); }</code>.  I&#39;m assuming you end up with an array of <code>node</code> pointers, not an array of <code>node</code> structures.  You end up with one less level of indirection if you sort an array of <code>node</code>s."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490828679, "post_id": 43105438, "comment_id": 73292637, "body": "Sorting a linked list is a bit trickier than sorting an array.  To sort the elements in-place, with O(1) overhead, I&#39;d suggest one of the comparison sorts that involves only exchanging adjacent elements.  The first two that come to mind are <a href=\"https://en.wikipedia.org/wiki/Insertion_sort\" rel=\"nofollow noreferrer\">Insertion Sort</a> and good ole` <a href=\"https://en.wikipedia.org/wiki/Bubble_sort\" rel=\"nofollow noreferrer\">Bubble Sort</a>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1490828970, "post_id": 43105438, "comment_id": 73292723, "body": "Sorting a linked list is easy: merge sort. Just create a compare function and a generic sort function that takes a function as a second argument, call it and you are done."}, {"owner": {"reputation": 25147, "user_id": 78720, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2d78d7a7bd9b1eca98bf4b7f0aba52dc?s=128&d=identicon&r=PG", "display_name": "sigjuice", "link": "https://stackoverflow.com/users/78720/sigjuice"}, "edited": false, "score": 0, "creation_date": 1490831234, "post_id": 43105438, "comment_id": 73293413, "body": "Mergesort For Linked Lists <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\" rel=\"nofollow noreferrer\">chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "is_accepted": true, "score": 1, "last_activity_date": 1490831466, "last_edit_date": 1490831466, "creation_date": 1490828891, "answer_id": 43105746, "question_id": 43105438, "link": "https://stackoverflow.com/questions/43105438/weird-sorting-algorithm/43105746#43105746", "title": "Weird sorting algorithm", "body": "<p>Since you're only processing so few elements, you could just fit the whole list into an array, then sort it with <code>qsort</code>. Here's a quick example. Be careful not to overflow the <code>nodes</code> array in <code>print_sorted</code> - for such few nodes, you could just go through the linked list once to get the size, then malloc the space you need.</p>\n\n<p>Notice that in the example, <code>node_compare</code> works with an array of <em>pointers</em> to node. If you want to work directly with an array of nodes, just remove the dereferences at the start of the function and cast them to <code>const struct node *</code> instead of <code>const struct node **</code>.</p>\n\n<pre><code>// for qsort\n#include &lt;stdlib.h&gt;\n// for strcmp\n#include &lt;string.h&gt;\n\nstruct node {\n    int data;\n    char word[125];\n    struct node* next;\n};\n\nint node_compare(const void *a, const void *b) {\n    const struct node *first = *(const struct node **) a;\n    const struct node *second = *(const struct node **) b;\n\n    // Order nodes with same data alphabetically\n    if (first-&gt;data == second-&gt;data) {\n        return strcmp(first-&gt;word, second-&gt;word);\n    } else {\n        return first-&gt;data - second-&gt;data;\n    }\n}\n\nvoid print_sorted(struct node *list) {\n    struct node *nodes[512];\n\n    // gather whole list into the array\n    struct node *current = list;\n    int arrayIndex = 0;\n    while (current != NULL) {\n        nodes[arrayIndex++] = current;\n        current = current-&gt;next;\n    }\n\n    // sort the array\n    qsort(nodes, arrayIndex, sizeof(struct node *), node_compare);\n\n    // print em\n    for (int i = 0; i &lt; arrayIndex; i++) {\n        printf(\"data: %d, word: %s\\n\", nodes[i]-&gt;data, nodes[i]-&gt;word);\n    }\n}\n\nint main() {\n    struct node a = { .data = 3, .word = \"ayy\", .next = NULL };\n    struct node b = { .data = 3, .word = \"zzz\", .next = &amp;a };\n    struct node c = { .data = 3, .word = \"ddd\", .next = &amp;b };\n    struct node d = { .data = 10, .word = \"toaster\", .next = &amp;c };\n    struct node e = { .data = 0, .word = \"box\", .next = &amp;d };\n\n    print_sorted(&amp;e);\n    return 0;\n}\n</code></pre>\n\n<p>This prints out:</p>\n\n<pre><code>data: 0, word: box\ndata: 3, word: ayy\ndata: 3, word: ddd\ndata: 3, word: zzz\ndata: 10, word: toaster\n</code></pre>\n\n<p>If you want descending order, change the bottom part of <code>node_compare()</code> to the following:</p>\n\n<pre><code>if (first-&gt;data == second-&gt;data) {\n    return strcmp(second-&gt;word, first-&gt;word);\n} else {\n    return second-&gt;data - first-&gt;data;\n}\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 3192468, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/81157635e6d725ded3a2bb31bec177f6?s=128&d=identicon&r=PG&f=1", "display_name": "adriam", "link": "https://stackoverflow.com/users/3192468/adriam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 43105746, "answer_count": 1, "score": 0, "last_activity_date": 1490831466, "creation_date": 1490827122, "last_edit_date": 1490827540, "question_id": 43105438, "link": "https://stackoverflow.com/questions/43105438/weird-sorting-algorithm", "title": "Weird sorting algorithm", "body": "<p>I need to print a linked list in order but I need it to be sorted in a weird way and I couldnt find an answer. So I need it to be sorted first by the integer data(obviously bigger comes first), then within that I need it to be sorted by word. So lets say two nodes have the same data integer, then they would be sorted lexicographically by the word.\nThe linked list is like this</p>\n\n<pre><code>struct node {\n    int data;\n    char word[125];\n    struct node* next;\n}\n</code></pre>\n\n<p>Any suggestions? It doesn't necessarily have to be sorted, I just have to print them in sorted order</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1490826985, "post_id": 43105407, "comment_id": 73292125, "body": "This is function <i>declaration</i>, not function <i>definition</i>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1490827094, "post_id": 43105407, "comment_id": 73292156, "body": "What did your compiler tell you when you tried?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1490827156, "post_id": 43105407, "comment_id": 73292178, "body": "There isn&#39;t a prototype in that collection of declarations; don&#39;t declare functions without prototypes.  That was a necessity before 1989; it ceased to be a necessity before 2000."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1490827242, "post_id": 43105407, "comment_id": 73292203, "body": "A declaration has a type (formally, a list of declaration-specifiers) and a list of declarators (formally an init-declarator-list-opt).  Each function name with parentheses after it is a declarator.  The code is fine as written \u2014 if you ignore the absence of prototypes.  Note that those functions all take an indeterminate list of arguments (but are not variadic functions with <code>...</code> at the end of the argument list)."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1490828207, "post_id": 43105407, "comment_id": 73292507, "body": "<code>gcc</code> thinks <code>ReadNos</code> returns <code>void</code>, so, technically it works. But, do <i>not</i> do this! It is <i>far</i> less clear and less readable than spelling things out (e.g. <code>void WriteNos();</code> and then [on a separate line] <code>void ReadNos();</code>). I&#39;ve <i>never</i> encountered this construct before. IMO, you&#39;re trying to be, um, well &quot;too cute for your own good&quot; ... And, use the ansi prototypes (vs. the old K&amp;R ones) as Jonathan mentioned. Oh, BTW, where would you put comments describing each function&#39;s arguments, what it does, etc? If you use the commas, you would split across several lines--not good."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490832509, "post_id": 43105407, "comment_id": 73293794, "body": "Saving on typing effort will come back and hurt you later. For example, if you change <code>void</code> to <code>int*</code> it will suddenly <i>not</i> work as intended. As a rule you read code a lot more than you write it, so you should save on the effort needed to <i>read</i> the code by making it as clear as possible."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490855872, "post_id": 43105537, "comment_id": 73300698, "body": "Would be good to point out that the originals in the question are obsolecent non-prototype declarations."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1490828514, "last_edit_date": 1490828514, "creation_date": 1490827666, "answer_id": 43105537, "question_id": 43105407, "link": "https://stackoverflow.com/questions/43105407/can-i-use-one-data-type-to-define-multiple-functions-in-c/43105537#43105537", "title": "Can I use one data type to define multiple functions in C?", "body": "<p>Because declarations have this <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7\" rel=\"nofollow noreferrer\">grammar</a>:</p>\n\n<pre><code>declaration:\n                 declaration-specifiers init-declarator-listopt ;\n                 static_assert-declaration\n          declaration-specifiers:\n                 storage-class-specifier declaration-specifiersopt\n                 type-specifier declaration-specifiersopt\n                 type-qualifier declaration-specifiersopt\n                 function-specifier declaration-specifiersopt\n                 alignment-specifier declaration-specifiersopt\n          init-declarator-list:\n                  init-declarator\n                  init-declarator-list , init-declarator\n          init-declarator:\n                  declarator\n                  declarator = initializer\n</code></pre>\n\n<p>you can do it with declarations, but not with <a href=\"http://www.quut.com/c/ANSI-C-grammar-y-2011.html#function_definition\" rel=\"nofollow noreferrer\">function definitions</a>.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n//declarations\nvoid a(void), b(void); /*OK*/\n\n#if 0\nvoid a() { puts(\"a\"); }, b() { puts(\"b\"); } /*NOPE*/\n#else\n//definitions\nvoid a() { puts(\"a\"); }\nvoid b() { puts(\"b\"); }\n#endif\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7664215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccabfc52e67bb7199e3bc5e22f1ef0e0?s=128&d=identicon&r=PG&f=1", "display_name": "darkside1986", "link": "https://stackoverflow.com/users/7664215/darkside1986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490828514, "creation_date": 1490826910, "last_edit_date": 1490827111, "question_id": 43105407, "link": "https://stackoverflow.com/questions/43105407/can-i-use-one-data-type-to-define-multiple-functions-in-c", "title": "Can I use one data type to define multiple functions in C?", "body": "<p>Example:</p>\n\n<pre><code>void WriteNos(), ConvertDecInt2Binary(), ConvertDecimal2Binary(), ReadNos(), \nConvertBinary2DecInt(), ConvertDecFloat2Binary();   \n</code></pre>\n\n<p>or do I need to place <code>void</code> before  each function? This is basic C only question.</p>\n"}, {"tags": ["c", "string", "input", "split", "scanf"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1490827445, "post_id": 43105370, "comment_id": 73292288, "body": "I don&#39;t think <code>scanf()</code>&#39;s field descriptor language and overall semantics are jointly powerful enough to express your requirements in a single format string passed to a single function call.  You could, however, achieve what you want via a <i>series</i> of <code>scanf()</code> calls."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1490827724, "post_id": 43105370, "comment_id": 73292372, "body": "See <a href=\"http://stackoverflow.com/questions/3975236\">How to use <code>sscanf()</code> in loops?</a> for an exposition on what @JohnBollinger mentions.  You might want to think about making the command into a <code>%1s</code> rather than a <code>%c</code> for consistency (remembering to allocate space for the null byte too).  See also <a href=\"https://stackoverflow.com/questions/1621394/\">How to prevent <code>scanf()</code> from causing buffer overflows?</a> \u2014 though you&#39;re obviously aware of a major part of the answer (you use <code>%ns</code> where <code>n</code> is a number)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490828124, "post_id": 43105370, "comment_id": 73292486, "body": "If you&#39;re doing things without <code>sscanf()</code>, consider <code>strcspn()</code> \u2014 and/or <code>strpbrk()</code> \u2014 and maybe <code>strspn()</code> too; these would allow you to find the white space and decide how long the fields are and what you&#39;re going to do about it."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490848138, "post_id": 43108439, "comment_id": 73297585, "body": "Just a couple of notes, <code>fgets(inputStr, sizeof inputStr, ...</code> only works in the scope where <code>inputstr</code> is declared, you have a constant, better <code>fgets(inputStr, IN_BUF_SIZE, ...</code>. While syntactically fine, <code>sscanf(strPos, &quot; %c%n%*[^ ]%n&quot;, &amp;command, &amp;n, &amp;n)</code> -- there is only one <code>n</code>, I&#39;m not sure the intent of the validation value of assigning it twice. Just a nit, <code>strPos</code> -&gt; <code>strpos</code>, leave <code>camelCase</code> to C++, nothing wrong with it, just style -- so it is up to you."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490850030, "post_id": 43108439, "comment_id": 73298151, "body": "@DavidC.Rankin-- Agree on <code>camelCase</code>, but OP used it, so I did too for consistency. I tend to prefer <code>sizeof ...</code> to a constant to protect from future changes in declarations; but that is a good note, and I will add a comment in my answer. Maybe I wasn&#39;t clear enough about this in my answer, but the assignment to <code>n</code> twice is because the second <code>sscanf()</code> match fails if the first match was the right size, i.e., a character followed by a space, or a string of 5 characters. In this case, the first assignment gives <code>n</code> the correct character count. If the scan reaches the end, <code>n</code> is overwritten."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490852226, "post_id": 43108439, "comment_id": 73298970, "body": "Yes, I was pretty sure that was the case, but I always try to flag it for the OP because believe it or not, those little style issues speak loudly as the first impression your code makes. As for <code>n</code>, yes, if the <code>return</code> is <code>1</code> I guess you have your first <code>n</code> to check, but then that leaves you knowing your next char is <code>&#39; &#39;</code> or <code>EOF</code>."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490880430, "post_id": 43108439, "comment_id": 73317717, "body": "@DavidC.Rankin-- In the first program, <code>sscanf()</code> will return <code>1</code> if one or both matches are made since the second is suppressed, and <code>%n</code> doesn&#39;t increment the assignment count. If the second match fails, and there is no preceding <code>%n</code>, then nothing is assigned to <code>n</code> and the next scan position is unknown. If the second match is successful and there is no following <code>%n</code>, the wrong value is stored in <code>n</code>. Hence, both assignments are necessary."}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 1, "last_activity_date": 1490881598, "last_edit_date": 1495541850, "creation_date": 1490847192, "answer_id": 43108439, "question_id": 43105370, "link": "https://stackoverflow.com/questions/43105370/splitting-user-input-into-strings-of-specific-length/43108439#43108439", "title": "Splitting user input into strings of specific length", "body": "<p>One way to split the input buffer as OP desires is to use multiple calls to <code>sscanf()</code>, and to use the <code>%n</code> conversion specifier to keep track of the number of characters read. In the code below, the input string is scanned in three stages.</p>\n\n<p>First, the pointer <code>strPos</code> is assigned to point to the first character of <code>inputStr</code>. Then the input string is scanned with <code>\" %c%n%*[^ ]%n\"</code>. This format string skips over any initial whitespaces that a user might enter before the first character, and stores the first character in <code>command</code>. The <code>%n</code> directive tells <code>sscanf()</code> to store the number of characters read so far in the variable <code>n</code>; then the <code>*[^ ]</code> directive tells <code>sscanf()</code> to read and ignore any characters until a whitespace character is encountered. This effectively skips over any remaining characters that were entered after the initial <code>command</code> character. The <code>%n</code> directive appears again, and overwrites the previous value with the number of characters read until this point. The reason for using <code>%n</code> twice is that, if the user enters a character followed by a whitespace (as expected), the second directive will find no matches, and <code>sscanf()</code> will exit without ever reaching the final <code>%n</code> directive.</p>\n\n<p>The pointer <code>strPos</code> is moved to the beginning of the remaining string by adding <code>n</code> to it, and <code>sscanf()</code> is called a second time, this time with <code>\"%5s%n%*[^ ]%n\"</code>. Here, up to 5 characters are read into the character array <code>firstname[]</code>, the number of characters read is saved by the <code>%n</code> directive, any remaining non-whitespace characters are read and ignored, and finally, if the scan made it this far, the number of characters read is saved again.</p>\n\n<p><code>strPos</code> is increased by <code>n</code> again, and the final scan only needs <code>\"%s\"</code> to complete the task.</p>\n\n<p>Note that the return value of <code>fgets()</code> is checked to be sure that it was successful. The call to <code>fgets()</code> was changed slightly to:</p>\n\n<pre><code>fgets(inputStr, sizeof inputStr, stdin)\n</code></pre>\n\n<p>The <code>sizeof</code> operator is used here instead of <code>IN_BUF_SIZE</code>. This way, if the declaration of <code>inputStr</code> is changed later, this line of code will still be correct. Note that the <code>sizeof</code> operator works here because <code>inputStr</code> is an array, and arrays do not decay to pointers in <code>sizeof</code> expressions. But, if <code>inputStr</code> were passed into a function, <code>sizeof</code> could <em>not</em> be used in this way inside the function, because arrays decay to pointers in most expressions, including function calls. Some, <a href=\"https://stackoverflow.com/questions/43105370/splitting-user-input-into-strings-of-specific-length/43108439#comment73297585_43108439\">@DavidC.Rankin</a>, prefer constants as OP has used. If this seems confusing, I would suggest sticking with the constant <code>IN_BUF_SIZE</code>.</p>\n\n<p>Also note that the return values for each of the calls to <code>sscanf()</code> are checked to be certain that the input matches expectations. For example, if the user enters a command and a first name, but no surname, the program will print an error message and exit. It is worth pointing out that, if the user enters say, a command character and first name only, after the second <code>sscanf()</code> the match may have failed on <code>\\n</code>, and <code>strPtr</code> is then incremented to point to the <code>\\0</code> and so is still in bounds. But this relies on the newline being in the string. With no newline, the match might fail on <code>\\0</code>, and then <code>strPtr</code> would be incremented out of bounds before the next call to <code>sscanf()</code>. Fortunately, <code>fgets()</code> retains the newline, <em>unless the input line is larger than the specified size of the buffer</em>. Then there is no <code>\\n</code>, only the <code>\\0</code> terminator. A more robust program would check the input string for <code>\\n</code>, and add one if needed. It would not hurt to increase the size of <code>IN_BUF_SIZE</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define IN_BUF_SIZE 256\n\nint main(void)\n{\n    char inputStr[IN_BUF_SIZE];\n    char command;\n    char firstname[6];\n    char surname[6];\n    char *strPos = inputStr;        // next scan location\n    int n = 0;                      // holds number of characters read\n\n    if (fgets(inputStr, sizeof inputStr, stdin) == NULL) {\n        fprintf(stderr, \"Error in fgets()\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    if (sscanf(strPos, \" %c%n%*[^ ]%n\", &amp;command, &amp;n, &amp;n) &lt; 1) {\n        fprintf(stderr, \"Input formatting error: command\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    strPos += n;\n    if (sscanf(strPos, \"%5s%n%*[^ ]%n\", firstname, &amp;n, &amp;n) &lt; 1) {\n        fprintf(stderr, \"Input formatting error: firstname\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    strPos += n;\n    if (sscanf(strPos, \"%5s\", surname) &lt; 1) {\n        fprintf(stderr, \"Input formatting error: surname\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"%c %s %s\\n\", command, firstname, surname);\n}\n</code></pre>\n\n<p>Sample interaction:</p>\n\n<pre><code>a Zaphod Beeblebrox\na Zapho Beebl\n</code></pre>\n\n<p>The <code>fscanf()</code> functions have a reputation for being subtle and error-prone; the format strings used above may seem a little bit tricky. By writing a function to skip to the next word in the input string, the calls to <code>sscanf()</code> can be simplified. In the code below, <code>skipToNext()</code> takes a pointer to a string as input; if the first character of the string is a <code>\\0</code> terminator, the pointer is returned unchanged. All initial non-whitespace characters are skipped over, then any whitespace characters are skipped, up to the next non-whitespace character (which may be a <code>\\0</code>). A pointer is returned to this non-whitespace character.</p>\n\n<p>The resulting program is a little bit longer than the previous program, but it may be easier to understand, and it certainly has simpler format strings. This program does differ from the first in that it no longer accepts leading whitespace in the string. If the user enters whitespace before the <code>command</code> character, this is considered erroneous input.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\n#define IN_BUF_SIZE 256\n\nchar * skipToNext(char *);\n\nint main(void)\n{\n    char inputStr[IN_BUF_SIZE];\n    char command;\n    char firstname[6];\n    char surname[6];\n    char *strPos = inputStr;        // next scan location\n\n    if (fgets(inputStr, sizeof inputStr, stdin) == NULL) {\n        fprintf(stderr, \"Error in fgets()\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    if (sscanf(strPos, \"%c\", &amp;command) != 1 || isspace(command)) {\n        fprintf(stderr, \"Input formatting error: command\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    strPos = skipToNext(strPos);\n    if (sscanf(strPos, \"%5s\", firstname) != 1) {\n        fprintf(stderr, \"Input formatting error: firstname\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    strPos = skipToNext(strPos);\n    if (sscanf(strPos, \"%5s\", surname) != 1) {\n        fprintf(stderr, \"Input formatting error: surname\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"%c %s %s\\n\", command, firstname, surname);\n}\n\nchar * skipToNext(char *c)\n{\n    int inWord = isspace(*c) ? 0 : 1;\n\n    if (inWord &amp;&amp; *c != '\\0') {\n        while (!isspace(*c)) {\n            ++c;\n        }\n    }\n\n    inWord = 0;\n\n    while (isspace(*c)) {\n        ++c;\n    }\n\n    return c;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1490852798, "post_id": 43109351, "comment_id": 73299210, "body": "Introducing new users to <i>walking a pointer</i> is worth its weight in gold if they get it. You are never faced with anything you can&#39;t parse from that point forward. The issue then becomes choosing the right tool for the job, knowing that for longer strings, the efficiencies provided by the standard library functions can really help (with the loop unrolling, etc. they incorporate for that purpose). A good example is looking at the <code>strlen</code> code."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1490852107, "creation_date": 1490852107, "answer_id": 43109351, "question_id": 43105370, "link": "https://stackoverflow.com/questions/43105370/splitting-user-input-into-strings-of-specific-length/43109351#43109351", "title": "Splitting user input into strings of specific length", "body": "<p>In addition to the other answers, never forget when facing string parsing problems, you always have the option of simply <em>walking a pointer</em> down the string to accomplish any type parsing you require. When you read your string into <code>buffer</code> (my <code>buf</code> below), you have an array of characters you are free to analyze manually (either with array indexes, e.g. <code>buffer[i]</code> or by assigning a pointer to the beginning, e.g. <code>char *p = buffer;</code>) With your string, you have the following in <code>buffer</code> with <code>p</code> pointing to the first character in <code>buffer</code>:</p>\n\n<pre><code>--------------------------------\n|a| |b|b|b|b|b|b|b|b| |c|c|\\n|0|    contents\n--------------------------------\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4      index\n |\n p\n</code></pre>\n\n<p>To test the character pointed to by <code>p</code>, you simply <em>dereference</em> the pointer, e.g. <code>*p</code>. So to test whether you have an initial character between <code>a-z</code> followed by a space at the beginning of <code>buffer</code>, you simply need do:</p>\n\n<pre><code>    /* validate first char is 'a-z' and followed by ' ' */\n    if (*p &amp;&amp; 'a' &lt;= *p &amp;&amp; *p &lt;= 'z' &amp;&amp; *(p + 1) == ' ') {\n        cmd = *p;\n        p += 2;     /* advance pointer to next char following ' ' */\n    }\n</code></pre>\n\n<p><strong>note:</strong>, you are testing <code>*p</code> first, (which is the shorthand for <code>*p != 0</code> or the equivalent <code>*p != '\\0'</code>) to validate the string is not empty (e.g. the first char isn't the <code>nul-byte</code>) before proceeding with further tests. You would also include an <code>else { /* handle error */ }</code> in the event any one of the tests failed (meaning you have no <code>command</code> followed by a <code>space</code>).</p>\n\n<p>When you are done, your are left with <code>p</code> pointing to the third character in <code>buffer</code>, e.g.:</p>\n\n<pre><code>--------------------------------\n|a| |b|b|b|b|b|b|b|b| |c|c|\\n|0|    contents\n--------------------------------\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4      index\n     |\n     p\n</code></pre>\n\n<p>Now your job is simply, just advance by no more than <code>5</code> characters (or until the next <code>space</code> is encountered, assigning the characters to <code>firstname</code> and then <code>nul-terminate</code> following the last character:</p>\n\n<pre><code>    /* read up to NLIM chars into fname */\n    for (n = 0; n &lt; NMLIM &amp;&amp; *p &amp;&amp; *p != ' ' &amp;&amp; *p != '\\n'; p++)\n        fname[n++] = *p;\n    fname[n] = 0;           /* nul terminate */\n</code></pre>\n\n<p><strong>note:</strong> since <code>fgets</code> reads <em>and includes</em> the trailing <code>'\\n'</code> in <code>buffer</code>, you should also test for the newline.</p>\n\n<p>When you exit the loop, <code>p</code> is pointing to the seventh character in the buffer as follows:</p>\n\n<pre><code>--------------------------------\n|a| |b|b|b|b|b|b|b|b| |c|c|\\n|0|    contents\n--------------------------------\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4      index\n             |\n             p\n</code></pre>\n\n<p>You now simply read forward until you encounter the next <code>space</code> and then advance past the <code>space</code>, e.g.:</p>\n\n<pre><code>    /* discard remaining chars up to next ' ' */\n    while (*p &amp;&amp; *p != ' ') p++;\n\n    p++;    /* advance to next char */\n</code></pre>\n\n<p><strong>note:</strong> if you exited the <code>firstname</code> loop pointing at a <code>space</code>, the above code does not execute.</p>\n\n<p>Finally, all you do is repeat the same loop for <code>surname</code> that you did for <code>firstname</code>. Putting all the pieces of the puzzle together, you could do something similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nenum { NMLIM = 5, BUFSIZE = 256 };\n\nint main (void) {\n\n    char buf[BUFSIZE] = \"\";\n\n    while (fgets (buf, BUFSIZE, stdin)) {\n        char *p = buf, cmd,                 /* start &amp; end pointers */\n            fname[NMLIM+1] = \"\",\n            sname[NMLIM+1] = \"\";\n        size_t n = 0;\n\n        /* validate first char is 'a-z' and followed by ' ' */\n        if (*p &amp;&amp; 'a' &lt;= *p &amp;&amp; *p &lt;= 'z' &amp;&amp; *(p + 1) == ' ') {\n            cmd = *p;\n            p += 2;     /* advance pointer to next char following ' ' */\n        }\n        else {  /* handle error */\n            fprintf (stderr, \"error: no single command followed by space.\\n\");\n            return 1;\n        }\n\n        /* read up to NLIM chars into fname */\n        for (n = 0; n &lt; NMLIM &amp;&amp; *p &amp;&amp; *p != ' ' &amp;&amp; *p != '\\n'; p++)\n            fname[n++] = *p;\n        fname[n] = 0;           /* nul terminate */\n\n        /* discard remaining chars up to next ' ' */\n        while (*p &amp;&amp; *p != ' ') p++;\n\n        p++;    /* advance to next char */\n\n        /* read up to NLIM chars into sname */\n        for (n = 0; n &lt; NMLIM &amp;&amp; *p &amp;&amp; *p != ' ' &amp;&amp; *p != '\\n'; p++)\n            sname[n++] = *p;\n        sname[n] = 0;           /* nul terminate */\n\n        printf (\"input  : %soutput : %c %s %s\\n\",\n                buf, cmd, fname, sname);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ echo  \"a bbbbbbbb cc\" | ./bin/walkptr\ninput  : a bbbbbbbb cc\noutput : a bbbbb cc\n</code></pre>\n\n<p>Look things over an let me know if you have any questions. No matter how elaborate the string or what you need from it, you can always get what you need by simply walking a pointer (or a pair of pointers) down the length of the string.</p>\n"}], "owner": {"reputation": 13, "user_id": 7788316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d9807ae19c5fe340d3e799f3ced308?s=128&d=identicon&r=PG&f=1", "display_name": "codewriterman", "link": "https://stackoverflow.com/users/7788316/codewriterman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 43109351, "answer_count": 2, "score": 1, "last_activity_date": 1490881598, "creation_date": 1490826757, "last_edit_date": 1490827589, "question_id": 43105370, "link": "https://stackoverflow.com/questions/43105370/splitting-user-input-into-strings-of-specific-length", "title": "Splitting user input into strings of specific length", "body": "<p>I'm writing a C program that parses user input into a char, and two strings of set length. The user input is stored into a buffer using <code>fgets</code>, and then parsed with <code>sscanf</code>. The trouble is, the three fields have a maximum length. If a string exceeds this length, the remaining characters before the next whitespace should be consumed/discarded.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define IN_BUF_SIZE 256\n\nint main(void) {\n    char inputStr[IN_BUF_SIZE];\n    char command;\n    char firstname[6];\n    char surname[6];\n\n    fgets(inputStr, IN_BUF_SIZE, stdin);\n    sscanf(inputStr, \"%c %5s %5s\", &amp;command, firstname, surname);\n    printf(\"%c %s %s\\n\", command, firstname, surname);\n}\n</code></pre>\n\n<p>So, with an input of<br>\n<code>a bbbbbbbb cc</code><br>\nthe desired output would be<br>\n<code>a bbbbb cc</code><br>\nbut is instead the output is<br>\n<code>a bbbbb bbb</code>  </p>\n\n<p>Using a format specifier <code>\"%c%*s %5s%*s %5s%*s\"</code> runs into the opposite problem, where each substring needs to exceed the set length to get to the desired outcome.</p>\n\n<p>Is there way to achieve this by using format specifiers, or is the only way saving the substrings in buffers of their own before cutting them down to the desired length?</p>\n"}, {"tags": ["c", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1490826019, "post_id": 43105026, "comment_id": 73291798, "body": "I was more wondering if I can compile a library using gcc with attributes, and then have it work with other compilers, since it is already compiled. I was not specifically interested in clang"}], "tags": [], "owner": {"reputation": 4611, "user_id": 7511971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Byz18.jpg?s=128&g=1", "display_name": "Ricardo Branco", "link": "https://stackoverflow.com/users/7511971/ricardo-branco"}, "is_accepted": false, "score": 0, "last_activity_date": 1490825218, "creation_date": 1490825218, "answer_id": 43105026, "question_id": 43104924, "link": "https://stackoverflow.com/questions/43104924/using-gcc-extensions-with-code-compiled-with-clang/43105026#43105026", "title": "Using GCC extensions with code compiled with clang?", "body": "<p>It depends on the extension.</p>\n\n<p>See <a href=\"https://clang.llvm.org/docs/LanguageExtensions.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/docs/LanguageExtensions.html</a></p>\n\n<blockquote>\n  <p>This document describes the language extensions provided by Clang. In\n  addition to the language extensions listed here, Clang aims to support\n  a broad range of GCC extensions. Please see the GCC manual for more\n  information on these extensions.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1490826496, "post_id": 43105226, "comment_id": 73291967, "body": "You said: &quot;if you put an attribute on the declaration, it affects the definition too&quot; \u2014 with which I&#39;ll agree as long as the definition sees the declaration, which is not always the case (people have been known to code sloppily).  That said, they&#39;ve got bigger problems if they run into &#39;declaration not seen by definition&#39; problems."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 2, "last_activity_date": 1490826899, "last_edit_date": 1495541419, "creation_date": 1490826079, "answer_id": 43105226, "question_id": 43104924, "link": "https://stackoverflow.com/questions/43104924/using-gcc-extensions-with-code-compiled-with-clang/43105226#43105226", "title": "Using GCC extensions with code compiled with clang?", "body": "<ol>\n<li><p>If the attributes/extensions only affect code generation and not interfaces, it should work. </p></li>\n<li><p>Depends on the attribute.\nE.g., attributes such as <code>pure</code>, <code>const</code>, or <code>nonnull</code>, are no good unless every translation unit that uses the functions can see them\u2014you should put them on the prototypes in your header (and use the underscored form, e.g., <code>__attribute__((__pure__))</code>).</p>\n\n<p>On the other hand, attributes affecting code generation or visibility should be on the implementation, or else if your library user decided to make an override of a function provided by your library, including your header would effectively force those attributes on their override.</p></li>\n</ol>\n\n<p>In any case, if you put an attribute on the declaration, it affects the definition too (assuming the definition sees the declaration\u2014thanks to <a href=\"https://stackoverflow.com/users/15168/jonathan-leffler\">Jonathan Leffler</a> for the clarification), but definitions can take on additional attributes not present in the declaration(s).</p>\n"}], "owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 43105226, "answer_count": 2, "score": 1, "last_activity_date": 1490826899, "creation_date": 1490824752, "last_edit_date": 1490826379, "question_id": 43104924, "link": "https://stackoverflow.com/questions/43104924/using-gcc-extensions-with-code-compiled-with-clang", "title": "Using GCC extensions with code compiled with clang?", "body": "<p>I have a two questions regarding GCC extensions</p>\n\n<ol>\n<li><p>If I compile a library using GCC attributes/extensions, will they work even if I link them to a program compiled with for example <code>clang</code>? </p></li>\n<li><p>Should function attributes/extensions be declared in the function declaration or prototype?</p></li>\n</ol>\n"}, {"tags": ["c", "static", "local", "compiler-optimization"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490824701, "post_id": 43104812, "comment_id": 73291305, "body": "Like.. Why not?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1490824740, "post_id": 43104812, "comment_id": 73291317, "body": "Even with optimisations enabled?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490824808, "post_id": 43104812, "comment_id": 73291338, "body": "So, what about the <i>observable behaviour</i> changed?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490824877, "post_id": 43104812, "comment_id": 73291367, "body": "That&#39;s it, I think the compiler is allowed to do just anything given the observable behavior is identical (given the code is not invoking undefined behavior)."}, {"owner": {"reputation": 59, "user_id": 5775044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9UTpO.jpg?s=128&g=1", "display_name": "Eric Martin", "link": "https://stackoverflow.com/users/5775044/eric-martin"}, "edited": false, "score": 0, "creation_date": 1490824957, "post_id": 43104812, "comment_id": 73291388, "body": "What about visibility of <code>x</code> within the data section of the program and within symbol tables? Do the C specs have anything to say about that?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1490825017, "post_id": 43104812, "comment_id": 73291412, "body": "The C standard has nothing to say about e.g. symbol tables, as they&#39;re an implementation detail.  However, the scope of x is only that function."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490825031, "post_id": 43104812, "comment_id": 73291417, "body": "@EricMartin C standard is not operating in these terms."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 1, "creation_date": 1490832977, "post_id": 43104812, "comment_id": 73293913, "body": "@yellowantphil - The compiler can assume that undefined behavior never happens. And gcc is known to optimize on that assumption."}, {"owner": {"reputation": 519, "user_id": 7304514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e4ab7a095c59c76e18a1c8ed1e272c?s=128&d=identicon&r=PG&f=1", "display_name": "Ordoshsen", "link": "https://stackoverflow.com/users/7304514/ordoshsen"}, "edited": false, "score": 0, "creation_date": 1490834505, "post_id": 43104812, "comment_id": 73294289, "body": "When I compile this on Windows&#39; Ubuntu&#39;s gcc 4.8.4 with just main calling this function it actually optimizes out the whole function call, sets return value and hapily returns"}], "answers": [{"tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": false, "score": 2, "last_activity_date": 1490826046, "creation_date": 1490826046, "answer_id": 43105221, "question_id": 43104812, "link": "https://stackoverflow.com/questions/43104812/is-it-legal-for-a-c-compiler-to-optimize-out-local-static-variables/43105221#43105221", "title": "Is it legal for a C compiler to optimize out local static variables?", "body": "<p>The compiler would be within its rights to optimise away this function completely, given it has no observable side effects (from the point of view of the C standard).</p>\n\n<p>As to why your compilers aren't doing so, I can't explain that!  (Though of course, they're under no obligation to do so.)</p>\n"}], "owner": {"reputation": 59, "user_id": 5775044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9UTpO.jpg?s=128&g=1", "display_name": "Eric Martin", "link": "https://stackoverflow.com/users/5775044/eric-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1490826046, "creation_date": 1490824305, "last_edit_date": 1490825018, "question_id": 43104812, "link": "https://stackoverflow.com/questions/43104812/is-it-legal-for-a-c-compiler-to-optimize-out-local-static-variables", "title": "Is it legal for a C compiler to optimize out local static variables?", "body": "<p>For a function like</p>\n\n<pre><code>int test(void) {\n  static int x = 0;\n  x++;\n  return 0;\n}\n</code></pre>\n\n<p>is a C compiler allowed to optimize out <code>x</code>?</p>\n\n<p>For reference, neither GCC 6.3.0 or Clang 3.9 optimize out incrementing <code>x</code> with -O3.</p>\n"}, {"tags": ["c", "pointers", "linked-list", "compiler-warnings"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1490821598, "post_id": 43104152, "comment_id": 73289894, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Don&#39;t cast malloc in C</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1490821791, "post_id": 43104152, "comment_id": 73289993, "body": "<code>char songName</code> means the song&#39;s name is just one character. Don&#39;t you mean <code>char *songName</code> and the same for <code>artist</code> and <code>genre</code>?"}, {"owner": {"reputation": 21, "user_id": 7788318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1574050695941802/picture?type=large", "display_name": "Naveed Farahani", "link": "https://stackoverflow.com/users/7788318/naveed-farahani"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490822059, "post_id": 43104152, "comment_id": 73290118, "body": "yes Thank you! not sure how I missed that."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1490822142, "post_id": 43104152, "comment_id": 73290171, "body": "<code>length = strlen(input); genre = malloc(length); strcpy(genre, input);</code> You&#39;re copying one more character than you allocated.  Don&#39;t forget the terminating <code>&#39;\\0&#39;</code>."}], "owner": {"reputation": 21, "user_id": 7788318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1574050695941802/picture?type=large", "display_name": "Naveed Farahani", "link": "https://stackoverflow.com/users/7788318/naveed-farahani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490821639, "creation_date": 1490821501, "last_edit_date": 1490821639, "question_id": 43104152, "link": "https://stackoverflow.com/questions/43104152/warning-in-linked-lists-assignment-makes-pointer-from-integer-without-a-cast", "title": "Warning in Linked Lists- assignment makes pointer from integer without a cast", "body": "<p>I am trying to write program which takes in song names, genres, and artists.\nThe code to input these is this:</p>\n\n<pre><code>printf(\"Genre: \");\ngetStringFromUserInput(input, MAX_LENGTH);\nlength = strlen(input);\ngenre = (char*)malloc(length);\nstrcpy(genre, input);\ngetStringFromUserInput(input, MAX_LENGTH);\n</code></pre>\n\n<p>I have a function to initialize a new node, but when building the program it is giving me the warning.</p>\n\n<pre><code>Node *newNode(char songName, char artist, char genre, Node *link){\n    Node *new;\n    new = (Node *)malloc(sizeof(Node)); //dynamic memory allocation of 1 node\n    if(new!=NULL){\n        //if there is memory, inputs data into bucket\n        new-&gt;songName = songName;\n        new-&gt;artist = artist;\n        new-&gt;genre = genre;\n        new-&gt;link = link;\n    }\n    return (new);\n}\n</code></pre>\n\n<p>Any help would be great, thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "edited": false, "score": 0, "creation_date": 1490819921, "post_id": 43103545, "comment_id": 73288985, "body": "There&#39;s no way to do that in C that I know of, but a script in python could be possible, you&#39;d have to tell us how your source code files look like and which structs do you want information on (all of them?)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1490820253, "post_id": 43103545, "comment_id": 73289177, "body": "Short of writing a file parser, there is no way to do this in C.  an <i><a href=\"https://www.tutorialspoint.com/awk/awk_basic_examples.htm\" rel=\"nofollow noreferrer\">Awk</a></i> script in Linux would do it pretty easily though.  By the way, the second member in your struct should have a <code>;</code> line terminator instead of <code>,</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490821351, "post_id": 43103545, "comment_id": 73289772, "body": "Too broad and asking about tools is off-topic. However, you could do the other way&#39;round and generate the C code from a textual representation."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1490821366, "post_id": 43103545, "comment_id": 73289778, "body": "See <a href=\"http://stackoverflow.com/q/7674255/2630032\">stackoverflow.com/q/7674255/2630032</a>"}, {"owner": {"reputation": 53, "user_id": 7788194, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f4a019e027dd84f48cb7e517e177487?s=128&d=identicon&r=PG&f=1", "display_name": "vip", "link": "https://stackoverflow.com/users/7788194/vip"}, "edited": false, "score": 0, "creation_date": 1490826368, "post_id": 43103545, "comment_id": 73291915, "body": "Thanks guys. All of my source code structured are nested into 1 big structure. So thought of extracting the struct information by starting with a small struct containing basic types."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1490826810, "post_id": 43103545, "comment_id": 73292063, "body": "You say &#39;all of my source code structures are nested into one big structure&#39;.  That&#39;s likely to make things hard, to be polite about it.  Are you sure that&#39;s a good idea? And how big is the big structure?  Does the big structure mostly contain pointers to other structures, or are the other structures directly used in the big structure (or is there some mixture)?"}, {"owner": {"reputation": 53, "user_id": 7788194, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f4a019e027dd84f48cb7e517e177487?s=128&d=identicon&r=PG&f=1", "display_name": "vip", "link": "https://stackoverflow.com/users/7788194/vip"}, "edited": false, "score": 0, "creation_date": 1490838241, "post_id": 43103545, "comment_id": 73295182, "body": "Hi Jonathan. Thanks,,,Structure is really really big the size of 32k. yes it do contain pointers to other structures and structure arrays. I do think it is not a great idea , but want to start with simple structures and eventually leverage it to the big structure."}, {"owner": {"reputation": 53, "user_id": 7788194, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f4a019e027dd84f48cb7e517e177487?s=128&d=identicon&r=PG&f=1", "display_name": "vip", "link": "https://stackoverflow.com/users/7788194/vip"}, "edited": false, "score": 0, "creation_date": 1490842301, "post_id": 43103545, "comment_id": 73296149, "body": "Hi Stephen. I tried to add &lt;metaresc.h&gt; in my .c file, but compiler failed with error&quot;no suck directory&quot;. which gcc version supports the metaresc? is this package free ?"}], "owner": {"reputation": 53, "user_id": 7788194, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f4a019e027dd84f48cb7e517e177487?s=128&d=identicon&r=PG&f=1", "display_name": "vip", "link": "https://stackoverflow.com/users/7788194/vip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490819447, "creation_date": 1490819366, "last_edit_date": 1490819447, "question_id": 43103545, "link": "https://stackoverflow.com/questions/43103545/iterate-a-structure-in-c", "title": "Iterate a structure in C", "body": "<p>I have a structure</p>\n\n<pre><code>typedef struct \n{\n   UINT32 a;\n   Char b,\n   struct xyz *c;\n}A;\n</code></pre>\n\n<p>Is there a way to generate the following information from the struct?</p>\n\n<pre><code>index type    field size\n1     UINT32   a     4 \n2     char     b     1\n3     pointer  c     8\n</code></pre>\n\n<p>I understand that C doesn't allow reflection and  we can use X-Macros to get all of these information, but my structures are extremely complex and have thousands of fields to modify and edit to support X-Macros. I really appreciate if there is a way or support in C, that I am unaware of</p>\n\n<p>Any shell script or python script that can generate these? </p>\n"}, {"tags": ["c", "process", "tree"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1490820483, "post_id": 43103017, "comment_id": 73289306, "body": "Using lists works well for mapping logical trees.."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1490822025, "post_id": 43103017, "comment_id": 73290101, "body": "If you print pids and ppids along <code>hello</code>, I&#39;m pretty sure that you will be able to reconstruct the tree, just add a call to <code>sleep()</code> after the loops to prevent orphaned processes..."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490823490, "post_id": 43103017, "comment_id": 73290828, "body": "If you are on Linux, add <code>sleep()</code> after <code>fork()</code> and use program <code>pstree</code> to visualize the process tree."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 7294563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df1b8a485f9fedc69e1dc19dc5975857?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/7294563/harrison"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490827845, "post_id": 43104450, "comment_id": 73292406, "body": "I just took an example, so how about &quot;ps -ef f&quot;"}, {"owner": {"reputation": 135, "user_id": 7294563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df1b8a485f9fedc69e1dc19dc5975857?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/7294563/harrison"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490829391, "post_id": 43104450, "comment_id": 73292848, "body": "Sorry, I was busy at that time and didn&#39;t have time to check."}], "tags": [], "owner": {"reputation": 135, "user_id": 7294563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df1b8a485f9fedc69e1dc19dc5975857?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/7294563/harrison"}, "is_accepted": false, "score": -1, "last_activity_date": 1490828117, "last_edit_date": 1490828117, "creation_date": 1490822821, "answer_id": 43104450, "question_id": 43103017, "link": "https://stackoverflow.com/questions/43103017/how-would-the-process-tree-look-having-a-code-using-fork-c/43104450#43104450", "title": "How would the process tree look having a code using fork()-C", "body": "<p>Why don't you just use 'ps' (on linux) or 'tasklist' (on windows) command to check? For example,</p>\n\n<p>ps -ef f</p>\n"}], "owner": {"reputation": 11, "user_id": 6282921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dab360549657f4c17dced2a00979a537?s=128&d=identicon&r=PG&f=1", "display_name": "Golden", "link": "https://stackoverflow.com/users/6282921/golden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490828117, "creation_date": 1490817509, "question_id": 43103017, "link": "https://stackoverflow.com/questions/43103017/how-would-the-process-tree-look-having-a-code-using-fork-c", "title": "How would the process tree look having a code using fork()-C", "body": "<p>I have the following code written in C and I would like to know how the process tree drawing looked like.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    // your code goes here\n    for(int i=0;i&lt;=1;i++){\n    for(int j=0;j&lt;=1;j++){\n        fork();\n        printf(\"Hello\");\n    }\n\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "algorithm", "replace"], "comments": [{"owner": {"reputation": 5746, "user_id": 583570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17472ad659a41e48c4574e01d2312807?s=128&d=identicon&r=PG", "display_name": "markgz", "link": "https://stackoverflow.com/users/583570/markgz"}, "edited": false, "score": 0, "creation_date": 1490817468, "post_id": 43102960, "comment_id": 73287659, "body": "You need to use the <code>sprintf</code> function to print to a string. You cannot alter a constant string."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1490817510, "post_id": 43102960, "comment_id": 73287689, "body": "Why do you want to do it that way? Just change the <code>printf</code> to be: <code>printf(&quot;%d %s have a bissextus day&quot;, is_bissextus, year);</code> where <code>is_bissextus</code> is set to be <code>&quot;does&quot;</code> or <code>&quot;doesn&#39;t&quot;</code>by the <code>if</code> block."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 5746, "user_id": 583570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17472ad659a41e48c4574e01d2312807?s=128&d=identicon&r=PG", "display_name": "markgz", "link": "https://stackoverflow.com/users/583570/markgz"}, "edited": false, "score": 0, "creation_date": 1490817551, "post_id": 43102960, "comment_id": 73287710, "body": "@markgz: Never use <code>sprintf</code>; use <code>snprintf</code> instead."}, {"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "reply_to_user": {"reputation": 5746, "user_id": 583570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17472ad659a41e48c4574e01d2312807?s=128&d=identicon&r=PG", "display_name": "markgz", "link": "https://stackoverflow.com/users/583570/markgz"}, "edited": false, "score": 0, "creation_date": 1490817720, "post_id": 43102960, "comment_id": 73287796, "body": "Thanks @markgz  But am I able to do what I intended to do using the <code>sprintf</code> function?"}, {"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1490817751, "post_id": 43102960, "comment_id": 73287814, "body": "Thanks @kaylum ! That&#39;s a really nice idea"}, {"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "reply_to_user": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1490817776, "post_id": 43102960, "comment_id": 73287833, "body": "@NicolBolas Why&#39;s that??"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1490817788, "post_id": 43102960, "comment_id": 73287843, "body": "@AndreKorol To avoid potential buffer overflow."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1490817824, "post_id": 43102960, "comment_id": 73287865, "body": "@AndreKorol: Because it&#39;s dangerously unsafe. It&#39;s a common vector for buffer overrun attacks. <code>snprintf</code> does the same thing, but you pass it the maximun size of the buffer, so it will not write more characters than that."}, {"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1490818033, "post_id": 43102960, "comment_id": 73287984, "body": "Thanks @tuple_cat ! Now I understand it"}, {"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "reply_to_user": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1490818136, "post_id": 43102960, "comment_id": 73288029, "body": "@NicolBolas so it&#39;s not safe for me to declare a string the way I was doing, right? Sorry for being sounding so lame, I really just started to code in C..."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "edited": false, "score": 0, "creation_date": 1490818765, "post_id": 43103032, "comment_id": 73288329, "body": "Do I really have to set the size of answer? Isn&#39;t there another way to do it by not defining it&#39;s size?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "edited": false, "score": 1, "creation_date": 1490821439, "post_id": 43103032, "comment_id": 73289810, "body": "@AndreKorol you can write <code>size_t n = snprintf(NULL, 0, &quot;%d does have a bissextus day&quot;, year); char answer[n+1]; snprintf(answer, sizeof answer, &quot;%d does have a bissextus day&quot;, year);</code>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1490821448, "post_id": 43103032, "comment_id": 73289816, "body": "With <code>sprintf</code> instead of <code>snprintf</code> you can leave out the size argument but then <code>sprintf</code> will write to the buffer regardless of whether there&#39;s is enough space for the string."}, {"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1490825032, "post_id": 43103032, "comment_id": 73291418, "body": "Thanks @M.M ! That&#39;s the kind of solution I like! haha Going to try this right now."}, {"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "edited": false, "score": 0, "creation_date": 1490825055, "post_id": 43103032, "comment_id": 73291430, "body": "Thanks @tuple_cat ! Now I got it"}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1490817554, "creation_date": 1490817554, "answer_id": 43103032, "question_id": 43102960, "link": "https://stackoverflow.com/questions/43102960/c-not-able-to-include-a-format-specifier-when-assign-a-string/43103032#43103032", "title": "C Not able to include a format specifier when assign a string", "body": "<p>You can use <a href=\"https://linux.die.net/man/3/snprintf\" rel=\"nofollow noreferrer\"><code>snprintf</code></a>:</p>\n\n<pre><code>char answer[34]; \n// ...                                                                                                                                                                               \nsnprintf(answer, 34, \"%d does have a bissextus day\", year);                                                                                               \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "edited": false, "score": 0, "creation_date": 1490824865, "post_id": 43104047, "comment_id": 73291362, "body": "Thank you for the answer @LethalProgrammer! I already know how to do that this way. I was just trying to do it in another way. But now I think I&#39;m really just going to stick to the basics haha"}], "tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 0, "last_activity_date": 1490821060, "creation_date": 1490821060, "answer_id": 43104047, "question_id": 43102960, "link": "https://stackoverflow.com/questions/43102960/c-not-able-to-include-a-format-specifier-when-assign-a-string/43104047#43104047", "title": "C Not able to include a format specifier when assign a string", "body": "<blockquote>\n  <p>answer =  \"%d does have a bissextus day\", year;</p>\n</blockquote>\n\n<p>Here your storing string data in which %d formate specififer doesnt has any effect with int type year, your expecting it should print year. Something which in double quotes in C is treated as string with null termination in the end.</p>\n\n<p><strong>Try this code, its just simple and straight forward:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;                                                                                                                                    \n#include &lt;stdlib.h&gt;\n\nint main(){                                                                                                                                                     \n    int year;                                                                                                                                         \n    printf(\"Enter a year:\");                                                                                                                       \n    scanf(\"%d\", &amp;year);                       \n\n    if ( (year % 400 == 0) || ( (year % 4 == 0) &amp;&amp; !(year % 100 == 0) ) ){                                                                            \n        printf(\"%d does have a bissextus day\", year);                                                                                               \n    } else {                                                                                                                                            \n        printf(\"%d doesn't have a bissextus day\", year);                                                                                             \n    }                                                                                                                                                 \n    return 0;                                                                                                                                         \n} \n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<pre><code>./a.exe\nEnter a year:2017\n2017 doesn't have a bissextus day\n$  ./a.exe\nEnter a year:2000\n2000 does have a bissextus day\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6692816, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/076ce147263e6c2b5dba74f167eb4f20?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Korol", "link": "https://stackoverflow.com/users/6692816/andre-korol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490821060, "creation_date": 1490817307, "last_edit_date": 1490817372, "question_id": 43102960, "link": "https://stackoverflow.com/questions/43102960/c-not-able-to-include-a-format-specifier-when-assign-a-string", "title": "C Not able to include a format specifier when assign a string", "body": "<p>I'd like to be able to use the %d format specifier when assign a value to a string called <code>answer</code>. I tried to do this but I can't get the format specifier replaced by an integer when running the program...\nHere's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;                                                                                                                                    \n#include &lt;stdlib.h&gt;\nint main(void)                                                                                                                                        \n{                                                                                                                                                     \n    const char *answer;                                                                                                                               \n    int year;                                                                                                                                         \n    printf(\"Enter a year: \\n\");                                                                                                                       \n    scanf(\"%d\", &amp;year);                       \n    if ( (year % 400 == 0) || ( (year % 4 == 0) &amp;&amp; !(year % 100 == 0) ) ){                                                                            \n        answer =  \"%d does have a bissextus day\", year;                                                                                               \n    }                                                                                                                                                 \n    else {                                                                                                                                            \n        answer = \"%d doesn't have a bissextus day\", year;                                                                                             \n    }                                                                                                                                                 \n\n    printf(\"%s\\n\", answer);                                                                                                                           \n\n    return 0;                                                                                                                                         \n}                                                   \n</code></pre>\n\n<p>I'd also like to know if in this case it's a good choice to use <code>const char *answer</code> and if it's not, I'd like to know what I should use instead.</p>\n"}, {"tags": ["c", "gcc", "initialization", "designated-initializer"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490818635, "post_id": 43102901, "comment_id": 73288269, "body": "Trying to find the name of an unnamed entity? :-) If you want them zeroed, that might work anyway. <a href=\"http://stackoverflow.com/questions/3374446/what-happens-to-fields-not-named-by-a-designated-initializer\">What happens to fields not named by a designated initalizer?</a>"}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490819696, "post_id": 43102901, "comment_id": 73288844, "body": "Actually, I need to initialize to non-zero values as well, depending on the instance...   I would have hoped that gcc could resolve <code>main.a64</code> in this case, but it doesn&#39;t seem to work.   This seems to make it rather difficult to initialize using the second member of an unnamed union (using the first would be simple using non-designated unions... just tried it...)"}], "answers": [{"comments": [{"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1490880401, "post_id": 43103933, "comment_id": 73317686, "body": "Thanks -- I had tried that, but I got <code>tst3.c:19: error: unknown field \u2018a64\u2019 specified in initializer</code>.    I&#39;m taking it this works on newer versions of gcc?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1490880550, "post_id": 43103933, "comment_id": 73317829, "body": "It worked for me, and it should work according to the Standard. I compiled with <code>-Wpedantic</code>. I will post a working test momentarily. I presume you are using the <code>-std=c11</code> option?"}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1490881503, "post_id": 43103933, "comment_id": 73318633, "body": "gcc 4.4.7 does not support the <code>-std=c1X</code> option (just checked, it is not supported until gcc 4.6).   If this solution works in newer versions of gcc, then that&#39;s good to know.   I currently had to settle for another (somewhat ugly) workaround for my specific case.   I&#39;ll mark your answer as accepted, as there doesn&#39;t seem to be a solution for 4.4, and it might be useful for others looking to do the same going forward."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1490885028, "post_id": 43103933, "comment_id": 73321520, "body": "I hadn&#39;t checked before (!), but your original syntax works also. Even though I get a warning when compiled with <code>-std=c99</code>, both versions work. Maybe it is just the age of the compiler coupled with the unnamed union issue."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1490892024, "post_id": 43103933, "comment_id": 73326480, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=10676\" rel=\"nofollow noreferrer\">This appears to be a bug, fixed in gcc 4.6</a>. The suggested workaround was to enclose the unnamed union initializer in braces, but the bug report contains comments which suggest that this may not always work."}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 2, "last_activity_date": 1490891999, "last_edit_date": 1490891999, "creation_date": 1490820710, "answer_id": 43103933, "question_id": 43102901, "link": "https://stackoverflow.com/questions/43102901/using-designated-initializers-with-unnamed-nested-data-types/43103933#43103933", "title": "Using designated initializers with unnamed nested data types", "body": "<p>You need to change the syntax a bit, initializing <code>.main</code> within the initializer for <code>instance</code>:</p>\n\n<pre><code>typedef struct MainStruct {\n    union {\n         uint8_t   a8[16];\n         uint64_t  a64[2];\n    };\n    uint64_t       i64;\n} MainStruct_t;\n\ntypedef struct OtherStruct {\n    MainStruct_t main;\n    int          otherval;\n} OtherStruct_t;\n\nOtherStruct_t instance = { .main = {.a64 = { 0, 0 }}, .otherval = 3 };\n</code></pre>\n\n<p>Here is a working test program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\ntypedef struct MainStruct {\n    union {\n         uint8_t   a8[16];\n         uint64_t  a64[2];\n    };\n    uint64_t       i64;\n} MainStruct_t;\n\ntypedef struct OtherStruct {\n    MainStruct_t main;\n    int          otherval;\n} OtherStruct_t;\n\nOtherStruct_t instance = { .main = {.a64 = { 5, 10 }}, .otherval = 3 };\n\nint main(void)\n{\n    printf(\"%d, %d\\n\", (int) instance.main.a64[0], (int) instance.main.a64[1]);\n    printf(\"%d\\n\", instance.otherval);\n\n}\n</code></pre>\n\n<p>Compiled with <code>gcc -std=c11 -Wall -Wextra -Wpedantic</code>, here is the program output:</p>\n\n<pre><code>5, 10\n3\n</code></pre>\n\n<h2>Update</h2>\n\n<p>This use of designated initializers should also work with at least C99, though C99 does not support unnamed structures or unions. Here is an example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct Inner {\n    int x;\n    int arr[2];\n};\n\nstruct Outer {\n    char id[100];\n    struct Inner state;\n};\n\nint main(void)\n{\n    struct Outer instance = { .id = \"first\",\n                              .state = {.x = 5, .arr[0] = 1, .arr[1] = 2 }};\n\n    printf(\"instance id: %s\\n\", instance.id);\n    printf(\"instance state.x = %d\\n\", instance.state.x);\n    printf(\"instance state.arr[0] = %d\\n\", instance.state.arr[0]);\n    printf(\"instance state.arr[1] = %d\\n\", instance.state.arr[1]);\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with <code>gcc -std=c99 -Wall -Wextra -Wpedantic</code>, here is the program output:</p>\n\n<pre><code>instance id: first\ninstance state.x = 5\ninstance state.arr[0] = 1\ninstance state.arr[1] = 2\n</code></pre>\n\n<h2>Final Note</h2>\n\n<p>It turns out that OP's original syntax of:</p>\n\n<pre><code>OtherStruct_t instance = { .main.a64 = { 0, 0 }, .otherval = 3 };\n</code></pre>\n\n<p>should also work on both C99 and C11, but is not supported in older standards which do not allow initialization of subobjects.</p>\n\n<p>Unnamed unions are not supported in C99, but are available as a GNU extension. Further investigation has turned up <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=10676\" rel=\"nofollow noreferrer\">this bug report</a> which suggests that designated initializers for unnamed structs and unions were fixed in gcc 4.6. As workaround, it was suggested at this link to enclose the offending initializer in braces; it is also mentioned that this workaround is a bit finicky and position dependent, which may explain why it does not work here for OP.</p>\n"}], "owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 43103933, "answer_count": 1, "score": 1, "last_activity_date": 1490891999, "creation_date": 1490817146, "question_id": 43102901, "link": "https://stackoverflow.com/questions/43102901/using-designated-initializers-with-unnamed-nested-data-types", "title": "Using designated initializers with unnamed nested data types", "body": "<p>I'm wondering if it is possible to use designated initializers in unnamed data members of structs...   (Yikes, a mouthful, but yes, it is the cleanest way to do what I'm trying to do...).   If I have:</p>\n\n<pre><code>typedef struct MainStruct {\n    union {\n         uint8_t   a8[16];\n         uint64_t  a64[2];\n    };\n    uint64_t       i64;\n} MainStruct_t;\n\ntypedef struct OtherStruct {\n    MainStruct_t main;\n    int          otherval;\n} OtherStruct_t;\n\nOtherStruct_t instance = { .main.a64 = { 0, 0 }, .otherval = 3 };\n</code></pre>\n\n<p>and I try to compile, I get the error:</p>\n\n<pre><code>tst3.c:16: error: unknown field \u2018a64\u2019 specified in initializer\n</code></pre>\n\n<p>I've also tried using <code>.main..a64</code>, but I'm getting other issues.   This is with gcc 4.4.  Unfortunately, the <code>MainStruct</code> is used all over the code, so naming the union would involve changing hundreds of files, so I'd like to avoid that.   I'd also like to avoid any assumptions about position of <code>MainStruct</code> within <code>OtherStruct</code> if possible.</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1490817073, "post_id": 43102842, "comment_id": 73287472, "body": "after the <code>fgetc</code> loop the file pointer is at the end of the file. You need to <code>rewind</code> the file before reading it again."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1490817865, "post_id": 43102842, "comment_id": 73287883, "body": "@Lashane <code>file</code> was opening in text mode.  Text files corresponding to the compiler&#39;s C library understanding of a text file will translate the <code>\\n</code>, <code>\\r\\n</code> or <code>\\r</code> to a <code>&#39;\\n&#39;</code>.  <code>if (ch == &#39;\\n&#39;)</code> is sufficient.  If other text files need to be processed, many other issues occur beyond this post&#39;s scope."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1490818063, "post_id": 43102842, "comment_id": 73288002, "body": "Tip: any time code does not behave as expected and code is doing I/O, add code to check the return value of I/O functions like <code>fscanf(file, &quot;%d&quot;, &amp;num[i]);</code> which would have shown a problem - this saves you time."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1490820025, "post_id": 43102842, "comment_id": 73289045, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/139420/discussion-between-chux-and-lashane\">continue this discussion in chat</a>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1490847011, "post_id": 43102842, "comment_id": 73297296, "body": "<code>while(!feof(file))</code> <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">is always wrong</a>. <code>fgetc</code>returns an <code>int</code> not a <code>char</code>."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1490817181, "creation_date": 1490817181, "answer_id": 43102911, "question_id": 43102842, "link": "https://stackoverflow.com/questions/43102842/reading-integers-from-txt-file-in-c/43102911#43102911", "title": "Reading integers from txt file in C", "body": "<p>You forgot to \"rewind\" the file:</p>\n\n<pre><code>fseek(file, 0, SEEK_SET);\n</code></pre>\n\n<p>Your process of reading goes through the file twice - once to count lines, and once more to read the data. You need to go back to the beginning of the file before the second pass.</p>\n\n<p>Note that you can do this in a single pass by using <code>realloc</code> as you go: read numbers in a loop into a temporary <code>int</code>, and for each successful read expand the <code>num</code> array by one by calling <code>realloc</code>. This will expand the buffer as needed, and you would not need to rewind.</p>\n\n<p>Be careful to check the results of <code>realloc</code> before re-assigning to <code>num</code> to avoid memory leaks.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1490847180, "post_id": 43107822, "comment_id": 73297344, "body": "A couple of notes, there is absolutely <b>no</b> error checking provided by <code>atoi</code>, any subsequent code that relies on <code>buffer[X]</code> containing an <code>unsigned</code> value within the range <code>0 - INT_MAX</code> has no way to validate that <code>buffer[X]</code> contains a valid value. (better to use <code>strtoul</code> with error checking). Next, assigning the return of <code>realloc</code> to the pointer itself (rather than to a <code>tmp</code> pointer) risks creating a memory leak by losing a reference to the original block of memory. (better <code>void *tmp = realloc(buffer, sizeof *buffer * buffer_size); if (tmp) buffer = tmp;</code>. (no need to cast either)"}, {"owner": {"reputation": 155, "user_id": 1391902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959cbf92a60cdd0e5be0efb45ab371ab?s=128&d=identicon&r=PG", "display_name": "Mateo Olaya", "link": "https://stackoverflow.com/users/1391902/mateo-olaya"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490849549, "post_id": 43107822, "comment_id": 73297985, "body": "@DavidC.Rankin is right, you might check the integrity of conversion using <code>sscanf</code> or <code>strtoul</code>. Also, you should check pointers integrity for avoiding possible leak or memory issues. Thanks David C."}], "tags": [], "owner": {"reputation": 155, "user_id": 1391902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959cbf92a60cdd0e5be0efb45ab371ab?s=128&d=identicon&r=PG", "display_name": "Mateo Olaya", "link": "https://stackoverflow.com/users/1391902/mateo-olaya"}, "is_accepted": false, "score": 1, "last_activity_date": 1490848578, "last_edit_date": 1495535455, "creation_date": 1490843461, "answer_id": 43107822, "question_id": 43102842, "link": "https://stackoverflow.com/questions/43102842/reading-integers-from-txt-file-in-c/43107822#43107822", "title": "Reading integers from txt file in C", "body": "<p>You could try to use the <code>getline</code> function from standard IO and add the parsed numbers into the array using only one loop. See the code below.  Please check <a href=\"https://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/getline</a></p>\n\n<p>Also, you can use the <code>atoi</code> or <code>strtoul</code> functions to convert the read line to an integer. Feel free to check <a href=\"https://linux.die.net/man/3/atoi\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/atoi</a> or <a href=\"https://linux.die.net/man/3/strtoul\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/strtoul</a></p>\n\n<p>The code below evaluate a file with a list of numbers and add those numbers to a C integer pointer</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char ** argv) {\n    FILE * file;\n\n    file = fopen(\"./file.txt\", \"r\");\n\n    size_t read;\n    char * line = NULL;\n    size_t line_len = 0;\n\n    size_t buffer_size = 10;\n    int * buffer = (int *)malloc(sizeof(int) * buffer_size);\n\n    int seek = 0;\n    while((read = getline(&amp;line, &amp;line_len, file)) != -1) {\n        buffer[seek++] = atoi(line);\n\n        if (seek % 10 == 0) {\n            buffer_size += 10;\n            buffer = (int *)realloc(buffer, sizeof(int) * buffer_size);\n        }\n    }\n\n    for (int i = 0; i &lt; seek; i++) {\n        printf(\"%d\\n\", buffer[i]);\n    }\n\n    free(buffer);\n    fclose(file);\n}\n</code></pre>\n\n<p>If you aren't sure which conversion function should you use. You can check the difference between <code>atoi</code> and <code>sscanf</code> at <a href=\"https://stackoverflow.com/questions/3420629/what-is-the-difference-between-sscanf-or-atoi-to-convert-a-string-to-an-integer\">What is the difference between sscanf or atoi to convert a string to an integer?</a> </p>\n"}], "owner": {"reputation": 37, "user_id": 7265276, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063614933755173/picture?type=large", "display_name": "Felipe De Carli", "link": "https://stackoverflow.com/users/7265276/felipe-de-carli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4732, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490848578, "creation_date": 1490816929, "last_edit_date": 1490817238, "question_id": 43102842, "link": "https://stackoverflow.com/questions/43102842/reading-integers-from-txt-file-in-c", "title": "Reading integers from txt file in C", "body": "<p>I`m making a file reader that reads integers numbers line by line from a file. The problem is that is not working. I think I am using fscanf in a wrong way. Can someone help me?</p>\n\n<p>I had already look for answers in others questions but I can`t find anything that explain why I my code is not working.</p>\n\n<pre><code>int read_from_txt(){\n    FILE *file;\n    file = fopen(\"random_numbers.txt\", \"r\");\n    //Counting line numbers to allocate exact memory\n    int i;\n    unsigned int lines = 0;\n    unsigned int *num;\n    char ch;\n    while(!feof(file)){\n        ch = fgetc(file);\n        if (ch == '\\n'){\n            lines++;\n        }\n    }\n    //array size will be lines+1\n    num = malloc(sizeof(int)*(lines+1));\n    //storing random_numbers in num vector\n    for(i=0;i&lt;=lines;i++){\n        fscanf(file, \"%d\", &amp;num[i]);\n        printf(\"%d\", num[i]);\n    }\n    fclose(file);\n}\n</code></pre>\n\n<p>The txt file is like:</p>\n\n<pre><code>12 \n15\n32\n68\n46\n...\n</code></pre>\n\n<p>But the output of this code keeps giving \"0000000000000000000...\"</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1490814350, "post_id": 43102026, "comment_id": 73285830, "body": "don&#39;t you want to attach the new_node you allocated to head?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1490814359, "post_id": 43102026, "comment_id": 73285839, "body": "<code>insert()</code> can&#39;t modify the <code>head</code> from <code>main()</code>, since it&#39;s passed by value.  You need to pass a pointer to it for that (ie. a pointer to pointer to struct node)"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1490814383, "post_id": 43102026, "comment_id": 73285856, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20108412/c-linked-list-why-is-my-list-head-variable-remaining-null-new-to-c\">C linked list why is my list head variable remaining null (new to C)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 0, "creation_date": 1490814715, "post_id": 43102099, "comment_id": 73286043, "body": "can you please elaborate a little bit?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 0, "creation_date": 1490814863, "post_id": 43102099, "comment_id": 73286127, "body": "So, you have set head to NULL in the main. And you are passing it to insert function. You are passing a copy of head. So the head inside the function is NULL. Now you change it in the if condition. The local copy of head has changed but the head in main is still the same. For it, no insertion has actually happened."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 1, "creation_date": 1490815087, "post_id": 43102099, "comment_id": 73286268, "body": "Yes, it is pointer to a struct. But it is still a variable. To change the contents of the variable in the insert function you will need a pointer to the pointer. Hence the <code>struct node **head</code>"}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 0, "creation_date": 1490815363, "post_id": 43102099, "comment_id": 73286419, "body": "Thanks for the help. Any tutorial for the same. It&#39;s quite confusing, felt like inception. :)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 0, "creation_date": 1490815479, "post_id": 43102099, "comment_id": 73286516, "body": "Yes, you can have any depth for a pointer. For further explanation you might want to see the comment JohnnyMopp made."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1490814386, "creation_date": 1490814386, "answer_id": 43102099, "question_id": 43102026, "link": "https://stackoverflow.com/questions/43102026/head-is-always-null-in-linked-list-insert/43102099#43102099", "title": "head is always null in linked list insert", "body": "<p>The problem you are facing is that when you are inserting the first element, the head isn't changing. You have passed its values to the function. </p>\n\n<p>What you need to do is pass the address of head i.e. <code>struct node** head</code> and then modify <code>*head</code> if it is the first element being inserted.</p>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 4718232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c260452502e83ce1a63f1ea4c93dc83e?s=128&d=identicon&r=PG&f=1", "display_name": "maigar", "link": "https://stackoverflow.com/users/4718232/maigar"}, "is_accepted": false, "score": 0, "last_activity_date": 1490814733, "creation_date": 1490814733, "answer_id": 43102212, "question_id": 43102026, "link": "https://stackoverflow.com/questions/43102026/head-is-always-null-in-linked-list-insert/43102212#43102212", "title": "head is always null in linked list insert", "body": "<p>Whenever you want to change the value of some variable passed to a function, you need to pass by reference or use pointer of the variable. Same is the case here. The function <code>insert</code> changes the value of your variable <code>head</code>, which is a pointer. So you will have to pass a pointer of the pointer. </p>\n\n<p>Thus, the argument has to be  <code>struct node **head</code> and in the <code>main()</code> function pass <code>&amp;head</code> to <code>insert()</code>.</p>\n"}], "owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 43102099, "answer_count": 2, "score": -1, "last_activity_date": 1490814733, "creation_date": 1490814155, "question_id": 43102026, "link": "https://stackoverflow.com/questions/43102026/head-is-always-null-in-linked-list-insert", "title": "head is always null in linked list insert", "body": "<p>I am trying to insert into my linked list. Here is what I wrote for the same:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nstruct node\n{\n    int data;\n    struct node *next;\n};\n\n\nvoid show_menu()\n{\n    printf(\"\\nWhat do you want to do: \\n\");\n    printf(\"1.Insert \\n2.Delete \\n3.Show\"); \n    printf(\"\\nEnter your choice: \\n\");\n}\n\nvoid insert(struct node *head)\n{\n    int new_numer;\n    printf(\"Enter a number to insert in the linked list: \\n\");\n    scanf(\"%d\",&amp;new_numer);\n\n    if ( head == NULL )\n    {\n        head = (struct node *)malloc(sizeof(struct node));\n        head-&gt;data = new_numer;\n        head-&gt;next = NULL;\n    }\n    else\n    {\n        struct node *temp = head;\n\n        struct node *new_node = (struct node *)malloc(sizeof(struct node));\n\n        new_node -&gt; data = new_numer;\n\n        new_node -&gt; next = NULL;\n\n        while( temp -&gt; next != NULL )\n        {\n            temp = temp -&gt; next;\n        }\n        temp-&gt;next = new_node;\n    }\n}\n\n\nvoid show(struct node *head)\n{\n    printf(\"\\n The elements in the list are: \\n\");\n    while ( head != NULL )\n    {\n        printf(\"%d\\n\", head-&gt;data);\n        head = head -&gt; next;\n    }\n}\n\n\nint main(int argc, char const *argv[])\n{\n    int choice;\n\n    struct node *head = NULL;\n\n\n    while(1)\n    {\n        show_menu();\n        scanf(\"%d\",&amp;choice);\n\n        switch(choice)\n        {\n            case 1:\n                insert(head);\n                show(head);\n            break;\n\n            case 2:\n                show(head);\n            break;\n\n            case 3:\n            break;\n\n            default:\n                printf(\"Don't fuck with me.\\n\");\n        }\n\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>On running the code, I got:</p>\n\n<pre><code>What do you want to do: \n1.Insert \n2.Delete \n3.Show\nEnter your choice: \n1\nEnter a number to insert in the linked list: \n12\n\n The elements in the list are: \n\nWhat do you want to do: \n1.Insert \n2.Delete \n3.Show\nEnter your choice: \n</code></pre>\n\n<p>Why there is no element inserted in the list?</p>\n\n<p>If I am moving      </p>\n\n<pre><code>head = (struct node *)malloc(sizeof(struct node));\n</code></pre>\n\n<p>to the main function, I am getting first element as zero and other inserted.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c", "swift"], "comments": [{"owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "edited": false, "score": 0, "creation_date": 1490835092, "post_id": 43101701, "comment_id": 73294427, "body": "No, you can&#39;t call Swift from C (you can do the opposite however). To get around that, import Swift into ObjC and call C from there"}], "answers": [{"tags": [], "owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1490927075, "creation_date": 1490927075, "answer_id": 43131359, "question_id": 43101701, "link": "https://stackoverflow.com/questions/43101701/calling-swift-code-in-a-c-testing-suite/43131359#43131359", "title": "Calling Swift code in a C testing suite", "body": "<p>To call Swift from C one can wrap Swift code in Objective-C functions callable from C.  A trivial contrived example follows.</p>\n\n<p>Swift code:</p>\n\n<pre><code>import Foundation\n\n@objc public class ClassSwift : NSObject {\n    public func addIntegers(int1:Int32, int2:Int32) -&gt; Int32 {\n        return int1 + int2;\n    }\n}\n</code></pre>\n\n<p>Objective-C wrapper:</p>\n\n<pre><code>// Mixed 1a is the name of my sample target\n// You can see the name of your Swift header in\n// Objective-C Generated Interface Header Name under Build Settings.\n#import \"Mixed_1a-Swift.h\"\n\n// This function is callable from C, even though it calls Swift code!\nint addIntsC(int i1, int i2)\n{\n    ClassSwift * cs = [[ClassSwift alloc] init];\n    return [cs addIntegersWithInt1:i1 int2:i2];\n}\n</code></pre>\n\n<p>And, finally, here's the C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint addIntsC(int, int);\n\nint main(int argc, const char * argv[]) {\n    int result = addIntsC(3, 7);\n    if (result == 10) puts(\"Test passed!\");\n    else puts(\"Failed... :(\");    \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 10190, "user_id": 5236226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ffj4X.jpg?s=128&g=1", "display_name": "Caleb Kleveter", "link": "https://stackoverflow.com/users/5236226/caleb-kleveter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 43131359, "answer_count": 1, "score": 2, "last_activity_date": 1490927075, "creation_date": 1490813134, "question_id": 43101701, "link": "https://stackoverflow.com/questions/43101701/calling-swift-code-in-a-c-testing-suite", "title": "Calling Swift code in a C testing suite", "body": "<p>I am currently working on a library in Swift that has a version already written in C. As the version in C already has a large testing suite, I would like to just run the Swift code through the C tests.</p>\n\n<p>Is it possible to call Swift in C?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 2382, "user_id": 3615862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rjMyq.jpg?s=128&g=1", "display_name": "ThisaruG", "link": "https://stackoverflow.com/users/3615862/thisarug"}, "edited": false, "score": 0, "creation_date": 1490812669, "post_id": 43101509, "comment_id": 73284686, "body": "Where&#39;s your code ?"}, {"owner": {"reputation": 31, "user_id": 2258115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624a7708044026d13c36d80b362b4aad?s=128&d=identicon&r=PG", "display_name": "MCrolio", "link": "https://stackoverflow.com/users/2258115/mcrolio"}, "reply_to_user": {"reputation": 2382, "user_id": 3615862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rjMyq.jpg?s=128&g=1", "display_name": "ThisaruG", "link": "https://stackoverflow.com/users/3615862/thisarug"}, "edited": false, "score": 0, "creation_date": 1490814754, "post_id": 43101509, "comment_id": 73286059, "body": "sorry @ThisaruGuruge the c code is irrelevant a simple c file with a printf statement  and &#39; gcc filename.c -o test &#39; would produce the same errors. &#39;&#39;cceggs5M.s&#39; changes everytime the command was run."}, {"owner": {"reputation": 31, "user_id": 2258115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624a7708044026d13c36d80b362b4aad?s=128&d=identicon&r=PG", "display_name": "MCrolio", "link": "https://stackoverflow.com/users/2258115/mcrolio"}, "reply_to_user": {"reputation": 2382, "user_id": 3615862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rjMyq.jpg?s=128&g=1", "display_name": "ThisaruG", "link": "https://stackoverflow.com/users/3615862/thisarug"}, "edited": false, "score": 0, "creation_date": 1501092213, "post_id": 43101509, "comment_id": 77630812, "body": "@ThisaruGuruge which code would you expect me to post in this case?"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 2258115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624a7708044026d13c36d80b362b4aad?s=128&d=identicon&r=PG", "display_name": "MCrolio", "link": "https://stackoverflow.com/users/2258115/mcrolio"}, "is_accepted": false, "score": 1, "last_activity_date": 1490812895, "creation_date": 1490812895, "answer_id": 43101629, "question_id": 43101509, "link": "https://stackoverflow.com/questions/43101509/suffix-or-operands-invalid-for-move-with-gcc/43101629#43101629", "title": "suffix or operands invalid for `move&#39; with gcc", "body": "<p>So it seems to be a conflict between brew and Macports. I dont know specifically what caused the conflict.</p>\n\n<p>But <a href=\"https://guide.macports.org/chunked/installing.macports.uninstalling.html\" rel=\"nofollow noreferrer\">Uninstalling Macports</a> allowed me to successfully compile without the issue:</p>\n\n<pre><code>sudo port -fp uninstall installed\n</code></pre>\n\n<p>Hope this helps anyone else experiencing the same issue.</p>\n"}], "owner": {"reputation": 31, "user_id": 2258115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624a7708044026d13c36d80b362b4aad?s=128&d=identicon&r=PG", "display_name": "MCrolio", "link": "https://stackoverflow.com/users/2258115/mcrolio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1503544487, "creation_date": 1490812530, "last_edit_date": 1490815306, "question_id": 43101509, "link": "https://stackoverflow.com/questions/43101509/suffix-or-operands-invalid-for-move-with-gcc", "title": "suffix or operands invalid for `move&#39; with gcc", "body": "<p>So after trying to compile a C program with gcc on Mac I was met with an unexpected error.</p>\n\n<p>The original program was reduced to a simple test printf statement.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void){\nprintf(\"test\");\nreturn 0;\n}\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>/var/folders/bh/npq9sw994k3bzrxgwyc9kv2h0000gn/T//cceggs5M.s:36:suffix or operands invalid for `movq'\n/var/folders/bh/npq9sw994k3bzrxgwyc9kv2h0000gn/T//cceggs5M.s:44:suffix or operands invalid for `movq'\n/var/folders/bh/npq9sw994k3bzrxgwyc9kv2h0000gn/T//cceggs5M.s:52:suffix or operands invalid for `movq'\n/var/folders/bh/npq9sw994k3bzrxgwyc9kv2h0000gn/T//cceggs5M.s:57:suffix or operands invalid for `movq'\n</code></pre>\n\n<p>What causes this issue and how do i resolve it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490812164, "post_id": 43101336, "comment_id": 73284408, "body": "1) A pointer is not the object it points to! 2) Your function is <code>void</code>, it does not return anything. Format the code properly! If you get a warning you have too little text for too much code, that should tell you something! Don&#39;t work around it by not formatting your code.."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 3, "creation_date": 1490813685, "post_id": 43101336, "comment_id": 73285348, "body": "Your sarcasm isn&#39;t fixing the code either! To answer your question, you can access the element last inserted by accessing <code>books[size-1]</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490815007, "post_id": 43101336, "comment_id": 73286220, "body": "@Olaf 1) I am adopting your style of speaking in points 2) I am starting right now!"}], "answers": [{"tags": [], "owner": {"reputation": 2361, "user_id": 7410358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b241c8238988d25da76f83adf9071201?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Langholtz", "link": "https://stackoverflow.com/users/7410358/louis-langholtz"}, "is_accepted": true, "score": 1, "last_activity_date": 1490814032, "creation_date": 1490814032, "answer_id": 43101991, "question_id": 43101336, "link": "https://stackoverflow.com/questions/43101336/passing-and-returning-a-struct-from-a-function/43101991#43101991", "title": "Passing and returning a struct from a function", "body": "<p>Your return statement isn't going to do what you're intending as the <code>addBook</code>'s function signature says it returns void. I'm surprised that the code as is actually compiled without an error about this.</p>\n\n<p>Anyways, the book data can be returned from the same way it was passed in - as an input and output parameter.</p>\n\n<p>Essentially your code could look like the following (which is only meant to be an example of code that compiles and works to save info entered in from standard input into the book):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct Book {\n    int value;\n};\n\n#define MAX_BOOKS 2\n\nvoid addBook(struct Book book[], int *size) {\n    if (*size == MAX_BOOKS) {\n        printf(\"The inventory is full\\n\");\n    }\n    else {\n        printf(\"Value:\");\n        scanf(\"%d\", &amp;book[*size].value);\n        (*size)++;\n        printf(\"The book is successfully added to the inventory.\\n\");\n    }\n}\n\nint main(void) {\n    struct Book book[MAX_BOOKS];\n    int size = 0;\n\n    addBook(book, &amp;size);\n    printf(\"Book 1: Value=%d\\n\", book[0].value);\n}\n</code></pre>\n\n<p>And here's how this looks when run:</p>\n\n<pre><code>$ ./main\nValue:9\nThe book is successfully added to the inventory.\nBook 1: Value=9\n</code></pre>\n\n<p>Hope this answers your question.</p>\n"}, {"tags": [], "owner": {"reputation": 150, "user_id": 5137309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pWZhEJDRCyc/AAAAAAAAAAI/AAAAAAAAAIk/K4pZ3K9HjNw/photo.jpg?sz=128", "display_name": "Orlando Rivera Letelier", "link": "https://stackoverflow.com/users/5137309/orlando-rivera-letelier"}, "is_accepted": false, "score": 0, "last_activity_date": 1490814491, "creation_date": 1490814491, "answer_id": 43102132, "question_id": 43101336, "link": "https://stackoverflow.com/questions/43101336/passing-and-returning-a-struct-from-a-function/43102132#43102132", "title": "Passing and returning a struct from a function", "body": "<p>I think your problem is in the line <code>*size++;</code>. You should use parenthesis, otherwise you are modifying the pointer to size, not the value. It should be <code>(*size)++</code>.\nAlso, the addBook function should not return anything, since it is void, and it is changing the content of the array book already.</p>\n"}], "owner": {"reputation": 11, "user_id": 7732444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064965545381e82979f211ca43876162?s=128&d=identicon&r=PG&f=1", "display_name": "bob stewart", "link": "https://stackoverflow.com/users/7732444/bob-stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 43101991, "answer_count": 2, "score": -2, "last_activity_date": 1490815816, "creation_date": 1490812076, "last_edit_date": 1490815816, "question_id": 43101336, "link": "https://stackoverflow.com/questions/43101336/passing-and-returning-a-struct-from-a-function", "title": "Passing and returning a struct from a function", "body": "<p>I have a function with a book struct array, but when i try to return it to my main it does not return the values and store them in the array. If the addBook function has to be void how would i work around that so that i can access the array elements later.</p>\n\n<pre><code>void addBook(struct Book book[], int *size) {\n\n    if (*size == MAX_BOOKS) {\n        printf(\"The inventory is full\\n\");\n\n    }\n    else {\n\n        printf(\"ISBN:\");\n        scanf(\"%d\", &amp;book[*size]._isbn);\n        printf(\"Title:\");\n        scanf(\"%s\", book[*size]._title);\n        getchar();\n        printf(\"Year:\");\n        scanf(\"%d\", &amp;book[*size]._year);\n        printf(\"Price:\");\n        scanf(\"%f\", &amp;book[*size]._price);\n        printf(\"Quantity:\");\n        scanf(\"%d\", &amp;book[*size]._qty);\n        *size++;\n        printf(\"The book is successfully added to the inventory.\\n\");\n    }\n    return book;\n}\n\nint main(void) {\n\n    struct Book book[MAX_BOOKS];\n    int size = 0;\n    int i;\n    int option;\n\n\n    printf(\"Welcome to the Book Store\\n\");\n    printf(\"=========================\\n\");\n\n    do {\n        menu();\n        printf(\"Select: \");\n        scanf(\"%d\", &amp;option);\n\n        switch (option) {\n\n        case 0:\n            printf(\"Goodbye!\\n\");\n            break;\n        case 1:\n            displayInventory(book, size);\n            break;\n        case 2:\n            addBook(book, &amp;size);\n            break;\n        case 3:\n            //checkPrice();\n            break;\n        default:\n            printf(\"Invalid input, try again:\\n\");\n        }\n    } while (option != 0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1490812258, "post_id": 43101329, "comment_id": 73284447, "body": "Your output is inside a loop. The loop runs 6 times, printing 1 character each time, for a total of 6 characters (this is including the ENTER)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1490812263, "post_id": 43101329, "comment_id": 73284450, "body": "what did you expect to see as output?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1490812410, "post_id": 43101329, "comment_id": 73284531, "body": "&quot;I know I should use int for c here&quot; ... so use <code>int</code>!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490813273, "post_id": 43101329, "comment_id": 73285077, "body": "Detail: In C, a <i>string</i> is an array of characters up to and including the null character.  Output is not a <i>string</i>, but a series of characters - one at a time (although likely buffered).  <code>printf(&quot;%c&quot;,c);</code> was called 5 times, each time with a new value on <code>c</code>, each time printing 1 character."}, {"owner": {"reputation": 19, "user_id": 6544979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a90b357dd4598e97135b913b03a0d84?s=128&d=identicon&r=PG&f=1", "display_name": "Udit Arora", "link": "https://stackoverflow.com/users/6544979/udit-arora"}, "edited": false, "score": 0, "creation_date": 1490813494, "post_id": 43101329, "comment_id": 73285223, "body": "I got it that it was series of characters but why weren&#39;t the characters being printed simultaneously. I mean it gets one character now it should print that character and now another character and so on ?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1490813980, "post_id": 43101329, "comment_id": 73285557, "body": "Try doing <code>printf(&quot;%\\n&quot;, c);</code> instead and you will get what you expected"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1490814781, "post_id": 43101329, "comment_id": 73286073, "body": "@UditArora: Because the characters weren&#39;t <i>read</i> simultaneously - they way the loop is written, you read a character with <code>getchar()</code>, print it with <code>printf()</code>, then read the <i>next</i> character with <code>getchar()</code>, print <i>that</i> character with <code>printf()</code>, etc."}, {"owner": {"reputation": 19, "user_id": 6544979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a90b357dd4598e97135b913b03a0d84?s=128&d=identicon&r=PG&f=1", "display_name": "Udit Arora", "link": "https://stackoverflow.com/users/6544979/udit-arora"}, "edited": false, "score": 0, "creation_date": 1490973167, "post_id": 43101329, "comment_id": 73365529, "body": "Thank u everyone got the answer :)"}], "owner": {"reputation": 19, "user_id": 6544979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a90b357dd4598e97135b913b03a0d84?s=128&d=identicon&r=PG&f=1", "display_name": "Udit Arora", "link": "https://stackoverflow.com/users/6544979/udit-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490812063, "creation_date": 1490812063, "question_id": 43101329, "link": "https://stackoverflow.com/questions/43101329/c-how-can-character-o-p-be-a-string", "title": "C: How can character o/p be a string", "body": "<p>My question is when I give :</p>\n\n<p>i/p - abcde</p>\n\n<p>how i get output - abcde .</p>\n\n<p>I mean C is a character so shouldn't o/p also be an single character .\nWhy is o/p coming out to be be string cant understand.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    char c;\n    while((c = getchar()) != EOF){\n        printf(\"%c\",c);\n        }\n    return 0;\n}\n</code></pre>\n\n<p>Appreciate Help.\nI know I should use int for c here.</p>\n"}, {"tags": ["c", "enums", "scope", "initialization", "variable-assignment"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1490812100, "post_id": 43101285, "comment_id": 73284372, "body": "<code>card = club</code> is a statement, and you can&#39;t have statements outside a function body."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1490812203, "post_id": 43101346, "comment_id": 73284424, "body": "Nitpick: <code>initialize a global variable on another line</code>..we have a shorter name for that, assignment. :)"}, {"owner": {"reputation": 75, "user_id": 4404837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o8rUF0uiNRs/AAAAAAAAAAI/AAAAAAAAAD4/KI7Xo9d8Hig/photo.jpg?sz=128", "display_name": "Vaibhav Gautam", "link": "https://stackoverflow.com/users/4404837/vaibhav-gautam"}, "edited": false, "score": 0, "creation_date": 1490855570, "post_id": 43101346, "comment_id": 73300540, "body": "@Dai I am not sure about your first two statements. Since we can declare a global variable and define it separately on two different line without any fear of compilation error. But I am not sure if this case is valid for enum or maybe structure variable. If it is not valid then there I would like to know why it is not valid."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1490857052, "post_id": 43101346, "comment_id": 73301396, "body": "&quot; Since we can declare a global variable and define it separately on two different line without any fear of compilation error.&quot; - correct, however in your original code the line where you set the value of <code>card</code> is <i>not</i> a definition."}], "tags": [], "owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "is_accepted": false, "score": 2, "last_activity_date": 1490812283, "last_edit_date": 1490812283, "creation_date": 1490812106, "answer_id": 43101346, "question_id": 43101285, "link": "https://stackoverflow.com/questions/43101285/why-am-i-getting-error-when-enum-type-variable-is-initialized-in-file-scope/43101346#43101346", "title": "Why am I getting error when enum type variable is initialized in file scope?", "body": "<p>Your first declares a global variable named <code>club</code> of type <code>enum suit</code>, however you cannot initialize a global variable on another line outside of a function - you must do it on the same line, like so:</p>\n\n<pre><code>enum suit {\n    club = 0,\n    diamonds = 10,\n    hearts = 20,\n    spades = 3\n} card = club;\n</code></pre>\n\n<p>I feel your code would be more readable if you moved the <code>enum club</code> definition away from the variable declaration:</p>\n\n<pre><code>enum suit {\n    club = 0,\n    diamonds = 10,\n    hearts = 20,\n    spades = 3\n};\n\nenum suit card = club;\n</code></pre>\n\n<p>The extra <code>enum</code> keyword is because C (unlike C++) has a different namespace for each kind of type - so you can have <code>enum foo</code> and <code>struct foo</code> in the same project without the names colliding because <code>enum</code> and <code>struct</code> type names exist in different namespaces.</p>\n\n<p>(I'm personally not a fan of using <code>typedef</code> - but feel free to go with that if you choose).</p>\n"}, {"comments": [{"owner": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1490812553, "post_id": 43101366, "comment_id": 73284609, "body": "Why is it so? Might be because the guaranteed ordered execution starts from <code>main()</code> function?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1490812613, "post_id": 43101366, "comment_id": 73284645, "body": "@AbhinavGauniyal Yep, you put any runtime statement in file scope and nobody knows when it should be executed, so it&#39;s illegal."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1490815378, "post_id": 43101366, "comment_id": 73286430, "body": "@SouravGhosh Unrelated but won&#39;t main() be the same as main(void) since it is a definition?"}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1490815611, "post_id": 43101366, "comment_id": 73286605, "body": "@AjayBrahmakshatriya In C99 you must specify <code>foo(void)</code> to indicate a function has no parameters. If you omit <code>void</code> it&#39;s not considered a declaration/prototype, but a definition, and then things get funny: <a href=\"https://security.stackexchange.com/questions/43042/in-c-not-using-void-if-a-function-does-not-accept-any-argument-is-a-potential\" title=\"in c not using void if a function does not accept any argument is a potential\">security.stackexchange.com/questions/43042/&hellip;</a>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1490815735, "post_id": 43101366, "comment_id": 73286680, "body": "@Dai, but it IS a definition. Not a declaration."}, {"owner": {"reputation": 75, "user_id": 4404837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o8rUF0uiNRs/AAAAAAAAAAI/AAAAAAAAAD4/KI7Xo9d8Hig/photo.jpg?sz=128", "display_name": "Vaibhav Gautam", "link": "https://stackoverflow.com/users/4404837/vaibhav-gautam"}, "edited": false, "score": 0, "creation_date": 1490855875, "post_id": 43101366, "comment_id": 73300704, "body": "@SouravGhosh I don&#39;t think it should be an assignment issue here. That thing you are saying is true when compiler don&#39;t know what value the global variable to assign with. But here the case is different as the value with which I am assigning the enum variable is of const type and compiler do know its value beforehand. If you see the compilation error log, it is the type conflict issue which somehow Dai is able to solve it. But still question is why we can&#39;t declare and define enum variable separately."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 75, "user_id": 4404837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o8rUF0uiNRs/AAAAAAAAAAI/AAAAAAAAAD4/KI7Xo9d8Hig/photo.jpg?sz=128", "display_name": "Vaibhav Gautam", "link": "https://stackoverflow.com/users/4404837/vaibhav-gautam"}, "edited": false, "score": 0, "creation_date": 1490856046, "post_id": 43101366, "comment_id": 73300789, "body": "@VaibhavGautam You&#39;re free to think otherwise, but as far as I know, assignment statements cannot exist in file scope, that&#39;s the syntax and sematics."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1490812566, "last_edit_date": 1490812566, "creation_date": 1490812153, "answer_id": 43101366, "question_id": 43101285, "link": "https://stackoverflow.com/questions/43101285/why-am-i-getting-error-when-enum-type-variable-is-initialized-in-file-scope/43101366#43101366", "title": "Why am I getting error when enum type variable is initialized in file scope?", "body": "<p>This happens because</p>\n\n<pre><code>  card = club;\n</code></pre>\n\n<p>is an <strong><a href=\"https://en.wikipedia.org/wiki/Assignment_(computer_science)\" rel=\"nofollow noreferrer\">assignment statement</a></strong> , which needs to be in block scope (some function body) not in file scope, not an <strong>initialization</strong>. </p>\n\n<p>If you use <a href=\"https://en.wikipedia.org/wiki/Initialization_(programming)\" rel=\"nofollow noreferrer\">initialization</a>, it'll work.</p>\n\n<p>Also note the extra changes</p>\n\n<ul>\n<li><code>int main()</code> should be <code>int main(void)</code></li>\n<li><code>sizeof</code> yields a <code>size_t</code>, so you should use <code>%zu</code> format specifier to print the result.</li>\n</ul>\n\n<p>Example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nenum suit {\n    club = 0,\n    diamonds = 10,\n    hearts = 20,\n    spades = 3\n} card = club;\n\nint main(void) \n{ \n    printf(\"Size of enum variable = %zu bytes\", sizeof(card));   \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4404837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o8rUF0uiNRs/AAAAAAAAAAI/AAAAAAAAAD4/KI7Xo9d8Hig/photo.jpg?sz=128", "display_name": "Vaibhav Gautam", "link": "https://stackoverflow.com/users/4404837/vaibhav-gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490812648, "creation_date": 1490811906, "last_edit_date": 1490812648, "question_id": 43101285, "link": "https://stackoverflow.com/questions/43101285/why-am-i-getting-error-when-enum-type-variable-is-initialized-in-file-scope", "title": "Why am I getting error when enum type variable is initialized in file scope?", "body": "<p>I am unable to understand the situation when I try to initialize the enum variable as global, i.e., outside of any scope. For example if I try to compile below code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nenum suit {\n    club = 0,\n    diamonds = 10,\n    hearts = 20,\n    spades = 3\n} card;\n\ncard = club;\nint main() \n{ \n    printf(\"Size of enum variable = %d bytes\", sizeof(card));   \n    return 0;\n}\n</code></pre>\n\n<p>Following compilation errors happen:</p>\n\n<pre><code>prog.c:9:1: warning: data definition has no type or storage class\ncard = club;\n^\nprog.c:9:1: warning: type defaults to 'int' in declaration of 'card' [Wimplicit-int]\nprog.c:9:1: error: conflicting types for 'card'\nprog.c:8:3: note: previous declaration of 'card' was here\n} card;\n  ^\n</code></pre>\n\n<p>But when I put the initialization within the main() scope , no error occurs like the code below: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nenum suit {\n    club = 0,\n    diamonds = 10,\n    hearts = 20,\n    spades = 3\n} card;\n\nint main() \n{\n    card = club;\n    printf(\"Size of enum variable = %d bytes\", sizeof(card));   \n    return 0;\n}\n</code></pre>\n\n<p>Output is :</p>\n\n<pre><code>Size of enum variable = 4 bytes\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490811894, "post_id": 43101259, "comment_id": 73284247, "body": "Note: something like <code>double **</code> is not a matrix (aka 2D array), nor can it point to one. A pointer is not an array. And we are no debugging service. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Throwing a wall of code at us with some diagnostics is not how it works here."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490815558, "post_id": 43101259, "comment_id": 73286562, "body": "I&#39;m trying to puzzle out what those for loops are doing at the start of <code>qr_decomp</code>. <code>T</code> has space for a list of <code>n</code> <code>double *</code>, and <code>T[0]</code> has space for <code>n*n</code> numbers, but what is <code>T[i] = T[0] + i*n;</code> doing? Is this allocating a 2D array in <code>T[0]</code> and then the rest of <code>T</code> points to the rows inside <code>T[0]</code>? Why? Is this a technique to allow <code>T[x][y]</code> to work while only having to allocate two blocks of memory?"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 0, "last_activity_date": 1490815053, "creation_date": 1490815053, "answer_id": 43102321, "question_id": 43101259, "link": "https://stackoverflow.com/questions/43101259/passing-argument-makes-a-pointer-without-cast/43102321#43102321", "title": "Passing argument makes a pointer without cast?", "body": "<p>A problem is here.</p>\n\n<pre><code>matrix_column_subtract(myQ,i,matrix_column_multiply(T,0,r,n),j);\n</code></pre>\n\n<p>The relevant function signatures are:</p>\n\n<pre><code>void matrix_column_subtract(double **m1, int c1, double **m2, int c2, int rows);\nvoid matrix_column_multiply(double **m, int c, double k, int rows);\n</code></pre>\n\n<p>Note that <code>matrix_column_multiply</code> returns void, but you're passing it in as if it were <code>double **</code>. I'm guessing the compiler is desperately trying to make it work and returned some sort of garbage integer.</p>\n\n<p>These functions return void because they do their work directly on the matrix in question. <code>matrix_column_multiply</code> alters <code>m</code>. <code>matrix_column_subtract</code> alters <code>m1</code>.</p>\n\n<p>To make it work, call <code>matrix_column_multiply</code> on <code>T</code> then pass <code>T</code> (now modified by the multiplication) into <code>matrix_column_subtract</code>.</p>\n\n<pre><code>matrix_column_multiply(T, 0, r, n);\nmatrix_column_subtract(myQ, i, T, j, ...rows...);\n</code></pre>\n\n<p>You're still missing the fifth argument, <code>rows</code>. I'm going to guess that's <code>n</code>, same as has been used for the rows in every other <code>matrix_column_blah</code> call.</p>\n"}], "owner": {"reputation": 13, "user_id": 7294529, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_r3TQJi0Gow/AAAAAAAAAAI/AAAAAAAAABE/m_cqjY_VN5c/photo.jpg?sz=128", "display_name": "Ryan Gerstenberger", "link": "https://stackoverflow.com/users/7294529/ryan-gerstenberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 43102321, "answer_count": 1, "score": 1, "last_activity_date": 1490815164, "creation_date": 1490811816, "last_edit_date": 1490815164, "question_id": 43101259, "link": "https://stackoverflow.com/questions/43101259/passing-argument-makes-a-pointer-without-cast", "title": "Passing argument makes a pointer without cast?", "body": "<p>I'm having an issue with compling the code. \nI keep getting these errors. </p>\n\n<p>\"C: 194 warning passing argument 3 of 'matrix_column_subtract' makes pointer from integer without a cast\"</p>\n\n<p>\"C: 12 note: expected 'double**' but argument is type 'int'</p>\n\n<p>\"C: 194 error too few arguments to function 'matrix_column_subtract'</p>\n\n<p>I think I know what is going on I'm calling matrix_column_multiply is a void and I need to be calling it a pointer pointer I think and I don't know how to chage that. If anyone has some idea on how I can get this to compile that would be highly appreciated!!  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define DEBUG 0\n#define MAX_ITER 10000\n\ndouble *eigen (int n, double **A);\nvoid qr_decomp (int n, double **A, double **Q, double **R);\n\nvoid matrix_copy_column(double **msrc, int col1, double **mdst,int col2, int rows);\nvoid matrix_column_subtract(double **m1, int c1, double **m2, int c2, int rows);\nvoid matrix_column_multiply(double **m, int c, double k, int rows);\n\n\nint main() {\n\n    int i, n = 126;\n    double *eig, **Am;\n    FILE *BinInp, *TxtOut;\n\n    /* Input Code: Reads bv, Am in binary form from CGrad.bin */\n    if ( (BinInp = fopen(\"CGrad.bin\",\"r\")) == NULL ) {\n        fprintf(stderr, \"Cannot open matrix binary file INPUT... exiting\\n\");\n        exit(-1);\n    }\n\n    Am = (double**)malloc (n*sizeof(double*));\n    Am[0] = (double*)malloc (n*n*sizeof(double));\n    for (i = 1; i &lt; n; ++i) {\n        Am[i] = Am[0] + i*n;\n    }\n    for (i = 0; i &lt; n; i++) {\n        if (i==0) { /* Read one extra line that is discarded (bv is still in bin       file) */\n            if (!fread(Am[i], sizeof(double), n, BinInp)) {\n                fprintf(stderr, \"Cannot read row Am[%03d] of matrix...      exiting\\n\", i+1);\n                exit(1);\n            }\n        }\n        if (!fread(Am[i], sizeof(double), n, BinInp)) {\n            fprintf(stderr, \"Cannot read row Am[%03d] of matrix... exiting\\n\",  i+1);\n            exit(1);\n        }\n    }\n\n    if (fclose(BinInp) == EOF) {\n        fprintf(stderr, \"Cannot close matrix binary file INPUT... exiting\\n\");\n        exit(-1);\n    }\n\n    /* COMPUTE EIGENVALUES HERE USING FUNCTIONS. RETURN EIGENVALUES (AS 1D    VECTOR) TO eig. */\n    if (DEBUG) printf (\"Calling eigen\\n\");\n    eig = eigen (n, Am);\n\n    /* Output Code: Writes eig in text form to Eigs.txt */\n\n    if ( (TxtOut = fopen(\"Eigs.txt\", \"w\")) == NULL ) {\n        fprintf(stderr, \"Cannot open matrix text file OUTPUT... exiting\\n\");\n        exit(-1);\n    }\n    for (i = 0; i &lt; n; i++) {\n        fprintf (TxtOut, \"%18.14e \", eig[i]);\n    }\n\n    if (fclose(TxtOut) == EOF) {\n        fprintf(stderr, \"Cannot close matrix text file INPUT... exiting\\n\");\n        exit(-1);\n    }\n\n    return 0;\n}\n\ndouble* eigen (int n, double **Acur)\n{\n    double err = 1, eps = 1e-2;\n    double ndenom, nnumer, temp;\n    double *eig, **Anex, **Qsub, **Rsub;\n    int i, j, k, iters = 1;\n\n    /* Malloc memory for the three matricies */\n    Anex = malloc (n*sizeof(double*));\n    Anex[0] = malloc (n*n*sizeof(double));\n    for (i = 1; i &lt; n; ++i) {\n        Anex[i] = Anex[0] + i*n;\n    }\n    Qsub = malloc (n*sizeof(double*));\n    Qsub[0] = malloc (n*n*sizeof(double));\n    for (i = 1; i &lt; n; ++i) {\n        Qsub[i] = Qsub[0] + i*n;\n    }\n    Rsub = malloc (n*sizeof(double*));\n    Rsub[0] = malloc (n*n*sizeof(double));\n    for (i = 1; i &lt; n; ++i) {\n        Rsub[i] = Rsub[0] + i*n;\n    }\n\n    /* Malloc memory for the return eig vector */\n    eig  = malloc (n*sizeof(double));\n    for (i = 0; i &lt; n; i++) {\n        eig[i] = 0;\n    }\n\n    /* Enter main iteration loop for eigenvalues */\n    while (err &gt; eps &amp;&amp; iters &lt; MAX_ITER) {\n\n        /* QR Decompose Acur then find next iterate value in Anex */\n        qr_decomp (n, Acur, Qsub, Rsub);\n        // FIND NEXT ITERATE VALUE, PUT IN Anex.\n\n        /* Determine relative error change, reset \"old\" iterate value. */\n        ndenom = 0;\n        nnumer = 0;\n        for (i = 0; i &lt; n; i++) {\n            for (j = 0; j &lt; n; j++) {\n                temp = Anex[i][j]-Acur[i][j];\n                ndenom += temp*temp;\n                nnumer += Anex[i][j]*Anex[i][j];\n\n                Acur[i][j] = Anex[i][j];\n            }\n        }\n        err = sqrt(ndenom)/sqrt(nnumer);\n\n        /* Increment the iteration count and report error */\n        if (iters % 25 == 0) {\n            printf (\"Error at end of iteration %05d = %14.10f %%\\n\", iters,   100*err);\n        }\n        ++iters;\n    }\n    printf (\"Error at end of iteration %05d = %14.10f\\nCONVERGED.\\n\", iters-1, err);\n\n    if (iters == MAX_ITER) {\n        printf (\"WARNING: MAX_ITER iterations reached!...\\n\");\n    }\n\n    /* Copy diagonal entries of Acur into eig for return to main */\n    for (i=0; i&lt;n; i++) {\n        eig[i] = Acur[i][i];\n    }\n    return eig;\n}\n\nvoid qr_decomp (int n, double **Adec, double **myQ, double **myR) \n{\n    int i, j, k; /* Loop Variables: this is all you should need! */\n    double **T, **S;\n    double r;\n\n    T = malloc (n*sizeof(double*));\n    T[0] = malloc (n*n*sizeof(double));\n    for (i = 1; i &lt; n; ++i) {\n        T[i] = T[0] + i*n;\n    }\n\n    S = malloc (n*sizeof(double*));\n    S[0] = malloc (n*n*sizeof(double));\n    for (i = 1; i &lt; n; ++i) {\n        S[i] = S[0] + i*n;\n    }\n\n    /* Main loop for decomposition */\n    for (i=0; i&lt;n; i++) {\n        /* Column i of Q is initially column i of A */\n\n        matrix_copy_column(Adec,i,myQ,i,n);\n\n        /* For j &lt; i-1, Perform the dot product between the j row of Q and the\n        i row of A to determine the R(j,i) value, then insure the Q i column\n        is orthogonal to all other Q columns by subtracting existing Q columns\n        from it. */\n\n        for (j = 0; j &lt; i; j++) {\n\n            //r[j,i] = Qj^T * Ui\n            matrix_copy_column(myQ,j,T,0,n);\n            matrix_copy_column(Adec,i,S,0,n);\n\n            for (k=0; k&lt;n; k++) {\n                r += T[k][0] * S[k][0];\n            }\n            /* Determine the R diagonal as the magnitude of the Q column, then\n            normalize the Q column (make it a unit vector). */\n\n            //Qi = Ui\n\n            myR[j][i] = r;\n\n            // Something wrong here.\n            // There is one parameter missing, as matrix_column_subtract needs 5 parameters and\n            // only 4 are given.\n            // Also, matrix_column_multiply is defined as returning a void, whereas the   3rd parameter\n            // of matrix_column_subtract should be a double **\n\n            matrix_column_subtract(myQ,i,matrix_column_multiply(T,0,r,n),j);\n\n        }\n    }\n}\n\n\n/* Copies a matrix column from msrc at column col1 to mdst at column col2 */\nvoid matrix_copy_column(double **msrc, int col1, double **mdst,int col2, int rows) {\n    int i = 0;\n    for (i=0; i&lt;rows; i++) {\n        mdst[i][col2] = msrc[i][col1];\n    }\n}\n\n/* Subtracts m2's column c2 from m1's column c1 */\nvoid matrix_column_subtract(double **m1, int c1, double **m2, int c2, int rows) {\n    int i = 0;\n    for (i=0; i&lt;rows; i++) {\n        m1[i][c1] -= m2[i][c2];\n    }\n    /*return m1;*/\n}\n\nvoid matrix_column_multiply(double **m, int c, double k, int rows) {\n    int i = 0;\n    for (i=0; i&lt;rows; i++) {\n        m[i][c] *= k;\n    }\n    /*return m;*/\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 2, "creation_date": 1490810809, "post_id": 43100908, "comment_id": 73283579, "body": "you&#39;re not passing the address of a writable location to <code>scanf</code> so it won&#39;t be able to write to those variables."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 2, "creation_date": 1490810816, "post_id": 43100908, "comment_id": 73283586, "body": "I voted to close as it is not clear what you are actually asking. But just try change <code>scanf(&quot;%d&quot;,height);</code> to <code>scanf(&quot;%d&quot;,&amp;height);</code> and <code>scanf(&quot;%c&quot;,character);</code> to <code>scanf(&quot;%c&quot;,&amp;character);</code> offline"}, {"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1490810877, "post_id": 43100908, "comment_id": 73283625, "body": "You should use <code>putchar</code> instead of <code>printf</code>"}], "answers": [{"comments": [{"owner": {"reputation": 108, "user_id": 7141326, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/87559572dc80c22ae8e175f5eb9ace8f?s=128&d=identicon&r=PG&f=1", "display_name": "azertq", "link": "https://stackoverflow.com/users/7141326/azertq"}, "edited": false, "score": 0, "creation_date": 1490815441, "post_id": 43101241, "comment_id": 73286480, "body": "You are welcome. And excuse me : you have to add the &quot;&amp;&quot; when you read integers. the char *character is a dynamic allocation of a string."}], "tags": [], "owner": {"reputation": 108, "user_id": 7141326, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/87559572dc80c22ae8e175f5eb9ace8f?s=128&d=identicon&r=PG&f=1", "display_name": "azertq", "link": "https://stackoverflow.com/users/7141326/azertq"}, "is_accepted": true, "score": -3, "last_activity_date": 1490811763, "creation_date": 1490811763, "answer_id": 43101241, "question_id": 43100908, "link": "https://stackoverflow.com/questions/43100908/why-does-this-c-program-just-stops-while-running-and-shows-no-output/43101241#43101241", "title": "Why does this C program just stops while running and shows no output?", "body": "<pre><code>int main()\n{\n    int height, i, j;\n    char *character;\n\n    printf(\"plz enter height\\n\");\n    scanf(\"%d\",&amp;height);\n\n    printf(\"plz type character\\n\");\n    scanf(\"%s\",&amp;character); //if you consider charactere as string it works\n\n    for(i=0;i&lt;=height;i++){\n        for(j=0;j&lt;=i;j++){\n        printf(\"%c\",character);\n        }\n    printf(\"\\n\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 7167564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5lI6r.jpg?s=128&g=1", "display_name": "Khubaib Khawar", "link": "https://stackoverflow.com/users/7167564/khubaib-khawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 43101241, "answer_count": 1, "score": -4, "last_activity_date": 1559996809, "creation_date": 1490810662, "last_edit_date": 1559996809, "question_id": 43100908, "link": "https://stackoverflow.com/questions/43100908/why-does-this-c-program-just-stops-while-running-and-shows-no-output", "title": "Why does this C program just stops while running and shows no output?", "body": "<p>Hellow guys, my friend made this program (I don't know what he is actually doing), but he asked me for help because it was not executing properly. I have studied the C++ till Objects and Overloading. I looked at the code and it seemed fine but when I tried to execute, it does not execute properly, after asking for the height, the DOS stops working and gets clsoed. I tried to figure out the problem, but I could not.</p>\n\n<p>Below is the code of the program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int height, i, j;\n    char character;\n\n    printf(\"plz enter height\\n\");\n    scanf(\"%d\",height);\n\n    printf(\"plz type character\\n\");\n    scanf(\"%c\",character);\n\n    for(i=0;i&lt;=height;i++){\n        for(j=0;j&lt;=i;j++){\n        printf(\"%c\",character);\n        }\n    printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1490810693, "post_id": 43100889, "comment_id": 73283508, "body": "You can&#39;t have a function inside another function."}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 0, "creation_date": 1490810719, "post_id": 43100889, "comment_id": 73283526, "body": "Because <code>Integer50 * parseString(char * str)</code> is a statement and a statement needs to end with a semi-colon?"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1490810724, "post_id": 43100889, "comment_id": 73283528, "body": "Did you maybe mean to have the prototype in the main, rather than the actual code of the function?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1490810779, "post_id": 43100889, "comment_id": 73283554, "body": "And by the way your declaration of <code>main</code> is not standard compliant - it should be <code>int main()</code>"}, {"owner": {"reputation": 23, "user_id": 7777657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wss7CleVetU/AAAAAAAAAAI/AAAAAAAACeE/nObm_T-Ulk8/photo.jpg?sz=128", "display_name": "Chris Corley", "link": "https://stackoverflow.com/users/7777657/chris-corley"}, "edited": false, "score": 0, "creation_date": 1490810780, "post_id": 43100889, "comment_id": 73283555, "body": "ah, thanks. And I was over here pulling my hair out."}, {"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1490810942, "post_id": 43100889, "comment_id": 73283676, "body": "@UnholySheep That is not standard compliant either in C, it should be <code>int main(void)</code>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1490811066, "post_id": 43100889, "comment_id": 73283734, "body": "@ErikW It is. If it&#39;s in a function <i>definition</i>, <code>()</code> is equivalent to <code>(void)</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1490811249, "post_id": 43100889, "comment_id": 73283849, "body": "@ErikW: It is a compliant legacy actually. It is an obsolecent feature and (hopefully) removed with the next release in favour of prototype-style declarators."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1490811287, "post_id": 43100889, "comment_id": 73283872, "body": "@PSkocik It is sllowed, but obsolecent. See ^"}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1490810760, "creation_date": 1490810760, "answer_id": 43100939, "question_id": 43100889, "link": "https://stackoverflow.com/questions/43100889/expected-a-colon-error-issues/43100939#43100939", "title": "Expected a colon error issues", "body": "<p>You cannot nest functions in C (though you can declare them inside a nested scope).</p>\n\n<p>You will need to move:</p>\n\n<pre><code>Integer50 * parseString(char * str)\n{ //error is on this colon\n    return NULL;\n}\n</code></pre>\n\n<p>to the file scope.</p>\n"}, {"tags": [], "owner": {"reputation": 3981, "user_id": 2997855, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ypQhg.jpg?s=128&g=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/2997855/imran"}, "is_accepted": false, "score": 1, "last_activity_date": 1490810900, "creation_date": 1490810900, "answer_id": 43100994, "question_id": 43100889, "link": "https://stackoverflow.com/questions/43100889/expected-a-colon-error-issues/43100994#43100994", "title": "Expected a colon error issues", "body": "<p>This: </p>\n\n<pre><code>main() {\n    Integer50 * parseString(char * str)\n    { //error is on this colon\n        return NULL;\n    }\n}\n</code></pre>\n\n<p>Should be replaced by:</p>\n\n<pre><code>Integer50 * parseString(char * str)\n{ //error is on this colon\n    return NULL;\n} \n\nint main() {\n    //If you need to call that `parseString` function call it here\n}\n</code></pre>\n\n<p>So, C doesn't support function inside function. <code>main</code> is a function and <code>parseString</code> is another function. That's the problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 7777657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wss7CleVetU/AAAAAAAAAAI/AAAAAAAACeE/nObm_T-Ulk8/photo.jpg?sz=128", "display_name": "Chris Corley", "link": "https://stackoverflow.com/users/7777657/chris-corley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1490810900, "creation_date": 1490810598, "question_id": 43100889, "link": "https://stackoverflow.com/questions/43100889/expected-a-colon-error-issues", "title": "Expected a colon error issues", "body": "<p>Having a hard time figuring out why I am getting a expected a ';' after the function parseString.   </p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\ntypedef struct Integer50\n{\n// a dynamically allocated array to hold a 50\n// digit integer, stored in reverse order\nint *digits;\n} Integer50;\n\nmain() {\n    Integer50 * parseString(char * str)\n    { //error is on this colon\n        return NULL;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490810741, "post_id": 43100806, "comment_id": 73283536, "body": "FWIW, C compilers issue such warnings because according to the international standard, the source code of a C program <i>must</i> end with a newline.  Whether that&#39;s a sensible requirement -- for C or for anything else -- is a different question."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1490810321, "creation_date": 1490810321, "answer_id": 43100806, "question_id": 43100735, "link": "https://stackoverflow.com/questions/43100735/makefile-generating-error/43100806#43100806", "title": "Makefile generating error", "body": "<blockquote>\n  <p><em>mksh: Warning: newline is not last character in file makefile</em></p>\n</blockquote>\n\n<p>The problem is exactly what it said, it wants a newline as the last character of the file. Currently the last character is probably the <code>s</code> of <code>firstpass</code>.</p>\n\n<p>Open it in an editor, go to the end of the file, hit return.</p>\n\n<p>Some editors will add a final newline to files for you.</p>\n\n<p>A newline at the end of a file should not be a requirement. This sort of warning is common in older systems whose parsers might freak out if they are given input without a newline. Perl 1 is the only time I've seen this in the wild, and that's from 1987, but C compilers still issue this warning.</p>\n"}], "owner": {"reputation": 19, "user_id": 7195800, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55bf077901ec9cf8440e713602b7118d?s=128&d=identicon&r=PG&f=1", "display_name": "melb27", "link": "https://stackoverflow.com/users/7195800/melb27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490810762, "creation_date": 1490810059, "question_id": 43100735, "link": "https://stackoverflow.com/questions/43100735/makefile-generating-error", "title": "Makefile generating error", "body": "<p>Every time I enter the command on UNIX</p>\n\n<pre><code>unix1% make clean\n</code></pre>\n\n<p>It returns an error message </p>\n\n<pre><code>mksh: Warning: newline is not last character in file makefile\nCurrent working directory /home/s/m/mel\nrm -f *.o core firstpass \nunix1%\n</code></pre>\n\n<p>Here is my makefile:</p>\n\n<pre><code>firstpass: main.o hashFunct.o symbolTable.o opcodeTable.o \n        gcc main.o hashFunct.o symbolTable.o opcodeTable.o -o firstpass\n\nmain.o: main.c\n        gcc -c main.c\n\nhashFunct.o: hashFunct.c\n        gcc -c hashFunct.c\n\nsymbolTable.o: symbolTable.c\n        gcc -c symbolTable.c\n\nopcodeTable.o: opcodeTable.c\n        gcc -c opcodeTable.c\n\nclean:\n       rm -f *.o core firstpass\n</code></pre>\n\n<p>I don't understand the problem, and I've tried to open it in emacs and see no mysterious characters. Also the word firstpass is the last character in the makefile. What does this error exactly mean?</p>\n"}, {"tags": ["c", "windows", "postgresql", "dll"], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 5591761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ceb7eac4952c496919aab0c6c7deead?s=128&d=identicon&r=PG&f=1", "display_name": "M. Ozn", "link": "https://stackoverflow.com/users/5591761/m-ozn"}, "edited": false, "score": 0, "creation_date": 1490823956, "post_id": 43102569, "comment_id": 73291003, "body": "Because I want to deploy my exe, I choose the second option. The compilation worked well with this line : [  gcc -m64 -I &quot;C:\\Program Files\\PostgreSQL\\9.6\\include&quot; -L &quot;C:\\Program Files\\PostgreSQL\\9.6\\lib&quot; -Wl,-rpath,&quot;C:\\Program Files\\PostgreSQL\\9.6\\lib&quot; test.c -lpq -o test.exe   ]. But when I double click on the executable, a cmd prompt appears then another windows come aswell with the usual error. If you are able to understand french or translate the error, I edited my first post to add the screenshot"}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "reply_to_user": {"reputation": 854, "user_id": 5591761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ceb7eac4952c496919aab0c6c7deead?s=128&d=identicon&r=PG&f=1", "display_name": "M. Ozn", "link": "https://stackoverflow.com/users/5591761/m-ozn"}, "edited": false, "score": 0, "creation_date": 1490900385, "post_id": 43102569, "comment_id": 73331414, "body": "Sorry, I made a mistake (I&#39;m no Windows specialist). Windows doesn&#39;t have a concept of runpath. I have fixed the answer with an alternative suggestion. Now I know why there usually are so many copies of shared libraries on that benighted operating system."}, {"owner": {"reputation": 854, "user_id": 5591761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ceb7eac4952c496919aab0c6c7deead?s=128&d=identicon&r=PG&f=1", "display_name": "M. Ozn", "link": "https://stackoverflow.com/users/5591761/m-ozn"}, "edited": false, "score": 0, "creation_date": 1490902341, "post_id": 43102569, "comment_id": 73332424, "body": "Thanks. The second solution still better to deploy my app. I suppose I can&#39;t just provide a standalone .exe without nothing next to it (for example the .dll). Thanks anyway !"}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "reply_to_user": {"reputation": 854, "user_id": 5591761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ceb7eac4952c496919aab0c6c7deead?s=128&d=identicon&r=PG&f=1", "display_name": "M. Ozn", "link": "https://stackoverflow.com/users/5591761/m-ozn"}, "edited": false, "score": 0, "creation_date": 1490963351, "post_id": 43102569, "comment_id": 73358401, "body": "Sounds like a nice idea, but there is no static libpq. You&#39;d have to build it yourself, and I don&#39;t know if that even works, particularly on Windows. The documentation offers nothing, And it is no better that shipping a copy of <code>libpq.dll</code>..."}], "tags": [], "owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "is_accepted": true, "score": 1, "last_activity_date": 1490900198, "last_edit_date": 1490900198, "creation_date": 1490815860, "answer_id": 43102569, "question_id": 43100359, "link": "https://stackoverflow.com/questions/43100359/execute-c-script-needing-ext-lib/43102569#43102569", "title": "Execute C script needing ext lib", "body": "<p>Stick with dynamic linking.</p>\n\n<p>Your problem is that the system cannot find <code>libpq.dll</code> at runtime.</p>\n\n<p>There are two solutions:</p>\n\n<ol>\n<li><p>Add <code>C:\\Program Files\\PostgreSQL\\9.6\\lib</code> to the <code>PATH</code> environment variable.</p></li>\n<li><p>Put a copy of <code>libpq.dll</code> in the same path as your executable.</p></li>\n</ol>\n"}], "owner": {"reputation": 854, "user_id": 5591761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ceb7eac4952c496919aab0c6c7deead?s=128&d=identicon&r=PG&f=1", "display_name": "M. Ozn", "link": "https://stackoverflow.com/users/5591761/m-ozn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 43102569, "answer_count": 1, "score": 0, "last_activity_date": 1490900198, "creation_date": 1490808795, "last_edit_date": 1495542326, "question_id": 43100359, "link": "https://stackoverflow.com/questions/43100359/execute-c-script-needing-ext-lib", "title": "Execute C script needing ext lib", "body": "<p>Refering to <a href=\"https://stackoverflow.com/questions/42995034/connect-postgresql-in-c\">Connect Postgresql in C</a></p>\n\n<p>I asked some help to compile my script of Postgres database connection. This is now compiling well but now I have a problem when I execute it.</p>\n\n<p>There is the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"libpq-fe.h\"\n#include &lt;stdlib.h&gt;\n\nint     main() {\nPGconn          *conn;\nPGresult        *res;\nint             rec_count;\nint             row;\nint             col;\n\n\n\n        conn = PQconnectdb(\"dbname=ljdata host=localhost user=dataman password=supersecret\");\n\n        if (PQstatus(conn) == CONNECTION_BAD) {\n                puts(\"We were unable to connect to the database\");\n                exit(0);\n        }\n\n        res = PQexec(conn,\n                \"update people set phonenumber=\\'5055559999\\' where id=3\");\n\n        res = PQexec(conn,\n                \"select lastname,firstname,phonenumber from people order by id\");\n\n        if (PQresultStatus(res) != PGRES_TUPLES_OK) {\n                puts(\"We did not get any data!\");\n                exit(0);\n        }\n\n        rec_count = PQntuples(res);\n\n        printf(\"We received %d records.\\n\", rec_count);\n        puts(\"==========================\");\n\n        for (row=0; row&lt;rec_count; row++) {\n                for (col=0; col&lt;3; col++) {\n                        printf(\"%s\\t\", PQgetvalue(res, row, col));\n                }\n                puts(\"\");\n        }\n\n        puts(\"==========================\");\n\n        PQclear(res);\n\n        PQfinish(conn);\n\n        return 0;\n}\n</code></pre>\n\n<p>And this is the compilation line it's actually working :</p>\n\n<pre><code>gcc -m64 -I \"C:\\Program Files\\PostgreSQL\\9.6\\include\" -L \"C:\\Program Files\\PostgreSQL\\9.6\\lib\" test.c -lpq -o test.exe\n</code></pre>\n\n<p>Now when I double-click on the .exe I have the following error :</p>\n\n<p>\"Unable to start the program because LIBPQ.dll is missing\"</p>\n\n<p>So it clearly means that I have to link the libpq.dll</p>\n\n<p>But what I'm trying to do is compiling all the methods from the .c/.dll etc in the binary .exe which I plan to distribute and the postgresql libs will not be installed on the target machines.</p>\n\n<p>After some web search, I found the \"-static\" parameter but I'm not sure that it's what I'm looking for and I'm not able to have it compiling with this parameter.</p>\n\n<p>Then I tried to add \"-static-libgcc\" which results as :</p>\n\n<pre><code>gcc -m64 -static-libgcc -I \"C:\\Program Files\\PostgreSQL\\9.6\\include\" -L \"C:\\Program Files\\PostgreSQL\\9.6\\lib\" test.c -lpq -o test.exe\n</code></pre>\n\n<p>But I still have the \"System error\" when I try to run it :</p>\n\n<p>\"Unable to run the script because LIBPQ.dll is missing on your computer\"\n(Not sure if my french translate is exact)</p>\n\n<p>Do you know the parameter or the way I can compile my C program into a binary .exe which would be totally standalone and without any library requirement ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Screenshot :</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xu0rp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xu0rp.png\" alt=\"error\"></a></p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1490809459, "post_id": 43100336, "comment_id": 73282781, "body": "&quot;Dynamic&quot; and &quot;macro&quot; are not going well together. The preprocessing is taking place before any loop is executed. Or even compiled."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1490810182, "last_edit_date": 1490810182, "creation_date": 1490809659, "answer_id": 43100624, "question_id": 43100336, "link": "https://stackoverflow.com/questions/43100336/dynamic-definition-of-macro/43100624#43100624", "title": "dynamic definition of macro", "body": "<blockquote>\n  <p>I need to define function and macro dynamically</p>\n</blockquote>\n\n<p>Then I'm afraid you are destined for dissatisfaction.  You can write a macro whose replacement text contains macro <em>invocations</em>, but you cannot produce a macro <em>definition</em> by expanding a macro.  Ultimately, it comes down to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.10p2\" rel=\"nofollow noreferrer\">paragraph 6.10/2</a> of the standard, which says, in part</p>\n\n<blockquote>\n  <p>A preprocessing directive consists of a sequence of preprocessing\n  tokens that satisfies the following constraints: The first token in\n  the sequence is a <code>#</code> preprocessing token that (<strong>at the start of\n  translation phase 4</strong>) is either the first character in the source file\n  (optionally after white space containing no new-line characters) or\n  that follows white space containing at least one new-line character.</p>\n</blockquote>\n\n<p>(Emphasis added.)</p>\n\n<p>Although you can give a macro replacement text that has the form of a macro definition, the replacement text does not satisfy the requirements for being a preprocessing directive of any kind at the start of translation phase 4 (wherein preprocessing directives are executed).  That expansion of the macro produces text of such a form is irrelevant, because it comes too late.</p>\n\n<hr>\n\n<p>Function definitions (and declarations) are another matter, however.  You certainly can produce these via macros if you wish, and this is a reasonable thing to do if you need several distinct functions with a lot of boilerplate code.</p>\n"}], "owner": {"reputation": 367, "user_id": 2439679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ede1c01f6af2c08c29aadc91b263051?s=128&d=identicon&r=PG", "display_name": "imen bhiri", "link": "https://stackoverflow.com/users/2439679/imen-bhiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 575, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490810182, "creation_date": 1490808734, "question_id": 43100336, "link": "https://stackoverflow.com/questions/43100336/dynamic-definition-of-macro", "title": "dynamic definition of macro", "body": "<p>I need to define function and macro dynamically, for dynamic function the followinf code work fine, but it fail when I try to add macro inside the first one.\nIs there a manner to get the needed behavior</p>\n\n<pre><code>#define INIT_PATH_FUNCTION(UCI_PATH, DPATH) \\\nstruct ctx *ctx_##_PATH; \\\nint print##_PATH(char *package) \\\n{\\\n    print(\"package %s \\n\", package); \\\n    return 0; \\\n}\\\n#define foreach_file_##PATH(path) \\\n    for (section = print##_PATH(path); \\\n        section != NULL; \\\n        section = print##_PATH(path))\\\n\n#define PRINT(UCI_PATH, path) print##_PATH(path)\n\n\nINIT_PATH_FUNCTION(test, \"/etc/\")\nINIT_PATH_FUNCTION(test2, \"/root/\")\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1490812834, "post_id": 43100386, "comment_id": 73284796, "body": "Poetic - very nice (aside from I&#39;d use <code>if(va-&gt;ano &lt; vb-&gt;ano)         return -1;</code> to show <i>less than</i>.)"}, {"owner": {"reputation": 9, "user_id": 7762064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1831163573576619/picture?type=large", "display_name": "M&#225;rio Marques", "link": "https://stackoverflow.com/users/7762064/m%c3%a1rio-marques"}, "edited": false, "score": 0, "creation_date": 1490920457, "post_id": 43100386, "comment_id": 73339353, "body": "Got it. Thanks alot for the answer."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1490808893, "creation_date": 1490808893, "answer_id": 43100386, "question_id": 43100263, "link": "https://stackoverflow.com/questions/43100263/how-can-i-order-this-struct-using-qsort/43100386#43100386", "title": "How can I order this struct using qsort()?", "body": "<p>If you read e.g. <a href=\"http://en.cppreference.com/w/c/algorithm/qsort\" rel=\"nofollow noreferrer\">this <code>qsort</code> reference</a> you will see that the comparison function gets passed <em>pointers</em>. The pointers it gets passes are pointers to elements in the array being sorted.</p>\n\n<p>So if you have an array of <code>vg_elemento</code> like </p>\n\n<pre><code>vg_elemento videos[SOME_SIZE];\n</code></pre>\n\n<p>Then the comparison function is basically called like</p>\n\n<pre><code>comp(&amp;videos[i], &amp;videos[j]);\n</code></pre>\n\n<p>That in turns means your functions should look like</p>\n\n<pre><code>int comp_ano_asc(const void *a, const void *b){ //sorts bt year\n    const vg_elemento *va = (vg_elemento *) a;\n    const vg_elemento *vb = (vg_elemento *) b;\n\n    if(vb-&gt;ano &gt; va-&gt;ano)\n        return -1;\n    if(ba-&gt;ano &gt; vb-&gt;ano)\n        return 1;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7762064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1831163573576619/picture?type=large", "display_name": "M&#225;rio Marques", "link": "https://stackoverflow.com/users/7762064/m%c3%a1rio-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 43100386, "answer_count": 1, "score": 0, "last_activity_date": 1490808893, "creation_date": 1490808511, "question_id": 43100263, "link": "https://stackoverflow.com/questions/43100263/how-can-i-order-this-struct-using-qsort", "title": "How can I order this struct using qsort()?", "body": "<p>I have these structs,</p>\n\n<pre><code> typedef struct\n{\n  int votos; //Votes\n  float classifica; //Rating\n  char* titulo; //Title\n  int ano;     //Year\n} vg_elemento;\n\n/**\n* this register has a vetorg of elements a counter for the size and a counter for the capacity  \n*/\ntypedef struct\n{\n  /** numero de elementos do vetorg */\n  int tamanho;       //size\n\n  /** capacidade do vetorg */\n  int capacidade; //capacity\n\n  /** array of stored elements */\n  vg_elemento* elementos;\n\n} vetorg;\n</code></pre>\n\n<p>I heard that there is a qsort() function that allows me to sort an array, I tried checking the internet but all examples either use int, float or strings. How can I use the qsort() function using the structures above?</p>\n\n<p>I have some comparing functions, already given:</p>\n\n<pre><code> typedef int (*comp)(const vg_elemento a, const vg_elemento b);\n\nint comp_ano_asc(const vg_elemento a, const vg_elemento b){ //sorts bt year\n    if(b.ano &gt; a.ano)\n        return -1;\n    if(a.ano &gt; b.ano)\n        return 1;\n    return 0;\n}\n\nint comp_votos_asc(const vg_elemento a, const vg_elemento b) //sorts by votes\n{\n    if(b.votos &gt; a.votos)\n        return -1;\n    if(a.votos &gt; b.votos)\n        return 1;\n    return 0;\n}\n\nint comp_classifica_asc(const vg_elemento a, const vg_elemento b) //sorts by rating\n{\n    if(b.classifica &gt; a.classifica)\n        return -1;\n    if(a.classifica &gt; b.classifica)\n        return 1;\n    return 0;\n}\n\nint comp_titulo_asc(const vg_elemento a, const vg_elemento b) //sorts by title (alphabetically)\n{\n    if(strcmp(b.titulo,a.titulo)&gt;0)\n        return -1;\n    if(strcmp(a.titulo,b.titulo)&gt;0)\n        return 1;\n    return 0;\n}\n</code></pre>\n\n<p>I want to sort the array using a function, calling qsort() in that function. Eg:</p>\n\n<pre><code>    int vetorg_ordena(vetorg* vec, comp ordem){\n\n    //sorts the array according to ordem in an ascending order. returns 0, if successful\n}\n</code></pre>\n\n<p>Here's an example of a sample array of size 3:</p>\n\n<pre><code>Votes Rating Year Title\n319656 8.8 2010 Inception\n511125 8.8 2008 The Dark Knight\n227431 8.3 1983 Star Wars: Episode VI - Return of the Jedi\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1490807863, "post_id": 43100020, "comment_id": 73281725, "body": "what are <code>CLR_R</code> and <code>CLR_N</code>"}, {"owner": {"reputation": 153, "user_id": 1529552, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7f458708253ecfff060aa9b57f9491ca?s=128&d=identicon&r=PG", "display_name": "pfoof", "link": "https://stackoverflow.com/users/1529552/pfoof"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490807900, "post_id": 43100020, "comment_id": 73281749, "body": "Just char* constants <code>#define CLR_R &quot;\\x1b[1;31m&quot;</code> <code>#define CLR_N &quot;\\x1b[0m&quot;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490807903, "post_id": 43100020, "comment_id": 73281752, "body": "@SouravGhosh Why does it matter? I&#39;m guessing they&#39;re escape sequences for switching to red and back to no color."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490807951, "post_id": 43100020, "comment_id": 73281779, "body": "@Barmar ummm... maybe because it&#39;s better to have <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490807969, "post_id": 43100020, "comment_id": 73281796, "body": "1) Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. 2) Don&#39;t use a macro where a function will do as well."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490808006, "post_id": 43100020, "comment_id": 73281818, "body": "Don&#39;t suppress warnings unless you know what is causing it and OK with that."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490808029, "post_id": 43100020, "comment_id": 73281832, "body": "@Barmar: So they are obsolete for the question. Why show them?"}, {"owner": {"reputation": 153, "user_id": 1529552, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7f458708253ecfff060aa9b57f9491ca?s=128&d=identicon&r=PG", "display_name": "pfoof", "link": "https://stackoverflow.com/users/1529552/pfoof"}, "edited": false, "score": 0, "creation_date": 1490808034, "post_id": 43100020, "comment_id": 73281835, "body": "^ ok, I will edit and provide better example"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490808036, "post_id": 43100020, "comment_id": 73281840, "body": "@EugeneSh. In this case, his code specifically checks for <code>NULL</code> and protects against it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490808206, "post_id": 43100020, "comment_id": 73281955, "body": "As @Olaf said, this can be implemented as a function. If you do it like that you won&#39;t get a warning."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490808225, "post_id": 43100020, "comment_id": 73281970, "body": "@Barmar. I understand. The warning is caused by <code>printf(&quot;%s: %s\\n&quot;,NULL,&quot;error&quot;)</code>"}, {"owner": {"reputation": 153, "user_id": 1529552, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7f458708253ecfff060aa9b57f9491ca?s=128&d=identicon&r=PG", "display_name": "pfoof", "link": "https://stackoverflow.com/users/1529552/pfoof"}, "edited": false, "score": 0, "creation_date": 1490808301, "post_id": 43100020, "comment_id": 73282015, "body": "^ yes, but why is it not checked in <code>(caller==NULL)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490808331, "post_id": 43100020, "comment_id": 73282031, "body": "Do you get the warning if you optimize? The optimizer should be able to tell that the second call will never occur when <code>caller == NULL</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490808364, "post_id": 43100020, "comment_id": 73282053, "body": "@pfoof But the compiler is seeing a <code>printf</code> with hardcoded NULL as the parameter. And it doesn&#39;t like it. You can safely suppress it in this case, but better redesign. You can have two macros for example, if you insist on macros."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490808501, "post_id": 43100020, "comment_id": 73282134, "body": "Just a suggestion: <code>void main()</code> --&gt; <code>int main(void)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 153, "user_id": 1529552, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7f458708253ecfff060aa9b57f9491ca?s=128&d=identicon&r=PG", "display_name": "pfoof", "link": "https://stackoverflow.com/users/1529552/pfoof"}, "edited": false, "score": 0, "creation_date": 1490808944, "post_id": 43100225, "comment_id": 73282446, "body": "I&#39;m curious as to why it&#39;s been also marked &quot;not useful&quot;, given that it is demonstrably useful to the OP. :("}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1490809186, "post_id": 43100225, "comment_id": 73282599, "body": "Because the DV button is rather used for &quot;I don&#39;t like it for a generic reason or having a bad mood&quot;."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 0, "last_activity_date": 1490809192, "last_edit_date": 1490809192, "creation_date": 1490808393, "answer_id": 43100225, "question_id": 43100020, "link": "https://stackoverflow.com/questions/43100020/reading-through-null-pointer-in-define-with-condition/43100225#43100225", "title": "Reading through null pointer in #define with condition", "body": "<p>This works (gcc, clang):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n#define CLR_R \"\\x1b[1;31m\" \n#define CLR_N \"\\x1b[0m\"\n\n#define printerr(caller,msg)  \\\n    (caller==NULL)? printf(CLR_R \"%s\" CLR_N \"\\n\",msg) : \\\n    printf(CLR_R \"%s:\" CLR_N \" %s\\n\", ((caller)?(caller):\"\"),msg)\n\n\n    printerr(NULL,\"msg\");\n    printerr(\"caller\",\"msg\");\n}\n</code></pre>\n\n<p>I'm using <code>((caller)?(caller):\"\")</code>to suppress the warning. It will never evaluate to <code>\"\"</code>.</p>\n\n<p>You could also use an inline function to the same effect:</p>\n\n<pre><code>#define CLR_R \"\\x1b[1;31m\" \n#define CLR_N \"\\x1b[0m\"\nstatic inline int inl_printerr(char const *caller, char const *msg)\n{\n    if (caller)\n        return printf(CLR_R \"%s:\" CLR_N \" %s\\n\", caller,msg);\n    else\n        return printf(CLR_R \"%s\" CLR_N \"\\n\",msg);\n}\n</code></pre>\n\n<p>(Recommended as it avoids the typesafety and double-evaluation issues that macros have).</p>\n"}], "owner": {"reputation": 153, "user_id": 1529552, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7f458708253ecfff060aa9b57f9491ca?s=128&d=identicon&r=PG", "display_name": "pfoof", "link": "https://stackoverflow.com/users/1529552/pfoof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 43100225, "answer_count": 1, "score": 0, "last_activity_date": 1490818500, "creation_date": 1490807754, "last_edit_date": 1490818500, "question_id": 43100020, "link": "https://stackoverflow.com/questions/43100020/reading-through-null-pointer-in-define-with-condition", "title": "Reading through null pointer in #define with condition", "body": "<p>I have definition of macro <code>printerr</code></p>\n\n<pre><code>#define CLR_R \"\\x1b[1;31m\" \n#define CLR_N \"\\x1b[0m\"\n#define printerr(caller,msg) (caller==NULL)?printf(CLR_R \"%s\" CLR_N \"\\n\",msg) \\\n   : printf(CLR_R \"%s:\" CLR_N \" %s\\n\",caller,msg)\n</code></pre>\n\n<p>And get warning</p>\n\n<blockquote>\n  <p>warning: reading through null pointer (argument 2), when calling <code>printerr(NULL,\"error\");</code>.  </p>\n</blockquote>\n\n<p>How to suppress this warning?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define printerr(caller,msg) (caller==NULL)?printf(\"%s\\n\",msg) : \\\n    printf(\"%s: %s\\n\",caller,msg)\nvoid main() {\n    printerr(\"Error\",\"error occurred\"); //will be ok\n    printerr(NULL,\"error\"); //Warning: is caller even checked here?\n}\n</code></pre>\n"}, {"tags": ["c", "time", "posix"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1491313089, "post_id": 43099710, "comment_id": 73489220, "body": "Show us the code you used, <code>CLOCK_REALTIME</code> should be (today) in the order of one billion and a half (got 1491312994 some minutes ago)."}], "answers": [{"tags": [], "owner": {"reputation": 4611, "user_id": 7511971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Byz18.jpg?s=128&g=1", "display_name": "Ricardo Branco", "link": "https://stackoverflow.com/users/7511971/ricardo-branco"}, "is_accepted": true, "score": 1, "last_activity_date": 1490817568, "last_edit_date": 1490817568, "creation_date": 1490817242, "answer_id": 43102935, "question_id": 43099710, "link": "https://stackoverflow.com/questions/43099710/should-the-posix-clock-realtime-clock-be-referenced-to-the-utc-epoch/43102935#43102935", "title": "Should the POSIX &#39;CLOCK_REALTIME&#39; clock be referenced to the UTC epoch?", "body": "<p>CLOCK_REALTIME is tied to the Unix epoch (\"UTC epoch\" is the same thing but is not the correct way to name it.  It's just the Unix epoch in the UTC timezone).</p>\n\n<p>Try this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\n    struct timespec ts;\n    clock_gettime(CLOCK_REALTIME, &amp;ts);\n    printf(\"%ld\\n\", ts.tv_sec);\n    exit(0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 1, "last_activity_date": 1555360414, "creation_date": 1555360414, "answer_id": 55696849, "question_id": 43099710, "link": "https://stackoverflow.com/questions/43099710/should-the-posix-clock-realtime-clock-be-referenced-to-the-utc-epoch/55696849#55696849", "title": "Should the POSIX &#39;CLOCK_REALTIME&#39; clock be referenced to the UTC epoch?", "body": "<p>The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_getres.html\" rel=\"nofollow noreferrer\">POSIX specification for <code>clock_gettime</code></a> defines the zero point for <code>CLOCK_REALTIME</code> as \"the Epoch\":</p>\n\n<blockquote>\n  <p>All implementations shall support a <code>clock_id</code> of <code>CLOCK_REALTIME</code> as defined in <code>&lt;time.h&gt;</code>. This clock represents the clock measuring real time for the system. For this clock, the values returned by <code>clock_gettime()</code> and specified by <code>clock_settime()</code> represent the amount of time (in seconds and nanoseconds) since the Epoch.</p>\n</blockquote>\n\n<p>It defines the term \"the Epoch\" in its <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_16\" rel=\"nofollow noreferrer\">\"General Concepts\" chapter, section 4.16</a>:</p>\n\n<blockquote>\n  <p>A Coordinated Universal Time name (specified in terms of seconds (tm_sec), minutes (tm_min), hours (tm_hour), days since January 1 of the year (tm_yday), and calendar year minus 1900 (tm_year)) is related to a time represented as seconds since the Epoch, according to the expression below.</p>\n  \n  <p>If the year is &lt;1970 or the value is negative, the relationship is undefined. If the year is >=1970 and the value is non-negative, the value is related to a Coordinated Universal Time name according to the C-language expression, where tm_sec, tm_min, tm_hour, tm_yday, and tm_year are all integer types:</p>\n\n<pre><code>tm_sec + tm_min*60 + tm_hour*3600 + tm_yday*86400 +\n    (tm_year-70)*31536000 + ((tm_year-69)/4)*86400 -\n    ((tm_year-1)/100)*86400 + ((tm_year+299)/400)*86400\n</code></pre>\n</blockquote>\n\n<p>If you put that expression on one side of an equation, and zero on the other, and add in the usual constraints on the range of day-of-year, hour, minute, second, you find that \"the Epoch\" corresponds to ISO calendar date 1970-01-01T00:00:00Z.  Why they don't just say that, I don't know.</p>\n\n<hr>\n\n<p>The phenomenon you observed, where <code>clock_gettime(CLOCK_REALTIME)</code> produced a value of roughly 50 hours since 1970-01-01T00:00:00Z, is accounted for in the very next sentence of POSIX chapter 4:</p>\n\n<blockquote>\n  <p>The relationship between the actual time of day and the current value for seconds since the Epoch is unspecified.</p>\n</blockquote>\n\n<p>Which is to say, POSIX does not require your computer's clock to be accurate.</p>\n"}], "owner": {"reputation": 3336, "user_id": 2649384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07fcf64005a81f4b34618c50a15f2b20?s=128&d=identicon&r=PG", "display_name": "Izzo", "link": "https://stackoverflow.com/users/2649384/izzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 1, "accepted_answer_id": 43102935, "answer_count": 2, "score": 2, "last_activity_date": 1555360414, "creation_date": 1490806705, "question_id": 43099710, "link": "https://stackoverflow.com/questions/43099710/should-the-posix-clock-realtime-clock-be-referenced-to-the-utc-epoch", "title": "Should the POSIX &#39;CLOCK_REALTIME&#39; clock be referenced to the UTC epoch?", "body": "<p>I'm using the POSIX clock_gettime(CLOCK_REALTIME, &amp;curr_time) to get the current time of the CLOCK_REALTIME clock. I understand the difference between CLOCK_REALTIME and CLOCK_MONOTONIC. However, what I don't know is the epoch associated with CLOCK_REALTIME.</p>\n\n<p>My first guess was that it would be the elapsed seconds/nanoseconds since the UTC epoch. However, the value that I'm getting is ~180000 seconds which is ~50 hours. Obviously not the time elapsed since the UTC epoch.</p>\n\n<p>So my question: what is CLOCK_REALTIME referenced against? Reboot? Platform specfic? UTC and I'm just doing something wrong?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1490806493, "post_id": 43099609, "comment_id": 73280803, "body": "<code>strncmp(argv[1] == &#39;c&#39;) == 0</code> --&gt; <code>strcmp(argv[1], &quot;c&quot;) == 0</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490806515, "post_id": 43099609, "comment_id": 73280816, "body": "<code>strncmp(argv[1] == &#39;c&#39;)</code> --&gt; <code>strncmp(argv[1], &quot;c&quot;,1)</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1490806554, "post_id": 43099609, "comment_id": 73280852, "body": "BTW, which part of the error message was unclear?"}, {"owner": {"reputation": 1985, "user_id": 7255359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ap90j.jpg?s=128&g=1", "display_name": "Sudheesh Singanamalla", "link": "https://stackoverflow.com/users/7255359/sudheesh-singanamalla"}, "edited": false, "score": 0, "creation_date": 1490806596, "post_id": 43099609, "comment_id": 73280875, "body": "You can convert it to <code>strncmp(argv[1], &quot;c&quot;) == 0</code> to compare the argument to the string <code>c</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490806783, "post_id": 43099609, "comment_id": 73280998, "body": "if you don&#39;t care what the rest of the string is you could just do <code>if(*argv[1]==&#39;c&#39;)</code>?"}, {"owner": {"reputation": 39, "user_id": 5893511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10203857268870935/picture?type=large", "display_name": "Morgan Ariel Henry", "link": "https://stackoverflow.com/users/5893511/morgan-ariel-henry"}, "edited": false, "score": 0, "creation_date": 1490812124, "post_id": 43099609, "comment_id": 73284386, "body": "Thank you, I actually didnt realize I had the  =="}], "answers": [{"comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1490806750, "post_id": 43099673, "comment_id": 73280979, "body": "@4386427 - that is true and arguably, that might be what OP intended."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1490806945, "post_id": 43099673, "comment_id": 73281105, "body": "@4386427 I thought he just wanted to check the first letter. So you can type y or yes"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1490807063, "post_id": 43099673, "comment_id": 73281192, "body": "@4386427 I&#39;ve added more to the answer that explains both ways."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1490818715, "post_id": 43099673, "comment_id": 73288305, "body": "@Barmar - Good answer - covers both the exact match and the &quot;match first letter&quot; case"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1490807039, "last_edit_date": 1490807039, "creation_date": 1490806574, "answer_id": 43099673, "question_id": 43099609, "link": "https://stackoverflow.com/questions/43099609/command-line-arguments-and-chars/43099673#43099673", "title": "Command Line Arguments and Chars", "body": "<p>You're not calling <code>strncmp()</code> correctly. It should be:</p>\n\n<pre><code>strncmp(argv[1], \"c\", 1)\n</code></pre>\n\n<p>It takes 3 arguments: two strings and a limit. <code>'c'</code> is a <code>char</code>, not a string, string literals are put in double quotes.</p>\n\n<p>You can also write simply:</p>\n\n<pre><code>if (argv[1][0] == 'c')\n</code></pre>\n\n<p>This just checks the first character, so the user can type <code>y</code> or <code>yes</code> and they'll match <code>y</code>. If you want to match the whole argument and require it be just a single character, you should use <code>strcmp()</code> rather than <code>strncmp()</code>:</p>\n\n<pre><code>if (strcmp(argv[1], \"c\") == 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1490808796, "last_edit_date": 1490808796, "creation_date": 1490808262, "answer_id": 43100189, "question_id": 43099609, "link": "https://stackoverflow.com/questions/43099609/command-line-arguments-and-chars/43100189#43100189", "title": "Command Line Arguments and Chars", "body": "<p>This</p>\n\n<pre><code>strncmp(argv[1] == 'c') == 0\n</code></pre>\n\n<p>just is incorrect syntax. For starters the function <code>strncmp</code> requires three arguments and it deals with strings while in the avove call of the function there is supplied only one argument of type <code>int</code>. because the wrong expression <code>argv[1] == 'c'</code> has type <code>int</code> and is equal to 0.</p>\n\n<p>I can suggest the following solution</p>\n\n<pre><code>else if ( argc &gt; 2 || strlen( argv[1] ) != 1 ){\n    printf(\"Too many arguments supplied. Please try again.\\n\");\n    return 0;\n}\nelse if ( argv[1][0] == 'c' )\n    calculateCRC();\n\nelse if ( argv[1][0] == 'v' )\n    verifyCRC();\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5893511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10203857268870935/picture?type=large", "display_name": "Morgan Ariel Henry", "link": "https://stackoverflow.com/users/5893511/morgan-ariel-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 43099673, "answer_count": 2, "score": -1, "last_activity_date": 1490823690, "creation_date": 1490806357, "last_edit_date": 1490823690, "question_id": 43099609, "link": "https://stackoverflow.com/questions/43099609/command-line-arguments-and-chars", "title": "Command Line Arguments and Chars", "body": "<p>What is the proper way to receive a command line argument from the user and compare it to a single char? For example if the user typed \"Y\" for yes run some function and \"N\" for no would run another function.</p>\n\n<p>My main error is \"comparison between ptr and integer\" &amp; \"too few arguments to function call, expected 3 have 1\"</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid calculate();\nvoid verify();\n\nint main (int argc, char *argv[]) {\n   if(argc &lt; 2){\n        printf(\"Please enter a mode of operation.\\n\");\n        return 0;\n    }\n    else if(argc &gt; 2){\n        printf(\"Too many arguments supplied. Please try again.\\n\");\n        return 0;\n    }\n    else if(strncmp(argv[1] == 'c') == 0)\n        calculate();\n\n    else if(strncmp(argv[1] == 'v') == 0)\n        verify();\n\nreturn 0;\n}\n\nvoid calculate(){\n}\n\nvoid verify(){\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4677, "user_id": 519348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TIdre.jpg?s=128&g=1", "display_name": "TZHX", "link": "https://stackoverflow.com/users/519348/tzhx"}, "edited": false, "score": 5, "creation_date": 1490805313, "post_id": 43099270, "comment_id": 73280047, "body": "Read it in as a string."}, {"owner": {"reputation": 2462, "user_id": 5293112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JGyvU.png?s=128&g=1", "display_name": "kuro", "link": "https://stackoverflow.com/users/5293112/kuro"}, "edited": false, "score": 0, "creation_date": 1490805339, "post_id": 43099270, "comment_id": 73280063, "body": "Scan the input as string and then you can check if it is a number and calculate the number of digits"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1490806433, "post_id": 43099270, "comment_id": 73280763, "body": "To go a level deeper than the above comments - if you need to distinguish between <code>0000</code> and <code>0</code> then you are no longer talking about integers (as these are the same integer value).  To distinguish between representations, you need to retain the representation - easiest way is to store a string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490810837, "post_id": 43099270, "comment_id": 73283600, "body": "With input <code>&quot;0102030&quot;</code> what  is the result?  For input <code>&quot;-0123&quot;</code>?"}, {"owner": {"reputation": 5, "user_id": 5935939, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-GxCqAfhI7vM/AAAAAAAAAAI/AAAAAAAAIKA/F34UfTyLQ-A/photo.jpg?sz=128", "display_name": "Sarah31", "link": "https://stackoverflow.com/users/5935939/sarah31"}, "edited": false, "score": 0, "creation_date": 1490962333, "post_id": 43099270, "comment_id": 73357752, "body": "storing as a string worked."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 7027905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa838f6e4b787ad23cb7f26494ef7e4?s=128&d=identicon&r=PG&f=1", "display_name": "Pantoofle", "link": "https://stackoverflow.com/users/7027905/pantoofle"}, "is_accepted": false, "score": 0, "last_activity_date": 1490806718, "creation_date": 1490806718, "answer_id": 43099715, "question_id": 43099270, "link": "https://stackoverflow.com/questions/43099270/how-to-find-the-number-of-digits-of-an-integer-if-the-input-is-0000-the-output/43099715#43099715", "title": "How to find the number of digits of an integer if the input is 0000? (The output must be 4 and not 1)", "body": "<p>The answer is in the comment above, but lets make this a full official answer :</p>\n\n<p>If you talk about integers, 000 and 0 are the exact same.\nSo if you want to distinguish the two, you must treat the entry as a string instead, and completely forget there are numbers inside.\nAnd for a string, it is easy to count how many characters there are.</p>\n"}], "owner": {"reputation": 5, "user_id": 5935939, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-GxCqAfhI7vM/AAAAAAAAAAI/AAAAAAAAIKA/F34UfTyLQ-A/photo.jpg?sz=128", "display_name": "Sarah31", "link": "https://stackoverflow.com/users/5935939/sarah31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490807419, "creation_date": 1490805273, "question_id": 43099270, "link": "https://stackoverflow.com/questions/43099270/how-to-find-the-number-of-digits-of-an-integer-if-the-input-is-0000-the-output", "title": "How to find the number of digits of an integer if the input is 0000? (The output must be 4 and not 1)", "body": "<p>When calculating the number of digits, the compiler takes 0000 as a single 0 and the answer is 1. But the number of zeroes in each place must be calculated. For example : 0000 - 4\n00 - 2</p>\n\n<pre><code>int n,c=0;\nscanf(\"%d\",&amp;n);\ndo{\n   n=n/10;\n   c++;\n}while(n!=0);\nprintf(\"%d\",c);\n</code></pre>\n"}, {"tags": ["c", "qsort", "arrayofstring"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490806144, "post_id": 43099269, "comment_id": 73280587, "body": "This is a duplicate question.  It will be modestly hard to find the question(s) of which it is a duplicate."}, {"owner": {"reputation": 61, "user_id": 4157351, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c69ff37252d8bab79937ad3550297eb2?s=128&d=identicon&r=PG&f=1", "display_name": "ScaVenGerS", "link": "https://stackoverflow.com/users/4157351/scavengers"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490806320, "post_id": 43099269, "comment_id": 73280693, "body": "@JonathanLeffler It almost works now after some tweaking, but some of the elements are displaced at the beginning, everything else in the array is properly sorted."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490806810, "post_id": 43099269, "comment_id": 73281015, "body": "It&#39;s probably not going to be possible to you more help without an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  I think you should accept the current answer which correctly diagnoses one of your problems.  Then create an MCVE to ask a new question.  We&#39;ll need the sample input data, the output you get, and the output you expect.  Your code will be relatively small.  It probably shouldn&#39;t even read a directory \u2014 it can use a built-in shuffled list of names to be sorted.  Of course, that might not reproduce your problem, but then it gives you clues about where to look.  The MCVE <i>must</i> reproduce the problem."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4157351, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c69ff37252d8bab79937ad3550297eb2?s=128&d=identicon&r=PG&f=1", "display_name": "ScaVenGerS", "link": "https://stackoverflow.com/users/4157351/scavengers"}, "edited": false, "score": 0, "creation_date": 1490805869, "post_id": 43099382, "comment_id": 73280406, "body": "That makes sense! But it&#39;s almost working now, some of the first few filenames are jumbled up but it randomly works after 4-5 file names properly."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 61, "user_id": 4157351, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c69ff37252d8bab79937ad3550297eb2?s=128&d=identicon&r=PG&f=1", "display_name": "ScaVenGerS", "link": "https://stackoverflow.com/users/4157351/scavengers"}, "edited": false, "score": 0, "creation_date": 1490806149, "post_id": 43099382, "comment_id": 73280593, "body": "you&#39;re also freeing too much - your loop goes up to MAX_FILES, but it should stop at fileBufferCurrentPointer. This is likely to cause all kinds of memory issues which might explain the oddness you&#39;re seeing"}, {"owner": {"reputation": 61, "user_id": 4157351, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c69ff37252d8bab79937ad3550297eb2?s=128&d=identicon&r=PG&f=1", "display_name": "ScaVenGerS", "link": "https://stackoverflow.com/users/4157351/scavengers"}, "edited": false, "score": 0, "creation_date": 1490806259, "post_id": 43099382, "comment_id": 73280655, "body": "I just saw that, thank you for the heads up! Doesn&#39;t help with the results though."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 2, "last_activity_date": 1490805611, "creation_date": 1490805611, "answer_id": 43099382, "question_id": 43099269, "link": "https://stackoverflow.com/questions/43099269/qsort-function-in-c-used-to-compare-an-array-of-strings/43099382#43099382", "title": "qsort() function in c used to compare an array of strings", "body": "<p>you've made a common mistake in thinking the comparison function is taking two elements from your array - it's actually taking two pointers to elements in your array so you should call strcmp like this</p>\n\n<pre><code>int normalCompare (const void *stringOne, const void *stringTwo) {\n   return strcmp(*(const char **)stringOne, *(const char **)stringTwo);\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4157351, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c69ff37252d8bab79937ad3550297eb2?s=128&d=identicon&r=PG&f=1", "display_name": "ScaVenGerS", "link": "https://stackoverflow.com/users/4157351/scavengers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "accepted_answer_id": 43099382, "answer_count": 1, "score": 0, "last_activity_date": 1490805611, "creation_date": 1490805265, "question_id": 43099269, "link": "https://stackoverflow.com/questions/43099269/qsort-function-in-c-used-to-compare-an-array-of-strings", "title": "qsort() function in c used to compare an array of strings", "body": "<p>I am trying to recreate the Linux command <code>ls</code> in C. I have the program working (going through a list of directories passed in as command line arguments, and pushing all the contents to an array of strings).  </p>\n\n<p>Now I'm trying to implement the quicksort flag for the command (e.g. <code>ls -s /dev</code>), which should print out all the contents in a lexicographical order. The problem is that the <code>qsort()</code> method in <code>stdlib.h</code> only \"sorts\" one element (basically swaps the first and the last element in the array) for my program.  </p>\n\n<p>I have no idea what's wrong, as all my pointers are properly set up as well. I'm adding the relevant snippet codes below, please let me know if something catches your eye that has been escaping mine for two days.  </p>\n\n<p><strong>Compare function for <code>qsort</code>:</strong>  </p>\n\n<pre><code>int normalCompare (const void *stringOne, const void *stringTwo) {\n   return strcmp((const char *)stringOne, (const char *)stringTwo);\n}  \n</code></pre>\n\n<p><strong>Actual function call:</strong>  </p>\n\n<pre><code>void execute_ls(char **directoryList, Flags flags) {\n\n   //Create a buffer for directories' file names\n   char **fileNamesList;\n   fileNamesList = malloc(MAX_FILES * sizeof (*fileNamesList));\n   int fileBufferCurrentPointer = 0;\n\n   //Fill the buffer out by calling execute_ls_one_dir on all the directories\n   int i = 0;\n   while(directoryList[i] != NULL) {\n      execute_ls_one_dir(directoryList[i], fileNamesList, &amp;fileBufferCurrentPointer);\n      i++;\n   }\n   fileNamesList[fileBufferCurrentPointer] = NULL;\n\n   //Process the array\n   if(flags.s == 1) {\n       qsort(fileNamesList, fileBufferCurrentPointer, sizeof (char *), normalCompare);\n   }\n   else if(flags.r == 1) {\n       qsort(fileNamesList, fileBufferCurrentPointer, sizeof (char *), reverseCompare);\n   }\n\n   //Print to user\n   for(i = 0; i &lt; fileBufferCurrentPointer; i++) {\n       if(((*fileNamesList[i] == '.') &amp;&amp; (flags.a == 1)) || (*fileNamesList[i] != '.')) {\n        printf(\"%s\\n\", fileNamesList[i]);\n       }\n   }\n\n   //Deallocate fileNamesList\n   for(i = 0; i &lt; MAX_FILES; i++) {\n       free(fileNamesList[i]);\n   }\n   free(fileNamesList);\n}  \n</code></pre>\n\n<p><strong>Updating the fileBufferCurrentPointer:</strong>  </p>\n\n<pre><code>while((oneDirEntryPtr = readdir(currentDirPtr)) != NULL) {\n\n    // Push the file name onto the fileNamesList array\n    fileNamesList[*fileBufferCurrentPointer] = malloc(MAX_LEN_NAME * sizeof (char));\n    strcpy(fileNamesList[*fileBufferCurrentPointer], oneDirEntryPtr-&gt;d_name);\n    *fileBufferCurrentPointer += 1;\n}  \n</code></pre>\n\n<p>I'm confused as to why <code>qsort</code> is only working once (technically isn't even passing through the array once instead of recursively multiple times to complete the algorithm). </p>\n"}, {"tags": ["c", "multithreading", "pointers", "pthreads"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490804781, "post_id": 43099088, "comment_id": 73279710, "body": "C or C++? They&#39;re not the same language."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490805002, "post_id": 43099088, "comment_id": 73279855, "body": "This looks wrong <code>i = left - 1;     j = right + 1;     while (i &lt; j) {</code>  should it be <code>while (i+1 &lt; j-1)</code>?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1490805022, "post_id": 43099088, "comment_id": 73279865, "body": "<code>pthread_t *th1;</code> ==&gt; <code>pthread_t th1;</code>"}, {"owner": {"reputation": 33, "user_id": 5959858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1071835542837006/picture?type=large", "display_name": "Diego Zucca", "link": "https://stackoverflow.com/users/5959858/diego-zucca"}, "edited": false, "score": 0, "creation_date": 1490805042, "post_id": 43099088, "comment_id": 73279881, "body": "Sorry! Is in C..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490805064, "post_id": 43099088, "comment_id": 73279895, "body": "Why do you cast expresions that are already the correct type? <code>left = (int) s-&gt;left</code> should just be <code>left = s-&gt;left</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1490807052, "post_id": 43099088, "comment_id": 73281181, "body": "<code>s1= malloc(sizeof(struct sort *));</code> Might be a bit too small..."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490805162, "post_id": 43099181, "comment_id": 73279957, "body": "I guess the sleep is intended to keep the local variable alive while the thread runs."}, {"owner": {"reputation": 33, "user_id": 5959858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1071835542837006/picture?type=large", "display_name": "Diego Zucca", "link": "https://stackoverflow.com/users/5959858/diego-zucca"}, "edited": false, "score": 0, "creation_date": 1490805204, "post_id": 43099181, "comment_id": 73279980, "body": "Thanks for answare. I am using sleep function because i am only in a prototype progam phase. So, how can i pass these three values (char *array, int left, int right) to my threads?"}, {"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "edited": false, "score": 0, "creation_date": 1490805236, "post_id": 43099181, "comment_id": 73279998, "body": "But, quicksortthread itself creates more threads and that function seems to exit after creating those threads."}, {"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "edited": false, "score": 0, "creation_date": 1490805313, "post_id": 43099181, "comment_id": 73280045, "body": "Please allocate memory dynamically for the struct sort variables i.e. make it as &quot;struct sort *s1 = malloc(sizeof(struct sort));"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1490807654, "post_id": 43099181, "comment_id": 73281600, "body": "The C standard does not have a concept of &quot;stack&quot; and an implementation is not required to use a stack for such variables. It is an automatic variable, how it is allocated is an implementation detail which is completely irrelevant here. Relevant is the life-time, resp. storage-duration."}, {"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490850795, "post_id": 43099181, "comment_id": 73298425, "body": "@Olaf, I have changed the wording in my answer a little to suit your comment. But, I think the core of my answer does address the questioner&#39;s problem. The way he was using those variables were clearly wrong."}], "tags": [], "owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1490850674, "last_edit_date": 1490850674, "creation_date": 1490804998, "answer_id": 43099181, "question_id": 43099088, "link": "https://stackoverflow.com/questions/43099088/struct-pointers-in-c-doesnt-return-correct-value/43099181#43099181", "title": "struct pointers in c doesn&#39;t return correct value", "body": "<p><code>struct sort s</code> is an automatic variable and you are passing it's pointer to the thread. This is not a good practice. The thread will have it's existence even after the function which called <code>pthread_create</code> has returned in which case, the stack variable will be out of scope. Same issue exists for the way you creating threads from <code>quicksortthread</code> function itself in which <code>struct sort s1</code> and <code>struct sort s2</code> are local variables to the quicksortthread function. Better to allocate memory to these structures dynamically.</p>\n\n<p>Also, it is not clear why you have added a <code>sleep(100)</code> in your main. You should be using <code>pthread_join</code> to wait for the created thread to complete before you exit from main.</p>\n\n<p><code>pthread_create</code> expects only a <code>pthread_t *</code> as the first argument, but, you are passing a <code>pthread**</code>. <code>pthread_t *th1</code> should be <code>pthread_t th1</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 5959858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1071835542837006/picture?type=large", "display_name": "Diego Zucca", "link": "https://stackoverflow.com/users/5959858/diego-zucca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491061819, "creation_date": 1490804709, "last_edit_date": 1491061819, "question_id": 43099088, "link": "https://stackoverflow.com/questions/43099088/struct-pointers-in-c-doesnt-return-correct-value", "title": "struct pointers in c doesn&#39;t return correct value", "body": "<p>I have this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#niclude ......\n\nstruct sort {\n    char  * array;\n    int left,right;\n};\n\nvoid quicksortthread(struct sort *s){\n    int left, right;\n    int i, j, x, tmp;\n    pthread_t *th1, *th2;\n    char * v;\n    struct sort s1;\n    struct sort s2;\n\n    left = s-&gt;left;\n    right = s-&gt;right;\n\n    v = s-&gt;array;\n\n    printf(\"\\n\\n\\n\\n QT: l=%i, r=%i \\n\",left,right);\n\n    //sorting algorithm\n    if (left &gt;= right)\n        return;\n    x = v[left];\n    i = left - 1;\n    j = right + 1;\n    while (i &lt; j) {\n        while (v[--j] &gt; x);\n        while (v[++i] &lt; x);\n        if (i &lt; j) {\n            char temp = v[i];\n            v[i] = v[j];\n            v[j] = temp;\n        }\n    }\n\n    s1.array = v;\n    s1.left = left;\n    s1.right = j;\n    s2.array = v;\n    s2.left = j+1;\n    s2.right = right;\n    printf(\"1)left = %i; right= %i\\n\", left,j);\n    printf(\"2)left = %i; right= %i\\n\", j+1,right);\n    pthread_create(&amp;th1, NULL, quicksortthread,&amp;s1);\n    pthread_create(&amp;th2, NULL, quicksortthread,&amp;s2);\n}\n\nint main (int argc, char ** argv){\n\n    pthread_t *th1;\n    int fd, len, pg, i, j;\n    int left, right;\n    struct stat stat_buf;\n    char c, *paddr;\n    struct sort s;\n\n    /*..LOTS OF THIGS\n\n      Define right and left as integers and\n      paddr as a char *\n\n      ..*/\n\n    if(   (right)   &gt;=  (atoi(argv[2]))  ){\n\n        //printf(\"filling structure\\n\");\n        s.array = paddr;\n        s.left = left;\n        s.right = right;\n        //printf(\"creating threads\\n\");\n        pthread_create(&amp;th1, NULL, quicksortthread,&amp;s);\n    }\n\n    sleep(100);\n}\n</code></pre>\n\n<p>After two thread calls it stops working. It is because the structure passed in the function <code>pthread_create</code> as a last parameter, seems like incorrect. It compiles and it execute without (for e.g.) segmentation fault. I am sure that I am using in the correct way structures and pointers.</p>\n\n<p>Then the program returns in this way:</p>\n\n<pre><code>left = 0; right= 2048\nQT: l=0, r=2048 \n1)left = 0; right= 0\n2)left = 1; right= 2048    \n\nleft = 0; right= 0\nQT: l=0, r=0 \n\nleft = 1037061890; right= 32542\nQT: l=1037061890, r=32542 \n</code></pre>\n\n<p><strong>SOLVED:</strong> Ok I have solve this problem changing the thread routine in this way:</p>\n\n<pre><code>nt left, right;\nint i, j, x, tmp;\npthread_t th1, th2;\nchar * v;\nstruct sort * s1;\ns1= malloc(sizeof(struct sort *));\nstruct sort * s2;\ns2= malloc(sizeof(struct sort *));\n\nleft =  s-&gt;left;\nright = s-&gt;right;\nprintf(\"\\n\\n\\n\\nleft = %i; right= %i\\n\", left,right);\nv =  s-&gt;array;\nprintf(\"QT: l=%i, r=%i \\n\",left,right);\n\nif (left &gt;= right)\nreturn;\nx = v[left];\ni = left - 1;\nj = right + 1;\nwhile (i &lt; j) {\nwhile (v[--j] &gt; x);\nwhile (v[++i] &lt; x);\nif (i &lt; j) {\n\n   char temp = v[i];\n   v[i] = v[j];\n   v[j] = temp;\n     }\n }\n\n s1-&gt;array = v;\n s1-&gt;left = left;\n s1-&gt;right = j;\n s2-&gt;array = v;\n s2-&gt;left = j+1;\n s2-&gt;right = right;\n printf(\"1)left = %i; right= %i\\n\", left,j);\n printf(\"2)left = %i; right= %i\\n\", j+1,right);\n pthread_create(&amp;th1, NULL, quicksortthread,s1);\n pthread_create(&amp;th2, NULL, quicksortthread,s2);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "edited": false, "score": 2, "creation_date": 1490804508, "post_id": 43098969, "comment_id": 73279520, "body": "What do you mean by &quot;dynamically created variable names&quot;? Also, what is the exact problem you are facing? Nothing is clear is from your question."}, {"owner": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "reply_to_user": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "edited": false, "score": 0, "creation_date": 1490804671, "post_id": 43098969, "comment_id": 73279635, "body": "I want to take the number of array user want to input then create the exact number of variables which maintains a common pattern so I can know which array is under which variable and I can call them for further processing. I am editing question now."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490804784, "post_id": 43099052, "comment_id": 73279713, "body": "I want to take the number of array user want to input then create the exact number of variables which maintains a common pattern so I can know which array is under which variable and I can call them for further processing.  I might not made that clear in the question. Now I edited though."}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "reply_to_user": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490808064, "post_id": 43099052, "comment_id": 73281865, "body": "You do not need to create new named variables (which is impossible in C), but you can create a dynamic lookup table, where you can store names and  values. I have updated my response."}, {"owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "reply_to_user": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490813533, "post_id": 43099052, "comment_id": 73285252, "body": "@Buno: I have added a simple example of a dynamic look up table that maps variable names to int values. Function addMap() adds mappings from C strings to int values, and lookup() retrieves the values."}], "tags": [], "owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "is_accepted": false, "score": 1, "last_activity_date": 1490813434, "last_edit_date": 1490813434, "creation_date": 1490804584, "answer_id": 43099052, "question_id": 43098969, "link": "https://stackoverflow.com/questions/43098969/c-dynamically-allocate-variable-names/43099052#43099052", "title": "c - dynamically allocate variable names", "body": "<p>C does not support dynamically created variables. You can instantiate dynamic objects through calls to malloc(), but these will not be named. In C, names are just labels used to associate names to memory locations at compile time, and resolved at link time. It is way too late at run time.</p>\n\n<p>You can create a mapping from names to int values, but you cannot create new variables. A Mapping will work for you. You need to create a method to add a named value to your mapping, a method to retrieve the value, a method to update its value, and for completeness, you need a fourth method to delete an element when you no longer need it.</p>\n\n<p>Here is a simple example of mapping variable names to int values using a dynamic lookup table. To be complete, you would need to add methods for updating values, and deleting them, etc.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_VARIABLES 100\n\ntypedef struct Lookup_Entry_Struct {\n           char* Name;\n           int   Value;\n        } LookUp_Entry;\n\ntypedef struct Mapping_Struct {\n           int   MaxEntries;\n           int   NumEntries;\n           LookUp_Entry* mapping;\n        } Mapping;\n\nvoid initMapping(Mapping* map, int MaxEntries)\n{\n map-&gt;NumEntries = 0;\n map-&gt;MaxEntries = MaxEntries;\n map-&gt;mapping = calloc(sizeof(LookUp_Entry), MaxEntries);\n\n if (map-&gt;mapping == NULL) {\n    // Failed to allocate the Mapping table\n    fprintf(stderr, \"Failed to alloc Mapping table of %d entries\\n\", MaxEntries);\n    map-&gt;MaxEntries = 0;\n }\n}\n\n\nbool addMap(Mapping* map, char* Name, int Val)\n{\n bool Added = false;\n\n if (map-&gt;NumEntries &lt; map-&gt;MaxEntries) {\n    // There is still room in the table, add this new variable\n    LookUp_Entry* newEntry = &amp;(map-&gt;mapping[map-&gt;NumEntries]);\n    newEntry-&gt;Value = Val;\n    newEntry-&gt;Name  = malloc(strlen(Name)+1);\n    strcpy(newEntry-&gt;Name, Name);\n    map-&gt;NumEntries++;\n    Added = true;\n }\n\n return Added;\n}\n\n\nint lookup(Mapping* map, char* Name)\n{\n int  val   = -1;\n int  i     = 0;\n bool Found = false;\n\n\n // Search the map to see if we can find Name\n for(i=0; i &lt; map-&gt;NumEntries &amp;&amp; !Found; i++)\n   {\n    LookUp_Entry* entry = &amp;(map-&gt;mapping[i]);\n    if (strcmp(entry-&gt;Name, Name) == 0) {\n       // Found a match, return the value in *Val\n       val   = entry-&gt;Value;\n       Found = true;\n    }\n   }\n\n if (!Found)\n    fprintf(stderr, \"lookup of \\\"%s\\\" not found in map\\n\", Name);\n\n // Found value, or -1 if not found\n return val;\n}\n\nvoid getVariablesFromUser(Mapping* map)\n{\n #define MAXNAMELEN  100\n // Code modified from Buno's sample\n int  NumVariables = 0;\n int  i;\n\n char inputName[100];\n int  inputVal;\n\n while ((NumVariables&lt;1) || (NumVariables &gt; MAX_VARIABLES)) {\n    printf(\"Enter number of variables: \");\n    scanf(\"%d\", &amp;NumVariables);\n    if (NumVariables&lt;0 || NumVariables&gt;MAX_VARIABLES)\n       fprintf(stderr, \"Please enter no more than %d variables!\\n\", MAX_VARIABLES);\n }\n\n printf(\"Init mapping for %d variables\\n\", NumVariables);\n initMapping(map, NumVariables);\n\n for(i=0; i&lt;NumVariables; i++) {\n    printf(\"Enter variable #%d name and initial value: \", i+1);\n    scanf(\"%s %d\", &amp;(inputName[0]), &amp;inputVal);\n    printf(\"Adding variable %s with initial value %d\\n\", inputName, inputVal);\n    addMap(map, inputName, inputVal);\n\n }\n}\n\nint main(int argc, char** argv)\n{\n Mapping myVarMap;\n char*   varName;\n int     i;\n\n getVariablesFromUser(&amp;myVarMap);\n\n // Display all the variables to show how to retrieve values\n printf(\"%d variables added by user\\n\", myVarMap.NumEntries);\n for(i=0; i&lt;myVarMap.NumEntries; i++) {\n    LookUp_Entry *entry =  &amp;(myVarMap.mapping[i]);\n    char*         name  = entry-&gt;Name;\n    printf(\"Entry #%d: %s = %d\\n\", i+1, name, lookup(&amp;myVarMap,name));\n }\n}\n</code></pre>\n\n<p>Save this in file lookup.c, then to compile it:</p>\n\n<pre><code>gcc lookup.c -o lookup\n</code></pre>\n\n<p>Here is sample run:</p>\n\n<pre><code>scott&gt; lookup\nEnter number of variables: 3\nInit mapping for 3 variables\nEnter variable #1 name and initial value: Bob 123\nAdding variable Bob with initial value 123\nEnter variable #2 name and initial value: Ted 999\nAdding variable Ted with initial value 999\nEnter variable #3 name and initial value: Sally 0\nAdding variable Sally with initial value 0\n3 variables added by user\nEntry #1: Bob = 123\nEntry #2: Ted = 999\nEntry #3: Sally = 0\nscott&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490804779, "post_id": 43099074, "comment_id": 73279707, "body": "I want to take the number of array user want to input then create the exact number of variables which maintains a common pattern so I can know which array is under which variable and I can call them for further processing.  I might not made that clear in the question. Now I edited though."}, {"owner": {"reputation": 696, "user_id": 3033480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1455f9b8fe83c1bddad21b6d46bf8a97?s=128&d=identicon&r=PG&f=1", "display_name": "Arvindsinc2", "link": "https://stackoverflow.com/users/3033480/arvindsinc2"}, "reply_to_user": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490805331, "post_id": 43099074, "comment_id": 73280058, "body": "You are still not clear. Are you trying to create array of arrays. Please describe with an example, how your data looks like."}, {"owner": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490805495, "post_id": 43099074, "comment_id": 73280165, "body": "my inputs are like:        2 (here 2 is number of inputs user intended to give)   a = 3   b = 4      I need to save them  in 2 variables say var1 and var2 as I need to work with them later."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490806365, "post_id": 43099074, "comment_id": 73280719, "body": "@Buno: You cannot create variables at run time.  What you <i>can</i> do is store names to a separate array, then create some kind of data structure to map those name entries to other arrays or objects."}, {"owner": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1490806551, "post_id": 43099074, "comment_id": 73280848, "body": "@JohnBode the problem is that, I don&#39;t know how many inputs the user wants to give. so, this option is not best I guess. But I will use it if I am close to deadline but couldn&#39;t solve it. thanks anyway. :)"}, {"owner": {"reputation": 696, "user_id": 3033480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1455f9b8fe83c1bddad21b6d46bf8a97?s=128&d=identicon&r=PG&f=1", "display_name": "Arvindsinc2", "link": "https://stackoverflow.com/users/3033480/arvindsinc2"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1490806686, "post_id": 43099074, "comment_id": 73280939, "body": "@JohnBode is ryt..please do some research on dynamic allocation..that will definitely solve your problem..First watch this entire playlist: <a href=\"https://www.youtube.com/playlist?list=PL2_aWCzGMAwLZp6LMUKI3cc7pgGsasm2_\" rel=\"nofollow noreferrer\">link</a> Then watch this <a href=\"https://www.youtube.com/watch?v=xDVC3wKjS64\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "edited": false, "score": 0, "creation_date": 1490807444, "post_id": 43099074, "comment_id": 73281453, "body": "@Buno - it actually sounds like you need to implement an <a href=\"https://en.wikipedia.org/wiki/Associative_array\" rel=\"nofollow noreferrer\">associative array</a> data structure; your &quot;variable name&quot; would be the <i>key</i>, and your other data would be the <i>value</i>.  You&#39;d probably use a binary tree, where each node in the tree contains a name pointer (<code>char *</code>) and your data pointer (<code>void *</code> if you need to be able to store different types in each node)."}], "tags": [], "owner": {"reputation": 696, "user_id": 3033480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1455f9b8fe83c1bddad21b6d46bf8a97?s=128&d=identicon&r=PG&f=1", "display_name": "Arvindsinc2", "link": "https://stackoverflow.com/users/3033480/arvindsinc2"}, "is_accepted": false, "score": 0, "last_activity_date": 1490804652, "creation_date": 1490804652, "answer_id": 43099074, "question_id": 43098969, "link": "https://stackoverflow.com/questions/43098969/c-dynamically-allocate-variable-names/43099074#43099074", "title": "c - dynamically allocate variable names", "body": "<p>You cannot create variable names dynamically, however you can dynamically allocate memory using a function called 'malloc()'. You need to first understand pointers and then learn how to create and access memory during run-time.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 2777099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ead81be8ffa8e7ab2d6618cb4a8c8a?s=128&d=identicon&r=PG&f=1", "display_name": "Srinidhi Shankar", "link": "https://stackoverflow.com/users/2777099/srinidhi-shankar"}, "is_accepted": false, "score": 0, "last_activity_date": 1490846076, "last_edit_date": 1490846076, "creation_date": 1490845371, "answer_id": 43108136, "question_id": 43098969, "link": "https://stackoverflow.com/questions/43098969/c-dynamically-allocate-variable-names/43108136#43108136", "title": "c - dynamically allocate variable names", "body": "<p>As mentioned in the comments and answers of others, you cannot dynamically create variables in C. </p>\n\n<p>However, you can follow this approach:</p>\n\n<ul>\n<li>Dynamically read the characters for each line of n expressions (When the\nlength of input string is not fixed) For ex, Consider n =1 and the\ninput line is \"a=10\" Read each character 'a', '=' , '1' , '0'</li>\n<li>Parse the string \"a=10\" to obtain the value 10. Dynamically allocate\nmemory to store this value 10.</li>\n<li>Do this for all n input lines.</li>\n</ul>\n\n<hr>\n\n<p>Here is the code to achieve this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n// Dynamically read the input string character by character: Taken from a SO answer\nchar *inputString(FILE* fp, size_t size){\n//The size is extended by the input with the value of the provisional\n    char *str;\n    int ch;\n    size_t len = 0;\n    str = realloc(NULL, sizeof(char)*size);//size is start size\n    if(!str)return str;\n    while(EOF!=(ch=fgetc(fp)) &amp;&amp; ch != '\\n'){\n        str[len++]=ch;\n        if(len==size){\n            str = realloc(str, sizeof(char)*(size+=16));\n            if(!str)return str;\n        }\n    }\n    str[len++]='\\0';\n\n    return realloc(str, sizeof(char)*len);\n}\n\nint main(void) {\n    int n,i,numindex;\n    char *variableline,*vartemp;\n    char keys[] = \"1234567890\";\n\n    //Read in the number of variables\n    printf(\"Enter n\\n\");\n    scanf(\"%d\\n\",&amp;n);\n\n    printf(\"Enter %d lines\\n\",n);\n    //Allocate memory for these variables\n    int *variable_values = malloc(n*sizeof(int));\n    for(i=0;i&lt;n;i++){\n        // Read the characters dynamically from the n input lines\n        variableline = inputString(stdin, 10);\n\n        //numindex - index where the number starts. For ex, in the string \"a=12\", numindex is the position of '1'\n        numindex = strcspn (variableline,keys);\n\n        //Read the number into vartemp\n        vartemp = malloc(strlen(variableline));\n        strncpy(vartemp, variableline+numindex, strlen(variableline) - numindex);\n\n        //Convert the string to number\n        *(variable_values+i) = atoi(vartemp);\n    }\n\n    printf(\"The variable values are:\\n\");\n    // All the variable values are stored in the dynamically created memory variable_values\n    for(i=0;i&lt;n;i++)\n    printf(\"%d\\n\",variable_values[i]);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7220495, "user_type": "registered", "profile_image": "https://graph.facebook.com/383635758646929/picture?type=large", "display_name": "Buno", "link": "https://stackoverflow.com/users/7220495/buno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1937, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1490846076, "creation_date": 1490804346, "last_edit_date": 1490805705, "question_id": 43098969, "link": "https://stackoverflow.com/questions/43098969/c-dynamically-allocate-variable-names", "title": "c - dynamically allocate variable names", "body": "<p>I am trying to take number of inputs from a user and take the inputs then and store them under dynamically created variable names. can anyone help?<br>\nI want to take the number of array user want to input then create the exact number of variables which maintains a common pattern so I can know which array is under which variable and I can call them for further processing.  </p>\n\n<p>My current code is as follows  </p>\n\n<pre><code> int input, eqn, m, i,n,x;  \n    char inputarr[100], eqnarr[100];  \n    printf(\"Enter number of variables: \");  \n    scanf(\"%d\",&amp;n);  \n    m=n;  \n    printf(\"Enter your variables: \\n\");  \n    while(n!=-1){  \n    gets(inputarr[n]);  \n    n--;  \n    }  \n    while(m!=0){  \n    puts(inputarr[m]);  \n    printf(\"\\n\");  \n    m--;  \n    }   \n</code></pre>\n\n<p>my inputs are like<br>\n2 (here 2 is number of inputs user intended to give)<br>\na = 3<br>\nb = 4  </p>\n\n<p>I need to save them  in 2 variables say var1 and var2 as I need to work with them later.</p>\n"}, {"tags": ["c", "gdb", "coredump", "toolchain", "backtrace"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4597478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d0792852d3b9fbc7703cc2acf084bd?s=128&d=identicon&r=PG&f=1", "display_name": "Serj", "link": "https://stackoverflow.com/users/4597478/serj"}, "edited": false, "score": 0, "creation_date": 1493282779, "post_id": 43112298, "comment_id": 74353159, "body": "Thanky Erik. I wasn&#39;t aware you could recover the shared objects from a coredump, that means the heap is also dumped? I tries running structer but for some reason I ran into an <a href=\"https://hastebin.com/wudewixoko.sql\" rel=\"nofollow noreferrer\">exception</a>"}, {"owner": {"reputation": 1304, "user_id": 5384908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b3UPm.jpg?s=128&g=1", "display_name": "Eirik Fuller", "link": "https://stackoverflow.com/users/5384908/eirik-fuller"}, "reply_to_user": {"reputation": 19, "user_id": 4597478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d0792852d3b9fbc7703cc2acf084bd?s=128&d=identicon&r=PG&f=1", "display_name": "Serj", "link": "https://stackoverflow.com/users/4597478/serj"}, "edited": false, "score": 0, "creation_date": 1493334713, "post_id": 43112298, "comment_id": 74385518, "body": "The exception in the structer code is due to an unrecognized segment type in the core file&#39;s auxv; structer.elf.enums.PType would need to change to handle it, and there is also room for improvement in the exception handling code."}], "tags": [], "owner": {"reputation": 1304, "user_id": 5384908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b3UPm.jpg?s=128&g=1", "display_name": "Eirik Fuller", "link": "https://stackoverflow.com/users/5384908/eirik-fuller"}, "is_accepted": false, "score": 0, "last_activity_date": 1490862219, "creation_date": 1490862219, "answer_id": 43112298, "question_id": 43098822, "link": "https://stackoverflow.com/questions/43098822/coredump-gdb-backtrace-stopped-frame-did-not-save-the-pc/43112298#43112298", "title": "Coredump GDB &quot;Backtrace stopped: frame did not save the PC&quot;", "body": "<p>One way to improve a backtrace which includes functions from shared objects without debug symbols is to install debug symbols where gdb can see them. The details of how to do that depend on your environment. One example is that if <code>libc.so.6</code> is provided by the <code>libc6</code> package on a Debian system, installing the <code>libc6-dbg</code> package places a number of symbol tables underneath <code>/usr/lib/debug/.build-id</code> (the <code>libc6</code> package, in addition to <code>libc.so.6</code>, provides a number of other stripped shared objects). If you're using a debugger environment for a non-native core (as suggested by the leading <code>.</code> in <code>./lib/libc.so.1</code>) you might extract such a package rather than installing it (on a Debian system <code>dpkg -x</code> is one way to do that).</p>\n\n<p>Aside from the issue of debug symbols, in some cases you can improve a backtrace by insuring that the shared objects (stripped or otherwise) seen by gdb correctly correspond to the shared objects which were in use by the process which dumped the core. One way to check that is to compare build IDs, which are (on a typical Linux system) reported by the <code>file</code> command. This only helps if you can reliably determine which shared objects were in use at the time of the core dump, and it presumes your shared objects were built in such a way that they include build IDs.</p>\n\n<p>In some situations the build IDs of the executable and all of the relevant shared objects can be reliably extracted from the core file itself. On a Linux system, this requires the presence of a file note in the core, and the presence of the first page of the executable and each shared object. Recent Linux kernels configured with typical defaults include all of those.</p>\n\n<p><a href=\"https://github.com/wackrat/structer\" rel=\"nofollow noreferrer\">https://github.com/wackrat/structer</a> provides python code which extracts build IDs from a core file which satisfies its assumptions. Depending on how big the core file is it might be preferable to use a 64 bit system, even if the core itself came from a 32 bit system.</p>\n\n<p>If it turns out that gdb is using the correct shared objects for this core (or if there is no viable way to confirm or refute that), another possibility is to disassemble code in the two stack frames reported by gdb. If the shared objects gdb sees are not the right ones for this core, that disassembly is likely to be mysterious, because gdb relies on the contents of the shared objects it uses to line up with the contents of that location at the time the core file was dumped (readonly segments are typically excluded from the core file, with the exception of that first page which provides each build ID). In my experience gdb can typically provide a coherent backtrace without debug symbols even without a frame pointer, but if the wrong shared object is used, gdb might be basing its backtrace on instructions which do not correspond to the correct contents of that location.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 4597478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d0792852d3b9fbc7703cc2acf084bd?s=128&d=identicon&r=PG&f=1", "display_name": "Serj", "link": "https://stackoverflow.com/users/4597478/serj"}, "is_accepted": false, "score": 0, "last_activity_date": 1493283102, "creation_date": 1493283102, "answer_id": 43653031, "question_id": 43098822, "link": "https://stackoverflow.com/questions/43098822/coredump-gdb-backtrace-stopped-frame-did-not-save-the-pc/43653031#43653031", "title": "Coredump GDB &quot;Backtrace stopped: frame did not save the PC&quot;", "body": "<p>I think the culprit was the libc the application was loading. It was probably compiled with some options that made the coredump useless. What I did was create a custom toolchain (used one compiled from buildroot) and compiling and running the application with that toolchain. I then was able to successfully read the coredump.</p>\n"}], "owner": {"reputation": 19, "user_id": 4597478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d0792852d3b9fbc7703cc2acf084bd?s=128&d=identicon&r=PG&f=1", "display_name": "Serj", "link": "https://stackoverflow.com/users/4597478/serj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3633, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1493283102, "creation_date": 1490803894, "question_id": 43098822, "link": "https://stackoverflow.com/questions/43098822/coredump-gdb-backtrace-stopped-frame-did-not-save-the-pc", "title": "Coredump GDB &quot;Backtrace stopped: frame did not save the PC&quot;", "body": "<p>While trying to analyse the backtrace of a coredump (process dumped by a SIGABRT from assert) in GDB I get the following output:</p>\n\n<pre><code>(gdb) bt\n#0  0x76d6bc54 in raise () from ./lib/libc.so.1\n#1  0x76d63bb8 in abort () from ./lib/libc.so.1\nBacktrace stopped: frame did not save the PC\n(gdb) thread apply all bt\n</code></pre>\n\n<p>The binary is compiled with \"-g\" so are all linked libraries except the ones from the toolchain (e.g. libc which doesn't even have symbols) of which I can't determine how it was built.</p>\n\n<p>Is this stack corruption or is it consequence of libc being compiled with something like \"fomit-frame-pointer\".</p>\n\n<p>As a general question if an uncaught exception happens from a runtime linked library and that library wasn't built for debug what happens i.e. can the coredump still contain useful information?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "arrays", "pointers", "realloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490803947, "post_id": 43098798, "comment_id": 73279148, "body": "Neither <a href=\"http://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\"><code>malloc</code></a> nor <a href=\"http://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\"><code>realloc</code></a> initializes the memory it allocates. If you want it initialized in any way you need to either call <a href=\"http://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\"><code>calloc</code></a> or do it yourself with <a href=\"http://en.cppreference.com/w/c/string/byte/memset\" rel=\"nofollow noreferrer\"><code>memset</code></a>."}, {"owner": {"reputation": 27, "user_id": 2766383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1368922070/picture?type=large", "display_name": "George Coll", "link": "https://stackoverflow.com/users/2766383/george-coll"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490804128, "post_id": 43098798, "comment_id": 73279264, "body": "So I will need to allocate a new array, set all those to 0 and then copy over the values item by item to the new array"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490804479, "post_id": 43098798, "comment_id": 73279504, "body": "No, just initialise the new elements."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1490804489, "post_id": 43098798, "comment_id": 73279512, "body": "<code>if(i &gt; currentSize)</code> should be <code>if(i &gt;= currentSize)</code> because (for example) if <code>i</code> is 10, that is beyond the initial range allocated."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490805608, "post_id": 43098798, "comment_id": 73280234, "body": "Suggest start with <code>int currentSize = 0; int *checkList = NULL;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490806176, "post_id": 43098798, "comment_id": 73280611, "body": "BTW, consider what happens if <code>readInt()</code> returns a negative number."}, {"owner": {"reputation": 27, "user_id": 2766383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1368922070/picture?type=large", "display_name": "George Coll", "link": "https://stackoverflow.com/users/2766383/george-coll"}, "edited": false, "score": 0, "creation_date": 1490807867, "post_id": 43098798, "comment_id": 73281726, "body": "This is not the actual code, just the code to get a point across :)"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2766383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1368922070/picture?type=large", "display_name": "George Coll", "link": "https://stackoverflow.com/users/2766383/george-coll"}, "edited": false, "score": 0, "creation_date": 1490805331, "post_id": 43098894, "comment_id": 73280057, "body": "So I could use <code>realloc</code> then <code>memset</code> on the range that&#39;s outside of the original array?"}, {"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "reply_to_user": {"reputation": 27, "user_id": 2766383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1368922070/picture?type=large", "display_name": "George Coll", "link": "https://stackoverflow.com/users/2766383/george-coll"}, "edited": false, "score": 0, "creation_date": 1490805478, "post_id": 43098894, "comment_id": 73280148, "body": "realloc will give you contiguous memory. You can memset that part of memory which is already unassigned using memset."}, {"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490805918, "post_id": 43098894, "comment_id": 73280433, "body": "@chux - Done! : )"}], "tags": [], "owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "is_accepted": false, "score": 1, "last_activity_date": 1490805902, "last_edit_date": 1490805902, "creation_date": 1490804102, "answer_id": 43098894, "question_id": 43098798, "link": "https://stackoverflow.com/questions/43098798/realloc-int-arrays-new-spaces-in-memory-to-0/43098894#43098894", "title": "Realloc int array&#39;s new spaces in memory to 0", "body": "<p>Instead of looping, you can use <code>memset</code> to set all values in a particular memory range to a intended value.</p>\n\n<p>You code can be modified like below to use memset</p>\n\n<pre><code>int main(){\n    int i;\n    int currentSize = 10;\n    int *checkList = malloc(sizeof(int) * currentSize);\n    while((i = readInt(fp))){\n        if(i &gt;= currentSize){\n             checklist = realloc(checkList, sizeof(int) * (i + 1));\n             //Need to loop through checklist and declare empty mem to 0?\n             memset(checklist+currentSize, 0, (sizeof(int) * ((i+1) - currentSize)));\n             currentSize = i + 1;\n        } \n        if(!checkList[i]) checkList[i]++;\n    }\n\n    //should have an array where seen values index in checklist == 1\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 3, "last_activity_date": 1490805306, "last_edit_date": 1490805306, "creation_date": 1490804991, "answer_id": 43099180, "question_id": 43098798, "link": "https://stackoverflow.com/questions/43098798/realloc-int-arrays-new-spaces-in-memory-to-0/43099180#43099180", "title": "Realloc int array&#39;s new spaces in memory to 0", "body": "<p>here is how you could do the <code>realloc</code>ation - it expands it to <code>newSize</code> and then uses <code>memset</code> to set the new elements to 0.</p>\n\n<pre><code>if(i &gt;= currentSize) {\n     int newSize = i + 1;\n     checkList = realloc(checkList, sizeof(int) * newSize);\n     memset(checkList+currentSize,0,sizeof(int) * (newSize - currentSize));\n     currentSize = newSize;\n} \n</code></pre>\n\n<p>You'd probably want to use <code>memset</code> or <code>calloc</code> on your initial allocation to make sure those values are also 0 BTW.</p>\n"}], "owner": {"reputation": 27, "user_id": 2766383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1368922070/picture?type=large", "display_name": "George Coll", "link": "https://stackoverflow.com/users/2766383/george-coll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 43099180, "answer_count": 2, "score": -1, "last_activity_date": 1490805902, "creation_date": 1490803810, "question_id": 43098798, "link": "https://stackoverflow.com/questions/43098798/realloc-int-arrays-new-spaces-in-memory-to-0", "title": "Realloc int array&#39;s new spaces in memory to 0", "body": "<p>I have an int array that needs to grow when it sees a higher int value than it already has, is there any way to call realloc() and set all the new spaces in memory that are being created? Or do I need to loop through all the new spaces in memory and set them to 0 one by one? Code below for clarity.</p>\n\n<pre><code>int main(){\n    int i;\n    int currentSize = 10;\n    int *checkList = malloc(sizeof(int) * currentSize);\n    while((i = readInt(fp))){\n        if(i &gt; currentSize){\n             currentSize = i + 1;\n             checklist = realloc(checkList, sizeof(int) * (i + 1));\n             //Need to loop through checklist and declare empty mem to 0?\n        } \n        if(!checkList[i]) checkList[i]++;\n    }\n\n    //should have an array where seen values index in checklist == 1\n}\n</code></pre>\n"}, {"tags": ["c", "file", "eof"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490803758, "post_id": 43098701, "comment_id": 73279001, "body": "You don&#39;t give a satisfactory reason why you don&#39;t want to use <code>fgets</code>. It will be much easier to examine the input data as a string, than serially with <code>scanf</code> family. But one way you can check for end of file is by testing the function return value from <code>fscanf(src,&quot;%s&quot;,com);</code> which you should be doing anyway."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1490803812, "creation_date": 1490803812, "answer_id": 43098800, "question_id": 43098701, "link": "https://stackoverflow.com/questions/43098701/how-to-read-until-end-of-file-c-fscanf/43098800#43098800", "title": "How to read until end of file C, fscanf", "body": "<p>Simple way is to test if <code>fscanf()</code> succeeded as the loop condition and you don't need a <code>fscanf()</code> before the loop:</p>\n\n<pre><code>char com[21];\n\nwhile(fscanf(src,\"%20s\",com) == 1)\n{\n    if(com[0]=='a')\n        fprintf(dest,\"%s 1\",com);\n     if(com[0]=='s')\n        fprintf(dest,\"%s 2\",com);\n}\n</code></pre>\n\n<p><code>fscanf()</code> returns the number of items successfully scanned. So, you don't need to check if it' returned <code>EOF</code>.</p>\n\n<p>Note that I changed the format string to avoid buffer overflow. I suggest you use <a href=\"http://man7.org/linux/man-pages/man3/ungetc.3.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> instead of <code>fscanf()</code> (and remember to take care of newline chars if it matters).</p>\n"}, {"tags": [], "owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "is_accepted": false, "score": 2, "last_activity_date": 1490803850, "creation_date": 1490803850, "answer_id": 43098813, "question_id": 43098701, "link": "https://stackoverflow.com/questions/43098701/how-to-read-until-end-of-file-c-fscanf/43098813#43098813", "title": "How to read until end of file C, fscanf", "body": "<p>Please note that <code>fscanf</code> returns an <code>integer</code> which can indicate <code>EOF</code> when the End of File is reached. Please refer to the man pages for more detail.</p>\n\n<p>Your code will have to modified like below:</p>\n\n<pre><code>char com[21];\nint ret;\nret = fscanf(src,\"%s\",com);\nwhile(ret!=EOF)\n{\n    if(com[0]=='a')\n        fprintf(dest,\"%s 1\",com);\n     if(com[0]=='s')\n        fprintf(dest,\"%s 2\",com);\n    ret = fscanf(src,\"%s\",com);\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7395538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c24237ee922df913a10cc0a0f8cd89?s=128&d=identicon&r=PG&f=1", "display_name": "R. Naired", "link": "https://stackoverflow.com/users/7395538/r-naired"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25014, "favorite_count": 2, "accepted_answer_id": 43098800, "answer_count": 2, "score": 2, "last_activity_date": 1490803850, "creation_date": 1490803512, "question_id": 43098701, "link": "https://stackoverflow.com/questions/43098701/how-to-read-until-end-of-file-c-fscanf", "title": "How to read until end of file C, fscanf", "body": "<p>What i read from a file: a P1/ s/ e/ t etc. / for different line. After specific letters(like 'a') come some data i have to collect so i don't want to use fgets. It doesn't end running. Could you help me, please? </p>\n\n<pre><code>char com[21];\nfscanf(src,\"%s\",com);\nwhile(com!=EOF)\n{\n    if(com[0]=='a')\n        fprintf(dest,\"%s 1\",com);\n     if(com[0]=='s')\n        fprintf(dest,\"%s 2\",com);\n    fscanf(src,\"%s\",com);\n}\n</code></pre>\n"}, {"tags": ["c", "windows-7", "admin"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490803357, "post_id": 43098565, "comment_id": 73278697, "body": "By setting the executable&#39;s properties so that it can only be run by administrator?"}, {"owner": {"reputation": 101, "user_id": 7746426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dc42b3969597bedcc2e8046934cf46f6?s=128&d=identicon&r=PG&f=1", "display_name": "jakehimton", "link": "https://stackoverflow.com/users/7746426/jakehimton"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490805243, "post_id": 43098565, "comment_id": 73280006, "body": "@WeatherVane That could work, is there a way I could do it from within the program itself?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490805505, "post_id": 43098565, "comment_id": 73280170, "body": "Sorry, never tried that."}, {"owner": {"reputation": 101, "user_id": 7746426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dc42b3969597bedcc2e8046934cf46f6?s=128&d=identicon&r=PG&f=1", "display_name": "jakehimton", "link": "https://stackoverflow.com/users/7746426/jakehimton"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490805733, "post_id": 43098565, "comment_id": 73280315, "body": "@WeatherVane all good, post the exec properties as an answer and I&#39;ll accept it"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1490806146, "creation_date": 1490806146, "answer_id": 43099550, "question_id": 43098565, "link": "https://stackoverflow.com/questions/43098565/require-program-to-run-as-admin/43099550#43099550", "title": "Require program to run as admin", "body": "<p>I suggest that if you set the executable's properties and permissions, so that it can <em>only</em> be run by administrator, that could solve the problem.</p>\n"}], "owner": {"reputation": 101, "user_id": 7746426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dc42b3969597bedcc2e8046934cf46f6?s=128&d=identicon&r=PG&f=1", "display_name": "jakehimton", "link": "https://stackoverflow.com/users/7746426/jakehimton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 43099550, "answer_count": 1, "score": 0, "last_activity_date": 1490806146, "creation_date": 1490803099, "question_id": 43098565, "link": "https://stackoverflow.com/questions/43098565/require-program-to-run-as-admin", "title": "Require program to run as admin", "body": "<p>How can I check if my program is running as an administrator on a Windows 7 system, using C?</p>\n\n<p>In batch I could do something along the lines of:</p>\n\n<pre><code>whoami /groups | findstr /b /c:\"Mandatory Label\\High Mandatory Level\" | findstr /c:\"Enabled group\" &gt; nul: &amp;&amp; set IS_ELEVATED=1\n    if %IS_ELEVATED%==0 (\n        set /p _=\"You need to run Utilis as administrator, run with admin cmd. Press enter to exit..\n    )\n</code></pre>\n\n<p>This will check if the current user is an administrator or not. How can I achieve the same concept in C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 656, "user_id": 7507899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f623804a96d4660cd88e6cb66b2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Tayyab", "link": "https://stackoverflow.com/users/7507899/mohammad-tayyab"}, "edited": false, "score": 0, "creation_date": 1490803511, "post_id": 43098398, "comment_id": 73278802, "body": "Seems two 0&#39;s in your last row, you want to assign average to both of them or just one of them ?"}, {"owner": {"reputation": 656, "user_id": 7507899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f623804a96d4660cd88e6cb66b2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Tayyab", "link": "https://stackoverflow.com/users/7507899/mohammad-tayyab"}, "edited": false, "score": 0, "creation_date": 1490804518, "post_id": 43098398, "comment_id": 73279527, "body": "Minimum except 0 right ?"}, {"owner": {"reputation": 656, "user_id": 7507899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f623804a96d4660cd88e6cb66b2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Tayyab", "link": "https://stackoverflow.com/users/7507899/mohammad-tayyab"}, "edited": false, "score": 0, "creation_date": 1490806155, "post_id": 43098398, "comment_id": 73280600, "body": "OK! I commented the code, It may help you to understand."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 3461317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a789d4dc45759b198576e047001c143?s=128&d=identicon&r=PG&f=1", "display_name": "D A M", "link": "https://stackoverflow.com/users/3461317/d-a-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1490803921, "creation_date": 1490803921, "answer_id": 43098832, "question_id": 43098398, "link": "https://stackoverflow.com/questions/43098398/assignment-about-2d-arrays/43098832#43098832", "title": "Assignment, about 2d arrays", "body": "<p>There are multiple problems with the code you've presented. This line: </p>\n\n<pre><code>    imagefile &gt;&gt; data[k][i];\n</code></pre>\n\n<p>Error C2679: binary '>>' : no operator found which takes a right-hand operand of type 'std::string' (or there is no acceptable conversion)</p>\n\n<p>and:</p>\n\n<pre><code>    for (int k = 0; k &lt; integer[k][i]; k++) \n</code></pre>\n\n<p>Error C2065: 'i' : undeclared identifier (78)</p>\n\n<p>Try posting the actual code.</p>\n"}, {"comments": [{"owner": {"reputation": 656, "user_id": 7507899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f623804a96d4660cd88e6cb66b2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Tayyab", "link": "https://stackoverflow.com/users/7507899/mohammad-tayyab"}, "reply_to_user": {"reputation": 3, "user_id": 7770267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ba8800dfe25c87fa6a318f6e32dbf2c?s=128&d=identicon&r=PG&f=1", "display_name": "guest user", "link": "https://stackoverflow.com/users/7770267/guest-user"}, "edited": false, "score": 0, "creation_date": 1491251735, "post_id": 43099534, "comment_id": 73460515, "body": "I do not know matlab, Ask in matlab tab."}, {"owner": {"reputation": 656, "user_id": 7507899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f623804a96d4660cd88e6cb66b2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Tayyab", "link": "https://stackoverflow.com/users/7507899/mohammad-tayyab"}, "reply_to_user": {"reputation": 3, "user_id": 7770267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ba8800dfe25c87fa6a318f6e32dbf2c?s=128&d=identicon&r=PG&f=1", "display_name": "guest user", "link": "https://stackoverflow.com/users/7770267/guest-user"}, "edited": false, "score": 0, "creation_date": 1491570066, "post_id": 43099534, "comment_id": 73625486, "body": "What is the other thing ? @guestuser"}, {"owner": {"reputation": 656, "user_id": 7507899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f623804a96d4660cd88e6cb66b2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Tayyab", "link": "https://stackoverflow.com/users/7507899/mohammad-tayyab"}, "reply_to_user": {"reputation": 3, "user_id": 7770267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ba8800dfe25c87fa6a318f6e32dbf2c?s=128&d=identicon&r=PG&f=1", "display_name": "guest user", "link": "https://stackoverflow.com/users/7770267/guest-user"}, "edited": false, "score": 0, "creation_date": 1491599574, "post_id": 43099534, "comment_id": 73642458, "body": "Assign nan number before it? Then what to assign NaN? @guestuser"}], "tags": [], "owner": {"reputation": 656, "user_id": 7507899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f623804a96d4660cd88e6cb66b2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Tayyab", "link": "https://stackoverflow.com/users/7507899/mohammad-tayyab"}, "is_accepted": false, "score": 0, "last_activity_date": 1491484310, "last_edit_date": 1491484310, "creation_date": 1490806079, "answer_id": 43099534, "question_id": 43098398, "link": "https://stackoverflow.com/questions/43098398/assignment-about-2d-arrays/43099534#43099534", "title": "Assignment, about 2d arrays", "body": "<p>Here is your code will work perfectly if you will have this file.</p>\n\n<blockquote>\n  <blockquote>\n    <p>Note: Your Text.txt should be exactly this format. Not with a blank line.</p>\n  </blockquote>\n</blockquote>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\nusing namespace std;\nint main()\n{\n    ifstream in(\"Text.txt\");\n    char ch = '\\0'; int count = 1; //Ac counter to count number of rows\n    while (!in.eof())\n    {\n        in.get(ch);\n        if (ch == '\\n') //counting lines\n            count++;\n    }\n    in.close();\n    double *avgArray = new double[count]; //array to store avg of min/max of every row\n    int arraySize = count;\n    in.open(\"Text.txt\");\n    count = 0;\n    string strTemp = \"\";\n    int temp = 0; //temp to get int values\n    int sum = 0; //calculate sum of avery row\n    int i = 0; //index number\n    int max = 0;\n    int min = 99999;\n    while (!in.eof())\n    {\n        in &gt;&gt; strTemp;\n        if (strTemp == \"NaN\")\n            temp = 0;\n        else\n            temp = atoi(strTemp.c_str());\n        if (temp &gt; max)\n            max = temp;\n        if (temp &lt; min &amp;&amp; temp!=0)\n            min = temp;\n        in.get(ch);\n        if (ch == '\\n' || in.eof()) //if new line occured \n        {\n            avgArray[i] = double(max + min) / 2.0; //store avg in abg array\n            max = 0;\n            min = 99999;\n            i++; //counter of avg array\n        }\n    }\n    in.close();\n    //for (int i = 0; i &lt; arraySize; i++) //printing\n        //cout &lt;&lt; avgArray[i]&lt;&lt;endl; //avg of all rows\n    in.open(\"Text.txt\");\n    i = 0;\n    int col = 0; //counter for cols\n    int SizeCol = 0;\n    temp = 0;\n    strTemp = \"\";\n    double **DataArray = new double*[arraySize]; //2D array to store file data\n    while (!in.eof())\n    {\n        in &gt;&gt; strTemp;\n        if (strTemp == \"NaN\")\n            temp = 0;\n        else\n            temp = atoi(strTemp.c_str());\n        in.get(ch);\n        col++; //counting columns\n        if (ch == '\\n')\n        {\n            DataArray[i] = new double[col]; //making dynmically cols\n            i++;\n            SizeCol = col;\n            col = 0;\n        }\n        if (in.eof())\n            DataArray[i] = new double[col]; //for last line of file\n    }\n    in.close();\n    in.open(\"Text.txt\");\n\n    for (int i = 0; i &lt; arraySize; i++)\n    {\n        for (int j = 0; j &lt; SizeCol; j++)\n        {\n            in &gt;&gt; strTemp;\n            if (strTemp == \"NaN\")\n                temp = 0;\n            else\n                temp = atoi(strTemp.c_str());\n            DataArray[i][j]=temp;\n            if (DataArray[i][j] == 0)\n                DataArray[i][j] = avgArray[i]; //Assigning avg of row at row's 0 place\n        }\n    }\n    in.close();\n\n    //Printing the final array\n    for (int i = 0; i &lt; arraySize; i++)\n    {\n        for (int j = 0; j &lt; SizeCol; j++)\n        {\n            cout&lt;&lt; DataArray[i][j]&lt;&lt;\" \"; //printing\n        }\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl &lt;&lt; endl;\n    ofstream out(\"Text.txt\");\n    //Wrting the final array into Text.txt\n    for (int i = 0; i &lt; arraySize; i++)\n    {\n        for (int j = 0; j &lt; SizeCol; j++)\n        {\n            out &lt;&lt; DataArray[i][j] &lt;&lt; \" \"; //Writing\n        }\n        out &lt;&lt; endl;\n    }\n    delete[] avgArray;\n    for (int i = 0; i &lt; arraySize; i++)\n        delete DataArray[i];\n    delete[] DataArray;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7770267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ba8800dfe25c87fa6a318f6e32dbf2c?s=128&d=identicon&r=PG&f=1", "display_name": "guest user", "link": "https://stackoverflow.com/users/7770267/guest-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491484310, "creation_date": 1490802697, "last_edit_date": 1491006395, "question_id": 43098398, "link": "https://stackoverflow.com/questions/43098398/assignment-about-2d-arrays", "title": "Assignment, about 2d arrays", "body": "<p>I would like some assistance with a problem. </p>\n\n<p>I have this text file:</p>\n\n<p>I input the contents of the text into a string 2d array and converted it to a integer 2d array. When i converted to the int array the nan's were replaced with a zero. I now proceeded to find the max and min of each line in the 2d array and find the average of both, which I successfully achieved. My problem is I want to assign the average value found for each line to the zero. I tried using two for loops but it replacing all the zero's with the average of the first line. Can anyone please assist me.</p>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>int min = 200;\n\nint main() {\n\n    fstream imagefile;\n    imagefile.open(\"Text.txt\");\n\n    if (imagefile.fail()) { // checking for errors in file\n        cerr &lt;&lt; \"Error opening file\" &lt;&lt; endl;\n        exit(1);\n\n    std::string data[3][11];\n    int integer[3][11];\n    for (int k = 0; k &lt; 3; k++) {\n\n        for (int i = 0; i &lt; 11; i++) {\n            imagefile &gt;&gt; data[k][i]; // read from file\n\n        }\n    }\n\n    cin.get();\n\n    for (int k = 0; k &lt; 3; k++) {\n\n        for (int i = 0; i &lt; 11; i++)\n        {\n            integer[k][i] = atoi(data[k][i].c_str()); // converts string to int \n        }\n    }\n    cin.get();\n\n    for (int k = 0; k &lt; 3; k++) { //k is the row  and i is the column\n\n        for (int i = 0; i &lt; 11; i++) {\n            cout &lt;&lt; integer[k][i] &lt;&lt; \"  \";\n\n        }\n        cout &lt;&lt; endl;\n    }\n\n    int row, col;\n    for (row = 0; row &lt; 3; row++) { //k is the row  and i is the column\n\n        max = integer[row][0];\n        min = integer[row][0];\n\n        for (col = 0; col &lt; 11; col++) {\n            if (integer[row][col] &gt; max) { max = integer[row][col]; }\n            if ((integer[row][col] &lt; min) &amp;&amp; (integer[row][col] != 0)) { min = integer[row][col]; }\n            //if (integer[row][col] == 0) { avg == integer[row][col]; }\n\n            sum = max + min;\n            avg = sum / 2;\n        }\n            for (int k = 0; k &lt; integer[k][i]; k++) {  //k is the row  and i is the column\n                for (int i = 0; i &lt; 11; i++) {\n                    if (integer[k][i] == 0) {\n\n                        integer[k][i] = avg;\n\n                    }\n                    cout &lt;&lt; integer[k][i] &lt;&lt; \"  \";\n\n                }\n                cout &lt;&lt; endl;\n            }\n\n        cout &lt;&lt; max &lt;&lt; \" \";\n        cout &lt;&lt; min &lt;&lt; \" \";\n        cout &lt;&lt; avg &lt;&lt; \" \" &lt;&lt; endl;\n    }\n\n    imagefile.close();\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "function-pointers", "gcc-warning"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1490801288, "post_id": 43097727, "comment_id": 73277090, "body": "Can you use <code>clang</code> instead of <code>gcc</code> where <code>-Weverything</code> is available?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1490804070, "post_id": 43097727, "comment_id": 73279221, "body": "C and C++ are different languages. If you use an obsoletcence, yet valid C feature, why should a compliant compiler warn?"}, {"owner": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1490817492, "post_id": 43097727, "comment_id": 73287679, "body": "no, @FiddlingBits thats not possible in my case.  @Olaf, it wasn&#39;t clear to me that there&#180;s such a substantial difference between delcaring a function as <code>void foo()</code> or <code>void foo(void)</code> in C. That&#180;s why i was wondering and why i asked this question."}], "answers": [{"comments": [{"owner": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "edited": false, "score": 0, "creation_date": 1490817132, "post_id": 43097973, "comment_id": 73287496, "body": "thanks for the reference, it helps, of course, to know what to look for... seems like -Wstrict-prototypes would help to spot those smells but i fear that would lead to 1000 warnings in my code base ..."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 5, "last_activity_date": 1490804174, "last_edit_date": 1490804174, "creation_date": 1490801649, "answer_id": 43097973, "question_id": 43097727, "link": "https://stackoverflow.com/questions/43097727/how-to-instruct-gcc-to-warn-me-about-invalid-function-pointer-conversion-just-as/43097973#43097973", "title": "How to instruct gcc to warn me about invalid function pointer conversion just as g++ would do?", "body": "<p>A function prototype with empty parenthesis is an obsolescent<sup>1</sup> feature. Don't use it.</p>\n\n<p>If you use the correct declaration, you will get warnings:</p>\n\n<pre><code>typedef void(*void_func_t)(void);\n</code></pre>\n\n<p>Due to this old feature, the types <code>void(*)()</code> and <code>void(*)(int, int, int)</code> are compatible. The former type takes an unspecified number of arguments. This is doubly problematic, because there is no warning from the compiler, and if you call the function with incorrect number of arguments, the behavior is undefined.</p>\n\n<p>Unlike in C, in C++ empty parenthesis mean that the function takes no arguments, thus <code>void(*)()</code> is equivalent to <code>void(*)(void)</code>.</p>\n\n<hr>\n\n<p><sup>1</sup> (Quoted from: ISO/IEC 9899:201x 6.11.6 Function declarators\n1)<br>\nThe use of function declarators with empty parentheses (not prototype-format parameter\ntype declarators) is an obsolescent feature.</p>\n"}], "owner": {"reputation": 555, "user_id": 1142788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea6902724f1b6e3383db234af25fdf70?s=128&d=identicon&r=PG", "display_name": "yussuf", "link": "https://stackoverflow.com/users/1142788/yussuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 43097973, "answer_count": 1, "score": 0, "last_activity_date": 1490804174, "creation_date": 1490800970, "question_id": 43097727, "link": "https://stackoverflow.com/questions/43097727/how-to-instruct-gcc-to-warn-me-about-invalid-function-pointer-conversion-just-as", "title": "How to instruct gcc to warn me about invalid function pointer conversion just as g++ would do?", "body": "<p>How can i instruct gcc to warn me about invalid function pointer conversions like g++ would do for the following piece of code?</p>\n\n<p>And.. why doesn't gcc warn me about that? What could / will happen when passing a pointer to a to do_something()?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef void (*void_func_t) ();\ntypedef void (*void_int_func_t) (int, int, int);\n\nvoid do_something(void_func_t f)\n{\n    void_int_func_t foo = f;\n    foo(1,2,3);\n}\n\nvoid a()\n{\n    printf(\"a\\n\");\n}\n\nvoid b(int one, int two, int three)\n{\n    printf(\"%i, %i, %i\\n\", one, two, three);\n}\n\nint main()\n{\n    do_something(a);\n    do_something(b);\n    return 0;   \n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>\u279c  gcc -W -Wall -Werror func.c \n\u279c  ./a.out\na\n1, 2, 3\n</code></pre>\n\n<p>c++, however would warn / give errors</p>\n\n<pre><code>g++ -W -Wall -Werror func.c\nfunc.c: In function \u2018void do_something(void_func_t)\u2019:\nfunc.c:8:27: error: invalid conversion from \u2018void_func_t {aka void (*)()}\u2019 to \u2018void_int_func_t {aka void (*)(int, int, int)}\u2019 [-fpermissive]\nfunc.c: In function \u2018int main()\u2019:\nfunc.c:25:19: error: invalid conversion from \u2018void (*)(int, int, int)\u2019 to \u2018void_func_t {aka void (*)()}\u2019 [-fpermissive]\nfunc.c:6:6: error:   initializing argument 1 of \u2018void do_something(void_func_t)\u2019 [-fpermissive]\n</code></pre>\n"}, {"tags": ["c", "linked-list", "strcmp"], "comments": [{"owner": {"reputation": 227, "user_id": 5956725, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8434970dc2d23295c094d203c3128e3?s=128&d=identicon&r=PG&f=1", "display_name": "The_Questioner", "link": "https://stackoverflow.com/users/5956725/the-questioner"}, "edited": false, "score": 0, "creation_date": 1490800175, "post_id": 43097416, "comment_id": 73276263, "body": "Please ignore str2[10]. forgot to take that part out."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 2, "creation_date": 1490800263, "post_id": 43097416, "comment_id": 73276330, "body": "What are you trying to compare? Because it looks like you&#39;re trying to compare the value of a string (char[]) with a char, not another string ..."}], "answers": [{"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 4, "last_activity_date": 1490800599, "last_edit_date": 1490800599, "creation_date": 1490800272, "answer_id": 43097477, "question_id": 43097416, "link": "https://stackoverflow.com/questions/43097416/c-passing-argument-1-of-strcmp-makes-pointer-from-integer-without-a-cast/43097477#43097477", "title": "C - passing argument 1 of &#39;strcmp&#39; makes pointer from integer without a cast", "body": "<p>The <code>strcmp</code> signature looks like this:</p>\n\n<pre><code>int strcmp(const char *s1, const char *s2);\n</code></pre>\n\n<p>I.e. the second parameter must be of type <code>const char*</code>. But you're giving it a <code>char</code>. Hence the error message you're getting (<code>char</code> is an \"integer\" type).</p>\n\n<hr>\n\n<p>Also, <code>scanf(\"%d\", &amp;str);</code> requests <code>scanf</code> to read an integer and store it to <code>str</code>. But <code>str</code> is not an integer type. (This would've been caught by the compiler if you had compilation warnings enabled.)</p>\n\n<hr>\n\n<p>You need something like this:</p>\n\n<pre><code>printf(\"Enter a student ID: \");\nint givenID;\nscanf(\"%d\", &amp;givenID); // read integer input to integer variable\n\nwhile(currentstudent != NULL) {\n    if(currentstudent-&gt;ID == givenID) { // check whether this user has the ID entered by the user\n        printf(\"ID#: %d Name: %s\", currentstudent-&gt;ID, currentstudent-&gt;name);\n        break; // we found what we were looking for, stop the loop\n    }\n    currentstudent = currentstudent-&gt;next; // move on to the next student in the list\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 4, "last_activity_date": 1490800392, "creation_date": 1490800392, "answer_id": 43097513, "question_id": 43097416, "link": "https://stackoverflow.com/questions/43097416/c-passing-argument-1-of-strcmp-makes-pointer-from-integer-without-a-cast/43097513#43097513", "title": "C - passing argument 1 of &#39;strcmp&#39; makes pointer from integer without a cast", "body": "<p>You're not passing the right types of variable to these functions</p>\n\n<pre><code>    scanf(\"%d\", &amp;str);\n</code></pre>\n\n<p>This is expecting str to be an <code>int</code> but it's a string.</p>\n\n<pre><code>    if(strcmp(str, (char)currentstudent-&gt;ID) == 0){\n</code></pre>\n\n<p>This is expecting two strings (either <code>char *</code> or <code>char[]</code>) but the second parameter is an <code>int</code> and you're casting it to a <code>char</code>.</p>\n\n<p>Since you're reading in an <code>int</code> and wanting to compare it to an <code>int</code> why not write it like this:</p>\n\n<pre><code>int in_id;\nscanf(\"%d\",&amp;in_id);\nif(in_id == currentstudent-&gt;ID) {\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 5956725, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8434970dc2d23295c094d203c3128e3?s=128&d=identicon&r=PG&f=1", "display_name": "The_Questioner", "link": "https://stackoverflow.com/users/5956725/the-questioner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14147, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490800599, "creation_date": 1490800110, "question_id": 43097416, "link": "https://stackoverflow.com/questions/43097416/c-passing-argument-1-of-strcmp-makes-pointer-from-integer-without-a-cast", "title": "C - passing argument 1 of &#39;strcmp&#39; makes pointer from integer without a cast", "body": "<p>My function searchlist asks the user enter a student ID and lists that student ID and name. \nHere is my struct:</p>\n\n<pre><code>struct student {\n    int ID;\n    char name[40];\n    struct student *next;\n};\ntypedef struct student Student;\n</code></pre>\n\n<p>Here is my function:</p>\n\n<pre><code>void searchlist(Student *SLIST){\n    Student *currentstudent = SLIST;\n    char str[10], str2[10];\n\n    printf(\"Enter a student ID: \");\n    while(currentstudent != NULL){\n        scanf(\"%d\", &amp;str);\n        if(strcmp(str, (char)currentstudent-&gt;ID) == 0){\n            printf(\"ID#: %d Name: %s\", currentstudent-&gt;ID, currentstudent-&gt;name);\n        }\n    }\n}\n</code></pre>\n\n<p>However, when I try compiling, it gives me a warning: passing argument 1 of 'strcmp' makes pointer from integer without a cast</p>\n"}, {"tags": ["c", "multithreading", "sockets", "pointers"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490799078, "post_id": 43096909, "comment_id": 73275317, "body": "<code>while ((client_sock = accept(...</code> accept() returns -1 on error. zero is a valid return. And -1 returns from read() and recv() are not always errors. Check errno ."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490799967, "post_id": 43096909, "comment_id": 73276065, "body": "<code>new_sock = (int *) malloc(1);</code> don&#39;t do this."}, {"owner": {"reputation": 349, "user_id": 1724251, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/373e046cd58ed75aaab9284926b69038?s=128&d=identicon&r=PG", "display_name": "Jonis Maurin Cear&#225;", "link": "https://stackoverflow.com/users/1724251/jonis-maurin-cear%c3%a1"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490800025, "post_id": 43096909, "comment_id": 73276126, "body": "in my tests, return of &quot;0&quot; in recv() means that client is disconnected. I&#39;ve tested with a lot of clients (putty, RAW, telnet) in different platforms and itr&#39;s working. Since this &#39;server-client&#39; doesn&#39;t send any data, it&#39;s the only way to detect timeout from this connection (and error while swnding data....but if I don&#39;t have data to send, I have no way to detect timeout!)."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1490800099, "post_id": 43096909, "comment_id": 73276201, "body": "If <code>malloc</code> segfaults you are probably writing outside allocated memory. Look through all allocations/deallocations and writes ti allocated memory. Consider using Valgrind to help localise the problem."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490800124, "post_id": 43096909, "comment_id": 73276223, "body": "often if your code is crashing <code>malloc</code> it&#39;s because of some other part of the code trashing the memory - it&#39;s worth running your code under something like &quot;valgrind&quot; or &quot;electricfence&quot; to see if you have any buffer overruns etc..."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1490800244, "post_id": 43096909, "comment_id": 73276313, "body": "I&#39;m sorry but there is really too much code here... Could you try to strip it down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If you cannot first use valgring or electricfence to narrow the problem."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490800271, "post_id": 43096909, "comment_id": 73276335, "body": "Use select() or poll() instead of MSG_PEEK. And IMHO you should fix the trivial errors before even thinking about threads."}], "owner": {"reputation": 349, "user_id": 1724251, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/373e046cd58ed75aaab9284926b69038?s=128&d=identicon&r=PG", "display_name": "Jonis Maurin Cear&#225;", "link": "https://stackoverflow.com/users/1724251/jonis-maurin-cear%c3%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490800272, "creation_date": 1490798879, "last_edit_date": 1490800272, "question_id": 43096909, "link": "https://stackoverflow.com/questions/43096909/c-socket-and-malloc-mutex-crash", "title": "C socket and malloc/mutex crash", "body": "<p>I'm trying to build a multi-client and multi-server program in C. Let's me explain: \n1)N-clients could connect and send information (s_packets)\n2)N-servers could connect and get this information (yes, our external server will connect to this program to receive data sent by the clients)\n3) The servers that will connect to my program will not send anything, just receive data sent by clients.</p>\n\n<p>Now the problem: I'm getting random errors in function malloc(). This is what I'm doing:\nIn the main function, I create all mutex that I'll need and start 2 threads: waitNewClients and waitNewServers. \nwaitNewClients will wait (accept) for client connection and when client is connected, start a thread called handle_connection. waitNewServers will do the same, but when server is connected, new thread called server_handle in created.</p>\n\n<p>Globally, I have this:</p>\n\n<pre><code>     struct s_packets {\n        char callsign[30];\n        char c_key[33];\n        struct s_packets *next;\n    };\n\n    struct s_servers {\n        int8_t               active;\n        char                ip[50];\n        int32_t             port;\n        pthread_t           s_thread;\n        int                 *socket;\n        struct s_packets    *packets;\n    };\nstruct s_servers serverList[MAX_SERVERS];\n</code></pre>\n\n<p>And this is the function to create a new client, when it connects:</p>\n\n<pre><code>void *waitNewClients(void *arg) {\n\n    int socket_desc, client_sock, c, *new_sock;\n    struct sockaddr_in server, client;\n    signal(SIGCHLD, SIG_IGN);\n    //Create socket\n    socket_desc = socket(AF_INET, SOCK_STREAM, 0);\n    if (socket_desc == -1) {\n        printf(\"Could not create socket\");\n    }\n    puts(\"Socket created\");\n\n    //Prepare the sockaddr_in structure\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons(30008);\n\n    //Bind\n    if (bind(socket_desc, (struct sockaddr *) &amp;server, sizeof (server)) &lt; 0) {\n        perror(\"bind failed. Error\");\n        exit(1);\n    }\n    puts(\"bind done\");\n\n    //Listen\n    listen(socket_desc, 3);\n\n    //Accept and incoming connection\n    puts(\"Waiting for incoming connections...\");\n    c = sizeof (struct sockaddr_in);\n\n\n    while ((client_sock = accept(socket_desc, (struct sockaddr *) &amp;client, (socklen_t*) &amp; c))) {\n\n        pthread_t thread_id;\n        new_sock = (int *) malloc(1);\n        *new_sock = client_sock;\n\n        // puts(\"Connection accepted\");\n        printf(\"New connection , socket fd is %d , ip is : %s , port : %d \\n\", client_sock, inet_ntoa(client.sin_addr), ntohs(client.sin_port));\n        enable_keepalive(client_sock);\n\n        if (pthread_create(&amp;thread_id, NULL, connection_handler, (void*) new_sock) &lt; 0) {\n            perror(\"could not create thread\");\n            exit(1);\n        }\n\n        //Now join the thread , so that we dont terminate before the thread\n        // pthread_join(thread_id, NULL);\n        puts(\"Handler assigned\");\n    }\n\n    if (client_sock &lt; 0) {\n        perror(\"accept failed\");\n        exit(1);\n    }\n\n    return NULL;\n\n}\n</code></pre>\n\n<p>Now, in the connection_handle, code is:</p>\n\n<pre><code>void *connection_handler(void *socket_desc) {\n    //Get the socket descriptor\n    int sock = *(int*) socket_desc;\n    size_t buf_idx = 0;\n    char buf[BUFFLEN] = {0};\n    int read_size;\n    static uint64_t next_update;\n    uint64_t now = mstime();\n    int timeout = 0;\n    int abort = 0;\n    char temp_char;\n    char * s_key = malloc(33);\n    short *c_key_validated = malloc(2);\n    char * c_serial = malloc(30);\n    int32_t *c_version = 0;\n\n\n    *c_key_validated = 0;\n    next_update = now + 1000;\n    signal(SIGCHLD, SIG_IGN);\n\n    pthread_mutex_lock(&amp;m_client_count);\n    client_count++;\n    pthread_mutex_unlock(&amp;m_client_count);\n\n    airnav_log_level(9, \"[client_socket] Socket value: %d\\n\", sock);\n\n    // Initial com\n    while (!abort) {\n\n        read_size = recv(sock, &amp;temp_char, 1, MSG_PEEK);\n\n        if (read_size &gt; 0) { // The size os initial com packet is 41            \n\n            if (buf_idx &lt; BUFFLEN &amp;&amp; (read_size = recv(sock, &amp;temp_char, 1, 0) &gt; 0)) {\n\n                if (temp_char == '\\n') {                    \n                    procPacket(buf, socket_desc, s_key, (int32_t*) c_version, c_key_validated, c_serial); // Proccess the package                                        \n                    memset(&amp;buf[0], 0, sizeof (buf)); // Clear the buffer\n                    buf_idx = 0;\n                    temp_char = 0;\n                } else {\n                    buf[buf_idx] = temp_char;\n                    buf_idx++;\n                    temp_char = 0;\n                }\n\n                timeout = 0;\n            } else {\n                airnav_log_level(6, \"[client_socket] Buffer Cheio!\\n\");\n            }\n\n        } else {\n\n            usleep(10000);\n            now = mstime();\n            if (now &gt;= next_update) {\n                next_update = now + 1000;\n                timeout++;\n                airnav_log_level(6, \"[Key: %s] Timeout...%d\\n\", s_key, timeout);\n                //airnav_log_level(9,\"[client_socket] Socket value (timeout): %d\\n\",sock);\n            }\n\n            if (timeout &gt;= CLIENT_TIMEOUT) {\n                abort = 1;\n            }\n\n        }\n\n\n    }\n\n    pthread_mutex_lock(&amp;m_client_count);\n    client_count--;\n    pthread_mutex_unlock(&amp;m_client_count);\n    airnav_log(\"Client disconnected\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>and in the end of procPacket, this is what I do:</p>\n\n<pre><code>pthread_mutex_lock(&amp;m_data_packet_count);\n        data_packet_count++;\n        pthread_mutex_unlock(&amp;m_data_packet_count);\n\n        // Only save packet if key is validated\n        if (*key_validated == 1) {\n\n            // For every server listening\n            struct s_packets *s1;            \n            for (int sc = 0; sc &lt; MAX_SERVERS; sc++) {\n\n                // Is this server active?\n                if (serverList[sc].active == 1) { // Yes, then queue msg\n                    airnav_log_level(7, \"Servidor %d ativo! Adicionando msg...\\n\", sc);\n                    s1 = malloc(sizeof (struct s_packets));\n                    strcpy(s1-&gt;callsign, p_callsign);\n                    //strcpy(s1-&gt;c_key, c_key);                    \n                    s1-&gt;next = serverList[sc].packets;\n                    serverList[sc].packets = s1;\n\n                } else {\n                    airnav_log_level(7, \"Servidor %d offline!\\n\", sc);\n                }\n\n\n            }            \n\n\n        }\n</code></pre>\n\n<p>On the server handle function, I do almost the same of connection_handle, but a little different :)\nWhat I do is: \n1) lock mutex of serverlist;\n2) Copy pointer of serverList packets to local pointer\n3) Clear pointer of serverList packets \n4) unclock mutex\n5) Send packets of local pointer to server connected in this handle.</p>\n\n<p>This is working fine, but if I connect/disconnect 3~4 server very fast, my program simples crash with error in malloc of 'procPackets'!</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7ffff3192700 (LWP 23449)]\n_int_malloc (av=av@entry=0x7fffe4000020, bytes=bytes@entry=72) at malloc.c:3367\n3367        while ((pp = catomic_compare_and_exchange_val_acq (fb, victim-&gt;fd, victim))\n(gdb) bt\n#0  _int_malloc (av=av@entry=0x7fffe4000020, bytes=bytes@entry=72) at malloc.c:3367\n#1  0x00007ffff6567fbc in __GI___libc_malloc (bytes=72) at malloc.c:2893\n#2  0x00000000004033b8 in procPacket (packet=packet@entry=0x7ffff3190de0 \"\", socket_=socket_@entry=0x7fffec0008c0, c_key=c_key@entry=0x7fffe40008c0 \"5c1d413807f961f5e331d03be5201c0e\",\n    c_version=c_version@entry=0x0, key_validated=key_validated@entry=0x7fffe40008f0, sn=sn@entry=0x7fffe4000910 \"\") at rbrpiserver.c:937\n#3  0x0000000000403676 in connection_handler (socket_desc=0x7fffec0008c0) at rbrpiserver.c:668\n#4  0x00007ffff7bc8dc5 in start_thread (arg=0x7ffff3192700) at pthread_create.c:308\n#5  0x00007ffff65df73d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:113\n</code></pre>\n\n<p>Wha am I missing? :(\nI can't see what could be wrong here.\nThis is part of code from server_handle:</p>\n\n<pre><code>// Let's clear the incoming buffer, if exists\n        *read_size = recv(*sock, temp_char, 4096, MSG_DONTWAIT);\n        airnav_log_level(5, \"READ-SIZE for slot %d: %d, sock value: %d, sock address: %p\\n\", *slot, *read_size,*sock,sock);\n        if (*read_size != 0) { // Connection still active\n            *timeout = 0;\n\n            *cou = 0;\n            pthread_mutex_lock(&amp;m_server_list);\n            local_list = serverList[*slot].packets;\n            serverList[*slot].packets = NULL;\n            //pthread_mutex_unlock(&amp;m_server_list);\n\n            p_tmp1 = local_list;\n            while (p_tmp1 != NULL) {\n\n                if (*lost == 0) {\n                    if (sendServerSocketPacket(socket_desc, p_tmp1) == -1) {\n                        *lost = 1;\n                        *abort = 1;\n                    }\n                } else {\n                    *abort = 1;\n                }\n                p_tmp2 = p_tmp1;\n                p_tmp1 = p_tmp1-&gt;next;\n                free(p_tmp2);\n                p_tmp2 = NULL;\n            }\n            pthread_mutex_unlock(&amp;m_server_list);\n\n            if (p_tmp1 != NULL) {\n                free(p_tmp1);\n                p_tmp1 = NULL;\n            }\n            local_list = NULL;\n            sleep(SERVER_SOCKET_SEND_TIME); // Replace with function that send data to the client\n            *now = mstime();\n        } else {\n\n            sleep(1);\n            *now = mstime();\n            if (*now &gt;= *next_update) {\n                *next_update = *now + 1000;\n                *timeout = *timeout + 1;\n                airnav_log_level(5, \"Timeout [server %d]...%d\\n\", *slot, *timeout);\n            }\n\n            if (*timeout &gt;= SERVER_TIMEOUT) {\n                *abort = 1;\n                airnav_log_level(5, \"[server %d] Timeout esgotado! Saindo...\\n\", *slot);\n            }\n\n        }\n</code></pre>\n\n<p><strong>UPDATE:</strong> \nBTW, i found the problem. In the server_handle, in the end of connection/function, I was clearing the socket of serverlist socket......then, when a new 'server-client' sockets connect and I try to re-use this item of list, the socket isn't created anymore! When client connect, I don't malloc space for this socket in serverList.socket, since it should be already allocated......but I was 'freeyng(?)' this socket when 'server-client' disconnect....dumb! The only strange thing is that error is nothing related to this function. I have removed the cleaning code from server_handle and it's working perfectly now!</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 3, "last_activity_date": 1490798373, "creation_date": 1490798373, "answer_id": 43096717, "question_id": 43096641, "link": "https://stackoverflow.com/questions/43096641/program-that-verifies-if-a-word-is-in-a-file-and-prints-the-number-of-the-line-a/43096717#43096717", "title": "Program that verifies if a word is in a file and prints the number of the line and the line itself", "body": "<p>You've got this backwards</p>\n\n<pre><code>verify = strstr(word, line);\n</code></pre>\n\n<p>you're searching for line in word when it should be</p>\n\n<pre><code>verify = strstr(line, word);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6718012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43096717, "answer_count": 1, "score": 1, "last_activity_date": 1490798373, "creation_date": 1490798207, "question_id": 43096641, "link": "https://stackoverflow.com/questions/43096641/program-that-verifies-if-a-word-is-in-a-file-and-prints-the-number-of-the-line-a", "title": "Program that verifies if a word is in a file and prints the number of the line and the line itself", "body": "<p>As the title indicates I'm trying to make a program that verifies if a word is in a file and prints the number of the line and the line itself. The exercise tells us to use the function strstr. </p>\n\n<p>Here is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define DIM_WORDS 1000\n\nint main(void)\n{\n    char word[DIM_WORDS]={'\\0'};\n    char textname[DIM_WORDS]={'\\0'};\n    char stringtoread[DIM_WORDS]={'\\0'};\n    char line[DIM_WORDS]={'\\0'};\n    char* verify;\n    FILE* fp=NULL;\n    int ret=0 , num=0;\n\n    do{\n        printf(\"Introduza o nome do ficheiro e a palavra a procurar\\n\");\n        // L\u00ea ambas as informa\u00e7\u00f5es e guarda-as numa string\n        fgets(stringtoread, DIM_WORDS, stdin);\n        // Separa as duas informa\u00e7\u00f5es em 2 strings\n        ret=sscanf(stringtoread, \"%s %s\", textname, word);\n    }while(ret!=2);\n\n\n    fp=fopen(textname, \"r\");\n\n    if(fp==NULL)\n    {\n        printf(\"Error: That file doesn't exist or could not be open\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    while(fgets(line, sizeof(line), fp))\n    {\n\n        verify = strstr(word, line);\n\n        if(verify!=NULL)\n        {\n            printf(\"The word was encountered in line %d\\n\", num);\n            printf(\"%s\", line);\n        }\n\n        num++;\n\n    }\n\n\n    fclose(fp);\n\n    return EXIT_SUCCESS;\n\n}#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define DIM_WORDS 1000\n\nint main(void)\n{\n    char word[DIM_WORDS]={'\\0'};\n    char textname[DIM_WORDS]={'\\0'};\n    char stringtoread[DIM_WORDS]={'\\0'};\n    char line[DIM_WORDS]={'\\0'};\n    char* verify;\n    FILE* fp=NULL;\n    int ret=0 , num=0;\n\n    do{\n        printf(\"Introduza o nome do ficheiro e a palavra a procurar\\n\");\n        fgets(stringtoread, DIM_WORDS, stdin);\n        ret=sscanf(stringtoread, \"%s %s\", textname, word);\n    }while(ret!=2);\n\n\n    fp=fopen(textname, \"r\");\n\n    if(fp==NULL)\n    {\n        printf(\"Error: That file doesn't exist or could not be open\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    while(fgets(line, sizeof(line), fp))\n    {\n\n        verify = strstr(word, line);\n\n        if(verify!=NULL)\n        {\n            printf(\"The word was encountered in line %d\\n\", num);\n            printf(\"%s\", line);\n        }\n\n        num++;\n\n    }\n\n\n    fclose(fp);\n\n    return EXIT_SUCCESS;\n\n}\n</code></pre>\n\n<p>I tried my program with a file text.txt and trying to find the word file:</p>\n\n<p>A text file (sometimes spelled \"textfile\": an old alternative name is \"flatfile\") is a kind of computer file that is structured as a sequence of lines of electronic text. </p>\n\n<p>A text file exists within a computer file system. </p>\n\n<p>The end of a text file is often denoted by placing one or more special characters, known as an end-of-file marker, after the last line in a text file. </p>\n\n<p>Such markers were required under the CP/M and MS-DOS operating systems. </p>\n\n<p>On modern operating systems such as Windows and Unix-like systems, text files do not contain any special EOF character.</p>\n\n<p>\"Text file\" refers to a type of container, while plain text refers to a type of content. Text files can contain plain text, but they are not limited to such.</p>\n\n<p>At a generic level of description, there are two kinds of computer files: text files and binary files.[1]</p>\n\n<hr>\n\n<p>Problem is my program is not printing anything. \nI think the problem might be here:</p>\n\n<pre><code>    while(fgets(line, sizeof(line), fp))\n    {\n\n        verify = strstr(word, line);\n\n        if(verify!=NULL)\n        {\n            printf(\"The word was encountered in line %d\\n\", num);\n            printf(\"%s\", line);\n        }\n\n        num++;\n\n    }\n</code></pre>\n\n<p>Since if I remove most of the code just to print all the lines of the file it prints them:</p>\n\n<pre><code>    while(fgets(line, sizeof(line), fp)\n        printf(\"%s\", line);\n</code></pre>\n\n<p>Can someone help me to fix this? Thanks! </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1490798181, "post_id": 43096554, "comment_id": 73274539, "body": "You have a very bad bug lurking in your code: You tell <code>fgets</code> it can read a total of <code>2047</code> characters from <code>stdin</code>, but the array it should write those characters (and the string terminator) to is only <code>100</code> characters long."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1490798265, "post_id": 43096554, "comment_id": 73274608, "body": "instead of <code>malloc</code>+<code>strcpy</code> you can use <a href=\"https://linux.die.net/man/3/strdup\" rel=\"nofollow noreferrer\">strdup</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1490798456, "post_id": 43096554, "comment_id": 73274767, "body": "You are calling tempStr = strtok(NULL,delimilator); and without checking its returned value: so you can dereference NULL pointer on last iteration."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490798702, "post_id": 43096554, "comment_id": 73274985, "body": "from a functional point of view, if your line is longer than the size specified to <code>fgets</code>, you&#39;d end up with it reading the second (third, fourth, etc...) parts of the line as if they were fresh new lines too."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490799125, "post_id": 43096554, "comment_id": 73275355, "body": "@Someprogrammerdude not sure how that contradicts what I wrote? if the line length &gt; size -1 then you end up with it split into multiple chunks, each of which would be treated as if they were separate lines."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490799205, "post_id": 43096554, "comment_id": 73275423, "body": "@ChrisTurner Sorry, I misread your comment."}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 1, "creation_date": 1490799328, "post_id": 43096554, "comment_id": 73275528, "body": "My god add spaces. <code>for(b = 0; tempStr != NULL; b++) {</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7470173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0f76694a02dbf0f5c1c20457ac34f7a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Tw", "link": "https://stackoverflow.com/users/7470173/j-tw"}, "edited": false, "score": 0, "creation_date": 1490801375, "post_id": 43096861, "comment_id": 73277148, "body": "i guess the problem maybe at the end of fileBuf, that is &#39;\\n&#39;. It cause the trouble. Anyway, Your answer worked, thankyou"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1490799220, "last_edit_date": 1490799220, "creation_date": 1490798775, "answer_id": 43096861, "question_id": 43096554, "link": "https://stackoverflow.com/questions/43096554/c-read-file-cut-into-2d-string-array/43096861#43096861", "title": "C read file &amp; cut into 2D string array", "body": "<p>You are using <code>strok</code> returned value before to check if it is  <code>!= NULL</code>. On last iteration it will invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behavior</a></p>\n\n<p>Your loop could be like</p>\n\n<pre><code>while (fgets(fileBuf, sizeof(fileBuf), stdin) != NULL)\n{\n    tempStr = strtok(fileBuf,delimilator);\n    pList[a] = malloc( strlen(tempStr) + 1);\n    strcpy(pList[a], tempStr);\n\n    tempStr = strtok(NULL,delimilator);\n\n    b=0;\n\n    while (tempStr != NULL)\n    {\n        eqList[a][b] = malloc( strlen(tempStr) + 1);\n        strcpy(eqList[a][b], tempStr);  \n\n        tempStr = strtok(NULL,delimilator);\n\n        b++;\n    }\n\n    a++;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7470173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0f76694a02dbf0f5c1c20457ac34f7a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Tw", "link": "https://stackoverflow.com/users/7470173/j-tw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490799220, "creation_date": 1490797980, "last_edit_date": 1490798096, "question_id": 43096554, "link": "https://stackoverflow.com/questions/43096554/c-read-file-cut-into-2d-string-array", "title": "C read file &amp; cut into 2D string array", "body": "<p>I want to read in a .dat file and cut those information into 2 arrays: \npList is product list\neqList is equipment list</p>\n\n<p>and the format of the file is as below:</p>\n\n<pre>\nproductName equipment_a equipment_b\nproductName equipment_c equipment_d equipment_e\nproductName equipment_b equipment_d equipment_f\nproductName equipment_c\nproductName equipment_a equipment_f\n</pre>\n\n<p>What is the problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\n#define lineLength 2048\n\nint main()\n{\n    int a=0,b=0,c=0;\n    char fileBuf[100], *pList[100], *eqList[100][100], *tempStr, delimilator[2] = \" \";\n\n    while ( fgets(fileBuf,lineLength,stdin) != NULL){\n        tempStr = strtok(fileBuf,delimilator);\n        pList[a] = malloc( strlen(tempStr) + 1);\n        strcpy(pList[a], tempStr);\n\n        for(b=0;tempStr != NULL;b++){\n            tempStr = strtok(NULL,delimilator);\n            eqList[a][b] = malloc( strlen(tempStr) + 1); //problem here\n            strcpy(eqList[a][b], tempStr);               //problem here\n        }\n        a++;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 4, "creation_date": 1490797643, "post_id": 43096369, "comment_id": 73274049, "body": "<code>string s = get_string;</code> ----&gt; <code>string s = get_string();</code>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490797699, "post_id": 43096369, "comment_id": 73274100, "body": "And, you don&#39;t seem to include <code>&lt;string&gt;</code> (unless it&#39;s included indirectly). <code>&lt;string.h&gt;</code> is a C header, and not the same as <code>&lt;string&gt;</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490797818, "post_id": 43096369, "comment_id": 73274203, "body": "@AlgirdasPreid\u017eius The CS50 course was designed by some amateur who thought <code>typedef char* string;</code> was a brilliant idea. Turns out CS50 is just yet another crappy internet tutorial like the rest of them to avoid."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1490797863, "post_id": 43096369, "comment_id": 73274244, "body": "<code>toupper(s[i++])</code> should be <code>toupper(s[i])</code>. You already have i++ in the loop."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490797984, "post_id": 43096369, "comment_id": 73274350, "body": "@Lundin Oh, I see.. Somehow, my brain automatically goes to C++ constructs, when the question is tagged with C++ - failing to consider other alternatives (while simultaneously failing to see <i>any</i> C++ constructs being used) :/"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490798165, "post_id": 43096369, "comment_id": 73274530, "body": "@AlgirdasPreid\u017eius It is a perfectly understandable mistake to do, given that <code>string</code> is such an incredibly well-known C++ class, known by every programmer in the world except for the teachers at Harvard uni..."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1490800278, "post_id": 43096369, "comment_id": 73276341, "body": "Can I recommend that we remove the <code>c</code> tag and retain the <code>cs50</code> tag?  A <code>c</code> programmer (like me) has no idea what a <code>string</code> type is - and would likely replace the <code>c</code> tag with <code>c++</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7786373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141e8758cb3f5cc5f4b55c68f7713a66?s=128&d=identicon&r=PG&f=1", "display_name": "Quirine", "link": "https://stackoverflow.com/users/7786373/quirine"}, "edited": false, "score": 0, "creation_date": 1490797920, "post_id": 43096426, "comment_id": 73274297, "body": "Thank you soo much!"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 1, "last_activity_date": 1490797701, "creation_date": 1490797701, "answer_id": 43096426, "question_id": 43096369, "link": "https://stackoverflow.com/questions/43096369/how-can-get-string-error-get-avoided/43096426#43096426", "title": "How can get_string error get avoided?", "body": "<p>Although you have not shown us <code>cs50.h</code>, we can guess that <code>get_string</code> is a function, so this:</p>\n\n<pre><code>string s = get_string;    \n</code></pre>\n\n<p>Needs to be:</p>\n\n<pre><code>string s = get_string();    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1490797742, "creation_date": 1490797742, "answer_id": 43096443, "question_id": 43096369, "link": "https://stackoverflow.com/questions/43096369/how-can-get-string-error-get-avoided/43096443#43096443", "title": "How can get_string error get avoided?", "body": "<p><a href=\"https://reference.cs50.net/cs50/get_string\" rel=\"nofollow noreferrer\">get_string</a> is a function that takes no parameters:</p>\n\n<pre><code>string get_string(void);\n</code></pre>\n\n<p>so</p>\n\n<pre><code>string s = get_string;\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>string s = get_string();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7786373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141e8758cb3f5cc5f4b55c68f7713a66?s=128&d=identicon&r=PG&f=1", "display_name": "Quirine", "link": "https://stackoverflow.com/users/7786373/quirine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "closed_date": 1490798421, "answer_count": 2, "score": 0, "last_activity_date": 1490797742, "creation_date": 1490797567, "last_edit_date": 1490797687, "question_id": 43096369, "link": "https://stackoverflow.com/questions/43096369/how-can-get-string-error-get-avoided", "closed_reason": "Not suitable for this site", "title": "How can get_string error get avoided?", "body": "<p>I'm doing the CS50 course, pset2 initials. The only error I get is a problem with get_string: it would have an 'incompatible pointer types initializing 'string' with an expression of type 'string (void)'. I really don't understand what I am doing wrong, because my code for get_string worked for the last problem set.. Here's my code: </p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void)\n{\n    // ask user for input \n    printf(\"What are your names?\");\n    string s = get_string;    \n\n    // print first letter from string &amp; capitalize\n    printf(\"%c\", toupper(s[0]));\n\n\n    //iterate over characters in current string + start loop\n    for (int i = 0; i &lt; strlen(s); i++)\n    {\n        //find space character\n        if (s[i] == ' ')\n        {    \n            // print character next to space &amp; capitalize\n            printf(\"%c\", toupper(s[i++]));\n        }\n    // new rule \n    printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "cortex-m3", "cortex-m", "cmsis"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490795017, "post_id": 43095219, "comment_id": 73271746, "body": "What is <code>IRQn_Type</code>?"}, {"owner": {"reputation": 1473, "user_id": 6517894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0511b1daef16fed51233f70c4370dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Realtime Rik", "link": "https://stackoverflow.com/users/6517894/realtime-rik"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490795661, "post_id": 43095219, "comment_id": 73272298, "body": "It is a enum type with values ranging from -128 to 103"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 3, "creation_date": 1490795852, "post_id": 43095219, "comment_id": 73272487, "body": "the first cast to int32_t sign extends the enum to 32bits and the second cast makes it unsigned so that the &gt;&gt; 5UL will be a logical shift."}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1490796792, "post_id": 43095219, "comment_id": 73273244, "body": "There are several options, where double casting is used:  * They are trying to store the data in two halves. one unsigned + one signed.   * Not knowing the type of value, you can&#39;t say, but in general, casting through an unsigned type guarantees a positive value in the long (unless the positive value won&#39;t fit). The idea is to get the value unsigned, to avoid sign extension for hex and octal representation."}], "answers": [{"comments": [{"owner": {"reputation": 1473, "user_id": 6517894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0511b1daef16fed51233f70c4370dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Realtime Rik", "link": "https://stackoverflow.com/users/6517894/realtime-rik"}, "edited": false, "score": 0, "creation_date": 1490797930, "post_id": 43096061, "comment_id": 73274307, "body": "Yes, it obvious what it&#39;s doing now I am thinking about it properly."}, {"owner": {"reputation": 1519, "user_id": 203719, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c3a9d5c4c1e6526058b191733a0731a?s=128&d=identicon&r=PG", "display_name": "Ant", "link": "https://stackoverflow.com/users/203719/ant"}, "edited": false, "score": 1, "creation_date": 1490888162, "post_id": 43096061, "comment_id": 73323856, "body": "Now you are thinking about it properly or now you have been told the answer?"}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": true, "score": 4, "last_activity_date": 1490808089, "last_edit_date": 1490808089, "creation_date": 1490796773, "answer_id": 43096061, "question_id": 43095219, "link": "https://stackoverflow.com/questions/43095219/on-core-cm4-h-why-is-there-casting-like-uint32-tint32-tirqn/43096061#43096061", "title": "On core_cm4.h why is there casting like ((uint32_t)(int32_t)IRQn)?", "body": "<p>Since CM4 software implements negative interrupt sources for core, you have to cast value first to 32bit signed integer and later to unsigned 32bit to make proper right shift with padding zeros on the left side of number.</p>\n\n<p>CM4 uses -15 to -1 as CM4-Core sources and from 0 to next as vendor specific sources.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506602159, "post_id": 46469077, "comment_id": 79893468, "body": "I believe this is the correct answer. Bluntly: whoever wrote the code didn&#39;t quite know what they were doing."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506602325, "post_id": 46469077, "comment_id": 79893579, "body": "@Lundin in fact to both of you. Even if there is <code>(int32_t)</code> cast, doesn&#39;t mean it is wrong!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506603454, "post_id": 46469077, "comment_id": 79894458, "body": "@tilz0R I&#39;m not saying it&#39;s <i>wrong</i> per se, just that it&#39;s both redundant and confusing as evinced by the fact that someone went and posted this question because they didn&#39;t understand why someone would do that"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 1, "creation_date": 1506603917, "post_id": 46469077, "comment_id": 79894813, "body": "@tilz0R I looked at the code in Github, this is definitely another MISRA-C project gone bad, I see such projects quite often so I know what to look for. There is no rationale for the casts, it was just someone who didn&#39;t know MISRA-C who tried to silence their static analyser. I posted an answer explaining."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506604046, "post_id": 46469077, "comment_id": 79894908, "body": "@Lundin agree, but. Can you name me 3 professional misrac libs?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506604291, "post_id": 46469077, "comment_id": 79895077, "body": "@tilz0R It is definitely nice that they write the code with MISRA-C in mind, it makes things so much easier for users of the lib that need MISRA-C compliance. The code is probably functionally correct... but it is <a href=\"https://github.com/ARM-software/CMSIS/blob/master/CMSIS/Include/core_cm4.h\" rel=\"nofollow noreferrer\">incredibly ugly code!</a> I would guess they wrote the code first, then added MISRA compliance later, why it turned out like it did."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1506601384, "creation_date": 1506601384, "answer_id": 46469077, "question_id": 43095219, "link": "https://stackoverflow.com/questions/43095219/on-core-cm4-h-why-is-there-casting-like-uint32-tint32-tirqn/46469077#46469077", "title": "On core_cm4.h why is there casting like ((uint32_t)(int32_t)IRQn)?", "body": "<p>Assuming <code>IRQn</code> is an integer (any signed integer type) in the range you say, then <code>(uint32_t)(int32_t)IRQn</code> is exactly the same as <code>(uint32_t)IRQn</code>.</p>\n\n<p>The author of the code possibly didn't understand C type conversion rules; which are based on values, not representations. Converting <code>-3</code>, for example, to <code>uint32_t</code> always gives <code>UINT32_MAX - 2</code> regardless of which data type the <code>-3</code> was. It's the value of \"negative 3\" that matters.</p>\n\n<p>(The other answer explains the difference between using a cast and no cast at all).</p>\n"}, {"comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506604194, "post_id": 46469893, "comment_id": 79895003, "body": "Additional cast is more redundant than hiding warning."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506604507, "post_id": 46469893, "comment_id": 79895244, "body": "@tilz0R The cast to uint32_t is definitely needed, as <code>IRQn</code> could be negative. Right-shifting a negative value invokes implementation-defined behavior - they might end up with arithmetic shifts which would introduce a severe bug on some systems. This is ultimately what the MISRA-C rule is trying to protect from."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506604910, "post_id": 46469893, "comment_id": 79895510, "body": "The only problem is int32 cast. And very fishy?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605060, "post_id": 46469893, "comment_id": 79895606, "body": "@tilz0R Yeah the <code>int32_t</code> cast but also general readbility. The vast amount of parenthesis and the &quot;everything on one line&quot; coding style makes the code very hard to read &amp; dangerous to maintain. They would benefit from splitting the big expression up in several - the compiler will produce the same machine code in the end anyway."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605218, "post_id": 46469893, "comment_id": 79895742, "body": "Are you trying to say that your oneline modification without spaces is more readable?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605336, "post_id": 46469893, "comment_id": 79895833, "body": "@tilz0R No, it is quite horrible too. Hence the 3 line snippet in the end."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605481, "post_id": 46469893, "comment_id": 79895949, "body": "Ok. I think that you are a little overreacting here. Removing int32 cast from original would be best and thats all :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605621, "post_id": 46469893, "comment_id": 79896053, "body": "@tilz0R I&#39;m not overreacting, have you seen the <a href=\"https://github.com/ARM-software/CMSIS/blob/master/CMSIS/Include/core_cm4.h\" rel=\"nofollow noreferrer\">full source</a>? It&#39;s unreadable garbage."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605656, "post_id": 46469893, "comment_id": 79896083, "body": "Im using it daily :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605743, "post_id": 46469893, "comment_id": 79896144, "body": "@tilz0R Probably I am too, or some flavour of CMSIS at least. Just because some code works doesn&#39;t mean it is well-written."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1506605835, "post_id": 46469893, "comment_id": 79896209, "body": "I do agree here."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1506604925, "last_edit_date": 1506604925, "creation_date": 1506603779, "answer_id": 46469893, "question_id": 43095219, "link": "https://stackoverflow.com/questions/43095219/on-core-cm4-h-why-is-there-casting-like-uint32-tint32-tirqn/46469893#46469893", "title": "On core_cm4.h why is there casting like ((uint32_t)(int32_t)IRQn)?", "body": "<p>By looking at that snippet, it is clear that whoever wrote it was confused over how implicit type promotion rules work. In addition, the <code>&gt;&gt; 5UL</code> looks very fishy and when I see that I immediately suspect that this code base suffers from a poor understanding of MISRA-C; possibly they are using a bad static analyser which spits out false positives.</p>\n\n<p>A visit at Github proves my suspicion to be correct, there's comments stating that the intention is to follow MISRA-C:2004.</p>\n\n<p>MISRA-C demands that no dangerous, implicit type promotions may occur. The casts are some failed attempts to silence a static analyser, without an understanding why the tool gave those warnings.</p>\n\n<p>Correct, MISRA-C (2004 and 2012) compliant code would be this:</p>\n\n<pre><code>NVIC-&gt;ISER[((uint32_t)IRQn&gt;&gt;5UL)] = (1UL &lt;&lt; ((uint32_t)IRQn &amp; 0x1FUL));\n</code></pre>\n\n<p>(MISRA-C has a requirement that complex sub-expressions must use parenthesis despite what operator precedence there is.)</p>\n\n<p>This code is still messy, so it should preferably be rewritten for readability, into something that will produce exactly the same machine code:</p>\n\n<pre><code>uint32_t ISER_index = ((uint32_t)IRQn &gt;&gt; 5UL);\nuint32_t shift_n    = ((uint32_t)IRQn &amp; 0x1FUL);\nNVIC-&gt;ISER[ISER_index] = (1UL &lt;&lt; shift_n);\n</code></pre>\n\n<hr>\n\n<p>Side note:<br>\nMISRA-C:2004 demanded that the result of the shift expression should be immediately cast to the \"underlying type\" (MISRA term). Thus one could also have written <code>(IRQn_Type)(IRQn &gt;&gt; 5UL)</code> and it would still be MISRA-C:2004 compliant.</p>\n\n<p>However, there is nothing in MISRA preventing you to adding your own cast to a different type, such as <code>uint32_t</code>, before the shift. This is a better thing to do, since it eliminates the implicit promotion entirely.</p>\n\n<hr>\n\n<p>For those who are confused about how the implicit type promotions work in C, see <a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">Implicit type promotion rules</a>.</p>\n"}], "owner": {"reputation": 1473, "user_id": 6517894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0511b1daef16fed51233f70c4370dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Realtime Rik", "link": "https://stackoverflow.com/users/6517894/realtime-rik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 1, "accepted_answer_id": 43096061, "answer_count": 3, "score": 3, "last_activity_date": 1506604925, "creation_date": 1490794834, "question_id": 43095219, "link": "https://stackoverflow.com/questions/43095219/on-core-cm4-h-why-is-there-casting-like-uint32-tint32-tirqn", "title": "On core_cm4.h why is there casting like ((uint32_t)(int32_t)IRQn)?", "body": "<p>In the following code from core_cm4.h why is there a double cast <code>((uint32_t)(int32_t)IRQn)</code>?</p>\n\n<p>For example in the following function:</p>\n\n<pre><code>__STATIC_INLINE void NVIC_EnableIRQ(IRQn_Type IRQn)\n{\n  NVIC-&gt;ISER[(((uint32_t)(int32_t)IRQn) &gt;&gt; 5UL)] = (uint32_t)(1UL &lt;&lt; (((uint32_t)(int32_t)IRQn) &amp; 0x1FUL));\n}\n</code></pre>\n\n<p>What is the purpose of this?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490794785, "post_id": 43094838, "comment_id": 73271533, "body": "You can store <code>int</code> values indirectly <i>via</i> pointers into <code>int</code> objects, which is what I suppose you want to do, but it&#39;s important to understand that that&#39;s quite a different thing from storing anything <i>in</i> a pointer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490795069, "post_id": 43094838, "comment_id": 73271801, "body": "The school shouldn&#39;t teach you crap like this. Ignore the assignment. Feel free to provide a link to this site, I&#39;ll be happy to call your teacher incompetent to their face. As a rule of thumb, whenever your program has more than two levels of indirection, it is a certain indication of poor program design. This is commonly known as &quot;tree star programming&quot; which is a derogatory term used for &quot;clueless programmers who don&#39;t know what they are doing and make their programs needlessly complicated&quot;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490795088, "post_id": 43094838, "comment_id": 73271819, "body": "As for allocating arrays in this manner to emulate multi-dimensional arrays, it is also bad and incorrect practice. See <a href=\"http://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\">Correctly allocating multi-dimensional arrays</a>"}, {"owner": {"reputation": 79, "user_id": 7785056, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/305691bbd92ad2c11ddb47d7c67ac056?s=128&d=identicon&r=PG&f=1", "display_name": "AmitBL", "link": "https://stackoverflow.com/users/7785056/amitbl"}, "edited": false, "score": 0, "creation_date": 1490795280, "post_id": 43094838, "comment_id": 73271973, "body": "I hate three stars, but Teacher is making us do it so I can&#39;t change it."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490795372, "post_id": 43094838, "comment_id": 73272042, "body": "@Lundin is it a multi-dimensional array or merely an array of pointers that is passed in by reference?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490795627, "post_id": 43094838, "comment_id": 73272262, "body": "@ChrisTurner It is an array of pointers, see the link I posted."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490795652, "post_id": 43094838, "comment_id": 73272286, "body": "Seems we need a &quot;bad-teacher&quot; tag."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490795665, "post_id": 43094838, "comment_id": 73272307, "body": "@ChrisTurner, it is in no way a multi-dimensional array or a pointer to one.  It may be intended as a pointer to an array of pointers meant to be used similarly to a 2D array, but that&#39;s a different thing."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1490795994, "post_id": 43094838, "comment_id": 73272612, "body": "@AmitBL, I&#39;m inclined to suspect that you&#39;re missing the point of the assignment.  I infer that you&#39;re supposed to be creating a bunch of pointers into the array, sorting those based on the pointed-to values, and providing a pointer to them back to the program.  In that case, copying the <code>int</code> values is precisely the wrong thing to do."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490796460, "post_id": 43094838, "comment_id": 73273004, "body": "@JohnBollinger that&#39;s basically my reasoning behind my answer"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1490796500, "post_id": 43094838, "comment_id": 73273028, "body": "@Lundin: teaching sometimes includes showing a bad path and explaining why it is bad... We know that three star is normaly the evidence of a design problem, but OP really needs to understand what indirection, allocation, dereference an deallocation mean, because seeing his code he has not fully understood it ;-)"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1490796532, "post_id": 43094838, "comment_id": 73273055, "body": "BTW in C <b>do not cast malloc</b>!"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1490796346, "post_id": 43095291, "comment_id": 73272918, "body": "It is also worth noting that <code>*&amp;arr[i]</code> is equivalent to just <code>arr[i]</code>, so <code>***(pointers+i) = *&amp;arr[i]</code> is even more cleanly expressed as <code>**(pointers[i]) = arr[i]</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490797108, "post_id": 43095291, "comment_id": 73273531, "body": "Could eliminate some unneeded <code>**</code>and <code>()</code> by dropping the cast: <code>*pointers = malloc(size * sizeof(int*));</code> or <code>*pointers = malloc(sizeof *(*pointers) *size);</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490797344, "post_id": 43095291, "comment_id": 73273758, "body": "@chux yes, the cast isn&#39;t needed, but I left it in so to keep the code looking similar to the original"}, {"owner": {"reputation": 79, "user_id": 7785056, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/305691bbd92ad2c11ddb47d7c67ac056?s=128&d=identicon&r=PG&f=1", "display_name": "AmitBL", "link": "https://stackoverflow.com/users/7785056/amitbl"}, "edited": false, "score": 0, "creation_date": 1490906097, "post_id": 43095291, "comment_id": 73334478, "body": "Can anyone explain in more detail the difference between (*pointer)[i] and *pointer[i]?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 79, "user_id": 7785056, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/305691bbd92ad2c11ddb47d7c67ac056?s=128&d=identicon&r=PG&f=1", "display_name": "AmitBL", "link": "https://stackoverflow.com/users/7785056/amitbl"}, "edited": false, "score": 0, "creation_date": 1490950499, "post_id": 43095291, "comment_id": 73350103, "body": "@AmitBL it boils down to operator precedence - <code>[]</code> have higher precedence over <code>*</code> (dereference), so the second way ends up with you getting <code>pointer[i]</code> and then dereferencing it. The first way however, cos of the brackets, means you first do the dereferencing and then get <code>[i]</code>. Which is what you want in this case as <code>pointers</code> in the function is a pointer to your <code>pointers</code> from <code>main</code>."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 3, "last_activity_date": 1490796529, "last_edit_date": 1490796529, "creation_date": 1490794995, "answer_id": 43095291, "question_id": 43094838, "link": "https://stackoverflow.com/questions/43094838/pointers-and-write-access-violation/43095291#43095291", "title": "Pointers and write access violation", "body": "<pre><code>pointers = (int***)malloc(size * sizeof(int**));\n</code></pre>\n\n<p>The above statement is allocating a block of memory and assigning it to <code>pointers</code> which can be used like an array like <code>pointers[0]</code> or like <code>pointers+0</code>. </p>\n\n<p><code>***(pointers+i) = *&amp;arr[i];</code> is the same as <code>**(pointers[i]) = *&amp;arr[i];</code></p>\n\n<p>The problem here is that pointers[i] is an <code>int **</code> and not yet pointing at any location in memory so you can't dereference it once, let alone twice.</p>\n\n<p>If what you're trying to do is create an array of pointers to members of <code>arr</code> then your code should look more like this.</p>\n\n<pre><code>(*pointers) = (int**)malloc(size * sizeof(int*));  \nfor (i = 0; i &lt; size; i++) \n{\n    (*pointers)[i] = &amp;(arr[i]);      \n}\n</code></pre>\n\n<p>And because you want to return <code>pointers</code> to the calling function you pass it in as a pointer and have to de-reference it.</p>\n"}], "owner": {"reputation": 79, "user_id": 7785056, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/305691bbd92ad2c11ddb47d7c67ac056?s=128&d=identicon&r=PG&f=1", "display_name": "AmitBL", "link": "https://stackoverflow.com/users/7785056/amitbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1490796529, "creation_date": 1490793856, "last_edit_date": 1490795489, "question_id": 43094838, "link": "https://stackoverflow.com/questions/43094838/pointers-and-write-access-violation", "title": "Pointers and write access violation", "body": "<p>So I got an assignment in school that includes 3 strix (int ***)\nI need to write some int values into \"pointers\", but I get an error when I attempt to do so.  Here's my code:</p>\n\n<pre><code>void main()\n{\n    unsigned int size, i;\n    int arr[SIZE];\n    int ** pointers;\n    int ascend_flag;\n\n    printf(\"Please enter the number of items:\\n\");\n    scanf(\"%u\", &amp;size);\n    for (i = 0; i &lt; size; i++)\n        scanf(\"%d\", &amp;arr[i]);\n    scanf(\"%d\", &amp;ascend_flag);\n\n    pointerSort(arr, size, (char)ascend_flag, &amp;pointers);\n    printf(\"The sorted array:\\n\"); //Print the sorted array\n    printPointers(pointers, size);\n    free(pointers);\n}\n\nvoid pointerSort(int* arr, unsigned int size, char ascend_flag,\n        int *** pointers)\n{\n    int i, j;\n\n    pointers = (int ***) malloc(size * sizeof(int **));\n    for (i = 0; i &lt; size; i++)\n    {\n        ***(pointers+i) = *&amp;arr[i];\n    }\n\n    mergeSort(*pointers, size);\n\n    if (ascend_flag == 0)\n    {\n        for (i = 0, j = size - 1; i &lt; (size / 2); i++, j--)\n        {\n            swapInArr(**(pointers + i), **(pointers + j));\n        }\n    }\n}\n</code></pre>\n\n<p>The debugger shows that that the error occurs in this loop:</p>\n\n<pre><code> for (i = 0; i &lt; size; i++)\n {\n     ***(pointers+i) = *&amp;arr[i];\n }\n</code></pre>\n\n<p>Specifically, I keep getting this error:</p>\n\n<blockquote>\n  <p>Exception thrown at 0x0127192A in Project3.exe: 0xC0000005: Access\n  violation reading location 0xCDCDCDCD.</p>\n  \n  <p>If there is a handler for this exception, the program may be safely\n  continued</p>\n</blockquote>\n\n<p>I acknowledge that the program is incomplete, and it may be flawed in ways unrelated to the error I'm getting.  Please focus on issues related to the access violation error.</p>\n"}, {"tags": ["c", "memory", "memory-management"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1490792259, "post_id": 43094120, "comment_id": 73269367, "body": "Null pointer deference is <i>undefined behavior</i> (UB), not unintentional modification of a memory location.  Anything may happen including memory corruption."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1490792590, "post_id": 43094120, "comment_id": 73269657, "body": "So memory <i>corruption</i> is unintended modification. Dereferencing a null pointer so is not corruption. But it will get you a run-time error. Uninitialized memory is either intentional (it will get values later), or an error and when used, may cause run-time errors, but in itself is not memory corruption."}, {"owner": {"reputation": 41, "user_id": 7744096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4551cd9d9749a07301b9b8208827cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Haijun", "link": "https://stackoverflow.com/users/7744096/haijun"}, "edited": false, "score": 0, "creation_date": 1490792892, "post_id": 43094120, "comment_id": 73269919, "body": "According to your comments, I think null pointer deference cannot be regarded as memory corruption. Am I right?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490792930, "post_id": 43094120, "comment_id": 73269963, "body": "@Haijun - Correct. It&#39;s a constraint violation. A program that does that is ill-formed according to the C language specification."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490793057, "post_id": 43094120, "comment_id": 73270069, "body": "NPE is not itself memory corruption, the side effect is, well, anything, and one of them is memory corruption. <i>Hint: Check your credit card usage after you run a program causing UB</i>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1490793058, "post_id": 43094120, "comment_id": 73270071, "body": "@PaulOgilvie  &quot;Dereferencing a null pointer ...  will get you a run-time error.&quot; is not specified by C, yet a possible outcome of UB. &#167;6.5.3.2 4"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490793452, "post_id": 43094120, "comment_id": 73270404, "body": "@StoryTeller How can it be a constraint violation, when most often it is a run-time bug? Constraint violation of what?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1490793578, "post_id": 43094120, "comment_id": 73270509, "body": "Interestingly, some micro controllers can be reset by setting the instruction pointer to address 0 - UB, sure, but this is often achieved by calling a null function pointer..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490793594, "post_id": 43094120, "comment_id": 73270526, "body": "An (attempted) null pointer dereference is certainly a memory-related programming issue, but it is not reasonable to characterize it as memory corruption.  However, it might either <i>result from</i> or <i>produce</i> memory corruption."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490793794, "post_id": 43094120, "comment_id": 73270683, "body": "@Lundin - The standard defines a constraint as <a href=\"http://port70.net/~nsz/c/c11/n1570.html#3.8\" rel=\"nofollow noreferrer\">this</a>, which I read to mean that semnatic sections can introduce constraints as well, albeit not necessarily ones a compiler can catch. The semantic behavior of unary <code>*</code> is <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.3.2p4\" rel=\"nofollow noreferrer\">this</a>. So I see it as a constraint violation."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490794559, "post_id": 43094120, "comment_id": 73271341, "body": "@StoryTeller Given the context &quot;syntactic or semantic&quot;, the definition of &quot;Contraints&quot; likely just refer to &quot;semantic&quot; as &quot;logical rules&quot;, rather than &quot;Semantics&quot; as the chapter format of the standard. A constraint is a requirement which I believe can always be checked statically. All the text below &quot;constraints&quot; as well as &quot;semantics&quot; is however normative, so a violation of a constraint is by no means more severe than a violation of the semantics."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1490794689, "post_id": 43094120, "comment_id": 73271451, "body": "@anatolyg <a href=\"https://en.wikipedia.org/wiki/Memory_corruption\" rel=\"nofollow noreferrer\">Wikipedia</a> &quot;Memory corruption errors can be broadly classified into four categories:&quot; /--/ &quot;Using none-owned memory: It is common to use pointers to access and modify memory. If such a pointer is a null pointer, dangling pointer...&quot;"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1490797063, "post_id": 43094120, "comment_id": 73273498, "body": "memory corruption even sometimes caused my hardware also."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1490793792, "last_edit_date": 1490793792, "creation_date": 1490793172, "answer_id": 43094566, "question_id": 43094120, "link": "https://stackoverflow.com/questions/43094120/do-null-pointer-deference-and-uninitialized-memory-belong-to-memory-corruption/43094566#43094566", "title": "Do null pointer deference and uninitialized memory belong to memory corruption", "body": "<p>\"Memory corruption\" is not a formal term, so it is not very meaningful to go look for a formal definition. Also, Wikipedia is not necessarily a canonical source of information.</p>\n\n<p>A null pointer access may or may not lead to memory corruption. Mostly this depends on if the system allows writes to address 0 or not<sup>1)</sup>. </p>\n\n<p>Similarly, using an uninitialized or \"dangling\" pointer that points at any random location can cause any kind of behavior, including memory corruption.</p>\n\n<p>These all fall under the formal term <em>undefined behavior</em>, which means that anything can happen should you invoke such behavior.</p>\n\n<hr>\n\n<p><sup>1)</sup> In theory, the C language forbids the compiler to give a null pointer an address that might correspond to a real address on the target. In practice, compilers most often don't do this but just use the address zero. Which is a valid address on many microcontroller systems or other such computers that allow direct access to physical memory.</p>\n"}, {"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 0, "last_activity_date": 1490889151, "creation_date": 1490889151, "answer_id": 43122682, "question_id": 43094120, "link": "https://stackoverflow.com/questions/43094120/do-null-pointer-deference-and-uninitialized-memory-belong-to-memory-corruption/43122682#43122682", "title": "Do null pointer deference and uninitialized memory belong to memory corruption", "body": "<p>Dereferencing a null pointer reference cannot corrupt memory unless the first page is mapped to the process address space.</p>\n\n<p>Most operating systems do not map this page by default (although many allow the user to map it if they so choose).</p>\n\n<p>Because a null pointer will reference nothing, you cannot corrupt anything by accessing it.</p>\n\n<p>The pointer itself may be corrupted if it has a null (or any other invalid value).</p>\n"}], "owner": {"reputation": 41, "user_id": 7744096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4551cd9d9749a07301b9b8208827cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Haijun", "link": "https://stackoverflow.com/users/7744096/haijun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1490889151, "creation_date": 1490792038, "last_edit_date": 1490794969, "question_id": 43094120, "link": "https://stackoverflow.com/questions/43094120/do-null-pointer-deference-and-uninitialized-memory-belong-to-memory-corruption", "title": "Do null pointer deference and uninitialized memory belong to memory corruption", "body": "<p>In wikipedia, <a href=\"https://en.wikipedia.org/wiki/Memory_corruption\" rel=\"nofollow noreferrer\">memory corruption</a> is defined as follows: </p>\n\n<blockquote>\n  <p>Memory corruption occurs in a computer program when the contents of a\n  memory location are unintentionally modified due to programming\n  errors; this is termed violating memory safety.</p>\n</blockquote>\n\n<p>But in the subsequent description, null pointer dereference and uninitialized memory are considered memory corruption.</p>\n\n<p>I'm a little confused. Null pointer dereference and uninitialized memory do not unintentionally modify the contents of a memory location. Why are they regarded as memory corruption?</p>\n"}, {"tags": ["c", "windows", "gdb", "qemu", "mingw-w64"], "owner": {"reputation": 11, "user_id": 7779800, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Jut-QnY1K0o/AAAAAAAAAAI/AAAAAAAAADk/0WZsjuxhdYs/photo.jpg?sz=128", "display_name": "Ivan Vasiliev", "link": "https://stackoverflow.com/users/7779800/ivan-vasiliev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490791980, "creation_date": 1490791980, "last_edit_date": 1495541418, "question_id": 43094102, "link": "https://stackoverflow.com/questions/43094102/gdb-is-not-working-if-i-have-export-symbols", "title": "GDB is not working if I have export symbols", "body": "<p>So, I am working with QEMU, and I have a system of plugins for it, that are using bunch of symbols from the main executable. Everything is working fine in Linux, but porting plugins to windows caused many inconveniences (expectedly).</p>\n\n<p>At first, i struggled with linking against executable. In Linux all you need is an option -rdynamic, that is not presented in windows. Eventually, I found a solution to this problem <a href=\"https://stackoverflow.com/questions/30465275/whats-the-proper-way-to-link-against-an-executable-on-windows\">here</a>. So, I used --export-all-symbols linking option, and I was linking my plugins against an import library generated with -Wl,--out-implib. The result is a working qemu executable, and working plugins at the same time, all working as intended, except for gdb.</p>\n\n<p>I am running gdb from MinGW64 shell like this: <br><code>$ gdb --args ./qemu-system-i386w testdisk.qcow2 -monitor stdio\n(gdb) break tcg-plugin.c:164\nBreakpoint 1 at 0x410f1c: file C:/fromgit/plugins_test/qemu-work/tcg/tcg-plugin.c, line 164.\n(gdb) run</code><br>\nBut then i either get the following error:<br> <code>Warning:\nCannot insert breakpoint 1.\nCannot access memory at address 0x410f1c\nCommand aborted.</code><br>\nOr it will start working, but none of breakpoints will be triggered, despite they definetely should.</p>\n\n<p>I thought, that this may be caused by exporting all the symbols from qemu executable, so instead of using --export-all-symbols I qualified needed export symbols with __declspec(dllexport) attribute, but that didn't change anything. Furthermore, I discovered, that adding any export symbols at all to the executable will cause gdb to act faulty, the same way as described earlier.</p>\n\n<p>It should be mentioned, that if I'm building just qemu, without any export symbols, I get an executable that works fine, and gdb is working fine with it.</p>\n\n<p>So the question is - am I missing something? What can possibly cause gdb to not work?</p>\n"}, {"tags": ["c", "dev-c++"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1490792132, "post_id": 43094087, "comment_id": 73269267, "body": "The code you show should not even <i>build</i>. Please copy-paste the <i>actual</i> code you have. And if this is it, then you need to fix the build errors first."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1490792178, "post_id": 43094087, "comment_id": 73269303, "body": "Then consider this: What is the value of <code>max</code> <i>before</i> you initialize it with the call to <code>scanf</code>? What will the size of <code>array</code> be?"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490792476, "post_id": 43094087, "comment_id": 73269553, "body": "there was nothing wrong with the max and array. my problem was when i call mean(total,max); the output should be the ave, but it only shows 0.00 which is idk why"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1490792576, "post_id": 43094087, "comment_id": 73269649, "body": "Oh so you like living on the edge and having <b><i>undefined behavior</i></b>? Because that is what you have! When you use <code>max</code> to define the array <code>array</code> the value of <code>max</code> is <i>indeterminate</i>, and you will have undefined behavior. Having undefined behavior in your program means the whole program is <i>ill formed</i> and invalid. Nothing the program does can be trusted."}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490793263, "post_id": 43094087, "comment_id": 73270252, "body": "there was a &quot;)&quot; missing i agree..but my problem was when i call the unction to return something in a project file, it just doesnt return the right value..keeps returning 0.00 but when the code is in a single (.c) file, the function returns right."}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490794032, "post_id": 43094087, "comment_id": 73270895, "body": "is that possible? i only heard it here that a declaration is not above any other.. so can i do it?"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490794262, "post_id": 43094087, "comment_id": 73271085, "body": "how can i actually input the max first before declaring the array ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490794315, "post_id": 43094087, "comment_id": 73271128, "body": "@PatrickEsguerra, yes, declarations can follow executable statements in C since C99.  Even before C99 was published, some compilers accepted such ordering as an extension."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1490794490, "post_id": 43094087, "comment_id": 73271290, "body": "@DavidBowling: &quot;<i>... declares int array[0].</i>&quot; not necessarily. <code>max</code> had not been given a value yet, so using <code>max</code> already invokes the infamous Undefined Behaviour."}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490794501, "post_id": 43094087, "comment_id": 73271295, "body": "i did     int main(){     int i,max, total=0;     printf(&quot;Enter max: &quot;);     scanf(&quot;%d&quot;,&amp;max);     int array[max];   but mean is still 0.00"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490794594, "post_id": 43094087, "comment_id": 73271369, "body": "@alk-- Oh for crying out loud! I can&#39;t believe I misread that.... Thanks for the comment."}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490794850, "post_id": 43094087, "comment_id": 73271589, "body": "i did input for max first and declares the array but still mean is 0.00"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490795273, "post_id": 43094087, "comment_id": 73271971, "body": "@PatrickEsguerra if you&#39;ve made that change and the above code still isn&#39;t working, then are you sure you&#39;ve given us the code you&#39;re having problems with?"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490795450, "post_id": 43094087, "comment_id": 73272110, "body": "yes, if you got Devc++ there.. it should be in project"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490792692, "post_id": 43094206, "comment_id": 73269746, "body": "there was nothing wrong with the max and array. my problem was when i call mean(total,max); the output should be the ave, but it only shows 0.00 which is idk why"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 2, "creation_date": 1490792806, "post_id": 43094206, "comment_id": 73269839, "body": "@PatrickEsguerra - Everything is wrong with <code>max</code> and <code>array</code>. When seasoned programmers tell a novice they made a vital mistake, the novice better not just dismiss their claims."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490793149, "post_id": 43094206, "comment_id": 73270158, "body": "@PatrickEsguerra: It is because of invoking undefined behaviour as explained per this answer."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 1, "creation_date": 1490793324, "post_id": 43094206, "comment_id": 73270296, "body": "@PatrickEsguerra just because you see the problem in one place, it doesn&#39;t mean the problem isn&#39;t caused by code elsewhere. In this particular instance, <code>max</code> could start off being 0 when you define <code>array</code>. Then you write into <code>array</code> you&#39;re going beyond the bounds of it which will corrupt your program&#39;s memory causing random errors."}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490793326, "post_id": 43094206, "comment_id": 73270300, "body": "i tried running it, theres nothing wrong with the max being the size of the array"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490793423, "post_id": 43094206, "comment_id": 73270375, "body": "can i initialize max first as 0? and then input for max and then use max as the size of the array?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490793617, "post_id": 43094206, "comment_id": 73270546, "body": "@PatrickEsguerra no - see my above comment. you have to have a value for max before you declare your array. Or better yet, use <code>malloc</code> to allocate some memory based on the inputted value of <code>max</code> and use that"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490793691, "post_id": 43094206, "comment_id": 73270618, "body": "how do i go about it sir? how can i assign whatever max is to the array size?"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490793896, "post_id": 43094206, "comment_id": 73270769, "body": "can i do this?   int max=0, array[max] then printf(&quot;Max: &quot;); scanf(&quot;%d&quot;,&amp;max);   .. can the new max now replace the zero one?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490793987, "post_id": 43094206, "comment_id": 73270848, "body": "I think <a href=\"http://stackoverflow.com/questions/43094087/function-not-returning-result-in-c/43094206#comment73270375_43094206\">OP has it right here</a>. If <code>scanf()</code> is first used to set <code>max</code>, then <code>int array[max]</code> will work as desired, if he is using C99; <code>malloc()</code> may be needed if the compiler is older."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490794064, "post_id": 43094206, "comment_id": 73270921, "body": "Or if it is newer @DavidBowling -- VLAs are an <i>optional</i> feature in C2011.  And considering that the OP is using dev-C++, it&#39;s worth noting that VLAs are not a feature of C++ at all."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490794071, "post_id": 43094206, "comment_id": 73270927, "body": "I&#39;ve updated my answer to include how to allocate (and later free) memory for your array"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490794167, "post_id": 43094206, "comment_id": 73271006, "body": "@John Bollinger-- I was avoiding comment on the C11 issue which seems an unlikely problem, but I hadn&#39;t considered the dev-C++ angle. Thanks for pointing that out."}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490795364, "post_id": 43094206, "comment_id": 73272037, "body": "i used your malloc code chris but mean is still 0.00"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490795759, "post_id": 43094206, "comment_id": 73272389, "body": "i did your updated code chris and the declaring of array before the input of max but still mean is 0.00"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490796200, "post_id": 43094206, "comment_id": 73272801, "body": "@PatrickEsguerra i&#39;ve compiled the fixed code myself so I know it should work - maybe there is also a problem with how you&#39;re building the code?"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490796444, "post_id": 43094206, "comment_id": 73272991, "body": "what is the difference between a(.c) file and a project? .. it works in a single (.c) file but when i transfer it in a project it dont"}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490797596, "post_id": 43094206, "comment_id": 73274002, "body": "ive done your int max; int <i>array; printf(&quot;Enter max: &quot;); scanf(&quot;%d&quot;,&amp;max); array=malloc(sizeof(int)*max);  /</i> your code goes here */  free(array);       but mean is still 0.00"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490797895, "post_id": 43094206, "comment_id": 73274280, "body": "a C file is just one file...a project is usually a collection of C and header files that are built together to form one program. But if you&#39;ve just got the 1 C file in your project then there shouldn&#39;t really be any difference."}, {"owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "edited": false, "score": 0, "creation_date": 1490799191, "post_id": 43094206, "comment_id": 73275411, "body": "i really wonder whats wrong with my code that it returns 0.00 as the mean"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 8, "last_activity_date": 1506099502, "last_edit_date": 1506099502, "creation_date": 1490792229, "answer_id": 43094206, "question_id": 43094087, "link": "https://stackoverflow.com/questions/43094087/function-not-returning-result-in-c-in-a-project-file/43094206#43094206", "title": "Function not returning result in c (in a project file)", "body": "<p>The problem is with these two lines of code - you're declaring the size of <code>array</code> to be <code>max</code> before you actually work out what value <code>max</code> has which will cause unexplained behaviour. It's most likely pure chance that your code ever worked as expected.</p>\n\n<pre><code>int array[max];\n...\nscanf(\"%d\",&amp;max);\n</code></pre>\n\n<p>The way to do what you're trying to do is to allocate memory big enough to hold your array like this. You'd probably want to check that max is more than 0 too and also that <code>scanf</code> found a number. But the rough gist of it is like this:</p>\n\n<pre><code>int max;\nint *array;\nprintf(\"Enter max: \");\nscanf(\"%d\",&amp;max);\narray=malloc(sizeof(int)*max);\n\n/* your code goes here */\n\nfree(array);\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7785834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1728760030484498/picture?type=large", "display_name": "Patrick Esguerra", "link": "https://stackoverflow.com/users/7785834/patrick-esguerra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506099502, "creation_date": 1490791950, "last_edit_date": 1490797799, "question_id": 43094087, "link": "https://stackoverflow.com/questions/43094087/function-not-returning-result-in-c-in-a-project-file", "title": "Function not returning result in c (in a project file)", "body": "<p>When I run this code in a .c file, it works, but when I make a project for it, the function I call will only return 0.00. Why? Why does it not work in a project file?</p>\n\n<p>I'm using DevC++.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nfloat mean(int total, int max);\n\nint main(){\n    int i,max, total=0;\n    int array[max];\n    printf(\"Enter max: \");\n    scanf(\"%d\",&amp;max);\n\n    for(i=0; i&lt;max; i++){\n        scanf(\"%d\",&amp;array[i]);\n        total+=array[i];\n    }\n    printf(\"Total: %d\\n\",total);\n    printf(\"Mean: %.2f\",mean(total,max));\n    return 0;\n}\n\nfloat mean(int total, int max){\n    float ave;\n    ave=(float)total/max;\n\n    return ave;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1490788509, "post_id": 43092783, "comment_id": 73266626, "body": "Those are strings, not single characters. Use <code>%s</code>. Voting to close this as simple typo."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1490788658, "post_id": 43092783, "comment_id": 73266735, "body": "That kind of typedef mixing struct and fixed size array is probably not the most clear way to code... It&#39;s debatable if typedeffing structs at all is useful. <code>struct car car[6];</code> as the main local variable declaration would make more quickly understandable code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1490788722, "post_id": 43092783, "comment_id": 73266785, "body": "<code>i</code> is an uninitialised variable anyway, so the behaviour is <i>undefined</i>."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 2, "creation_date": 1490788779, "post_id": 43092783, "comment_id": 73266833, "body": "Also: always, <i>always</i> check for return value of *<code>scanf</code> functions, and print out IO errors, and handle parse errors somehow."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1490788916, "post_id": 43092783, "comment_id": 73266930, "body": "Please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a> Better would be <code>while(fscanf(fptr, &quot;%d%s%s%f&quot;, &amp;car[i].year, car[i].number, car[i].colour, &amp;car[i].engine) == 4) { i++; }</code> But I would actually read each line with <code>fgets</code> and then apply <code>sscanf</code>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1490789021, "post_id": 43092783, "comment_id": 73267000, "body": "Welcome to Stack Overflow! To help people answer your question, you&#39;ll need to be more specific about the warning.  Please <a href=\"https://stackoverflow.com/posts/43092783/edit\">edit</a> your post to incorporate the exact messages you get from your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (preferably using copy+paste to avoid transcription errors)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490789094, "post_id": 43092783, "comment_id": 73267045, "body": "Please do yourself a favor and format your code correctly (for example like the samples in your C textbook)."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490791603, "post_id": 43093862, "comment_id": 73268850, "body": "Please don&#39;t just drop a wall of code with no explanation about what was wrong or how/why you changed it."}, {"owner": {"reputation": 15, "user_id": 7785619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff211c677fadd3d71557a14ccbba199?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Byrne", "link": "https://stackoverflow.com/users/7785619/luke-byrne"}, "edited": false, "score": 0, "creation_date": 1490792861, "post_id": 43093862, "comment_id": 73269890, "body": "thanks so much for your help - I&#39;m new to programming in general and I&#39;ve just been given this task so I&#39;m quite stuck! Your explanation helps a lot - may I ask, where should the for loop actually go?"}, {"owner": {"reputation": 84, "user_id": 7362383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a6617bbdc8753cac39d9a89987375a?s=128&d=identicon&r=PG&f=1", "display_name": "user 7362383", "link": "https://stackoverflow.com/users/7362383/user-7362383"}, "edited": false, "score": 0, "creation_date": 1490793309, "post_id": 43093862, "comment_id": 73270280, "body": "Whenever you can try to use &quot;for&quot; inspite of &quot;while&quot;. It will constrain the code from the possible mistakes. You ask - where to use &quot;for&quot; , my answer is instead of while. By the way, the good practice is to check what the malloc, fopen etc. return."}, {"owner": {"reputation": 15, "user_id": 7785619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff211c677fadd3d71557a14ccbba199?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Byrne", "link": "https://stackoverflow.com/users/7785619/luke-byrne"}, "edited": false, "score": 0, "creation_date": 1490793673, "post_id": 43093862, "comment_id": 73270602, "body": "Thank you for your help! I am nearly on break but planning on finishing the code in an hour or so, if I get it out correctly (I think I will as I understand what to do now) would you mind pointing out some areas where it could be better formatted?"}, {"owner": {"reputation": 84, "user_id": 7362383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a6617bbdc8753cac39d9a89987375a?s=128&d=identicon&r=PG&f=1", "display_name": "user 7362383", "link": "https://stackoverflow.com/users/7362383/user-7362383"}, "edited": false, "score": 0, "creation_date": 1490794008, "post_id": 43093862, "comment_id": 73270871, "body": "No. The best tutors for programmer are gdb and valgrind. They will help you."}], "tags": [], "owner": {"reputation": 84, "user_id": 7362383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a6617bbdc8753cac39d9a89987375a?s=128&d=identicon&r=PG&f=1", "display_name": "user 7362383", "link": "https://stackoverflow.com/users/7362383/user-7362383"}, "is_accepted": true, "score": 0, "last_activity_date": 1490791724, "last_edit_date": 1490791724, "creation_date": 1490791402, "answer_id": 43093862, "question_id": 43092783, "link": "https://stackoverflow.com/questions/43092783/creating-an-array-of-structures-from-a-file-in-c/43093862#43093862", "title": "creating an array of structures from a file in C", "body": "<p><strong>I did not test this \"code\".</strong> The correct strategy you should apply is:<br>\n1) find the filesize<br>\n2) allocate the buffer<br>\n3) read whole file in it<br>\n4) know how many strings ('\\n') it contains (in while loop)<br>\n5) in for cycle handle the buffer (i = 0; i &lt; num_lines; i++) ...  </p>\n\n<pre><code>#include &lt;stdio.h&gt;   \n#include &lt;string.h&gt;  \n#include &lt;stdlib.h&gt;  \n\n#define BUF 64  \ntypedef struct _CarType  \n{  \n    int year;  \n    int number;  \n    int colour;  \n    double engine;  \n} CarType;  \n\nint main(int argc, char argv[])  \n{  \n    CarType car[6];  \n\n    FILE* fp = fopen(\"indata.txt\",\"r\");  \n    if(fp != NULL)  \n    {  \n        int i = 0;  \n        while(!feof(fp))  \n        {  \n            char year[BUF], colour[BUF], engine1[BUF], engine1[BUF], number[BUF];  \n            memset(year,     '\\0', BUF);  \n            memset(colour,   '\\0', BUF);  \n            memset(engine1,  '\\0', BUF);  \n            memset(engine2,  '\\0', BUF);  \n            memset(number,   '\\0', BUF);  \n\n            fscanf(fp, \"%s %s %s %s.%s\", year, number, colour, engine1, engine2);  \n            car[i].year      =    atoi(year);  \n            car[i].number    =    atoi(number);  \n            car[i].colour    =    atoi(colour);  \n            car[i].engine    =    atoi(engine1);  \n            car[i].engine    +=   (atoi(engine2)) / (10 * strlen(engine2));  \n\n            i++;  \n        }  \n        fclose(fp);  \n    }  \n    return 0;  \n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7785619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff211c677fadd3d71557a14ccbba199?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Byrne", "link": "https://stackoverflow.com/users/7785619/luke-byrne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "closed_date": 1490799128, "accepted_answer_id": 43093862, "answer_count": 1, "score": -3, "last_activity_date": 1490791724, "creation_date": 1490788452, "last_edit_date": 1490789123, "question_id": 43092783, "link": "https://stackoverflow.com/questions/43092783/creating-an-array-of-structures-from-a-file-in-c", "closed_reason": "Not suitable for this site", "title": "creating an array of structures from a file in C", "body": "<p>i am trying to create an array of structures in C. it is as simple as reading in the information from a file into a structure, but I keep getting two warning messages about reading in my two character (number/colour) as well as that the program seems to just read zero for every value.</p>\n\n<pre><code>#include&lt;stdio.h&gt; \n#include&lt;string.h&gt;\n\ntypedef struct car\n{\n    int year;\n    char number[9];\n    char colour[10];\n    float engine;\n} car_type[6];\n\nint main()\n{\n    car_type car;\n    int i;\n    FILE*fptr;\n\n    fptr = fopen(\"indata.txt\", \"r\");\n\n    while (!feof(fptr))\n    {\n        fscanf(fptr, \"%d %c %c %f\", &amp;car[i].year, &amp;car[i].number,\n                &amp;car[i].colour, &amp;car[i].engine);\n        i++;\n    }\n\n    fclose(fptr);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "libxml2"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490792476, "post_id": 43092778, "comment_id": 73269552, "body": "As an aside, do be aware that there are many Unicode characters even just among those used in European scripts that are not encoded by CP850.  Moreover, ISO-8859-15 or Windows-1232 would be more conventional.  Are you sure you need CP850 specifically?  Also, Windows supports the full range of Unicode via wide characters, which are represented as UTF16."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490793046, "post_id": 43092778, "comment_id": 73270062, "body": "In any case, no, you don&#39;t need to worry about encodings other than UTF-8, because although documents can be encoded in other ways, <a href=\"http://xmlsoft.org/encoding.html#internal\" rel=\"nofollow noreferrer\">libxml2 always uses UTF-8 internally</a>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490793360, "post_id": 43092778, "comment_id": 73270333, "body": "CP850 is not among the encodings libxml2 supports by default.  The &quot;encoding&quot; module provides a framework by which you can plug in support for additional encodings, but that&#39;s probably not what you need to obtain an <i>internal</i> representation of node content in your desired encoding.  To the best of my knowledge, you&#39;ll need to engage a separate transcoder for that, such as <a href=\"https://www.gnu.org/software/libiconv/\" rel=\"nofollow noreferrer\">libiconv</a> can provide."}, {"owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490797061, "post_id": 43092778, "comment_id": 73273495, "body": "Yes I need CP 850 specifically. I was thinking it would be neat to allow lots of different ways to encode the chars in the XML, which is why I tried to use libxml2. I have the impression libxml2 uses libiconv, but the API in the encoding module does not work. It could be that the problem is the link between libxml2 and libiconv. Not sure what you mean by internal. When I get the CP 850 string I am not longer going to be using libxml2."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490797318, "post_id": 43092778, "comment_id": 73273737, "body": "I am confident that libxml2&#39;s encoding module works fine.  That it did not work <i>for you</i>, as you expected it to do, is almost surely a result of incorrect expectations or incorrect usage."}, {"owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490797380, "post_id": 43092778, "comment_id": 73273803, "body": "Could you have a look at this example then: <a href=\"http://xmlsoft.org/tutorial/aph.html\" rel=\"nofollow noreferrer\">xmlsoft.org/tutorial/aph.html</a> and tell me why it does not work."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490797457, "post_id": 43092778, "comment_id": 73273874, "body": "By &quot;internal&quot; I mean something stored in your program&#39;s memory, as opposed to something written to an output device such as the screen or a file."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1490798737, "post_id": 43092778, "comment_id": 73275025, "body": "The example program from the tutorial does not work because it is buggy.  It misinterprets all non-zero return values of <code>handler-&gt;input(out, &amp;out_size, in, &amp;temp)</code>  as indicating failure, but only <i>negative</i> return values in fact indicate failure.  That&#39;s a flaw in the tutorial, not in the library."}, {"owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490799612, "post_id": 43092778, "comment_id": 73275793, "body": "Ok, thanks. Also, when I change from &quot;ISO 8859-1&quot;  to &quot;CP850&quot; (and various other similar strings) on line 44, I get seg fault. It seems to me that what should happen is the FindCharEncoding function should fail, which it does not seem to do?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490802317, "post_id": 43092778, "comment_id": 73277928, "body": "I can confirm the segfault you report, and I concur that it seems to reflect a bug in libxml2.  <code>xmlFindCharEncodingHandler()</code> ought to <i>either</i> return a handler that successfully performs the conversion, <i>or</i> return <code>NULL</code>.  It does neither.  In libxml2 version 2.9.1, it does neither.  Evidently, my earlier confidence was misplaced."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490802332, "post_id": 43092778, "comment_id": 73277939, "body": "On the other hand, it is not particularly harder to use libiconv directly to perform the conversion, and that worked just fine for me in my tests."}, {"owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490860049, "post_id": 43092778, "comment_id": 73303279, "body": "Thanks again. Have tried this now. Am using <code>iconv_open(&quot;CP850&quot;,&quot;UTF-8&quot;)</code> which works, but <code>iconv</code> fails for some characters, setting <code>errno</code> to <code>EILSEQ</code>. Those characters are non-ASCII ones, like bullet and down arrow. The input comes from <code>libxml2</code> via <code>xmlNodeGetContent</code>. Any ideas what may be the problem?"}, {"owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490869675, "post_id": 43092778, "comment_id": 73309780, "body": "Also, I assumed (or I just didn&#39;t think it through) that <code>xmlStrlen</code> would return the number of code points (or whatever is now the technical term), not the number of bytes, but now I get the impression it is the latter. In that case, how do I know the size of the output string?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1490869822, "post_id": 43092778, "comment_id": 73309872, "body": "<code>xmlStrlen</code> returns the number of bytes. <a href=\"http://xmlsoft.org/html/libxml-xmlstring.html#xmlUTF8Strlen\" rel=\"nofollow noreferrer\"><code>xmlUTF8Strlen</code></a> returns the number of code points. If you have problems with iconv, you should ask a separate question."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1490870482, "post_id": 43092778, "comment_id": 73310280, "body": "Regarding the crash with CP850: For encodings handled by iconv, libxml2 doesn&#39;t set the <code>input</code> member of the <a href=\"http://xmlsoft.org/html/libxml-encoding.html#xmlCharEncodingHandler\" rel=\"nofollow noreferrer\">handler struct</a>, but the <code>iconv_in</code> member. It&#39;s probably easier to use iconv directly."}, {"owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "edited": false, "score": 0, "creation_date": 1490872660, "post_id": 43092778, "comment_id": 73311806, "body": "Thanks. Okay... Well, I have a few things to change I guess."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490879529, "post_id": 43092778, "comment_id": 73316985, "body": "@TomasBy an <code>EILSEQ</code> indicates an invalid multibyte sequence in the <code>iconv()</code> input.  If you&#39;re seeing this error then it means that the data you are trying to convert are not, in fact, encoded as (valid) UTF-8.  Possibly that arises from trying to convert bytes past the end of the actual data.  In this regard, be aware that <code>iconv()</code> treats the input as a byte buffer, not a string -- null bytes in the input are handled as data, not terminators."}, {"owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "edited": false, "score": 0, "creation_date": 1490879855, "post_id": 43092778, "comment_id": 73317267, "body": "Well, the strange thing is that those special characters are in the middle of the text. (I included the next three chars in the error message.) The string comes from libxml. I am currently rewriting that part of the code."}], "owner": {"reputation": 1362, "user_id": 7131301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95feecfe61cbcdf86514a34cdc248623?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas By", "link": "https://stackoverflow.com/users/7131301/tomas-by"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490788437, "creation_date": 1490788437, "question_id": 43092778, "link": "https://stackoverflow.com/questions/43092778/extracting-xml-text-content-and-converting-the-encoding-libxml2", "title": "Extracting XML text content and converting the encoding (libxml2)", "body": "<p>How do I extract content from a node and convert the character encoding?</p>\n\n<p>I have a \"xmlNode*\" that comes from a file, which is typically UTF-8 but could be (I assume) any other encoding supported by the installation.</p>\n\n<p>If it is a TEXT node, I want to get the content, as a string, in CP 850.</p>\n\n<p>There is a function </p>\n\n<pre><code>xmlChar* xmlNodeGetContent(xmlNode* node)\n</code></pre>\n\n<p>also, there are functions like</p>\n\n<pre><code>void xmlDocDumpMemoryEnc(xmlDocPtr out_doc,xmlChar** doc_txt_ptr,int*\n                         doc_txt_len,const char* txt_encoding)\n</code></pre>\n\n<p>which print out the XML. But I would need something like</p>\n\n<pre><code>xmlChar* xmlNodeGetContentEnc(xmlNode* node,const char* encoding)\n</code></pre>\n\n<p>the <code>encoding</code> module does not seem to work, as I get seg faults when I try to use the encoding functions (both my own code and the examples from <code>xmlsoft.org</code> behave similarly.)</p>\n\n<p>Is there a reasonably simple way to achieve this with <code>libxml2</code>?</p>\n"}, {"tags": ["c", "jpeg", "mjpeg", "libjpeg", "libjpeg-turbo"], "comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1490788494, "post_id": 43092625, "comment_id": 73266620, "body": "Most likely reason is <i>cache effects</i>. If you look at the very first iteration of the loop, you&#39;ll see that it too takes longer than the others; this is because the data and the structures used by the decompressor are not cached. If the system has sufficient amount of work so that the delay is long enough for other work the core is doing to evict the old data from cache, it would explain the timing differences. Thing is, <i>the longer timing</i> is more likely to be correct, because the data for successive images will not be cached anyway."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1490788658, "post_id": 43092625, "comment_id": 73266736, "body": "In your case, this is not a big problem at all. You can use one thread to keep reading the USB data into a triple buffer (so that one image can be processed, while another is waiting to be processed, and a third one is being received from USB), so that you <i>process at the same time you receive data</i>. This means that to reach 20 FPS, you have (almost) 1000 ms / 20 = 50 ms to decode each frame. If you save the separate frames, use a second worker thread (and another double or triple buffer) to save the frames."}, {"owner": {"reputation": 523, "user_id": 3269989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kNVqL.png?s=128&g=1", "display_name": "Ahmed_Faraz", "link": "https://stackoverflow.com/users/3269989/ahmed-faraz"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1490791161, "post_id": 43092625, "comment_id": 73268530, "body": "what should I do if a need to increase the FPS arises moreover I cant keep the cpu busy because i need to process the decoded frames for my application."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1490794424, "post_id": 43092625, "comment_id": 73271226, "body": "You can use several decoder threads in parallel, if the decoder library is thread-safe. Most computers nowadays have several cores, so just because it takes <i>one</i> core to decode a frame 25-30 ms does not mean the computer is limited to 33 frames per second. In general, the known working approach is to ensure that all cores have work to do, even when you are waiting for data to be transmitted."}], "owner": {"reputation": 523, "user_id": 3269989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kNVqL.png?s=128&g=1", "display_name": "Ahmed_Faraz", "link": "https://stackoverflow.com/users/3269989/ahmed-faraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 613, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490788049, "creation_date": 1490788049, "question_id": 43092625, "link": "https://stackoverflow.com/questions/43092625/tjdecompress2-takes-more-time-to-execute-if-called-after-a-delay", "title": "tjDecompress2 takes more time to execute if called after a delay", "body": "<p>The following code is  written to test the perfomance of libjpeg-turbo on my system</p>\n\n<pre><code>unsigned char *source; \nunsigned int _jpegSize = 0; \nunsigned long long GetTime( void )\n{\n    struct timeval tv;\n    struct timezone tz;\n\n    gettimeofday(&amp;tv, &amp;tz);\n\n    return tv.tv_sec * 1000000ULL + tv.tv_usec;\n}\nint main(int argc,char**argv)\n{\n    if(argc &lt; 3)\n        return 0;\n    char *fileName = argv[1];\n    int fileSize = atoi(argv[2]);\n\n    source = (unsigned char*)malloc(fileSize);\n    ReadFile(argv[1],fileSize); //Reads the file and copy the data to source buffer\n\nfor(int i=0; i&lt;500; i++)\n{\n\n    unsigned char* _compressedImage = source;   \n    int jpegSubsamp, width, height;\n    tjhandle _jpegDecompressor = tjInitDecompress();\n    tjDecompressHeader2(_jpegDecompressor, _compressedImage, fileSize, &amp;width, &amp;height, &amp;jpegSubsamp);\n    unsigned char dstBuffer[width*height*3]; //!&lt; will contain the decompressed image\n\n    unsigned long long t1 = GetTime();\n\n    tjDecompress2(_jpegDecompressor, _compressedImage, fileSize, dstBuffer, width, 0/*pitch*/, height, TJPF_RGB, TJFLAG_FASTDCT);\n\n    unsigned long long t2 = GetTime();\n    printf(\"TimeTaken: %llu microseconds for %f ms\\n\", t2-t1,(float)((t2-t1)/(1000))); \n\n    tjDestroy(_jpegDecompressor);    \n    usleep(50000);   \n}\n</code></pre>\n\n<p>it decodes  a jpeg image repeatedly in a for loop.  On my system <strong>tjDecompress2</strong> takes around <strong>5-7ms</strong> to decode a 1024x768 image. The issue is that if I add a  <strong>usleep(50000)</strong>  command at the end of the loop the execution time for <strong>tjDecompress2</strong> increases to <strong>25-28ms</strong>. What is the reason for this behaviour and how it can be fixed. \n Basically I want to read MJPEG  images fro m a USB camera at 20 FPS and decode them using libjpeg-turbo so the purpose of adding <strong>usleep(5000)</strong> is to simulate the time between the arrival of two successive frames</p>\n"}, {"tags": ["c", "atomic", "c11", "memory-mapping"], "comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1490788123, "post_id": 43092357, "comment_id": 73266366, "body": "If <code>a</code> and <code>b</code> are declared volatile, then <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf#32\" rel=\"nofollow noreferrer\">C11 5.1.2.3p6</a> says, effectively, that a C compiler must ensure the modifications occur in that order (if done in a single thread). It does not matter whether <code>atomic_store()</code> does it atomically or not; it is enough that the compiler knows it (may) modify the value the specified pointer points to (so the first parameter cannot be a pointer to a const value)."}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1490788581, "post_id": 43092357, "comment_id": 73266671, "body": "So does <code>volatile</code> imply a memory fence?"}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1490789055, "post_id": 43092357, "comment_id": 73267023, "body": "It&#39;s answers like <a href=\"http://stackoverflow.com/a/1787503/709852\">this one</a> that are guiding my queries on this issue. I&#39;m not sure I know much in general about what the CPU is or isn&#39;t doing. I suppose the question is a general one about enforcing memory access constraints from pure C (without needing to invoke architecture specific code)."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 4, "creation_date": 1490789097, "post_id": 43092357, "comment_id": 73267050, "body": "No, <a href=\"http://stackoverflow.com/questions/26307071/does-the-c-volatile-keyword-introduce-a-memory-fence\"><code>volatile</code> does not imply a memory fence</a>. So it cannot be used for inter-thread communication."}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1490790355, "post_id": 43092357, "comment_id": 73267954, "body": "So @SanderDeDycker without an explicit memory fence of some description, the only guarantee I have on the ordering is based on the non caching of certain memory regions. Is this correct?"}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1490790552, "post_id": 43092357, "comment_id": 73268094, "body": "<a href=\"https://lwn.net/Articles/586838/\" rel=\"nofollow noreferrer\">This</a> is a very interesting read on the topic."}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490791053, "post_id": 43092357, "comment_id": 73268448, "body": "@BoPersson Without an explicit memory fence, can I say anything about the processor not doing out-of-order execution of the stores (thereby breaking the ordering requirement)? It seems to be that <code>volatile</code> puts no hard restriction on the out-of-order execution engine of the CPU (through e.g. a memory fence)."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1490791931, "post_id": 43092357, "comment_id": 73269092, "body": "If you&#39;re talking specifically about <a href=\"http://en.cppreference.com/w/c/language/volatile\" rel=\"nofollow noreferrer\"><code>volatile</code></a>, then that only provides guarantees within a single thread, and only with regards to (preventing) eliding and re-ordering of accesses to a <code>volatile</code> relative to other visible side effects. If you&#39;re talking about <a href=\"http://en.cppreference.com/w/c/atomic/memory_order\" rel=\"nofollow noreferrer\"><code>memory_order_seq_cst</code></a>, then that guarantees a single total order of modifications across all threads. They&#39;re really two very different things."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490794953, "post_id": 43092357, "comment_id": 73271673, "body": "I&#39;m assuming your other thread does something like <code>if( b == 30 ){ destroy(a) }</code>?"}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490800624, "post_id": 43092357, "comment_id": 73276573, "body": "@BoPersson The problem isn&#39;t the compiler, but the processor. It is perfectly plausible that any reads or writes will happen out of order, which could cause problems. This is why a memory fence is needed."}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490808023, "post_id": 43092357, "comment_id": 73281830, "body": "@BoPersson Well, regardless of the spec, there is no memory barrier introduced in the assembly generated from a write to a volatile, so I suggest the compiler is not handling anything related to out-of-order execution. <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dai0321a/BIHGIEDG.html\" rel=\"nofollow noreferrer\">This page</a> describes why a memory barrier is necessary (as applicable in my case)."}], "answers": [{"comments": [{"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1490856908, "post_id": 43102388, "comment_id": 73301307, "body": "To be clear, you mean sequenced in the assembly output? Not necessarily assembled so the sequence is obeyed by the processor?"}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1490857180, "post_id": 43102388, "comment_id": 73301477, "body": "Just further to the last comment, surely to have well ordered side effects is to imply some kind of memory barrier? At the very least, there can be no side effects from subsequent memory accesses until the first have happened."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1490857459, "post_id": 43102388, "comment_id": 73301648, "body": "@HenryGomersall, all rules in C are &quot;as if&quot;. That is all implementations have to behave such that all observations are consistent with that model. If your architecture needs a barrier to avoid reordering by the processor <i>and</i> such a reordering could be observed by a C program, your compiler has to provide such a barrier."}, {"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1490863320, "post_id": 43102388, "comment_id": 73305253, "body": "The problem is, this isn&#39;t consistent with what is actually seen in the output assembly, in the context of <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dai0321a/BIHGIEDG.html\" rel=\"nofollow noreferrer\">this discussion</a>. I would expect, say, some code that writes a volatile register and then reads a different volatile register to need in the general case a memory fence when on an ARM that supports out-of-order execution. However, this is not what is seen in the GCC output."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1490953584, "post_id": 43102388, "comment_id": 73351987, "body": "@JensGustedt : it&#39;s a bit more complicated than that. The standard says that &quot;<i>accesses to <code>volatile</code> objects are evaluated strictly according to the rules of the abstract machine</i>&quot; (5.1.2.3), which makes these accesses part of the observable behavior, and hence subject to the as-if rule. But it also says that &quot;<i>what constitutes an access to an object that has <code>volatile</code>-qualified type is implementation-defined</i>&quot; (6.7.3). So, it&#39;s all really up to the implementation to define what <code>volatile</code> means exactly, so you need to refer to the implementation&#39;s documentation."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1490815258, "creation_date": 1490815258, "answer_id": 43102388, "question_id": 43092357, "link": "https://stackoverflow.com/questions/43092357/ordering-of-atomics-with-memory-order-seq-cst/43102388#43102388", "title": "Ordering of atomics with `memory_order_seq_cst`", "body": "<p>Two memory accesses in the same thread are always sequenced, <em>if</em> they happen, and if there is a sequence point between them.</p>\n\n<p>The part for \"<em>if</em> they happen\" is guaranteed here if the two objects are declared <code>volatile</code>. This forces the compiler to effectively emit the load or store to memory. How the compiler does this, and how he gives guarantees for that, is completely implementation dependent.Read your platform documentation for that.</p>\n\n<p>The sequencing of statements has not much to do with <code>volatile</code> or atomics. It is implied by syntax. A good rule of thumb is that there is a sequence point at each <code>;</code>, <code>,</code>, <code>{</code>, <code>}</code>, <code>?</code>, <code>||</code> and <code>&amp;&amp;</code>. (there are more than that, but things become complicated if you want to reason with them).</p>\n\n<p>Nothing of that is about atomics. These are to guarantee indivisibility of operations and data consistency inbetween threads and with signal handlers. The big deal here is to have <em>provable</em> visibility of side effects of operations. This is relatively involved, but doesn't help you anything when you want to discuss things that happen in the same thread. In the contrary, the \"happens before\" relation between threads, relies on the \"sequenced before\" relation within the individual threads.</p>\n"}], "owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1490815258, "creation_date": 1490787335, "last_edit_date": 1490787985, "question_id": 43092357, "link": "https://stackoverflow.com/questions/43092357/ordering-of-atomics-with-memory-order-seq-cst", "title": "Ordering of atomics with `memory_order_seq_cst`", "body": "<p>My reading of the C11 <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf#page=293\" rel=\"nofollow noreferrer\">spec with regards to atomic operation ordering</a> suggests that <code>memory_order_seq_cst</code> applies to operations on a specific atomic object.</p>\n\n<p>Mostly, the descriptions are of the form \"If a A and B are applied to M, then the order is maintained on M\"</p>\n\n<p>My question is specifically what happens if we have two operations that apply to <em>different</em> atomic objects. Something like the following:</p>\n\n<pre><code>atomic_store(&amp;a, 20);\natomic_store(&amp;b, 30);\n</code></pre>\n\n<p>where <code>a</code> and <code>b</code> are atomic (volatile) types (and <code>atomic_store</code> implies <code>memory_order_seq_cst</code>).</p>\n\n<p>This problem is relevant to a memory mapped situation where the memory map represents the registers of some peripheral.</p>\n\n<p>It's perfectly normal to have requirements about the ordering of the write. Let's say <code>a = 20</code> is setting up the target for our missile peripheral and setting <code>b = 30</code> is the launch command. Clearly, we don't want to launch until the missile is targeted properly.</p>\n\n<p>If it makes a difference to anything, this is on ARM Linux with GCC.</p>\n"}, {"tags": ["c", "assembly", "powerpc"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1490787503, "post_id": 43092173, "comment_id": 73265969, "body": "&#39;debug registers&#39; indeed.  All modern non-trivial processors have breakpoint etc. hardware built-in.  With multiple cores, pipelining and other features/optimizations, hardwarwe assist with debugging is essential."}], "answers": [{"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 1, "last_activity_date": 1490787650, "creation_date": 1490787650, "answer_id": 43092460, "question_id": 43092173, "link": "https://stackoverflow.com/questions/43092173/implementing-breakpoint-read-write-on-powerpc/43092460#43092460", "title": "Implementing Breakpoint Read/Write on PowerPC", "body": "<p>Is paging turned on? If yes, you could mark the page with the variable as unwritable, trap the resulting protection fault, check if it's a write to the variable and halt execution if it is. This might be a bit slow when the page contains other frequently used variables, though.</p>\n"}, {"comments": [{"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "edited": false, "score": 0, "creation_date": 1495097318, "post_id": 43092527, "comment_id": 75111567, "body": "Since the site is still down, any other link for extensive documentation?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "edited": false, "score": 1, "creation_date": 1495098002, "post_id": 43092527, "comment_id": 75112082, "body": "@BullyWiiPlaza Apparently they are now hosted here: <a href=\"https://openpowerfoundation.org\" rel=\"nofollow noreferrer\">openpowerfoundation.org</a>. They love to completely change the name each year or so, so that they don&#39;t risk that their trademark is getting too popular or successful."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 7, "last_activity_date": 1490787819, "creation_date": 1490787819, "answer_id": 43092527, "question_id": 43092173, "link": "https://stackoverflow.com/questions/43092173/implementing-breakpoint-read-write-on-powerpc/43092527#43092527", "title": "Implementing Breakpoint Read/Write on PowerPC", "body": "<p>In the PowerPC, like all other CPUs that have such a feature, this is done with hardware support. There is a special register \"Data Address Breakpoint\" (DABR), where you can set which memory address that should be checked and if it should be read and/or write access etc. </p>\n\n<p>The CPU will then trigger an interrupt (Data Storage Interrupt) when certain instructions performs reads or writes to that given address. From the ISR, you merely need to check the return address to see how you ended up there, and then you got the program address of the instruction that caused the break.</p>\n\n<p>For details, check the PowerISA manual. (Their site <a href=\"http://www.power.org/\" rel=\"noreferrer\">http://www.power.org/</a> appears to be down atm)</p>\n"}], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 43092527, "answer_count": 2, "score": 2, "last_activity_date": 1490787819, "creation_date": 1490786695, "last_edit_date": 1495540476, "question_id": 43092173, "link": "https://stackoverflow.com/questions/43092173/implementing-breakpoint-read-write-on-powerpc", "title": "Implementing Breakpoint Read/Write on PowerPC", "body": "<p>How are <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff538165(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>breakpoint read/write</code></a> implemented? Note that this is different from <a href=\"https://stackoverflow.com/questions/327372/ppc-breakpoints\"><code>breakpoint execute</code></a>.</p>\n\n<p>The idea is to start off with a data memory address and then find the assembly instruction(s) which read/write from/to that address. In theory, we would have to check the registers and the next instruction being executed (taking into account displacement offsets) in order to find out whether this is true. Let's say the current instruction is a \"store word\": <code>stw r0, 4 (r31)</code> so it writes to address <code>r31 + 4</code>. We can find out whether this breaks by reading the value in <code>r31</code>, adding <code>4</code> and checking if this is equal to the initial data address.</p>\n\n<p>However, this seems infeasible since with C programming you cannot monitor every instruction execution in assembly I believe. How is this being done in general or specific to <a href=\"https://www.ibm.com/developerworks/library/l-ppc/\" rel=\"nofollow noreferrer\">PowerPC</a>? Are there any special assembly instructions or debug registers which simplify this?</p>\n"}, {"tags": ["c", "pointers", "memory-alignment"], "comments": [{"owner": {"reputation": 8716, "user_id": 236247, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e328e5547ae249f222721cba4a7010eb?s=128&d=identicon&r=PG", "display_name": "demongolem", "link": "https://stackoverflow.com/users/236247/demongolem"}, "edited": false, "score": 0, "creation_date": 1490817219, "post_id": 43092033, "comment_id": 73287536, "body": "Maybe I am not reading it closely enough, but two properties are mentioned but only one listed?"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1490818423, "post_id": 43092033, "comment_id": 73288176, "body": "If we stick to the hardware commonly used for desktop systems today, the answer is yes, all pointers are the same. But when you consider all the hardware out there (mainframes, embedded systems, mobile devices, special-purpose devices, etc), you can&#39;t safely make such statements. They are often the same, even usually, but it&#39;s no guarantee."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1490822695, "post_id": 43092033, "comment_id": 73290461, "body": "@CareyGregory True about desktops.  I suspect most CPUs these days are embedded ones where C is very popular."}], "answers": [{"comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1490822946, "post_id": 43101381, "comment_id": 73290578, "body": "And for the OP&#39;s enjoyment, here&#39;s a link to an SO entry about a POSIX detail regarding function pointers and <code>void*</code>: <a href=\"http://stackoverflow.com/a/27707395/12711\">stackoverflow.com/a/27707395/12711</a>"}], "tags": [], "owner": {"reputation": 2331, "user_id": 5563916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2ccad50fd4a22055ffb2ccf0859c5e?s=128&d=identicon&r=PG&f=1", "display_name": "nnovich-OK", "link": "https://stackoverflow.com/users/5563916/nnovich-ok"}, "is_accepted": true, "score": 8, "last_activity_date": 1490812195, "last_edit_date": 1495540458, "creation_date": 1490812195, "answer_id": 43101381, "question_id": 43092033, "link": "https://stackoverflow.com/questions/43092033/void-will-have-the-same-representation-and-memory-alignment-as-a-pointer-to-cha/43101381#43101381", "title": "void* will have the same representation and memory alignment as a pointer to char", "body": "<p>On most common architectures, pointer to any data type has the same representation, while pointer to function may differ. However, it's not a requirement, so it's possible to create valid C implementation, which uses different pointers for different data types. The reason behind this is that C standard tends to describe only crucial requirements, leaving a lot of freedom for possible implementations. Here is what standard says:</p>\n\n<blockquote>\n  <p>A pointer to <strong>void</strong> shall have the same representation and alignment requirements as a\n  pointer to a character type.\n  Similarly, pointers to qualified or unqualified versions of\n  compatible types shall have the same representation and alignment requirements. All\n  pointers to structure types shall have the same representation and alignment requirements\n  as each other. All pointers to union types shall have the same representation and\n  alignment requirements as each other. Pointers to other types need not have the same\n  representation or alignment requirements.</p>\n</blockquote>\n\n<p>If you're curious to see examples of systems with different sizes for different data types, <a href=\"https://stackoverflow.com/questions/916051/are-there-any-platforms-where-pointers-to-different-types-have-different-sizes\">this question</a> mentions <a href=\"http://c-faq.com/null/machexamp.html\" rel=\"noreferrer\">these wonderful examples</a></p>\n"}, {"comments": [{"owner": {"reputation": 8313, "user_id": 1648987, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dcc829df7369ce51e760cbf9f7b7b29b?s=128&d=identicon&r=PG", "display_name": "Karol S", "link": "https://stackoverflow.com/users/1648987/karol-s"}, "edited": false, "score": 1, "creation_date": 1532541407, "post_id": 43104277, "comment_id": 90018858, "body": "&quot;all pointers have same size of memory.&quot; This is false, the standard does not guarantee it."}], "tags": [], "owner": {"reputation": 135, "user_id": 7294563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df1b8a485f9fedc69e1dc19dc5975857?s=128&d=identicon&r=PG&f=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/7294563/harrison"}, "is_accepted": false, "score": -2, "last_activity_date": 1490822912, "last_edit_date": 1490822912, "creation_date": 1490822055, "answer_id": 43104277, "question_id": 43092033, "link": "https://stackoverflow.com/questions/43092033/void-will-have-the-same-representation-and-memory-alignment-as-a-pointer-to-cha/43104277#43104277", "title": "void* will have the same representation and memory alignment as a pointer to char", "body": "<p>I think the point here is \"memory alignment\", not \"memory size\".</p>\n\n<p>Yes, all pointers have same size of memory. But they may have different limitation for memory alignment.</p>\n\n<p>For example, on some platforms, a \"32-bit int\" pointer must point to the address which should be times of 4 bytes. It cannot point to, e.g. 0x100001 or 0x100003.</p>\n\n<p>But a \"8-bit char\" pointer can point to any address. So does a \"void\" pointer.</p>\n\n<p>So it said that.</p>\n"}], "owner": {"reputation": 71, "user_id": 5595913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4dbb901e62c7960cff29020ad77672?s=128&d=identicon&r=PG&f=1", "display_name": "sara", "link": "https://stackoverflow.com/users/5595913/sara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1381, "favorite_count": 0, "accepted_answer_id": 43101381, "answer_count": 2, "score": 5, "last_activity_date": 1490822912, "creation_date": 1490786317, "last_edit_date": 1490817983, "question_id": 43092033, "link": "https://stackoverflow.com/questions/43092033/void-will-have-the-same-representation-and-memory-alignment-as-a-pointer-to-cha", "title": "void* will have the same representation and memory alignment as a pointer to char", "body": "<p>I am reading a book on pointers named \"<em>understanding and using c pointers</em>\"</p>\n\n<p>When it comes to <code>void *</code> it says</p>\n\n<blockquote>\n  <p>It has two interesting properties:</p>\n  \n  <ol>\n  <li>A pointer to void will have the same representation and memory alignment as a pointer to char.</li>\n  </ol>\n</blockquote>\n\n<p>What am confused about is isn't the memory of all the pointers same? They why instead of writing void* is same as normal pointer it explicitly mentioned char pointers? Will really appreciate any help</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490786451, "post_id": 43091950, "comment_id": 73265227, "body": "Try <code>OutputDebugStringA</code> instead of <code>OutputDebugString</code> and report here if it works or not."}, {"owner": {"reputation": 11, "user_id": 7784664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a89968bc558c35c70a356b90143f81?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/7784664/sunny"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490786742, "post_id": 43091950, "comment_id": 73265426, "body": "Thanks ... it works.."}], "answers": [{"tags": [], "owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "is_accepted": false, "score": 0, "last_activity_date": 1490792013, "last_edit_date": 1495542734, "creation_date": 1490792013, "answer_id": 43094114, "question_id": 43091950, "link": "https://stackoverflow.com/questions/43091950/show-current-time-on-output-window-in-visual-studio-2013-using-c/43094114#43094114", "title": "Show current time on output window in Visual Studio 2013 using C", "body": "<p>I know, the comment from Michael has already solved your problem. But, you should know the cause of problem to avoid making the same mistake again in future. So, this answer summarizes that.</p>\n\n<p>First of all, some basics::\n<code>A</code> and <code>W</code> in <code>OutputDebugStringA</code> &amp; <code>OutputDebugStringW</code>, respectively stands for <code>Ansi</code> and <code>Wide characters</code>.</p>\n\n<p><code>Ansi</code> chars take upto 1 byte of memory like <code>char</code> and <code>Wide</code> chars take 2 bytes of memory like <code>wchar_t</code>.</p>\n\n<p>For more reference, you can look here:: <a href=\"https://stackoverflow.com/questions/19532785/difference-between-char-and-wchar-t\">Difference between char* and wchar_t*</a></p>\n\n<p>Now, when you have already defined <code>buff</code> as <code>char</code>, then why are you type-casting it to <code>LPCWSTR</code>. For more reference on <code>LPCWSTR</code>, see this:: <a href=\"https://stackoverflow.com/questions/2230758/what-does-lpcwstr-stand-for-and-how-should-it-be-handled-with\">What does LPCWSTR stand for and how should it be handled with?</a></p>\n\n<p>So, basically, you should be calling <code>OutputDebugStringA(buff)</code>.</p>\n\n<p>Another solution is, define <code>buff</code> as wide char array,</p>\n\n<pre><code>wchar_t buff[100];\nwsprintf(buff, L\"[%d %d %d %d:%d:%d]\", timeinfo-&gt;tm_mday, \n     timeinfo-&gt;tm_mon + 1, timeinfo-&gt;tm_year + 1900, timeinfo-&gt;tm_hour, \n     timeinfo-&gt;tm_min, timeinfo-&gt;tm_sec);\nOutputDebugStringW(buff);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7784664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a89968bc558c35c70a356b90143f81?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/7784664/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490792013, "creation_date": 1490786033, "last_edit_date": 1490790653, "question_id": 43091950, "link": "https://stackoverflow.com/questions/43091950/show-current-time-on-output-window-in-visual-studio-2013-using-c", "title": "Show current time on output window in Visual Studio 2013 using C", "body": "<p>I am trying to display current time on output window of Visual Studio. I need it for debugging purpose. Since printf() output doesn't print to output window of Visual Studio, i need to use OutputDebugString().</p>\n\n<p>Code compiles correctly but output doesn't come out correctly. Can someone help me out here ? Thanks !</p>\n\n<pre><code>char buff[100];\ntime_t rawtime;\nstruct tm * timeinfo;\ntime(&amp;rawtime);\ntimeinfo = localtime(&amp;rawtime);\n\nsprintf(buff, \"[%d %d %d %d:%d:%d]\", timeinfo-&gt;tm_mday, timeinfo-&gt;tm_mon + 1, timeinfo-&gt;tm_year + 1900, timeinfo-&gt;tm_hour, timeinfo-&gt;tm_min, timeinfo-&gt;tm_sec);\nOutputDebugString(LPCWSTR(buff));\n</code></pre>\n\n<p>OUTPUT Window of Visual Studio prints :</p>\n\n<pre><code>?\u2039???????]\n</code></pre>\n\n<p>Expected: Date and time is printed correctly.</p>\n"}, {"tags": ["c", "pointers", "malloc"], "comments": [{"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1490786065, "post_id": 43091923, "comment_id": 73264975, "body": "This is C, why didn&#39;t you use the C++-Tag?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1490788755, "post_id": 43091923, "comment_id": 73266818, "body": "If this is C++, you should not use <code>malloc</code> and <code>free</code>, but <code>new</code> and <code>delete</code>. If this is C, you shouldn&#39;t tag it C++ and you shouldn&#39;t cast the result of <code>malloc</code>."}, {"owner": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1490797022, "post_id": 43091923, "comment_id": 73273452, "body": "thanks guys~ i fixed the tag~ will be careful next time~"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1490797325, "post_id": 43091979, "comment_id": 73273744, "body": "*p = x is the content of x, p = x is the memory address of x, right?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1490819952, "post_id": 43091979, "comment_id": 73289004, "body": "I recommend finding a pointer tutorial. I could answer your question, but you&#39;re obviously a beginner to pointers and will soon come to next stop. Pointers are tricky and there&#39;s lots of pitfalls."}, {"owner": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1492593950, "post_id": 43091979, "comment_id": 74037861, "body": "thanks klutt, i read a lot recent about pointer, heap, and malloc. I was very confuse about pointer when it declares, and when to use asterisk, but as a beginner on this, I thank you for your suggestion, help me a lot, much appreciated"}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1490786137, "creation_date": 1490786137, "answer_id": 43091979, "question_id": 43091923, "link": "https://stackoverflow.com/questions/43091923/function-pointer-equal-to-another-pointer-within-the-function-why-need-to-add/43091979#43091979", "title": "function pointer equal to another pointer within the function, why need to add *", "body": "<p>Because it is a pointer. That's just the syntax in c/c++.</p>\n\n<p>If you are using a pointer without the *, you are saying that you want the memory address. When you use the * you instead want the content on that address.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1490796449, "post_id": 43092279, "comment_id": 73272995, "body": "how is it different from as below int i = 2; int *p; p = i; printf(&quot;%d\\n&quot;,  p);"}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 0, "last_activity_date": 1490787058, "creation_date": 1490787058, "answer_id": 43092279, "question_id": 43091923, "link": "https://stackoverflow.com/questions/43091923/function-pointer-equal-to-another-pointer-within-the-function-why-need-to-add/43092279#43092279", "title": "function pointer equal to another pointer within the function, why need to add *", "body": "<p>If you just look at the line above the assignment, it says</p>\n\n<pre><code>Node *p = ...;\n</code></pre>\n\n<p>So <code>*p</code> is a <code>Node</code>. And so is <code>x</code> from the declaration <code>Node x = ...;</code></p>\n\n<p>If you want to assign one <code>Node</code> to another, you use their names <code>x</code> and <code>*p</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1490796953, "post_id": 43092424, "comment_id": 73273387, "body": "so Node *p = (Node *)malloc(sizeof(Node)); is not at the time of declaration? so i must declare  *p first, then set it equal to x? like int *p = x?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1490798965, "post_id": 43092424, "comment_id": 73275199, "body": "@LingLingLing <code>Node *p = (Node *)malloc(sizeof(Node));</code> declares <code>p</code> as a variable of type <code>Node *</code> and initializes it to the value on the right hand side of the <code>=</code>. It is &quot;at the time of declaration&quot; because it <i>is</i> a declaration of <code>p</code>. (It is also a <i>definition</i> of <code>p</code> with an <i>initializer</i>.)"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1490803218, "post_id": 43092424, "comment_id": 73278595, "body": "@LingLingLing No. You don&#39;t have to do it that way.  Node *p means that p is a pointer to a Node.  Node *p = (Node *)malloc(sizeof(Node)); means that the p points to a node whose memory is allocated in heap. This memory will be of the size of a Node but will be empty i.e it has size but not valid data. Now when you assign  *p(i.e content of memory that p is pointing to) = x you kind of copy the data stored in x to that segment of memory in heap to which p is pointing to. I suggest you read the fundamentals of dynamic memory allocation and pointers in c/c++ as this will help you in future."}, {"owner": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "edited": false, "score": 0, "creation_date": 1492593871, "post_id": 43092424, "comment_id": 74037807, "body": "hey, thanks for your help, i took some time in the book(kinda confusing), and asked friends, and of course you guys~ i think i have a clear understanding how how pointer works now~ but still a long way to go for a beginner, thanks again~"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1492596126, "post_id": 43092424, "comment_id": 74039477, "body": "Just for clarification. Node *p does not mean that p is a pointer to a Node. It means that whenever *p is invoked, the content at memory address p will be interpreted as a Node. In most cases you can get away with saying that it&#39;s a pointer to a Node, but it&#39;s important to understand why that&#39;s not 100% correct."}], "tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1490787551, "creation_date": 1490787551, "answer_id": 43092424, "question_id": 43091923, "link": "https://stackoverflow.com/questions/43091923/function-pointer-equal-to-another-pointer-within-the-function-why-need-to-add/43092424#43092424", "title": "function pointer equal to another pointer within the function, why need to add *", "body": "<p>*p has two meanings. 1) at the time declaration... Like you write int *p. It means you have declared a pointer to an integer. 2) Not at the time of declaration. *p will now simply mean the data stored in the memory address that p is pointing to. </p>\n"}], "owner": {"reputation": 37, "user_id": 7715019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10155154515814375/picture?type=large", "display_name": "LingLing Ling", "link": "https://stackoverflow.com/users/7715019/lingling-ling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490796026, "creation_date": 1490785972, "last_edit_date": 1490796026, "question_id": 43091923, "link": "https://stackoverflow.com/questions/43091923/function-pointer-equal-to-another-pointer-within-the-function-why-need-to-add", "title": "function pointer equal to another pointer within the function, why need to add *", "body": "<p>please take look at Node *newNode(), i dont understand why i must add * for p=x\ni made an Node named x(with data &amp; next), and created a new memory space *p by using malloc,\nthen let p = x, but by i must add * for p=x?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct Node{\n    int data;\n    Node *next;\n};\n\nNode *newNode(int data, Node *next){\n    Node x = {data, next};\n    Node *p = (Node *)malloc(sizeof(Node));\n    *p = x; //i dont understand why an * need to be added here\n    return p;\n}\n\nshowNode(const struct Node *p){\n    printf(\"%d\\n\", p-&gt;data);\n}\n\nint main(){\n    Node *pHead = NULL;\n    for(int i=4; i&gt;=0; i--) {\n        pHead = newNode(i,pHead);   \n    }    \n    printf(\"%d\\n\", pHead-&gt;next-&gt;next-&gt;next-&gt;data);\n\n    Node* p = pHead;\n    while(p != NULL){\n        showNode(p);\n        p = p-&gt; next;\n    }\n\n    p = pHead;\n    while(p != NULL){\n        Node *pTemp = p;\n        p = p-&gt;next;\n        free(pTemp);\n    }\n} \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 7, "creation_date": 1490786078, "post_id": 43091863, "comment_id": 73264991, "body": "1) <code>printf(&quot;%d&quot;, &amp;totalprice);</code> --&gt; <code>printf(&quot;%f\\n&quot;, totalprice);</code>"}, {"owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "edited": false, "score": 0, "creation_date": 1490786115, "post_id": 43091863, "comment_id": 73265022, "body": "after every <code>scanf</code> use <code>printf</code> to print the value of variable which have been read via <code>scanf</code>. Now check if the values are as expected or match what you provided."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1490786129, "post_id": 43091863, "comment_id": 73265033, "body": "2) <code>scanf(&quot;%s&quot;, &amp;cont);     } while (cont == &#39;y&#39; || cont == &#39;Y&#39;);</code> --&gt; <code>scanf(&quot;%s&quot;, cont);     } while (*cont == &#39;y&#39; || *cont == &#39;Y&#39;);</code>"}, {"owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "edited": false, "score": 0, "creation_date": 1490786285, "post_id": 43091863, "comment_id": 73265123, "body": "<code>while (cont[0] == &#39;y&#39; || cont[0] == &#39;Y&#39;);</code> instead of <code>while (cont == &#39;y&#39; || cont == &#39;Y&#39;);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490786342, "post_id": 43091863, "comment_id": 73265161, "body": "3) Put <code>#include &lt;string.h&gt;</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490792081, "post_id": 43091863, "comment_id": 73269219, "body": "These are all utterly common beginner mistakes that everyone learning C does. They are all addressed in chapter 1 of your beginner-level C programming book. Please read chapter 1. Then enable compiler warnings."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490792134, "post_id": 43091863, "comment_id": 73269270, "body": "<a href=\"http://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\">How to read / parse input in C? The FAQ</a>."}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490795069, "post_id": 43093131, "comment_id": 73271800, "body": "Did you run this code? I suspect that this will give problems: <code>scanf(&quot;%c &quot;, &amp;cont);</code>. There is a newline left in the input stream, and in any event, trailing whitespace in a <code>scanf()</code> format specifier is almost always wrong."}, {"owner": {"reputation": 31, "user_id": 6886285, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1cc77a650b578590cce0f1d5888d134?s=128&d=identicon&r=PG&f=1", "display_name": "Lachlan Langmead", "link": "https://stackoverflow.com/users/6886285/lachlan-langmead"}, "edited": false, "score": 0, "creation_date": 1490803822, "post_id": 43093131, "comment_id": 73279064, "body": "So my main issues was the fact I was using doubles rather than floats and that my formula for totalprice was wrong?"}, {"owner": {"reputation": 114, "user_id": 3721279, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001407486503/picture?type=large", "display_name": "Mukul", "link": "https://stackoverflow.com/users/3721279/mukul"}, "reply_to_user": {"reputation": 31, "user_id": 6886285, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1cc77a650b578590cce0f1d5888d134?s=128&d=identicon&r=PG&f=1", "display_name": "Lachlan Langmead", "link": "https://stackoverflow.com/users/6886285/lachlan-langmead"}, "edited": false, "score": 0, "creation_date": 1490850548, "post_id": 43093131, "comment_id": 73298335, "body": "@Lachlan Langmead your logic was right but you have mix the integer double operation try to avoid different data types operations but if you want to do such operations then you need to do typecast ."}, {"owner": {"reputation": 114, "user_id": 3721279, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001407486503/picture?type=large", "display_name": "Mukul", "link": "https://stackoverflow.com/users/3721279/mukul"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490850774, "post_id": 43093131, "comment_id": 73298413, "body": "@David Bowling yes i have run this code and i am able to get correct results and here space  in scanf(&quot;%c &quot;, &amp;cont); having a reason ,suppose you wont put space in it it will consider direct output because &quot;Enter&quot; is also a character so when we press enter it will consider as input and produce the results . try it once and let me know if you face any problem :)"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490851141, "post_id": 43093131, "comment_id": 73298546, "body": "Well, yes I have already tried it and it does not quite work. The previous call to <code>scanf()</code> to get <code>prodAmount</code> leaves a newline behind in the input stream. This newline is picked up by the <code>%c</code> in the next <code>scanf()</code>, so no matter what you select the loop is exited. If you fix this problem, then the problem with the trailing space in the format string <code>&quot;%c &quot;</code> will become apparent."}, {"owner": {"reputation": 114, "user_id": 3721279, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001407486503/picture?type=large", "display_name": "Mukul", "link": "https://stackoverflow.com/users/3721279/mukul"}, "edited": false, "score": 1, "creation_date": 1490853231, "post_id": 43093131, "comment_id": 73299402, "body": "Hi Devid i found my problem in the code i was leaving the &#39;\\n&#39; on stdin: form last scanf and yes if i put space before %c (corrected in my code above) then it solves the problem thnaks :)"}], "tags": [], "owner": {"reputation": 114, "user_id": 3721279, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001407486503/picture?type=large", "display_name": "Mukul", "link": "https://stackoverflow.com/users/3721279/mukul"}, "is_accepted": true, "score": 2, "last_activity_date": 1490853151, "last_edit_date": 1490853151, "creation_date": 1490789364, "answer_id": 43093131, "question_id": 43091863, "link": "https://stackoverflow.com/questions/43091863/why-is-my-answer-different-every-time/43093131#43093131", "title": "Why is my answer different every time?", "body": "<p>I have reviewed your code its just format specifier mistakes and there are some typecast problems you are calculating totalprice and but printing its address printf(\"%d\", &amp;totalprice);</p>\n\n<p>and where totalprice = prodAmount(int type) * productPrice(double) * tax(double) * discount(double)</p>\n\n<p>here if you will not do any type cast then it would always give some garbage data as output or integer value. please try below code this might help you </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar compID[30];\ndouble discount;\nchar prodID[30];\nfloat prodAmount = 0;\nfloat productPrice;\nfloat tax;\nfloat totalprice;\nint main() {\n\n    char cont = 0;\n\n    printf(\"What is your company ID? \");\n    scanf(\"%s\",compID);\n\n    if (strcmp(compID, \"BFSC\") == 0) {\n\n            discount = 1;\n            tax = 1.1;\n\n    }\n\n    do {\n\n            int itemPrice;\n\n            printf(\"What is the idea of the product you'd like to purchase? \");\n            scanf(\"%s\", prodID);\n\n            if (strcmp(prodID, \"FENG\") == 0) {\n\n                    productPrice = 12124.50;\n\n            }\n\n            printf(\"How many? \");\n            scanf(\"%f\",&amp;prodAmount);\n\n\n            printf(\"Do you want to purchase another item? (y/n) \");\n            scanf(\" %c\", &amp;cont);\n    } while (cont == 'y' || cont == 'Y');\n\n    totalprice = ((prodAmount * productPrice) * tax )* discount;\n\n    printf(\"%0.02f\\n\", totalprice);\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6886285, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1cc77a650b578590cce0f1d5888d134?s=128&d=identicon&r=PG&f=1", "display_name": "Lachlan Langmead", "link": "https://stackoverflow.com/users/6886285/lachlan-langmead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 43093131, "answer_count": 1, "score": -2, "last_activity_date": 1490853151, "creation_date": 1490785810, "question_id": 43091863, "link": "https://stackoverflow.com/questions/43091863/why-is-my-answer-different-every-time", "title": "Why is my answer different every time?", "body": "<p>I've been writing a program where you give a buyer company ID and product ID to a program and it'll give you the price based on company exclusive discounts and a few other discounts. </p>\n\n<p>However, every time I test it (with the same inputs), I get a completely different answer, usually hundreds of times larger than my intended answer. I'm still new to C and programming so a lot of the methods I've been using in this program I've never done before.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar compID[30];\ndouble discount;\nchar prodID[30];\nint prodAmount = 0;\ndouble productPrice;\ndouble tax;\ndouble totalprice = 0;\n\n\n\nint main() {\n\n    char cont[2];\n\n    printf(\"What is your company ID? \");\n    scanf(\"%s\", compID);\n\n    if (strcmp(compID, \"BFSC\") == 0) {\n\n        discount = 1;\n        tax = 1.1;\n\n    }\n\n    do {\n\n        int itemPrice;\n\n        printf(\"What is the idea of the product you'd like to purchase? \");\n        scanf(\"%s\", prodID);\n\n        if (strcmp(prodID, \"FENG\") == 0) {\n\n            productPrice = 12124.50;\n\n        }\n\n        printf(\"How many? \");\n        scanf(\"%d\", &amp;prodAmount);\n\n\n        printf(\"Do you want to purchase another item? (y/n) \");\n        scanf(\"%s\", &amp;cont);\n    } while (cont == 'y' || cont == 'Y');\n\n    totalprice = prodAmount*productPrice*tax*discount;\n    printf(\"%d\", &amp;totalprice);\n\n\n}\n</code></pre>\n\n<p>If i put BFSC as the company ID and FENG as the product ID, the answers i'm getting are 1 million plus, rather than 13336.95.</p>\n"}, {"tags": ["c", "while-loop", "do-while"], "comments": [{"owner": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 1, "creation_date": 1490785538, "post_id": 43091739, "comment_id": 73264612, "body": "You havent included the portion where you collect input and return Y/N .. and try the loop..to be honest what you do in the loop is basically irrelevant."}, {"owner": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "reply_to_user": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 0, "creation_date": 1490785687, "post_id": 43091739, "comment_id": 73264720, "body": "yeah ive removed that because it just wasnt functioning at all, the question is asking how I can do that."}, {"owner": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 0, "creation_date": 1490785847, "post_id": 43091739, "comment_id": 73264842, "body": "Well, you have a while loop already, so you have the basics of a while loop - it would be easier to start with your not really working loop and fix.."}, {"owner": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "reply_to_user": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 0, "creation_date": 1490786123, "post_id": 43091739, "comment_id": 73265028, "body": "I guess maybe a better question is, is it possible for me to have a while loop within a do while loop?"}, {"owner": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "reply_to_user": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 0, "creation_date": 1490786149, "post_id": 43091739, "comment_id": 73265045, "body": "Thats what ive been trying to do anyway"}, {"owner": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 1, "creation_date": 1490786325, "post_id": 43091739, "comment_id": 73265144, "body": "yes you can have loops within loops within other types of loops"}, {"owner": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "reply_to_user": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 0, "creation_date": 1490787324, "post_id": 43091739, "comment_id": 73265828, "body": "Hi BugFinder, I&#39;ve edited the code in this post to show what ive been attempting to do, any help would be appreciated, apologies for not being very clear at the start"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1490787794, "post_id": 43091739, "comment_id": 73266145, "body": "I changed formatting - but did not change anything else (syntax errors!) to get the code more readable."}, {"owner": {"reputation": 15949, "user_id": 687262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x6GN0.png?s=128&g=1", "display_name": "BugFinder", "link": "https://stackoverflow.com/users/687262/bugfinder"}, "edited": false, "score": 0, "creation_date": 1490787808, "post_id": 43091739, "comment_id": 73266152, "body": "Your problem is simple .. and a common mistake.  &quot;while(userInput == &#39;y&#39;);&quot;  so this will basically hang your machine if you press y.. you need to move it to the outside of that } below, and it should work"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1490790688, "post_id": 43091739, "comment_id": 73268208, "body": "It stops at 20000 Hz <i>and</i> if a control is moved, but you only ask for restart at 20000 Hz - intended or do you want to restart after both stop conditions?"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 7738357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lz7kAqNMTlM/AAAAAAAAAAI/AAAAAAAAAM0/zFr0En2B_8c/photo.jpg?sz=128", "display_name": "Sunny Batabyal", "link": "https://stackoverflow.com/users/7738357/sunny-batabyal"}, "is_accepted": true, "score": 4, "last_activity_date": 1490790754, "last_edit_date": 1490790754, "creation_date": 1490787940, "answer_id": 43092583, "question_id": 43091739, "link": "https://stackoverflow.com/questions/43091739/in-c-programming-make-a-do-while-loop-to-ask-user-if-they-want-the-program-to-ru/43092583#43092583", "title": "In C programming make a Do-While loop to ask user if they want the program to run again", "body": "<p>Your concept is correct, but you have just missed the syntax of <code>do while</code> loop.</p>\n\n<p>It should be</p>\n\n<pre><code>do {\n\n} while(condition);\n</code></pre>\n\n<p>So, modified code will be</p>\n\n<pre><code>#include \"aservelibs/aservelib.h\"\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int frequency = 0.0;\n    int modulation = aserveGetControl(1);\n    printf(\"aserve get note control is %d\\n\", modulation);\n    char userInput;\n\n    do\n    {\n        while( frequency &lt; 20000.0 &amp;&amp; modulation == 0)\n        {\n            modulation = aserveGetControl(1);\n            aserveOscillator(0,frequency,1.0,0);\n            printf(\"The frequency is: %dHz\\n\", frequency);\n            frequency = frequency + 50.0;\n            aserveSleep(20);\n        }\n\n        printf(\"enter 'y' if you would like to repeat:  \");\n        scanf(\" %c\", &amp;userInput);\n    } while(userInput == 'y');\n\n    return(0);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "edited": false, "score": 0, "creation_date": 1490788790, "post_id": 43092595, "comment_id": 73266841, "body": "thanks alot for your help! that worked but it is only asking before the loop starts and not after the value of frequency is greater than 20000. So im trying to make it that it asks afterwards so the user has the option of hearing the sweep again."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "edited": false, "score": 0, "creation_date": 1490789253, "post_id": 43092595, "comment_id": 73267154, "body": "@ArchieWillis Perhaps reset the value of <code>frequency</code> and <code>modulation</code>?"}, {"owner": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "edited": false, "score": 0, "creation_date": 1490789392, "post_id": 43092595, "comment_id": 73267258, "body": "yes that worked!! thanks so much!! and everyone else for your help!"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 3, "last_activity_date": 1490790502, "last_edit_date": 1490790502, "creation_date": 1490787969, "answer_id": 43092595, "question_id": 43091739, "link": "https://stackoverflow.com/questions/43091739/in-c-programming-make-a-do-while-loop-to-ask-user-if-they-want-the-program-to-ru/43092595#43092595", "title": "In C programming make a Do-While loop to ask user if they want the program to run again", "body": "<p>At very first, you have a syntax error: The <code>while</code> clause has to be placed outside of the loop body:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>do\n{\n}\nwhile(someCondition); // here!\n</code></pre>\n\n<p>Variables defined inside the loop body are not accessible outside of it - so you need to declare them before:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>char userInput;\ndo\n{\n}\nwhile(userInput == 'y');\n</code></pre>\n\n<p>Apart from that, your code should work fine.</p>\n"}], "owner": {"reputation": 13, "user_id": 7784999, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154688429698547/picture?type=large", "display_name": "Archie Willis", "link": "https://stackoverflow.com/users/7784999/archie-willis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 43092583, "answer_count": 2, "score": 0, "last_activity_date": 1490790754, "creation_date": 1490785460, "last_edit_date": 1490787995, "question_id": 43091739, "link": "https://stackoverflow.com/questions/43091739/in-c-programming-make-a-do-while-loop-to-ask-user-if-they-want-the-program-to-ru", "title": "In C programming make a Do-While loop to ask user if they want the program to run again", "body": "<p>This program so far sweeps through the frequency range 0-20000 Hz and prints every 50 Hz on screen, it then stops when it reaches 20000 Hz. It also stops if I move a control on an on screen midi keyboard.</p>\n\n<p>Now what I'm trying to do is to modify it so that when it has reached 2000 Hz, instead of stopping, the program gives the user an option, something like \"Do you want to start this program again?\", and if the user types 'Y' then it will start again, but if the user types 'N' the program will stop. I believe a <code>do while</code> is what I'm looking for, but I've tried and just can't seem to get it to work.</p>\n\n<p>My Code:</p>\n\n<pre><code>#include \"aservelibs/aservelib.h\"\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int frequency = 0.0;\n    int modulation = aserveGetControl(1);\n\n    printf(\"aserve get note control is %d\\n\", modulation);\n\n    do\n    {\n        while( frequency &lt; 20000.0 &amp;&amp; modulation == 0)\n        {\n            modulation = aserveGetControl(1);\n            aserveOscillator(0,frequency,1.0,0);\n            printf(\"The frequency is: %dHz\\n\", frequency);\n            frequency = frequency + 50.0;\n            aserveSleep(20);\n        }\n\n        char userInput;\n        printf(\"enter 'y' if you would like to repeat: \");\n        scanf(\" %c\", &amp;userInput);\n        while(userInput == 'y');\n    }\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "makefile", "linux-kernel"], "comments": [{"owner": {"reputation": 20379, "user_id": 497934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba65fe61781731f1b551098a887b4212?s=128&d=identicon&r=PG", "display_name": "Maxpm", "link": "https://stackoverflow.com/users/497934/maxpm"}, "edited": false, "score": 0, "creation_date": 1490787631, "post_id": 43091647, "comment_id": 73266046, "body": "What does the <code>KERNEL_VERSION</code> macro look like?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1490791618, "post_id": 43091647, "comment_id": 73268859, "body": "Rather than passing <code>KERNEL_MAJOR</code>, <code>KERNEL_MINOR</code> and <code>KERNEL_MICRO</code> macros on the command line, the usual method of checking the kernel version in the preprocessor is to compare <code>LINUX_VERSION_CODE</code> with <code>KERNEL_VERSION(A,B,C)</code> in an <code>#if</code> directive. This doesn&#39;t work for the 4-level &quot;stable&quot; kernel version codes that used to be used in the 2.6 kernel days."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1490792877, "post_id": 43091647, "comment_id": 73269907, "body": "After macro expansion, your <code>#if</code> expression is no longer syntactically correct. You can&#39;t use <code>&amp;&amp;</code> and <code>||</code> operators to short-circuit bad syntax."}, {"owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "edited": false, "score": 0, "creation_date": 1490795019, "post_id": 43091647, "comment_id": 73271748, "body": "Hi, KERNEL_VERSION is not good for me, since kernel version 3.0.101 btrfs vfs driver is different between sub versions, and for each version i need to deal differently."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1490799684, "post_id": 43091647, "comment_id": 73275841, "body": "Yes, Linux vendors such as Red Hat and Ubuntu sometimes do crap like backporting kernel ABI changes willy-nilly."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1490800661, "post_id": 43091647, "comment_id": 73276601, "body": "... Or Suse in this case."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1490802905, "post_id": 43091647, "comment_id": 73278354, "body": "... Though I should point out that I don&#39;t know whether SUSE have changed the <i>public</i> interfaces to btrfs. I understand from your earlier questions that you&#39;re mucking around with the <i>private</i> interfaces."}, {"owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "edited": false, "score": 0, "creation_date": 1490812611, "post_id": 43091647, "comment_id": 73284644, "body": "Yup i use the private api because performance and since i compile the kernel module on specific machine and version i can &quot;enjoy&quot; the benefit of calling thd private api instead of calling inode operation-&gt;getattr(...)"}], "answers": [{"comments": [{"owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "edited": false, "score": 0, "creation_date": 1490787129, "post_id": 43092116, "comment_id": 73265691, "body": "Hi, thanks for response. My question is not regarding to &quot;defined but empty&quot; issue - I am aware to it, what I dont undestand is why macro with AND &amp;&amp; condition as: expression1 -&gt; expression2 -&gt;expression3, why if expression2 is false, the compiler will fail on expression 3 in compile time. it should not get there in the first place and go to the #else .."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "edited": false, "score": 0, "creation_date": 1490787820, "post_id": 43092116, "comment_id": 73266161, "body": "@ilansch, first of all you are doing some weird things (why in the first place you need such as above?). To your comment, on what ground you decide that expression2 is false?"}], "tags": [], "owner": {"reputation": 20379, "user_id": 497934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba65fe61781731f1b551098a887b4212?s=128&d=identicon&r=PG", "display_name": "Maxpm", "link": "https://stackoverflow.com/users/497934/maxpm"}, "is_accepted": false, "score": 0, "last_activity_date": 1490786551, "creation_date": 1490786551, "answer_id": 43092116, "question_id": 43091647, "link": "https://stackoverflow.com/questions/43091647/c-macro-and-makefile-and-expressions-not-work-as-expected/43092116#43092116", "title": "C macro and makefile and expressions not work as expected", "body": "<p>All the <code>#if</code> conditions pass because <code>KERNEL_PATCH_LEVEL</code> <em>is</em> defined.  It's just defined as an empty string.  <code>-DKERNEL_PATCH_LEVEL=</code> is equivalent to</p>\n\n<pre><code>#define KERNEL_PATCH_LEVEL\n</code></pre>\n\n<p>Which, of course, <a href=\"https://stackoverflow.com/questions/13892191/empty-macro-definition-in-c\">will pass an <code>#if (defined)</code> test</a>.</p>\n\n<p>It's <a href=\"https://stackoverflow.com/questions/3781520/how-to-test-if-preprocessor-symbol-is-defined-but-has-no-value\">somewhat difficult</a> to test if a macro is empty.  It might be easier to modify your makefile to define <code>KERNEL_PATCH_LEVEL</code> as some special value (like 0 or -1) if it isn't present in the version string.</p>\n"}, {"tags": [], "owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "is_accepted": false, "score": 1, "last_activity_date": 1490811529, "last_edit_date": 1490811529, "creation_date": 1490810655, "answer_id": 43100903, "question_id": 43091647, "link": "https://stackoverflow.com/questions/43091647/c-macro-and-makefile-and-expressions-not-work-as-expected/43100903#43100903", "title": "C macro and makefile and expressions not work as expected", "body": "<p>If you read: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.0.2/cpp_4.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc-3.0.2/cpp_4.html</a>, you will find:</p>\n\n<blockquote>\n  <p>The `#if' directive allows you to test the value of an arithmetic expression, rather than the mere existence of one macro. Its syntax is</p>\n  \n  <p>#if <em>expression</em> ...</p>\n  \n  <p><em>expression</em> is a C expression of integer type, subject to stringent restrictions. It may contain:</p>\n  \n  <p>...</p>\n  \n  <ul>\n  <li><p>Macros. <strong>All macros in the expression are expanded before actual computation of the expression's value begins</strong>.</p></li>\n  <li><p>Identifiers that are not macros, which are all considered to be the number zero. ...</p></li>\n  </ul>\n</blockquote>\n\n<p>So if you had:</p>\n\n<pre><code>#if defined(FOO) &amp;&amp; FOO == 1\n</code></pre>\n\n<p>And then didn't define foo, it would resolve the expression to:</p>\n\n<pre><code>0 &amp;&amp; 0 == 1\n</code></pre>\n\n<p>which would then resolve to <code>#if 0</code>, which is valid.   However, if you defined <code>FOO</code> to be blank, then it would resolve to:</p>\n\n<pre><code>1 &amp;&amp; == 1\n</code></pre>\n\n<p>The precompiler would then try to parse the expression, and get a syntax error, and fail.   Despite several comments that seem to be out on the web, the precompiler does not short-circuit the parsing of the expression, just the evaluation of the expression.</p>\n\n<p>If you wanted to get around this, you can use some macro trickery as follows:</p>\n\n<pre><code>#define COMBINE1(W,Y,Z) W##Y##Z\n#define COMBINE(W,Y,Z) COMBINE1(W,Y,Z)\n#define ISEMPTY(val)  COMBINE(val,4,val) == 4\n\n#if defined FOO\n#if ISEMPTY(FOO)\n#pragma message \"FOO DEFINED AS EMPTY\"\n#else\n#pragma message \"FOO DEFINED (NOT EMPTY)\"\n#endif\n#else\n#pragma message \"FOO NOT DEFINED\"\n#endif\n</code></pre>\n\n<p>which gives:  </p>\n\n<pre><code>~/sandbox/tst6&gt; gcc tst2.c\ntst2.c:12: note: #pragma message: FOO NOT DEFINED\n~/sandbox/tst6&gt; gcc tst2.c -DFOO=\ntst2.c:7: note: #pragma message: FOO DEFINED AS EMPTY\n~/sandbox/tst6&gt; gcc tst2.c -DFOO=1\ntst2.c:9: note: #pragma message: FOO DEFINED (NOT EMPTY)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": false, "score": 1, "last_activity_date": 1490813785, "creation_date": 1490813785, "answer_id": 43101917, "question_id": 43091647, "link": "https://stackoverflow.com/questions/43091647/c-macro-and-makefile-and-expressions-not-work-as-expected/43101917#43101917", "title": "C macro and makefile and expressions not work as expected", "body": "<p>You are right in believing that the C preprocessor, like the C compiler,\nperforms short-circuit evaluation of <code>&amp;&amp;</code>- and <code>||</code>-expressions.</p>\n\n<p>But you are wrong in believing the preprocessor, unlike the compiler,\ncan perform \"short-circuit\" evaluation of nonsensical token sequences,\nprovided that the nonsense is in one of the contexts:</p>\n\n<pre><code>TRUE || [nonsense]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>FALSE &amp;&amp; [nonsense]\n</code></pre>\n\n<p>Just like the compiler, any sequence the preprocessor can evaluate as an\nexpression, short-circuiting or not, must be a (well-formed) expression,\nwhich</p>\n\n<pre><code>FALSE &amp;&amp; ( == 0)\n</code></pre>\n\n<p>is not.</p>\n"}], "owner": {"reputation": 4454, "user_id": 1426106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/67b5bab68445cf71df9b77cef2fc3ec8?s=128&d=identicon&r=PG", "display_name": "ilansch", "link": "https://stackoverflow.com/users/1426106/ilansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1490813785, "creation_date": 1490785209, "question_id": 43091647, "link": "https://stackoverflow.com/questions/43091647/c-macro-and-makefile-and-expressions-not-work-as-expected", "title": "C macro and makefile and expressions not work as expected", "body": "<p>In my C code, I need to check my kernel version and act according to it.\nIn the makefile I have the following:  </p>\n\n<pre><code>KERNEL_MAJOR :=$(word 1, $(subst ., ,$(KERNEL_HEADERS)))\nKERNEL_MINOR :=$(word 2, $(subst ., ,$(KERNEL_HEADERS)))\nKERNEL_MICRO :=$(word 1, $(subst -, ,$(word 3, $(subst ., ,$(KERNEL_HEADERS)))))\nKERNEL_PATCH_LEVEL :=$(word 1, $(subst ., ,$(word 2, $(subst -, ,$(KERNEL_HEADERS)))))\nKARGS := KCPPFLAGS=\"-DKERNEL_MAJOR=$(KERNEL_MAJOR) -DKERNEL_MINOR=$(KERNEL_MINOR) -DKERNEL_MICRO=$(KERNEL_MICRO) -DKERNEL_PATCH_LEVEL=$(KERNEL_PATCH_LEVEL)\"\n</code></pre>\n\n<p>Samples:<br>\n<strong>3.0.101-0.47.71-default</strong> looks like:  </p>\n\n<pre><code>KCPPFLAGS=\"-DKERNEL_MAJOR=3 -DKERNEL_MINOR=0 -DKERNEL_MICRO=101 -DKERNEL_PATCH_LEVEL=0\"\n</code></pre>\n\n<p><strong>4.1.21.x86_64.1</strong> (notice KERNEL_PATCH_LEVEL):</p>\n\n<pre><code>KCPPFLAGS=\"-DKERNEL_MAJOR=4 -DKERNEL_MINOR=1 -DKERNEL_MICRO=21 -DKERNEL_PATCH_LEVEL=\"\n</code></pre>\n\n<p>I have macro in my code to check if kernel is 3.0.101.0 or 3.0.76.0:  </p>\n\n<pre><code>#if defined(KERNEL_MAJOR) &amp;&amp; defined(KERNEL_MINOR) &amp;&amp; defined(KERNEL_MICRO) &amp;&amp; defined(KERNEL_PATCH_LEVEL) &amp;&amp; \\\n    (KERNEL_VERSION(KERNEL_MAJOR,KERNEL_MINOR,KERNEL_MICRO) == KERNEL_VERSION(3,0,101) || KERNEL_VERSION(KERNEL_MAJOR,KERNEL_MINOR,KERNEL_MICRO) == KERNEL_VERSION(3,0,76)) \\\n    &amp;&amp; (KERNEL_PATCH_LEVEL == 0)\n</code></pre>\n\n<p>There are 3 &amp;&amp; boolean expressions, if expression #1 is ok, then i want to continue to expression #2, if expression #2 continue, i will continue to expression #3.\nWhen i try to compile (make..) on kernel version 4.1.21.x86_64.1 i receive:  </p>\n\n<pre><code>error: operator '==' has no left operand\n</code></pre>\n\n<p>This is because <strong>-DKERNEL_PATCH_LEVEL=\"</strong>  - see the output.<br>\nI would expect the make to prevent me from getting to that &amp;&amp; condition since expression #2 has failed (3.0.101 or 3.0.76)</p>\n"}, {"tags": ["python", "c", "function", "declaration", "analysis"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1490784870, "post_id": 43091485, "comment_id": 73264135, "body": "Perhaps you should show your regex? Furthermore I would suggest you use a (C-)parser that does the analysis for you. This will be more correct and will offer you more convenience."}, {"owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490785095, "post_id": 43091485, "comment_id": 73264303, "body": "re.findall(r&quot;\\w[\\w\\s\\.*]*&#40;[&#91;&#93;\\w\\s\\.,*]*&#41;\\s*[&zwnj;&#8203;;\\{]&quot;, content)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490790575, "post_id": 43091485, "comment_id": 73268123, "body": "Does your regex also incorrectly find a function in a string literal like &quot;unsigned    int  *hashfn(const char *str, ...);&quot;?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1490794119, "post_id": 43091485, "comment_id": 73270970, "body": "And how about forms such as <code>&#47;*</code>&lt;br/&gt;<code>unsigned int foo(void);</code>&lt;br/&gt;<code>*&#47;</code>, or <code>#if 0</code>&lt;br/&gt;<code>unsigned int foo(void);</code>&lt;br/&gt;<code>#endif</code>?"}, {"owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "edited": false, "score": 0, "creation_date": 1490799834, "post_id": 43091485, "comment_id": 73275967, "body": "Yes it finds functions in string too but it wrong too and yes wouldnt find function in /*...*/ comments but it does"}], "owner": {"reputation": 27, "user_id": 6205779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/067f1ee812b61068e7847c102b67e799?s=128&d=identicon&r=PG&f=1", "display_name": "krakra", "link": "https://stackoverflow.com/users/6205779/krakra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490790465, "creation_date": 1490784771, "last_edit_date": 1490790465, "question_id": 43091485, "link": "https://stackoverflow.com/questions/43091485/ignoring-c-function-declaration-in-comments", "title": "Ignoring C function declaration in comments", "body": "<p>I have a task to analyze declaration of functions in c in python.<br>\nMy regex finds all functions but it finds also declarations that are commented which is wrong like example:</p>\n\n<pre><code>unsigned    int  *hashfn(const char *str, ...);\n//unsigned int *hash_function(const char *str, unsigned int htab_size);\n</code></pre>\n\n<p>I need to ignore second function.<br>\nAny ideas?</p>\n"}, {"tags": ["c++", "c", "pointers", "syntax"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1490784186, "post_id": 43091251, "comment_id": 73263660, "body": "This dereferences the pointer <code>str</code> and assigns the value it points to to <code>c</code> and then compares <code>c</code> to zero."}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1490784247, "post_id": 43091251, "comment_id": 73263697, "body": "<code>*str</code> takes value from address of <code>str</code>; <code>c = *str</code> assigns this value to <code>c</code>; <code>(c = *str) != 0</code> checks if this value is not <code>NULL</code>. <code>NULL</code> is the end of string marker in C/C++, see &quot;null terminated string&quot; <a href=\"https://en.wikipedia.org/wiki/Null-terminated_string\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null-terminated_string</a>"}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1490784369, "post_id": 43091251, "comment_id": 73263767, "body": "Also you probably don&#39;t know that assignment has a value. For example one can write (a=(b=c)) == d in C/C++. Here each assignment is not just assigns value from right to left, but also returns it outside of the parentheses."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1490784395, "post_id": 43091251, "comment_id": 73263791, "body": "If the pointer passed is not pointing at a nul terminated string, bad ... bad ... undefined things start to happen, if you&#39;re using C++ you should be using <code>std::string</code>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 1, "creation_date": 1490784459, "post_id": 43091251, "comment_id": 73263840, "body": "@Dims <code>NULL</code> is used the depict null-pointer, not nul termination. Mixing those causes confusion. Also, no answers in comments, please."}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1490784511, "post_id": 43091251, "comment_id": 73263880, "body": "@user694733 see my Wiki link"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 1, "creation_date": 1490784572, "post_id": 43091251, "comment_id": 73263913, "body": "@Dims it&#39;s a null-terminated string not a NULL-terminated string - the character is a NUL not a NULL. I&#39;ve made this mistake myself in the recent past too :/"}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490784680, "post_id": 43091251, "comment_id": 73263995, "body": "@ChrisTurner okay, strictly speaking you are right."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490791190, "post_id": 43091313, "comment_id": 73268552, "body": "<code>!= 0</code> is redundant,  Yet so is this answer&#39;s alternative of the extra <code>()</code>  redundant.  Both serve the same purpose: to quiet compiler warnings and provide clarity that code is not <code>c == *str</code>.  Depending on <i>style</i> and experience, one is more preferred than the other."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1490785608, "last_edit_date": 1490785608, "creation_date": 1490784313, "answer_id": 43091313, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean/43091313#43091313", "title": "What does `(c = *str) != 0` mean?", "body": "<p>This expression has two parts:</p>\n\n<ul>\n<li><code>c = *str</code> - this is a simple assignment of <code>c</code> from dereferencing a pointer,</li>\n<li><code>val != 0</code> - this is a comparison to zero.</li>\n</ul>\n\n<p>This works, because assignment is an <em>expression</em>, i.e. it has a value. The value of the assignment is the same as the value being assigned, in this case, the <code>char</code> pointed to by the pointer. So basically, you have a loop that traces a null-terminated string to the end, assigning each individual <code>char</code> to <code>c</code> as it goes.</p>\n\n<p>Note that the <code>!= 0</code> part is redundant in C, because the control expression of a <code>while</code> loop is implicitly compared to zero:</p>\n\n<pre><code>while ((c = *str)) {\n    ...\n}\n</code></pre>\n\n<p>The second pair of parentheses is optional from the syntax perspective, but it's kept in assignments like that in order to indicate that the assignment is intentional. In other words, it tells the readers of your code that you really meant to write an assignment <code>c = *str</code>, and not a comparison <code>c == *str</code>, which is a lot more common inside loop control blocks. The second pair of parentheses also suppresses the compiler warning.</p>\n"}, {"tags": [], "owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "is_accepted": false, "score": 1, "last_activity_date": 1490784349, "creation_date": 1490784349, "answer_id": 43091330, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean/43091330#43091330", "title": "What does `(c = *str) != 0` mean?", "body": "<p><code>(c = *str)</code> is an <em>expression</em> and that has a value in itself. It is an <em>assignment</em>, the value of an assignment is the assigned value. So the value of <code>(c = *str)</code> is the value of <code>*str</code>.</p>\n\n<p>The code basically checks, whether the value of <code>*str</code>, which just has been assigned to <code>c</code> is not <code>0</code>. In case it isn't, then it will call the function <code>equiv</code> with that value.</p>\n\n<p>Once the <code>0</code> is assigned, this is the end of the string. The function has to stop reading from the memory, which it does.</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1490784388, "creation_date": 1490784388, "answer_id": 43091347, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean/43091347#43091347", "title": "What does `(c = *str) != 0` mean?", "body": "<p>It's looping over every character in the string <code>str</code>, assigning them to <code>c</code> and then seeing if <code>c</code> is equal to 0 which would indicate the end of the string. </p>\n\n<p>Although really the code should use <code>'\\0'</code> as that is more obviously a NUL character.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1490784585, "post_id": 43091357, "comment_id": 73263925, "body": "&quot;<i>... until it is not equal to zero ...</i>&quot; should read &quot;<i>... until it is equal to zero ...</i>&quot; shouldn&#39;t it?"}, {"owner": {"reputation": 584, "user_id": 4069931, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100001058415965/picture?type=large", "display_name": "Alexandr Derkach", "link": "https://stackoverflow.com/users/4069931/alexandr-derkach"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1490784899, "post_id": 43091357, "comment_id": 73264151, "body": "Right. Consequences of a literal translation from my language :)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490851627, "post_id": 43091357, "comment_id": 73298729, "body": "Putting strlen as the conditional check runs the risk of this becoming O(N * N). A compiler might optimise out but I wouldn&#39;t depend on that."}], "tags": [], "owner": {"reputation": 584, "user_id": 4069931, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100001058415965/picture?type=large", "display_name": "Alexandr Derkach", "link": "https://stackoverflow.com/users/4069931/alexandr-derkach"}, "is_accepted": false, "score": 0, "last_activity_date": 1490784827, "last_edit_date": 1490784827, "creation_date": 1490784404, "answer_id": 43091357, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean/43091357#43091357", "title": "What does `(c = *str) != 0` mean?", "body": "<p>We are going through the str in the while loop and extract every char symbol in it until it is equal to zero - the main rule of the end of char string.</p>\n\n<p>Here is 'for' loop equivalent:</p>\n\n<pre><code> for (int i = 0; i &lt; strlen(str); ++i )\n       std::cout &lt;&lt; str[i];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1490784648, "post_id": 43091379, "comment_id": 73263971, "body": "I think that you man that one is equivalent to the other (i.e. their equivalence is a tautology)."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1490784769, "post_id": 43091379, "comment_id": 73264063, "body": "I am not sure whether to call the assignment a &quot;side&quot; effect."}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1490786886, "post_id": 43091379, "comment_id": 73265539, "body": "Prefer <code>while ((c = *str))</code> in order to suppress any potential warnings about a mistaken <code>==</code>."}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1490787703, "post_id": 43091379, "comment_id": 73266091, "body": "@Bathsheba: without the parentheses, clang gives a warning &quot;using the result of an assignment as a condition without parentheses&quot;. In order to suppress it, you must either put the additional parens or pass <code>-Wno-parentheses</code>, of which I choose the former."}, {"owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "edited": false, "score": 0, "creation_date": 1490811290, "post_id": 43091379, "comment_id": 73283876, "body": "@Bathsheba: But complexity is not a virtue. (<a href=\"https://youtu.be/xnqTKD8uD64\" rel=\"nofollow noreferrer\">Funny opening by Herb Sutter</a>.) I prefer the first variant, I would even write <code>while ((c = *str) != &#39;\\0&#39;)</code> to make it clear that I am looking for the null terminator. The line <code>while (c = *str)</code> is correct, but I will wonder whether you really meant <code>==</code> there. The added parentheses work like a \u201csic\u201d and that is a good thing. Writing <code>strcpy(char *d, char *s) { while (*d++ = *s++); }</code> might be cool, but I wouldn&#39;t want to have that in my code."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "edited": false, "score": 0, "creation_date": 1490813414, "post_id": 43091379, "comment_id": 73285171, "body": "@MartinUeding: Perhaps I&#39;m old fashioned - and appeal to authority does nothing for me - and yes I would emit <code>while (*d++ = *s++);</code> into my codebase since it tells you exactly what is going on and is extremely descriptive (just make sure <code>d</code> is not <code>s</code> else the behaviour is UB). All the folk in my team are expected to know C and C++ in depth. But you do raise important points."}, {"owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "edited": false, "score": 0, "creation_date": 1490815969, "post_id": 43091379, "comment_id": 73286835, "body": "@Bathsheba: I agree that knowing the language in depth is a good thing. But that short <code>strcpy</code> has many things where it could go wrong. One example would be <code>*++d = *++s</code>. Or if the operators were binding like <code>(*d)++ = (*s)++</code>. So I would write it out in a few more lines. I tried to do a <a href=\"https://gist.github.com/martin-ueding/a62e9d0348a15544635a9fe29d59db73\" rel=\"nofollow noreferrer\">little benchmark</a>. The ultra short version seems to be a tad slower on occasion, but that might not be statistically significant. I do see, however, that the longer version is not slower, therefore I&#39;d take that one."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1490784789, "last_edit_date": 1490784789, "creation_date": 1490784484, "answer_id": 43091379, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean/43091379#43091379", "title": "What does `(c = *str) != 0` mean?", "body": "<p>Confusingly,</p>\n\n<p><code>while ((c = *str) != 0) {</code></p>\n\n<p>is a tautology of the considerably easier to read</p>\n\n<p><code>while (c = *str) {</code></p>\n\n<p>This also has the effect of assigning the character at <code>*str</code> to <code>c</code>, and the loop will terminate once <code>*str</code> is <code>\\0</code>; i.e. when the end of the string has been reached.</p>\n\n<p>Assignments within conditionals such as the above can be confusing on first glance, (cf. the behaviour of the very different <code>c == *str</code>), but they are such a useful part of C and C++, you need to get used to them.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490786599, "creation_date": 1490786599, "answer_id": 43092138, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean/43092138#43092138", "title": "What does `(c = *str) != 0` mean?", "body": "<p>It is just sloppily written code. The intention is to copy a character from the string <code>str</code> into <code>c</code> and then check if it was the null terminator.</p>\n\n<p>The idiomatic way to check for the null terminator in C is an explicit check against <code>'\\0'</code>: </p>\n\n<pre><code>if(c != '\\0')\n</code></pre>\n\n<p>This is so-called self-documenting code, since the de facto standard way to write the null terminator in C is by using the octal escape sequence <code>\\0</code>.</p>\n\n<hr>\n\n<p>Another mistake is to use assignment inside conditions. This was recognized as bad practice back in the 1980s and since then every compiler gives a warning against such code, \"possibly incorrect assignment\" or similar. This is bad practice because assignment includes a side effect and expressions with side effects should be kept as simple as possible. But it is also bad practice because it is easy to mix up <code>=</code> and <code>==</code>.</p>\n\n<hr>\n\n<p>The code could easily be rewritten as something more readable and safe:</p>\n\n<pre><code>c = *str;\nwhile (c != '\\0')\n{\n  if(equiv(c, comp) != 0)\n  {\n    n++;\n  }\n  str++;\n  c = *str;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5516, "user_id": 2128327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG", "display_name": "Khaled.K", "link": "https://stackoverflow.com/users/2128327/khaled-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1490786901, "creation_date": 1490786901, "answer_id": 43092231, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean/43092231#43092231", "title": "What does `(c = *str) != 0` mean?", "body": "<p>You don't need <code>char c</code> since you already have the pointer <code>char *str</code>, also you can replace <code>!= 0</code> with <code>!= '\\0'</code> for better readability (if not compatibility)</p>\n\n<pre><code>while (*str != '\\0')\n{  \n    if (equiv((*str),comp)\n          != 0)\n    { n++; }\n\n    str++;   \n}\n</code></pre>\n\n<p>To understand what the code does, you can read it like this</p>\n\n<pre><code>while ( &lt;str&gt; pointed-to value is-not &lt;end_of_string&gt; )\n{\n    if (function &lt;equiv&gt; with parameters( &lt;str&gt; pointed-to value, &lt;comp&gt; )\n            returned non-zero integer value)\n    then { increment &lt;n&gt; by 1 }\n\n    increment pointer &lt;str&gt; by 1 x sizeof(char) so it points to next adjacent char\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7473258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x971j.png?s=128&g=1", "display_name": "Maxfield", "link": "https://stackoverflow.com/users/7473258/maxfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1942, "favorite_count": 0, "accepted_answer_id": 43091313, "answer_count": 7, "score": 4, "last_activity_date": 1490786901, "creation_date": 1490784087, "last_edit_date": 1490784298, "question_id": 43091251, "link": "https://stackoverflow.com/questions/43091251/what-does-c-str-0-mean", "title": "What does `(c = *str) != 0` mean?", "body": "<pre><code>int equiv (char, char);\nint nmatches(char *str, char comp) {\n    char c;\n    int n=0;\n    while ((c = *str) != 0) {  \n       if (equiv(c,comp) != 0) n++;\n      str++;\n    }\n    return (n);    \n}\n</code></pre>\n\n<p>What does \"(c = *str) != 0\" actually mean?\nCan someone please explain it to me or help give me the correct terms to search for an explanation myself?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "edited": false, "score": 0, "creation_date": 1490781947, "post_id": 43090332, "comment_id": 73262197, "body": "If you use array as left operand of <code>=</code> without <code>[]</code> operator it is automatically &#39;casted&#39; into pointer to first element of the array. Try it without <code>&amp;</code> operator, because it returns R value pointer to pointer value (I guess)."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "edited": false, "score": 0, "creation_date": 1490782019, "post_id": 43090332, "comment_id": 73262244, "body": "@nikachx you can not assign to an array."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1490782021, "post_id": 43090332, "comment_id": 73262246, "body": "Both errors can fixed by removing <code>&amp;</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490782059, "post_id": 43090332, "comment_id": 73262272, "body": "1) <code>if(!strcmp(buffer,&quot;NAME&quot;)) {</code> --&gt; <code>if(!strcmp(buffer,&quot;NAME\\n&quot;)) {</code>"}, {"owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1490782079, "post_id": 43090332, "comment_id": 73262280, "body": "@KamiKaze Ok, I think you are right."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490782166, "post_id": 43090332, "comment_id": 73262331, "body": "2) <code>read_str_from_config_line(value, &amp;(config-&gt;name));</code> --&gt; <code>read_str_from_config_line(value, config-&gt;name);</code> and Using uninitialize variable as <code>value</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 0, "creation_date": 1490782171, "post_id": 43090453, "comment_id": 73262333, "body": "alright thanks. what if i would like to printf config.name? How should i do it ?"}, {"owner": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 0, "creation_date": 1490782652, "post_id": 43090453, "comment_id": 73262642, "body": "So in the whole code i&#39;ll use config-&gt;name instead of config.name for everything that i will do related will struct now?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 0, "creation_date": 1490784296, "post_id": 43090453, "comment_id": 73263726, "body": "@JimYong If you have a pointer to a struct, access its members using <code>-&gt;</code>. So in your <code>read_config_file</code> function, use <code>config-&gt;name</code>, yes."}, {"owner": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 0, "creation_date": 1490784416, "post_id": 43090453, "comment_id": 73263807, "body": "ok thanks. problem now is at<code>config-&gt;port = read_int_from_config_line(value);</code> it&#39;s not reading to config-&gt;port."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 1, "creation_date": 1490784563, "post_id": 43090453, "comment_id": 73263907, "body": "@JimYong You are not intialising the <code>value</code> pointer that you are passing as an argument. Are you compiling with warnings enabled? You should have got a warning about that I think."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 0, "creation_date": 1490787678, "post_id": 43090453, "comment_id": 73266075, "body": "@JimYong I mean that you declared the variable, but didn&#39;t assign a value to it. Then you tried to use the value (that it didn&#39;t have...) in an expression."}, {"owner": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 0, "creation_date": 1490788690, "post_id": 43090453, "comment_id": 73266761, "body": "ah i see..but how do i go about of fixing it? I dont see where didnt i assign a value to it."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "edited": false, "score": 0, "creation_date": 1490788922, "post_id": 43090453, "comment_id": 73266935, "body": "@JimYong this is a problem with the logic of your program that can&#39;t be explained in a series of comments here. You never assign a value to the pointer; there is no expression that looks like <code>value = (something)</code>. As to what the value should actually be, that&#39;s complicated. Maybe ask a separate question. Try to restrict your question to one straightforward question. Right now it seems like your understanding of C just isn&#39;t good enough to be writing a program like this."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 2, "last_activity_date": 1490782430, "last_edit_date": 1490782430, "creation_date": 1490782026, "answer_id": 43090453, "question_id": 43090332, "link": "https://stackoverflow.com/questions/43090332/c-struct-pointers-return/43090453#43090453", "title": "C struct pointers return", "body": "<pre><code>                read_str_from_config_line(value, &amp;(config-&gt;name));\n</code></pre>\n\n<p>confg->name is declared as a <code>char</code> array, which naturally decays to a pointer to the first element (of type \"pointer-to-<code>char</code>\") if you omit the <code>&amp;</code>:</p>\n\n<pre><code>                read_str_from_config_line(value, config-&gt;name);\n</code></pre>\n\n<p>Taking its address explicitly instead results in a pointer of type pointer-to-array-of-20-<code>char</code>s, which is not the same type as pointer-to-<code>char</code> - which is why you are getting an error. This is a common source of confusion in C; in general, you should not take the address of an array (although it does have legitimate use cases).</p>\n\n<p>In this line:</p>\n\n<pre><code>            &amp;(config-&gt;port) = read_int_from_config_line(value);\n</code></pre>\n\n<p>You are taking the address of the <code>port</code> member of the structure pointed at by <code>config</code>, which is a non-lvalue pointer. It looks like you are actually trying to assign to the member, so the line should read:</p>\n\n<pre><code>            config-&gt;port = read_int_from_config_line(value);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1490782026, "creation_date": 1490782026, "answer_id": 43090454, "question_id": 43090332, "link": "https://stackoverflow.com/questions/43090332/c-struct-pointers-return/43090454#43090454", "title": "C struct pointers return", "body": "<p>The <code>&amp;</code> operator means \"take the address of the object to the right\".</p>\n\n<p>This:</p>\n\n<pre><code>&amp;(config-&gt;port)\n</code></pre>\n\n<p>means \"take the address of the <code>port</code> member of the structure pointed to by <code>config</code>.</p>\n\n<p>You don't want to take the address, you just want to assign to the member. That's just:</p>\n\n<pre><code>config-&gt;port = ...\n</code></pre>\n\n<p>This is the same as <code>(*config).port</code>, but nobody writes it like that since the arrow operator is so convenient.</p>\n"}], "owner": {"reputation": 5, "user_id": 5939373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5995787930afbe1161a562029639c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Yong", "link": "https://stackoverflow.com/users/5939373/jim-yong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490782430, "creation_date": 1490781673, "question_id": 43090332, "link": "https://stackoverflow.com/questions/43090332/c-struct-pointers-return", "title": "C struct pointers return", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_BUFFER_SIZE 100   \n\ntypedef struct config_struct config_t ;\n\nstruct config_struct{\n    char name[20];\n        char ip[20];\n        int port;\n        char log[100];\n};\n\nint main(int argc, char *argv[]) {\n        config_t config;\n        read_config_file(argv[1], &amp;config);\n        return 0;\n}\n\nint read_int_from_config_line(char* config_line) {\n        int val = atoi(config_line);\n        return val;\n}\n\nvoid read_str_from_config_line(char* config_line, char* val) {\n        strncpy(val,config_line, MAX_BUFFER_SIZE);\n}\n\nvoid read_config_file(char* config_filename, config_t *config) {\n        FILE *fp;\n        char *value, buffer[MAX_BUFFER_SIZE];\n        fp = fopen(\"./settings.conf\", \"r\");\n        while (fgets(buffer, MAX_BUFFER_SIZE, fp) != NULL) {\n            if(!strcmp(buffer,\"NAME\")) {\n                    read_str_from_config_line(value, &amp;(config-&gt;name));\n        }   \n            if(!strcmp(buffer,\"PORT\")) {\n                &amp;(config-&gt;port) = read_int_from_config_line(value);\n                }\n\n        }\n}\n</code></pre>\n\n<p>I try to compile this code and it gives me a incompatible pointer type at read_str_from_config_line(value , &amp;(config->name)); and lvalue required as left operand of assignment  &amp;(config->port) = read_int_from_config_line(value);</p>\n\n<p>I am trying to return the stuct back to the main program but I'm having problem with the struct pointers.</p>\n\n<p>Any solution for it to be solve? \nPS: The code is a mess as I trying to shorten it. Any help will be good as I am still a beginner to C programming.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "unix", "printing", "printf", "octal"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1490779979, "post_id": 43089613, "comment_id": 73260860, "body": "<code>(argv[1] == &quot;777&quot;)</code> -&gt; <code>(strcmp(argv[1],&quot;777&quot;) == 0)</code>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1490780005, "post_id": 43089613, "comment_id": 73260888, "body": "<code>&quot;...&quot;</code> evaluates to a character array, you need to compare characters, not addresses."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490780128, "post_id": 43089613, "comment_id": 73260973, "body": "Sidenote: your code is terribly poor: consider to write a function that translates an octal digit to say &quot;rwx&quot; (for 7) otherwise your code will be painfully long and error prone to cover all cases."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1490780134, "post_id": 43089638, "comment_id": 73260980, "body": "Since you already found the proper canonical duplicate, just flag/close vote as duplicate rather then posting an answer."}], "tags": [], "owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "is_accepted": false, "score": 3, "last_activity_date": 1490779940, "last_edit_date": 1495542324, "creation_date": 1490779940, "answer_id": 43089638, "question_id": 43089613, "link": "https://stackoverflow.com/questions/43089613/my-program-wont-print-my-results/43089638#43089638", "title": "My program won&#39;t print my results", "body": "<p>Comparing strings in C doesn't work like this, you have to use <code>strcmp</code></p>\n\n<p>Instead of doing <code>if (argv[1] == \"XXX\")</code>, you should do <code>if (strcmp(argv[1], \"XXX\") == 0)</code></p>\n\n<p><a href=\"https://stackoverflow.com/q/8004237/2266261\">Read on here</a></p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1490781881, "post_id": 43089649, "comment_id": 73262147, "body": "The smug version would be <code>ch -= &#39;0&#39;; for(uint8_t i = 0; i&lt;3; i++) { result[i] = ch&amp;1&lt;&lt;2-i?i[&quot;rwx&quot;]:&#39;-&#39;; } result[3] = &#39;\\0&#39;;</code>. This version has... no advantage what-so-ever. But it looks cool."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1490780352, "last_edit_date": 1490780352, "creation_date": 1490779958, "answer_id": 43089649, "question_id": 43089613, "link": "https://stackoverflow.com/questions/43089613/my-program-wont-print-my-results/43089649#43089649", "title": "My program won&#39;t print my results", "body": "<pre><code>argv[1] == \"755\"\n</code></pre>\n\n<p>is <em>not</em> how you compare strings in C, you need to use:</p>\n\n<pre><code>strcmp (argv[1], \"755\") == 0\n</code></pre>\n\n<p>In any case, this \"brute force\" method is both totally unnecessary and unreliable (missing possibilities, only nine of the 512 possibilities are handled, even <em>without</em> taking into account setuid and setgid bits and so on).</p>\n\n<p>You would be better off having a function to evaluate <em>one</em> octal digit, such as:</p>\n\n<pre><code>static const char * permXlat (char octal) {\n    switch (octal) {\n        case '0' : return \"---\";\n        case '1' : return \"--x\";\n        case '2' : return \"-w-\";\n        case '3' : return \"-wx\";\n        case '4' : return \"r--\";\n        case '5' : return \"r-x\";\n        case '6' : return \"rw-\";\n    }\n    return \"rwx\";\n}\n</code></pre>\n\n<p>and then processing the argument one character at a time:</p>\n\n<pre><code>printf (\"%s%s%s\\n\",\n    permXlat (argv[1][0]),\n    permXlat (argv[1][1]),\n    permXlat (argv[1][2]));\n</code></pre>\n\n<p>adding whatever sanity checking you think is necessary (argument list size, character values and so on).</p>\n"}], "owner": {"reputation": 1, "user_id": 4522891, "user_type": "registered", "profile_image": "https://graph.facebook.com/888698397816946/picture?type=large", "display_name": "Liam Jones", "link": "https://stackoverflow.com/users/4522891/liam-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1490780014, "answer_count": 2, "score": 0, "last_activity_date": 1490781188, "creation_date": 1490779854, "last_edit_date": 1490781188, "question_id": 43089613, "link": "https://stackoverflow.com/questions/43089613/my-program-wont-print-my-results", "closed_reason": "Duplicate", "title": "My program won&#39;t print my results", "body": "<p>I recently wrote a brute force program to turn the octal data from permissions in Unix into the human readable form (e.g. <code>755 -&gt; rwxr-xr-x</code>) However whenever I run my program called <code>myperm</code> I don't get a result (e.g. <code>./myperm 755 -&gt; nothing</code>) and I'm not quite sure why can anyone help with this </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main (int argc, char *argv[])\n{\n       if (argv[1] == \"777\")\n       {\n          printf(\"rwxrwxrwx\");\n       }\n\n       else if (argv[1] == \"755\")\n       {\n            printf(\"rwxr-xr-x\");\n       }\n\n       else if (argv[1] == \"750\")\n       {\n            printf(\"rwxr-x---\");\n       }\n       else if (argv[1] == \"700\")\n       {\n            printf(\"rwxr-x---\");\n       }\n       else if (argv[1] == \"666\")\n       {\n            printf(\"rw-rw-rw\");\n       }\n       else if (argv[1] == \"664\")\n       {\n            printf(\"rw-rw-r--\");\n       }\n       else if (argv[1] == \"640\")\n       {\n            printf(\"rw-r-----\");\n       }\n       else if (argv[1] == \"600\")\n       {\n            printf(\"rw-------\");\n       }\n       else if (argv[1] == \"400\")\n       {\n            printf(\"r--------\");\n       }\nreturn (0);\n\n}\n</code></pre>\n"}, {"tags": ["c", "lua", "imagemagick", "ffi", "luajit"], "answers": [{"comments": [{"owner": {"reputation": 674, "user_id": 7234862, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1bc65adfa261a8660b5bc9255969a11c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/7234862/rahul"}, "edited": false, "score": 0, "creation_date": 1490854950, "post_id": 43094527, "comment_id": 73300218, "body": "thanks a lot emcconville. When I run your c program, it gives me an outoput like you have mentioned. But in my lua I always get boolean true of local t = lib.MagickGetImageHistogram(self.wand, tlen), when I print local t."}], "tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": true, "score": 1, "last_activity_date": 1490797748, "last_edit_date": 1490797748, "creation_date": 1490793053, "answer_id": 43094527, "question_id": 43089505, "link": "https://stackoverflow.com/questions/43089505/how-to-use-magickgetimagehistogram-of-imagemagick-c-api/43094527#43094527", "title": "How to use MagickGetImageHistogram of ImageMagick C API", "body": "<p>I'm not sure about the <a href=\"/questions/tagged/lua\" class=\"post-tag\" title=\"show questions tagged &#39;lua&#39;\" rel=\"tag\">lua</a> parts of the question, but the expected behavior <code>MagickGetImageHistogram</code> is as follows.</p>\n\n<ol>\n<li>Method will return an array of pixel pointers.</li>\n<li>Argument <code>size_t *number_colors</code> will be updated with the count of pixels in array.</li>\n<li>Each pixel in array will need to invoke method <code>PixelGetColorCount</code> to retrieve the sum of pixels used by image.</li>\n</ol>\n\n<p>Here's a quick example in C.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;wand/MagickWand.h&gt;\n\nint main(int argc, const char * argv[]) {\n    // Prototype vars\n    MagickWand * wand;\n    PixelWand ** histogram;\n    size_t histogram_count = 0;\n    // Boot environment.\n    MagickWandGenesis();\n    // Allocate &amp; read image\n    wand = NewMagickWand();\n    MagickReadImage(wand, \"rose:\");\n    // Get Histogram as array of pixels\n    histogram = MagickGetImageHistogram(wand, &amp;histogram_count);\n    // Iterate over each pixel &amp; dump info.\n    for (int i = 0; i &lt; histogram_count; ++i)\n    {\n        printf(\"%s =&gt; %zu\\n\",\n               PixelGetColorAsString(histogram[i]),\n               PixelGetColorCount(histogram[i]));\n    }\n    // Clean-up\n    histogram = DestroyPixelWands(histogram, histogram_count);\n    wand = DestroyMagickWand(wand);\n    MagickWandTerminus();\n    return 0;\n}\n</code></pre>\n\n<p>This example will output the expected text...</p>\n\n<pre class=\"lang-txt prettyprint-override\"><code>// ...\nsrgb(48,45,43) =&gt; 1\nsrgb(50,45,42) =&gt; 2\nsrgb(50,44,43) =&gt; 5\nsrgb(51,45,43) =&gt; 1\n// ...\n</code></pre>\n\n<p>So I would guess your lua script would look something like..</p>\n\n<pre class=\"lang-lua prettyprint-override\"><code>***image.lua***\n\nlocal tlen = ffi.new(\"size_t[1]\")\nlocal t = lib.MagickGetImageHistogram(self.wand, tlen)\nfor i=0,tlen[0] do\n    handle_new_pixel(self, t[i], lib.PixelGetColorCount(t[i]))\nend\n</code></pre>\n"}], "owner": {"reputation": 674, "user_id": 7234862, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1bc65adfa261a8660b5bc9255969a11c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/7234862/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 43094527, "answer_count": 1, "score": 0, "last_activity_date": 1490797748, "creation_date": 1490779561, "question_id": 43089505, "link": "https://stackoverflow.com/questions/43089505/how-to-use-magickgetimagehistogram-of-imagemagick-c-api", "title": "How to use MagickGetImageHistogram of ImageMagick C API", "body": "<p>I have been using ImageMagick's C API using LuaJIT and FFI library and <a href=\"https://github.com/leafo/magick\" rel=\"nofollow noreferrer\">magick</a> lua module for this. Now I want to use <a href=\"https://www.imagemagick.org/api/magick-image.php#MagickGetImageHistogram\" rel=\"nofollow noreferrer\">MagickGetImageHistogram</a> method. So when it comes to pass an argument check my below code.</p>\n\n<pre><code>***image.lua***\n\nlocal len = ffi.new(\"size_t[?]\", 5)\nlocal t = handle_result(self, lib.MagickGetImageHistogram(self.wand, len))\n\n***lib.lua***\n\nlocal ffi = require(\"ffi\")\nlocal lib\nffi.cdef([[  typedef void MagickWand;\ntypedef void PixelWand;\n\ntypedef int MagickBooleanType;\ntypedef int ExceptionType;\ntypedef int ssize_t;\ntypedef int CompositeOperator;\ntypedef int GravityType;\ntypedef int OrientationType;\ntypedef int InterlaceType;\ntypedef char DistortMethod[];\n\nvoid MagickWandGenesis();\nMagickWand* NewMagickWand();\n\nPixelWand **MagickGetImageHistogram(MagickWand *wand, size_t *number_colors);\n</code></pre>\n\n<p>So I'm sure that my first argument is correct but not sure about second one.\nAnd it returns the image histogram as an array of PixelWand wands. So how do I convert it to LuaJIT structure?</p>\n"}, {"tags": ["c", "mongodb", "openssl", "mongo-c-driver"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1490781320, "post_id": 43089242, "comment_id": 73261811, "body": "<i>&quot;... and the cert has the correct hostname (server CN)&quot;</i> - <b><i><code>CN=www.example.com</code></i></b> is probably wrong. Hostnames always go in the <i>SAN</i>. If its present in the <i>CN</i>, then it must be present in the <i>SAN</i> too (you have to list it twice). For more rules and reasons, see <a href=\"http://stackoverflow.com/a/21340898/608639\">How do you sign Certificate Signing Request with your Certification Authority</a> and <a href=\"http://stackoverflow.com/q/10175812/608639\">How to create a self-signed certificate with openssl?</a> Two other items of interest: (1) TLS 1.0 and above; and (2) Server Name Indication (SNI)."}, {"owner": {"reputation": 241, "user_id": 1085824, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/af928d56781e8cd3d44fa00da7cc72e7?s=128&d=identicon&r=PG", "display_name": "sagioto", "link": "https://stackoverflow.com/users/1085824/sagioto"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1491155604, "post_id": 43089242, "comment_id": 73416974, "body": "Thanks for the awesome input regarding the SSL setup, but there&#39;s still an issue with the mongoc driver, if the pem_file argument is left empty I get a seg fault even If I don&#39;t want to use a pem file"}], "owner": {"reputation": 241, "user_id": 1085824, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/af928d56781e8cd3d44fa00da7cc72e7?s=128&d=identicon&r=PG", "display_name": "sagioto", "link": "https://stackoverflow.com/users/1085824/sagioto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490781463, "creation_date": 1490778861, "last_edit_date": 1490781463, "question_id": 43089242, "link": "https://stackoverflow.com/questions/43089242/getting-segmentation-fault-when-not-specifying-pem-file-fo-ssl", "title": "Getting segmentation fault when not specifying PEM file fo SSL", "body": "<p>I'm using monoc 1.2.0 successfully,\nI'm now trying to add an SSL enabled connection in a two of modes:</p>\n\n<ol>\n<li>Only require SSL no certificate check</li>\n<li>Provide certificate and verify it including hostname</li>\n</ol>\n\n<p>For 1 I get segmentation fault:</p>\n\n<pre><code>#0 0x00002ac83368e3c8 in ssl23_connect () from libarepbase.so\n#1 0x00002ac83aedb8fc in ?? () from /usr/lib64/libssl.so.10\n#2 0x00002ac83ac78423 in mongoc_stream_tls_do_handshake () from libmongoc-1.0.so.0\n#3 0x00002ac83ac527f3 in mongoc_async_cmd_tls_setup () from libmongoc-1.0.so.0\n#4 0x00002ac83ac5226c in _mongoc_async_cmd_phase_setup () from libmongoc-1.0.so.0\n#5 0x00002ac83ac5241d in mongoc_async_cmd_run () from libmongoc-1.0.so.0\n#6 0x00002ac83ac51dbc in mongoc_async_run () from libmongoc-1.0.so.0\n#7 0x00002ac83ac6f47c in mongoc_topology_scanner_work () from libmongoc-1.0.so.0\n#8 0x00002ac83ac6d4d8 in _mongoc_topology_run_scanner () from libmongoc-1.0.so.0\n#9 0x00002ac83ac6d5f4 in mongoc_topology_select () from libmongoc-1.0.so.0\n#10 0x00002ac83ac59351 in mongoc_cluster_select_by_optype () from libmongoc-1.0.so.0\n#11 0x00002ac83ac5e126 in _mongoc_cursor_next () from libmongoc-1.0.so.0\n#12 0x00002ac83ac5e635 in mongoc_cursor_next () from libmongoc-1.0.so.0\n#13 0x00002ac83ac54e19 in _mongoc_client_command_simple_with_hint () from libmongoc-1.0.so.0\n#14 0x00002ac83ac54eeb in mongoc_client_command_simple () from libmongoc-1.0.so.0\n#15 0x00002ac83a80d983 in mongodb_new_client () from libarepmongodb.so\n</code></pre>\n\n<p>For 2 I get:\n<code>No suitable servers found ('serverselectiontryonce' set)</code>\nand error code: 120414</p>\n\n<p>The server conf is:</p>\n\n<pre><code>net:\n    ssl:\n        mode: requireSSL                            \n        PEMKeyFile: /etc/mongodb-ssl.pem\n</code></pre>\n\n<p>and the cert has the correct hostname (server CN).\nThe code looks a bit like this with <code>ssl=true</code> in the url to start the client and the line that updates <code>pem_file</code> is not being executed for mode 1:</p>\n\n<pre><code>mongoc_ssl_opt_t ssl_opts = *mongoc_ssl_opt_get_default();\nssl_opts.weak_cert_validation = TRUE;\nssl_opts.pem_file = \"path to pem here\";\nmongoc_client_set_ssl_opts(client, &amp;ssl_opts);\nbool ret = FALSE;\nbson_t cmd = BSON_INITIALIZER;\nbson_t reply;\n\nBSON_APPEND_INT32 (&amp;cmd, \"buildInfo\", 1);\n\nret = mongoc_client_command_simple (client, \"admin\", &amp;cmd, NULL, &amp;reply, error);`\n</code></pre>\n\n<p>When I run:\n<code>/mongo host/admin  -u user -p pass --ssl --sslAllowInvalidCertificates</code>\nI can login but I see:\n<code>2017-03-28T18:14:36.149+0300 W NETWORK  [thread1] SSL peer certificate validation failed: self signed certificate</code>\nBut I guess this is since I'm using self signed and <code>ssl_opts.weak_cert_validation = TRUE</code> should handle it?</p>\n"}, {"tags": ["c", "flex-lexer", "lex", "lexical-analysis", "lexical"], "answers": [{"tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": true, "score": 0, "last_activity_date": 1491002631, "last_edit_date": 1491002631, "creation_date": 1490952991, "answer_id": 43137373, "question_id": 43088952, "link": "https://stackoverflow.com/questions/43088952/lexical-analysis-using-lex/43137373#43137373", "title": "Lexical analysis using lex", "body": "<p>I did something very similar in our company project(s).</p>\n\n<p><strong>About tokens</strong></p>\n\n<p>I make enumerations for them and...</p>\n\n<p><strong>About next_token()</strong></p>\n\n<p>My intention was to store the whole token related information into an object with:</p>\n\n<ul>\n<li>the acutal token (an enumeration value)</li>\n<li>the lexeme (a std::string)</li>\n<li>the file position (consisting of a file name pointer, the line, and the column).</li>\n</ul>\n\n<p>Additionally, I wanted to use smart pointers with these generated objects, not to mention, they should be C++ objects.</p>\n\n<p>This is what I realized:</p>\n\n<ol>\n<li><p>It is easy to redefine the <code>yylex()</code> function. Thus, you can even rename it and change its signature.</p></li>\n<li><p>It is very difficult (if not impossible) to put this together with yacc/bison. The main issue was that data is passed from lex (generated code) to yacc/bison (generated code) using a C union (<code>%union</code> if I remember right). A C union and C++ objects -- that doesn't work well. (One object in C union may work but multiple definitely not.)</p></li>\n</ol>\n\n<p>For my luck, the 2nd issue was actually not existing for me because I use flex but write (meanwhile generate) recursive descent parsers (directly in C++).</p>\n\n<p>So, how to solve the 1st issue? This is from my code:</p>\n\n<pre><code>/// redefines proto for generated yylex function.\n#define YY_DECL \\\n  RF::YAMS::Sim::ActionScript::RefToken \\\n  RF::YAMS::Sim::ActionScript::Compiler::lex(yyscan_t yyscanner)\n</code></pre>\n\n<p>This is the <a href=\"http://dinosaur.compilertools.net/flex/manpage.html\" rel=\"nofollow noreferrer\">flex man page</a> where you find the documentation. To find explanation how to redefine the yylex function, please, search on this website for \"YY_DECL\".</p>\n\n<p>My parser calls <code>lex()</code> whenever it needs a new token.</p>\n\n<p>Notes:</p>\n\n<ol>\n<li><p>In my case, I renamed <code>yylex()</code> and even made it a method of my parser class. (I did this to simplify access of lexer to private parser variables.)</p></li>\n<li><p>I provided ful scope operators because the generated lex code does not consider any namespace I use in my C++ code.</p></li>\n<li><p>The <code>yyscan_t yyscanner</code> parameter has to be there because I generate re-entrant scanners. You have to decide whether or not it should be there. (Instead you could provide other arguments also.)</p></li>\n<li><p>The returned <code>RefToken</code> is a smart pointer to the produced token. (Smart pointers makes it very easy to produce and consume tokens in different \"places\" without the danger of memory leaks.)</p></li>\n</ol>\n\n<p>If the generated lexer shall be combined with a bison-generated parser it is probably not as easy. In this case, I would use static variables and organize queues to pass values from lexer to parser. This would work but is, of course, not as elegant and save as the above method.</p>\n\n<p><strong>About back_token()</strong></p>\n\n<p>Once you have a parser which consumes the tokens you may do with them whatever you want. In my case, one of the requirements was an option for back-tracking. Thus, from time to time I have to push back tokens to input. For this, I simply stack them in the parser. If a new token is required I check 1st whether this stack is empty. If not the uppermost token is popped else the <code>lex()</code> method is called to obtain a really new token. I guess a similar solution could be used to implement <code>back_token()</code> in your case.</p>\n\n<p><strong>About blanks</strong></p>\n\n<p>There are actually two types of rules (i.e. rule actions) in my lexer:</p>\n\n<ol>\n<li><p>actions which end up with <code>return new Token(...);</code></p></li>\n<li><p>actions which end up with <code>break;</code></p></li>\n</ol>\n\n<p>The latter I use to consume separators (i.e. blanks etc.) and even comments (the parser even does not see them). This works because the lexer is actually nothing else than a <code>switch()</code> wrapped in a <code>for()</code> loop. (I learnt this \"trick\" from the flex doc. where it is mentioned explicitly somewhere.)</p>\n\n<p><strong>What else...</strong></p>\n\n<p>Beside of <code>YY_DECL</code>, I redefined <code>YY_INPUT</code> also. I did this to use the lexer with C++ <code>std::stream</code> (instead of <code>yyin</code>).</p>\n\n<p>IMHO flex does provide a very comprehensive manual. However, whenever I'm in doubt I look into the C file generated by flex. There are these horrible <code>int</code> arrays for the finite automaton which I usually simply ignore. The rest is the infra-structure around them, and you will find your C actions (written in the lex rules) somewhere embedded. Examining the code around may make things clearer.</p>\n"}], "owner": {"reputation": 239, "user_id": 6882968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e36c5ad1d07d4304030c8009eed798?s=128&d=identicon&r=PG&f=1", "display_name": "user2323232", "link": "https://stackoverflow.com/users/6882968/user2323232"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1566, "favorite_count": 0, "accepted_answer_id": 43137373, "answer_count": 1, "score": 2, "last_activity_date": 1491002631, "creation_date": 1490778075, "last_edit_date": 1490788391, "question_id": 43088952, "link": "https://stackoverflow.com/questions/43088952/lexical-analysis-using-lex", "title": "Lexical analysis using lex", "body": "<p>Before I will show what I have done here is the assignment I have tried to do(I'm new so im not really sure if im doing it allright).</p>\n\n<pre><code>1.  Implement lexical analyzer (using FLEX), as follows:\n- Lexical analyzer supplies services next_token(), back_token()\n- Lexical analyzer reads text from the input file and identifies tokens. This \n   happens when function   next_token() is called. \n- When a token is identified in the input text, it should be stored in a data \n   structure. For each token, the following attributes are saved:\n   * token type\n   * token lexeme\n   * number of the line in the input text in which this token was found.\n- Blanks, tabs, new lines \u2013 are not tokens, and should be ignored\n- For each token, print (on a separate line) its type (e.g. rel_op , number , etc.) \n   and lexeme \n- Each operation, keyword, separation sign and each type of number should be \n   implemented as a token of a different kind\n- Kinds of tokens are coded with integer numbers, for example:\n        # define  ID_tok  1\n        # define COMMA_tok  2\n</code></pre>\n\n<p>using Flex I have written this:</p>\n\n<pre><code>%{\n#include&lt;stdio.h&gt;\nint line=1;\n# define  ID_tok  1\n# define COMMA_tok  2\n#define REL_OP_tok 3\n#define NUMBER_tok 4\n#define KEYWORDS_tok 5\n%}\nbinary_ar_op \"*\"|\"/\"|\"+\"|\"-\"\nrel_op \"==\"|\"!=\"|\"&gt;\"|\"&lt;\"|\"&lt;=\"|\"&gt;=\"\nid      [a-z][a-z0-9]*\nnumber    [\"+\"|\"-\"]?[0-9]*(\".\"[0-9]+)?\nkeywords \"prabegin\"|\"parend\"|\"task\"|\"begin\"|\"end\"|\"integer\"|\"real\"|\"do\"|\"until\"|\"od\"|\"send\"|\"accept\"\n\n%%\n\\n   {line++;  printf(\"\\n%d:\",line);}\n\n{binary_ar_op}+ {printf( \"An binary_ar_op: %s (%d) at line(%d)\\n\", yytext,\n                   atoi( yytext ),line);}\n\n{rel_op}+ {printf( \"An rel_op: %s (%d) at line(%d)\\n\", yytext,\n                   atoi( yytext ),line);}\n\n{id}+ {printf( \"An id: %s (%d) at line(%d)\\n\", yytext,\n                   atoi( yytext ),line);}\n\n\n{number}+ {printf( \"An number: %s (%d) at line(%d)\\n\", yytext,\n                   atoi( yytext ),line);}\n%%\nint yywrap()\n{\nreturn 1;\n}\nmain()\n{\nprintf(\"Enter a string of data\\n\");\nyylex();\n}\n</code></pre>\n\n<p>As you can see I already defined all the types I was suppost to, I do not understand how to implement next and back, some guideness whould be great,also I saved the line number , but I guess they mean other then what I wrote,\nI also dont understand the define part they wrote about.</p>\n\n<p>I know that this question seems odd, but I got this assignment without any guidness or explanation before, so I'm learning it on my own and I dont really understand all(Although I know the theory, thank you!).</p>\n"}, {"tags": ["java", "c", "sockets", "networking"], "comments": [{"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "edited": false, "score": 0, "creation_date": 1490777637, "post_id": 43088687, "comment_id": 73259231, "body": "Yes I can use Json, but I just have an Int so send. I think it would be too heavy and complicated just for that, isn&#39;t ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1490777722, "post_id": 43088687, "comment_id": 73259290, "body": "Do you check for error? What does <code>read</code> return?"}, {"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "edited": false, "score": 1, "creation_date": 1490777812, "post_id": 43088687, "comment_id": 73259348, "body": "How about: OutputStream os = sock.getOutputStream(); os.write((byte) c);"}, {"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "edited": false, "score": 0, "creation_date": 1490777834, "post_id": 43088687, "comment_id": 73259358, "body": "There is no error with read, I checked it"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490777865, "post_id": 43088687, "comment_id": 73259377, "body": "Why are you ignoring the return value of <code>read</code>? How many bytes did you receive?"}, {"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "reply_to_user": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "edited": false, "score": 0, "creation_date": 1490777878, "post_id": 43088687, "comment_id": 73259385, "body": "@GyuHyeonChoi Yes it works ! Thanks !"}, {"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490777927, "post_id": 43088687, "comment_id": 73259418, "body": "@KerrekSB I&#39;m not ignoring the return value. I deleted it for the post. I have it in my program."}, {"owner": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "edited": false, "score": 2, "creation_date": 1490778000, "post_id": 43088687, "comment_id": 73259471, "body": "I think DataOutputSteam is a Wrapper for easy communication for Java. To communicate with another program of different language, it would better to use the most primitive stream."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490778084, "post_id": 43088687, "comment_id": 73259527, "body": "@LucasPierrat: Well, what was it?"}, {"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "reply_to_user": {"reputation": 3671, "user_id": 4227175, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ce475809b37f81b6c7838ae53e451425?s=128&d=identicon&r=PG&f=1", "display_name": "ghchoi", "link": "https://stackoverflow.com/users/4227175/ghchoi"}, "edited": false, "score": 0, "creation_date": 1490778097, "post_id": 43088687, "comment_id": 73259535, "body": "@GyuHyeonChoi I think too, but I only knew DataOutputStream.. Thanks for your answer."}, {"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490778475, "post_id": 43088687, "comment_id": 73259828, "body": "@KerrekSB read returns 1"}, {"owner": {"reputation": 136032, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "edited": false, "score": 0, "creation_date": 1490779027, "post_id": 43088687, "comment_id": 73260210, "body": "You do know that a C <code>char</code> is a Java <code>byte</code>, right?"}, {"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "edited": false, "score": 0, "creation_date": 1490779140, "post_id": 43088687, "comment_id": 73260287, "body": "No, I didn&#39;t know.. But now yes."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1490784350, "post_id": 43088687, "comment_id": 73263757, "body": "If <code>read()</code> returns -1 you should have called <code>perror()</code> or its friends to tell us what the error was, and you should have posted what the error was in your qiestion."}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 6182023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c10d09ea3bfd51035b9288aa2577e99?s=128&d=identicon&r=PG&f=1", "display_name": "p0kR", "link": "https://stackoverflow.com/users/6182023/p0kr"}, "is_accepted": true, "score": 2, "last_activity_date": 1490782936, "creation_date": 1490782936, "answer_id": 43090827, "question_id": 43088687, "link": "https://stackoverflow.com/questions/43088687/send-data-over-sockets-from-java-program-to-c-program/43090827#43090827", "title": "Send data over sockets from Java program to C program", "body": "<p>in java a char is two bytes, you may use the java type \"byte\" to just send one byte. Or you have to support the two-byte character (unicode) sent by Java, to be printed in C.</p>\n\n<p>Yet I did not have the time to check the rest of your code, but this might be a start.</p>\n"}], "owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 43090827, "answer_count": 1, "score": 2, "last_activity_date": 1490782936, "creation_date": 1490777365, "last_edit_date": 1490777815, "question_id": 43088687, "link": "https://stackoverflow.com/questions/43088687/send-data-over-sockets-from-java-program-to-c-program", "title": "Send data over sockets from Java program to C program", "body": "<p>I'm trying to send data over network from a Java program to a C program.\nBut I don't know which type of data to use. I tried with a char.</p>\n\n<p>Here is my Java code : </p>\n\n<pre><code>DataOutputStream dos = new DataOutputStream(sock.getOutputStream());\nchar c = 'c';\ndos.writeChar(c);\n</code></pre>\n\n<p>And my C code : </p>\n\n<pre><code>char buffer[256];\nbzero(buffer, 256);\nread(newsockfd, buffer, 255);\nprintf(\"Here is the message: %c\\n\", buffer[0]);\n</code></pre>\n\n<p>\"Here is the message\" print nothing. I don't know if buffer[0] is empty or if the type is not compatible.</p>\n"}, {"tags": ["c", "file", "printf", "backspace"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1490777107, "post_id": 43088451, "comment_id": 73258858, "body": "Have you tried using <code>fseek</code> or <code>fsetpos</code>?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1490777639, "post_id": 43088451, "comment_id": 73259232, "body": "I asked because question says <i>&quot;From what I gather the only way to do this to a file would be if i memory mapped it, edit its contents, copy them to a new file and delete the old one.&quot;</i>. That sentence makes it sound like you want solution, but your comment indicates you want just explanation. You should <a href=\"https://stackoverflow.com/posts/43088451/edit\">edit</a> your question to make it clear what you expect from the answers."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1490777226, "creation_date": 1490777226, "answer_id": 43088628, "question_id": 43088451, "link": "https://stackoverflow.com/questions/43088451/why-backspace-b-does-not-work-as-intended-with-a-file/43088628#43088628", "title": "Why BACKSPACE (\\b) does not work as intended with a file?", "body": "<p>If you \"printf\" the <code>BS</code> character to the terminal, the latter interprets this so the cursor will be moved to the left.</p>\n\n<p>But if you \"fprintf\" the <code>BS</code> character to a file, then the <code>BS</code> character (which is just a byte) will simply be written into the file.</p>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1490777227, "creation_date": 1490777227, "answer_id": 43088629, "question_id": 43088451, "link": "https://stackoverflow.com/questions/43088451/why-backspace-b-does-not-work-as-intended-with-a-file/43088629#43088629", "title": "Why BACKSPACE (\\b) does not work as intended with a file?", "body": "<p>Cursors and line editing are things that consoles and terminals have, not files.</p>\n\n<p>You seem to misunderstand how files work.</p>\n\n<p>There's simply no concept of editing inside a file, it's a sequence of bytes. You can overwrite by using <code>fseek()</code> to move the current location (sometimes called \"the cursor\" but that's an analogy, it doesn't mean files act like text editors) and then writing the new data.</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 5, "last_activity_date": 1490777245, "creation_date": 1490777245, "answer_id": 43088636, "question_id": 43088451, "link": "https://stackoverflow.com/questions/43088451/why-backspace-b-does-not-work-as-intended-with-a-file/43088636#43088636", "title": "Why BACKSPACE (\\b) does not work as intended with a file?", "body": "<p>A file is just a collection of bytes that when read in by a program produce  (possibly) meaningful results like a picture or video or whatever. Unless the program knows that a backspace character should delete the proceeding character, it won't do anything.</p>\n\n<p>Your terminal is a program that has been written in just that way to react to special characters like backspace and knows what to do when it receives one though.</p>\n"}], "owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 43088636, "answer_count": 3, "score": 1, "last_activity_date": 1490777245, "creation_date": 1490776708, "last_edit_date": 1495542365, "question_id": 43088451, "link": "https://stackoverflow.com/questions/43088451/why-backspace-b-does-not-work-as-intended-with-a-file", "title": "Why BACKSPACE (\\b) does not work as intended with a file?", "body": "<p>I opened a (text) file, like so: <code>File *fp = fopen(\"findPattern2.txt\", \"w+\");</code> in which i have written text. The last character i have in there is a <code>,</code>. Now i want to delete that character using backspace. I've read the answers <a href=\"https://stackoverflow.com/questions/6792812/the-backspace-escape-character-b-in-c-unexpected-behavior/6793113\">here</a> that BACKSPACE only moves the cursor, then i have to overwrite that character by writing on top of it and this is what i do. So I did <code>fprintf(fp, \"\\b \\b\")</code> to completely erase the <code>,</code>, but instead this is what the file shows afterwards:<code>,BS BS</code>. All of these work with a terminal. Why not with a file?</p>\n\n<p>From what I gather the only way to do this to a file would be if i memory mapped it, edit its contents, copy them to a new file and delete the old one.</p>\n"}, {"tags": ["c", "stm32", "uart"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1490776248, "post_id": 43088209, "comment_id": 73258305, "body": "If you just started with microcontroller programming, creating a virtual &quot;bit-banged&quot; UART is not a good project, as it is a rather advanced task. Start by writing code that uses the available UART hardware instead. Also, are you sure that this isn&#39;t actually a hardware task? As in, how to translate the current modulated signal to voltage modulated &quot;TTL&quot; levels?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490776281, "post_id": 43088209, "comment_id": 73258324, "body": "That being said, this question is far too broad for SO. Also please note that questions asking where to find tutorials or other off-site resources are off-topic here."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 2, "creation_date": 1490778581, "post_id": 43088209, "comment_id": 73259893, "body": "Generally, I don&#39;t understand how will be modulated with voltage and current. How you UART input signal suppose to look like?"}, {"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1490794668, "post_id": 43088209, "comment_id": 73271433, "body": "Your question is unclear. Please describe this modulated signal in detail and what kind of STM32 controller do you have (full part number)."}], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 5388805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442ac392eb452e2af272e93a1815ee5b?s=128&d=identicon&r=PG&f=1", "display_name": "veeman", "link": "https://stackoverflow.com/users/5388805/veeman"}, "edited": false, "score": 0, "creation_date": 1491380675, "post_id": 43089126, "comment_id": 73521435, "body": "There is also an application note AN4457 from ST for emulated UART wich uses considered approach."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 719, "user_id": 5388805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442ac392eb452e2af272e93a1815ee5b?s=128&d=identicon&r=PG&f=1", "display_name": "veeman", "link": "https://stackoverflow.com/users/5388805/veeman"}, "edited": false, "score": 0, "creation_date": 1491380710, "post_id": 43089126, "comment_id": 73521465, "body": "Correct. That&#39;s why I mentioned that."}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1490778557, "creation_date": 1490778557, "answer_id": 43089126, "question_id": 43088209, "link": "https://stackoverflow.com/questions/43088209/create-virtual-uart-on-stm32-microcontroller/43089126#43089126", "title": "Create virtual uart on stm32 microcontroller", "body": "<p>If we are talking aobut baudrates for small (9600), then you can achieve this with timer and EXTI.\nOn EXTI set pin to rising and falling edge and between each IRQs check timer value.</p>\n\n<p>If value is greater than start and stop condition time, you failed, else you have to check time spent for EXTi and calculate whether you received 10101010 or 11001100 or any other combination.</p>\n\n<p>For TX mode, use timer for precise interrupts at bit slice for UART output data and create state machine for data output bit by bit.</p>\n\n<p>Another option is to use SPI as virtual UART.</p>\n"}], "owner": {"reputation": 345, "user_id": 7402897, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/660d276e5c398a797bf406e995a78a20?s=128&d=identicon&r=PG&f=1", "display_name": "Aeonos", "link": "https://stackoverflow.com/users/7402897/aeonos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490778557, "creation_date": 1490775978, "question_id": 43088209, "link": "https://stackoverflow.com/questions/43088209/create-virtual-uart-on-stm32-microcontroller", "title": "Create virtual uart on stm32 microcontroller", "body": "<p>I need to create a virtual uart port on a stm32 microcontroller. The pins are given and can be changed to timer input channels. The recieving signal is going to be modulated in current and voltage and i need to detect both. Those two pins can not be assigned to a uart. Does somebody has a tutorial or something, that can lead me in the right direction? I just started programming microcontrollers and i am still strugeling with all the timer, interrupts and details stuff.</p>\n"}, {"tags": ["c", "code-analysis", "vera++"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4169617, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VHMT4ctA_30/AAAAAAAAAAI/AAAAAAAAAEs/LNK782bBHC0/photo.jpg?sz=128", "display_name": "jeppejp", "link": "https://stackoverflow.com/users/4169617/jeppejp"}, "is_accepted": false, "score": 0, "last_activity_date": 1511860906, "creation_date": 1511860906, "answer_id": 47527921, "question_id": 43088157, "link": "https://stackoverflow.com/questions/43088157/c-code-analysis-with-vera/47527921#47527921", "title": "C Code analysis with vera++", "body": "<p>To check a file .c or .h run vera++ as</p>\n\n<pre><code>vera++ my_file.c\n</code></pre>\n\n<p>If you want to run only specific rules you can do</p>\n\n<pre><code>vera++ -R T013 my_file.c\n</code></pre>\n\n<p>I use the following to run vera++ on all files in src/ and include/ matching *.c and *.h</p>\n\n<pre><code>find src/ include/ -type f -regextype sed -iregex \".*/*\\.\\(c\\|h\\)\" -print | xargs vera++\n</code></pre>\n"}], "owner": {"reputation": 821, "user_id": 4953302, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6214968d94b08872c92ba43f392a5f49?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4953302/federico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511860906, "creation_date": 1490775829, "question_id": 43088157, "link": "https://stackoverflow.com/questions/43088157/c-code-analysis-with-vera", "title": "C Code analysis with vera++", "body": "<p>I would use vera++ to analyse several C libraries that I developed.</p>\n\n<p>These libraries are contained into 4 different folders and there isn't a main.c file. </p>\n\n<p>It is possible to check the libraries code with vera++? Or vera++ requires the main.c?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "overlap", "memcpy"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490775624, "post_id": 43088070, "comment_id": 73257922, "body": "When the standard says that some behavior is undefined, it means this <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Undefined_behavior</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1490775747, "post_id": 43088070, "comment_id": 73258004, "body": "Th man is telling you that the, if <code>src+n</code> address overlap <code>dst</code> the final data in <code>dst</code> can be whatever."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1490775835, "post_id": 43088070, "comment_id": 73258054, "body": "For <code>size_t</code> take a look at <a href=\"http://stackoverflow.com/questions/2550774/what-is-size-t-in-c\">this SO post</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490776040, "post_id": 43088070, "comment_id": 73258183, "body": "Is it the word &quot;overlap&quot; you don&#39;t understand?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4722851"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490776190, "post_id": 43088070, "comment_id": 73258271, "body": "@Michael Walz Yes!"}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 1, "creation_date": 1490776375, "post_id": 43088070, "comment_id": 73258378, "body": "It&#39;s nothing about memory leak. If you use <code>memcpy</code> at overlapped addresses, you will only lose some data."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490780603, "post_id": 43088070, "comment_id": 73261320, "body": "I took the liberty to fix the title into something more accurate. But also, you said that <code>memcpy</code> is found in stdlib.h which is incorrect. So I&#39;m curious what source you are learning C from, as it seems to be a bad one. The proper format of memcpy is <code>#include &lt;string.h&gt; void *memcpy(void * restrict s1, const void* restrict s2, size_t n);</code>. Copy/paste from the C standard C11 7.24.2.1."}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 4, "creation_date": 1490788191, "post_id": 43088409, "comment_id": 73266414, "body": "Why would a temporary memory area be required for memmove()?   One pointer compare will allow the copying to start at the appropriate end so that the source is not overwritten before it is read."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1490798033, "post_id": 43088409, "comment_id": 73274398, "body": "C does not specify that <code>memcpy()</code> nor <code>memmove()</code> use temporary memory or not.  They may, they might not."}, {"owner": {"reputation": 11, "user_id": 7784472, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nP5XeBTAYNU/AAAAAAAAAAI/AAAAAAAAAfs/Wcj67KITBJ8/photo.jpg?sz=128", "display_name": "urvi_189", "link": "https://stackoverflow.com/users/7784472/urvi-189"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1490865528, "post_id": 43088409, "comment_id": 73306764, "body": "Linux Programmer\u2019s Manual   :         The  memmove()  function copies n bytes from memory area src to memory area dest.  The memory areas may overlap: copying takes place as though the bytes in src are first copied into a temporary array that does not overlap src or dest, and the bytes are then copied from the temporary array to dest. @ThingyWotsit"}], "tags": [], "owner": {"reputation": 11, "user_id": 7784472, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nP5XeBTAYNU/AAAAAAAAAAI/AAAAAAAAAfs/Wcj67KITBJ8/photo.jpg?sz=128", "display_name": "urvi_189", "link": "https://stackoverflow.com/users/7784472/urvi-189"}, "is_accepted": false, "score": 1, "last_activity_date": 1490782597, "last_edit_date": 1490782597, "creation_date": 1490776595, "answer_id": 43088409, "question_id": 43088070, "link": "https://stackoverflow.com/questions/43088070/meaning-of-overlapping-when-using-memcpy/43088409#43088409", "title": "Meaning of overlapping when using memcpy", "body": "<p><code>memcpy</code> doesn't use any temporary memory to copy from <strong>src</strong> to <strong>dst</strong>.</p>\n\n<p>Let say:</p>\n\n<ul>\n<li><code>src</code> starts @104</li>\n<li><code>dst</code> starts @108</li>\n<li><code>src = \"abcdefgh\"</code></li>\n</ul>\n\n<p>Then <strong>'a'</strong> will be <strong>@104</strong> and <strong>'e'</strong> will be <strong>@108</strong>. </p>\n\n<p>Assuming char as 1 byte then after copying:</p>\n\n<ul>\n<li><code>dst = \"abcdabcd\"</code>.</li>\n</ul>\n\n<p>As <code>n</code> denotes length to be copied, it should always be an integer.</p>\n\n<p>To copy overlapping areas, you can use <a href=\"https://linux.die.net/man/3/memmove\" rel=\"nofollow noreferrer\"><code>memmove</code></a> function which uses temporary memory to copy.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 0, "creation_date": 1490777360, "post_id": 43088486, "comment_id": 73259043, "body": "I agreed a graph will be the best answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1490797879, "post_id": 43088486, "comment_id": 73274264, "body": "Nice graphics. Suggest adding comment about <code>memmove()</code> as an alternative.  Also that <code>size_t</code> is some <i>unsigned</i> type.  With &quot;<code>size_t n</code> is always an integer value?&quot;, some read that as &quot;<code>size_t n</code> is always an <code>int</code>?&quot; which it isn&#39;t."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 12, "last_activity_date": 1490803262, "last_edit_date": 1490803262, "creation_date": 1490776828, "answer_id": 43088486, "question_id": 43088070, "link": "https://stackoverflow.com/questions/43088070/meaning-of-overlapping-when-using-memcpy/43088486#43088486", "title": "Meaning of overlapping when using memcpy", "body": "<p>From the comments your problem is that you don't understand what \"overlapping\" means:</p>\n\n<p>Overlapping means this:</p>\n\n<p>Here the two memory regions <code>src</code> and <code>dst</code> do overlap:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wC1l6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wC1l6.png\" alt=\"enter image description here\"></a></p>\n\n<p>But here they don't:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nz9S7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nz9S7.png\" alt=\"enter image description here\"></a></p>\n\n<p>So if you have overlapping memory regions, then you cannot use <code>memcpy</code> but you have to use <code>memmove</code>.</p>\n\n<hr>\n\n<p><strong>Second question:</strong></p>\n\n<p>Yes, <code>size_t</code> is an unsigned integer type. The third argument is the number of bytes to copy, so it can hardly be anything else than an unsigned integer type.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10738241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DnCMu1S_if0/AAAAAAAAAAI/AAAAAAAAABM/z0zo9vwJ3Eo/photo.jpg?sz=128", "display_name": "krish sai", "link": "https://stackoverflow.com/users/10738241/krish-sai"}, "is_accepted": false, "score": -1, "last_activity_date": 1543831103, "creation_date": 1543831103, "answer_id": 53591287, "question_id": 43088070, "link": "https://stackoverflow.com/questions/43088070/meaning-of-overlapping-when-using-memcpy/53591287#53591287", "title": "Meaning of overlapping when using memcpy", "body": "<p>*)\nThe main difference between memcpy and memmove is,memcpy works on the same string but memmove works in separate memory by taking a copy of the string.<br>\n*)\nDue to this,overlapping happens in memcpy.<br>\nLet me explain you with an example.<br>\nI took a character array :    </p>\n\n<pre><code>char s[20]=\"alightechs\";\n</code></pre>\n\n<p>if i do the following operations separately,  </p>\n\n<pre><code>memmove(s+5,s,7);  \nmemcpy(s+5,s,7); \n\n\n\no/p for memmove is alighalighte  \no/p for memmove is alighalighal  \n</code></pre>\n\n<p>because moving or copying both happens single byte by byte.<br>\ntill alighaligh, there is no problem in both the cases because dest=alighte(7 is the number of chars to copy/move),<br>\nwhile memcpy i'm copying from 5th position,  </p>\n\n<pre><code>alightechs   \nalighaechs  \nalighalchs  \nalighalihs  \nalighaligs  \nalighaligh  \n</code></pre>\n\n<p>till here there is no problem,it copied aligh(5 letters)<br>\nas,memcpy works on the same string,<strong>6th letter</strong> will be <strong>a</strong> and <strong>7th letter</strong> will be <strong>l</strong><br>\ni.,e every time the string is getting updated which results in undefined o/p as below<br>\nat 6th letter copying,<br>\nthe updated string is s[20]=alighaligh<br>\nso we get now  </p>\n\n<pre><code>alighaligha  \nalighalighal  \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4722851"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5045, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1543831103, "creation_date": 1490775532, "last_edit_date": 1490780493, "question_id": 43088070, "link": "https://stackoverflow.com/questions/43088070/meaning-of-overlapping-when-using-memcpy", "title": "Meaning of overlapping when using memcpy", "body": "<p>I am trying to understand the function <code>memcpy()</code> which is defined in the C library <code>&lt;string.h&gt;</code></p>\n\n<p>Syntax: <code>void *memcpy(void*dst,const void*src,size_t n);</code></p>\n\n<p>I know that this function is used to copy the contents of the memory pointed by pointer <code>src</code> to the location pointed by the <code>dst</code> pointer and return a address pointed by <code>dst</code> pointer.</p>\n\n<p>I am not able to understand the following important statement regarding <code>memcpy()</code>:</p>\n\n<ul>\n<li>When using <code>memcpy()</code>, memory address should not overlap, if it overlaps then the <code>memcpy()</code> is undefined.</li>\n</ul>\n\n<p>Another query is:\nIs the value passed to third argument of the function i.e <code>size_t n</code> is always an integer value?</p>\n"}, {"tags": ["c", "string-comparison", "software-design", "strtok"], "comments": [{"owner": {"reputation": 449, "user_id": 7099204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKYBz.jpg?s=128&g=1", "display_name": "coderWorld", "link": "https://stackoverflow.com/users/7099204/coderworld"}, "edited": false, "score": 0, "creation_date": 1490778313, "post_id": 43088062, "comment_id": 73259696, "body": "@DavidBowling Isn&#39;t it simpler to use atoi() insead?"}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 0, "creation_date": 1490779996, "post_id": 43088062, "comment_id": 73260876, "body": "Isn&#39;t strtok obsolete? Use split."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1490787203, "post_id": 43088062, "comment_id": 73265743, "body": "@Marichyasana-- <code>strtok()</code> is not obsolete as of the C11 Standard, and there is no <code>split()</code> function in the Standard C Library."}, {"owner": {"reputation": 449, "user_id": 7099204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKYBz.jpg?s=128&g=1", "display_name": "coderWorld", "link": "https://stackoverflow.com/users/7099204/coderworld"}, "reply_to_user": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 0, "creation_date": 1490787418, "post_id": 43088062, "comment_id": 73265894, "body": "@Marichyasana split() is a more Pythonic way of doing things. The question was C specific."}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 0, "creation_date": 1490832868, "post_id": 43088062, "comment_id": 73293887, "body": "I may be wrong but doesn&#39;t strtok modify the source string? So not work with  const char[]"}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490833725, "post_id": 43088062, "comment_id": 73294097, "body": "@DavidBowling &#39;Software Engineering Institute&#39; at CMU seems to think it is obsolescent though <a href=\"https://www.securecoding.cert.org/confluence/display/c/MSC24-C.+Do+not+use+deprecated+or+obsolescent+functions\" rel=\"nofollow noreferrer\">securecoding.cert.org/confluence/display/c/&hellip;</a>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490838423, "post_id": 43088062, "comment_id": 73295231, "body": "@Marichyasana-- those are the CERT Secure Coding Standards; <code>strtok()</code> is listed under <i>Unchecked Obsolescent Functions</i>, along with <code>fprintf()</code>, <code>qsort()</code>, <code>memcpy()</code>, <code>sscanf()</code>, and a host of others that see regular use in code that is not mission critical. Further, this is listed not under <b>Rules</b>, but under <b>Recommendations</b>. The recommendation is not to use deprecated or obsolescent functions when more secure functions are available; note that the suggested replacement for <code>strtok()</code> is <code>strtok_s()</code>, from Annex K, which is optional and thus not portable."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490839139, "post_id": 43088062, "comment_id": 73295400, "body": "@Marichyasana-- you are correct that <code>strtok()</code> modifies the parse string, and so will not work with a string literal, or with an array of <code>const char</code>s. But OP had <code>char str[] = &quot;1.2.3.4&quot;;</code>, which is an initializer. Here, <code>str[]</code> is not a string literal, and is not <code>const</code>, so <code>strtok()</code> will work on this. If instead <code>char *str = &quot;1.2.3.4&quot;</code> were used, then there would be a problem because <code>str</code> would point to a string literal. BTW, that <code>strtok()</code> modifies the parse string is one of the issues that the CERT Standard has with <code>strtok()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490786166, "post_id": 43091880, "comment_id": 73265059, "body": "@coder1532-- you could probably use <code>strtok()</code> and store the results in an array if you need to keep the values from each of the fields, but I think that this method is simpler, if it compares the version numbers acceptably."}, {"owner": {"reputation": 449, "user_id": 7099204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKYBz.jpg?s=128&g=1", "display_name": "coderWorld", "link": "https://stackoverflow.com/users/7099204/coderworld"}, "edited": false, "score": 0, "creation_date": 1490787184, "post_id": 43091880, "comment_id": 73265731, "body": "Extremely helpful and works perfectly. But just for the sake of clarity was my implementation of strtok incorrect? So if I store the values in an array, how should I use atoi() to convert them to ints? Also, the use of the struct I created was a bit of an unnecessary overkill you think?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 449, "user_id": 7099204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKYBz.jpg?s=128&g=1", "display_name": "coderWorld", "link": "https://stackoverflow.com/users/7099204/coderworld"}, "edited": false, "score": 0, "creation_date": 1490787657, "post_id": 43091880, "comment_id": 73266056, "body": "Well, since <code>atoi()</code> is called outside of the loop, only the last token found is converted to an <code>int</code>. I think you meant to call this in the loop, and store the result in the appropriate field of your structure. But this would be easier to just store in an array with indices. You could count the number of fields first, then declare a VLA, and fill it with the version numbers."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 449, "user_id": 7099204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKYBz.jpg?s=128&g=1", "display_name": "coderWorld", "link": "https://stackoverflow.com/users/7099204/coderworld"}, "edited": false, "score": 0, "creation_date": 1490787857, "post_id": 43091880, "comment_id": 73266184, "body": "Another option would be to copy the whole version number string into another array (so you don&#39;t modify the original), and then filter out all of the decimal points. Then use <code>strtol()</code> to convert this to an integer for comparison. I suggested this in an earlier comment; the reason for <code>strtol()</code> here is that it allows checks for integer overflow, in case of long version number strings. Such checks could be added to the above code, but this is unlikely to have overflow issues, since each field is converted separately."}, {"owner": {"reputation": 449, "user_id": 7099204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKYBz.jpg?s=128&g=1", "display_name": "coderWorld", "link": "https://stackoverflow.com/users/7099204/coderworld"}, "edited": false, "score": 0, "creation_date": 1490835323, "post_id": 43091880, "comment_id": 73294485, "body": "Very useful. Acknowledged."}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 2, "last_activity_date": 1490785846, "creation_date": 1490785846, "answer_id": 43091880, "question_id": 43088062, "link": "https://stackoverflow.com/questions/43088062/how-to-use-strtok-properly-to-compare-versions/43091880#43091880", "title": "How to use strtok properly to compare versions?", "body": "<p>You could use <code>strtol()</code> for this, taking advantage of the tail pointer and skipping over the decimal points. This would allow comparison of each field.</p>\n\n<p>In the code below, starting from the first field, a positive value is returned if the first version number is greater than the second, or a negative value is returned if the first version number is less than the second. If the two version numbers are equal, the decimal point is skipped, and the next two fields are compared. If the the end of one string is reached and the fields have compared equal, the difference between the values indicated by the tail pointers is returned (so <code>1.0</code> is greater than <code>1</code>).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint ver_comp(char *, char *);\n\nint main(void)\n{\n    char *ver1 = \"12.3.2\";\n    char *ver2 = \"2.10\";\n    printf(\"%s - %s = %d\\n\", ver1, ver2, ver_comp(ver1, ver2));\n\n    ver1 = \"2.10\";\n    ver2 = \"6.0.0.3\";\n    printf(\"%s - %s = %d\\n\", ver1, ver2, ver_comp(ver1, ver2));\n\n    ver1 = \"2\";\n    ver2 = \"2.0\";\n    printf(\"%s - %s = %d\\n\", ver1, ver2, ver_comp(ver1, ver2));\n\n    ver1 = \"2.0.0.1.2\";\n    ver2 = \"2.0.0.2.2\";\n    printf(\"%s - %s = %d\\n\", ver1, ver2, ver_comp(ver1, ver2));\n\n    ver1 = \"1.2.3.4\";\n    ver2 = \"1.2.3.4\";\n    printf(\"%s - %s = %d\\n\", ver1, ver2, ver_comp(ver1, ver2));\n\n    return 0;\n}\n\nint ver_comp(char *v1, char *v2)\n{\n    int res = 0;\n    char *next_1 = v1;\n    char *next_2 = v2;\n\n    while (*next_1 != '\\0' &amp;&amp; *next_2 != '\\0') {\n        long x1 = strtol(v1, &amp;next_1, 10);\n        long x2 = strtol(v2, &amp;next_2, 10);\n\n        res = x1 - x2;\n        if (res) {\n            break;\n        }\n\n        if (*next_1 == '\\0' || *next_2 == '\\0') {\n            res = *next_1 - *next_2;\n            break;\n        }\n\n        v1 = next_1 + 1;\n        v2 = next_2 + 1;\n    }\n\n    return res;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>12.3.2 - 2.10 = 10\n2.10 - 6.0.0.3 = -4\n2 - 2.0 = -46\n2.0.0.1.2 - 2.0.0.2.2 = -1\n1.2.3.4 - 1.2.3.4 = 0\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 7099204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lKYBz.jpg?s=128&g=1", "display_name": "coderWorld", "link": "https://stackoverflow.com/users/7099204/coderworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 1, "accepted_answer_id": 43091880, "answer_count": 1, "score": 1, "last_activity_date": 1606778725, "creation_date": 1490775513, "last_edit_date": 1606778725, "question_id": 43088062, "link": "https://stackoverflow.com/questions/43088062/how-to-use-strtok-properly-to-compare-versions", "title": "How to use strtok properly to compare versions?", "body": "<p>I am trying to write a <strong>C program</strong> which <strong>compares 2 software version numbers</strong> (in the format \"12.3.2\", \"2.10\", \"6.0.0.3\" or \"2.0\") <strong>using strtok</strong> in C. <em>Also 1.0 is considered bigger than 1.</em> So, basically, <strong>compares 2 strings</strong> that represent version numbers. Trying to figure out a way for the code to work. I'm stuck at the point that how could I store these tokens? And then how could I compare them later? \nSo if:</p>\n\n<pre><code>v1&gt;v2 : return 1, \nv1==v2:return 0 \nv1&lt;v2: return -1. \n</code></pre>\n\n<p>The function signature could be:</p>\n\n<pre><code>int cmp(char *v1, char *v2){...}\n</code></pre>\n\n<p>(v1 and v2 are the version numbers.)\nAny suggestions? I'm practically new to C compared to Python or other object oriented programming languages(C#,java).</p>\n\n<p>Here's what I've tried so far: </p>\n\n<pre><code>struct version_t {\nint major;\nint minor;\nint build;\n</code></pre>\n\n<p>};</p>\n\n<pre><code>version_t parse_ver(const char* version_str) {\n   version_t res;\n   version_t r;\n   // Trying to use strtok_r to split the string, and atoi to convert \n   //tokens to ints\n  char *token;\n  char *rest = version_str;\n  while((token = strtok_r(rest,\".\",&amp;rest)))\n  {\n    res = token;\n  }\n  r = atoi(res);\n  return r;\n }\n</code></pre>\n\n<p>Initially I am just considering that versions are in the format 12.3.4(3 fields). I'm not sure how I could work with other sorts of version numbers like 1.34.2.5 or 1.0</p>\n\n<p>I would then use the parse_ver function twice to parse both the version numbers. If I could get the tokens and return them as integers I would later use a compare function to compare those integers and solve this problem. \nI wrote a small program to check how strtok works and I got the idea by writing something as the following:</p>\n\n<pre><code>void main(void)\n{\n  char str[] = \"1.2.3.4\";\n  char *token;\n  char *rest = str;\n\n  while((token = strtok_r(rest, \".\", &amp;rest)))\n  {\n    printf(\"token:%s\\n\", token);\n\n  }\n}\n</code></pre>\n\n<p>But I need to store the tokens in the struct somehow. Slightly confused here.</p>\n\n<p>Again, I'm pretty new to the C programming language and any kind of help would be really appreciated.  </p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 5673, "user_id": 282484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/54pCe.jpg?s=128&g=1", "display_name": "Luca Rocchi", "link": "https://stackoverflow.com/users/282484/luca-rocchi"}, "edited": false, "score": 0, "creation_date": 1490775577, "post_id": 43088017, "comment_id": 73257887, "body": "char * ptr  = str+3;  printf(&quot;%s&quot;,ptr);"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1490783057, "post_id": 43088017, "comment_id": 73262905, "body": "you can not write to the address of an array.... so <code>str = str+3;</code> is invalid. You need a new pointer for this. <code>char * str2 = str + 3;</code> or directly <code>printf(&quot;%s&quot;,str+3);</code> If it just the print you want"}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500445254, "post_id": 45178759, "comment_id": 77332719, "body": "<i>There&#39;s no fundamental reason why the language couldn&#39;t have made this work</i> - isn&#39;t avoiding an extra indirection a valid reason?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500473086, "post_id": 45178759, "comment_id": 77353257, "body": "Oh absolutely. The comment was aimed more at &quot;it&#39;s possible to envision a language where this works&quot; rather than &quot;silly C, you aren&#39;t designed well.&quot;"}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 0, "last_activity_date": 1500421324, "creation_date": 1500421324, "answer_id": 45178759, "question_id": 43088017, "link": "https://stackoverflow.com/questions/43088017/how-to-increase-the-base-address-of-this-string/45178759#45178759", "title": "How to increase the base address of this string?", "body": "<p>The line</p>\n\n<pre><code>str = str + 3;\n</code></pre>\n\n<p>isn't legal C code. In C, you can't assign one array variable to another. (There's no fundamental reason why the language couldn't have made this work; it's just not supported.)</p>\n\n<p>That being said, the expression <code>str + 3</code> is a perfectly legal expression that results in a pointer to the third (zero-indexed) element of the array. You could either print it by writing</p>\n\n<pre><code>printf(\"%s\\n\", str + 3);\n</code></pre>\n\n<p>or by writing</p>\n\n<pre><code>char* midPtr = str + 3;\nprintf(\"%s\\n\", midPtr);\n</code></pre>\n\n<p>Either approach works. That first one is probably easier if you just need to do this once, and the second one is a bit easier if you plan on using that pointer more than once.</p>\n"}], "owner": {"reputation": 71, "user_id": 7680012, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/171a114f06c29faf1d41dbd055020923?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/7680012/abhijit-sarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1500421385, "creation_date": 1490775398, "last_edit_date": 1500421385, "question_id": 43088017, "link": "https://stackoverflow.com/questions/43088017/how-to-increase-the-base-address-of-this-string", "title": "How to increase the base address of this string?", "body": "<p>I'm trying to get a pointer to the fourth element of this array, but I keep getting type mismatch errors when doing so. What am I doing wrong? How do I fix this?</p>\n\n<pre><code>    int main()\n    {\n        char str[]=\"0111010\";\n        str = str+3;\n        printf(\"%s\",str);\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490772295, "post_id": 43086977, "comment_id": 73255917, "body": "An address need to be an integer value."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490799386, "post_id": 43086977, "comment_id": 73275576, "body": "&quot;Pointer always stores a integer value&quot; --&gt; Only valid addresses can be stored in a pointer, not necessarily all integer values covert properly to a pointer.  Also pointer to integer conversion has its limitations too.  Especially if <code>intptr_t</code> is not defined or code attempts to convert a function pointer."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1490772451, "post_id": 43087041, "comment_id": 73256033, "body": "Also struct pointers need to know the members they can point to."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490772508, "post_id": 43087041, "comment_id": 73256062, "body": "@Barmar: Pinched that. That reason, along with the pointer arithmetic one are probably the two most important."}, {"owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "edited": false, "score": 0, "creation_date": 1490776068, "post_id": 43087041, "comment_id": 73258203, "body": "1. is not completely right as stated. Untyped pointer could assume object size of 1 as do compiler extensions that allow pointer arithmetic with <code>void *</code> like gcc. So untyped pointer do not make arithmetic impossible, they only do them unwieldy as one would have to include the implicit <code>sizeof *p</code> explicit."}, {"owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "edited": false, "score": 1, "creation_date": 1490776431, "post_id": 43087041, "comment_id": 73258410, "body": "2. is also not completely true when one knows how it was in the beginning of the C compilers at AT&amp;T. The field names of a struct were in the global name space (now they are in the struct&#39;s namespace) and they represented an offset from the beginning of the structure. The field name was in fact nothing more than a constant (what nowadays would be <code>offsetof(struct x, field)</code>). <code>a-&gt;b</code> is lowerd to <code>*(a+b)</code> anyways, so there is nothing preventing pointer arithmetic here."}, {"owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "edited": false, "score": 0, "creation_date": 1490776591, "post_id": 43087041, "comment_id": 73258526, "body": "3. This one is solid."}, {"owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "edited": false, "score": 0, "creation_date": 1490776796, "post_id": 43087041, "comment_id": 73258640, "body": "4. True. Harvard architectures with separate memory spaces and some mainframes have really strange pointer rules."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490777882, "post_id": 43087041, "comment_id": 73259388, "body": "Regarding 4, the C standard states that any pointer type may be converted to another pointer type and back again, without losing information. In practice this means that they will have the same size, or otherwise this C standard requirement will be very hard to fulfil."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1490798624, "post_id": 43087041, "comment_id": 73274911, "body": "@Lundin Detail: The round tripping of pointers does not apply to conversion to/from pointers between pointers to objects and pointers to functions.  Further the round tripping of object pointers is through <code>void*</code>.  <code>int*</code> to <code>char *</code> to <code>int*</code> need not work - it can lose information. C11 6.3.2.3 1"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 6, "last_activity_date": 1490774132, "last_edit_date": 1490774132, "creation_date": 1490772405, "answer_id": 43087041, "question_id": 43086977, "link": "https://stackoverflow.com/questions/43086977/c-pointers-about-the-different-data-type/43087041#43087041", "title": "C Pointers about the different data type", "body": "<p>Essentially it's because </p>\n\n<ol>\n<li><p><em>Pointer arithmetic</em> would not work if the pointer types were not explicit.</p></li>\n<li><p>The <em>pointer to member operator</em> would not work for <code>struct</code> pointer types.</p></li>\n<li><p>The <em>alignment</em> requirements for types can differ. It might be possible to store a <code>char</code> at a location where it's not possible to store an <code>int</code>.</p></li>\n<li><p>The sizes of pointers are not guaranteed to be the same by the C standard: i.e. <code>sizeof(int*)</code> is not necessarily the same as <code>sizeof(char*)</code>. This allows C to be used on exotic architectures.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490798961, "post_id": 43087083, "comment_id": 73275196, "body": "&quot;Any time you can use a pointer to void&quot; --&gt; A pointer to a function may not fit in a <code>void*</code>.  <code>void*</code> is not a universal  pointer type for all, but is universal for pointer to objects."}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490850431, "post_id": 43087083, "comment_id": 73298306, "body": "Correct, I have left a bit freedom to interpret the words ))"}], "tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1490772530, "creation_date": 1490772530, "answer_id": 43087083, "question_id": 43086977, "link": "https://stackoverflow.com/questions/43086977/c-pointers-about-the-different-data-type/43087083#43087083", "title": "C Pointers about the different data type", "body": "<p>To pass to the \"user\" of the pointer information about what kind of data the pointer points to. Basing on that it will/may depend how the pointed data will be interpreted and handled. Any time you can use a pointer to void, in this case that information is not available. Then, the user of that pointer should know from other sources what is pointed and how to work with it.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490777622, "post_id": 43087508, "comment_id": 73259220, "body": "<code>float* fp = (float*)&amp;d;</code> is not OK, it is a strict aliasing violation and undefined behavior if you attempt to use the pointed-at data. <a href=\"http://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">What is the strict aliasing rule?</a>."}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490778034, "post_id": 43087508, "comment_id": 73259493, "body": "@Lundin I don&#39;t know about strict aliasing violation. Which compiler has this action?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490778956, "post_id": 43087508, "comment_id": 73260168, "body": "All standard-compliant compilers have it. Although only gcc is known to actively abuse strict aliasing for optimization purposes. For example, code like <code>int a = 123; *(float*)&amp;a = 0.0f; if(a != 123){ printf(&quot;%d&quot;, a); } else { puts(&quot;a not changed&quot;); }</code> might print &quot;a not changed&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490798831, "post_id": 43087508, "comment_id": 73275102, "body": "A pointer to <code>int</code> and one to <code>float</code> may have different alignment requirements.  <code>float* fp = (float*)&amp;d;</code> is not OK."}], "tags": [], "owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "is_accepted": false, "score": -1, "last_activity_date": 1490773892, "creation_date": 1490773892, "answer_id": 43087508, "question_id": 43086977, "link": "https://stackoverflow.com/questions/43086977/c-pointers-about-the-different-data-type/43087508#43087508", "title": "C Pointers about the different data type", "body": "<p>Of course you can assign an address value to any type pointers.</p>\n\n<pre><code>int d;\nchar* cp = (char*)&amp;d;     // OK\nfloat* fp = (float*)&amp;d;   // OK\n</code></pre>\n\n<p>But when you get content from the address, you MUST know the type. Otherwise the compiler will not know how to interpret it.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6552688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22ae0f0cd0198af598ff53a37d76691?s=128&d=identicon&r=PG&f=1", "display_name": "massony875", "link": "https://stackoverflow.com/users/6552688/massony875"}, "is_accepted": false, "score": 0, "last_activity_date": 1490791762, "last_edit_date": 1490791762, "creation_date": 1490774467, "answer_id": 43087707, "question_id": 43086977, "link": "https://stackoverflow.com/questions/43086977/c-pointers-about-the-different-data-type/43087707#43087707", "title": "C Pointers about the different data type", "body": "<pre><code>int *c;\nchar r=a;\nc=&amp;a;\n</code></pre>\n\n<p>In your declaration a is just a character not a variable. \nA pointer when defined can only store  the address of a specific type of variable. If you declare c as int *c, the pointer can only point on variables of type integer.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490776536, "post_id": 43088153, "comment_id": 73258491, "body": "Do feel free to copy the 4 reasons from my answer, order to end up with a comprehensive answer."}, {"owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490777040, "post_id": 43088153, "comment_id": 73258805, "body": "No, it&#39;s ok that way. I wouldn&#39;t want to free ride on your answer which is good. I commented a little on them to because I&#39;m an annoying nitpicker :-) but it&#39;s ok as it is."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1490777117, "post_id": 43088153, "comment_id": 73258866, "body": "But you raise some very good points in my answer comments. And I&#39;ll be sure to upvote a comprehensive answer from you."}], "tags": [], "owner": {"reputation": 10492, "user_id": 146377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b36bf29056af38269b2147d5c36b94e?s=128&d=identicon&r=PG", "display_name": "Patrick Schl&#252;ter", "link": "https://stackoverflow.com/users/146377/patrick-schl%c3%bcter"}, "is_accepted": false, "score": 1, "last_activity_date": 1490775825, "creation_date": 1490775825, "answer_id": 43088153, "question_id": 43086977, "link": "https://stackoverflow.com/questions/43086977/c-pointers-about-the-different-data-type/43088153#43088153", "title": "C Pointers about the different data type", "body": "<p>Batcheba has already 4 good reasons. Let me give some less important ones:</p>\n\n<ul>\n<li><p>function pointer and data pointer are not even compatible according to the standard (<a href=\"https://en.wikipedia.org/wiki/Harvard_architecture\" rel=\"nofollow noreferrer\">Harvard architecture</a> with separate code and data address spaces, memory models of <a href=\"http://www.c-jump.com/CIS77/ASM/Memory/lecture.html\" rel=\"nofollow noreferrer\">segmented</a> architectures, etc.).</p></li>\n<li><p>the optimizer can exploit the fact that pointer on different types generally do not overlap and can elide a lot of memory loads that way (<a href=\"https://en.wikipedia.org/wiki/Pointer_aliasing\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Pointer_aliasing</a>)</p></li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 7784212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a0c205107713aa99b076c70e3e8d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Dante777", "link": "https://stackoverflow.com/users/7784212/dante777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1490863496, "creation_date": 1490772252, "last_edit_date": 1490863496, "question_id": 43086977, "link": "https://stackoverflow.com/questions/43086977/c-pointers-about-the-different-data-type", "title": "C Pointers about the different data type", "body": "<p>Pointer always stores a integer value i.e address so why do we need to declare them with different data type.</p>\n\n<p>Like</p>\n\n<pre><code>int a=3,*p=&amp;a;\nchar c=r,*cha=&amp;r;\n</code></pre>\n\n<p>why can't we do like</p>\n\n<pre><code>int *c;\nchar r=a;\nc=&amp;r;\n</code></pre>\n"}, {"tags": ["c", "data-structures", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490771848, "post_id": 43086771, "comment_id": 73255613, "body": "You <i>access</i> the data... <code>temp-&gt;prev-&gt;data</code> and such. Just don&#39;t dereference any NULL pointers."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6157345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2706f915510f1968d64f20dd19130d89?s=128&d=identicon&r=PG&f=1", "display_name": "harsher", "link": "https://stackoverflow.com/users/6157345/harsher"}, "edited": false, "score": 0, "creation_date": 1490773223, "post_id": 43087201, "comment_id": 73256524, "body": "How to get temp to store data of the first node. Because for comparing i need to start from first node."}, {"owner": {"reputation": 57, "user_id": 6157345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2706f915510f1968d64f20dd19130d89?s=128&d=identicon&r=PG&f=1", "display_name": "harsher", "link": "https://stackoverflow.com/users/6157345/harsher"}, "edited": false, "score": 0, "creation_date": 1490773443, "post_id": 43087201, "comment_id": 73256645, "body": "Can you please write the code for sort() function, in order to explain ur point."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "reply_to_user": {"reputation": 57, "user_id": 6157345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2706f915510f1968d64f20dd19130d89?s=128&d=identicon&r=PG&f=1", "display_name": "harsher", "link": "https://stackoverflow.com/users/6157345/harsher"}, "edited": false, "score": 3, "creation_date": 1490774207, "post_id": 43087201, "comment_id": 73257042, "body": "@harsher Manan&#39;s answer is perfectly clear.  It&#39;s difficult to imagine any way in which it could be clearer or explained better.  Implementing it means a bit of editing to put that indirection in and then retest.  You should do that work."}, {"owner": {"reputation": 197, "user_id": 4718232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c260452502e83ce1a63f1ea4c93dc83e?s=128&d=identicon&r=PG&f=1", "display_name": "maigar", "link": "https://stackoverflow.com/users/4718232/maigar"}, "reply_to_user": {"reputation": 57, "user_id": 6157345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2706f915510f1968d64f20dd19130d89?s=128&d=identicon&r=PG&f=1", "display_name": "harsher", "link": "https://stackoverflow.com/users/6157345/harsher"}, "edited": false, "score": 0, "creation_date": 1490791485, "post_id": 43087201, "comment_id": 73268761, "body": "@harsher Sorting is done in almost the same way as you would sort an array of numbers, there are various algorithms for that. Looking into them if you don&#39;t know how to."}], "tags": [], "owner": {"reputation": 197, "user_id": 4718232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c260452502e83ce1a63f1ea4c93dc83e?s=128&d=identicon&r=PG&f=1", "display_name": "maigar", "link": "https://stackoverflow.com/users/4718232/maigar"}, "is_accepted": true, "score": 1, "last_activity_date": 1490791360, "last_edit_date": 1490791360, "creation_date": 1490772909, "answer_id": 43087201, "question_id": 43086771, "link": "https://stackoverflow.com/questions/43086771/linked-list-how-to-sort-doubly-linked-list/43087201#43087201", "title": "Linked List: How to Sort Doubly Linked List?", "body": "<p><code>head</code>,<code>next</code> and <code>prec</code> in your <code>Node</code> struct are pointers and thus, they will just point to the respective node, in the same way as <code>temp</code>(in <code>sort()</code> function)is the pointer to the node you are currently accessing.</p>\n\n<p>For accessing the <code>data</code> of node pointed by <code>temp</code>, you will do <code>temp-&gt;data</code>. Similarly, if you want to access the data of the next node(having address <code>temp-&gt;next</code>), you will do <code>temp-&gt;next-&gt;data</code>.</p>\n\n<p>It seems, there is a problem with iterating through the linked list too.\nTo iterate forward in the linked list, you have to make <code>temp</code> point to the next node.</p>\n\n<pre><code>while(temp!=NULL)\n{\n    ...\n    temp=temp-&gt;next;\n}\n</code></pre>\n\n<p>This is how you can iterate through the list.</p>\n"}], "owner": {"reputation": 57, "user_id": 6157345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2706f915510f1968d64f20dd19130d89?s=128&d=identicon&r=PG&f=1", "display_name": "harsher", "link": "https://stackoverflow.com/users/6157345/harsher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3995, "favorite_count": 0, "accepted_answer_id": 43087201, "answer_count": 1, "score": 1, "last_activity_date": 1490791360, "creation_date": 1490771674, "question_id": 43086771, "link": "https://stackoverflow.com/questions/43086771/linked-list-how-to-sort-doubly-linked-list", "title": "Linked List: How to Sort Doubly Linked List?", "body": "<p>This is the code for my doubly linked list. It works fine. I need help with sorting the data elements of this linked list.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Node{\nint data;\nstruct Node* next;\nstruct Node* prev;\n};\nstruct Node* head;//global variable\n\nint GetNewNode(int x)\n{\nstruct Node* newNode=(struct Node*)malloc(sizeof(struct Node));\nnewNode-&gt;data=x;\nnewNode-&gt;prev=NULL;\nnewNode-&gt;next=NULL;\nreturn newNode;\n}\n\nint InsertAtHead(int x)\n{\nstruct Node* newNode =GetNewNode(x);\nif(head==NULL)//list empty\n{\n    head=newNode;\n    return;\n}\nhead-&gt;prev=newNode;\nnewNode-&gt;next=head;\nhead=newNode;\n}\n\nvoid print()\n{\nstruct Node* temp=head;//start printing from head\nprintf(\"Forward: \");\nwhile(temp!=NULL)\n{\n    printf(\"%d \",temp-&gt;data);\n    temp=temp-&gt;next;\n}\n    printf(\"\\n\");\n}\n\n   int main()\n   {\n   head=NULL;// initially taking it as null\n   InsertAtHead(2);print();\n   InsertAtHead(5);print();\n   InsertAtHead(3);print();\n   InsertAtHead(9);print();\n\n   return 0;\n   }\n</code></pre>\n\n<p>I want to sort the Data elements here.\nI tried this:</p>\n\n<pre><code>void sort()\n{\nstruct Node* temp=head;\nint numTemp;\nwhile(temp!=NULL)\n{\n    if(temp-&gt;prev &gt; temp-&gt;next)\n    {\n        numTemp=temp-&gt;next;\n        temp-&gt;next= temp-&gt;prev;\n        temp-&gt;prev=numTemp;\n    }\n}\n}\n</code></pre>\n\n<p>But this compares the address, not the data of the linked list, How do i compare data and sort them accordingly ?</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 4, "creation_date": 1490771633, "post_id": 43086652, "comment_id": 73255485, "body": "The last printf gets executed once in every recursive call, not just in the base case. There&#39;s no else after the if."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca82de8cbd48f61c548eae22048cd4eb?s=128&d=identicon&r=PG&f=1", "display_name": "akashdubey", "link": "https://stackoverflow.com/users/7784026/akashdubey"}, "edited": false, "score": 0, "creation_date": 1490801635, "post_id": 43086783, "comment_id": 73277364, "body": "why does this printf(&quot;C) d = %d\\n&quot;, d); statement executes 3 times, when it should have only been executed one time and come out of the loop and terminate ?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 31, "user_id": 7784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca82de8cbd48f61c548eae22048cd4eb?s=128&d=identicon&r=PG&f=1", "display_name": "akashdubey", "link": "https://stackoverflow.com/users/7784026/akashdubey"}, "edited": false, "score": 1, "creation_date": 1490804545, "post_id": 43086783, "comment_id": 73279547, "body": "@akashdubey: Why do you think it should have been executed only once? When you call a function, and the function returns, the execution continues at the statement following the function call. It seems like you think it should somehow return back to main."}, {"owner": {"reputation": 31, "user_id": 7784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca82de8cbd48f61c548eae22048cd4eb?s=128&d=identicon&r=PG&f=1", "display_name": "akashdubey", "link": "https://stackoverflow.com/users/7784026/akashdubey"}, "edited": false, "score": 0, "creation_date": 1490808826, "post_id": 43086783, "comment_id": 73282374, "body": "Because,When  n =1, the if (n&gt;1) condition fails and the control goes to printf(&quot;C) d = %d\\n&quot;, d); and it should come out the loop once it is executed, but it does not seem to do so. It executes the last printf statement two more times and this is what is confusing me."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 31, "user_id": 7784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca82de8cbd48f61c548eae22048cd4eb?s=128&d=identicon&r=PG&f=1", "display_name": "akashdubey", "link": "https://stackoverflow.com/users/7784026/akashdubey"}, "edited": false, "score": 0, "creation_date": 1490830155, "post_id": 43086783, "comment_id": 73293080, "body": "@akashdubey: There is no &quot;loop&quot;; this is recursion. When a function call returns, the execution continues in the caller normally, in the statement following the recursive call. In this case, after the innermost call <code>count(n==1)</code> prints the first <code>C) d=4</code>, the execution returns to the earlier recursive call, <code>count(n==2)</code>, which prints the second <code>C) d=4</code>, and then the execution returns to the first <code>count(n==3)</code> call, which prints the final <code>C) d=4</code>, before returning to <code>main()</code>."}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 3, "last_activity_date": 1490829953, "last_edit_date": 1490829953, "creation_date": 1490771716, "answer_id": 43086783, "question_id": 43086652, "link": "https://stackoverflow.com/questions/43086652/why-is-the-output-of-this-program-312213444-and-not-3122134/43086783#43086783", "title": "Why is the output of this program 312213444 and not 3122134?", "body": "<p>Rewrite your <code>printf()</code> statements (and fix your <code>main</code> declaration), for example into</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid count(int n)\n{\n    static int d=1;\n\n    printf(\"A) n = %d\\n\", n);\n    printf(\"B) d = %d\\n\", d);\n    d++;\n    if (n&gt;1)\n        count(n-1);\n    printf(\"C) d = %d\\n\", d);\n}\n\nint main(void)\n{\n    count(3);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Compile and run the code, and look at the output, and you shall understand.</p>\n\n<hr>\n\n<p>One technique that can help unravel recursive functions, is to unwrap a couple of the recursive calls into separate functions. Here, <code>main()</code> calls <code>count(3)</code>, which does a recursive call <code>count(2)</code>, which does a recursive call <code>count(1)</code>. We can change these recursive calls to calls to separate functions by repeating the function three times. We do need to change the <code>d</code> variable into a global, though, so that each of the function copies uses the same one, instead of separate copies that just happen to have the same name.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint d = 1;\n\nvoid count1(void)\n{\n    int n = 1;\n    printf(\"count1(): A) n = %d\\n\", n);\n    printf(\"count1(): B) d = %d\\n\", d);\n    d++;\n    /* The following is never true, so\n       we comment it out:\n      if (n&gt;1)\n          count0();\n    */\n    printf(\"count1(): C) d = %d\\n\", d);\n}\n\nvoid count2(void)\n{\n    int n = 2;\n    printf(\"count2(): A) n = %d\\n\", n);\n    printf(\"count2(): B) d = %d\\n\", d);\n    d++;\n    if (n&gt;1)\n        count1();\n    printf(\"count2(): C) d = %d\\n\", d);\n}\n\nvoid count3(void)\n{\n    int n = 3;\n    printf(\"count3(): A) n = %d\\n\", n);\n    printf(\"count3(): B) d = %d\\n\", d);\n    d++;\n    if (n&gt;1)\n        count2();\n    printf(\"count3(): C) d = %d\\n\", d);\n}\n\nint main(void)\n{\n    count3();\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>In this particular case, unraveling the recursive function should help understand control flow. (Specifically, that when you call another function, and the function returns, the execution continues in the caller in the statement following the function call.)</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 7784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca82de8cbd48f61c548eae22048cd4eb?s=128&d=identicon&r=PG&f=1", "display_name": "akashdubey", "link": "https://stackoverflow.com/users/7784026/akashdubey"}, "edited": false, "score": 0, "creation_date": 1490801779, "post_id": 43086810, "comment_id": 73277475, "body": "can you explain it again using some diagram or anything for what happens to the stack when the program executes ?"}], "tags": [], "owner": {"reputation": 1561, "user_id": 5721385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMvWp.png?s=128&g=1", "display_name": "DZDomi", "link": "https://stackoverflow.com/users/5721385/dzdomi"}, "is_accepted": false, "score": 0, "last_activity_date": 1490771785, "creation_date": 1490771785, "answer_id": 43086810, "question_id": 43086652, "link": "https://stackoverflow.com/questions/43086652/why-is-the-output-of-this-program-312213444-and-not-3122134/43086810#43086810", "title": "Why is the output of this program 312213444 and not 3122134?", "body": "<p>As you are recursively calling the function </p>\n\n<blockquote>\n  <p>count()</p>\n</blockquote>\n\n<p>you are putting each call of count() on the stack of your application. After the last call of count is finished you return to the last call of count, which also prints the static variable d (which is only initialized once) again and so on, until the stack is finally on top and it goes back to the main method. This is why you are getting the last two '4' in your output.</p>\n"}], "owner": {"reputation": 31, "user_id": 7784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca82de8cbd48f61c548eae22048cd4eb?s=128&d=identicon&r=PG&f=1", "display_name": "akashdubey", "link": "https://stackoverflow.com/users/7784026/akashdubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490829953, "creation_date": 1490771325, "last_edit_date": 1490771399, "question_id": 43086652, "link": "https://stackoverflow.com/questions/43086652/why-is-the-output-of-this-program-312213444-and-not-3122134", "title": "Why is the output of this program 312213444 and not 3122134?", "body": "<p>In the code given, the output that I can think of is 3122134 because the the last printf statement gets executed only once when n=1. so condition become 1>1 which is definitely not true and the loop exits and the last printf statement is executed. but the original output is 312213444. Why is it so ? Where am I going wrong ? kindly explain every concept and instance of it ? </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n void count (int n)\n {\n static int d=1;\n\n printf(\"%d\", n);\n printf(\"%d\", d);\n d++ ;\n if(n&gt;1)\n count(n-1);\n printf(\"%d\", d);\n }\n\n void main ()\n {\n count(3);\n }\n</code></pre>\n"}, {"tags": ["c++", "c", "audit"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1490771477, "post_id": 43086333, "comment_id": 73255381, "body": "Pick a language, C and C++ are two distinct languages."}, {"owner": {"reputation": 206, "user_id": 4914961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b05aad7fc74b0f7d0a54517056c242c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/4914961/amir-rossert"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1490779493, "post_id": 43086333, "comment_id": 73260511, "body": "It doesn&#39;t matter for me if it is C or C++"}], "answers": [{"tags": [], "owner": {"reputation": 568, "user_id": 2591870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MM73n.jpg?s=128&g=1", "display_name": "James Davis", "link": "https://stackoverflow.com/users/2591870/james-davis"}, "is_accepted": false, "score": 0, "last_activity_date": 1531180475, "last_edit_date": 1531180475, "creation_date": 1530813186, "answer_id": 51197327, "question_id": 43086333, "link": "https://stackoverflow.com/questions/43086333/auditd-real-time-events-processing-c-c/51197327#51197327", "title": "auditd real-time events processing C/C++", "body": "<p>You should use an Audit Dispatcher (audisp) plugin for this.</p>\n\n<p>Here are some resources:</p>\n\n<ul>\n<li><a href=\"https://www.suse.com/documentation/sles11/book_security/data/sec_audit_audisp.html\" rel=\"nofollow noreferrer\">SLES documentation</a> on audisp</li>\n<li><a href=\"http://security-plus-data-science.blogspot.com/2017/04/writing-basic-audispd-plugin.html\" rel=\"nofollow noreferrer\">Tutorial from auditd author</a></li>\n<li><a href=\"https://github.com/linux-audit/audit-userspace/blob/master/contrib/plugin/audisp-example.c\" rel=\"nofollow noreferrer\">Sample application</a> -- fill in the <code>handle_event</code> function</li>\n</ul>\n\n<p>For the number of records in an event, call <a href=\"http://man7.org/linux/man-pages/man3/auparse_get_num_records.3.html\" rel=\"nofollow noreferrer\">auparse_get_num_records</a>.</p>\n"}], "owner": {"reputation": 206, "user_id": 4914961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b05aad7fc74b0f7d0a54517056c242c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rossert", "link": "https://stackoverflow.com/users/4914961/amir-rossert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 523, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1531180475, "creation_date": 1490770283, "question_id": 43086333, "link": "https://stackoverflow.com/questions/43086333/auditd-real-time-events-processing-c-c", "title": "auditd real-time events processing C/C++", "body": "<p>I'm trying to write a process in C/C++ that will analyze auditd events in real time.</p>\n\n<p>Currently, I'm using the af_unix plugin to read the audit events from Unix socket (<code>/var/run/audisp_events</code> by default).</p>\n\n<p>I tried using <code>select()</code>, <code>recv()</code> to consume the events from the socket like this:</p>\n\n<pre><code>select(FD_SETSIZE, &amp;set, NULL, NULL, NULL);\nrecv(sockfd, message, size, MSG_DONTWAIT);\n</code></pre>\n\n<p>And then sending to auparse callback to parse the buffer similer to this <a href=\"https://github.com/packetstash/auditd/blob/master/contrib/plugin/audisp-example.c\" rel=\"nofollow noreferrer\">example</a>:</p>\n\n<pre><code>auparse_feed(au, buf, (size_t)len);\nauparse_flush_feed(au);\n</code></pre>\n\n<p>The issue here is that auditd events can be multi-records events (like SYSCALL) and use the <code>recv()</code> only consume some of the records and not all of them, so in the parsing callback, I don't have all the information.</p>\n\n<p>Then I tried using <code>getline()</code> to consume one record at a time but I still cannot tell if the record is one record event or muli-records events.</p>\n\n<p>After reading the auditd documentation <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Security_Guide/sec-Audit_Record_Types.html\" rel=\"nofollow noreferrer\">here</a>, I found this:\n<code>\nEOE     Triggered to record the end of a multi-record event.\n</code>\nI can use this to know when to stop consuming (because <code>getline()</code> is a blocking operation) but the <code>EOE</code> event only exists in multi-records events.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Is using <code>af_unix</code> plugin is the best way to consume auditd events in real-time?</li>\n<li>Is there any way to know from the record information if this is a multi-records event? if no, is there any documentation on what events are multi-records events?</li>\n</ul>\n"}, {"tags": ["c", "linux", "encryption", "drivers"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490781981, "post_id": 43087997, "comment_id": 73262219, "body": "What is the <code>flags</code> value? Are you sure the last <code>bio_for_each_segment</code> argument isn&#39;t an <code>int</code> (This <a href=\"https://lwn.net/Articles/26404/\" rel=\"nofollow noreferrer\">documentation</a> may be obsolete)"}, {"owner": {"reputation": 161, "user_id": 7284712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIgpn.png?s=128&g=1", "display_name": "AccumPlus", "link": "https://stackoverflow.com/users/7284712/accumplus"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490785474, "post_id": 43087997, "comment_id": 73264575, "body": "@purplepsycho <code>flags</code> (flag) always equal to zero. Maybe I should set it to some value, but I don&#39;t know. I&#39;ve tried to get address just with the help of <code>kmap_atomic</code> function (without using any flag), but nothing changed. There is an <a href=\"http://lxr.free-electrons.com/source/include/linux/bio.h#L496\" rel=\"nofollow noreferrer\">implementation</a> of <code>bvec_kmap_irq</code>. What about documentation, yes, it is for older kernel. Actual one (4.10.*) has a bit different sources."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490789588, "post_id": 43087997, "comment_id": 73267406, "body": "In which function is call the <code>bio_for_each_segment</code> macro? I guess it&#39;s called in <code>sddm_target_map</code>, but shouldn&#39;t be called from something like <code>sddm_target_read</code>?"}, {"owner": {"reputation": 161, "user_id": 7284712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIgpn.png?s=128&g=1", "display_name": "AccumPlus", "link": "https://stackoverflow.com/users/7284712/accumplus"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490790787, "post_id": 43087997, "comment_id": 73268278, "body": "@purplepsycho yes, this func is called in <code>sddm_target_map</code>. But it is an idea... I can override other functions. Full list is defined in <a href=\"http://lxr.free-electrons.com/source/include/linux/device-mapper.h#L158\" rel=\"nofollow noreferrer\">this</a> structure. Mine <code>sddm_target_map</code> has <code>dm_map_fn</code> type. I guess <code>dm_map_request_fn</code> can be suitable"}, {"owner": {"reputation": 161, "user_id": 7284712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIgpn.png?s=128&g=1", "display_name": "AccumPlus", "link": "https://stackoverflow.com/users/7284712/accumplus"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490794177, "post_id": 43087997, "comment_id": 73271011, "body": "@purplepsycho nope. <code>dm_map_request_fn</code> is not called at all."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490795057, "post_id": 43087997, "comment_id": 73271789, "body": "Okay, can you edit your post to show all <code>sddm_target_map</code> function, or event all driver if it&#39;s not too big?"}, {"owner": {"reputation": 161, "user_id": 7284712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIgpn.png?s=128&g=1", "display_name": "AccumPlus", "link": "https://stackoverflow.com/users/7284712/accumplus"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490796278, "post_id": 43087997, "comment_id": 73272864, "body": "@purplepsycho I&#39;ve pasted it <a href=\"https://paste.ubuntu.com/24274759/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 161, "user_id": 7284712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIgpn.png?s=128&g=1", "display_name": "AccumPlus", "link": "https://stackoverflow.com/users/7284712/accumplus"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490870958, "post_id": 43087997, "comment_id": 73310601, "body": "@purplepsycho do you have any ideas?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490877900, "post_id": 43087997, "comment_id": 73315607, "body": "Well, I assume you&#39;ve read this <a href=\"http://techgmm.blogspot.fr/2012/07/writing-your-own-device-mapper-target.html\" rel=\"nofollow noreferrer\">page</a>. If you read from <code>&#47;dev&#47;mapper&#47;sddm_target</code> instead of <code>&#47;dev&#47;loop6</code>, you can see: 1. that the xor operation is only performed on first device, 2. pages in <code>..._map</code> function are not loaded with data from disk image."}, {"owner": {"reputation": 161, "user_id": 7284712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIgpn.png?s=128&g=1", "display_name": "AccumPlus", "link": "https://stackoverflow.com/users/7284712/accumplus"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1490881064, "post_id": 43087997, "comment_id": 73318266, "body": "@purplepsycho Yes, I&#39;ve put a glance on this article, it was my start point. 1. Yes, I mount <code>&#47;dev&#47;mapper&#47;...</code> instead of <code>&#47;dev&#47;loop6</code> (otherwise I&#39;m not able to use my driver). 2. It&#39;s a pity. So, do you have an idea, how to make changes within this devmapper target? There is a <a href=\"http://lxr.free-electrons.com/source/drivers/md/dm-crypt.c\" rel=\"nofollow noreferrer\">dm-crypt</a> module. It is very complex, but if I&#39;m not mistaken, it makes all encryption/decryption manipulation just inside <a href=\"http://lxr.free-electrons.com/source/drivers/md/dm-crypt.c#L2042\" rel=\"nofollow noreferrer\">map-function</a>"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1490775325, "question_id": 1193431}, "owner": {"reputation": 161, "user_id": 7284712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIgpn.png?s=128&g=1", "display_name": "AccumPlus", "link": "https://stackoverflow.com/users/7284712/accumplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1490777163, "creation_date": 1490769989, "last_edit_date": 1490777163, "question_id": 43087997, "link": "https://stackoverflow.com/questions/43087997/decrypting-device-driver", "title": "Decrypting device driver", "body": "<p>I got a task to make a small image, encrypt it in the easiest way and write a decrypt driver.</p>\n\n<p>Making an image:</p>\n\n<pre><code>dd if=/dev/zero of=myFS bs=1024 count=60\nmkfs.ext2 myFS\n</code></pre>\n\n<p>Encrypting it with XOR:</p>\n\n<pre><code>int main()\n{\n    std::fstream streamIn;\n    std::fstream streamOut;\n\n    const char key = 0b00001111;\n\n    streamIn.open(\"myFS\", std::ios_base::binary | std::ios_base::in);\n    streamOut.open(\"newFS\", std::ios_base::binary | std::ios_base::trunc | std::ios_base::out);\n\n    char b;\n    while (streamIn.read(&amp;b, 1))\n    {\n        b ^= key;\n        streamOut.write(&amp;b, 1);\n    }\n\n    streamIn.close();\n    streamOut.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>Then, writing driver. It is based on device-mapper-target kernel module, so its main mapping function has this prototype:</p>\n\n<pre><code>static int sddm_target_map(struct dm_target *ti, struct bio *bio);\n</code></pre>\n\n<p>You see, I have a bio structure, and I think, that I should decrypt every byte it contains. What I have now:</p>\n\n<pre><code>struct bio_vec vec;\nstruct bvec_iter it;\nunsigned int len;\nchar *addr;\nunsigned int i;\nunsigned long flag;\n\nbio_for_each_segment(vec, bio, it)\n{\n    len = vec.bv_len;\n    addr = bvec_kmap_irq(&amp;vec, &amp;flag);\n\n    for (i = 0; i != len; ++i)\n    {\n        *(addr+i) ^= 0b00001111;\n    }\n\n    bvec_kunmap_irq(addr, &amp;flag);\n}\n</code></pre>\n\n<p>Of course, it doesn't work. Don't know why, but it even doesn't change anything in a query. I can just write <code>*(addr+i) ^= 0;</code> and nothing will be changed. If I apply this driver to a non-encrypted image it will be mounted well.</p>\n\n<p>So my question is how to change data stored inside bio structure?</p>\n"}, {"tags": ["c", "arrays", "string", "char", "cs50"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490768676, "post_id": 43085731, "comment_id": 73253832, "body": "<code>string saltget = (char[]){ argv[1][0] , argv[1][1], 0 };</code> (I think type of <code>string</code> is <code>char *</code>, not <code>const char *</code>.)"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490769592, "post_id": 43085864, "comment_id": 73254314, "body": "The OP mentioned that they want the characters, not the whole strings."}, {"owner": {"reputation": 131, "user_id": 2853325, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iU68W.jpg?s=128&g=1", "display_name": "JustaCookie", "link": "https://stackoverflow.com/users/2853325/justacookie"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490769964, "post_id": 43085864, "comment_id": 73254506, "body": "Hey! Thanks for your fast reply. I updated the question to make it more clear. @Lundin is right."}, {"owner": {"reputation": 1194, "user_id": 5685664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7f2211f38f9402a40441b9781b614d60?s=128&d=identicon&r=PG&f=1", "display_name": "Jiahao Cai", "link": "https://stackoverflow.com/users/5685664/jiahao-cai"}, "reply_to_user": {"reputation": 131, "user_id": 2853325, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iU68W.jpg?s=128&g=1", "display_name": "JustaCookie", "link": "https://stackoverflow.com/users/2853325/justacookie"}, "edited": false, "score": 0, "creation_date": 1490772458, "post_id": 43085864, "comment_id": 73256037, "body": "It is my pleasure:) @user2853325"}], "tags": [], "owner": {"reputation": 1194, "user_id": 5685664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7f2211f38f9402a40441b9781b614d60?s=128&d=identicon&r=PG&f=1", "display_name": "Jiahao Cai", "link": "https://stackoverflow.com/users/5685664/jiahao-cai"}, "is_accepted": false, "score": 0, "last_activity_date": 1490769393, "last_edit_date": 1490769393, "creation_date": 1490768696, "answer_id": 43085864, "question_id": 43085731, "link": "https://stackoverflow.com/questions/43085731/getting-specific-character-values-from-argv-and-making-a-new-const-char/43085864#43085864", "title": "Getting specific character values from argv[] and making a new const char", "body": "<p>Are you sure that you want to convert <code>argv[1][0] and argv[1][1]</code> instead of <code>argv[1][0] and argv[2][0]</code>? I think this code will work for <code>argv[1][0] and argv[1][1]</code>.</p>\n\n<pre><code>int main(int argc, char* argv[])//argv[1] = hello argv[2] = world\n{\n\n    const char* saltget[2] = { &amp;argv[1][0] , &amp;argv[1][1] };\n    printf(\"%s\\n\", saltget[0]);//hello\n    printf(\"%s\\n\", saltget[1]);//ello\n\n}\n</code></pre>\n\n<p>If you want to convert <code>argv[1][0] and argv[2][0]</code>, you can simply change <code>int main(int argc, char* argv[])</code> to <code>int main(int argc, const char* argv[])</code></p>\n"}, {"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1490770832, "post_id": 43086254, "comment_id": 73254993, "body": "@moooeeeep See <a href=\"https://reference.cs50.net/cs50/get_string\" rel=\"nofollow noreferrer\">DESCRIPTION</a>"}, {"owner": {"reputation": 131, "user_id": 2853325, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iU68W.jpg?s=128&g=1", "display_name": "JustaCookie", "link": "https://stackoverflow.com/users/2853325/justacookie"}, "edited": false, "score": 0, "creation_date": 1490770944, "post_id": 43086254, "comment_id": 73255058, "body": "Hah. So simple. This is literally the only idea I hadn&#39;t tried. Thank you for the advice and help!"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1490772147, "post_id": 43086254, "comment_id": 73255813, "body": "Indeed, tell your professor that the professional community on Stack Overflow discourages his <code>string</code> type. We have seen many (conceptual) errors by students using the type."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1490770027, "creation_date": 1490770027, "answer_id": 43086254, "question_id": 43085731, "link": "https://stackoverflow.com/questions/43085731/getting-specific-character-values-from-argv-and-making-a-new-const-char/43086254#43086254", "title": "Getting specific character values from argv[] and making a new const char", "body": "<p><code>argv[1][0]</code> is of type <code>char</code>, so if you wish to construct a string with this character as first letter, it would be:</p>\n\n<pre><code>char str [] = {argv[1][0], argv[1][1], '\\0'};\n</code></pre>\n\n<hr>\n\n<p>Please note that hiding pointers behind a typedef is very bad practice, so you should avoid the cs50 library, as it teaches this bad practice. They define \"string\" as <code>typedef char *string;</code>. And while the pointer hiding is bad, the name <code>string</code> is even worse, as the name collides with C++ <code>std::string</code> and there will therefore be much confusion for the reader when they see the code. </p>\n"}], "owner": {"reputation": 131, "user_id": 2853325, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iU68W.jpg?s=128&g=1", "display_name": "JustaCookie", "link": "https://stackoverflow.com/users/2853325/justacookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 0, "accepted_answer_id": 43086254, "answer_count": 2, "score": 0, "last_activity_date": 1491597061, "creation_date": 1490768201, "last_edit_date": 1491597061, "question_id": 43085731, "link": "https://stackoverflow.com/questions/43085731/getting-specific-character-values-from-argv-and-making-a-new-const-char", "title": "Getting specific character values from argv[] and making a new const char", "body": "<p>I am certain this has been answered before, but I cannot wrap my head around the answers. I am doing an entry C course and there is a provided header, cs50.h, that has the string type in it. So while I have been using it, I am not quite sure how it works.</p>\n\n<p>My goal is to get the characters at <strong>argv[1][0]</strong> and <strong>argv[1][1]</strong> into a <strong>const char *variable</strong>. While I know the answer definitely involves pointers and addresses, I have not been able to find the successful combination. I am asking here in hope that someone can show me the right way with my own code so I can learn how to go about it.</p>\n\n<p><strong>UPDATE</strong> I am trying to get the first two char characters from the second (i.e. first string that isn't the file name) thus, <strong>argv[1][0]</strong> and <strong>argv[1][1]</strong> So the given input will be something like this helloworld and I just want 'h' and 'e'. I do not know how to combine 'h' and 'e' from the argv array into a const char *variable, which is the requested format I need to pass it to another function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(int argc, string argv[])\n{\n\n    string saltget[2] = { &amp;argv[1][0] , &amp;argv[1][1] };\n    printf(\"%s\\n\", saltget);\n\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "synchronization", "queue"], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 5033601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwLpT.jpg?s=128&g=1", "display_name": "Tyler Miles", "link": "https://stackoverflow.com/users/5033601/tyler-miles"}, "is_accepted": false, "score": 0, "last_activity_date": 1490774122, "creation_date": 1490774122, "answer_id": 43087594, "question_id": 43085707, "link": "https://stackoverflow.com/questions/43085707/synchronize-all-active-threads-c-and-release-them-one-by-one/43087594#43087594", "title": "Synchronize all active threads C and release them one by one?", "body": "<p>I'll attempt to help by giving you some notes I took last semester...</p>\n\n<p>Threads</p>\n\n<p>GCC program -lpthread        </p>\n\n<pre><code>#include &lt;pthread.h&gt;\nint main(int argc, char *argv[]) {\n</code></pre>\n\n<p>This initiates the class / scheduler and names it <code>mulo</code></p>\n\n<pre><code>pthread_mutex_t mulo = PTHREAD_MUTEX_INITIALIZER;\n</code></pre>\n\n<p>This initiates a condition to stop and start executions of threads</p>\n\n<pre><code>pthread_cond_t  c = PTHREAD_COND_INITIALIZER;\n</code></pre>\n\n<p>Define the structs that will be threads</p>\n\n<pre><code>pthread_t t1, t2, t3;\npthread_t array[3];   // this is valid to set multiple variables\n</code></pre>\n\n<p>Define your scope / namespace </p>\n\n<pre><code>pthread_mutex_init(&amp;mulo, NULL);\n</code></pre>\n\n<p>Create the Processes </p>\n\n<pre><code>pthread_create(&amp;t1, NULL, printMessage, NULL);\n</code></pre>\n\n<p>or just.. </p>\n\n<pre><code>fork(); \n</code></pre>\n\n<p>Validating creation, thread ids have type pid_t (int) </p>\n\n<pre><code>pid_t  pid;\npid = fork();   // All child processes return 0.. if    error = -1  \n</code></pre>\n\n<p>Locks (&amp; unlock) a function so only one process can run it at a time</p>\n\n<pre><code>pthread_mutex_lock(&amp;mulo);\npthread_mutex_unlock(&amp;mulo);\n</code></pre>\n\n<p>For signaling the unlock</p>\n\n<pre><code>pthread_cond_signal(&amp;c);\npthread_cond_wait(&amp;c, &amp;mulo);\n</code></pre>\n\n<p>All functions that use threading must be pointers to functions</p>\n\n<pre><code>void *printMessage() { \u2026. } \npthread_create(&amp;t1, NULL, printMessage, NULL);\n</code></pre>\n\n<p>passing in values from the thread</p>\n\n<pre><code>pthread_create(&amp;array[i], NULL, runCommand, (void *) &amp;command);\n\nvoid *inc_count(void *idp) {\n    int passed_in_value = *((int *) idp);\n    .\n    .\n    .\n}\n</code></pre>\n\n<p>finish it off </p>\n\n<pre><code>pthread_join(t1,NULL);\npthread_join(t2,NULL);\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4809419, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10206447980658250/picture?type=large", "display_name": "Bernal Gonzalez", "link": "https://stackoverflow.com/users/4809419/bernal-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490774122, "creation_date": 1490768065, "question_id": 43085707, "link": "https://stackoverflow.com/questions/43085707/synchronize-all-active-threads-c-and-release-them-one-by-one", "title": "Synchronize all active threads C and release them one by one?", "body": "<p>Is there a way in C to make all threads in a C program, wait for the other active Threads and then release them in the order they came, like a <strong>Queue of waiting threads</strong>?</p>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1490767874, "post_id": 43085609, "comment_id": 73253497, "body": "you  could try inline assembly  in c . <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 23, "user_id": 6758111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154651893864218/picture?type=large", "display_name": "Irakli Koberidze", "link": "https://stackoverflow.com/users/6758111/irakli-koberidze"}, "reply_to_user": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1490785613, "post_id": 43085609, "comment_id": 73264670, "body": "Hey thanks! now everything works..."}, {"owner": {"reputation": 23, "user_id": 6758111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154651893864218/picture?type=large", "display_name": "Irakli Koberidze", "link": "https://stackoverflow.com/users/6758111/irakli-koberidze"}, "reply_to_user": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1490785671, "post_id": 43085609, "comment_id": 73264706, "body": "Never knew it was possible to inline asm. Although that&#39;s not what exactly i was looking for it works fine i think...  Thanks! :)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 3, "creation_date": 1490787680, "post_id": 43085609, "comment_id": 73266076, "body": "I don&#39;t recommend inline assembly unless you know what you are doing. GCC inline assembly is rather powerful but is also very unforgiving. You can make code that seems to work but if done incorrectly may fail to work later on leading to hard to track bugs. David Wohlferd an SO contributor has an article on the GCC&#39;s GNU website about the perils of using Inline assembler: <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">gcc.gnu.org/wiki/DontUseInlineAsm</a>"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1490799789, "post_id": 43085609, "comment_id": 73275931, "body": "inline assembly is definitely an advanced topic I would avoid it, I do avoid it at all costs anyway with decades of experience.  C compiles to assembly which is then assembled into an object, you can just use the toolchains assembler to make an object then link them.  The toolchains often let you either include the assembly on the compile command line or the objects on the compile command line."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6758111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154651893864218/picture?type=large", "display_name": "Irakli Koberidze", "link": "https://stackoverflow.com/users/6758111/irakli-koberidze"}, "edited": false, "score": 0, "creation_date": 1490794812, "post_id": 43092512, "comment_id": 73271559, "body": "I can&#39;t even add .s file to my project. I can only add asm file from MASM, but does not work either."}, {"owner": {"reputation": 13243, "user_id": 3512216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg2sx.gif?s=128&g=1", "display_name": "rkhb", "link": "https://stackoverflow.com/users/3512216/rkhb"}, "reply_to_user": {"reputation": 23, "user_id": 6758111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154651893864218/picture?type=large", "display_name": "Irakli Koberidze", "link": "https://stackoverflow.com/users/6758111/irakli-koberidze"}, "edited": false, "score": 0, "creation_date": 1490801010, "post_id": 43092512, "comment_id": 73276860, "body": "@IrakliKoberidze: Rename <code>dad.asm</code> to <code>dad.s</code>. Remove <code>dad.asm</code> from project (right click on <code>dad.asm</code> in the management window).  Add <code>dad.s</code> (right click on <code>assem</code>). Add the second .c-file to this project (<code>assem</code>). Build and run the project (Key <code>F9</code> or by the menu Build/Build and run).."}, {"owner": {"reputation": 23, "user_id": 6758111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154651893864218/picture?type=large", "display_name": "Irakli Koberidze", "link": "https://stackoverflow.com/users/6758111/irakli-koberidze"}, "edited": false, "score": 0, "creation_date": 1491413472, "post_id": 43092512, "comment_id": 73545909, "body": "Thanks it helped!"}], "tags": [], "owner": {"reputation": 13243, "user_id": 3512216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg2sx.gif?s=128&g=1", "display_name": "rkhb", "link": "https://stackoverflow.com/users/3512216/rkhb"}, "is_accepted": true, "score": 0, "last_activity_date": 1490787778, "creation_date": 1490787778, "answer_id": 43092512, "question_id": 43085609, "link": "https://stackoverflow.com/questions/43085609/how-to-run-a-mixed-language-program/43092512#43092512", "title": "How to run a mixed language program", "body": "<p>No problem here. Please note: the extension of the assembler source file has to be <code>.s</code> or <code>.S</code>(upper case if you want the file to be preprocessed e.g. for #define).</p>\n\n<p><a href=\"https://i.stack.imgur.com/AhsXu.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AhsXu.gif\" alt=\"Screenshot\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 0, "last_activity_date": 1490800143, "creation_date": 1490800143, "answer_id": 43097434, "question_id": 43085609, "link": "https://stackoverflow.com/questions/43085609/how-to-run-a-mixed-language-program/43097434#43097434", "title": "How to run a mixed language program", "body": "<p>fun.c</p>\n\n<pre><code>unsigned int fun ( unsigned int x )\n{\n  return(x+1);\n}\n</code></pre>\n\n<p>build and examine</p>\n\n<pre><code>gcc -c -O2 fun.c -o fun.o\nobjdump -D fun.o\n</code></pre>\n\n<p>producing</p>\n\n<pre><code>0000000000000000 &lt;fun&gt;:\n   0:   8d 47 01                lea    0x1(%rdi),%eax\n   3:   c3                      retq   \n</code></pre>\n\n<p>So we can make fun.s</p>\n\n<pre><code>.globl fun\nfun:\n  lea 0x1(%rdi),%eax\n  retq\n\nas fun.s -o fun.o\nobjdump -D fun.o\n\n0000000000000000 &lt;fun&gt;:\n   0:   8d 47 01                lea    0x1(%rdi),%eax\n   3:   c3                      retq  \n</code></pre>\n\n<p>C code so.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nunsigned int fun ( unsigned int x );\n\nint main ( void )\n{\n    printf(\"%u\\n\",fun(1));\n    printf(\"%u\\n\",fun(2));\n    printf(\"%u\\n\",fun(3));\n    return(0);\n}\n</code></pre>\n\n<p>gcc lets you feed it assembly language </p>\n\n<pre><code>gcc so.c fun.s -o so\n./so\n2\n3\n4\n</code></pre>\n\n<p>as well as objects</p>\n\n<pre><code>gcc so.c fun.o\n./so\n2\n3\n4\n</code></pre>\n\n<p>so you dont have to mess with the linker directly</p>\n"}], "owner": {"reputation": 23, "user_id": 6758111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154651893864218/picture?type=large", "display_name": "Irakli Koberidze", "link": "https://stackoverflow.com/users/6758111/irakli-koberidze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 43092512, "answer_count": 2, "score": -1, "last_activity_date": 1490800143, "creation_date": 1490767727, "question_id": 43085609, "link": "https://stackoverflow.com/questions/43085609/how-to-run-a-mixed-language-program", "title": "How to run a mixed language program", "body": "<p>I want to write a mixed language program where part of the code will be written in C, and part of the code in assembly. I was given a sample code, so i know what should my work look like.</p>\n\n<pre><code> .globl _addArrayinA\n\n_addArrayinA:\n    pushl %ebp\n    movl  %esp,%ebp\n    subl  $8,%esp\n    movl  8(%ebp), %ebx\n    xorl  %esi,%esi\n    xor   %eax,%eax\n\nbak:\n    addl  (%ebx),%eax\n    addl  $4,%ebx\n    incl  %esi\n    cmpl  $10, %esi\n    jne   bak\n\n    movl %ebp, %esp\n    popl  %ebp\n    ret\n # Return value is in %ea\n</code></pre>\n\n<p>Above is the assembly part.</p>\n\n<pre><code>int  addArrayinC(int *myArray, int num)\n{\n    int c;\n    int i;\n\n    c = 0;\n\n    for (i=0; i&lt;num; i++)\n        {c += *myArray;\n        myArray++;\n        }\n\n    return (c);\n\n\n}\n</code></pre>\n\n<p>This is the second function written in C.\nAnd below is the main file, which is supposed to use two functions above.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nextern int addArrayinC(int *numbers,int count);\nextern int addArrayinA(int *numbers, int count);\n\n    int main(void) {\n        int mynumbers[10]={1,2,3,4,5,6,7,8,9,0};\n        int sum;\n\n\n        sum = addArrayinC(mynumbers, 10);\n        printf(\"\\nThe sum of array computed in C  is : %d \",sum);\n\n\n        sum = addArrayinA(mynumbers, 10);\n        printf(\"\\nThe sum of array computed in assembly is : %d \",sum);\n\n\n        return EXIT_SUCCESS;\n    }\n</code></pre>\n\n<p>I tried to open these three files in codeblocks, but could not get to run them. I have no idea how to run a mixed language program. Generally, I use cloud9 for compilations of code. Anyways... How can i run code like this?</p>\n"}, {"tags": ["c", "arrays", "console"], "comments": [{"owner": {"reputation": 3416, "user_id": 2484972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea1c4b2c5aa3c7da2f2740bc1a643ee0?s=128&d=identicon&r=PG", "display_name": "Tatsuyuki Ishi", "link": "https://stackoverflow.com/users/2484972/tatsuyuki-ishi"}, "edited": false, "score": 0, "creation_date": 1490766384, "post_id": 43085252, "comment_id": 73252829, "body": "Weird behavior often comes from undefined behavior caused by wrong memory manipulation. If you&#39;re experiencing <b>access violation</b> (segmentation fault), please try tools like <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">Valgrind</a> or <a href=\"https://clang.llvm.org/docs/AddressSanitizer.html\" rel=\"nofollow noreferrer\">AddressSanitizer</a> to determine the root of the problem."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 4, "creation_date": 1490766496, "post_id": 43085252, "comment_id": 73252874, "body": "<code>for (a=0;a&lt;in;a++);</code> \u2192 <code>for (a=0;a&lt;in;a++)</code>, <code>int sem,in,total,a;</code> \u2192 <code>int sem,in,total = 0,a;</code>. BTW, never use <code>gets</code>. It has been obsolete in newer versions of C due to its buffer overflow vulnerability. Also, <code>fflush(stdin)</code> invokes Undefined Behavior, as per the standards, although some implementations have defined behavior. But it is best to avoid it so that your code is portable."}, {"owner": {"reputation": 13, "user_id": 7661381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081dfffdea34ac35eed3ec4185802a98?s=128&d=identicon&r=PG&f=1", "display_name": "zame", "link": "https://stackoverflow.com/users/7661381/zame"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1490767177, "post_id": 43085252, "comment_id": 73253171, "body": "thank you @CoolGuy .okay. i&#39;ll keep that in mind. :D"}], "owner": {"reputation": 13, "user_id": 7661381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081dfffdea34ac35eed3ec4185802a98?s=128&d=identicon&r=PG&f=1", "display_name": "zame", "link": "https://stackoverflow.com/users/7661381/zame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490904684, "creation_date": 1490766227, "last_edit_date": 1490904684, "question_id": 43085252, "link": "https://stackoverflow.com/questions/43085252/why-array-subscript-is-above-array-bounds-warry-bounds-what-should-i-do", "title": "why array subscript is above array bounds [-Warry-bounds] ? what should i do?", "body": "<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char name[100],stdid[100],adv[100],subject[6][100],code[6][30];\n    int sem,in,total,a;\n    int credit[6];\n\n    printf (\"SUBJECT REGISTRATION FORM \\n \\n\");\n\n    printf (\"1) STUDENT NAME: \");\n    fflush (stdin);\n    gets (name);\n\n    printf (\"2) STUDENT ID: \");\n    scanf (\"%s\",&amp;stdid);\n\n    printf (\"3) SEMESTER: \");\n    scanf (\"%d\",&amp;sem);\n\n    printf (\"4) ACADEMIC ADVISOR: \");\n    fflush (stdin);\n    gets (adv);\n\n\n    for (in=0; in&lt;6 ;in++)\n    {\n        printf (\"SUBJECT CODE %d: \",in + 1);\n        fflush (stdin);\n        gets (code[in]);\n\n        printf (\"SUBJECT NAME %d: \",in + 1);\n        fflush (stdin);\n        gets (subject[in]);\n\n        printf (\"SUBJECT CREDIT %d: \",in + 1);\n        fflush (stdin);\n        scanf (\"%d\",&amp;credit[in]);\n\n        total=total+credit[in];\n    }\n\n    printf (\"                       Universiti of Gambang \\n\");\n    printf (\"                     Subjects Registration Form \\n\");\n    printf     (\"======================================================================= \\n\");\n\n    printf (\"Name: %s \\n\",name);\n    printf (\"Student ID: %s \\n\",stdid);\n    printf (\"Total Subjects: %d \\n\",in);\n\n    printf (\"---------------------------------------------------------------    --------- \\n\");\n\n    printf (\"Subject Name                Subject code                              Credit \\n\");\n\n    for (a=0;a&lt;in;a++);\n\n    {\n        printf (\" %d %s                           %s                                     %d        \\n\",a ,subject[a] ,code[a] ,credit[a]);\n    }\n\n    printf (\"Total Credit:                                                              %d        \\n\",total);\n\n    printf (\"Academic Advisor: %s \\n\",adv);\n\n    return 0;\n}\n</code></pre>\n\n<p>Why don't my other outputs below the subject and code does not appear correctly? I think it suppose to come out 6 output on all tables. plus, from where does the 122 below credit come from?</p>\n\n<p><img src=\"https://i.stack.imgur.com/3QI1C.png\" alt=\"enter image description here\"> I am new in c. please help me.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1349, "user_id": 7219646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468228f1b25f2f7ea7d41c913854c36f?s=128&d=identicon&r=PG&f=1", "display_name": "Rishi", "link": "https://stackoverflow.com/users/7219646/rishi"}, "edited": false, "score": 0, "creation_date": 1490765566, "post_id": 43085064, "comment_id": 73252509, "body": "What have you tried to accomplish wrt <code>list_print</code>? Show us the code you have written ?"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1490765638, "post_id": 43085064, "comment_id": 73252538, "body": "Do you want to check the elements in <code>list</code> whether they will print in human readable form?"}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1490765658, "post_id": 43085064, "comment_id": 73252549, "body": "&quot;i.e. if the print function prints accurately, return 0, otherwise, return 1.&quot; What does <b>prints accurately</b> mean?! I suggest to provide an example. This is really vague."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "edited": false, "score": 3, "creation_date": 1490765684, "post_id": 43085064, "comment_id": 73252559, "body": "I don&#39;t know if I understand your question. Do you want to test the printing function and see if it outputs what you expect it to output? If so, then you wouldn&#39;t really be able to &quot;see&quot; the terminal output, but you could redirect <code>stdout</code> to a buffer in memory using <code>freopen</code> and <code>setbuf</code> and compare it with what you expect the output to be."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7744673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9879bbfd5e89df42ff5a01f8e734d9b2?s=128&d=identicon&r=PG&f=1", "display_name": "whoshotya", "link": "https://stackoverflow.com/users/7744673/whoshotya"}, "edited": false, "score": 0, "creation_date": 1490823599, "post_id": 43085205, "comment_id": 73290861, "body": "Thank you! This is exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "is_accepted": true, "score": 1, "last_activity_date": 1490766809, "last_edit_date": 1495535457, "creation_date": 1490765987, "answer_id": 43085205, "question_id": 43085064, "link": "https://stackoverflow.com/questions/43085064/testing-that-a-print-function-works-c/43085205#43085205", "title": "Testing that a print function works (C)", "body": "<p>I recommend that you redirect <code>stdout</code> to a buffer in memory using <code>freopen</code> and <code>setbuf</code>, as they describe in <a href=\"https://stackoverflow.com/questions/14428406/redirect-output-from-stdout-to-a-string\">this question</a>. Then, run the <code>list_print</code> method.</p>\n\n<p>Then you can compare the contents of your buffer with what you would expect to see. You can be strict on this step or you can use heuristics to try to identify a generally accepted pattern of output that is acceptable.</p>\n\n<p>I don't think there is a better way to \"see\" what is output to the terminal, except for un-portable OS-specific libraries.</p>\n\n<p>If you post your working attempt then I can help you out more with a concrete code example.</p>\n"}, {"tags": [], "owner": {"reputation": 272630, "user_id": 105929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414213a8181616151fe73334532746ab?s=128&d=identicon&r=PG", "display_name": "Remus Rusanu", "link": "https://stackoverflow.com/users/105929/remus-rusanu"}, "is_accepted": false, "score": 1, "last_activity_date": 1490766426, "last_edit_date": 1495541452, "creation_date": 1490766426, "answer_id": 43085298, "question_id": 43085064, "link": "https://stackoverflow.com/questions/43085064/testing-that-a-print-function-works-c/43085298#43085298", "title": "Testing that a print function works (C)", "body": "<p>As a general answer to this sort of testing problem: you run it once on a given, fixed, input and you inspect the result. If it 'looks right' then you write a test that provides exactly the same input every time and blindly compares the output with the expected output, which is the output you 'manually' verified and it 'looks right'. This will prevent a regression in the function implementation.</p>\n\n<p>You can go further and add a number of test cases (empty list, one entry in list, more entries etc) and then write a similar test for each case. These are 'expected result' tests, where the test does not know what the 'looks right' means, but it simply verifies that for a given input the output is the one 'expected' and it does not deviate. The outputs themselves are verified that they 'look right' by the person writing the test, which adds the 'expected output', manually, when the test is written and accepted.</p>\n\n<p>The alternative is you have to write logic to parse the output, perhaps a full blown lexer and grammar, and truly validate the output. For this you need to very precisely define what output is 'right' and write an appropriate test parser for it. Is a worthy goal if the function is important enough, but this does not appear to be your case.</p>\n\n<p>BTW, do not write a function that 'return 1 if the function has bugs', but instead use a <a href=\"https://stackoverflow.com/questions/65820/unit-testing-c-code\">test framework</a> and add this as a build phase to your project.</p>\n"}], "owner": {"reputation": 39, "user_id": 7744673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9879bbfd5e89df42ff5a01f8e734d9b2?s=128&d=identicon&r=PG&f=1", "display_name": "whoshotya", "link": "https://stackoverflow.com/users/7744673/whoshotya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 43085205, "answer_count": 2, "score": 0, "last_activity_date": 1490767275, "creation_date": 1490765335, "last_edit_date": 1490767275, "question_id": 43085064, "link": "https://stackoverflow.com/questions/43085064/testing-that-a-print-function-works-c", "title": "Testing that a print function works (C)", "body": "<p>I am trying to make a main function which will test a whole bunch of other functions to make sure that they work. That is, if they contain bugs, return 1, if no bugs, return 0</p>\n\n<p>Suppose one of the functions I am trying to test is the following:</p>\n\n<pre><code>void list_print(list_t*list);\n</code></pre>\n\n<p>this should print a list in \"human-readable form\" from first to last elements, between curly braces.</p>\n\n<p>Now, naturally I could simply print an array and see for myself that it looks good, but I need to do this so that it is automatic, i.e. if the print function prints accurately, return 0, otherwise, return 1.</p>\n\n<p>How do I go about doing this (in a general sort of way)? I keep googling and can't really find the answer.</p>\n"}, {"tags": ["c", "arrays", "types", "compiler-errors"], "answers": [{"tags": [], "owner": {"reputation": 1194, "user_id": 5685664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7f2211f38f9402a40441b9781b614d60?s=128&d=identicon&r=PG&f=1", "display_name": "Jiahao Cai", "link": "https://stackoverflow.com/users/5685664/jiahao-cai"}, "is_accepted": true, "score": 6, "last_activity_date": 1490765029, "creation_date": 1490765029, "answer_id": 43084993, "question_id": 43084965, "link": "https://stackoverflow.com/questions/43084965/what-c-datatype-should-be-used-for-an-array-which-will-contain-2-digit-hexadecim/43084993#43084993", "title": "What C datatype should be used for an array which will contain 2-digit HEXADECIMAL values?", "body": "<p>You should add <code>0x</code> at these numbers.\nFor example, <code>0x01, 0x0e</code>, or the compiler won't treat them as hexadecimal.</p>\n\n<p>And the reason it expect exponent value after <code>e</code> is because you can use scientific notation in C, for example <code>float var = 1.54334E-34</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 1, "creation_date": 1490765175, "post_id": 43085011, "comment_id": 73252351, "body": "Leading 0 means the numbers are octal so even 09 would fail to compile."}], "tags": [], "owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "is_accepted": false, "score": 2, "last_activity_date": 1490765123, "creation_date": 1490765123, "answer_id": 43085011, "question_id": 43084965, "link": "https://stackoverflow.com/questions/43084965/what-c-datatype-should-be-used-for-an-array-which-will-contain-2-digit-hexadecim/43085011#43085011", "title": "What C datatype should be used for an array which will contain 2-digit HEXADECIMAL values?", "body": "<p>To write hexadecimal numbers in C, you write <code>0x</code> followed by hex digits. So two-digit hex numbers in C would look like</p>\n\n<pre><code>0x6a\n0x0e\n0xff\n0x29\n0xbc\n</code></pre>\n\n<p>When you write <code>0e</code> the compiler complains because an <code>e</code> in that position indicates \"times 10 to the\". For example</p>\n\n<p>35e22</p>\n\n<p>means 35 times 10 to the 22 power and</p>\n\n<p>1e9</p>\n\n<p>is one billion (one times ten to the 9th power).</p>\n\n<p>If you write</p>\n\n<pre><code>0e\n</code></pre>\n\n<p>It looks like zero times ten to the........  and the compiler complains because you did not give the exponent.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 1, "last_activity_date": 1490765288, "creation_date": 1490765288, "answer_id": 43085051, "question_id": 43084965, "link": "https://stackoverflow.com/questions/43084965/what-c-datatype-should-be-used-for-an-array-which-will-contain-2-digit-hexadecim/43085051#43085051", "title": "What C datatype should be used for an array which will contain 2-digit HEXADECIMAL values?", "body": "<p>In C any constant preceded by 0 is an <strong>octal constant</strong>.  So, <code>015</code> is octal <code>15</code> and is decimal <code>13</code>. Also <code>08</code> is invalid as no octal no can have a value greater than 8.</p>\n\n<p>If you want <strong>hexadecimal constants</strong>, you should use <code>0x08</code>, <code>0x0a</code> etc.</p>\n"}], "owner": {"reputation": 482, "user_id": 7131133, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6ff39a55fd141f8bfd89db76cd9ec985?s=128&d=identicon&r=PG&f=1", "display_name": "Shy", "link": "https://stackoverflow.com/users/7131133/shy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 43084993, "answer_count": 3, "score": 0, "last_activity_date": 1490765288, "creation_date": 1490764871, "question_id": 43084965, "link": "https://stackoverflow.com/questions/43084965/what-c-datatype-should-be-used-for-an-array-which-will-contain-2-digit-hexadecim", "title": "What C datatype should be used for an array which will contain 2-digit HEXADECIMAL values?", "body": "<p>I have the following array in a program I am trying to debug:</p>\n\n<pre><code>static u8 info3[LEN] = {\n  06,\n  07,\n  04,\n  00,\n  00,\n  01,\n  00,\n  0e,\n  03\n};\n</code></pre>\n\n<p>and I am getting the following error:</p>\n\n<pre><code>test.c(45): error C2021: expected exponent value, not ','\n</code></pre>\n\n<p>and line#45 is the line containing <strong><code>0e,</code></strong>. According to <a href=\"https://msdn.microsoft.com/en-us/library/986k91hd.aspx\" rel=\"nofollow noreferrer\">this MSDN</a> resource, </p>\n\n<blockquote>\n  <p>expected exponent value, not 'character'</p>\n  \n  <p>The character used as the exponent of a <strong>floating-point constant</strong> is not\n  a valid number. Be sure to use an exponent that is in range.</p>\n</blockquote>\n\n<p>This tells me that the compiler thinks that the compiler thinks that <code>info3</code> contains Floating Point values. But the values there are actually 2-digit hexadecimal numbers. </p>\n\n<p>So the question is that which datatype should be used here for the values stored in this array?</p>\n"}, {"tags": ["c", "linux", "hex"], "comments": [{"owner": {"reputation": 1194, "user_id": 5685664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7f2211f38f9402a40441b9781b614d60?s=128&d=identicon&r=PG&f=1", "display_name": "Jiahao Cai", "link": "https://stackoverflow.com/users/5685664/jiahao-cai"}, "edited": false, "score": 1, "creation_date": 1490764845, "post_id": 43084894, "comment_id": 73252242, "body": "Parse the text in your program"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 4, "creation_date": 1490765175, "post_id": 43084894, "comment_id": 73252352, "body": "Have you tried <code>.&#47;myProgram 0x48656c6c6f</code>? (it is rather difficult to guess not knowing what <code>myProgram</code> is/does.) The other option, if this is a shell exercise is <code>.&#47;myProgram $(python -c &quot;print &#39;\\x48\\x65\\x6c\\x6c\\x6f&#39;&quot;)</code>"}, {"owner": {"reputation": 574, "user_id": 2881151, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/7qpnf.gif?s=128&g=1", "display_name": "Friedpanseller", "link": "https://stackoverflow.com/users/2881151/friedpanseller"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490786884, "post_id": 43084894, "comment_id": 73265537, "body": "Thanks @DavidC.Rankin that works! Can&#39;t set it as accepted answer though because it&#39;s a comment........"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490839797, "post_id": 43084894, "comment_id": 73295549, "body": "No problem, the goal was to find something that worked for you. Glad I could help. I&#39;ll write it up if it remains unanswered in a bit."}], "answers": [{"tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1490768360, "creation_date": 1490768360, "answer_id": 43085772, "question_id": 43084894, "link": "https://stackoverflow.com/questions/43084894/input-hex-into-argv1/43085772#43085772", "title": "Input Hex into argv[1]", "body": "<p>Let's assume you're writting a program as the post is tagged <code>c</code>.</p>\n\n<p>1) command line parameter format will be like following:</p>\n\n<pre><code>./myProgram 0x55 0xAA 0xBB ...\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>./myProgram 55 66 AA BB ...\n</code></pre>\n\n<p>2) in your program all input parameters will be available via argv array as strings. You can use <code>sscanf</code> with format <code>%X</code> to read hex values out of them and store them into unsigned integer variables. Also, in the simplest case it will look similar to:</p>\n\n<pre><code>unsigned int var;\nsscanf(argv[1], \"%X\", &amp;var); // will read 0x55\nsscanf(argv[2], \"%X\", &amp;var); // will read 0x66 and so on\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490846589, "creation_date": 1490846589, "answer_id": 43108351, "question_id": 43084894, "link": "https://stackoverflow.com/questions/43084894/input-hex-into-argv1/43108351#43108351", "title": "Input Hex into argv[1]", "body": "<p>Continuing from the comment, not knowing exactly what was in <code>./myProgram</code> made it a bit difficult to guess, but there are several logical things to try given what you reported.</p>\n\n<p>As you point out, you need to take the hex input as the first argument to <code>./myProgram</code> rather than passing it to the program on <code>stdin</code>. You correctly note that <code>python -c \"print '\\x48\\x65\\x6c\\x6c\\x6f'\" | ./myProgram</code> fails for that reason. As you know, <em>piping</em> to a program redirects <code>stdout</code> of the initial process to <code>stdin</code> of the subsequent process, rather than as an argument to it.</p>\n\n<p>That is where <strong>process substitution</strong> can help. When placing a process within <code>$(...)</code> (or the older format within <em>backticks</em> <code>'...'</code>), the output of the program is returned. Therefore, you can provide the output of <code>python -c \"print '\\x48\\x65\\x6c\\x6c\\x6f'\"</code> as an argument by:</p>\n\n<pre><code>./myProgram $(python -c \"print '\\x48\\x65\\x6c\\x6c\\x6f'\")\n</code></pre>\n\n<p>Lastly, if <code>myProgram</code> is simply looking for hexadecimal input in string format, then there is no reason for multiple escapes. Simply providing a string representation of the hex number may be enough. Something like the following:</p>\n\n<pre><code>./myProgram 0x48656c6c6f\n</code></pre>\n\n<p>I'm glad one of the suggestions was the \"silver-bullet\" you needed. Good luck with your shell use. Let us know if you have any further questions.</p>\n"}, {"tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 0, "last_activity_date": 1583961841, "creation_date": 1583961841, "answer_id": 60644630, "question_id": 43084894, "link": "https://stackoverflow.com/questions/43084894/input-hex-into-argv1/60644630#60644630", "title": "Input Hex into argv[1]", "body": "<p>David Rankin's approach works well as long as the input string does not contain whitespace. A space will cause the input to be broken into two arguments.  Normally, to avoid this, one would surround the string with double quotes, but that prevents the python execution.  I solved this for my case by creating an intermediate variable that I could quote:</p>\n\n<pre><code>foo=$(echo -e \"\\001 Hi!\")\nmyProgram \"$foo\"\n</code></pre>\n"}], "owner": {"reputation": 574, "user_id": 2881151, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/7qpnf.gif?s=128&g=1", "display_name": "Friedpanseller", "link": "https://stackoverflow.com/users/2881151/friedpanseller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3053, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1583961841, "creation_date": 1490764505, "question_id": 43084894, "link": "https://stackoverflow.com/questions/43084894/input-hex-into-argv1", "title": "Input Hex into argv[1]", "body": "<p>I have a program that takes input from argv[1] so I run it like </p>\n\n<pre><code>./myProgram Hello\n</code></pre>\n\n<p>But I need to input hexadecimals instead of decimal/text so something like</p>\n\n<pre><code>./myProgram \\x48\\x65\\x6c\\x6c\\x6f\n</code></pre>\n\n<p>but the program takes that in as text instead of hexadecimals that form the word Hello.</p>\n\n<p>I can't </p>\n\n<pre><code>python -c \"print '\\x48\\x65\\x6c\\x6c\\x6f'\" | ./myProgram \n</code></pre>\n\n<p>because the program takes the data in as argv[1]</p>\n\n<p>How do I solve the problem? (I cannot modify the program)</p>\n"}, {"tags": ["c++", "c", "process", "fork", "waitpid"], "answers": [{"comments": [{"owner": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490786440, "post_id": 43091136, "comment_id": 73265223, "body": "Please look at the updated code. I get the &#39;Got child&#39;, but most of the times it is after cleanup."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490788991, "post_id": 43091136, "comment_id": 73266985, "body": "That is because your code is just starting the children and then doing the cleanup. There&#39;s no code in there to keep an eye on how many children are running and starting new ones as the old ones die. A <code>while</code> loop with a <code>sleep</code> in it would be a good place to start"}, {"owner": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490821020, "post_id": 43091136, "comment_id": 73289590, "body": "Where should I put the sleep, in the child? And what kind of while loop?"}, {"owner": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490912493, "post_id": 43091136, "comment_id": 73337298, "body": "It does not fork any additional children, and appears to hang. I should have probably done this sooner, but here is a live example: <a href=\"http://ideone.com/noUs3m\" rel=\"nofollow noreferrer\">ideone.com/noUs3m</a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490950874, "post_id": 43091136, "comment_id": 73350332, "body": "@Ali ah! you didn&#39;t spot my comment after the code for <code>catchchild</code> that says &quot;As you&#39;ve already worked out, if you have a count of how many children that have been forked, you could have catchchild update that so that your main code will know to fork a new child.&quot;"}, {"owner": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490969085, "post_id": 43091136, "comment_id": 73362529, "body": "can you update the link code to show that? Would I set currentChild to numOfProcessesForkedSoFar, and then? B/c currentChild will always increment, right?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490969579, "post_id": 43091136, "comment_id": 73362856, "body": "if currentChild isn&#39;t keeping track of how many children there are, just add a new variable that does and have that change as required"}, {"owner": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490969987, "post_id": 43091136, "comment_id": 73363195, "body": "I updated the while loop in the link. It seems to be working. Can you double check? Also, the logic would stay the same even if I am running another executable instead of printing out the date, correct?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "edited": false, "score": 0, "creation_date": 1490970752, "post_id": 43091136, "comment_id": 73363773, "body": "Looks fine. Shouldn&#39;t matter what executable you&#39;re running."}, {"owner": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490970822, "post_id": 43091136, "comment_id": 73363835, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/139600/discussion-between-ali-and-chris-turner\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1490862300, "last_edit_date": 1490862300, "creation_date": 1490783738, "answer_id": 43091136, "question_id": 43084744, "link": "https://stackoverflow.com/questions/43084744/fork-off-more-processes-as-previous-finish-until-max-is-reached/43091136#43091136", "title": "Fork off more processes as previous finish, until max is reached", "body": "<p>Instead of using <code>wait</code> as you have done, you want to look into signal handling to handle the child processes dying.</p>\n\n<p>You add before you start <code>fork</code>ing, this line</p>\n\n<pre><code>signal(SIGCHLD,catchchild);\n</code></pre>\n\n<p>and this function to your code</p>\n\n<pre><code>void catchchild(int sig)\n  {\n  pid_t p;\n  int state;\n  p=wait(&amp;state);\n  printf(\"Got child %d\\n\",p);\n  }\n</code></pre>\n\n<p>and then whenever a child process dies, your main process will call <code>catchchild</code>.</p>\n\n<p>As you've already worked out, if you have a count of how many children that have been forked, you could have <code>catchchild</code> update that so that your main code will know to <code>fork</code> a new child.</p>\n\n<p>To answer your comment something like the following, except with more error checking</p>\n\n<pre><code>while(totalProcessesToBeForked)\n  {\n  if(currentChild &lt; maxAllowedAtOnce)\n    {\n    forkChild(currentChild);\n    totalProcessesToBeForked--;\n    }\n  sleep(1);\n  }\n</code></pre>\n"}], "owner": {"reputation": 528, "user_id": 4669619, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4786954ed80039c912a8967576e07ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4669619/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 43091136, "answer_count": 1, "score": 0, "last_activity_date": 1490912519, "creation_date": 1490763659, "last_edit_date": 1490912519, "question_id": 43084744, "link": "https://stackoverflow.com/questions/43084744/fork-off-more-processes-as-previous-finish-until-max-is-reached", "title": "Fork off more processes as previous finish, until max is reached", "body": "<p>To fork off X processes and have the parent wait for all, I have the following code:</p>\n\n<pre><code>int maxProcesses = 10;\n\nfor (int currentChild = 0; currentChild &lt; maxProcesses; currentChild++) {\n    pid_t pid = fork();\n\n    if (pid &lt; 0) {\n        // Error\n    } else if (pid == 0) {\n        // Child\n    } else {\n        // Parent\n        // Should I call waitpid on pid and wait here instead?\n    }\n}\n\n// Wait for all children\nfor (int currentChild = 0; currentChild &lt; maxProcesses; currentChild++) {\n    wait(NULL);\n}\n</code></pre>\n\n<p>Now I would like to modify the code so that of X total processes, Y are forked off first, and then as they finish, more forks are made till desired total number is reached. I have made some changes to the above code, with some questions.</p>\n\n<pre><code>int totalProcessesToBeForked = 10;\nint maxAllowedAtOnce = 5;\n\nfor (int currentChild = 0; currentChild &lt; maxAllowedAtOnce; currentChild++) {\n    forkChild(currentChild);\n}\n\n// Wait for all children\n// # How do I modify this to wait for new children forked as well\n// # if I move it inside parent, it will make things easier, right?\nfor (int currentChild = 0; currentChild &lt; maxAllowedAtOnce; currentChild++) {\n    wait(NULL);\n}\n\nvoid forkChild(currentChild) {\n    pid_t pid = fork();\n\n    if (pid &lt; 0) {\n        // Error\n    } else if (pid == 0) {\n        // Child\n    } else {\n        // Parent\n        // # I think waiting here using waitpid will be better b/c\n        // # as new forks are made, parent begins to wait for them\n    }\n}\n</code></pre>\n\n<p>I will probably need to keep a count of how many children have been forked and compare it to totalProcessesToBeForked, and fork new ones accordingly.</p>\n\n<p>Updated Code v1:</p>\n\n<pre><code>int maxProcesses = 10;\nint maxAllowedAtOnce = 5;\n\nint main(int argc, char* argv[]) {\n    // Start timer\n    alarm(10);                  // Terminate after 10s\n    signal(SIGALRM, onTimeout);\n    signal(SIGCHLD, catchChild);\n\n    for (int currentChild = 0; currentChild &lt; maxAllowedAtOnce; currentChild++) {\n        forkChild(currentChild);\n    }\n\n    // # This sections runs immediately before death of any child is reported\n    // # and starts cleanup processes, thus killing any/all running children\n\n    // Completed before timeout\n    endTimer = true;\n    int timeRemaining = alarm(0);\n    if (timeRemaining &gt; 0) {\n        printf(\"\\nCompleted w/ %is remaining. Performing cleanup.\\n\", timeRemaining);\n\n        // Kill children any running child processes, cleanup\n        cleanup();\n    }\n\n    return 0;\n}\n\nvoid forkChild(currentChild) {\n    pid_t pid = fork();\n\n    if (pid &lt; 0) {\n        // Error\n    } else if (pid == 0) {\n        // Child\n        execl(\"/bin/date\", \"date\", 0, 0);\n    } else {\n        // Parent\n        printf(\"#Log: Started %i.\\n\", currentChild + 1);\n    }\n}\n\nvoid catchChild(int sig) {\n    pid_t p;\n    int state;\n    p=wait(&amp;state);\n    printf(\"Got child %d\\n\",p);\n}\n\nvoid cleanup() {\n    // Cleanup Code\n}\n</code></pre>\n\n<p>Example Run:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UgfZK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UgfZK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Edit #2:\n<a href=\"http://ideone.com/noUs3m\" rel=\"nofollow noreferrer\">http://ideone.com/noUs3m</a></p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 3, "creation_date": 1490763655, "post_id": 43084710, "comment_id": 73251816, "body": "Why not simply make <code>digits</code> an array of 50 <code>int</code>s if you already know it is  always of size <code>50</code>?"}, {"owner": {"reputation": 566, "user_id": 7664731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hjiDx.png?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/7664731/jay"}, "edited": false, "score": 0, "creation_date": 1490764476, "post_id": 43084710, "comment_id": 73252096, "body": "Can you use the <code>new</code> keyword? I think you need to allocate one instance of <code>Integer50</code> to <code>a</code>, then allocate <code>a-&gt;digits</code> with enough space for 50 <code>int</code>s."}, {"owner": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "edited": false, "score": 0, "creation_date": 1490764509, "post_id": 43084710, "comment_id": 73252118, "body": "How would I do that? And yes, I believe I can.  As long as the only thing I edit is the parseString function"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490770268, "post_id": 43084710, "comment_id": 73254662, "body": "There is no function pointer anywhere?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "edited": false, "score": 1, "creation_date": 1490765499, "post_id": 43084987, "comment_id": 73252479, "body": "oh my god, thank you!  I&#39;ve spent literally 4 hours on that, trying to figure out what I was doing wrong!"}, {"owner": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "edited": false, "score": 0, "creation_date": 1490771736, "post_id": 43084987, "comment_id": 73255545, "body": "ahh, how would I go about freeing those from a separate function?"}, {"owner": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "edited": false, "score": 0, "creation_date": 1490818686, "post_id": 43084987, "comment_id": 73288289, "body": "Unfortunately, I can&#39;t edit main=/  So I made the following function:                Integer50 *big50Destroyer(Integer50 *p){ free(p); return NULL;}  would that suffice? or am I just writing garbage?"}, {"owner": {"reputation": 341, "user_id": 5043121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMgxZ.jpg?s=128&g=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/5043121/saad"}, "reply_to_user": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "edited": false, "score": 0, "creation_date": 1490836437, "post_id": 43084987, "comment_id": 73294760, "body": "the return type of the function should be void since you aren&#39;t returning something"}], "tags": [], "owner": {"reputation": 341, "user_id": 5043121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMgxZ.jpg?s=128&g=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/5043121/saad"}, "is_accepted": true, "score": 1, "last_activity_date": 1490765011, "creation_date": 1490765011, "answer_id": 43084987, "question_id": 43084710, "link": "https://stackoverflow.com/questions/43084710/function-pointer-as-member-of-struct-in-c-invalid-initializer/43084987#43084987", "title": "Function pointer as member of struct in C Invalid initializer", "body": "<p>Here's your corrected code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX50 50\n\ntypedef struct Integer50\n{\n// a dynamically allocated array to hold a 50\n// digit integer, stored in reverse order\nint *digits;\n} Integer50;\n\n\nvoid big50Print(Integer50 *p)        //Unfortunately, I haven't made it to\n{                                    //this part yet.  But once i get the\nint i;                               //other function working, this should\nif (p == NULL)                      //work fine, as it was given.\n{\n    printf(\"(null pointer)\\n\");\n    return;\n}\nfor (i = MAX50 - 1; i &gt;= 0; i--)\n    printf(\"%d\", p-&gt;digits[i]);\nprintf(\"\\n\");\n}\n\nInteger50 *parseString(char *str)   //This is the only one I can edit!\n{\nint len, i;\nInteger50 *a =malloc(sizeof(Integer50)); //edited\na-&gt;digits = malloc(50 * sizeof(int));     //edited\n len =strlen(str);\n\nfor (i=0; i&lt;len; i++)            //This part works perfectly and\n{                                //converts the string into integers\n  a-&gt;digits[i]= str[len-1-i]-'0';        //edited\n printf(\"a[%d]= %d, \", i, a-&gt;digits[i]); //edited\n}\n a-&gt;digits;               //also this line is probably wrong\n  printf(\"\\n\");\n return a;\n}\n\nint main(void)\n{\nInteger50 *p;\nbig50Print(p = parseString(\"01234567890123456789012345678901234567890123456789\"));\nreturn 0;\n}\n</code></pre>\n\n<p>The changes are </p>\n\n<pre><code>Integer50 *a[50]=malloc(sizeof(Integer50));\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Integer50 *a =malloc(sizeof(Integer50));\n</code></pre>\n\n<p>because you don't want an array of Integer50s, you want an array of ints inside ONE Integer50.</p>\n\n<p>so we add after this line</p>\n\n<pre><code>a-&gt;digits = malloc(50 * sizeof(int));\n</code></pre>\n\n<p>Similarly</p>\n\n<pre><code>a-&gt;digits[i]= str[len-1-i]-'0';\n</code></pre>\n\n<p>The other change is in the printf line</p>\n\n<pre><code>printf(\"%d\", p-&gt;digits[i]);\n</code></pre>\n\n<p>The previous line will output gibberish. This will output the actual data you store int the int * digits.\nAlso remember to free the allocated memory from the heap using the free() function.\nHope that helps!</p>\n"}], "owner": {"reputation": 13, "user_id": 7783612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd22c1a9cbeabb1c5289a1e244c1b62?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7783612/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 43084987, "answer_count": 1, "score": -1, "last_activity_date": 1490768631, "creation_date": 1490763488, "last_edit_date": 1490768631, "question_id": 43084710, "link": "https://stackoverflow.com/questions/43084710/function-pointer-as-member-of-struct-in-c-invalid-initializer", "title": "Function pointer as member of struct in C Invalid initializer", "body": "<p>this is my first time posting on here, so please correct me if I'm doing anything wrong.\nOk, so I was given the following struct,function, and main:</p>\n\n<pre><code>typedef struct Integer50\n{\n// a dynamically allocated array to hold a 50\n// digit integer, stored in reverse order\nint *digits;\n} Integer50;`\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void big50Print(Integer50 *p)        //Unfortunately, I haven't made it to\n{                                    //this part yet.  But once i get the\nint i;                               //other function working, this should\nif (p == NULL)                      //work fine, as it was given.\n{\n    printf(\"(null pointer)\\n\");\n    return;\n}\nfor (i = MAX50 - 1; i &gt;= 0; i--)\n    printf(\"%d\", p-&gt;digits[i]);\nprintf(\"\\n\");\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int main(void)\n{\nInteger50 *p;\nbig50Print(p = parseString(\"01234567890123456789012345678901234567890123456789\"));\nreturn 0;\n}\n</code></pre>\n\n<p>And my goal is to create a function that parses the string into an array of integers, backwards, and returns a pointer to the newly allocated Integer50 struct, NULL if memory allocation fails, or if the input str is NULL.  So far, I have this:</p>\n\n<pre><code>Integer50 *parseString(char *str)   //This is the only one I can edit!\n{\nint len, i;\nInteger50 *a[50]=malloc(sizeof(Integer50)); //this line is most likely wrong\n                                            //And where the 'Invalid Initializer'\n len =strlen(str);                          //error is occuring\n\nfor (i=0; i&lt;len; i++)            //This part works perfectly and\n{                                //converts the string into integers\n  a[i]= str[len-1-i]-'0';        //like it should.  The print statement here\n printf(\"a[%d]= %d, \", i, a[i]); //was just a test to make sure it worked.\n}\n a-&gt;digits;               //also this line is probably wrong\n    printf(\"\\n\");\n return a;\n}\n</code></pre>\n\n<p>Unfortunately, I'm not very good with pointers yet and this proving to be quite difficult.  If anyone could clear up where I'm going wrong, it'd be greatly appreciated.  Thank you!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1490762509, "post_id": 43084459, "comment_id": 73251427, "body": "Why do you want to use <code>t_amount</code> and not just use <code>amount</code> (or another <code>char*</code>) directly?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1490762513, "post_id": 43084459, "comment_id": 73251428, "body": "What are you trying to do? Your code makes no sense"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1490762578, "post_id": 43084459, "comment_id": 73251447, "body": "<code>char t_amount[MAX_LENGTH+1];  strcpy(t_amount, amount);</code>"}, {"owner": {"reputation": 23, "user_id": 7188786, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a2f31b3ffd1092a1203e6b67790cfe49?s=128&d=identicon&r=PG", "display_name": "Dulguuntur", "link": "https://stackoverflow.com/users/7188786/dulguuntur"}, "edited": false, "score": 0, "creation_date": 1490762810, "post_id": 43084459, "comment_id": 73251542, "body": "Thanks BLUEPIXY :)"}], "answers": [{"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1490762398, "creation_date": 1490762398, "answer_id": 43084478, "question_id": 43084459, "link": "https://stackoverflow.com/questions/43084459/how-assign-char-value-to-char-using-c/43084478#43084478", "title": "How assign char * value to char using C", "body": "<p>the variable <code>amount</code> is a pointer so when <code>char t_amount = amount;</code>you are actually assigning the pointer's address to your <code>t_amount</code> variable, hence the segfault<code>\n</code>\nIf <code>t_amount</code> was a <code>char *</code> you could have done that assignment without any errors.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6552688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22ae0f0cd0198af598ff53a37d76691?s=128&d=identicon&r=PG&f=1", "display_name": "massony875", "link": "https://stackoverflow.com/users/6552688/massony875"}, "is_accepted": false, "score": 0, "last_activity_date": 1490775592, "creation_date": 1490775592, "answer_id": 43088088, "question_id": 43084459, "link": "https://stackoverflow.com/questions/43084459/how-assign-char-value-to-char-using-c/43088088#43088088", "title": "How assign char * value to char using C", "body": "<pre><code>char * amount = \"sdf\";\nchar t_amount = amount;\nprintf(\"%s t_amount \\n\", t_amount);\n\namount is a pointer you can not assign that kind of address to a variable. its an error.\nwhen you declare char t_amount = amount, you assign a string to a char because an address is a string.\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7188786, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a2f31b3ffd1092a1203e6b67790cfe49?s=128&d=identicon&r=PG", "display_name": "Dulguuntur", "link": "https://stackoverflow.com/users/7188786/dulguuntur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 525, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1490775592, "creation_date": 1490762284, "question_id": 43084459, "link": "https://stackoverflow.com/questions/43084459/how-assign-char-value-to-char-using-c", "title": "How assign char * value to char using C", "body": "<p>I have variable <code>char * amount;</code> and <code>char t_amount;</code>\nI want to assign amount to t_amount.</p>\n\n<pre><code>char * amount = \"sdf\";\nchar t_amount = amount;\nprintf(\"%s t_amount \\n\", t_amount);\n// I am expecting : sdf t_amount\n</code></pre>\n\n<p>when i print, segmentation error occurs so how do i fix this?\nHope you guys can help me.</p>\n"}, {"tags": ["c", "strtok"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490761434, "post_id": 43084253, "comment_id": 73251161, "body": "If you set <code>tok</code> to <code>NULL</code> and then try to use it as a string, you&#39;re not going to get much. You can also do <code>tok = strtok(choice, &quot; &quot;)</code> once and then check <code>tok</code> in an if/else if."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490769047, "post_id": 43084253, "comment_id": 73254029, "body": "@Schwern This is a correct usage. See <i>man strtok(3).</i>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1490809795, "post_id": 43084253, "comment_id": 73282991, "body": "@EJP Oh that&#39;s right, strtok is bonkers."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1490761311, "creation_date": 1490761311, "answer_id": 43084277, "question_id": 43084253, "link": "https://stackoverflow.com/questions/43084253/can-a-delim-be-used-more-than-once-for-strtok-in-c/43084277#43084277", "title": "Can a delim be used more than once for strtok in C?", "body": "<p>The <code>strtok</code> function is not reentrant, you can not use it for multiple simultaneously tokenizations.</p>\n\n<p>Use <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\"><code>strtok_s</code></a> instead, if you have it. Or <code>strtok_r</code> is you have it.</p>\n"}], "owner": {"reputation": 49, "user_id": 3682317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/78a9d745f4a7972159e1f5bb63fde473?s=128&d=identicon&r=PG&f=1", "display_name": "user3682317", "link": "https://stackoverflow.com/users/3682317/user3682317"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43084277, "answer_count": 1, "score": 0, "last_activity_date": 1490761311, "creation_date": 1490761162, "question_id": 43084253, "link": "https://stackoverflow.com/questions/43084253/can-a-delim-be-used-more-than-once-for-strtok-in-c", "title": "Can a delim be used more than once for strtok in C?", "body": "<p>Is there a way to use a delim more then once for strtok? I can only get the code to work for either load or init but not both. Example code in which strtok is used to token input from the user in the form of load # or init #,#,direction:</p>\n\n<pre><code>if ((tok = strtok(choice, \" \")) &amp;&amp; strcmp(tok, COMMAND_LOAD) == 0){\n    tok = NULL;\n    if((tok = strtok(tok, \" \")) != NULL){\n    /*some code*/\n    }\n}\nelse if((tok = strtok(choice, \" \")) &amp;&amp; strcmp(tok, COMMAND_INIT) == 0){\n    tok = NULL;\n    if((tok = strtok(tok, \",\")) != NULL){\n    /*some code*/\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "parsing", "scanf"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1490761555, "post_id": 43084250, "comment_id": 73251197, "body": "<code>&quot;Val1 and Val2: %d %d&quot;</code> doesn&#39;t match input. <code>sscanf(line,&quot;Val1 and Val2: %d %d&quot;, val1,val2);</code> --&gt; <code>sscanf(line, &quot;a %d %d&quot;, &amp;val1, &amp;val2);</code>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490761981, "post_id": 43084250, "comment_id": 73251287, "body": "Turn on warnings, that&#39;s usually <code>-Wall</code>. They&#39;ll catch a bunch of mistakes."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1490762225, "post_id": 43084250, "comment_id": 73251350, "body": "Check return value of <code>sscanf()</code> too.  Is it 2?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1490765933, "post_id": 43084250, "comment_id": 73252645, "body": "And don&#39;t forget to <code>free (line);</code> when it is no longer needed (remember, it is dynamically allocated by <code>getline</code>). Yes, it is freed when the program exits, but get  in the habit of tracking and freeing any memory you allocate."}, {"owner": {"reputation": 13, "user_id": 6463197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468a981f0dbe09f96b2866c321a895ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan-Anthony", "link": "https://stackoverflow.com/users/6463197/ethan-anthony"}, "edited": false, "score": 0, "creation_date": 1490767584, "post_id": 43084250, "comment_id": 73253355, "body": "Thanks. You guys rock! That did it. However, because some rows have two integers and others have one, each time I do sscanf(line,&quot;%c%d&quot;,&amp;category,&amp;val1); on a row with one integer and then print(&quot;GET VAL1: %d\\n&quot;,val1); it won&#39;t even compile. I get the following error: Undefined symbols for architecture x86_64:   &quot;_print&quot;    If this is not related to the original question, my apologies and I&#39;ll start a new question. You&#39;ve been a big help."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490778279, "post_id": 43084250, "comment_id": 73259675, "body": "@Ethan-Anthony <code>print</code> --&gt; <code>printf</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6463197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468a981f0dbe09f96b2866c321a895ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan-Anthony", "link": "https://stackoverflow.com/users/6463197/ethan-anthony"}, "edited": false, "score": 0, "creation_date": 1490801261, "post_id": 43086321, "comment_id": 73277069, "body": "David, you are an amazing instructor / guide. I understood and was able to achieve everything, per your explanation. I sincerely thank you.  Again, I have never seen anyone explain C with such clarity. THX! Also, note that I&#39;m taking into account ALL of your suggestions / pointers and will amend them to my near term study objectives."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 13, "user_id": 6463197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468a981f0dbe09f96b2866c321a895ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan-Anthony", "link": "https://stackoverflow.com/users/6463197/ethan-anthony"}, "edited": false, "score": 0, "creation_date": 1490839530, "post_id": 43086321, "comment_id": 73295478, "body": "I&#39;m glad I could help. Sometimes it just takes a little help to get going with C. It really is one of the (if not the) most flexible and efficient language you can learn. But there is a lot to it. The best advise I ever got was to simply &quot;slow down&quot;, &quot;check the man page&quot; for each function used, and &quot;always make use of the return&quot; to validate the results of each function call you use. (and to always compile with <i>warnings enabled</i>, e.g. with <code>-Wall -Wextra</code> in your compile string, and never accept code until it compiles without warnings)"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1490770239, "creation_date": 1490770239, "answer_id": 43086321, "question_id": 43084250, "link": "https://stackoverflow.com/questions/43084250/parsing-numbers-from-standard-input-stream-using-sscanf-in-c/43086321#43086321", "title": "Parsing numbers from standard input stream using sscanf in C", "body": "<p>Ethan, some times you just need to slow down to help C fall into place. I your case you have data that evidently will contain a classification character in the beginning row of each line. That can be following by one or two number you need to read and handle accordingly. Your problem is defined by your dataset.</p>\n\n<p>Thankfully, you can utilize <em>line-oriented</em> input functions <code>fgets</code> or <code>getline</code> and then a single call to <code>sscanf</code> for each like to handle all cases. After reading your line, you pass it to a <code>sscanf</code> call similar to the following:</p>\n\n<pre><code>rtn = sscanf (buf, \"%c %d %d\", &amp;c, &amp;v1, &amp;v2);  /* always check return */\n</code></pre>\n\n<p>Preserving the return (i.e. the number of successful conversions that took place based upon your <em>format string</em>), you can began answering logical questions about the data you can expect. However before blindly comparing whether there are three, or two, or less conversions, you can answer simple questions just by looking at the first char in your buffer. If you require a lowercase letter to begin a valid line, then all you need to do is dereference your buffer to get the first char and then check if it is between <code>'a' - 'z'</code>. If not, it's not a valid line. Similarly, if you check the first char and find it <code>0</code> (the terminating char) or <code>'\\n'</code>, then you know the line is empty and you need not bother with it any more. Those two test will filter out all the crud leaving you with at least lines that may match your criteria. For instance simply checking:</p>\n\n<pre><code>    if (rtn == 0) { /* no successful conversions took place */\n        fprintf (stderr, \"error: no values parsed from line.\\n\");\n        continue;\n    }\n\n    if (!*buf || *buf == '\\n') {    /* check if buf was empty line */\n        fprintf (stderr, \"error: line is empty or contians only newline.\\n\");\n        continue;\n    }\n\n    if (*buf &lt; 'a' || 'z' &lt; *buf) {  /* check first char not a-z */\n        fprintf (stderr, \"error: no lowercase char beginning line.\\n\");\n        continue;\n    }\n</code></pre>\n\n<p>gives you confidence that at least the line you operated on had a reasonable chance of matching what you are looking for.</p>\n\n<p>Now you can either do and <code>if ... else if .... else if ....</code> (which is perfectly fine), or since you know you are primarily concerned with checking values <code>1-3</code>, a <code>switch</code> statement makes sense for handling the remaining lines. For example, you could do something like the following to parse the value from those line that warrant a look:</p>\n\n<pre><code>    switch (rtn) {  /* switch on number of successful conversions */\n\n        case 3:     /* three successful conversions */\n            printf (\"all values: '%c'  %d  %d\\n\", c, v1, v2);\n            break;\n\n        case 2:     /* two successful conversions */\n            printf (\"two values: '%c'  %d\\n\", c, v1);\n            break;\n\n        default:    /* one or less (need at least two */\n            fprintf (stderr, \"error: no character and value on line.\\n\");\n    }\n</code></pre>\n\n<p>Putting all those pieces together, you could do something similar to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXC 256\n\nint main (void) {\n\n    char buf[MAXC] = \"\";\n\n    while (fgets (buf, MAXC, stdin))    /* read each line into buf */\n    {\n        char c;\n        int v1, v2, rtn;     /* vars for values and sscanf return */\n\n        rtn = sscanf (buf, \"%c %d %d\", &amp;c, &amp;v1, &amp;v2); \n\n        if (rtn == 0) { /* no successful conversions took place */\n            fprintf (stderr, \"error: no values parsed from line.\\n\");\n            continue;\n        }\n\n        if (!*buf || *buf == '\\n') {    /* check if buf was empty line */\n            fprintf (stderr, \"error: line is empty or contians only newline.\\n\");\n            continue;\n        }\n\n        if (*buf &lt; 'a' || 'z' &lt; *buf) {  /* check first char not a-z */\n            fprintf (stderr, \"error: no lowercase char beginning line.\\n\");\n            continue;\n        }\n\n        switch (rtn) {  /* switch on number of successful conversions */\n\n            case 3:     /* three successful conversions */\n                printf (\"all values: '%c'  %d  %d\\n\", c, v1, v2);\n                break;\n\n            case 2:     /* two successful conversions */\n                printf (\"two values: '%c'  %d\\n\", c, v1);\n                break;\n\n            default:    /* one or less (need at least two */\n                fprintf (stderr, \"error: no character and value on line.\\n\");\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Input Files</strong></p>\n\n<pre><code>$ cat dat/input.txt\na -1109180 699692587\na 1213834231 -226769626\nc 994957275 2082945813\ne 1213834231\n</code></pre>\n\n<p>And a little messier file:</p>\n\n<pre><code>$ cat dat/rows.txt\na -1109180 699692587\na quick brown fox jumps over the lazy dog\na 1213834231 -226769626\n\nc 994957275 2082945813\n227 isn't good\ne 1213834231\n</code></pre>\n\n<p>Should provide a good test to see if the code does what you need it to do. Running your data through the code provides:</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ /bin/sscanf_mixed &lt;dat/input.txt\nall values: 'a'  -1109180  699692587\nall values: 'a'  1213834231  -226769626\nall values: 'c'  994957275  2082945813\ntwo values: 'e'  1213834231\n</code></pre>\n\n<p>The messier file output:</p>\n\n<pre><code>$ ./bin/sscanf_mixed &lt;dat/rows.txt\nall values: 'a'  -1109180  699692587\nerror: no character and value on line.\nall values: 'a'  1213834231  -226769626\nerror: line is empty or contians only newline.\nall values: 'c'  994957275  2082945813\nerror: no lowercase char beginning line.\ntwo values: 'e'  1213834231\n</code></pre>\n\n<p>As you can see, both input files provided the same number of conversions, the second simply noting the error or problem that took place when non-conforming line are encountered.</p>\n\n<p>Look things over and let me know if you have any questions. There are many ways to approach the logic of the problem, but which ever way you choose, you want to make sure you build all input routines flexible enough to handle those conditions (empty line, etc...) that you should reasonably expect to encounter in real world use.</p>\n"}], "owner": {"reputation": 13, "user_id": 6463197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468a981f0dbe09f96b2866c321a895ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan-Anthony", "link": "https://stackoverflow.com/users/6463197/ethan-anthony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "accepted_answer_id": 43086321, "answer_count": 1, "score": 0, "last_activity_date": 1490770239, "creation_date": 1490761140, "question_id": 43084250, "link": "https://stackoverflow.com/questions/43084250/parsing-numbers-from-standard-input-stream-using-sscanf-in-c", "title": "Parsing numbers from standard input stream using sscanf in C", "body": "<p>Parsing numbers from standard input stream using sscanf in C</p>\n\n<p>I have a text file which contains rows that start with a letter and then are followed by unsigned integers (some times a pair and other times just one).  At the begging of each row is a letter to categorize the row.  (see below) I\u2019m able to get the content of the file and read it to screen. However, I am struggling with using sscanf to extract the letter and each integer from each row. So the results would be char, int and int all in separate variables - just using the \u2018a\u2019 row as an example.  I\u2019ve been using the below code. The best I\u2019ve gotten is that sscanf causes the strange behavior of giving all zeros. Again, I\u2019m trying to get the char and each int into separate variables.</p>\n\n<p>Sample of rows from text file</p>\n\n<pre><code>a -1109180 699692587\na 1213834231 -226769626\nc 994957275 2082945813\ne 1213834231\n\n\n//The Code Used//////////////\n\nchar *line = NULL;\nsize_t size;\nint results;\n\nint val1;\nint val2; \n\nwhile (getline(&amp;line, &amp;size, stdin) != -1){\n\n    if(strstr(line,\"a\") != NULL){\n\n        sscanf(line,\"Val1 and Val2: %d %d\", val1,val2);\n        printf(\"Value1 %d\\n\",val1);\n        printf(\"Value2 %d\\n\",val2);\n\n    }\n\n//This prints each line in file \nprintf(\"%s\\n\", line);\n\n}\n</code></pre>\n\n<p>Kinda clueless on what\u2019s missing here. Is sscanf the best method to achieve this in C or is there a simpler alternative?  Thanks in advance. </p>\n"}, {"tags": ["c++", "c", "assembly"], "answers": [{"comments": [{"owner": {"reputation": 787, "user_id": 7783416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5802bbd2024a61359425c4392567cc1a?s=128&d=identicon&r=PG&f=1", "display_name": "user2914191", "link": "https://stackoverflow.com/users/7783416/user2914191"}, "edited": false, "score": 0, "creation_date": 1490760082, "post_id": 43084027, "comment_id": 73250739, "body": "yeah i meant to say <code>mov rsp, rbp</code> in title. <code>rbp</code> is being pushed, but the way it&#39;s assigned is strange. it allocates <code>0x48</code> bytes for vector i presume, and then moves <code>0x80</code> bytes down the stack to set <code>rbp</code>"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1490760351, "post_id": 43084027, "comment_id": 73250820, "body": "<code>MainEntry</code> does use frame pointers.  The <code>lea 0x80(%rsp),%rbp</code> sets up the frame (by adding 0x80 bytes to the stack pointer and storing it in <code>rbp</code>), and the addressing for local variables is relative to <code>rbp</code>.  If frame pointers were not used, the local variables would be addressed relative to <code>rsp</code>."}, {"owner": {"reputation": 787, "user_id": 7783416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5802bbd2024a61359425c4392567cc1a?s=128&d=identicon&r=PG&f=1", "display_name": "user2914191", "link": "https://stackoverflow.com/users/7783416/user2914191"}, "edited": false, "score": 1, "creation_date": 1490760853, "post_id": 43084027, "comment_id": 73250973, "body": "i just checked registers and it appears like MainEntry()&#39;s <code>rbp</code> is the same value as main()&#39;s <code>rbp</code>. So both <code>main</code> and <code>MainEntry</code> use the same base pointer. thats why there&#39;s such a large offset of <code>0x80 bytes</code>."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": true, "score": 2, "last_activity_date": 1490759832, "creation_date": 1490759832, "answer_id": 43084027, "question_id": 43083913, "link": "https://stackoverflow.com/questions/43083913/why-is-there-no-mov-rsp-rbp-in-function-prologue/43084027#43084027", "title": "Why is there no &quot;mov rsp, rbp&quot; in function prologue?", "body": "<p>1) <code>rbx</code> is pushed onto the stack because the calling convention says it is preserved across calls.</p>\n\n<p>2) This function is compiled without frame pointers. <code>rbp</code> is just another general purpose register when compiling without frame pointers.</p>\n\n<p>Question in title) That instruction doesn't exist. push always takes one argument. Perhaps you mean to ask why isn't <code>rbp</code> pushed. The answer is nothing used it so no instructions are required to preserve it.</p>\n"}], "owner": {"reputation": 787, "user_id": 7783416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5802bbd2024a61359425c4392567cc1a?s=128&d=identicon&r=PG&f=1", "display_name": "user2914191", "link": "https://stackoverflow.com/users/7783416/user2914191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "accepted_answer_id": 43084027, "answer_count": 1, "score": 2, "last_activity_date": 1490763708, "creation_date": 1490759143, "last_edit_date": 1490760064, "question_id": 43083913, "link": "https://stackoverflow.com/questions/43083913/why-is-there-no-mov-rsp-rbp-in-function-prologue", "title": "Why is there no &quot;mov rsp, rbp&quot; in function prologue?", "body": "<p>In assembly, many functions begin with the following prologue:</p>\n\n<pre><code>00000001004010e0: main(int, char**)+0    push    %rbp\n00000001004010e1: main(int, char**)+1    mov     %rsp,%rbp\n</code></pre>\n\n<p>Some functions, like the one below, does not:</p>\n\n<pre><code>                              int MainEntry(){\n                                       MainEntry():\n0000000100401104: MainEntry()+0          push    %rbp\n0000000100401105: MainEntry()+1          push    %rbx\n0000000100401106: MainEntry()+2          sub     $0x48,%rsp\n000000010040110a: MainEntry()+6          lea     0x80(%rsp),%rbp\n                                        vector&lt;int&gt; v;\n0000000100401112: MainEntry()+14         lea     -0x60(%rbp),%rax\n0000000100401116: MainEntry()+18         mov     %rax,%rcx\n0000000100401119: MainEntry()+21         callq   0x100401b00 &lt;std::vector&lt;int, std::allocator&lt;int&gt; &gt;::vector()&gt;\n                                        return 0;\n000000010040111e: MainEntry()+26         mov     $0x0,%ebx\n0000000100401123: MainEntry()+31         lea     -0x60(%rbp),%rax\n0000000100401127: MainEntry()+35         mov     %rax,%rcx\n000000010040112a: MainEntry()+38         callq   0x100401b20 &lt;std::vector&lt;int, std::allocator&lt;int&gt; &gt;::~vector()&gt;\n000000010040112f: MainEntry()+43         mov     %ebx,%eax\n                                     }\n</code></pre>\n\n<p>Here is the C++ code that compiles into this:</p>\n\n<pre><code>int main(int c, char** args){\n    MainEntry();\n    return 0;\n}\n\nint MainEntry(){\n    vector&lt;int&gt; v;\n    return 0;\n}\n</code></pre>\n\n<p>So here are my two questions:</p>\n\n<ol>\n<li>In the <code>MainEntry</code> function, there is a <code>push rbp</code>, and then a <code>push rbx</code>. Why is <code>rbx</code> pushed onto the stack?</li>\n<li>If I understand correctly, <code>sub     $0x48,%rsp</code> allocates <code>0x48 bytes</code> on the stack, and <code>lea     0x80(%rsp),%rbp</code> moves <code>0x80 bytes</code> down on the stack and assigns that as the base. Where is <code>rbp</code> going to end up in the local stack frame and how did it get there?</li>\n</ol>\n"}, {"tags": ["c++", "c", "delphi", "c++builder", "vcl"], "comments": [{"owner": {"reputation": 1199, "user_id": 2650419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Xpb3s.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2650419/peter"}, "edited": false, "score": 0, "creation_date": 1491474917, "post_id": 43083911, "comment_id": 73574025, "body": "I tried capturing the Windows message ( WM_LBUTTONDOWN ) and noticed that it fires at the same time, so it&#39;s not VCL delaying the event as far as I can tell.  I assume this is Windows behaviour then ?"}], "owner": {"reputation": 1199, "user_id": 2650419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Xpb3s.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2650419/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490760703, "creation_date": 1490759129, "last_edit_date": 1490760703, "question_id": 43083911, "link": "https://stackoverflow.com/questions/43083911/tlistview-mouseup-event-fires-too-early-and-mousemove-shift-doesnt-work-as-expe", "title": "TListView MouseUp event fires too early and MouseMove Shift doesn&#39;t work as expected either", "body": "<p>Using C++ Builder 2009 (but I tagged Delphi too since this is VCL)</p>\n\n<p>I created a class that inherits from <code>TListView</code> and when there are no objects to list, I '<code>DrawText</code>' some text in the middle of the <code>ListView</code> <code>Canvas</code>, but with a hotspot in the text that can be clicked.<br>\nBasically I draw the text using two colors and the hotspot area is in blue.\nI also keep track of the coordinates of that hotspot in a custom HotSpot class.</p>\n\n<p>PS. I use <code>MultiSelect = true</code></p>\n\n<p>When I hover with the mouse over the hotspot I want to underline the text (which works using below code) </p>\n\n<p>When I release a mouse click on the hotspot I want it to call an event (which works in below code, if <code>MultiSelect = true</code>)</p>\n\n<p>But I also wanted to display the text in bold when the hotspot is clicked (MouseDown) before released again (MouseUp).\nThis doesn't work because the MouseDown code is not executed when the mouse is clicked, it only executes when the mouse click gets released and only just before the MouseUp code.  Is this a bug ?</p>\n\n<p>However the logic changes when <code>MultiSelect</code> is off (= <code>false</code>), the MouseUp event then triggers straight after MouseDown, but <em>before</em> the mouse button is released</p>\n\n<p>So I figured I ignore MouseDown and put the logic in MouseMove and check Shift for the left mouse click.  Yet that never works when <code>MultiSelect = true</code>, only when <code>MultiSelect = false</code>, which doesn't work for my needs because MouseUp triggers too fast.</p>\n\n<p>Is there something obvious I'm missing ?</p>\n\n<pre><code>//---------------------------------------------------------------------------\nvoid __fastcall ObjectListView::MouseMove(Classes::TShiftState Shift, int X, int Y)\n{\nTListView::MouseMove(Shift, X, Y);\n\nif (Items-&gt;Count == 0 &amp;&amp; HotSpot.Rect.Top &gt; 0)\n    {\n    if (InRange(X, HotSpot.Rect.Left, HotSpot.Rect.Right) &amp;&amp; InRange(Y, HotSpot.Rect.Top, HotSpot.Rect.Bottom))\n        {\n        if (!HotSpot.Hover)\n            {\n            HotSpot.Hover = true ;\n            Invalidate() ; // Paint the text again, but this time Hot\n            }\n\n        if (Shift.Contains(ssLeft)) // Left Mouse button is being held down\n            {\n            if (!HotSpot.Select)\n                {\n                HotSpot.Select = true ;\n                Invalidate() ; // Paint the text again, but this time Selected\n                }\n            }\n        else if (HotSpot.Select)\n            {\n            HotSpot.Select = false ;\n            Invalidate() ;\n            }\n        }\n    else if (HotSpot.Hover)\n        {\n        HotSpot.Hover = false ;\n        HotSpot.Select = false;\n        Invalidate() ;\n        }\n    }\n}\n//---------------------------------------------------------------------------\nvoid __fastcall ObjectListView::MouseUp(TMouseButton Button, Classes::TShiftState Shift, int X, int Y)\n{\nTListView::MouseUp(Button, Shift, X, Y);\n\nif (OnHotSpotClick &amp;&amp; Items-&gt;Count == 0 &amp;&amp; HotSpot.Rect.Top &gt; 0)\n    {\n    if (Button == mbLeft)\n        {\n        if (InRange(X, HotSpot.Rect.Left, HotSpot.Rect.Right) &amp;&amp; InRange(Y, HotSpot.Rect.Top, HotSpot.Rect.Bottom))\n            {\n            HotSpot.Select = false ;\n            Invalidate() ;\n            OnHotSpotClick(this, ParentObject, (TLVStatus)HotSpot.Data) ;\n            }\n        }\n    }\n}\n//---------------------------------------------------------------------------\nvoid __fastcall ObjectListView::MouseDown(TMouseButton Button, Classes::TShiftState Shift, int X, int Y)\n{\nTListView::MouseDown(Button, Shift, X, Y);\n\n// This event triggers when the mouse button is released (Bug ?) and if (MultiSelect == true)\n// So there is no point trying to do something with the HotSpot state\n// Instead, use the MouseMove event and check the Shift state\n}\n//---------------------------------------------------------------------------\n</code></pre>\n"}, {"tags": ["c", "sum"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1490757880, "post_id": 43083534, "comment_id": 73250120, "body": "And your question is?"}, {"owner": {"reputation": 35, "user_id": 7782297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc3c359aa8a9d80c47bcaaf3258578cf?s=128&d=identicon&r=PG&f=1", "display_name": "ebueh", "link": "https://stackoverflow.com/users/7782297/ebueh"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1490758555, "post_id": 43083534, "comment_id": 73250312, "body": "I am not sure why I am not getting the correct value for sumMidPoint. The test case has the sumMidPoint = 1.980000 sq. units"}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1490758678, "post_id": 43083534, "comment_id": 73250345, "body": "Use a debugger and step through the code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1490761566, "post_id": 43083534, "comment_id": 73251200, "body": "&quot; I am not getting the correct value for sumMidPoint&quot; --&gt; what was the incorrect value your received?"}, {"owner": {"reputation": 87536, "user_id": 90801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6acc4764438b6f3e80e9645ec8259353?s=128&d=identicon&r=PG", "display_name": "Arthur Ulfeldt", "link": "https://stackoverflow.com/users/90801/arthur-ulfeldt"}, "edited": false, "score": 0, "creation_date": 1490771631, "post_id": 43083534, "comment_id": 73255483, "body": "The Riemann tag refers to the systems monitoring library of the same name, rather than the math function. It&#39;s rather unfortunate that so many things in the software world use the same name. So I hope you don&#39;t mind my removing the tag."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7782297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc3c359aa8a9d80c47bcaaf3258578cf?s=128&d=identicon&r=PG&f=1", "display_name": "ebueh", "link": "https://stackoverflow.com/users/7782297/ebueh"}, "edited": false, "score": 0, "creation_date": 1490757767, "post_id": 43083607, "comment_id": 73250097, "body": "I tried this, and I&#39;m still not getting the correct value. I have added x = x + (deltaX / 2) and that also isn&#39;t helping"}, {"owner": {"reputation": 35, "user_id": 7782297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc3c359aa8a9d80c47bcaaf3258578cf?s=128&d=identicon&r=PG&f=1", "display_name": "ebueh", "link": "https://stackoverflow.com/users/7782297/ebueh"}, "edited": false, "score": 0, "creation_date": 1490758502, "post_id": 43083607, "comment_id": 73250296, "body": "In the test trial the answer is 1.980000 so the quadratic function would read 3x^2 + 4x + 0 with a = -1 and b = 1 with n = 10 for the proper Riemann sum notation."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490761773, "post_id": 43083607, "comment_id": 73251235, "body": "<code>(coefficient1*x + coefficient2)*x + coefficient3;</code> is numerically more stable and likely faster than <code>(coefficient1 * pow( x, 2)) + (coefficient2 * x) + coefficient3</code> is n"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490761851, "post_id": 43083607, "comment_id": 73251257, "body": "Suggest not changing function signature from <code>int</code>s and instead <code>float deltaX = (1.0f*final - initial) &#47; rectangle;</code>"}], "tags": [], "owner": {"reputation": 29, "user_id": 5753459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38dfd27fe2e52f0c4ebd3d26e773976c?s=128&d=identicon&r=PG&f=1", "display_name": "Franck Horlaville", "link": "https://stackoverflow.com/users/5753459/franck-horlaville"}, "is_accepted": false, "score": -1, "last_activity_date": 1490759150, "last_edit_date": 1490759150, "creation_date": 1490757044, "answer_id": 43083607, "question_id": 43083534, "link": "https://stackoverflow.com/questions/43083534/riemann-sum-equations/43083607#43083607", "title": "Riemann sum equations", "body": "<p>Two issues:</p>\n\n<ol>\n<li>final, initial and rectangle are all integers, therefore you're making an integer division:</li>\n</ol>\n\n<p>(final - initial) / rectangle = 2/20 = 0.1 in float but 0 in int</p>\n\n<p>to correct, set at least one of them as float, but better both:</p>\n\n<pre><code>float final, float initial\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Your second error is in the formula: 3x^2 is 3 * pow(x, 2). You wrote (3x)^2.</p></li>\n<li><p>Also, to be safe, don't forget to initialize your sumMidPoint variable before using it:</p>\n\n<p>float sumMidPoint = 0;</p></li>\n</ol>\n\n<p>Here is my final version of the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nfloat getMidPoint(float final, int initial, int rectangle, int   coefficient1, int coefficient2, int coefficient3) {\n    float deltaX = (final - initial) / rectangle;\n    float sumMidPoint = 0;\n    float f_X;\n    float x = initial + deltaX / 2;\n\n    for(int i=0; i&lt; rectangle; i++)\n    {\n        f_X = (coefficient1 * pow( x, 2)) + (coefficient2 * x) + coefficient3;\n\n        sumMidPoint += f_X * deltaX;\n        x = x + deltaX;\n    }\n    return(sumMidPoint);\n\n}\n\nint main() {\n    printf(\"Result: %f\\n\", getMidPoint(1, -1, 10, 3, 4, 0));\n    return(0);\n}\n</code></pre>\n\n<p>Output:\n<strong>Result: 1.980000</strong></p>\n"}], "owner": {"reputation": 35, "user_id": 7782297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc3c359aa8a9d80c47bcaaf3258578cf?s=128&d=identicon&r=PG&f=1", "display_name": "ebueh", "link": "https://stackoverflow.com/users/7782297/ebueh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490773043, "creation_date": 1490756507, "last_edit_date": 1490773043, "question_id": 43083534, "link": "https://stackoverflow.com/questions/43083534/riemann-sum-equations", "title": "Riemann sum equations", "body": "<p>I have an equation for finding the mid point value for the Riemann sum, but it is not providing the correct value for the midpoint when entering coefficients <code>3, 4, 0</code> and upper and lower limits of <code>-1</code> and <code>1</code> with 10 rectangles.</p>\n\n<pre><code>float getMidPoint(int final, int initial, int rectangle, int coefficient1, int coefficient2, int coefficient3)\n{\n    float deltaX;\n    float sumMidPoint;\n    float f_X;\n    float x;\n    x = initial;\n    deltaX = (final - initial) / rectangle;\n    while(x &lt; final)\n    {\n        f_X = pow((coefficient1 * x), 2) + (coefficient2 * x) + coefficient3;\n\n        sumMidPoint += f_X * deltaX;\n        x = x + deltaX;\n    }\n    return (sumMidPoint);\n}\n</code></pre>\n\n<p>I am not sure why I am not getting the correct value for sumMidPoint. The test case has the sumMidPoint = 1.980000 sq. units</p>\n"}, {"tags": ["c", "physics"], "comments": [{"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 3, "creation_date": 1490756723, "post_id": 43083498, "comment_id": 73249767, "body": "Well, one thing that doesn&#39;t make sense is <code>vx[j] = vx[j] - ax[j] * h;</code> and the same for <code>y</code>. Why are you subtracting acceleration rather than adding?  Additionally, you are only computing one point. Why do expect to get a full arc simulation?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1490761000, "post_id": 43083498, "comment_id": 73251032, "body": "Please distill this into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, rather than dumping your whole project on us with a &quot;this doesn&#39;t work&quot;."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1490772647, "post_id": 43083498, "comment_id": 73256167, "body": "You did not differentiate the drag coefficient between the two instances, you could use a array for these coefficients. Also check again how to compute drag in a two-dimensional motion and what the formula for air drag is."}, {"owner": {"reputation": 11, "user_id": 7783291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a8f5fdcca7e1d76593ae6508a33d7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Klein", "link": "https://stackoverflow.com/users/7783291/michael-klein"}, "edited": false, "score": 0, "creation_date": 1490855211, "post_id": 43083498, "comment_id": 73300340, "body": "I see that I am only computing one point, that&#39;s the problem I&#39;m having, why am I only computing one point? I&#39;ve got three other separate variations of the similar equation using different coding methods, however I thought this one would be the most Minimal and Complete example. If you would like to take a look at the other three separate programs, I&#39;d be happy to copy them onto this for your reference. However the only problem I am having is the equation representing one point, rather than simulating a trajectory arc."}, {"owner": {"reputation": 11, "user_id": 7783291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a8f5fdcca7e1d76593ae6508a33d7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Klein", "link": "https://stackoverflow.com/users/7783291/michael-klein"}, "edited": false, "score": 0, "creation_date": 1490855262, "post_id": 43083498, "comment_id": 73300368, "body": "In response to LutzL, do you mean create an array that has the coefficient of drag being 0 and 0.0001? Then using that array as the source to refer to in the code?"}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1491496317, "post_id": 43083498, "comment_id": 73590438, "body": "&quot;why am I only computing one point?&quot; - because your loop only iterates for the shell&#39;s number. You need to loop (and integrate) over time. Moreover, note that your (2nd) loop only iterates the 1st shell, and not the 2nd!"}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1491496380, "post_id": 43083498, "comment_id": 73590485, "body": "If you start with code for a single shell at a time, it&#39;d be much easier for you to follow the program&#39;s flow."}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1491496648, "post_id": 43083498, "comment_id": 73590670, "body": "One more comment about the physics model - the Drag force is a quadratic function of the velocity. D = 0.5 * rho * S * Cd * V^2 = K * V^2. Thus, you should calculate the magnitude of the Drag (from the magnitude of the speed), then separate that to its X and Y components."}, {"owner": {"reputation": 11, "user_id": 7783291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a8f5fdcca7e1d76593ae6508a33d7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Klein", "link": "https://stackoverflow.com/users/7783291/michael-klein"}, "edited": false, "score": 0, "creation_date": 1491607410, "post_id": 43083498, "comment_id": 73644904, "body": "Figured out my problem, I forgot to include a while loop so the program can run over a set time."}], "owner": {"reputation": 11, "user_id": 7783291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38a8f5fdcca7e1d76593ae6508a33d7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Klein", "link": "https://stackoverflow.com/users/7783291/michael-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490756290, "creation_date": 1490756290, "question_id": 43083498, "link": "https://stackoverflow.com/questions/43083498/animating-a-trajectory-of-cannon-shells-c-program", "title": "Animating a trajectory of Cannon Shells C-program", "body": "<p>I am unable to see what I did wrong with my code. I am supposed to determine the trajectory that two cannon shells will take when fired at 500 m/s at an angle of 50 degrees above the horizontal. One of the shells is assumed to experience no drag and the other experiences a drag coefficient of 0.0001. I was wondering as to why my code wasn't plotting correctly. Any help would be great!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"philsplot.h\"\n\n\n// Number of shells\n#define N 2\n// Defining the value of PI\n#define PI 3.1415926535\n\n  int main()\n  {\n    double xmin, xmax, ymin, ymax, theta = (50 * (PI/180));\n    int color, style;\n    double expand;\n\n    // philsplot function to open an x-window\n    open_plot(\"800x600\");\n    int i,j;\n    double vx[N], vy[N], x[N], y[N], h, ax[N], ay[N];\n    h = 0.01;\n\n    // philsplot function erases the canvas after flushpoint is called\n    erase_plot();\n\n    // plot using km for distance\n    xmin = 0; xmax = 1;\n    ymin = 0; ymax = 1;\n    expand = 1.1;\n    color = 1;\n\n    // philsplot function to set limits of the plotting canvas\n    box_plot(xmin,xmax,ymin,ymax,expand,color,\"Distance (km)\",\"Height (km)\",\"RRRR\",\"TTTT\");\n    // philsplot function that maps the plotting canvas onto the screen\n    flush_plot();\n\n    style = 2;\n    color = 3;\n    expand = 1.0;\n    // The initial values\n    for(i=0; i&lt;N; i++) {\n      // want the initial x-position to be this\n      x[i] = 0;\n      // want the initial y-position to be this\n      y[i] = 0;\n      // want the initial x-velocity to be this\n      vx[i] = 0.5*cos(theta);\n      // want the initial y-velocity to be this\n      vy[i] = 0.5*sin(theta);\n    }\n      for(j=0; j&lt;N-1; j++) {\n    // Using Euler's method you get this:\n    ax[j] = (-0.0001) * (0.5) * vx[j];\n    ay[j] = (-0.00981) - (0.0001) * (0.5) * vy[j];\n    vx[j] = vx[j] - ax[j] * h;\n    vy[j] = vy[j] - ay[j] * h;\n    x[j] = x[j] + vx[j] * h;\n    y[j] = y[j] + vy[j] * h;\n\n      putpoint_plot(x[j],y[j],10, style, color, expand, 1);\n\n      flush_plot();\n\n      delay_plot(1000);\n\n    }\n\n    printf(\"hit enter for next plot: \");\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "load", "imagelibrary"], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 5753459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38dfd27fe2e52f0c4ebd3d26e773976c?s=128&d=identicon&r=PG&f=1", "display_name": "Franck Horlaville", "link": "https://stackoverflow.com/users/5753459/franck-horlaville"}, "is_accepted": false, "score": 0, "last_activity_date": 1490759456, "creation_date": 1490759456, "answer_id": 43083963, "question_id": 43083424, "link": "https://stackoverflow.com/questions/43083424/c-c-image-loading-saving-libraries/43083963#43083963", "title": "c/c++ image loading/saving libraries", "body": "<p>Have you looked at libGD or ImageMagick?</p>\n"}], "owner": {"reputation": 405, "user_id": 4897264, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f228710de33d3d33d30167fd7abe2ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Aesope", "link": "https://stackoverflow.com/users/4897264/aesope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1490759456, "creation_date": 1490755811, "question_id": 43083424, "link": "https://stackoverflow.com/questions/43083424/c-c-image-loading-saving-libraries", "title": "c/c++ image loading/saving libraries", "body": "<p>I'm looking for a c/c++ library that can load and save image from all these requirements :</p>\n\n<ul>\n<li>multiple supported image format</li>\n<li>can load and save huge image (> 2GB) (that often mean a logic image from tiling multiple images)</li>\n<li>can read/write metadata</li>\n<li>have callback mechanism while loading/writing for user feedback</li>\n</ul>\n\n<p>I saw a multitude of libraries but none of them seam to do the job :</p>\n\n<ul>\n<li>OpenCV</li>\n<li>Qt</li>\n<li>FreeImage</li>\n<li>Boost::GIL</li>\n<li>MIL (Matrox Imaging Library)</li>\n<li>LeadTools</li>\n<li>Cimg</li>\n<li>DevIl</li>\n<li>...</li>\n</ul>\n\n<p>I saw multiple posts addressing this problem but none of them answer my needs. Do I miss something? I am interested as much as a free or a paid library.</p>\n\n<p>Thanks for your time!</p>\n"}, {"tags": ["c", "arrays", "reverse"], "comments": [{"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 2, "creation_date": 1490755172, "post_id": 43083284, "comment_id": 73249344, "body": "<code>i&lt;=7&#47;2</code>   or else it will reverse the whole thing again"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1490756195, "post_id": 43083284, "comment_id": 73249619, "body": "This problem is simplest if you imagine solving it by hand: Swap the first and last, second and second last, etc. until you get to the middle. In code, keep <i>two</i> indexes into the array. The first starts at 0 and the second at 7. Swap, then move the indexes inward (increment first, decrement second). Stop when the indexes meet (but think about what happens for both even and odd lists).  In general, think more. Code less."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1490756351, "post_id": 43083284, "comment_id": 73249671, "body": "Or just walk the array with two pointers until they meet/pass. <a href=\"http://ideone.com/NiKkpN\" rel=\"nofollow noreferrer\">See it live</a>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7783242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5dd4236a2de6bac9c2696968886ff69?s=128&d=identicon&r=PG&f=1", "display_name": "Lethro", "link": "https://stackoverflow.com/users/7783242/lethro"}, "edited": false, "score": 0, "creation_date": 1490756352, "post_id": 43083359, "comment_id": 73249672, "body": "What does &quot;length&quot; equal since it is not initialized? Would it be equal to 8?"}, {"owner": {"reputation": 13, "user_id": 7783242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5dd4236a2de6bac9c2696968886ff69?s=128&d=identicon&r=PG&f=1", "display_name": "Lethro", "link": "https://stackoverflow.com/users/7783242/lethro"}, "edited": false, "score": 0, "creation_date": 1490757216, "post_id": 43083359, "comment_id": 73249935, "body": "Also, why do you subtract 1 from &quot;length&quot;? Thanks in advance"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 13, "user_id": 7783242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5dd4236a2de6bac9c2696968886ff69?s=128&d=identicon&r=PG&f=1", "display_name": "Lethro", "link": "https://stackoverflow.com/users/7783242/lethro"}, "edited": false, "score": 0, "creation_date": 1490758171, "post_id": 43083359, "comment_id": 73250200, "body": "@Lethro: It\u2019s not uninitialized; it\u2019s a parameter. You pass it a value when calling the function, like how it\u2019s called as <code>reverse(a, 8)</code> in <code>main</code>; 8 is the length. You\u2019d subtract 1 from it because you want it to start out as the last index in the array, which is one less than the length (arrays starting at 0). (You were initializing it with 7 before and the length is 8.)"}], "tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": true, "score": 0, "last_activity_date": 1490755463, "creation_date": 1490755463, "answer_id": 43083359, "question_id": 43083284, "link": "https://stackoverflow.com/questions/43083284/reversing-array-elements-in-c-programming/43083359#43083359", "title": "Reversing array elements in C programming", "body": "<p>To avoid being misled, write the output after the reversal, not during it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid reverse(int a[], int i)\n{\n    int j = 7, b;\n    for (i = 0; i &lt;= 7; i++)\n    {\n        b = a[i];\n        a[i] = a[j];\n        a[j] = b;\n        j--;\n    }\n}\n\nint main(void)\n{\n    int a[8];\n    int i;\n\n    for (i = 0; i &lt;= 7; i++)\n    {\n        printf(\"Enter number %d: \",i);\n        scanf(\"%d\", &amp;a[i]);\n    }\n\n    reverse(a, 8);\n\n    for (i = 0; i &lt;= 7; i++)\n    {\n        printf(\"Element %d is: %d\\n\", i, a[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Now you\u2019ll notice the array isn\u2019t changing at all. That\u2019s because you\u2019re swapping every element in the array twice: once to its reversed position, then back to its original position. To fix this, only loop over the first half the array, i.e. while <code>i &lt; 4</code>.</p>\n\n<p>It was probably also intended to make the second argument to <code>reverse</code> the length, so you should make use of that instead of hard-coding 7 or 4:</p>\n\n<pre><code>void reverse(int a[], int length)\n{\n    int i, j = length - 1, b;\n\n    for (i = 0; i &lt; length / 2; i++)\n    {\n        b = a[i];\n        a[i] = a[j];\n        a[j] = b;\n        j--;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1490756286, "post_id": 43083452, "comment_id": 73249645, "body": "Think a moment about the usefulness of <code>b[]</code> in this code. Why not just print <code>a[i-1-j]</code> on each pass? And <code>a[]</code> remains unchanged, which is the root of the initial problem, and this doesn&#39;t fix that."}, {"owner": {"reputation": 29, "user_id": 5753459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38dfd27fe2e52f0c4ebd3d26e773976c?s=128&d=identicon&r=PG&f=1", "display_name": "Franck Horlaville", "link": "https://stackoverflow.com/users/5753459/franck-horlaville"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1490756457, "post_id": 43083452, "comment_id": 73249698, "body": "I just wanted to show the option that you could access the elements in the reverse order without actually reversing the array, as well as build a reversed array without touching the original - just other options"}], "tags": [], "owner": {"reputation": 29, "user_id": 5753459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38dfd27fe2e52f0c4ebd3d26e773976c?s=128&d=identicon&r=PG&f=1", "display_name": "Franck Horlaville", "link": "https://stackoverflow.com/users/5753459/franck-horlaville"}, "is_accepted": false, "score": 0, "last_activity_date": 1490756027, "creation_date": 1490756027, "answer_id": 43083452, "question_id": 43083284, "link": "https://stackoverflow.com/questions/43083284/reversing-array-elements-in-c-programming/43083452#43083452", "title": "Reversing array elements in C programming", "body": "<p>You could also copy over the array in a new one:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid reverse(int a[], int i)\n{\n    int b[i];\n    int j;\n\n    for(j=0; j&lt;i; j++){\n        b[j] = a[i-1-j];\n        printf(\"Element %d is: %d\\n\", j, b[j]);\n    }\n}\n\nint main(void)\n{\n    int a[8];\n    int i;\n    for(i=0;i&lt;=7;i++)\n    {\n        printf(\"Enter number %d: \",i);\n        scanf(\"%d\", &amp;a[i]);\n    }\n    reverse(a, 8);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1054, "user_id": 6106641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/652b9195ab2ad7effd41fd7410661c6b?s=128&d=identicon&r=PG&f=1", "display_name": "Archmede", "link": "https://stackoverflow.com/users/6106641/archmede"}, "is_accepted": false, "score": 0, "last_activity_date": 1490756158, "creation_date": 1490756158, "answer_id": 43083476, "question_id": 43083284, "link": "https://stackoverflow.com/questions/43083284/reversing-array-elements-in-c-programming/43083476#43083476", "title": "Reversing array elements in C programming", "body": "<p>What you want to do it move through only half of the length of your array else you're reversing the array twice.</p>\n\n<pre><code>void reverse(int a[], int len)\n{\n    int i;\n    int j=len-1,b;\n    for(i=0;i&lt;len/2;i++)\n    {\n        b=a[i];\n        a[i]=a[j];\n        a[j]=b;\n        j--;\n    }\n\n    for(i = 0; i &lt; len; i++) {\n        printf(\"Element %d is: %d\\n\", i,a[i]);\n    }   \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6552688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22ae0f0cd0198af598ff53a37d76691?s=128&d=identicon&r=PG&f=1", "display_name": "massony875", "link": "https://stackoverflow.com/users/6552688/massony875"}, "is_accepted": false, "score": 0, "last_activity_date": 1490776202, "creation_date": 1490776202, "answer_id": 43088278, "question_id": 43083284, "link": "https://stackoverflow.com/questions/43083284/reversing-array-elements-in-c-programming/43088278#43088278", "title": "Reversing array elements in C programming", "body": "<pre><code>The Principe is simple. just stand at the middle of the table and reverse the elements as follow. so pose n is lent of the table. then the last element is n-1.\n\nso you ave to reverse position t[0] and t[n-2]\nreverse t[1] and t[n-3] and so on...\n\nstop when you rich the middle of the table. try to code your self is better than for me giving you the code.\nhope it helped.\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7783242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5dd4236a2de6bac9c2696968886ff69?s=128&d=identicon&r=PG&f=1", "display_name": "Lethro", "link": "https://stackoverflow.com/users/7783242/lethro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 1, "accepted_answer_id": 43083359, "answer_count": 4, "score": 1, "last_activity_date": 1490776202, "creation_date": 1490754924, "last_edit_date": 1490760521, "question_id": 43083284, "link": "https://stackoverflow.com/questions/43083284/reversing-array-elements-in-c-programming", "title": "Reversing array elements in C programming", "body": "<p>I am new to C and I have a problem. I need to reverse the elements of arrays in the following program. Can I get a very simple explanation of what I am doing wrong and how I could go on about fixing it?</p>\n\n<p>Here's the output I get:</p>\n\n<pre>Enter number 0: 0\nEnter number 1: 1\nEnter number 2: 2\nEnter number 3: 3\nEnter number 4: 4\nEnter number 5: 5\nEnter number 6: 6\nEnter number 7: 7\nElement 0 is: 7\nElement 1 is: 6\nElement 2 is: 5\nElement 3 is: 4\nElement 4 is: 4\nElement 5 is: 5\nElement 6 is: 6\nElement 7 is: 7\n</pre>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid reverse(int a[], int i)\n{\n    int j=7,b;\n    for (i=0; i&lt;=7; i++)\n    {\n        b=a[i];\n        a[i]=a[j];\n        a[j]=b;\n        printf(\"Element %d is: %d\\n\", i,a[i]);\n        j--;\n    }\n}\n\nint main(void)\n{\n    int a[8];\n    int i;\n    for(i=0;i&lt;=7;i++)\n    {\n        printf(\"Enter number %d: \",i);\n        scanf(\"%d\", &amp;a[i]);\n    }\n    reverse(a, 8);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 1054, "user_id": 6106641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/652b9195ab2ad7effd41fd7410661c6b?s=128&d=identicon&r=PG&f=1", "display_name": "Archmede", "link": "https://stackoverflow.com/users/6106641/archmede"}, "edited": false, "score": 0, "creation_date": 1490756261, "post_id": 43083278, "comment_id": 73249637, "body": "You should end your c string with &quot;\\0&quot;, so &quot;123123123&quot; should instead be &quot;123123123\\0&quot;;"}, {"owner": {"reputation": 23, "user_id": 7188786, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a2f31b3ffd1092a1203e6b67790cfe49?s=128&d=identicon&r=PG", "display_name": "Dulguuntur", "link": "https://stackoverflow.com/users/7188786/dulguuntur"}, "reply_to_user": {"reputation": 1054, "user_id": 6106641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/652b9195ab2ad7effd41fd7410661c6b?s=128&d=identicon&r=PG&f=1", "display_name": "Archmede", "link": "https://stackoverflow.com/users/6106641/archmede"}, "edited": false, "score": 0, "creation_date": 1490756626, "post_id": 43083278, "comment_id": 73249740, "body": "Tried this way , nothing changed. Same errors occur.Any idea?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1490757897, "post_id": 43083278, "comment_id": 73250121, "body": "1) <code>trx_list = calloc(1, sizeof(node_trx *));</code> --&gt; <code>trx_list = calloc(1, sizeof(node_trx ));</code>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1490757951, "post_id": 43083278, "comment_id": 73250133, "body": "What is <code>length</code> in your first code snippet?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1490757952, "post_id": 43083278, "comment_id": 73250135, "body": "2) <code>trx_list-&gt;amount = &quot;123123123&quot;;</code> but <code>char amount;</code> (Also Saving a pointer to a file has little meaning.)"}, {"owner": {"reputation": 13430, "user_id": 622571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41523c6db74e0f187eae731a6871a320?s=128&d=identicon&r=PG", "display_name": "Richard Schwartz", "link": "https://stackoverflow.com/users/622571/richard-schwartz"}, "edited": false, "score": 0, "creation_date": 1490758259, "post_id": 43083278, "comment_id": 73250224, "body": "It&#39;s definitely a big problem assigning a string to amount, which is just a single char."}, {"owner": {"reputation": 23, "user_id": 7188786, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a2f31b3ffd1092a1203e6b67790cfe49?s=128&d=identicon&r=PG", "display_name": "Dulguuntur", "link": "https://stackoverflow.com/users/7188786/dulguuntur"}, "edited": false, "score": 0, "creation_date": 1490758325, "post_id": 43083278, "comment_id": 73250247, "body": "length: sizeof(node_trx) , ty i will try this . and let you know what will happen ."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7188786, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a2f31b3ffd1092a1203e6b67790cfe49?s=128&d=identicon&r=PG", "display_name": "Dulguuntur", "link": "https://stackoverflow.com/users/7188786/dulguuntur"}, "edited": false, "score": 0, "creation_date": 1490760277, "post_id": 43083788, "comment_id": 73250788, "body": "THanks it really helps. :)"}], "tags": [], "owner": {"reputation": 266, "user_id": 5843393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a42fbdf58aed0ae888b77f945b07a5f0?s=128&d=identicon&r=PG&f=1", "display_name": "Zhigang An", "link": "https://stackoverflow.com/users/5843393/zhigang-an"}, "is_accepted": false, "score": 1, "last_activity_date": 1490758945, "last_edit_date": 1490758945, "creation_date": 1490758294, "answer_id": 43083788, "question_id": 43083278, "link": "https://stackoverflow.com/questions/43083278/c-write-struct-to-file/43083788#43083788", "title": "C write struct to file", "body": "<p>There are two obvious errors in your code.</p>\n\n<ol>\n<li><p>In struct declaration, the type of amount is <code>char</code>, but when you initialize it in <code>trx_list-&gt;amount = \"123123123\";</code>, you assigned a string, or char[10] array (there is an extra one for NULL terminator).</p></li>\n<li><p>In function <code>display_trx</code>, second <code>printf</code>, the result of <code>&amp;card_data-&gt;currency</code> is <code>int *</code>, not <code>int</code>. If you want to print out currency, why don't follow the first print, use <code>card_data-&gt;currency</code> (without &amp;)? You get that large number because you are printing pointer value implicitly converted into <code>int</code>, or the address of currency in card_data.</p></li>\n</ol>\n\n<p>And there is one error which compiler will not warn you (because it is not syntactically wrong.). As BLUEPIXY said in the comments, when allocating and initializing trx_list, you should really use <code>calloc(1, sizeof(node_trx))</code>. You are allocating space for what pointer <code>trx_list</code> points to, not the pointer itself, so there should not be an asterisk in <code>sizeof</code>.</p>\n\n<p>My suggestion is using a \"smart\" compiler, such as gcc, and enable warnings. This is a good practice (at least for me). Thank you!</p>\n"}], "owner": {"reputation": 23, "user_id": 7188786, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a2f31b3ffd1092a1203e6b67790cfe49?s=128&d=identicon&r=PG", "display_name": "Dulguuntur", "link": "https://stackoverflow.com/users/7188786/dulguuntur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490758945, "creation_date": 1490754884, "last_edit_date": 1490757785, "question_id": 43083278, "link": "https://stackoverflow.com/questions/43083278/c-write-struct-to-file", "title": "C write struct to file", "body": "<p>I am trying to save struct data to file. I saved the data this way.</p>\n\n<pre><code>node_trx * trx_list;\ntrx_list = calloc(1, sizeof(node_trx *));\ntrx_list-&gt;amount = \"123123123\";\ntrx_list-&gt;currency = 123;\ntrx_list-&gt;next_node = NULL;\nif (1 != fwrite(trx_list, length, 1, f)) {\n    //error\n}\nfree(trx_list);\n</code></pre>\n\n<p>Here is my struct:</p>\n\n<pre><code>typedef struct {\n  char amount;\n  int currency;\n  struct node_trx * next_node; } node_trx;\n</code></pre>\n\n<p>Main problem is after i saved struct to file and then after read, when print values, it is printing wrong values. For example: i stored currency as 123, then printed 6788576 this kind of numbers.</p>\n\n<p>here is my reading code:</p>\n\n<pre><code>int read_last_trx_from_file (const char * file_name, node_trx * * trx, unsigned * trx_len)\n{\n  FILE * f;\n  *trx = NULL;\n\n  if (NULL == (f = fopen(tools_get_full_filename_const(file_name), \"rb\")))\n  {\n    return 2; //error\n  }\n\n  size_t fsize;\n  fseek(f, 0, SEEK_END);\n  fsize = ftell(f);\n  fprintf(stdout, \"file size: %zd\\n\", fsize);\n  if (!fsize)\n  {\n    fclose(f);\n    return 3; //no data\n  } else {\n    if (fsize == 1) {\n        return 3; // no data\n    }\n  }\n\n  rewind(f);\n  if (NULL != (*trx = (node_trx *) calloc(1, fsize)))\n  {\n    if (1 != fread(*trx, fsize, 1, f))\n    {\n        fclose(f);\n        free(*trx);\n        return 2; //error\n    }\n  }\n  fclose(f);\n\n  *trx_len = fsize;\n  return 0; //OK }\n</code></pre>\n\n<p>Main function that calls read function:</p>\n\n<pre><code>int display_trx() {\n  node_trx * card_data;\n     if (3 != read_last_trx_from_file(LAST_TRX_OBJECT, &amp;card_data, &amp;data_set_len)) {\n          if (card_data != NULL) {\n            printf(\"%s AMOUNT \\n\", card_data-&gt;amount);\n            printf(\"%d CURRENCY \\n\", &amp;card_data-&gt;currency);\n        } \n     }\n}\n</code></pre>\n\n<p>After i read this way , when i print amount data, segmentation fault error occurs. so why segment error occured?\nAnd when i print currency, it printing 734364636 this kinda numbers. So why it prints wrong numbers. \nOr i only wrote pointer of struct to file?\nPlease help me guys.</p>\n"}]