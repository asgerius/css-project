[{"tags": ["c", "arrays", "calculator"], "comments": [{"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 1, "creation_date": 1425511368, "post_id": 28867054, "comment_id": 45998847, "body": "Did you have a question?"}, {"owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1425511419, "post_id": 28867054, "comment_id": 45998861, "body": "Yes. How to input multiple expressions other than two?"}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 1, "creation_date": 1425511589, "post_id": 28867054, "comment_id": 45998913, "body": "That&#39;s too broad of a question for Stack Overflow. &quot;By learning C&quot; is the only reasonable answer. As it is, your question is likely to be closed in fairly short order."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1425513284, "post_id": 28867054, "comment_id": 45999479, "body": "You sort of have it. Start by setting <code>op1= *exp - &#39;0&#39;</code> and <code>i=1</code> outside the loop. Then repeatedly read <code>op</code> and <code>op2</code> inside the loop. Finally, print <code>op1</code> after the loop ends."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1425513481, "post_id": 28867054, "comment_id": 45999542, "body": "@user3386109: yeah that&#39;s what I figured as well. OP may benefit from paper and pencil and drawing it as a flowchart."}], "answers": [{"tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": true, "score": 1, "last_activity_date": 1425514136, "last_edit_date": 1425514136, "creation_date": 1425513327, "answer_id": 28867459, "question_id": 28867054, "link": "https://stackoverflow.com/questions/28867054/how-to-create-a-calculator-that-calculates-multiple-expressions-more-than-two/28867459#28867459", "title": "How to create a calculator that calculates multiple expressions (more than two) with proper division", "body": "<p>The naive left-to-right solution is to keep on incrementing <code>i</code> (which, uh, you already seem to be doing, but with a weird constraint?). Mind the typo in <code>op1</code> vs. <code>opt1</code> -- this code will not compile! Also, use <code>exp[i]</code> to index single characters. Finally, do not use the <em>variable name</em> <code>exp</code>, as you may want to add <code>math.h</code> some day.</p>\n\n<p>About the loop: I don't see why you need to test <code>if (i == 0)</code> at the start of the <code>while</code> loop. (On 2nd reading: your indentation is making it unclear and so you just may have it already ...) A proper sum is</p>\n\n<pre><code>digit ( [+-*/] digit)*\n</code></pre>\n\n<p>i.e., <em>before</em> the <code>while</code>, grab your <code>op1</code>. Then, inside the loop, grab the next operator and operand and update <code>op1</code>. Loop until done, print result.</p>\n\n<p>That said, your main question appears to be</p>\n\n<blockquote>\n  <p>This programs division doesn't work correctly.</p>\n</blockquote>\n\n<p>It does -- <em>for integers</em>. Your example <code>6+4*3/7-9</code> gets calculated left-to-right as</p>\n\n<pre><code>6 + 4 = 10\n  * 3 = 30\n  / 7 = 4\n  - 9 = -5\n</code></pre>\n\n<p>As you can see, <code>30/7 = 4</code>, which is the correct result for an integer division. If you want to use decimals (where <code>30/7=4.285714285714</code>), do not use integers but a <code>float</code> or <code>double</code> type for <code>op1</code> and <code>op2</code>. Since you only grab one digit at a time, nothing else needs changing in your code, <em>except</em> for the very last <code>printf</code>:</p>\n\n<pre><code>printf(\"%f\\n\" , opt1);\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1010, "favorite_count": 0, "accepted_answer_id": 28867459, "answer_count": 1, "score": -2, "last_activity_date": 1425514136, "creation_date": 1425511320, "question_id": 28867054, "link": "https://stackoverflow.com/questions/28867054/how-to-create-a-calculator-that-calculates-multiple-expressions-more-than-two", "title": "How to create a calculator that calculates multiple expressions (more than two) with proper division", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n\nint main(){\n\n\nchar exp[100];\nchar op;\nint  op1 = 0;\nint  op2 = 0;\nint  i = 0;\n\n\nprintf(\"Enter Expression:\");\nscanf(\"%s\" , &amp;exp);\n\n\nwhile(*(exp+i) != '\\0'){\n\nif(i == 0)\nop1 = *(exp+i++) - '0';\nop = *(exp+i++) - '0';\nop2 = *(exp+i++) - '0';\n\n\nswitch(op){\n\ncase '+': op1 = op1 + op2;\nbreak;\n\ncase '-': opt1 = op1 - op2;\nbreak;\n\ncase '*': opt1 = opt1 * op2;\nbreak;\n\ncase '/': opt1 = opt1 / opt2;\nbreak;}\n\nprintf(\"%d\\n\" , opt1);\n\nreturn (1);}}\n</code></pre>\n\n<p>NOTE: This programs division doesn't work correctly.</p>\n\n<p>I am trying to create a calculator that computes multiple expressions (preferably as many as the user wants) with: addition, subtraction, multiplication, and division. Example: the value of the expression 6+4*3/7-9 = 5. I am trying to get it to compute in strict left to right evaluation. Thanks for your help!</p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "free"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 6, "creation_date": 1425511006, "post_id": 28866966, "comment_id": 45998705, "body": "No reliable/portable way that I know of."}, {"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1425511146, "post_id": 28866966, "comment_id": 45998757, "body": "Check out the second answer... <a href=\"http://stackoverflow.com/questions/9504588/should-i-free-char-initialized-using-string-literals\" title=\"should i free char initialized using string literals\">stackoverflow.com/questions/9504588/&hellip;</a> - &quot;Ideally, malloc() calls and free() calls should appear on the same &quot;design level&quot; (inside the same implementation file for the same module for example), and they should match perfectly: one free() for each malloc()&quot;"}, {"owner": {"reputation": 3232, "user_id": 391865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YW12D.jpg?s=128&g=1", "display_name": "rutsky", "link": "https://stackoverflow.com/users/391865/rutsky"}, "edited": false, "score": 4, "creation_date": 1425511426, "post_id": 28866966, "comment_id": 45998865, "body": "You shouldn&#39;t solve your problem from that end. Better to use ownership pattern: every object that is stored in memory (by pointer) should be owned by some part of a program. Buffers inside structs fields are usually owned by that structs, so 1) you should always assign dynamically allocated buffers to struct fields (never static strings) and 2) you should always free memory when struct is disposed."}, {"owner": {"reputation": 3232, "user_id": 391865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YW12D.jpg?s=128&g=1", "display_name": "rutsky", "link": "https://stackoverflow.com/users/391865/rutsky"}, "edited": false, "score": 4, "creation_date": 1425511545, "post_id": 28866966, "comment_id": 45998894, "body": "This question has detailed answer about how objects are stored in memory and why this task is not solvable: <a href=\"https://stackoverflow.com/questions/16360620/find-out-whether-a-pointer-is-pointing-at-the-stack-heap-or-program-text\" title=\"find out whether a pointer is pointing at the stack heap or program text\">stackoverflow.com/questions/16360620/&hellip;</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1425511769, "post_id": 28866966, "comment_id": 45998964, "body": "i would always strdup the string so that I own the string I am encapsulating. THen if the caller passes a local, const, static all work, even if they pass heap string and later free it"}, {"owner": {"reputation": 43, "user_id": 2967544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cda6e75e23bf46e3a5dd57059e66bb8d?s=128&d=identicon&r=PG&f=1", "display_name": "Graeme", "link": "https://stackoverflow.com/users/2967544/graeme"}, "edited": false, "score": 0, "creation_date": 1425512787, "post_id": 28866966, "comment_id": 45999285, "body": "It seems like my best solution is to make a copy of any string that gets set so that its always the same. Thanks"}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "reply_to_user": {"reputation": 3232, "user_id": 391865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YW12D.jpg?s=128&g=1", "display_name": "rutsky", "link": "https://stackoverflow.com/users/391865/rutsky"}, "edited": false, "score": 0, "creation_date": 1425512839, "post_id": 28866966, "comment_id": 45999313, "body": "Plus 1 to @rutsky&#39;s answer. This shouldn&#39;t be an issue. Whatever allocates it should be responsible for deallocating it."}], "answers": [{"tags": [], "owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "is_accepted": true, "score": 7, "last_activity_date": 1425512747, "creation_date": 1425512747, "answer_id": 28867339, "question_id": 28866966, "link": "https://stackoverflow.com/questions/28866966/how-to-tell-difference-between-dynamically-allocated-char-and-static-char/28867339#28867339", "title": "How to tell difference between dynamically allocated char* and static char*", "body": "<p>There is no way to reliably distinguish between a pointer to a literal and a pointer to allocated memory. You will have to roll your own solution. There are two ways to approach this:</p>\n\n<p>1) Set a flag in the <code>struct</code> indicating whether the pointer should be freed.</p>\n\n<pre><code>typedef struct _mystruct {\n    char *my_string;\n    int string_was_allocated;\n} mystruct;\n\nmystructa.my_string = malloc(count);\nmystructa.string_was_allocated = 1;\n.\n.\nif (mystructa.string_was_allocated)\n   free(mystructa.my_string);\n\nmystructa.my_string = \"This is a literal\";\nmystructa.string_was_allocated = 0;\n</code></pre>\n\n<p>2) Always dynamically allocate using <code>strdup</code>.</p>\n\n<pre><code>mystructa.my_string = strdup(\"This is a literal\");\nfree(mystructa.my_string);\n</code></pre>\n\n<p>Both approaches involve changes to existing code, but I think solution 2 is much more robust, reliable and maintainable.</p>\n"}, {"comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1425515064, "post_id": 28867740, "comment_id": 46000026, "body": "The compiler can put heap and static memory anywhere it wants, so how would you know which is which?"}], "tags": [], "owner": {"reputation": 888, "user_id": 4618308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moha6.jpg?s=128&g=1", "display_name": "mrflash818", "link": "https://stackoverflow.com/users/4618308/mrflash818"}, "is_accepted": false, "score": -3, "last_activity_date": 1425514742, "creation_date": 1425514742, "answer_id": 28867740, "question_id": 28866966, "link": "https://stackoverflow.com/questions/28866966/how-to-tell-difference-between-dynamically-allocated-char-and-static-char/28867740#28867740", "title": "How to tell difference between dynamically allocated char* and static char*", "body": "<p>Dynamic memory and static memory go to separate places: stack and heap</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[]) {\n\nchar aString[] = \"this is a string\";\n\nprintf(\"the string is located at %x \\n\", &amp;aString);\n\n\nchar * pString = (char*) malloc(sizeof(char) * 64);\nstrcpy(pString, \"this is a dynamic string\");\n\nprintf(\"the pointer is located at %x \\n\", &amp;pString);\n\nprintf(\"the dynamic string is located at %x \\n\\n\", &amp;*pString);\n\n\n\nreturn 0;\n}\n\n/************* *** **************/\n\nrobert@debian:/tmp$ gcc test.c \nrobert@debian:/tmp$ ./a.out\nthe string is located at bfcdbe8f \nthe pointer is located at bfcdbe88 \nthe dynamic string is located at 95a3008 \n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 2967544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cda6e75e23bf46e3a5dd57059e66bb8d?s=128&d=identicon&r=PG&f=1", "display_name": "Graeme", "link": "https://stackoverflow.com/users/2967544/graeme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 2, "accepted_answer_id": 28867339, "answer_count": 2, "score": 3, "last_activity_date": 1425514742, "creation_date": 1425510886, "last_edit_date": 1425511909, "question_id": 28866966, "link": "https://stackoverflow.com/questions/28866966/how-to-tell-difference-between-dynamically-allocated-char-and-static-char", "title": "How to tell difference between dynamically allocated char* and static char*", "body": "<p>In the program I am working on I have a struct like</p>\n\n<pre><code>typedef struct _mystruct{\n    char* my_string;\n} mystruct;\n</code></pre>\n\n<p>Most of the time the time my_string is allocated using malloc, so there is a function that calls </p>\n\n<pre><code>free(mystructa-&gt;my_string);  \n</code></pre>\n\n<p>Generally this works, but at some points, my_string is set as a literal  </p>\n\n<pre><code>my_string = \"This is a literal\"; \n</code></pre>\n\n<p>Is there a way to tell the difference between the two before my call to free()?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1404, "user_id": 1478482, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f21bc9699a1e042f302456051aabe6e?s=128&d=identicon&r=PG", "display_name": "Darth Hunterix", "link": "https://stackoverflow.com/users/1478482/darth-hunterix"}, "edited": false, "score": 2, "creation_date": 1425510260, "post_id": 28866744, "comment_id": 45998441, "body": "Next time, post full error message in the question, not only part of it in the title. For now, try adding <code>;</code> after <code>}</code> for empty functions."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1425511183, "post_id": 28866744, "comment_id": 45998771, "body": "I ran the posted code through my gcc compiler, with all the warnings enabled. There were a HUGE number of errors/warnings.  for example. &#39;this line: &#39;bool a(char[] x, int y) {&#39; (after placing the [] in the right places) should be: &#39;bool a(char x[], int y) {&#39;  or event better: &#39;bool a(char* x, int y) {&#39; the same considerations need to be applied to almost every line in the code.  Then, a warning message for each passed parameter that is not actually used"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1425511312, "post_id": 28866744, "comment_id": 45998824, "body": "If you were to read the error and warning messages from the compiler, it would clearly tell you just what is wrong with the syntax of the code.  (You are compiling with all warnings enabled?)  When all the syntax problems are fixed, then you can continue."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1425511506, "post_id": 28866744, "comment_id": 45998886, "body": "placing matching braces vertically and a blank line or two between functions would make your code much easier to read/debug.  Remember, the idea is NOT to use the minimum number of lines nor to make the source file as small as possible, but rather to make it easy for a human (thats&#39; you and me) to read/understand the code"}, {"owner": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "edited": false, "score": 0, "creation_date": 1425514489, "post_id": 28866744, "comment_id": 45999838, "body": "Curiosity: Did you created a &#39;bool&#39; struct? C does not have bool as a primitive type"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "edited": false, "score": 1, "creation_date": 1425519125, "post_id": 28866744, "comment_id": 46001221, "body": "@felipeek: <i>that</i> the OP got right: <code>#include &lt;stdbool.h&gt;</code>."}, {"owner": {"reputation": 1104, "user_id": 3513453, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4a7f4865f48c8e1e971070379460b257?s=128&d=identicon&r=PG&f=1", "display_name": "felipeek", "link": "https://stackoverflow.com/users/3513453/felipeek"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1425525764, "post_id": 28866744, "comment_id": 46002919, "body": "@Jongware true, I didn&#39;t see that include. Well observed"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4634384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8808eefef59499bb1201a08524f19261?s=128&d=identicon&r=PG&f=1", "display_name": "user4634384", "link": "https://stackoverflow.com/users/4634384/user4634384"}, "edited": false, "score": 1, "creation_date": 1425510175, "post_id": 28866768, "comment_id": 45998408, "body": "Oh damn, I keep forgetting this isn&#39;t Java :("}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 3, "last_activity_date": 1425510027, "creation_date": 1425510027, "answer_id": 28866768, "question_id": 28866744, "link": "https://stackoverflow.com/questions/28866744/error-expected-or-before-first-arguments-name/28866768#28866768", "title": "Error: Expected &#39;;&#39; , &#39;,&#39; or &#39;)&#39; before (first argument&#39;s name)", "body": "<pre><code>bool a(char[] x, int y) {\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>bool a(char x[], int y) {\n</code></pre>\n\n<p>(And so on for the other definitions.)</p>\n"}], "owner": {"reputation": 13, "user_id": 4634384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8808eefef59499bb1201a08524f19261?s=128&d=identicon&r=PG&f=1", "display_name": "user4634384", "link": "https://stackoverflow.com/users/4634384/user4634384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1022, "favorite_count": 0, "accepted_answer_id": 28866768, "answer_count": 1, "score": 1, "last_activity_date": 1425510027, "creation_date": 1425509904, "question_id": 28866744, "link": "https://stackoverflow.com/questions/28866744/error-expected-or-before-first-arguments-name", "title": "Error: Expected &#39;;&#39; , &#39;,&#39; or &#39;)&#39; before (first argument&#39;s name)", "body": "<p>I am new to C and have a problem with my code. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool a(char[], int);\nvoid b(char[], int[], int);\nvoid c(char[], int[], int, int);\nvoid d(char[], int, int[], int);\n\n\nint main(int argc, char ** argv) {\nreturn 0;\n}\n\nbool a(char[] x, int y) {\nreturn true;\n}\nvoid b(char[] x, int[] y, int z) {\n}\nvoid c(char[] x, int[] y, int z, int q) {\n}\nvoid d(char[] x, int y, int[] z, int q) {\n}\n</code></pre>\n\n<p>This code doesn't compile, but gives me an error message instead. </p>\n\n<p>The problem is, I don't see why it does that...</p>\n"}, {"tags": ["c", "loops", "scanf"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1428838582, "post_id": 28866639, "comment_id": 47325169, "body": "Why do people not check the return value of <code>scanf</code>?"}, {"owner": {"reputation": 3187, "user_id": 4350216, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uYP0f.jpg?s=128&g=1", "display_name": "Ali Akber", "link": "https://stackoverflow.com/users/4350216/ali-akber"}, "edited": false, "score": 0, "creation_date": 1428856628, "post_id": 28866639, "comment_id": 47330558, "body": "what is your input and output ?"}], "owner": {"reputation": 3, "user_id": 4634340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629124e5fc918ea87c55a23d4068be6e?s=128&d=identicon&r=PG&f=1", "display_name": "andy_mann", "link": "https://stackoverflow.com/users/4634340/andy-mann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428838486, "creation_date": 1425509345, "last_edit_date": 1428838486, "question_id": 28866639, "link": "https://stackoverflow.com/questions/28866639/scanf-function-with-list-of-numbers", "title": "scanf function with list of numbers", "body": "<p>The program is supposed to read in digits one after the other to see if they are consecutive numbers or not. The second digit seems to be scanning as 21 all the time for some reason. Could anyone show me where i am going wrong? Thanks.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n int a=1, e=1,n, digit1, compared;\n char y, z;\n\n scanf(\"n=%d, digits=%c%c\", &amp;n, &amp;y, &amp;z);\n\n digit1 = atoi(&amp;y);\n compared = atoi(&amp;z);\n\n if(digit1 == 0)\n {\n  printf(\"False\");\n }\n\n else if(compared == (digit1 + 1))\n {\n  digit1++;\n\n  for(a = 1;a &lt; (n - 1);a++)\n{\n scanf(\"%c\", &amp;z);\n compared = atoi(&amp;z);\n\n if(compared == digit1 + 1)\n  { \n   e++;\n   digit1++;\n  }\n}\n\n  if(e == (n - 1))\n   {\n    printf(\"True\\n\");\n   }\n  else\n   {\n    printf(\"False\");\n   }\n }\n\n else if(compared == (digit1 - 1))\n {\n  digit1--;\n\n  for(a = 1;a &lt; (n - 1);a++)\n  {\n   scanf(\"%c\", &amp;z);\n   compared = atoi(&amp;z);\n\n   if(compared == (digit1 - 1))\n   {\n    e++;\n    digit1--;\n   }\n  }\n\n if(e == (n - 1))\n {\n  printf(\"True\\n\");\n }\n\n else\n {\n  printf(\"False\");\n }\n }\n\n\n\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1425512109, "post_id": 28866391, "comment_id": 45999068, "body": "amongst many other problems, remember that the index into cipher[] increases 3 bytes per entry, not 1 byte.   Also &#39;from[] and &#39;to[] are only 1 byte long and that byte contains a &#39;\\0&#39;  so accessing those arrays past index 0 is undefined behaviour and can/will lead to a seg fault event"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1425508532, "post_id": 28866418, "comment_id": 45997737, "body": "altered this, using the scrambled string &quot;rdease&quot; and the cipher key &quot;pr ld&quot; the outputted deciphered key is just &quot;p&quot;. I am sure there is a problem with my loop but I can&#39;t see what it is for the life of me"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1425508907, "post_id": 28866418, "comment_id": 45997879, "body": "Added a couple more problems and fixes now."}, {"owner": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1425509347, "post_id": 28866418, "comment_id": 45998058, "body": "thanks alot! it only appears to mess up now if I use more than one replacement. if my cipher variable only holds 2 characters in it, it deciphers fine. But if I have 2 different replacements, it messes up. Test data: str = &quot;fyease&quot; . cipher = &quot;pf ly &quot; . str after deciphering = &quot;p&quot;"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "edited": false, "score": 0, "creation_date": 1425509446, "post_id": 28866418, "comment_id": 45998108, "body": "OK - time to learn how to use your debugger - step through the code inspecting variables as you go - you should soon be able to identify any remaining bugs,"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 3, "last_activity_date": 1425508728, "last_edit_date": 1425508728, "creation_date": 1425508364, "answer_id": 28866418, "question_id": 28866391, "link": "https://stackoverflow.com/questions/28866391/displaying-wrong-character-in-c/28866418#28866418", "title": "Displaying wrong character in C", "body": "<p>You have a number of problems.</p>\n\n<p>(1) One big problem is that you don't have enough storage allocated for <code>from</code> and <code>to</code> - change:</p>\n\n<pre><code>char from[] = \"\";  // this is equivalent to char from[1] = \"\";\nchar to[] = \"\";\n</code></pre>\n\n<p>to e.g.:</p>\n\n<pre><code>char from[256] = \"\";\nchar to[256] = \"\";\n</code></pre>\n\n<p>(where 256 is just some arbitrary size that should be greater than the size of your data set).</p>\n\n<p>(2) You need to terminate your strings properly when you append a character, e.g.</p>\n\n<pre><code>if (i == 0){\n    from[strlen(from)] = cipher[i];\n}\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>if (i == 0){\n    int len = strlen(from);\n    from[len] = cipher[i];\n    from[len + 1] = '\\0';\n}\n</code></pre>\n\n<p>(3) You're indexing by one too many characters when you iterate through a string, so e.g.</p>\n\n<pre><code>for (int i = 0; i &lt;= strlen(cipher); i++){\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>for (int i = 0; i &lt; strlen(cipher); i++){\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4174752, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2b15fc239013f566a29568391ba92c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Defa1t", "link": "https://stackoverflow.com/users/4174752/defa1t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 28866418, "answer_count": 1, "score": 0, "last_activity_date": 1425508728, "creation_date": 1425508247, "question_id": 28866391, "link": "https://stackoverflow.com/questions/28866391/displaying-wrong-character-in-c", "title": "Displaying wrong character in C", "body": "<p>I'm testing deciphering strings using a key in standard C. I'm inputting a string, inputting my replacements and constructing a cipher based on the history of my replacements. For example, if I replace c with h in a string, I will store it in the string cipher as <code>\"ch \"</code>, where \" denotes the start and end of my string.</p>\n\n<p>My problem is, as I'm trying to run back through my string and revert characters back to their originals, my characters are messing up and showing as heart signs instead. Any insight on this would be much appreciated, I'm sure I'm going wrong somewhere very simple. </p>\n\n<pre><code>char from[] = \"\";\nchar to[] = \"\";\nfor (int i = 0; i &lt;= strlen(cipher); i++){\n    if (i == 0){\n        from[strlen(from)] = cipher[i];\n    }\n    else if(cipher[i-1] == ' '){\n        from[strlen(from)] = cipher[i];\n    }\n    else{\n        to[strlen(to)] = cipher[i];\n    }\n}\nfor (int i = 0; i &lt;= strlen(str); i++){\n    for(int j = 0; j &lt;= strlen(to); j++){\n        if(str[i] == to[j]){\n            str[i] = from[j];\n        }\n    }\n}\n\nprintf(\"\\nUNSCRAMBLED STRING IS: %s\" ,str);\n</code></pre>\n\n<p>cipher is the char array holding my cipher key. to[] hold the second value in the cipher key. from[] holds my first. str is the char array of the string that is to be deciphered.</p>\n"}, {"tags": ["c", "arrays", "pointers", "structure"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1425507514, "post_id": 28866098, "comment_id": 45997237, "body": "that means <code>syms</code> is declared as <code>struct Symbol[256]</code>. you need to copy over one by one. FYI, <code>symbols</code> is pointer too. if you don&#39;t understand this, it&#39;s better for you to review your textbook first."}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "edited": false, "score": 0, "creation_date": 1425507824, "post_id": 28866098, "comment_id": 45997400, "body": "symbols is not a pointer it is an array, but in C arrays are very close to pointers. can you post here how Node is defined? You can only do that assignment  if node1.syms was a pointer."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4634268, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1040885672594532/picture?type=large", "display_name": "Daniel Moody", "link": "https://stackoverflow.com/users/4634268/daniel-moody"}, "edited": false, "score": 1, "creation_date": 1425508221, "post_id": 28866185, "comment_id": 45997581, "body": "Thank you very much, I didn&#39;t realize that was a difference in C and the error was written in such a way that through me off. Looks like I still have a lot to learn in basic C, I appreciate the help"}, {"owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 0, "creation_date": 1425510882, "post_id": 28866185, "comment_id": 45998649, "body": "What about a preprocessor macro for MAX ?"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 3, "last_activity_date": 1425507511, "creation_date": 1425507511, "answer_id": 28866185, "question_id": 28866098, "link": "https://stackoverflow.com/questions/28866098/structure-array-arguments-in-c/28866185#28866185", "title": "Structure Array arguments in C", "body": "<p>You can't use the assignment operator <code>=</code> for arrays. You either have to use a loop: </p>\n\n<pre><code>for (int i = 0; i &lt; max; ++i)\n{\n    node1.syms[i] = symbols[i];\n}\n</code></pre>\n\n<p>or use memcpy:</p>\n\n<pre><code>memcpy(node1.syms, symbols, max * sizeof(symbols[0]));\n</code></pre>\n\n<p>BTW, <code>max</code> is a bad name to use for an array dimension (or anything else for that matter), since it clashes with the name of the <code>max()</code> function/macro.</p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 4565423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pP6Oj.jpg?s=128&g=1", "display_name": "mrhpogie", "link": "https://stackoverflow.com/users/4565423/mrhpogie"}, "is_accepted": false, "score": 0, "last_activity_date": 1425508132, "creation_date": 1425508132, "answer_id": 28866355, "question_id": 28866098, "link": "https://stackoverflow.com/questions/28866098/structure-array-arguments-in-c/28866355#28866355", "title": "Structure Array arguments in C", "body": "<p>symbols is a pointer. It is the head of the array symbols[256] and is of type Symbol*. Dereferencing by [] then adds sizeof(Symbol) for each increment, e.g. symbols[3] references the 4th element in the array at adress symbols+3*sizeof(Symbols)</p>\n\n<p>Using [] of a pointer is safer than doing explicit pointer arithmetics</p>\n"}, {"tags": [], "owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "is_accepted": false, "score": 1, "last_activity_date": 1425511335, "creation_date": 1425511335, "answer_id": 28867055, "question_id": 28866098, "link": "https://stackoverflow.com/questions/28866098/structure-array-arguments-in-c/28867055#28867055", "title": "Structure Array arguments in C", "body": "<p>You did not post the definition of <code>Node</code> and <code>Symbol</code> but I suppose that <code>Node.syms</code> is an array. In this case the problem is that in line <code>node1.syms = symbols;</code> you try to change the the <code>sysm</code> member of <code>Node</code> struct but it is a constant varible (every array is constant, you can not change its location).</p>\n\n<p>You have to possibilities.</p>\n\n<p>1.) You copy the elements from the destination array to <code>syms</code> array:</p>\n\n<pre><code>int numelem = 256;\nfor (int i = 0; i &lt; numelem; i++)\n{\n    node1.syms[i] = symbols[i];\n}\n</code></pre>\n\n<p>But it is very important to find out the perfect value of <code>numelem</code> variable. Namely it is nowhere checked that the <code>node1.syms</code> and <code>symbols</code> arrays have the same number of elements. If their lengths are not equal you can overrun on one of them addressing illegal memory areas. Another possible disadvantege is that in all the <code>Node</code> elements the <code>syms</code> array will have the same number of elements, you can change it only in compile time.</p>\n\n<p>2.) You change the definition if <code>Node</code> structure:</p>\n\n<pre><code>struct Node {\n   //...\n   struct Symbol *syms;\n   //...\n}\n</code></pre>\n\n<p>It this case your code will be complied and arrays <code>node1.syms</code> will be pointed to the array <code>symbol</code> and you do not have to take care about the length of the arrays. But it is important that in this case you will have only one array in the memory! So, you have to take into account that arrays are normally allocated on stack which means that after exiting from a method where the array was created the memory space of array will be freed as well. If you create <code>node1</code> also it the method (as in your example) it is fine. But if you create <code>node1</code> as a global variable than <code>symbols</code> array has to be global as well. In general we can say that both variable have to create in the same scope.</p>\n"}], "owner": {"reputation": 45, "user_id": 4634268, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1040885672594532/picture?type=large", "display_name": "Daniel Moody", "link": "https://stackoverflow.com/users/4634268/daniel-moody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28866185, "answer_count": 3, "score": 2, "last_activity_date": 1425511335, "creation_date": 1425507226, "question_id": 28866098, "link": "https://stackoverflow.com/questions/28866098/structure-array-arguments-in-c", "title": "Structure Array arguments in C", "body": "<p>I'm pretty new to C and am taking a class right now and having difficulty with a project. We have a structure in this project called a Symbol. We also have a structure in this project called a Node. Nodes have an array of Symbols. All I'm trying to do is set the property Node.symbols to another array of symbols like so:</p>\n\n<pre><code>   int max = 256;\n   Symbol symbols[max];\n   Node node1;\n   node1.syms = symbols;\n</code></pre>\n\n<p>Error: incompatibles types when comparing 'struct Symbol[256]' from type 'Struct Symbol *'</p>\n\n<p>I don't really understand why it thinks that symbols is a pointer, when it seems like an array of symbols to me. This might be really obvious but I haven't been able to fix it.</p>\n"}, {"tags": ["c", "function", "pointers", "c89"], "comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 6, "creation_date": 1425506820, "post_id": 28865955, "comment_id": 45996876, "body": "It is certainly possible, but why would you need an array of function pointers to call a function x times? Just call it x times."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1425506982, "post_id": 28865955, "comment_id": 45996959, "body": "Not withstanding what @Wintermute said, you would declare an array of the desired size and then copy the same function pointer to each array element.  That wastes RAM and almost certainly slower than just calling the pointer in a loop."}, {"owner": {"reputation": 289, "user_id": 1394995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ZazIt.jpg?s=128&g=1", "display_name": "pmac89", "link": "https://stackoverflow.com/users/1394995/pmac89"}, "edited": false, "score": 0, "creation_date": 1425506982, "post_id": 28865955, "comment_id": 45996960, "body": "Create a a temp variable to point to the beginning of the array and of the type of pointer inside the array. Then use the temp variable to move through the array counting the number of pointers."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425507009, "post_id": 28865955, "comment_id": 45996973, "body": "I am creating something like threading. I tested that running function x times instead of looping it, is faster."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 6, "creation_date": 1425507032, "post_id": 28865955, "comment_id": 45996984, "body": "Your edit sounds like a micro-optimization that is very unlikely to matter in most real-world scenarios (on a modern CPU at least)."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425507267, "post_id": 28865955, "comment_id": 45997111, "body": "You are right. But because of an arcane reason, lots of people still work on ancient environments."}, {"owner": {"reputation": 289, "user_id": 1394995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ZazIt.jpg?s=128&g=1", "display_name": "pmac89", "link": "https://stackoverflow.com/users/1394995/pmac89"}, "edited": false, "score": 0, "creation_date": 1425507283, "post_id": 28865955, "comment_id": 45997125, "body": "Then why not create a loop and inside the loop push the function to a thread?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1425507291, "post_id": 28865955, "comment_id": 45997129, "body": "If you want to call the function some number of times that is not known at compile time, then you probably cannot avoid overhead comparable to that of a loop.  And that overhead is surely tiny compared to the run time of the function itself.  If you want to call it a fixed number of times, then just do that."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425507732, "post_id": 28865955, "comment_id": 45997349, "body": "In fact, if the number of times to invoke the function is determined dynamically, then recursion is the only alternative I see to a loop, and that will surely have much higher overhead."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425507880, "post_id": 28865955, "comment_id": 45997421, "body": "It is not about many functions looped, it is about many functions called at once."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 3, "creation_date": 1425507925, "post_id": 28865955, "comment_id": 45997446, "body": "Making copies of function pointer does not make the function thread-safe. The function is still a function, and it&#39;s static storages are still in one place. If the function is already thread safe, then you don&#39;t need to do anything, just multi-thread it. Edit: google for SPMD or OpenCL"}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425508649, "post_id": 28865955, "comment_id": 45997788, "body": "If I&#39;m following the logic, there are no errors or something.. but by invoking the array of pointers, the function they have assigned to point to is called only once. I thought all the pointers will be called."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1425508919, "post_id": 28865955, "comment_id": 45997882, "body": "Ok, now I&#39;m totally confused. You started with <i>&quot;running function x times instead of looping&quot;</i>, then moved to <i>&quot;many functions called at once&quot;</i> and then to <i>&quot;the function ... is called only once&quot;</i>. I think you need to decide what the heck you&#39;re actually trying to do, and then edit the question to describe that."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425509035, "post_id": 28865955, "comment_id": 45997931, "body": "What I want remains the same. I am just clarifying.. Because I was told to use recursion, where I clearly said without loops. I think I meant at once by that.. because loops do not call a function at once rather than one at a time."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1425509322, "post_id": 28865955, "comment_id": 45998048, "body": "Ok, now we&#39;re getting somewhere. Calling a function without a loop is not the same as recursion. Recursion has a very specific meaning, and if you want to call functions recursively, you need to put the word &quot;recursion&quot; somewhere in the question, so that people know what you&#39;re talking about. Also, calling a function recursively is just a deceitful way of looping it that uses a lot of stack space. It doesn&#39;t just call the function once, since the function calls itself. So, yes now I sort of see what you&#39;re getting at."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425509504, "post_id": 28865955, "comment_id": 45998133, "body": "Oh erm, of course loop and recursion are two different things, besides that point, they run in a loop style (not at once, looped). No I am one hundred percent you know what I mean. By they way I know why <a href=\"http://hastebin.com/isotaruqaj.cpp\" rel=\"nofollow noreferrer\">hastebin.com/isotaruqaj.cpp</a> prints out 1 as only one function is called. Because <code>foo();</code> refers to the first item only."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1425509935, "post_id": 28865955, "comment_id": 45998308, "body": "So the only thing left that needs to be clarified is the array of function pointers. What is the purpose of the array? Do you have different functions loaded in the array? Or do you only want to the call the same function x times (in which case you don&#39;t need an array)?"}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425510102, "post_id": 28865955, "comment_id": 45998378, "body": "The second. I want to call one and the same function x times, without loops. At least just like I call it several times. The only way for this I can figure out is by calling them all at once, through an array of function pointers, like it is exemplified in the link I provided above, which buffer&#39;s items are initialized manually."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1425510200, "post_id": 28865955, "comment_id": 45998416, "body": "Seems like what you want is depth limited recursion. I&#39;ll post an example as an answer."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425510263, "post_id": 28865955, "comment_id": 45998442, "body": "<code>void f(); int main() { f(); f(); f(); return 0; }</code> just like that but automatized with dynamic number of calls given. This doesn&#39;t involve loops as you see, but is with fixed number of calls given."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1425510559, "post_id": 28865955, "comment_id": 45998539, "body": "@DeltaProxy &quot;just like that but automatized with dynamic number of calls&quot; \u2013 that&#39;s called a loop. you can&#39;t call a function (or execute any other statement, for that matter) an indeterminate number of times without looping or recursion."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425510621, "post_id": 28865955, "comment_id": 45998561, "body": "This is the answer I was looking for. Is it possible or not.to achieve this without loops. I said it might sound insane.. but it would be good if I could call a function x times without loops."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1425510948, "post_id": 28865955, "comment_id": 45998683, "body": "What is your obsession with loops? In all cases, the execution of the function <b>body</b> costs more (cpu time) than the <b>invocation</b> by the caller. Do you actually want <i>parallellism</i> ? (calling a function before the previous function call has returned)"}], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425510516, "post_id": 28866850, "comment_id": 45998524, "body": "....this will make the program come to a standstill for a long period of time, especially if the number of function calls is big. This is why I explicitly said.. WITHOUT LOOPS. A number of times. <code>for(; ;)</code> is the most obvious loop."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425510692, "post_id": 28866850, "comment_id": 45998586, "body": "@DeltaProxy you obviously don&#39;t understand what the for loop is used for here. it&#39;s an &quot;infinite&quot; loop used <b>solely</b> for getting user input. The essence of this answer is the recursion. The loop could be left out entirely."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425510858, "post_id": 28866850, "comment_id": 45998642, "body": "@DeltaProxy There, all fixed, no loops."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425510948, "post_id": 28866850, "comment_id": 45998684, "body": "Yes actually this must behave as required."}, {"owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "edited": false, "score": 0, "creation_date": 1425511015, "post_id": 28866850, "comment_id": 45998707, "body": "@user3386109 unfortunately I can do this only with recursive functions."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1425511072, "post_id": 28866850, "comment_id": 45998728, "body": "Ok, then depth limited recursion is the answer."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 0, "last_activity_date": 1425510684, "last_edit_date": 1425510684, "creation_date": 1425510376, "answer_id": 28866850, "question_id": 28865955, "link": "https://stackoverflow.com/questions/28865955/buffer-of-function-pointers/28866850#28866850", "title": "Buffer of function pointers?", "body": "<p>Here's an example of depth limited recursion</p>\n\n<pre><code>void hello( int depth )\n{\n    printf( \"hello %2d\\n\", depth );\n    if ( depth &gt; 1 )\n        hello( depth - 1 );\n}\n\nint main()\n{\n     hello( 10 );    // call the hello function 10 times\n     hello( 17 );    // call the hello function 17 times\n}\n</code></pre>\n\n<p>And here's an example of calling a function pointer multiple times using a jump table. Note that with the jump table, the maximum number of calls is limited to the size of the jump table (10 in this example) whereas with recursion, the number of calls is limited only by stack size.</p>\n\n<pre><code>int hello( int n )\n{\n    n++;\n    printf( \"hello %2d\\n\", n );\n    return n;\n}\n\nvoid executeFunction( int (*func)(int), int count )\n{\n    int n = 0;\n    switch ( count )\n    {\n        case 10:  n = (*func)(n);\n        case 9:   n = (*func)(n);\n        case 8:   n = (*func)(n);\n        case 7:   n = (*func)(n);\n        case 6:   n = (*func)(n);\n        case 5:   n = (*func)(n);\n        case 4:   n = (*func)(n);\n        case 3:   n = (*func)(n);\n        case 2:   n = (*func)(n);\n        case 1:   n = (*func)(n);\n    }\n}\n\nint main()\n{\n    executeFunction( hello, 3 );   // call the hello function 3 times\n    executeFunction( hello, 9 );   // call the hello function 9 times\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4634470"}, "is_accepted": false, "score": 0, "last_activity_date": 1425513796, "last_edit_date": 1425513796, "creation_date": 1425513415, "answer_id": 28867473, "question_id": 28865955, "link": "https://stackoverflow.com/questions/28865955/buffer-of-function-pointers/28867473#28867473", "title": "Buffer of function pointers?", "body": "<p>You could use the pre-processor to expand a macro to x number of function calls.  Your code will get larger and you'll still run the function x number of times.  It won't win you anything.</p>\n\n<pre><code>#define REPEAT5(x) { x; x; x; x; x; }\n</code></pre>\n\n<p>Note that you can't call that macro like a function (it'll expand to a syntax error if you end the call with a semicolon).  A cleaner macro (though in this context, what does it matter?) would be:</p>\n\n<pre><code>#define REPEAT5(x) do { x; x; x; x; x; } while(0)\n</code></pre>\n\n<p>Then you could call the macro like a function, but that expands to a loop and you said you don't like loops.</p>\n"}], "owner": {"reputation": 148, "user_id": 4634262, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/26e46a30203dec21e26ee8931b5ec15d?s=128&d=identicon&r=PG&f=1", "display_name": "DeltaProxy", "link": "https://stackoverflow.com/users/4634262/deltaproxy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 28866850, "answer_count": 2, "score": -2, "last_activity_date": 1425513796, "creation_date": 1425506738, "question_id": 28865955, "link": "https://stackoverflow.com/questions/28865955/buffer-of-function-pointers", "title": "Buffer of function pointers?", "body": "<p>I know it may sound sci-fi but I truly want to call a function x times, by using an array of function pointers to it and without involving a loop or anything that may slow down the target program. Is that possible and if yes, how exactly?</p>\n"}, {"tags": ["c", "matrix", "malloc"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1425506666, "post_id": 28865699, "comment_id": 45996790, "body": "That&#39;s probably because in the second example you&#39;re allocating 2D arrays for A and B but only a 1D array for C. (Also, <a href=\"http://stackoverflow.com/a/605858/1679849\">don&#39;t cast the result of calls to <code>malloc()</code>.</a>)"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 2, "creation_date": 1425507619, "post_id": 28865699, "comment_id": 45997286, "body": "really happy to see <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a> in every malloc related post."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1425508206, "post_id": 28865699, "comment_id": 45997573, "body": "You just editd your post to make <code>C</code>&#39;s allocation much larger... that will change the behaviour of running your program"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1425508233, "post_id": 28865699, "comment_id": 45997589, "body": "also, how do you know &quot;it wont stop incrementing n&quot; ?"}, {"owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1425508521, "post_id": 28865699, "comment_id": 45997729, "body": "@MattMcNabb i don&#39;t mean that it won&#39;t stop incrementing n but what i mean is that n is too big comparing it with the result of the first code"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1425509813, "post_id": 28865699, "comment_id": 45998252, "body": "Output success/failure for every allocation and you will find out what is going on"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1425509854, "post_id": 28865699, "comment_id": 45998274, "body": "Also post your real code, the stuff that is in the rest of the loop is relevant."}], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "edited": false, "score": 0, "creation_date": 1425507476, "post_id": 28865996, "comment_id": 45997216, "body": "for the first note i&#39;am freeing the allocated memory. But i don&#39;t understand the last note about the heap. Doesn&#39;t the OS provide more memory if the heap is full??"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1425506890, "creation_date": 1425506890, "answer_id": 28865996, "question_id": 28865699, "link": "https://stackoverflow.com/questions/28865699/max-size-to-allocate-to-matrix-in-c/28865996#28865996", "title": "Max size to allocate to matrix in c", "body": "<pre><code>there are a few things to note\n\n1) the main consideration is that memory, once allocated (by malloc and not free'd) means the amount of available heap to allocate goes down, even as 'n' goes up.\n\n2) any call to malloc() can fail, including the first call\n   this means the failure could be any of the calls to malloc()\n\n3) in C, the returned value from malloc (and family) should not be cast.\n\n4) the returned value from malloc() should always be checked, \n   not just one in three calls to malloc()\n\nregarding the posted code. \n1) all the above considerations should be implemented\n2) in the second example of posted code, just because a \n   larger memory request (n*n) fails  does not mean a \n   smaller request (n) would fail.\n   that is why the modification catches the failure of 'A'\n\n3) the heap address and the size of the heap are normally \n   available at compile time, so there is no need\n   for the kind of code you posted\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "edited": false, "score": 0, "creation_date": 1425509315, "post_id": 28866099, "comment_id": 45998045, "body": "I understand that but the problem is that when trying to run the second code an check for the three matrix a got a smaller result than the first code. in the case i should obtain a grater result??"}, {"owner": {"reputation": 305, "user_id": 4542466, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3eP8241M7Jw/AAAAAAAAAAI/AAAAAAAAAV8/8KC-WYwTjqA/photo.jpg?sz=128", "display_name": "Leonard Michlmayr", "link": "https://stackoverflow.com/users/4542466/leonard-michlmayr"}, "reply_to_user": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "edited": false, "score": 0, "creation_date": 1425512016, "post_id": 28866099, "comment_id": 45999037, "body": "The amount of free memory varies. On multitasking systems, other processes may take up more or less memory depending on the exact moment in time when you check."}], "tags": [], "owner": {"reputation": 305, "user_id": 4542466, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3eP8241M7Jw/AAAAAAAAAAI/AAAAAAAAAV8/8KC-WYwTjqA/photo.jpg?sz=128", "display_name": "Leonard Michlmayr", "link": "https://stackoverflow.com/users/4542466/leonard-michlmayr"}, "is_accepted": false, "score": 1, "last_activity_date": 1425507226, "creation_date": 1425507226, "answer_id": 28866099, "question_id": 28865699, "link": "https://stackoverflow.com/questions/28865699/max-size-to-allocate-to-matrix-in-c/28866099#28866099", "title": "Max size to allocate to matrix in c", "body": "<p>Your program fails to allocate A or B long before it fails to allocate C, which is much smaller. With n being approximately 21263, n*n is 21263 times larger than n. The loop will continue for about 10000 repetitions. If you free C after successful allocation, the loop will even continue for a few hundred million repetitions until n reaches about 21263*21263. You just have to wait long enough for your program to exit.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1425509974, "creation_date": 1425509974, "answer_id": 28866755, "question_id": 28865699, "link": "https://stackoverflow.com/questions/28865699/max-size-to-allocate-to-matrix-in-c/28866755#28866755", "title": "Max size to allocate to matrix in c", "body": "<p>You could try doing a single allocation, then assigning pointers for B and C as offsets from A. Rather than starting at a small value, start at a large value that should fail on the first loops, so that when the allocation does succeed, the heap will not be fragmented.</p>\n"}], "owner": {"reputation": 1047, "user_id": 4237058, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0e1102b67c00ae039e410c7a784528ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chaker", "link": "https://stackoverflow.com/users/4237058/chaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1425509974, "creation_date": 1425505772, "last_edit_date": 1495542044, "question_id": 28865699, "link": "https://stackoverflow.com/questions/28865699/max-size-to-allocate-to-matrix-in-c", "title": "Max size to allocate to matrix in c", "body": "<p>I'am doing a homework on matrix multiplication. The problem that i want to find the largest matrix that i can handle (allocate). So i wrote the following code:</p>\n\n<pre><code>int n = 1;\nwhile(1){\nn++;\nA=malloc(sizeof(double)*n*n);                                                                                                                           \nB=malloc(sizeof(double)*n*n);\nC=malloc(sizeof(double)*n*n);\nif (C==NULL) {printf(\"Error No more size to allocate! n=%d\\n\",n); return 1;} \n// and the rest of the code including freeing the allocate\n</code></pre>\n\n<p>the result:</p>\n\n<pre><code>Error No more size to allocate! n=21785\n</code></pre>\n\n<p>Now i want to use another method: using A as the result instead of C.\nSo that i only need 2(n**2)+n instead of 3(n**2).\n<br>\nSo the new code should loke like this :</p>\n\n<pre><code>int n = 1;\nwhile(1){\nn++;\nA=malloc(sizeof(double)*n*n);                                                                                                                           \nB=malloc(sizeof(double)*n*n);\nC=malloc(sizeof(double)*n);\nif (C==NULL) {printf(\"Error No more size to allocate! n=%d\\n\",n); return 1;} \n// and the rest of the code including freeing the allocated space.\n</code></pre>\n\n<p>The problem that when i run this code it wont stop incrementing n but if i change the condition from <code>(C==NULL)</code> to <code>(A==NULL||B==NULL||C==NULL)</code>\nthe result is:</p>\n\n<pre><code>Error No more size to allocate! n=21263\n</code></pre>\n\n<p>Any idea??</p>\n\n<p><strong>Edit</strong><br>\n<a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">Do I cast the result of malloc?</a>\nPS: My professor tell us to always use cast in malloc!!  </p>\n"}, {"tags": ["c", "optimization", "fread"], "comments": [{"owner": {"reputation": 2206, "user_id": 1266856, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8a887bc4a087817116470f88f3101164?s=128&d=identicon&r=PG", "display_name": "Owen Johnson", "link": "https://stackoverflow.com/users/1266856/owen-johnson"}, "edited": false, "score": 1, "creation_date": 1425506135, "post_id": 28865674, "comment_id": 45996496, "body": "What is the problem you are encountering?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1425506532, "post_id": 28865674, "comment_id": 45996721, "body": "1) <code>while(c != NULL)</code> you are comparing an int to a pointer constant. Why? 2) <code>x = (x&lt;&lt;1) + (x&lt;&lt;3) + c - 48;</code> multiplication is not expensive. 3) and character constants can be written as character constants <code>x = x*10  + c - &#39;0&#39;;</code> (in fact: ints, of course)"}, {"owner": {"reputation": 3306, "user_id": 111598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ddd73fbbfca704f70f91ec4e8314be?s=128&d=identicon&r=PG", "display_name": "Pekka", "link": "https://stackoverflow.com/users/111598/pekka"}, "edited": false, "score": 2, "creation_date": 1425509337, "post_id": 28865674, "comment_id": 45998054, "body": "<code>fread()</code> does not terminate the buffer with a &#39;\\0&#39;. You need to ensure your loop terminates correctly. As noted, using character constants really makes the code more readable. Your buffer could vary between 4 and 64 bytes in size (depending on the word size and compiler) and may cause a partial number to be read."}], "answers": [{"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1425519231, "post_id": 28866671, "comment_id": 46001244, "body": "Your answer may be better readable if you did not put various questions, explanations, and finer points in-line in the code."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1425509510, "creation_date": 1425509510, "answer_id": 28866671, "question_id": 28865674, "link": "https://stackoverflow.com/questions/28865674/fread-large-amount-of-integers/28866671#28866671", "title": "Fread - large amount of integers", "body": "<pre><code>// what exactly does the input look like?\n// I doubt that the input is a series of single digit numbers.\n// and for multidigit numbers, the following will not work\n\n// the posted code fails to compile for several reasons, \n// including that the 'int' return value is never set\n// and the code is much to big for inlining\n\ninline int fastRead_int(int *sum) \n{\n\n    char buffer[sizeof(int)*sizeof(int)]; //&lt;-- = 64bytes = 16 binary ints\n                                          //      but as little as 4 character ints\n    register int i = 0;\n\n    fread(buffer,sizeof(buffer),1,stdin);\n         // &lt;-- should check/save the returned value\n         //     as that would be the number of characters actually read\n         //     and fread() does not NUL terminate the input\n         //     should also check for and handle read failures\n\n    register int c = buffer[0];    // &lt;-- this gets one byte/char only, \n                                   // however, unless the input is a binary file\n                                   //          this will only get the first byte\n                                   //          of a numeric char string.\n    int x = 0;\n\n    // &lt;-- suggest the following code block be:\n    //     for( i=0; i&lt;(returned value from fread(); i++)\n    //     {\n    //         if( isdigit(c) )\n    //         {\n    //             x += (c-48);\n    //         }\n    //         c = buffer[++i];\n    //      } // end for\n    //      *sum += x;\n    while(c != NULL) // &lt;-- 'c' is a integer in the range 0...255\n                     //     but NULL is a 4 byte pointer to 0\n                     //     perhaps you meant: 'while(c)'\n    {\n        c = buffer[++i];  // &lt;-- see my comment about reading buffer, above\n\n        // step by non-numeric characters\n        // what if the input does not end in a numeric character?\n        //      then would be reading past the end of the buffer[]\n        //      resulting in undefined behaviour leading to a seg fault event\n        for(; ((c&lt;48 || c&gt;57) &amp;&amp; c != ' '); c = buffer[++i]);\n            //&lt;-- much better/clearer to #include ctype.h and then\n            //    for( ; !isdigit(c); c = buffer[++i] ;)\n\n        // &lt;-- see above comments\n        for(; c&gt;47 &amp;&amp; c&lt;58 &amp;&amp; c != ' ' ; c = buffer[++i]) \n        {\n            x = (x&lt;&lt;1) + (x&lt;&lt;3) + c - 48;\n        }\n\n        *sum = *sum+x;\n    } // end while\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4634193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29960dc44ee47ef4ad783729b8cbafca?s=128&d=identicon&r=PG&f=1", "display_name": "gudek", "link": "https://stackoverflow.com/users/4634193/gudek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "accepted_answer_id": 28866671, "answer_count": 1, "score": -1, "last_activity_date": 1425509510, "creation_date": 1425505687, "question_id": 28865674, "link": "https://stackoverflow.com/questions/28865674/fread-large-amount-of-integers", "title": "Fread - large amount of integers", "body": "<p>i need to read large amount of integers from stdin. Speed is very important here, for example getchar_unlocked is too slow for me(hundredths of a second really matters)</p>\n\n<p>My code works with getchar_unlocked, but now I'm trying to read wholle line of unknown number of integers to buffer with fread. What is wrong down there?</p>\n\n<p>code below:</p>\n\n<pre><code>inline int fastRead_int(int *sum) {\n\nchar buffer[sizeof(int)*sizeof(int)];\nregister int i = 0;\nfread(buffer,sizeof(buffer),1,stdin);\nregister int c = buffer[0];\nint x = 0;\n\nwhile(c != NULL)\n{\n    c = buffer[++i];\n    for(; ((c&lt;48 || c&gt;57) &amp;&amp; c != ' '); c = buffer[++i]);\n\n\nfor(; c&gt;47 &amp;&amp; c&lt;58 &amp;&amp; c != ' ' ; c = buffer[++i]) {\n    x = (x&lt;&lt;1) + (x&lt;&lt;3) + c - 48;\n}\n\n*sum = *sum+x;\n}\n</code></pre>\n"}, {"tags": ["c", "avr"], "comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1425518118, "post_id": 28865581, "comment_id": 46000935, "body": "This looks like C++ ."}, {"owner": {"reputation": 371, "user_id": 1910073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5869eb6119129007f82cf62928ebe3fc?s=128&d=identicon&r=PG", "display_name": "joell", "link": "https://stackoverflow.com/users/1910073/joell"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 1, "creation_date": 1425536022, "post_id": 28865581, "comment_id": 46005729, "body": "The original source is C++ (RadioHead), VirtualWire is C and my port is C. That is why I put the C tag."}], "owner": {"reputation": 371, "user_id": 1910073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5869eb6119129007f82cf62928ebe3fc?s=128&d=identicon&r=PG", "display_name": "joell", "link": "https://stackoverflow.com/users/1910073/joell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 783, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425517919, "creation_date": 1425505362, "question_id": 28865581, "link": "https://stackoverflow.com/questions/28865581/port-of-virtualwire-radiohead-transmitting-not-working", "title": "Port of VirtualWire/RadioHead transmitting not working", "body": "<p>I'm not sure if this kind of question is allowed but I ported <a href=\"http://www.airspayce.com/mikem/arduino/RadioHead/\" rel=\"nofollow\">RadioHead ASK</a> protocol to C (the successor to <a href=\"http://www.airspayce.com/mikem/arduino/VirtualWire/\" rel=\"nofollow\">VirtualWire</a>). Anyway the receiving part works, I tested that by uploading the example transmitting sketch on to an Arduino and my own receiving on another Arduino. However when I try my transmitting part it doesn't work. You might say then your port of the code is wrong, yes it is somewhere but I can't find out where.. When I print the encoded buffer of the example it looks like:</p>\n\n<pre><code>2A 2A 2A 2A 2A 2A 38 2C D 2A 34 34 34 34 D D\nD D 1A 23 1A 19 1A 2A 1A 2A 1A 34 E 34 D 34\n</code></pre>\n\n<p>And it is the same for my version. So the encoding of the message is correct, it also gives the same FCS (a CRC-CCITT).</p>\n\n<p>So it must be the sending part I guess, which looks:</p>\n\n<p>Original:</p>\n\n<pre><code>void RH_ASK::transmitTimer()\n{\n    if (_txSample++ == 0)\n    {\n    // Send next bit\n    // Symbols are sent LSB first\n    // Finished sending the whole message? (after waiting one bit period \n    // since the last bit)\n    if (_txIndex &gt;= _txBufLen)\n    {\n        setModeIdle();\n        _txGood++;\n    }\n    else\n    {\n        writeTx(_txBuf[_txIndex] &amp; (1 &lt;&lt; _txBit++));\n        if (_txBit &gt;= 6)\n        {\n        _txBit = 0;\n        _txIndex++;\n        }\n    }\n    }\n\n    if (_txSample &gt; 7)\n    _txSample = 0;\n}\n</code></pre>\n\n<p>My Version:</p>\n\n<pre><code>void tick_transmit()\n{\n    static volatile uint8_t sample = 0, index = 0, bit = 0;\n\n    if (sample++ == 0)\n    {\n        if (index &gt;= _transmitInfo.bufferLength)\n        {\n            set_mode(ASK_MODE_IDLE);\n\n            index = 0;      //setup for the next transmit\n            sample = 0;\n            bit = 0;\n\n            return;\n        }\n\n        write(_transmitInfo.buffer[index] &amp; (1 &lt;&lt; bit++));\n        if (bit &gt;= 6)\n        {\n            bit = 0;\n            index++;\n        }\n    }\n\n    if (sample &gt; 7)\n        sample = 0;\n}\n</code></pre>\n\n<p>Which to me looks the same except for the fact that I moved all global variables to the function self and renamed them.</p>\n\n<p>Full Original Version:</p>\n\n<pre><code>// RH_ASK.cpp\n//\n// Copyright (C) 2014 Mike McCauley\n// $Id: RH_ASK.cpp,v 1.14 2014/08/27 22:00:36 mikem Exp $\n\n#include &lt;RH_ASK.h&gt;\n#include &lt;RHCRC.h&gt;\n\n#if (RH_PLATFORM == RH_PLATFORM_STM32) // Maple etc\nHardwareTimer timer(MAPLE_TIMER);\n#endif\n\n// RH_ASK on Arduino uses Timer 1 to generate interrupts 8 times per bit interval\n// Define RH_ASK_ARDUINO_USE_TIMER2 if you want to use Timer 2 instead of Timer 1 on Arduino\n// You may need this to work around other librraies that insiston using timer 1\n//#define RH_ASK_ARDUINO_USE_TIMER2\n\n// Interrupt handler uses this to find the most recently initialised instance of this driver\nstatic RH_ASK* thisASKDriver;\n\n// 4 bit to 6 bit symbol converter table\n// Used to convert the high and low nybbles of the transmitted data\n// into 6 bit symbols for transmission. Each 6-bit symbol has 3 1s and 3 0s \n// with at most 3 consecutive identical bits\nstatic uint8_t symbols[] =\n{\n    0xd,  0xe,  0x13, 0x15, 0x16, 0x19, 0x1a, 0x1c, \n    0x23, 0x25, 0x26, 0x29, 0x2a, 0x2c, 0x32, 0x34\n};\n\n// This is the value of the start symbol after 6-bit conversion and nybble swapping\n#define RH_ASK_START_SYMBOL 0xb38\n\nRH_ASK::RH_ASK(uint16_t speed, uint8_t rxPin, uint8_t txPin, uint8_t pttPin, bool pttInverted)\n    :\n    _speed(speed),\n    _rxPin(rxPin),\n    _txPin(txPin),\n    _pttPin(pttPin),\n    _pttInverted(pttInverted)\n{\n    // Initialise the first 8 nibbles of the tx buffer to be the standard\n    // preamble. We will append messages after that. 0x38, 0x2c is the start symbol before\n    // 6-bit conversion to RH_ASK_START_SYMBOL\n    uint8_t preamble[RH_ASK_PREAMBLE_LEN] = {0x2a, 0x2a, 0x2a, 0x2a, 0x2a, 0x2a, 0x38, 0x2c};\n    memcpy(_txBuf, preamble, sizeof(preamble));\n}\n\nbool RH_ASK::init()\n{\n    if (!RHGenericDriver::init())\n    return false;\n    thisASKDriver = this;\n\n#if (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n #ifdef RH_ASK_PTT_PIN              \n    RH_ASK_PTT_DDR  |=  (1&lt;&lt;RH_ASK_PTT_PIN); \n    RH_ASK_TX_DDR   |=  (1&lt;&lt;RH_ASK_TX_PIN);\n    RH_ASK_RX_DDR   &amp;= ~(1&lt;&lt;RH_ASK_RX_PIN);\n #else\n    RH_ASK_TX_DDR   |=  (1&lt;&lt;RH_ASK_TX_PIN);\n    RH_ASK_RX_DDR   &amp;= ~(1&lt;&lt;RH_ASK_RX_PIN);\n #endif\n#else\n    // Set up digital IO pins for arduino\n    pinMode(_txPin, OUTPUT);\n    pinMode(_rxPin, INPUT);\n    pinMode(_pttPin, OUTPUT);\n#endif\n\n    // Ready to go\n    setModeIdle();\n\n    TCCR1A = 0;                                 //sets normal timer mode; disables compare\n    TCCR1B = _BV(WGM12) | _BV(CS10);            //sets CTC Mode; No Prescaling\n    OCR1A = 1000;                               //sets compare at 1000\n    TIMSK1 |= _BV(OCIE1A);      \n\n\n    return true;\n}\n\n// Put these prescaler structs in PROGMEM, not on the stack\n#if (RH_PLATFORM == RH_PLATFORM_ARDUINO) || (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n #if defined(RH_ASK_ARDUINO_USE_TIMER2)\n // Timer 2 has different prescalers\n PROGMEM static const uint16_t prescalers[] = {0, 1, 8, 32, 64, 128, 256, 3333}; \n #else\n PROGMEM static const uint16_t prescalers[] = {0, 1, 8, 64, 256, 1024, 3333}; \n #endif\n #define NUM_PRESCALERS (sizeof(prescalers) / sizeof( uint16_t))\n#endif\n\n// Common function for setting timer ticks @ prescaler values for speed\n// Returns prescaler index into {0, 1, 8, 64, 256, 1024} array\n// and sets nticks to compare-match value if lower than max_ticks\n// returns 0 &amp; nticks = 0 on fault\nuint8_t RH_ASK::timerCalc(uint16_t speed, uint16_t max_ticks, uint16_t *nticks)\n{\n#if (RH_PLATFORM == RH_PLATFORM_ARDUINO) || (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n    // Clock divider (prescaler) values - 0/3333: error flag\n    uint8_t prescaler;     // index into array &amp; return bit value\n    unsigned long ulticks; // calculate by ntick overflow\n\n    // Div-by-zero protection\n    if (speed == 0)\n    {\n        // signal fault\n        *nticks = 0;\n        return 0;\n    }\n\n    // test increasing prescaler (divisor), decreasing ulticks until no overflow\n    // 1/Fraction of second needed to xmit one bit\n    unsigned long inv_bit_time = ((unsigned long)speed) * 8;\n    for (prescaler=1; prescaler &lt; NUM_PRESCALERS; prescaler += 1)\n    {\n    // Integer arithmetic courtesy Jim Remington\n    // 1/Amount of time per CPU clock tick (in seconds)\n    uint16_t prescalerValue;\n    memcpy_P(&amp;prescalerValue, &amp;prescalers[prescaler], sizeof(uint16_t));\n        unsigned long inv_clock_time = F_CPU / ((unsigned long)prescalerValue);\n        // number of prescaled ticks needed to handle bit time @ speed\n        ulticks = inv_clock_time / inv_bit_time;\n\n        // Test if ulticks fits in nticks bitwidth (with 1-tick safety margin)\n        if ((ulticks &gt; 1) &amp;&amp; (ulticks &lt; max_ticks))\n            break; // found prescaler\n\n        // Won't fit, check with next prescaler value\n    }\n\n\n    // Check for error\n    if ((prescaler == 6) || (ulticks &lt; 2) || (ulticks &gt; max_ticks))\n    {\n        // signal fault\n        *nticks = 0;\n        return 0;\n    }\n\n    *nticks = ulticks;\n    return prescaler;\n#else\n    return 0; // not implemented or needed on other platforms\n#endif\n}\n\n// The idea here is to get 8 timer interrupts per bit period\nvoid RH_ASK::timerSetup()\n{\n#if (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n    uint16_t nticks;\n    uint8_t prescaler = timerCalc(_speed, (uint16_t)-1, &amp;nticks);\n    if (!prescaler) return;\n    _COMB(TCCR,RH_ASK_TIMER_INDEX,A)= 0;                    \n    _COMB(TCCR,RH_ASK_TIMER_INDEX,B)= _BV(WGM12);               \n    _COMB(TCCR,RH_ASK_TIMER_INDEX,B)|= prescaler;               \n    _COMB(OCR,RH_ASK_TIMER_INDEX,A)= nticks;                    \n    _COMB(TI,MSK,RH_ASK_TIMER_INDEX)|= _BV(_COMB(OCIE,RH_ASK_TIMER_INDEX,A));\n\n#elif (RH_PLATFORM == RH_PLATFORM_MSP430) // LaunchPad specific\n    // Calculate the counter overflow count based on the required bit speed\n    // and CPU clock rate\n    uint16_t ocr1a = (F_CPU / 8UL) / _speed;\n\n    // This code is for Energia/MSP430\n    TA0CCR0 = ocr1a;                // Ticks for 62,5 us\n    TA0CTL = TASSEL_2 + MC_1;       // SMCLK, up mode\n    TA0CCTL0 |= CCIE;               // CCR0 interrupt enabled\n\n#elif (RH_PLATFORM == RH_PLATFORM_ARDUINO) // Arduino specific\n    uint16_t nticks; // number of prescaled ticks needed\n    uint8_t prescaler; // Bit values for CS0[2:0]\n\n #ifdef RH_PLATFORM_ATTINY\n    // figure out prescaler value and counter match value\n    // REVISIT: does not correctly handle 1MHz clock speeds, only works with 8MHz clocks\n    // At 1MHz clock, get 1/8 of the expected baud rate\n    prescaler = timerCalc(_speed, (uint8_t)-1, &amp;nticks);\n    if (!prescaler)\n        return; // fault\n\n    TCCR0A = 0;\n    TCCR0A = _BV(WGM01); // Turn on CTC mode / Output Compare pins disconnected\n\n    // convert prescaler index to TCCRnB prescaler bits CS00, CS01, CS02\n    TCCR0B = 0;\n    TCCR0B = prescaler; // set CS00, CS01, CS02 (other bits not needed)\n\n\n    // Number of ticks to count before firing interrupt\n    OCR0A = uint8_t(nticks);\n\n\n\n    // Set mask to fire interrupt when OCF0A bit is set in TIFR0\n#ifdef TIMSK0\n    // ATtiny84\n    TIMSK0 |= _BV(OCIE0A);\n#else\n    // ATtiny85\n    TIMSK |= _BV(OCIE0A);\n#endif\n\n\n #elif defined(__arm__) &amp;&amp; defined(CORE_TEENSY)\n    // on Teensy 3.0 (32 bit ARM), use an interval timer\n    IntervalTimer *t = new IntervalTimer();\n    void TIMER1_COMPA_vect(void);\n    t-&gt;begin(TIMER1_COMPA_vect, 125000 / _speed);\n\n #elif defined(__arm__)\n    // Arduino Due\n    // Due has 9 timers in 3 blocks of 3.\n    // We use timer 1 TC1_IRQn on TC0 channel 1, since timers 0, 2, 3, 4, 5 are used by the Servo library\n    #define RH_ASK_DUE_TIMER TC0\n    #define RH_ASK_DUE_TIMER_CHANNEL 1\n    #define RH_ASK_DUE_TIMER_IRQ TC1_IRQn\n    pmc_set_writeprotect(false);\n    pmc_enable_periph_clk(RH_ASK_DUE_TIMER_IRQ);\n\n    // Clock speed 4 can handle all reasonable _speeds we might ask for. Its divisor is 128\n    // and we want 8 interrupts per bit\n    uint32_t rc = (VARIANT_MCK / _speed) / 128 / 8;\n    TC_Configure(RH_ASK_DUE_TIMER, RH_ASK_DUE_TIMER_CHANNEL, \n         TC_CMR_WAVE | TC_CMR_WAVSEL_UP_RC | TC_CMR_TCCLKS_TIMER_CLOCK4);\n    TC_SetRC(RH_ASK_DUE_TIMER, RH_ASK_DUE_TIMER_CHANNEL, rc);\n    // Enable the RC Compare Interrupt\n    RH_ASK_DUE_TIMER-&gt;TC_CHANNEL[RH_ASK_DUE_TIMER_CHANNEL].TC_IER = TC_IER_CPCS;\n    NVIC_ClearPendingIRQ(RH_ASK_DUE_TIMER_IRQ);\n    NVIC_EnableIRQ(RH_ASK_DUE_TIMER_IRQ);\n    TC_Start(RH_ASK_DUE_TIMER, RH_ASK_DUE_TIMER_CHANNEL);\n\n #else\n    // This is the path for most Arduinos\n    // figure out prescaler value and counter match value\n  #if defined(RH_ASK_ARDUINO_USE_TIMER2)\n    prescaler = timerCalc(_speed, (uint8_t)-1, &amp;nticks);\n    if (!prescaler)\n        return; // fault\n    // Use timer 2\n    TCCR2A = _BV(WGM21); // Turn on CTC mode)\n    // convert prescaler index to TCCRnB prescaler bits CS10, CS11, CS12\n    TCCR2B = prescaler;\n\n    // Caution: special procedures for setting 16 bit regs\n    // is handled by the compiler\n    OCR2A = nticks;\n    // Enable interrupt\n   #ifdef TIMSK2\n    // atmega168\n    TIMSK2 |= _BV(OCIE2A);\n   #else\n    // others\n    TIMSK |= _BV(OCIE2A);\n   #endif // TIMSK2\n  #else\n    // Use timer 1\n    prescaler = timerCalc(_speed, (uint16_t)-1, &amp;nticks);    \n    if (!prescaler)\n        return; // fault\n    TCCR1A = 0; // Output Compare pins disconnected\n    TCCR1B = _BV(WGM12); // Turn on CTC mode\n\n    // convert prescaler index to TCCRnB prescaler bits CS10, CS11, CS12\n    TCCR1B |= prescaler;\n\n    // Caution: special procedures for setting 16 bit regs\n    // is handled by the compiler\n    OCR1A = nticks;\n\n    // Enable interrupt\n   #ifdef TIMSK1\n    // atmega168\n    TIMSK1 |= _BV(OCIE1A);\n   #else\n    // others\n    TIMSK |= _BV(OCIE1A);\n   #endif // TIMSK1\n  #endif\n #endif\n\n#elif (RH_PLATFORM == RH_PLATFORM_STM32) // Maple etc\n    // Pause the timer while we're configuring it\n    timer.pause();\n    timer.setPeriod((1000000/8)/_speed);\n    // Set up an interrupt on channel 1\n    timer.setChannel1Mode(TIMER_OUTPUT_COMPARE);\n    timer.setCompare(TIMER_CH1, 1);  // Interrupt 1 count after each update\n    void interrupt(); // defined below\n    timer.attachCompare1Interrupt(interrupt);\n\n    // Refresh the timer's count, prescale, and overflow\n    timer.refresh();\n\n    // Start the timer counting\n    timer.resume();\n\n#elif (RH_PLATFORM == RH_PLATFORM_UNO32)\n    // ON Uno32 we use timer1\n    OpenTimer1(T1_ON | T1_PS_1_1 | T1_SOURCE_INT, (F_CPU / 8) / _speed);\n    ConfigIntTimer1(T1_INT_ON | T1_INT_PRIOR_1);\n#endif\n\n}\n\nvoid RH_ASK::setModeIdle()\n{\n    if (_mode != RHModeIdle)\n    {\n    // Disable the transmitter hardware\n    writePtt(LOW);\n    writeTx(LOW);\n    _mode = RHModeIdle;\n    }\n}\n\nvoid RH_ASK::setModeRx()\n{\n    if (_mode != RHModeRx)\n    {\n    // Disable the transmitter hardware\n    writePtt(LOW);\n    writeTx(LOW);\n    _mode = RHModeRx;\n    }\n}\n\nvoid RH_ASK::setModeTx()\n{\n    if (_mode != RHModeTx)\n    {\n    // PRepare state varibles for a new transmission\n    _txIndex = 0;\n    _txBit = 0;\n    _txSample = 0;\n\n    // Enable the transmitter hardware\n    writePtt(HIGH);\n\n    _mode = RHModeTx;\n    }\n}\n\n// Call this often\nbool RH_ASK::available()\n{\n    if (_mode == RHModeTx)\n    return false;\n    setModeRx();\n    if (_rxBufFull)\n    {\n    validateRxBuf();\n    _rxBufFull= false;\n    }\n    return _rxBufValid;\n}\n\nbool RH_ASK::recv(uint8_t* buf, uint8_t* len)\n{\n    if (!available())\n    return false;\n\n    if (buf &amp;&amp; len)\n    {\n    // Skip the length and 4 headers that are at the beginning of the rxBuf\n    // and drop the trailing 2 bytes of FCS\n    uint8_t message_len = _rxBufLen-RH_ASK_HEADER_LEN - 3;\n    if (*len &gt; message_len)\n        *len = message_len;\n    memcpy(buf, _rxBuf+RH_ASK_HEADER_LEN+1, *len);\n    }\n    _rxBufValid = false; // Got the most recent message, delete it\n//    printBuffer(\"recv:\", buf, *len);\n    return true;\n}\n\n// Caution: this may block\nbool RH_ASK::send(const uint8_t* data, uint8_t len)\n{\n    uint8_t i;\n    uint16_t index = 0;\n    uint16_t crc = 0xffff;\n    uint8_t *p = _txBuf + RH_ASK_PREAMBLE_LEN; // start of the message area\n    uint8_t count = len + 3 + RH_ASK_HEADER_LEN; // Added byte count and FCS and headers to get total number of bytes\n\n    if (len &gt; RH_ASK_MAX_MESSAGE_LEN)\n    return false;\n\n    // Wait for transmitter to become available\n    waitPacketSent();\n\n    // Encode the message length\n    crc = RHcrc_ccitt_update(crc, count);\n    p[index++] = symbols[count &gt;&gt; 4];\n    p[index++] = symbols[count &amp; 0xf];\n\n    // Encode the headers\n    crc = RHcrc_ccitt_update(crc, _txHeaderTo);\n    p[index++] = symbols[_txHeaderTo &gt;&gt; 4];\n    p[index++] = symbols[_txHeaderTo &amp; 0xf];\n    crc = RHcrc_ccitt_update(crc, _txHeaderFrom);\n    p[index++] = symbols[_txHeaderFrom &gt;&gt; 4];\n    p[index++] = symbols[_txHeaderFrom &amp; 0xf];\n    crc = RHcrc_ccitt_update(crc, _txHeaderId);\n    p[index++] = symbols[_txHeaderId &gt;&gt; 4];\n    p[index++] = symbols[_txHeaderId &amp; 0xf];\n    crc = RHcrc_ccitt_update(crc, _txHeaderFlags);\n    p[index++] = symbols[_txHeaderFlags &gt;&gt; 4];\n    p[index++] = symbols[_txHeaderFlags &amp; 0xf];\n\n    // Encode the message into 6 bit symbols. Each byte is converted into \n    // 2 6-bit symbols, high nybble first, low nybble second\n    for (i = 0; i &lt; len; i++)\n    {\n    crc = RHcrc_ccitt_update(crc, data[i]);\n    p[index++] = symbols[data[i] &gt;&gt; 4];\n    p[index++] = symbols[data[i] &amp; 0xf];\n    }\n\n    // Append the fcs, 16 bits before encoding (4 6-bit symbols after encoding)\n    // Caution: VW expects the _ones_complement_ of the CCITT CRC-16 as the FCS\n    // VW sends FCS as low byte then hi byte\n    crc = ~crc;\n    p[index++] = symbols[(crc &gt;&gt; 4)  &amp; 0xf];\n    p[index++] = symbols[crc &amp; 0xf];\n    p[index++] = symbols[(crc &gt;&gt; 12) &amp; 0xf];\n    p[index++] = symbols[(crc &gt;&gt; 8)  &amp; 0xf];\n\n    // Total number of 6-bit symbols to send\n    _txBufLen = index + RH_ASK_PREAMBLE_LEN;\n\n    printBuffer(\"\", _txBuf, _txBufLen);\n\n    // Start the low level interrupt handler sending symbols\n    setModeTx();\n\n// FIXME\n    thisASKDriver = this;\n\n    return true;\n}\n\n// Read the RX data input pin, taking into account platform type and inversion.\nbool RH_ASK::readRx()\n{\n    bool value;\n#if (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n    value = ((RH_ASK_RX_PORT &amp; (1&lt;&lt;RH_ASK_RX_PIN)) ? 1 : 0);\n#else\n    value = digitalRead(_rxPin);\n#endif\n    return value ^ _rxInverted;\n}\n\n// Write the TX output pin, taking into account platform type.\nvoid RH_ASK::writeTx(bool value)\n{\n#if (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n    ((value) ? (RH_ASK_TX_PORT |= (1&lt;&lt;RH_ASK_TX_PIN)) : (RH_ASK_TX_PORT &amp;= ~(1&lt;&lt;RH_ASK_TX_PIN)));\n#else\n    digitalWrite(_txPin, value);\n#endif\n}\n\n// Write the PTT output pin, taking into account platform type and inversion.\nvoid RH_ASK::writePtt(bool value)\n{\n#if (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n #if RH_ASK_PTT_PIN \n    ((value) ? (RH_ASK_PTT_PORT |= (1&lt;&lt;RH_ASK_PTT_PIN)) : (RH_ASK_PTT_PORT &amp;= ~(1&lt;&lt;RH_ASK_PTT_PIN)));\n #else\n    ((value) ? (RH_ASK_TX_PORT |= (1&lt;&lt;RH_ASK_TX_PIN)) : (RH_ASK_TX_PORT &amp;= ~(1&lt;&lt;RH_ASK_TX_PIN)));\n #endif\n#else\n    digitalWrite(_pttPin, value ^ _pttInverted);\n#endif\n}\n\nuint8_t RH_ASK::maxMessageLength()\n{\n    return RH_ASK_MAX_MESSAGE_LEN;\n}\n\n#if (RH_PLATFORM == RH_PLATFORM_ARDUINO) \n #if defined(RH_PLATFORM_ATTINY)\n  #define RH_ASK_TIMER_VECTOR TIM0_COMPA_vect\n #else // Assume Arduino Uno (328p or similar)\n  #if defined(RH_ASK_ARDUINO_USE_TIMER2)\n   #define RH_ASK_TIMER_VECTOR TIMER2_COMPA_vect\n  #else\n   #define RH_ASK_TIMER_VECTOR TIMER1_COMPA_vect\n  #endif\n #endif \n#elif (RH_ASK_PLATFORM == RH_ASK_PLATFORM_GENERIC_AVR8)\n #define __COMB(a,b,c) (a##b##c)\n #define _COMB(a,b,c) __COMB(a,b,c)\n #define RH_ASK_TIMER_VECTOR _COMB(TIMER,RH_ASK_TIMER_INDEX,_COMPA_vect)\n#endif\n\n#if (RH_PLATFORM == RH_PLATFORM_ARDUINO) &amp;&amp; defined(__arm__) &amp;&amp; defined(CORE_TEENSY)    \nvoid TIMER1_COMPA_vect(void)\n{\n    thisASKDriver-&gt;handleTimerInterrupt();\n}\n\n#elif (RH_PLATFORM == RH_PLATFORM_ARDUINO) &amp;&amp; defined(__arm__)\n// Arduino Due\nvoid TC1_Handler()\n{\n    TC_GetStatus(TC0, 1);\n    thisASKDriver-&gt;handleTimerInterrupt();\n}\n\n#elif (RH_PLATFORM == RH_PLATFORM_ARDUINO) || (RH_PLATFORM == RH_PLATFORM_GENERIC_AVR8)\n// This is the interrupt service routine called when timer1 overflows\n// Its job is to output the next bit from the transmitter (every 8 calls)\n// and to call the PLL code if the receiver is enabled\n//ISR(SIG_OUTPUT_COMPARE1A)\nISR(RH_ASK_TIMER_VECTOR)\n{\n    thisASKDriver-&gt;handleTimerInterrupt();\n}\n\n#elif (RH_PLATFORM == RH_PLATFORM_MSP430) || (RH_PLATFORM == RH_PLATFORM_STM32)\n// LaunchPad, Maple\nvoid interrupt()\n{\n    thisASKDriver-&gt;handleTimerInterrupt();\n}\n\n#elif (RH_PLATFORM == RH_PLATFORM_MSP430) \ninterrupt(TIMER0_A0_VECTOR) Timer_A_int(void) \n{\n    thisASKDriver-&gt;handleTimerInterrupt();\n};\n\n#elif (RH_PLATFORM == RH_PLATFORM_UNO32)\nextern \"C\"\n{\nvoid __ISR(_TIMER_1_VECTOR, ipl1) timerInterrupt(void)\n{\n    thisASKDriver-&gt;handleTimerInterrupt();\n    mT1ClearIntFlag(); // Clear timer 1 interrupt flag\n}\n}\n#endif\n\n// Convert a 6 bit encoded symbol into its 4 bit decoded equivalent\nuint8_t RH_ASK::symbol_6to4(uint8_t symbol)\n{\n    uint8_t i;\n    uint8_t count;\n\n    // Linear search :-( Could have a 64 byte reverse lookup table?\n    // There is a little speedup here courtesy Ralph Doncaster:\n    // The shortcut works because bit 5 of the symbol is 1 for the last 8\n    // symbols, and it is 0 for the first 8.\n    // So we only have to search half the table\n    for (i = (symbol&gt;&gt;2) &amp; 8, count=8; count-- ; i++)\n    if (symbol == symbols[i]) return i;\n\n    return 0; // Not found\n}\n\n// Check whether the latest received message is complete and uncorrupted\n// We should always check the FCS at user level, not interrupt level\n// since it is slow\nvoid RH_ASK::validateRxBuf()\n{\n    uint16_t crc = 0xffff;\n    // The CRC covers the byte count, headers and user data\n    for (uint8_t i = 0; i &lt; _rxBufLen; i++)\n    crc = RHcrc_ccitt_update(crc, _rxBuf[i]);\n    if (crc != 0xf0b8) // CRC when buffer and expected CRC are CRC'd\n    {\n    // Reject and drop the message\n    _rxBad++;\n    _rxBufValid = false;\n    return;\n    }\n\n    Serial.print(\"CRC: \");\n    Serial.println(crc, HEX);\n\n    // Extract the 4 headers that follow the message length\n    _rxHeaderTo    = _rxBuf[1];\n    _rxHeaderFrom  = _rxBuf[2];\n    _rxHeaderId    = _rxBuf[3];\n    _rxHeaderFlags = _rxBuf[4];\n    if (_promiscuous ||\n    _rxHeaderTo == _thisAddress ||\n    _rxHeaderTo == RH_BROADCAST_ADDRESS)\n    {\n    _rxGood++;\n    _rxBufValid = true;\n    }\n}\n\nvoid RH_ASK::receiveTimer()\n{\n    bool rxSample = readRx();\n\n    // Integrate each sample\n    if (rxSample)\n    _rxIntegrator++;\n\n    if (rxSample != _rxLastSample)\n    {\n    // Transition, advance if ramp &gt; 80, retard if &lt; 80\n    _rxPllRamp += ((_rxPllRamp &lt; RH_ASK_RAMP_TRANSITION) \n               ? RH_ASK_RAMP_INC_RETARD \n               : RH_ASK_RAMP_INC_ADVANCE);\n    _rxLastSample = rxSample;\n    }\n    else\n    {\n    // No transition\n    // Advance ramp by standard 20 (== 160/8 samples)\n    _rxPllRamp += RH_ASK_RAMP_INC;\n    }\n    if (_rxPllRamp &gt;= RH_ASK_RX_RAMP_LEN)\n    {\n    // Add this to the 12th bit of _rxBits, LSB first\n    // The last 12 bits are kept\n    _rxBits &gt;&gt;= 1;\n\n    // Check the integrator to see how many samples in this cycle were high.\n    // If &lt; 5 out of 8, then its declared a 0 bit, else a 1;\n    if (_rxIntegrator &gt;= 5)\n        _rxBits |= 0x800;\n\n    _rxPllRamp -= RH_ASK_RX_RAMP_LEN;\n    _rxIntegrator = 0; // Clear the integral for the next cycle\n\n    if (_rxActive)\n    {\n        // We have the start symbol and now we are collecting message bits,\n        // 6 per symbol, each which has to be decoded to 4 bits\n        if (++_rxBitCount &gt;= 12)\n        {\n        // Have 12 bits of encoded message == 1 byte encoded\n        // Decode as 2 lots of 6 bits into 2 lots of 4 bits\n        // The 6 lsbits are the high nybble\n        uint8_t this_byte = \n            (symbol_6to4(_rxBits &amp; 0x3f)) &lt;&lt; 4 \n            | symbol_6to4(_rxBits &gt;&gt; 6);\n\n        // The first decoded byte is the byte count of the following message\n        // the count includes the byte count and the 2 trailing FCS bytes\n        // REVISIT: may also include the ACK flag at 0x40\n        if (_rxBufLen == 0)\n        {\n            // The first byte is the byte count\n            // Check it for sensibility. It cant be less than 7, since it\n            // includes the byte count itself, the 4 byte header and the 2 byte FCS\n            _rxCount = this_byte;\n            if (_rxCount &lt; 7 || _rxCount &gt; RH_ASK_MAX_PAYLOAD_LEN)\n            {\n            // Stupid message length, drop the whole thing\n            _rxActive = false;\n            _rxBad++;\n                        return;\n            }\n        }\n\n        Serial.print(_rxBits, HEX);\n        Serial.print(\" \");\n        Serial.print(this_byte, HEX);\n        Serial.print(\" \");\n        Serial.println(_rxBufLen);\n\n        _rxBuf[_rxBufLen++] = this_byte;\n\n        if (_rxBufLen &gt;= _rxCount)\n        {\n            // Got all the bytes now\n            _rxActive = false;\n            _rxBufFull = true;\n            setModeIdle();\n        }\n        _rxBitCount = 0;\n        }\n    }\n    // Not in a message, see if we have a start symbol\n    else if (_rxBits == RH_ASK_START_SYMBOL)\n    {\n        // Have start symbol, start collecting message\n        _rxActive = true;\n        _rxBitCount = 0;\n        _rxBufLen = 0;\n    }\n    }\n}\n\nvoid RH_ASK::transmitTimer()\n{\n    if (_txSample++ == 0)\n    {\n    // Send next bit\n    // Symbols are sent LSB first\n    // Finished sending the whole message? (after waiting one bit period \n    // since the last bit)\n    if (_txIndex &gt;= _txBufLen)\n    {\n        setModeIdle();\n        _txGood++;\n    }\n    else\n    {\n        writeTx(_txBuf[_txIndex] &amp; (1 &lt;&lt; _txBit++));\n        if (_txBit &gt;= 6)\n        {\n        _txBit = 0;\n        _txIndex++;\n        }\n    }\n    }\n\n    if (_txSample &gt; 7)\n    _txSample = 0;\n}\n\nvoid RH_ASK::handleTimerInterrupt()\n{\n    if (_mode == RHModeRx)\n    receiveTimer(); // Receiving\n    else if (_mode == RHModeTx)\n        transmitTimer(); // Transmitting\n}\n</code></pre>\n\n<p>I'm sorry I have to link to my own source, but otherwise this post is larger then 30k characters. It can be found <a href=\"https://github.com/iVisii/avr-radio/\" rel=\"nofollow\">here</a>.</p>\n\n<p><em>The #ifdef WIN32 was for developing it in Visual Studio without the complaining of Intellisense, you should ignore it</em></p>\n\n<p>I'm sure that the wiring and the set up of the pin is correct.</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 8, "creation_date": 1425505287, "post_id": 28865530, "comment_id": 45996058, "body": "What is your outer problem? Why do you think you want to do this? What precisely is in your array? Are you sure it doesn&#39;t <i>require</i> 4-byte alignment on your platform?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1425514286, "post_id": 28865530, "comment_id": 45999769, "body": "It seems you consider this an error, fluke, mistake, oversight or bug. However, there are several good reasons to store array elements this way. Can you provide your reasons why it should not?"}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 4565423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pP6Oj.jpg?s=128&g=1", "display_name": "mrhpogie", "link": "https://stackoverflow.com/users/4565423/mrhpogie"}, "is_accepted": false, "score": 0, "last_activity_date": 1425506914, "creation_date": 1425506914, "answer_id": 28866008, "question_id": 28865530, "link": "https://stackoverflow.com/questions/28865530/how-to-avoid-padding-so-that-extra-bytes-are-not-used-by-a-structure/28866008#28866008", "title": "How to avoid padding so that extra bytes are not used by a structure", "body": "<p>Your platform may have the option 'packed' for sections. Sections having this are then aligned to byte</p>\n"}, {"tags": [], "owner": {"reputation": 1206, "user_id": 45679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa492aad65a8cf3202c55f64576fa23?s=128&d=identicon&r=PG", "display_name": "Gwyn Evans", "link": "https://stackoverflow.com/users/45679/gwyn-evans"}, "is_accepted": false, "score": 2, "last_activity_date": 1425507077, "creation_date": 1425507077, "answer_id": 28866059, "question_id": 28865530, "link": "https://stackoverflow.com/questions/28865530/how-to-avoid-padding-so-that-extra-bytes-are-not-used-by-a-structure/28866059#28866059", "title": "How to avoid padding so that extra bytes are not used by a structure", "body": "<p>You probably want to look at using <code>#pragma pack</code> around your structure. See <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Structure-Packing-Pragmas.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Structure-Packing-Pragmas.html</a> for some docs.</p>\n\n<p>Try <code>#pragma pack(1)</code> just before then <code>#pragma pack()</code> just after the structure definition.</p>\n"}], "owner": {"reputation": 75, "user_id": 4050257, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8376f094a1fc715b8e1f354b78c0d51f?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal", "link": "https://stackoverflow.com/users/4050257/kunal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1425513720, "creation_date": 1425505166, "last_edit_date": 1425513720, "question_id": 28865530, "link": "https://stackoverflow.com/questions/28865530/how-to-avoid-padding-so-that-extra-bytes-are-not-used-by-a-structure", "title": "How to avoid padding so that extra bytes are not used by a structure", "body": "<p>One of my arrays takes 14 bytes but in a map file it shows as 16 bytes (i.e. next variable is allocated after 16 bytes of memory).\nI want it not to use more than 14 bytes, i.e padding space should not come in map file.</p>\n\n<p>What option do I have for same?</p>\n\n<p>Can it be done using any compiler option?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 1, "creation_date": 1425504955, "post_id": 28865451, "comment_id": 45995888, "body": "Your compiler might not like having initializers below code (printf).  Try moving your <code>printf(&quot;rolling dice\\n&quot;);</code> to below all your initializers.  Also on a side note, <code>diep[5]</code> is wrong because your array doesn&#39;t have 6 elements."}, {"owner": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "edited": false, "score": 3, "creation_date": 1425505055, "post_id": 28865451, "comment_id": 45995947, "body": "Just as a heads up, I don&#39;t think you want to access  <code>diep[5]</code>, as the last valid value in that array is <code>diep[4]</code>"}, {"owner": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "edited": false, "score": 0, "creation_date": 1425505102, "post_id": 28865451, "comment_id": 45995967, "body": "Also, could you post compiler output? It would be helpful in debugging."}, {"owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "reply_to_user": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1425505159, "post_id": 28865451, "comment_id": 45995991, "body": "@JS1 WOAH! it worked thanks so much! It would have taken me hours to figure that out."}, {"owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "reply_to_user": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "edited": false, "score": 0, "creation_date": 1425505243, "post_id": 28865451, "comment_id": 45996034, "body": "@bearsmahoney JS1 fixed the main problem, but I think you&#39;re right with the <code>diep[4]</code> fix. Should I replace that everywhere or only in a certain spot?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1425505254, "post_id": 28865451, "comment_id": 45996039, "body": "@DillonJ. Then you must be using c89. That&#39;s old."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1425505413, "post_id": 28865451, "comment_id": 45996119, "body": "@juanchopanza Obviously he has a non-standard extension or something, as well, since his <code>&#47;&#47;</code> comments compile."}, {"owner": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "edited": false, "score": 1, "creation_date": 1425505432, "post_id": 28865451, "comment_id": 45996130, "body": "@DillonJ. Using <code>diep[5]</code> anywhere will produce undesirable results. If you&#39;re just trying to access the last element of the array, <code>diep[4]</code> will do that for you."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1425505548, "post_id": 28865451, "comment_id": 45996182, "body": "@IskarJarak Good point, those comments (the subject of my deleted answer) wouldn&#39;t work in C89 either."}, {"owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "reply_to_user": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "edited": false, "score": 0, "creation_date": 1425505620, "post_id": 28865451, "comment_id": 45996221, "body": "@bearsmahoney Thanks I fixed it!"}, {"owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1425505648, "post_id": 28865451, "comment_id": 45996235, "body": "@juanchopanza I am using Visual studio 2012 Update 4 if that&#39;s helpful"}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1425507019, "post_id": 28865451, "comment_id": 45996978, "body": "@DillonJ. I suggest you set up <a href=\"http://clang.llvm.org/get_started.html\" rel=\"nofollow noreferrer\">clang</a> or <a href=\"http://www.mingw.org/\" rel=\"nofollow noreferrer\">gcc via mingw</a> then, because CL (the Microsoft C/C++ compiler&amp;linker) has pretty terrible support for standard C."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1425509837, "post_id": 28865451, "comment_id": 45998266, "body": "this line: &#39;diep[5] = rand() % 6 + 1;&#39;is accessing the 6th element of the array (array indexes start with 0) and this only initializes one entry.  don&#39;t you want to initialize all 5 entries in the array?  and when using rand() should always initialize the random function with a call to srand(), something like so: &#39;srand( time( NULL ) );&#39; Accessing array elements beyond the end of the array results in undefined behaviour and can lead to a seg fault event"}], "answers": [{"tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": false, "score": 1, "last_activity_date": 1425505469, "creation_date": 1425505469, "answer_id": 28865617, "question_id": 28865451, "link": "https://stackoverflow.com/questions/28865451/simple-array-syntax-error/28865617#28865617", "title": "Simple Array syntax error", "body": "<p>Your compiler might not like having initializers below code (the <code>printf</code> line). Try moving this line:</p>\n\n<pre><code>printf(\"rolling dice\\n\");\n</code></pre>\n\n<p>to below all your initializers.</p>\n\n<p>Also on a side note, <code>diep[5]</code> is wrong because your array doesn't have 6 elements.  I'm not sure if you intended to roll the dice 5 times or not.  Currently, you are rolling the dice once, putting the result in an out of bounds array element, and then printing the first array element, which will always be 0.</p>\n"}], "owner": {"reputation": 23, "user_id": 4604249, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/899356843429588/picture?type=large", "display_name": "Dillon J.", "link": "https://stackoverflow.com/users/4604249/dillon-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1425505794, "creation_date": 1425504876, "last_edit_date": 1425505794, "question_id": 28865451, "link": "https://stackoverflow.com/questions/28865451/simple-array-syntax-error", "title": "Simple Array syntax error", "body": "<p>I am trying to make a program that rolls 5 dice, so I initialized my array <code>die[5]</code> and my pointer <code>*diep</code> but for some reason it tells me that in those respective lines I am missing a semi colon. From what I can see there is a semi colon in all of the appropriate places. Is there something I am missing?  I have never have used arrays before.</p>\n\n<pre><code>int roll_dice (void)\n{\n    printf (\"rolling dice\\n\");\n\n    int die[5] = {0, 0, 0, 0, 0}; //initializing my array of dice\n    int *diep;  //initializing my pointer\n\n    diep = die;\n\n    diep[5] = rand() % 6 + 1;\n\n    printf (\"%s%d\", \"die = \", *diep);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "linked-list"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1425503792, "post_id": 28865056, "comment_id": 45995266, "body": "Before looking at micromanaging optimizations, how about compiling the whole program with optimization disabled (<code>-O0</code>) to see whether that resolves the problem?  If it does not (as is my prediction) then optimization is not your problem."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1425504119, "post_id": 28865056, "comment_id": 45995438, "body": "Note, too, that it is highly unlikely that GCC is performing the optimization you describe.  It will not reorder function calls unless it can prove that it&#39;s safe to do so (or thinks it can).  It is far more likely to fail to prove that despite it being true, than to erroneously think it can prove it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1425504693, "post_id": 28865056, "comment_id": 45995776, "body": "In fact, if your function/macro names are any indication of what they actually do, I can pretty confidently say that it&#39;s your code that&#39;s broken, not the compiler."}, {"owner": {"reputation": 11202, "user_id": 886669, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c56f1eac6c5b31b32bdffa4f741f3aed?s=128&d=identicon&r=PG", "display_name": "yasar", "link": "https://stackoverflow.com/users/886669/yasar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425505851, "post_id": 28865056, "comment_id": 45996348, "body": "@JohnBollinger It is a logic error? I checked the logic twice, but it is late night here, I might have missed something."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425506088, "post_id": 28865056, "comment_id": 45996472, "body": "Consider what happens when <code>elem1</code> is immediate predecessor or successor of <code>elem2</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425506497, "post_id": 28865056, "comment_id": 45996706, "body": "Compilers do have bugs, but they are <i>almost never</i> the reason your program (or mine) doesn&#39;t work.  Always start by assuming otherwise."}, {"owner": {"reputation": 11202, "user_id": 886669, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c56f1eac6c5b31b32bdffa4f741f3aed?s=128&d=identicon&r=PG", "display_name": "yasar", "link": "https://stackoverflow.com/users/886669/yasar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425506771, "post_id": 28865056, "comment_id": 45996850, "body": "@JohnBollinger Ohh, I just figured out my error, data&#39;s next and prev points to itself :/"}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1425503672, "last_edit_date": 1592644375, "creation_date": 1425503672, "answer_id": 28865087, "question_id": 28865056, "link": "https://stackoverflow.com/questions/28865056/how-to-tell-gcc-to-not-to-optimize-specific-function/28865087#28865087", "title": "How to tell gcc to not to optimize specific function", "body": "<p><em>How to tell gcc to not to optimize specific function</em></p>\n<p>You can use <code>optimize</code> function attribute to compile a function with different optimization options.</p>\n<p>From <code>gcc</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>optimize</p>\n<p>The optimize attribute is used to specify that a function is to be compiled with different optimization options than specified on the command line. Arguments can either be numbers or strings. Numbers are assumed to be an optimization level. Strings that begin with O are assumed to be an optimization option, while other options are assumed to be used with a -f prefix. You can also use the \u2018#pragma GCC optimize\u2019 pragma to set the optimization options that affect more than one function. See Function Specific Option Pragmas, for details about the \u2018#pragma GCC optimize\u2019 pragma.</p>\n</blockquote>\n"}], "owner": {"reputation": 11202, "user_id": 886669, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c56f1eac6c5b31b32bdffa4f741f3aed?s=128&d=identicon&r=PG", "display_name": "yasar", "link": "https://stackoverflow.com/users/886669/yasar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1425503672, "creation_date": 1425503541, "question_id": 28865056, "link": "https://stackoverflow.com/questions/28865056/how-to-tell-gcc-to-not-to-optimize-specific-function", "title": "How to tell gcc to not to optimize specific function", "body": "<p>I have a function like this;</p>\n\n<pre><code>/* Swap two element by address*/\nstatic __inline void dllist_swap_byaddress(void *elem1, void *elem2) {\n\n    /*\n    Modify pointers to swap order of elements. Consider swapping by value\n    if data to be swapped is smaller than 8 bytes or so.\n    */\n\n    void *elem1_prev = dllist_getprev(elem1);\n    void *elem1_next = dllist_getnext(elem1);\n    void *elem2_prev = dllist_getprev(elem2);\n    void *elem2_next = dllist_getnext(elem2);\n\n    __dllist_setnext(elem2_prev, elem1);\n    __dllist_setnext(elem1_prev, elem2);\n    __dllist_setnext(elem1, elem2_next);\n    __dllist_setnext(elem2, elem1_next);\n\n}\n</code></pre>\n\n<p>But, it doesn't work as expected. I am guessing (I don't know how to verify it though), that gcc optimizes my code into this:</p>\n\n<pre><code>__dllist_setnext(dllist_getprev(elem2), elem1);\n__dllist_setnext(dllist_getprev(elem1), elem2);\n__dllist_setnext(elem1, dllist_getnext(elem2));\n__dllist_setnext(elem2, dllist_getnext(elem1));\n</code></pre>\n\n<p>However, I don't want this to happen because <code>__dllist_setnext(dllist_getprev(elem2), elem1)</code> for example, also change's value of <code>dllist_getprev(elem1)</code>. That is the whole reason I am trying to save them in local stack in the first place.</p>\n\n<p>How can I verify that gcc actually does it or not, and if it does, how can I tell it to stop doing it?</p>\n\n<p>I have tried to make <code>void *</code>'s volatile, but I had to cast them into void* again before calling the function, and I don't think it made any difference.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1425503736, "post_id": 28864979, "comment_id": 45995236, "body": "I don&#39;t think that is standard behavior though.  clang does it, but IIRC at least some versions of gcc instantiate local strings on each function call."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 1, "creation_date": 1425503861, "post_id": 28864979, "comment_id": 45995295, "body": "@technosaurus it is standard behavior. <i>(c11, 6.4.5p6) &quot;[...] The multibyte character sequence is then used to initialize an array of static storage duration and length just sufficient to contain the sequence.&quot;</i>"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 4, "last_activity_date": 1425503320, "creation_date": 1425503320, "answer_id": 28864979, "question_id": 28864924, "link": "https://stackoverflow.com/questions/28864924/yet-another-return-local-addr-function-returns-address-of-local-variable/28864979#28864979", "title": "Yet another &quot;return-local-addr&quot; - &quot;function returns address of local variable&quot;", "body": "<pre><code>char * foo_1() {\n    char * p = \"bar\";\n    return p;\n}\n</code></pre>\n\n<p>Here you are not returning the address of a local object but the pointer value of a pointer pointing to a string literal. String literals have static storage duration and it is fine to return a pointer to a string literal. When <code>foo_1</code> returns, <code>p</code> object is destroyed (automatic storage duration) but not <code>\"bar\"</code> (static storage duration).</p>\n"}, {"tags": [], "owner": {"reputation": 468, "user_id": 1784021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IPbrT.jpg?s=128&g=1", "display_name": "Tafuri", "link": "https://stackoverflow.com/users/1784021/tafuri"}, "is_accepted": false, "score": 3, "last_activity_date": 1425503406, "creation_date": 1425503406, "answer_id": 28865005, "question_id": 28864924, "link": "https://stackoverflow.com/questions/28864924/yet-another-return-local-addr-function-returns-address-of-local-variable/28865005#28865005", "title": "Yet another &quot;return-local-addr&quot; - &quot;function returns address of local variable&quot;", "body": "<p>In <code>foo_2()</code> you are returning the adress of the local variable <code>p</code> which is why you get the warning.</p>\n\n<p>In <code>foo_1()</code> you are returning the adress of the literal string, which is fine since it has static storage duration.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1425503484, "creation_date": 1425503484, "answer_id": 28865036, "question_id": 28864924, "link": "https://stackoverflow.com/questions/28864924/yet-another-return-local-addr-function-returns-address-of-local-variable/28865036#28865036", "title": "Yet another &quot;return-local-addr&quot; - &quot;function returns address of local variable&quot;", "body": "<pre><code>char * p_1 = foo_1();\n</code></pre>\n\n<p>is OK. Dereferencing <code>p_1</code> is not a problem as long as you don't modify anything that <code>p_1</code> points to since <code>foo_1</code> returns a pointer to a string literal that is stored in read-only section of the program.</p>\n\n<pre><code>char ** p_2 = foo_2();\n</code></pre>\n\n<p>is not OK. Dereferencing <code>p_2</code> is cause for undefined behavior since <code>p_2</code> points to an object that's been deleted.</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1425503912, "creation_date": 1425503912, "answer_id": 28865170, "question_id": 28864924, "link": "https://stackoverflow.com/questions/28864924/yet-another-return-local-addr-function-returns-address-of-local-variable/28865170#28865170", "title": "Yet another &quot;return-local-addr&quot; - &quot;function returns address of local variable&quot;", "body": "<p>In <code>foo_2()</code>, you're returning the address of a (non-<code>static</code>) local variable. That address becomes indeterminate when the function returns, because the pointed-to object no longer exists -- thus the warning.</p>\n\n<p>In <code>foo_1()</code>, you're returning the <em>value</em> of a local variable. There's no problem at all doing that; it's no worse than:</p>\n\n<pre><code>int foo_3(void) {\n    int local = 42;\n    return local;\n}\n</code></pre>\n\n<p>which returns the <em>value</em> of <code>local</code>.</p>\n\n<p>In <code>foo_1()</code>, since the variable whose value you're returning happens to be a pointer, you <em>could</em> still invoke undefined behavior if that value were questionable. For example:</p>\n\n<pre><code>int foo_1a(void) {\n    char arr[] = \"bar\";\n    char *p = arr; // or equivalently, &amp;arr[0]\n    return p;\n}\n</code></pre>\n\n<p>Here you're still returning the value of a local variable (which is fine), but that value happens to be the address of another local variable, so the returned pointer value becomes invalid as soon as the function returns.</p>\n\n<p>A compiler is less likely to warn about <code>foo_1a</code> than about your <code>foo_2</code>, because it's less likely to be able to determine that the value of <code>p</code> when the return statement is executed is problematic. In fact the language does not require a diagnostic for this kind of thing. Compilers can do a reasonably good job of detecting and warning about some but not all instances of undefined behavior.</p>\n\n<p>Bottom line: Your <code>foo_1()</code> function is well behaved. The pointer value it returns is the address of a string literal, which has static storage duration (i.e., it exists for the entire lifetime of the program).</p>\n\n<p>However, since modifying that static array has undefined behavior, it would be wise to return the address as a <code>const char*</code> rather than as a <code>char*</code>, so the caller is less likely to attempt to modify the string literal. The <code>const</code> also serves as documentation for any human readers that the pointed-to value is not to be modified.</p>\n"}], "owner": {"reputation": 1427, "user_id": 4634044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/og1vc.jpg?s=128&g=1", "display_name": "ChristianMurschall", "link": "https://stackoverflow.com/users/4634044/christianmurschall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 0, "accepted_answer_id": 28864979, "answer_count": 4, "score": 2, "last_activity_date": 1425503912, "creation_date": 1425503160, "last_edit_date": 1495535200, "question_id": 28864924, "link": "https://stackoverflow.com/questions/28864924/yet-another-return-local-addr-function-returns-address-of-local-variable", "title": "Yet another &quot;return-local-addr&quot; - &quot;function returns address of local variable&quot;", "body": "<p>I know, this is a very, very common question. \nI have read e.g. <a href=\"https://stackoverflow.com/questions/28679558/warning-function-returns-address-of-local-variable-wreturn-local-addr\" title=\"here\">this</a>, <a href=\"https://stackoverflow.com/questions/22288871/function-returning-address-of-local-variable-error-in-c\" title=\"that\">that</a>, <a href=\"https://stackoverflow.com/questions/17312336/warning-function-returns-address-of-local-variable-enabled-by-default%20%22%22\">and this too</a>. \nI used to think that returning the address of a local variable is a very bad idea. I used to think that you should better:</p>\n\n<ul>\n<li>allocate memory via e.g. malloc</li>\n<li>make the local variable static or</li>\n<li>pass the pointer as an argument</li>\n</ul>\n\n<p>but then I tried this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar *  foo_1();\nchar ** foo_2();\n\nint main() {\n\n    char * p_1 = foo_1();\n    char ** p_2 = foo_2();\n\n    printf(\"\\n [%s] \\n\", p_1);\n    printf(\"\\n [%s] \\n\", *p_2);\n\nreturn 0;\n}\n\nchar * foo_1() {\n    char * p = \"bar\";\n    return p;\n}\n\nchar ** foo_2() {\n    char * p = \"bar\";\n    return &amp;p;\n}\n</code></pre>\n\n<p>I compile with -pedantic -pedantic-errors\nand get the expected warning: function returns address of local variable [-Wreturn-local-addr]</p>\n\n<p>but only for foo_2()! foo_1() works fine. Does any one know why and if this undefined behavior?</p>\n"}, {"tags": ["c", "sorting", "parallel-processing", "openmp", "radix-sort"], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 4560705, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-UM6Lt0W9WE4/AAAAAAAAAAI/AAAAAAAAAEA/xG_T9gnid-E/photo.jpg?sz=128", "display_name": "Lars Erik Storbuk&#229;s", "link": "https://stackoverflow.com/users/4560705/lars-erik-storbuk%c3%a5s"}, "edited": false, "score": 0, "creation_date": 1425544401, "post_id": 28867033, "comment_id": 46009156, "body": "I changed from pow(2,b) to 1 &lt;&lt; b and it had a noticeable improvement on the running time. However, I didn&#39;t quite get how the <code>bitOffset</code> is working, would you care to elaborate on the use of it?"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 158, "user_id": 4560705, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-UM6Lt0W9WE4/AAAAAAAAAAI/AAAAAAAAAEA/xG_T9gnid-E/photo.jpg?sz=128", "display_name": "Lars Erik Storbuk&#229;s", "link": "https://stackoverflow.com/users/4560705/lars-erik-storbuk%c3%a5s"}, "edited": false, "score": 0, "creation_date": 1425565929, "post_id": 28867033, "comment_id": 46021974, "body": "@LarsErikStorbuk&#229;s - I fixed my answer to use a shift count directly. (The previous code had a mistake, it should have been ( shiftCount = (8*sizeof(unsigned int) - bitOffset - numberofBits; ) ."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 158, "user_id": 4560705, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-UM6Lt0W9WE4/AAAAAAAAAAI/AAAAAAAAAEA/xG_T9gnid-E/photo.jpg?sz=128", "display_name": "Lars Erik Storbuk&#229;s", "link": "https://stackoverflow.com/users/4560705/lars-erik-storbuk%c3%a5s"}, "edited": false, "score": 0, "creation_date": 1425566977, "post_id": 28867033, "comment_id": 46022649, "body": "@LarsErikStorbuk&#229;s - the check for partial bit field is only needed if the number of bits in an element isn&#39;t an exact multiple of the number of bits in a field, for example, a 32 bit unsigned integer with a bit field size of 7, the most significant field will only have 4 bits (the bit field size from MSF to LSF  would be 4 7 7 7 7)."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1425567616, "last_edit_date": 1425567616, "creation_date": 1425511186, "answer_id": 28867033, "question_id": 28864655, "link": "https://stackoverflow.com/questions/28864655/parallelization-of-radix-sort-in-c-with-openmp/28867033#28867033", "title": "Parallelization of radix-sort in C with OpenMP", "body": "<p>Parallelization is going to be an issue because the limiting factor will be memory bandwidth (there is very little CPU overhead, and only one memory bus).</p>\n\n<p>Also instead of using the floating point function pow(2,b), create a bit mask and right shift count based on b:</p>\n\n<pre><code>    numberOfBits = b;\n    shiftCount = 0;\n    while(1){  // main loop\n        // set numberOfBuckets\n        numberOfBuckets = 1 &lt;&lt; numberOfBits;\n        bitMask = numberOfBuckets - 1;\n        // code to generate histogram for this field goes here\n        // ...\n        shiftCount += numberOfBits;\n        // check for partial bit field\n        if((shiftCount + numberOfBits) &gt; (8*sizeof(unsigned int))){\n            numberOfBits = (8*sizeof(unsigned int)) - shiftCount;\n            shiftCount = (8*sizeof(unsigned int)) - numberOfBits;\n            continue; // do partial bit field\n        }\n        // check for done\n        if(shiftCount == (8*sizeof(unsigned int)))\n            break; // done\n    }\n</code></pre>\n\n<p>If sorting signed integers, you'll need to adjust for the most significant field (also arithmetic right shift for signed integers is compiler / platform dependent). One solution (for two's complement signed integers) is to cast to unsigned integer and complement the sign bit for bucket index generation.</p>\n"}], "owner": {"reputation": 158, "user_id": 4560705, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-UM6Lt0W9WE4/AAAAAAAAAAI/AAAAAAAAAEA/xG_T9gnid-E/photo.jpg?sz=128", "display_name": "Lars Erik Storbuk&#229;s", "link": "https://stackoverflow.com/users/4560705/lars-erik-storbuk%c3%a5s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1372, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425567616, "creation_date": 1425502236, "question_id": 28864655, "link": "https://stackoverflow.com/questions/28864655/parallelization-of-radix-sort-in-c-with-openmp", "title": "Parallelization of radix-sort in C with OpenMP", "body": "<p>How would you go about parallelizing the radix-sort algorithm in C with OpenMP? </p>\n\n<p>My program is a modification of your typical radix-sort: It sorts an array of integers based on the binary representation of the digit, where you're able to vary the number of bits that should be interpreted as one digit (which essentially will be used to get different running time based on how big your integers are).</p>\n\n<p>I have a radix-function that takes three arguments:</p>\n\n<pre><code>// n is the number of elements in data\n// b is number of bits that should be interpreted as one digit\nvoid radix(int* data, int n, int b);\n</code></pre>\n\n<p>Further on, my radix-function iterates through all the bits (int: 32 bits) with <code>b</code> increments:</p>\n\n<pre><code>for(bit = 0; bit &lt; 32; bit += b) { ... }\n</code></pre>\n\n<p>Which contains three parts:</p>\n\n<ul>\n<li>Counting occurences of a certain digit (actually bits), to decide how much storage a bucket needs. <code>bucket[(data[i] &gt;&gt; bit) &amp; (int)(pow(2,b)-1)]++</code></li>\n<li><p>Putting values in a temporary array (the buckets).</p>\n\n<p><code>bitval = (data[i] &gt;&gt; bit) &amp; (int)(pow(2,b)-1)</code></p>\n\n<p><code>temp_data[bucket[bitval]++] = data[i]</code></p></li>\n<li><p>Copying values from the temporary buckets to the <code>*data</code> pointer given to the function.</p>\n\n<p><code>for(i = 0; i &lt; n; i++) { data[i] = temp_data[i] }</code></p></li>\n</ul>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 0, "creation_date": 1425502394, "post_id": 28864617, "comment_id": 45994427, "body": "What are the two lines assigning <code>list-&gt;last-&gt;next</code> supposed to do?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4303180, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lt6DXFmGBbE/AAAAAAAAAAI/AAAAAAAAABQ/BOCbRabQ9UI/photo.jpg?sz=128", "display_name": "i have the dumb", "link": "https://stackoverflow.com/users/4303180/i-have-the-dumb"}, "edited": false, "score": 0, "creation_date": 1425503352, "post_id": 28864786, "comment_id": 45995006, "body": "I&#39;ll rewrite it and keep that in mind.  I&#39;m assuming the valid items to point to for next would be whole links (including their own &quot;next&quot; substructures) instead of just the entity?  &quot;entity&quot; is a void pointer in order to return a generic type, so that is why I (mistakenly) used a typecast."}], "tags": [], "owner": {"reputation": 7851, "user_id": 1390430, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/5816e6bbc741b4ae175b3f932f08d641?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1390430/ben"}, "is_accepted": true, "score": 0, "last_activity_date": 1425502630, "creation_date": 1425502630, "answer_id": 28864786, "question_id": 28864617, "link": "https://stackoverflow.com/questions/28864617/advancing-pointer-in-a-linked-list/28864786#28864786", "title": "advancing pointer in a linked list", "body": "<p>If your list is designed to be a container of \"entity\" objects, as it appears from your add function, then there are two problems I see very quickly. First of all, the entity data type should be wholly independent of the list data type, so casting it to <code>link_t *</code> in list_add is wrong, and at best will be confusing. This may be the source of the second problem: no next pointer in your list should EVER point to an \"entity\" object. \"next\" pointers should only ever point to valid items in list created with list_add. I have not examined in detail what your list_next_link is <em>intended</em> to do, however it is almost certainly wrong to overwrite \"next\" pointers with the contained value in the list. Reinterpreting whatever data you have in the list item as a list pointer is bound to cause problems.</p>\n"}], "owner": {"reputation": 3, "user_id": 4303180, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lt6DXFmGBbE/AAAAAAAAAAI/AAAAAAAAABQ/BOCbRabQ9UI/photo.jpg?sz=128", "display_name": "i have the dumb", "link": "https://stackoverflow.com/users/4303180/i-have-the-dumb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 28864786, "answer_count": 1, "score": 0, "last_activity_date": 1425502630, "creation_date": 1425502126, "question_id": 28864617, "link": "https://stackoverflow.com/questions/28864617/advancing-pointer-in-a-linked-list", "title": "advancing pointer in a linked list", "body": "<p>I'm trying to create a function to advance the current pointer in a linked list to the next entity in the list.  Here is my list structure;</p>\n\n<pre><code>    * malloc() a new list header and initialize it */\nlist_t *list_init(void)\n{\n    list_t *list = (list_t *)malloc(sizeof(list_t));\n      list-&gt;first = NULL;            \n          list-&gt;last = NULL; \n      list-&gt;current = NULL; \nreturn list;      \n}\n</code></pre>\n\n<p>here is my link structure </p>\n\n<pre><code>    /* add an element to the end of a list */\nvoid list_add(list_t *list, void *entity)\n{\n    link_t *link = (link_t *)malloc(sizeof(link_t));       \n         link-&gt;entity = (link_t *)entity; \n     //link-&gt;next = (link_t *)list;  \n       if(list-&gt;first != NULL){\n            list-&gt;last = link;\n            link-&gt;next = NULL;\n            list-&gt;last-&gt;next = list-&gt;current;\n            list-&gt;current = list-&gt;last;\n       }        \n               else { \n\n               list-&gt;first = link-&gt;entity;  }\n}\n</code></pre>\n\n<p>and here is the function I am trying to create, where I am having problems in getting it to advance to the next entity</p>\n\n<pre><code>/* advance current pointer to next link */\nvoid list_next_link(list_t *list)\n{\n\n   assert(list-&gt;current != NULL);\n\n    list-&gt;last-&gt;next = list-&gt;current;\n    list-&gt;last-&gt;next =list-&gt;current-&gt;entity;\n    list-&gt;current = NULL;   \n\n}\n</code></pre>\n\n<p>I'm unsure how I'm supposed to get it to advance to the next link;  the first entry prints fine and the rest look like they are being printed from random memory addresses before it has a segmentation fault.    </p>\n"}, {"tags": ["c++", "c", "data-structures", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1425501685, "post_id": 28864444, "comment_id": 45994049, "body": "just missing a semicolon at the end of you struct, <code>struct node { ..... };</code>"}, {"owner": {"reputation": 61, "user_id": 4634001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b00c8c4d96c2d74fd3ab3ef960da37?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Claybon", "link": "https://stackoverflow.com/users/4634001/khalil-claybon"}, "reply_to_user": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1425502646, "post_id": 28864444, "comment_id": 45994567, "body": "okay so in C you must put semicolon at end of every struct?"}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1425503593, "post_id": 28864444, "comment_id": 45995155, "body": "yes pretty much. there are some contrived counter examples."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1425515788, "post_id": 28864444, "comment_id": 46000241, "body": "If this question is about C, please remove the C++ tag. Also the other way around."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1425545817, "post_id": 28864444, "comment_id": 46009879, "body": "@dfeuer, the same problem can arise in C or C++. I don&#39;t fully understand your complaint."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1425546076, "post_id": 28864444, "comment_id": 46010013, "body": "@LuisColorado, tagging a question with both C and C++ is strongly discouraged unless the question is specifically about both languages."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1425546691, "post_id": 28864444, "comment_id": 46010327, "body": "@dfeuer, I have had exactly the same problem with students in both languages with people who forget to put the semicolon in the last structure of a header file.  This is weird and far too common to illustrate on both languages, as the compiler error normally deals you to the next definition (out of the include file) where you don&#39;t see the problem."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4634038, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/e9ac593171f405e2ea24869672722d6e?s=128&d=identicon&r=PG", "display_name": "user4634038", "link": "https://stackoverflow.com/users/4634038/user4634038"}, "is_accepted": true, "score": 3, "last_activity_date": 1425501870, "creation_date": 1425501870, "answer_id": 28864541, "question_id": 28864444, "link": "https://stackoverflow.com/questions/28864444/linked-list-in-c/28864541#28864541", "title": "Linked List in C", "body": "<p>Try putting a semicolon after the struct declaration</p>\n\n<pre><code>struct node{\n             int data;\n             struct node* next;\n           };\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4634001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b00c8c4d96c2d74fd3ab3ef960da37?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Claybon", "link": "https://stackoverflow.com/users/4634001/khalil-claybon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 28864541, "answer_count": 1, "score": -1, "last_activity_date": 1425501870, "creation_date": 1425501521, "question_id": 28864444, "link": "https://stackoverflow.com/questions/28864444/linked-list-in-c", "title": "Linked List in C", "body": "<p>Heres a snippet from the code I am trying to complete for building a linked list. for some reason I keep getting the error \"error: expected \u2018;\u2019, identifier or \u2018(\u2019 before \u2018struct\u2019 \" when trying to compile the code. Can someone help me out.</p>\n\n<pre><code>struct node;\nstruct node* buildList(int x);\nvoid push(struct node** headRef, int data);\nint findLen(struct node** headRef);\n\nstruct node{\n  int data;\n  struct node* next;\n}\n\nstruct node* buildList(int x){\n   struct node* head = NULL;\n   head = malloc(sizeof(struct node));\n\n   head-&gt;data = x;\n   head-&gt;next = NULL;\n\n   return head;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1425501502, "post_id": 28864303, "comment_id": 45993923, "body": "You say that you &quot;want to dereference data_p&quot; , however it is not possible to dereference a <code>void *</code>.  (If that was possible then you would do it by writing <code>*(foo[i].job.data[j].data_p)</code>, where the parentheses are redundant but I added them for clarity)"}], "answers": [{"tags": [], "owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "is_accepted": false, "score": 0, "last_activity_date": 1425501315, "creation_date": 1425501315, "answer_id": 28864379, "question_id": 28864303, "link": "https://stackoverflow.com/questions/28864303/assign-value-at-pointer-value-from-void-pointer/28864379#28864379", "title": "Assign value at pointer value from void pointer", "body": "<p>Elements of job_data array are not pointers, they're in the type of DATA_T.</p>\n"}, {"comments": [{"owner": {"reputation": 18827, "user_id": 432209, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/11f758481a06644e362d90ef6ed672c3?s=128&d=identicon&r=PG", "display_name": "user432209", "link": "https://stackoverflow.com/users/432209/user432209"}, "edited": false, "score": 0, "creation_date": 1425501562, "post_id": 28864390, "comment_id": 45993961, "body": "Alright, one problem solved.  One more to go.  Editing post.I don&#39;t want them to point to the same place.  I want the value from one, set to the other."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1425501353, "creation_date": 1425501353, "answer_id": 28864390, "question_id": 28864303, "link": "https://stackoverflow.com/questions/28864303/assign-value-at-pointer-value-from-void-pointer/28864390#28864390", "title": "Assign value at pointer value from void pointer", "body": "<p>The error message is because <code>job_data[j]</code> is not a pointer. It is a <code>DATA_T</code>. So the left-hand side should be <code>foo[i].job_data[j].data_p =</code> .</p>\n\n<p>However there is another error. On the right-hand side, <code>*(int *)</code> produces an <code>int</code>, which cannot be stored in a <code>void *</code>.</p>\n\n<p>If you want  to make the two pointers point to the same place then remove the <code>*(int *)</code>.</p>\n\n<p>If both pointers actually point to <code>int</code>s, and you want to copy the pointed-to value on both sides, then put <code>*(int *)</code> on both sides.</p>\n"}], "owner": {"reputation": 18827, "user_id": 432209, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/11f758481a06644e362d90ef6ed672c3?s=128&d=identicon&r=PG", "display_name": "user432209", "link": "https://stackoverflow.com/users/432209/user432209"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 28864390, "answer_count": 2, "score": 0, "last_activity_date": 1425501353, "creation_date": 1425501075, "question_id": 28864303, "link": "https://stackoverflow.com/questions/28864303/assign-value-at-pointer-value-from-void-pointer", "title": "Assign value at pointer value from void pointer", "body": "<p>I have two void pointers inside structures.</p>\n\n<pre><code>typedef struct DATA_T {\n  BOOLEAN trigger;\n  void *var_p;\n  void *data_p;\n} DATA_T;\n\ntypedef struct ITEM_T {\n  DATA_T job_data[100];\n  BOOLEAN job_active;\n  BOOLEAN job_send;\n} ITEM_T;\n\nITEM_T foo[100];\n</code></pre>\n\n<p>I assigned the two void pointers to different addresses.  Now, I have a value at one pointer and want to set the other pointer = to that value.</p>\n\n<pre><code>foo[i].job_data[j]-&gt;data_p = *(int*)foo[i].job_data[j].var_p;\n</code></pre>\n\n<p>This error is then posted:</p>\n\n<pre><code>error C2232: '-&gt;data_p' : left operand has 'struct' type, use '.'\n</code></pre>\n\n<p>I don't believe I want a <code>.</code> in place of the <code>-&gt;</code> here, because I need to dereference the pointer <code>data_p</code>.</p>\n\n<p>Thanks for your assistance.</p>\n"}, {"tags": ["c", "file", "updates"], "comments": [{"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1425500408, "post_id": 28864056, "comment_id": 45993275, "body": "Please provide more information. What is the code supposed to do? What output do you expect? And what output (if any) do you actually get? This kind of context helps readers to help you."}, {"owner": {"reputation": 625, "user_id": 4629688, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7sKBmOdY9lE/AAAAAAAAAAI/AAAAAAAAGJA/3sKnUSX_29M/photo.jpg?sz=128", "display_name": "Beth Crane", "link": "https://stackoverflow.com/users/4629688/beth-crane"}, "edited": false, "score": 0, "creation_date": 1425500458, "post_id": 28864056, "comment_id": 45993308, "body": "I&#39;m not sure about these 2 lines  fread(&amp;se, sizeof(struct passenger), 1, updateR); if (se.seatNo == seat)  It looks like you assume your fread will automatically put the line information into the correct field of the structure (se.seatNo). I&#39;d investigate that first just to check it&#39;s working correctly."}, {"owner": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "reply_to_user": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1425500579, "post_id": 28864056, "comment_id": 45993381, "body": "@honk. I want this to search the record according to seat number and if user wants to update his/her record then he/she can update it easily through seat number"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425500694, "post_id": 28864056, "comment_id": 45993443, "body": "Tell me where you have created and used the variable <b><i>updateR</i></b> please.  Assume it has either file global, or <code>extern</code> scope?  By the way, the statement <code>while (!feof(updateR))</code> is rarely a good way to read a file."}, {"owner": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425500791, "post_id": 28864056, "comment_id": 45993496, "body": "@ryyker.. it is a global File type pointer.."}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 2, "creation_date": 1425500808, "post_id": 28864056, "comment_id": 45993509, "body": "@AmmarBukhari: You should <a href=\"http://stackoverflow.com/posts/28864056/edit\">edit</a> your question in order to improve it instead of providing additional information in the comment section."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1425501214, "post_id": 28864056, "comment_id": 45993758, "body": "<code>sizeof(&amp;e)</code> -&gt; <code>sizeof(struct e)</code>  assuming you are trying to get the size of the struct"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425502545, "post_id": 28864056, "comment_id": 45994510, "body": "The line: <code>fwrite(&amp;e, sizeof(&amp;e), 1, updateR);</code> is attempting to write binary data to a file opened for text.  <i>and</i>, its arguments are not exactly correct.  <i>Is the record binary, or is it text</i>?"}, {"owner": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425502868, "post_id": 28864056, "comment_id": 45994701, "body": "@ryyker - what should I do can you please help me with that?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1425503445, "post_id": 28864056, "comment_id": 45995061, "body": "I&#39;m curious why you called that variable <code>clas</code> rather than <code>class</code>. Could it be that you&#39;re compiling your C code with a C++ compiler (which would treat <code>class</code> as a keyword)? You can do that if you like, but if you&#39;re programming in C you really should use a C compiler."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425508188, "post_id": 28864056, "comment_id": 45997566, "body": "Addressed how you <i>could</i> write and read to to a record, and store information into a struct in an answer below.  (I do not know how your file is formatted, so made some guesses and assumptions.)"}, {"owner": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "edited": false, "score": 0, "creation_date": 1425751532, "post_id": 28864056, "comment_id": 46093979, "body": "Well !! The problem was in the mode of reading/writing the file. I was working with binary file and was not using the binary mode. Anyways thanks guys for the help."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "edited": false, "score": 0, "creation_date": 1425503259, "post_id": 28864232, "comment_id": 45994947, "body": "@AmmarBukhari: <code>SEEK_END</code> is definitely wrong. You&#39;re trying to seek past the end of the file. Probably <code>fseek()</code> is failing, but (and this is very important) you&#39;re not checking whether it succeeded or failed. Read the documentation for <code>fseek</code> to find out how to determine that, and test for it."}], "tags": [], "owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1425500794, "creation_date": 1425500794, "answer_id": 28864232, "question_id": 28864056, "link": "https://stackoverflow.com/questions/28864056/updating-record-in-c-language/28864232#28864232", "title": "Updating Record in C Language", "body": "<p>There's quite some information missing for a full analysis. But at first glance you're seeking from the end of the file. You're using SEEK_END. Normally you should use SEEK_SET.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "edited": false, "score": 0, "creation_date": 1425503108, "post_id": 28864746, "comment_id": 45994851, "body": "@AmmarBukhari: Yes, it probably would -- but the <code>&amp;</code> is still incorrect. <code>scanf</code> with <code>&quot;%s&quot;</code> expects an argument of type <code>char*</code>, which is the type of <code>e.name</code> after the implicit array-to-pointer conversion. <code>&amp;e.name</code> is also a pointer value, and points to the same memory location, but it&#39;s of type <code>char (*)[20]</code> (pointer to array of 20 <code>char</code>s). Strictly speaking, <code>scanf(&quot;%s&quot;, &amp;e.name);</code> has undefined behavior. Some compilers might warn you about this. abelenky: This does not answer the OP&#39;s question; it&#39;s a valid point, but it&#39;s not the cause of the problem. It would be a good comment."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1425503217, "post_id": 28864746, "comment_id": 45994926, "body": "@KeithThompson:  Since OP&#39;s &quot;question&quot; is basically, <i>&quot;When I try this code it doesn&#39;t work at all.&quot;</i>, who is to say this isn&#39;t the problem??   I don&#39;t think he gave enough info about the problem for us to know what we&#39;re supposed to be fixing."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1425503373, "post_id": 28864746, "comment_id": 45995017, "body": "@abelenky: The I suggest that <i>you</i> don&#39;t know enough to post an answer. Given the way pointers and variadic functions are implemented by almost all C compilers, dropping the <code>&amp;</code> will almost certainly not fix the problem."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 0, "last_activity_date": 1425502524, "creation_date": 1425502524, "answer_id": 28864746, "question_id": 28864056, "link": "https://stackoverflow.com/questions/28864056/updating-record-in-c-language/28864746#28864746", "title": "Updating Record in C Language", "body": "<p><code>scanf</code> does NOT need the address-of operator when scanning strings.</p>\n\n<p>So where you have:</p>\n\n<pre><code>scanf(\"%s\", &amp;e.name);\n</code></pre>\n\n<p>You really should have:</p>\n\n<pre><code>scanf(\"%s\", e.name);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "edited": false, "score": 0, "creation_date": 1425752043, "post_id": 28865798, "comment_id": 46094134, "body": "Thank you.. The problem was with opening and writing to binary file. I tried with &quot;wb&quot; and &quot;rb&quot; file mode my code started working. Thanks once again"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1425507686, "last_edit_date": 1425507686, "creation_date": 1425506174, "answer_id": 28865798, "question_id": 28864056, "link": "https://stackoverflow.com/questions/28864056/updating-record-in-c-language/28865798#28865798", "title": "Updating Record in C Language", "body": "<p>You are opening a text file, and writing the contents of a struct *, that may not work the way you intended.  I do not know what your file format is, you have not specified it.\nAssume a comma separated variable formatted file with one record per line.  It could look like this:  </p>\n\n<pre><code>Alaska, Jones, 23, 1, First, 12\nNW, Smith, 12, 1, No, 34\n...  \n</code></pre>\n\n<p><strong><em>Then, the code to write and read</em></strong> from that file could look like this:  </p>\n\n<pre><code>typedef struct passenger\n{\n    char airline[20];\n    char name[20];\n    int age;\n    char gender[2];//note re-definition from your original\n    char clas[10];\n    int seatNo;\n\n}E;\n\nvoid UpdateRecord(char *path, char *record);\nvoid ReadRecord(char *path, E *db, int record);\nint getLines(char *path);\n\nint main(void)\n{\n    FILE *fp = {0};\n    char line[80] = {\"Alaska2, Jones2, 23, M, First, 12\\n\"};\n    E e;\n\n    UpdateRecord(\".\\\\new.dat\", line);\n    ReadRecord(\".\\\\new.dat\", &amp;e, 1); //Get first line\n    ReadRecord(\".\\\\new.dat\", &amp;e, getLines(\".\\\\new.dat\")); //Get last line\n\n    return 0;\n}\nvoid UpdateRecord(char *path, char *record)\n{\n    FILE *fp = fopen(path, \"a\");\n    if(fp)\n    {\n        fputs(record, fp);\n    }\n    fclose(fp);\n}\n\nvoid ReadRecord(char *path, E *db, int record)\n{\n    int i = 0;\n    FILE *fp = fopen(path, \"r\");\n    char line[80];\n    char *buf = {0};\n    while(fgets(line, 80, fp))\n    {\n        if(++i == record)\n        {\n            //get e.airline\n            buf = strtok(line, \" ,\\n\");\n            if(buf) strcpy(db-&gt;airline, buf);\n            //get e.name\n            buf = strtok(NULL, \" ,\\n\");\n            if(buf) strcpy(db-&gt;name, buf);\n            //get e.age\n            buf = strtok(NULL, \" ,\\n\");\n            if(buf) db-&gt;age = atoi(buf);\n            //get e.gender\n            buf = strtok(NULL, \" ,\\n\");\n            if(buf) strcpy(db-&gt;gender, buf);\n            //get e.clas\n            buf = strtok(NULL, \" ,\\n\");\n            if(buf) strcpy(db-&gt;clas, buf);\n            //get e.seatNo\n            buf = strtok(NULL, \" ,\\n\");\n            if(buf) db-&gt;seatNo = atoi(buf); \n        }\n    }\n    fclose(fp);\n}\n\nint getLines(char *path)\n{\n    int lines = 0;\n    char line[80];\n    FILE *fp = fopen(path, \"r\");\n    if(fp)\n    {\n        while(fgets(line, 80, fp))\n        {\n            lines++;\n        }\n        fclose(fp);\n    }\n    return lines;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4463244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002230062126/picture?type=large", "display_name": "Ammar Bukhari", "link": "https://stackoverflow.com/users/4463244/ammar-bukhari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3608, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1425507686, "creation_date": 1425500206, "last_edit_date": 1425501199, "question_id": 28864056, "link": "https://stackoverflow.com/questions/28864056/updating-record-in-c-language", "title": "Updating Record in C Language", "body": "<p>Can somebody help me with this code. When I try this code it doesn't work at all. I've very less experience in working with files in C Language. Please help me to solve this </p>\n\n<p>Here is the structure</p>\n\n<pre><code>struct passenger\n{\n    char airline[20];\n    char name[20];\n    int age;\n    char gender;\n    char clas[10];\n    int seatNo;\n\n}e;\n</code></pre>\n\n<p>Here is the function to insert the record</p>\n\n<pre><code>oid reserve()\n{\n    int airline, clas;\n    printf(\"\\nSelect your flight:\");\n    printf(\"\\n1. PIA\\n2. Shaheen\\n3. Air Blue\\n\\nEnter Choice:\");\n    scanf(\"%d\", &amp;airline);\n    if (airline == 1)\n        strcpy(e.airline, \"\\nPIA\");\n    else if (airline == 2)\n        strcpy(e.airline, \"\\nShaheen\");\n    else if (airline == 3)\n        strcpy(e.airline, \"\\nAirBlue\");\n\n    printf(\"\\nEnter Name:\");\n    scanf(\"%s\", &amp;e.name);\n\n    printf(\"\\nEnter Age:\");\n    scanf(\"%d\", &amp;e.age);\n\n    printf(\"\\nEnter Your Gender (M/F): \");\n    e.gender = getche();\n\n    printf(\"\\n\\nPress 1 for ECONOMY CLASS and 2 for BUSSINESS CLASS: \");\n    scanf(\"%d\", &amp;clas);\n    if (clas == 1)\n        strcpy(e.clas, \"Economy\");\n    else\n        strcpy(e.clas, \"Bussiness\");\n    e.seatNo = rand() % 500;\n    printf(\"\\nYour seat num is: %d\\n\\n\", e.seatNo);\n\n    if (airline==1)\n        save = fopen(\"PIA.DAT\", \"a\");\n    else if (airline==2)\n        save = fopen(\"Shaheen.DAT\", \"a\");\n    else\n        save = fopen(\"AirBlue.DAT\", \"a\");\n    fwrite(&amp;e, sizeof( struct passenger), 1, save);\n    fclose(save);\n\n    getch();\n}\n</code></pre>\n\n<p>and this is for updating the record</p>\n\n<pre><code>void update()\n    int  i = 1, count = 0, clas, record = 0;\n    int seat, airline;\n    struct passenger se;\n    printf(\"\\n\\n\\nSelect your flight:\");\n    printf(\"\\n1. PIA\\n2. Shaheen\\n3. Air Blue\\n\\nEnter Choice:\");\n    scanf(\"%d\", &amp;airline);\n\n    if (airline == 1)\n        updateR = fopen(\"PIA.DAT\", \"r+\");\n    else if (airline == 2)\n        updateR = fopen(\"Shaheen.DAT\", \"r+\");\n    else\n        updateR = fopen(\"AirBlue.DAT\", \"r+\");\n\n    if (updateR == NULL)\n    {\n        printf(\"File not found.\");\n    }\n    else\n    {\n        printf(\"\\nEnter Your Seat No: \");\n        scanf(\"%d\", &amp;seat);\n        while (!feof(updateR))\n        {\n            fread(&amp;se, sizeof(struct passenger), 1, updateR);\n            if (se.seatNo == seat)\n            {\n                printf(\"\\nEnter Name:\");\n                scanf(\"%s\", &amp;e.name);\n\n                printf(\"\\nEnter Age:\");\n                scanf(\"%d\", &amp;e.age);\n\n                printf(\"\\nEnter Your Gender (M/F): \");\n                e.gender = getche();\n\n                printf(\"\\n\\nPress 1 for ECONOMY CLASS and 2 for BUSSINESS CLASS: \");\n                scanf(\"%d\", &amp;clas);\n                if (clas == 1)\n                    strcpy(e.clas, \"Economy\");\n                else\n                    strcpy(e.clas, \"Bussiness\");\n                fseek(updateR,sizeof(struct passenger)* record, SEEK_END);\n                fwrite(&amp;e, sizeof(&amp;e), 1, updateR);\n                break;\n            }\n        }\n        fclose(updateR);\n    }\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c", "sorting"], "comments": [{"owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "edited": false, "score": 0, "creation_date": 1425500238, "post_id": 28863973, "comment_id": 45993174, "body": "You need to actually call the function <code>Sorting</code> from main. Change <code>void Sorting(int *x,int m)</code> to <code>Sorting(x, m);</code>"}, {"owner": {"reputation": 3922, "user_id": 283084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8204842873b2665dbea9c73d30d68b7?s=128&d=identicon&r=PG", "display_name": "harpun", "link": "https://stackoverflow.com/users/283084/harpun"}, "edited": false, "score": 0, "creation_date": 1425500352, "post_id": 28863973, "comment_id": 45993241, "body": "Not only is your program not sorting, but it does not even compile. You could have stated it in you question ;) Calling <code>Sorting(x, SIZE)</code> does the trick."}, {"owner": {"reputation": 3711, "user_id": 745750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff67b821b06f226cec94c3bb1a422fe?s=128&d=identicon&r=PG&f=1", "display_name": "bwegs", "link": "https://stackoverflow.com/users/745750/bwegs"}, "edited": false, "score": 1, "creation_date": 1425500360, "post_id": 28863973, "comment_id": 45993245, "body": "In the future for everyone&#39;s sake I&#39;d recommend using variable names that help identify a variable&#39;s purpose rather than a bunch of ambiguous letters (e.g. instead of a, b, c, d try something like smallest, largest, count, array)."}, {"owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "edited": false, "score": 0, "creation_date": 1425500384, "post_id": 28863973, "comment_id": 45993262, "body": "Unrelated to your question, but to help people read your code, you should use descriptive variable names instead of x, m, n, nn, etc. It makes it hard to interpret. I would also avoid using global variables (<code>int m = SIZE;</code> is a global variable)."}, {"owner": {"reputation": 1, "user_id": 3239991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w1CYz.jpg?s=128&g=1", "display_name": "user3239991", "link": "https://stackoverflow.com/users/3239991/user3239991"}, "edited": false, "score": 0, "creation_date": 1425500436, "post_id": 28863973, "comment_id": 45993297, "body": "I&#39;m using it with gcc and im compiling itt with no errors its just printing out the unsorted array"}, {"owner": {"reputation": 1, "user_id": 3239991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w1CYz.jpg?s=128&g=1", "display_name": "user3239991", "link": "https://stackoverflow.com/users/3239991/user3239991"}, "edited": false, "score": 0, "creation_date": 1425500553, "post_id": 28863973, "comment_id": 45993358, "body": "But thanks to all the answers I was just stuck in my mind i think and did search for the error in the Sorting function and not in the main function"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3239991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w1CYz.jpg?s=128&g=1", "display_name": "user3239991", "link": "https://stackoverflow.com/users/3239991/user3239991"}, "edited": false, "score": 0, "creation_date": 1425500307, "post_id": 28864053, "comment_id": 45993212, "body": "Thank you I was frustrate with not finding my error that i didnt see this mistake"}], "tags": [], "owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1425500198, "creation_date": 1425500198, "answer_id": 28864053, "question_id": 28863973, "link": "https://stackoverflow.com/questions/28863973/bubblesort-not-sorting/28864053#28864053", "title": "Bubblesort not Sorting", "body": "<p>You're not calling the Sorting function in main, you're declaring it.</p>\n"}], "owner": {"reputation": 1, "user_id": 3239991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w1CYz.jpg?s=128&g=1", "display_name": "user3239991", "link": "https://stackoverflow.com/users/3239991/user3239991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1425678723, "accepted_answer_id": 28864053, "answer_count": 1, "score": -1, "last_activity_date": 1425500198, "creation_date": 1425499947, "question_id": 28863973, "link": "https://stackoverflow.com/questions/28863973/bubblesort-not-sorting", "closed_reason": "Not suitable for this site", "title": "Bubblesort not Sorting", "body": "<p>I implemented Bubblesort but the only problem left is that it simply isn't Sorting the Array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define SIZE 50\nint m = SIZE;\nvoid Sorting(int *x ,int m)\n{\n  int n = m;\n  do{\n    int nn = 1;\n    for(int i=0; i &lt;n-1; i++){\n      if(x[i] &gt; x[i+1]){\n        int x1 = x[i+1];\n        x[i+1] = x[i];\n        x[i] = x1;\n        nn = i + 1;\n      }\n    }\n    n = nn;\n  }while(n &gt; 1);\n}\n</code></pre>\n\n<p>I will also give you my test main function if my little error is hidden there.</p>\n\n<pre><code>int main(int argc, const char * argv[])\n{\n  int x[SIZE];\n  for(int i = 0; i &lt; SIZE; i++)\n  {\n    x[i] = rand() % 100;\n  }\n  void Sorting(int *x,int m);\n  for(int i = 0; i &lt; SIZE; i++){\n    printf(\"%d\" , x[i]);\n    printf(\"\\n\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "variables", "runtime"], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1425499869, "post_id": 28863890, "comment_id": 45992968, "body": "what doy you mean by lists ? linked lists"}, {"owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "reply_to_user": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1425500111, "post_id": 28863890, "comment_id": 45993100, "body": "A linked list is one of the many options to implement a list. Pick whatever implementation you know by heart or already have code for. The simplest implementation is to use a fixed size array with a current index. But then the amount of variables is limited and you&#39;re wasting memory."}], "tags": [], "owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1425499692, "creation_date": 1425499692, "answer_id": 28863890, "question_id": 28863822, "link": "https://stackoverflow.com/questions/28863822/how-to-declare-variables-during-run-time-in-c/28863890#28863890", "title": "how to declare variables during run time in c", "body": "<p>You can not declare new variables at runtime in C as such.</p>\n\n<p>For what you want you could make a list of structs for each type you want to support. Each struct then contains the name of the variable and its value. Declaring a variable will add a new struct to the list.</p>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1425506473, "post_id": 28865561, "comment_id": 45996692, "body": "yes thats exactly what I want could you please add little more explanation"}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1425527661, "post_id": 28865561, "comment_id": 46003352, "body": "OK, I&#39;ve added a skeleton answer below for ya.  I&#39;ll try and add some more for you tomorrow (after sleep)."}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 0, "last_activity_date": 1425505285, "creation_date": 1425505285, "answer_id": 28865561, "question_id": 28863822, "link": "https://stackoverflow.com/questions/28863822/how-to-declare-variables-during-run-time-in-c/28865561#28865561", "title": "how to declare variables during run time in c", "body": "<p>I'm assuming you were thinking about an interaction with you calculator that might look something like this:</p>\n\n<pre><code>    &gt; myCalc\n    mc&gt;  x=5\n    mc&gt;  5\n    mc&gt;  3*x\n    mc&gt;  15\n    mc&gt; quit\n    &gt;\n</code></pre>\n\n<p>Where <code>myCalc</code> is the name of your program, and the <code>mc&gt;</code>prompt shows interaction with the calculator, where the use enters a statement and the calculator displays the result of the statement.  </p>\n\n<p>Now, consider the first statement <code>x=5</code>, we need to parse it and determine if it is a valid according to the grammar you are using.  Assuming it is, you then need to evaluate the statement, which for sake of discussion has \nthe abstract syntax tree (AST) <code>ASMT(x,VAL(5))</code>.  ASMT and VAL are notional operators. </p>\n\n<p>Now, I would take this as adding a new binding for x into the current environment.  Exactly how this environment looks depends on what you are willing to allow, so for now lets assume you are just allowing variable assignment.  A simple associative array would work here, where the key is the variable name and the data would be the value. </p>\n\n<p>Now consider the next statement <code>3*x</code>, after parsing we can assume the AST for the expression is <code>TIMES(3, ID(x))</code>.  Now on evaluation of this, or interpreter would first need to handle the <code>ID(x)</code> part which  would be looking up the value of <code>x</code> in the environment, which is 5.</p>\n\n<p>After the above, the AST would look like <code>TIMES(3,5)</code> which would be directly evaluated as 15.</p>\n\n<p>N.B.  I am being fairly loose with what how AST would be represented and how it would be evaluated by the interpreter.  I'm trying to give a flavour of what to do, not full low-level implementation details.  </p>\n\n<p>hope this helps (a bit),\nT</p>\n"}, {"tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": true, "score": 0, "last_activity_date": 1425530687, "creation_date": 1425530687, "answer_id": 28870195, "question_id": 28863822, "link": "https://stackoverflow.com/questions/28863822/how-to-declare-variables-during-run-time-in-c/28870195#28870195", "title": "how to declare variables during run time in c", "body": "<p>OK, you are going to need three basic modules:</p>\n\n<p>N.B. I haven't had the time to actually compile these examples, hopefully I didn't make too many mistakes.</p>\n\n<ol>\n<li>Parser.  This module takes a user entered input, tokenizes it and insures that the entered expression conforms to the grammer.</li>\n<li>Interpreter. This module takes the output of the parser and preforms the computation.</li>\n<li>Environment. This module manages the state of the computation.</li>\n</ol>\n\n<p>Lets start with the environment, here is what we need (or at least what I would implement).  First here are the design considerations the I would use for the environment:</p>\n\n<ol>\n<li>We will only deal with variables</li>\n<li>We will only allow 300 variables</li>\n<li>All variables will have global scope</li>\n<li>Rebinding a variable will overwrite the old binding</li>\n</ol>\n\n<p>Now, lets define the following structure:</p>\n\n<pre><code>typedef struct st\n{\n     char*   tokenName;\n     int     type;\n     union\n     {\n         int      iVal;\n         float    fVal;\n     } val;\n }  tableEntry, * ptableEntry;\n\n tableEntry    symbolTable[300];\n</code></pre>\n\n<p>and now for some functions:</p>\n\n<p>a. init(tableEntry*) -- this function initialized the environment, i.e. sets all values in the symbol table to some, predefined empty state.</p>\n\n<p>b. addValue(tableEntry*, name, value) -- this function takes a pointer to the environment and adds a new entry to the environment.</p>\n\n<p>c. int lookupValue(tableEntry*, name) -- this function takes a pointer to the environment and sees if the token name has been defined in it.  Already, we see a problem, we are allowing for both integers and floating point numbers but would like a single lookup functions, so we probably need some sort of variant type or figure out some way to return different types.</p>\n\n<p>d. updateValue(tableEntry*, name, value) -- this function takes a pointer to the environment and updates an existing value.  This raises an unaddressed specification, what should updateValue do if the token is not found?  Personally I would just add the value, but it up to you as the designer of the calculator on what to do.</p>\n\n<p>This should do for a start for the environment.</p>\n\n<p>Now lets turn to the interpreter for a bit.  For this let suppose that the parser emits the abstract syntax tree in prefix form.  For example:</p>\n\n<p>the statement x=3 would be emitted as <code>= x 3</code>\nthe statement z = 4 + 5 would be emitted as <code>= z + 4 5</code></p>\n\n<p>OK, the trick here is we don't really emit <code>3</code>, but rather a token that contains more information about what is being passed around.  </p>\n\n<p>A possible implementation of a token might be:</p>\n\n<pre><code>typedef struct tok\n{\n    int tokType;\n    char* tokVal;\n} token, * ptoken;\n</code></pre>\n\n<p>Also lets have the following enumeration:</p>\n\n<pre><code>enum {EMPTY=0, ID, VAL, EQ, PLUS, SUB, MULT, DIV, LPAREN, RPAREN};\n</code></pre>\n\n<p>so, with this the simplified statement <code>= x 3</code>, would actually be the following \nstructures:</p>\n\n<pre><code>{EQ, null} {ID, \"x\"} {VAL, \"3\"}\n</code></pre>\n\n<p>OK, so the interpreter in pseudo-code would look like (assuming that the above is presented to the interpreter as a list).  </p>\n\n<pre><code>  while list not empty\n  token &lt;-- head(list)   /* this returns the first token as well as removing it from the list */\n  switch (token.tokType)\n  {\n       ....\n\n       case EQ:         /* handling assignment */\n         token &lt;--- head(list)\n         name = token.name\n\n         token &lt;--- head(list)\n         val = atoi(token.tokVal)\n\n         addValue(env*, name, val);\n\n         break;\n\n      case ID:\n         name = token.name\n\n         val = lookupValue(env*, name)\n\n      ....\n  }\n</code></pre>\n\n<p>Please, be advise that the actual format of the above code will in all probability need to be modified to deal with other constructs, it is just a notional example!</p>\n\n<p>Now it's your turn -- take a stab and show us what you've come up with.</p>\n\n<p>Later \nT.</p>\n"}], "owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2296, "favorite_count": 0, "accepted_answer_id": 28870195, "answer_count": 3, "score": -2, "last_activity_date": 1425530687, "creation_date": 1425499457, "question_id": 28863822, "link": "https://stackoverflow.com/questions/28863822/how-to-declare-variables-during-run-time-in-c", "title": "how to declare variables during run time in c", "body": "<p>I am about to start a project of something like simple calculator completely in c and I was wondering how would I allow the user to create variables during the run time of the program, this variable could be a number or complex number or even a matrix or a \none approach was to store the type of the variable, its name and its size and value in a temporary text file and retrieve it whenever needed, is there any better approach. I hope if I could declare real variables during runtime in c </p>\n"}, {"tags": ["c", "loops", "performance"], "comments": [{"owner": {"reputation": 936, "user_id": 2727470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a76EI.jpg?s=128&g=1", "display_name": "Ixrec", "link": "https://stackoverflow.com/users/2727470/ixrec"}, "edited": false, "score": 3, "creation_date": 1425499050, "post_id": 28943652, "comment_id": 46141336, "body": "This seems more appropriate for SO, since it&#39;s about the technical details of a specific set of functions in a particular environment."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1425501553, "post_id": 28943652, "comment_id": 46141337, "body": "I&#39;m voting to close this question as off-topic because it&#39;s not a conceptual question on software development as defined in the <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>."}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1425909056, "question_id": 275255}, "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425909056, "creation_date": 1425498841, "question_id": 28943652, "link": "https://stackoverflow.com/questions/28943652/escaping-a-complete-packet-read-in-apache-module", "title": "escaping a complete packet read in apache module", "body": "<p>According to this site:</p>\n\n<pre><code>http://pedrowa.weba.sk/docs/ApiDoc/apidoc_ap_get_client_block.html\n</code></pre>\n\n<p>This function:</p>\n\n<pre><code>ap_get_client_block(request_rec *r, char *buffer, int bufsiz);\n</code></pre>\n\n<p>Reads a chunk of POST data coming in from the network when a user requests a webpage.</p>\n\n<p>So far, I have the following core code that reads the data:</p>\n\n<pre><code>      while (len_read &gt; 0){\n                len_read=ap_get_client_block(r,argsbuffer,length);\n                if((rpos+len_read) &gt; length){rsize=length-rpos;}else{rsize=len_read;}\n                memcpy((char*)*rbuf+rpos,(char*)argsbuffer,(size_t)rsize);rpos+=rsize;\n      }\n</code></pre>\n\n<p>argsbuffer is a character array of length bytes and rbuf is a valid pointer, and the rest of the variables are apr_off_t data type.</p>\n\n<p>If I changed this code to this:</p>\n\n<pre><code>      while (len_read &gt; 0){\n                len_read=ap_get_client_block(r,argsbuffer,length);\n                if((rpos+len_read) &gt; length){rsize=length-rpos;}else{rsize=len_read;}\n                memcpy((char*)*rbuf+rpos,(char*)argsbuffer,(size_t)rsize);rpos+=rsize;\n          if (rpos &gt; wantedlength){len_read=0;}\n      }\n</code></pre>\n\n<p>would I be able to close the stream some way and maintain processing speed without corrupt data coming in?</p>\n\n<p>I already executed ap_setup_client_block(r, REQUEST_CHUNKED_ERROR) and made sure ap_should_client_block(r) returned true before processing the first code above. so that is like in a sense, opening a file.  ap_get_client_block(r,argsbuffer,length). is like reading a file. Now what about an some ap_ command equivalent to close?</p>\n\n<p>What I want to avoid is corrupt data.</p>\n\n<p>The data that is incoming is in various sizes and I only want to attempt to capture a certain piece of data without having a loop go through the entire set of data every time. Thats why I posted this question.</p>\n\n<p>For example: If I wanted to look for \"A=123\" as the input data within the first fixed 15 bytes and the first set of data is something like:</p>\n\n<pre><code>S=1&amp;T=2&amp;U=35238952958&amp;V=3468348634683963869&amp;W=fjfdslhjsdflhjsldjhsljsdlkj\n</code></pre>\n\n<p>Then I want the program to examine only:</p>\n\n<pre><code>S=1&amp;T=2&amp;U=35238\n</code></pre>\n\n<p>I'd be tempted using the second block of code. The first block of code works but goes through everything.</p>\n\n<p>Anyone have any idea? I want this to execute on a live server as I am improving a security detection system. If anyone knows any other functionality that I should add or remove to my code, let me know. I want to optimize for speed.</p>\n"}, {"tags": ["c", "while-loop"], "answers": [{"tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": false, "score": 5, "last_activity_date": 1425498610, "creation_date": 1425498610, "answer_id": 28863548, "question_id": 28863514, "link": "https://stackoverflow.com/questions/28863514/wondering-about-while-loop/28863548#28863548", "title": "Wondering about while loop", "body": "<p>If you put <code>sum=0</code> inside the <code>while</code> loop it will be called each time the while loop loops.</p>\n\n<p>This means when you reach <code>sum=sum+num</code>, you will actually be calculating <code>sum=0+num</code>.</p>\n\n<p>You have two use two <code>getchar()</code> calls because the first one is sucking up an additional character that was not absorbed by your <code>scanf</code>. Probably this character is a newline, so you cannot see it. The second <code>getchar()</code> then keeps your terminal open because it is waiting for a character.</p>\n\n<p>To figure out if my hypothesis is correct about the first <code>getchar()</code> you could try this:</p>\n\n<pre><code>char temp = getchar();\nprintf(\"%d\",(int)temp); //Print out the character number from the first getchar\ngetchar(); //This keeps the window open\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1425498722, "creation_date": 1425498722, "answer_id": 28863588, "question_id": 28863514, "link": "https://stackoverflow.com/questions/28863514/wondering-about-while-loop/28863588#28863588", "title": "Wondering about while loop", "body": "<blockquote>\n  <p>If I use it after the <code>while</code> it gives me the number I entered as the result.</p>\n</blockquote>\n\n<p>This is because when you do this</p>\n\n<pre><code>while (num &gt; 0) {\n    sum = 0;\n    ...\n    sum = sum + num;\n}\n</code></pre>\n\n<p>the value that has been accumulated by <code>sum</code> on prior iterations of the <code>while</code> loop gets erased each time the loop iterates, meaning that only the last value would be added to <code>sum</code> (and kept as the result of the additions).</p>\n\n<blockquote>\n  <p>why do I need to use 2 <code>getchar();</code></p>\n</blockquote>\n\n<p>Because when <code>scanf</code> consumes the last number the end-user has entered, it reads everything up to, but not including, the <code>'\\n'</code> character, which corresponds to the <kbd>Enter</kbd> key. This <code>'\\n'</code> character remains in the buffer, waiting to be consumed by your program. The first call of <code>getchar()</code> consumes that \"lingering\" <code>'\\n'</code>, while the second one makes your program stay on screen until you press enter again.</p>\n"}, {"tags": [], "owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "is_accepted": false, "score": 1, "last_activity_date": 1425498809, "creation_date": 1425498809, "answer_id": 28863615, "question_id": 28863514, "link": "https://stackoverflow.com/questions/28863514/wondering-about-while-loop/28863615#28863615", "title": "Wondering about while loop", "body": "<p><code>=</code> in most programming languages is different from the mathematical <code>=</code>. It does not mean that the two sides will permanently be equal to each other; rather, it means that the right-hand side should be computed and that the result should be <em>assigned</em> to the variable on the left-hand side. Later, another line might change the variable value to something else.</p>\n\n<p>Thus, <code>sum = sum + num;</code> means that the current values of <code>sum</code> and and <code>num</code> are to be added, and the result is to be put back into <code>sum</code>. In order for this to work the way you wish, <code>sum</code> must be 0 the first time this line is executed; hence, you need <code>sum = 0;</code> somewhere. However, if this line is inside the loop, it is repeatedly executed, so that the result of the previous summation disappears and is replaced with <code>0</code> before each new number.</p>\n"}], "owner": {"reputation": 13, "user_id": 3740278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4rZL.jpg?s=128&g=1", "display_name": "O.Kaan", "link": "https://stackoverflow.com/users/3740278/o-kaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 28863588, "answer_count": 3, "score": 1, "last_activity_date": 1425498860, "creation_date": 1425498447, "last_edit_date": 1425498860, "question_id": 28863514, "link": "https://stackoverflow.com/questions/28863514/wondering-about-while-loop", "title": "Wondering about while loop", "body": "<p>I started learning C 3 weeks ago, and while learning <em>while loops</em> I tried to build an addition program, basically you keep adding numbers it additions them and after 2nd number it gives you a subtotal for every addition, and if you press 0 to quit It gives you a final sum then quits.\nNow I have one main, one additional question. The main question is, I had to use <code>sum = 0</code> before the while functions, if I use it after \"the while\" it gives me the number I entered as the result. Now I really wonder what is the idea behind it. When I write it like below does it equates \"sum with 0\"\nfor the start and changes the value as I enter another number, or there is some other idea behind it. </p>\n\n<p>And the additional question is , why do I need to use 2 <code>getchar();</code> to make my program stay on the screen, why not one?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n    float num;\n    float sum;\n    printf(\" please enter a number +0 to start the program (0 to quit): \\n\");\n    scanf(\" %f\", &amp;num);\n\n    sum =0; //THIS HERE**********************\n\n    while (num  &gt; 0)\n    {   \n        printf(\"please enter integer:\\n\");\n        scanf(\"%f\", &amp;num);\n        sum = sum + num;\n        printf(\"current sum is = %f\\n\", sum);\n    }\n    printf(\"final sum is = %f\\n\", sum);\n    getchar();\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "newlib"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425500411, "post_id": 28863432, "comment_id": 45993278, "body": "It appears the first time <code>sbrk()</code> is called, the argument passed has either <i>not</i> been initialized (and contains a randomly large value, or intentionally passed as a very large value.  Is this something you have checked, or have I got it wrong."}, {"owner": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425516485, "post_id": 28863432, "comment_id": 46000496, "body": "Ryyker, I agree with your assessment but, I do not have JTAG support on this platform yet so confirming this is not trivial.  I was hoping this was some nuance of newlib.  I have created a init code that verifies the data relocation and bss zero&#39;ing.  I guess next step is to try for a routine to parse the call stack from _sbrk..."}], "answers": [{"tags": [], "owner": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "is_accepted": true, "score": 0, "last_activity_date": 1425937397, "creation_date": 1425937397, "answer_id": 28952317, "question_id": 28863432, "link": "https://stackoverflow.com/questions/28863432/newlib-fails-to-allocate-heap-on-first-call-in-arm-embedded-system/28952317#28952317", "title": "Newlib fails to allocate heap on first call in ARM embedded system", "body": "<p>It appears that some variables may have been improperly initialized.  I have updated my linker script as follows:</p>\n\n<pre><code>SECTIONS\n{\n    . = ORIGIN(SRAM_L);\n\n    .vectors :\n    {\n        KEEP(*o(.vectors_))\n    } &gt;SRAM_L\n\n    .text :\n    {\n        . = ALIGN(4);\n        _start_text = .;\n        *(.text)\n        *(.text*)\n        *(.rodata)\n        *(.rodata*)\n        _end_text = .;\n    } &gt;SRAM_L\n\n        .ARM.extab :\n        {\n                *(.ARM.extab* .gnu.linkonce.armextab.*)\n        } &gt; SRAM_L\n\n        __exidx_start = .;\n        .ARM.exidx :\n        {\n                *(.ARM.exidx* .gnu.linkonce.armexidx.*)\n        } &gt; SRAM_L\n        __exidx_end = .;\n\n    _end_text = .;\n\n    . = . ;\n    _datai = . ;\n    .data :\n    {\n        . = ALIGN (4);\n        _data = . ; \n        *(.data)\n        *(.data*)\n        . = ALIGN (4);\n        _edata = . ;\n    } &gt;SRAM_U AT &gt;SRAM_L\n\n    .data_init : \n    {\n        _edatai = .;\n    } &gt;SRAM_L\n\n    .bss :\n    {\n        . = ALIGN (4);\n        _bss = . ; \n        *(.bss) \n        *(.bss*) \n        *(COMMON)\n        . = ALIGN(4);\n        _ebss = . ;\n    } &gt;SRAM_U\n\n    . = ALIGN (4);\n    . += 8;\n\n    free_memory_start = .;\n    _end_of_stack = .;\n    PROVIDE(end = .);\n    _start_of_heap = .;\n    . = 0x20007000;\n    _start_of_stack = .;\n    _end_of_heap = .;\n\n}\n</code></pre>\n\n<p>Thanks to <a href=\"http://sushihangover.github.io/arm-cortex-m3-bare-metal-with-newlib/\" rel=\"nofollow\">sushihangover</a> blog post.</p>\n"}, {"comments": [{"owner": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "edited": false, "score": 0, "creation_date": 1431617559, "post_id": 30231931, "comment_id": 48583895, "body": "sbrk can be given a negative value to decrease heap pointer. Maybe your .text was now fully initialized (see previous post)?"}, {"owner": {"reputation": 1, "user_id": 4898585, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j4GTY_8Lls/AAAAAAAAAAI/AAAAAAAAAEo/-SFaCMDVous/photo.jpg?sz=128", "display_name": "Blacksheep", "link": "https://stackoverflow.com/users/4898585/blacksheep"}, "reply_to_user": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "edited": false, "score": 0, "creation_date": 1431711575, "post_id": 30231931, "comment_id": 48631244, "body": "Thanks Devan, I just noticed the &#39;free_memory_start&#39; parameter in the linker script which my linker script doesn&#39;t have. I&#39;ll give that a try on Monday and let you know if it makes any difference, for now everything seems to be working with the changes I made to sbrk."}, {"owner": {"reputation": 1, "user_id": 4898585, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j4GTY_8Lls/AAAAAAAAAAI/AAAAAAAAAEo/-SFaCMDVous/photo.jpg?sz=128", "display_name": "Blacksheep", "link": "https://stackoverflow.com/users/4898585/blacksheep"}, "reply_to_user": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "edited": false, "score": 0, "creation_date": 1432046579, "post_id": 30231931, "comment_id": 48752352, "body": "Hi Devan, looks like it is the &quot;free_memory_start&quot; parameter in the linker script which malloc is looking for. thanks again for the help."}, {"owner": {"reputation": 1, "user_id": 4898585, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j4GTY_8Lls/AAAAAAAAAAI/AAAAAAAAAEo/-SFaCMDVous/photo.jpg?sz=128", "display_name": "Blacksheep", "link": "https://stackoverflow.com/users/4898585/blacksheep"}, "reply_to_user": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "edited": false, "score": 0, "creation_date": 1432203691, "post_id": 30231931, "comment_id": 48831940, "body": "Me again,  I had an incorrect understanding of the <i>(COMMON) statement in the linker file. My linker file needed a *(.bss</i>) when it only had *(.bss). The &quot;free_memory_start&quot; parameter is not necessary."}, {"owner": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "edited": false, "score": 0, "creation_date": 1432302512, "post_id": 30231931, "comment_id": 48884559, "body": "I had to learn the same way.  Without defining the .data and .bss properly the first calls to sbrk will throw you off in the weeds because the initial call will be garbage length."}], "tags": [], "owner": {"reputation": 1, "user_id": 4898585, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j4GTY_8Lls/AAAAAAAAAAI/AAAAAAAAAEo/-SFaCMDVous/photo.jpg?sz=128", "display_name": "Blacksheep", "link": "https://stackoverflow.com/users/4898585/blacksheep"}, "is_accepted": false, "score": -1, "last_activity_date": 1431589263, "creation_date": 1431589263, "answer_id": 30231931, "question_id": 28863432, "link": "https://stackoverflow.com/questions/28863432/newlib-fails-to-allocate-heap-on-first-call-in-arm-embedded-system/30231931#30231931", "title": "Newlib fails to allocate heap on first call in ARM embedded system", "body": "<p>I have had problems with GNU Tools ARM Embedded arm-none-eabi 4.9 2015q1 and an _sbrk that worked well with CodeSourcery's arm-none-eabi 4.5.2. I thought I would try a newer version.</p>\n\n<p>I then went and tried it with 4.7 2013q1 and 4.8 2014q1, the mallocs also give the negative value for the initial request to sbrk.</p>\n\n<p>I had to adjust my _sbrk to ignore negative values in order for it to work properly with both versions of the compiler. please correct me if I'm wrong but I understand that _sbrk should not be called with negative values but only the re-entrant version _sbrk_r (For OSes) should work with negatives.</p>\n\n<p>Here is my implementation, if anyone is interested</p>\n\n<pre><code>extern char __heap_start__; // defined by the linker script\nextern char __heap_end__;   // defined by the linker script\nunsigned char * HeapSize;\n\nunsigned char * _sbrk ( int incr )\n{\n  unsigned char *prev_heap;\n\n  if (HeapSize == 0)\n    HeapSize = (unsigned char *)&amp;__heap_start__; // initialize the Heap to the start\n\n  prev_heap = HeapSize; // store the start of this block of memmory\n\n  if(incr &gt; 0)\n  { // only allow increments to the heap allocation\n\n    // check that we don't run out of memory\n    // could try using the stack pointer to maximise memmory use\n    if(((unsigned long)HeapSize + incr) &gt;= (unsigned long)&amp;__heap_end__)\n      return (unsigned char *) -1; // out of memmory\n\n    HeapSize += incr; // increase the heap\n  }\n\n  return prev_heap; // return the start of the next block of memory\n}\n</code></pre>\n"}], "owner": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1672, "favorite_count": 0, "accepted_answer_id": 28952317, "answer_count": 2, "score": 2, "last_activity_date": 1431589263, "creation_date": 1425498165, "question_id": 28863432, "link": "https://stackoverflow.com/questions/28863432/newlib-fails-to-allocate-heap-on-first-call-in-arm-embedded-system", "title": "Newlib fails to allocate heap on first call in ARM embedded system", "body": "<p>I am using gcc-arm-none-eabi 4.9 2014q4 to write a bare-metal application for the Cortex-M4.  When the application loads the first call to <code>_sbrk</code> appears to be invalid.</p>\n\n<p>I have implemented <code>_sbrk</code> as follows:</p>\n\n<pre><code>extern unsigned int _start_of_heap;\nextern unsigned int _end_of_heap;\ncaddr_t heap = (caddr_t)&amp;_start_of_heap;\n\n#include \"hardware/uart.h\"\n\n// low level bulk memory allocator - used by malloc\ncaddr_t _sbrk ( int increment ) {\n\n    caddr_t prevHeap;\n    caddr_t nextHeap;\n\n    send_str(\"_sbrk(\");\n    send_dec(increment);\n    send_str(\")\\n\");\n\n    prevHeap = heap;\n\n    // Always return data aligned on a 8 byte boundary\n    nextHeap = (caddr_t)(((unsigned int)(heap + increment) + 7) &amp; ~7);\n\n    // get current stack pointer\n    register caddr_t stackPtr asm (\"sp\");\n\n    send_str(\"\\tstackPtr(\");\n    send_hex((uint32_t)stackPtr);\n    send_str(\")\\n\");\n    send_str(\"\\tprevHeap(\");\n    send_hex((uint32_t)prevHeap);\n    send_str(\")\\n\");\n\n    // Check enough space and there is no collision with stack coming the other way\n    // if stack is above start of heap\n    if((nextHeap &lt; stackPtr) &amp;&amp; (nextHeap &gt;= (caddr_t)&amp;_start_of_heap) &amp;&amp; (nextHeap &lt; (caddr_t)&amp;_end_of_heap)) {\n        heap = nextHeap;\n        return (caddr_t) prevHeap;\n    }\n    send_str(\"*\\n\");\n    return NULL; // error - no more memory\n}\n</code></pre>\n\n<p>Linker defines the heap limits as follows:</p>\n\n<pre><code>MEMORY\n{\n    SRAM_L (rwx) : ORIGIN = 0x00000000, LENGTH = 32K\n    SRAM_U (rwx) : ORIGIN = 0x20000000, LENGTH = 32K\n}\n\nSECTIONS\n{\n    .vectors 0x00000000 :\n    {\n        *o(.vectors_)\n    } &gt;SRAM_L\n\n    .text :\n    {\n        . = ALIGN (4);\n        *(.text);\n    } &gt;SRAM_L\n\n    . = . ;\n    _datai = . ;\n    .data :\n    {\n        . = ALIGN (4);\n        _data = . ; *(.data .data.*); _edata = . ;\n    } &gt;SRAM_U AT &gt;SRAM_L\n\n    .data_init : \n    {\n        _edatai = .;\n    } &gt;SRAM_L\n\n    .bss :\n    {\n        . = ALIGN (4);\n        _bss = . ; *(.bss) *(COMMON); _ebss = . ;\n    } &gt;SRAM_U\n\n    . = ALIGN (4);\n    . += 8;\n\n    free_memory_start = .;\n    _end_of_stack = .;\n    end = .;\n    _start_of_heap = .;\n    . = 0x20007000;\n    _start_of_stack = .;\n    _end_of_heap = .;\n\n}\n</code></pre>\n\n<p>The program code runs a quick stack and heap test:</p>\n\n<pre><code>extern unsigned int _start_of_heap;\nextern unsigned int _end_of_heap;\nextern caddr_t heap;\n\nvoid foo(uint8_t i)\n{\n    unsigned long blah = 0;\n    unsigned long * halb;\n    halb = malloc(sizeof(unsigned long));\n    iprintf(\"blah(%08x) halb(%08x) heap(%08x)\\n\", &amp;blah, halb, heap);\n\n    if(i)\n        foo(i - 1);\n\n    free(halb);\n\n}\n\nint main(int argc, char ** argv)\n{\n    init_uart((void*)UART2_IPS_BASE_ADDR, 115200);\n\n    iprintf(\"Heap test (%08x - %08x)\\n\", &amp;_start_of_heap, &amp;_end_of_heap);\n    foo(10);\n    return 0;\n\n}\n</code></pre>\n\n<p>The following output is produced:</p>\n\n<pre><code>_sbrk(1040965006)             &lt;----- Note large size\n        stackPtr(20006E18)\n        prevHeap(2000089C)\n*                             &lt;----- '*' indicates out of range\n_sbrk(626)\n        stackPtr(20006E18)\n        prevHeap(2000089C)\nHeap test (2000089c - 20007000)\nblah(20006fb8) halb(00000410) heap(20000b10)\nblah(20006fa0) halb(00000420) heap(20000b10)\nblah(20006f88) halb(00000430) heap(20000b10)\nblah(20006f70) halb(00000440) heap(20000b10)\nblah(20006f58) halb(00000450) heap(20000b10)\nblah(20006f40) halb(00000460) heap(20000b10)\nblah(20006f28) halb(00000470) heap(20000b10)\nblah(20006f10) halb(00000480) heap(20000b10)\nblah(20006ef8) halb(00000490) heap(20000b10)\nblah(20006ee0) halb(000004a0) heap(20000b10)\nblah(20006ec8) halb(000004b0) heap(20000b10)\n</code></pre>\n\n<p>The first allocation is for 1040965006 bytes, this seems incorrect and it fails.  After this i assume <code>malloc</code> proceeds to allocate 626 bytes.  Every subsequent call to <code>malloc</code> for <code>halb</code> appears to return an address that is outside of the range of my stack.  Does this first call look like an error, or should it be ignored and if so, what's up with the addresses returned by <code>malloc</code>?</p>\n\n<p>Thanks,\nDevan</p>\n"}, {"tags": ["c", "switch-statement", "arguments", "getopt"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1425498203, "post_id": 28863409, "comment_id": 45992017, "body": "Your <code>switch</code> statement is missing the <code>break</code> at the end of each <code>case</code>."}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 1, "creation_date": 1425498303, "post_id": 28863409, "comment_id": 45992085, "body": "Also, your option string should be <code>&quot;p:r:&quot;</code>, not <code>&quot;pr:&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 2205736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4e9378a52fdab1b3f8f3a3cd5f4ae66?s=128&d=identicon&r=PG", "display_name": "Rostro", "link": "https://stackoverflow.com/users/2205736/rostro"}, "edited": false, "score": 0, "creation_date": 1425498680, "post_id": 28863465, "comment_id": 45992274, "body": "@irrrgg I included the breaks as well changed the option string to <code>p:r</code>  it still does not recognize <code>rootdir</code> though. Am I missing something?"}], "tags": [], "owner": {"reputation": 11, "user_id": 3517275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847a25d26024914afec56e1c20fcb5a6?s=128&d=identicon&r=PG", "display_name": "lrrrgg", "link": "https://stackoverflow.com/users/3517275/lrrrgg"}, "is_accepted": false, "score": 1, "last_activity_date": 1425498272, "creation_date": 1425498272, "answer_id": 28863465, "question_id": 28863409, "link": "https://stackoverflow.com/questions/28863409/using-getopt-and-switch-statements-in-c/28863465#28863465", "title": "Using getopt() and switch statements in C", "body": "<p>I believe you want to use <code>break</code> at the end of each case, else execution falls through to the next case block.</p>\n"}, {"tags": [], "owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "is_accepted": false, "score": 1, "last_activity_date": 1425498286, "creation_date": 1425498286, "answer_id": 28863471, "question_id": 28863409, "link": "https://stackoverflow.com/questions/28863409/using-getopt-and-switch-statements-in-c/28863471#28863471", "title": "Using getopt() and switch statements in C", "body": "<p>A C switch statement requires a <code>break</code> at the end of each case, otherwise the code in the following case is executed. So this:</p>\n\n<pre><code>switch (next_option)\n{\ncase 'p':                      /* -p -- port option */\n    puts(\"p\");\n\n    port = optarg;\n    printf(\"%s\", port);\ncase 'r':                      // -r -- root directory option\n    puts(\"r\");\n    rootdir = optarg;\n    printf(\"%s\", rootdir);\ndefault:\n    puts(\"unknown\");\n    /* Unknown option detected. Print it to standard output, and exit with exit code zero\n       (normal termination). */\n    fprintf(stderr, USAGE_STRING);\n    exit(1);\n}\n</code></pre>\n\n<p>Must be changed to this:</p>\n\n<pre><code>switch (next_option)\n{\ncase 'p':                      /* -p -- port option */\n    puts(\"p\");\n\n    port = optarg;\n    printf(\"%s\", port);\n    break;\ncase 'r':                      // -r -- root directory option\n    puts(\"r\");\n    rootdir = optarg;\n    printf(\"%s\", rootdir);\n    break;\ndefault:\n    puts(\"unknown\");\n    /* Unknown option detected. Print it to standard output, and exit with exit code zero\n       (normal termination). */\n    fprintf(stderr, USAGE_STRING);\n    exit(1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 2205736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4e9378a52fdab1b3f8f3a3cd5f4ae66?s=128&d=identicon&r=PG", "display_name": "Rostro", "link": "https://stackoverflow.com/users/2205736/rostro"}, "edited": false, "score": 0, "creation_date": 1425521893, "post_id": 28863682, "comment_id": 46002022, "body": "This throws this error for eacher { in th struct initialization.   warning: <code>initialization makes pointer from integer without a cast [enabled by default]      { &quot;port&quot;, 0, required_argument, &#39;p&#39; },</code>      ^"}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "reply_to_user": {"reputation": 133, "user_id": 2205736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4e9378a52fdab1b3f8f3a3cd5f4ae66?s=128&d=identicon&r=PG", "display_name": "Rostro", "link": "https://stackoverflow.com/users/2205736/rostro"}, "edited": false, "score": 0, "creation_date": 1425570669, "post_id": 28863682, "comment_id": 46025313, "body": "Sorry, I tried to write it from memory and made some silly errors, but try it now."}], "tags": [], "owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "is_accepted": true, "score": 0, "last_activity_date": 1425570414, "last_edit_date": 1425570414, "creation_date": 1425499058, "answer_id": 28863682, "question_id": 28863409, "link": "https://stackoverflow.com/questions/28863409/using-getopt-and-switch-statements-in-c/28863682#28863682", "title": "Using getopt() and switch statements in C", "body": "<p>First you should be using <code>getopt_long()</code> I believe <code>getopt()</code> is depreciated. You are also missing <code>break</code> in your switch statement. With out break each case beneath that one will be executed. While you could use a do-while loop it's simpler to just use a while loop.</p>\n\n<p>Here's a simple command line parser you can build on.</p>\n\n<pre><code>static const char *optstring = \"p:r:\";\n\nstatic struct option longopts[] =\n{\n    { \"port\", required_argument, NULL, 'p' },\n    { \"root\", required_argument, NULL, 'r' },\n    { NULL, 0, NULL, 0 }\n};\n\nint parseInput(int argc, char * const argv[])\n{\n    int ch;\n\n    /* Main Loop ie the Parser */\n    while ((ch = getopt_long(argc, argv, optstring, longopts, NULL)) != -1)\n    {\n        switch(ch)\n        {\n            case 'p':\n                printf(\"arg: %s\\n\", optarg);\n                break;\n\n            case 'r':\n                printf(\"arg: %s\\n\", optarg);\n                break;\n\n            default:\n                printf(\"Unsupported option\\n\");\n                return -1;\n        }\n   }\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 2205736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4e9378a52fdab1b3f8f3a3cd5f4ae66?s=128&d=identicon&r=PG", "display_name": "Rostro", "link": "https://stackoverflow.com/users/2205736/rostro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 1, "accepted_answer_id": 28863682, "answer_count": 3, "score": 0, "last_activity_date": 1425570414, "creation_date": 1425498094, "question_id": 28863409, "link": "https://stackoverflow.com/questions/28863409/using-getopt-and-switch-statements-in-c", "title": "Using getopt() and switch statements in C", "body": "<p>I'm new to C and trying to use getopt combined with a switch statement. I think my problem is just a syntax one but I can't seem to figure it out. I need to run my program like this :\n<code>$/webserver -p 8080 -r /my/root/dir</code>.\nSo I need to recognize the -p and get the 8080 and the recognize the -r and get the /my/root/dir. Currently my code finds the -p and then finds the -r  and then detects an unknown option and exits. Here is the code. I have the <code>puts()</code> in there for testing.</p>\n\n<pre><code>   #define USAGE_STRING \"Usage: webserver -p &lt;port&gt; -r  &lt;rootdir&gt;\\n\"\nchar *port;\nchar *rootdir;\n// Process command line arguments. Uses GNU getopt() function.\nvoid processargs(int argc, char **argv) {\n  int next_option;\n  do {\n    next_option = getopt(argc, argv, \"pr:\");\n    if (next_option != -1) {\n      switch (next_option)\n      {\n        case 'p': /* -p -- port option  */\n          puts(\"p\");\n\n          port = optarg;\n         printf(\"%s\", port);\n        case 'r': // -r -- root directory option\n          puts(\"r\");\n          rootdir = optarg;  \n        printf(\"%s\", rootdir);\n        default:\n             puts(\"unknown\");\n          /* Unknown option detected. Print it to standard\n                output, and exit with exit code zero (normal termination). */\n          fprintf(stderr, USAGE_STRING);\n          exit(1);\n\n      }\n    }\n  } while (next_option != -1);\n  printf(\"%s\", port);\n\n  if (port == NULL) {\n\n          fprintf(stderr, USAGE_STRING);\n          exit(1);\n    }\n  if (rootdir == NULL) {\n  puts(\"unknown\");\n          fprintf(stderr, USAGE_STRING);\n          exit(1);\n    }\n\n\n}\n</code></pre>\n\n<p>Currently when I run the above command I get this output (using the puts for testing). </p>\n\n<pre><code>p\nr\nunknown\nUsage: webserver -p &lt;port&gt; -r  &lt;rootdir&gt;\n</code></pre>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c++", "c", "casting"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425498221, "post_id": 28863381, "comment_id": 45992031, "body": "Why would you use <code>malloc</code> in c++? It has a nice <code>new</code> keyword."}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 5, "last_activity_date": 1425498998, "last_edit_date": 1425498998, "creation_date": 1425498231, "answer_id": 28863454, "question_id": 28863381, "link": "https://stackoverflow.com/questions/28863381/cast-result-of-malloc-in-c-library/28863454#28863454", "title": "Cast result of malloc in c library", "body": "<p>No. If it's C code, it should be compiled as C, not as C++, and thus the compiler will allow the implicit cast from <code>void*</code> to some other pointer. </p>\n\n<p>It is only when <code>malloc</code> is used in C++ code that you need to cast it - and it's in my view a \"bad smell\" - in other words, a sign that the code should be modernized to use <code>new</code> or <code>vector</code> or something along those lines. (Of course, there are valid reasons for doing this - for example, you could have some 10k lines of useful code, that you need to plumb into a C++ framework for something else - but typically, the best approach then is to write some C++ bindings that interface to those 10k lines and keep compiling that as C)</p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 7, "last_activity_date": 1425498233, "creation_date": 1425498233, "answer_id": 28863455, "question_id": 28863381, "link": "https://stackoverflow.com/questions/28863381/cast-result-of-malloc-in-c-library/28863455#28863455", "title": "Cast result of malloc in c library", "body": "<blockquote>\n  <p>it appears that you should not cast the result in pure c code because it's potentially hides bugs and is redundant</p>\n</blockquote>\n\n<p>That is correct.</p>\n\n<blockquote>\n  <p>shouldn't all c libraries cast the result of malloc because they could realistically be used in a c++ project?</p>\n</blockquote>\n\n<p>No.  A C library can be used from within a C++ project but still be compiled as C.</p>\n"}], "owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 28863455, "answer_count": 2, "score": 1, "last_activity_date": 1425498998, "creation_date": 1425497991, "last_edit_date": 1495541191, "question_id": 28863381, "link": "https://stackoverflow.com/questions/28863381/cast-result-of-malloc-in-c-library", "title": "Cast result of malloc in c library", "body": "<p>I was looking at <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a> and it appears that you should not cast the result in pure c code because it's potentially hides bugs and is redundant. But I also see people saying that c++ requires the cast, so should all c libraries cast the result of malloc because they could realistically be used in a c++ project? </p>\n"}, {"tags": ["python", "c++", "c"], "comments": [{"owner": {"reputation": 5521, "user_id": 479230, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fK2jw.jpg?s=128&g=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/479230/jimmy"}, "edited": false, "score": 1, "creation_date": 1425498021, "post_id": 28863122, "comment_id": 45991906, "body": "have you checked out boost::python?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1425498024, "post_id": 28863122, "comment_id": 45991908, "body": "Unless you really want to do it on your own, consider <a href=\"http://www.swig.org/\" rel=\"nofollow noreferrer\">Swig</a> or <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/python/doc/\" rel=\"nofollow noreferrer\">Boost Python</a>."}, {"owner": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "edited": false, "score": 0, "creation_date": 1425499340, "post_id": 28863122, "comment_id": 45992660, "body": "I&#39;d love to use swig I just don&#39;t see how. Swig allows to access C/C++ libraries through python, but I want to do it the other way. I want to call hooks (functions) defined in python modules from C++."}, {"owner": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "edited": false, "score": 0, "creation_date": 1425499415, "post_id": 28863122, "comment_id": 45992700, "body": "Ok I will check boost::python maybe it can do this"}, {"owner": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "edited": false, "score": 0, "creation_date": 1425502318, "post_id": 28863122, "comment_id": 45994377, "body": "Note, I don&#39;t want to export functions defined in C/C++ library so that I can call them from python, I want it the other way, both SWIG and boost::python seem to make it only possible for python to access C++ not for C++ to access python"}], "owner": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 696, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425497173, "creation_date": 1425497173, "question_id": 28863122, "link": "https://stackoverflow.com/questions/28863122/how-to-marshall-data-structures-from-c-c-into-python-and-back", "title": "How to marshall data structures from C/C++ into python and back", "body": "<p>I have a program that is written in C++ and can be extended with extensions that are written in python using python's C api, basically there is python interpreter in the program which can load python modules that contains some hooks to various events.</p>\n\n<p>I can pass simple data types from C to python, such as string or integer. I can do the same the other way, I can call internal C++ api's I created from the python modules. What I can't do, however is to marshall more complex data types, such as classes. For example I have this thing:</p>\n\n<pre><code>class X\n{\n    int a;\n    int b;\n};\n</code></pre>\n\n<p>I could call some python hook that would look like this:</p>\n\n<pre><code>def some_hook(a, b):\n  print(str(a + b))\n</code></pre>\n\n<p>but I would rather do</p>\n\n<pre><code>def some_hook(x):\n  print(str(x.a + x.b))\n</code></pre>\n\n<p>I know how to call a python function from C using <code>PyObject_CallObject</code> and how to give it some simple python vars as parameters (like integer or string). But I have no idea how to construct python classes from within C/C++, fill them up with data, and then pass them as parameters to <code>PyObject_CallObject</code>.</p>\n\n<p>My idea was to create some proxy classes like in SWIG (swig.org) that I would fill up with data from C++ class and then back. I created some .py file that contains the declaration of these classes, but still, I have no idea how would I instantiate them from within C/C++ and fill up? Neither how I would do it the other way - turn <code>PyObject</code> into C/C++ class?</p>\n\n<p><strong>In a nutshell:</strong> I want to be able to turn C++ class into a python class, call a python function with that class as a parameter, and then call some other function from python with this class that would be just a C++ API that would turn the python class into C++.</p>\n\n<p>Some background reading on how to call python from C: <a href=\"http://docs.python.org/3/extending/embedding.html\" rel=\"nofollow\">http://docs.python.org/3/extending/embedding.html</a></p>\n\n<p>Source code of my app C++ that loads and uses python extensions: <a href=\"https://github.com/huggle/huggle3-qt-lx/blob/master/huggle/pythonengine.cpp\" rel=\"nofollow\">https://github.com/huggle/huggle3-qt-lx/blob/master/huggle/pythonengine.cpp</a></p>\n"}, {"tags": ["c", "validation", "path"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1425507284, "post_id": 28863090, "comment_id": 45997126, "body": "Both findutils and coreutils (which is where <code>realpath(3)</code> comes from) use gnulib (<a href=\"https://www.gnu.org/software/gnulib/\" rel=\"nofollow noreferrer\">gnu.org/software/gnulib</a>). This is where <code>canonicalize_filename_mode()</code> comes from. I&#39;m not aware of any handy plain POSIX functions for canonicalizing pathnames with missing components, so short of using gnulib or some other library which happens to provide similar functionality (or rolling your own), you may be out of luck."}], "answers": [{"tags": [], "owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "is_accepted": false, "score": 0, "last_activity_date": 1425545204, "creation_date": 1425545204, "answer_id": 28873484, "question_id": 28863090, "link": "https://stackoverflow.com/questions/28863090/regularize-non-existent-path-in-c-on-linux/28873484#28873484", "title": "Regularize Non-existent path in C on Linux", "body": "<p>It might not fully answer your issue but here is an alternative:</p>\n\n<p>You could process the <code>path</code> string with <code>strtok</code>, setting <code>delim</code> argument to <code>'/'</code>.<br>\nBy doing so, <code>strtok</code> will return you intermediate directory names (null-terminated: you can get rid off the <code>\\0</code> tweak) and it will gracefully ignore <code>//</code>.<br>\nYou can then add your \"sanitize\" checks (look for invalid characters, path name is too long, etc...)</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 4547650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6e69b5c9606f2bc0ec5cfc8803d8b9?s=128&d=identicon&r=PG&f=1", "display_name": "nmogk", "link": "https://stackoverflow.com/users/4547650/nmogk"}, "is_accepted": false, "score": 0, "last_activity_date": 1425577078, "creation_date": 1425577078, "answer_id": 28884191, "question_id": 28863090, "link": "https://stackoverflow.com/questions/28863090/regularize-non-existent-path-in-c-on-linux/28884191#28884191", "title": "Regularize Non-existent path in C on Linux", "body": "<p>I found a workaround that I believe covers all cases. What I did, was to move the call to <code>realpath</code> into the <code>do_mkdir</code> function so that way it will only have at most one non-existent element, replacing it with a strdup in the <code>mkpath</code> function. I can't think of a situation where performing the canonicalization on a partial path will break anything either.</p>\n"}], "owner": {"reputation": 63, "user_id": 4547650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6e69b5c9606f2bc0ec5cfc8803d8b9?s=128&d=identicon&r=PG&f=1", "display_name": "nmogk", "link": "https://stackoverflow.com/users/4547650/nmogk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1425577078, "creation_date": 1425497090, "question_id": 28863090, "link": "https://stackoverflow.com/questions/28863090/regularize-non-existent-path-in-c-on-linux", "title": "Regularize Non-existent path in C on Linux", "body": "<p>I am writing a utility function for a c program which creates directories, but will also create any intermediate directories which do not exist. I have that code working, but I wanted to turn my attention to improve user input formatting. Namely, I want to regularize the input path before I process it, especially to remove <code>//</code> which will break my current implementation.</p>\n\n<p>I am aware of <code>realpath(3)</code>, but my main issue is that it will fail if any of the directories on the path do not already exist. The command line function <code>realpath(1)</code> has the <code>-m</code> option, which seems to do what I want, but I don't want to invoke a shell if I can avoid it (Otherwise I could do <code>mkdir -p</code> and be done with it). Gnu <code>findutils/canonicalize.h</code> has <code>canonicalize_filename_mode</code>, but I don't know how to reference that short of copying the source directly (not out of the question). Thoughts, suggestions?</p>\n\n<p>I am tied to my development environment <code>gcc 4.7.7</code>and <code>rhel 6.6</code>.</p>\n\n<p>Below is my current implementation.</p>\n\n<pre><code>static int do_mkdir(const char *path, mode_t mode) {\n    struct stat     st;\n    int             status = 0;\n\n    if ( stat(path, &amp;st) != 0 ) {\n\n       errno = 0;\n\n        if (mkdir(path, mode) != 0 &amp;&amp; errno != EEXIST)\n            status = -1;\n\n    } else if ( !S_ISDIR(st.st_mode) ) {\n        errno = ENOTDIR;\n        status = -1;\n    }\n\n    return(status);\n}\n\nint mkpath(const char *path, mode_t mode) {\n\n    char *pp;\n    char *sp;\n    int   status;\n\n    char copypath[PATH_MAX+1];\n    copypath = realpath(path, copypath);\n\n    status = 0;\n    pp = copypath;\n\n    if(copypath == NULL)\n        status = -1;\n\n    while ( status == 0 &amp;&amp; (sp = strchr(pp, '/')) != 0 ) {\n\n        if (sp != pp) {\n\n            *sp = '\\0';\n            status = do_mkdir(copypath, mode);\n            *sp = '/';\n\n        }\n\n        pp = sp + 1;\n\n    }\n\n    if ( status == 0 )\n        status = do_mkdir(path, mode);\n\n    return (status);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4359797, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aeb22784cb4e5f03ed8e903739240a5c?s=128&d=identicon&r=PG&f=1", "display_name": "suspicious", "link": "https://stackoverflow.com/users/4359797/suspicious"}, "edited": false, "score": 0, "creation_date": 1425496894, "post_id": 28863019, "comment_id": 45991274, "body": "Can you provide me with an example if you can?"}, {"owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "reply_to_user": {"reputation": 43, "user_id": 4359797, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aeb22784cb4e5f03ed8e903739240a5c?s=128&d=identicon&r=PG&f=1", "display_name": "suspicious", "link": "https://stackoverflow.com/users/4359797/suspicious"}, "edited": false, "score": 0, "creation_date": 1425497046, "post_id": 28863019, "comment_id": 45991360, "body": "For Windows you can use Console.KeyAvailable."}, {"owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "reply_to_user": {"reputation": 43, "user_id": 4359797, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aeb22784cb4e5f03ed8e903739240a5c?s=128&d=identicon&r=PG&f=1", "display_name": "suspicious", "link": "https://stackoverflow.com/users/4359797/suspicious"}, "edited": false, "score": 1, "creation_date": 1425497158, "post_id": 28863019, "comment_id": 45991417, "body": "For Linux you can best look at a console library like ncurses."}, {"owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "edited": false, "score": 0, "creation_date": 1425501602, "post_id": 28863019, "comment_id": 45993985, "body": "Edited the answer to answer the question."}], "tags": [], "owner": {"reputation": 5324, "user_id": 135702, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GoD88.png?s=128&g=1", "display_name": "Sebastiaan M", "link": "https://stackoverflow.com/users/135702/sebastiaan-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1425501574, "last_edit_date": 1425501574, "creation_date": 1425496819, "answer_id": 28863019, "question_id": 28862977, "link": "https://stackoverflow.com/questions/28862977/snake-game-in-c-language/28863019#28863019", "title": "Snake game in C language", "body": "<p>The implementation is dependent on the system you want to use. Windows has other functions to check for keypresses than Linux. For Windows you can use Console.KeyAvailable. For Linux you can best look at a console library like ncurses.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": -1, "last_activity_date": 1425534148, "last_edit_date": 1425534148, "creation_date": 1425499421, "answer_id": 28863810, "question_id": 28862977, "link": "https://stackoverflow.com/questions/28862977/snake-game-in-c-language/28863810#28863810", "title": "Snake game in C language", "body": "<p>On every system it is possible to have <code>getchar()</code>(or similar functions) non-blocking. On Unix system, the solution is to set the terminal (<code>tty</code>) in raw mode. To simplify your life, you can also use some library to do it for you, a lib like <code>curses</code> or one of its variants. Such a lib will also help you to <em>draw</em> chars on screen exactly as you may dream for an ASCII snake program.</p>\n\n<p>There is also different solutions on Windows system.</p>\n\n<p>You can also use multi-threading. One thread blocking on terminal I/Os and transmitting read chars to the other moving the snake.</p>\n"}], "owner": {"reputation": 43, "user_id": 4359797, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aeb22784cb4e5f03ed8e903739240a5c?s=128&d=identicon&r=PG&f=1", "display_name": "suspicious", "link": "https://stackoverflow.com/users/4359797/suspicious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1244, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1425534148, "creation_date": 1425496694, "last_edit_date": 1425496988, "question_id": 28862977, "link": "https://stackoverflow.com/questions/28862977/snake-game-in-c-language", "title": "Snake game in C language", "body": "<p>I want to make a snake game without using graphics. The problem is that the snake will have to change direction when pressing the corresponding button. How do I make my program respond to my button without needing to scan a character. Because, if I add an instruction such as scanf() or getch(), my snake would stop moving and that's not how a snake game works. </p>\n"}, {"tags": ["c", "network-programming", "c11"], "comments": [{"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1425496971, "post_id": 28862975, "comment_id": 45991313, "body": "There is nowhere near enough information to answer this question. How is <code>struct addrinfo</code> defined? Does it contain a construct which is treated differently in C11? the <code>incomplete type</code> messages are a fairly big hint."}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "edited": false, "score": 0, "creation_date": 1425497262, "post_id": 28862975, "comment_id": 45991484, "body": "you need to show more code, we cannot answer it like this, I know the book you are reading, i read it as well, so you need to show more code"}, {"owner": {"reputation": 452, "user_id": 3531310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04c879bfa7b230a3b1a3f96fd3cb830e?s=128&d=identicon&r=PG&f=1", "display_name": "jaroslawj", "link": "https://stackoverflow.com/users/3531310/jaroslawj"}, "edited": false, "score": 0, "creation_date": 1425497697, "post_id": 28862975, "comment_id": 45991716, "body": "Adding std=c11 undefines __USE_POSIX macro which guards addrinfo struct in netdb.h"}], "answers": [{"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": true, "score": 1, "last_activity_date": 1425497811, "creation_date": 1425497811, "answer_id": 28863324, "question_id": 28862975, "link": "https://stackoverflow.com/questions/28862975/c11-network-programming/28863324#28863324", "title": "C11 network programming", "body": "<p>C11 can only be relevant here in the sense that this excludes some OS specific directories for include files. Try to use <code>-std=gnu11</code> which is the C11 variant plus OS and gcc specific extensions.</p>\n"}, {"tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": false, "score": 0, "last_activity_date": 1425497818, "creation_date": 1425497818, "answer_id": 28863327, "question_id": 28862975, "link": "https://stackoverflow.com/questions/28862975/c11-network-programming/28863327#28863327", "title": "C11 network programming", "body": "<p>Without <code>-std</code> GCC defaults to a GNU dialect of ISO C90 (C11 with the upcoming 5.0). This will make everything available. But with the <code>-std=c11</code> option you're saying that you only want ISO C11 features. <code>struct addrinfo</code> and the related functions are POSIX features. <a href=\"http://man7.org/linux/man-pages/man3/getaddrinfo.3.html\" rel=\"nofollow\">The man page</a> tells you how to make those available:</p>\n\n<pre><code>   getaddrinfo(), freeaddrinfo(), gai_strerror():\n       _POSIX_C_SOURCE &gt;= 1 || _XOPEN_SOURCE || _POSIX_SOURCE\n</code></pre>\n\n<p>So define <code>_POSIX_C_SOURCE</code> as <code>1</code> before including the header. Either by using <code>#define _POSIX_C_SOURCE 1</code> or <code>-D_POSIX_C_SOURCE=1</code>.</p>\n"}], "owner": {"reputation": 315, "user_id": 4633621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70f51e21e1478fc1558f0ba1979ce0a?s=128&d=identicon&r=PG&f=1", "display_name": "John Bergson", "link": "https://stackoverflow.com/users/4633621/john-bergson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 28863324, "answer_count": 2, "score": -2, "last_activity_date": 1425497818, "creation_date": 1425496686, "question_id": 28862975, "link": "https://stackoverflow.com/questions/28862975/c11-network-programming", "title": "C11 network programming", "body": "<p>I've been reading <a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html\" rel=\"nofollow\">Beej's Guide to Network Programming</a> and tried to compile the first few example programs (<a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#getaddrinfo\" rel=\"nofollow\">section 5.1</a>) using the <code>std=c11</code> flag with <code>gcc</code>. I keep getting errors like these (<code>showip.c</code>):</p>\n\n<pre><code>showip.c: In function \u2018main\u2019:\nshowip.c:15:21: error: storage size of \u2018hints\u2019 isn\u2019t known\n     struct addrinfo hints, *res, *p;\n                     ^\nshowip.c:35:33: error: dereferencing pointer to incomplete type\n     for(p = res;p != NULL; p = p-&gt;ai_next) {\n                                 ^\nshowip.c:41:14: error: dereferencing pointer to incomplete type\n         if (p-&gt;ai_family == AF_INET) { // IPv4\n              ^\nshowip.c:42:63: error: dereferencing pointer to incomplete type\n             struct sockaddr_in *ipv4 = (struct sockaddr_in *)p-&gt;ai_addr;\n                                                               ^\nshowip.c:46:65: error: dereferencing pointer to incomplete type\n             struct sockaddr_in6 *ipv6 = (struct sockaddr_in6 *)p-&gt;ai_addr;\n                                                                 ^\nshowip.c:52:20: error: dereferencing pointer to incomplete type\n     inet_ntop(p-&gt;ai_family, addr, ipstr, sizeof ipstr);\n</code></pre>\n\n<p>However, without the <code>c11</code> flag it compiles fine. What is exactly causing this incompatibility? And should I even be using C11 for these kind of things?</p>\n"}, {"tags": ["c", "arrays", "decimal", "converter", "radix"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1425497173, "post_id": 28862850, "comment_id": 45991427, "body": "Store the digits in array instead of printing them, and then print the array in reverse."}, {"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 0, "creation_date": 1425497310, "post_id": 28862850, "comment_id": 45991513, "body": "As a bit of a random comment, a base of 1 is technically valid: <a href=\"http://en.wikipedia.org/wiki/Unary_numeral_system\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Unary_numeral_system</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1425497387, "post_id": 28862850, "comment_id": 45991552, "body": "Well, if being picky, a base above 16 is valid as well, and won&#39;t be handled properly by this program (undefined behavior, actually)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 0, "creation_date": 1425497470, "post_id": 28862850, "comment_id": 45991597, "body": "@Jon how would I mark off every 5th with a horizontal strike-through? Is that a wierd kind of binary?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1425497548, "post_id": 28862850, "comment_id": 45991639, "body": "@WeatherVane I am more concerned about <code>0</code> representation.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1425497737, "post_id": 28862850, "comment_id": 45991750, "body": "@EugeneSh. if your comment relates to Jon&#39;s, then no marks at all ;-)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425497844, "post_id": 28862850, "comment_id": 45991817, "body": "@WeatherVane Yeah, but then people will see zeros everywhere :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1425497901, "post_id": 28862850, "comment_id": 45991843, "body": "@EugeneSh <code>0</code> is a new-fangled thing. It didn&#39;t use to exist at all, perhaps it still doesn&#39;t."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425498092, "post_id": 28862850, "comment_id": 45991952, "body": "@WeatherVane Yeah, but in any positional notation based system it has to present (as a placeholder for certain positions, which hold nothing). But well, you can say that unary is not position based."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425498459, "post_id": 28862850, "comment_id": 45992168, "body": "We could stray onto negative notation, say I have <code>-1</code> apples that means you owe me an apple, but if I have <code>-0</code> apples you owe me none, whereas if I have <code>0</code> apples, I don&#39;t owe you any. Semantics? Now, what does it mean if I have <i><code>i</code></i> apples?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1425500561, "post_id": 28863550, "comment_id": 45993367, "body": "Suggest reviewing for <code>d == 0</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1425508292, "post_id": 28863550, "comment_id": 45997619, "body": "BTW: Changing <code>while (d != 0) { ...}</code> to <code>do { ... } while (d != 0);</code> would handle the <code>d==0</code> case without adding <code>if (counter == 0)</code>."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 1, "last_activity_date": 1425504875, "last_edit_date": 1425504875, "creation_date": 1425498616, "answer_id": 28863550, "question_id": 28862850, "link": "https://stackoverflow.com/questions/28862850/how-to-print-character-array-in-reverse-order-of-c-program/28863550#28863550", "title": "How to print character array in reverse order of C program", "body": "<p>You can store each digit in an array:</p>\n\n<pre><code>} else {\n    char arr[32];\n    int counter = 0;\n    while (d != 0) {\n        int radix;\n        radix = d % b;\n        d = d / b;\n        char basechars[] = \"0123456789ABCDEF\";\n        arr[counter++] = basechars[radix];\n    }\n    if (counter == 0)\n        arr[counter++] = '0';\n    arr[counter++] = '\\0';\n    print_rev(arr);\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>and then print the string using a recursive function (it will reverse the output):</p>\n\n<pre><code>void print_rev(const char *s)\n{\n    if (*s) {\n        print_rev(s + 1);\n        printf(\"%c\", *s);\n    }\n}\n</code></pre>\n\n<p>or directly:</p>\n\n<pre><code>} else {\n    char arr[32];\n    int counter = 0;\n    while (d != 0) {\n        int radix;\n        radix = d % b;\n        d = d / b;\n        char basechars[] = \"0123456789ABCDEF\";\n        arr[counter++] = basechars[radix];\n    }\n    if (counter == 0) {\n        printf(\"0\");\n    else {\n        while (counter--)\n            printf(\"%c\", arr[counter]);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425499872, "post_id": 28863629, "comment_id": 45992972, "body": "Yes but you have not addressed the @EugeneSh. comment above, about <code>base &gt; 16</code>. You could have <code>char basechars[] = &quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;</code> and the test <code>if (b &lt; 2 || b &gt; 36)</code>"}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425499929, "post_id": 28863629, "comment_id": 45993009, "body": "yeah that is right, I just assumed he goes until base 16, he has to make sure an error message displays if the user chooses a base higher than 16"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425500058, "post_id": 28863629, "comment_id": 45993077, "body": "And I think this is suspicious <code>converted = realloc(converted, i++);</code> seeing as that is the same memory you originally allocated."}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425500117, "post_id": 28863629, "comment_id": 45993103, "body": "test it, it works, it is the same memory the first time (1), and then it goes 2, 3, 4, 5, ..., I also put a check for base 16"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425500542, "post_id": 28863629, "comment_id": 45993347, "body": "You use a sledgehammer to crack a nut. You know how many binary digits there can be in an <code>int</code> by doing <code>char converted [sizeof(int) * CHAR_BIT + 1];</code>"}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425500906, "post_id": 28863629, "comment_id": 45993565, "body": "well yes but it is only for binary digits, but you are right that you can calculate how much space is needed for a particular base after the user selects a base, that would be the better way."}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425501083, "post_id": 28863629, "comment_id": 45993669, "body": "I am not expecting him to come back though, if you look at his profile, he seems to ask questions and never even accept an answer, the question was meaningless anyway, how to reverse printing, I just answered it because I was in the mood. but thanks for pointing that out."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425501279, "post_id": 28863629, "comment_id": 45993802, "body": "That&#39;s OK, you can assign the maximum <code>char[]</code> array possible <i>before</i> the base is even entered. It&#39;s cheap."}], "tags": [], "owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "is_accepted": false, "score": 0, "last_activity_date": 1425500500, "last_edit_date": 1425500500, "creation_date": 1425498852, "answer_id": 28863629, "question_id": 28862850, "link": "https://stackoverflow.com/questions/28862850/how-to-print-character-array-in-reverse-order-of-c-program/28863629#28863629", "title": "How to print character array in reverse order of C program", "body": "<p>This version does dynamic memory allocation so that you don't have to specify how long the converted string has to be beforehand. </p>\n\n<p>The numbers can be as large as you please, especially important in binary conversion. I also put a check for base 16, which is the upper limit.</p>\n\n<pre><code>int main (void)\n{\n\n        int d, b, c, i = 1;\n        char *converted = malloc(i);\n        printf(\" Enter an integer and press 'enter':\\n\");\n        scanf(\"%d\" , &amp;d);\n        printf(\" Enter the desired base and press 'enter':\\n\");\n        scanf(\"%d\" , &amp;b);\n\n        if (b &lt; 2) {\n\n                printf(\" Your base is to low! \\n\");\n                return 1;\n\n        } else if (b &gt; 16) {\n\n                printf(\" Your base is to high! \\n\");\n                return 1;\n\n        } else {\n\n                while (d != 0) {\n\n                        int radix;\n                        radix = d % b;\n                        d = d / b;\n                        char basechars[] = \"0123456789ABCDEF\";\n                        converted = realloc(converted, i++);\n                        *(converted +i - 1) = basechars[radix];\n\n                }\n        }\n    i--;\n    while(i != 0) {\n        printf(\"%c\", converted[i]);\n        --i;\n    }\n    free(converted);\n    printf(\"\\n\");\n\n    return 0;\n}    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "is_accepted": false, "score": 0, "last_activity_date": 1425500251, "creation_date": 1425500251, "answer_id": 28864071, "question_id": 28862850, "link": "https://stackoverflow.com/questions/28862850/how-to-print-character-array-in-reverse-order-of-c-program/28864071#28864071", "title": "How to print character array in reverse order of C program", "body": "<ol>\n<li>Reversing the array is the most straightforward way.</li>\n<li>Use the limit.h macro LONG_BIT to know the maximum needed characters to store.  This sizes your array.</li>\n<li>I'm also checking the base for the upper limit of 16.</li>\n<li>Build the array, then print it.  Note it handles 0 just fine.</li>\n<li><p>You also forgot negative numbers.</p>\n\n<pre><code>} else if (b &gt; 16) {\n    printf(\" Your base is too high! \\n\");\n} else {\n    const char basechars[] = \"0123456789ABCDEF\";\n\n    char arr[LONG_BIT];  // d is an integer, so LONG_BIT holds\n                 // enough characters for a binary representation.\n    int counter = 0;\n    int negative_flag = 0;\n\n    if (d &lt; 0) {\n        d = -d;\n        negative_flag = 1;\n    }\n\n    do {\n        int digit = d % b;\n        d = d / b;\n\n        arr[counter++] = basechars[digit];\n     } while (d != 0);\n\n     if (negative_flag) {\n        printf (\"-\");\n     }\n\n     while (counter--) {\n         printf (\"%c\", arr[counter]);\n     }\n     printf (\"\\n\");\n }\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1425501661, "creation_date": 1425501661, "answer_id": 28864476, "question_id": 28862850, "link": "https://stackoverflow.com/questions/28862850/how-to-print-character-array-in-reverse-order-of-c-program/28864476#28864476", "title": "How to print character array in reverse order of C program", "body": "<p>Offer a recursive approach.</p>\n\n<p>Determine if additional <code>chars</code> need to be printed from the more significant digits, recursively call the helper function and <em>then</em> print the numbers least significant digit.</p>\n\n<p>Code should take care to handle \"0\" as a valid input.  The below uses negative values to well handle <code>INT_MIN</code>.</p>\n\n<pre><code>static void PrintDigits(int x, int base) {\n  static const char basechars[] = \"0123456789ABCDEF\";\n  if (x &lt;= -base) {\n    PrintDigits(x/base, base);\n  }\n  putchar(basechars[-(x%base)]);\n}\n\nvoid PrintInt(int x, int base) {\n  if (base &lt; 2 || base &gt; 16) {\n    printf(\" Your base is out of range! \\n\");\n  } else {\n    if (x &lt; 0) putchar('-');\n    else x = -x;\n    PrintDigits(x, base);\n  }\n  putchar('\\n');\n}\n\nint main(void) {\n  PrintInt(65535, 16);\n  PrintInt(65535, 10);\n  PrintInt(65535, 2);\n  PrintInt(INT_MAX, 10);\n  PrintInt(0, 10);\n  PrintInt(-1, 16);\n  PrintInt(INT_MIN, 10);\n\n  int d, b;\n  printf(\" Enter an integer and press 'enter':\\n\");\n  scanf(\"%d\" , &amp;d);\n  printf(\" Enter the desired base and press 'enter':\\n\");\n  scanf(\"%d\" , &amp;b);\n  PrintInt(d, b);\n  return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>FFFF<br>\n  65535<br>\n  1111111111111111<br>\n  2147483647<br>\n  0<br>\n  -1<br>\n  -2147483648  </p>\n</blockquote>\n\n<p>Even with base 2, recursion depth would be no more than the bit width of <code>int</code>.</p>\n"}], "owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2210, "favorite_count": 0, "accepted_answer_id": 28863550, "answer_count": 4, "score": 0, "last_activity_date": 1425504875, "creation_date": 1425496272, "last_edit_date": 1425497219, "question_id": 28862850, "link": "https://stackoverflow.com/questions/28862850/how-to-print-character-array-in-reverse-order-of-c-program", "title": "How to print character array in reverse order of C program", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define SIZE 25\n\nint main (void)\n{\n\n        int d, b, c;\n\n        printf(\" Enter an integer and press 'enter':\\n\");\n        scanf(\"%d\" , &amp;d);\n        printf(\" Enter the desired base and press 'enter':\\n\");\n        scanf(\"%d\" , &amp;b);\n\n        if (b &lt; 2) {\n\n                printf(\" Your base is to low! \\n\")\n        } else {\n\n                while (d != 0) {\n\n                        int radix;\n                        radix = d % b;\n                        d = d / b;\n                        char basechars[] = \"0123456789ABCDEF\";\n\n                        printf(\"%c\" , basechards[radix]);\n                }\n        }\n        return 0;\n}\n</code></pre>\n\n<p>This Program prompts the user for a decimal and a base to convert that    decimal to the base that has been chosen. The conversion is however printed in reverse order and I need it to print regular. Example: Entered: 112, then entered 16, result is 07 rather than 70.</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1425496487, "post_id": 28862686, "comment_id": 45991028, "body": "It would probably be better to use a condition variable and <code>pthread_cond_timedwait(3)</code> and explicitly tell the thread when <code>y</code> is ready using <code>pthread_cond_signal(3)</code>."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1425496695, "post_id": 28862686, "comment_id": 45991163, "body": "What kind of data or &quot;event&quot; is it that you&#39;re waiting for by the way? There might be other approaches too."}, {"owner": {"reputation": 21, "user_id": 3207024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0217d47b8c1b0e7ec655490cb61e8882?s=128&d=identicon&r=PG&f=1", "display_name": "user3207024", "link": "https://stackoverflow.com/users/3207024/user3207024"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1425497223, "post_id": 28862686, "comment_id": 45991455, "body": "thanks for the reply.   It sounds like I&#39;d have to implement signal code in another function which changes the y variable.   y is the key pressed by the user which is managed by another thread."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1425498193, "post_id": 28862686, "comment_id": 45992013, "body": "Looking into <code>select(2)</code> (<code>poll(2)</code> and <code>epoll(7)</code> are similar -- the latter is Linux-specific) might be worthwhile too. It&#39;s the usual way to wait for events (e.g., data being available) on a set of file descriptors (e.g., <i>stdin</i>)."}], "answers": [{"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": false, "score": 0, "last_activity_date": 1425521855, "creation_date": 1425521855, "answer_id": 28868856, "question_id": 28862686, "link": "https://stackoverflow.com/questions/28862686/wait-for-x-time-or-flag-is-true-using-pthread-in-c/28868856#28868856", "title": "wait for x time or flag is true using pthread in C", "body": "<p>You could use a condition variable to do this.  The wait function would do:</p>\n\n<pre><code>void wait(int x, char *y)\n{\n    struct timespec deadline;\n\n    clock_gettime(CLOCK_REALTIME, &amp;deadline);\n    deadline.tv_sec += x;\n\n    pthread_mutex_lock(&amp;y_lock);\n    while (*y == 0) {\n        if (pthread_cond_timedwait(&amp;y_cond, &amp;y_lock, &amp;deadline) == ETIMEDOUT)\n            break;\n    }\n    pthread_mutex_unlock(&amp;y_lock);\n}\n</code></pre>\n\n<p>Then the code elsewhere that sets <code>*y</code> to 0 would use <code>pthread_cond_signal()</code>:</p>\n\n<pre><code>pthread_mutex_lock(&amp;y_lock);\n*y = 0;\npthread_cond_signal(&amp;y_cond);\npthread_mutex_unlock(&amp;y_lock);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3207024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0217d47b8c1b0e7ec655490cb61e8882?s=128&d=identicon&r=PG&f=1", "display_name": "user3207024", "link": "https://stackoverflow.com/users/3207024/user3207024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425521855, "creation_date": 1425495698, "question_id": 28862686, "link": "https://stackoverflow.com/questions/28862686/wait-for-x-time-or-flag-is-true-using-pthread-in-c", "title": "wait for x time or flag is true using pthread in C", "body": "<p>How can I wait for a given time x or a char y is set to 1.\nFor example I want to implement following method</p>\n\n<pre><code>void wait(int x, char *y){\n\n}\n</code></pre>\n\n<p>How can I implement this so calling this method wait for x time or until y is not 0. whichever happens first.</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["c++", "c", "ide", "clion"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1425499153, "post_id": 28862665, "comment_id": 45992552, "body": "Are you really using a lowercase <code>.c</code> extension for C++ source code?  Or it really is C code, but you want to run it through the more comprehensive C++ type checker?"}, {"owner": {"reputation": 31, "user_id": 4633459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e4c67ccb8f3770dd93f30f37ea2ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey  Nikitin", "link": "https://stackoverflow.com/users/4633459/alexey-nikitin"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1425554389, "post_id": 28862665, "comment_id": 46015205, "body": "Yes, lowercase .c extension is a heavy heritage of more than a decade of project which now contain C++ code."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4633459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e4c67ccb8f3770dd93f30f37ea2ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey  Nikitin", "link": "https://stackoverflow.com/users/4633459/alexey-nikitin"}, "edited": false, "score": 0, "creation_date": 1425995658, "post_id": 28909359, "comment_id": 46182802, "body": "Of course, changing file extensions, this is the first that comes to mind, however, it will lead to changes in the build system project (by the way, we don&#39;t use cmake; CMakeLists.txt generate himself CLion) and in order to try a new IDE would not like to change the project. I.e., my question was whether in the CLion fine-tune the type of the source file. Nevertheless, thank you."}, {"owner": {"reputation": 3889, "user_id": 561422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JwFD0.jpg?s=128&g=1", "display_name": "marco.m", "link": "https://stackoverflow.com/users/561422/marco-m"}, "reply_to_user": {"reputation": 31, "user_id": 4633459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e4c67ccb8f3770dd93f30f37ea2ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey  Nikitin", "link": "https://stackoverflow.com/users/4633459/alexey-nikitin"}, "edited": false, "score": 1, "creation_date": 1425998701, "post_id": 28909359, "comment_id": 46185061, "body": "@AlexeyNikitin: sure, I understand. What I wanted to suggest is too look at cmake generators, and then make the bold move to convert your build system to cmake :-) You will be happy, I assure you :-)"}], "tags": [], "owner": {"reputation": 3889, "user_id": 561422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JwFD0.jpg?s=128&g=1", "display_name": "marco.m", "link": "https://stackoverflow.com/users/561422/marco-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1425718866, "last_edit_date": 1425718866, "creation_date": 1425684366, "answer_id": 28909359, "question_id": 28862665, "link": "https://stackoverflow.com/questions/28862665/how-to-make-clion-to-recognize-c-files-as-c-and-not-as-plain-c/28909359#28909359", "title": "How to make CLion to recognize .c files as c++ (and not as plain c)", "body": "<p>Rename the .c files to a proper suffix for C++, for example .cpp:</p>\n\n<pre><code>for i in `find . -name '*.c'`; do j=`echo $i | sed s/\\.c/\\.cpp/` ; mv $i $j; done\n</code></pre>\n\n<p>Seriously, if it is C++ code, it doesn't make sense to have it in .c files.</p>\n\n<p>Once you have a working CMakeLists.txt, there is no reason to preserve the .c extension, since you can use cmake to generate build configuration for almost any build system on earth :-) See the cmake documentation for \"generators\":  <a href=\"http://www.cmake.org/cmake/help/v3.2/manual/cmake-generators.7.html\" rel=\"nofollow\">http://www.cmake.org/cmake/help/v3.2/manual/cmake-generators.7.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 4085441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Ulna.png?s=128&g=1", "display_name": "wataash", "link": "https://stackoverflow.com/users/4085441/wataash"}, "is_accepted": false, "score": 2, "last_activity_date": 1512297257, "creation_date": 1512297257, "answer_id": 47617514, "question_id": 28862665, "link": "https://stackoverflow.com/questions/28862665/how-to-make-clion-to-recognize-c-files-as-c-and-not-as-plain-c/47617514#47617514", "title": "How to make CLion to recognize .c files as c++ (and not as plain c)", "body": "<p>Put</p>\n\n<pre><code>SET_SOURCE_FILES_PROPERTIES(${SOURCE_FILES} PROPERTIES LANGUAGE CXX)\n</code></pre>\n\n<p>in your <code>CMakeLists.txt</code>.</p>\n\n<ul>\n<li><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/205822539/comments/205713325\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/205822539/comments/205713325</a></li>\n<li><a href=\"https://cmake.org/cmake/help/latest/command/set_source_files_properties.html\" rel=\"nofollow noreferrer\">https://cmake.org/cmake/help/latest/command/set_source_files_properties.html</a></li>\n<li><a href=\"https://cmake.org/cmake/help/latest/prop_sf/LANGUAGE.html\" rel=\"nofollow noreferrer\">https://cmake.org/cmake/help/latest/prop_sf/LANGUAGE.html</a></li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 4633459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e4c67ccb8f3770dd93f30f37ea2ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey  Nikitin", "link": "https://stackoverflow.com/users/4633459/alexey-nikitin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1566, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1512297257, "creation_date": 1425495629, "last_edit_date": 1435603997, "question_id": 28862665, "link": "https://stackoverflow.com/questions/28862665/how-to-make-clion-to-recognize-c-files-as-c-and-not-as-plain-c", "title": "How to make CLion to recognize .c files as c++ (and not as plain c)", "body": "<p>By default CLion C and C++ files has united file type in Settings->Editor->File Types\nBut in inspect code .c file recognize as plain C (for example type bool requires the inclusion &lt; stdbool.h >) but actually it must be compiled as C++</p>\n\n<p>Help->About:\nCLion CL-140.2310.6\nBuild #CL-140.2310, built on February 12, 2015\n...</p>\n"}, {"tags": ["c", "unix", "ls", "stat", "opendir"], "comments": [{"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 1, "creation_date": 1425494830, "post_id": 28862372, "comment_id": 45990046, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1401526/use-printf-to-display-off-t-nlink-t-size-t-and-others\">Use printf to display off_t, nlink_t, size_t and others</a>"}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 0, "creation_date": 1425495093, "post_id": 28862372, "comment_id": 45990213, "body": "Aren&#39;t you passing st_size (integral type) to a %s (null-terminated char string) format?"}, {"owner": {"reputation": 47629, "user_id": 900873, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/704ea9ee0d9090f571599bdf5f95eb39?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/900873/kevin"}, "edited": false, "score": 0, "creation_date": 1425495159, "post_id": 28862372, "comment_id": 45990259, "body": "The first step in debugging is to read and understand the error. GCC is telling you exactly what and where the problem is."}, {"owner": {"reputation": 1, "user_id": 3723202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c2edfa2c0ef8101004f5f20e428a63?s=128&d=identicon&r=PG&f=1", "display_name": "user3723202", "link": "https://stackoverflow.com/users/3723202/user3723202"}, "edited": false, "score": 0, "creation_date": 1425495451, "post_id": 28862372, "comment_id": 45990410, "body": "When I change the %s to solve the format type problem with <code>int size = s-&gt;st_size; and printf(&quot;%s - %d&quot;, dp-&gt;dp_name, size);</code> It shows false informations about files"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1488888410, "post_id": 28862372, "comment_id": 72421951, "body": "@user3723202 Instead of telling us that, you should show us a concrete example of a value that your program printed, and the value that was correct.  <code>s-&gt;st_size</code> is normally not an int, so your value might be truncated when you did <code>int size = s-&gt;st_size;</code> if the file size is large. There are answers and pointers to similar question (like <a href=\"http://stackoverflow.com/questions/1401526/use-printf-to-display-off-t-nlink-t-size-t-and-others\" title=\"use printf to display off t nlink t size t and others\">stackoverflow.com/questions/1401526/&hellip;</a>) that shows you how to print out an <code>off_t</code> type."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1425495950, "creation_date": 1425495950, "answer_id": 28862754, "question_id": 28862372, "link": "https://stackoverflow.com/questions/28862372/unix-command-ls-in-c/28862754#28862754", "title": "Unix command &quot;ls&quot; in C", "body": "<p>You certainly cannot output the value of any integer type with a <code>%s</code> format code, and the error message you're getting from gcc should be perfectly clear.</p>\n\n<p>Posix requires <code>off_t</code> to be an alias for some integer type, so a simple solution (with C11) would be to cast the value to an <code>intmax_t</code> (which is the widest integer type) and then use the <code>j</code> printf format size modifier:</p>\n\n<pre><code>printf(\"%s - %jd\", dp-&gt;d_name, (intmax_t)s-&gt;st_size);\n</code></pre>\n\n<p>You'll need to make sure you include the appropriate header for <code>intmax_t</code> to be available:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3723202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c2edfa2c0ef8101004f5f20e428a63?s=128&d=identicon&r=PG&f=1", "display_name": "user3723202", "link": "https://stackoverflow.com/users/3723202/user3723202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10276, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1488886004, "creation_date": 1425494595, "question_id": 28862372, "link": "https://stackoverflow.com/questions/28862372/unix-command-ls-in-c", "title": "Unix command &quot;ls&quot; in C", "body": "<p>After a long time to search a solution, I have to ask your precious help. I work on a program which implement \"ls\" unix command in C. I'd have only name of the file and his size. I looked that I've to use: \"stat\" and \"dirent\". I found a \"solution\" in Stackoverflow but didn't work perfectly for me.\nSo I can show the names of the file into the directory but not their size. \nWhen I use gcc, whether it shows: 0 octet (while it isn't empty) or \"</p>\n\n<blockquote>\n  <p>error: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 3\n  has type \u2018__off_t\u2019 [-Werror=format=]   printf(\"%s - %s\", dp->d_name,\n  s->st_size);</p>\n</blockquote>\n\n<p>\"</p>\n\n<p>My test code (not clean): </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;poll.h&gt;\n\nstruct stat statbuf;\nstruct dirent *dp;\nstruct stat *s;\n\nint main ()\n{\nDIR *dirp;\ndirp = opendir(\"/tmp/gestrep\");\n\nwhile((dp = readdir(dirp)) !=NULL)\n{\n\n    stat(dp-&gt;d_name, &amp;statbuf);\n    printf(\"%s - %s\", dp-&gt;d_name, s-&gt;st_size);\n}\n\n}\n</code></pre>\n\n<p>In fact, I don't know how to solve the format type problem. I saw I could use ftell/fseek but I don't have the right to use FILE* functions.</p>\n\n<p>Thank you for all solutions :)</p>\n"}, {"tags": ["c", "testing", "data-structures"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1425494174, "post_id": 28861960, "comment_id": 45989647, "body": "I would think that the input from the 11th test might be a good starting point..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1425494274, "post_id": 28861960, "comment_id": 45989710, "body": "@twalberg I believe it&#39;s not available on this type of sites.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425496454, "post_id": 28861960, "comment_id": 45991010, "body": "I would have though <code>while (low &lt;= high)</code> is suspect in a binary chop. It&#39;s best to set <code>high</code> out of range, not within."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1425496486, "post_id": 28861960, "comment_id": 45991027, "body": "1) Post the 11th test 2) Time values not checked for range. 3) <code>mm</code> in packed data may be out of <code>int</code> range.  4) iffy consumption of separators. 5) <code>while (low &lt;= high) {</code> exit condition is suspect."}, {"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 0, "creation_date": 1425498390, "post_id": 28861960, "comment_id": 45992136, "body": "the 11th test input is not available, I would not post the question provided with the input. I didn&#39;t check time values for range bacause the input will also be correct and I won&#39;t need time, packDate function packs time and date in such way that it only keeps their position relative to each other, but i will think more about this, maybe there are some of time values that overlap after packing. I&#39;ll check for mm overflow. The reading part of the program works fine, maybe it&#39;s iffy, but that&#39;s not the reason for failure. binSearch works fine"}, {"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 0, "creation_date": 1425498685, "post_id": 28861960, "comment_id": 45992276, "body": "no, I don&#39;t think time values will ever overlap, provided the input is correct"}, {"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 0, "creation_date": 1425499209, "post_id": 28861960, "comment_id": 45992589, "body": "the largest time possible is 293820, and 2 ^ 32 / 2 (unsigned int, 32 bit) = 2147483648, if the size of int is 16 bit, then my program gives WA on values greater than 32768, but on provided test the first time is greater than 223200, therefore this is not where the problem is"}, {"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 0, "creation_date": 1425499499, "post_id": 28861960, "comment_id": 45992744, "body": "maybe you have any ideas how could I get the test from the site. I tried some triks like: if ( n &lt; 50000) n / 0; or malloc(1024 * n); First one would cause zero division, and changing the value after n or n I could figure out what the input is like. But they seem to have protection against that, no condition could cause zero division, i tried to write just n/ 0; and nothing happened, they removed this from code. Maybe if I work on more advanced condition system I could make the zero division"}, {"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 0, "creation_date": 1425499856, "post_id": 28861960, "comment_id": 45992957, "body": "the second one would increase the memory usage by KB, but I guess I don&#39;t quite understand how the memory works, the result doesn&#39;t seem to be reasonable"}, {"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 0, "creation_date": 1425500005, "post_id": 28861960, "comment_id": 45993049, "body": "also I tried if (n &lt; 50000) printf(&quot;%i\\n&quot;, 6666); this would make the program fail on the first test instead of 11th in case n is less than certain number. I tried this couple of times, but everytime it led me to different result"}], "answers": [{"comments": [{"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 1, "creation_date": 1425493781, "post_id": 28861992, "comment_id": 45989446, "body": "The input is always right formated, it is always in the form specified in the input section, the point is to find the numbers on which the algorithm fails to output right answers"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 1, "creation_date": 1425493859, "post_id": 28861992, "comment_id": 45989495, "body": "@sasha199568 that is not a reason to write such an unsafe code, you don&#39;t know what could happen once you try to access the value of an uninitialized variable it could call a function or something, don&#39;t ever ignore that kind of thing."}, {"owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "edited": false, "score": 0, "creation_date": 1425494168, "post_id": 28861992, "comment_id": 45989645, "body": "usually I don&#39;t, but i would recieve wrong answer on test No 1, instead of 11 if that was the problem, also first line is guaranteed to be an int from 1 to 100000"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1425493365, "creation_date": 1425493365, "answer_id": 28861992, "question_id": 28861960, "link": "https://stackoverflow.com/questions/28861960/can-you-think-of-a-test-which-could-make-my-program-give-wrong-answers/28861992#28861992", "title": "Can you think of a test which could make my program give wrong answers?", "body": "<p>Yes I can think of a lot of tests, for example in the beginning of the program type <code>aasdas</code> and press enter, there you go ... your program will do crazy things.</p>\n\n<p>The reason is that you ignore <code>scanf()</code>'s return value, that's simply wrong, you must check that it succeeded, otherwise you will read from an uninitialized variable which of course causes a lot of problems.</p>\n\n<p>So every <code>scanf()</code> requires a</p>\n\n<pre><code>if (scanf(\"%i\", &amp;n) != 1)\n    doSomething_n_isUninitialized_Do_Not_useItsValue();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "is_accepted": false, "score": 0, "last_activity_date": 1425557054, "creation_date": 1425557054, "answer_id": 28877478, "question_id": 28861960, "link": "https://stackoverflow.com/questions/28861960/can-you-think-of-a-test-which-could-make-my-program-give-wrong-answers/28877478#28877478", "title": "Can you think of a test which could make my program give wrong answers?", "body": "<p>The problem is that there are 24 hours in a day, not 12</p>\n"}], "owner": {"reputation": 1061, "user_id": 3426265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54293c2fbd5634457d3fb3bcfeeeaf42?s=128&d=identicon&r=PG&f=1", "display_name": "sasha199568", "link": "https://stackoverflow.com/users/3426265/sasha199568"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446977112, "creation_date": 1425493247, "last_edit_date": 1446977112, "question_id": 28861960, "link": "https://stackoverflow.com/questions/28861960/can-you-think-of-a-test-which-could-make-my-program-give-wrong-answers", "title": "Can you think of a test which could make my program give wrong answers?", "body": "<p>I am trying to solve this problem</p>\n\n<p><a href=\"http://acm.timus.ru/problem.aspx?space=1&amp;num=2014\" rel=\"nofollow\">http://acm.timus.ru/problem.aspx?space=1&amp;num=2014</a></p>\n\n<p>I've got my solution working on the provided test. When I submit my solution I get wrong answer on the 11th test. So, could you please think about such an input which can make my program give wrong answers?</p>\n\n<p>P.S. the problem is not time or memory shortage. The time of execution is 0.015s, and the memory used is 214 KB. I guess the test is quite short with reasonable numbers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n\ntypedef struct letter\n{\n    int change;     // amount of money spent or gained\n    int date;       // packed date, I will never need the actual date, I will just need which date is earlier (smaller), and which is later (greater)\n    int sign : 1;       // minus one for plus, zero for minus\n    int seen : 1;       // minus one for seen, zero otherwise\n} Letter;\n\nint packDate(int, int, int, int);       // we will not need to know the date, just their relation to each other\nvoid printLetter(Letter *);         // for debugging, not implemented\nvoid getTime(int *, int *, int *, int *);   // read time from input\nvoid selectionSort(Letter *, int);      // sort the letters by date, to get them in chronological order\nvoid letterCopy(Letter *, Letter *, int);   // copy one array of letters to another\nlong long check(Letter *, int);         // evaluate the debt\nint binSearch(int, Letter *, int);      // find the index of letter with given date\n\nint main()\n{\n    int n;\n    scanf(\"%i\", &amp;n);\n    getchar();\n    Letter *pletters = (Letter *)malloc(sizeof(Letter) * n);\n    int i;\n    for (i = 0; i &lt; n; ++i) {               // read letters\n        char sign = getchar();\n        pletters[i].sign = sign == '+' ? 1 : 0;\n        scanf(\"%i\", &amp;pletters[i].change);\n        getchar();\n        int dd, MM, hh, mm;\n        getTime(&amp;dd, &amp;MM, &amp;hh, &amp;mm);\n        pletters[i].date = packDate(dd, MM, hh, mm);\n        pletters[i].seen = 0;\n    }                           // the letters are read\n    Letter *plSorted = (Letter *)malloc(sizeof(Letter) * n);\n    letterCopy(pletters, plSorted, n);          // make a copy of the letters array\n    selectionSort(plSorted, n);             // sort copy, to get in historical order\n    for (i = 0; i &lt; n; ++i) {               // evaluate each letter in original order\n        int si = binSearch(pletters[i].date, plSorted, n);  // find the position of this letter in historical order\n        plSorted[si].seen = 1;                  // mark it in historical order as seen\n        printf(\"%li\\n\", check(plSorted, n));            // evaluate debt, based on all seen letters, and print it\n    }\n    return 0;\n}\n\nint binSearch(int d, Letter *l, int n)\n{\n    int mid;\n    int low = 0;\n    int high = n - 1;\n    while (low &lt;= high) {\n        mid = (low + high) / 2;\n        if (d &lt; l[mid].date) {\n            high = mid - 1;\n        } else if (d &gt; l[mid].date){\n            low = mid + 1;\n        } else {\n            return mid;\n        }\n    }\n    return -1;\n}\n\nlong long check(Letter *s, int n)\n{\n    int i;\n    long long cash, debt;\n    cash = debt = 0;\n    for (i = 0; i &lt; n; ++i) {\n        if (s[i].seen) {\n            if (s[i].sign) {\n                cash += s[i].change;        // if letter states +, then add amount to Zhenya's cash\n            } else {\n                cash -= s[i].change;        // if he has money, he spends money from his cash\n                debt += cash &lt; 0 ? cash : 0;    // if he rans out of money, he will use credit card\n                cash = cash &lt; 0 ? 0 : cash; // if he used credit card, his cash is empty\n            }\n        }\n    }\n    return debt;\n}\n\nvoid letterCopy(Letter *s, Letter *d, int n)\n{\n    int i;\n    for (i = 0; i &lt; n; ++i) {\n        d[i] = s[i];\n    }\n}\n\nvoid selectionSort(Letter *l, int n)\n{\n    int i, j, min, mi;\n    for (i = 0; i &lt; n; ++i) {\n        min = INT_MAX;\n        mi = i;\n        for (j = i; j &lt; n; ++j) {\n            if (l[j].date &lt; min) {\n                min = l[j].date;\n                mi = j;\n            }\n        }\n        Letter t = l[i];\n        l[i] = l[mi];\n        l[mi] = t;\n    }\n}\n\nvoid getTwoDigits(int *);\n\nvoid getTime(int *dd, int *MM, int *hh, int *mm)\n{\n    getTwoDigits(dd);\n    getTwoDigits(MM);\n    getTwoDigits(hh);\n    getTwoDigits(mm);\n}\n\nvoid getTwoDigits(int *n)\n{\n    *n = 0;\n    *n += (getchar() - '0') * 10;\n    *n += getchar() - '0';\n    getchar();\n}\n\nint packDate(int dd, int MM, int hh, int mm)\n{\n    mm += MM * 31 * 12 * 60 + dd * 12 * 60 + hh * 60;\n    return mm;\n}\n</code></pre>\n\n<p>The code works fine on provided test, and on the test I found in the discussion section. I think I could try to generate all the tests for a specific <code>n</code>, then write a script to go over all of them, and then manually check all the answers. Before I start this, can anyone come up with a test or with an idea how to do testing the most fast and efficient way? </p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "edited": false, "score": 1, "creation_date": 1425494236, "post_id": 28861929, "comment_id": 45989685, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/13113171/structs-in-c-compiler-error\">Structs in C, compiler error</a>"}, {"owner": {"reputation": 41, "user_id": 4311205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a02fc1cbf39114cae829d8392163e6?s=128&d=identicon&r=PG&f=1", "display_name": "KKC", "link": "https://stackoverflow.com/users/4311205/kkc"}, "reply_to_user": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "edited": false, "score": 0, "creation_date": 1425494941, "post_id": 28861929, "comment_id": 45990117, "body": "Thanks Adam, Yes it is duplicate.."}, {"owner": {"reputation": 41, "user_id": 4311205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a02fc1cbf39114cae829d8392163e6?s=128&d=identicon&r=PG&f=1", "display_name": "KKC", "link": "https://stackoverflow.com/users/4311205/kkc"}, "reply_to_user": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "edited": false, "score": 0, "creation_date": 1425495003, "post_id": 28861929, "comment_id": 45990158, "body": "I have aleady falged this question. Hopefully it will be removed soon.."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4311205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a02fc1cbf39114cae829d8392163e6?s=128&d=identicon&r=PG&f=1", "display_name": "KKC", "link": "https://stackoverflow.com/users/4311205/kkc"}, "edited": false, "score": 0, "creation_date": 1425493772, "post_id": 28861975, "comment_id": 45989438, "body": "Thanks BsD.. I think I should delete this question in that case. Looks like my book is not perfectly updated."}], "tags": [], "owner": {"reputation": 1439, "user_id": 3717347, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/rUWzF.jpg?s=128&g=1", "display_name": "lychee", "link": "https://stackoverflow.com/users/3717347/lychee"}, "is_accepted": true, "score": 0, "last_activity_date": 1425493310, "creation_date": 1425493310, "answer_id": 28861975, "question_id": 28861929, "link": "https://stackoverflow.com/questions/28861929/errata-of-kr-book-on-c-programming/28861975#28861975", "title": "Errata of K&amp;R book on C programming", "body": "<p>It's not missing since p1 is defined as struct point in the paramter, also I've looked up the K&amp;R and the addpoint is defined as <code>struct point addpoint(struct point p1,struct point p2);</code> </p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4311205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a02fc1cbf39114cae829d8392163e6?s=128&d=identicon&r=PG&f=1", "display_name": "KKC", "link": "https://stackoverflow.com/users/4311205/kkc"}, "edited": false, "score": 0, "creation_date": 1425494822, "post_id": 28862264, "comment_id": 45990040, "body": "actually I compiled it and checked with my MS VC++ setup and it gave type error when I miss &quot;point&quot; in type. Just wanted to be 100% sure abt it."}], "tags": [], "owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1425494197, "creation_date": 1425494197, "answer_id": 28862264, "question_id": 28861929, "link": "https://stackoverflow.com/questions/28861929/errata-of-kr-book-on-c-programming/28862264#28862264", "title": "Errata of K&amp;R book on C programming", "body": "<p>OP you're quite right, the \"point\" is missing. I <strong>guess</strong> early compilers were probably permissive enough that this sort of thing slipped through the cracks. </p>\n\n<p>I don't think you can guarantee any errata list is complete, but this book has been around for so long I think pretty much all the main problems would have been spotted. Having said that, i never noticed the problem you pointed out just now.</p>\n\n<p>If you're that concerned, i suggest that you should be suspicious of everything, and compile and run all programs using a recent C89 compiler at the strictest possible levels of conformance.</p>\n"}], "owner": {"reputation": 41, "user_id": 4311205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a02fc1cbf39114cae829d8392163e6?s=128&d=identicon&r=PG&f=1", "display_name": "KKC", "link": "https://stackoverflow.com/users/4311205/kkc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 28861975, "answer_count": 2, "score": 0, "last_activity_date": 1425494197, "creation_date": 1425493184, "question_id": 28861929, "link": "https://stackoverflow.com/questions/28861929/errata-of-kr-book-on-c-programming", "title": "Errata of K&amp;R book on C programming", "body": "<p>I am going through the K&amp;R book{2nd Addition} on C lang. \nOn Page No 107, I found that struct type \"Point\" is missing form the \"return type\" of the \"addpoint\" function. \nFrom The Book</p>\n\n<pre><code>/* addpoints: add two points */\n\n struct addpoint(struct point p1, struct point p2)\n {\n p1.x += p2.x;\n p1.y += p2.y;\n return p1;\n }\n</code></pre>\n\n<p>Was expecting something like </p>\n\n<pre><code>    struct point addpoint(struct point p1, struct point p2)\n{\n.\n.\n.\n</code></pre>\n\n<p>Is my understand correct when I say \"point\" is missing from return type? What are other errata that I need to look for in this book? \nI found this link\n<a href=\"http://cm.bell-labs.com/cm/cs/cbook/2ediffs.html\" rel=\"nofollow\">http://cm.bell-labs.com/cm/cs/cbook/2ediffs.html</a>\n,Is this complete list? If someone can point me more examples like this it will be good. </p>\n\n<p>Thanks in Advance.</p>\n"}, {"tags": ["c", "variables", "global"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1425493040, "post_id": 28861842, "comment_id": 45989004, "body": "I know, don&#39;t use a global variable... The posted code is not enough. You must be doing something else somewhere..."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 1, "creation_date": 1425493611, "post_id": 28861842, "comment_id": 45989353, "body": "May need to expand code snippet to show the true scope of those &quot;global&quot; variables.  You should also explicitly initialize them to zero when declaring them."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 1, "creation_date": 1425493958, "post_id": 28861842, "comment_id": 45989542, "body": "@stevesliva,  global variables are already initialized to 0"}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 3, "creation_date": 1425494559, "post_id": 28861842, "comment_id": 45989880, "body": "Yeah, you need to show more code, also pretty sure what you&#39;ve shown up there won&#39;t work, on account of the stray semi-colon in your function declaration."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1425496451, "post_id": 28861842, "comment_id": 45991008, "body": "@AlterMann - I know.  Doesn&#39;t effect my comment."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1425495125, "post_id": 28862485, "comment_id": 45990237, "body": "The second favourite trap is posting code that is <i>something like</i> the code that malfunctions, when it should be an example that demonstrates the fault."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425495236, "post_id": 28862485, "comment_id": 45990299, "body": "yep, but if the OP is truly a newbie to C, this has a high probability of being the cause :) We&#39;ll see, and the advice is good for a newbie anyway."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425495366, "post_id": 28862485, "comment_id": 45990359, "body": "I agree, let&#39;s see. I upvote this, as I have wondered why a test is done that way round: <code>constant == variable</code>."}], "tags": [], "owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "is_accepted": false, "score": 2, "last_activity_date": 1425495336, "last_edit_date": 1425495336, "creation_date": 1425494971, "answer_id": 28862485, "question_id": 28861842, "link": "https://stackoverflow.com/questions/28861842/how-to-avoid-my-global-variable-gets-reset-when-i-call-my-function/28862485#28862485", "title": "How to avoid my global variable gets reset when i call my function", "body": "<p>As others have commented, it doesn't look like you've pasted your code directly from the editor - instead typing it in from scratch.</p>\n\n<p>That said, I suspect you've fallen afoul of one of the most notorious traps of C that still catches professional programmers occasionally (I've been using the language since the early 80's and I still do it).</p>\n\n<p>Go to your original code and take a very close look at the line you've pasted as </p>\n\n<pre><code>if (record_number == 100)\n</code></pre>\n\n<p>Does it actually say this?</p>\n\n<pre><code>if (record_number = 100)\n</code></pre>\n\n<p>If so, the <code>if</code> statement will be executed every time you call the function because the predicate (<code>record_number = 100</code>) first assigns 100 to <code>record_number</code> then tests the result to see if it's non-zero (which <code>100</code> is, of course) and takes the <code>if</code> branch, setting <code>record_number</code> to zero (and coincidentally incrementing <code>file_number</code>).</p>\n\n<p>The way to avoid this is to develop a coding habit very quickly and then stick to it. Always code equality comparisons against a constant this way:</p>\n\n<pre><code>if(100 == record_number)\n</code></pre>\n\n<p>Then, if you mistype the <code>==</code> as <code>=</code> the compiler will throw an error for you.</p>\n"}], "owner": {"reputation": 1, "user_id": 4633421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1332f86fd2db7727f76e17d4715b707a?s=128&d=identicon&r=PG&f=1", "display_name": "GSM GBL", "link": "https://stackoverflow.com/users/4633421/gsm-gbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1662, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425495642, "creation_date": 1425492909, "question_id": 28861842, "link": "https://stackoverflow.com/questions/28861842/how-to-avoid-my-global-variable-gets-reset-when-i-call-my-function", "title": "How to avoid my global variable gets reset when i call my function", "body": "<p>i am a beginner and start to write some simple program.\nI want to create a global variable to maintain my record number, unfortunately, my variable reset to zero every time i call my function. I looked into some other sample like people using static or volatile to declare my variable, i tried them both but still resetting my value. Please kindly advise. Thanks.\nPlease take a look my function below.</p>\n\n<pre><code>int record_number;\nint file_number;\n\nint Record_Count(int record_correct);\n{\n   if (record_correct)\n      record_number++;\n   if (record_number == 100)\n   {\n      file_number++;\n      record_number = 0;\n   }\n\n   return record_number;\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "header-files"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425492401, "post_id": 28861621, "comment_id": 45988646, "body": "Arduino IDE is doing some funny (but totally not funny) stuff with the sources. It is rearranging them, including and messing in a totally weird way. So to the point: Arduino library should be a C++ class, residing in the Libraries directory under Arduino directory. This is the only way I could do it reliably..Or if it&#39;s just an <code>.h</code> file, it should be in the project directory"}, {"owner": {"reputation": 409, "user_id": 2216555, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/FJymV.png?s=128&g=1", "display_name": "AleX_", "link": "https://stackoverflow.com/users/2216555/alex"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425492921, "post_id": 28861621, "comment_id": 45988933, "body": "Thanks for the tip on having c++ class @EugeneSh. I will try the other trick and see if it will work."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1425492987, "post_id": 28861621, "comment_id": 45988968, "body": "This doesn&#39;t answer the question, but I would suggest ditching the Arduino  \u201cIDE\u201d in favour of your own build process (e.g., makefile) - since you already know how to make your own libraries, it seems unlikely that you would benefit from the simplified IDE."}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 2216555, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/FJymV.png?s=128&g=1", "display_name": "AleX_", "link": "https://stackoverflow.com/users/2216555/alex"}, "edited": false, "score": 1, "creation_date": 1425598939, "post_id": 28876157, "comment_id": 46040828, "body": "Thanks! Just to be safe, I added <code>extern &quot;C&quot;{</code> to the top of my c files as well!"}, {"owner": {"reputation": 309, "user_id": 885507, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/uMVGY.jpg?s=128&g=1", "display_name": "waghekapil", "link": "https://stackoverflow.com/users/885507/waghekapil"}, "edited": false, "score": 0, "creation_date": 1507987672, "post_id": 28876157, "comment_id": 80436132, "body": "It helped me too. Thanks! I&#39;m working with CPP file and for this I used <code>extern &quot;C++&quot; {</code> . Hope this helps the CPP guys."}], "tags": [], "owner": {"reputation": 664, "user_id": 2704120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfe0b8ee879a4ea8e0fd3aac43f3d184?s=128&d=identicon&r=PG&f=1", "display_name": "credondo", "link": "https://stackoverflow.com/users/2704120/credondo"}, "is_accepted": true, "score": 8, "last_activity_date": 1425553184, "last_edit_date": 1425553184, "creation_date": 1425552868, "answer_id": 28876157, "question_id": 28861621, "link": "https://stackoverflow.com/questions/28861621/how-to-use-standard-c-header-files-in-arduino/28876157#28876157", "title": "how to use standard c header files in arduino", "body": "<p>You have to tell Arduino that your library uses C naming.  You can use <code>extern \"C\"</code>  directly in the Arduino code.</p>\n\n<p>The next code compiles in Arduino IDE 1.05.</p>\n\n<pre><code>extern \"C\"{\n  #include &lt;mycLib.h&gt;\n}\n\nvoid setup()\n{\n  mycLibInit(0);\n}\n\nvoid loop()\n{\n}\n</code></pre>\n\n<p>mycLib.h</p>\n\n<pre><code>#ifndef _MY_C_LIB_h\n#define _MY_C_LIB_h\n\ntypedef struct {char data1;\n                int data2;\n                } sampleStruct;\n\n  void mycLibInit(int importantParam);\n  void mycLibDoStuff(char anotherParam);\n\n  sampleStruct mycLibGetStuff();\n\n#endif\n</code></pre>\n\n<p>mycLib.c:</p>\n\n<pre><code>#include \"mycLib.h\"\nsampleStruct _sample;\nvoid mycLibInit(int importantParam)\n{\n    //init stuff!\n    //lets say _sample.data2 = importantParam\n}\n\nvoid mycLibDoStuff(char anotherParam)\n{\n    //do stuff!\n    //lets say _sample.data1 = anotherParam\n}\n\nsampleStruct mycLibGetStuff()\n{\n    //return stuff, \n    // lets say return _sample;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8025, "user_id": 4607349, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/MePZl.jpg?s=128&g=1", "display_name": "Michal Foksa", "link": "https://stackoverflow.com/users/4607349/michal-foksa"}, "is_accepted": false, "score": 0, "last_activity_date": 1425557946, "last_edit_date": 1492087809, "creation_date": 1425557946, "answer_id": 28877737, "question_id": 28861621, "link": "https://stackoverflow.com/questions/28861621/how-to-use-standard-c-header-files-in-arduino/28877737#28877737", "title": "how to use standard c header files in arduino", "body": "<p>This issue has been already discuses here:</p>\n\n<p><a href=\"https://arduino.stackexchange.com/questions/946/how-to-call-c-functions-from-arduino-sketch\">https://arduino.stackexchange.com/questions/946/how-to-call-c-functions-from-arduino-sketch</a></p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 409, "user_id": 2216555, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/FJymV.png?s=128&g=1", "display_name": "AleX_", "link": "https://stackoverflow.com/users/2216555/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9515, "favorite_count": 1, "accepted_answer_id": 28876157, "answer_count": 2, "score": 5, "last_activity_date": 1425557946, "creation_date": 1425492174, "question_id": 28861621, "link": "https://stackoverflow.com/questions/28861621/how-to-use-standard-c-header-files-in-arduino", "title": "how to use standard c header files in arduino", "body": "<p>I have a simple C library that looks like this:</p>\n\n<pre><code>//mycLib.h\n#ifndef _MY_C_LIB_h\n#define _MY_C_LIB_h                   \n    typedef struct {char data1;\n                    int data2;\n                    } sampleStruct;             \n\n    extern void mycLibInit(int importantParam);\n    extern void mycLibDoStuff(char anotherParam);\n\n    extern void sampleStruct mycLibGetStuff();\n#endif\n\n\n\n//mycLib.c\nsampleStruct _sample;\nvoid mycLibInit(int importantParam)\n{\n    //init stuff!\n    //lets say _sample.data2 = importantParam\n}\n\nvoid mycLibDoStuff(char anotherParam)\n{\n    //do stuff!\n    //lets say _sample.data1 = anotherParam\n}\n\nsampleStruct mycLibGetStuff()\n{\n    //return stuff, \n    // lets say return _sample;\n}\n</code></pre>\n\n<p>It works well when called from other test software. However, as part of another project, I have to include it in an Arduino project and compile it to work on that platform as well. Unfortunately, When I run my Arduino code that looks like this:</p>\n\n<pre><code>#include &lt;mycLib.h&gt;\n\nvoid setup()\n{\n  mycLibInit(0);\n}\n\nvoid loop()\n{\n}\n</code></pre>\n\n<p>I get the following compile error:\ncode.cpp.o: In function <code>setup':\nC:\\Program Files (x86)\\Arduino/code.ino:6: undefined reference to</code>mycLibInit(int)'</p>\n\n<p>I have read following threads on Arduino website:</p>\n\n<ul>\n<li><a href=\"http://www.arduino.cc/en/hacking/libraries\" rel=\"noreferrer\">http://www.arduino.cc/en/hacking/libraries</a></li>\n<li><a href=\"http://playground.arduino.cc/Code/Library\" rel=\"noreferrer\">http://playground.arduino.cc/Code/Library</a></li>\n<li><a href=\"http://forum.arduino.cc/index.php?topic=37371.0\" rel=\"noreferrer\">http://forum.arduino.cc/index.php?topic=37371.0</a></li>\n<li><a href=\"http://arduino.cc/en/Hacking/BuildProcess\" rel=\"noreferrer\">http://arduino.cc/en/Hacking/BuildProcess</a></li>\n</ul>\n\n<p>but in all those cases the external library was in form of a c++ class with a constructor call in the Arduino code.</p>\n\n<p>Is there a way to tell Arduino IDE that \"hey this function is part of this <strong><em>C</em></strong> library\" or, should I re-write my functionality into c++ classes? Its not my favorite solution because the same c-Module is being used in other projects.\n(I know I probably can use preprocessor directives to have the code in the same place but it is not a pretty solution!)</p>\n"}, {"tags": ["c", "macos", "gcc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1425492239, "post_id": 28861562, "comment_id": 45988545, "body": "It seems there&#39;s already a <code>mergesort</code> function declared in the <code>&lt;stdlib.h&gt;</code> system header file, which is declared differently from your function. You might think about renaming your function?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1425492396, "post_id": 28861562, "comment_id": 45988642, "body": "Possibly, since it&#39;s not a standard C (or POSIX) function there might be some preprocessor macro to disable it. Read the header file."}, {"owner": {"reputation": 113, "user_id": 4181253, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4802deb73ee48b10a1b512ae25810000?s=128&d=identicon&r=PG&f=1", "display_name": "page4", "link": "https://stackoverflow.com/users/4181253/page4"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1425492771, "post_id": 28861562, "comment_id": 45988848, "body": "Whoa, I changed the function&#39;s name and it worked!"}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 3213803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZciZ.gif?s=128&g=1", "display_name": "Cob", "link": "https://stackoverflow.com/users/3213803/cob"}, "is_accepted": true, "score": 1, "last_activity_date": 1425492681, "creation_date": 1425492681, "answer_id": 28861778, "question_id": 28861562, "link": "https://stackoverflow.com/questions/28861562/compiling-error-on-osx-but-not-on-windows-or-linux/28861778#28861778", "title": "Compiling error on OSX but not on Windows or Linux", "body": "<p>It is most likely due to git.</p>\n\n<p><em>stdlib.h</em> on OS X already has a method called mergesort in it, so you cannot have that method declared in your code.</p>\n\n<p>I suggest changing the name of <code>mergesort</code> to something else, like <code>myMergesort</code> (or something along that line).</p>\n\n<p>Source:\n<a href=\"http://comments.gmane.org/gmane.comp.version-control.git/195773\" rel=\"nofollow\">See here.</a></p>\n"}], "owner": {"reputation": 113, "user_id": 4181253, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4802deb73ee48b10a1b512ae25810000?s=128&d=identicon&r=PG&f=1", "display_name": "page4", "link": "https://stackoverflow.com/users/4181253/page4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 28861778, "answer_count": 1, "score": 0, "last_activity_date": 1425492681, "creation_date": 1425491962, "question_id": 28861562, "link": "https://stackoverflow.com/questions/28861562/compiling-error-on-osx-but-not-on-windows-or-linux", "title": "Compiling error on OSX but not on Windows or Linux", "body": "<p>I have a C program that I was able to compile on windows using Code Block (which I believe uses GCC compiler) and on Linux using terminal gcc compiler. I tried to compile it on OSX using eclipse, code block for mac, terminal gcc, and even Qt but they all give me the same set of errors:</p>\n\n<pre><code>hw1.c:9:19: error: conflicting types for 'mergesort'\nstruct listnode * mergesort(struct listnode *data)\n                  ^\n/usr/include/stdlib.h:281:6: note: previous declaration is here\nint      mergesort(void *, size_t, size_t,\n         ^\nhw1.c:27:25: error: too few arguments to function call, expected 4, have 1\n        ahead = mergesort(ahead);\n                ~~~~~~~~~      ^\n/usr/include/stdlib.h:281:1: note: 'mergesort' declared here\nint      mergesort(void *, size_t, size_t,\n^\nhw1.c:28:25: error: too few arguments to function call, expected 4, have 1\n        bhead = mergesort(bhead);\n                ~~~~~~~~~      ^\n/usr/include/stdlib.h:281:1: note: 'mergesort' declared here\nint      mergesort(void *, size_t, size_t,\n^\nhw1.c:68:25: error: too few arguments to function call, expected 4, have 1\n   node = mergesort(node);\n          ~~~~~~~~~     ^\n/usr/include/stdlib.h:281:1: note: 'mergesort' declared here\nint      mergesort(void *, size_t, size_t,\n^\n</code></pre>\n"}, {"tags": ["c", "file", "client", "server"], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 0, "last_activity_date": 1425493489, "creation_date": 1425493489, "answer_id": 28862037, "question_id": 28861544, "link": "https://stackoverflow.com/questions/28861544/show-only-some-contents-of-a-folder-in-a-client-server-in-c/28862037#28862037", "title": "Show only some contents of a folder in a client/server in C", "body": "<p>Just add another condition to the ones that call `continue:</p>\n\n<pre><code>|| ((4 &lt;= strlen(ep-&gt;d_name)) &amp;&amp; (strstr(ep-&gt;d_name, \".txt\") == (ep-&gt;d_name + strlen(ep-&gt;d_name) - 4)))\n</code></pre>\n\n<p>Note: The <code>4</code> is derived from the number of characters in <code>\".txt\"</code>.</p>\n\n<p>Note^2: The way the above test is coded if far from being efficient. Calling <code>strlen()</code> two time on the same \"string\" for example is not nice. </p>\n"}], "owner": {"reputation": 227, "user_id": 4176761, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/D4Vrb.jpg?s=128&g=1", "display_name": "atapi19", "link": "https://stackoverflow.com/users/4176761/atapi19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 28862037, "answer_count": 1, "score": 0, "last_activity_date": 1425493489, "creation_date": 1425491901, "question_id": 28861544, "link": "https://stackoverflow.com/questions/28861544/show-only-some-contents-of-a-folder-in-a-client-server-in-c", "title": "Show only some contents of a folder in a client/server in C", "body": "<p>I'm developing a client/server program in C where I want to see the file contents in a folder. The program works, but I would to see only a .txt file, not all the files. How can I do this? Thank you!</p>\n\n<pre><code>DIR *dp;           \nint rv,rv1,stop_received,nread2;       \nstruct dirent *ep;   \nchar buffer[300],appoggio[1000],buffer2[300];    \n        dp = opendir (\"./\");\n        if (dp != NULL){\n            while (ep = readdir(dp)){\n               if ((strcmp(ep-&gt;d_name, \".\") == 0) \n|| (strcmp(ep-&gt;d_name,\"..\") == 0) \n|| (strcmp(ep-&gt;d_name, \"SERVERD.c\\0\") == 0)\n||(strcmp(ep-&gt;d_name, \"h\") == 0)\n|| (strcmp(ep-&gt;d_name, \"Men\u00f9 segreteria\") == 0)\n||(strcmp(ep-&gt;d_name, \"Men\u00f9 docente\") == 0)) \ncontinue;\n           strcpy(buffer,ep-&gt;d_name);\n           strcat(buffer,\"\\n\");\n           send(conn_fd, buffer,strlen(buffer), 0);   \n\n            }\n            (void) closedir(dp);\n        }else\n            perror (\"Couldn't open the directory\");\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425491817, "post_id": 28861475, "comment_id": 45988292, "body": "You can just cast constness but I don&#39;t know if that can be good."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1425491845, "post_id": 28861475, "comment_id": 45988308, "body": "Does it really say <code>conversation</code>? Please use the actual error strings. And fix the title."}, {"owner": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "edited": false, "score": 0, "creation_date": 1425491864, "post_id": 28861475, "comment_id": 45988321, "body": "Not a strict duplicate, but this should have some helpful information: <a href=\"http://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c/1704433#1704433\" title=\"what is the difference between char s and char s in c\">stackoverflow.com/questions/1704407/&hellip;</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425491915, "post_id": 28861475, "comment_id": 45988349, "body": "Yes please post the exact error message, copy and paste, it&#39;s not possible that it says <code>conversation</code>."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1425492020, "post_id": 28861475, "comment_id": 45988419, "body": "I guess you can&#39;t talk about string literals and char* in c++11.  Freaken passive-aggressive language..."}, {"owner": {"reputation": 124, "user_id": 2824248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lxori.jpg?s=128&g=1", "display_name": "Masoud AMR", "link": "https://stackoverflow.com/users/2824248/masoud-amr"}, "edited": false, "score": 0, "creation_date": 1425492024, "post_id": 28861475, "comment_id": 45988426, "body": "is parameter 3 space?"}, {"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "edited": false, "score": 0, "creation_date": 1425522677, "post_id": 28861475, "comment_id": 46002225, "body": "Oops.  one of those &quot;spell checkers&quot; got me again.  &quot;conversation&quot; should be conversion.   So the exact message is .... &quot;C++ 11 does not allow conversion from string literal to char *"}], "answers": [{"comments": [{"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "edited": false, "score": 0, "creation_date": 1425522813, "post_id": 28861607, "comment_id": 46002254, "body": "Thank you.  This looks like the direction to go."}, {"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "edited": false, "score": 0, "creation_date": 1425524390, "post_id": 28861607, "comment_id": 46002633, "body": "Creating the character string successfully removed the error."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": false, "score": 6, "last_activity_date": 1425492107, "creation_date": 1425492107, "answer_id": 28861607, "question_id": 28861475, "link": "https://stackoverflow.com/questions/28861475/conversion-from-string-literal-to-char/28861607#28861607", "title": "Conversion from string literal to char *", "body": "<p>To be safe, you could create <code>char</code> arrays initialised to the same values, for example:</p>\n\n<pre><code>char dgeqrf[] = \"DGEQRF\";\nchar space[] = \" \";\n</code></pre>\n\n<p>Or you could check the source code of the function; if it doesn't actually modify the contents of those arrays you could change the arguments to <code>const char *</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 827, "user_id": 2534793, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0852a47304b79991d99202c05eabe454?s=128&d=identicon&r=PG", "display_name": "senfen", "link": "https://stackoverflow.com/users/2534793/senfen"}, "is_accepted": false, "score": 5, "last_activity_date": 1425550580, "creation_date": 1425550580, "answer_id": 28875291, "question_id": 28861475, "link": "https://stackoverflow.com/questions/28861475/conversion-from-string-literal-to-char/28875291#28875291", "title": "Conversion from string literal to char *", "body": "<p>Your function takes \"char *\", not \"const char *\". String literals can be assigned only to \"const char *\".</p>\n"}, {"comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1510737245, "post_id": 47184459, "comment_id": 81557554, "body": "re. &quot;if you declare <code>formatString</code> as a <code>const char *</code> this won&#39;t work&quot; \u2013 the code shown here will work just fine with <code>const char *</code>, but the potential problem is that the function takes <code>char *</code> not <code>const char *</code> so we don&#39;t know if it is going to modify the contents of the string, and modifying the string literals is not permitted. Hence the need to have a modifiable array, either by conversion from <code>string</code> or as a <code>char</code> array instead of pointer (as per my answer). <i>Unless</i> you need to assign the contents dynamically (like in this answer), the array is simpler."}], "tags": [], "owner": {"reputation": 56, "user_id": 5779541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf4ddc81c4b7b066fd17a9c239aca17?s=128&d=identicon&r=PG&f=1", "display_name": "Albertus", "link": "https://stackoverflow.com/users/5779541/albertus"}, "is_accepted": true, "score": 1, "last_activity_date": 1510157415, "creation_date": 1510157415, "answer_id": 47184459, "question_id": 28861475, "link": "https://stackoverflow.com/questions/28861475/conversion-from-string-literal-to-char/47184459#47184459", "title": "Conversion from string literal to char *", "body": "<p>Sorry for being so late, I just bumped into this problem. You can try this, </p>\n\n<pre><code>string dgeqrf = \"DGEQRF\";\n</code></pre>\n\n<p>One problem with using \"const char *\" is code like this, </p>\n\n<pre><code>string formatString;\nswitch (format)\n{\n    case FORMAT_RGB:  formatString = \"RGB\"; break;\n    case FORMAT_RGBA: formatString = \"RGBA\"; break;\n    case FORMAT_TP10: formatString = \"TP10\"; break;\n    default:          formatString = \"Unsupported\"; break;\n}\n</code></pre>\n\n<p>If you declare formatString as a \"const char *\", this won't work. </p>\n"}], "owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7264, "favorite_count": 1, "accepted_answer_id": 47184459, "answer_count": 3, "score": 2, "last_activity_date": 1510157415, "creation_date": 1425491705, "last_edit_date": 1425492307, "question_id": 28861475, "link": "https://stackoverflow.com/questions/28861475/conversion-from-string-literal-to-char", "title": "Conversion from string literal to char *", "body": "<p>I am trying to make a c function work in some publicly available linear algebra code. </p>\n\n<p>the publicly available prototype is\u2026</p>\n\n<pre><code>int ilaenv_(int *, char *, char *, int *, int *,int *, int *);\n</code></pre>\n\n<p>The publicly available code has the function call\u2026</p>\n\n<pre><code>nb = ilaenv_(&amp;c__1, \"DGEQRF\", \" \", m, n, &amp;c_n1, &amp;c_n1); \n</code></pre>\n\n<p>where m, n, c_1, and c_n1 are integers,</p>\n\n<p>The error message is.<br>\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C++ 11 does not allow conversation from string literal to char *.\n</code></pre>\n\n<p>I did not create the code, but downloaded it from the LAPACK site. I hesitate to make too many changes to publicly available code that supposedly works, for fear of introducing errors.  However, this error is showing up on a number of functions in the program that I am working on.</p>\n\n<p>How can I resolve this?</p>\n"}, {"tags": ["c", "xcode", "function"], "comments": [{"owner": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "edited": false, "score": 1, "creation_date": 1425491883, "post_id": 28861467, "comment_id": 45988333, "body": "Where is the problem?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425492195, "post_id": 28861467, "comment_id": 45988523, "body": "I am failing to parse the question text. Please improve your wording."}, {"owner": {"reputation": 43, "user_id": 3871288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/578f9031a3c781ad871b9764e0af650d?s=128&d=identicon&r=PG&f=1", "display_name": "sasukedotcom", "link": "https://stackoverflow.com/users/3871288/sasukedotcom"}, "edited": false, "score": 0, "creation_date": 1425492346, "post_id": 28861467, "comment_id": 45988607, "body": "The problem is that I can&#39;t create a function to call for. That&#39;s literally all I need to do. I tried creating a function that&#39;ll compute just the actualDamage or just the playerHealth but the minDamage and maxDamage throws me off. I&#39;m not sure if you get it but creating any functions to call for is the only thing I&#39;m looking for."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1425546355, "post_id": 28861467, "comment_id": 46010143, "body": "How can&#39;t you create it? is your source file read-only? haven&#39;t you the access rights to modify files in your system? Have you a valid account to do whatever you want?  Is the compiler complainting about something in your code? Do you have problems building the program? Have you tried to plug the power socket to turn on your computer? Have you lost your keys at your workplace and you cannot get access to the computer?  An error message from the compiler (or more specific problem description) would be nice to make a diagnostic."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3871288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/578f9031a3c781ad871b9764e0af650d?s=128&d=identicon&r=PG&f=1", "display_name": "sasukedotcom", "link": "https://stackoverflow.com/users/3871288/sasukedotcom"}, "edited": false, "score": 0, "creation_date": 1425492848, "post_id": 28861681, "comment_id": 45988892, "body": "I see how that works but I am confused regarding how I would create a function to compute something like actualDamage within my program. Thanks."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 43, "user_id": 3871288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/578f9031a3c781ad871b9764e0af650d?s=128&d=identicon&r=PG&f=1", "display_name": "sasukedotcom", "link": "https://stackoverflow.com/users/3871288/sasukedotcom"}, "edited": false, "score": 0, "creation_date": 1425494585, "post_id": 28861681, "comment_id": 45989893, "body": "You&#39;ve defined <code>result</code> twice, once in the top of your main() function, then again when you use it with compute_something.  Remove <b><i>float</i></b> from in front of the line <b><i>result = compute_something(10.0, 3.5, .002);</i></b>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 43, "user_id": 3871288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/578f9031a3c781ad871b9764e0af650d?s=128&d=identicon&r=PG&f=1", "display_name": "sasukedotcom", "link": "https://stackoverflow.com/users/3871288/sasukedotcom"}, "edited": false, "score": 0, "creation_date": 1425494803, "post_id": 28861681, "comment_id": 45990023, "body": "In functions, there are <code>return</code> values, and input values, and <b>*output</b> values:  see my edit to see how to get <i>output</i> from a function parameter."}, {"owner": {"reputation": 43, "user_id": 3871288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/578f9031a3c781ad871b9764e0af650d?s=128&d=identicon&r=PG&f=1", "display_name": "sasukedotcom", "link": "https://stackoverflow.com/users/3871288/sasukedotcom"}, "edited": false, "score": 0, "creation_date": 1425495225, "post_id": 28861681, "comment_id": 45990291, "body": "I used the return function strategy you showed me in your edit for my computeSomething function. I&#39;m not sure where it&#39;s going wrong. Apologize for my lack of understanding."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 43, "user_id": 3871288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/578f9031a3c781ad871b9764e0af650d?s=128&d=identicon&r=PG&f=1", "display_name": "sasukedotcom", "link": "https://stackoverflow.com/users/3871288/sasukedotcom"}, "edited": false, "score": 0, "creation_date": 1425495869, "post_id": 28861681, "comment_id": 45990662, "body": "Functions can have a return, and function can have an output.  You may be confusing them.  A void function for example has no return value, but it <i>can have an output parameter, usually in the form of a pointer _...(int x, int *result);</i> <b><i>1st param = input, 2nd param = output</i></b>"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1425495412, "last_edit_date": 1425495412, "creation_date": 1425492354, "answer_id": 28861681, "question_id": 28861467, "link": "https://stackoverflow.com/questions/28861467/calling-a-function-in-c-with-variables-not-being-outputted/28861681#28861681", "title": "Calling a function in C with variables not being outputted", "body": "<p><strong><em>Edit 3</em></strong>  </p>\n\n<p>Change your prototype from:  </p>\n\n<pre><code>double computeSomething(unsigned int maxDamage, unsigned int minDamage,\n                        double playerArmor, double actualDamage);\n</code></pre>\n\n<p>To:  </p>\n\n<pre><code>double computeSomething(unsigned int maxDamage, unsigned int minDamage,\n                        double playerArmor, double *actualDamage);  \n</code></pre>\n\n<p>Call it like this: </p>\n\n<pre><code>float res;\ncomputeSomething(34, 15, 30.5, &amp;res);  \n</code></pre>\n\n<p>See my latest example below for how to modify the result in the actual function. </p>\n\n<p><strong><em>I can't create a function to call for. That's literally all I need to do.</em></strong> </p>\n\n<p>This defines a function that is <em>called</em> from <code>main()</code>;<br>\n(For something more specific, describe it specifically)    </p>\n\n<p><strong><em>EDIT</em></strong> </p>\n\n<p>Added a function that is passed values, computes something, and returns results.  Perhaps you can apply the principles here to your problem.  (I do not fully understand your needs from the description you have provided)  </p>\n\n<pre><code>//prototypes\nvoid PrintSomething(char *str);\nfloat compute_something(float x, float y, float z);//per clarification in comments above  \nvoid return_through_param(float x, float y, float *result);\nint main(void)\n{\n    PrintSomething(\"Hello World\\n\");\n    //function that can return something\n    float result = compute_something(10.0, 3.5, .002);\n    printf(\"Here are the results: %f\\n\", result); \n\n    //for Edit 2:\n    return_through_param(10, .0001, &amp;result);\n    printf(\"This is the new result: %f\\n\", result);\n\n    return 0;\n}  \n\nvoid PrintSomething(char *str)\n{\n     printf(str);\n}\n//Edit - Added this function\nfloat compute_something(float x, float y, float z)\n{\n    return x*y/z;\n}  \n\n//Edit 2 - added this function that passes pointer, for output\nvoid return_through_param(float x, float y, float *result)\n{\n     return *result = x/y;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3871288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/578f9031a3c781ad871b9764e0af650d?s=128&d=identicon&r=PG&f=1", "display_name": "sasukedotcom", "link": "https://stackoverflow.com/users/3871288/sasukedotcom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 28861681, "answer_count": 1, "score": 0, "last_activity_date": 1425495412, "creation_date": 1425491688, "last_edit_date": 1425494633, "question_id": 28861467, "link": "https://stackoverflow.com/questions/28861467/calling-a-function-in-c-with-variables-not-being-outputted", "title": "Calling a function in C with variables not being outputted", "body": "<p>This is how it looks now but it's telling me that the variable 'result' is unused. Why is this? I think I've figured out the use of the function in this program but I can't configure everything quite yet. Still need some help, thanks.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\ndouble computeSomething(unsigned int maxDamage, unsigned int minDamage,\n                        double playerArmor, double actualDamage);\n\nint main(void){\n\n    double playerHealth, playerArmor, actualDamage, result = 0;\n    unsigned int minDamage, maxDamage;\n\n    printf(\"Enter Player Health:     \");\n    scanf(\"%lf\", &amp;playerHealth);\n    printf(\"Enter Player Armor (0.0 - 1.0):   \");\n    scanf(\"%lf\", &amp;playerArmor);\n    printf(\"Enter Minimum Damage Dealt:  \");\n    scanf(\"%u\", &amp;minDamage);\n    printf(\"Enter Maximum Damage Dealt:   \");\n    scanf(\"%u\", &amp;maxDamage);\n\n    srand((unsigned int) time(NULL));\n\n    while (playerHealth &gt; 0) {\n\n        double result = computeSomething(maxDamage, minDamage, playerArmor,     actualDamage);\n        playerHealth -= actualDamage;\n\n        printf(\"Current Player Health:%.2lf\\tDamage Dealt: %.2lf\\t\",      playerHealth, actualDamage);\n        if (playerHealth &gt; 0){\n            printf(\"Alive: 1\\n\");\n        } else {\n            printf(\"Alive: 0\\n\");\n        }\n    }\n\n    return 1;\n}\n\ndouble computeSomething(unsigned int maxDamage, unsigned int minDamage,\n                        double playerArmor, double actualDamage)\n{\n     actualDamage = ((rand() % (maxDamage-minDamage + 1)) + minDamage) * (1 -     playerArmor);\n\n    return actualDamage;\n}\n</code></pre>\n"}, {"tags": ["c", "netbeans", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 3641864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80416650756ba5e94640ff40565c6fbe?s=128&d=identicon&r=PG&f=1", "display_name": "GKontos", "link": "https://stackoverflow.com/users/3641864/gkontos"}, "edited": false, "score": 0, "creation_date": 1425503137, "post_id": 28861275, "comment_id": 45994874, "body": "thank you so much!. the $(shell   command is exactly what I needed and I got my makefile to work properly"}], "tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": true, "score": 1, "last_activity_date": 1425491096, "creation_date": 1425491096, "answer_id": 28861275, "question_id": 28861227, "link": "https://stackoverflow.com/questions/28861227/makefile-conditional-statements-not-working/28861275#28861275", "title": "Makefile conditional statements not working", "body": "<p>Backticks aren't command execution in a makefile.</p>\n\n<p>Add <code>$(info $(PROCESSOR))</code> above the <code>ifeq</code> line to see what I mean.</p>\n\n<p>You want:</p>\n\n<pre><code>PROCESSOR=$(shell uname -p)\n\n$ cat Makefile\nPROCESSOR=`uname -p`\n$(info backticks: $(PROCESSOR))\nPROCESSOR=$(shell uname -p)\n$(info $$shell: $(PROCESSOR))\n$ make\nbackticks: `uname -p`\n$shell: x86_64\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3641864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80416650756ba5e94640ff40565c6fbe?s=128&d=identicon&r=PG&f=1", "display_name": "GKontos", "link": "https://stackoverflow.com/users/3641864/gkontos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 28861275, "answer_count": 1, "score": 0, "last_activity_date": 1425491096, "creation_date": 1425490932, "question_id": 28861227, "link": "https://stackoverflow.com/questions/28861227/makefile-conditional-statements-not-working", "title": "Makefile conditional statements not working", "body": "<p>I have the following makefile code where the <code>ifeq</code> statement is not evaluating to true and I don't understand why not:</p>\n\n<pre><code>PROCESSOR=`uname -p`\n\nifeq ($(strip $(PROCESSOR)), x86_64)\nPROCESSOR = -c -march=atom -fPIC -Wall -I../../inc\nelse\nPROCESSOR = -c -march=i386 -fPIC -Wall -I../../inc\nendif\n</code></pre>\n\n<p>I have confirmed on my system that <code>uname -p</code> results in \"x86_64\", but the <code>ifeq</code> statement is evaluating to false and <code>PROCESSOR</code> is being set to <code>-c -march=i386 -fPIC -Wall -I../../inc</code>.  I have also tried <code>ifeq \"$(strip $(PROCESSOR))\" \"x86_64\"</code> and a few variations without the <code>strip</code> function.  Anyone have any suggestions?</p>\n"}, {"tags": ["c", "arrays", "sockets", "char", "int"], "comments": [{"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 3, "creation_date": 1425490337, "post_id": 28861004, "comment_id": 45987471, "body": "it depends on how it&#39;s written on the other side.  By the way, that code wouldn&#39;t compile..."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1425490586, "post_id": 28861004, "comment_id": 45987631, "body": "Are you sure the bytes you&#39;re reading are ASCII?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1425491027, "post_id": 28861004, "comment_id": 45987872, "body": "Have you the code of client writing into the socket ?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425491378, "post_id": 28861004, "comment_id": 45988047, "body": "Put a break point in your code at the point of error.  View the actual value contained in <code>tmp</code> at that point.  You may find that the actual contents do not match what you expected, and you can make adjustments in your code accordingly."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1425491476, "post_id": 28861004, "comment_id": 45988098, "body": "<code>atoi()</code> expects a C-&quot;string&quot;. C-&quot;string&quot;s are <b><code>0</code>-terminated</b> <code>char</code>-arrays. Is <code>tmp</code> a C-&quot;string&quot;?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1425491744, "post_id": 28861004, "comment_id": 45988239, "body": "&quot;<i>I suspect creating this shorter array is not necessary</i>&quot; did you try without it?"}, {"owner": {"reputation": 514, "user_id": 1250682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f00ca41bcd0c028ee8b8c10c10f957b?s=128&d=identicon&r=PG", "display_name": "Michael Wilson", "link": "https://stackoverflow.com/users/1250682/michael-wilson"}, "reply_to_user": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1425493525, "post_id": 28861004, "comment_id": 45989296, "body": "@ethang: The other side (for now) is terminal + telnet. The code does compile."}, {"owner": {"reputation": 514, "user_id": 1250682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f00ca41bcd0c028ee8b8c10c10f957b?s=128&d=identicon&r=PG", "display_name": "Michael Wilson", "link": "https://stackoverflow.com/users/1250682/michael-wilson"}, "edited": false, "score": 0, "creation_date": 1425493966, "post_id": 28861004, "comment_id": 45989549, "body": "Austin: Yes  &#212;rel: No code yet, just using telnet  ryyker: I&#39;m cross compiling for arm and don&#39;t know how to debug this  way. Maybe that should be my focus...   alk: I think tmp is a C-&quot;string&quot; but not certain. How would I know/check?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1425494470, "post_id": 28861004, "comment_id": 45989824, "body": "Why do you try to copy the string from <code>buffer</code> to <code>tmp</code>? Why not just call <code>atoi(buffer)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1425494391, "post_id": 28862230, "comment_id": 45989783, "body": "But why copy the string from <code>buffer</code> to <code>tmp</code> at all, when you can just call <code>atoi(buffer)</code>?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1425494437, "post_id": 28862230, "comment_id": 45989806, "body": "@davmac: Do not ask me, ask the OP ... ;-)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1425494503, "post_id": 28862230, "comment_id": 45989844, "body": "<code>requires buffer to refer to at least 1024 + 1 bytes ...</code> It also requires bytesRead to be non-negative, which cannot be guaranteed ..."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1425494575, "post_id": 28862230, "comment_id": 45989888, "body": "@wildplasser: Absolutly!"}, {"owner": {"reputation": 514, "user_id": 1250682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f00ca41bcd0c028ee8b8c10c10f957b?s=128&d=identicon&r=PG", "display_name": "Michael Wilson", "link": "https://stackoverflow.com/users/1250682/michael-wilson"}, "edited": false, "score": 0, "creation_date": 1425495161, "post_id": 28862230, "comment_id": 45990262, "body": "Thanks @alk I think I understand now!"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1425494828, "last_edit_date": 1425494828, "creation_date": 1425494086, "answer_id": 28862230, "question_id": 28861004, "link": "https://stackoverflow.com/questions/28861004/how-to-read-an-integer-from-a-socket-in-c/28862230#28862230", "title": "How to read an integer from a socket in C", "body": "<p>To make sure <code>tmp</code> is a C-\"string\", that is carries the <code>0</code> terminator. change the following:</p>\n\n<pre><code>char tmp[bytesRead]; \n</code></pre>\n\n<p>to be </p>\n\n<pre><code>char tmp[bytesRead + 1] = \"\";\n</code></pre>\n\n<p>The modifications above do two things:</p>\n\n<ol>\n<li>Allocate one more bytes then you will use.</li>\n<li>Set all bytes to zero.</li>\n</ol>\n\n<p>So if you overwrite the 1<sup>st</sup> <code>bytesRead</code> bytes by the call to <code>strncpy()</code> the last byte stays untouched and with this continues to be <code>'\\0'</code>, that is it <code>0</code>-terminates the <code>char</code>-array and with this make it a C-\"string\".</p>\n\n<hr>\n\n<p>Btw, this line:</p>\n\n<pre><code>buffer[bytesRead] = '\\0';\n</code></pre>\n\n<p>requires <code>buffer</code> to refer to at least <code>1024 + 1</code> bytes ...</p>\n\n<hr>\n\n<p>Introducing the usage of <code>tmp</code> however isn't necessary. The code also might look like this:</p>\n\n<pre><code>char buffer[1024 + 1];\nssize_t result = read(sock, buffer, sizeof buffer - 1);\nif (-1 == result) \n{\n  perror(\"read() failed\");\n}\nelse\n{\n  size_t bytesRead = result;\n  buffer[bytesRead] = '\\0';\n  int num = atoi(buffer);\n  if (0 == num)\n  {\n    fprintf(stderr, \"atoi() (might have) failed\");\n  }\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 1250682, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f00ca41bcd0c028ee8b8c10c10f957b?s=128&d=identicon&r=PG", "display_name": "Michael Wilson", "link": "https://stackoverflow.com/users/1250682/michael-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 28862230, "answer_count": 1, "score": 0, "last_activity_date": 1425494828, "creation_date": 1425490299, "last_edit_date": 1425491648, "question_id": 28861004, "link": "https://stackoverflow.com/questions/28861004/how-to-read-an-integer-from-a-socket-in-c", "title": "How to read an integer from a socket in C", "body": "<p>I am trying to read in the char array from the socket and get the integer value which can then be used in a for loop. Sadly I am getting a segmentation fault at atoi(). What am I doing wrong? </p>\n\n<pre><code>bytesRead = read(sock, buffer, 1024);\nbuffer[bytesRead] = '\\0';\nchar tmp[bytesRead];                // I suspect creating this shorter \nstrncpy(tmp, buffer, bytesRead);    // array is not necessary... but not sure.\nint num = atoi(tmp);\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1425489818, "post_id": 28860839, "comment_id": 45987138, "body": "It&#39;s ok, but be careful with endianess. And <a href=\"http://stackoverflow.com/a/605858/1983495\">Do not cast <code>malloc()</code></a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1425490155, "post_id": 28860839, "comment_id": 45987356, "body": "TCP is stream-oriented, things never arrive out of order."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 4, "creation_date": 1425492206, "post_id": 28860839, "comment_id": 45988530, "body": "TCP guarantees the correct order on delivery. However make sure to test the return value of <code>read()</code> not only against error, but on how many bytes actually where read, as <code>read()</code> might read less from a socket as it was told to do. This propably happens rarely for small chunks of data, but just try sending some millions of doubles and you see what I am referring to. Read <code>read()</code>&#39;s  documentation closely."}, {"owner": {"reputation": 25, "user_id": 3817034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd292cca767fade777f5a65bfb18067?s=128&d=identicon&r=PG&f=1", "display_name": "IbliSS", "link": "https://stackoverflow.com/users/3817034/ibliss"}, "edited": false, "score": 0, "creation_date": 1425494179, "post_id": 28860839, "comment_id": 45989648, "body": "Indeed i have seen this after few tests and i prevent it ( but did not mentionned the whole code here ). Thanks anyway to remind it."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1425494795, "post_id": 28860839, "comment_id": 45990019, "body": "You have to not only test the return value of read, for a non-blocking socket (especially) you have to test the value of write() as well!  Granted, for most situations you will just write into the network stack buffers even if the data doesn&#39;t send yet."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1425495150, "post_id": 28860839, "comment_id": 45990250, "body": "&quot;successively&quot;?  Do you mean &quot;consecutively&quot;?  I am not aware of the word &quot;successively&quot;, but it sounds like doing anything that way would always be a good idea!  How could it fail?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1425495407, "post_id": 28860839, "comment_id": 45990386, "body": "@WilliamPursell, check your dictionary, or <a href=\"http://dictionary.reference.com/browse/successively\" rel=\"nofollow noreferrer\">this one</a>.  Or take my word for it that you have correctly inferred the definition of a perfectly good word from its context."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425509856, "post_id": 28860839, "comment_id": 45998276, "body": "@John Bollinger.  That is odd.  4 hours later reading my comment, I can&#39;t imagine why I didn&#39;t recognize the word.  The brain is a funny thing!"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 25, "user_id": 3817034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd292cca767fade777f5a65bfb18067?s=128&d=identicon&r=PG&f=1", "display_name": "IbliSS", "link": "https://stackoverflow.com/users/3817034/ibliss"}, "edited": false, "score": 0, "creation_date": 1425493157, "post_id": 28861206, "comment_id": 45989073, "body": "My comment applies to any stream socket.  I observe, however, that if you specifically want a TCP/IP-flavored stream socket, then it should be set up with domain <code>AF_INET</code> or maybe <code>AF_INET6</code>, <i>not</i> <code>PF_UNIX</code>."}, {"owner": {"reputation": 25, "user_id": 3817034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd292cca767fade777f5a65bfb18067?s=128&d=identicon&r=PG&f=1", "display_name": "IbliSS", "link": "https://stackoverflow.com/users/3817034/ibliss"}, "edited": false, "score": 0, "creation_date": 1425493382, "post_id": 28861206, "comment_id": 45989211, "body": "Yes you are right, i am not using TCP, the question was actually related to <code>SOCK_STREAM</code>, since i set up my socket with <code>socket(PF_UNIX,SOCK_STREAM,0)</code>. I have just rectified this post. Thanks."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1425494898, "post_id": 28861206, "comment_id": 45990084, "body": "Stream sockets are reliable with respect to in-order delivery, but <i>only</i> if the API is used correctly, which is not something the present code which ignores write() and read() return values does.  In the present code, the write of the array size could theoretically fail, and then the write of the data succeed if buffer space is available by then. Or the reverse, from reading too soon. <b>The socket is reliable, but the non-blocking calls are not</b>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1425495158, "post_id": 28861206, "comment_id": 45990258, "body": "@ChrisStratton, you are right, but the original version of the question asserted that the return values of <code>read()</code> and <code>write()</code> are indeed accounted for correctly, with appropriate measures to write and read fully, even though that is not evident in the code presented.  That assertion is re-made in comments on the original question."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1425495644, "post_id": 28861206, "comment_id": 45990544, "body": "Inexplicable why they pulled that out - I&#39;m rather tempted to put it back in, but hesitate only in wondering if perhaps they removed it because they realized they might not be fully accomplishing reliable writes and reads with the attempted mechanism.  Reading less than all of the bytes of a double (because they are not yet all available), for example, could be a bit messy to handle."}, {"owner": {"reputation": 25, "user_id": 3817034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd292cca767fade777f5a65bfb18067?s=128&d=identicon&r=PG&f=1", "display_name": "IbliSS", "link": "https://stackoverflow.com/users/3817034/ibliss"}, "edited": false, "score": 0, "creation_date": 1425507350, "post_id": 28861206, "comment_id": 45997158, "body": "I didn&#39;t want to post the whole code as i needed to focus on the sequence of <code>read</code> and <code>write</code> functions assuming that all bytes were transferred and received which is not always the case. I thought that calling <code>write</code> two times from the client (sending size and then array) could possibly lead to read bytes in a wrong order for the server but you said it can never happen here. However Chris pointed out another question i had concerning the wrapping function (reading less than all the bytes of a double) but that&#39;s another topic i guess."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 25, "user_id": 3817034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd292cca767fade777f5a65bfb18067?s=128&d=identicon&r=PG&f=1", "display_name": "IbliSS", "link": "https://stackoverflow.com/users/3817034/ibliss"}, "edited": false, "score": 0, "creation_date": 1425508103, "post_id": 28861206, "comment_id": 45997530, "body": "@IbliSS, the code I presented handles <code>double</code> elements being split across two (or more) reads and / or writes.  I cannot think of a simpler way to approach the problem that ensures complete, reliable data transfer."}, {"owner": {"reputation": 25, "user_id": 3817034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd292cca767fade777f5a65bfb18067?s=128&d=identicon&r=PG&f=1", "display_name": "IbliSS", "link": "https://stackoverflow.com/users/3817034/ibliss"}, "edited": false, "score": 0, "creation_date": 1425565417, "post_id": 28861206, "comment_id": 46021632, "body": "@John, i did not pay enough attention to your code indeed. My mistache ;)  I have included some modification in my code based on your example (for <code>read</code> and <code>write</code> functions) and it seems to work well. I have sent up to 8GB of datas without loosing any Bytes between client and server. Thanks again."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1425508268, "last_edit_date": 1425508268, "creation_date": 1425490879, "answer_id": 28861206, "question_id": 28860839, "link": "https://stackoverflow.com/questions/28860839/is-it-safe-to-call-write-successively-when-using-a-sock-stream/28861206#28861206", "title": "is it safe to call write successively when using a sock_stream?", "body": "<p>Sockets of type <code>SOCK_STREAM</code> provide reliable, in-order data transmission, though details depend on the nature of the underlying transport.  The reader will receive all the data successfully written (if it in fact chooses to read them all), byte-for-byte in the order they were written, but not necessarily in the same size chunks.</p>\n\n<p>Blocking <em>vs</em>. non-blocking has nothing to do with it, though I don't actually see what makes you say your writes are non-blocking.  Perhaps you're remarking on the fact that neither <code>write()</code> nor <code>read()</code> promises to transfer the full number of bytes requested on any given call.  That in itself provides no guarantee against blocking, but you absolutely do need to account for it correctly, especially with sockets, and even more especially if you really have put one or both ends of the socket in non-blocking mode.  The original version of your question seemed to claim that you do account for it.</p>\n\n<p>In any case, barring some kind of kernel bug, your client will never read the array size after any part of the array, nor otherwise receive bytes in a different relative order than they were written.</p>\n\n<p>To be perfectly clear, however, here are reasonable implementations for reading and writing variable-size <code>double</code> arrays via a stream socket.  They assume that sender and receiver have identical representations of type <code>double</code>, which will certainly be the case for UNIX-domain sockets.  They are not at all trivial, though the helper functions comprising around half the code are suitable for reuse:</p>\n\n<pre><code>/******\n * helper functions\n */\n\n/*\n * Returns the number of bytes written, which may be zero, or a number\n * less than zero on failure.\n */\nssize_t write_fully(int fd, const void *buf, size_t count) {\n    const unsigned char *next = buf;\n    size_t remaining = count;\n\n    while (remaining) {\n        ssize_t n_written = write(fd, next, remaining);\n\n        if (n_written &lt; 0) {\n            /* error */\n            return n_written;\n        } else {\n            assert(n_written &lt;= remaining);\n            next += n_written;\n            remaining -= n_written;\n        }\n    }\n\n    /* all bytes successfully written */\n    return count;\n}\n\n/* \n * Returns the number of bytes read on success, or a number less\n * than zero on error.  It is accounted \"success\" if the end of the stream\n * is reached before the requested number of bytes is read; that case\n * can be distinguished by the return value, but no recovery is\n * possible.\n */\nssize_t read_fully(int fd, void *buf, size_t count) {\n    unsigned char *next = buf;\n    size_t remaining = count;\n\n    while (remaining) {\n        ssize_t n_read = read(fd, next, remaining);\n\n        if (n_read &lt; 0) {\n            /* error */\n            return n_read;\n        } else if (n_read) {\n            assert(n_read &lt;= remaining);\n            next += n_read;\n            remaining -= n_read;\n        } else {\n            /* premature end of file */\n            return count - remaining;\n        }\n    }\n\n    /* all bytes successfully read */\n    return count;\n}\n\n/******\n * Array-transfer functions\n */\n\n/* returns 0 on success, else nonzero */\nint write_double_array(int fd, unsigned n, double d[n]) {\n    ssize_t bytes_written;\n\n    bytes_written = write_fully(fd, &amp;n, sizeof(n));\n    if (bytes_written &lt; 0) return bytes_written;\n\n    bytes_written = write_fully(fd, d, n * sizeof(double));\n    return (bytes_written &lt; 0) ? bytes_written : 0;\n}\n\n/*\n * returns 0 on success, else nonzero.\n * On success, the caller takes responsibility for freeing the\n * dynamically-allocated result array.\n */\nint read_double_array(int fd, unsigned *n, double **d) {\n    unsigned temp_n;\n    ssize_t bytes_read = read_fully(fd, &amp;temp_n, sizeof(temp_n));\n\n    if (bytes_read &lt; 0) {\n        return -1;\n    } else if (bytes_read != sizeof(temp_n)) {\n        return 1;\n    } else if (temp_n) {\n        size_t n_bytes = temp_n * sizeof(double);\n        double *temp = malloc(n_bytes);\n\n        if (!temp) return -1;  /* allocation failure */\n        if (read_fully(fd, temp, n_bytes) &lt; n_bytes) {\n            free(temp);\n            return -1;\n        }\n\n        /* success */\n        *d = temp;\n    }\n\n    *n = temp_n;\n    return 0;\n}\n</code></pre>\n\n<p>You could implement the array-transfer protocol differently, but that approach sends the data in the same form that you claim to do.  You cannot safely do it any more simply than that.</p>\n"}], "owner": {"reputation": 25, "user_id": 3817034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd292cca767fade777f5a65bfb18067?s=128&d=identicon&r=PG&f=1", "display_name": "IbliSS", "link": "https://stackoverflow.com/users/3817034/ibliss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 28861206, "answer_count": 1, "score": 0, "last_activity_date": 1425508268, "creation_date": 1425489771, "last_edit_date": 1425494415, "question_id": 28860839, "link": "https://stackoverflow.com/questions/28860839/is-it-safe-to-call-write-successively-when-using-a-sock-stream", "title": "is it safe to call write successively when using a sock_stream?", "body": "<p>I need to write a small client/server application in C on Linux.</p>\n\n<p>I have built a short example in order to explore a little bit more since i am new to network programming. </p>\n\n<p>I am basically trying to send an array of <code>double</code> dynamically allocated by the client. </p>\n\n<p>I found the following way to do it ( client side ) :</p>\n\n<pre><code>write(sd,&amp;datas.size,sizeof(int)); /* send size */\nwrite(sd,datas.yi,datas.size*sizeof(double));/* send array */\n</code></pre>\n\n<p>and on the server side :</p>\n\n<pre><code>read(sd_cli,&amp;datas.size,sizeof(int)); /* receive size */\ndatas.yi=(double *)malloc(datas.size*sizeof(double));\nread(sd_cli,datas.yi,datas.size*sizeof(double)); /* receiving datas */\n</code></pre>\n\n<p>At first sight my code seems to work fine.</p>\n\n<p>But since the <code>write</code> calls are non blocking, i ask myself if the <code>read</code> sequence can receive , for example the array of <code>double</code> before its size ?</p>\n\n<p>Is there any guarantee that this can never happen ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "sqlite", "full-text-search"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1425490312, "post_id": 28860704, "comment_id": 45987452, "body": "As far as I can tell, there is no documented C API for the SQLite FTS extension.  That&#39;s not so surprising, really, given that the C API doesn&#39;t provide low-level access to other internals, either."}, {"owner": {"reputation": 4887, "user_id": 12981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d2d307ecc21a2f3e589d8d8b68eca3cc?s=128&d=identicon&r=PG", "display_name": "wxs", "link": "https://stackoverflow.com/users/12981/wxs"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425490388, "post_id": 28860704, "comment_id": 45987506, "body": "Yeah I sort of figured that. I guess one approach would be for me to write a custom tokenizer, which I pass in as the FTS tokenizer, and then I can also access that myself."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425490538, "post_id": 28860704, "comment_id": 45987598, "body": "Yes, if you want to be absolutely certain that user input is tokenized by your program the same way it will be tokenized by SQLite, then a custom tokenizer seems a reasonable way to achieve that."}, {"owner": {"reputation": 4887, "user_id": 12981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d2d307ecc21a2f3e589d8d8b68eca3cc?s=128&d=identicon&r=PG", "display_name": "wxs", "link": "https://stackoverflow.com/users/12981/wxs"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426104029, "post_id": 28860704, "comment_id": 46240558, "body": "@JohnBollinger see my answer below: it turns out SQLite does provide an API that lets you access their tokenizer."}], "answers": [{"tags": [], "owner": {"reputation": 4887, "user_id": 12981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d2d307ecc21a2f3e589d8d8b68eca3cc?s=128&d=identicon&r=PG", "display_name": "wxs", "link": "https://stackoverflow.com/users/12981/wxs"}, "is_accepted": true, "score": 3, "last_activity_date": 1426182353, "last_edit_date": 1426182353, "creation_date": 1426103989, "answer_id": 28996203, "question_id": 28860704, "link": "https://stackoverflow.com/questions/28860704/automatic-or-queries-using-sqlite-fts4/28996203#28996203", "title": "Automatic OR queries using SQLite FTS4", "body": "<p>So to answer part of my question: it turns out that you can access a pointer to the SQLite tokenizer function via <code>SELECT fts3_tokenizer(&lt;tokenizer-name&gt;)</code>. Refer to <a href=\"http://www.sqlite.org/fts3.html#section_8_1\" rel=\"nofollow\">http://www.sqlite.org/fts3.html#section_8_1</a> for more details.</p>\n\n<p>This returns a <code>sqlite3_tokenizer_module</code> struct, containing function pointers <code>xCreate</code>, <code>xOpen</code>, and <code>xNext</code>.</p>\n\n<p>You'll need to add the header file <code>fts3_tokenizer.h</code> to your project as described here. <a href=\"http://www.mail-archive.com/sqlite-users%40sqlite.org/msg62644.html\" rel=\"nofollow\">http://www.mail-archive.com/sqlite-users%40sqlite.org/msg62644.html</a></p>\n\n<p>I'm putting the definition of the <code>sqlite3_tokenizer_module</code> below (copied verbatim because it includes useful comments)</p>\n\n<pre><code>/*\n** Structures used by the tokenizer interface. When a new tokenizer\n** implementation is registered, the caller provides a pointer to\n** an sqlite3_tokenizer_module containing pointers to the callback\n** functions that make up an implementation.\n**\n** When an fts3 table is created, it passes any arguments passed to\n** the tokenizer clause of the CREATE VIRTUAL TABLE statement to the\n** sqlite3_tokenizer_module.xCreate() function of the requested tokenizer\n** implementation. The xCreate() function in turn returns an \n** sqlite3_tokenizer structure representing the specific tokenizer to\n** be used for the fts3 table (customized by the tokenizer clause arguments).\n**\n** To tokenize an input buffer, the sqlite3_tokenizer_module.xOpen()\n** method is called. It returns an sqlite3_tokenizer_cursor object\n** that may be used to tokenize a specific input buffer based on\n** the tokenization rules supplied by a specific sqlite3_tokenizer\n** object.\n*/\ntypedef struct sqlite3_tokenizer_module sqlite3_tokenizer_module;\ntypedef struct sqlite3_tokenizer sqlite3_tokenizer;\ntypedef struct sqlite3_tokenizer_cursor sqlite3_tokenizer_cursor;\n\nstruct sqlite3_tokenizer_module {\n\n  /*\n  ** Structure version. Should always be set to 0 or 1.\n  */\n  int iVersion;\n\n  /*\n  ** Create a new tokenizer. The values in the argv[] array are the\n  ** arguments passed to the \"tokenizer\" clause of the CREATE VIRTUAL\n  ** TABLE statement that created the fts3 table. For example, if\n  ** the following SQL is executed:\n  **\n  **   CREATE .. USING fts3( ... , tokenizer &lt;tokenizer-name&gt; arg1 arg2)\n  **\n  ** then argc is set to 2, and the argv[] array contains pointers\n  ** to the strings \"arg1\" and \"arg2\".\n  **\n  ** This method should return either SQLITE_OK (0), or an SQLite error \n  ** code. If SQLITE_OK is returned, then *ppTokenizer should be set\n  ** to point at the newly created tokenizer structure. The generic\n  ** sqlite3_tokenizer.pModule variable should not be initialized by\n  ** this callback. The caller will do so.\n  */\n  int (*xCreate)(\n    int argc,                           /* Size of argv array */\n    const char *const*argv,             /* Tokenizer argument strings */\n    sqlite3_tokenizer **ppTokenizer     /* OUT: Created tokenizer */\n  );\n\n  /*\n  ** Destroy an existing tokenizer. The fts3 module calls this method\n  ** exactly once for each successful call to xCreate().\n  */\n  int (*xDestroy)(sqlite3_tokenizer *pTokenizer);\n\n  /*\n  ** Create a tokenizer cursor to tokenize an input buffer. The caller\n  ** is responsible for ensuring that the input buffer remains valid\n  ** until the cursor is closed (using the xClose() method). \n  */\n  int (*xOpen)(\n    sqlite3_tokenizer *pTokenizer,       /* Tokenizer object */\n    const char *pInput, int nBytes,      /* Input buffer */\n    sqlite3_tokenizer_cursor **ppCursor  /* OUT: Created tokenizer cursor */\n  );\n\n  /*\n  ** Destroy an existing tokenizer cursor. The fts3 module calls this \n  ** method exactly once for each successful call to xOpen().\n  */\n  int (*xClose)(sqlite3_tokenizer_cursor *pCursor);\n\n  /*\n  ** Retrieve the next token from the tokenizer cursor pCursor. This\n  ** method should either return SQLITE_OK and set the values of the\n  ** \"OUT\" variables identified below, or SQLITE_DONE to indicate that\n  ** the end of the buffer has been reached, or an SQLite error code.\n  **\n  ** *ppToken should be set to point at a buffer containing the \n  ** normalized version of the token (i.e. after any case-folding and/or\n  ** stemming has been performed). *pnBytes should be set to the length\n  ** of this buffer in bytes. The input text that generated the token is\n  ** identified by the byte offsets returned in *piStartOffset and\n  ** *piEndOffset. *piStartOffset should be set to the index of the first\n  ** byte of the token in the input buffer. *piEndOffset should be set\n  ** to the index of the first byte just past the end of the token in\n  ** the input buffer.\n  **\n  ** The buffer *ppToken is set to point at is managed by the tokenizer\n  ** implementation. It is only required to be valid until the next call\n  ** to xNext() or xClose(). \n  */\n  /* TODO(shess) current implementation requires pInput to be\n  ** nul-terminated.  This should either be fixed, or pInput/nBytes\n  ** should be converted to zInput.\n  */\n  int (*xNext)(\n    sqlite3_tokenizer_cursor *pCursor,   /* Tokenizer cursor */\n    const char **ppToken, int *pnBytes,  /* OUT: Normalized text for token */\n    int *piStartOffset,  /* OUT: Byte offset of token in input buffer */\n    int *piEndOffset,    /* OUT: Byte offset of end of token in input buffer */\n    int *piPosition      /* OUT: Number of tokens returned before this one */\n  );\n\n  /***********************************************************************\n  ** Methods below this point are only available if iVersion&gt;=1.\n  */\n\n  /* \n  ** Configure the language id of a tokenizer cursor.\n  */\n  int (*xLanguageid)(sqlite3_tokenizer_cursor *pCsr, int iLangid);\n};\n</code></pre>\n"}], "owner": {"reputation": 4887, "user_id": 12981, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d2d307ecc21a2f3e589d8d8b68eca3cc?s=128&d=identicon&r=PG", "display_name": "wxs", "link": "https://stackoverflow.com/users/12981/wxs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 28996203, "answer_count": 1, "score": 2, "last_activity_date": 1426182353, "creation_date": 1425489325, "last_edit_date": 1495535408, "question_id": 28860704, "link": "https://stackoverflow.com/questions/28860704/automatic-or-queries-using-sqlite-fts4", "title": "Automatic OR queries using SQLite FTS4", "body": "<p>I have a SQLite FTS4 database, and I would like to be able to perform OR queries on it from user-input, e.g. if the user enters \"hello there\" I would like to do</p>\n\n<pre><code>SELECT * FROM fts_table WHERE text MATCHES 'hello OR there'.\n</code></pre>\n\n<p>However, if I pass simply pass in the user-string I get an implicit AND query instead. I could of course tokenize the string myself, and insert ORs, but then I'm using my own tokenizer which could differ from the tokenizer being used internally by SQLite's FTS.</p>\n\n<p>Is there some way to either access the SQLite tokenizer from my C wrapper, or else to construct a SQL query that does this, along the lines of:</p>\n\n<pre><code>SELECT * FROM fts_table WHERE text MATCHES interpolate('hello there', ' OR ')\n</code></pre>\n\n<p>Thanks any pointers would be appreciated.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Any future readers of this question should note this other question: <a href=\"https://stackoverflow.com/questions/28971633/how-to-escape-string-for-sqlite-fts-query\">How to escape string for SQLite FTS query</a> it's not safe to just interpolate OR into the string, because you will often end up with invalid strings, for instance if the user enters <code>hello AND there</code> interpolating <code>OR</code> will create <code>hello OR AND OR there</code> which is not valid. So</p>\n"}, {"tags": ["c", "linux", "kernel", "system-calls"], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 0, "last_activity_date": 1425489037, "creation_date": 1425489037, "answer_id": 28860608, "question_id": 28860436, "link": "https://stackoverflow.com/questions/28860436/custom-linux-kernel-syscall-wrapper-function/28860608#28860608", "title": "Custom linux kernel syscall wrapper function", "body": "<p>Assuming that you are using the <code>*</code> as a wildcard and not pointer notation. Your implementation is already returning the value returned by the function <code>syscall</code>. In case there is an error, it's code is stored in <code>errno</code> variable, which you might want to copy to some additional parameter you will pass to your function:</p>\n\n<pre><code>long &lt;???&gt;__wrap_process_info(int myid , void *udata, long *err )\n{\n    long result;\n    result = syscall(337 , myid , udata);\n    *err = errno;\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4546686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e280f0c4b6397933cfd8f9168120f8bc?s=128&d=identicon&r=PG&f=1", "display_name": "user4546686", "link": "https://stackoverflow.com/users/4546686/user4546686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425489037, "creation_date": 1425488529, "question_id": 28860436, "link": "https://stackoverflow.com/questions/28860436/custom-linux-kernel-syscall-wrapper-function", "title": "Custom linux kernel syscall wrapper function", "body": "<p>i am writing a custom system call for linux kernel\neverything works fine with the function call and now i am trying\nto create a wrapper function in order to use the function normally in any program\nwithout using the syscall (call)</p>\n\n<p>what i have done so far is </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;linux/unistd.h&gt;\n#include&lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#include &lt;linux/sched.h&gt;\n#include &lt;linux/kernel.h&gt;\n\nlong *__wrap_process_info(int myid , void *udata)\n{\n    return syscall(337 , myid , udata);\n}\n</code></pre>\n\n<p>my system call returns -1 on error and 0 if executed correctly\nmy question is , how to make the wrapper function return the syscall return value ?\nand ,do i need to include a main in the wrapper function ?</p>\n"}, {"tags": ["c", "gcc", "linker", "arm"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425488539, "post_id": 28860368, "comment_id": 45986318, "body": "Can you show the variables declaration? And a linker script."}, {"owner": {"reputation": 422, "user_id": 1392340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/2a3U9.jpg?s=128&g=1", "display_name": "Lazureus", "link": "https://stackoverflow.com/users/1392340/lazureus"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425490558, "post_id": 28860368, "comment_id": 45987608, "body": "I added my linker script, variables are instances of packed structures or array of such a structure and some chars. I&#39;m not sure do you need declarations That&#39;s why you can see unaligned accesses."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425490848, "post_id": 28860368, "comment_id": 45987779, "body": "By &quot;instances&quot; do you mean fields/elements, right? Still, it would be helpful to see it. Maybe you are missing something."}, {"owner": {"reputation": 422, "user_id": 1392340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/2a3U9.jpg?s=128&g=1", "display_name": "Lazureus", "link": "https://stackoverflow.com/users/1392340/lazureus"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425492912, "post_id": 28860368, "comment_id": 45988929, "body": "Ok, I&#39;ve added declarations, there is only one packed structure, excuse me for previous misleading you."}], "owner": {"reputation": 422, "user_id": 1392340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/2a3U9.jpg?s=128&g=1", "display_name": "Lazureus", "link": "https://stackoverflow.com/users/1392340/lazureus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425492871, "creation_date": 1425488363, "last_edit_date": 1425492871, "question_id": 28860368, "link": "https://stackoverflow.com/questions/28860368/why-arm-none-eabi-ld-linker-leaves-padding-bytes-in-single-translation-unit", "title": "Why arm-none-eabi-ld linker leaves padding bytes in single translation unit?", "body": "<p>I got some evaluation board with uC <code>STM32F405RG</code>, this micro has <code>ARM Cortext M4 core</code>. Please find reference to the uC :</p>\n\n<p><a href=\"http://www.st.com/web/catalog/mmc/FM141/SC1169/SS1577/LN1035/PF252144#\" rel=\"nofollow\">http://www.st.com/web/catalog/mmc/FM141/SC1169/SS1577/LN1035/PF252144#</a></p>\n\n<p>I'm using also <code>arm-none-eabi</code> toolchain for linux from below site:</p>\n\n<p><a href=\"https://launchpad.net/gcc-arm-embedded\" rel=\"nofollow\">https://launchpad.net/gcc-arm-embedded</a></p>\n\n<p>After compiling and linking some project I've noticed that linker puts extra padding bytes between mine global variables which are stored in .bss section. Please find short snippet from the map file:</p>\n\n<pre><code> .bss.variable1\n                0x20002d14       0x15 /path/to/application.o\n .bss.variable2\n                0x20002d29        0x1 /path/to/application.o\n .bss.variable3\n                0x20002d2a        0x1 /path/to/application.o\n .bss.variable4\n                0x20002d2b        0x1 /path/to/application.o\n .bss.variable5\n                0x20002d2c       0x1c /path/to/application.o\n .bss.variable6\n                0x20002d48        0x1 /path/to/application.o\n *fill*         0x20002d49        0x3\n .bss.variable7\n                0x20002d4c        0x4 /path/to/application.o\n .bss.variable8\n                0x20002d50        0x8 /path/to/application.o\n .bss.variable9\n                0x20002d58       0x1c /path/to/application.o\n .bss.variable10\n                0x20002d74        0x1 /path/to/application.o\n</code></pre>\n\n<p>Additionally here is my linker script:</p>\n\n<pre><code>ENTRY(Reset_Handler)\n\nMEMORY\n{\n  FLASH (rx)      : ORIGIN = 0x08000000 + 256K, LENGTH = 1M - 256K -(3*128K)\n  RAM (xrw)       : ORIGIN = 0x20000000, LENGTH = 128K\n  MEMORY_B1 (rx)  : ORIGIN = 0x60000000, LENGTH = 0K\n}\n\n_stack_size = 16K;\n\n_estack = ORIGIN(RAM) + LENGTH(RAM);\n_sstack = _estack - _stack_size;\n\nSECTIONS\n{  \n  .text :\n  {\n    _stext = .;\n    KEEP(*(.isr_vector))\n    . += 8;\n    *(.text)\n    *(.text*)\n    *(.rodata)\n    *(.rodata*)\n    *(.glue_7)\n    *(.glue_7t)\n    *(.eh_frame)\n    KEEP (*(.init))\n    KEEP (*(.fini))\n    . = ALIGN(4);\n    _etext = .;\n  } &gt;FLASH\n\n  .ARM.extab :\n  {\n    *(.ARM.extab*)\n    *(.gnu.linkonce.armextab.*)\n  } &gt;FLASH\n\n  .ARM :\n  {\n    __exidx_start = .;\n    *(.ARM.exidx*)\n    __exidx_end = .;\n  } &gt;FLASH\n\n  .preinit_array     :\n  {\n    PROVIDE_HIDDEN (__preinit_array_start = .);\n    KEEP (*(.preinit_array*))\n    PROVIDE_HIDDEN (__preinit_array_end = .);\n  } &gt;FLASH\n\n  .init_array :\n  {\n    PROVIDE_HIDDEN (__init_array_start = .);\n    KEEP (*(SORT(.init_array.*)))\n    KEEP (*(.init_array*))\n    PROVIDE_HIDDEN (__init_array_end = .);\n  } &gt;FLASH\n\n  .fini_array :\n  {\n    PROVIDE_HIDDEN (__fini_array_start = .);\n    KEEP (*(.fini_array*))\n    KEEP (*(SORT(.fini_array.*)))\n    PROVIDE_HIDDEN (__fini_array_end = .);\n  } &gt;FLASH\n\n  _sidata = .;\n\n  .data :\n  {\n    . = ALIGN(4);\n    _sdata = .;\n    *(.data)\n    *(.data*)\n    . = ALIGN(4);\n    _edata = .;\n  } &gt;RAM AT&gt; FLASH\n\n  . = ALIGN(4);\n\n  .bss :\n  {\n    _sbss = .;\n    __bss_start__ = _sbss;\n    *(.bss)\n    *(.bss*)\n    *(COMMON)\n    . = ALIGN(4);\n    _ebss = .;\n    __bss_end__ = _ebss;\n  } &gt;RAM\n\n  .stack :\n  {\n    . += _stack_size;\n  } &gt;RAM\n\n  .memory_b1_text :\n  {\n    *(.mb1text)        /* .mb1text sections (code) */\n    *(.mb1text*)       /* .mb1text* sections (code)  */\n    *(.mb1rodata)      /* read-only data (constants) */\n    *(.mb1rodata*)\n  } &gt;MEMORY_B1\n\n  /* Remove information from the standard libraries */\n  /DISCARD/ :\n  {\n    libc.a ( * )\n    libm.a ( * )\n    libgcc.a ( * )\n  }\n\n  .ARM.attributes 0 : { *(.ARM.attributes) }\n}\n</code></pre>\n\n<p>Here is type declarations, they're distributed around few header files but I'm putting them here at once: </p>\n\n<pre><code>typedef enum\n{\n    False=0,\n    True=1\n} bool;\n\ntypedef enum\n{\n    Unknown,\n    Data,\n    Crc\n} type3_t;\n\ntypedef struct\n{\n    unsigned char data[20];\n    unsigned char size;\n} __attribute__((packed)) type1_t;\n\ntypedef enum\n{\n    msg1,\n    msg2,\n    msg3\n} msg_type_t\n\ntypedef struct\n{\n    uint8_t msg;\n    uint32_t src;\n    uint32_t dest;\n} header_t;\n\ntypedef struct\n{\n    header_t header;\n    uint8_t len;\n    uint8_t id;\n    uint8_t idx;\n    uint8_t type;\n} header2_t;\n\ntypedef struct\n{\n    header2_t header;\n    uint8_t* data;\n} ex_header_t;\n\ntypedef struct\n{\n    msg_type_t type;\n    union\n    {\n        uint8_t * rawData;\n        header_t header;\n        ex_header_t ex_header;\n    } u;\n    uint8_t val;\n} type5_t;\n\ntypedef struct\n{\n    uint32_t id;\n    uint8_t idx;\n    uint8_t crc[2];\n} type8_t;\n</code></pre>\n\n<p>and application.c file, I left order like in *.c file:</p>\n\n<pre><code>static type5_t variable5;\nstatic type5_t variable9;\nstatic type8_t variable8;\nstatic type3_t variable3 = Unknown;\nstatic type1_t variable1;\nstatic bool variable10 = False;\nstatic unsigned char variable6 = 0;\nstatic bool variable4;\nstatic unsigned char variable2 = 0;\n/* few function definitions here */\nstatic void * variable7;\n</code></pre>\n\n<p>The question is why arm-none-eabi-ld linker is doing so?  Why linker cannot put in place of padding bytes, variables which are one byte big(e.g. chars) ? Everything is happening in the same translation unit so I think linker should be able to sort them and utilize more RAM memory. Even if one byte (char) or two bytes variables (short) are not present in the same translation unit, why shouldn't linker take them from other *.o files ?</p>\n"}, {"tags": ["c", "linux", "performance", "sockets", "memory"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1425487643, "post_id": 28860047, "comment_id": 45985734, "body": "&quot;stack&quot; != &quot;malloc&quot;."}, {"owner": {"reputation": 4385, "user_id": 24937, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/322909928165a193e16c12fd6cfad8ce?s=128&d=identicon&r=PG", "display_name": "edgar.holleis", "link": "https://stackoverflow.com/users/24937/edgar-holleis"}, "edited": false, "score": 2, "creation_date": 1425487918, "post_id": 28860047, "comment_id": 45985910, "body": "Benchmark first! Only if you find that your code spends significant time in malloc and free, or if you experience memory fragmentation, then by all means go for a custom allocator."}, {"owner": {"reputation": 5668, "user_id": 966376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/L6Wh4.jpg?s=128&g=1", "display_name": "GreenScape", "link": "https://stackoverflow.com/users/966376/greenscape"}, "edited": false, "score": 0, "creation_date": 1425504425, "post_id": 28860047, "comment_id": 45995624, "body": "Many thousands does not sound like a significant reason for such optimization to be helpful. Novadays <code>malloc()</code> implementations all have slabs for small chunks."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1425511915, "post_id": 28860047, "comment_id": 45999004, "body": "Linux kernel already has slab implementation, and when you do <code>malloc()</code> -- in the end it&#39;s kernel who allocates memory for you (using slab allocator). So it&#39;s most likely that you don&#39;t need to implement your own allocator. Anyway, you can tell it for sure only after proper profiling of your application (probably with <code>valgrind</code>) and also investigating <a href=\"http://lxr.free-electrons.com/source/include/linux/slab.h\" rel=\"nofollow noreferrer\">kernel&#39;s slab implementation</a>."}], "answers": [{"comments": [{"owner": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "edited": false, "score": 0, "creation_date": 1425633271, "post_id": 28865047, "comment_id": 46050968, "body": "Ah! What a superb response! :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 1, "creation_date": 1430489605, "post_id": 28865047, "comment_id": 48096287, "body": "If I could suggest one slight augmentation for a faster pool, consider the union linked list strategy for the memory pool. Ex: <code>union Chunk {struct request_s request; union Chunk* next;};</code> Then replace the <code>requests_used</code> array in your pool with an outer variable storing <code>union Chunk* head</code> for the head of this singly-linked list of chunks. When you create a new pool, push all the chunks available to the free list. When you allocate, overwrite the chunk with the request data. When you deallocate, cast it back to <code>Chunk*</code> and use the <code>next</code> pointer again to add it back to the free list."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1430489897, "post_id": 28865047, "comment_id": 48096441, "body": "There&#39;s no per-node allocation here, the memory is still coming from your pool buffer arrays. You&#39;re just doubling up the notion of one of the chunks from the pool as sometimes a singly-linked list node (when it&#39;s free) and the element (request_s) when it&#39;s being used. This avoids the need to scan some other array of bits for free slots and uses less memory. The downside is that you cannot free a pool easily since it&#39;s difficult to tell when it becomes completely empty. You can reclaim the empty spaces quickly. Remember to watch out for alignment when playing with mem allocators."}, {"owner": {"reputation": 301, "user_id": 4371563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc83d6e3278e8e04b65c2065a99aa7c?s=128&d=identicon&r=PG&f=1", "display_name": "narb", "link": "https://stackoverflow.com/users/4371563/narb"}, "edited": false, "score": 0, "creation_date": 1431639851, "post_id": 28865047, "comment_id": 48596677, "body": "Thanks for the suggestion. I&#39;ve never thought of doing a linked list with a union, it&#39;s a very interesting idea! And not really any more arcane than a bit array. I&#39;ll probably use that idea next time I do something like this.  A simple counter would be enough to tell you when to free a pool. Alignment shouldn&#39;t matter if your pools are designed for a single type and you aren&#39;t doing any funny casts or packing."}], "tags": [], "owner": {"reputation": 301, "user_id": 4371563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc83d6e3278e8e04b65c2065a99aa7c?s=128&d=identicon&r=PG&f=1", "display_name": "narb", "link": "https://stackoverflow.com/users/4371563/narb"}, "is_accepted": true, "score": 17, "last_activity_date": 1425503517, "creation_date": 1425503517, "answer_id": 28865047, "question_id": 28860047, "link": "https://stackoverflow.com/questions/28860047/is-it-worth-to-implement-a-slab-allocator-nowdays/28865047#28865047", "title": "is it worth to implement a slab allocator nowdays?", "body": "<p>If you are a C programmer, of course you should get dirty with memory management!</p>\n\n<p>However, you will probably not encounter any problems with simply malloc'ing each request, unless you are really getting close to the limits of your machine, which seems unlikely. But I believe it's better to know your alternatives than to take someone's word for it. Here are some ideas to consider.</p>\n\n<h2>Static array</h2>\n\n<p>The simplest alternative is to use a single global array of request slots, and track which ones are in use. This means a static limit on how many requests, but on the other hand, no overhead and no real issue with fragmentation. Just set the limit really high.</p>\n\n<p>Here's an example implementation. If you aren't familiar with bitwise operations, it may look a little confusing, but the gist is that we have an additional array containing one bit (on or off) per request slot, specifying whether that slot is in use. You could, instead, add an 'is_used' variable to the struct itself, but that would end up padding the struct out by a lot more than one bit, working against our goal of minimizing overhead.</p>\n\n<p>Header file is quite minimal (this is the true beauty of C, by the way!):</p>\n\n<pre><code>typedef struct request_s {\n  /* your 32 bytes of information */\n  unsigned char data[32];\n} request_t;\n\nrequest_t *alloc_request(void);\nvoid free_request(request_t *req);\n</code></pre>\n\n<p>Source file:</p>\n\n<pre><code>#include the header file\n\n/* note: this example is not written with multithreading in mind */\n\n/* allow a million requests (total 32 MB + 128 KB of memory) */\n#define MAX_REQUESTS (1*1024*1024)\n\nstatic request_t g_requests[MAX_REQUESTS];\n\n/* use one bit per request to store whether it's in use */\n/* unsigned int is 32 bits. shifting right by 5 divides by 32 */\nstatic unsigned int g_requests_used[MAX_REQUESTS &gt;&gt; 5];\n\nrequest_t *alloc_request(void) {\n  /* note: this is a very naive method. you really don't want to search\n   * from the beginning every time, but i'll leave improving that as an\n   * exercise for you. */\n  unsigned int word_bits;\n  unsigned int word, bit;\n\n  /* look through the bit array one word (i.e., 32 bits) at a time */\n  for (word = 0; word &lt; (MAX_REQUESTS &gt;&gt; 5); word++) {\n    word_bits = g_requests_used[word];\n\n    /* we can tell right away whether the entire chunk of 32 requests is\n     * in use, and avoid the inner loop */\n    if (word_bits == 0xFFFFFFFFU)\n      continue;\n\n    /* now we know there is a gap somewhere in this chunk, so we loop\n     * through the 32 bits to find it */\n    for (bit = 0; bit &lt; 32; bit++) {\n      if (word_bits &amp; (1U &lt;&lt; bit))\n        continue; /* bit is set, slot is in use */\n\n      /* found a free slot */\n      g_requests_used[word] |= 1U &lt;&lt; bit;\n      return &amp;g_requests[(word &lt;&lt; 5) + bit];\n    }\n  }\n\n  /* we're all out of requests! */\n  return NULL;\n}\n\nvoid free_request(request_t *req) {\n  /* make sure the request is actually within the g_requests block of\n   * memory */\n  if (req &gt;= g_requests &amp;&amp; req &lt; g_requests + MAX_REQUESTS) {\n    /* find the overall index of this request. pointer arithmetic like this\n     * is somewhat peculiar to c/c++, you may want to read up on it. */\n    ptrdiff_t index = req - g_requests;\n\n    /* reducing a ptrdiff_t to an unsigned int isn't something you should\n     * do without thinking about it first. but in our case, we're fine as\n     * long as we don't allow more than 2 billion requests, not that our\n     * computer could handle that many anyway */\n    unsigned int u_index = (unsigned int)index;\n\n    /* do some arithmetic to figure out which bit of which word we need to\n     * turn off */\n    unsigned int word = u_index &gt;&gt; 5; /* index / 32 */\n    unsigned int bit  = u_index &amp; 31; /* index % 32 */\n\n    g_requests_used[word] &amp;= ~(1U &lt;&lt; bit);\n  }\n}\n</code></pre>\n\n<p>(Yes, yes, you could write <code>index / 32</code> instead of <code>index &gt;&gt; 5</code>, and so on, and the compiler will optimize it for you. But it just doesn't feel right to me...)</p>\n\n<p>You can go into quite some depth and get pretty creative in optimizing the allocator's search for a free slot. One simple idea is to start your search at the location of the last allocation, and wrap around when you get to the end.</p>\n\n<p>This method has a lot of benefits, but one big drawback: the limit. You'll probably want to set the limit higher than the greatest amount of requests you ever expect having at once. But if you can do that, then you probably <em>aren't</em> bumping up against the limits of your system, so why are you here in the first place?!</p>\n\n<h2>Memory pools (linked list of static arrays)</h2>\n\n<p>If you don't like the static limit, you can batch allocations. Keep a linked list of memory \"pools\", each holding a certain fixed amount of request slots. Each individual pool is basically a static array as described above. If all existing pools are full, we malloc a new pool and add it to the linked list. A pool basically looks like this:</p>\n\n<pre><code>#define REQUESTS_PER_POOL 1024\n\ntypedef struct request_pool_s request_pool_t;\n\nstruct request_pool_s {\n  request_t requests[REQUESTS_PER_POOL];\n\n  unsigned int requests_used[REQUESTS_PER_POOL &gt;&gt; 5];\n\n  request_pool_t *prev;\n  request_pool_t *next;\n};\n</code></pre>\n\n<p>You'll want to be able to free pools when traffic dies down, otherwise this would hardly be different from the static limit! Unfortunately, in that case, you will be dealing with fragmentation issues. You could find yourself with a lot of sparsely used pools, especially if it's possible that requests sometimes last a long amount of time. An entire pool can't be freed until every last slot on it is empty. You'd still be saving on overhead (considering the small size of individual requests), but dealing with the fragmentation could turn this from a small, elegant solution into more work than it's worth.</p>\n\n<p>You could decrease the number of requests per pool to reduce the effect of fragmentation, but at this point we'd be losing the advantages of this method.</p>\n\n<h2>Which one?</h2>\n\n<p>First of all, the main reasons you should be considering alternatives to individual mallocs at all are: the small size of your struct (32 bytes), the large amount of them, and the frequency at which they are created and destroyed.</p>\n\n<ul>\n<li><p>Static arrays reduce overhead by a lot, but are hard to justify in this day and age. Unless your server is running on an Arduino.</p></li>\n<li><p>Memory pools are the obvious direction for a problem like this, but they can require a fair bit of work to get working smoothly. If this is up your alley, then I say go for it.</p></li>\n<li><p>Slab allocators are like complex memory pools that aren't limited to a certain single struct size. They'd be overkill for you since you have only the 32-byte requests, although perhaps you could find a third-party library that works for you.</p></li>\n</ul>\n\n<p>Taking the easy route and simply malloc'ing each request is a slippery slope and may end up with you abandoning C entirely. ;)</p>\n"}], "owner": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3964, "favorite_count": 3, "accepted_answer_id": 28865047, "answer_count": 1, "score": 8, "last_activity_date": 1425503517, "creation_date": 1425487477, "question_id": 28860047, "link": "https://stackoverflow.com/questions/28860047/is-it-worth-to-implement-a-slab-allocator-nowdays", "title": "is it worth to implement a slab allocator nowdays?", "body": "<p>I am working on a server having to read from many thousands of socket clients connected at the same time. The client requests are constituted by messages having all the same exact size of about 32 bytes. </p>\n\n<p>I am reading about the <code>slab allocator</code> and I'd like to use this particular technique for my application when I call <code>read</code> to get the data out of the socket (<code>read</code> copies data from kernel buffer into a buffer of my choice and I'd like to use some memory dynamically allocated).</p>\n\n<p>While I am reading it seems that Linux kernel is already using this technique. If this is used for implementing <code>malloc or new</code> is it still worth for me to do it given that allocation is already performant?</p>\n\n<p>I was thinking that I might be better off by using allocation on the  stack without SLAB algorithm but I am not sure which is the best approach.</p>\n"}, {"tags": ["c++", "c", "colors", "ncurses"], "comments": [{"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 2, "creation_date": 1425487853, "post_id": 28859928, "comment_id": 45985877, "body": "have you tried calling <code>use_default_colors()</code> after <code>start_color()</code>? This is going to reset the screen to default terminal colors."}, {"owner": {"reputation": 73, "user_id": 1925846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/84183ceee1d561471f37fcbfc6a884de?s=128&d=identicon&r=PG", "display_name": "Bitani", "link": "https://stackoverflow.com/users/1925846/bitani"}, "reply_to_user": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1425488878, "post_id": 28859928, "comment_id": 45986544, "body": "That works! Thank you! I looked through the whole ncurses API, so I&#39;m not sure how I missed that one."}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 2, "last_activity_date": 1425558880, "creation_date": 1425558880, "answer_id": 28877999, "question_id": 28859928, "link": "https://stackoverflow.com/questions/28859928/why-does-ncurses-start-color-darken-regular-text/28877999#28877999", "title": "Why does ncurses&#39; start_color() darken regular text?", "body": "<p>That's an FAQ (see <a href=\"http://invisible-island.net/ncurses/ncurses.faq.html#white_black\" rel=\"nofollow\">Ncurses resets my colors to white/black</a>). What is happening is that the 8 ANSI colors which define <em>white</em> and <em>black</em> do not necessarily match your default terminal foreground and background colors.  Generally those are chosen to be more intense.  So ANSI <em>white</em> looks like a light gray.  (On some terminals, ANSI <em>black</em> turns out to be a different shade of gray).</p>\n\n<p>This issue occurs whether your terminal has 8, 16, 88, 256 colors, since all of terminals which you will encounter for larger numbers of colors follow aixterm (16) or xterm (88, 256), which use the same first set of 8 ANSI colors (black is number 0, white is number 7).</p>\n\n<p>As noted, <a href=\"http://invisible-island.net/ncurses/man/default_colors.3x.html\" rel=\"nofollow\">use_default_colors</a> is an extension (not part of X/Open curses) provided to work around this problem.</p>\n"}], "owner": {"reputation": 73, "user_id": 1925846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/84183ceee1d561471f37fcbfc6a884de?s=128&d=identicon&r=PG", "display_name": "Bitani", "link": "https://stackoverflow.com/users/1925846/bitani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 28877999, "answer_count": 1, "score": 2, "last_activity_date": 1425558880, "creation_date": 1425487149, "question_id": 28859928, "link": "https://stackoverflow.com/questions/28859928/why-does-ncurses-start-color-darken-regular-text", "title": "Why does ncurses&#39; start_color() darken regular text?", "body": "<p>I'm currently creating a program using the ncurses library, but have ran into a problem while starting to implement colors.</p>\n\n<p>When I use the start_color() functions from ncurses, the default text color becomes a grey (close to #CCC) rather than the regular white.</p>\n\n<p>Code I'm using to compare:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ncurses.h&gt;\n\n/* Converts a str to a string of chtype. */\nchtype* str_to_chtype(char* str) {\n    int i;\n    chtype* chstr;\n    chstr = malloc(sizeof(chtype) * (strlen(str)+1));\n    for(i = 0; *str; ++str, ++i) {\n        chstr[i] = (chtype) *str;\n    }\n    chstr[i] = 0;\n    return chstr;\n}\n\nint main() {\n    /* Without color */\n    initscr();\n    addchstr(str_to_chtype(\"Testing\"));\n    getch();\n    endwin();\n\n    /* With color */\n    initscr();\n    start_color();\n    addchstr(str_to_chtype(\"Testing\"));\n    getch();\n    endwin();\n\n    return 0;\n}\n</code></pre>\n\n<p>Images:\n<img src=\"https://i.imgur.com/sw1S1XB.png\" alt=\"Before start_color\">\n<img src=\"https://i.imgur.com/H4dvtSp.png\" alt=\"After start_color\"></p>\n\n<p>Any ideas as to why this would be happening/how to fix it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195, "user_id": 4598879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804833fc4f55c51b042eb05c6cb303a?s=128&d=identicon&r=PG&f=1", "display_name": "hakononakani", "link": "https://stackoverflow.com/users/4598879/hakononakani"}, "edited": false, "score": 3, "creation_date": 1425486344, "post_id": 28859581, "comment_id": 45984847, "body": "% plus 14 more characters to make the comment postable"}, {"owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 0, "creation_date": 1425486368, "post_id": 28859581, "comment_id": 45984867, "body": "Go through the sequence with a loop. Check for odd number and display with if-elseif-else. Sorry I cannot provide the code."}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1425486756, "creation_date": 1425486756, "answer_id": 28859774, "question_id": 28859581, "link": "https://stackoverflow.com/questions/28859581/how-to-determine-odd-number-from-a-displayed-sequence-in-c/28859774#28859774", "title": "How to determine odd number from a displayed sequence in C?", "body": "<p>Steps:</p>\n\n<ol>\n<li>Loop through the array(sequence) element by element</li>\n<li>If an <code>array_element%2</code> is one, display the number.(<code>%</code> is the modulus operator and gets the remainder of the division of its operands)</li>\n</ol>\n\n<p>Now just convert the above steps into code.</p>\n"}], "owner": {"reputation": 1, "user_id": 4632961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e5b321d51d22591ab461e022d1b6d?s=128&d=identicon&r=PG&f=1", "display_name": "xi lei", "link": "https://stackoverflow.com/users/4632961/xi-lei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1425486756, "creation_date": 1425486242, "question_id": 28859581, "link": "https://stackoverflow.com/questions/28859581/how-to-determine-odd-number-from-a-displayed-sequence-in-c", "title": "How to determine odd number from a displayed sequence in C?", "body": "<p>I would like to determine the odd numbers from a given sequence of numbers. After determining,I want to display those odd numbers.</p>\n\n<p>Can you help me?\nI can only use loops,if-elseif-else,swtich,break and continue. Anything beyond the said lessons are not allowed. \nThank you.\nP.S\nI am sorry if I cannot provide the code. I want to code it on my own.I just need some ideas from you. </p>\n"}, {"tags": ["c", "gcc", "linker"], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1425486947, "creation_date": 1425486947, "answer_id": 28859843, "question_id": 28859574, "link": "https://stackoverflow.com/questions/28859574/unexpected-linker-script-symbol-address/28859843#28859843", "title": "Unexpected linker script symbol address", "body": "<p>Your wildcards are not matching <code>.data.*</code>. Put the following in the data section:</p>\n\n<pre><code>*(.data .data.*)\n</code></pre>\n"}], "owner": {"reputation": 1032, "user_id": 1440598, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/269b104fcd29354b21469e99066ba4d9?s=128&d=identicon&r=PG", "display_name": "devanl", "link": "https://stackoverflow.com/users/1440598/devanl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 28859843, "answer_count": 1, "score": 0, "last_activity_date": 1425486947, "creation_date": 1425486226, "question_id": 28859574, "link": "https://stackoverflow.com/questions/28859574/unexpected-linker-script-symbol-address", "title": "Unexpected linker script symbol address", "body": "<p>I am using gcc-arm-none-eabi 4.9 2014q4 to do my linking and the symbol addresses are not coming out the way I would expect and need for init.</p>\n\n<p>My linker script attempts to create the following sections:</p>\n\n<pre><code>MEMORY\n{\n    SRAM_L (rwx) : ORIGIN = 0x00000000, LENGTH = 32K\n    SRAM_U (rwx) : ORIGIN = 0x20000000, LENGTH = 32K\n}\n\nSECTIONS\n{\n    .vectors 0x00000000 :\n    {\n        *o(.vectors_)\n    }\n\n    .text :\n    {\n        . = ALIGN (4);\n        *(.text);\n        _etext = . ;\n    }\n\n    . = . ;\n    .data 0x20000000 : \n     AT ( ADDR(.text) + SIZEOF ( .text ) )\n    {\n        . = ALIGN (4);\n        _data = . ; *(.data); _edata = . ;\n    }\n\n    .bss : \n     AT ( ADDR(.data) + SIZEOF ( .data ) )\n    {\n        . = ALIGN (4);\n        _bss = . ; *(.bss) *(COMMON); _ebss = . ;\n    }\n\n    . = ALIGN (4);\n    . += 8;\n\n    free_memory_start = .;\n    _end_of_stack = .;\n    end = .;\n    _start_of_heap = .;\n    . = 0x20007000;\n    _start_of_stack = .;\n    _end_of_heap = .;\n\n}\n</code></pre>\n\n<p>Because of my configuration I now need to relocate the data and zero the bss.  When i look at the symbol table the values are incorrect...\n0x20000000 _data\n0x20000000 _edata</p>\n\n<p>It looks from the map like the .data is not being place in the .data section?</p>\n\n<pre><code>.data           0x20000000        0x0 load address 0x00000814\n                0x20000000                . = ALIGN (0x4)\n                0x20000000                _data = .\n *(.data)\n                0x20000000                _edata = .\n\n.igot.plt       0x00003c30        0x0 load address 0x20000000\n .igot.plt      0x00000000        0x0 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/armv7e-m/crtbegin.o\n\n.data.impure_data\n                0x00003c30      0x428\n .data.impure_data\n                0x00003c30      0x428 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libc.a(lib_a-impure.o)\n\n.data._impure_ptr\n                0x00004058        0x4\n .data._impure_ptr\n                0x00004058        0x4 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libc.a(lib_a-impure.o)\n                0x00004058                _impure_ptr\n\n.data.__malloc_av_\n                0x0000405c      0x408\n .data.__malloc_av_\n                0x0000405c      0x408 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libc.a(lib_a-mallocr.o)\n                0x0000405c                __malloc_av_\n\n.data.__malloc_trim_threshold\n                0x00004464        0x4\n .data.__malloc_trim_threshold\n                0x00004464        0x4 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libc.a(lib_a-mallocr.o)\n                0x00004464                __malloc_trim_threshold\n\n.data.__malloc_sbrk_base\n                0x00004468        0x4\n .data.__malloc_sbrk_base\n                0x00004468        0x4 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libc.a(lib_a-mallocr.o)\n                0x00004468                __malloc_sbrk_base\n\n.data.base      0x0000446c        0x4\n .data.base     0x0000446c        0x4 ./src/hardware/iomux-v3.o\n\n.data.heap      0x00004470        0x4\n .data.heap     0x00004470        0x4 ./src/sys.o\n                0x00004470                heap\n\n.data.lc_ctype_charset\n                0x00004474       0x20\n .data.lc_ctype_charset\n                0x00004474       0x20 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libg.a(lib_a-locale.o)\n\n.data.__mb_cur_max\n                0x00004494        0x4\n .data.__mb_cur_max\n                0x00004494        0x4 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libg.a(lib_a-locale.o)\n                0x00004494                __mb_cur_max\n\n.data.__wctomb  0x00004498        0x4\n .data.__wctomb\n                0x00004498        0x4 c:/program files (x86)/gnu arm embedded/4.9 2014q4/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m\\libg.a(lib_a-wctomb_r.o)\n                0x00004498                __wctomb\n</code></pre>\n\n<p>Have I somehow gotten my wildcards wrong for the data definition?</p>\n\n<p>Thx,\nDevan</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1425486173, "post_id": 28859420, "comment_id": 45984704, "body": "Rule #1 of macros: name them in ALL_CAPS! Rule #2: parenthesize the arguments in the macro expansion."}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1425486413, "post_id": 28859420, "comment_id": 45984899, "body": "Great hint! Will keep that in mind next time I define :)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1425487596, "post_id": 28859420, "comment_id": 45985705, "body": "Rule #3: if macros don&#39;t simplify the use of the function they call, there&#39;s no point in using them, in fact, they make your code less readable and harder to debug. Just use <code>printf()</code> directly. It&#39;s simple, it&#39;s easy, everybody understands it, and you&#39;ll get useful error messages. Macros just obscure all of that for no reason."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1425572198, "post_id": 28859420, "comment_id": 46026290, "body": "Rather than your <code>print_free()</code> macro, I suggest <code>#define print_string(s) printf(&quot;%s&quot;, (s))</code>. Passing a string directly as the format string causes problems if the string happens to contain <code>%</code> characters."}], "answers": [{"comments": [{"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 0, "creation_date": 1425486230, "post_id": 28859498, "comment_id": 45984753, "body": "Awesome! Seems like it will work except I got 1 more error which opens up Makefile.win source code and point at  $(BIN): $(OBJ) $(CC) $(LINKOBJ) -o $(BIN) $(LIBS) and the error is: &quot;Multiple definition of <i>add</i>&quot; Id returned 1 exit status."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 0, "creation_date": 1425486380, "post_id": 28859498, "comment_id": 45984874, "body": "@CalFox; Read the last line of the answer."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1425488874, "post_id": 28859498, "comment_id": 45986542, "body": "instead of <code>#define     print_int(integ, a)     printf(integ, a)  </code> you can also use <code>#define     print_int     printf</code>"}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1425489097, "post_id": 28859498, "comment_id": 45986675, "body": "@mch Without paranteses, well it might work but why ignore paranteses?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1425489291, "post_id": 28859498, "comment_id": 45986787, "body": "because the arguments are equal, so <code>print_int</code> will be replaced by <code>printf</code>. It&#39;s not necessary to add the arguments into the macro."}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1425489614, "post_id": 28859498, "comment_id": 45987011, "body": "@mch The same is not true for scanf as far as I see.. Just tested and the end result was a gibberish number printed out to screen and didn&#39;t even asked me to enter anything."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "edited": false, "score": 0, "creation_date": 1425490012, "post_id": 28859498, "comment_id": 45987263, "body": "@CalFox I never wrote anything about the <code>read</code> macro. I wrote about the <code>print_int</code> macro."}, {"owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1425490175, "post_id": 28859498, "comment_id": 45987367, "body": "@mch yeah well I thought you meant in general form when pinpointing print_int macro which made me think that rule applied to all macros but thanks. That hint just added +2 point to my knowledge :)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1425572133, "post_id": 28859498, "comment_id": 46026251, "body": "I&#39;m not sure why the <code>print_int</code> macro needs two parameters. If it&#39;s just supposed to print an integer value in decimal, why not <code>#define print_int(a) printf(&quot;%d&quot;, (a))</code>? With two parameters, you might as well just call <code>printf</code> directly (in fact you might as well do that anyway)."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1425572296, "post_id": 28859498, "comment_id": 46026346, "body": "@KeithThompson; Yes. You are right. I just pointed out what should be changed to the OP&#39;s snippet to work it well."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 0, "last_activity_date": 1425486379, "last_edit_date": 1425486379, "creation_date": 1425486046, "answer_id": 28859498, "question_id": 28859420, "link": "https://stackoverflow.com/questions/28859420/problematic-c-macro/28859498#28859498", "title": "Problematic C macro", "body": "<p>Change macro definition of <code>print_int</code> from</p>\n\n<pre><code>#define     print_int(integ, a)     printf(\"%d\", a)  \n</code></pre>\n\n<p>to  </p>\n\n<pre><code>#define     print_int(integ, a)     printf(integ, a)  \n</code></pre>\n\n<p>BTW, function <code>_add</code> should have a return type and a declaration prior to its first call, otherwise it will invoke undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 1035, "user_id": 5891503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/830569e0fa440b692ab80005ef9b00cb?s=128&d=identicon&r=PG", "display_name": "reiallenramos", "link": "https://stackoverflow.com/users/5891503/reiallenramos"}, "is_accepted": false, "score": -1, "last_activity_date": 1492600649, "creation_date": 1492600649, "answer_id": 43494217, "question_id": 28859420, "link": "https://stackoverflow.com/questions/28859420/problematic-c-macro/43494217#43494217", "title": "Problematic C macro", "body": "<p>Why not just include the \"Total is\" to your macro definition, then remove <code>integ</code> so you only need to pass 1 element.</p>\n\n<p><code>#define     print_int(a)     printf(\"Total is %d\", a)</code></p>\n\n<p><code>print_int(total);</code></p>\n\n<p>Sidenote, I'd recommend you edit your <code>_add_</code> function.</p>\n\n<ul>\n<li>the <code>_varName_</code> format is used by standard library functions. Avoid misinterpretations.</li>\n<li>declare data type (ie. void, int)</li>\n<li><p>good coding practice is to generally declare the function (without the function definition yet) before <code>main()</code>, then supply the definition after <code>main()</code>. something like this:</p>\n\n<pre><code>void vAdd();         //declaration\nint main(){\n    /*code*/\n}\nvoid vAdd()          //definition\n{\n    /*code*/\n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 654, "user_id": 4393935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ftOty.jpg?s=128&g=1", "display_name": "Volkan G&#252;ven", "link": "https://stackoverflow.com/users/4393935/volkan-g%c3%bcven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 28859498, "answer_count": 2, "score": 0, "last_activity_date": 1492600649, "creation_date": 1425485854, "last_edit_date": 1425488978, "question_id": 28859420, "link": "https://stackoverflow.com/questions/28859420/problematic-c-macro", "title": "Problematic C macro", "body": "<p>I've recently begun to write C macros and the following code does somehow not \noutput the expected text to screen. The problem lies with defining print_int where I want to use print_int macro as taking integer parameter with a desired text and print out the integer value with any text that is written inside the function (not in #define section). The code does not print out \"Total is\" text to screen. How can I correct the code?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define     print_int(integ, a)     printf(\"%d\", a)\n#define     read(j)                 scanf(\"%d\", &amp;j)\n#define     print_free(s)           printf(s)\n\nint main(int argc, char *argv[]) {\n\n    _add_();\n}\n\n_add_()\n{\n    int c, j, total;\n\n    print_free(\"Enter first number: \");\n    read(c);\n\n    print_free(\"Enter second number: \");\n    read(j);\n\n    total = c + j;\n    print_int(\"Total is %d\", total);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "scramble"], "comments": [{"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 1, "creation_date": 1425485774, "post_id": 28859294, "comment_id": 45984420, "body": "If by scrambling you mean just shuffling the letters into a random order, you could use a <a href=\"http://stackoverflow.com/questions/3343797/is-this-c-implementation-of-fisher-yates-shuffle-correct\">fisher-yates shuffle</a>."}, {"owner": {"reputation": 107, "user_id": 4293701, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/712465743/picture?type=large", "display_name": "Ben Parry", "link": "https://stackoverflow.com/users/4293701/ben-parry"}, "reply_to_user": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1425485851, "post_id": 28859294, "comment_id": 45984472, "body": "@indiv Thanks for the reply. What I&#39;m aiming for is so the user can select a letter from their created string and replace it with another letter/character."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1425485974, "post_id": 28859294, "comment_id": 45984559, "body": "<a href=\"http://www.stackoverflow.com/questions/8631023/are-there-any-algorithms-for-scrambling-a-word\">This</a> will interest you."}], "answers": [{"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1425486726, "post_id": 28859723, "comment_id": 45985109, "body": "No, use <code>fgets()</code> instead!"}, {"owner": {"reputation": 3835, "user_id": 1189841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/aJjcO.jpg?s=128&g=1", "display_name": "Alberto Bellini", "link": "https://stackoverflow.com/users/1189841/alberto-bellini"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1425486790, "post_id": 28859723, "comment_id": 45985150, "body": "Even if it throws a warning, for his purposes he should definitely be fine. Thanks for the tip anyway"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1425486859, "post_id": 28859723, "comment_id": 45985186, "body": "Problem is he uses a deprecated function rather than a safe function he gets to be able to use into the future."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1425487265, "post_id": 28859723, "comment_id": 45985491, "body": "<a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-dangerous-why-should-it-not-be-used\">Why the <code>gets()</code> function is dangerous and should never be used</a>"}, {"owner": {"reputation": 3835, "user_id": 1189841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/aJjcO.jpg?s=128&g=1", "display_name": "Alberto Bellini", "link": "https://stackoverflow.com/users/1189841/alberto-bellini"}, "edited": false, "score": 0, "creation_date": 1425487399, "post_id": 28859723, "comment_id": 45985580, "body": "Again, I&#39;m not saying it is safe, but for this purposes will just be fine. I have been developing C programs for the past 6 months and have always used gets. That is why I suggested it. This said, I&#39;m aware of the problems related to it"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1425494267, "post_id": 28859723, "comment_id": 45989706, "body": "@FoxNos: <code>gets()</code> is declared in <code>&lt;stdio.h&gt;</code>, not <code>&lt;string.h&gt;</code>. Unless your compiler conforms to the 2011 ISO C standard; then <code>gets()</code> is not declared anywhere (it was removed from the language because it&#39;s inherently unsafe). I urge you to stop using <code>gets</code>, and <i>please</i> stop advising others to use it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1425496896, "post_id": 28859723, "comment_id": 45991275, "body": "&quot;scanf() &amp; %s will read a string until a space is found after hitting enter.&quot; is <i>somewhat</i> correct but oversimplifies the true functionality.  <code>&quot;%s&quot;</code> <i>begins</i> by reading and discarding white-space, then it saves non-white-space <code>char</code> until eventually encountering white-space or <code>EOF</code>.  It, like <code>gets()</code> is not buffer size protected and both should not be used.  <code>fgets()</code> is a better approach."}], "tags": [], "owner": {"reputation": 3835, "user_id": 1189841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/aJjcO.jpg?s=128&g=1", "display_name": "Alberto Bellini", "link": "https://stackoverflow.com/users/1189841/alberto-bellini"}, "is_accepted": false, "score": -2, "last_activity_date": 1425494434, "last_edit_date": 1425494434, "creation_date": 1425486604, "answer_id": 28859723, "question_id": 28859294, "link": "https://stackoverflow.com/questions/28859294/scramble-a-string-using-c/28859723#28859723", "title": "Scramble a String Using C", "body": "<p>The first thing you want to do is think to a simple algorithm to shuffle the string. </p>\n\n<p>(Note that <code>scanf()</code> &amp; <code>%s</code> will read a string until a space is found after hitting enter. Therefore, 'hello world' would be just 'hello'. Instead use <code>gets()</code>  if you need to acquire even space characters).</p>\n\n<p>A simple shuffle function could be:</p>\n\n<pre><code>void mix (char * string) {\n    //Get string length\n    int len = strlen(string);\n    int i;\n\n    char tmp;\n\n    for (i = 0; i &lt; len / 2; i++) {\n        //Loop every char till the middle of the string\n        //Save the current char\n        tmp = string[i];\n        //Put in this position the opposite char in the string\n        string[i] = string[len - i];\n        //Replace the opposite char\n        string[len - i] = tmp;\n    }\n}\n\n//If you input hello you should get olleh\n</code></pre>\n\n<p>However this is not what you was exactly looking for, but I would suggest you to make two or three functions like this and in the <code>while()</code> loop keep calling them one by one.</p>\n\n<p>Before the loop restarts just ask the user for a <code>char</code> with a scanf().</p>\n\n<p>The while loop should be something like:</p>\n\n<pre><code>while (char != 'a') {\n  //Mix the string\n  mix_1();\n  mix_2();\n  mix_3();\n  //Ask char again\n  scanf(\"%c\",&amp;char);\n  //Loop goes on till char != a\n}\n</code></pre>\n\n<p>Hope this helped.In this case a simple vote on this answer would really be helpful for me. </p>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 107, "user_id": 4293701, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/712465743/picture?type=large", "display_name": "Ben Parry", "link": "https://stackoverflow.com/users/4293701/ben-parry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425494434, "creation_date": 1425485505, "question_id": 28859294, "link": "https://stackoverflow.com/questions/28859294/scramble-a-string-using-c", "title": "Scramble a String Using C", "body": "<p>I've just started learning C this semester after primarily learning Java and I've been asked to create a program which allows the user to enter in a string, and then scramble the letters inside their string. </p>\n\n<pre><code>#include &lt;stdio.h&gt; //Alows input/output operations\n#include &lt;stdlib.h&gt; //Standard utility operations\n\nint main(int argc, char *argv[]) //Main method\n{\n  printf(\"------------------------\\n\");\n  printf(\"WELCOME TO THE SCRAMBLER\\n\");\n  printf(\"------------------------\\n\\n\");\n\n  char userString[50]; //Declaring the user string \n  printf(\"Please input a String :&gt; \"); //Iforms the user to enter a string\n  scanf(\"%s\", userString); //Allows the user to enter in a string\n\n  char targetLetter[2]; //Declaring the target letter\n  char replaceLetter[2]; //Declaring the replace letter\n\n  while(1)\n  {\n\n\n  }\n}\n</code></pre>\n\n<p>This is what I currently have, I just need help/advice on how to actually scramble the string. The user should be able to scramble the string as many times as they like, until they enter a specific character, then the program terminates. Thanks for any help in advance!</p>\n"}, {"tags": ["c", "arduino"], "comments": [{"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1425485371, "post_id": 28859197, "comment_id": 45984107, "body": "are you asking how to de-reference a pointer?  like this <code>year(*t)</code>"}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1425485418, "post_id": 28859197, "comment_id": 45984154, "body": "you obviously are also new to programming in general - it is <i>very</i> advisable to learn programming basics first - without that knowledge you will probably never achieve your goals. The above snippet will loop forever, effectively deadlocking the microprocessor."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1425485634, "post_id": 28859197, "comment_id": 45984313, "body": "Arduino code is not written in C."}, {"owner": {"reputation": 3116, "user_id": 463687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXUNI.jpg?s=128&g=1", "display_name": "Edgar Bonet", "link": "https://stackoverflow.com/users/463687/edgar-bonet"}, "edited": false, "score": 0, "creation_date": 1425485716, "post_id": 28859197, "comment_id": 45984379, "body": "<code>year()</code> and <code>getTime()</code> are not part of the standard Arduino API. You should state which libraries you are using and, more importantly, what you are trying to accomplish."}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1425485867, "post_id": 28859197, "comment_id": 45984485, "body": "@unwind horribly wrong, every <i>sketch</i> is a c program, being compiled by gcc into hex-code - you get a IDE for C together with very powerful and comfortable libraries."}, {"owner": {"reputation": 3116, "user_id": 463687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXUNI.jpg?s=128&g=1", "display_name": "Edgar Bonet", "link": "https://stackoverflow.com/users/463687/edgar-bonet"}, "reply_to_user": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 1, "creation_date": 1425486074, "post_id": 28859197, "comment_id": 45984624, "body": "@specializt: it\u2019s actually C++."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1425489720, "post_id": 28859197, "comment_id": 45987076, "body": "How is <code>year()</code> defined?"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1425485357, "creation_date": 1425485357, "answer_id": 28859239, "question_id": 28859197, "link": "https://stackoverflow.com/questions/28859197/compare-a-date-pointer-with-a-date/28859239#28859239", "title": "Compare a date pointer with a date", "body": "<p>Comparing strings should be done using <code>strcmp()</code> not with <code>==</code> operator </p>\n\n<p>You are actually comparing the pointers and not the strings by using <code>==</code></p>\n"}, {"tags": [], "owner": {"reputation": 3835, "user_id": 1189841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/aJjcO.jpg?s=128&g=1", "display_name": "Alberto Bellini", "link": "https://stackoverflow.com/users/1189841/alberto-bellini"}, "is_accepted": false, "score": 0, "last_activity_date": 1425485779, "last_edit_date": 1425485779, "creation_date": 1425485424, "answer_id": 28859264, "question_id": 28859197, "link": "https://stackoverflow.com/questions/28859197/compare-a-date-pointer-with-a-date/28859264#28859264", "title": "Compare a date pointer with a date", "body": "<p>I would import <code>&lt;string.h&gt;</code>\nThen use <code>strcmp()</code> to compare the two strings:</p>\n\n<p>In your case</p>\n\n<pre><code>if (strcmp(string1,string2) == 0) {\n  //Some good stuff :)\n}\n</code></pre>\n\n<p>C does not support direct comparison between strings.\nThis because strings are <code>char</code> arrays and should be manipulated properly</p>\n\n<p>Usually, a for loop is required to make a proper comparison, but in this case it is much easy using a library function, that does the exact same thing</p>\n\n<p>Just to let it know, to compare you would use something like</p>\n\n<pre><code>for(i=0;s[i]!='\\0';i++) {\n  //Loop till end of string\n  //Check if every char of string 1 is equal to the one in the same position of string 2\n}\n</code></pre>\n\n<p>Hope this was helpful.</p>\n\n<p>Best regards.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4540985, "user_type": "registered", "profile_image": "https://graph.facebook.com/889672951084246/picture?type=large", "display_name": "Dan Rahenkamp", "link": "https://stackoverflow.com/users/4540985/dan-rahenkamp"}, "edited": false, "score": 0, "creation_date": 1425493092, "post_id": 28859437, "comment_id": 45989029, "body": "This is what I need. Thanks! Learned something."}], "tags": [], "owner": {"reputation": 26, "user_id": 4323711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32da98572285ff63e64ae3d48a1393e?s=128&d=identicon&r=PG&f=1", "display_name": "Azaraks", "link": "https://stackoverflow.com/users/4323711/azaraks"}, "is_accepted": true, "score": 1, "last_activity_date": 1425485917, "creation_date": 1425485917, "answer_id": 28859437, "question_id": 28859197, "link": "https://stackoverflow.com/questions/28859197/compare-a-date-pointer-with-a-date/28859437#28859437", "title": "Compare a date pointer with a date", "body": "<pre><code>if(year(t)==1970)\n{\n    getTime();\n}\n</code></pre>\n\n<p>year() returns 4-digit year integer. not a string.</p>\n"}], "owner": {"reputation": 3, "user_id": 4540985, "user_type": "registered", "profile_image": "https://graph.facebook.com/889672951084246/picture?type=large", "display_name": "Dan Rahenkamp", "link": "https://stackoverflow.com/users/4540985/dan-rahenkamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 28859437, "answer_count": 3, "score": 0, "last_activity_date": 1425489618, "creation_date": 1425485198, "question_id": 28859197, "link": "https://stackoverflow.com/questions/28859197/compare-a-date-pointer-with-a-date", "title": "Compare a date pointer with a date", "body": "<p>In an Arduino script how do I compare a date pointer with a string that is a date. Currently I am trying:</p>\n\n<pre><code>while(year(t)==\"1970\") {  \n    getTime();\n   }\n</code></pre>\n\n<p>but I am getting a can't compare a pointer with a string compiler error which I understand but I would like to compare the two somehow and the somehow is where I am stuck. Thanks for any help for this newbie</p>\n"}, {"tags": ["c++", "c", "pointers", "struct", "memory-alignment"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1425485344, "post_id": 28859127, "comment_id": 45984090, "body": "This is very close to <a href=\"http://stackoverflow.com/questions/8568432/is-gccs-attribute-packed-pragma-pack-unsafe\">this question</a>, albeit more specific. <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=51628\" rel=\"nofollow noreferrer\">The GCC bug report</a> mentioned in that answer talks specifically about pointers, though."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1425485855, "post_id": 28859127, "comment_id": 45984475, "body": "Well, it&#39;s sorta accepted/expected that, if you have such a packed struct/class, you pass only the start address and dereference in the target, so avoiding passing the address of an unaligned var.   If devs do weird stuff, then weird stuff will happen."}, {"owner": {"reputation": 1142, "user_id": 1080389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72bbbf9d6adde772be8fdd187e577cd?s=128&d=identicon&r=PG", "display_name": "Sven", "link": "https://stackoverflow.com/users/1080389/sven"}, "edited": false, "score": 2, "creation_date": 1425486830, "post_id": 28859127, "comment_id": 45985166, "body": "Some humans make mistakes. Other humans don&#39;t know and basically accept whatever works on their machine as &quot;correct&quot;. That&#39;s why we have programs that give us &quot;hints&quot; where the humans might have done bad things. Having a &quot;hint&quot; for this particular case really makes sense."}, {"owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 0, "creation_date": 1425488919, "post_id": 28859127, "comment_id": 45986565, "body": "Have you tried compiling it on an arch where unaligned access to integers is not permitted? On x86 it&#39;s not only permitted but not even slower these days (thanks to the cache)."}, {"owner": {"reputation": 1142, "user_id": 1080389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72bbbf9d6adde772be8fdd187e577cd?s=128&d=identicon&r=PG", "display_name": "Sven", "link": "https://stackoverflow.com/users/1080389/sven"}, "edited": false, "score": 0, "creation_date": 1425489824, "post_id": 28859127, "comment_id": 45987141, "body": "I tried to cross-compile for ARM. I even tried -Weverything with clang."}], "answers": [{"tags": [], "owner": {"reputation": 302, "user_id": 898671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d38224c6eae1105c1c832e2a0252fea7?s=128&d=identicon&r=PG", "display_name": "NickBroon", "link": "https://stackoverflow.com/users/898671/nickbroon"}, "is_accepted": false, "score": 7, "last_activity_date": 1473082943, "creation_date": 1473082943, "answer_id": 39331935, "question_id": 28859127, "link": "https://stackoverflow.com/questions/28859127/compiler-warning-when-using-pointers-to-packed-structure-members/39331935#39331935", "title": "Compiler Warning when using Pointers to Packed Structure Members", "body": "<p>clang has just added a new <code>-Waddress-of-packed-member</code> warning for this specific issue. See <a href=\"https://reviews.llvm.org/rL278483\" rel=\"noreferrer\">https://reviews.llvm.org/rL278483</a> and <a href=\"https://llvm.org/bugs/show_bug.cgi?id=22821\" rel=\"noreferrer\">https://llvm.org/bugs/show_bug.cgi?id=22821</a> for details. It should appear in the 4.0 release of clang.</p>\n"}, {"tags": [], "owner": {"reputation": 909, "user_id": 8041414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f488d544c535a091b7310e7d7e6a98f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jesferman", "link": "https://stackoverflow.com/users/8041414/jesferman"}, "is_accepted": false, "score": 3, "last_activity_date": 1567423251, "creation_date": 1567423251, "answer_id": 57756062, "question_id": 28859127, "link": "https://stackoverflow.com/questions/28859127/compiler-warning-when-using-pointers-to-packed-structure-members/57756062#57756062", "title": "Compiler Warning when using Pointers to Packed Structure Members", "body": "<p>gcc has just added the same warning (<code>-Waddress-of-packed-member</code>) in gcc-9. It is enabled by default when using <code>-Wall</code></p>\n"}, {"comments": [{"owner": {"reputation": 1142, "user_id": 1080389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72bbbf9d6adde772be8fdd187e577cd?s=128&d=identicon&r=PG", "display_name": "Sven", "link": "https://stackoverflow.com/users/1080389/sven"}, "edited": false, "score": 0, "creation_date": 1604848063, "post_id": 64739059, "comment_id": 114465862, "body": "Consider having a <code>char a; int x;</code> inside the struct. Then <code>a</code> will be at an address of the form <code>4*k</code> and <code>x</code> will be at an address of the form <code>4*k+1</code>, where <code>k</code> is an integer."}], "tags": [], "owner": {"reputation": 1168, "user_id": 6902803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a367db18393e37cb6bd3fc799bd21ca?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Kokorin", "link": "https://stackoverflow.com/users/6902803/oleg-kokorin"}, "is_accepted": false, "score": 0, "last_activity_date": 1604844778, "creation_date": 1604844778, "answer_id": 64739059, "question_id": 28859127, "link": "https://stackoverflow.com/questions/28859127/compiler-warning-when-using-pointers-to-packed-structure-members/64739059#64739059", "title": "Compiler Warning when using Pointers to Packed Structure Members", "body": "<p>consider following alignment for the <em>typedef</em> structure definition:</p>\n<pre><code>#pragma pack(1)\ntypedef struct { int x; } uas __attribute__ ((aligned (sizeof(uint32_t))));\n#pragma pack()\n</code></pre>\n<p>this will notify compiler to make sure all allocations of the structure will be 4 bytes aligned.</p>\n<p>the reference is <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3/gcc/Type-Attributes.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 1142, "user_id": 1080389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72bbbf9d6adde772be8fdd187e577cd?s=128&d=identicon&r=PG", "display_name": "Sven", "link": "https://stackoverflow.com/users/1080389/sven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10170, "favorite_count": 2, "answer_count": 3, "score": 15, "last_activity_date": 1604844778, "creation_date": 1425485034, "question_id": 28859127, "link": "https://stackoverflow.com/questions/28859127/compiler-warning-when-using-pointers-to-packed-structure-members", "title": "Compiler Warning when using Pointers to Packed Structure Members", "body": "<p>Many C/C++ compilers (including gcc and clang) have a feature called packed structures. It comes in handy for a number of reasons, but it has to be used with caution. One potential pitfall is that you use a pointer to a member of a struct as an argument of another function. Now that function is unaware of the unaligned pointer. Let me illustrate what I mean with some code:</p>\n\n<pre><code>#pragma pack(1)\ntypedef struct { int x; } uas;\n#pragma pack()\n\nvoid foo(int *f) {\n  // some code using the value of *f\n}\nvoid bar(uas *b) {\n  foo(&amp;(b-&gt;x));\n}\n</code></pre>\n\n<p>The alignment of <code>int</code> on a 32 bit machine is usually 4. The compiler now may generate code for <code>foo()</code> that may not work if <code>f</code> is not 4 byte aligned. This is the case on older ARM architectures.</p>\n\n<p>Now struct <code>uas</code> and all members within have an alignment guarantee of 1. Clearly, passing the address of <code>b-&gt;x</code> to <code>foo()</code> is a bad idea.</p>\n\n<p>GCC and clang have a compiler warning (<code>-Wcast-align</code>) which is triggered, for example, by casting <code>char*</code> to <code>int*</code>. Using pointers to members of packed structures, even though supported by both, doesn't seem to trigger this warning. I also tried <code>-Wall</code> and <code>-Wextra</code>, but they do not even include <code>-Wcast-align</code>.</p>\n\n<p>My main question is whether GCC, clang, or any other compiler supporting packed structures have a warning that would be triggered by the particular example above. It seems, such a warning is mandatory if compilers support packed structures.</p>\n"}, {"tags": ["c++", "c", "multithreading", "thread-safety", "cryptoapi"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1425485524, "post_id": 28859065, "comment_id": 45984236, "body": "<code>I can expect that the applications which call my library will pass a valid handle. But if not my library will run into an undefined behaviour.</code>  Assume you could discover that the handle passed is invalid.  What would your code do?  Also, you should weigh the benefits and drawbacks of trying to do too much hand-holding.  If the users of your API are experienced programmers, then maybe just documenting that they need to pass a valid handle, or else bad things may happen, may be enough."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2411242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd7f87ccad58942e7cde92334fafc848?s=128&d=identicon&r=PG", "display_name": "Stephan Weitlaner", "link": "https://stackoverflow.com/users/2411242/stephan-weitlaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1425561467, "creation_date": 1425561467, "answer_id": 28878763, "question_id": 28859065, "link": "https://stackoverflow.com/questions/28859065/check-pointer-handle-is-valid/28878763#28878763", "title": "Check pointer handle is valid", "body": "<p>I found a solution and will answer my question.</p>\n\n<p>I overlooked a little but important detail</p>\n\n<p>In CSP there are not direct API calls to the dll (load library, get function pointer, call function) because the function calls are forwarded by the Microsoft CSP which loads the CSP library by name. </p>\n\n<p>So the Microsoft CSP needs to know and to check the passed context to get a correct mapping to the specific library.</p>\n\n<p>Example:<br>\n1. client->cryptacquirecontext(<em>in</em> cspname, <em>out</em> ctx)<br>\n2. MS CSP->loads libray from the cspname<br>\n3. MS CSP->calls the function pointer of the loaded library<br>\n4. CSP LIB->cryptacquirecontext creates new context<br>\n5. MS CSP->receives the returned csp handle and saves it to the dll mapping<br>\n6. MS CSP->returns the result to the calling application<br>\n7. client->cryptsetprovparam(ctx) // which was created before<br>\n8. MS CSP->checks if the context exists and which library is responsible<br>\n9. MS CSP->if the given context can not be mapped to a csp dll an error will be   returned, because the MS CSP doesn\u2019t know which function pointer should be called.</p>\n\n<p>So in this case it should be sufficient just to allocate memory. If the client application passes invalid context handle it will never hit the csp library.</p>\n\n<p>I think that the MS CSP uses a list with mutex guard to store the context mappings. Because the context can be anything from a random number to a valid pointer.</p>\n"}], "owner": {"reputation": 1, "user_id": 2411242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd7f87ccad58942e7cde92334fafc848?s=128&d=identicon&r=PG", "display_name": "Stephan Weitlaner", "link": "https://stackoverflow.com/users/2411242/stephan-weitlaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425561467, "creation_date": 1425484906, "last_edit_date": 1425487397, "question_id": 28859065, "link": "https://stackoverflow.com/questions/28859065/check-pointer-handle-is-valid", "title": "Check pointer handle is valid", "body": "<p>I want to implement a Microsoft CryptographicServiceProvider library and currently I thinking about the best way how to deal with context handle which I create. </p>\n\n<p>My question is specific to this case but the design approach can be used in other situations.</p>\n\n<p>I come from a managed code background and I am not 100% shure about multithread pointer handling in C/C++.</p>\n\n<p>In general there are two functions which are responsible for handle creation and destruction (CryptAcquireContext, CryptReleaseContext), and all subsequent CSP functions uses the handle which is return by the creator function.</p>\n\n<p>I didn't found any concrete information or specification from Microsoft which gives a design approach or rules how to do it. But I did research with other CSP providers created by Microsoft to find out the design rules, which are:</p>\n\n<ul>\n<li>The functions must be thread safe</li>\n<li>The context handle will not be shared between threads</li>\n<li>If a context handle is not valid return with an error</li>\n</ul>\n\n<p>Other MS CSP Provider will return a valid pointer as handle, or NULL if not.</p>\n\n<p>I don't think that the calling application will pass complete garbage but it could happen that it passes a handle which has been already released and my library should return with an error.</p>\n\n<p>This brought me to three ideas how to implement that:</p>\n\n<ol>\n<li><p>Just allocate memory of my context struct with malloc or new and return the raw pointer as handle. </p>\n\n<p>I can expect that the applications which call my library will pass a valid handle. But if not my library will run into an undefined behaviour.    So I need a better solution.</p></li>\n<li><p>Add the pointer which I create to a list (std::list, std::map). So I can iterate the list to check if the pointer exists. The access to the list is guarded with a mutex.</p>\n\n<p>This should be safe and a regular API usage shouldn't be a performance issue. But in a Terminal Server scenario it could be. In this case the Windows process lsass.exe creates for every user who wants to login a CSP context in a separate thread and makes around 10 API calls per context.</p>\n\n<p>The design goal is that my library should be able to handle 300 clients parallel. I don't know how many threads a created by Windows in this case.</p>\n\n<p>So if possible I would prefer a lockless implementation.</p></li>\n<li><p>I allocate a basic struct which holds a check value and the pointer of the actual data. Use the pointer of this struct as context handle.</p>\n\n<pre><code>typedef struct CSPHandle  \n{  \n    int Type; // (eg. magic number CSPContext=0xA1B2C3D4)  \n    CSPContextPtr pCSPContext;  \n};\n</code></pre>\n\n<p>So I could read the first byte of the passed pointer and check if the data equals my defined type. And I have the full control about actual data pointer, which is set to NULL if the context is released. Is this a good or bad idea?</p></li>\n</ol>\n\n<p>What are your thoughts about this case? Should I go with one of these approaches or is there a other solution? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "windows", "uac", "qos"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1425487790, "post_id": 28859058, "comment_id": 45985832, "body": "You can&#39;t. If you could do so, there would be no point in having an administrative account. Do you not understand the concept of requiring elevated privileges? (It&#39;s to prevent non-admin users and malicious code from doing bad things.) If you could arbitrarily go around it, it would be a pretty huge security hole, don&#39;t you think?"}, {"owner": {"reputation": 2726, "user_id": 1884325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a4e2bd26f106332a62d676c3ba09a51?s=128&d=identicon&r=PG", "display_name": "user1884325", "link": "https://stackoverflow.com/users/1884325/user1884325"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1425488045, "post_id": 28859058, "comment_id": 45985992, "body": "I understand that, but can you tell me how an application which is using QOS is supposed to work under a default user account then? QOSAddSocketToFlow fails (ACCESS_DENIED) when the application is run under a default user account."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1425490390, "post_id": 28859058, "comment_id": 45987508, "body": "I&#39;m afraid I don&#39;t know the answer to that, but that&#39;s not what you asked here. You asked about bypassing UAC to run an elevated process from a default user account (which is what both my comment and the answer below address). If you now have a different question about using QOS, you should create a new question and ask there."}, {"owner": {"reputation": 2726, "user_id": 1884325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a4e2bd26f106332a62d676c3ba09a51?s=128&d=identicon&r=PG", "display_name": "user1884325", "link": "https://stackoverflow.com/users/1884325/user1884325"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1425490785, "post_id": 28859058, "comment_id": 45987744, "body": "I edited the question"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1425490942, "post_id": 28859058, "comment_id": 45987809, "body": "I rolled back your edit.  It is inappropriate here to change the entire meaning of the question after you&#39;ve received answers to it in the prior state. It makes the answers appear totally wrong, the person answering appears foolish, and it can cost them reputation via downvotes as a result. Once again: <b>If you now have a different question about using QOS, you should create a new question and ask it there.</b> This question is about launching an application silently with admin privileges from a default user account, and it has an answer."}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1425500296, "post_id": 28859058, "comment_id": 45993208, "body": "In Linux you&#39;d do this by setting the <a href=\"http://en.wikipedia.org/wiki/Setuid\" rel=\"nofollow noreferrer\">suid</a> bit on your executable.  I disagree with the assertion of previous comments that say there would be no point in having an administrator account.  An administrator would of course set up the program for the unprivileged users to use.  Anyway, knowing this bit of trivia about suid will let you find a question that was <a href=\"http://stackoverflow.com/questions/651787/what-choices-do-i-have-on-ms-windows-platforms-for-the-equivalent-of-suid-from-u\">asked before</a> related to this issue."}], "answers": [{"comments": [{"owner": {"reputation": 2726, "user_id": 1884325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a4e2bd26f106332a62d676c3ba09a51?s=128&d=identicon&r=PG", "display_name": "user1884325", "link": "https://stackoverflow.com/users/1884325/user1884325"}, "edited": false, "score": 0, "creation_date": 1425485324, "post_id": 28859162, "comment_id": 45984077, "body": "So applications which are run under default user accounts can&#39;t use QOS? In many setups users do not know (and are not allowed to know) what the admin&#39;s password is. So how can you ensure that an application which is run under a default user account can use QOS (i.e. mark outgoing packets with a certain DSCP value) in that case?"}, {"owner": {"reputation": 2726, "user_id": 1884325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a4e2bd26f106332a62d676c3ba09a51?s=128&d=identicon&r=PG", "display_name": "user1884325", "link": "https://stackoverflow.com/users/1884325/user1884325"}, "edited": false, "score": 0, "creation_date": 1425485441, "post_id": 28859162, "comment_id": 45984172, "body": "Is there a way to grant/modify certain permissions for a user, so that QOS can be used?"}, {"owner": {"reputation": 1622, "user_id": 36897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/870840b568004def3deb2d110c680bd6?s=128&d=identicon&r=PG", "display_name": "rgargente", "link": "https://stackoverflow.com/users/36897/rgargente"}, "reply_to_user": {"reputation": 2726, "user_id": 1884325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a4e2bd26f106332a62d676c3ba09a51?s=128&d=identicon&r=PG", "display_name": "user1884325", "link": "https://stackoverflow.com/users/1884325/user1884325"}, "edited": false, "score": 0, "creation_date": 1425485914, "post_id": 28859162, "comment_id": 45984512, "body": "I don&#39;t know specifically about QOS. But you are basically asking to bypass a security measure, which is just not reasonable. If for some reason QOS requires privileges, then I guess you will have to live with that."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1425508100, "post_id": 28859162, "comment_id": 45997529, "body": "The correct solution is to install a system service to do the work on the user&#39;s behalf."}], "tags": [], "owner": {"reputation": 1622, "user_id": 36897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/870840b568004def3deb2d110c680bd6?s=128&d=identicon&r=PG", "display_name": "rgargente", "link": "https://stackoverflow.com/users/36897/rgargente"}, "is_accepted": true, "score": 2, "last_activity_date": 1425485952, "last_edit_date": 1425485952, "creation_date": 1425485110, "answer_id": 28859162, "question_id": 28859058, "link": "https://stackoverflow.com/questions/28859058/windows-7-launching-an-application-silently-with-admin-privileges-under-default/28859162#28859162", "title": "Windows 7: Launching an application silently with admin privileges under default user account?", "body": "<p>This goes against the security of the OS. You are basically asking to be able to bypass a security measure enforced by the OS. If you were allowed to do this, any malicious code could do the same thing, so I don't think that you can (or should) do it.</p>\n"}], "owner": {"reputation": 2726, "user_id": 1884325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a4e2bd26f106332a62d676c3ba09a51?s=128&d=identicon&r=PG", "display_name": "user1884325", "link": "https://stackoverflow.com/users/1884325/user1884325"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 28859162, "answer_count": 1, "score": 0, "last_activity_date": 1425500392, "creation_date": 1425484879, "last_edit_date": 1425500392, "question_id": 28859058, "link": "https://stackoverflow.com/questions/28859058/windows-7-launching-an-application-silently-with-admin-privileges-under-default", "title": "Windows 7: Launching an application silently with admin privileges under default user account?", "body": "<p>How can you ensure that an executable is silently launched with admin (or sufficiently elevated) privileges when that executable is launched by a user who is logged into a Windows account which has default user privileges (i.e., not an admin account)?</p>\n\n<p>I don\u2019t want the user to have to enter an admin password to be able to launch the exe with admin privileges.</p>\n\n<p>Background:</p>\n\n<p>The executable is sending out network packets which has to be marked with a certain DSCP value (QOS, qwave.lib). This is not possible unless the executable is executing with elevated privileges.</p>\n"}, {"tags": ["c", "struct", "mmap"], "comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425486632, "post_id": 28858802, "comment_id": 45985048, "body": "What is the value of <code>page_size</code> before <code>create_shm()</code> ?  Make sure it is set to <code>getpagesize()</code> (<code>#include &lt;unistd.h&gt;</code>). I tested your code and apart from this problem I had no crash with <code>init_shm</code>."}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425487697, "post_id": 28858802, "comment_id": 45985778, "body": "<code>page_size</code> is set to <code>getpagesize()</code> before caling <code>create_shm()</code> . What operating system are you using? If it&#39;s Linux than I think that explains why it works for you and not me. I&#39;ve tried this both on FreeBSD 10.1 and Mac OSX 10.10.1, but not Linux yet. I think this code might rely on undefined behavior from c&#39;s perspective but its actually well defined on Linux with gcc, so thats why it works on Linux. I&#39;m going to compile it and run on Linux and test this theory."}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1425492130, "post_id": 28858802, "comment_id": 45988485, "body": "Just some quick questions: 1) What is the output of the printf &quot;shm: redzone: shmdata: redzone: end&quot;? 2) If you put <code>shm-&gt;stats.total_syscalls_done = 1</code> at the end of <code>create_shm()</code>, does it still crash? 3) Does your program do anything between <code>create_shm()</code> and <code>init_shm()</code>? 4) Can you <code>printf(&quot;%p&quot;, &amp;shm-&gt;stats.total_syscalls_done);</code> and see what that says?"}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1425494653, "post_id": 28858802, "comment_id": 45989938, "body": "The output is <code>shm: redzone:0x10a0ad000. shmdata:0x10a0cb000. redzone:0x10a0cb000 end:0x10a0e9000</code>, Putting <code>shm-&gt;stats.total_syscalls_done = 1</code> at the end still causes crashes. Basically the first thing to access a member of shm causes a crash. Nothing else happens between <code>create_shm()</code> and <code>init_shm</code>. The printf of <code>&amp;shm-&gt;stats.total_syscalls_done</code> is 0x10a0cb008 ."}], "answers": [{"comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425503572, "post_id": 28864913, "comment_id": 45995142, "body": "This &amp;PAGE_MASK is useless if we divide by page_size. The OP should check the value of PAGE_MASK."}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1425507398, "post_id": 28864913, "comment_id": 45997180, "body": "Thanks, changing that line fixed the problem, but how come this runs on linux then?"}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "reply_to_user": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1425509630, "post_id": 28864913, "comment_id": 45998175, "body": "@2trill2spill I&#39;m not sure.  Either <code>PAGE_MASK</code> wasn&#39;t the same or maybe <code>mprotect()</code> had a different behavior.  If you are curious you should debug it on Linux to find out."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425544982, "post_id": 28864913, "comment_id": 46009437, "body": "For my test I defined PAGE_MASK as page_size - 1, which is the bad value. I checked again and indeed <code>shm==redafter</code>. Apparently the mprotect doesn&#39;t prevent from reading !!!???!!?"}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425546839, "post_id": 28864913, "comment_id": 46010405, "body": "@chmike Strange... Did you check the return value of <code>mprotect</code> to see if it returned some kind of error?  Maybe there is some reason it won&#39;t allow it?"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425548282, "post_id": 28864913, "comment_id": 46011231, "body": "I found the problem. I did have a segmentation fault caused by the protection. The problem is that my IDE (QtCreator 5.2.1) didn&#39;t show it when I ran the program. I had to execute the program in a shell to see the segmentation fault message. With the IDE, the program is silently terminating at the location of the segmentation fault."}], "tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 2, "last_activity_date": 1425504236, "last_edit_date": 1425504236, "creation_date": 1425503128, "answer_id": 28864913, "question_id": 28858802, "link": "https://stackoverflow.com/questions/28858802/how-to-mmap-a-struct-as-shared-anonymous-memory/28864913#28864913", "title": "How to mmap a struct as shared anonymous memory?", "body": "<p>According to what the OP answered in the comments, the output of the printf was:</p>\n\n<pre><code>shm: redzone:0x10a0ad000. shmdata:0x10a0cb000. redzone:0x10a0cb000 end:0x10a0e9000\n</code></pre>\n\n<p>Notice that <code>shmdata</code> is at the same address as the redzone after (<code>redafter</code>), both being at <code>0x10a0cb000</code>.  This means that <code>shm_pages</code> was zero.</p>\n\n<p>This line is most likely the problem:</p>\n\n<pre><code>shm_pages = ((sizeof(struct shm_s) + page_size - 1) &amp; PAGE_MASK) / page_size;\n</code></pre>\n\n<p>I'm guessing that <code>PAGE_MASK</code> is <code>0xfff</code>.  If so, then that expression will always evalutate to 0.  As chmike points out, since you are dividing by page_size anyways, there is no need to use <code>PAGE_MASK</code> at all.  In that case, your code should read:</p>\n\n<pre><code>shm_pages = (sizeof(struct shm_s) + page_size - 1) / page_size;\n</code></pre>\n"}], "owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 28864913, "answer_count": 1, "score": 0, "last_activity_date": 1425504236, "creation_date": 1425484177, "question_id": 28858802, "link": "https://stackoverflow.com/questions/28858802/how-to-mmap-a-struct-as-shared-anonymous-memory", "title": "How to mmap a struct as shared anonymous memory?", "body": "<p>I am trying to mmap a struct as anonymous shared memory so it can be shared across multiple child processes. However whenever I access the struct outside of the functions that create it, I get a segfault. The code is derived from trinity fuzzer, which can be found here <a href=\"https://github.com/kernelslacker/trinity\" rel=\"nofollow\">https://github.com/kernelslacker/trinity</a> .</p>\n\n<p>first we have a excerpt of a header which declares and defines the struct we will be using. Note shm is declared as a global below the struct declaration.</p>\n\n<pre><code>struct shm_s {\nstruct childdata **children;\n\nstruct stats_s stats;\n\nunsigned int running_childs;\n\n/* rng related state */\nunsigned int seed;\n\n#ifdef ARCH_IS_BIARCH\n/* Check that 32bit emulation is available. */\nunsigned int syscalls32_succeeded;\nunsigned int syscalls32_attempted;\n#endif\n\n/* pids */\npid_t mainpid;\npid_t last_reaped;\n\n/* various flags. */\nenum exit_reasons exit_reason;\nbool dont_make_it_fail;\nbool spawn_no_more;\nbool ready;\nbool postmortem_in_progress;\n\n/* Use dispatch queue instead of locks. */\n\n/* main&lt;&gt;watchdog serial queue, for reap_child()\n *  provides exclusion so they don't both try at the same time. */\ndispatch_queue_t reaper_queue;\n\n/* to protect from multiple child processes from\n * trying to disable the same syscall at the same time. */\ndispatch_queue_t syscalltable_queue;\n\n/* child&lt;&gt;child serial queue, used so only one child spews debug output */\ndispatch_queue_t bugQueue;\n\n/* global debug flag.\n * This is in the shm so we can do things like gdb to the main pid,\n * and have the children automatically take notice.\n * This can be useful if for some reason we don't want to gdb to the child.\n */\nbool debug;\n\n};\n\nextern struct shm_s *shm;\n</code></pre>\n\n<p>In the c file we have the create and init functions for the struct.</p>\n\n<pre><code>struct shm_s *shm;\n\n#define SHM_PROT_PAGES 30\n\nvoid create_shm(void)\n{\n    void *p;\n    void *redbefore, *redafter;\n    unsigned int shm_pages;\n    unsigned int wholesize;\n\n    /* round up shm to nearest page size */\n    shm_pages = ((sizeof(struct shm_s) + page_size - 1) &amp; PAGE_MASK) / page_size;\n    wholesize = (SHM_PROT_PAGES + shm_pages + SHM_PROT_PAGES) * page_size;\n\n    /* Waste some address space to set up some \"protection\" near the SHM location. */\n    p = alloc_shared(wholesize);\n\n    redbefore = p;\n    redafter = p + (SHM_PROT_PAGES + shm_pages) * page_size;\n\n    /* set the redzones. */\n    memset(redbefore, 0x77, SHM_PROT_PAGES * page_size);\n    memset(redafter, 0x88, SHM_PROT_PAGES * page_size);\n\n    /* set the redzones to PROT_NONE */\n    mprotect(redbefore, SHM_PROT_PAGES * page_size, PROT_NONE);\n    mprotect(redafter, SHM_PROT_PAGES * page_size, PROT_NONE);\n\n    /* clear the whole shm. */\n    shm = p + (SHM_PROT_PAGES * page_size);\n    memset(shm, 0, shm_pages * page_size);\n    printf(\"shm: redzone:%p. shmdata:%p. redzone:%p end:%p.\\n\",\n       redbefore, shm, redafter, p + wholesize);\n }\n\nvoid init_shm(void)\n{\n    unsigned int i;\n\n    printf(\"shm is at %p\\n\", shm);\n\n    shm-&gt;stats.total_syscalls_done = 1;\n\n    shm-&gt;children = zmalloc(max_children * sizeof(struct childdata *));\n\n    shm-&gt;bugQueue = dispatch_queue_create(NULL, DISPATCH_QUEUE_SERIAL);\n\n    shm-&gt;reaper_queue = dispatch_queue_create(NULL, DISPATCH_QUEUE_SERIAL);\n\n    shm-&gt;syscalltable_queue = dispatch_queue_create(NULL, DISPATCH_QUEUE_SERIAL);\n\n   for_each_child(i)\n   {\n       struct childdata *child;\n\n       child = alloc_shared(sizeof(struct childdata));\n       shm-&gt;children[i] = child;\n\n       child-&gt;pid = EMPTY_PIDSLOT;\n\n       child-&gt;logfile = NULL;\n   }\n}\n</code></pre>\n\n<p>Here is the alloc_shared function, that actually creates the shared memory.</p>\n\n<pre><code>void * alloc_shared(unsigned int size)\n{\n    void *ret;\n\n    ret = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_ANON | MAP_SHARED, -1, 0);\n    if (ret == MAP_FAILED) {\n        printf(\"mmap %u failure\\n\", size);\n        exit(EXIT_FAILURE);\n    }\n    /* poison, to force users to set it to something sensible. */\n    memset(ret, rand(), size);\n    return ret;\n}\n</code></pre>\n\n<p>Then finally the functions create_shm and init_shm are called like this in a separate file.</p>\n\n<pre><code>create_shm();\n\ninit_shm();\n</code></pre>\n\n<p>The program crashes whenever it gets to shm->stats.total_syscalls_done = 1; inside init_shm. I printed the address of shm and it's the same after its created in alloc_shared and in init_shm, so I don't think the pointer is being corrupted.\nEither way I don't understand why I am unable to access the struct outside of create_shm().</p>\n"}, {"tags": ["c", "sorting"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1425484303, "post_id": 28858722, "comment_id": 45983348, "body": "Your parameter is called  <code>word</code> and the code refers to (the global?) <code>array</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "is_accepted": false, "score": 1, "last_activity_date": 1425484726, "last_edit_date": 1425484726, "creation_date": 1425484425, "answer_id": 28858876, "question_id": 28858722, "link": "https://stackoverflow.com/questions/28858722/sorting-a-word-into-alphabetical-order-in-c/28858876#28858876", "title": "Sorting a word into alphabetical order in c", "body": "<p>There is nothing wrong with the logic you are using.</p>\n\n<p>The only fault is, you have an undefined variable, <code>array</code>. Either replace all the <code>array</code> instances with <code>word</code>, or change <code>char *word</code> to <code>char *array</code>.</p>\n\n<p>Code:</p>\n\n<pre><code>void alphasort(char *array, int length)\n{\n    int i, j, k;\n    for(i=0; i&lt;length-1; ++i)\n    {\n        for(j=0; j&lt;length-i-1; ++j)\n        {\n            if (array[j] &gt; array[j+1])\n            {\n                k= array[j];\n                array[j] = array[j+1];\n                array[j+1] = k;\n            }\n        }\n     }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 4181597, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/I5gp6.jpg?s=128&g=1", "display_name": "theSereneRebel", "link": "https://stackoverflow.com/users/4181597/theserenerebel"}, "is_accepted": false, "score": 1, "last_activity_date": 1425485571, "last_edit_date": 1425485571, "creation_date": 1425484468, "answer_id": 28858900, "question_id": 28858722, "link": "https://stackoverflow.com/questions/28858722/sorting-a-word-into-alphabetical-order-in-c/28858900#28858900", "title": "Sorting a word into alphabetical order in c", "body": "<p>You have not defined the variable <code>array</code>. Try this instead:   </p>\n\n<pre><code>void alphasort(char *word, int length)\n    {\n        int i, j, k;\n        for(i=0; i&lt;length-1; ++i)\n        {\n            for(j=0; j&lt;length-i-1; ++j)\n            {\n                if (word[j] &gt; word[j+1])\n                {\n                    k= word[j];\n                    word[j] = word[j+1];\n                    word[j+1] = k;\n                }\n            }\n         }\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4629883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9b3075a3720b4da0f5305b1d1c7a16?s=128&d=identicon&r=PG&f=1", "display_name": "Danthescotman", "link": "https://stackoverflow.com/users/4629883/danthescotman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425485571, "creation_date": 1425484019, "question_id": 28858722, "link": "https://stackoverflow.com/questions/28858722/sorting-a-word-into-alphabetical-order-in-c", "title": "Sorting a word into alphabetical order in c", "body": "<p>Trying to use a bubble sort to put a word into alphabetical order. can anyone find the error in my code, I am calling it but it doesn't seem to be doing what it should</p>\n\n<pre><code>void alphasort(char *word, int length)\n{\n    int i, j, k;\n    for(i=0; i&lt;length-1; ++i)\n    {\n        for(j=0; j&lt;length-i-1; ++j)\n        {\n            if (array[j] &gt; array[j+1])\n            {\n                k= array[j];\n                array[j] = array[j+1];\n                array[j+1] = k;\n            }\n        }\n     }\n}\n</code></pre>\n\n<p>It simply returns the original word</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 3116, "user_id": 463687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXUNI.jpg?s=128&g=1", "display_name": "Edgar Bonet", "link": "https://stackoverflow.com/users/463687/edgar-bonet"}, "edited": false, "score": 2, "creation_date": 1425483793, "post_id": 28858568, "comment_id": 45982978, "body": "Test the return value of <code>fopen()</code>, and do not print the character when you get <code>EOF</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1425484006, "post_id": 28858568, "comment_id": 45983121, "body": "<code>char c;</code> --&gt; <code>int c;</code> Also: check for EOF <b>before</b> printing the character."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1425484112, "post_id": 28858568, "comment_id": 45983208, "body": "<code>fgetc()</code> returns a <code>int</code>, not a <code>char</code>; it can return any <code>char</code> value plus the separate value <code>EOF</code>.  And <code>EOF</code> often prints as &#255; (y-umlaut, or U+00FF LATIN SMALL LETTER Y WITH DIAERESIS).  If your plain <code>char</code> type is an unsigned type, your loop may never end.  If your plan <code>char</code> type is a signed type, your loop may end prematurely. Neither is correct. Use <code>int c;</code>, and test the value before using it (so use <code>int c; while ((c = getc(p)) != EOF) { \u2026 }</code> instead of a <code>do \u2026 while</code> loop)."}, {"owner": {"reputation": 3699, "user_id": 474173, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18331a42eeb0683a21fe3af6722c04cc?s=128&d=identicon&r=PG", "display_name": "Swanand", "link": "https://stackoverflow.com/users/474173/swanand"}, "edited": false, "score": 0, "creation_date": 1425484190, "post_id": 28858568, "comment_id": 45983268, "body": "&quot;&#255;&quot; corresponds to the code point 0xFF which is mostly EOF... Does the file have any data?"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1425484602, "post_id": 28858888, "comment_id": 45983577, "body": "It is more symmetric to use <code>putchar()</code> or <code>putc(c, stdout)</code> rather than the blunderbuss <code>printf(&quot;%c&quot;, c)</code>.  There&#39;s no real need to use <code>fgetc()</code> instead of just <code>getc()</code> \u2014 but that was in the original code too."}, {"owner": {"reputation": 23, "user_id": 3864983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e14d391fde0cb84d0819814b4e3671e?s=128&d=identicon&r=PG&f=1", "display_name": "bcng", "link": "https://stackoverflow.com/users/3864983/bcng"}, "edited": false, "score": 0, "creation_date": 1425490281, "post_id": 28858888, "comment_id": 45987433, "body": "Nothing appears in console, I want to print the context, how can I do that ?"}, {"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "reply_to_user": {"reputation": 23, "user_id": 3864983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e14d391fde0cb84d0819814b4e3671e?s=128&d=identicon&r=PG&f=1", "display_name": "bcng", "link": "https://stackoverflow.com/users/3864983/bcng"}, "edited": false, "score": 0, "creation_date": 1425491945, "post_id": 28858888, "comment_id": 45988375, "body": "@bcng Are you sure, the file is opened correctly? Any error or anything else? What does your file contain?"}], "tags": [], "owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "is_accepted": true, "score": 2, "last_activity_date": 1425484802, "last_edit_date": 1425484802, "creation_date": 1425484450, "answer_id": 28858888, "question_id": 28858568, "link": "https://stackoverflow.com/questions/28858568/c-open-and-read-from-txt-file/28858888#28858888", "title": "C open and read from txt file", "body": "<p>You can read a file char by char like this:</p>\n\n<pre><code>int main(void) {\n   FILE *p;\n\n   // Open file\n   if ((p = fopen(\"D:\\\\eclipse_workspace_cpp\\\\PL_ODEV2\\\\inputbookdb.txt\",\"r\")) == NULL) {\n       // Couldn't open file\n       return EXIT_FAILURE;\n   }\n\n   // Step through the file until EOF occurs\n   int c;\n   while ((c = fgetc(p)) != EOF) {\n       printf(\"%c\", c);\n       // You might use putchar(c); instead, take a look at the comment below\n   }\n\n   // Close file\n   fclose(file);\n\n   return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3864983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e14d391fde0cb84d0819814b4e3671e?s=128&d=identicon&r=PG&f=1", "display_name": "bcng", "link": "https://stackoverflow.com/users/3864983/bcng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "closed_date": 1425484531, "accepted_answer_id": 28858888, "answer_count": 1, "score": 0, "last_activity_date": 1425484802, "creation_date": 1425483645, "last_edit_date": 1425483879, "question_id": 28858568, "link": "https://stackoverflow.com/questions/28858568/c-open-and-read-from-txt-file", "closed_reason": "Duplicate", "title": "C open and read from txt file", "body": "<p>I'm trying to open and read from a txt file and it should display the content in it but it display just 1 character as a output which is '\u00ff'.</p>\n\n<p>Here is the source code:</p>\n\n<pre><code>int main(){\n\n    FILE *p;\n\n    p=fopen(\"D:\\\\eclipse_workspace_cpp\\\\PL_ODEV2\\\\inputbookdb.txt\",\"r\");\n    char c;\n\n    do{\n        c = fgetc(p);\n        printf(\"%c\",c);\n    } \n    while(c != EOF);\n\n    fclose(p);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "sockets"], "answers": [{"comments": [{"owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 0, "creation_date": 1425484353, "post_id": 28858086, "comment_id": 45983385, "body": "And still no way to debug SUID programm from non-root, just like with <code>setcap cap_net_raw+ep</code>"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1425482387, "creation_date": 1425482387, "answer_id": 28858086, "question_id": 28857941, "link": "https://stackoverflow.com/questions/28857941/opening-raw-sockets-in-linux-without-being-superuser/28858086#28858086", "title": "Opening RAW sockets in linux without being superuser", "body": "<p>You can make your program a SUID command, granting it effectively root permissions, without granting them to the executing user. For an example and explanation see <a href=\"http://www.linuxnix.com/2011/12/suid-set-suid-linuxunix.html\" rel=\"nofollow\">here</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1425483507, "post_id": 28858116, "comment_id": 45982791, "body": "Thank you, It worked! But, if I try to debug it in Eclipse, the socket function returns -1 again. I&#39;ve tryed to set the cap_new_raw capability both to eclipse and gdb, but it doesn&#39;t work."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 1, "creation_date": 1425484253, "post_id": 28858116, "comment_id": 45983318, "body": "Ah. Yes, debugging programs with capabilities (or that have the suid bit set) is a bit of a problem, because allowing an unprivileged user to <code>ptrace</code> them would be a rather big security hole. Perhaps you can configure eclipse to run gdb with sudo, which would allow you to debug the application by diving head-first into the security nightmare of giving an unprivileged user the ability to run a suid debugger. I don&#39;t think there&#39;s a perfect solution for this problem."}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1425484773, "post_id": 28858116, "comment_id": 45983698, "body": "Ok, I&#39;ll give it a try. Thanks."}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1426861913, "post_id": 28858116, "comment_id": 46556187, "body": "A workaround I&#39;ve found is to run eclipse as a superuser. It&#39;s not very elegant, but it works."}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1426862815, "post_id": 28858116, "comment_id": 46556808, "body": "Ok, opening eclipse with sudo is not a good idea! A better solution is described here: <a href=\"http://stackoverflow.com/questions/2891356/how-to-debug-application-as-root-in-eclipse-in-ubuntu\" title=\"how to debug application as root in eclipse in ubuntu\">stackoverflow.com/questions/2891356/&hellip;</a>"}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 6, "last_activity_date": 1425482482, "creation_date": 1425482482, "answer_id": 28858116, "question_id": 28857941, "link": "https://stackoverflow.com/questions/28857941/opening-raw-sockets-in-linux-without-being-superuser/28858116#28858116", "title": "Opening RAW sockets in linux without being superuser", "body": "<p><code>ping</code> needs the <code>cap_net_raw</code> capability to do this without (other) superuser rights, and so does your program. Run</p>\n\n<pre><code>setcap cap_net_raw+ep your_executable_file\n</code></pre>\n\n<p>as root, and then normal users will be able to use the program.</p>\n"}], "owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2899, "favorite_count": 4, "accepted_answer_id": 28858116, "answer_count": 2, "score": 2, "last_activity_date": 1425482482, "creation_date": 1425481993, "last_edit_date": 1425482335, "question_id": 28857941, "link": "https://stackoverflow.com/questions/28857941/opening-raw-sockets-in-linux-without-being-superuser", "title": "Opening RAW sockets in linux without being superuser", "body": "<p>I have to write a ping function to run on Linux. The language is C++, so C if fine too.</p>\n\n<p>Searching on the Internet and looking at the source code for the <code>ping</code> command, it turns out that I should create a raw socket:</p>\n\n<pre><code>icmp_sock = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP);\n</code></pre>\n\n<p>If I run my application without being superuser, the <code>socket</code> function returns <code>-1</code> i.e. the socket is not created successfully. If I run it as a superuser, all works fine.</p>\n\n<p>Now, the <code>ping</code> command do create a raw socket and I can run it <strong>without superuser rights</strong>.</p>\n\n<p>My question is: how can I grant my application all permissions needed to create a raw socket without being executed by a superuser?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 1, "creation_date": 1425481991, "post_id": 28857869, "comment_id": 45981720, "body": "This really isn&#39;t a programming question..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425482060, "post_id": 28857869, "comment_id": 45981768, "body": "I am voting to close this question as off-topic, since it&#39;s about general knowledge but not programming."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1425482088, "post_id": 28857869, "comment_id": 45981790, "body": "This is not the correct test for a leap year, you want <code>(year % 4 == 0 &amp;&amp; year % 100 != 0) || (year % 400 == 0)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2566, "user_id": 325557, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/967fb27164c1383db76015c0aff92d3d?s=128&d=identicon&r=PG", "display_name": "No One in Particular", "link": "https://stackoverflow.com/users/325557/no-one-in-particular"}, "is_accepted": false, "score": 0, "last_activity_date": 1425481975, "creation_date": 1425481975, "answer_id": 28857932, "question_id": 28857869, "link": "https://stackoverflow.com/questions/28857869/leap-year-logic-confusion/28857932#28857932", "title": "Leap year logic confusion", "body": "<p>No.  Every century year is NOT a leap year.  Only those divisible by 400 are.</p>\n\n<p>See <a href=\"http://en.wikipedia.org/wiki/Leap_year#Algorithm\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Leap_year#Algorithm</a></p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1425482493, "last_edit_date": 1425482493, "creation_date": 1425482082, "answer_id": 28857968, "question_id": 28857869, "link": "https://stackoverflow.com/questions/28857869/leap-year-logic-confusion/28857968#28857968", "title": "Leap year logic confusion", "body": "<p>The logic behind whether a year is leap or not:  </p>\n\n<ol>\n<li>If the year is evenly divisible by 4, go to step 2. Otherwise, go to step 5.</li>\n<li>If the year is evenly divisible by 100, go to step 3. Otherwise, go to step 4.</li>\n<li>If the year is evenly divisible by 400, go to step 4. Otherwise, go to step 5.</li>\n<li>The year is a leap year (it has 366 days).</li>\n<li>The year is not a leap year (it has 365 days).  </li>\n</ol>\n\n<p>So, the condition would be  </p>\n\n<pre><code>if((year % 4 == 0 &amp;&amp; year % 100 != 0) || (year % 400 == 0))  \n    printf(\"Year is a leap year\\n\");\nelse  \n    printf(\"Not a leap year\\n\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4121829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oYyfF7DS0Wc/AAAAAAAAAAI/AAAAAAAAAJg/uq9dW4-fvAQ/photo.jpg?sz=128", "display_name": "Ajay Rengasamy", "link": "https://stackoverflow.com/users/4121829/ajay-rengasamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "closed_date": 1425483452, "answer_count": 2, "score": -5, "last_activity_date": 1425482493, "creation_date": 1425481820, "question_id": 28857869, "link": "https://stackoverflow.com/questions/28857869/leap-year-logic-confusion", "closed_reason": "Duplicate", "title": "Leap year logic confusion", "body": "<p>I really don't understand the logic of performing:-</p>\n\n<pre><code>if(num%400==0)\nstmts;\nelse if(num%100==0)\nstmts;\n</code></pre>\n\n<p>for testing a leap year. Isn't it enough for just finding modulus of 100?</p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "scheduler"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1425481293, "post_id": 28857574, "comment_id": 45981234, "body": "Kernel is a program that CPU is running. That&#39;s all. It&#39;s a bunch of commands in the memory which is fetched and executed by CPU."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1425481442, "post_id": 28857574, "comment_id": 45981345, "body": "Yes but how exactly are the queues tied to the cpu ? Are there some kind of interrupts ? is the cpu busywaiting the scheduler&#39;s queues ?"}, {"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 0, "creation_date": 1425481477, "post_id": 28857574, "comment_id": 45981370, "body": "CPU is selcting the prcoesses to run as per the scheduler policies and just running them one after another..When there is interrupt it runs interrupt service routine.. and so on"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425481717, "post_id": 28857574, "comment_id": 45981526, "body": "Ok so, in THEORY, if there are nothing to do it is busy waiting the queues, right ?"}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 2, "creation_date": 1425482082, "post_id": 28857574, "comment_id": 45981787, "body": "@Larry What queues are you talking about?"}, {"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 1, "creation_date": 1425482095, "post_id": 28857574, "comment_id": 45981798, "body": "If there is absolutely nothing to do.. the CPU cores could be halted.. atleast that is what cpu governors do."}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1425482159, "post_id": 28857574, "comment_id": 45981845, "body": "Are you asking about <code>pm_idle()</code>? This has already been asked before - <a href=\"https://stackoverflow.com/questions/13749479/linux-kernel-idle-loop\" title=\"linux kernel idle loop\">stackoverflow.com/questions/13749479/linux-kernel-idle-loop</a>"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1425482395, "post_id": 28857574, "comment_id": 45982013, "body": "@sashoalm: the task queues. Are there some enforced rules that acknowledge the cpu that &quot;it is there you have to look for the list of work to be processed&quot;?"}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1425482564, "post_id": 28857574, "comment_id": 45982145, "body": "@Larry Acknowledge the CPU? What do you mean by that? The CPU is acknowledged by the task queues? Or what? Check the dictionary for what acknowledge means, you need to speak English well enough to at least be understood. Acknowledge doesn&#39;t mean to inform or to tell."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1425482670, "post_id": 28857574, "comment_id": 45982221, "body": "@sashoalm : this is exactly the point i don&#39;t understand ! Is it the cpu that spins the queues or the kernel that &quot;tells&quot; the cpu that there is some things to do ?"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1425482811, "post_id": 28857574, "comment_id": 45982326, "body": "The CPU is running the kernel, so there is no distinction between those two scenarios."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1425482870, "post_id": 28857574, "comment_id": 45982362, "body": "@IgnacioVazquez-Abrams: ok so how the cpu knows there is some work to do ? at some point, it has to know where to look, right ? Are there any enforced conventions ?"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1425482884, "post_id": 28857574, "comment_id": 45982372, "body": "This question as written is WAY too broad. Please specify an architecture and preferably a single type of CPU e.g. core i5 etc. As this question is written there is no single good answer as it is very hardware dependent."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1425482910, "post_id": 28857574, "comment_id": 45982386, "body": "@Larry The CPU does not know about the scheduler or task queues, those are concepts implemented by the kernel. The CPU just runs instructions. (That&#39;s true today, the initial version of linux 2 decades ago did use cpu task switching that was built into the i386 CPUs.)"}, {"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 0, "creation_date": 1425482914, "post_id": 28857574, "comment_id": 45982389, "body": "There is a queue strcture defined somewhere like <code>struct list_head queue</code> and <code>schedule()</code> knows that it has to take the task from there"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1425482928, "post_id": 28857574, "comment_id": 45982400, "body": "@Larry, what do you mean &quot;knows&quot;? The CPU doesn&#39;t know anything; all the scheduling logic lives in the software. If you&#39;re asking how that software gets run, then we need to talk about timer interrupts."}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1425483083, "post_id": 28857574, "comment_id": 45982509, "body": "@Larry The problem here is that you don&#39;t understand what you&#39;re talking about. The solution is to go and read a book on the topic. Seriously. I doubt we can give you any better advice. Kernel programming is not a simple thing, and this is not the place to teach it to you."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1425483111, "post_id": 28857574, "comment_id": 45982531, "body": "@sashoalm : thanks. Any reading advice ?"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1425483235, "post_id": 28857574, "comment_id": 45982621, "body": "if I understand what you&#39;re looking for I would start <a href=\"https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kernel/cpu/common.c\" rel=\"nofollow noreferrer\">here</a> which is the file where the kernel interacts with the Global Descriptor Table which controls memory and tasks"}, {"owner": {"reputation": 1718, "user_id": 3791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98W7v.jpg?s=128&g=1", "display_name": "Daniel Kleinstein", "link": "https://stackoverflow.com/users/3791842/daniel-kleinstein"}, "edited": false, "score": 1, "creation_date": 1425483285, "post_id": 28857574, "comment_id": 45982655, "body": "@Larry <a href=\"https://rads.stackoverflow.com/amzn/click/com/0596005652\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Understanding the Linux Kernel</a> has a great chapter on how the Linux scheduler works."}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1425483417, "post_id": 28857574, "comment_id": 45982737, "body": "@Larry Just type &quot;kernel programming tutorial&quot; in Google ;)"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425483857, "post_id": 28857574, "comment_id": 45983022, "body": "i don&#39;t use google but thanks anyway :)"}], "answers": [{"comments": [{"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425484402, "post_id": 28858329, "comment_id": 45983434, "body": "Thanks Aaron, I need to read more about that. i don&#39;t get the whole picture &quot;I guess&quot;. :)"}], "tags": [], "owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "is_accepted": false, "score": 2, "last_activity_date": 1425483012, "creation_date": 1425483012, "answer_id": 28858329, "question_id": 28857574, "link": "https://stackoverflow.com/questions/28857574/kernel-linux-where-does-the-kernel-talks-to-the-cpu/28858329#28858329", "title": "Kernel - Linux - Where does the kernel talks to the cpu?", "body": "<p>The Linux kernel is a program. It doesn't \"talk\" to the CPU as such; the CPU has a special register, the <a href=\"http://en.wikipedia.org/wiki/Program_counter\" rel=\"nofollow\">program counter</a> (PC), which points to the current execution of the kernel which the CPU is processing.</p>\n\n<p>The kernel itself contains many services. One of them manages the task queues. Each entry in the task queue contains information about the task. One such information is the CPU core on which the task is running. When the kernel decides that the service should do some work, it will call it's functions. The functions are made up from <a href=\"http://en.wikipedia.org/wiki/Instruction_set\" rel=\"nofollow\">instructions</a> which the CPU interprets. Most of them change the state of the CPU (like advancing the PC, changing register values, setting flags, enabling/disabling CPU cores, ...).</p>\n\n<p>This means the CPU isn't polling anything. Depending on the scheduler, different strategies are used to process the task queue. The most simple one is timer based: The kernel install a timer interrupt (i.e. it writes the address of an interrupt handler somewhere plus it configured the timer to cause an interrupt every few milliseconds).</p>\n\n<p>The handler then looks at the task queue and decides what to do, depending on its strategy.</p>\n"}, {"comments": [{"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425484745, "post_id": 28858854, "comment_id": 45983680, "body": "Rings the bell ! The kernel jumps to the address. This is what i missed ! I will try to find a clue on how it does that in the kernel source. i guess I will meet the tss, the GDT and family there :)"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425485114, "post_id": 28858854, "comment_id": 45983925, "body": "@Larry The transition (jump) from kernel to process usually comes with a context switch. i.e the previous process context is saved and the next process context is loaded."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425491744, "post_id": 28858854, "comment_id": 45988240, "body": "Thanks you so much ElderBug, I am reading a lot on the subject now and start to grab how things work. You understood where I was failing : the big picture. Thanks to your help."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 1, "creation_date": 1425493454, "post_id": 28858854, "comment_id": 45989256, "body": "@Larry Glad to help. If you didn&#39;t already come across it, the <a href=\"http://wiki.osdev.org/Main_Page\" rel=\"nofollow noreferrer\">OSDev wiki</a> is really interesting for general OS mechanisms. If you scroll down a bit on the main page, at the &#39;Design Considerations&#39; section, you have some points about scheduling."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425495896, "post_id": 28858854, "comment_id": 45990678, "body": "This is exactly what i needed as a starter. Thanks again."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1425543703, "post_id": 28858854, "comment_id": 46008807, "body": "@Larry if you mean the task switching segment by &quot;tss&quot;, you won&#39;t see that - it was used by the initial linux versions on x86 CPUs to do hardware assisted task switching, but it&#39;s an obsolete feature and unused by pretty much all operating systems now."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1425715275, "post_id": 28858854, "comment_id": 46083860, "body": "@nos: i was talking about the structure to do software switching. The kernel still needs one to proceed the switch, am I correct?"}], "tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": true, "score": 4, "last_activity_date": 1425484357, "creation_date": 1425484357, "answer_id": 28858854, "question_id": 28857574, "link": "https://stackoverflow.com/questions/28857574/kernel-linux-where-does-the-kernel-talks-to-the-cpu/28858854#28858854", "title": "Kernel - Linux - Where does the kernel talks to the cpu?", "body": "<p>I will try to write a simplified explanation of how it works, tell me if anything is unclear.</p>\n\n<p>A CPU only do one thing : execute instructions. It will start at a predefined address, and execute. That's all. Sometime you can have an interrupt, that will temporarily make the CPU jump to another instruction.</p>\n\n<p>A kernel is a program (=a sequence of instructions) that will make it easy to execute other programs. The kernel will do his business to setup what it needs. This often include building a list of process to run. The definition of \"process\" is totally up to the kernel because, as you know, the CPU only do one thing.</p>\n\n<p>Now, when the kernel runs (being executed by the CPU), it might decide that one process needs to be executed. To do so, the kernel will simply jump to the process program. How it is done doesn't matter, but in most OSes, the kernel will map a periodic interrupt (the CPU will periodically jump) to a function that decide which process to execute and jump to it. It isn't required, but it is convenient because programs will be forcefully \"interrupted\" periodically so others can also be executed.</p>\n\n<p>To sum up, the CPU doesn't \"know\" anything. The kernel runs, and will jump to other process code to make them run. Only the kernel \"knows\".</p>\n"}], "owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 28858854, "answer_count": 2, "score": 0, "last_activity_date": 1425484357, "creation_date": 1425480919, "last_edit_date": 1592644375, "question_id": 28857574, "link": "https://stackoverflow.com/questions/28857574/kernel-linux-where-does-the-kernel-talks-to-the-cpu", "title": "Kernel - Linux - Where does the kernel talks to the cpu?", "body": "<h3>Context:</h3>\n<p>Linux 64.\nIntel Core 2 duo.</p>\n<h3>Question:</h3>\n<p>Where does the Linux kernel &quot;communicate&quot; with the cpu ?\nI read the source code for scheduler but could not understand <strong>how</strong> they communicate and how the kernel tells the cpu that something need to be processed.</p>\n<p>I understand that there are run queues, but isn't there something that enables the kernel to interrupt the cpu via the bus ?</p>\n<h2>Update</h2>\n<p>It expands my initial questions a bit : How can we tell the cpu <strong>where</strong> the task queues are ?</p>\n<p>Because the cpu has to poll something, and i guess we tell it at some point. Missed that point in the kernel code.</p>\n"}, {"tags": ["c", "linkage"], "answers": [{"comments": [{"owner": {"reputation": 2282, "user_id": 1027400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcc58849d8a942bb2a4bdc5cc619ab58?s=128&d=identicon&r=PG&f=1", "display_name": "Bush", "link": "https://stackoverflow.com/users/1027400/bush"}, "edited": false, "score": 0, "creation_date": 1425487006, "post_id": 28857670, "comment_id": 45985290, "body": "It is mentioned here <a href=\"http://www.informit.com/guides/content.aspx?g=cplusplus&amp;seqNum=450\" rel=\"nofollow noreferrer\">informit.com/guides/content.aspx?g=cplusplus&amp;seqNum=450</a> that forward declaration for enum type should contain its base. Does it?"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 2282, "user_id": 1027400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcc58849d8a942bb2a4bdc5cc619ab58?s=128&d=identicon&r=PG&f=1", "display_name": "Bush", "link": "https://stackoverflow.com/users/1027400/bush"}, "edited": false, "score": 0, "creation_date": 1425487732, "post_id": 28857670, "comment_id": 45985795, "body": "That is referring to c++ not c. And this code is allowed because Linux is compiled with C plus some gnu extensions, such as allowing a forward declaration of an enum."}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 4, "last_activity_date": 1425481202, "creation_date": 1425481202, "answer_id": 28857670, "question_id": 28857556, "link": "https://stackoverflow.com/questions/28857556/two-enum-definitions-of-the-same-variable/28857670#28857670", "title": "Two enum definitions of the same variable", "body": "<p><code>enum dma_ch;</code> is a forward declaration of the enumeration.</p>\n\n<p>We use <code>extern</code> when we want to refer to an instance of an object that is found in (possibly) some other translation unit. <code>dma_ch</code> is not an object, it is a type.</p>\n"}], "owner": {"reputation": 2282, "user_id": 1027400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcc58849d8a942bb2a4bdc5cc619ab58?s=128&d=identicon&r=PG&f=1", "display_name": "Bush", "link": "https://stackoverflow.com/users/1027400/bush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 28857670, "answer_count": 1, "score": 0, "last_activity_date": 1425481262, "creation_date": 1425480856, "last_edit_date": 1425481262, "question_id": 28857556, "link": "https://stackoverflow.com/questions/28857556/two-enum-definitions-of-the-same-variable", "title": "Two enum definitions of the same variable", "body": "<p>I've noticed some code in the linux kernel with the following:</p>\n\n<p>In the file <a href=\"http://lxr.free-electrons.com/source/arch/arm/plat-samsung/include/plat/s3c-dma-pl330.h\" rel=\"nofollow\">s3c-dma-pl330.h</a> there is a definition:</p>\n\n<pre><code>enum dma_ch {\n...\n};\n</code></pre>\n\n<p>and at the end of that file there is: <code>#include &lt;plat/dma.h&gt;</code>\nIn that file (<a href=\"http://lxr.free-electrons.com/source/arch/arm/plat-samsung/include/plat/dma.h\" rel=\"nofollow\">dma.h</a>) there is: <code>enum dma_ch;</code>\nNo <code>extern</code> is written, can you tell what is actually happens?</p>\n\n<p>Does <code>dma_ch</code> in dma.h is the same as in s3c-dma-pl330.h? Why isn't there the <code>extern</code> specifier?</p>\n"}, {"tags": ["python", "c", "python-c-extension"], "answers": [{"comments": [{"owner": {"reputation": 6879, "user_id": 780719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZwWs8.png?s=128&g=1", "display_name": "Codie CodeMonkey", "link": "https://stackoverflow.com/users/780719/codie-codemonkey"}, "edited": false, "score": 0, "creation_date": 1465851311, "post_id": 28857668, "comment_id": 63063953, "body": "Not true, he&#39;s using the keyword form."}], "tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 0, "last_activity_date": 1425481193, "creation_date": 1425481193, "answer_id": 28857668, "question_id": 28857522, "link": "https://stackoverflow.com/questions/28857522/python-c-extension-keyword-arguments/28857668#28857668", "title": "Python C Extension Keyword arguments", "body": "<p><code>Parser_read</code> should be</p>\n\n<pre><code>static PyObject* Parser_read(PyObject *self, PyObject *args)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 7152969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c948f75c2202b55272b162fd6a3dcb?s=128&d=identicon&r=PG&f=1", "display_name": "dumbchild", "link": "https://stackoverflow.com/users/7152969/dumbchild"}, "edited": false, "score": 0, "creation_date": 1589876744, "post_id": 28858159, "comment_id": 109459364, "body": "just ran in the same problem. I&#39;m not sure, how or where to set METH_KEYWORDS | METH_VARARGS and would highly appreciate any clarification."}], "tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": true, "score": 2, "last_activity_date": 1425482576, "creation_date": 1425482576, "answer_id": 28858159, "question_id": 28857522, "link": "https://stackoverflow.com/questions/28857522/python-c-extension-keyword-arguments/28858159#28858159", "title": "Python C Extension Keyword arguments", "body": "<p>Could be this bug...</p>\n\n<p><a href=\"http://bugs.python.org/issue11587\" rel=\"nofollow\">http://bugs.python.org/issue11587</a></p>\n\n<p>Which means it's a python version issue.  One fix seems to be to use <code>METH_KEYWORDS | METH_VARARGS</code>.</p>\n"}], "owner": {"reputation": 2125, "user_id": 1945699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86f621220b98cdd638a152fce8ace8d5?s=128&d=identicon&r=PG", "display_name": "Wael Ben Zid El Guebsi", "link": "https://stackoverflow.com/users/1945699/wael-ben-zid-el-guebsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1683, "favorite_count": 0, "accepted_answer_id": 28858159, "answer_count": 2, "score": 1, "last_activity_date": 1425482576, "creation_date": 1425480743, "last_edit_date": 1425480924, "question_id": 28857522, "link": "https://stackoverflow.com/questions/28857522/python-c-extension-keyword-arguments", "title": "Python C Extension Keyword arguments", "body": "<p><strong>Description of problem:</strong></p>\n\n<p>When I call method defined like this:</p>\n\n<pre><code>static PyMethodDef Parser_methods[] = {\n    {\"read\", (PyCFunction)Parser_read, METH_KEYWORDS, \"read from input source\"},\n    {NULL, NULL, 0, NULL} \n};\n\nstatic PyObject *\nParser_read(Parser * const self, PyObject * unused0, PyObject * unused1)\n{\n...\n}\n</code></pre>\n\n<p>I got:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SystemError: Bad call flags in PyCFunction_Call. METH_OLDARGS is no longer supported!\n</code></pre>\n\n<p>The code works fine on Python2, but crashes on Python3</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 1, "creation_date": 1425480907, "post_id": 28857447, "comment_id": 45980954, "body": "instead of filling a temporary struct instance, why don&#39;t you read into the FlightEntries directly since you don&#39;t seem to need any validation?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1425481038, "post_id": 28857447, "comment_id": 45981075, "body": "<code>fresult = fscanf(</code> I dont see the fresult varable checked or used antwhere. Also: <code>feof()</code> is wrong. almost. always."}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1425481165, "post_id": 28857447, "comment_id": 45981158, "body": "@sithereal in the last paragraph after the code, I mention that I tried that...unless there&#39;s a different method you&#39;re thinking of? The original problem was fscanf not reading the double properly...that&#39;s why I read into local variables and cast the three doubles.  Got an example? I think it&#39;s a memory issue with the array."}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1425481273, "post_id": 28857447, "comment_id": 45981219, "body": "@wildplasser I have a block of code that logs fresult so I can verify that it&#39;s reading the correct number of entries.  As long as I don&#39;t attempt to put anythign into the array, it reads the whole file correctly and I can log the whole file via writing the newEntry elements to the log, so the data is coming in properly, I&#39;m just unable to access any additional entries of the FlightEntries array after [0][0]."}, {"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1425481318, "post_id": 28857447, "comment_id": 45981251, "body": "did you try using %lf instead of %f for reading doubles?"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1425481389, "post_id": 28857447, "comment_id": 45981305, "body": "@sithereal yes, and for some reason it didn&#39;t work...but what I have currently definitely reads and casts the values correctly...I just can&#39;t get them into the FlightEntries array no matter what I do."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1425481645, "post_id": 28857447, "comment_id": 45981480, "body": "how is <code>FlightEntries</code> defined (and maybe allocated)? -- forget about that, I was blind -- Are you sure that <code>fileIndex</code> is correct?"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1425481769, "post_id": 28857447, "comment_id": 45981564, "body": "@IngoLeonhardt FlightEntries is defined in the first block of code. And my omitted log function writes fileIndex as 0, and i as 0...but it never makes it to fileindex [0] i [1] because it crashes when I try to access it...first time through this loop works flawlessly."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1425481865, "post_id": 28857447, "comment_id": 45981635, "body": "It&#39;s generally a bad idea to do direct I/O of full structures, since there can be padding inside, for alignment reasons. This padding can change with various compilers, options, or platforms. So it&#39;s a very brittle format."}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1425482030, "post_id": 28857447, "comment_id": 45981748, "body": "@unwind the data file is written by the same program...Also it&#39;s a very temporary issue I need to get through for a short term result...It used to be binary, but I need to be able to edit the files for a single instance, then it will go back to being binary and I&#39;ll never have to deal with this again.  I just need to be able to get the data into the array."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1425482321, "post_id": 28857447, "comment_id": 45981962, "body": "@RobbieP. Right. I was actually confused. You&#39;re using text, which is <i>good</i>, my entire point was that <i>binary</i> is bad. :)"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1425482500, "post_id": 28857447, "comment_id": 45982094, "body": "@unwind gotcha. Well, the reading of the text is working, for the whole file (~1520 entries in my example).  I&#39;m unable to duplicate whatever fread does to add the data to the array."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1425483466, "post_id": 28857447, "comment_id": 45982767, "body": "The problem is that the answer to your question &quot;what does fread do with binary data in FlightEntries[0][1] that memcpy isn&#39;t doing?&quot; simply is --- Nothing. I think, the problem must be somewhere else in your code. I think you should try using tools like gdb or valgrind to get a clue"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1425483735, "post_id": 28857447, "comment_id": 45982936, "body": "@IngoLeonhardt debugging is difficult for me because I&#39;m using freetype, and for some reason it has a memory leak that prevents me from running a debug build, and since it&#39;s not my library, I&#39;m stuck with the memory leak."}, {"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1425484098, "post_id": 28857447, "comment_id": 45983200, "body": "You could experience a page access violation. Try allocating the array explicitly on the heap using <code>calloc</code> or similar and try again..."}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1425484490, "post_id": 28857447, "comment_id": 45983497, "body": "@king_nak this sounds promising...never done this before...where would this be done? in the loop? am I allocating for each entry as it&#39;s read in?  could you post an example as an answer?"}, {"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1425485721, "post_id": 28857447, "comment_id": 45984383, "body": "The problem I described could only occur if you are not using the same global static <code>FlightEntries</code> array as in your original code, but a locally created array in your function. Is this the case?"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "reply_to_user": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1425486458, "post_id": 28857447, "comment_id": 45984931, "body": "@king_nak I am trying to add a locally defined single struct (<code>newEntry</code>) with values into the global static <code>FlightEntries</code> array. So I think the answer is no...the only attempt to write to <code>FlightEntries</code> is the global static one."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425490563, "post_id": 28857447, "comment_id": 45987612, "body": "Can you tell me what <b><i>MAX_FLIGHT_ENTRIES</i></b> represents?  - My guess is that your 2 dimensional array of structs should only be a one dimensional array of structs.  This would simplify your memcpy() issue"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "edited": false, "score": 0, "creation_date": 1425481530, "post_id": 28857714, "comment_id": 45981409, "body": "fscanf is working perfectly...as long as I don&#39;t attempt to access the FlightEntries array, I can read in and access the whole file without error.  I&#39;ve even gone so far as to use the newEntry that&#39;s created to re-dump the values to another file to verify that it&#39;s getting read properly.  Even if I change to %lf, it&#39;ll still crash when I attempt to write to the array. :("}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1425481537, "post_id": 28857714, "comment_id": 45981416, "body": "but <code>plocal[xyz]</code> are <code>float</code> not <code>double</code>, so <code>&quot;%f&quot;</code> is correct"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "edited": false, "score": 0, "creation_date": 1425483876, "post_id": 28857714, "comment_id": 45983034, "body": "@RobbieP. - Edited to identify a couple of other things to look at.  Yes, your formatting of floats was correct, but some other issues may be contributing to the problem.  Are you sure the file definition matches the #defines you are using to read it in?"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "edited": false, "score": 0, "creation_date": 1425484196, "post_id": 28857714, "comment_id": 45983271, "body": "@ryyker ick...problem is you&#39;re workign in the wrong direction...it used to be binary, I converted it to text, not the other way around.  The file I&#39;m reading is an ascii text file and the fscanf is working the way it&#39;s supposed to. It&#39;s putting the data into the array that is the problem, not getting it from the file."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "edited": false, "score": 0, "creation_date": 1425484401, "post_id": 28857714, "comment_id": 45983431, "body": "@Robbie - well I will have to edit my suggestion then :), but it will still include checking the results of your <code>fscanf()</code>, and using <code>fopen()</code> and then &#39;fgets()` (instead of <code>fread()</code>)"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "edited": false, "score": 0, "creation_date": 1425484625, "post_id": 28857714, "comment_id": 45983587, "body": "@ryyker thanks!  Another user is suggesting calloc...any thoughts?"}, {"owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "edited": false, "score": 0, "creation_date": 1425485334, "post_id": 28857714, "comment_id": 45984085, "body": "@ryyker I&#39;ve marked your answer as useful, because it helps me more appropriately get the data from the file...but it&#39;s still not helping me get the newEntry into the FlightEntries array."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "edited": false, "score": 0, "creation_date": 1425488094, "post_id": 28857714, "comment_id": 45986019, "body": "@RobbieP. -  It depends - I still do not know if the file you are reading in is described perfectly by <code>#define MAX_FLIGHT_ENTRIES    27000</code> and  <code>#define MAX_PLANES_IN_A_FLIGHT 10</code>.  If no, then yes, you need to read the file, determine number of lines, length of each line, and then allocate memory accordingly.  You would need to create a 2 dim array.  See edit."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1425509327, "post_id": 28857714, "comment_id": 45998050, "body": "&quot;If an input failure occurs before any conversion, the function returns EOF (-1);&quot; is better re-stated as &quot;If an input failure occurs before <i>the first</i> conversion, the function returns EOF (-1);&quot;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1425510347, "post_id": 28857714, "comment_id": 45998467, "body": "@chux - Thanks!  I took that right out of the documentation for my system, but you are correct.  And I made an edit to reflect that."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 3, "last_activity_date": 1425510992, "last_edit_date": 1495539805, "creation_date": 1425481328, "answer_id": 28857714, "question_id": 28857447, "link": "https://stackoverflow.com/questions/28857447/c-reading-data-into-an-array-of-struct-memcpy/28857714#28857714", "title": "C - Reading data into an array of struct, memcpy?", "body": "<p><strong><em>...used to read data from a binary file directly into an array using fread.</em></strong>...<br>\n<strong><em>EDIT</em></strong><br>\n<strong><em>Now I'm reading from a text file and I've tried everything I can to get the values into the array.</em></strong>   </p>\n\n<p>Unless the contents of your file match the current definition of the FLIGHT_ENTRY_TYPE struct, and perhaps these definitions: </p>\n\n<pre><code>#define MAX_FLIGHT_ENTRIES    27000\n#define MAX_PLANES_IN_A_FLIGHT 10\n</code></pre>\n\n<p>There <strong><em>will</em></strong> be problems with your read attempt, no matter what you try. (The file contents, and the struct definition <em>MUST</em> be in alignment to do what you are trying to do.  Because you are using a text file, this should be easily verifiable.)   </p>\n\n<p><strong><em>Also</em></strong>, <strong><em><a href=\"https://stackoverflow.com/q/5431941/645128\">feof(pFile)</a></em></strong> is rarely a good choice for reading a file   </p>\n\n<p>Consider changing it to something like this:(pseudo code)  </p>\n\n<pre><code>FLIGHT_ENTRY_TYPE newEntry;\nint len = sizeof(FLIGHT_ENTRY_TYPE)*2;// *2 to account for comma delimiters, etc.  Change as needed\nchar **stringArray = {0};\n//see edits in answer below for defintion of allocArray()\nstringArray = allocMemory(stringArray, MAX_PLANES_IN_A_FLIGHT, len);        \nFILE *fp = fopen(\".\\\\filename.bin\", \"rb\");\nif(fp &amp;&amp; stringArray)\n{   \n    while(fgets(stringArray[i], len, fp)\n    {\n         fresult = sscanf(stringArray[i], \"%f %f %f %f %f %f %f %f %f %f %f %f %f\\n\",\n                    &amp;plocalx,\n                    &amp;plocaly,\n                    &amp;plocalz,\n                    &amp;ppitch,\n                    &amp;proll,\n                    &amp;pheading,\n                    &amp;pgearpos,\n                    &amp;pflappos,\n                    &amp;pbrakepos,\n                    &amp;pcanopypos,\n                    &amp;pafterburnon,\n                    &amp;pkias,\n                    &amp;ptime);  \n          if(fresult &gt; 0)\n          { ...assign values to newEntry struct...  }\n\n    }\n    fclose(fp);\n    freeMemory(stringArray,MAX_PLANES_IN_A_FLIGHT);   \n}\n</code></pre>\n\n<p>The first three members of your struct are <code>double</code> values, and should therefore be read into double values.  If you decide to make that change:  </p>\n\n<pre><code>float plocalx, plocaly, plocalz; \n</code></pre>\n\n<p><strong><em>TO:</em></strong>  </p>\n\n<pre><code>double plocalx, plocaly, plocalz;\n</code></pre>\n\n<p><strong><em>Be sure to also Change</em></strong>:</p>\n\n<pre><code>fresult = fscanf(pFile, \"%f %f %f %f %f %f %f %f %f %f %f %f %f\\n\", \n</code></pre>\n\n<p><strong><em>To</em></strong>:</p>\n\n<pre><code>fresult = fscanf(pFile, \"%lf %lf %lf %f %f %f %f %f %f %f %f %f %f\\n\",  \n</code></pre>\n\n<p>You should also check the return value of <code>sscanf()</code><br>\n<strong><em>The return value:</em></strong> <em>Converts input from the specified source string into a series of values according to the specifiers in formatString. If an input failure occurs before</em> <strong><em>the first</em></strong> <em>conversion, the function returns EOF (-1); otherwise, the function returns the number of input items assigned. If copying takes place between objects that overlap, the behavior is undefined.</em>  </p>\n\n<p><strong><em>EDIT 2</em></strong><br>\nIf you do need to create an array of strings (for each line of the file), these functions will help:  </p>\n\n<pre><code>char ** allocMemory(char ** a, int numStrings, int maxStrLen)\n{\n    int i;\n    a = calloc(sizeof(char*)*(numStrings+1), sizeof(char*));\n    for(i=0;i&lt;numStrings; i++)\n    {\n      a[i] = calloc(sizeof(char)*maxStrLen + 1, sizeof(char));\n    }\n    return a;\n}\n\nvoid freeMemory(char ** a, int numStrings)\n{\n    int i;\n    for(i=0;i&lt;numStrings; i++)\n        if(a[i]) free(a[i]);\n    free(a);\n}\n\n//usage:\n#define MAX_FLIGHT_ENTRIES    27000\n#define MAX_PLANES_IN_A_FLIGHT 10\nint main(void)\n{\n    char **stringArray = {0};\n    stringArray = allocMemory(stringArray, MAX_PLANES_IN_A_FLIGHT, sizeof FLIGHT_ENTRY_TYPE);\n    ...//read data into string array as shown in code above\n    return 0;\n}   \n</code></pre>\n\n<p>The concept here is that each line of the file is assumed to represent the data to populate one struct instance of the FLIGHT_ENTRY_TYPE struct.  Stated differently, one line in the file is read for each struct in the array of structs.</p>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1425512860, "post_id": 28863009, "comment_id": 45999321, "body": "Be sure to mark your answer as <i>anwered</i> once you are able to.  :)  (hollow green check mark)"}], "tags": [], "owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1425496782, "creation_date": 1425496782, "answer_id": 28863009, "question_id": 28857447, "link": "https://stackoverflow.com/questions/28857447/c-reading-data-into-an-array-of-struct-memcpy/28863009#28863009", "title": "C - Reading data into an array of struct, memcpy?", "body": "<p>Extenuating unlisted circumstances.</p>\n\n<p>Turns out, since I couldn't debug, I had placed a log file snippet at the end of the loop iteration.  I believe that instantiating the logfile was corrupting the array and preventing the array from being written to.  Possibly a heap issue, but I'm not sure.  I've learned quite a bit from this exercise about dealign with memory pointers as well as better ways to read and write data from file.  So Thank you all for the help.</p>\n"}], "owner": {"reputation": 131, "user_id": 3383691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4aeeb4290f43f44c571a67bf32124b78?s=128&d=identicon&r=PG", "display_name": "Robbie P.", "link": "https://stackoverflow.com/users/3383691/robbie-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1425510992, "creation_date": 1425480573, "last_edit_date": 1592644375, "question_id": 28857447, "link": "https://stackoverflow.com/questions/28857447/c-reading-data-into-an-array-of-struct-memcpy", "title": "C - Reading data into an array of struct, memcpy?", "body": "<h3>edit for clarity:</h3>\n<p><code>fscanf</code> is working the way it is written here...it's getting the data into the array that's broken.</p>\n<h3>another edit for clarity:</h3>\n<p>The only point of failure is the <code>memcpy</code> line on the second iteration through the loop where <code>fileindex</code> is 0 and <code>i</code> is 1. the <code>memcpy</code> line works fine when <code>i</code> is 0.</p>\n<hr />\n<p>I'm converting a program that used to read data from a binary file directly into an array using <code>fread</code> into reading from ascii text. Here's the setup:</p>\n<pre><code>#define MAX_FLIGHT_ENTRIES    27000\n#define MAX_PLANES_IN_A_FLIGHT 10\n\ntypedef struct {\n    double local_x;\n    double local_y;\n    double local_z;\n    float pitch;\n    float roll;\n    float heading;\n    float gearpos;\n    float flappos;\n    float speedbrakepos;\n    float canopypos;\n    float afterburnerOn;\n    float kias;\n    float time;     // record timestamp\n} FLIGHT_ENTRY_TYPE;\nstatic FLIGHT_ENTRY_TYPE FlightEntries [MAX_PLANES_IN_A_FLIGHT][MAX_FLIGHT_ENTRIES];\n</code></pre>\n<p>The way this used to work is, in a loop, the array would be filled via:</p>\n<pre><code>fread (&amp;FlightEntries[fileIndex][i], sizeof (FLIGHT_ENTRY_TYPE), 1, pFile);\n</code></pre>\n<p>And I believe this would actually instantiate each entry in the array by putting the data directly into memory.  Now I'm reading from a text file and I've tried everything I can to get the values into the array, but it only ever writes the first entry FlightEntries[0][0].  Any attempt to read or write to FlightEntries[0][1] crashes. Here's my current best attempt.</p>\n<pre><code>for ( i = 0; i &lt; MAX_FLIGHT_ENTRIES; i++)\n{               \n        // If the file end is found before it should be, set values to defaults\n        // and save the file\n        if (feof(pFile))\n        {\n            FlightInfo[fileIndex].endFrameIndex = i - 1;\n            break;\n        }\n        else\n        {\n            float plocalx, plocaly, plocalz;\n            float ppitch, proll, pheading, pgearpos, pflappos, pbrakepos, pcanopypos, pafterburnon, pkias, ptime;\n            \n            int fresult;\n            fresult = fscanf(pFile, &quot;%f %f %f %f %f %f %f %f %f %f %f %f %f\\n&quot;,\n                &amp;plocalx,\n                &amp;plocaly,\n                &amp;plocalz,\n                &amp;ppitch,\n                &amp;proll,\n                &amp;pheading,\n                &amp;pgearpos,\n                &amp;pflappos,\n                &amp;pbrakepos,\n                &amp;pcanopypos,\n                &amp;pafterburnon,\n                &amp;pkias,\n                &amp;ptime);\n\n                FLIGHT_ENTRY_TYPE newEntry;\n\n            newEntry.local_x = (double)plocalx;\n            newEntry.local_y = (double)plocaly;\n            newEntry.local_z = (double)plocalz;\n            newEntry.pitch = ppitch;\n            newEntry.roll = proll;\n            newEntry.heading = pheading;\n            newEntry.gearpos = pgearpos;\n            newEntry.flappos = pflappos;\n            newEntry.speedbrakepos = pbrakepos;\n            newEntry.canopypos = pcanopypos;\n            newEntry.afterburnerOn = pafterburnon;\n            newEntry.kias = pkias;\n            newEntry.time = ptime;\n\n            memcpy (&amp;FlightEntries[fileIndex][i], &amp;newEntry, sizeof FLIGHT_ENTRY_TYPE);\n        }\n}\n</code></pre>\n<p>I don't think the array entries are getting allocated properly.  I've tried accessing the individual structure members directly via <code>FlightEntries[fileIndex][i].local_x = (double)plocalx;</code> and I've also tried using <code>memcpy</code> to do the same thing for each member...am I doing my pointers wrong or something?  I have no idea where to go with this. Every time I get past one stumbling block, something else comes up and I think it's all related to the array as opposed to reading from file. Do I have to do something to allocate space?</p>\n<h3>The big question is:</h3>\n<p>What does <code>fread</code> do with binary data in FlightEntries[0][1] that <code>memcpy</code> isn't doing? And is my <code>memcpy</code> line correct? Do I need to do some kind of <code>malloc</code>?</p>\n"}, {"tags": ["c", "pointers", "comparison", "conditional-statements", "null-pointer"], "answers": [{"comments": [{"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1425480576, "post_id": 28856856, "comment_id": 45980716, "body": "Thanks a lot for this broad and authoritative answer."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 10, "last_activity_date": 1425479897, "last_edit_date": 1425479897, "creation_date": 1425478935, "answer_id": 28856856, "question_id": 28856825, "link": "https://stackoverflow.com/questions/28856825/can-i-assume-null-value-in-comparison-as-the-false/28856856#28856856", "title": "Can I assume NULL value in comparison as the false?", "body": "<p>Yes. You can use the macro <code>NULL</code> in this way. It is a null pointer constant which is equal to <code>0</code>.   </p>\n\n<h3><a href=\"http://c-faq.com/null/ptrtest.html\">comp.lang.c FAQ list \u00b7 Question 5.3</a>:</h3>\n\n<blockquote>\n  <p>When C requires the Boolean value of an expression, a false value is inferred when the expression compares equal to zero, and a true value otherwise. That is, whenever one writes</p>\n\n<pre><code>if(expr)\n</code></pre>\n  \n  <p>where <code>expr</code> is any expression at all, the compiler essentially acts as if it had been written as  </p>\n\n<pre><code>if((expr) != 0)\n</code></pre>\n  \n  <p>Substituting the trivial pointer expression <code>p</code> for <code>expr</code>, we have  </p>\n\n<pre><code>if(p)   is equivalent to    if(p != 0)\n</code></pre>\n  \n  <p>and this is a comparison context, so the compiler can tell that the (implicit) <code>0</code> is actually a null pointer constant, and use the correct null pointer value. There is no trickery involved here; compilers do work this way, and generate identical code for both constructs. <strong>The internal representation of a null pointer does not matter</strong>.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>but it is mentioned that it can be represented as a value which doesn't contain all zeros.  </p>\n</blockquote>\n\n<p>Yes. True. But <a href=\"http://c-faq.com/~scs/cgi-bin/faqcat.cgi?sec=null\">representation doesn't matter</a> in this case:  </p>\n\n<blockquote>\n  <p>Whenever a programmer requests a null pointer, either by writing <code>0</code> or <code>NULL</code>, <strong>it is the compiler's responsibility to generate whatever bit pattern the machine uses for that null pointer</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 28856856, "answer_count": 1, "score": 6, "last_activity_date": 1425481838, "creation_date": 1425478870, "last_edit_date": 1425481838, "question_id": 28856825, "link": "https://stackoverflow.com/questions/28856825/can-i-assume-null-value-in-comparison-as-the-false", "title": "Can I assume NULL value in comparison as the false?", "body": "<p>I know that <code>NULL == (void *)0</code> but it is mentioned that it can be represented as a value which doesn't contain all zeros. What bothers me is if those pieces of code are equivalent for all <code>(any_type *)</code>:</p>\n\n<pre><code>any_type *val;\n\nif (val) { ... };\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (val != NULL) { ... };\n</code></pre>\n"}, {"tags": ["c", "file", "directory", "dirent.h"], "answers": [{"tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 1, "last_activity_date": 1425481016, "last_edit_date": 1425481016, "creation_date": 1425479058, "answer_id": 28856900, "question_id": 28856803, "link": "https://stackoverflow.com/questions/28856803/how-can-i-copy-directory-files-into-another-folder/28856900#28856900", "title": "How can I copy directory files into another folder?", "body": "<p>If you use Windows OS, you can use command such <code>system(\"copy dir1\\\\*.txt dir2\\\\\");</code> for which parameter (command string) can be constructed as you want.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;windows.h&gt;\n\nint main(void) \n{\n    char comstart[] = \"copy\";\n    char pathsource[] = \"D:\\\\testdir\\\\\";\n    char copypattern[] = \"*.*\";\n    char pathtarget[] = \"D:\\\\testdir2\\\\\";\n    char * command;\n    // building command\n    command = (char*) malloc(strlen(comstart) + strlen(pathsource) + strlen(copypattern) + strlen(pathtarget) + 3);\n    if(!command)\n    {\n        printf(\"Unexpected error!\\n\");\n        return 1;\n    }\n    strcpy(command, comstart);\n    strcat(command, \" \");\n    strcat(command, pathsource);\n    strcat(command, copypattern);\n    strcat(command, \" \");\n    strcat(command, pathtarget);\n    // command execution\n    int res = 0;\n    res = system(command);\n    if( res == 0)\n    {\n        printf(\"Files copied successfully!\\n\");\n    }\n    else\n    {\n        printf(\"Unexpected error with code %d!\\n\", res);\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Or you can use more advanced approach with Win API functions. See:</p>\n\n<p><a href=\"https://msdn.microsoft.com/ru-ru/library/windows/desktop/aa363852%28v=vs.85%29.aspx\" rel=\"nofollow\">CopyFileEx function</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365245%28v=vs.85%29.aspx\" rel=\"nofollow\">MoveFileEx function</a></p>\n\n<p>and other</p>\n"}], "owner": {"reputation": 1, "user_id": 4632463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f3aa3936f80edb0fc776a11f261b8?s=128&d=identicon&r=PG", "display_name": "user26294", "link": "https://stackoverflow.com/users/4632463/user26294"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425481016, "creation_date": 1425478806, "question_id": 28856803, "link": "https://stackoverflow.com/questions/28856803/how-can-i-copy-directory-files-into-another-folder", "title": "How can I copy directory files into another folder?", "body": "<p>I need to copy files from a certain directory into another, I'm in the part where I allocate strtok into arrays and which I find very confusing. I have 2562 files to copy. I think I need 2D array but I always get errors. Help...</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;dirent.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;windows.h&gt;\n#include&lt;string.h&gt;\n\nchar** str_split(char* a_str, const char a_delim);\n\nDIR *dir;\nstruct dirent *sd;\nFILE *source, *target;\n\n\n\nint main(){\n\nchar *token;\n\nint ctr;\nchar pathsource[40];\nchar pathtarget[40];\nstrcpy(pathsource,\"C:\\\\\");\nstrcpy(pathtarget,\"C:\\\\\");\nsystem(\"pause\");\n\ndir = opendir(pathsource);\nif(dir){\n\n    while( (sd=readdir(dir)) != NULL ) {\n\n\n        token = strtok(sd-&gt;d_name,\"\\n\");\n        printf(\"%s\\n\",token);\n\n\n    }       \n\n    closedir(dir);  \n\n}\n\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>by the way, I just removed a little bit from the C:\\ \\ - that isn't the actual code.</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 45, "user_id": 3830614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b788b6388201e66d8bb14dbf37814e58?s=128&d=identicon&r=PG&f=1", "display_name": "DimZ", "link": "https://stackoverflow.com/users/3830614/dimz"}, "edited": false, "score": 0, "creation_date": 1425478863, "post_id": 28856779, "comment_id": 45979560, "body": "I&#39;m using NetBeans IDE 8.0"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 4, "creation_date": 1425478909, "post_id": 28856779, "comment_id": 45979591, "body": "<code>viii</code> is 4 characters, when you combine that with the characters from the 10s digit, you&#39;re going past a tab stop. that means you printf should have only <b>3</b> <code>\\t</code> chars, not 4. e.g. <code>lxxxlxxx\\t\\t\\t\\t</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1425479618, "post_id": 28856779, "comment_id": 45980037, "body": "Note that the width of tab stops (and of specific characters) is a function of the output device, and perhaps of other factors as well.  It would be best to minimize your assumptions: either assume a fixed-pitch font and use spaces to align your columns, or assume tab stops can be set at convenient places and everywhere use a single tab between columns."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1425481059, "post_id": 28856779, "comment_id": 45981084, "body": "Form the entire roman number string in one buffer <code>rstring</code> and <code>printf(&quot;%-31s %d\\n&quot;, rstring, i);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1425488364, "post_id": 28856779, "comment_id": 45986189, "body": "suggest placing the parts of the roman numeral value into a character buffer. After all the parts are in the buffer, check the length of the buffer (perhaps with strlen) then have two printf statements, one for when the strlen is &lt;8 and another for when the strlen is 8 or more.  Note: printf is expensive in code size.  so reducing the code to only 2 printf statements will dramatically shrink the code and will fix the logic problem"}], "owner": {"reputation": 45, "user_id": 3830614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b788b6388201e66d8bb14dbf37814e58?s=128&d=identicon&r=PG&f=1", "display_name": "DimZ", "link": "https://stackoverflow.com/users/3830614/dimz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425479078, "creation_date": 1425478747, "last_edit_date": 1425479078, "question_id": 28856779, "link": "https://stackoverflow.com/questions/28856779/one-line-of-code-using-tab-t-doesnt-place-at-required-position-with-c-code", "title": "one line of code using tab &quot;\\t&quot; doesn&#39;t place at required position with c code", "body": "<p>Here is a program to print Roman Numeral values up to a\nhundred everything works fine except for when <code>i==88</code>, on this line tab indents one extra set to stop. \nI sort of understand why that is 8 character. \nHow can I fix that ? \nThank you. </p>\n\n<pre><code>int main() {\n    unsigned int i, tensDigit, singleUnit;\n\n    printf( \"Roman Numeral\\t\\t\\t\\tDecimal\\n\");\n\n    for ( i = 1; i &lt;= 100; i++ ) {\n        tensDigit = i / 10;\n        singleUnit = i % 10;\n\n        switch ( tensDigit ) {\n            case 0:\n                break;\n            case 1:\n                printf(\"X\");\n                break;\n            case 2:\n                printf(\"XX\");\n                break;\n            case 3:\n                printf(\"XXX\");\n                break;            \n            case 4:\n                printf(\"XL\");\n                break;\n            case 5:\n                printf(\"L\");\n                break;\n            case 6:\n                printf(\"LX\");\n                break;\n            case 7:\n                printf(\"LXX\");\n                break;\n            case 8:\n                printf(\"LXXX\");\n                break;\n            case 9:\n                printf(\"XC\");\n                break;\n            case 10:\n                printf(\"C\");\n                break;\n            default: \n                break;\n        }\n\n        switch ( singleUnit ) {\n            case 0:\n                printf(\"\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 1:\n                printf(\"I\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 2:\n                printf(\"II\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 3:\n                printf(\"III\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 4:\n                printf(\"IV\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 5:\n                printf(\"V\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 6:\n                printf(\"VI\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 7:\n                printf(\"VII\\t\\t\\t\\t%d\\n\", i);\n                break;\n            case 8:                \n                printf(\"VIII\\t\\t\\t\\t%d\\n\", i);                                \n                break;\n            case 9:\n                printf(\"IX\\t\\t\\t\\t%d\\n\", i);\n                break;            \n        }\n    }\n    return 0; }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1425478271, "post_id": 28856584, "comment_id": 45979149, "body": "How you are reading from file? Which function you are using?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1425478285, "post_id": 28856584, "comment_id": 45979166, "body": "<code>fread()</code> and <code>strtok(string,&#39;\\n&#39;);</code>"}, {"owner": {"reputation": 2227, "user_id": 840382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1be0122a698f20129ba6497b5a1c175c?s=128&d=identicon&r=PG", "display_name": "Tom Knapen", "link": "https://stackoverflow.com/users/840382/tom-knapen"}, "edited": false, "score": 1, "creation_date": 1425478291, "post_id": 28856584, "comment_id": 45979170, "body": "This is exactly what <a href=\"http://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\">getline</a> is for"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1425478567, "post_id": 28856584, "comment_id": 45979354, "body": "(-1 for not simply looking under the available standard functions -- however ...) What advantage(s) does it have to read &#39;a line&#39;, when the very next thing you must then do is break it up into separate rooms again -- <i>exactly what you have now</i>?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1425478929, "post_id": 28856584, "comment_id": 45979611, "body": "You need <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1425481301, "post_id": 28856584, "comment_id": 45981239, "body": "If you are on Linux you might even use <a href=\"http://www.gnu.org/software/readline/\" rel=\"nofollow noreferrer\">readline</a> which offers a very convenient line editor."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1425483237, "post_id": 28856584, "comment_id": 45982625, "body": "&quot;When I read it in&quot;  ---&gt; post your code to show how you did this."}], "answers": [{"comments": [{"owner": {"reputation": 18090, "user_id": 3337080, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Pr8Qu.png?s=128&g=1", "display_name": "Orelsanpls", "link": "https://stackoverflow.com/users/3337080/orelsanpls"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1425481025, "post_id": 28856812, "comment_id": 45981060, "body": "Actually you are right It may be troublesome I&#39;ll change It. Looking at <a href=\"http://stackoverflow.com/questions/12389518/representing-eof-in-c-code\">this</a>"}], "tags": [], "owner": {"reputation": 18090, "user_id": 3337080, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Pr8Qu.png?s=128&g=1", "display_name": "Orelsanpls", "link": "https://stackoverflow.com/users/3337080/orelsanpls"}, "is_accepted": false, "score": 3, "last_activity_date": 1425481080, "last_edit_date": 1425481080, "creation_date": 1425478835, "answer_id": 28856812, "question_id": 28856584, "link": "https://stackoverflow.com/questions/28856584/how-to-read-a-full-line-of-text-in-c-with-spaces/28856812#28856812", "title": "How to read a full line of text in C with spaces", "body": "<p>First you have to know that at the end of each line there is a character '\\n'.\nWhen you open a file, it create a cursor located at the start of the file.\nWhen you read one character, the cursor move on until it reach the end of the file, represented by the state code 'EOF' (-1 value).</p>\n\n<p>To get one line, the strategy will be to read all character until you reach '\\n'. And do it again, and again, until you reach 'EOF'.\n(be careful because if there is only one line, you will maybe not have '\\n')</p>\n\n<p>How to do it using code now:</p>\n\n<p><em>Use the following function</em>:</p>\n\n<p><a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow\">fopen()</a> // To open the file</p>\n\n<p><a href=\"http://linux.die.net/man/3/getline\" rel=\"nofollow\">getline()</a> // To read one line</p>\n\n<p>Luckily for you these two function are enough, because they handle everything ('\\n', 'EOF', cursor ...)</p>\n"}], "owner": {"reputation": 7, "user_id": 3055308, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fa84bfa7088687096bec412335235429?s=128&d=identicon&r=PG&f=1", "display_name": "Code Monkey", "link": "https://stackoverflow.com/users/3055308/code-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1425482155, "creation_date": 1425478198, "question_id": 28856584, "link": "https://stackoverflow.com/questions/28856584/how-to-read-a-full-line-of-text-in-c-with-spaces", "title": "How to read a full line of text in C with spaces", "body": "<p>For an assignment at school I have to make the game rogue.  The way we load the rooms is from a file that looks like this:</p>\n\n<pre><code>10x12 de4 ds6 p9,8 g7,5 h1,1 M8,9\n24x12 ds5 ds6 p9,8 g7,5 h1,1 M8,9\n9x16 ds3 ds6 p9,8 g7,5 h1,1 M8,9\n18x17 dn9 ds6 p9,8 g7,5 h1,1 M8,9\n5x5 de4 ds6 p9,8 g7,5 h1,1 M8,9\n16x11 dw7 ds6 p9,8 g7,5 h1,1 M8,9\n</code></pre>\n\n<p>Each room has a size to start then all the elements and their locations after it, separated by a space.  When I read it in, I was unable to get each line (10x12 de4 ds6 p9,8 g7,5 h1,1 M8,9), I only got one element at a time (10x12 then de4 then ds6 and so on).  Is there a way to read up until the end of the line and save that in a\n<code>char ** rooms</code> variable?</p>\n"}, {"tags": ["c", "string", "compare"], "comments": [{"owner": {"reputation": 47440, "user_id": 229410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0014fcc07d184018d3b8185a85a09?s=128&d=identicon&r=PG", "display_name": "Rohan", "link": "https://stackoverflow.com/users/229410/rohan"}, "edited": false, "score": 1, "creation_date": 1425477052, "post_id": 28856112, "comment_id": 45978272, "body": "Search for <code>&#39;_&#39;</code> character, <code>strchr()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1425477030, "creation_date": 1425477030, "answer_id": 28856186, "question_id": 28856112, "link": "https://stackoverflow.com/questions/28856112/how-to-compare-some-part-of-a-string-in-c/28856186#28856186", "title": "how to compare some part of a string in c?", "body": "<p>Just use <code>strchr()</code></p>\n\n<pre><code>char *pointer;\nif ((pointer = strchr(string, '_')) != NULL)\n {\n    printf(\"The text after _ is %s\\n\", pointer + 1);\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1425477183, "post_id": 28856188, "comment_id": 45978361, "body": "how about if the char *string = &quot;nameOfPeople_Allen&quot;; is char *string = &quot;nameOfPeople_AllenAllen&quot;;, looks like there are not the same name"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1425477227, "post_id": 28856188, "comment_id": 45978396, "body": "@ratzip; Read about <code>strstr</code>."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1425482177, "post_id": 28856188, "comment_id": 45981858, "body": "From OP <i>I know how to compare string, but how to get the last part of the &quot;nameOfPeople_Allen&quot; from _</i>. Your code doesn&#39;t help him to <i>get the last part of the &quot;nameOfPeople_Allen&quot; from _</i> but find occurrence of string <code>&quot;Allen&quot;</code> which doesn&#39;t answer the question."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1425483095, "post_id": 28856188, "comment_id": 45982514, "body": "@Hynek-Pichi-Vychodil; OK. Done."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1425483487, "last_edit_date": 1425483487, "creation_date": 1425477039, "answer_id": 28856188, "question_id": 28856112, "link": "https://stackoverflow.com/questions/28856112/how-to-compare-some-part-of-a-string-in-c/28856188#28856188", "title": "how to compare some part of a string in c?", "body": "<p>Use <a href=\"http://linux.die.net/man/3/strstr\" rel=\"nofollow\"><code>strstr</code></a> standard library function.  </p>\n\n<pre><code>char *temp = strstr(string, \"Allen\"); \n</code></pre>\n\n<p>then use <code>strcmp</code> to compare it with <code>searchName</code>.  </p>\n\n<p>To find the sub-string after <code>-</code> use <code>strchr</code>  </p>\n\n<pre><code>char *temp = strchr(string, '_');   \nif(temp)  \n    printf(\"%s\\n\", temp+1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1425477661, "post_id": 28856219, "comment_id": 45978702, "body": "Could you explain why it is allocated in r-o memory, and what it is?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1425478377, "post_id": 28856219, "comment_id": 45979228, "body": "Because it&#39;s a string literal and C works that way. Attempting to modify the string is undefined behaviour."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1425477954, "last_edit_date": 1425477954, "creation_date": 1425477121, "answer_id": 28856219, "question_id": 28856112, "link": "https://stackoverflow.com/questions/28856112/how-to-compare-some-part-of-a-string-in-c/28856219#28856219", "title": "how to compare some part of a string in c?", "body": "<p>As for <em>trimming</em>, whatever you do, <strong>don't</strong> modify <code>string</code> as it is allocated in read-only memory. (You can help yourself here by using <code>const char* string</code>)</p>\n\n<p>But you <em>can</em> use <code>strstr</code> to check for containment:</p>\n\n<pre><code>if (strstr(string, \"Allen\"))...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "is_accepted": false, "score": 0, "last_activity_date": 1425478459, "creation_date": 1425478459, "answer_id": 28856678, "question_id": 28856112, "link": "https://stackoverflow.com/questions/28856112/how-to-compare-some-part-of-a-string-in-c/28856678#28856678", "title": "how to compare some part of a string in c?", "body": "<p>if you would like to loop trough it for some reason, try this:</p>\n\n<pre><code>int i, check = 0, position = 0;\nchar part_of_string[20];\nfor(i = 0; i &lt; strlen(string); i++){\n    if(check){ \n         part_of_string[position] = string[i];\n         position++;\n    }else if(string[i] == '_'){\n         check = 1;\n    }\n}\n</code></pre>\n\n<p>Now <code>part_of_string</code> contains the chars after the '_' character. You could compare it with <code>strcmp()</code> or loop through it again to check for \"Alan\".</p>\n"}, {"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1425484957, "post_id": 28857017, "comment_id": 45983819, "body": "How you concluded that its a fast way?"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1425485546, "post_id": 28857017, "comment_id": 45984254, "body": "Both <code>strchr()</code> and <code>strcmp()</code> are very simple <code>O(n)</code> functions. Function <code>strstr()</code> seems to be <code>O(n*m)</code> if I understant code right. It could be done <code>O(n+m)</code> using some advanced algorithms but it seems not be used in standard libraries."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 1, "last_activity_date": 1425482042, "last_edit_date": 1425482042, "creation_date": 1425479417, "answer_id": 28857017, "question_id": 28856112, "link": "https://stackoverflow.com/questions/28856112/how-to-compare-some-part-of-a-string-in-c/28857017#28857017", "title": "how to compare some part of a string in c?", "body": "<p>The simple and fast way:</p>\n\n<pre><code>// static inline if you are interested\nint sameName(const char *string, const char *searchName) {\n    const char *p;\n    return (p = strchr(string, '_')) &amp;&amp; strcmp(p+1, searchName) == 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 28856186, "answer_count": 5, "score": 2, "last_activity_date": 1425483487, "creation_date": 1425476878, "question_id": 28856112, "link": "https://stackoverflow.com/questions/28856112/how-to-compare-some-part-of-a-string-in-c", "title": "how to compare some part of a string in c?", "body": "<p>I have a question about compare only some part of a string</p>\n\n<p>For example:</p>\n\n<pre><code>char *string = \"nameOfPeople_Allen\";\n\nchar searchName[20] = \"Allen\";\n</code></pre>\n\n<p>how to trim the <code>char *string = \"nameOfPeople_Allen\";</code>from <code>_</code> to get the name <code>Allen</code>, then compare it with <code>searchName</code>, I know how to compare string, but how to get the last part of the <code>\"nameOfPeople_Allen\"</code> from <code>_</code>?</p>\n"}, {"tags": ["c++", "c", "sqlite"], "comments": [{"owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "edited": false, "score": 0, "creation_date": 1425478511, "post_id": 28856061, "comment_id": 45979319, "body": "You&#39;ll have to provide more sources. E.g., in your <code>test.cc</code> it doesn&#39;t say that <code>sqlite3_extension_functions_init()</code> is a C function (it will assume C++) while given your command line, I assume that it&#39;s in <code>extension_functions.c</code> and hence will require <code>extern &quot;C&quot; { ... }</code> when declared in <code>test.cc</code>."}, {"owner": {"reputation": 171, "user_id": 2658602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uNf3d.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/2658602/joe"}, "edited": false, "score": 0, "creation_date": 1425481938, "post_id": 28856061, "comment_id": 45981685, "body": "I compile the &quot;amalgamation&quot; of sqlite, 3.8.7, directly into my program successfully. As pointed out, the linker can not find the function. It seems like you need to look at the calling conventions defined for the function. Usually has &quot;API&quot;. Calling conventions specifiy how to link and also change the name in the symbol table -- which can lead to undefined references."}, {"owner": {"reputation": 23, "user_id": 4631818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a5684dbc8a742173e761d8e27d0e8dc?s=128&d=identicon&r=PG&f=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4631818/striker"}, "reply_to_user": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "edited": false, "score": 0, "creation_date": 1425484772, "post_id": 28856061, "comment_id": 45983697, "body": "@KarelKubat: Thank You. This is the solution. I didn&#39;t mix C and C++ before and therefor didn&#39;t know of the <code>extern &quot;C&quot; { ... }</code> possibility. Furthermore I wanted my minimal example to be pure C code, but of course ... gcc compiles *.cc files as C++ code and my actual program is also C++. So a working minimal example would be using <code>gcc ... test.c ...</code> or <code>gcc -x c ...</code> or <code>extern &quot;C&quot; { ... }</code> in the C++ case. If you post an answer I will accept it. :)"}, {"owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "edited": false, "score": 0, "creation_date": 1425551956, "post_id": 28856061, "comment_id": 46013629, "body": "@Striker, thanks and glad I could help. I added an answer with some more background. Have fun coding!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4631818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a5684dbc8a742173e761d8e27d0e8dc?s=128&d=identicon&r=PG&f=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4631818/striker"}, "edited": false, "score": 0, "creation_date": 1425485645, "post_id": 28856712, "comment_id": 45984324, "body": "Thank you for these clarifications. I worked mostly in projects with Autotools so there is still room for basic compiler knowledge / options. Since this answer is not the solution to my question (see the comment of Karel Kubat) I cannot accept it, but you get an upvote because it was helpful for me. Edit: Ahhh, I cannot upvote your answer because my reputation is too low, sorry. :("}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 23, "user_id": 4631818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a5684dbc8a742173e761d8e27d0e8dc?s=128&d=identicon&r=PG&f=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4631818/striker"}, "edited": false, "score": 0, "creation_date": 1425489337, "post_id": 28856712, "comment_id": 45986825, "body": "@striker, since you mentioned the Autotools, if you are using Libtool then your configure script should already offer you options <code>--enable-static</code> and <code>--disable-shared</code>, which you should use."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 23, "user_id": 4631818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a5684dbc8a742173e761d8e27d0e8dc?s=128&d=identicon&r=PG&f=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4631818/striker"}, "edited": false, "score": 0, "creation_date": 1425489427, "post_id": 28856712, "comment_id": 45986891, "body": "And you may not be able to upvote the answer, but if you&#39;re satisfied with it then you can <i>accept</i> it by clicking the check mark next to it."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1425478548, "creation_date": 1425478548, "answer_id": 28856712, "question_id": 28856061, "link": "https://stackoverflow.com/questions/28856061/how-to-statically-link-sqlite3-extension-functions-into-a-c-c-application/28856712#28856712", "title": "How to statically link sqlite3 + extension functions into a C / C++ application?", "body": "<p>Do not confuse the C language concept of \"linkage\" with the process of physically \"linking\" a collection of compiled functions into a complete program.  The latter is a logically separate operation from source compilation, albeit one influenced by the former.</p>\n\n<p>Preprocessor macros can affect how your code is compiled, but not (directly) how it is linked. Your extension functions perhaps need to be compiled with <code>-DSQLITE_CORE</code> (though I am not confident of that), but you need <em>link</em> options to build a monolithic executable.  You also need static versions of the SQLite libraries.</p>\n\n<p>GCC provides a common front end (<code>gcc</code>) for compiling and linking, so the main thing you need to do is (at the linking stage) to pass <code>gcc</code> an option directing it to perform static linking.  That option is spelled <code>-static</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "is_accepted": true, "score": 3, "last_activity_date": 1425551906, "creation_date": 1425551906, "answer_id": 28875809, "question_id": 28856061, "link": "https://stackoverflow.com/questions/28856061/how-to-statically-link-sqlite3-extension-functions-into-a-c-c-application/28875809#28875809", "title": "How to statically link sqlite3 + extension functions into a C / C++ application?", "body": "<p>When mixing C and C++ code, make sure that on the C++ side the declaration of C functions is marked as being C, as in:</p>\n\n<pre><code>extern \"C\" {\n    int sqlite3_extension_functions_init(sqlite3 *db, char **pzErrMsg, \n                                         const sqlite3_api_routines *pApi);\n    // more declarations\n}\n</code></pre>\n\n<p>The compiler produces different symbols for externals that are declared as C or as C++. The error messages reflect that:</p>\n\n<pre><code>test.cc:(.text+0x10): undefined reference to `sqlite3_extension_functions_init(sqlite3*, char**, sqlite3_api_routines const*)'\n</code></pre>\n\n<p>In this case the compiler prepared a symbol name because it thought it was dealing with a C++ function, while in fact your function that resides in <code>extension_functions.c</code> will be a C function, and the linker should expect to resolve a different symbol name. This error message states that the linker can't resolve the symbol name that's based on C++ nomenclature.</p>\n\n<p>The background btw. is that C++ supports function overloading, while C doesn't. So in C++ you can have two different functions:</p>\n\n<pre><code>extern void foobar(int x, int y);\nextern void foobar(char const *x);\n</code></pre>\n\n<p>In order to distinguish, the C++ compiler assigns different symbols to these different functions, usually by making the prototype of the function arguments part of the symbol name. In contrast, a C function like <code>int foobar()</code> with whatever function arguments will just produce the symbol <code>foobar</code>without the argument prototypes in the symbol name, because simply C doesn't have function overloading.</p>\n\n<p>That's incidentally why header files that declare C functions, but must be usable for C and C++, are usually structured as follows:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n    /* Now follow declarations of C functions, such as extern int printf()\n     * or whatever \n     */\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4631818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a5684dbc8a742173e761d8e27d0e8dc?s=128&d=identicon&r=PG&f=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4631818/striker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2202, "favorite_count": 1, "accepted_answer_id": 28875809, "answer_count": 2, "score": 2, "last_activity_date": 1425551906, "creation_date": 1425476728, "question_id": 28856061, "link": "https://stackoverflow.com/questions/28856061/how-to-statically-link-sqlite3-extension-functions-into-a-c-c-application", "title": "How to statically link sqlite3 + extension functions into a C / C++ application?", "body": "<p>I already build sqlite3.c into my application and extension-functions.c (hxxps://www.sqlite.org/contrib) into a shared library and it worked fine, but for the project I'm working on I have to statically link sqlite3 + extension functions into a C++ application.\nI already read a lot of sources to this topic, but I cannot get it working.</p>\n\n<p>Minimal example (test.cc):</p>\n\n<pre><code>#include \"sqlite3.h\"\n#include&lt;cstdlib&gt;\n\nvoid sqlite3_extension_functions_init(void);\n// typedef struct sqlite3_api_routines sqlite3_api_routines;\n// int sqlite3_extension_functions_init(sqlite3 *db, char **pzErrMsg, const sqlite3_api_routines *pApi);\n\nint main(int argc,char *argv[]) {\n    //  sqlite3_auto_extension( (void(*)(void))sqlite3_extension_functions_init );\n    sqlite3_auto_extension( sqlite3_extension_functions_init );\n\n    sqlite3 *database_;\n    sqlite3_open_v2(\"test.db\", &amp;database_, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, NULL);\n\n    sqlite3_close_v2(database_);\n\n    return 0;\n}\n</code></pre>\n\n<p>Build command:</p>\n\n<pre><code>gcc -o test sqlite3.c extension_functions.c test.cc -lpthread -lm -ldl -DSQLITE_CORE\n</code></pre>\n\n<p>(-DSQLITE_CORE no influence ?)</p>\n\n<p>Errors:</p>\n\n<pre><code>/tmp/ccPfaDLE.o: In function `main':\ntest.cc:(.text+0x10): undefined reference to `sqlite3_extension_functions_init()'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>using commented lines instead:</p>\n\n<pre><code>/tmp/ccrs9B0K.o: In function `main':\ntest.cc:(.text+0x10): undefined reference to `sqlite3_extension_functions_init(sqlite3*, char**, sqlite3_api_routines const*)'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<ul>\n<li>sqlite3.c, sqlite3.h, sqlite3ext.h from SQLite 3.8.6</li>\n<li>extension_functions.c from <a href=\"https://www.sqlite.org/contrib\" rel=\"nofollow\">https://www.sqlite.org/contrib</a> (renamed extension-functions.c) -> modified for static linking according to <a href=\"http://sqlite.1065341.n5.nabble.com/Example-Showing-ACTUAL-Use-of-sqlite3-auto-extension-td27657.html\" rel=\"nofollow\">http://sqlite.1065341.n5.nabble.com/Example-Showing-ACTUAL-Use-of-sqlite3-auto-extension-td27657.html</a> and renamed <code>int sqlite3_extension_init()</code> into <code>int sqlite3_extension_functions_init()</code></li>\n</ul>\n\n<p>Other sources I used:</p>\n\n<ul>\n<li>hxxp://books.google.de/books?vid=ISBN1449399649&amp;q=209</li>\n<li>hxxps://www.sqlite.org/loadext.html</li>\n<li>hxxp://stackoverflow.com/a/1295765</li>\n</ul>\n\n<p>Maybe I'm blind, but the function prototype is given in test.cc and the function definition in extension_functions.c. Has anybody an idea what is wrong with this code example? Thank you in advance for your help.(I'm sorry for the hxxp:// links, but I'm not allowed to post more than two links)</p>\n"}, {"tags": ["c", "pointers", "if-statement", "compare"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1425476816, "post_id": 28856021, "comment_id": 45978102, "body": "It works perfectly as I expected, what do you mean with <b>memory error</b>?"}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425476852, "post_id": 28856021, "comment_id": 45978130, "body": "In microcontroller, it throws HardFaultException."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425476896, "post_id": 28856021, "comment_id": 45978164, "body": "Are you aware that teh values in <code>buffer</code> are octal? It doesn&#39;t matter to the problem but just to be sure."}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425476926, "post_id": 28856021, "comment_id": 45978190, "body": "Yes, these are hexadecimal characters."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1425476954, "post_id": 28856021, "comment_id": 45978208, "body": "They are not, they are octal, it&#39;s not the same, <code>0x03</code> is hex."}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425476974, "post_id": 28856021, "comment_id": 45978222, "body": "Ok, I fixed. Sorry for the inconvenience."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1425477347, "post_id": 28856021, "comment_id": 45978494, "body": "the problem is somewhere else, if you want to get help post the rest of the code, the problem is not reproducible with the code above, something elese might by causing the problem to the code above."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1425478004, "post_id": 28856021, "comment_id": 45978958, "body": "Could it be an alignment problem? Maybe your hardware requires <code>int</code>s to sit at 4-byte borders, which <code>comp2</code> currently does not. (Your test at the end should therefore not be true.)"}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "edited": false, "score": 0, "creation_date": 1425478072, "post_id": 28856021, "comment_id": 45979009, "body": "Program counter does not increment after if statement. HardFaultException is called."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1425478438, "post_id": 28856021, "comment_id": 45979276, "body": "@blabla Did you mean <code>&amp;buffer[4]</code> ? Here it looks like you want to compare 3 and 2+1, but <code>&amp;buffer[3]</code> points on 0x00."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1425478922, "post_id": 28856021, "comment_id": 45979604, "body": "It does sound like an alignment problem indeed. Which MCU is this?"}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "edited": false, "score": 0, "creation_date": 1425479074, "post_id": 28856021, "comment_id": 45979679, "body": "Yes, I meant that. I fixed the error. Thanks."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1425479405, "post_id": 28856021, "comment_id": 45979897, "body": "Try to replace <code>(uint32_t*)</code> by <code>(__packed uint32_t *)</code>. It should fix the problem if alignment is the cause."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1425479784, "post_id": 28856021, "comment_id": 45980171, "body": "@blabla The simplified code does not reproduce the error."}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1425479836, "post_id": 28856021, "comment_id": 45980210, "body": "@Lundin, I also call the simplified method in MCU and I got the same error. Maybe it&#39;s specific for MCU?"}, {"owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1425480245, "post_id": 28856021, "comment_id": 45980473, "body": "@ElderBug it worked as you advised. What is that for? If you anser the question, I&#39;ll accept your answer. Otherwise your advise would be in comments."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1425481204, "post_id": 28856021, "comment_id": 45981185, "body": "Again, which MCU are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": true, "score": 1, "last_activity_date": 1425481250, "creation_date": 1425481250, "answer_id": 28857685, "question_id": 28856021, "link": "https://stackoverflow.com/questions/28856021/comparing-pointer-values-in-if-statement/28857685#28857685", "title": "Comparing pointer values in if statement", "body": "<p>The problem may come from the alignment of the buffer. Since your buffer is declared as <code>uint8_t[]</code>, the compiler won't necessarily align it.</p>\n\n<p>This usually isn't a problem (but often induce a small performance penalty), but some architecture refuse to access unaligned pointers. On these architecture, the unaligned access must be done in software.</p>\n\n<p>Here I assume your HardFaultException comes from an ARM, and <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka15414.html\" rel=\"nofollow\">this link</a> suggests to use the <code>__packed</code> attribute to let the compiler know that the pointer might be unaligned. The compiler will then use a software unaligned access.</p>\n\n<p>It should be noted that modern ARM don't have this problem anymore. The link talk about \"Older ARM processors\", and I didn't notice this problem on modern ARM.</p>\n"}], "owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1425497359, "accepted_answer_id": 28857685, "answer_count": 1, "score": 0, "last_activity_date": 1425481250, "creation_date": 1425476602, "last_edit_date": 1425479045, "question_id": 28856021, "link": "https://stackoverflow.com/questions/28856021/comparing-pointer-values-in-if-statement", "closed_reason": "Not suitable for this site", "title": "Comparing pointer values in if statement", "body": "<p>4Why this block throws memory error:</p>\n\n<pre><code>uint8_t buffer[ 8 ] = { 0x03, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00 };\n\nif ( *((uint32_t *)(&amp;buffer[ 0 ])) == *((uint32_t *)(&amp;buffer[ 4 ])) + 1 )\n    return TRUE;\n</code></pre>\n\n<p>While this block works:</p>\n\n<pre><code>uint8_t buffer[ 8 ] = { 0x03, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00 };\nuint32_t comp1 = *((uint32_t *)(&amp;buffer[ 0 ]));\nuint32_t comp2 = *((uint32_t *)(&amp;buffer[ 4 ]));\n\nif ( comp1 == comp2  + 1 )\n    return TRUE;\n</code></pre>\n"}, {"tags": ["c", "alignment", "padding", "abi"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1425477188, "post_id": 28855711, "comment_id": 45978364, "body": "It will fail if the member is a bit-field (UB) and probably also if the struct/union contains bit-fields. But it will probably not be an issue, since no sane person uses bit-fields when writing portable code (or anywhere else for that matter)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1425477243, "post_id": 28855711, "comment_id": 45978415, "body": "@Lundin Yeah, ok, point taken. I don&#39;t operate on bitfields. Disregard them for this question, please."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425482325, "post_id": 28857702, "comment_id": 45981965, "body": "I&#39;m sure that you can break my code with application of <code>#pragma pack</code> and friends. I assume that the structure does not use weird constructs like bitfields or packed structure members. Do you know any implementations where my assumptions are incorrect in general? I understand that they are probably not backed by the C standard."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425482791, "post_id": 28857702, "comment_id": 45982312, "body": "Well, you <i>asked</i> whether they are backed by the standard.  In any case, I&#39;m not talking about <code>#pragma pack</code> or anything else that involves modifying your code.  Your code breaks with GCC if the <code>-fpack-struct</code> compiler option is used, and many compilers offer such an option.  I have no personal knowledge of an implementation for which your code is broken by default, but I bet I could find one if I looked hard enough."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425483006, "post_id": 28857702, "comment_id": 45982448, "body": "Code generated with <code>-fpack-struct</code> is incompatible to any other code because it destroys ABI compatibility. The question about C99 was only one out of three and one of the lesser interesting. I&#39;m actually more interested in whether there are any existing platforms that pad members in a structure by a different way."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425483552, "post_id": 28857702, "comment_id": 45982825, "body": "Also answered: there are <i>no</i> &quot;better&quot; assumptions you can make about alignment, in that the standard does not support any assumptions at all about that topic.  And: there are <i>many</i> platforms on which your code breaks under platform-specific circumstances.  Whether those particular circumstances include any you care about is a separate question, which you have not given us sufficient information to address."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425483950, "post_id": 28857702, "comment_id": 45983088, "body": "Can you give me some examples for such platforms so I can look into this?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425484804, "post_id": 28857702, "comment_id": 45983720, "body": "I did.  GCC with <code>-fpack-struct</code>.  There&#39;s also ICC with <code>-fpack-struct</code>.  Also CL.EXE with <code>&#47;Zp</code>.  I&#39;d be inclined to suspect that some implementations for embedded microcontrollers pack <code>struct</code>s by default, but I have no specific example."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425498002, "post_id": 28857702, "comment_id": 45991897, "body": "If you compile with <code>-fpack-struct</code>, my assumptions probably still apply, too, as <code>structalign</code> macro would return 1 for every type, so if you compile with that option would not break my code, although this is a really stupid idea. Notice that on microcontrollers specifically you usually have to use padding as they often can&#39;t do misaligned memory access. You can reduce the amount of memory wasted by padding to a negligible amount anyway by rearranging structure members."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425501773, "post_id": 28857702, "comment_id": 45994099, "body": "If you compile with <code>-fpack-struct</code> or an equivalent on any platform for which the natural alignment of any type is other than 1, then your assumption (1) certainly fails.  You are right, though that your assumptions (2) and (3) hold in that particular case.  Whether that presents a problem for your particular usage on any platform you care about is a different question.  If it <i>were</i> a problem, then I&#39;m sure that users who were bitten by it would fail to see the humor in being called &quot;stupid&quot; for compiling with options your code did not anticipate."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425502128, "post_id": 28857702, "comment_id": 45994277, "body": "The option <code>-fpack-struct</code> breaks ABI compatibility. Unless your code is completely self-contained in that it doesn&#39;t use any library functions at all, it won&#39;t work. Nobody with a sane mind would compile code like that and it&#39;s not my jobs to support people who do stupid things. Do you know of any platforms where my assumptions break where the breakage is not caused by people breaking the ABI with flags like that?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425503286, "post_id": 28857702, "comment_id": 45994965, "body": "<code>-fpack-struct</code> breaks ABI compatibility only with respect to <code>struct</code> definitions actually processed by the compiler and used by the program.  Its use does not inherently preclude calling library functions.  People <i>do</i> compile code with that option -- that&#39;s why some version of it is provided by so many compilers.  I cannot say, however, whether you are required to support such people."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425503569, "post_id": 28857702, "comment_id": 45995140, "body": "In any event, I cannot specifically name a compiler that, when run with default options, would violate your assumptions.  It remains the case, however, that they are <i>assumptions</i> that you cannot prove valid for any given compiler and set of options without testing.  If that is the course you intend to take then yours is a tool I do not wish to use."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1425504788, "post_id": 28857702, "comment_id": 45995819, "body": "Thank you for the notice. You are not required to use my tool. You will be amazed at how much even more unportable code you can find!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1425481980, "last_edit_date": 1425481980, "creation_date": 1425481304, "answer_id": 28857702, "question_id": 28855711, "link": "https://stackoverflow.com/questions/28855711/which-implementations-of-the-c-programming-language-violate-the-following-assump/28857702#28857702", "title": "Which implementations of the C programming language violate the following assumptions?", "body": "<p>Alignment is not addressed by C99.  It does not support <em>any</em> of your assumptions.  Implementations are allowed free reign to insert padding -- or not -- in <code>struct</code> representations between members and/or at the end, however they see fit.  The standard gives implementations enough freedom to serve the alignment requirements of their target environments, but it provides no basis to support <em>any</em> behavior intended to probe alignment requirements.  In particular, their is <em>no</em> inherent relationship between the offset of a <code>struct</code> member and the optimal alignment of objects of its type.</p>\n\n<p>Although your code probably does correctly determine alignment when used with many implementations, under many conditions, that code, or anything based on the same concept, would surely fail when compiled in a mode that caused all <code>struct</code> representations to be packed without padding.  Such a mode is provided as an option by many compilers and could in principle be the default mode for some compilers.</p>\n\n<p>Since anything you might do to evaluate data type alignment involves implementation-defined and/or unspecified behavior, I would recommend that you separate such mechanisms from the main code, and instead put them in your build system (supposing that you are using an adaptive multi-platform build system such as CMake or the GNU Autotools).</p>\n"}], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 28857702, "answer_count": 1, "score": 3, "last_activity_date": 1425481980, "creation_date": 1425475772, "question_id": 28855711, "link": "https://stackoverflow.com/questions/28855711/which-implementations-of-the-c-programming-language-violate-the-following-assump", "title": "Which implementations of the C programming language violate the following assumptions?", "body": "<p>I'm trying to write a portable function that marshals binary formats into structures according to a formatting string not entirely unlike <code>scanf</code>. To do this, I make a couple of assumptions about the platform my code is running on:</p>\n\n<ol>\n<li><p>This <code>structalign</code> macro portably finds the alignment of a scalar type.</p>\n\n<pre><code>#define structalign(t) offsetof (struct{char pad; t var;}, var)\n</code></pre></li>\n<li><p>In a structure, the address of a member <code>t</code> is the next free address which is a multiple of <code>structalign(t)</code>.</p></li>\n<li><p>The value of <code>structalign(t)</code> where <code>t</code> is a structure or union or array type is the maximum of <code>structalign(m)</code> where <code>m</code> is the type of a member of <code>t</code>.</p></li>\n</ol>\n\n<p>On which platforms do these assumptions fail? Is any of them backed by the C standard, specifically C99? Are there better assumptions I can make?</p>\n"}, {"tags": ["java", "c++", "c", "jna"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 5, "creation_date": 1425475571, "post_id": 28855626, "comment_id": 45977267, "body": "It is a pointer to a pointer to a pointer to <code>const char</code>. Unfortunately it can be interpreted in many ways."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1425475605, "post_id": 28855626, "comment_id": 45977297, "body": "I would look at as a 2d array of c-style strings."}, {"owner": {"reputation": 4658, "user_id": 1948895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a09b7431c12f6795feb9833ba4a6f35?s=128&d=identicon&r=PG", "display_name": "Floris Velleman", "link": "https://stackoverflow.com/users/1948895/floris-velleman"}, "edited": false, "score": 6, "creation_date": 1425475613, "post_id": 28855626, "comment_id": 45977299, "body": "You might just have seen the work of a <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three star programmer</a>. It is probably a list of a list of strings."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 3, "creation_date": 1425475631, "post_id": 28855626, "comment_id": 45977312, "body": "It means someone can&#39;t be bothered to abstract data types properly. You&#39;ll have to read the documentation (or the code that uses it) to figure out why there&#39;s so much indirection."}, {"owner": {"reputation": 2519, "user_id": 2473749, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/483f104cf90ed90a6e67b54b7d957e07?s=128&d=identicon&r=PG", "display_name": "SQL.injection", "link": "https://stackoverflow.com/users/2473749/sql-injection"}, "edited": false, "score": 0, "creation_date": 1425475657, "post_id": 28855626, "comment_id": 45977331, "body": "the closest thing you can get in java is a static [][] char variableName;"}, {"owner": {"reputation": 4316, "user_id": 1742659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BpSsV.jpg?s=128&g=1", "display_name": "dfranca", "link": "https://stackoverflow.com/users/1742659/dfranca"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1425475664, "post_id": 28855626, "comment_id": 45977336, "body": "as @juanchopanza says, it can be a 3-dimensional matrix, can be an array of arrays of strings, etc."}, {"owner": {"reputation": 185, "user_id": 3779674, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8b44141215f2134f4516f8adbbc006a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3779674", "link": "https://stackoverflow.com/users/3779674/user3779674"}, "edited": false, "score": 0, "creation_date": 1425478218, "post_id": 28855626, "comment_id": 45979116, "body": "Unfortunately, the documentation is not very useful. There are a lot of things missing. Very basic API description. It&#39;s some kind of Japanese money counting device. I was told that it&#39;s actually considered good practice in the field for the manufacturer to write as little code as possible for the device because the varied implementations that banks will have to pay for is less of a security risk than making everything simple and easy to use."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1425476276, "post_id": 28855788, "comment_id": 45977737, "body": "But a string array is not a double pointer. It is an array of strings."}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1425476329, "post_id": 28855788, "comment_id": 45977769, "body": "you can interpret it as a double pointer, and you can also use a double pointer as a string array, it depends how you wanna program."}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1425476448, "post_id": 28855788, "comment_id": 45977850, "body": "yes they are not pointers, I edited it. I said it can be interpreted as a double pointer, in C arrays and pointers are closely related, but yes an array is not a pointer. That is not what I am arguing, he asks if it can be INTERPRETED as a pointer to an array of strings, so the answer is yes."}], "tags": [], "owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "is_accepted": true, "score": 5, "last_activity_date": 1425476362, "last_edit_date": 1425476362, "creation_date": 1425475981, "answer_id": 28855788, "question_id": 28855626, "link": "https://stackoverflow.com/questions/28855626/what-does-const-char-mean-and-how-does-it-translate-from-c-to-java/28855788#28855788", "title": "What does const char*** mean and how does it translate from C to Java?", "body": "<p>if you know the concept of pointers,</p>\n\n<p>const char*** means it is a triple pointer, so you can think of it this way:</p>\n\n<pre><code>const char***---&gt;const char**---&gt;const char*---&gt;const char\n</code></pre>\n\n<p>So yes it can be interpreted as a pointer to a string array, because a string array can be interpreted as a double pointer.</p>\n\n<p>let's say <code>a</code> is an array of strings:</p>\n\n<pre><code>const char *a[15];\n</code></pre>\n\n<p>In this case <code>**a</code> would give you the first char of the first string in a.</p>\n\n<p>you can declare:</p>\n\n<pre><code>const char ***b = &amp;a;\n</code></pre>\n\n<p>in this case <code>***b</code> would give you the first char of the first string in a.</p>\n"}, {"tags": [], "owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "is_accepted": false, "score": 3, "last_activity_date": 1425484193, "creation_date": 1425484193, "answer_id": 28858809, "question_id": 28855626, "link": "https://stackoverflow.com/questions/28855626/what-does-const-char-mean-and-how-does-it-translate-from-c-to-java/28858809#28858809", "title": "What does const char*** mean and how does it translate from C to Java?", "body": "<p>The most <em>likely</em> interpretation is that you are expected to pass in the address of a pointer, and on return, the pointer will be an array of C strings.</p>\n\n<p>That's not the only possible interpretation, but probably the most likely one.  This is especially true if the native signature also asks for a pointer to integer into which it will write the length of the returned array.</p>\n\n<p>To use this from JNA:</p>\n\n<pre><code>PointerByReference pref = new PointerByReference();\nIntegerByReference iref = new IntegerByReference();\nnativeLib.call(pref, iref);\nString[] strings = pref.getValue().getStringArray(0, iref.getValue());\n</code></pre>\n\n<p>If no length is specified, JNA will look for a NULL value marking the end of the string array.</p>\n"}], "owner": {"reputation": 185, "user_id": 3779674, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8b44141215f2134f4516f8adbbc006a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3779674", "link": "https://stackoverflow.com/users/3779674/user3779674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 1, "accepted_answer_id": 28855788, "answer_count": 2, "score": 1, "last_activity_date": 1425484193, "creation_date": 1425475443, "last_edit_date": 1425477617, "question_id": 28855626, "link": "https://stackoverflow.com/questions/28855626/what-does-const-char-mean-and-how-does-it-translate-from-c-to-java", "title": "What does const char*** mean and how does it translate from C to Java?", "body": "<p>I am using <strong>JNA</strong> to write a Java interface for a <strong>C++</strong> written DLL for control of a small device.</p>\n\n<p>While translating data types I came across </p>\n\n<pre><code>const char*** someVariable\n</code></pre>\n\n<p>Can someone please explain to me what this means and how can it be recreated in Java?</p>\n\n<p>I have read up on pointers and I am using the JNA documentation to map C++ types  to Java but I cannot find a reference to a type with three asterisks at the end.</p>\n\n<p>Should this be interpreted as a pointer to a String array?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1425475530, "post_id": 28855585, "comment_id": 45977242, "body": "Why would this work?  You need to pass the array to the function and have the function return the largest element.  Here is a tutorial you can use: <a href=\"http://www.dreamincode.net/forums/topic/206002-finding-min-and-max-numbers-in-an-array/\" rel=\"nofollow noreferrer\">dreamincode.net/forums/topic/&hellip;</a>"}, {"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1425475704, "post_id": 28855585, "comment_id": 45977370, "body": "This is tagged <code>C++</code> not <code>C</code>. If this is indeed <code>C++</code> you should consider using <code>&lt;iostream&gt;</code> instead of <code>&lt;stdio.h&gt;</code> and <code>std::vector&lt;int&gt;</code> instead of <code>int[]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1425475622, "creation_date": 1425475622, "answer_id": 28855668, "question_id": 28855585, "link": "https://stackoverflow.com/questions/28855585/find-the-highest-number-using-another-function/28855668#28855668", "title": "Find the highest number using another function", "body": "<p><code>int high (int n1);</code> should be</p>\n\n<pre><code>int high (int *arr, int sz);  /* You need to pass an array */\n</code></pre>\n\n<p><code>p(\"Highest Number: %d\",high(num[i]));</code> should be</p>\n\n<pre><code>p(\"Highest Number: %d\",high(num, 10));  /* Passing array now, not one element */\n</code></pre>\n\n<p><code>int high()</code> should be re-written as:</p>\n\n<pre><code>int high (int *arr, int sz)\n{\n int l, mx = INT_MIN;\n for (l=0; l&lt;sz; l++)\n {\n  if (mx &lt; arr[l])\n  {\n    /* Left as an excercise */\n  }\n }\n return mx;\n}\n</code></pre>\n\n<hr>\n\n<p>As this is tagged <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged 'c++'\" rel=\"tag\">c++</a>, I would suggest using <a href=\"http://en.cppreference.com/w/cpp/algorithm/max_element\" rel=\"nofollow\">available C++ to find max in a range</a>:</p>\n\n<pre><code>const int max = *std::max_element(&amp;num[0], &amp;num[10]); // #include &lt;algorithm&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4632250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sA0TmY1rS4Q/AAAAAAAAAAI/AAAAAAAAACA/GPX9zil9BlQ/photo.jpg?sz=128", "display_name": "Aaron Tumbokon", "link": "https://stackoverflow.com/users/4632250/aaron-tumbokon"}, "edited": false, "score": 0, "creation_date": 1425613968, "post_id": 28856838, "comment_id": 46044894, "body": "I gotta admit that it was my mistake to tag c++... I know for sure that it was definitely c.. well anyways Thanks again for your help.."}], "tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1425478893, "creation_date": 1425478893, "answer_id": 28856838, "question_id": 28855585, "link": "https://stackoverflow.com/questions/28855585/find-the-highest-number-using-another-function/28856838#28856838", "title": "Find the highest number using another function", "body": "<p>Well, I don't know if you still need an answer, but I corrected your code. Here are the mistakes I found</p>\n\n<pre><code>int high (int n1)\n{\n int l;\n for (l=0; l&lt;n1; l++)\n {\n  if (n1 &gt; l)\n  return n1;\n }\n}\n</code></pre>\n\n<p>In this for-loop, there is the condition <code>l&lt;n1</code> and inside the for loop you have the statement <code>if(n1 &gt; l)</code> which will never be attained because of <code>l&lt;n1</code>. You said you were getting 37 each time, but I was getting 10 instead. This shows it was undefined behavior because no real value was returned. ( This code part really didn't mean any sense either as this function doesn't even try to find the largest number ).</p>\n\n<p>Another issue I found is you have used <code>getch()</code> without including <code>&lt;conio.h&gt;</code> ( Also pointing out that <code>&lt;conio.h&gt;</code> is not standard in C++ )</p>\n\n<p>Well, even though this question is tagged C++, since the code is completely c, I have made a fixed code in c. I've removed <code>getch()</code> in the code. So here is the code</p>\n\n<pre><code>#include&lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define p printf\n#define s scanf\nint high (int *n1,int lar);       // now I have used *n1 to get the address of the array.\nint main(int argc, char *argv[])\n{\n  int i, num[10],lar=INT_MIN;   // the variable lar is given the minimum value that can be held by an int\n  p(\"Input 10 numbers\\n\");\n  for (i=0; i&lt;10; i++)\n   {\n    p(\"Enter Number: \");\n    s(\"%d\",&amp;num[i]);\n   }\n  p(\"Highest Number: %d\",high(num,lar));  // sending the entire array to the function by sending its address\n\n}\nint high (int *n1,int lar)\n{\n int l;\n for (l=0; l&lt;10; l++)  // since the size you have taken for your array is 10, I have used 10 here. But if you don't know the size beforehand, pass the size as an argument to the function\n {\n  if (n1[l] &gt;lar )    // Well, this is the simple part\n   lar=n1[l];         // Simply assigning the largest value to lar\n }\n return lar;          // Finally returning the value lar.\n}\n</code></pre>\n\n<p>Well, hope this helps you.</p>\n"}], "owner": {"reputation": 11, "user_id": 4632250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sA0TmY1rS4Q/AAAAAAAAAAI/AAAAAAAAACA/GPX9zil9BlQ/photo.jpg?sz=128", "display_name": "Aaron Tumbokon", "link": "https://stackoverflow.com/users/4632250/aaron-tumbokon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1476151852, "creation_date": 1425475336, "last_edit_date": 1476151852, "question_id": 28855585, "link": "https://stackoverflow.com/questions/28855585/find-the-highest-number-using-another-function", "title": "Find the highest number using another function", "body": "<p>could everyone please help me what is wrong with my code or what is missing from my code...\nWe have this activity where we have to find the highest number using another function..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define p printf\n#define s scanf\nint high (int n1);\nint main(int argc, char *argv[])\n{\n  int i, num[10];\n  p(\"Input 10 numbers\\n\");\n  for (i=0; i&lt;10; i++)\n   {\n    p(\"Enter Number: \");\n    s(\"%d\",&amp;num[i]);\n   }\n  p(\"Highest Number: %d\",high(num[i]));\n  getch();\n}\n\nint high (int n1)\n{\n int l;\n for (l=0; l&lt;n1; l++)\n {\n  if (n1 &gt; l)\n  return n1;\n }\n}\n</code></pre>\n\n<p>When I input any number I always got 37..</p>\n"}, {"tags": ["c", "opengl", "graphics", "3d"], "comments": [{"owner": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1425478013, "post_id": 28855144, "comment_id": 45978968, "body": "So you have an image but need to know how to export it to a bmp? Could you explain what you&#39;ve tried so far?"}, {"owner": {"reputation": 1, "user_id": 4632194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97343ef1528d9fad55f601e0c35d4f05?s=128&d=identicon&r=PG&f=1", "display_name": "ionas_", "link": "https://stackoverflow.com/users/4632194/ionas"}, "reply_to_user": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1425479583, "post_id": 28855144, "comment_id": 45980010, "body": "i have imported a mesh and created: 1.texture with the parameterized geometry  2. texture with the normals  at this point i am confused of how to handle them. They are stored as OpenGL textures."}, {"owner": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1425480438, "post_id": 28855144, "comment_id": 45980604, "body": "Better to edit your post to add code and clarify your question rather than as comments."}, {"owner": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1425480509, "post_id": 28855144, "comment_id": 45980644, "body": "So you&#39;re just after a way to <a href=\"http://stackoverflow.com/questions/371665/opengl-into-png\">get and save an opengl texture as an image</a>?"}, {"owner": {"reputation": 1, "user_id": 4632194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97343ef1528d9fad55f601e0c35d4f05?s=128&d=identicon&r=PG&f=1", "display_name": "ionas_", "link": "https://stackoverflow.com/users/4632194/ionas"}, "reply_to_user": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1425480927, "post_id": 28855144, "comment_id": 45980973, "body": "As i see there are two ways either rendering the scene and using  FBOs.  Thanks a lot."}, {"owner": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1425481454, "post_id": 28855144, "comment_id": 45981354, "body": "I have no experience with OpenGI, but if it copies the image data out of OpenGL, you&#39;ll either have to copy it back and use <code>glGetTexImage</code> or find some OpenGI interface to get it directly. Actually it <a href=\"http://opengi.sourceforge.net/doc/group__image.html\" rel=\"nofollow noreferrer\">looks like</a> no copy takes place so just grab it from GL. From there I highly recommend using an image library such as <a href=\"https://www.opengl.org/wiki/Image_Libraries\" rel=\"nofollow noreferrer\">libpng, SOIL, FreeImage</a> as BMP is just awful."}, {"owner": {"reputation": 1, "user_id": 4632194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97343ef1528d9fad55f601e0c35d4f05?s=128&d=identicon&r=PG&f=1", "display_name": "ionas_", "link": "https://stackoverflow.com/users/4632194/ionas"}, "reply_to_user": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1425494747, "post_id": 28855144, "comment_id": 45989990, "body": "bmp is not obligatory! i have implemented pgm (a file format that is readable from matlab). Anyway i hadn&#39;t any idea with openGL and openGI and now you showed the way. :-)"}], "owner": {"reputation": 1, "user_id": 4632194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97343ef1528d9fad55f601e0c35d4f05?s=128&d=identicon&r=PG&f=1", "display_name": "ionas_", "link": "https://stackoverflow.com/users/4632194/ionas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1425480931, "creation_date": 1425473905, "last_edit_date": 1425480931, "question_id": 28855144, "link": "https://stackoverflow.com/questions/28855144/geometry-image-creation-and-general-handling", "title": "Geometry Image Creation and general handling", "body": "<p>I would like some entry level information about the OpenGI library which converts a 3D mesh to a 2D texture map. </p>\n\n<p><a href=\"http://opengi.sourceforge.net/doc/index.html\" rel=\"nofollow\">http://opengi.sourceforge.net/doc/index.html</a></p>\n\n<p>At this point i have implemented an example on a specific mesh and it seems to work perfectly. I would like to process this image further and i need to export it as a bmp file.</p>\n\n<p>I have imported a mesh and created:</p>\n\n<ol>\n<li>texture with the parameterized geometry</li>\n<li>texture with the normals</li>\n</ol>\n\n<p>At this point i am confused how to handle them. They are stored as OpenGL textures.</p>\n\n<p>Here's the source code:</p>\n\n<pre><code>glBindTexture(GL_TEXTURE_2D, uiTex[0]); \nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);  \nglTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, res, res, 0, GL_RGBA, GL_FLOAT, NULL);\ngiGenImages(3, gim); \ngiBindImage(gim[0]); \ngiImageGLTextureData(res, res, 4, GL_FLOAT, uiTex[0]);\ngiAttribImage(0, gim[0]); \ngiAttribSamplerParameteri(0, GI_SAMPLING_MODE, GI_SAMPLE_DEFAULT); \ngiSample();\n</code></pre>\n\n<p>How can I export the texture?</p>\n"}, {"tags": ["c", "http", "post", "get", "httpclient"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425474025, "post_id": 28855119, "comment_id": 45976217, "body": "1. Do you know anything about sockets? 2. Why don&#39;t you use a known library like <a href=\"http://curl.haxx.se/libcurl/\" rel=\"nofollow noreferrer\"><code>libcurl</code></a>?"}, {"owner": {"reputation": 733, "user_id": 2733756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/14548ceb012f06d5ba132bbc20c57f83?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Retimo", "link": "https://stackoverflow.com/users/2733756/fernando-retimo"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425474200, "post_id": 28855119, "comment_id": 45976325, "body": "I know sockets from higher level languages. I tried libcurl I just got really confused. A little code snippet would be appriciated!"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425474387, "post_id": 28855119, "comment_id": 45976458, "body": "I am sorry @FernandoRetimo, this is not the place for that, but the link I gave you has a lot of examples, and sending get/post requests is very easy using libcurl no matter what programming language. Although I could do it if you can pay me."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425474556, "post_id": 28855119, "comment_id": 45976576, "body": "Also why is it a requirement that you do it on Windows? is it that you want to, or was it required from you?"}, {"owner": {"reputation": 733, "user_id": 2733756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/14548ceb012f06d5ba132bbc20c57f83?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Retimo", "link": "https://stackoverflow.com/users/2733756/fernando-retimo"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1425474659, "post_id": 28855119, "comment_id": 45976642, "body": "iharob - The requirement for windows it&#39;s because I saw on many places using the library uni* which are for UNIX Systems so I though I had to be specific."}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "edited": false, "score": 0, "creation_date": 1425474700, "post_id": 28855334, "comment_id": 45976661, "body": "I wonder iharob why the downvote, this guide really helped me begin socket programming in C, so why spend 125 rep to downvote this?"}, {"owner": {"reputation": 733, "user_id": 2733756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/14548ceb012f06d5ba132bbc20c57f83?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Retimo", "link": "https://stackoverflow.com/users/2733756/fernando-retimo"}, "edited": false, "score": 0, "creation_date": 1425474864, "post_id": 28855334, "comment_id": 45976789, "body": "Thanks! I&#39;ll check this guide out."}, {"owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "reply_to_user": {"reputation": 733, "user_id": 2733756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/14548ceb012f06d5ba132bbc20c57f83?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Retimo", "link": "https://stackoverflow.com/users/2733756/fernando-retimo"}, "edited": false, "score": 0, "creation_date": 1425474973, "post_id": 28855334, "comment_id": 45976856, "body": "Fernando this guide works on any platform using gcc, so it should work for you."}], "tags": [], "owner": {"reputation": 211, "user_id": 4556715, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98eb6e8ee9d99d2854754088a7fa5315?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity", "link": "https://stackoverflow.com/users/4556715/gravity"}, "is_accepted": false, "score": 0, "last_activity_date": 1425474583, "last_edit_date": 1425474583, "creation_date": 1425474555, "answer_id": 28855334, "question_id": 28855119, "link": "https://stackoverflow.com/questions/28855119/light-weight-c-http-client-for-windows/28855334#28855334", "title": "Light Weight C HTTP Client for Windows", "body": "<p>Check out <a href=\"http://beej.us/guide/bgnet/output/html/multipage/index.html\" rel=\"nofollow\">Beej's Guide to Network Programming</a>, it is a nice guide for beginners in socket programming in C. If you are not a beginner you can just jump to the Client-Server section. There you can find examples on how to build clients and servers in C.</p>\n"}], "owner": {"reputation": 733, "user_id": 2733756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/14548ceb012f06d5ba132bbc20c57f83?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Retimo", "link": "https://stackoverflow.com/users/2733756/fernando-retimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425474583, "creation_date": 1425473832, "question_id": 28855119, "link": "https://stackoverflow.com/questions/28855119/light-weight-c-http-client-for-windows", "title": "Light Weight C HTTP Client for Windows", "body": "<p>I'm sort of new to C language. I came from higher level languages like python and C#. I need to write a small light weight HTTP client for windows which has two features: the first it's that it could eventually perform GET requests, read the content of the page (excluding the headers) and print the results.The second one is to POST the time of the current machine to the server.</p>\n\n<p>In my journey to complete this, I got really confused and currently I have really no idea how to do that.</p>\n\n<p>I'd appreciate your help :)\nThanks !</p>\n"}, {"tags": ["c", "linux", "signal-handling"], "owner": {"reputation": 11, "user_id": 4302983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f887cfa9dfdbbe29d112b40b2e1528d?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit", "link": "https://stackoverflow.com/users/4302983/sumit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425473394, "creation_date": 1425473394, "question_id": 28854970, "link": "https://stackoverflow.com/questions/28854970/i-have-a-handler-to-sigchld-signal-but-when-sigtimedwait-returns-success-handl", "title": "I have a handler to sigchld signal,but when sigtimedwait() returns success handler not called. Why?", "body": "<pre><code>int exe(int sec)\n{\nconst char *buf;\nint timeout_sec=sec;\nint i=0,j=0;\nsigset_t mask;\nsigset_t orig_mask;\nsigset_t pset;\nsiginfo_t siginfo;\nstruct timespec timeout;\npid_t pid;\nint fd,status=-1;\nint fl;\nsig_init();\nsigemptyset (&amp;mask);\nsigaddset (&amp;mask, SIGCHLD);\n\nif (sigprocmask(SIG_BLOCK, &amp;mask, &amp;orig_mask) &lt; 0) {\n    perror (\"sigprocmask\");\n    goto error;\n}\n\nif (( pid=fork())&lt;0)\n{\n    perror (\"fork\");\n    goto error;\n}\nelse if (pid == 0)\n{\n    printf(\"In child pid=%d\\n\",getpid());\n    if(execv(ptr[0],ptr)==-1)\n    {\n        printf(\"execv failed in %s: error: %s\\n\", __FUNCTION__, strerror(errno));\n        _exit(1);\n    }\n\n    printf(\"Exiting child\\n\");\n    _exit(0);\n\n}\nelse\n{\n    timeout.tv_sec = timeout_sec;\n    timeout.tv_nsec = 0;\n\ndo {\n         if ((ss=sigtimedwait(&amp;mask, &amp;siginfo, &amp;timeout)) &lt; 0) {\n\n            if (errno == EINTR) {\n                // Interrupted by a signal other than SIGCHLD.\n                printf(\"Continue\\n\");\n                continue;\n            }\n            else if (errno == EAGAIN) {\n               printf(\"%s %s failed in:%s KILLING\\n\",ptr[0],ptr[1],__FUNCTION__);\n                kill (pid, SIGKILL);\n            }\n            else {\n                perror (\"sigtimedwait\");\n                goto error;\n            }\n        }\n\n        break;\n} while (1);\nif (sigprocmask(SIG_SETMASK, &amp;orig_mask, NULL) &lt; 0) {\n        perror (\"sigprocmask\");\n        goto error;\n    }\n  sleep(10);\n\n  }\nreturn 0;\nerror:\nprintf(\"%s failed\\n\",__FUNCTION__);\nreturn -1;\n}\n</code></pre>\n\n<p>Here I am trying to block the SIGCHLD and the in child process executing execv, for SIGCHLD status I have a handler for it(not mentioned here in code) which is working fine when sigtimedwait() returning error but when sigtimedwait() success the handler is not called, and if I am using waitpid directly in parent instead of handler then in both of cases it is woking fine.\nPlease help me out. I just found one clue in man page of sigtimedwait i.e.  \"sigwaitinfo()  removes  the  delivered  signal from the calling process's list of pending signals and returns the signal number as its function result\"\nCurious to know the reason and too much in need.Thanks :)</p>\n"}, {"tags": ["c", "memory-alignment", "bit-fields"], "comments": [{"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 5, "creation_date": 1425470048, "post_id": 28853742, "comment_id": 45973707, "body": "Nope, it&#39;s optional; done for padding, in the hope that the compiler would make the size of the <code>struct</code> 2 octects long, which should be done by most compilers already."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1425470355, "post_id": 28853742, "comment_id": 45973912, "body": "<a href=\"http://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\" title=\"why isnt sizeof for a struct equal to the sum of sizeof of each member\">stackoverflow.com/questions/119123/&hellip;</a>"}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1425470401, "post_id": 28853742, "comment_id": 45973940, "body": "@legends2k Thank you. Really appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 3856, "user_id": 4188894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jj4yA.jpg?s=128&g=1", "display_name": "Gyapti Jain", "link": "https://stackoverflow.com/users/4188894/gyapti-jain"}, "is_accepted": false, "score": 5, "last_activity_date": 1425470296, "creation_date": 1425470296, "answer_id": 28853897, "question_id": 28853742, "link": "https://stackoverflow.com/questions/28853742/whats-the-purpose-of-unnamed-bit-field-at-the-end-of-structure/28853897#28853897", "title": "What&#39;s the purpose of unnamed bit field at the end of structure", "body": "<blockquote>\n  <p>What's the purpose of it? Is it necessary?</p>\n</blockquote>\n\n<p>It is used for padding. You can look at it as anonymous member which can not be referenced.</p>\n\n<p>It is optional and totally dependent on your layout requirement.</p>\n"}, {"tags": [], "owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "is_accepted": true, "score": 5, "last_activity_date": 1425470999, "creation_date": 1425470999, "answer_id": 28854156, "question_id": 28853742, "link": "https://stackoverflow.com/questions/28853742/whats-the-purpose-of-unnamed-bit-field-at-the-end-of-structure/28854156#28854156", "title": "What&#39;s the purpose of unnamed bit field at the end of structure", "body": "<blockquote>\n  <p>Is it necessary?</p>\n</blockquote>\n\n<p>Nope, it's optional.</p>\n\n<blockquote>\n  <p>What's the purpose of it?</p>\n</blockquote>\n\n<p>Here's what the standard says in \u00a79.6.2, C++11 (draft N3337, emphasis mine):</p>\n\n<blockquote>\n  <p>A declaration for a bit-field that omits the identifier declares an unnamed bit-field. Unnamed bit-fields are not members and cannot be initialized. <strong>[Note: An unnamed bit-field is useful for padding to conform to externally-imposed layouts. \u2014 end note ]</strong> As a special case, an unnamed bit-field with a width of zero specifies alignment of the next bit-field at an allocation unit boundary. Only when declaring an unnamed bit-field may the value of the constant-expression be equal to zero.</p>\n</blockquote>\n\n<p>So it's a hint to the compiler that summing up all the members of the <code>struct</code> leads to 2 octects and thus is done hoping the compiler would make the <code>struct</code> 2 octects long. However, as per the standard there's no such requirement. Here's the excerpt from the previous point, \u00a79.6.1:</p>\n\n<blockquote>\n  <p>extra bits are used as padding bits and do not participate in the value representation of the bit-field. Allocation of bit-fields within a class\n  object is implementation-defined. Alignment of bit-fields is implementation-defined. Bit-fields are packed into some addressable allocation unit.</p>\n</blockquote>\n\n<p>Hence the standard does not guarantee any further than this regarding the size or alignment of a <code>struct</code>/<code>class</code> using bit-fields.</p>\n"}], "owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2970, "favorite_count": 2, "accepted_answer_id": 28854156, "answer_count": 2, "score": 6, "last_activity_date": 1425475170, "creation_date": 1425469871, "last_edit_date": 1425475170, "question_id": 28853742, "link": "https://stackoverflow.com/questions/28853742/whats-the-purpose-of-unnamed-bit-field-at-the-end-of-structure", "title": "What&#39;s the purpose of unnamed bit field at the end of structure", "body": "<p>I am learning C. In <em>C Primer Plus</em>, I saw an bit field example as follows:</p>\n\n<pre><code>struct box_props {\n    bool opaque               : 1;\n    unsigned int fill_color   : 3;\n    unsigned int              : 4;\n    bool show_border          : 1;\n    unsigned int border_color : 3;\n    unsigned int border_style : 2;\n    unsigned int              : 2;\n};\n</code></pre>\n\n<p>I do understand the 4-bit unnamed bit field in the middle is used for letting the following bits start at a new byte. However, I don't understand why there is another unnamed bit field at the end of the structure. What's the purpose of it? Is it necessary?</p>\n"}, {"tags": ["c", "network-programming", "client", "server"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1425469384, "post_id": 28853439, "comment_id": 45973364, "body": "In case of failure let the client print the value of <code>errno</code>, this might help you to identify the root cause of the failure."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1425471702, "post_id": 28853439, "comment_id": 45974827, "body": "on server add <code>#include&lt;arpa&#47;inet.h&gt;</code>"}, {"owner": {"reputation": 1326, "user_id": 2053269, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tAccL.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2053269/anshul"}, "edited": false, "score": 0, "creation_date": 1425474151, "post_id": 28853439, "comment_id": 45976291, "body": "In client.c file the arguments to connect(c,...) function is wrong. You should use socketc instead of c"}, {"owner": {"reputation": 87, "user_id": 3671805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000593786143/picture?type=large", "display_name": "user3671805", "link": "https://stackoverflow.com/users/3671805/user3671805"}, "edited": false, "score": 0, "creation_date": 1425477414, "post_id": 28853439, "comment_id": 45978541, "body": "After editing i get &quot;Segmentation fauld&quot;...The Server does not respond that a client is now connected. I can&#39;t find what that means"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1425490747, "post_id": 28853439, "comment_id": 45987726, "body": "<code>int l;</code> should be <code>socklen_t l;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1202, "user_id": 928492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdJzp.jpg?s=128&g=1", "display_name": "pragnesh", "link": "https://stackoverflow.com/users/928492/pragnesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1425470505, "creation_date": 1425470505, "answer_id": 28853972, "question_id": 28853439, "link": "https://stackoverflow.com/questions/28853439/connect-a-client-to-a-server/28853972#28853972", "title": "Connect a client to a server?", "body": "<p>You are giving wrong socket to connect function.</p>\n\n<p>Replace</p>\n\n<blockquote>\n  <p>connect(c, (struct sockaddr *) &amp; server, sizeof(struct sockaddr_in));</p>\n</blockquote>\n\n<p>with</p>\n\n<blockquote>\n  <p>connect(<strong>socketc</strong> , (struct sockaddr *) &amp; server, sizeof(struct sockaddr_in));</p>\n</blockquote>\n"}], "owner": {"reputation": 87, "user_id": 3671805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000593786143/picture?type=large", "display_name": "user3671805", "link": "https://stackoverflow.com/users/3671805/user3671805"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425470505, "creation_date": 1425468979, "question_id": 28853439, "link": "https://stackoverflow.com/questions/28853439/connect-a-client-to-a-server", "title": "Connect a client to a server?", "body": "<p>I have a simple question for you. I'm trying to make a simple client-server program. I want to connect the client to the server but I get the following error: Can't connect to the server. I'm new with this and this is why I can;t figure out what the problem is. Please give me some hints. Here is my client/server code:</p>\n\n<p>Client:</p>\n\n<pre><code>#include&lt;sys/socket.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdint.h&gt;\n\nint main(){\n    int socketc;\n    int connectnr;\n    int c;\n    struct sockaddr_in server;\n    char buffer[256];\n\n    socketc = socket(PF_INET, SOCK_STREAM, 0);\n    if(socketc &lt; 0){\n        fprintf(stderr, \"Error: Can't create client socket.\\n\");\n        return 1;\n    }\n\n    memset(&amp;server, 0, sizeof(server));\n    server.sin_family = AF_INET;\n    server.sin_port = htons(4321);\n    server.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n\n    connectnr = connect(c, (struct sockaddr *) &amp; server, sizeof(struct    sockaddr_in));\n    if(connectnr &lt; 0){\n        printf(\"connectnr %d: \\n\", connectnr);\n        fprintf(stderr, \"Error: Can't connect to the server.\\n\");\n        return 1;\n    }\n\n    close(c);\n}\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>#include&lt;sys/socket.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdint.h&gt;\n#include&lt;signal.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;stdlib.h&gt;\n\nint c;\n\nint main(){\n    int connsocket;\n    int bindcod;\n    int l;\n    struct sockaddr_in client, server;\n\nconnsocket = socket(PF_INET, SOCK_STREAM, 0);\nif(connsocket &lt; 0){\n    fprintf(stderr, \"Error: Can't create the server socket.\\n\");\n    return 1;\n}\n\nmemset(&amp;server, 0, sizeof(server));\nserver.sin_family = AF_INET;\nserver.sin_port = htons(4321);\nserver.sin_addr.s_addr = INADDR_ANY;\n\nbindcod = bind(connsocket, (struct sockaddr *) &amp;server, sizeof(struct sockaddr_in));\nif(bindcod &lt; 0){\n    fprintf(stderr, \"Error: Con't establish the bind. Port is already used.\\n\");\n    return 1;\n}\n\nlisten(connsocket, 5);\n\nwhile(1){\n    memset(&amp;client, 0, sizeof(client));\n    l = sizeof(client);\n    printf(\"Waiting for the client to connect,\\n\");\n    c = accept(connsocket, (struct sockaddr *) &amp;client, &amp;l);\n    printf(\"New client connected with address %s and port %d.\\n\", inet_ntoa(client.sin_addr), ntohs(client.sin_port));\n}\n}\n</code></pre>\n"}, {"tags": ["c", "matlab", "input"], "comments": [{"owner": {"reputation": 2918, "user_id": 2480034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76652731e9bc338e1f45a4a05a252c66?s=128&d=identicon&r=PG&f=1", "display_name": "tomaoq", "link": "https://stackoverflow.com/users/2480034/tomaoq"}, "edited": false, "score": 2, "creation_date": 1425467609, "post_id": 28852832, "comment_id": 45972405, "body": "You can output your values as a csv (comma separated values) file and then plot them in excel."}], "answers": [{"tags": [], "owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": false, "score": 2, "last_activity_date": 1425468975, "creation_date": 1425468975, "answer_id": 28853438, "question_id": 28852832, "link": "https://stackoverflow.com/questions/28852832/run-c-program-with-many-inputs-and-save-to-file/28853438#28853438", "title": "Run c program with many inputs and save to file?", "body": "<p>a bash loop will do the job for many time run</p>\n\n<pre><code>#!/bin/bash \nfor (( c=100; c&lt;=2000; c+=100 )) \ndo \n    echo \"Hello $\" \ndone \n</code></pre>\n\n<p>for your output just write it to a file</p>\n\n<pre><code>file = fopen(filename, \"w\");\nfor or while loop on your data\n    fprintf(file, \"%d;%d;%d\\n\", val1, val2, val3);\nfclose(file);\n</code></pre>\n"}], "owner": {"reputation": 3118, "user_id": 723597, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a8f66022a8ac924dd5fafd2b5d9ceff?s=128&d=identicon&r=PG&f=1", "display_name": "LoveMeow", "link": "https://stackoverflow.com/users/723597/lovemeow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425475382, "creation_date": 1425467033, "last_edit_date": 1425475382, "question_id": 28852832, "link": "https://stackoverflow.com/questions/28852832/run-c-program-with-many-inputs-and-save-to-file", "title": "Run c program with many inputs and save to file?", "body": "<p>I want to run my C program in the command line( which I know), but i want to execute it many time for a range of value, lets say n= 100 to 2000 in steps of 10? ie 100,110 etc...till 2000</p>\n\n<p>Also I want to modify my program so that I can manipulate the results in matlab, I want to plot the values I get. I have 3 outputs, and I want each of them stored in one columns for each run, how could I do that?</p>\n\n<p>How to save them excel or in a file?</p>\n\n<p>EDIT :</p>\n\n<p>I have done the following to run the program several times\nfor(( n=100;n&lt;=2000;n+=100)); do ./ass_1 n; done\nbut it take the input for each iteration as n=0, why?</p>\n"}, {"tags": ["c", "language-lawyer", "bit", "memory-address", "knuth"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1425465654, "post_id": 28851800, "comment_id": 45971369, "body": "The first C compiler didn&#39;t run on a PDP-7 (the linked Wikipedia article doesn&#39;t say anything like that). Just like Unix itself, it ran on a PDP-11/20 which has 8-bit bytes and 16-bit words."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 11, "creation_date": 1425465771, "post_id": 28851800, "comment_id": 45971428, "body": "Just do what many &quot;C&quot; compilers for oddball/arcane devices have done before you and violate the standard to create something that is actually practically usable as a systems programming language. Recent C standards also requires two&#39;s complement and a host of other things which just aren&#39;t going to be workable for a machine like this without severely degrading the performance."}, {"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "edited": false, "score": 0, "creation_date": 1425465891, "post_id": 28851800, "comment_id": 45971487, "body": "Ooops - I conflated the Unix &amp; C notes in <a href=\"http://www.linfo.org/pdp-7.html\" rel=\"nofollow noreferrer\">linfo.org/pdp-7.html</a>. So C did indeed come from an 8/16 bit background, which seems much more in the spirit of K&amp;R and dilutes that last parenthetical point"}, {"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "edited": false, "score": 0, "creation_date": 1425466348, "post_id": 28851800, "comment_id": 45971731, "body": "@doxynax I was hoping (at least as a first cut) to leave the language work to something like clang (overkill for simple C) and just write a backend. But although the integer classes support arbitrary bit-widths I didn&#39;t find it being used beyond the customary 8/16/32/64/128 series, and that got me to wondering how/if it really could be used."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 2, "creation_date": 1425467120, "post_id": 28851800, "comment_id": 45972150, "body": "@Software Tyro: I fear you won&#39;t find much in the way of tools to support an architectures like this. Actually C never really was the portable assembly it is made out to be, that is more of an illusion caused by the influence of C on modern architectures rather than C model somehow being universal. For many common pointer/stack-averse MCUs C is actually quite painful."}, {"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 2, "creation_date": 1425468024, "post_id": 28851800, "comment_id": 45972656, "body": "@doynax - interesting way of flipping the domain around (triumph of C drives modern architecture). On a similar note I think (didn&#39;t conclusively prove) that GDB stack walking implicitly assumes that callstack is a slab of ordinary RAM with interleaved return addresses and variables, which is of course true for current mainstream but wouldn&#39;t let it support some earlier machines (of course not a requirement, and obsolete machines routinely get culled from GDB support anyway)"}, {"owner": {"reputation": 2141, "user_id": 3710044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd665eb6cb69cfcdbf5537974a78a17?s=128&d=identicon&r=PG&f=1", "display_name": "user3710044", "link": "https://stackoverflow.com/users/3710044/user3710044"}, "edited": false, "score": 3, "creation_date": 1425726255, "post_id": 28851800, "comment_id": 46086465, "body": "I found <a href=\"http://cluecc.sourceforge.net/\" rel=\"nofollow noreferrer\">cluecc</a> a while back, it&#39;s a nice little toy that puts a C compiler onto some unusual virtual &#39;machines&#39;."}, {"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "reply_to_user": {"reputation": 2141, "user_id": 3710044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd665eb6cb69cfcdbf5537974a78a17?s=128&d=identicon&r=PG&f=1", "display_name": "user3710044", "link": "https://stackoverflow.com/users/3710044/user3710044"}, "edited": false, "score": 0, "creation_date": 1425887175, "post_id": 28851800, "comment_id": 46129433, "body": "@user3710044 - thanks for that steer; definitely an interesting addition to the headspace!"}, {"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "edited": false, "score": 0, "creation_date": 1427206546, "post_id": 28851800, "comment_id": 46675911, "body": "There are some similarities with this question : <a href=\"http://stackoverflow.com/questions/18537747/is-char-bit-4-a-possible-value-authorized-by-the-c-standard\" title=\"is char bit 4 a possible value authorized by the c standard\">stackoverflow.com/questions/18537747/&hellip;</a> . Answers might help."}, {"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "reply_to_user": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "edited": false, "score": 0, "creation_date": 1427270342, "post_id": 28851800, "comment_id": 46704604, "body": "@Cyan - Thanks! Indeed I hadn&#39;t stumbled across that question (or that CPU) when searching. Interesting device, and impressively long-lived. Since the word type (nybble) divides evenly into 8-bit I think the handling of pointers would be fairly straightforward: all pointers can be the same size rather than needing &quot;fat pointers&quot; to subdivide words, char* increments in 2&#39;s, etc. Did you work with the the hp48gcc compiler at all? (I know this comment really belongs on your CHAR_BIT question but I don&#39;t have enough rep)"}, {"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "edited": false, "score": 0, "creation_date": 1427290651, "post_id": 28851800, "comment_id": 46717053, "body": "@Tyro Nope, I did not. hp48gcc is really wasting a lot of energy at trying to &quot;adapt&quot; 8-bits logic into Saturn CPU. So it was suboptimal I was considering to make my own compiler, but the discovery that I could never make it &quot;C standard compliant&quot; due to the restriction of 8 bits per CHAR made me think twice. Plus, anyway, it would have been a learning exercise, requiring tons of availability time to get through. By the way, standard pointers on this platform (size_t) are 20 bits (== 5 nibbles)."}, {"owner": {"reputation": 517, "user_id": 4782519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3fa52fd7fe4d43019523fb87a2e7274?s=128&d=identicon&r=PG&f=1", "display_name": "Meixner", "link": "https://stackoverflow.com/users/4782519/meixner"}, "edited": false, "score": 0, "creation_date": 1429089455, "post_id": 28851800, "comment_id": 47432834, "body": "You might pack 31 8-bit bytes into 8 31-bit words wasting no bits. By this the compiler could conform to the C standard but performance could be expected to be quite low due to the complex addressing resulting from this."}, {"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "reply_to_user": {"reputation": 517, "user_id": 4782519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3fa52fd7fe4d43019523fb87a2e7274?s=128&d=identicon&r=PG&f=1", "display_name": "Meixner", "link": "https://stackoverflow.com/users/4782519/meixner"}, "edited": false, "score": 0, "creation_date": 1429170744, "post_id": 28851800, "comment_id": 47475542, "body": "@Meixner - I think byte-packing is only valid if all memory accesses for all types pass through it, i.e. implementing the memory model in software. Otherwise a native data type (say a 31 bit integer if it was more conventional than MIX) can&#39;t be accessed via &quot;char*&quot; since one of the bytes has only 7 bits, i.e. violating 6.3.2.3  [as I understand it; need a C language lawyer to confirm]"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1429840720, "post_id": 28851800, "comment_id": 47801448, "body": "Step 1 &quot;Make char 31 bits&quot;.  <code>short</code> and <code>int</code> also 31-bits.  <code>long</code> --&gt; 62 bits. <code>long long</code> --&gt; 124.  Get compiler working with the &quot;inefficient&quot; model - then consider performance improvements.  I suspect step 1 will itself be hard enough."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "edited": false, "score": 0, "creation_date": 1430383668, "post_id": 29858834, "comment_id": 48046431, "body": "Very helpful info - if a little disturbing regarding the C/C++ gulf around unions. I&#39;ll leave the question as &quot;unanswered&quot; for a while longer in the hopes that a card-carrying certified language lawyer does arrive"}, {"owner": {"reputation": 1009, "user_id": 2453661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a44afa0c663b486bff7891d92df52c?s=128&d=identicon&r=PG", "display_name": "Alberto M", "link": "https://stackoverflow.com/users/2453661/alberto-m"}, "reply_to_user": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "edited": false, "score": 0, "creation_date": 1430424294, "post_id": 29858834, "comment_id": 48073173, "body": "@SoftwareTyro I&#39;d also be curious of hearing a C++ guru&#39;s opinion. Maybe you could add the &quot;language-lawyer&quot; tag to your question?"}, {"owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "edited": false, "score": 0, "creation_date": 1430725695, "post_id": 29858834, "comment_id": 48167229, "body": "d&#39;oh! I never even thought to look for that tag but of course although jocular it&#39;s very much in real use. Thanks again!"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1430726157, "post_id": 29858834, "comment_id": 48167474, "body": "C++ allows it since chars (including signed/unsigned chars, and structs/unions/arrays containing them) can alias anything."}, {"owner": {"reputation": 1009, "user_id": 2453661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a44afa0c663b486bff7891d92df52c?s=128&d=identicon&r=PG", "display_name": "Alberto M", "link": "https://stackoverflow.com/users/2453661/alberto-m"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1430886196, "post_id": 29858834, "comment_id": 48249419, "body": "@o11c You are right: I corrected my example. Anyway now the C++ solution has become much more viable, just a little less comfortable than the C one."}], "tags": [], "owner": {"reputation": 1009, "user_id": 2453661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a44afa0c663b486bff7891d92df52c?s=128&d=identicon&r=PG", "display_name": "Alberto M", "link": "https://stackoverflow.com/users/2453661/alberto-m"}, "is_accepted": false, "score": 4, "last_activity_date": 1430886123, "last_edit_date": 1495541192, "creation_date": 1429916049, "answer_id": 29858834, "question_id": 28851800, "link": "https://stackoverflow.com/questions/28851800/char-with-an-unusual-memory-word-size-knuths-mix-architecture/29858834#29858834", "title": "&quot;char*&quot; with an unusual memory word size (Knuth&#39;s MIX architecture)", "body": "<p>I agree that C on a MIX architecture could be a pain to implement, and, though not a language lawyer myself, it seems to me that you are right to point out your approach 1. as the only conforming one.</p>\n\n<p>Anyway, the space waste for strings is the least of your problems: you can circumvent it by resorting to a solution older than C itself: making each <code>char</code> representing multiple letters. For the MIX architecture you could for example devise a 7-bit encoding and packing 4 letters into each char:</p>\n\n<pre><code>char hi[4];\nhi[0] = 'hell';\nhi[1] = 'o, w';\nhi[2] = 'orld';\nhi[3] = '\\0';\n\nprintf(\"%s\", hi);\n\n// Whoops, we forgot the exclamation mark\nputchar('!\\n');\n</code></pre>\n\n<p>This implementation seems strange, but according to Wikipedia, <a href=\"http://en.wikipedia.org/wiki/%22Hello,_World!%22_program#History\" rel=\"nofollow noreferrer\">it was used in the first \"Hello world\" program ever</a>. I took a look at the Standard and found nothing preventing it, even in C11. Especially \u00a7 6.4.4.4 allows encoding literal characters and strings in implementation-specific ways.</p>\n\n<p>EDIT:</p>\n\n<p>This does not help against other difficulties, the main one being your inability to use the wide majority of your machine's possible instructions, since you cannot address single bytes with the native C types. You can however make use of bitfields in this way:</p>\n\n<pre><code>typedef struct _bytes {\n    unsigned int sign  : 1;\n    unsigned int byte1 : 6; // EDIT: bitfields must be \n    unsigned int byte2 : 6; // declared as ints in standard C\n    unsigned int byte3 : 6;\n    unsigned int byte4 : 6;\n    unsigned int byte5 : 6;\n} bytes;\n\ntypedef union _native_type {\n    char as_word;\n    int as_int; // int = char; useful for standard library functions, etc.\n    bytes as_bytes;\n} native_type;\n</code></pre>\n\n<p>Note that in C++, because of a clause in the strict aliasing rules, you must be careful to always access the <code>char</code> member between an access to <code>int</code> and one to the <code>bytes</code>, since this snippet:</p>\n\n<pre><code>native_type a, b;\na.as_int = 0xC11BABE;\nb.as_bytes.byte4 = a.as_bytes.byte4; // Whoops\n</code></pre>\n\n<p>would yield undefined behavior: see <a href=\"https://stackoverflow.com/questions/11373203/accessing-inactive-union-member-undefined\">here</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 2, "last_activity_date": 1430840058, "creation_date": 1430840058, "answer_id": 30057325, "question_id": 28851800, "link": "https://stackoverflow.com/questions/28851800/char-with-an-unusual-memory-word-size-knuths-mix-architecture/30057325#30057325", "title": "&quot;char*&quot; with an unusual memory word size (Knuth&#39;s MIX architecture)", "body": "<p>The most practical approach would probably to make <code>int</code> be 30 bits and have <code>char</code> be either 10 or 15.  Using ten bits for <code>char</code> would allow ASCII text to be packed more tightly, but would increase the cost of indexing into <code>char</code> arrays because of the required divide-by-three.  Storage of Unicode text could be fairly efficient with either 10- or 15-byte <code>char</code>.  With 15-byte <code>char</code>, about 30720 code points would take 15 bits, and the remainder would take 30.  With 10-byte <code>char</code>, 128 code points would take 10 bits, 65408 would take 20, and the remainder would take 30.</p>\n\n<p>To mitigate the cost of dividing by 3, it may be helpful to have each <code>char*</code> contain two words; one would would identify the word containing the character, and the other would identify the offset, in characters, from the start of that word.  Adding a constant offset to a pointer which was known to be normalized could use code like:</p>\n\n<pre><code>p += 5; // Becomes...\nif (p.offset) { p.offset=2; p.base+=1; }\nelse { p.offset--; p.base+=2; }\n</code></pre>\n\n<p>Not great, but it would avoid any need for a \"divide\" step.</p>\n"}], "owner": {"reputation": 149, "user_id": 4627449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e3ae8bd3ef982780b581d9df999d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Software Tyro", "link": "https://stackoverflow.com/users/4627449/software-tyro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 1, "answer_count": 2, "score": 14, "last_activity_date": 1430886123, "creation_date": 1425464157, "last_edit_date": 1430725604, "question_id": 28851800, "link": "https://stackoverflow.com/questions/28851800/char-with-an-unusual-memory-word-size-knuths-mix-architecture", "title": "&quot;char*&quot; with an unusual memory word size (Knuth&#39;s MIX architecture)", "body": "<p>The original <a href=\"http://en.wikipedia.org/wiki/MIX\">MIX architecture</a> features 6-bit bytes and memory is addressed as 31-bit words (5 bytes and a sign bit). As a thought exercise I'm wondering how the C language can function in this environment, given:</p>\n\n<ul>\n<li>char has at least 8 bits (annex E of C99 spec)</li>\n<li>C99 spec section 6.3.2.3 (\"Pointers\") paragraph 8 says \"When a pointer to an object is converted to a pointer to a character type, the result points to the lowest addressed byte of the object. Successive increments of the result, up to the size of the object, yield pointers to the remaining bytes of the object.\" My interpretation of this requirement is that it underpins \"memcpy(&amp;dst_obj, &amp;src_obj, sizeof(src_obj))\".</li>\n</ul>\n\n<p>Approaches that I can think of:</p>\n\n<ol>\n<li>Make char 31 bits, so indirection through \"char*\" is simple memory access. But this makes strings wasteful (and means it isn't POSIX-compliant as that apparently requires 8 bit chars)</li>\n<li>Pack three 8 bit chars into one word, with 7 ignored bits: \"char*\" might be composed of word address and char index within it. However this seems to violate 6.3.2.3, i.e. memcpy() would necessarily skip the ignored bits (which are probably meaningful for the real object type)</li>\n<li>Fully pack chars into words, e.g. the fourth 8 bit char would have 7 bits in word 0 and one bit in word 1. However this seems to require that all objects are sized in 8 bit chars, e.g. a \"uint31_t\" couldn't be declared to match the word length since this again has the memcpy() problem.</li>\n</ol>\n\n<p>So that seems to leave the first (wasteful) option of using 31-bit chars with all objects sized as multiples of char - am I correct in reading it this way? </p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1425466273, "post_id": 28851721, "comment_id": 45971683, "body": "I don&#39;t think it is good idea to use <code>poll()</code> on sysfs, and on <i>gpio</i> in particular. GPIO doesn&#39;t allow to track if value changed, AFAIK electric signalling doesn&#39;t allow that. How do you expect that from kernel?"}, {"owner": {"reputation": 99, "user_id": 3829243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5285daeccaedf9d7d6004ef89d35f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Text Texer", "link": "https://stackoverflow.com/users/3829243/text-texer"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1425466892, "post_id": 28851721, "comment_id": 45972012, "body": "this code is working for me good for GPIO , but i would like to change it for custome file, if some data arrive into it make poll trigger. if im was not clear :)"}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 3, "creation_date": 1425471622, "post_id": 28851721, "comment_id": 45974784, "body": "@myaut: actually, you <b>can</b> use <code>poll()</code> if interrupt is enabled for this particular GPIO pin. It&#39;s even recommended in <a href=\"https://www.kernel.org/doc/Documentation/gpio/sysfs.txt\" rel=\"nofollow noreferrer\">Documentation/gpio/sysfs.txt</a>"}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1425472135, "post_id": 28851721, "comment_id": 45975078, "body": "@TextTexer: please specify which exactly files you want to use <code>poll()</code> for."}, {"owner": {"reputation": 99, "user_id": 3829243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5285daeccaedf9d7d6004ef89d35f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Text Texer", "link": "https://stackoverflow.com/users/3829243/text-texer"}, "edited": false, "score": 0, "creation_date": 1425474374, "post_id": 28851721, "comment_id": 45976450, "body": "Dear TexTexer the file what was said is should be /tmp/filename contains only 1 char &quot;1&quot;. This is the file , and if the value change make interrupt for the poll()  (POLLPRI example)"}, {"owner": {"reputation": 99, "user_id": 3829243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5285daeccaedf9d7d6004ef89d35f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Text Texer", "link": "https://stackoverflow.com/users/3829243/text-texer"}, "edited": false, "score": 0, "creation_date": 1425474436, "post_id": 28851721, "comment_id": 45976499, "body": "myaut i know that i can use it and i also using it too. but i would like to use the poll for non gpio file"}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 1, "creation_date": 1425476490, "post_id": 28851721, "comment_id": 45977873, "body": "@TextTexer: I doubt that <code>poll()</code> can do this for you. If you want to watch for file modifications (i.e. getting event when file was modified), you should use <a href=\"http://en.wikipedia.org/wiki/Inotify\" rel=\"nofollow noreferrer\">inotify</a> API. Here is an <a href=\"http://www.stev.org/post/2012/09/22/Linux-Programming-Using-inotify-for-detecting-file-modifications.aspx\" rel=\"nofollow noreferrer\">example</a> how to do so."}, {"owner": {"reputation": 99, "user_id": 3829243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5285daeccaedf9d7d6004ef89d35f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Text Texer", "link": "https://stackoverflow.com/users/3829243/text-texer"}, "reply_to_user": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1425542176, "post_id": 28851721, "comment_id": 46008076, "body": "@Sam Protsenko I need to watch the file and the Value changes(GPIO) with the same function, this is the poll(). For now the kernel making POLLPRI event when a file was modified( changes happens on the GPIO &quot;leg&quot;) , but if i add a normal tmp file for the list, or just alone, to the poll(), it always will return immediately. Right now i would like to make some kind of system call to creat pollpri event if i change my tmp file , or some reading where i can start to dug how should i do this . Regards :)"}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 2, "creation_date": 1425558271, "post_id": 28851721, "comment_id": 46017355, "body": "Now it&#39;s clear what you are trying to achieve. You should add this information to your original question (your 3 last comments). Also, in my opinion, modifying <code>poll()</code> system call in kernel would be too hard. Much more easier solution is to create some wrapper function (in your program) which would probe file: if it&#39;s regular file -- this function will use <code>inotify</code>, if it&#39;s gpio file -- use <code>poll</code>."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1453819609, "post_id": 28851721, "comment_id": 57759745, "body": "You can <code>poll()</code> the inotify file descriptor, so it&#39;s just the matter of returning an appropriate fd."}], "answers": [{"comments": [{"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1453826026, "post_id": 35018450, "comment_id": 57764496, "body": "No, you actually <code>poll()</code> on the main inotify fd, the &quot;watch&quot; fd&#39;s get returned in the <code>inotify_event</code>s returned when you read the inotify fd.  Then you can match up the fd in the event with which file changed.  In this particular case, there is only a single file, so no point in that really."}, {"owner": {"reputation": 338, "user_id": 5086634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ctyhbVvxWms/AAAAAAAAAAI/AAAAAAAAAAs/SvhisN46aPU/photo.jpg?sz=128", "display_name": "Eliezer Miron", "link": "https://stackoverflow.com/users/5086634/eliezer-miron"}, "edited": false, "score": 0, "creation_date": 1555542241, "post_id": 35018450, "comment_id": 98152055, "body": "Isn&#39;t that exactly what your example shows? Your &quot;file_watch_fd&quot; function does return the main inotify fd. Also you seem to be arguing with yourself, which is confusing..."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "reply_to_user": {"reputation": 338, "user_id": 5086634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ctyhbVvxWms/AAAAAAAAAAI/AAAAAAAAAAs/SvhisN46aPU/photo.jpg?sz=128", "display_name": "Eliezer Miron", "link": "https://stackoverflow.com/users/5086634/eliezer-miron"}, "edited": false, "score": 0, "creation_date": 1555559406, "post_id": 35018450, "comment_id": 98155062, "body": "The comment to which I was replying has been deleted."}, {"owner": {"reputation": 338, "user_id": 5086634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ctyhbVvxWms/AAAAAAAAAAI/AAAAAAAAAAs/SvhisN46aPU/photo.jpg?sz=128", "display_name": "Eliezer Miron", "link": "https://stackoverflow.com/users/5086634/eliezer-miron"}, "edited": false, "score": 0, "creation_date": 1555610817, "post_id": 35018450, "comment_id": 98179726, "body": "Ah, that explains it."}, {"owner": {"reputation": 338, "user_id": 5086634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ctyhbVvxWms/AAAAAAAAAAI/AAAAAAAAAAs/SvhisN46aPU/photo.jpg?sz=128", "display_name": "Eliezer Miron", "link": "https://stackoverflow.com/users/5086634/eliezer-miron"}, "edited": false, "score": 0, "creation_date": 1555706925, "post_id": 35018450, "comment_id": 98209682, "body": "I&#39;m trying your code, and it seems to get stuck inside the ready() function, after checking 8 events (the first one is the actual IN_MODIFY event, the other 7 are empty.) I&#39;ll report back here if I figure out what my issue is."}, {"owner": {"reputation": 338, "user_id": 5086634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ctyhbVvxWms/AAAAAAAAAAI/AAAAAAAAAAs/SvhisN46aPU/photo.jpg?sz=128", "display_name": "Eliezer Miron", "link": "https://stackoverflow.com/users/5086634/eliezer-miron"}, "edited": false, "score": 1, "creation_date": 1555709490, "post_id": 35018450, "comment_id": 98210391, "body": "It was my fault, I had forgotten to include the iflags when initializing the inotify object. Wish I could upvote your answer more than once"}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "reply_to_user": {"reputation": 338, "user_id": 5086634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ctyhbVvxWms/AAAAAAAAAAI/AAAAAAAAAAs/SvhisN46aPU/photo.jpg?sz=128", "display_name": "Eliezer Miron", "link": "https://stackoverflow.com/users/5086634/eliezer-miron"}, "edited": false, "score": 1, "creation_date": 1555718667, "post_id": 35018450, "comment_id": 98212085, "body": "I&#39;m glad you found it useful"}], "tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": false, "score": 8, "last_activity_date": 1453824676, "creation_date": 1453824676, "answer_id": 35018450, "question_id": 28851721, "link": "https://stackoverflow.com/questions/28851721/use-poll-to-check-for-file-modification/35018450#35018450", "title": "Use poll() to check for file modification", "body": "<p>In Linux, unlike with your special GPIO file, you can not poll the fd to an open ordinary file like that.</p>\n\n<p>To watch a file for changes you can use the <code>inotify</code> family of functions.  Conveniently for you they use a file descriptor which can be passed to <code>poll()</code> along with your GPIO file descriptor, so you can watch both at the same time.</p>\n\n<p>So, some minor additions/changes to your code:</p>\n\n<pre><code>int fw_fd = file_watch_fd(\"/some/file/to/watch\");\nstruct pollfd fdset[2];\nint nfds = 2;\nint rc;\nfdset[0].fd = gpio_fd;\nfdset[0].events =  POLLPRI | POLLERR | POLLHUP | POLLNVAL;\nfdset[1].fd = fw_fd;\nfdset[1].events = POLLIN;\ndo {\n    rc = poll(fdset, nfds, timeout);\n</code></pre>\n\n<p>You are polling on the inotify fd, which you read to return one more watched events which occurred.  Since this code is only watching one file for one event, we're pretty sure what the event is, but we still need to read it out of the fd, then we can actually read the file.</p>\n\n<pre><code>    if (fdset[1].revents &amp; POLLIN) {\n        if (ready(fw_fd)) {\n            /* file has changed, read it */\n        }\n    }\n</code></pre>\n\n<p>Here is the <strong>file_watch_fd()</strong> function:</p>\n\n<pre><code>int file_watch_fd ( const char * filename ) {\n        static int      inot    = ERR;\n        static int      iflags  = IN_CLOEXEC | IN_NONBLOCK;\n        static uint32_t mask    = IN_MODIFY;\n        int             watch;\n\n        if (inot == ERR) {\n                inot = inotify_init1(iflags);\n                if (inot == ERR) return ERR;\n        }\n        watch = inotify_add_watch(inot, filename, mask);\n        if (watch == ERR) return ERR;\n        return inot;\n}\n</code></pre>\n\n<p>And here is the <strong>ready()</strong> function:</p>\n\n<pre><code>int ready ( int inot ) {\n        uint64_t                buffer[8192];\n        ssize_t                 nr;\n        char *                  p;\n        size_t                  n;\n        struct inotify_event *  evP;\n        int                     ready   = 0;\n\n        while ((nr = read(inot, (char *)buffer, sizeof(buffer))) &gt; 0) {\n                for (p = buffer; p &lt; buffer + nr; p += n) {\n                        evP = (struct inotify_event *)p;\n                        if (evP-&gt;mask &amp; IN_MODIFY) ready = 1;\n                        n = sizeof(struct inotify_event) + evP-&gt;len;\n                }\n        }\n        return ready;\n}\n</code></pre>\n\n<p><em>(People experience in the use of inotify will notice that I ran roughshod over the functionality of it to keep this example as simple as I can)</em></p>\n"}], "owner": {"reputation": 99, "user_id": 3829243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5285daeccaedf9d7d6004ef89d35f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Text Texer", "link": "https://stackoverflow.com/users/3829243/text-texer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6223, "favorite_count": 3, "answer_count": 1, "score": 9, "last_activity_date": 1453824676, "creation_date": 1425463959, "last_edit_date": 1453824614, "question_id": 28851721, "link": "https://stackoverflow.com/questions/28851721/use-poll-to-check-for-file-modification", "title": "Use poll() to check for file modification", "body": "<p>There is a file and I would like to check it with <code>poll()</code> that the contents have changed.</p>\n\n<p>On Raspi there is a file called gpio value, if the value changed the <code>poll()</code> was triggered with POLLPRI, I would like to do the same with an ordinary file.</p>\n\n<p>Here is the code I am using to check the GPIO file:</p>\n\n<pre><code>int gpio_fd = gpio_fd_open();\nint timeout = POLL_TIMEOUT;\nstruct pollfd fdset;\nint nfds = 1;\nchar *buf[MAX_BUF];\nint len;\nint rc;\nfdset.fd = gpio_fd;\nfdset.events =  POLLPRI | POLLERR | POLLHUP | POLLNVAL; // POLLIN | | POLLOUT \nunsigned int c1, c2, c3;\ndo{\n    rc = poll(&amp;fdset, 1, timeout);\n</code></pre>\n\n<p>And the gpio_fd_open function:</p>\n\n<pre><code>int gpio_fd_open() {\n    printf(\"opening File: \" SYSFS_GPIO_DIR \"\\n\");\n\n    int fd, len;\n    char buf[MAX_BUF];\n\n    len = snprintf(buf, sizeof (buf), SYSFS_GPIO_DIR);\n    fd = open(buf, O_RDONLY | O_NONBLOCK);\n    if (fd &lt; 0) {\n        perror(\"gpio/fd_open\");\n    }\n    return fd;\n}\n</code></pre>\n"}, {"tags": ["c", "opencl"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1425464295, "post_id": 28851608, "comment_id": 45970555, "body": "You should probably provide more code, e.g. how is the fmod overload declared."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425465084, "post_id": 28851608, "comment_id": 45971031, "body": "What is the type of <code>unit4</code> ? Is it a floating point value or an integer ?"}, {"owner": {"reputation": 919, "user_id": 1635212, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/5qPpF.jpg?s=128&g=1", "display_name": "colddie", "link": "https://stackoverflow.com/users/1635212/colddie"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1425466158, "post_id": 28851608, "comment_id": 45971610, "body": "@zenith it&#39;s a built-in OpenCL function"}, {"owner": {"reputation": 919, "user_id": 1635212, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/5qPpF.jpg?s=128&g=1", "display_name": "colddie", "link": "https://stackoverflow.com/users/1635212/colddie"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425466285, "post_id": 28851608, "comment_id": 45971692, "body": "@chmike it&#39;s type of vector composites from 4 uint type, size_sino.y is one     unit of those 4"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1425466407, "post_id": 28851608, "comment_id": 45971760, "body": "@colddie I know, I just think it wasn&#39;t that clear. You could attach its prototype to your question so people wouldn&#39;t have to go googling around."}], "answers": [{"tags": [], "owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "is_accepted": true, "score": 10, "last_activity_date": 1425467990, "creation_date": 1425467990, "answer_id": 28853131, "question_id": 28851608, "link": "https://stackoverflow.com/questions/28851608/opencl-call-to-a-built-in-function-is-ambiguous/28853131#28853131", "title": "OpenCL: call to a built-in function is ambiguous", "body": "<p>You are calling <code>fmod</code> with two <code>uint</code> arguments. This function has overloads for <code>float</code> and <code>double</code> arguments, and so the compiler cannot infer which overload you wish to use (hence the error about the ambiguous function call).</p>\n\n<p>You can make your intentions explicit by casting the arguments to the type that you want to use:</p>\n\n<pre><code>idy_p = fmod((float)(idz*size_sino.y+idy), (float)16.f);\n</code></pre>\n"}], "owner": {"reputation": 919, "user_id": 1635212, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/5qPpF.jpg?s=128&g=1", "display_name": "colddie", "link": "https://stackoverflow.com/users/1635212/colddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4015, "favorite_count": 0, "accepted_answer_id": 28853131, "answer_count": 1, "score": 2, "last_activity_date": 1425467990, "creation_date": 1425463621, "question_id": 28851608, "link": "https://stackoverflow.com/questions/28851608/opencl-call-to-a-built-in-function-is-ambiguous", "title": "OpenCL: call to a built-in function is ambiguous", "body": "<p>I have a following piece of code which is from a openCL kernel. </p>\n\n<pre><code>     const uint idz = 100;\n     const uint idy = 100;\n     unit4 size_sino;\n     uint idz_p;\n     uint idy_p;\n     idz_p = (idz*size_sino.y+idy)/16;\n     idy_p = fmod((idz*size_sino.y+idy), (uint)16);\n</code></pre>\n\n<p>When I compiled the kernel, some error happened:</p>\n\n<pre><code>     :192:18: error: call to 'fmod' is ambiguous\n     &lt;stdin&gt;:1078:48: note: candidate function\n     &lt;stdin&gt;:1084:49: note: candidate function\n     &lt;stdin&gt;:1079:49: note: candidate function\n     &lt;stdin&gt;:1080:49: note: candidate function\n     &lt;stdin&gt;:1081:49: note: candidate function\n     &lt;stdin&gt;:1082:49: note: candidate function\n     &lt;stdin&gt;:1083:50: note: candidate function\n     &lt;stdin&gt;:1085:50: note: candidate function\n     &lt;stdin&gt;:1086:50: note: candidate function\n     &lt;stdin&gt;:1087:50: note: candidate function\n     &lt;stdin&gt;:1088:50: note: candidate function\n     &lt;stdin&gt;:1089:51: note: candidate function\n</code></pre>\n\n<p>fmod() is a built-in function which has been overloaded. I understand the type of the two inputs should be the same. Could anyone tell what's going on here?</p>\n"}, {"tags": ["android", "c", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 385, "user_id": 3545506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qFApS.jpg?s=128&g=1", "display_name": "hanaa", "link": "https://stackoverflow.com/users/3545506/hanaa"}, "edited": false, "score": 0, "creation_date": 1425563283, "post_id": 28852382, "comment_id": 46020346, "body": "You mean that output is filled with zeros ? Maybe this is because xr and xi are &lt; n. Have you tried writing a const value in or and oi to test if the writing works ? You definitely need the code I gave you and that is missing in your code. You also have to pass two output buffers when you call the function from Java."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 385, "user_id": 3545506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qFApS.jpg?s=128&g=1", "display_name": "hanaa", "link": "https://stackoverflow.com/users/3545506/hanaa"}, "edited": false, "score": 0, "creation_date": 1425563848, "post_id": 28852382, "comment_id": 46020668, "body": "Another problem is that you call each transform twice. This cancels the transform ! So you don&#39;t compute a convolution of your data. I&#39;ll update my answer to show you how to fix that."}], "tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": false, "score": 0, "last_activity_date": 1425564804, "last_edit_date": 1425564804, "creation_date": 1425465749, "answer_id": 28852382, "question_id": 28851554, "link": "https://stackoverflow.com/questions/28851554/allocation-and-deallocation-problems-in-jni-android/28852382#28852382", "title": "allocation and deallocation problems in JNI Android", "body": "<p>You never access the <code>outreal</code> and <code>outimag</code> arguments in your <code>Java_com_example_convolution_MainActivity_convolution</code> function. </p>\n\n<p>You commented it out. It is normal that you don't get any output. </p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>You have to first get a pointer on <code>outreal</code> and <code>outimag</code> like you do for the input image.</p>\n\n<pre><code>jdouble *xr, *xi, *yr, *yi;\njdouble *or, *oi;  // &lt;-- add this declaration\n\n...\nxr = (*env)-&gt;GetDoubleArrayElements(env, xreal, 0);\nxi = (*env)-&gt;GetDoubleArrayElements(env, ximag, 0);\n\n// add the two lines below\nor = (*env)-&gt;GetDoubleArrayElements(env, outreal, 0);\noi = (*env)-&gt;GetDoubleArrayElements(env, outimag, 0);\n\n...\n//  for (i = 0; i &lt; n; i++) {  // Scaling (because this FFT implementation omits it)\n//      outreal[i] = xr[i] / n;\n//      outimag[i] = xi[i] / n;\n//  }\n\n// This now copies the result in or and oi\nfor (i = 0; i &lt; n; i++) {  // Scaling (because this FFT implementation omits it)\n    or[i] = xr[i] / n;\n    oi[i] = xi[i] / n;\n}\n\n...\n\n//free(xi);\n(*env)-&gt;ReleaseDoubleArrayElements(env, ximag, xi, 0);\n\n//free(xr);\n(*env)-&gt;ReleaseDoubleArrayElements(env, xreal, xr, 0);\n\n// Add the two lines below\n//free(oi);\n(*env)-&gt;ReleaseDoubleArrayElements(env, outimag, oi, 0);\n\n//free(or);\n(*env)-&gt;ReleaseDoubleArrayElements(env, outreal, or, 0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1425564935, "post_id": 28879831, "comment_id": 46021333, "body": "Note that it is possible to optimize your code. In <code>transform_bluestein</code> you compute data stored in the allocated blocks that is the same for all three transforms. You could compute them once and reuse it for each transform."}, {"owner": {"reputation": 385, "user_id": 3545506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qFApS.jpg?s=128&g=1", "display_name": "hanaa", "link": "https://stackoverflow.com/users/3545506/hanaa"}, "edited": false, "score": 0, "creation_date": 1425565568, "post_id": 28879831, "comment_id": 46021722, "body": "that is strange.. i tried exactly what you said i still get zeros. you mean i should get rid of copies and use the arrays instead?"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 385, "user_id": 3545506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qFApS.jpg?s=128&g=1", "display_name": "hanaa", "link": "https://stackoverflow.com/users/3545506/hanaa"}, "edited": false, "score": 0, "creation_date": 1425566023, "post_id": 28879831, "comment_id": 46022031, "body": "The above code should be ok now. Try first by commenting out the convolution and see if you get back x in the output. This will allow you to test if the allocations and transforms are working as expected."}], "tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": true, "score": 0, "last_activity_date": 1425564746, "creation_date": 1425564746, "answer_id": 28879831, "question_id": 28851554, "link": "https://stackoverflow.com/questions/28851554/allocation-and-deallocation-problems-in-jni-android/28879831#28879831", "title": "allocation and deallocation problems in JNI Android", "body": "<pre><code>JNIEXPORT jint JNICALL Java_com_example_convolution_MainActivity_convolution (JNIEnv *env, jobject obj, jdoubleArray xreal, jdoubleArray ximag, jdoubleArray yreal, jdoubleArray yimag, jdoubleArray outreal, jdoubleArray outimag, jsize n)\n{\n    jint status = 0;\n    size_t size;\n    size_t i;\n    jdouble *xr, *xi, *yr, *yi, *or, *oi;\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"start of convolution \", 1);\n\n    if (SIZE_MAX / sizeof(double) &lt; n)\n        return 0;\n\n    size = n * sizeof(double);\n\n    xr = (*env)-&gt;GetDoubleArrayElements(env, xreal, 0);\n    xi = (*env)-&gt;GetDoubleArrayElements(env, ximag, 0);\n    yr = (*env)-&gt;GetDoubleArrayElements(env, yreal, 0);\n    yi = (*env)-&gt;GetDoubleArrayElements(env, yimag, 0);\n    or = (*env)-&gt;GetDoubleArrayElements(env, outreal, 0);\n    oi = (*env)-&gt;GetDoubleArrayElements(env, outimag, 0);\n\n    if (!xr || !xi || !yr || !yi || !or || !oi)\n        goto cleanup;\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"after allocation \", 1);\n    // These are two duplicate transforms to get rid of \n    // transform(xr,xi,n);  \n    // transform(yr,yi,n);\n\n    if (!transform(xr, xi, n)) // &lt;- this performs the transform on x\n    {\n        goto cleanup;\n        __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"transform(xr,xi,n) not performed \", 1);\n\n    }\n\n    if (!transform(yr, yi, n)) // &lt;- this performs the transform on y\n    {\n        goto cleanup;\n        __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"transform(yr,yi,n) not performed \", 1);\n    }\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"after fft \", 1);//------------------------not showing\n\n    for (i = 0; i &lt; n; i++) \n    {\n        double temp = xr[i] * yr[i] - xi[i] * yi[i];\n        xi[i] = xi[i] * yr[i] + xr[i] * yi[i];\n        xr[i] = temp;\n        //__android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside for convolution\", 1);//---------------------not showing\n\n    }\n    // This inverse transform is also a duplicate\n    // inverse_transform(xr,xi,n);\n\n    if (!inverse_transform(xr, xi, n)) // &lt;-- this performs the inverse transform\n    {\n        goto cleanup;\n        __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inverse_transform(xr,xi,n) not performed \", 1);\n    }\n\n    // This now copies the result in or and oi\n    for (i = 0; i &lt; n; i++) {  // Scaling (because this FFT implementation omits it)\n        or[i] = xr[i] / n;\n        oi[i] = xi[i] / n;\n    }\n\n    status = 1;\n\ncleanup:    \n    (*env)-&gt;ReleaseDoubleArrayElements(env, yimag, yi, 0);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, yreal, yr, 0);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, ximag, xi, 0);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, xreal, xr, 0);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, outimag, oi, 0);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, outreal, or, 0);\n\n    return status;\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 3545506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qFApS.jpg?s=128&g=1", "display_name": "hanaa", "link": "https://stackoverflow.com/users/3545506/hanaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 28879831, "answer_count": 2, "score": 1, "last_activity_date": 1425564804, "creation_date": 1425463495, "last_edit_date": 1425464533, "question_id": 28851554, "link": "https://stackoverflow.com/questions/28851554/allocation-and-deallocation-problems-in-jni-android", "title": "allocation and deallocation problems in JNI Android", "body": "<p>I ve been trying to use a C library for convolution of two wav files under Android.\nI always get empty outputs. I tried to track down the problem, and i noticed that the arrays were not allocated properly.\nHere's the code:</p>\n\n<pre><code>int  transform(double real[], double imag[], size_t n) {\n    if (n == 0)\n        return 1;\n\n    else  // More complicated algorithm for arbitrary sizes\n    {\n        return transform_bluestein(real, imag, n);\n        __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside transform \", 1);\n    }\n}\n\n\nint inverse_transform(double real[], double imag[], size_t n) {\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside ifft \", 1);\n    return transform(imag, real, n);\n}\n\nint transform_bluestein(double real[], double imag[], size_t n) {\n    // Variables\n    int status = 0;\n    double *cos_table, *sin_table;\n    double *areal, *aimag;\n    double *breal, *bimag;\n    double *creal, *cimag;\n    size_t m;\n    size_t size_n, size_m;\n    size_t i;\n    JNIEnv *env;\n    jobject obj;\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"start bluestein \", 1);\n    // Find a power-of-2 convolution length m such that m &gt;= n * 2 + 1\n    {\n        size_t target;\n        if (n &gt; (SIZE_MAX - 1) / 2)\n        {\n            __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"return zero \", 1);\n            return 0;\n        }\n        target = n * 2 + 1;\n        for (m = 1; m &lt; target; m *= 2) {\n            if (SIZE_MAX / 2 &lt; m)\n            {\n                __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"return 0\", 1);\n                return 0;\n            }\n        }\n    }\n\n    // Allocate memory\n    if (SIZE_MAX / sizeof(double) &lt; n || SIZE_MAX / sizeof(double) &lt; m)\n        return 0;\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"allocate \", 1);\n    size_n = n * sizeof(double);\n    size_m = m * sizeof(double);\n    cos_table = malloc(size_n);\n    sin_table = malloc(size_n);\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside allocate \", 1);\n    areal = calloc(m, sizeof(double));\n    aimag = calloc(m, sizeof(double));\n    breal = calloc(m, sizeof(double));\n    bimag = calloc(m, sizeof(double));\n    creal = malloc(size_m);\n    cimag = malloc(size_m);\n    if (cos_table == NULL || sin_table == NULL\n            || areal == NULL || aimag == NULL\n            || breal == NULL || bimag == NULL\n            || creal == NULL || cimag == NULL)\n        goto cleanup;\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"finished allocation\", 1);\n\n    // Trignometric tables\n\n    for (i = 0; i &lt; n; i++) {\n        double temp = M_PI * (size_t)((unsigned long long)i * i % ((unsigned long long)n * 2)) / n;\n        // Less accurate version if long long is unavailable: double temp = M_PI * i * i / n;\n        cos_table[i] = cos(temp);\n        sin_table[i] = sin(temp);\n        //      __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside for %d \", i);\n    }\n\n    // Temporary vectors and preprocessing\n    for (i = 0; i &lt; n; i++) {\n        areal[i] =  real[i] * cos_table[i] + imag[i] * sin_table[i];\n        aimag[i] = -real[i] * sin_table[i] + imag[i] * cos_table[i];\n        //      __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside for %d \", i);\n\n    }\n    breal[0] = cos_table[0];\n    bimag[0] = sin_table[0];\n    for (i = 1; i &lt; n; i++) {\n        breal[i] = breal[m - i] = cos_table[i];\n        bimag[i] = bimag[m - i] = sin_table[i];\n        //      __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside for %d \", i);\n\n    }\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"before postprocessing \", i);\n\n    //  // Convolution\n    //  if (!Java_com_example_convolution_MainActivity_convolution(env, obj, areal, aimag, breal, bimag, creal, cimag, m))\n    //      goto cleanup;\n\n    // Postprocessing\n    for (i = 0; i &lt; n; i++) {\n        real[i] =  creal[i] * cos_table[i] + cimag[i] * sin_table[i];//------------------- (problem starts here)\n        imag[i] = -creal[i] * sin_table[i] + cimag[i] * cos_table[i];\n        //  __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside for %d \", i);\n    }\n    status = 1;\n\n    // Deallocation\n    cleanup:\n    free(cimag);\n    free(creal);\n    free(bimag);\n    free(breal);\n    free(aimag);\n    free(areal);\n    free(sin_table);\n    free(cos_table);\n    return status;\n}\n\nJNIEXPORT jint JNICALL Java_com_example_convolution_MainActivity_convolution (JNIEnv *env, jobject obj, jdoubleArray xreal, jdoubleArray ximag, jdoubleArray yreal, jdoubleArray yimag, jdoubleArray outreal, jdoubleArray outimag, jsize n)\n{\n    jint status = 0;\n    size_t size;\n    size_t i;\n    jdouble *xr, *xi, *yr, *yi;\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"start of convolution \", 1);\n\n    if (SIZE_MAX / sizeof(double) &lt; n)\n        return 0;\n\n    size = n * sizeof(double);\n\n    xr = (*env)-&gt;GetDoubleArrayElements(env, xreal, 0);\n\n    xi = (*env)-&gt;GetDoubleArrayElements(env, ximag, 0);\n\n    yr = (*env)-&gt;GetDoubleArrayElements(env, yreal, 0);\n\n    yi = (*env)-&gt;GetDoubleArrayElements(env, yimag, 0);\n\n\n    if (xr == NULL || xi == NULL || yr == NULL || yi == NULL)\n    {\n        goto cleanup;\n    }\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"after allocation \", 1);\n\n    transform(xr,xi,n);\n    transform(yr,yi,n);\n\n    if (!transform(xr, xi, n))\n    {\n        goto cleanup;\n        __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"transform(xr,xi,n) not performed \", 1);\n\n    }\n\n    if (!transform(yr, yi, n))\n    {\n        goto cleanup;\n        __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"transform(yr,yi,n) not performed \", 1);\n    }\n    __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"after fft \", 1);//------------------------not showing\n\n    for (i = 0; i &lt; n; i++) {\n\n        double temp = xr[i] * yr[i] - xi[i] * yi[i];\n        xi[i] = xi[i] * yr[i] + xr[i] * yi[i];\n        xr[i] = temp;\n        //__android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inside for convolution\", 1);//---------------------not showing\n\n    }\n    inverse_transform(xr,xi,n);\n\n    if (!inverse_transform(xr, xi, n))\n    {\n        goto cleanup;\n        __android_log_print(ANDROID_LOG_VERBOSE, \"log\", \"inverse_transform(xr,xi,n) not performed \", 1);\n    }\n\n    //  for (i = 0; i &lt; n; i++) {  // Scaling (because this FFT implementation omits it)\n    //      outreal[i] = xr[i] / n;\n    //      outimag[i] = xi[i] / n;\n    //  }\n    status = 1;\n\n    cleanup:\n\n    //free(yi);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, yimag, yi, 0);\n\n    //free(yr);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, yreal, yr, 0);\n\n    //free(xi);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, ximag, xi, 0);\n\n    //free(xr);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, xreal, xr, 0);\n\n    return status;\n}\n</code></pre>\n\n<p>Anyone can help me with this?</p>\n\n<p><strong>EDIT:</strong>\nHere s the log:</p>\n\n<pre><code>03-04 11:16:25.705: I/imag1(15736): imag1   5442\n03-04 11:16:25.705: I/imag2(15736): imag2   5442\n03-04 11:16:25.705: I/raw2(15736): raw2   5442\n03-04 11:16:25.705: V/log(15736): start of convolution \n03-04 11:16:25.705: V/log(15736): after allocation \n03-04 11:16:25.705: V/log(15736): start bluestein \n03-04 11:16:25.705: V/log(15736): allocate \n03-04 11:16:25.705: V/log(15736): inside allocate \n03-04 11:16:25.705: V/log(15736): finished allocation\n03-04 11:16:25.720: V/log(15736): before postprocessing \n03-04 11:16:25.720: V/log(15736): start bluestein \n03-04 11:16:25.720: V/log(15736): allocate \n03-04 11:16:25.720: V/log(15736): inside allocate \n03-04 11:16:25.720: V/log(15736): finished allocation\n03-04 11:16:25.735: V/log(15736): before postprocessing \n03-04 11:16:25.740: V/log(15736): start bluestein \n03-04 11:16:25.740: V/log(15736): allocate \n03-04 11:16:25.740: V/log(15736): inside allocate \n03-04 11:16:25.740: V/log(15736): finished allocation\n03-04 11:16:25.750: V/log(15736): before postprocessing \n03-04 11:16:25.755: V/log(15736): start bluestein \n03-04 11:16:25.755: V/log(15736): allocate \n03-04 11:16:25.755: V/log(15736): inside allocate \n03-04 11:16:25.755: V/log(15736): finished allocation\n03-04 11:16:25.770: V/log(15736): before postprocessing \n03-04 11:16:25.770: V/log(15736): after fft \n03-04 11:16:25.775: V/log(15736): inside ifft \n03-04 11:16:25.775: V/log(15736): start bluestein \n03-04 11:16:25.775: V/log(15736): allocate \n03-04 11:16:25.775: V/log(15736): inside allocate \n03-04 11:16:25.775: V/log(15736): finished allocation\n03-04 11:16:25.785: V/log(15736): before postprocessing \n03-04 11:16:25.790: V/log(15736): inside ifft \n03-04 11:16:25.790: V/log(15736): start bluestein \n03-04 11:16:25.790: V/log(15736): allocate \n03-04 11:16:25.790: V/log(15736): inside allocate \n03-04 11:16:25.790: V/log(15736): finished allocation\n03-04 11:16:25.805: V/log(15736): before postprocessing \n03-04 11:16:25.805: I/result(15736): result1\n</code></pre>\n"}, {"tags": ["c", "generics", "struct", "linked-list"], "comments": [{"owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "edited": false, "score": 1, "creation_date": 1425463854, "post_id": 28851456, "comment_id": 45970285, "body": "Try using gdb to go through your program step by step. Here you can find introduction to gdb <a href=\"http://www.cs.swarthmore.edu/~newhall/unixhelp/howto_gdb.html\" rel=\"nofollow noreferrer\">cs.swarthmore.edu/~newhall/unixhelp/howto_gdb.html</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1425464383, "post_id": 28851456, "comment_id": 45970615, "body": "There should be <code>NULL</code>s in your code to indicate end-of-list but there is not a single <code>NULL</code>. When you initialise a list, you point <code>next</code>  and <code>previous</code> to itself."}], "answers": [{"comments": [{"owner": {"reputation": 1842, "user_id": 622470, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5a4d6d802581bea0a5065dc8c060f8e8?s=128&d=identicon&r=PG", "display_name": "hogni89", "link": "https://stackoverflow.com/users/622470/hogni89"}, "edited": false, "score": 0, "creation_date": 1425466274, "post_id": 28851837, "comment_id": 45971687, "body": "Thank you! What a nice pal :)"}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": true, "score": 2, "last_activity_date": 1425464269, "creation_date": 1425464269, "answer_id": 28851837, "question_id": 28851456, "link": "https://stackoverflow.com/questions/28851456/generic-linked-list-in-c/28851837#28851837", "title": "Generic Linked List in C", "body": "<p>Your linked list has one extra node at the start that does not have its <code>data</code> member initialized (the node created by the <code>init_linked_list()</code> function).</p>\n\n<p>When you do :</p>\n\n<pre><code>edge *e = (edge *) ll-&gt;data;\n</code></pre>\n\n<p>you get that first node's <code>data</code> member, which is uninitialized. That causes the segmentation fault when you try to dereference <code>e</code>.</p>\n\n<p>Try this instead :</p>\n\n<pre><code>edge *e = (edge *) ll-&gt;next-&gt;data;\n</code></pre>\n\n<p>which will get the <code>data</code> member for the node that was inserted by the last <code>add_element</code> function call. Obviously, this is only safe if there has been at least one element added into the linked list.</p>\n"}], "owner": {"reputation": 1842, "user_id": 622470, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5a4d6d802581bea0a5065dc8c060f8e8?s=128&d=identicon&r=PG", "display_name": "hogni89", "link": "https://stackoverflow.com/users/622470/hogni89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 1, "accepted_answer_id": 28851837, "answer_count": 1, "score": 1, "last_activity_date": 1425464269, "creation_date": 1425463179, "question_id": 28851456, "link": "https://stackoverflow.com/questions/28851456/generic-linked-list-in-c", "title": "Generic Linked List in C", "body": "<p>I have a linked_list struct:</p>\n\n<pre><code> typedef struct  linked_list{\n        void *data;\n        struct linked_list *next;\n        struct linked_list *previous;\n    } linked_list;\n</code></pre>\n\n<p>And some linked list operations:</p>\n\n<pre><code>linked_list *init_linked_list() {\n    linked_list *ll;\n    ll = (linked_list *) malloc(sizeof(linked_list));\n\n    ll-&gt;next = ll;\n    ll-&gt;previous = ll;\n    return ll;\n}\n\nvoid add_element( linked_list *list, void *element) {\n    linked_list *list_element;\n\n    list_element = malloc(sizeof(linked_list));\n    list_element-&gt;data = element;\n\n    list_element-&gt;next = list-&gt;next;\n    list-&gt;next-&gt;previous = list_element ;\n    list-&gt;next = list_element ;\n    list_element-&gt;previous = list;\n}\n</code></pre>\n\n<p>I have a graph struct:</p>\n\n<pre><code>typedef struct graph {\n    int number_vertices;\n    vertex **vertices;\n} graph;\n</code></pre>\n\n<p>I have a vertex struct:</p>\n\n<pre><code>typedef struct vertex {\n    int time;\n    char *name;\n    linked_list *edges;\n} vertex;\n</code></pre>\n\n<p>I have a edge struct:</p>\n\n<pre><code>typedef struct edge{\n    int weight;\n    int change;\n    vertex *to;\n} edge;\n</code></pre>\n\n<p>And an \"add-edge\" function:</p>\n\n<pre><code>void add_edge_to_vertex(vertex *v,  int weight, int change, vertex *to) {\n    edge *pEdge = malloc(sizeof(edge));\n    pEdge-&gt;weight = weight;\n    pEdge-&gt;change = change;\n    pEdge-&gt;to = to;\n    // add edge to vertex linked list\n    add_element(v-&gt;edges, pEdge);\n}\n</code></pre>\n\n<p>Now to my problem. I setup my graph:</p>\n\n<pre><code>int aSize = 30;\nint bSize = 30;\npGraph = malloc(sizeof(graph));\npGraph-&gt;vertices = malloc(sizeof(vertex*) * aSize);\npGraph-&gt;vertices[0] = malloc(sizeof(vertex) * bSize);\n</code></pre>\n\n<p>I setup my a vertex and init the linked_list:</p>\n\n<pre><code>vertex *pVertex ;\npVertex = malloc(sizeof(vertex));\npVertex-&gt;edges = init_linked_list();\n</code></pre>\n\n<p>And I add the vertex to my graph:</p>\n\n<pre><code>pGraph-&gt;vertices[a][b] = *pVertex;\n</code></pre>\n\n<p>Last I add an edge between two vertices:</p>\n\n<pre><code>add_edge_to_vertex(&amp;pGraph-&gt;vertices[a][i], 100, 0, &amp;pGraph-&gt;vertices[a][i+1]);\n</code></pre>\n\n<p>When I try to fetch the edge weight, I get an segment fault: 11</p>\n\n<pre><code>vertex *v = &amp;pGraph-&gt;vertices[0][0];\nlinked_list *ll = v-&gt;edges;\nint s = linked_list_size(ll);\nprintf(\"%d\\n\", s); // outputs 1 - works so far!\nedge *e = (edge *) ll-&gt;data;\nint weight = e-&gt;weight; // segment fault: 11 ..\n</code></pre>\n\n<p>I have also tried to add an int and a char to the linked_list struct, and fetched that value, instead of fetching (and casting) edge from the \"void *data\". This works.\nMy problem now is, that I don't know if my fault is when I fetch the data, or when I store the data.</p>\n"}, {"tags": ["c", "gcc", "floating-point", "clang"], "comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 2, "creation_date": 1425463486, "post_id": 28851350, "comment_id": 45970048, "body": "I have had to investigate the behavior of old GCC versions recently and someone pointed me to <a href=\"https://gcc.godbolt.org\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a> which was very useful. It does not have GCC 4.4.3, but it has 4.4.7."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1593530566, "post_id": 28851350, "comment_id": 110811085, "body": "Was <code>gcc -std=c99 -mpfmath=387 t.c &amp;&amp; .&#47;a.out</code> really <code>gcc -std=c99 -mfpmath=387 t.c &amp;&amp; .&#47;a.out</code>  (typo?)"}], "answers": [{"comments": [{"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "edited": false, "score": 0, "creation_date": 1425465186, "post_id": 28851740, "comment_id": 45971084, "body": "Indeed, compiling first the <code>print_double</code> file without <code>-mfpmath=387</code>, and then linking its <code>.o</code> to the other file solves the issue: it prints <code>0x1.999999999999ap-4</code> in both compilers, with and without the <code>-mfpmath=387</code> flag."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 181, "user_id": 7546499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caefd6d781407cde2ac0205704a1340?s=128&d=identicon&r=PG&f=1", "display_name": "CuriosGuy", "link": "https://stackoverflow.com/users/7546499/curiosguy"}, "edited": false, "score": 0, "creation_date": 1487150295, "post_id": 28851740, "comment_id": 71648501, "body": "@CuriosGuy Note that the style that you used, obtained with inline backticks <code>`</code>, is intended for <b>code</b>. OTOH there is no recommendation for program output, so that&#39;s probably acceptable here (but do not use <code>`</code> for emphasis)."}, {"owner": {"reputation": 181, "user_id": 7546499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caefd6d781407cde2ac0205704a1340?s=128&d=identicon&r=PG&f=1", "display_name": "CuriosGuy", "link": "https://stackoverflow.com/users/7546499/curiosguy"}, "edited": false, "score": 0, "creation_date": 1487489863, "post_id": 28851740, "comment_id": 71802648, "body": "Sir, In my program , it says cannot find FLT_EVAL_METHOD , why is that?"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 181, "user_id": 7546499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caefd6d781407cde2ac0205704a1340?s=128&d=identicon&r=PG&f=1", "display_name": "CuriosGuy", "link": "https://stackoverflow.com/users/7546499/curiosguy"}, "edited": false, "score": 0, "creation_date": 1487708435, "post_id": 28851740, "comment_id": 71903350, "body": "@CuriosGuy <code>FLT_EVAL_METHOD</code> must be defined by the header <code>float.h</code> of a C99-compliant compiler. Maybe your C compiler does not support C99?"}], "tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": true, "score": 6, "last_activity_date": 1487136939, "last_edit_date": 1487136939, "creation_date": 1425464008, "answer_id": 28851740, "question_id": 28851350, "link": "https://stackoverflow.com/questions/28851350/same-flt-eval-method-different-results-in-gcc-clang/28851740#28851740", "title": "Same FLT_EVAL_METHOD, different results in GCC/Clang", "body": "<p>This answer is about something that you should resolve before you go further, because it is going to make reasoning about what happens much harder otherwise:</p>\n\n<p>Surely printing <code>0.1 = 0x0.07fff00000001p-1022</code> or <code>0.1 = 0x0.0000000000001p-1022</code> can only be a bug on your compilation platform caused by ABI mismatch when using <code>-mfpmath=387</code>. None of these values can be excused by excess precision. </p>\n\n<p>You could try to include your own conversion-to-readable-format in the test file, so that that conversion is also compiled with <code>-mfpmath=387</code>. Or make a small stub in another file, not compiled with that option, with a minimalistic call convention:</p>\n\n<p>In other file:</p>\n\n<pre><code>double d;\nvoid print_double(void)\n{\n  printf(\"%a\", d);\n}\n</code></pre>\n\n<p>In the file compiled with <code>-mfpmath=387</code>:</p>\n\n<pre><code>extern double d;\nd = 0.1;\nprint_double();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "is_accepted": false, "score": 1, "last_activity_date": 1425559727, "last_edit_date": 1495535378, "creation_date": 1425559727, "answer_id": 28878262, "question_id": 28851350, "link": "https://stackoverflow.com/questions/28851350/same-flt-eval-method-different-results-in-gcc-clang/28878262#28878262", "title": "Same FLT_EVAL_METHOD, different results in GCC/Clang", "body": "<p>Ignoring the <code>printf</code> problem which Pascal Cuoq addressed, I think GCC is correct here: according to the C99 standard, <code>FLT_EVAL_METHOD == 2</code> should</p>\n\n<blockquote>\n  <p>evaluate all operations and constants to the range and precision of the <code>long double</code> type.</p>\n</blockquote>\n\n<p>So, in this case, both <code>0.1</code> and <code>1.0 / ten</code> are being evaluated to an extended precision approximation of 1/10.</p>\n\n<p>I'm not sure what Clang is doing, though <a href=\"https://stackoverflow.com/q/17663780/392585\">this question</a> might provide some help.</p>\n"}], "owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 28851740, "answer_count": 2, "score": 7, "last_activity_date": 1487136939, "creation_date": 1425462914, "last_edit_date": 1495540973, "question_id": 28851350, "link": "https://stackoverflow.com/questions/28851350/same-flt-eval-method-different-results-in-gcc-clang", "title": "Same FLT_EVAL_METHOD, different results in GCC/Clang", "body": "<p>The following program (adapted from <a href=\"http://blog.frama-c.com/index.php?post/2013/07/06/On-the-precise-analysis-of-C-programs-for-FLT_EVAL_METHOD-2\" rel=\"nofollow noreferrer\">here</a>) is giving inconsistent results when compiled with GCC (4.8.2) and Clang (3.5.1). In particular, the GCC result does not change even when <code>FLT_EVAL_METHOD</code> does.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\n\nint r1;\ndouble ten = 10.0;\n\nint main(int c, char **v) {\n  printf(\"FLT_EVAL_METHOD = %d\\n\", FLT_EVAL_METHOD);\n  r1 = 0.1 == (1.0 / ten);\n  printf(\"0.1 = %a, 1.0/ten = %a\\n\", 0.1, 1.0 / ten);\n  printf(\"r1=%d\\n\", r1);\n}\n</code></pre>\n\n<p>Tests:</p>\n\n<pre><code>$ gcc -std=c99 t.c &amp;&amp; ./a.out\nFLT_EVAL_METHOD = 0\n0.1 = 0x1.999999999999ap-4, 1.0/ten = 0x1.999999999999ap-4\nr1=1\n\n$ gcc -std=c99 -mpfmath=387 t.c &amp;&amp; ./a.out\nFLT_EVAL_METHOD = 2\n0.1 = 0x0.0000000000001p-1022, 1.0/ten = 0x0p+0\nr1=1\n\n$ clang -std=c99 t.c &amp;&amp; ./a.out\nFLT_EVAL_METHOD = 0\n0.1 = 0x1.999999999999ap-4, 1.0/ten = 0x1.999999999999ap-4\nr1=1\n\n$ clang -std=c99 -mfpmath=387 -mno-sse t.c &amp;&amp; ./a.out\nFLT_EVAL_METHOD = 2\n0.1 = 0x0.07fff00000001p-1022, 1.0/ten = 0x0p+0\nr1=0\n</code></pre>\n\n<p>Note that, according to <a href=\"http://blog.frama-c.com/index.php?post/2013/07/06/On-the-precise-analysis-of-C-programs-for-FLT_EVAL_METHOD-2\" rel=\"nofollow noreferrer\">this blog post</a>, GCC 4.4.3 used to output 0 instead of 1 in the second test.</p>\n\n<p>A <a href=\"https://stackoverflow.com/questions/16063820/floating-point-arithmetic-and-machine-epsilon\">possibly related question</a> indicates that a bug has been corrected in GCC 4.6, which might explain why GCC's result is different.</p>\n\n<p>I would like to confirm if any of these results would be incorrect, or if some subtle evaluation steps (e.g. a new preprocessor optimization) would justify the difference between these compilers.</p>\n"}, {"tags": ["c", "go"], "answers": [{"comments": [{"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 1, "creation_date": 1425463674, "post_id": 28851264, "comment_id": 45970159, "body": "A of course! What a fool, thank you! I should have known that :P I think I was getting confused as go doesn&#39;t require you to deference the pointer when you use it like (*object).function or object-&gt;function in C, so I thought taking the address there would be the address of the pointer, not the pointer itself. Thanks!"}, {"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 1, "creation_date": 1425471701, "post_id": 28851264, "comment_id": 45974826, "body": "A small addendum to this, and I think why I was initially getting confused. if you create a custom type (type MyType struct { }) and use that instead of int, when you use Println, you get &#39;&amp;{}&#39; output, not the address. For a custom object do you know how to get the address to print?"}], "tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": true, "score": 7, "last_activity_date": 1425463033, "last_edit_date": 1425463033, "creation_date": 1425462651, "answer_id": 28851264, "question_id": 28851190, "link": "https://stackoverflow.com/questions/28851190/golang-return-object-from-a-function/28851264#28851264", "title": "golang return object from a function", "body": "<p>You are printing the address of the pointer here <code>fmt.Println(&amp;i);</code>. Try this:</p>\n\n<pre><code>func main() {\n    i := createPointerToInt();\n    fmt.Println(i); //--&gt; Remove the ampersand\n}\n</code></pre>\n\n<p><code>i</code> is the pointer returned from <code>createPointerToInt</code> - while <code>&amp;i</code> is the address of the pointer you are trying to print. Note in your C sample you are printing it correctly:</p>\n\n<pre><code>printf(\"%#08x\\n\", r);\n                 ^No ampersand here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1425473908, "post_id": 28851329, "comment_id": 45976155, "body": "Hi there, small update to this and one of the reasons why I think I&#39;d tried to use the ampersands in the wrong place is when using a custom object (<code>type Example struct {}</code>) using <code>fmt.Println</code> produces <code>&amp;{}</code> not a memory address. Is there a way to force <code>fmt.Println</code> to convert that to a memory address?"}], "tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": false, "score": 2, "last_activity_date": 1425462838, "creation_date": 1425462838, "answer_id": 28851329, "question_id": 28851190, "link": "https://stackoverflow.com/questions/28851190/golang-return-object-from-a-function/28851329#28851329", "title": "golang return object from a function", "body": "<p>Change <code>&amp;i</code> to <code>i</code>. You are printing address of i while you should print the value of i.</p>\n\n<pre><code>func createPointerToInt() *int {\n     i := new(int)\n     fmt.Println(i);\n     return i;\n}\n\nfunc main() {\n    i := createPointerToInt();\n    fmt.Println(i);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1425540571, "post_id": 28869270, "comment_id": 46007387, "body": "In the original code the first block was the function and the second was main calling that function. The address being returned was that of the local variable pointer in each case, not the address to the region in memory the pointer was referring to. The reason I made this mistake in the first place is in the online golang tool, when you use a custom type (one you create) and use that in place of int in the example, <code>&amp;{}</code> is printed to the console, not an address, which seemed kind of odd, and I&#39;m not sure how to force an address to print"}, {"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "reply_to_user": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1425565388, "post_id": 28869270, "comment_id": 46021615, "body": "Yes, yes, I was actually talking about the addresses of the two pointers in the original example. Maybe it is too obvious for most people, but it had me confused at first."}, {"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "reply_to_user": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1425567008, "post_id": 28869270, "comment_id": 46022669, "body": "@Tom, You need to use <code>printf</code> to print address of a <code>struct</code>, I updated my answer."}, {"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1425585218, "post_id": 28869270, "comment_id": 46034262, "body": "Awesome that&#39;s just what I was looking for :) Thank you! Much appreciated! @Akavall"}], "tags": [], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "is_accepted": false, "score": 0, "last_activity_date": 1425566797, "last_edit_date": 1425566797, "creation_date": 1425524668, "answer_id": 28869270, "question_id": 28851190, "link": "https://stackoverflow.com/questions/28851190/golang-return-object-from-a-function/28869270#28869270", "title": "golang return object from a function", "body": "<p>But how come in your original code the addresses of the two pointers (not memory addresses the pointers are pointing too) are different?</p>\n\n<pre><code>func main() {\n    i := createPointerToInt();\n    fmt.Println(&amp;i);\n}\n</code></pre>\n\n<p>Is equivalent to:</p>\n\n<pre><code>func main() {\n    var i *int  // declare variable i\n    i = createPointerToInt(); // assign value of\n                              // a different i that was \n                              // declared and initialized\n                              // inside the function\n    fmt.Println(&amp;i);\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<p>To print the address of a struct you need to use:</p>\n\n<pre><code>fmt.Printf(\"%p\\n\", &amp;your_struct)\n</code></pre>\n\n<p><a href=\"https://golang.org/pkg/fmt/\" rel=\"nofollow\">golang.org/pkg/fmt/</a></p>\n\n<p>For example:</p>\n\n<p><a href=\"https://play.golang.org/p/-i9vxGaQQz\" rel=\"nofollow\">goplayground</a></p>\n"}], "owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4596, "favorite_count": 0, "accepted_answer_id": 28851264, "answer_count": 3, "score": 5, "last_activity_date": 1425566797, "creation_date": 1425462445, "last_edit_date": 1425462996, "question_id": 28851190, "link": "https://stackoverflow.com/questions/28851190/golang-return-object-from-a-function", "title": "golang return object from a function", "body": "<p>I am struggling to understand exactly what is happening when you return a new object from a function in go.</p>\n\n<p>I have this</p>\n\n<pre><code>func createPointerToInt() *int {\n    i := new(int)\n    fmt.Println(&amp;i);\n    return i;\n}\n\nfunc main() {\n    i := createPointerToInt();\n    fmt.Println(&amp;i);\n}\n</code></pre>\n\n<p>The values printed returned are </p>\n\n<pre><code>0x1040a128\n0x1040a120\n</code></pre>\n\n<p>I would expect these two values to be the same. I do not understand why there is an 8 byte difference.</p>\n\n<p>In what I see as the equivalent C code:</p>\n\n<pre><code>int* createPointerToInt() {\n    int* i = new int;\n    printf(\"%#08x\\n\", i);\n    return i;\n}\n\nint main() {\n    int* r = createPointerToInt();\n    printf(\"%#08x\\n\", r);\n    return 0;\n}\n</code></pre>\n\n<p>The address returned is the same:</p>\n\n<pre><code>0x8218008\n0x8218008\n</code></pre>\n\n<p>Am I missing something blindingly obvious here? Any clarification would be greatly appreciated!</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1425461676, "post_id": 28850899, "comment_id": 45968922, "body": "Undefined behavior is undefined. It really is that simple. Also, what does &quot;the code works fine&quot; mean? What behavior do you consider fine for this code?"}, {"owner": {"reputation": 133, "user_id": 2343039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1a0ec43327a3a76450bda440e0985fa?s=128&d=identicon&r=PG", "display_name": "user2343039", "link": "https://stackoverflow.com/users/2343039/user2343039"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1425461994, "post_id": 28850899, "comment_id": 45969105, "body": "the code is a task in our class.. by working fine, i mean the printf prints: i = 100, j = -4, *pi = 100 -- pi[1] points on j, seemingly"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1425462011, "post_id": 28850899, "comment_id": 45969113, "body": "If your teacher has no idea that <code>pi[1]</code> is undefined behavior, she&#39;s not a very good teacher."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1425462372, "post_id": 28850899, "comment_id": 45969371, "body": "@user2343039 But why is that &quot;working fine&quot;? What makes that behavior &quot;fine&quot; exactly?"}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1425463138, "post_id": 28850899, "comment_id": 45969841, "body": "If you&#39;re really interested to hear reasons beyond &quot;Undefined behaviour, undefined behaviour&quot;, you could post the asm code generated for you, it&#39;d be easier to explain what exactly happened looking at it. However, I&#39;m afraid the answer to your question might very well be hidden deep in GCC&#39;s internal workings..."}, {"owner": {"reputation": 939, "user_id": 1556829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NKY9p.png?s=128&g=1", "display_name": "Igor S.K.", "link": "https://stackoverflow.com/users/1556829/igor-s-k"}, "edited": false, "score": 2, "creation_date": 1425463532, "post_id": 28850899, "comment_id": 45970073, "body": "@user2343039  You see, pointers in C is always a way to make mess: you can create a pointer, point at any (made up) address you like, change data at that address and you can even get away with it or endup in a segfault. So it&#39;s always a programmer&#39;s job to use pointers smartly.  So if you&#39;re <b>studying C</b> <code>pi[1] = -4;</code> is UB. You shouldn&#39;t use <code>ptr[ind]</code> syntax to access just arbitrary locations. But your question, as you put it, is more about the way your particular compiler works, but not about how to do a proper C programming."}, {"owner": {"reputation": 133, "user_id": 2343039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1a0ec43327a3a76450bda440e0985fa?s=128&d=identicon&r=PG", "display_name": "user2343039", "link": "https://stackoverflow.com/users/2343039/user2343039"}, "edited": false, "score": 0, "creation_date": 1425463905, "post_id": 28850899, "comment_id": 45970311, "body": "Thank you Igor - I think you are right.. I am currently staring at the generated asm code of both codes and there are some differences.. The compiler seems to make different decisions, where to place the variables - thats why the code fails or &quot;succeeds&quot; sometimes."}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1425463954, "post_id": 28850899, "comment_id": 45970343, "body": "@user2343039: you could post that asm code here and edit the question to state that you want low-level details on what&#39;s happening and why, you know. BTW, GCC v4.8.3 gives segfault without the lines in question and no segfault with them (I&#39;m using your compiler settings)"}, {"owner": {"reputation": 18603, "user_id": 981773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/756e2eb1fefca6917bc366d6afdce01c?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/981773/sam"}, "edited": false, "score": 0, "creation_date": 1425474330, "post_id": 28850899, "comment_id": 45976417, "body": "Are you aware that arrays are zero-basd indexed in C? If you wanted to change the content of i, you should say pi[0]=-4; or, more clear: *pi = -4;"}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1425488308, "post_id": 28850899, "comment_id": 45986155, "body": "@user2343039: Your should find a teacher who actually knows some basic C."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 2343039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1a0ec43327a3a76450bda440e0985fa?s=128&d=identicon&r=PG", "display_name": "user2343039", "link": "https://stackoverflow.com/users/2343039/user2343039"}, "edited": false, "score": 0, "creation_date": 1425462928, "post_id": 28850932, "comment_id": 45969731, "body": "Thanks, but why do the 2 lines change something in the code?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 133, "user_id": 2343039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1a0ec43327a3a76450bda440e0985fa?s=128&d=identicon&r=PG", "display_name": "user2343039", "link": "https://stackoverflow.com/users/2343039/user2343039"}, "edited": false, "score": 1, "creation_date": 1425463300, "post_id": 28850932, "comment_id": 45969936, "body": "@user2343039 Once you have undefined behavior in your code anything can happen. So you are seeing crash. You can&#39;t expect some defined results by having undefined behavior in the code.. Get rid of it"}, {"owner": {"reputation": 133, "user_id": 2343039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1a0ec43327a3a76450bda440e0985fa?s=128&d=identicon&r=PG", "display_name": "user2343039", "link": "https://stackoverflow.com/users/2343039/user2343039"}, "edited": false, "score": 0, "creation_date": 1425463712, "post_id": 28850932, "comment_id": 45970185, "body": "it&#39;s not like I can get rid of it.. that code is part of the task.  I wasn&#39;t me, who wrote that code.."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 133, "user_id": 2343039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1a0ec43327a3a76450bda440e0985fa?s=128&d=identicon&r=PG", "display_name": "user2343039", "link": "https://stackoverflow.com/users/2343039/user2343039"}, "edited": false, "score": 1, "creation_date": 1425464078, "post_id": 28850932, "comment_id": 45970429, "body": "@user2343039 Please understand how pointers work. When something works by having UB in the code it doesn&#39;t mean your code is clean. Those 2 lines doesn&#39;t make any sense as you keep changing the address to which the pointer should point.In the end you make it point to variable <code>i</code> which is fine but pi[1] is not fine. We can&#39;t explain UB"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 15, "last_activity_date": 1425461686, "creation_date": 1425461686, "answer_id": 28850932, "question_id": 28850899, "link": "https://stackoverflow.com/questions/28850899/c-memory-management-for-variables/28850932#28850932", "title": "C memory management for variables", "body": "<p><code>pi</code> is a pointer and you are making it point to a integer later when you do</p>\n\n<pre><code>pi[1] = -4;\n</code></pre>\n\n<p>You are accessing the memory which is not under your control or the memory not allocated by you so it leads to undefined behavior hence the seg fault.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 9, "last_activity_date": 1425478036, "last_edit_date": 1592644375, "creation_date": 1425461743, "answer_id": 28850959, "question_id": 28850899, "link": "https://stackoverflow.com/questions/28850899/c-memory-management-for-variables/28850959#28850959", "title": "C memory management for variables", "body": "<p>Statement <code>pi[1] = -4;</code> invoke undefined behavior. Anything could happen. You may get either expected or unexpected results.</p>\n<p><code>pi[1] = -4;</code> is equivalent to <code>*(pi+1) = -4;</code>. Pointer one past the object <code>i</code> is allowed but dereferencing it will invoke undefined behavior.</p>\n<h3>C11:6.5.6 Additive operators:</h3>\n<blockquote>\n<p>7 For the purposes of these operators, a pointer to an object that is not an element of an array behaves the same as a pointer to the first element of an array of length one with the type of the object as its element type.</p>\n<p>8 If both the pointer operand and the result point to elements of the same array object, or one past the last element of the array object, the evaluation shall not produce an overflow; otherwise, the behavior is undefined. <strong>If the result points one past the last element of the array object, it shall not be used as the operand of a unary * operator that is evaluated</strong>.</p>\n</blockquote>\n<hr />\n<blockquote>\n<p>The question is, why do those 2 Lines change anything?</p>\n</blockquote>\n<p>The answer is, its because of <a href=\"https://stackoverflow.com/a/28850959/2455888\">undefined behavior</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1425463720, "post_id": 28851108, "comment_id": 45970190, "body": "the gdb output suggests that <code>j</code> was not assigned a register in either case"}], "tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1425462158, "creation_date": 1425462158, "answer_id": 28851108, "question_id": 28850899, "link": "https://stackoverflow.com/questions/28850899/c-memory-management-for-variables/28851108#28851108", "title": "C memory management for variables", "body": "<p>I could guess that <code>pi=&amp;j</code> prevents the compiler from giving to <code>j</code> a register memory. Thus with it <code>pi[1]</code> is a reference to <code>j</code>, but without it <code>j</code> is in a register and <code>pi[1]</code> is a reference to a value of previously stored <code>ebp</code> register. As <code>ebp</code> becomes garbled, the process crashes when tryng to return from <code>main()</code>.</p>\n\n<p>Having said this, I should repeat what was said by others: <em>it's undefined behaviour in both cases</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "is_accepted": true, "score": 1, "last_activity_date": 1425494752, "creation_date": 1425494752, "answer_id": 28862427, "question_id": 28850899, "link": "https://stackoverflow.com/questions/28850899/c-memory-management-for-variables/28862427#28862427", "title": "C memory management for variables", "body": "<p>With my compiler it is as follows:</p>\n\n<p>Of course <code>pi[1]</code> and <code>&amp;pi[1]</code> is undefined behavior.</p>\n\n<p>Setting a breakpoint on <code>pi[1] = -4;</code> and running the program:</p>\n\n<p>This is the output with <code>pi = &amp;j; pi = &amp;i;</code></p>\n\n<pre><code>Breakpoint 1, main (argc=1, argv=0x7fffffffe428) at tmp.c:12\n12      pi[1] = -4;\n(gdb) p &amp;j\n$1 = (int *) 0x7fffffffe334\n(gdb) p &amp;i\n$2 = (int *) 0x7fffffffe330\n(gdb) p &amp;pi\n$3 = (int **) 0x7fffffffe338\n(gdb) p &amp;pi[1]\n$4 = (int *) 0x7fffffffe334\n(gdb) c\nContinuing.\ni = 100, j = -4, *pi = 100\n[Inferior 1 (process 2890) exited normally]\n(gdb) \n</code></pre>\n\n<p><code>&amp;pi[1]</code> points to <code>j</code> by chance</p>\n\n<p>This is the output without <code>pi = &amp;j; pi = &amp;i;</code></p>\n\n<pre><code>12      pi[1] = -4;\n(gdb) p &amp;j\n$1 = (int *) 0x7fffffffe33c\n(gdb) p &amp;i\n$2 = (int *) 0x7fffffffe32c\n(gdb) p &amp;pi\n$3 = (int **) 0x7fffffffe330\n(gdb) p &amp;pi[1]\n$4 = (int *) 0x7fffffffe330\n(gdb) c\nContinuing.\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000040056d in main (argc=1, argv=0x7fffffffe428) at tmp.c:13\n13  printf(\"i = %d, j = %d, *pi = %d\\n\", i, j, *pi);\n(gdb) p pi\n$5 = (int *) 0x7ffffffffffc\n</code></pre>\n\n<p>With <code>pi[1] = -4 (0xfffffffc)</code> the pointer <code>pi</code> is modified pointing to a page where the process isn't allowed to read from, so the segmentation fault occurs.</p>\n\n<p>You did not print <code>pi</code>, <code>&amp;pi</code> and <code>&amp;pi[1]</code> (which is UB), which would be of interest.</p>\n\n<p>The answer to your question is:</p>\n\n<p>The compiler is free to decide where and in which order it arranges the variables in the stack frame. As you changed the source code of the function the compiler can decide differently. Additionally, <code>&amp;pi[1]</code> can point anywhere, as it is undefined behavior.</p>\n"}], "owner": {"reputation": 133, "user_id": 2343039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1a0ec43327a3a76450bda440e0985fa?s=128&d=identicon&r=PG", "display_name": "user2343039", "link": "https://stackoverflow.com/users/2343039/user2343039"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 28862427, "answer_count": 4, "score": 5, "last_activity_date": 1425494752, "creation_date": 1425461593, "last_edit_date": 1425481803, "question_id": 28850899, "link": "https://stackoverflow.com/questions/28850899/c-memory-management-for-variables", "title": "C memory management for variables", "body": "<p>I am new to C and I currently have some troubles. Please have a look at the following Code:</p>\n\n<pre><code>int main (int argc, char *argv[]) {\n    int j = 2;\n    int i = 100;    \n    int *pi = &amp;i;\n\n    pi = &amp;j;    //those 2 lines should do nothing, in my opinion\n    pi = &amp;i;    //\n\n    pi[1] = -4;\n    printf(\"i = %d, j = %d, *pi = %d\\n\", i, j, *pi);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The code fails with a SegFault. Some investigation with gdb:</p>\n\n<pre><code>(gdb) print &amp;j\n$1 = (int *) 0x7fffffffde80\n(gdb) print &amp;i\n$2 = (int *) 0x7fffffffde84\n</code></pre>\n\n<p>However, without the 2 lines, the code works fine, because i and j seem to swap places in the memory - but why??</p>\n\n<pre><code>(gdb) print &amp;j\n$1 = (int *) 0x7fffffffde84\n(gdb) print &amp;i\n$2 = (int *) 0x7fffffffde80\n</code></pre>\n\n<p>I asked my teacher, but unfortunately she had no idea.</p>\n\n<p>Thanks in advance!!</p>\n\n<p>EDIT: by working fine, i mean the printf prints: i = 100, j = -4, *pi = 100 -- pi[1] points on j, seemingly</p>\n\n<p>The question is, why do those 2 Lines change anything?</p>\n"}, {"tags": ["c", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1425462802, "post_id": 28850797, "comment_id": 45969646, "body": "No, <a href=\"http://stackoverflow.com/a/605858/1606345\">don&#39;t cast the result of malloc</a> in C"}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 1, "last_activity_date": 1425461274, "creation_date": 1425461274, "answer_id": 28850797, "question_id": 28850736, "link": "https://stackoverflow.com/questions/28850736/error-when-parsing-input-c/28850797#28850797", "title": "error when Parsing input c", "body": "<p>After </p>\n\n<pre><code>buf = \"GET /index.html HTTP/1.1\\n Host: www.gla.ac.uk\\n\";\n</code></pre>\n\n<p>do not</p>\n\n<pre><code>free(buf);\n</code></pre>\n\n<p>I suppose you should do</p>\n\n<pre><code>strncpy(buf, \"GET /index.html HTTP/1.1\\n Host: www.gla.ac.uk\\n\", 100);\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>buf = \"GET /index.html HTTP/1.1\\n Host: www.gla.ac.uk\\n\";\n</code></pre>\n\n<p>And correct mallocing looks like:</p>\n\n<pre><code>char* buf = (char *)malloc(100 *sizeof(char));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1425462564, "post_id": 28850843, "comment_id": 45969503, "body": "Good spot.  Just tried it in bash and I get the exact error reported in the question."}], "tags": [], "owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "is_accepted": true, "score": 6, "last_activity_date": 1425461433, "creation_date": 1425461433, "answer_id": 28850843, "question_id": 28850736, "link": "https://stackoverflow.com/questions/28850736/error-when-parsing-input-c/28850843#28850843", "title": "error when Parsing input c", "body": "<p>I think you are trying to run source code without compiling. That's not the proper way to do.\n<br>First compile the source code</p>\n\n<pre><code>gcc test.c -o test\n</code></pre>\n\n<p>Then execute it</p>\n\n<pre><code>./test\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 243, "user_id": 4011767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba41c86519ceb89402d502b53d4ae9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/4011767/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1425461714, "creation_date": 1425461714, "answer_id": 28850944, "question_id": 28850736, "link": "https://stackoverflow.com/questions/28850736/error-when-parsing-input-c/28850944#28850944", "title": "error when Parsing input c", "body": "<p>You actually want a <em>copy</em> of your string, as the string literal you'd like to assign is constant. You can use <code>strdup</code>, or probably safer, use <code>strndup</code> to make a copy of the string. This does implicitly use malloc, so you should <code>free</code> it afterwards.</p>\n"}], "owner": {"reputation": 69, "user_id": 4259010, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bc606864deed890fce979a96016872c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Dale", "link": "https://stackoverflow.com/users/4259010/jamie-dale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 28850843, "answer_count": 3, "score": -1, "last_activity_date": 1425462620, "creation_date": 1425461114, "last_edit_date": 1425462620, "question_id": 28850736, "link": "https://stackoverflow.com/questions/28850736/error-when-parsing-input-c", "title": "error when Parsing input c", "body": "<p>Hi i am writing a simple c program to test parsing a buffer in c but when i run the program i get the following errors:</p>\n\n<pre><code>./test.c: line 4: syntax error near unexpected token `('\n./test.c: line 4: `int main()'\n</code></pre>\n\n<p>Does anyone know why these errors are occurring? \nThanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n\n    char* command;\n\n    char* buf = malloc(100 *sizeof(char));\n\n    buf = \"GET /index.html HTTP/1.1\\n Host: www.gla.ac.uk\\n\";\n\n    command  = strtok(buf, \" \");\n    printf(\"%s\", command );\n\n    free(buf);\n}\n</code></pre>\n"}, {"tags": ["c", "linker", "arm", "static-linking", "symbols"], "comments": [{"owner": {"reputation": 12154, "user_id": 2390083, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/68954dd2e17de26ff9968d33244b03b8?s=128&d=identicon&r=PG", "display_name": "Beryllium", "link": "https://stackoverflow.com/users/2390083/beryllium"}, "edited": false, "score": 0, "creation_date": 1425462323, "post_id": 28850669, "comment_id": 45969344, "body": "What do you mean by &quot;symbol file&quot;? Do you mean a <i>linker script</i>? The latter is a file for GNU ld in which normally symbols like <code>__heap_start</code> etl. al. are defined."}, {"owner": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "reply_to_user": {"reputation": 12154, "user_id": 2390083, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/68954dd2e17de26ff9968d33244b03b8?s=128&d=identicon&r=PG", "display_name": "Beryllium", "link": "https://stackoverflow.com/users/2390083/beryllium"}, "edited": false, "score": 0, "creation_date": 1425480083, "post_id": 28850669, "comment_id": 45980358, "body": "By symbol file I meant the output of arm-none-eabi-nm, not the linker script file."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425481011, "post_id": 28854740, "comment_id": 45981047, "body": "Thank you for the response. But, this did not work for me. I get the error &quot;file format not recognized; treating as linker script&quot; and &quot;syntax error collect2.exe: error: ld returned 1 exit status&quot; at line:2. The modified symbol was like this: __heap_size = 0x00000000 __vect_table = 0x00000000 __vector_table = 0x00000000 ___data_size = 0x00000074 __stack_size = 0x00000400"}, {"owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "reply_to_user": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425481536, "post_id": 28854740, "comment_id": 45981413, "body": "Are you putting the semicolon at the end of each line?"}, {"owner": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425482180, "post_id": 28854740, "comment_id": 45981861, "body": "YES! it worked. I missed the semi-colons last time. Thanks Richard. Thanks to the power of vim I was quickly able to convert the standard symbol file to the format that you have mentioned. But this would mean I will need to have a post-build script to convert the arm-none-eabi-nm generated symbol file to this format. Would you know if there is an option/technique to load the utility generated symbol file itself at link time?"}, {"owner": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425482748, "post_id": 28854740, "comment_id": 45982280, "body": "I have like more than 1000 symbols which needs to be imported. And because this is a utility generated file, I was thinking the same format should work for another utility (linker) under the same toolchain. Anyways,  thanks to you, I am glad that there at least one way to do this, with this toolchain."}, {"owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "reply_to_user": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425482937, "post_id": 28854740, "comment_id": 45982409, "body": "Try this (replace &quot;elk&quot; with your object file name."}, {"owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "reply_to_user": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425482979, "post_id": 28854740, "comment_id": 45982433, "body": "nm elk | sed -e &quot;s/&#40;[0-9a-f]*&#41; . &#40;.*&#41;/\\2 = \\1;/&quot;"}, {"owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "reply_to_user": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425483165, "post_id": 28854740, "comment_id": 45982563, "body": "Oops! I forgot the &quot;0x&quot;: nm elk | sed -e &quot;s/&#40;[0-9a-f]*&#41; . &#40;.*&#41;/\\2 = 0x\\1;/&quot;"}, {"owner": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "edited": false, "score": 0, "creation_date": 1425540138, "post_id": 28854740, "comment_id": 46007226, "body": "I am going to continue investigating into what could be a direct symbol loading method and wait for some more time before I settle on this as my final solution. I really do appreciate your help. Thanks."}], "tags": [], "owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "is_accepted": false, "score": 0, "last_activity_date": 1425472739, "creation_date": 1425472739, "answer_id": 28854740, "question_id": 28850669, "link": "https://stackoverflow.com/questions/28850669/loading-symbol-file-while-linking/28854740#28854740", "title": "Loading symbol file while linking", "body": "<p>If you're using the GNU linker, just create a file that looks something like this and include it on the linker command line:</p>\n\n<pre><code>__intstk_top__ = __syspage_base__ + 0x2000;\n__abortstk_top__ = __syspage_base__ + 0x3000;\n__undefinedstk_top__ = __syspage_base__ + 0x4000;\n__svcstk_top__ = __syspage_base__ + 0x6000;\n__sysstk_top__ = __syspage_base__ + 0x8000;\n__boot_pgd__ = __syspage_base__ + 0x8000;\n__boot_pgd_physical__ = __syspage_physical_base__ + 0x8000;\n__boot_pte0__ = __syspage_base__ + 0xC000;\n__boot_pte0_physical__ = __syspage_physical_base__ + 0xC000;\n__boot_pte1__ = __syspage_base__ + 0xD000;\n__boot_pte1_physical__ = __syspage_physical_base__ + 0xD000;\n__syspage_physical_base__ = 0x48000000;\n__syspage_base__ = 0x80000000;\n__syspage_size__ = 0xE000;\n__device_base__ = 0xC0000000;\n__user_limit__ = 0x7FFFFFFF;\n__virtual_offset__ = 0x80000000 - __syspage_physical_base__;\n__dev_offset__ = 0xC0000000;\n__mmu_enabled__ = 1;\n__kernel_base__ = __syspage_base__;\n</code></pre>\n\n<p>As you can see, the symbols can be defined as constants or with simple expressions that can be resolved at link time.</p>\n"}], "owner": {"reputation": 13, "user_id": 1209067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354d513d6f9b56e0612069321cae7c53?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu S", "link": "https://stackoverflow.com/users/1209067/vishnu-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425472739, "creation_date": 1425460918, "last_edit_date": 1425462207, "question_id": 28850669, "link": "https://stackoverflow.com/questions/28850669/loading-symbol-file-while-linking", "title": "Loading symbol file while linking", "body": "<p>I am trying to load a symbol file at the time of linking. I am providing the symbol.txt file along with other libraries that I link. These are the two things I tried.</p>\n\n<ul>\n<li><p>1st, I provided the symbol file exactly as what was the output of arm-none-eabi-nm, but this returned with a syntax error on line 1 itself.</p></li>\n<li><p>2nd, I changed the format a bit. I added <code>#&lt; SYMDEFS &gt;#</code> at the beginning of the file and made the changes to follow ARM's symdef file format. This gave me the error </p></li>\n</ul>\n\n<blockquote>\n  <p>file not recognized: File format not recognized\n  collect2.exe: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>Does anyone have any experience in loading symbol files to the linker (arm-none-eabi-ld)? If yes, please help me figure out what I am missing above.</p>\n\n<p>The first few lines of my symbol file is as follows:</p>\n\n<blockquote>\n  <p>\"#&lt; SYMDEFS >#\"   ;There is no \" here, I used it to remove the markup<br>\n  0x00000000 A __heap_size<br>\n  0x00000000 R __vect_table<br>\n  0x00000000 R __vector_table<br>\n  0x00000074 A ___data_size  </p>\n</blockquote>\n\n<p>I know that this format works with armlink.</p>\n"}, {"tags": ["c", "string", "char", "compare", "strcmp"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1425461024, "post_id": 28850657, "comment_id": 45968527, "body": "<code>&#39;\\\\&#39;</code> or <code>&#39;&#47;&#39;</code>? And <i>how</i> are you comparing the characters?"}, {"owner": {"reputation": 51, "user_id": 4199954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1cdfbf87aad58ddc85414db9ae07d016?s=128&d=identicon&r=PG&f=1", "display_name": "athinatha", "link": "https://stackoverflow.com/users/4199954/athinatha"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1425461106, "post_id": 28850657, "comment_id": 45968572, "body": "sorry i edit my question. i mean &#39;\\&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4199954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1cdfbf87aad58ddc85414db9ae07d016?s=128&d=identicon&r=PG&f=1", "display_name": "athinatha", "link": "https://stackoverflow.com/users/4199954/athinatha"}, "edited": false, "score": 0, "creation_date": 1425461425, "post_id": 28850726, "comment_id": 45968767, "body": "in my program im getting char by char the code and im trying to find if we have comment. So i want to find * because in my language comments are inside this *.....*\\. So i want firstly to find \\ then * etc but i cant."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 51, "user_id": 4199954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1cdfbf87aad58ddc85414db9ae07d016?s=128&d=identicon&r=PG&f=1", "display_name": "athinatha", "link": "https://stackoverflow.com/users/4199954/athinatha"}, "edited": false, "score": 1, "creation_date": 1425461483, "post_id": 28850726, "comment_id": 45968802, "body": "How does this relate to the original question ? If you have a new question then please post it as such."}, {"owner": {"reputation": 51, "user_id": 4199954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1cdfbf87aad58ddc85414db9ae07d016?s=128&d=identicon&r=PG&f=1", "display_name": "athinatha", "link": "https://stackoverflow.com/users/4199954/athinatha"}, "edited": false, "score": 0, "creation_date": 1425461872, "post_id": 28850726, "comment_id": 45969039, "body": "im telling you this because when im going to compare my character with &#39;\\&#39; im getting wrong message but now that i used the ascii code 92 i think is true"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 51, "user_id": 4199954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1cdfbf87aad58ddc85414db9ae07d016?s=128&d=identicon&r=PG&f=1", "display_name": "athinatha", "link": "https://stackoverflow.com/users/4199954/athinatha"}, "edited": false, "score": 2, "creation_date": 1425461952, "post_id": 28850726, "comment_id": 45969080, "body": "Why aren&#39;t you just using <code>&#39;\\\\&#39;</code> as described above ? That would be a better solution then using the ASCII code."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 6, "last_activity_date": 1425461087, "creation_date": 1425461087, "answer_id": 28850726, "question_id": 28850657, "link": "https://stackoverflow.com/questions/28850657/how-to-compare-a-string-with-symbol/28850726#28850726", "title": "How to compare a string with symbol &#39;\\&#39;", "body": "<p>The backslash <code>\\</code> is used as an <a href=\"http://en.wikipedia.org/wiki/Escape_character\">escape character</a>, so you would need to write:</p>\n\n<pre><code>else if (character[0] == '\\\\'){\n</code></pre>\n\n<p>In this case the backslash is being used to escape itself.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 4199954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1cdfbf87aad58ddc85414db9ae07d016?s=128&d=identicon&r=PG&f=1", "display_name": "athinatha", "link": "https://stackoverflow.com/users/4199954/athinatha"}, "edited": false, "score": 0, "creation_date": 1425461432, "post_id": 28850737, "comment_id": 45968776, "body": "in my program im getting char by char the code and im trying to find if we have comment. So i want to find * because in my language comments are inside this *.....*\\. So i want firstly to find \\ then * etc but i cant."}], "tags": [], "owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "is_accepted": false, "score": 2, "last_activity_date": 1425461120, "creation_date": 1425461120, "answer_id": 28850737, "question_id": 28850657, "link": "https://stackoverflow.com/questions/28850657/how-to-compare-a-string-with-symbol/28850737#28850737", "title": "How to compare a string with symbol &#39;\\&#39;", "body": "<p>I'm not clear on what you ask. Do you mean to compare like this:</p>\n\n<pre><code>if (character[0] == '\\\\') { \n</code></pre>\n\n<p>or you could do</p>\n\n<pre><code>if (character[0] == 92) { // ASCII-Code\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4199954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1cdfbf87aad58ddc85414db9ae07d016?s=128&d=identicon&r=PG&f=1", "display_name": "athinatha", "link": "https://stackoverflow.com/users/4199954/athinatha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2711, "favorite_count": 0, "accepted_answer_id": 28850726, "answer_count": 2, "score": 0, "last_activity_date": 1425461414, "creation_date": 1425460868, "last_edit_date": 1425461070, "question_id": 28850657, "link": "https://stackoverflow.com/questions/28850657/how-to-compare-a-string-with-symbol", "title": "How to compare a string with symbol &#39;\\&#39;", "body": "<p>I have a project and somewhere in my code I'm writing this:</p>\n\n<pre><code>else if (character[0] == '\\'){\n</code></pre>\n\n<p>How can I compare my character with this symbol? Every other symbol that I tried to compare like <code>,</code>, <code>;</code>, etc. is done and this is the only symbol that I'm getting a wrong message.</p>\n"}, {"tags": ["c", "curl", "cloud", "libcurl"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1425460810, "post_id": 28850598, "comment_id": 45968390, "body": "so is your question really &quot;how do I transform the first JSON into the second JSON&quot;?"}, {"owner": {"reputation": 67, "user_id": 2656194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JoOJL.jpg?s=128&g=1", "display_name": "zombinary", "link": "https://stackoverflow.com/users/2656194/zombinary"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1425461551, "post_id": 28850598, "comment_id": 45968840, "body": "My favourite is it to write my data in one json and add new data behind them. But i could say if this possible."}], "owner": {"reputation": 67, "user_id": 2656194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JoOJL.jpg?s=128&g=1", "display_name": "zombinary", "link": "https://stackoverflow.com/users/2656194/zombinary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425460702, "creation_date": 1425460702, "question_id": 28850598, "link": "https://stackoverflow.com/questions/28850598/lubcurl-put-data-to-the-end-of-a-string", "title": "lubcurl put data to the end of a string", "body": "<p>i will write cycling data to my cloud to display the values in a trend on a html page.</p>\n\n<pre><code>$ curl -X PUT  -d '{\"x\": 10, \"y\": 20}' https://...firebaseio.com/trend.json\n</code></pre>\n\n<p>My question is what is the best way to do this.\nMy idea is it to write a string and add the new value behind them.\nOr is it better to create a ring buffer with a fix size like this?</p>\n\n<pre><code>$ curl -X PUT  -d '{\"x.1\": 10, \"y.1\": 20}' https://...firebaseio.com/trend.json\n</code></pre>\n\n<p>What is the best way?</p>\n\n<p>thanks for help and ideas</p>\n"}, {"tags": ["c", "codeblocks", "linker-errors", "glfw"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user966588"}, "edited": false, "score": 0, "creation_date": 1425460886, "post_id": 28850535, "comment_id": 45968438, "body": "Did you copy the <code>.dll</code> file for your library GLFW in bin of your project"}, {"owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "edited": false, "score": 0, "creation_date": 1425464981, "post_id": 28850535, "comment_id": 45970987, "body": "Try repeating <code>-lglfw3</code> at the end of the linkage flags, so that the linker re-examines the lib one more time (that&#39;s assuming that <code>glfwInit</code> is located in that lib). In general, the linker unfortunately only resolves left to right and not both ways; which means that the order of the library statements is crucial."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 1177034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3989d57a956d8c78bb207edf7c3cb159?s=128&d=identicon&r=PG", "display_name": "rykoder", "link": "https://stackoverflow.com/users/1177034/rykoder"}, "edited": false, "score": 0, "creation_date": 1425533554, "post_id": 28853303, "comment_id": 46004919, "body": "Oh thanks for pointing that out, I&#39;d never thought of using CMake to show the build options used in example project. After a bit of a break however, I tested something out and now I don&#39;t think I diagnosed my problem properly before, I&#39;ve edited my question a bit to elaborate."}], "tags": [], "owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "is_accepted": false, "score": 0, "last_activity_date": 1425468568, "creation_date": 1425468568, "answer_id": 28853303, "question_id": 28850535, "link": "https://stackoverflow.com/questions/28850535/linking-problems-with-glfw-mingw/28853303#28853303", "title": "Linking problems with GLFW MinGW", "body": "<p>Well, <a href=\"http://www.glfw.org/\" rel=\"nofollow\">GLFW</a> has a <a href=\"http://www.cmake.org/\" rel=\"nofollow\">CMake</a> build system. So you can navigate to your GLFW source code and do the following to build the example \"boing\":</p>\n\n<pre><code>C:\\glfw-3.1&gt;mkdir build\n\nC:\\glfw-3.1&gt;cd build\n\nC:\\glfw-3.1\\build&gt;cmake -G \"CodeBlocks - MinGW Makefiles\" ..\\\n-- The C compiler identification is GNU 4.8.3\n-- Check for working C compiler: C:/winbuilds/bin/gcc.exe\n-- Check for working C compiler: C:/winbuilds/bin/gcc.exe -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Found OpenGL: opengl32\n-- Looking for include file pthread.h\n-- Looking for include file pthread.h - found\n-- Looking for pthread_create\n-- Looking for pthread_create - found\n-- Found Threads: TRUE\n-- Found Doxygen: C:/Work/env/doxygen-1.8.8/bin/doxygen.exe (found version \"1.8.8\")\n-- Performing Test _GLFW_HAS_DEP\n-- Performing Test _GLFW_HAS_DEP - Success\n-- Performing Test _GLFW_HAS_ASLR\n-- Performing Test _GLFW_HAS_ASLR - Success\n-- Performing Test _GLFW_HAS_64ASLR\n-- Performing Test _GLFW_HAS_64ASLR - Failed\n-- Using Win32 for window creation\n-- Using WGL for context creation\n-- Configuring done\n-- Generating done\n-- Build files have been written to: C:/Users/Brian.sidebotham/Desktop/glfw-3.1/glfw-3.1/build\n\nC:\\glfw-3.1\\build&gt;mingw32-make boing VERBOSE=ON\n</code></pre>\n\n<p>After some initial output for building GFLW itself you get the build commands for the \"boing\" example, and in particular the link command:</p>\n\n<pre><code>C:\\winbuilds\\bin\\gcc.exe -mwindows -Wl,--whole-archive CMakeFiles\\boing.dir/objects.a -Wl,--no-whole-archive  -o boing.exe -Wl,--out-implib,libboing.dll.a -Wl,--major-image-version,0,--minor-image-version,0  ..\\src\\libglfw3.a -lglu32 -lopengl32 -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32\n</code></pre>\n\n<p>and so, that's what you'll be looking to mimic for a static library. If you're wanting to link against a DLL then do the same, but include -DBUILD_SHARED_LIBS=ON when configuring with CMake and you get the following link:</p>\n\n<pre><code>C:\\winbuilds\\bin\\gcc.exe -mwindows -Wl,--whole-archive CMakeFiles\\boing.dir/objects.a -Wl,--no-whole-archive  -o boing.exe -Wl,--out-implib,libboing.dll.a -Wl,--major-image-version,0,--minor-image-version,0  ..\\src\\glfw3dll.a -lglu32 -lopengl32 -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32\n</code></pre>\n\n<p>Let us know if you have any more issues. The examples are working well for me.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 1177034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3989d57a956d8c78bb207edf7c3cb159?s=128&d=identicon&r=PG", "display_name": "rykoder", "link": "https://stackoverflow.com/users/1177034/rykoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1425764152, "last_edit_date": 1425764152, "creation_date": 1425536843, "answer_id": 28871354, "question_id": 28850535, "link": "https://stackoverflow.com/questions/28850535/linking-problems-with-glfw-mingw/28871354#28871354", "title": "Linking problems with GLFW MinGW", "body": "<p>OK I got this figured out! The problem wasn't actually that my project couldn't link to glfw properly, it could link fine. The problem was that it wasn't just linking to my project though, I had another static library I had written, and that library was calling glfw functions. Now, I had been adding all my libraries through \"Other linker options\" In CodeBlocks except for my static library, I was linking that one in the \"Link Libraries\" Box. I can only assume that this made it so that it was linking to my library and glfw in the wrong order, but I'm pretty sure that's what was going down.</p>\n"}], "owner": {"reputation": 23, "user_id": 1177034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3989d57a956d8c78bb207edf7c3cb159?s=128&d=identicon&r=PG", "display_name": "rykoder", "link": "https://stackoverflow.com/users/1177034/rykoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 28871354, "answer_count": 2, "score": 1, "last_activity_date": 1425764152, "creation_date": 1425460470, "last_edit_date": 1425540184, "question_id": 28850535, "link": "https://stackoverflow.com/questions/28850535/linking-problems-with-glfw-mingw", "title": "Linking problems with GLFW MinGW", "body": "<p>I'm having some linking problems with GLFW (version 3.1) in Code::blocks. I've done a lot of searching around and nothing I can find seems to be correcting anything.\nI am currently using the 32-bit binary of the library and have these linker options in my project</p>\n\n<pre><code>-lmingw32  -lglew32 -lglfw3 -lopengl32 -lglu32 -lgdi32\n</code></pre>\n\n<p>I've been gettin' a little frustrated, as the majority of the questions from other people I've looked into have always had the problem be that they where missing gdi32, but that isn't the case here, but I can't figure out what is.</p>\n\n<p>The error I am getting is</p>\n\n<pre><code>undefined reference to 'glfwInit'\n</code></pre>\n\n<p>If anyone has any idea as to what I might be doing wrong, I would greatly appreciate some assistance.</p>\n\n<p>Edit:\nI had forgotten to try and test a glfw function (glfwInit and glfwTerminate) in the actual project I was working on and I tried that out just now and it worked fine. I did a test by just calling a glfw function in my winmain function and it worked fine. The problem occurs only when I am calling a function in a static library that I made which calls glfwInit(), and that is the one that is being left undefined. I assumed that if I included and linked to glfw in my current project, then other libraries I am using would also be able to call glfw functions, is that not the case?</p>\n\n<p>Another note. If I include glfw3.h in the file in the static library that references the glfw function it works fine, but that file is already including a precompiled header that includes glfw3.h so it should work even without explicitly including glf3.h in the file shouldn't it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1425460685, "post_id": 28850493, "comment_id": 45968324, "body": "And what&#39;s up with that horrendous conditional expression? Shouldn&#39;t it be <code>(unsigned long) x &amp; 1 != 0) ? (true ? 1 : 0) : (!true ? (x, 0), -0)</code>?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1425461226, "post_id": 28850493, "comment_id": 45968650, "body": "Yes, naturally :-) By the way, is the <code>&lt;=</code> correct?"}, {"owner": {"reputation": 116, "user_id": 4628490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Mxiv.png?s=128&g=1", "display_name": "B.T Gutsu", "link": "https://stackoverflow.com/users/4628490/b-t-gutsu"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1425461326, "post_id": 28850493, "comment_id": 45968709, "body": "Thanks a lot man! Now I see your point ;-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1425463281, "post_id": 28850493, "comment_id": 45969925, "body": "<code>x % n</code> is the same as <code>x &amp; (n-1)</code> iff <code>n</code> is a power of 2.  I think people use the <code>&amp;</code> form because they think it&#39;s a micro-optimization."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1425469671, "post_id": 28850493, "comment_id": 45973524, "body": "@Matt NcNabb: Not quite, rounding towards zero of signed integers causes trouble and is the reason for some such masking."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1425470358, "post_id": 28850493, "comment_id": 45973916, "body": "@doynax good point although doing bitwise operations on signed integers is inherently non-portable"}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 4011767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba41c86519ceb89402d502b53d4ae9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/4011767/jan"}, "edited": false, "score": 2, "creation_date": 1425460849, "post_id": 28850570, "comment_id": 45968414, "body": "When working with single bits or bitwise operations, I feel that using &amp; instead of % is much more natural. After all, they are only equivalent in <i>this special case</i>."}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 1, "creation_date": 1425460927, "post_id": 28850570, "comment_id": 45968467, "body": "I think the question here is not whether the compiler knows x/2 = x&gt;&gt;1, but rather if it knows to replace the % operation with &amp; a operation. The answer to that is no, it does not!"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1425460964, "post_id": 28850570, "comment_id": 45968493, "body": "@Pandrei: The compiler isn&#39;t generally allowed to modify your source code! But it will probably generate the same machine code for both versions of the source code."}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1425461036, "post_id": 28850570, "comment_id": 45968532, "body": "@KerrekSB I was referring to the generated code. So your answer does not really address the question in my opinion."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 243, "user_id": 4011767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba41c86519ceb89402d502b53d4ae9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/4011767/jan"}, "edited": false, "score": 0, "creation_date": 1425461152, "post_id": 28850570, "comment_id": 45968597, "body": "@Jan: Well, perhaps. If you really want to do bit-wise operations, of course you should use bit-wise operations. Whether this situation calls for it is debatable; in some sense it&#39;s computing the &quot;digits of an integer in a place-value representation&quot;, which is generally done with divide and remainder, and doesn&#39;t call for being &quot;specialized&quot; for base two. But it depends."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1425461166, "post_id": 28850570, "comment_id": 45968612, "body": "@Pandrei: Please feel free to post your own answer!"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 10, "last_activity_date": 1425460593, "creation_date": 1425460593, "answer_id": 28850570, "question_id": 28850493, "link": "https://stackoverflow.com/questions/28850493/is-bitwise-equivalent-to-modulo-operation/28850570#28850570", "title": "Is bitwise &amp; equivalent to modulo operation", "body": "<p>The representation of unsigned integers is specified by the Standard: An unsigned integer with <em>n</em> value bits represents numbers in the range [0, 2<sup><em>n</em></sup>), with the usual binary semantics. Therefore, the least significant bit is the remainder of the value of the integer after division by 2.</p>\n\n<p>It is debatable whether it's useful to replace readable mathematics with low-level bit operations; this kind of style was popular in the 70s when compilers weren't very smart. Nowadays I think you can assume that a compiler will know that dividing by two can be realized as bit shift etc., so you can just Write What You Mean.</p>\n"}, {"tags": [], "owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "is_accepted": false, "score": 1, "last_activity_date": 1425461670, "creation_date": 1425461670, "answer_id": 28850926, "question_id": 28850493, "link": "https://stackoverflow.com/questions/28850493/is-bitwise-equivalent-to-modulo-operation/28850926#28850926", "title": "Is bitwise &amp; equivalent to modulo operation", "body": "<p>what the code snippet does, is not to convert a unsigned int into a binary number (it's internal representation is already binary). It created a bit array with the values of the unsigned int's bits. Spreads it out over an array if you will.</p>\n\n<pre><code>e.g. x=3  =&gt;  bits[2]=0 bits[1]=1 bits[0]=1\n</code></pre>\n\n<p>To do this </p>\n\n<ol>\n<li>it selects the last bit of the number and places it the <code>bits</code> array\n(the &amp;1 operation).</li>\n<li>then shifts the number to the right by one position ( /2 is\nequivalent to >>1).</li>\n<li>Repeats the above operations for all the bits</li>\n</ol>\n\n<p>You could have used %2 instead of &amp;1, the generated code should be the same. But I guess it's just a matter of programming style and preference. For most programmers, the &amp;1 is a lot clearer than %2. </p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1425470792, "post_id": 28853604, "comment_id": 45974194, "body": "To be consistent, I think <code>x % 2</code> should be used with <code>x &#47;= 2</code>; and <code>x &amp; 1</code> should be used with <code>x &gt;&gt;= 1</code> .  I have a strong mathematics background and prefer <code>%</code> so you may be right there :)"}, {"owner": {"reputation": 116, "user_id": 4628490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Mxiv.png?s=128&g=1", "display_name": "B.T Gutsu", "link": "https://stackoverflow.com/users/4628490/b-t-gutsu"}, "edited": false, "score": 0, "creation_date": 1425486430, "post_id": 28853604, "comment_id": 45984910, "body": "Thank you guys for all your input!"}], "tags": [], "owner": {"reputation": 382, "user_id": 4631503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIOPs.jpg?s=128&g=1", "display_name": "MarcelSimon", "link": "https://stackoverflow.com/users/4631503/marcelsimon"}, "is_accepted": false, "score": 1, "last_activity_date": 1425469468, "creation_date": 1425469468, "answer_id": 28853604, "question_id": 28850493, "link": "https://stackoverflow.com/questions/28850493/is-bitwise-equivalent-to-modulo-operation/28853604#28853604", "title": "Is bitwise &amp; equivalent to modulo operation", "body": "<p>In your example, <code>%2</code> and <code>&amp;1</code> are the same. Which one to take is probably simply a matter of taste. While <code>%2</code> is probably more easier to read for people with a strong mathematics background, <code>&amp;1</code> is easier to understand for people with a strong technical background.</p>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 4640390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sfg9X.jpg?s=128&g=1", "display_name": "Jennifer Massey", "link": "https://stackoverflow.com/users/4640390/jennifer-massey"}, "is_accepted": false, "score": 1, "last_activity_date": 1425916571, "creation_date": 1425916571, "answer_id": 28946367, "question_id": 28850493, "link": "https://stackoverflow.com/questions/28850493/is-bitwise-equivalent-to-modulo-operation/28946367#28946367", "title": "Is bitwise &amp; equivalent to modulo operation", "body": "<p>They are equivalent in the very special case. It's an old Fortran influenced style.</p>\n"}], "owner": {"reputation": 116, "user_id": 4628490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Mxiv.png?s=128&g=1", "display_name": "B.T Gutsu", "link": "https://stackoverflow.com/users/4628490/b-t-gutsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "accepted_answer_id": 28850570, "answer_count": 4, "score": 4, "last_activity_date": 1425916571, "creation_date": 1425460361, "last_edit_date": 1425468171, "question_id": 28850493, "link": "https://stackoverflow.com/questions/28850493/is-bitwise-equivalent-to-modulo-operation", "title": "Is bitwise &amp; equivalent to modulo operation", "body": "<p>I came across the following snippet which in my opinion is to convert an integer into binary equivalence. \nCan anyone tell me why an &amp;1 is used instead of %2 ? Many thanks.</p>\n\n<pre><code>for (i = 0; i &lt;= nBits; ++i) {\n    bits[i] = ((unsigned long) x &amp; 1) ? 1 : 0;\n    x = x / 2;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1425460472, "post_id": 28850464, "comment_id": 45968194, "body": "<code>scanf</code>stops reading at the first white space, use <code>fgets</code> and skip the trailling <code>\\n</code>"}, {"owner": {"reputation": 150, "user_id": 4630750, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HFWdl8PFIpo/AAAAAAAAAAI/AAAAAAAAAIc/Hb2xIa5Rg2c/photo.jpg?sz=128", "display_name": "Vasanth Kumar", "link": "https://stackoverflow.com/users/4630750/vasanth-kumar"}, "edited": false, "score": 0, "creation_date": 1425460619, "post_id": 28850464, "comment_id": 45968289, "body": "use only scanf statement."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1425460930, "post_id": 28850464, "comment_id": 45968469, "body": "<code>#include&lt;Stdio.h&gt;</code> --&gt; <code>#include &lt;stdio.h&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1425461167, "last_edit_date": 1425461167, "creation_date": 1425460525, "answer_id": 28850553, "question_id": 28850464, "link": "https://stackoverflow.com/questions/28850464/reading-a-paragraph-in-c-language/28850553#28850553", "title": "Reading a paragraph in c language", "body": "<p>This question has been asked multiple times and the answer to this is</p>\n\n<p>Use</p>\n\n<pre><code>fgets(a,sizeof(a),stdin);\nsize_t n = strlen(a);\nif(n&gt;0 &amp;&amp; a[n-1] == '\\n')\na[n-1] = '\\0';\n</code></pre>\n\n<p>If you want to use scanf() only then you need to do</p>\n\n<pre><code>scanf(\"%99[^\\n]\",a);\n</code></pre>\n\n<p>Where [^\\n] tells read until newline character is encountered and 99 makes sure that there is not buffer overflow. Still <code>fgets()</code> is a good option to read strings compared to <code>scanf()</code></p>\n"}, {"tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 5, "last_activity_date": 1425460609, "creation_date": 1425460609, "answer_id": 28850579, "question_id": 28850464, "link": "https://stackoverflow.com/questions/28850464/reading-a-paragraph-in-c-language/28850579#28850579", "title": "Reading a paragraph in c language", "body": "<p>Using the <code>scanf</code> function:</p>\n\n<pre><code>scanf(\"%99[^\\n]\", a);\n</code></pre>\n\n<p>Where <code>%[^\\n]</code> is a character set specifier that allows all characters except newlines, and <code>%99[^\\n]</code> limits the match to at most 99 characters (since <code>a</code> has space for that many characters plus the null terminator).</p>\n\n<p>Alternatively, you can use</p>\n\n<pre><code>fgets(a, 100, stdin);\n</code></pre>\n\n<p>This is arguably more common, but be aware that it leaves the newline at the end intact.</p>\n"}, {"comments": [{"owner": {"reputation": 150, "user_id": 4630750, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HFWdl8PFIpo/AAAAAAAAAAI/AAAAAAAAAIc/Hb2xIa5Rg2c/photo.jpg?sz=128", "display_name": "Vasanth Kumar", "link": "https://stackoverflow.com/users/4630750/vasanth-kumar"}, "edited": false, "score": 0, "creation_date": 1425460908, "post_id": 28850582, "comment_id": 45968451, "body": "I know gets or fgets functions reads the blank spaces also, please use only scanf function."}], "tags": [], "owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "is_accepted": false, "score": 0, "last_activity_date": 1425460624, "creation_date": 1425460624, "answer_id": 28850582, "question_id": 28850464, "link": "https://stackoverflow.com/questions/28850464/reading-a-paragraph-in-c-language/28850582#28850582", "title": "Reading a paragraph in c language", "body": "<p>You can use <strong>fgets</strong>  as below</p>\n\n<pre><code>fgets (a, 100, stdin);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1504596624, "post_id": 46049023, "comment_id": 79057997, "body": "This answer is harmful: <code>gets</code> is a broken function that has no buffer overflow protection. It has been removed from the latest C standard. It should be never used."}, {"owner": {"reputation": 7550, "user_id": 6665568, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5dac06cb071c09718d413ff3623953ce?s=128&d=identicon&r=PG&f=1", "display_name": "Natesh bhat", "link": "https://stackoverflow.com/users/6665568/natesh-bhat"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1504632886, "post_id": 46049023, "comment_id": 79081344, "body": "ya i have fixed it in the answer"}], "tags": [], "owner": {"reputation": 7550, "user_id": 6665568, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5dac06cb071c09718d413ff3623953ce?s=128&d=identicon&r=PG&f=1", "display_name": "Natesh bhat", "link": "https://stackoverflow.com/users/6665568/natesh-bhat"}, "is_accepted": false, "score": -1, "last_activity_date": 1504632840, "last_edit_date": 1504632840, "creation_date": 1504595705, "answer_id": 46049023, "question_id": 28850464, "link": "https://stackoverflow.com/questions/28850464/reading-a-paragraph-in-c-language/46049023#46049023", "title": "Reading a paragraph in c language", "body": "<p>You can use <code>fgets( )</code> function to read a line of text.</p>\n\n<p><code>fgets(str , 100 , stdin);</code></p>\n\n<p>You can also use gets( ) function if your string is small since this funtion has no buffer overflow protection.</p>\n\n<p><code>gets(str)</code> </p>\n\n<p>U can also use <code>scanf</code> to do this as others have mentioned. </p>\n"}], "owner": {"reputation": 150, "user_id": 4630750, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HFWdl8PFIpo/AAAAAAAAAAI/AAAAAAAAAIc/Hb2xIa5Rg2c/photo.jpg?sz=128", "display_name": "Vasanth Kumar", "link": "https://stackoverflow.com/users/4630750/vasanth-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5457, "favorite_count": 0, "accepted_answer_id": 28850579, "answer_count": 4, "score": 1, "last_activity_date": 1504632840, "creation_date": 1425460278, "last_edit_date": 1425461491, "question_id": 28850464, "link": "https://stackoverflow.com/questions/28850464/reading-a-paragraph-in-c-language", "title": "Reading a paragraph in c language", "body": "<pre><code>#include&lt;Stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main()\n{\n    char a[100];\n    clrscr();\n    printf(\"enter a paragraph\\n\");\n    scanf(\"%s\",a);\n    printf(\"%s\",a);\n    getch();\n}\n</code></pre>\n\n<p>output:\nenter a paragraph\nmy name is vasanth\nmy</p>\n\n<p>how do I read the entire line \"my name is vasanth\" using scanf function?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 2, "creation_date": 1425460410, "post_id": 28850415, "comment_id": 45968154, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/15784729/an-example-of-use-of-varargs-in-c\">An example of use of varargs in C</a>"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1425460531, "post_id": 28850415, "comment_id": 45968231, "body": "@&#212;rel: disaggree! varargs have nothing todo with his problem."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1425460573, "post_id": 28850415, "comment_id": 45968257, "body": "This looks like a misguided design. <code>on_select</code> is called from outside the button. It should pass the same arguments to all buttons. Other information will come from the application."}, {"owner": {"reputation": 35, "user_id": 4018503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUHWU.png?s=128&g=1", "display_name": "MBA_BAT88", "link": "https://stackoverflow.com/users/4018503/mba-bat88"}, "edited": false, "score": 0, "creation_date": 1425461578, "post_id": 28850415, "comment_id": 45968860, "body": "i don&#39;t think that the varargs is what i&#39;m looking for"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1425463150, "post_id": 28850415, "comment_id": 45969848, "body": "For a button, you don&#39;t need any additional info:The only interesting thing is that the button was clicked and <code>on_select</code> called. For more complex GUI elements, you can pass an event struct, that holds information about mouse position or meta keys held down during clicking or the id of an item selected in a listbox, etc."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4018503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUHWU.png?s=128&g=1", "display_name": "MBA_BAT88", "link": "https://stackoverflow.com/users/4018503/mba-bat88"}, "edited": false, "score": 0, "creation_date": 1425462174, "post_id": 28850528, "comment_id": 45969224, "body": "yes i thought of the varargs function but i don&#39;t think that&#39;s what i&#39;m looking for cz in that case i must go through the va_list, what i need is to excute the called command as it is there&#39;is no common way for all commands"}, {"owner": {"reputation": 35, "user_id": 4018503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUHWU.png?s=128&g=1", "display_name": "MBA_BAT88", "link": "https://stackoverflow.com/users/4018503/mba-bat88"}, "edited": false, "score": 0, "creation_date": 1425463135, "post_id": 28850528, "comment_id": 45969838, "body": "well, that&#39;s what i&#39;m trying to find out"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 3, "last_activity_date": 1425462676, "last_edit_date": 1425462676, "creation_date": 1425460451, "answer_id": 28850528, "question_id": 28850415, "link": "https://stackoverflow.com/questions/28850415/create-a-button-structure-in-c/28850528#28850528", "title": "create a button structure in C", "body": "<p>You can't do that, in C.</p>\n\n<p>You're going to have to figure out a common \"protocol\" for all callbacks, or use a <code>union</code> of a bunch of different ones (plus add information so you know which one to use) or something like that.</p>\n\n<p>You <em>can</em>  use variable arguments, but then you have to use an explicit <code>va_list</code> argument, you can't \"pass on\" the <code>...</code> part directly.</p>\n\n<p>In you solution, even if we assume you could express the function itself, how would you deal with the parameters? You can't replace <code>int param;</code> with <code>anything param[ANY_AMOUNT];</code>, there is no <code>anything</code> in C and an array can't have an infinite length either ... I'm trying to illustrate that your \"dream solution\" doesn't work in C.</p>\n"}], "owner": {"reputation": 35, "user_id": 4018503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUHWU.png?s=128&g=1", "display_name": "MBA_BAT88", "link": "https://stackoverflow.com/users/4018503/mba-bat88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 28850528, "answer_count": 1, "score": 0, "last_activity_date": 1425462676, "creation_date": 1425460138, "question_id": 28850415, "link": "https://stackoverflow.com/questions/28850415/create-a-button-structure-in-c", "title": "create a button structure in C", "body": "<p>I am trying to create a structure called button ressource, that will store all the attributes of a button.</p>\n\n<p>My problem is with the command function <strong>\"void on select\"</strong>  which should be a function with <strong>unkonow number and type of parameters</strong> right now i'm using a pointer on a function that takes only one param that i've declared as one of the structure element, but i need a better way in case i need to execute a command with unkonw number and type of parameters.</p>\n\n<pre><code>struct button_ressource \n{\n    unsigned char *image_off;\n    unsigned char *image_on;\n    unsigned int width\n    unsigned int h;\n    void (*on_select)(void *data);  // the button command\n    int param;  // this param will be passed to the on_select command\n};\ntypedef struct button_ressource button_res; \n</code></pre>\n"}, {"tags": ["c", "annotations", "profiling", "valgrind", "gperf"], "answers": [{"comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1425468567, "post_id": 28853038, "comment_id": 45972939, "body": "It seems <code>perf report</code> shows percentages per assembly instruction even, along with the source lines corresponding to those instructions. Not sure if there&#39;s a way to get percentages just per source line."}, {"owner": {"reputation": 101, "user_id": 4111768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e634239e231ee6ef34394ea603e75cdf?s=128&d=identicon&r=PG&f=1", "display_name": "jav321", "link": "https://stackoverflow.com/users/4111768/jav321"}, "edited": false, "score": 0, "creation_date": 1425477881, "post_id": 28853038, "comment_id": 45978882, "body": "iIf there is a way to get execution percentage for loops, that will do my job. Because I want to detect hotspot loops in a code which take above a certain amount of execution percentage."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 101, "user_id": 4111768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e634239e231ee6ef34394ea603e75cdf?s=128&d=identicon&r=PG&f=1", "display_name": "jav321", "link": "https://stackoverflow.com/users/4111768/jav321"}, "edited": false, "score": 0, "creation_date": 1425479591, "post_id": 28853038, "comment_id": 45980018, "body": "@jav321 It will get you the execution percentage of each instruction within loops (i.e., the amount of time spent at particular instructions within the loop in total). For short loops it should be simple to just add up all the instructions."}], "tags": [], "owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "is_accepted": false, "score": 0, "last_activity_date": 1425467702, "creation_date": 1425467702, "answer_id": 28853038, "question_id": 28850408, "link": "https://stackoverflow.com/questions/28850408/profile-c-code-execution-percentageline-by-line-annotation/28853038#28853038", "title": "Profile C code execution percentage(line by line annotation)", "body": "<p>I believe <code>perf(1)</code> (part of the <code>linux-tools-common</code> package in Ubuntu) will get you what you want. It makes use of a kernel-based subsystem called <em>Performance counters for Linux</em>, included in newer kernels. More information can be found <a href=\"https://perf.wiki.kernel.org/index.php/Main_Page\" rel=\"nofollow\">here</a>.</p>\n\n<p>Simple usage example below. Make sure to compile with debugging symbols.</p>\n\n<pre><code>$ perf record ./myprogram arg1 arg2\n$ perf report\n</code></pre>\n\n<p><a href=\"http://valgrind.org/docs/manual/cg-manual.html\" rel=\"nofollow\">Cachegrind</a> might be worth looking into too.</p>\n"}, {"comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1425552314, "post_id": 28866544, "comment_id": 46013894, "body": "I believe both <code>oprofile</code> and <code>Zoom</code> use the <i>Performance counters for Linux</i> kernel subsystem too if available."}, {"owner": {"reputation": 703, "user_id": 452703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059496f93cfb75b00bbe56f7c1597163?s=128&d=identicon&r=PG", "display_name": "David ", "link": "https://stackoverflow.com/users/452703/david"}, "edited": false, "score": 0, "creation_date": 1428734952, "post_id": 28866544, "comment_id": 47298646, "body": "<a href=\"http://www.allinea.com/products/map\" rel=\"nofollow noreferrer\">Allinea MAP</a> does line level time display (as percentage) - if a loop is a hotspot it will show it - and there is in depth graphical detail to help fix the issues.  Gprof also has a line by line mode if you need free."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "reply_to_user": {"reputation": 703, "user_id": 452703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059496f93cfb75b00bbe56f7c1597163?s=128&d=identicon&r=PG", "display_name": "David ", "link": "https://stackoverflow.com/users/452703/david"}, "edited": false, "score": 0, "creation_date": 1428758967, "post_id": 28866544, "comment_id": 47305120, "body": "@David: It&#39;s hard to tell from Allinea&#39;s web site. Are they reporting a line&#39;s inclusive (not just exclusive) percent (not just execution count or absolute time). Does the time include blockage, like I/O, sleeps, etc.(or is it only &quot;CPU&quot; time)? What&#39;s more, just line-level percent is not as useful as seeing the entire context that looking at a stack sample gives you. The bad assumption made in all profilers is that you need to know <i>where</i> time is spent, not <i>why</i> - resulting in missing big speedups. And if you want to get me started on <i>gprof</i>, I want to be charitable, but it&#39;s hard."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "reply_to_user": {"reputation": 703, "user_id": 452703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059496f93cfb75b00bbe56f7c1597163?s=128&d=identicon&r=PG", "display_name": "David ", "link": "https://stackoverflow.com/users/452703/david"}, "edited": false, "score": 0, "creation_date": 1428759638, "post_id": 28866544, "comment_id": 47305329, "body": "@David: <a href=\"http://archive.today/9r927\" rel=\"nofollow noreferrer\"><i>Here are some points</i></a> regarding <i>gprof</i> and how the concepts in it have been infecting profilers ever since. Some have evolved to be almost free of those, like Zoom (from Rotate Right) and maybe Allinea (I can&#39;t tell), but they have a way to go,.The hard part of that is to realize that the spiffy summarizing UI actually <i>hides</i> massive speedups, because they don&#39;t capture the <i>reasons why</i> time is spent, and they can&#39;t intelligently aggregate different lines that have common reasons."}, {"owner": {"reputation": 703, "user_id": 452703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059496f93cfb75b00bbe56f7c1597163?s=128&d=identicon&r=PG", "display_name": "David ", "link": "https://stackoverflow.com/users/452703/david"}, "edited": false, "score": 0, "creation_date": 1428849386, "post_id": 28866544, "comment_id": 47328192, "body": "@MikeDunlavey - MAP&#39;s time sampling is based on wall clock: we measure I/O and other causes of non-compute delay - like communication amongst other things (as it&#39;s used a lot for MPI applications on multiple nodes). Think of it as measuring what the cores are doing over real time.  We use this for threads too - our users care about actual wall time as they typically do OpenMP and want all their cores to be busy, if any thread is sleeping, that&#39;s time they are wasting (as they use 1 core per thread typically) and a Bad Thing..."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "reply_to_user": {"reputation": 703, "user_id": 452703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059496f93cfb75b00bbe56f7c1597163?s=128&d=identicon&r=PG", "display_name": "David ", "link": "https://stackoverflow.com/users/452703/david"}, "edited": false, "score": 0, "creation_date": 1428928269, "post_id": 28866544, "comment_id": 47356277, "body": "@David: That&#39;s good it&#39;s on wall-clock time, and I assume it takes stack samples, and that the percent shown on a line is the percent of stack samples containing that line. It would be even better if the user could browse individual samples. If you want, drop me an email, and I&#39;ll send you a 20-slide .ppt file I&#39;m hoping to present at usenix that walks through an example."}], "tags": [], "owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "is_accepted": false, "score": 0, "last_activity_date": 1425508904, "creation_date": 1425508904, "answer_id": 28866544, "question_id": 28850408, "link": "https://stackoverflow.com/questions/28850408/profile-c-code-execution-percentageline-by-line-annotation/28866544#28866544", "title": "Profile C code execution percentage(line by line annotation)", "body": "<p>You need something that samples the stack, either on CPU time, or wall-clock time if you want to include I/O.\nYou don't need particularly high frequency of sampling.</p>\n\n<p>Each stack sample is a list of code locations, some of which can be traced to lines in the code.</p>\n\n<p>The inclusive percentage cost of a line of code is just the number of stack samples that contain it, divided by the total number of stack samples (multiplied by 100).</p>\n\n<p>The usefulness of this is it tells you what percentage of total time you could save if you could get rid of that line.</p>\n\n<p>The exclusive percentage is the fraction of samples where that line appears at the end.</p>\n\n<p>If a line of code appears more than once in a stack sample, that's still just one sample containing it. (That takes care of recursion.)</p>\n\n<p>What tools can do this? Maybe <code>oprofile</code>. Certainly <code>Zoom</code>.</p>\n"}], "owner": {"reputation": 101, "user_id": 4111768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e634239e231ee6ef34394ea603e75cdf?s=128&d=identicon&r=PG&f=1", "display_name": "jav321", "link": "https://stackoverflow.com/users/4111768/jav321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1739, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1425508904, "creation_date": 1425460104, "question_id": 28850408, "link": "https://stackoverflow.com/questions/28850408/profile-c-code-execution-percentageline-by-line-annotation", "title": "Profile C code execution percentage(line by line annotation)", "body": "<p>I need to profile a couple of C codes and get an annotated file with percentage of exeuction time taken by each line or atleast each block(while/if-else/for-functions) etc.</p>\n\n<p>So far I have looked into valgrind(callgrind) and gperf and some other tools. So far what I get is</p>\n\n<ul>\n<li>Count of each function or line of source Code like how many times it is execution.</li>\n<li>Or Percentage of Count.</li>\n<li>Or execution time taken by each funtion call.</li>\n</ul>\n\n<p><strong>What I do need however if percentage of execution time not the count and that should be for each line of source code or atleast all blocks(while/if-else/for-functions).</strong></p>\n\n<p>Can someone let me know of a way I can do it ?</p>\n\n<p>Thanks,</p>\n"}]