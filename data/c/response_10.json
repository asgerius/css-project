[{"tags": ["c", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 0, "last_activity_date": 1426723012, "creation_date": 1426723012, "answer_id": 29134868, "question_id": 29134647, "link": "https://stackoverflow.com/questions/29134647/issue-with-pthreads-unsure-where-error-is/29134868#29134868", "title": "Issue with pthreads, unsure where error is", "body": "<p>Both <code>j</code> and <code>k</code> loop from <code>0</code> to <code>n</code>, so the term <code>D[k][j]</code> could be any element in the matrix.</p>\n\n<p>So although you're only writing to specific rows (indexed by <code>i</code>), every thread is reading every part of the matrix while other threads are modifying the matrix.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 4592911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-BusNDz8WGzY/AAAAAAAAAAI/AAAAAAAACYE/JS-iPiIUtKY/photo.jpg?sz=128", "display_name": "Hotbod Handsomeface", "link": "https://stackoverflow.com/users/4592911/hotbod-handsomeface"}, "edited": false, "score": 0, "creation_date": 1426737168, "post_id": 29135118, "comment_id": 46498503, "body": "Thanks so much!  That makes perfect sense!"}], "tags": [], "owner": {"reputation": 704, "user_id": 4687645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e42598eefb77fbc647f126079c8875f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4687645/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1426726639, "last_edit_date": 1426726639, "creation_date": 1426724514, "answer_id": 29135118, "question_id": 29134647, "link": "https://stackoverflow.com/questions/29134647/issue-with-pthreads-unsure-where-error-is/29135118#29135118", "title": "Issue with pthreads, unsure where error is", "body": "<p>The problem comes from this line:</p>\n\n<pre><code>int i, j, k, n, totaln, **C, **D;\n</code></pre>\n\n<p>Since the i, j, and k counters are declared in global scope they are shared by all of the threads. </p>\n\n<p>If a thread is context switched while inside the inner loop, another thread can increment one of these counters past the end of the array. When the original thread wakes it will try to read past the end of the array, which is undefined behavior and can cause a segfault.</p>\n\n<p>You can fix this by limiting the scope of the counter variables to the LowestTerm function. In fact, the only variables that need to be defined in the global scope are **D, n, and threadcount; and n and threadcount don't really need to be shared, they could instead be passed as arguments to LowestTerm.</p>\n"}], "owner": {"reputation": 75, "user_id": 4592911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-BusNDz8WGzY/AAAAAAAAAAI/AAAAAAAACYE/JS-iPiIUtKY/photo.jpg?sz=128", "display_name": "Hotbod Handsomeface", "link": "https://stackoverflow.com/users/4592911/hotbod-handsomeface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 29135118, "answer_count": 2, "score": 1, "last_activity_date": 1427566959, "creation_date": 1426721588, "last_edit_date": 1427566959, "question_id": 29134647, "link": "https://stackoverflow.com/questions/29134647/issue-with-pthreads-unsure-where-error-is", "title": "Issue with pthreads, unsure where error is", "body": "<p>(Correct code added for completeness of problem) I have a program written to find a Floyd-Warshall shortest path matrix from all points in graph (entered as a matrix) to all other points in graph.  Code posted below.  My issue has something to do with the pthreads / LowestTerm function I believe.  For small matrices, the program works just fine.  However, for large matrices and large numbers of threads (8ish being large) I am getting a Segmentation Fault error with no other information provided.  Compiling shows no problem.  Anyone see anything out of place with the code the way it is written?  Could it be that the threads are all trying to access the matrix at the same time, even though they are dedicated to specific rows of the matrix?  Thanks for any help and advice.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n\nint n, **C, **D, printthread;                   /* Variable declarations */\npthread_t *threads;\npthread_cond_t condprint;\npthread_mutex_t mutexprint;\nlong thread, threadcount;\n\nprintthread = 0;\n\nvoid *LowestTerm(void* rank);\n\nint main(int argc, char *argv[]) {\n\n    int i, j;                       /* Variable declarations */\n    char filename[50];\n\n    threadcount = atoi(argv[1]);\n    threads = malloc (threadcount * sizeof(pthread_t));\n\n    printf(\"Enter filename: \");             /* User enters filename for directed graph values */\n    scanf(\"%s\", filename);\n\n    FILE *fp = fopen(filename, \"r\");\n\n    if (fp == NULL) {                   /* Check whether file exists or not */\n        printf(\"File does not exist\");\n        return 1;\n    }\n\n    fscanf(fp, \"%d\", &amp;n);                   /* Obtain size of matrix */\n\n    C = (int **)malloc(n * sizeof(int *));          /* Allocate memory for matrix arrays */\n    D = (int **)malloc(n * sizeof(int *));\n\n    for (i = 0; i &lt; n; i++) {               /* Allocate matrices into 2D arrays */\n        C[i] = (int *)malloc(n * sizeof(int));\n        D[i] = (int *)malloc(n * sizeof(int));\n    }\n\n\n    for (i = 0; i &lt; n; i++) {               /* Read matrix from file into C array */\n        for (j = 0; j &lt; n; j++) {\n            fscanf(fp, \"%d\", &amp;C[i][j]);\n        }\n    }\n\n    printf(\"Cost Adjacency Matrix:\\n\");         /* Print cost adjacency matrix */\n    for (i = 0; i &lt; n; i++) {\n        for (j = 0; j &lt; n; j++) {\n            printf(\"%d \", C[i][j]);\n        }\n        printf(\" \\n\");\n    }\n\n    for (i = 0; i &lt; n; i++) {               /* Copy matrix from C array into D array */\n        for (j = 0; j &lt; n; j++) {\n            D[i][j] = C[i][j];\n        }\n    }\n\n    printf(\"Distance matrix:\\n\");               /* Print Distance matrix label */\n\n\n\n    for (thread = 0; thread &lt; threadcount; thread++) {  /* Create threads for making and printing distance matrix */\n        pthread_create(&amp;threads[thread], NULL, LowestTerm, (void*) thread);\n    }\n    for (thread = 0; thread &lt; threadcount; thread++) {  /* Join threads back together */\n        pthread_join(threads[thread], NULL);\n    }\n\n    pthread_cond_destroy (&amp;condprint);\n    pthread_mutex_destroy (&amp;mutexprint);\n    free(threads);\n    pthread_exit(NULL);\n\n}\n\n\nvoid *LowestTerm(void* rank) {\n\n    int i, j, k;                        /* Variable declarations */\n    long mythread = (long) rank;\n\n    int istart = ((int)mythread * n) / (int)threadcount;    /* Create matrix row start and finish parameters for each thread */\n    int ifinish = ((((int)mythread + 1) * n) / (int)threadcount);\n\n    for (k = 0; k &lt; n; k++) {               /* Find shortest path for each value in each row for each of designated thread's rows */\n        for (i = istart; i &lt; ifinish; i++) {\n            for (j = 0; j &lt; n; j++) {\n                if (D[i][j] &gt; D[i][k] + D[k][j]) {\n                    D[i][j] = D[i][k] + D[k][j];\n                }\n            }\n        }\n    }\n\n    pthread_mutex_lock (&amp;mutexprint);           /* Print distance matrix portion for each thread */\n    while (printthread != mythread) {\n        pthread_cond_wait (&amp;condprint, &amp;mutexprint);\n    }\n    for (i = istart; i &lt; ifinish; i++) {\n        printf(\"Thread %d: \", mythread);\n        for (j = 0; j &lt; n; j++) {\n            printf(\"%d \", D[i][j]);\n        }\n        printf(\" \\n\");\n    }\n    printthread++;\n    pthread_cond_broadcast (&amp;condprint);\n    pthread_mutex_unlock (&amp;mutexprint);\n\n\n    return NULL;\n}\n</code></pre>\n"}, {"tags": ["c", "codeblocks"], "comments": [{"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1426721458, "post_id": 29134540, "comment_id": 46494644, "body": "What the Downvoting is for ?"}, {"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1426721655, "post_id": 29134540, "comment_id": 46494714, "body": "nothing wrong with code.. it gives expected result."}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "reply_to_user": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1426721710, "post_id": 29134540, "comment_id": 46494733, "body": "@JerryGoyal did u see the black picture? When after I enter 2 the program stops!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1426722066, "post_id": 29134540, "comment_id": 46494835, "body": "I don&#39;t understand the problem. I compiled and ran your program, told it 1 number, then entered the number is 2, sum of that one series of numbers is 2.Just like your screen image, expect I run it from console and don&#39;t get the prompt to continue."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426722195, "post_id": 29134540, "comment_id": 46494877, "body": "Downvoted. The program works perfectly."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1426722261, "post_id": 29134540, "comment_id": 46494899, "body": "@FirasAliAbdelGhani Do you see the picture? It asks you how many numbers you want to enter and you say &quot;1&quot;."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1426722275, "post_id": 29134540, "comment_id": 46494905, "body": "<a href=\"http://ideone.com/vX9e5J\" rel=\"nofollow noreferrer\">Works with 5 numbers too</a>.  It appears to do exactly what you want."}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "edited": false, "score": 0, "creation_date": 1426722517, "post_id": 29134540, "comment_id": 46494978, "body": "so because people found that everything was right you are downvoting? this is not fair!"}, {"owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426722573, "post_id": 29134540, "comment_id": 46494998, "body": "@WeatherVane Apparently all of you see that Im new here and im getting used to the bureaucracy here and nature of questions. thanks for showing much support :)"}, {"owner": {"reputation": 1682, "user_id": 2544158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osuok.jpg?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/2544158/reticulated-spline"}, "edited": false, "score": 1, "creation_date": 1426722826, "post_id": 29134540, "comment_id": 46495058, "body": "@FirasAliAbdelGhani  Your program works <i>exactly</i> as you intend it to. If you expect different output, please edit your post and say so, including details."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426732298, "post_id": 29134540, "comment_id": 46497420, "body": "@FirasAliAbdelGhani &quot;When after I enter 2 the program stops!&quot; is incorrect.  The code read the <code>2</code> with <code>scanf(&quot;%d&quot;, &amp;value);</code>.  The loop <code>for()</code> loop is now complete as it was told to only iterate 1 time, not 10.  Then the code printed <code>printf(&quot;The sum of the...</code>.  <i>then</i> the code stopped."}], "answers": [{"tags": [], "owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "is_accepted": false, "score": 2, "last_activity_date": 1426721908, "creation_date": 1426721908, "answer_id": 29134701, "question_id": 29134540, "link": "https://stackoverflow.com/questions/29134540/having-a-trouble-in-detecting-an-error-in-a-code-that-gets-10-numbers-in-input/29134701#29134701", "title": "Having a trouble in detecting an error In a code that gets 10 numbers in input, and gives their sum at output.", "body": "<p>\"when I insert the number 1 as first input and number 2 as second input, it doesn't work\"</p>\n\n<pre><code>scanf(\"%d\", &amp;numbers_to_read); //input is 1\nfor( i = 0; i &lt; numbers_to_read; i++ ) { // loop runs 1 time\nprintf(\"Enter the next integer: \"); \nscanf(\"%d\", &amp;value); //value entered is 2\nsum = sum + value; //sum = 0 +2\n}\n</code></pre>\n\n<p>therefore output is 2 indeed.</p>\n"}], "owner": {"reputation": 113, "user_id": 4566823, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/691dcf5fd2f5fc9c21d34f2b581e4cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Xhero39", "link": "https://stackoverflow.com/users/4566823/xhero39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1426721908, "creation_date": 1426721043, "question_id": 29134540, "link": "https://stackoverflow.com/questions/29134540/having-a-trouble-in-detecting-an-error-in-a-code-that-gets-10-numbers-in-input", "title": "Having a trouble in detecting an error In a code that gets 10 numbers in input, and gives their sum at output.", "body": "<p>I'm trying to write a code that receives 10 numbers in input and gives the sum of them at the output, for some reason the code works on every 10 numbers, but when I insert the number 1 as first input and number 2 as second input, it doesn't work. and it gives me the following message:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0YsCW.jpg\" alt=\"enter image description here\"></p>\n\n<p>this is the code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nint i, sum = 0, value, numbers_to_read;\nprintf(\"Please enter number of values\\n\");\nscanf(\"%d\", &amp;numbers_to_read);\nfor( i = 0; i &lt; numbers_to_read; i++ ) {\nprintf(\"Enter the next integer: \");\nscanf(\"%d\", &amp;value);\nsum = sum + value;\n}\nprintf(\"The sum of the %d numbers is %d\\n\",\nnumbers_to_read, sum);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1426720643, "post_id": 29134443, "comment_id": 46494364, "body": "<code>#define ARRAY_LEN(array) (sizeof(array)&#47;sizeof((array)[0]) - 1);</code> :P"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426720708, "post_id": 29134443, "comment_id": 46494379, "body": "I was going to say <code>#define STR_LEN(array) (ARRAY_LEN(array) - 1)</code>. LOL."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1426720753, "post_id": 29134443, "comment_id": 46494402, "body": "You shouldn&#39;t be using a macro for this anyway. <a href=\"http://stackoverflow.com/questions/437150/can-someone-explain-this-template-code-that-gives-me-the-size-of-an-array\" title=\"can someone explain this template code that gives me the size of an array\">stackoverflow.com/questions/437150/&hellip;</a>"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1426720873, "post_id": 29134443, "comment_id": 46494439, "body": "Never mind, I didn&#39;t catch the &quot;C solution is preferred&quot;."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426720921, "post_id": 29134443, "comment_id": 46494458, "body": "@JonathanPotter  Why was that not worth posting as an answer rather then a comment."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1426720967, "post_id": 29134443, "comment_id": 46494476, "body": "@Clifford, because he didn&#39;t answer the actual question"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1426720992, "post_id": 29134443, "comment_id": 46494487, "body": "@Clifford A lot of times I&#39;ll post short answers in comments to see the OP&#39;s initial reaction before posting a real answer."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426721187, "post_id": 29134443, "comment_id": 46494550, "body": "@JonathanPotter Thanks :). This perfectly answeres the question in a pure logical sense but clearly was not the intention but it made me smile."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1426721299, "post_id": 29134443, "comment_id": 46494597, "body": "@FatihBAKIR : It may not satisfy <i>&quot;some trick to define a constant string literal without a trailing &#39;\\0&#39;</i>, to which the answer is just no if you exclude the array initialisation syntax; but it does address <i>&quot;So that using ARRAY_LEN(c_seqence) returns the actual sequence length without the &#39;\\0&#39;?&quot;</i>, so is the only useful answer, and it is not a <i>comment</i>.  Moreover the answer appears to be acceptable to the OP, but he cannot <i>accept</i> a comment."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426721417, "post_id": 29134443, "comment_id": 46494633, "body": "Technically, <code>boost::mpl::string</code> is not C++11 and lets you do four characters at once (<code>&lt;&#39;abcd&#39;, &#39;efgh&#39;&gt;</code>). It has <code>size</code> and <code>c_str</code> metafunctions."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426721469, "post_id": 29134443, "comment_id": 46494647, "body": "I didn&#39;t think my comment would actually answer the OPs question, which was about modifying the string literal itself."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1426721603, "post_id": 29134443, "comment_id": 46494695, "body": "@JonathanPotter : If an answer gets harshly down-voted, you can always delete it if such things worry you.  Even if the answer is not accepted by the OP, it may be of interest to someone seeking similar solutions.  The comments are not searchable on SO so are of less community value."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426722226, "post_id": 29134443, "comment_id": 46494888, "body": "Ok, answered. I better get lots of rep now! :)"}], "answers": [{"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721316, "post_id": 29134572, "comment_id": 46494601, "body": "if i define a <code>static const char c_a[5] = &quot;12345&quot;;</code> then i get a compiler warning/error: <code>Error\t1\tinitializer-string for array of chars is too long [-fpermissive]\t</code>"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721477, "post_id": 29134572, "comment_id": 46494650, "body": "@vlad_tepesch Hum, that&#39;s odd. This - <a href=\"http://ideone.com/bcg2zP\" rel=\"nofollow noreferrer\">ideone.com/bcg2zP</a> - compiles without any warning even if I use <code>-Wall</code> in my machine. I&#39;m almost sure this is somewhere in the standard, let me look that up."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721835, "post_id": 29134572, "comment_id": 46494767, "body": "@vlad_tepesch Please see my updated answer. As I suspected, it&#39;s in the standard, so you shouldn&#39;t get any errors / warnings. What compiler are you using?"}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426721951, "post_id": 29134572, "comment_id": 46494798, "body": "AVR8/GNU C Compiler : 4.8.1"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1426722220, "post_id": 29134572, "comment_id": 46494886, "body": "@FilipeGon&#231;alves, <code>if (x = 2)</code> is also standard, but very commonly gives a warning."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 4, "creation_date": 1426722265, "post_id": 29134572, "comment_id": 46494903, "body": "@vlad_tepesch Hum, this is different in C and C++. Turns out this is a C-only thing. C++ compilers will give you this error. Great example of why you shouldn&#39;t tag a question with C and C++ :)"}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426722607, "post_id": 29134572, "comment_id": 46495005, "body": "ups right, i renamed the file to cpp to test something ;)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1426723246, "post_id": 29134572, "comment_id": 46495166, "body": "<code>MAKE_STR_LITERAL</code> is a poor name for a macro that makes an array which doesn&#39;t contain a string and isn&#39;t a literal"}], "tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": false, "score": 4, "last_activity_date": 1426722362, "last_edit_date": 1495542135, "creation_date": 1426721186, "answer_id": 29134572, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul/29134572#29134572", "title": "constant string literal without terminating nul", "body": "<blockquote>\n  <p>Is there some trick to define a constant string literal without a\n  trailing '\\0' character?</p>\n</blockquote>\n\n<p>In C, if you specify the size of a character array to be one less than the size of the string literal initializer, it won't have a trailing null character. You could do it like so:</p>\n\n<pre><code>static const char c_seqence[ARRAY_LEN(\"___----__--_-_\")-1] = \"___----__--_-_\";\n</code></pre>\n\n<p>Of course, to avoid having to indicate the string literal twice in the same line, you might want to define a macro to do it:</p>\n\n<pre><code>#define MAKE_STR_LITERAL(n, l) static const char n[ARRAY_LEN(l)-1] = l\n</code></pre>\n\n<p>You can use it like this:</p>\n\n<pre><code>MAKE_STR_LITERAL(c_seqence, \"___----__--_-_\");\n</code></pre>\n\n<p><strong>Note</strong>:</p>\n\n<p>As stated in <a href=\"https://stackoverflow.com/a/4348188/2793118\">https://stackoverflow.com/a/4348188/2793118</a>, this behavior is in section 6.7.8 of the standard (quoting from that answer):</p>\n\n<blockquote>\n  <p><strong>\u00a7 6.7.8p14</strong></p>\n  \n  <p>An array of character type may be initialized by a character string\n  literal, optionally enclosed in braces. Successive characters of the\n  character string literal (including the terminating null character if\n  there is room or if the array is of unknown size) initialize the\n  elements of the array.</p>\n</blockquote>\n\n<p><strong>Note2</strong>: Turns out this is a C-only thing. In C++ it will not compile. Yet another great example of why people shouldn't tag questions with both C and C++.</p>\n"}, {"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426722871, "post_id": 29134745, "comment_id": 46495075, "body": "obviously this is not the intendet way to solve this. since some kind of <code>ARRAY_LEN</code> macro is a commonly used idiom, its meaning/definition should not be changed."}, {"owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "edited": false, "score": 1, "creation_date": 1426723035, "post_id": 29134745, "comment_id": 46495117, "body": "#define STRING_LEN(array) (ARRAY_LEN(array) - 1)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426723390, "post_id": 29134745, "comment_id": 46495206, "body": "I&#39;d suggest calling it something different to <code>ARRAY_LEN</code> which indicates that it doesnt actually give the length of an array"}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 2, "last_activity_date": 1426722175, "creation_date": 1426722175, "answer_id": 29134745, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul/29134745#29134745", "title": "constant string literal without terminating nul", "body": "<p>The simplest solution is to change your array length macro to ignore the trailing null:</p>\n\n<pre><code>#define ARRAY_LEN(array) (sizeof(array)/sizeof((array)[0]) - 1)\n</code></pre>\n\n<p>(posted under duress :)</p>\n"}, {"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1426722936, "post_id": 29134846, "comment_id": 46495097, "body": "may be if c++11 may be used, someone could define its own type prefix. but iam not fully aware of the possibilities and restrictions of such a solution atm"}], "tags": [], "owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "is_accepted": false, "score": 0, "last_activity_date": 1426722857, "creation_date": 1426722857, "answer_id": 29134846, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul/29134846#29134846", "title": "constant string literal without terminating nul", "body": "<p>In C++11, without macros:</p>\n\n<pre><code>template &lt;typename T, size_t n&gt;\nconstexpr size_t array_length(const T (&amp;)[n]) {\n    return n;\n}\n\ntemplate &lt;typename T, size_t n&gt;\nconstexpr size_t string_length(const T (&amp;)[n]) {\n    return n - 1;\n}\n</code></pre>\n\n<p>I realize the question explicitly eliminates C++11 but that might not be true about everyone reaching this question from a search engine.</p>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1426722857, "creation_date": 1426720537, "question_id": 29134443, "link": "https://stackoverflow.com/questions/29134443/constant-string-literal-without-terminating-nul", "title": "constant string literal without terminating nul", "body": "<p>is there some trick to define a constant string literal without a trailing <code>'\\0'</code> character?</p>\n\n<pre><code>#define ARRAY_LEN(array) (sizeof(array)/sizeof((array)[0]))\n\nstatic const char c_seqence[] = \"___----__--_-_\";\n</code></pre>\n\n<p>So that using <code>ARRAY_LEN(c_seqence)</code> returns the actual sequence length without the <code>'\\0'</code>?\nNo runtime ovearhead should be generated.\nObiously the string like representation is preffered to a char array <code>{'_','_',...}</code> initialization because of better readability.</p>\n\n<p>C solution is preffered but may be also some c++ solution may be interesting as long they do not rely on c++11 features.</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 2, "creation_date": 1426720056, "post_id": 29134313, "comment_id": 46494169, "body": "Can you provide any actual code snippet, instead of hints?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426721200, "post_id": 29134313, "comment_id": 46494552, "body": "Which language are you using? (C and C++ have different rules about incomplete array types in some cases)."}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1426720147, "creation_date": 1426720147, "answer_id": 29134370, "question_id": 29134313, "link": "https://stackoverflow.com/questions/29134313/how-to-initialize-a-variable-which-is-a-pointer-to-array-of-pointers-to-structur/29134370#29134370", "title": "How to initialize a variable which is a pointer to array of pointers to structure?", "body": "<p>If the function requires a <code>StructureName *(*parameterName)[]</code> parameter, then the only way to pass a pointer to a <code>StructureName * MagneticModels[1]</code> array to such function is to use a <code>&amp;</code> operator with an explicit cast</p>\n\n<pre><code>foo((StructureName *(*)[]) &amp;MagneticModels);\n</code></pre>\n\n<p>(It can be made more readable by using a <code>typedef</code> to the array type).</p>\n\n<p>Another loophole is based on the fact that an array can be <em>declared</em> with unknown size and then <em>defined</em> with a specific size. As long as only the \"unknown size\" declaration is known to the compiler at the point of the call, it will allow you to pass it without a cast</p>\n\n<pre><code>extern StructureName * MagneticModels[]; // declaration\n\nvoid foo(StructureName * MagneticModels[]);\n\nint main()\n{\n  foo(&amp;MagneticModels);\n}\n\nStructureName * MagneticModels[1] = { ... }; // definition\n</code></pre>\n\n<p>The applicability of this loophole is, of course, very limited.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 4014692, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/gSCix.png?s=128&g=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/4014692/bartek"}, "edited": false, "score": 0, "creation_date": 1426777259, "post_id": 29134732, "comment_id": 46518357, "body": "Thanks a lot! I thought that C is always compatible with C++. Good to learn something new. And now it works :)"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1426722080, "creation_date": 1426722080, "answer_id": 29134732, "question_id": 29134313, "link": "https://stackoverflow.com/questions/29134313/how-to-initialize-a-variable-which-is-a-pointer-to-array-of-pointers-to-structur/29134732#29134732", "title": "How to initialize a variable which is a pointer to array of pointers to structure?", "body": "<p>In C the following code is legal (where <code>T</code> is your structure name or whatever):</p>\n\n<pre><code>void foo( T *(*ptr)[] )\n{ }\n\nint main()\n{\n    T *arr[1];\n    foo( &amp;arr );\n}\n</code></pre>\n\n<p>However that function prototype is illegal in C++ (let alone the call).</p>\n\n<p>If you are trying to write C code then make sure you are invoking the C compiler, not the C++ compiler.</p>\n\n<p>If you are trying to write C++ but call this function (whose header must be written in C and presumably the function was implemented in C also), then you will need to write a stub function which has a legal prototype in C++.</p>\n\n<p>For example:</p>\n\n<pre><code>// stub.h\nvoid foo2( T **ptr );    // preferably use \"extern C\" guards around this\n</code></pre>\n\n<p>and </p>\n\n<pre><code>// stub.c\n#include \"foo.h\"           // the troublesome function \n\nvoid foo2( T **ptr )\n{\n    foo( (T *(*)[]) ptr );\n}\n</code></pre>\n\n<p>This stub will be invoked by passing the address of the first element, rather than the address of the entire array:</p>\n\n<pre><code>T * MagneticModels[1];\nfoo2( MagneticModels );\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4014692, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/gSCix.png?s=128&g=1", "display_name": "Bartek", "link": "https://stackoverflow.com/users/4014692/bartek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 29134732, "answer_count": 2, "score": -2, "last_activity_date": 1426722080, "creation_date": 1426719789, "last_edit_date": 1426720062, "question_id": 29134313, "link": "https://stackoverflow.com/questions/29134313/how-to-initialize-a-variable-which-is-a-pointer-to-array-of-pointers-to-structur", "title": "How to initialize a variable which is a pointer to array of pointers to structure?", "body": "<p>I need to call a function from a third party source. The function expects a parameter of the following type:</p>\n\n<pre><code>StructureName *(*parameterName)[]\n</code></pre>\n\n<p>In an example it is defined as array of pointers:</p>\n\n<pre><code>StructureName * MagneticModels[1]\n</code></pre>\n\n<p>It is passed to the function with \"&amp;\" operator. Unfortunately in Visual Studio 2013 it fails to compile:</p>\n\n<blockquote>\n  <p><code>Error C2664: (...) cannot convert argument (...) from 'StructureName *(*)[1]' to 'StructureName *(*)[]'</code></p>\n</blockquote>\n\n<p>So to get it to compile I added a new variable and passed it to the function:</p>\n\n<pre><code>StructureName *(*variableName)[];\n</code></pre>\n\n<p>Now it compiles without error but then I get a runtime error that the \"variableName\" is used without being initialized.</p>\n\n<p>I tried many ways to initialize that but I am not a C++ developer so it was real ordeal and after a day I did not get nowhere. Therefore, I would appreciate any help or suggestion.</p>\n"}, {"tags": ["c++", "c", "cuda", "gpu", "gpgpu"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "edited": false, "score": 0, "creation_date": 1427147263, "post_id": 29146164, "comment_id": 46651038, "body": "So the granularity so far is in page basis(4k) right? if I only want to copy 4 bytes, it will still copy redundant data?"}, {"owner": {"reputation": 4092, "user_id": 655457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbb6f23243f2e0651b9b653c47e10b5?s=128&d=identicon&r=PG", "display_name": "ArchaeaSoftware", "link": "https://stackoverflow.com/users/655457/archaeasoftware"}, "reply_to_user": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "edited": false, "score": 0, "creation_date": 1427221102, "post_id": 29146164, "comment_id": 46686184, "body": "Yes, there are two issues in play. One is that the hardware really does not support tracking memory accesses that are finer-grained than a page. The other is that even for a 4K page (as opposed to say 4 bytes), the system spends a miniscule amount of time copying data as opposed to in other overhead operations. For example, for small copies, it often takes the driver longer to compose the hardware commands to do the copy than it takes the hardware to copy the data."}, {"owner": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "edited": false, "score": 0, "creation_date": 1427331050, "post_id": 29146164, "comment_id": 46739737, "body": "Thanks for sharing your knowledge"}], "tags": [], "owner": {"reputation": 4092, "user_id": 655457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbb6f23243f2e0651b9b653c47e10b5?s=128&d=identicon&r=PG", "display_name": "ArchaeaSoftware", "link": "https://stackoverflow.com/users/655457/archaeasoftware"}, "is_accepted": true, "score": 1, "last_activity_date": 1426772454, "creation_date": 1426772454, "answer_id": 29146164, "question_id": 29134132, "link": "https://stackoverflow.com/questions/29134132/is-cudamallocmanaged-smart-enough-to-not-copy-data-which-is-not-needed/29146164#29146164", "title": "Is cudamallocmanaged smart enough to not copy data which is not needed?", "body": "<p>The answer to your question is generally Yes, on a page (usually 4K) basis.  For CPU->GPU copies, the driver copies CPU pages lazily by tracking dirty bits.  After a kernel launch, the managed memory is marked nonresident so CPU accesses will fault.  Then after a CPU/GPU sync operation, it is left nonresident and the driver resolves page faults by copying the accessed page back from device memory.  </p>\n\n<p>This is based on a study I did sometime last year, so it may have changed since then.  Given the semantics of managed memory, NVIDIA has many different implementation options and you can expect them to change as NVIDIA optimizes their code.</p>\n\n<p>I measured block GPU->CPU copies of managed memory at 500MB/s, 25x slower than a pinned memcpy would be, so expect changes as NVIDIA figures out how to optimize those code paths.  For example, if they do dirty bit tracking on the GPU side, they could speculatively copy pages written by the GPU back to CPU memory.  That would deliver higher bandwidth, but could cause superfluous copies of data that is never accessed.</p>\n"}], "owner": {"reputation": 303, "user_id": 1979542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d90d4dccb128966acbe0628f2b65cf1?s=128&d=identicon&r=PG", "display_name": "yidiyidawu", "link": "https://stackoverflow.com/users/1979542/yidiyidawu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 29146164, "answer_count": 1, "score": 0, "last_activity_date": 1426772454, "creation_date": 1426718820, "question_id": 29134132, "link": "https://stackoverflow.com/questions/29134132/is-cudamallocmanaged-smart-enough-to-not-copy-data-which-is-not-needed", "title": "Is cudamallocmanaged smart enough to not copy data which is not needed?", "body": "<p>The doubt I have about cudamallocmanaged is that if I malloc N numbers, after GPU finish a operation on those numbers(let say a scan operation), I only need the last number in the array and access only this number in the host. Will cudamallocmanaged only copy this number back? </p>\n\n<p>I did a test and my answer is no. So I think in this case cudamalloc/free/copy is faster than cudamallocmanaged. Correct me if I am wrong.</p>\n\n<p>Then this following question is: How does it work to know when and how much to copy back and forth?</p>\n"}, {"tags": ["c", "gradle"], "comments": [{"owner": {"reputation": 11799, "user_id": 957630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f376e2bd553b7ed3efacb6b9f603061?s=128&d=identicon&r=PG", "display_name": "Mark Vieira", "link": "https://stackoverflow.com/users/957630/mark-vieira"}, "edited": false, "score": 1, "creation_date": 1426722653, "post_id": 29134071, "comment_id": 46495016, "body": "The native build support changed significantly in Gradle 2.3. I&#39;d take a look at the <a href=\"http://www.gradle.org/docs/current/userguide/nativeBinaries.html\" rel=\"nofollow noreferrer\">Gradle User Guide</a> for more information."}], "answers": [{"tags": [], "owner": {"reputation": 182, "user_id": 2555595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ea17119806c866d38bc6ca1f2b74d9?s=128&d=identicon&r=PG", "display_name": "user2555595", "link": "https://stackoverflow.com/users/2555595/user2555595"}, "is_accepted": false, "score": 4, "last_activity_date": 1429541055, "last_edit_date": 1429541055, "creation_date": 1429390044, "answer_id": 29722661, "question_id": 29134071, "link": "https://stackoverflow.com/questions/29134071/building-c-program-with-gradle/29722661#29722661", "title": "Building c program with gradle", "body": "<p>I am facing the same problem where using <code>executables { ... }</code> does not work and throws the same error as you have mentioned. Probably it was being used in an older version of gradle.</p>\n\n<p>I referred gradle <a href=\"https://gradle.org/docs/current/userguide/nativeBinaries.html\" rel=\"nofollow\">docs</a> for building native binaries.</p>\n\n<p>I am used this code in <code>build.gradle</code>:</p>\n\n<pre><code>apply plugin: 'c'\n\nmodel {\n  components {\n    main(NativeExecutableSpec) {}\n  }\n}\n</code></pre>\n\n<p>And your code should work fine with this.</p>\n\n<p>After this you can execute <code>gradle tasks</code> to know what tasks can be executed. </p>\n\n<p>You can run <code>gradle build</code> and run your executable as <code>build/binaries/mainExecutable/main</code>.</p>\n\n<p>Sorry, that this answer is very specific to what you asked and I might not be able to help you generalize it as I am still learning how to adapt it to my <code>C</code> project.</p>\n\n<p>Hope this helps you.</p>\n\n<p><strong>EDIT</strong>: You can also take a look at this amazing example provided <a href=\"http://carlosvin.github.io/en/posts/gradle-cpp.html\" rel=\"nofollow\">here</a>. Using this as a base you can enhance and improve your <code>build.gradle</code> file. But one small clincher here is that it uses <code>executables {...}</code>, <code>libraries {...}</code>, etc. which are probably deprecated, but it still a good read.</p>\n"}], "owner": {"reputation": 2121, "user_id": 3605029, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/038df21ba7adf09f9bdd4d429d5286f6?s=128&d=identicon&r=PG&f=1", "display_name": "sujithvm", "link": "https://stackoverflow.com/users/3605029/sujithvm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3010, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1429541055, "creation_date": 1426718513, "last_edit_date": 1426718710, "question_id": 29134071, "link": "https://stackoverflow.com/questions/29134071/building-c-program-with-gradle", "title": "Building c program with gradle", "body": "<p>I m new to building c/cpp plugin in gradle. This is project structure</p>\n\n<pre><code>.\n|-- build.gradle\n`-- src\n    `-- main\n        `-- c\n            `-- hello.c\n</code></pre>\n\n<p>Contents of hello.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char** argv){\n    printf(\"Hello World!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Contents of build.gradle</p>\n\n<pre><code>apply plugin: 'c'\n\nexecutables {\n    main {\n    }\n}\n</code></pre>\n\n<p>When i run : $ gradle mE , i get following error</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* Where:\nBuild file '/home/sujith/Downloads/cpp-examples-master/gradle-c-plugin/03-executable/build.gradle' line: 3\n\n* What went wrong:\nA problem occurred evaluating root project '03-executable'.\n&gt; Could not find method executables() for arguments [build_aaxd7x5nukew1jgziyan9q177$_run_closure1@57552dfc] on root project '03-executable'.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 2.297 secs\n</code></pre>\n\n<p>Sample project taken from <a href=\"https://github.com/ysoftdevs/cpp-examples\" rel=\"nofollow\">https://github.com/ysoftdevs/cpp-examples</a></p>\n\n<p>Gradle version : </p>\n\n<pre><code>$ gradle -version\n\n------------------------------------------------------------\nGradle 2.3\n------------------------------------------------------------\n\nBuild time:   2015-02-16 05:09:33 UTC\nBuild number: none\nRevision:     586be72bf6e3df1ee7676d1f2a3afd9157341274\n\nGroovy:       2.3.9\nAnt:          Apache Ant(TM) version 1.9.3 compiled on December 23 2013\nJVM:          1.7.0_67 (Oracle Corporation 24.65-b04)\nOS:           Linux 3.13.0-24-generic amd64\n</code></pre>\n\n<p>Am i missing anything?\nAny help is appreciated. Thank you</p>\n"}, {"tags": ["java", "android", "c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1426718774, "post_id": 29134010, "comment_id": 46493772, "body": "If the phone changed IPs you shouldn&#39;t be able to send or receive.  A TCP socket requires a connection to a specific IP.  Most likely you aren&#39;t really sending-  you&#39;re sending to a dead connection and missed the fact that the socket was closed on the other end."}, {"owner": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1426718966, "post_id": 29134010, "comment_id": 46493838, "body": "The connection is dropped after each send and after each receive. I am 100% positive that I am able to send, because when there is no connection on the phone, I get a &quot;disconnected&quot; status, while when there is, I have a send and a receive message. On the server side, I only have a send message (while the phone has network), and &quot;no connection&quot; status, when the phone has no connection."}], "answers": [{"comments": [{"owner": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426719532, "post_id": 29134157, "comment_id": 46494026, "body": "Added the outputs of both Java and C, so you can see"}, {"owner": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426719575, "post_id": 29134157, "comment_id": 46494041, "body": "I am sending, from the server, and have a confirmation from client that it receives, after IP changed"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426745210, "post_id": 29134157, "comment_id": 46500593, "body": "No you don&#39;t. after IP@ change it is impossible that you still receive."}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426750025, "post_id": 29134157, "comment_id": 46502196, "body": "The only way to really know what is going on is to put wireshark is to use wireshark to watch what is coming on the wire. The traces by the application  don&#39;t prove where the packets are coming from."}, {"owner": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426770179, "post_id": 29134157, "comment_id": 46513233, "body": "It&#39;s a bit complicated for me, at the moment, to set up wireshark to monitor the wireles traffic.   Still, from the outputs, you can see that the packet sent goes to a whole different IP &quot;Sent string: I4mP4ssw0rd7 to 87.edited&quot;, than it did initially, and the client also receives it."}, {"owner": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426770323, "post_id": 29134157, "comment_id": 46513334, "body": "And also, since I have &quot;listen(mysocket, 1);&quot; on my socket, that means that I should be able to receive connections from different sources, on first parameter (mysocket), with a backlog queue (2nd parameter) of a maximum of 1 client, that can be accepted, with &quot;int consocket = accept(mysocket, (struct sockaddr *)&amp;dest, &amp;socksize);&quot;."}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426774186, "post_id": 29134157, "comment_id": 46516020, "body": "If you go through accept again, you are establishing a new connection."}, {"owner": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "edited": false, "score": 0, "creation_date": 1426774377, "post_id": 29134157, "comment_id": 46516161, "body": "Indeed, which seem to happen in the case of sending, but not receiving, on the server, and hence the reason I posted this. I added the codes, so you can see what happens in both receive and send threads"}], "tags": [], "owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "is_accepted": false, "score": 0, "last_activity_date": 1426718957, "creation_date": 1426718957, "answer_id": 29134157, "question_id": 29134010, "link": "https://stackoverflow.com/questions/29134010/can-send-but-not-receive-in-c-server-from-android-client-after-changing-ne/29134157#29134157", "title": "Can send but not receive in C (server), from Android (client), after changing networks IP on client", "body": "<p>TCP is connection oriented. Once a TCP connection is establised you get what is known as a socket pair. A Socket pair is the combination of the source ip adress and source port and destination ip address and destination port. The connection is uniquely identified by those 4 parameters.</p>\n\n<p>During the whole session the same ip adresses and ports will be used.</p>\n\n<p>So if one network interface is no longer available, you have a problem, because each network interface will have a ip address, if it is no longer available a different one cannot be chosen anymore by the TCP connection.</p>\n\n<p>TCP does not support changing IP adresses on either end of the connection.</p>\n\n<p>It will take quite a long time to detect that there is a problem. You think you are still able to send, but, TCP will retransmit several times and eventually you will see that the send fails. This takes even e few minutes. Depending on your socket being blocking or not you will notice that send would block in the error condition where the IP@ has changed. This is like broken wire from TCP's point of view.</p>\n"}], "owner": {"reputation": 701, "user_id": 2083341, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4c88f9cf40f2e217cd9c3016f6eab528?s=128&d=identicon&r=PG", "display_name": "Wilhelm Sorban", "link": "https://stackoverflow.com/users/2083341/wilhelm-sorban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426724741, "creation_date": 1426718211, "last_edit_date": 1426724741, "question_id": 29134010, "link": "https://stackoverflow.com/questions/29134010/can-send-but-not-receive-in-c-server-from-android-client-after-changing-ne", "title": "Can send but not receive in C (server), from Android (client), after changing networks IP on client", "body": "<p>Edit: Before anything else, I know what TCP and UDP are, and the differences, but then how can one explain that I am able to receive on Client from Server, but not send, as seen below...?</p>\n\n<p>I made a server app in C, and a client app in Java, which I deployed to Android.\nI have a strange problem, which I am not able to overcome.</p>\n\n<p>When my phone IP changes (for example when switching to Mobile network, from Wifi, or viceversa), the application in C is no longer able to receive data, just to send, even though the phone sends it, without any errors.</p>\n\n<p>This does not happen when reconnecting to the same network.</p>\n\n<p>I tried many things, and ended up with this, in C:</p>\n\n<pre><code>void *receive_thread(){\n    pthread_detach(pthread_self());\n\n    struct sockaddr_in dest; /* socket info about the machine connecting to us */\n    struct sockaddr_in serv; /* socket info about our server */\n    int mysocket;            /* socket used to listen for incoming connections */\n    socklen_t socksize = sizeof(struct sockaddr_in);\n\n    memset(&amp;serv, 0, sizeof(serv));           /* zero the struct before filling the fields */\n    serv.sin_family = AF_INET;                /* set the type of connection to TCP/IP */\n    serv.sin_addr.s_addr = htonl(INADDR_ANY); /* set our address to any interface */\n    serv.sin_port = htons(PORTNUMRCV);           /* set the server port number */    \n\n    mysocket = socket(AF_INET, SOCK_STREAM, 0);\n\n    //fcntl(mysocket, F_SETFD, O_NONBLOCK);\n\n    /* bind serv information to mysocket */\n    bind(mysocket, (struct sockaddr *)&amp;serv, sizeof(struct sockaddr));\n\n    /* start listening, allowing a queue of up to 1 pending connection */\n    listen(mysocket, 1);\n\n    int consocket = accept(mysocket, (struct sockaddr *)&amp;dest, &amp;socksize);\n    while(consocket){\n        //socklen_t fromlen;\n        //fromlen = sizeof inet_ntoa(dest.sin_addr);\n        char receivemsg[128];\n\n        int rlen = recv(consocket, &amp;receivemsg, 128, 0); //receive data\n        int err = errno;\n        //printf(\"recv error: %d\\n\", err);\n        printf(\"Received string: %s from %s \\n\", receivemsg, inet_ntoa(dest.sin_addr));\n        if(rlen &gt; 0){\n            receivemsg[rlen] = '\\0';\n            if(comparestr(KEY, receivemsg) == 1){\n                printf(\"Local client\\n\");\n                incrementor++;\n            } else if(comparestr(KEY, receivemsg) == 2){\n                printf(\"Remote client\\n\");\n                incrementor--;\n            } else {\n                printf(\"Wrong key!\\n\");\n            }\n        } else {\n            printf(\"Care!!!! Receiving: %d \\n\", rlen);\n        }\n        close(consocket);\n        consocket = accept(mysocket, (struct sockaddr *)&amp;dest, &amp;socksize);\n    }\n    printf(\"Receive thread ended!\\n\");\n    receive_thread_up = 0;\n}\n\nvoid *send_thread(){\n    pthread_detach(pthread_self());\n\n    struct sockaddr_in dest; /* socket info about the machine connecting to us */\n    struct sockaddr_in serv; /* socket info about our server */\n    int mysocket;            /* socket used to listen for incoming connections */\n    socklen_t socksize = sizeof(struct sockaddr_in);\n\n    memset(&amp;serv, 0, sizeof(serv));           /* zero the struct before filling the fields */\n    serv.sin_family = AF_INET;                /* set the type of connection to TCP/IP */\n    serv.sin_addr.s_addr = htonl(INADDR_ANY); /* set our address to any interface */\n    serv.sin_port = htons(PORTNUMSND);           /* set the server port number */\n\n    mysocket = socket(AF_INET, SOCK_STREAM, 0);\n\n    /* bind serv information to mysocket */\n    bind(mysocket, (struct sockaddr *)&amp;serv, sizeof(struct sockaddr));\n\n    /* start listening, allowing a queue of up to 1 pending connection */\n    listen(mysocket, 1);\n\n    int consocket = accept(mysocket, (struct sockaddr *)&amp;dest, &amp;socksize);\n    while(consocket){\n        //printf(\"Incoming connection from %s - sending string\\n\", inet_ntoa(dest.sin_addr));\n        int slen = send(consocket, KEY, 3*sizeof(KEY), 0); //send data\n        if(slen&gt;0)printf(\"Sent string: %s to %s \\n\", KEY, inet_ntoa(dest.sin_addr));\n        else {\n            printf(\"Care!!! Sending: %d \\n\", slen);\n        }       \n        close(consocket);\n        consocket = accept(mysocket, (struct sockaddr *)&amp;dest, &amp;socksize);\n    }\n    printf(\"Send thread ended!\\n\");\n    send_thread_up = 0;\n}\n</code></pre>\n\n<p>And this, in Java:</p>\n\n<pre><code>public static int sendString(String str) throws IOException{\n    System.out.println(\"Sending string: \" + str);\n    out.println(str);\n    return 0;\n}\n\npublic static String receiveString(){\n    String s = \" \";\n    try {\n        s = in.readLine();\n    } catch (SocketException e) {\n        System.out.println(\"Socket Exception: \" + e);\n    } catch (IOException e) {\n        System.out.println(\"IOException on receive: \" + e);\n    }\n    System.out.println(\"Received string: \" + s);\n    return s;\n}\npublic static String reverseString(String str){\n    String newStr = \" \";\n    newStr = new StringBuilder(str).reverse().toString();\n    return newStr;\n}\n</code></pre>\n\n<p>My guess is that recv gets stuck, hence why I tried to add </p>\n\n<pre><code>fcntl(mysocket, F_SETFD, O_NONBLOCK);\n</code></pre>\n\n<p>, which after not working, I commented it.\nMaybe use UDP socket? I may run into issues like message not arriving, or not being whole.\nSuggestions to improve my code are also welcome!</p>\n\n<p>Here is the output in C:</p>\n\n<pre><code>Thread: No connection, waiting...\nSent string: I4mP4ssw0rd7 to 192.168.1.2\nReceived string: I4mP4ssw0rd7\n from 192.168.1.2\nLocal client\nSent string: I4mP4ssw0rd7 to 192.168.1.2\nThread: Local connection!\nReceived string: I4mP4ssw0rd7\n from 192.168.1.2\nLocal client\nSent string: I4mP4ssw0rd7 to 192.168.1.2\nSent string: I4mP4ssw0rd7 to 87.edited\nSent string: I4mP4ssw0rd7 to 87.edited\nSent string: I4mP4ssw0rd7 to 87.edited\nSent string: I4mP4ssw0rd7 to 87.edited\nSent string: I4mP4ssw0rd7 to 87.edited\n</code></pre>\n\n<p>And here is the output from Java:</p>\n\n<pre><code>03-18 22:52:45.831  13899-13899/willymatica.alarmapp1 I/System.out\ufe55 Connected!\n03-18 22:52:49.375  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected locally!\n03-18 22:52:49.585  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n03-18 22:52:54.900  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Sending string: I4mP4ssw0rd7\n03-18 22:52:54.910  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected locally!\n03-18 22:52:54.970  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n03-18 22:53:00.265  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Sending string: I4mP4ssw0rd7\n03-18 22:53:00.285  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected locally!\n03-18 22:53:00.315  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n03-18 22:53:05.631  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Sending string: I4mP4ssw0rd7\n03-18 22:53:05.631  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected remotely!\n03-18 22:53:05.851  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n03-18 22:53:11.266  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Sending string: 7dr0wss4Pm4I\n03-18 22:53:11.286  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected remotely!\n03-18 22:53:11.516  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n03-18 22:53:16.912  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Sending string: 7dr0wss4Pm4I\n03-18 22:53:16.932  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected remotely!\n03-18 22:53:17.162  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n03-18 22:53:22.547  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Sending string: 7dr0wss4Pm4I\n03-18 22:53:22.567  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected remotely!\n03-18 22:53:23.198  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n03-18 22:53:28.933  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Sending string: 7dr0wss4Pm4I\n03-18 22:53:28.933  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Connected remotely!\n03-18 22:53:29.113  13899-13920/willymatica.alarmapp1 I/System.out\ufe55 Received string: I4mP4ssw0rd7\n</code></pre>\n"}, {"tags": ["c++", "c", "extern"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1426717990, "post_id": 29133925, "comment_id": 46493487, "body": "Yes, <code>test.c</code> should see the <code>16</code>. So you need to show us a <a href=\"http://stackoverflow.com/help/mcve\">Minimal Complete Verifiable Example</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426718075, "post_id": 29133925, "comment_id": 46493513, "body": "By what you have described, the value of <code>variable</code> in <code>test.c</code>, should be 16.  <b><i><a href=\"http://stackoverflow.com/questions/1433204/how-do-i-use-extern-to-share-variables-between-source-files-in-c\">You have described it correctly</a></i></b>:  Create variable with extern scope in header file.  Define same variable in a .c, assigning an initialization value.  Access variable in any other .c file that #includes the .h in which extern variable is created."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718083, "post_id": 29133925, "comment_id": 46493517, "body": "Make sure that &quot;<code>int variable=16;</code>&quot; statement is outside of all functions, or it won&#39;t be an <code>extern</code>.  If it&#39;s inside a function, that will just be a local variable that no other function can see."}, {"owner": {"reputation": 3141, "user_id": 2468549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b87d95c561b24d120cbfb5a1c5c9867?s=128&d=identicon&r=PG", "display_name": "Frax", "link": "https://stackoverflow.com/users/2468549/frax"}, "edited": false, "score": 0, "creation_date": 1426718827, "post_id": 29133925, "comment_id": 46493792, "body": "It seems to be likely that some other variable with the same name overshadows the global one, in one cpp file or another. Impossible to say without actual source."}, {"owner": {"reputation": 1561, "user_id": 1342288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/YqpE3.jpg?s=128&g=1", "display_name": "Mike Jablonski", "link": "https://stackoverflow.com/users/1342288/mike-jablonski"}, "edited": false, "score": 1, "creation_date": 1426722904, "post_id": 29133925, "comment_id": 46495083, "body": "<a href=\"http://stackoverflow.com/questions/1433204/how-do-i-use-extern-to-share-variables-between-source-files-in-c/1433387#1433387\">existing answer</a>. Your question may have already been answered here."}], "answers": [{"tags": [], "owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1426745823, "creation_date": 1426745823, "answer_id": 29138299, "question_id": 29133925, "link": "https://stackoverflow.com/questions/29133925/declaring-an-extern-variable-in-a-header-file/29138299#29138299", "title": "Declaring an extern variable in a header file", "body": "<p>When your Including your <code>main.h</code> header file, the copy of the file will included in the <code>main.c</code> program.</p>\n\n<p>when your alterate into the main.c file , it will not affect the original file.So the value will not affect the original file, and when your are including the file again in the <code>test.c</code> file .</p>\n\n<p>Then the copy of the <code>main.h</code> will added to the test.c file</p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 3775102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c76df4c37ad5f7bd0ca7fd93777efac?s=128&d=identicon&r=PG&f=1", "display_name": "sharon", "link": "https://stackoverflow.com/users/3775102/sharon"}, "is_accepted": false, "score": 1, "last_activity_date": 1426745979, "creation_date": 1426745979, "answer_id": 29138333, "question_id": 29133925, "link": "https://stackoverflow.com/questions/29133925/declaring-an-extern-variable-in-a-header-file/29138333#29138333", "title": "Declaring an extern variable in a header file", "body": "<p>You are just including the file main.h in the programs.\nWhen you include in main.c the variable will be 16 and the value will be updated in the main.h.\nBut when you compile the test.c the value of variable will be 0 initially.\nSo when you print the value it will be 0.</p>\n\n<p>main.c and test.c will be executed in two separate process, so if the value changes in the main.c it will be not updated in the test.c process.</p>\n\n<p>Only within the single process the value will be updated.</p>\n"}], "owner": {"reputation": 591, "user_id": 2520785, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c5442fc87cc6d5e8cf23f1f89c8a2605?s=128&d=identicon&r=PG&f=1", "display_name": "Pototo", "link": "https://stackoverflow.com/users/2520785/pototo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 1, "closed_date": 1439228098, "answer_count": 2, "score": 1, "last_activity_date": 1426745979, "creation_date": 1426717815, "question_id": 29133925, "link": "https://stackoverflow.com/questions/29133925/declaring-an-extern-variable-in-a-header-file", "closed_reason": "Duplicate", "title": "Declaring an extern variable in a header file", "body": "<p>I have declared an extern <strong>global</strong> variable inside my main.<strong>h</strong> header file like this:</p>\n\n<pre><code>extern int variable;\n</code></pre>\n\n<p>Then, I defined the same global variable inside my main.<strong>c</strong> file like this:</p>\n\n<pre><code>int variable = 16;\n</code></pre>\n\n<p>The thing is that I am using another file called <strong>test.c</strong>, and I have included main.<strong>h</strong> header included inside. But I cannot gain access the the \"<strong>16</strong>\" value that I defined the extern with inside main.<strong>c</strong>. When I call \"variable\" inside <strong>test.c</strong>, the value of \"variable\" is \"<strong>0</strong>\". Should not any .c file that includes my main.<strong>h</strong> header have access to the \"<strong>16</strong>\" value since I have already defined my \"variable\" inside main.<strong>c</strong>???</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 739, "user_id": 2710409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IZ3I.jpg?s=128&g=1", "display_name": "Joshpbarron", "link": "https://stackoverflow.com/users/2710409/joshpbarron"}, "edited": false, "score": 0, "creation_date": 1426717549, "post_id": 29133843, "comment_id": 46493333, "body": "We need more code than this, what types are change and amount?"}, {"owner": {"reputation": 32230, "user_id": 119271, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a6919c8388bc3d388da7806ab415ef54?s=128&d=identicon&r=PG", "display_name": "Douglas", "link": "https://stackoverflow.com/users/119271/douglas"}, "edited": false, "score": 1, "creation_date": 1426719104, "post_id": 29133843, "comment_id": 46493889, "body": "The cast probably doesn&#39;t do anything in this code example, but the background here could help: <a href=\"http://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples\" title=\"floating point inaccuracy examples\">stackoverflow.com/questions/2100490/&hellip;</a>"}, {"owner": {"reputation": 33, "user_id": 4354944, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-M9EO_Q0awXA/AAAAAAAAAAI/AAAAAAAAAEs/Wv6wbOK1kMc/photo.jpg?sz=128", "display_name": "Lift alots", "link": "https://stackoverflow.com/users/4354944/lift-alots"}, "edited": false, "score": 1, "creation_date": 1426720235, "post_id": 29133843, "comment_id": 46494219, "body": "change is an integer, and amount is a float."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1426722503, "post_id": 29133843, "comment_id": 46494971, "body": "Then please update the question to say that, preferably by showing the actual declarations of <code>change</code> and <code>amount</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1426726766, "post_id": 29133843, "comment_id": 46496079, "body": "Programs that deal with money must NEVER use floating point values, ever. Floats (and doubles) are for higher math, not adding and subtracting amounts that need to be exact."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4354944, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-M9EO_Q0awXA/AAAAAAAAAAI/AAAAAAAAAEs/Wv6wbOK1kMc/photo.jpg?sz=128", "display_name": "Lift alots", "link": "https://stackoverflow.com/users/4354944/lift-alots"}, "edited": false, "score": 0, "creation_date": 1426732454, "post_id": 29134664, "comment_id": 46497464, "body": "I really appreciate the feedback, user3386109."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 2, "last_activity_date": 1426721686, "creation_date": 1426721686, "answer_id": 29134664, "question_id": 29133843, "link": "https://stackoverflow.com/questions/29133843/understanding-type-casting/29134664#29134664", "title": "Understanding Type Casting", "body": "<p>The problem is that there is no exact representation of <code>0.01</code> as a floating point number, so there are rounding errors when computing change. The ideal solution is to avoid using floating point numbers altogether. Use fixed point arithmetic instead. </p>\n\n<p>As an example, instead of a floating point number like <code>3.45</code> to represent three dollars and forty-five cents, you can use the integer value <code>345</code>. This type of representation is known as fixed-point because there's an assumed decimal point before the second-to-last digit.  </p>\n\n<p>The following sample program shows one way to read a dollar amount (like 3.45) as a fixed point number.</p>\n\n<pre><code>int main( void )\n{\n    int dollars, cents, count, amount;\n\n    printf( \"Enter amount: \" );\n    fflush( stdout );\n    count = scanf( \"%d.%d\", &amp;dollars, &amp;cents );\n\n    if ( count == 1 )\n        amount = dollars * 100;\n    else if ( count == 2 &amp;&amp; cents &lt; 100 )\n        amount = dollars * 100 + cents;\n    else\n        amount = 0;\n\n    printf( \"%d\\n\", amount );\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4354944, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-M9EO_Q0awXA/AAAAAAAAAAI/AAAAAAAAAEs/Wv6wbOK1kMc/photo.jpg?sz=128", "display_name": "Lift alots", "link": "https://stackoverflow.com/users/4354944/lift-alots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 29134664, "answer_count": 1, "score": 0, "last_activity_date": 1426731415, "creation_date": 1426717380, "last_edit_date": 1426731415, "question_id": 29133843, "link": "https://stackoverflow.com/questions/29133843/understanding-type-casting", "title": "Understanding Type Casting", "body": "<p>I made a very simple program that distributes back change(quarters, dimes, nickels, and pennies) to the user. It distributes back the same amount, value, in change that the user inputs in cash. It was performing well until I input: 0.59\nSo, after tinkering with the program a little I was able to fix this issue. However, I still do not understand what exactly I did right to fix it... </p>\n\n<p>int change_owed(float amount)\n{</p>\n\n<pre><code>int change, coins;\nchange = coins = 0;\n\nchange = (float)(amount * 1000000.0);\nchange /= 10000;\n</code></pre>\n\n<p>Any explanation would be great. Also, I apologize if this question has already been asked. Upon searching stackoverflow, I could not find a solution. </p>\n"}, {"tags": ["mysql", "c", "database", "network-programming"], "answers": [{"tags": [], "owner": {"reputation": 1967, "user_id": 1443141, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/264f6777ee8c3ea65c3b1ff5fa97d869?s=128&d=identicon&r=PG", "display_name": "juacala", "link": "https://stackoverflow.com/users/1443141/juacala"}, "is_accepted": true, "score": 1, "last_activity_date": 1426717430, "creation_date": 1426717430, "answer_id": 29133851, "question_id": 29133507, "link": "https://stackoverflow.com/questions/29133507/inserting-in-mysql-table/29133851#29133851", "title": "Inserting in MySQL Table", "body": "<p>Note that mysql_query returns a zero if it is successful, and an error code if it's unsucessful <a href=\"http://dev.mysql.com/doc/refman/5.0/en/mysql-query.html\" rel=\"nofollow\">MySQL Docs</a>. I think you might be treating it backward. So I think it's issuing an error you're not catching. </p>\n\n<p>As a guess of what might be wrong, try telling it what columns you're inserting into: </p>\n\n<pre><code>INSERT INTO department (`column1`,`column2`,`column3`) \nvalues ('Statistics','Taylor',395051.74)\n</code></pre>\n"}], "owner": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 29133851, "answer_count": 1, "score": 0, "last_activity_date": 1486330444, "creation_date": 1426715975, "last_edit_date": 1486330444, "question_id": 29133507, "link": "https://stackoverflow.com/questions/29133507/inserting-in-mysql-table", "title": "Inserting in MySQL Table", "body": "<p>I am trying to insert data into mysql table through mysql C client, through the step written below.</p>\n\n<p>The <strong>command</strong> is of the Form : (A variable string generated at run time)</p>\n\n<pre><code>INSERT INTO department values('Statistics','Taylor',395051.74)\n</code></pre>\n\n<p>which is correct for MySQL.</p>\n\n<pre><code>if (mysql_query(con, command))\n{\n\nprintf(\"Done\\n\");\n}\nprintf(\"\\n%s\\n\",command);\n</code></pre>\n\n<p>But my database shows no change. No rows get inserted, is there any way the above steps could not work?</p>\n"}, {"tags": ["c", "linked-list", "free"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 3171423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f2cda26fad8ddbcebd56ac6bdfa116a?s=128&d=identicon&r=PG&f=1", "display_name": "jmann", "link": "https://stackoverflow.com/users/3171423/jmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1426716334, "creation_date": 1426716334, "answer_id": 29133598, "question_id": 29133491, "link": "https://stackoverflow.com/questions/29133491/free-behavior-with-linked-lists/29133598#29133598", "title": "Free behavior with linked lists", "body": "<p>Not unless you explicitly free it. <code>free</code> takes in a pointer and marks that memory as ready for future use.</p>\n\n<p>You have to free the memory used by that linked list element, then move your pointers around. If you lose all pointers to that element before you free it, then you can't free it, thus creating a memory leak.</p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 2, "last_activity_date": 1426716447, "creation_date": 1426716447, "answer_id": 29133632, "question_id": 29133491, "link": "https://stackoverflow.com/questions/29133491/free-behavior-with-linked-lists/29133632#29133632", "title": "Free behavior with linked lists", "body": "<p>free will release whatever you point it at. Nothing happens by magic. YOu must call free on the unlinked element</p>\n\n<p>What you hoping for (automatic release of memory when no longer in use) is provided by either reference counted pointers (like shared_ptr in c++) or garbage collection (in C#, Java, javascript,...)</p>\n"}, {"tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": true, "score": 0, "last_activity_date": 1426717903, "last_edit_date": 1426717903, "creation_date": 1426717599, "answer_id": 29133882, "question_id": 29133491, "link": "https://stackoverflow.com/questions/29133491/free-behavior-with-linked-lists/29133882#29133882", "title": "Free behavior with linked lists", "body": "<p>I assume that \"Will free get rid of the memory...\" is referring to the <code>free()</code> function.  Yes, the <code>free()</code> function will free all of the memory allocated by a <em>single</em> <code>malloc()</code>, <code>calloc()</code> or <code>realloc()</code> call. </p>\n\n<p>Make sure you've completely unlinked the entry before calling <code>free()</code>.  Any use of the memory (read or write) after calling free() is undefined behavior.</p>\n"}], "owner": {"reputation": 5, "user_id": 4686833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aOgXF4koexQ/AAAAAAAAAAI/AAAAAAAAADQ/zKHxJPjXeRs/photo.jpg?sz=128", "display_name": "Patrick Kochan", "link": "https://stackoverflow.com/users/4686833/patrick-kochan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 29133882, "answer_count": 3, "score": 0, "last_activity_date": 1426717903, "creation_date": 1426715891, "question_id": 29133491, "link": "https://stackoverflow.com/questions/29133491/free-behavior-with-linked-lists", "title": "Free behavior with linked lists", "body": "<p>When removing an element from a linked list by just moving the pointer. Will free get rid of the memory after the element in the linked list is no longer connected to the list?</p>\n"}, {"tags": ["c", "prolog", "ffi", "sicstus-prolog"], "answers": [{"comments": [{"owner": {"reputation": 19369, "user_id": 4609915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4fcZU.png?s=128&g=1", "display_name": "repeat", "link": "https://stackoverflow.com/users/4609915/repeat"}, "edited": false, "score": 0, "creation_date": 1455279936, "post_id": 29134649, "comment_id": 58430963, "body": "That&#39;s <b>not</b> it: With SICStus, <code>current_prolog_flag(bounded,F)</code> succeeds with <code>F = false</code>."}], "tags": [], "owner": {"reputation": 475, "user_id": 4038579, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7f2d6020e5ffc84e7d23f92848c2fee7?s=128&d=identicon&r=PG&f=1", "display_name": "mirta", "link": "https://stackoverflow.com/users/4038579/mirta"}, "is_accepted": false, "score": 1, "last_activity_date": 1426721598, "creation_date": 1426721598, "answer_id": 29134649, "question_id": 29133212, "link": "https://stackoverflow.com/questions/29133212/sicstus-prolog-4-passing-integers-from-prolog-to-c/29134649#29134649", "title": "SICStus Prolog 4: Passing integers from Prolog to C", "body": "<p>I'm not sure, but maybe it is because integer has a specific size. Basic integer is in range [\u221232767,+32767], long integer  [\u22122147483647,+2147483647] ...</p>\n"}, {"comments": [{"owner": {"reputation": 8626, "user_id": 22676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/490a57667dbfc7a37fbf6310e1efc234?s=128&d=identicon&r=PG", "display_name": "Per Mildner", "link": "https://stackoverflow.com/users/22676/per-mildner"}, "reply_to_user": {"reputation": 19369, "user_id": 4609915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4fcZU.png?s=128&g=1", "display_name": "repeat", "link": "https://stackoverflow.com/users/4609915/repeat"}, "edited": false, "score": 1, "creation_date": 1427052759, "post_id": 29134932, "comment_id": 46610181, "body": "No, there are no C-level convenience functions for throwing exceptions. We typically let our foreign functions return an integer error code that the calling Prolog code then use to decide whether an exception should be thrown. See the library source code for examples."}, {"owner": {"reputation": 8626, "user_id": 22676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/490a57667dbfc7a37fbf6310e1efc234?s=128&d=identicon&r=PG", "display_name": "Per Mildner", "link": "https://stackoverflow.com/users/22676/per-mildner"}, "reply_to_user": {"reputation": 19369, "user_id": 4609915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4fcZU.png?s=128&g=1", "display_name": "repeat", "link": "https://stackoverflow.com/users/4609915/repeat"}, "edited": false, "score": 0, "creation_date": 1427294267, "post_id": 29134932, "comment_id": 46719685, "body": "The case when you throw an exception should be uncommon, so it should not matter for efficiency how you do it. Throwing exceptions from Prolog is much easier. On using &quot;failure&quot; as a result: a result code can convey more information than just success/failure."}], "tags": [], "owner": {"reputation": 8626, "user_id": 22676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/490a57667dbfc7a37fbf6310e1efc234?s=128&d=identicon&r=PG", "display_name": "Per Mildner", "link": "https://stackoverflow.com/users/22676/per-mildner"}, "is_accepted": true, "score": 3, "last_activity_date": 1426723391, "last_edit_date": 1495542201, "creation_date": 1426723391, "answer_id": 29134932, "question_id": 29133212, "link": "https://stackoverflow.com/questions/29133212/sicstus-prolog-4-passing-integers-from-prolog-to-c/29134932#29134932", "title": "SICStus Prolog 4: Passing integers from Prolog to C", "body": "<p>You are correct, the foreign type <code>integer</code> corresponds to the C type <code>SP_integer</code> and can only be used for small integers. For arbitrary sized integers you need to use the foreign type <code>term</code>, corresponding to the C type <code>SP_term_ref</code>, and use the <code>SP_get_integer_bytes()</code> function to get the bytes. See <a href=\"https://stackoverflow.com/q/28832027/22676\">Passing arbitrary-sized integers from Prolog to C</a> for more on this.</p>\n\n<p>You do not need an explicit dynamic type check since <code>SP_get_integer_bytes()</code> works for all sizes of integers and gracefully fails with an error code if its argument is not an integer.</p>\n"}], "owner": {"reputation": 19369, "user_id": 4609915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4fcZU.png?s=128&g=1", "display_name": "repeat", "link": "https://stackoverflow.com/users/4609915/repeat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 29134932, "answer_count": 2, "score": 2, "last_activity_date": 1426723391, "creation_date": 1426714726, "question_id": 29133212, "link": "https://stackoverflow.com/questions/29133212/sicstus-prolog-4-passing-integers-from-prolog-to-c", "title": "SICStus Prolog 4: Passing integers from Prolog to C", "body": "<p>Still learning the ropes of the SICStus Prolog 4 FFI to C, I'm having a specific question about the example predicate c1/2 in <a href=\"https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/Foreign-Code-Examples.html#Foreign-Code-Examples\" rel=\"nofollow\">https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/Foreign-Code-Examples.html#Foreign-Code-Examples</a>.</p>\n\n<p>ex.pl includes the line:</p>\n\n<pre><code> foreign(c1,  c, c1(+integer, [-integer])).\n</code></pre>\n\n<p>and ex.c includes the following snippet:</p>\n\n<pre><code> /* c1(+integer, [-integer]) */\n SP_integer c1(a)\n SP_integer a;\n {\n    return(a+9);\n }\n</code></pre>\n\n<p>This works for small integers:</p>\n\n<pre><code> | ?- c1(100,X).\n X = 109 ?\n yes\n | ?- c1(100000000000000,X).\n X = 100000000000009 ?\n yes\n</code></pre>\n\n<p>It does not work for big integers:</p>\n\n<pre><code> | ?- c1(10000000000000000000000000,X).\n X = 1590897978359414793 ? \n yes\n</code></pre>\n\n<p>How can I handle both small and big integers correctly (and efficiently)?\nIIRC big integers cannot be passed as \"SP_integers\", so should I pass these values as terms (\"SP_term_ref\") and do suitable dynamic type checks (possibly followed by data extraction)? Help, please!</p>\n"}, {"tags": ["c", "loops", "command-line"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1426715026, "post_id": 29133210, "comment_id": 46492280, "body": "The <code>j</code> argument is redundant."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426715699, "post_id": 29133210, "comment_id": 46492582, "body": "You have two choices, either A) call <code>replace_str</code> multiple times in <code>main</code> before calling <code>puts</code>, or B) pass <code>argc</code> and <code>argv</code> in its entirety to <code>replace_str</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426717304, "post_id": 29133210, "comment_id": 46493235, "body": "the call to getchar() will not input the command line parameters.  yet that seems to be what the code is trying to do."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426718170, "post_id": 29133210, "comment_id": 46493547, "body": "this line: &#39;strncpy(buffer, str, p-str);&#39; will copy 1 character not enough the line should be: &#39;strncpy(buffer, str, (p-str)+1);&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1426726860, "last_edit_date": 1426726860, "creation_date": 1426716157, "answer_id": 29133559, "question_id": 29133210, "link": "https://stackoverflow.com/questions/29133210/multiple-command-line-arguments-replace-words/29133559#29133559", "title": "Multiple Command-Line Arguments - Replace Words", "body": "<p>Two issues, you are not guaranteeing a null-terminated <code>str</code> and second, you are not iterating over the words on the command line to censor each. Try the following in main after your <code>getchar()</code> loop:</p>\n\n<pre><code>/* null-terminate str */\nstr[i] = 0;\n\n/* you must check each command line word (i.e. argv[j]) */\nfor (j = 1; j &lt; argc; j++)\n{\n    puts(replace_str( str, argv[j], \"CENSORED\", j, argc ) );\n}\n</code></pre>\n\n<p><strong>Note:</strong> that will place each of the CENSORED words on a separate line. As noted in the comments, move <code>puts</code> (or preferably <code>printf</code>) outside the loop to keep on a single line.</p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>I apologize. You have more issues than stated above. Attempting to check the fix, it became apparent that you would continue to have difficulty parsing the words depending on the order the <code>bad</code> words were entered on the command line. </p>\n\n<p>While it is possible to do the pointer arithmetic to copy/expand/contract the original string regardless of the order the words appear on the command line, it is far easier to simply separate the words provided into an array, and then compare each of the bad words against each word in the original string. </p>\n\n<p>This can be accomplished relatively easily with <code>strtok</code> or <code>strsep</code>. I put together a quick example showing this approach. (<strong>note:</strong> make a copy of the string before passing to <code>strtok</code>, as it will alter the original). I believe this is what you were attempting to do, but you were stumbling on not having the ability to compare each word (thus your use of <code>strstr</code> to test for a match).</p>\n\n<p>Look over the example and let me know if you have further questions. Note: I replaced your hardcoded <code>4096</code> with a <code>SMAX</code> define and provided a word max <code>WMAX</code> for words entered on the command line. Also <strong>always initialize your strings/buffers</strong>.  It will enable you to always be able to easily find the last char in the buffer and ensure the buffer is always null-terminated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define SMAX 4096\n#define WMAX 50\n\nchar *replace_str (char *str, char **bad, char *rep)\n{\n    static char buffer[SMAX] = {0};\n    char *p = buffer;\n    char *wp = NULL;\n    unsigned i = 0;\n    unsigned char censored = 0;\n\n    char *str2 = strdup (str);              /* make copy of string for strtok  */\n    char *savp = str2;                      /* and save start address to free   */\n\n    if (!(wp = strtok (str2, \" \")))         /* get first word in string or bail */\n    {\n        if (savp) free (savp);        \n        return str;\n    }\n\n    while (bad[i])                          /* test against each bad word       */\n    {\n        if (strcmp (wp, bad[i++]) == 0)     /* if matched, copy rep to buffer   */\n        {\n            memcpy (buffer, rep, strlen (rep));\n            censored = 1;\n        }\n    }\n\n    if (!censored)                          /* if no match, copy original word  */\n        memcpy (buffer, wp, strlen (wp));\n\n    while ((wp = strtok (NULL, \" \")))       /* repeat for each word in str      */\n    {\n        i = 0;\n        censored = 0;\n\n        memcpy (strchr (buffer, 0), \" \", 1);\n        p = strchr (buffer, 0);             /* (get address of null-term char)  */\n\n        while (bad[i])\n        {\n            if (strcmp (wp, bad[i++]) == 0)\n            {\n                memcpy (p, rep, strlen (rep));\n                censored = 1;\n            }\n        }\n\n        if (!censored)\n            memcpy (p, wp, strlen (wp));\n    }\n\n    if (savp) free (savp);                  /* free copy of strtok string       */\n    return buffer;\n}\n\nint main ( int argc, char** argv)\n{   \n    unsigned int i = 0;\n    char str[SMAX] = {0};\n    char *badwords[WMAX] = {0};             /* array to hold command line words */\n\n    for (i = 1; i &lt; argc; i++)              /* save command line in array       */\n        badwords[i-1] = strdup (argv[i]);\n\n    i = 0;                                  /* print out the censored words     */\n    printf (\"\\nCensor words:\");\n    while (badwords[i])\n        printf (\" %s\", badwords[i++]);\n    printf (\"\\n\\n\");\n\n    printf (\"Enter string: \");              /* promt to enter string to censor  */\n\n    if (fgets (str, SMAX-1, stdin) == NULL)\n    {\n        fprintf (stderr, \"error: failed to read str from stdin\\n\");\n        return 1;\n    }\n\n    str[strlen (str) - 1] = 0;              /* strip linefeed from input str    */\n\n    /* print out censored string */\n    printf (\"\\ncensored str: %s\\n\\n\", replace_str (str, badwords, \"CENSORED\"));\n\n    i = 0;                                  /* free all allocated memory        */\n    while (badwords[i])\n        free (badwords[i++]);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>use/output</strong></p>\n\n<pre><code>./bin/censorw bad realbad\n\nCensor words: bad realbad\n\nEnter string: It is not nice to say bad or realbad words.\n\ncensored str: It is not nice to say CENSORED or CENSORED words.\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4142247, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/62fc7c97cd71c8d76dfab221dfc526f8?s=128&d=identicon&r=PG&f=1", "display_name": "ballin", "link": "https://stackoverflow.com/users/4142247/ballin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426726860, "creation_date": 1426714714, "last_edit_date": 1426715024, "question_id": 29133210, "link": "https://stackoverflow.com/questions/29133210/multiple-command-line-arguments-replace-words", "title": "Multiple Command-Line Arguments - Replace Words", "body": "<p>I've a program which takes any number of words from the command-line arguments and replaces them with the word 'CENSORED'. I finally have the program working for the first argument passed in, and I am having trouble getting the program to censor all arguments, outputted in just a single string. The program rather functions individually on a given argument and does not take them all into account. How would I modify this?</p>\n\n<p>How does one use/manipulate multiple command-line arguments collectively ?</p>\n\n<p>My code follows.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar *replace_str(char *str, char *orig, char *rep, int j, int argc)\n{\n    static char buffer[4096];\n    char *p;\n\n    for ( j = 1; j &lt;= argc; j++ )  \n    {\n\n        if(!(p = strstr(str, orig)))  // Check if 'orig' is not in 'str'\n        {\n            if ( j == argc )    {  return str;  }  // return str once final argument is reached\n            else                {  continue;    }  // restart loop with next argument\n        }\n\n        strncpy(buffer, str, p-str);  // Copy characters from 'str' start to 'orig' str\n        buffer[p-str] = '\\0';\n\n        if ( j == argc )        {  return buffer;  }\n        else                    {  continue;       }\n    }\n    sprintf(buffer+(p-str), \"%s%s\", rep, p+strlen(orig));\n}\n\nint main( int argc, char* argv[] )  //argv: list of arguments; array of char pointers //argc: # of arguments.\n{   \n    long unsigned int c, i = 0, j = 1;\n\n    char str[4096];\n\n    while ( (c = getchar()) != EOF )\n    {\n        str[i] = c;  // save input string to variable 'str'\n        i++;\n    }\n    puts(replace_str( str, argv[j], \"CENSORED\", j, argc ) );\n\n    return 0;\n}\n\n\ni.e. \n$ cat Hello.txt \n\nHello, I am me.\n\n$ ./replace Hello me &lt; Hello.txt\n\nCENSORED, I am CENSORED.\n</code></pre>\n"}, {"tags": ["c", "if-statement", "zero"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1426714424, "post_id": 29133090, "comment_id": 46491987, "body": "It depends on who you ask. Then there is <code>if ( 0 != foo ) {</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3542327"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1426714492, "post_id": 29133090, "comment_id": 46492014, "body": "No way I&#39;m writing that though..."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426714999, "post_id": 29133090, "comment_id": 46492266, "body": "I typically use the first when <code>foo</code> is an integer quantity that can have many values, and the second when <code>foo</code> is a boolean (1/0, yes/no, true/false) quantity.  Not to say that <code>foo</code> has to be declared as a <code>bool</code>, but simply that <code>foo</code> has the semantics of a boolean."}, {"owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1426730745, "post_id": 29133090, "comment_id": 46497038, "body": "The way @RSahu has been explained may seem odd, but has the advantage of avoiding one silly and recurrent mistake that happens with equality comparisons: <code>if (foo=0)</code> which not only evaluates always as <code>false</code>, but it changes the value of <code>foo</code> when it shouldn&#39;t. If you use to write comparisons placing the constant operand first, then the operator, then the other operand, an attempt to write: <code>if (0=foo)</code> will cause the compiler to trigger the obvious error"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3542327"}, "edited": false, "score": 0, "creation_date": 1426775023, "post_id": 29133090, "comment_id": 46516633, "body": "I know all that, I just think Yoda conditions are less readable"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426775878, "post_id": 29133090, "comment_id": 46517271, "body": "An <i>exceptional</i> situation where I found Yoda style useful was with comparing the results of different parsings: <code>if (2 == sscanf(buf, &quot;%d%d&quot;,...) ... else if (1 == sscanf(buf, &quot;xx%x1 ... else if (1 == sscanf(buf, &quot;yy%x1 ... </code> as the return values line up and, IMO, was easier to understand the usual convention."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1426717050, "post_id": 29133251, "comment_id": 46493148, "body": "@joris_van_winden: There are <code>_Bool</code>s, and with <code>stdbool.h</code> they are called <code>bool</code> like in C++. See <a href=\"http://en.cppreference.com/w/c/types/boolean\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/types/boolean</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 4687320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e7bb37b6ee1c5e6bf1ff1baeab0637?s=128&d=identicon&r=PG&f=1", "display_name": "Artour Klevin", "link": "https://stackoverflow.com/users/4687320/artour-klevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1426716111, "last_edit_date": 1426716111, "creation_date": 1426714914, "answer_id": 29133251, "question_id": 29133090, "link": "https://stackoverflow.com/questions/29133090/c-if-statement-check-for-zero/29133251#29133251", "title": "c if statement check for zero", "body": "<p>I believe that <code>if(foo != 0)</code> is more clear. It some how also shows that foo is something that can be compared to <code>0</code>.</p>\n\n<p>When I see <code>if(foo)</code> is <code>foo</code> a <code>bool</code> or is it something else?</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1426730338, "last_edit_date": 1495539802, "creation_date": 1426729200, "answer_id": 29135826, "question_id": 29133090, "link": "https://stackoverflow.com/questions/29133090/c-if-statement-check-for-zero/29135826#29135826", "title": "c if statement check for zero", "body": "<p>Consider the various types that <code>foo</code> may have.  What is best is context sensitive.</p>\n\n<p>I favor the first in each group.</p>\n\n<pre><code>void *fooptr = bar();\nif (fooptr) ...\nif (fooptr != NULL) ...\nif (fooptr != 0) ...\n\nint fooi = bar();\nif (fooi != 0) ...\nif (fooi) ...\n\ndouble foofp = bar();\nif (foofp != 0.0) ...\nif (foofp) ...\n\nbool foobool = bar();\nif (foobool) ...\n\nint (*foofun)() = bar();\nif (foofun) ...\nif (foofun != NULL) ...\nif (foofun != 0) ...\n</code></pre>\n\n<p>But avoid foolish ones</p>\n\n<pre><code>if (foobool == 0.0) ...\nif (fooi != NULL) ...\n</code></pre>\n\n<p>And I did not even touch the <a href=\"https://stackoverflow.com/questions/28594183/difference-between-a-null-and-null-a/28594285#28594285\">Yoda</a> style (trying to avoid a <a href=\"http://www.yourdictionary.com/holy-war#computer\" rel=\"nofollow noreferrer\">holy war</a>)</p>\n\n<pre><code>if (0 == foo) ...\n</code></pre>\n\n<p>In general, seeing code in the positive sense  <code>if(foo)</code> vs. <code>if (foo != 0)</code>, is conceptually simpler.  And I prefer <code>if(foo == NULL)</code> to <code>if(!foo)</code></p>\n\n<p>You not think it isn't less understandable to avoid negating negatives, no?</p>\n\n<p>BTW:</p>\n\n<pre><code>if (foofp != 0.0) ...\n// is not the same as \nif (!(foofp == 0.0)) ...\n// consider NaN\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3542327"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4385, "favorite_count": 0, "accepted_answer_id": 29135826, "answer_count": 2, "score": 0, "last_activity_date": 1426730338, "creation_date": 1426714233, "question_id": 29133090, "link": "https://stackoverflow.com/questions/29133090/c-if-statement-check-for-zero", "title": "c if statement check for zero", "body": "<p>Is it recommended in c to write conditionals like this</p>\n\n<pre><code>if(foo != 0) {\n    // do stuff\n}\n</code></pre>\n\n<p>Or like this</p>\n\n<pre><code>if(foo) {\n  // do stuff\n}\n</code></pre>\n\n<p>I know they will always produce the same result, but which method is recommended for readability?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1426714295, "post_id": 29133043, "comment_id": 46491933, "body": "You should provide the code that you believe should do whatever you want."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1426714311, "post_id": 29133043, "comment_id": 46491941, "body": "You&#39;d have to <code>strcpy</code> your data instead of assigning. Direct assignment doesn&#39;t work with arrays."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1426714352, "post_id": 29133043, "comment_id": 46491958, "body": "How do you update <code>var-&gt;data=value;</code> ?  Don&#39;t cast malloc"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426714474, "post_id": 29133043, "comment_id": 46492008, "body": "You should change the <code>int</code> field to <code>char*</code> and <code>malloc()</code> enough memory for <code>strlen()+1</code>, then copy the string. BTW using global vars is a cheap but poor way of handling it all."}, {"owner": {"reputation": 1, "user_id": 4687296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bumf5.gif?s=128&g=1", "display_name": "sonic90___e", "link": "https://stackoverflow.com/users/4687296/sonic90-e"}, "edited": false, "score": 0, "creation_date": 1426714645, "post_id": 29133043, "comment_id": 46492081, "body": "So, insert_at_end(strcpy(value))?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1426714788, "post_id": 29133043, "comment_id": 46492157, "body": "No, <code>strcpy(var-&gt;data, value)</code> inside <code>insert_at_end()</code>. But beware of buffer overruns."}, {"owner": {"reputation": 1, "user_id": 4687296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bumf5.gif?s=128&g=1", "display_name": "sonic90___e", "link": "https://stackoverflow.com/users/4687296/sonic90-e"}, "edited": false, "score": 0, "creation_date": 1426716090, "post_id": 29133043, "comment_id": 46492749, "body": "I still can&#39;t get it to work."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1426776099, "post_id": 29133043, "comment_id": 46517434, "body": "Show the code that does not work! Code that works is ok as reference, but it is kinda pointless to show some code, and ask about different code..."}], "answers": [{"tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": false, "score": 1, "last_activity_date": 1426775657, "creation_date": 1426775657, "answer_id": 29147359, "question_id": 29133043, "link": "https://stackoverflow.com/questions/29133043/strings-linked-lists-c-programming/29147359#29147359", "title": "Strings &amp; Linked Lists - C Programming", "body": "<p>You need to have the following changes:</p>\n\n<ol>\n<li><p>\"int data\" into \"char data[255]\"</p></li>\n<li><p>Change the argument of insert_at_end to \"char *value\"</p></li>\n<li><p>The following lines instead of the assignment into insert_at_end:</p>\n\n<p>strncpy(var->data, value, sizeof(var->data));</p>\n\n<p>var->data[sizeof(var->data)-1] = '\\0';</p></li>\n<li><p>Change %d into %s</p></li>\n<li><p>Change the code that reads the value from input into the following:</p>\n\n<p>char value[255];</p>\n\n<p>fgets(value, sizeof(value), stdin);</p>\n\n<p>insert_at_end(value);</p></li>\n</ol>\n\n<p>This code doesn't strip the newline that fgets will read. It is left as an exercise to the reader how to strip the extra newline. It is also left as an exercise to the reader how to allocate memory dynamically so that variable-length strings can be supported (hint: use malloc and remember to free it!)</p>\n\n<p>However, to understand why these changes need to be made and to understand how arrays, strings and pointers work in C I recommend reading a basic C book. The full explanation doesn't fit into this limited answer. I see from your question that you fail to understand some basic principles of C, and it may be the case C is not necessarily the best language for you to use now.</p>\n\n<p>I also recommend reading some basic secure coding guidelines to understand why the '\\0' assignment is done after strncpy as strncpy is an inherently unsafe function.</p>\n"}], "owner": {"reputation": 1, "user_id": 4687296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bumf5.gif?s=128&g=1", "display_name": "sonic90___e", "link": "https://stackoverflow.com/users/4687296/sonic90-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1426775657, "creation_date": 1426714077, "last_edit_date": 1426714195, "question_id": 29133043, "link": "https://stackoverflow.com/questions/29133043/strings-linked-lists-c-programming", "title": "Strings &amp; Linked Lists - C Programming", "body": "<p>I currently have the code:</p>\n\n<pre><code>struct node\n{\n    int data;\n    struct node *next;\n}*head,*var,*trav;\n\nvoid insert_at_end(int value)\n{\n      struct node *temp; \n      temp=head;\n      var=(struct node *)malloc(sizeof (struct node));\n      var-&gt;data=value;\n      if(head==NULL)\n      {\n          head=var;\n          head-&gt;next=NULL;\n      }\n      else\n      {\n          while(temp-&gt;next!=NULL)\n          {     \n               temp=temp-&gt;next;\n          }\n          var-&gt;next=NULL;\n          temp-&gt;next=var;\n      }\n}\n\nvoid display()\n{\n     trav=head;\n     if(trav==NULL)\n     {\n          printf(\"\\nList is Empty\");\n     }\n     else\n     {\n          printf(\"\\nElements in the List: \");\n          while(trav!=NULL)\n          {\n               printf(\" -&gt; %d \",trav-&gt;data);\n               trav=trav-&gt;next;\n          }\n      printf(\"\\n\");\n      }\n}\n\nint main(){\n\n  int value;\n  scanf(\"%d\", &amp;value);\n  insert_at_end(value);\n  display();\n  return 0;\n}\n</code></pre>\n\n<p>Everything works fine for inserting a int. But, I want to insert an string. A word like \"Dog\". I changed </p>\n\n<pre><code>int data to char data[255];\n</code></pre>\n\n<p>And changed all the instances of \"%d\" to \"%s\", but this doesn't work. Does anyone have any ideas? Thanks. </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426715867, "post_id": 29133025, "comment_id": 46492644, "body": "One thing you can do to help both yourself and others trying to help is to try to find a minimal program that exhibits the same problem.  Sometimes you&#39;ll find your own problem while doing that (and learn a thing or two along the way.) If not, you&#39;re in better shape to have someone else see the problem."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426716043, "post_id": 29133025, "comment_id": 46492731, "body": "FYI, the compiler is MinGW, not Dev-C++.  Dev-C++ is an IDE.  Your version seems to be pretty old, too.  If you actually have a compiler issue, it&#39;s probably not going to get fixed."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426717047, "post_id": 29133025, "comment_id": 46493145, "body": "Looking again, why is it that you are trying to use uint128_t?  A 32-bit integer will hold values from -2 billion to +2 billion (plus a tad more on either end) and unsigned 32-bit integer will hold values from 0 to over 4 billion. A uint64_t will hold values your computer can&#39;t even count up to in your lifetime."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718091, "post_id": 29133025, "comment_id": 46493523, "body": "That&#39;s the kicker, i&#39;m currently studying programming in sweden, and i&#39;ve only learn C. The c++ course haven&#39;t started yet. So do you think that i only should change the value on Experience &gt; 2147483647? I&#39;ve also been told that Uint128_t will make it &quot;easier&quot; for me."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718484, "post_id": 29133025, "comment_id": 46493665, "body": "What do you suggest me to use to compile this, then?!"}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426718980, "post_id": 29133025, "comment_id": 46493845, "body": "That 2147483647 is the actual maximum value that a signed (two&#39;s complement) 32 bit integer can hold.  What is that about?  It has nothing to do with &quot;a maximum score of one millon&quot; that I can see.  I can&#39;t see the code...and if it&#39;s the code for a whole game, I don&#39;t want to look at it.  That&#39;s what a minimal example will provide--a brief statement in code of what problem you are having that someone else can understand."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426719100, "post_id": 29133025, "comment_id": 46493888, "body": "Should i post the whole code then? for player.h and player.cpp or even protocolgame.cpp?"}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426719452, "post_id": 29133025, "comment_id": 46494003, "body": "WIth MinGW 3.x, I&#39;m not sure if there even is an implementation of 128 bit integers. If the old code was working with 32 (or 64) bit integers, there is no reason to change types just to accommodate a value of one million.  That will easily fit in 32-bits.  You might need extra precision on some intermediate calculations, but that should be handled by those specific functions or methods that perform the computation."}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426719844, "post_id": 29133025, "comment_id": 46494108, "body": "So, yea it worked with 32 and 64 bit and i tried to change this  I have updated the main thread  This made me level to around 1million, and then it just stops. 23:37 You are level : ----&gt; 1025743 &lt;----"}, {"owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1426720251, "post_id": 29133025, "comment_id": 46494230, "body": "@mikehousky  This is what someone told me   &quot;The max value of uint64_t is the max level that you reach right now and you can&#39;t just change to uint128_t to allow more levels because that don&#39;t exist by default so you have to code that. You can check here that code already done and you have do add to your server:  <a href=\"http://www.codef00.com/code/uint128.h\" rel=\"nofollow noreferrer\">codef00.com/code/uint128.h</a>  Then you just need to change the type to uint128_t&quot;"}], "owner": {"reputation": 1, "user_id": 3673395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a912782eb1800b7945a721b55c0b0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3673395", "link": "https://stackoverflow.com/users/3673395/user3673395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426719997, "creation_date": 1426714004, "last_edit_date": 1426719997, "question_id": 29133025, "link": "https://stackoverflow.com/questions/29133025/errors-while-compiling-dev-c-tibia", "title": "Errors while compiling Dev-c++ tibia", "body": "<p>I have a problem while compiling my client with stians dev c++,</p>\n\n<p>Some background i'm currently trying to change code in The forgottenserver.dev so it can allow me to level above 1million in a game called Tibia. I've changed the value from \"uint64_t\" To \"uint128_t\" in Player.h and player.cpp.\nI've also changed in the protocolgame.cpp but that's just the exp limit</p>\n\n<pre><code>  if(experience &gt; 2147483647) // client debugs after 2,147,483,647 exp\n msg-&gt;put&lt;uint32_t&gt;(2147483647);\n</code></pre>\n\n<p>So back to the problem, when im compiling im getting about 27-30 errors depends on what i try. Log:</p>\n\n<pre><code>    Compiler: Default compiler\nBuilding Makefile: \"C:\\Users\\Dennis\\Desktop\\444444444\\trunk.r3884\\dev-cpp\\Makefile.win\"\nExecuting  make...\nmake.exe -f \"C:\\Users\\Dennis\\Desktop\\444444444\\trunk.r3884\\dev-cpp\\Makefile.win\" all\ng++.exe -c ../actions.cpp -o obj//actions.o -I\"C:/Stian's Repack Dev-Cpp v2/include/c++\"  -D__USE_MYSQL__ -D__USE_SQLITE__ -D__ENABLE_SERVER_DIAGNOSTIC__ -O2   -fexpensive-optimizations -O1\n\nIn file included from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian/greg_duration_types.hpp:12,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian/gregorian_types.hpp:22,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/posix_time_config.hpp:14,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/posix_time_system.hpp:13,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/ptime.hpp:12,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/posix_time/posix_time_types.hpp:12,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/detail/select_reactor.hpp:25,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/impl/io_service.ipp:27,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/io_service.hpp:550,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/basic_io_object.hpp:20,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/basic_socket.hpp:24,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio/basic_datagram_socket.hpp:25,\n                 from C:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/asio.hpp:20,\n                 from ../otsystem.h:33,\n                 from ../baseevents.h:20,\n                 from ../actions.h:20,\n                 from ../actions.cpp:20:\n\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp: In static member function `static bool boost::date_time::gregorian_calendar_base&lt;ymd_type_, date_int_type_&gt;::is_leap_year(typename ymd_type_::year_type) [with ymd_type_ = boost::gregorian::greg_year_month_day, date_int_type_ = long unsigned int]':\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:182:   instantiated from `static short unsigned int boost::date_time::gregorian_calendar_base&lt;ymd_type_, date_int_type_&gt;::end_of_month_day(typename ymd_type_::year_type, typename ymd_type_::month_type) [with ymd_type_ = boost::gregorian::greg_year_month_day, date_int_type_ = long unsigned int]'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian/greg_date.hpp:58:   instantiated from here\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: error: ambiguous overload for 'operator%' in 'year % 400'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: note: candidates are: operator%(int, int) &lt;built-in&gt;\n../uint128_t.h:373: note:                 T operator%(const T&amp;, const uint128_t&amp;) [with T = boost::gregorian::greg_year]\n\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: error: ambiguous overload for 'operator%' in 'year % 100'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: note: candidates are: operator%(int, int) &lt;built-in&gt;\n../uint128_t.h:373: note:                 T operator%(const T&amp;, const uint128_t&amp;) [with T = boost::gregorian::greg_year]\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: error: ambiguous overload for 'operator%' in 'year % 4'\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/gregorian_calendar.ipp:167: note: candidates are: operator%(int, int) &lt;built-in&gt;\n../uint128_t.h:373: note:                 T operator%(const T&amp;, const uint128_t&amp;) [with T = boost::gregorian::greg_year]\n\nIn file included from ../player.h:23,\n                 from ../actions.cpp:23:\n../creature.h: In member function `virtual double Creature::getGainedExperience(Creature*) const':\n../creature.h:355: error: conversion from `uint128_t' to `double' is ambiguous\n../uint128_t.cpp:24: note: candidates are: uint128_t::operator bool() const\n../uint128_t.cpp:28: note:                 uint128_t::operator char() const\n../uint128_t.cpp:31: note:                 uint128_t::operator int() const\n../uint128_t.cpp:35: note:                 uint128_t::operator uint8_t() const\n../uint128_t.cpp:39: note:                 uint128_t::operator uint16_t() const\n../uint128_t.cpp:43: note:                 uint128_t::operator uint32_t() const\n../uint128_t.cpp:47: note:                 uint128_t::operator uint64_t() const\n\nIn file included from ../actions.cpp:24:\n../monster.h: At global scope:\n../monster.h:189: error: conflicting return type specified for `virtual uint64_t Monster::getLostExperience() const'\n\n../creature.h:556: error:   overriding `virtual uint128_t Creature::getLostExperience() const'\n\nIn file included from ../scheduler.h:22,\n                 from ../game.h:25,\n                 from ../actions.cpp:30:\n../dispatcher.h: In constructor `Task::Task(uint32_t, const boost::function&lt;void ()()&gt;&amp;)':\n../dispatcher.h:31: error: ISO C++ says that these are ambiguous, even though the worst conversion for the first is better than the worst conversion for the second:\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/time.hpp:160: note: candidate 1: T boost::date_time::base_time&lt;T, time_system&gt;::operator+(const typename time_system::time_duration_type&amp;) const [with T = boost::posix_time::ptime, time_system = boost::posix_time::posix_time_system]\n../uint128_t.h:337: note: candidate 2: T operator+(const T&amp;, const uint128_t&amp;) [with T = boost::system_time]\n\n../uint128_t.h: In function `bool operator==(const T&amp;, const uint128_t&amp;) [with T = boost::system_time]':\n../dispatcher.h:39:   instantiated from here\n../uint128_t.h:304: error: `const class boost::posix_time::ptime' used where a `uint64_t' was expected\n\n../dispatcher.h: In member function `bool Task::hasExpired() const':\n../dispatcher.h:42: error: ISO C++ says that these are ambiguous, even though the worst conversion for the first is better than the worst conversion for the second:\nC:/Stian's Repack Dev-Cpp v2/Bin/../lib/gcc/mingw32/3.4.5/../../../../include/boost/date_time/time.hpp:130: note: candidate 1: bool boost::date_time::base_time&lt;T, time_system&gt;::operator&lt;(const T&amp;) const [with T = boost::posix_time::ptime, time_system = boost::posix_time::posix_time_system]\n\n../uint128_t.h:315: note: candidate 2: bool operator&lt;(const T&amp;, const uint128_t&amp;) [with T = boost::system_time]\n\nmake.exe: *** [obj//actions.o] Error 1\n\nExecution terminated\n</code></pre>\n\n<p>I would love if someone could help me with this problem \nRegards,\nDennis</p>\n\n<p>Edit:</p>\n\n<pre><code>    static uint64_t getExpForLevel(uint32_t lv) { static std::map&lt;uint32_t, uint64_t&gt; cache; lv--;\n\nstd::map&lt;uint32_t, uint64_t&gt;::iterator it = cache.find(lv); if(it != cache.end()) return it-&gt;second;\n\nuint64_t exp = ((50ULL * (lv+1ULL) / 3ULL - 100ULL) * (lv+1ULL) + 850ULL / 3ULL) * (lv+1ULL) - 200ULL; cache[lv] = exp; return exp; }\n</code></pre>\n"}, {"tags": ["c", "linux", "process", "signals", "posix"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426718971, "post_id": 29132782, "comment_id": 46493841, "body": "Don&#39;t use printf() in a signal handler. It is not signal safe."}, {"owner": {"reputation": 47, "user_id": 4687181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a67691b7c19e0dec0036352f8f24f8?s=128&d=identicon&r=PG&f=1", "display_name": "SHK", "link": "https://stackoverflow.com/users/4687181/shk"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426726824, "post_id": 29132782, "comment_id": 46496094, "body": "Yes you are right but even without it there is the problem I mentioned ."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1426723570, "post_id": 29133921, "comment_id": 46495250, "body": "There&#39;s also a problem with setting the signal handler even if you put the sleep() after that loop - the parent doesn&#39;t get to see what the child chooses as <code>disarming_signal</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1426723691, "post_id": 29133921, "comment_id": 46495283, "body": "Yes, good catch. That&#39;s arguably even a bigger problem than the sleep."}, {"owner": {"reputation": 47, "user_id": 4687181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a67691b7c19e0dec0036352f8f24f8?s=128&d=identicon&r=PG&f=1", "display_name": "SHK", "link": "https://stackoverflow.com/users/4687181/shk"}, "edited": false, "score": 0, "creation_date": 1426727015, "post_id": 29133921, "comment_id": 46496131, "body": "I thought, It would be most likely the disarm_signal set to the random signal after sleep because without it I was getting handling out of rang signal (initial value of disarm_signal)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 47, "user_id": 4687181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a67691b7c19e0dec0036352f8f24f8?s=128&d=identicon&r=PG&f=1", "display_name": "SHK", "link": "https://stackoverflow.com/users/4687181/shk"}, "edited": false, "score": 0, "creation_date": 1426727456, "post_id": 29133921, "comment_id": 46496251, "body": "@Sajjad Don&#39;t understand what you mean by that last comment. Let us know if fixing both the disarm_signal and sleep problems solve your issue."}, {"owner": {"reputation": 47, "user_id": 4687181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a67691b7c19e0dec0036352f8f24f8?s=128&d=identicon&r=PG&f=1", "display_name": "SHK", "link": "https://stackoverflow.com/users/4687181/shk"}, "edited": false, "score": 0, "creation_date": 1426761349, "post_id": 29133921, "comment_id": 46507891, "body": "Sorry for pre. comment :) @AlanAu I am trying to say without sleep(5) in the parent there is no chance to Ignore the random signal which is generated by sapper() because in first step  main ignore the signal with value 0 (the initial value of disarm_signal) so with out sleep(5) I got following error. ( pintf in handler is already removed )  ==&gt; Seting parent disarming111: Invalid argument"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1426761524, "post_id": 29133921, "comment_id": 46508005, "body": "That&#39;s the second problem in your program that Jonathan pointed out. By putting the sleep in you are not fixing that problem. So you need to fix both problems. That is, 1. You need to remove the sleep. 2. You need a different way of setting the &quot;disarming_signal&quot; value. You can&#39;t set it in the child process and expect the parent to see that value - it won&#39;t."}, {"owner": {"reputation": 47, "user_id": 4687181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a67691b7c19e0dec0036352f8f24f8?s=128&d=identicon&r=PG&f=1", "display_name": "SHK", "link": "https://stackoverflow.com/users/4687181/shk"}, "edited": false, "score": 0, "creation_date": 1427489099, "post_id": 29133921, "comment_id": 46813606, "body": "Guys, actually you were right sorry I was busy but I check the points you mentioned. the only possibility for me was to block all the signals form SIGRTMIN and SIGRTMAX in the main no other way to find out which signals were issued by sapper and obviously it work. thank you very much."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1427489318, "post_id": 29133921, "comment_id": 46813702, "body": "Glad you got it working. On the point about setting disarming_signal. There are other ways to do it other than blocking all signals. You just need synchornisation between the parent and the child process and an IPC (pipe, shared memory, shared file, etc) for the child to tell the parent the chosen signal. That&#39;s just FYI in case you want to try that."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 2, "last_activity_date": 1426973307, "last_edit_date": 1426973307, "creation_date": 1426717777, "answer_id": 29133921, "question_id": 29132782, "link": "https://stackoverflow.com/questions/29132782/process-communication-with-signls/29133921#29133921", "title": "process communication with signls", "body": "<p>You have  sleep(5) after the create_sapper and before sethandler(IGN). That means it's very likely that the signal is sent before your main process has ignored it.</p>\n\n<p>EDIT: Adding comment from Jonathan Leffler into this answer as it is equally (or even more) important:</p>\n\n<p>There's also a problem with setting the signal handler even if you put the sleep() after that loop - the parent doesn't get to see what the child chooses as disarming_signal.</p>\n"}], "owner": {"reputation": 47, "user_id": 4687181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a67691b7c19e0dec0036352f8f24f8?s=128&d=identicon&r=PG&f=1", "display_name": "SHK", "link": "https://stackoverflow.com/users/4687181/shk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 29133921, "answer_count": 1, "score": 1, "last_activity_date": 1426973307, "creation_date": 1426713180, "last_edit_date": 1426718272, "question_id": 29132782, "link": "https://stackoverflow.com/questions/29132782/process-communication-with-signls", "title": "process communication with signls", "body": "<p>I am trying to write a C program which has some number of processes. One of them sends a random signal in the range SIGRTMIN and SIGRTMAX to all other processes but I want this signal will be ignored in main process.I used the global variable to have randomized signal to ignore with SIG_IGN. It looks It is not helping because the main stops with real-time signal when wants to ignore the first randomized signal.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\nvolatile sig_atomic_t disarming_signal = 0;\n\nvoid disarming_handler (int sig) {\n     disarming_signal = sig;\n     fprintf(stderr,\"signal %d is handeled\", disarming_signal);\n}\nint rand_range(int min_n, int max_n){\n     int rand_n = rand() % (max_n - min_n) + min_n;\n     return rand_n;\n}\nint sethandler (void (*f)(int), int sigNo) {\n    struct sigaction act;\nmemset(&amp;act, 0, sizeof(struct sigaction));\nact.sa_handler = f;\n    if (-1==sigaction(sigNo, &amp;act, NULL))\n        return -1;\nreturn 0;\n}\nvoid sigchld_handler(int sig){ \npid_t pid;\nfor(;;){\n    pid=waitpid(0, NULL, WNOHANG);\n    if(pid==0) return;\n    if(pid&lt;=0) {\n        if(errno==ECHILD) return;\n        perror(\"waitpid:\");\n        exit(EXIT_FAILURE);\n    }\n}\n}\n\nvoid usage(){\nfprintf(stderr,\"USAGE: sappartherroryst n\\n\");\nfprintf(stderr,\"n - number of Therrorysts\\n\");\n}\n\nvoid therroryst_work(){\nint s,k,t;\nsrand(getpid());\ns = rand_range(SIGRTMIN, SIGRTMAX);\nt = rand_range(10, 20);\nk = t;  \nif(sethandler(disarming_handler, s)){\n    perror(\"Seting therroryst handeler\");\n    exit(EXIT_FAILURE);\n}\n\nfprintf(stderr, \"[%d] I am therroryst. My disarming signal is [%d]. I will wait [%d] Sec.\\n\", getpid(), s, t);\nwhile(k&gt;0) {\n    k=sleep(k);\n    if(disarming_signal == s){\n        fprintf(stderr, \"I got signal [%d]\\n.\",disarming_signal);\n         return ;\n    }\n}\nfprintf(stderr, \"[%d] KABOOM\\n\",getpid());\nexit(EXIT_SUCCESS);\n}\nvoid create_therrorysts(int n){\nwhile(n--&gt;0){\n    switch(fork()) {\n        case 0:\n            therroryst_work();\n            exit(EXIT_SUCCESS);\n        case -1:\n            perror(\"Fork():\");\n            exit(EXIT_FAILURE);\n    }\n}\n} \nvoid sapper_work(){\nint sig_dis, i; \nstruct timespec t, tn = {1,0};\nfprintf(stderr,\"[%d] I am sapper.\\n\", getpid());\nfor(i=0;i&lt;10;i++){\n    for(t=tn;nanosleep(&amp;t,&amp;t););\n    sig_dis = rand_range(SIGRTMIN, SIGRTMAX);   \n    if(kill(0, sig_dis)&lt;0){\n        perror(\"Disarming_send\\n\");\n        exit(EXIT_FAILURE);\n    }\n\nfprintf(stderr,\"I sended signal [%d].\\n\",sig_dis);  \ndisarming_signal = sig_dis;\n}\nfprintf(stderr, \"end of sending\");\nexit(EXIT_SUCCESS);\n}\n\nvoid create_sapper(){\nswitch(fork()) {\n    case 0:\n        sapper_work();\n        exit(EXIT_SUCCESS);\n    case -1:\n        perror(\"Fork():\");\n        exit(EXIT_FAILURE);\n}\n}\nint main(int argc, char** argv){\nint n;\npid_t pid;\n\nif(argc != 2){\n    usage();\n    return EXIT_FAILURE;\n}\nn = atoi(argv[1]);  \n\nif(n &lt;= 0){ \n    usage();\n    return EXIT_FAILURE;\n}\n\nif(sethandler(sigchld_handler, SIGCHLD)) {\n    perror(\"Seting parent SIGCHLD:\");\n    exit(EXIT_FAILURE);\n}\ncreate_therrorysts(n);\ncreate_sapper();\nsleep(5);\nfor(;;) {\n    if(sethandler(SIG_IGN, disarming_signal)){\n        perror(\"Seting parent disarming111\");\n        exit(EXIT_FAILURE);\n    }\n}\n\nfor(;;){\n    pid=wait(NULL);\n    if(pid&lt;0)\n        switch (errno){\n            case ECHILD:\n                return EXIT_SUCCESS;\n            case EINTR: \n                continue;\n            default:\n                perror(\"wait:\");\n                exit(EXIT_FAILURE);\n        }\n}\n\nreturn EXIT_SUCCESS;\n} \n</code></pre>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 10668, "user_id": 1062250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7bed607125818c218b48621d4a37a2?s=128&d=identicon&r=PG", "display_name": "nullptr", "link": "https://stackoverflow.com/users/1062250/nullptr"}, "edited": false, "score": 0, "creation_date": 1426713318, "post_id": 29132759, "comment_id": 46491449, "body": "You want <code>refA-&gt;priority</code> or <code>(*refA).priority</code>. And <code>stack[i]-&gt;element = &amp;element;</code> (below) will not compile either."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1426713354, "post_id": 29132759, "comment_id": 46491460, "body": "Use <code>-&gt;</code> to access members through a pointer, like you did a line above with <code>printf(&quot;%d\\n&quot;,refA-&gt;element);</code>."}, {"owner": {"reputation": 1, "user_id": 4669265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a9cd0bfc6a9fc3f0271565da61251f?s=128&d=identicon&r=PG&f=1", "display_name": "M&#233;ntoss", "link": "https://stackoverflow.com/users/4669265/m%c3%a9ntoss"}, "edited": false, "score": 0, "creation_date": 1426713943, "post_id": 29132759, "comment_id": 46491762, "body": "Thank you guys, a kick myself mistake."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4669265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a9cd0bfc6a9fc3f0271565da61251f?s=128&d=identicon&r=PG&f=1", "display_name": "M&#233;ntoss", "link": "https://stackoverflow.com/users/4669265/m%c3%a9ntoss"}, "edited": false, "score": 0, "creation_date": 1426713893, "post_id": 29132817, "comment_id": 46491733, "body": "Of course it is, sorry a silly mistake by me. While I am here, i am probably gonna kick myself again. I also get these warnings stopping me from compiling: &quot;warning: assignment makes integer from pointer without a cast&quot; and points to the following lines for example:      &quot;stack[i]-&gt;element = &amp;element;&quot;"}], "tags": [], "owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "is_accepted": true, "score": 1, "last_activity_date": 1426713290, "creation_date": 1426713290, "answer_id": 29132817, "question_id": 29132759, "link": "https://stackoverflow.com/questions/29132759/how-to-properly-reference-in-c-i-seem-to-be-missing-the-point/29132817#29132817", "title": "How to properly reference in C? I seem to be missing the point", "body": "<p><code>refA</code> and <code>refB</code> are pointers to structs, not structs, so you have to use <code>-&gt;</code> for referencing fields, not <code>.</code>. Like this:</p>\n\n<pre><code>if(refA-&gt;priority != refB-&gt;priority){\n    return refB-&gt;priority - refA-&gt;priority;\n} else {\n    return refB-&gt;followNr - refA-&gt;followNr;\n}\n</code></pre>\n\n<p>Of course you knew this, because earlier in your function, you use <code>-&gt;</code> correctly.</p>\n"}], "owner": {"reputation": 1, "user_id": 4669265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a9cd0bfc6a9fc3f0271565da61251f?s=128&d=identicon&r=PG&f=1", "display_name": "M&#233;ntoss", "link": "https://stackoverflow.com/users/4669265/m%c3%a9ntoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 29132817, "answer_count": 1, "score": -2, "last_activity_date": 1426724510, "creation_date": 1426713106, "last_edit_date": 1426724510, "question_id": 29132759, "link": "https://stackoverflow.com/questions/29132759/how-to-properly-reference-in-c-i-seem-to-be-missing-the-point", "title": "How to properly reference in C? I seem to be missing the point", "body": "<p>So I am basically making a stack which takes in an element(10000) for example and then a priority to later sort it. So \"10000 5\", 5 is the priority and 10000 the element. I keep inserting the values in till a pop is called, which takes the highest priority element of the top of the stack. For some reason i get am error: \"Request for member \u2018priority\u2019 in something not a structure or union.\" From researching the error it seems to be some kind of problem with my referencing? But i don't see where. </p>\n"}, {"tags": ["c", "memory-management", "malloc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426711332, "post_id": 29132197, "comment_id": 46490380, "body": "It&#39;s ok but it&#39;s completely useless because you can just write <code>float *a = malloc(10 * sizeof(*a));</code>, and you can then write a macro &quot;<i>but I wouldn&#39;t</i>&quot; like <code>MALLOC(type, size) malloc((size) * sizeof(type));</code> and then <code>float *a = MALLOC(float, 10);</code>"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1426711637, "post_id": 29132197, "comment_id": 46490553, "body": "Yes, its safe, what is wrong is <code>printf (&quot;%d %d\\n&quot;,a,b);</code>, <code>a</code> and <code>b</code> are pointers to <code>float</code>, not <code>int</code>&#39;s."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 2, "creation_date": 1426711651, "post_id": 29132197, "comment_id": 46490563, "body": "just remember to free it"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1426711689, "post_id": 29132197, "comment_id": 46490579, "body": "<i>&quot;careless malloc from within a function is a great way of leaking memory&quot;</i>. No, it is failing to <code>free()</code> memory that results in leaks, or, losing / overwriting the pointer. Why are you comparing pointers after memory is <code>free()</code>ed?"}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1426711836, "post_id": 29132197, "comment_id": 46490652, "body": "Seems he wanted to read the addresses directly. Though to get that right use %u rather than %d, that way you get the unsigned address :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 1, "creation_date": 1426712089, "post_id": 29132197, "comment_id": 46490790, "body": "@DAhrens the right use is <code>printf (&quot;%p %p\\n&quot;, (void*)a, (void*)b);</code>"}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1426712311, "post_id": 29132197, "comment_id": 46490900, "body": "Hah! I have been using a limited set of symbols on embedded operating systems for too long. I completely forgot the %p. Not every implementation has it."}, {"owner": {"reputation": 71, "user_id": 4383356, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-px4ETDf9R64/AAAAAAAAAAI/AAAAAAAAAH4/TC9b9y42wog/photo.jpg?sz=128", "display_name": "smeezekitty", "link": "https://stackoverflow.com/users/4383356/smeezekitty"}, "edited": false, "score": 0, "creation_date": 1426713245, "post_id": 29132197, "comment_id": 46491402, "body": "There <i>should</i> never be overlapping virtual memory returned by malloc() if the C library and OS are functioning properly. Of course if you free the memory, it is not surprising for it to be reallocated right away when you call malloc() again. Don&#39;t forget to check the return value from malloc() before using it, and free the memory when you are done. Also, when returning variable length arrays, you will need to either save the length or use an end marker to prevent access past the end of the array."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1426711440, "post_id": 29132247, "comment_id": 46490447, "body": "I think the key thing to mention is that <code>malloc</code> gets memory from a global heap &quot;object&quot;, so calls even in different places won&#39;t allocate the same memory or overlap, since they&#39;re all coordinating using the global heap &quot;object&quot;."}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1426711630, "post_id": 29132247, "comment_id": 46490550, "body": "And by global, he means operating system."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 2, "creation_date": 1426711941, "post_id": 29132247, "comment_id": 46490706, "body": "@DAhrens: Sometimes, but most of the time no.  Visual Studio and G++ and Clang all implement global heaps in the C runtime, which is easily evident because when you <code>delete&#47;free</code> memory, that memory is rarely returned to the OS."}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1426712440, "post_id": 29132247, "comment_id": 46490967, "body": "So they ask for a bunch of space at runtime, then keep allocating that particular region until they run out. However, that is just another layer on top of the operating system layer I referred to."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426731086, "post_id": 29132247, "comment_id": 46497129, "body": "&quot;coordinating <i>using</i> the global heap&quot; - note: allocating memory and using memory are not always the same."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 7, "last_activity_date": 1426711930, "last_edit_date": 1426711930, "creation_date": 1426711355, "answer_id": 29132247, "question_id": 29132197, "link": "https://stackoverflow.com/questions/29132197/is-it-safe-to-allocate-memory-from-with-a-c-function/29132247#29132247", "title": "Is it safe to allocate memory from with a c function", "body": "<p>Yes, it is safe to allocate dynamic memory and return the pointer to the caller function. As the dynamic memory allocator APIs [<code>malloc()</code> and family] get memory from a global heap \"object\", so calls even in different places won't allocate the same memory or overlap, since they're all coordinating using the global heap \"object\". So, until and unless you're <code>free()</code>ing the memory, that memory won't be allocated again by any other call to <code>malloc()</code>/<code>calloc()</code>.</p>\n\n<p>That said, two more things to mention.</p>\n\n<ol>\n<li>No need to cast the return value of <code>malloc()</code>.</li>\n<li>Always check for the success of <code>malloc()</code> before using the returned pointer.</li>\n</ol>\n\n<p>Also, <code>printf (\"%d %d\\n\",a,b);</code> is wrong. You need to use the <code>%p</code> format specifier to print the pointer (memory address).</p>\n\n<p><sup># Thanks to Mr. Mooing Duck for the comments.</sup></p>\n"}], "owner": {"reputation": 1066, "user_id": 4602856, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6bdff4f90dbe4527291814aa91598df?s=128&d=identicon&r=PG&f=1", "display_name": "codechimp", "link": "https://stackoverflow.com/users/4602856/codechimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437877072, "creation_date": 1426711163, "last_edit_date": 1437877072, "question_id": 29132197, "link": "https://stackoverflow.com/questions/29132197/is-it-safe-to-allocate-memory-from-with-a-c-function", "title": "Is it safe to allocate memory from with a c function", "body": "<p>I want to create a function that will generate data of arbitrary length and return the array.  The memory for the data is to be allocated from within the array.  I know the following simple test code does the job allocating and returning the pointer, but what I don't know is if it is safe from being overwritten at some later time by another call of the this or some other function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nfloat* CreateFloatArray(unsigned int N) {\n    float *array = (float*) malloc(N*sizeof(float));\n    return array;\n}\n\nint main() {\n   float *a = CreateFloatArray(10);\n//   free(a);\n   float *b = CreateFloatArray(10);\n\n   printf (\"%d %d\\n\",a,b);\n   return 0;\n}\n</code></pre>\n\n<p>Just to be clear, this code is not my actual application, but rather a simple test.</p>\n\n<p>At the end, the test code prints the address of the two blocks of allocated memory.  If I insert the <code>free(a)</code> command, between the two calls, then then address of a and b are identical; otherwise, they are sufficiently far apart.  </p>\n\n<p>So clearly, this simple test works in allocating distinct memory blocks, with no overlap, but I'm looking for assurance, from someone more knowledgeable, that there will NEVER be memory overlap throughout the execution of the program, no matter how many times I call the function? (Of course, with the understanding that careless malloc from within a function is a great way of leaking memory).</p>\n"}, {"tags": ["c", "tree"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4687150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3623cbaf125603c67f02996bf652fba?s=128&d=identicon&r=PG&f=1", "display_name": "tay", "link": "https://stackoverflow.com/users/4687150/tay"}, "edited": false, "score": 0, "creation_date": 1426860654, "post_id": 29132329, "comment_id": 46555398, "body": "Yeah but what I am not getting is how it is used.Here is the complete code"}, {"owner": {"reputation": 230, "user_id": 2658313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1308aa2bd1c9c1d525138acc5b02cf09?s=128&d=identicon&r=PG", "display_name": "Gugg", "link": "https://stackoverflow.com/users/2658313/gugg"}, "reply_to_user": {"reputation": 1, "user_id": 4687150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3623cbaf125603c67f02996bf652fba?s=128&d=identicon&r=PG&f=1", "display_name": "tay", "link": "https://stackoverflow.com/users/4687150/tay"}, "edited": false, "score": 0, "creation_date": 1426869825, "post_id": 29132329, "comment_id": 46561513, "body": "This is true for each row [total 5 rows where i is the numeric row order ] data[i][1] is the node value data[i][2] is the number of children of this node data[i][3] value of 1st child data[i][4] value of 2st child data[i][5] value of 3st child...data[i][6] value of 4st child if data [i][2] is 1 then we only have valid value in data[i][3] but no values in data[i][4], data[i][5] and data[i][6]"}], "tags": [], "owner": {"reputation": 230, "user_id": 2658313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1308aa2bd1c9c1d525138acc5b02cf09?s=128&d=identicon&r=PG", "display_name": "Gugg", "link": "https://stackoverflow.com/users/2658313/gugg"}, "is_accepted": false, "score": 0, "last_activity_date": 1426711637, "creation_date": 1426711637, "answer_id": 29132329, "question_id": 29132155, "link": "https://stackoverflow.com/questions/29132155/implementation-of-n-ary-trees-in-c/29132329#29132329", "title": "Implementation of n-ary trees in c", "body": "<p>looks like the n-array tree you're talking about is represented by an 2d array. its used as the underline data structure to store data.</p>\n"}], "owner": {"reputation": 1, "user_id": 4687150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3623cbaf125603c67f02996bf652fba?s=128&d=identicon&r=PG&f=1", "display_name": "tay", "link": "https://stackoverflow.com/users/4687150/tay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 525, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426713613, "creation_date": 1426711011, "last_edit_date": 1426713613, "question_id": 29132155, "link": "https://stackoverflow.com/questions/29132155/implementation-of-n-ary-trees-in-c", "title": "Implementation of n-ary trees in c", "body": "<p>Can someone please tell me what the 2-D array in n-ary tree is exactly used for?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int row = 5;//no. of input lines\n            //1st element in each row is node Value, 2nd - no of child, ,&gt;=3rd....=&gt;value of child\n    int data[5][6];\n    int i,j,k,m;\n    for (i=0;i&lt;5;i++)\n    {\n        printf(\"\\nEnter value of Node:\\t\");\n        for(j=0;j&lt;6;j++)\n        {\n            if(j==1)\n                printf(\"\\nEnter no of child:\\t\");\n            else if(j==2)\n                printf(\"\\nEnter Values of child\\n(if child not present enter 0 as value):\\t\");\n                scanf(\"%d\",&amp;data[i][j]);\n        }   \n    }\n</code></pre>\n"}, {"tags": ["python", "c++", "c", "windows", "gcc"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426710690, "post_id": 29132026, "comment_id": 46489958, "body": "I guess you have a 32/64 bit mismatch somewhere."}, {"owner": {"reputation": 1471, "user_id": 4086467, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a09b4041b111e58020670dcaaf6d386a?s=128&d=identicon&r=PG&f=1", "display_name": "texasflood", "link": "https://stackoverflow.com/users/4086467/texasflood"}, "edited": false, "score": 0, "creation_date": 1426712120, "post_id": 29132026, "comment_id": 46490808, "body": "Not helpful, I know, but this is another reason why I moved to Linux. It is as easy as <code>sudo apt-get install python-levenshtein</code> and this is guaranteed to work in just one line"}, {"owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1426714416, "post_id": 29132026, "comment_id": 46491980, "body": "Is the Python you have installed a 64-bit Python or 32-bit? Because you may not be able to install a 32-bit package against a 64-bit Python"}, {"owner": {"reputation": 1137, "user_id": 3395374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/285a4a5200f609969d811d471ae2c846?s=128&d=identicon&r=PG&f=1", "display_name": "Muposat", "link": "https://stackoverflow.com/users/3395374/muposat"}, "reply_to_user": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1426778476, "post_id": 29132026, "comment_id": 46519215, "body": "@Mike Driscoll: The Python installed is most definitely 64 bit. The package should not be tied to the machine architecture because isn&#39;t that the point behind compiling it instead of distributing a binary?"}], "owner": {"reputation": 1137, "user_id": 3395374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/285a4a5200f609969d811d471ae2c846?s=128&d=identicon&r=PG&f=1", "display_name": "Muposat", "link": "https://stackoverflow.com/users/3395374/muposat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426710531, "creation_date": 1426710531, "question_id": 29132026, "link": "https://stackoverflow.com/questions/29132026/cannot-compile-python-package-on-windows", "title": "Cannot compile Python package on Windows", "body": "<p>Trying to install a compiled Python package on a 64-bit Windows machine using MinGW compiler. The same install succeeded on my 32-bit machine but failed on two different 64-bit machines:\n<code>C:\\Python\\Scripts&gt;</code> <code>pip install python-Levenshtein</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: error adding symbols: File in wrong format<br>\n     collect2.exe: error: ld returned 1 exit status<br>\n     error: command 'gcc' failed with exit status 1 </p>\n</blockquote>\n\n<p>Trying from a cloned copy:\n<code>$ python setup.py build</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: error adding symbols: File in wrong format<br>\n    collect2.exe: error: ld returned 1 exit status<br>\n    error: command 'gcc' failed with exit status 1 </p>\n</blockquote>\n\n<p>Running the build command by itself:</p>\n\n<p><code>$ gcc.exe -shared -s 'build\\temp.win-amd64-3.3\\Release\\levenshtein\\_levenshtein.o' 'build\\temp.win-amd64-3.3\\Release\\levenshtein\\_levenshtein.def' -LC:'\\Python\\libs' -LC:'\\Python\\PCbuild\\amd64' -lpython33 -lmsvcr100 -o 'build\\lib.win-amd64-3.3\\Levenshtein\\_levenshtein.pyd'</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: error adding symbols: File in wrong format<br>\n  collect2.exe: error: ld returned 1 exit status  </p>\n</blockquote>\n\n<p><code>$ file 'C:\\Python\\libs/python33.lib'</code></p>\n\n<blockquote>\n  <p>C:\\Python\\libs/python33.lib: current ar archive</p>\n</blockquote>\n\n<p>Thank you\n- Muposat</p>\n"}, {"tags": ["c", "struct", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426710642, "post_id": 29132015, "comment_id": 46489923, "body": "What makes you think there is a difference? It should be same, IMO."}, {"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 0, "creation_date": 1426710644, "post_id": 29132015, "comment_id": 46489927, "body": "I don&#39;t see any difference (other than what the variable contains)."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1426710646, "post_id": 29132015, "comment_id": 46489929, "body": "are you sure that you understand what reference is and what is the difference with pointers?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1426710792, "post_id": 29132015, "comment_id": 46490015, "body": "BTW, there is no references in C, only in C++"}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1426711289, "post_id": 29132015, "comment_id": 46490355, "body": "One is allocated on the stack and one is allocated on the heap -- is this what you are after?"}, {"owner": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1426711358, "post_id": 29132015, "comment_id": 46490399, "body": "@Lashane what I am trying to understand is whether there is any advantage to using a malloc version over the local struct version. I understand C simulates pass-by-reference."}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1426711564, "post_id": 29132015, "comment_id": 46490513, "body": "you don&#39;t free the malloced memory in this example.  <b>not a good idea</b>"}, {"owner": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "reply_to_user": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1426711920, "post_id": 29132015, "comment_id": 46490694, "body": "@Hogan I saw that coming. fixed now. what happens if I store the address of this local struct <code>record</code> in a global pointer, and the function (main() here) returns, and I try to access the data using this pointer? is having a malloc version better in that case?"}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 1, "creation_date": 1426712007, "post_id": 29132015, "comment_id": 46490741, "body": "@adizone - yes for a global variable you need to malloc."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426734682, "post_id": 29132015, "comment_id": 46497972, "body": "1 and 2 are exactly the same method of passing . The real question  is &quot;what is the difference between automatic variables and allocated variables&quot; .   (sometimes called &#39;stack&#39; and &#39;heap&#39; in jargon)"}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1426712001, "post_id": 29132271, "comment_id": 46490736, "body": "About whether you need to free memory when the program is ending. The answer is yes you really should. While more robust operating systems will track what memory belongs to each process, and free it automatically at the end, not all operating systems will do this. It is good practice to clean up your own mess."}, {"owner": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "edited": false, "score": 0, "creation_date": 1426712179, "post_id": 29132271, "comment_id": 46490841, "body": "Thanks. In terms of visibility, as long as the function does NOT return, will the local address <code>&amp;record</code> be valid everywhere in the program? And, is  the malloc version the right way in case the function returns?"}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "reply_to_user": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "edited": false, "score": 0, "creation_date": 1426712511, "post_id": 29132271, "comment_id": 46490999, "body": "If you are using multiple threads, i highly suggest using malloc, and when cleaning up the thread freeing the memory."}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "reply_to_user": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "edited": false, "score": 0, "creation_date": 1426712634, "post_id": 29132271, "comment_id": 46491059, "body": "As far as visibility of the stack, if it is in the same process you shouldn&#39;t have any problems as long as the function does not return. You can take advantage of this with an idle loop as an example, spinning off all of your threads, then looping with the information each thread uses inside of the stack of the idle thread. As long as the idle loop joins the threads before you return from it you should be alright. The key is to ensure that nothing and I mean NOTHING is using that data when the function returns."}, {"owner": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "edited": false, "score": 0, "creation_date": 1426720356, "post_id": 29132271, "comment_id": 46494266, "body": "Thanks @DAhrens for the explanation."}], "tags": [], "owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "is_accepted": true, "score": 3, "last_activity_date": 1426711418, "creation_date": 1426711418, "answer_id": 29132271, "question_id": 29132015, "link": "https://stackoverflow.com/questions/29132015/passing-struct-by-reference-vs-after-malloc/29132271#29132271", "title": "Passing struct by reference vs after malloc", "body": "<p>For a local variable the memory overhead will exist entirely in the stack for that thread. If you use a large structure in say an embedded system, this can become a concern, as you risk a stack overflow. Generally you will use only the number of bytes requested, but stack space can be limited. (Some applications I work in have a stack of 512 bytes or less)</p>\n\n<p>In the case of using malloc, you are allocating memory from the heap. This avoid the stack size concerns, but adds the requirement that you free the memory when you are done.</p>\n\n<p>Visibility is determined by the variable you store the pointer in.</p>\n\n<p>It is very dangerous to pass a local variable to a seperate thread, and can lead to undefined behavior if the local variable becomes invalid, say due to the function returning.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "edited": false, "score": 0, "creation_date": 1426794478, "post_id": 29136547, "comment_id": 46528429, "body": "Great explanation. Thanks!"}], "tags": [], "owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1426734335, "creation_date": 1426734335, "answer_id": 29136547, "question_id": 29132015, "link": "https://stackoverflow.com/questions/29132015/passing-struct-by-reference-vs-after-malloc/29136547#29136547", "title": "Passing struct by reference vs after malloc", "body": "<p>Passing a local structure is bound to be faster, the program can do groovey things at compilation time. From a machine code point of view, a local structure is effectively a constant memory address.\nWhen you start to use malloc there is bound to be a processing overhead, there is also a space issue. Although both structures are the same malloc will probably \"use\" more memory than sizeof(struct) just to store the data. malloc also reserves space on every page to maintain and memory address size allocated memory lookup table, this allows free to only need an address as paramaters.</p>\n\n<p>One of the biggest issues is development time introduction malloc and free to programs increases the chance of bugs, especially segmentation faults. Without mentioning the hard to track down \"invisible \" bug of a memory leak. \nBut using malloc and calloc is the only way to deal with user input, you never know how much data they're gonna enter, a text input buffer of say 2kb can easily over fill with a call to fgets</p>\n"}], "owner": {"reputation": 153, "user_id": 2131597, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4385de3092c9925fc9fffe97900b40fa?s=128&d=identicon&r=PG", "display_name": "adizone", "link": "https://stackoverflow.com/users/2131597/adizone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "accepted_answer_id": 29132271, "answer_count": 2, "score": -3, "last_activity_date": 1426734335, "creation_date": 1426710460, "last_edit_date": 1426712220, "question_id": 29132015, "link": "https://stackoverflow.com/questions/29132015/passing-struct-by-reference-vs-after-malloc", "title": "Passing struct by reference vs after malloc", "body": "<p>What is the difference between these two approaches in terms of data visibility and memory overhead (any other differences would be great as well):<br/></p>\n\n<ol>\n<li>Passing a local struct by reference<br/></li>\n<li>Passing a pointer to the allocated memory</li>\n</ol>\n\n\n\n<pre><code>typedef struct student_data_t_ {\n    char name[30];\n    int score;\n} student_data_t;\n\nvoid fill_values (student_data_t *data) {\n    snprintf(data-&gt;name, 30, \"Howard\");\n    data-&gt;score = 20;\n    return;\n}\n\nint main (void) {\n    student_data_t record;\n    student_data_t *ptr = NULL;\n\n    fill_values(&amp;record); // &lt;1&gt; passing the struct by reference\n\n    ptr = (student_data_t *)malloc(sizeof(student_data_t));\n    if (!ptr) {\n        printf(\"NOMEM\");\n        return 0;\n    }\n\n    fill_values(ptr);  // &lt;2&gt; passing after allocating memory\n\n    if (ptr) {\n        free(ptr);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "memory-management", "malloc", "hdf5"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1426709672, "post_id": 29131758, "comment_id": 46489336, "body": "have you tried <code>hvl_t * X = (hvl_t *)malloc(jagged_array.size() * sizeof(hvl_t));</code>?"}, {"owner": {"reputation": 465, "user_id": 1851837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f39fdc3a5c2445c6e3b32a19df9e3bb?s=128&d=identicon&r=PG", "display_name": "jgyou", "link": "https://stackoverflow.com/users/1851837/jgyou"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1426709734, "post_id": 29131758, "comment_id": 46489373, "body": "Thanks for the quick answer @Lashane. I just tried, it yields the error  <code>error: invalid conversion from \u2018void*\u2019 to \u2018hvl_t*\u2019 </code>"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1426709755, "post_id": 29131758, "comment_id": 46489396, "body": "thank you for posting error, I&#39;ve added cast to sample"}, {"owner": {"reputation": 465, "user_id": 1851837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f39fdc3a5c2445c6e3b32a19df9e3bb?s=128&d=identicon&r=PG", "display_name": "jgyou", "link": "https://stackoverflow.com/users/1851837/jgyou"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1426709931, "post_id": 29131758, "comment_id": 46489491, "body": "It works, thank you very much! Any insights about what&#39;s going on here? (Perhaps a blog post/article I could read)."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1426710085, "post_id": 29131758, "comment_id": 46489588, "body": "yeah, you could read any book about c, don&#39;t use c++ books, usually this section called dynamic arrays"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1426710981, "post_id": 29131758, "comment_id": 46490138, "body": "@JGab: If your compiler complained about the cast from <code>void *</code> to <code>hvl_t *</code>, it is not a C compiler.  C compilers do that automatically; C++ compilers do not."}, {"owner": {"reputation": 465, "user_id": 1851837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f39fdc3a5c2445c6e3b32a19df9e3bb?s=128&d=identicon&r=PG", "display_name": "jgyou", "link": "https://stackoverflow.com/users/1851837/jgyou"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1426712106, "post_id": 29131758, "comment_id": 46490797, "body": "@JonathanLeffler : Thanks for the information! You are right about the compiler. I&#39;m using g++ (with <code>-pedantic</code>, <code>-Wall</code> and <code>-Wextra</code>) because this small C snippet is actually nested within a C++ code base. The HDF5 C++ API is not very well documented, hence the usage of a C API."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426712577, "post_id": 29131758, "comment_id": 46491028, "body": "STL means standard template library.  That library is not available in C.  Perhaps the OP meant C++?"}], "answers": [{"tags": [], "owner": {"reputation": 465, "user_id": 1851837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f39fdc3a5c2445c6e3b32a19df9e3bb?s=128&d=identicon&r=PG", "display_name": "jgyou", "link": "https://stackoverflow.com/users/1851837/jgyou"}, "is_accepted": true, "score": 0, "last_activity_date": 1426866888, "creation_date": 1426866888, "answer_id": 29170748, "question_id": 29131758, "link": "https://stackoverflow.com/questions/29131758/hdf5-variable-length-structure-of-variable-length-c-api/29170748#29170748", "title": "HDF5 variable length structure, of variable length (C API)", "body": "<p>@Lashane answered in the comments:</p>\n\n<p>One should simply use</p>\n\n<pre><code>hvl_t * X = (hvl_t *)malloc(jagged_array.size() * sizeof(hvl_t))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12086, "user_id": 3838691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11de3f70067be2739aed43b8876e82f9?s=128&d=identicon&r=PG&f=1", "display_name": "MaxNoe", "link": "https://stackoverflow.com/users/3838691/maxnoe"}, "is_accepted": false, "score": 1, "last_activity_date": 1606646608, "creation_date": 1606646608, "answer_id": 65059235, "question_id": 29131758, "link": "https://stackoverflow.com/questions/29131758/hdf5-variable-length-structure-of-variable-length-c-api/65059235#65059235", "title": "HDF5 variable length structure, of variable length (C API)", "body": "<p>I know it's been some time, but I came upon this today. Here is a proper c++ solution, not allocating additional memory, but just storing the pointer to the vectors in the <code>vlen_t</code>:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// Test data\nstd::vector&lt; std::vector&lt;int&gt; &gt; jagged_array(3);\njagged_array[0] = {0};\njagged_array[1] = {0, 1, 2, 3};\njagged_array[2] = {0, 1, 2};\n\nhvl_t X[jagged_array.size()];\nfor (unsigned int i = 0; i &lt; jagged_array.size(); ++i) {\n    X[i].len = jagged_array[i].size();\n    X[i].p = (void*) &amp;jagged_array[i].front();\n}\n\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 1851837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f39fdc3a5c2445c6e3b32a19df9e3bb?s=128&d=identicon&r=PG", "display_name": "jgyou", "link": "https://stackoverflow.com/users/1851837/jgyou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 29170748, "answer_count": 2, "score": 0, "last_activity_date": 1606646608, "creation_date": 1426709494, "last_edit_date": 1426709817, "question_id": 29131758, "link": "https://stackoverflow.com/questions/29131758/hdf5-variable-length-structure-of-variable-length-c-api", "title": "HDF5 variable length structure, of variable length (C API)", "body": "<p>I'd like to write data which is contained in a STL container to a HDF5 file. From what I gathered, I need to declare a contiguous memory block and use the <code>\"hdf5.h\"</code> C API to transfer the data from the memory buffer to the disk.</p>\n\n<p>For regular dataspaces, the procedure is straightforward; one only needs to create temporary arrays on the stack with <code>new</code>. HDF5 \"understands\" such memory layouts.\nIt is a different story when one deals with irregular dataspaces, because the dedicated type <code>hvl_t</code> must be used.</p>\n\n<p>The following snippet works but is not ISO C++(11) :</p>\n\n<pre><code>// Test data\nstd::vector&lt; std::vector&lt;int&gt; &gt; jagged_array(3);\njagged_array[0] = {0};\njagged_array[1] = {0, 1, 2, 3};\njagged_array[2] = {0, 1, 2};\n\nhvl_t X[jagged_array.size()];\nfor (unsigned int i = 0; i &lt; jagged_array.size(); ++i) {\n    X[i].len = jagged_array[i].size();\n    int * ptr = (int *) malloc (X[i].len * sizeof(int));\n    for (unsigned int j = 0; j &lt; X[i].len; ++j) {\n        ptr[j] = jagged_array[i][j];\n    }\n    X[i].p = (void *) ptr;\n}\n</code></pre>\n\n<p>My C is <em>extremely</em> rusty; this snippet is almost entirely ripped off the HDF5 example page, except for the illegal line <code>hvl_t X[jagged_array.size()];</code>.</p>\n\n<p>How should I go about declaring an <code>hvl_t</code> with a size determined at runtime?\nIt surely involves <code>malloc</code>, but I'm really stumped here.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1426709076, "post_id": 29131623, "comment_id": 46488972, "body": "Please define <code>It still doesn&#39;t work</code>"}, {"owner": {"reputation": 331, "user_id": 3874242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d8897fd45fff2cad16c99347139e28?s=128&d=identicon&r=PG&f=1", "display_name": "sumithdev", "link": "https://stackoverflow.com/users/3874242/sumithdev"}, "edited": false, "score": 0, "creation_date": 1426709316, "post_id": 29131623, "comment_id": 46489128, "body": "What is the value in precision. Where are you reading the user value for precision."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426709458, "post_id": 29131623, "comment_id": 46489210, "body": "a 20000 * sizeof int array, (80000 bytes) on the stack is a very bad idea.  probably resulting in an overflow of the stack.  suggest: int arraySize = 20000;  int <i>pf = malloc( arraySize</i>sizeof int);  (then check that &#39;pf&#39; does not contain NULL)  (be sure to use: &#39;free(pf);&#39; when done with the array"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426709560, "post_id": 29131623, "comment_id": 46489266, "body": "this code does not cleanly compile.  a couple of the reasons are the parameters argc and argv are not used.  suggest using &#39;int main(void)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426709667, "post_id": 29131623, "comment_id": 46489333, "body": "the &#39;&#39;7/2&#39; is performing an integer divide, so the result will always be &#39;3&#39; not 3.5&#39;"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426709788, "post_id": 29131623, "comment_id": 46489419, "body": "It&#39;s <code>precision*7&#47;2</code> so as long as <code>precision</code> is an even number, the division is fine."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426710152, "post_id": 29131623, "comment_id": 46489636, "body": "&#39;precision&#39; is not defined,   So code does not compile   Suggest NOT trying to get everything on one line.  That makes the code difficult to debug, difficult to understand, etc suggest making use of vertical and horizontal white space, for readability/maintainability"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426710289, "post_id": 29131623, "comment_id": 46489708, "body": "the constants &#39;7/2&#39; will be handled at compile time.  so the result is 3, not 3.5  However, the code could use:  (precision * 7) / 2  then the error would never be greater than +/- 1"}, {"owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426710444, "post_id": 29131623, "comment_id": 46489806, "body": "@SouravGhosh It doesn&#39;t work because the value it calculated is not correct."}, {"owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426710494, "post_id": 29131623, "comment_id": 46489839, "body": "@user3629249 yeah, i just removed the code aren&#39;t useful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426711695, "post_id": 29131623, "comment_id": 46490584, "body": "well, the variable &#39;e&#39; is not initialized on the first printf() and will be 0 (or close to it) for the next ~10000 iterations of the first &#39;for&#39; loop   the returned value from the printf() is what controls the for loop.  the format &quot;%.4d&quot; will always return a &gt;0 value so the second/outer &#39;for&#39; loop might never exit"}], "answers": [{"tags": [], "owner": {"reputation": 5263, "user_id": 4107809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f83ddf73fbc4629a75d5b23f6b6be43?s=128&d=identicon&r=PG&f=1", "display_name": "mattm", "link": "https://stackoverflow.com/users/4107809/mattm"}, "is_accepted": false, "score": 3, "last_activity_date": 1426709260, "creation_date": 1426709260, "answer_id": 29131695, "question_id": 29131623, "link": "https://stackoverflow.com/questions/29131623/c-dynamic-declare-array-size/29131695#29131695", "title": "C: dynamic declare array size", "body": "<p>You get a dynamically sized array by allocating on the heap using malloc (or calloc). </p>\n\n<p>Replace</p>\n\n<pre><code>int f[20000];\n</code></pre>\n\n<p>with</p>\n\n<pre><code>int *f = (int *) malloc(20000 * sizeof(int) );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "edited": false, "score": 0, "creation_date": 1426710541, "post_id": 29131730, "comment_id": 46489869, "body": "You save my life, Thank you."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1426710686, "post_id": 29131730, "comment_id": 46489954, "body": "the question was NOT &#39;what is wrong with my code&gt;&#39;, (of which there are lots of things wrong).  the question was &#39;how to dynamically size an array?&#39;"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426711031, "post_id": 29131730, "comment_id": 46490172, "body": "The question itself had two perfectly good ways to dynamically allocate an array, but from the OP&#39;s point-of-view neither appeared to work. So then the question does become, &quot;Why doesn&#39;t this code work?&quot;"}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1426709708, "last_edit_date": 1426709708, "creation_date": 1426709396, "answer_id": 29131730, "question_id": 29131623, "link": "https://stackoverflow.com/questions/29131623/c-dynamic-declare-array-size/29131730#29131730", "title": "C: dynamic declare array size", "body": "<p>The difference is that global variables are guaranteed to be initialized to <code>0</code> (unless initialized to some other value). But local variables are garbage unless you initialize them. So the problem is that variable <code>b</code> starts out as garbage in the second snippet.</p>\n\n<p>In the original code:</p>\n\n<pre><code>int a=10000,b;\nint main(void)\n{\n}\n</code></pre>\n\n<p><code>a</code> will start with the value <code>10000</code> because you initialized it, and <code>b</code> will start as <code>0</code> because it is an uninitialized <strong>global</strong> variable.</p>\n\n<p>In the changed code:</p>\n\n<pre><code>int main(void)\n{\n    int a=10000,b;\n}\n</code></pre>\n\n<p><code>a</code> will start with the value <code>10000</code> because you initialized it, and <code>b</code> will start as some random value (e.g. <code>0x5315fe</code>) because it is an uninitialized <strong>local</strong> variable.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1426710476, "post_id": 29131915, "comment_id": 46489829, "body": "This question is tagged <code>c</code> and AFAIK, <code>new</code> is not <code>c</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 4687121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3ae06d89288736c202c5014d214464?s=128&d=identicon&r=PG", "display_name": "Roger Alcindor", "link": "https://stackoverflow.com/users/4687121/roger-alcindor"}, "is_accepted": false, "score": -1, "last_activity_date": 1426710060, "creation_date": 1426710060, "answer_id": 29131915, "question_id": 29131623, "link": "https://stackoverflow.com/questions/29131623/c-dynamic-declare-array-size/29131915#29131915", "title": "C: dynamic declare array size", "body": "<p>Replace int f[2000]</p>\n\n<p>with</p>\n\n<p>int *f = new int[2000]; </p>\n\n<p>then use the array as f[0] = 1, f[1] = 2 etc...</p>\n\n<p>when finished free up memory with delete [] f;</p>\n\n<p>the array size could be allocated by a variable </p>\n\n<p>eg.\nint x = 2000;\n f = new int[x];</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1426711757, "creation_date": 1426711757, "answer_id": 29132367, "question_id": 29131623, "link": "https://stackoverflow.com/questions/29131623/c-dynamic-declare-array-size/29132367#29132367", "title": "C: dynamic declare array size", "body": "<p>There are two ways to achieve what you want.</p>\n\n<ol>\n<li>use dynamic memory allocation. <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow\"><code>malloc()</code>/<code>calloc()</code></a></li>\n<li>use <a href=\"http://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow\">variable-length array</a> (in <code>c99</code>)</li>\n</ol>\n\n<p>That said, as pointed out by <strong>@user3386109</strong>, the problem in your second code snippet is use of uninitiated variable <code>b</code>. You may want to explicitly initialize the local variables before using their value. </p>\n"}], "owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 29132367, "answer_count": 4, "score": 0, "last_activity_date": 1426711757, "creation_date": 1426708977, "last_edit_date": 1426710659, "question_id": 29131623, "link": "https://stackoverflow.com/questions/29131623/c-dynamic-declare-array-size", "title": "C: dynamic declare array size", "body": "<p>I have the following declaration inside a function</p>\n\n<pre><code>int f[20000]\n</code></pre>\n\n<p>I want the number 20000 to be dynamic, How can i declare such array in code?</p>\n\n<p>To be more specific, I have the following code to calculate PI.</p>\n\n<pre><code>#include &lt;stdlib.h&gt; \n#include &lt;stdio.h&gt; \n\n#define BITS 2000\nint a=10000,b,c=BITS*7/2,d,e,f[BITS*7/2+1],g; \n\nint main() \n{   \n    for(;b-c;) \n        f[b++]=a/5; \n    for(;d=0,g=c*2;c-=14,printf(\"%.4d\",e+d/a),e=d%a) \n        for(b=c;d+=f[b]*a,f[b]=d%--g,d/=g--,--b;d*=b);     \n    //getchar();\n    return 0;\n} \n</code></pre>\n\n<p>I changed to</p>\n\n<pre><code>#include &lt;stdlib.h&gt; \n#include &lt;stdio.h&gt; \n\nint main(int argc, char *argv[]) \n{   \n    //\n    // .... omit some lines here\n    // read bits from user input at runtime\n    // say precision = 200\n    //\n    int a=10000,b,c=precision *7/2,d,e,f[precision *7/2+1],g; \n    for(;b-c;) \n        f[b++]=a/5; \n    for(;d=0,g=c*2;c-=14,printf(\"%.4d\",e+d/a),e=d%a) \n        for(b=c;d+=f[b]*a,f[b]=d%--g,d/=g--,--b;d*=b);     \n    //getchar();\n    return 0;\n} \n</code></pre>\n\n<p>It doesn't work, I googled then changed to </p>\n\n<pre><code>int a=10000,b,c=precision *7/2,d,e,g; \nint *f=calloc(precision *7/2+1, sizeof(int));\n</code></pre>\n\n<p>It still doesn't work, I mean the program doesn't crash, the value it calculated is not correct. What's wrong? Thank you.</p>\n"}, {"tags": ["c++", "c", "windows", "visual-studio", "winapi"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1426708519, "post_id": 29131356, "comment_id": 46488635, "body": "Please post the code you&#39;re using that calls <code>CreateWindow</code> / <code>CreateWindowEx</code>."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1426708568, "post_id": 29131356, "comment_id": 46488670, "body": "Is this a pure WinAPI program, or are you using a framework such as MFC?"}, {"owner": {"reputation": 179, "user_id": 3200730, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/69283606df942d4fb20ba40758bca6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kilo King", "link": "https://stackoverflow.com/users/3200730/kilo-king"}, "edited": false, "score": 0, "creation_date": 1426708985, "post_id": 29131356, "comment_id": 46488920, "body": "No framework MFC or Qt or anything. It&#39;s just pure WinAPI"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1560685671, "post_id": 29131356, "comment_id": 99810495, "body": "As a note you can use <code>L&quot;Random&quot;</code> instead of calling <code>TEXT()</code>.  That function converts from <code>char</code> to wide characters, adding the L prefix to a constant does the same also."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 3200730, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/69283606df942d4fb20ba40758bca6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kilo King", "link": "https://stackoverflow.com/users/3200730/kilo-king"}, "edited": false, "score": 0, "creation_date": 1426718781, "post_id": 29131682, "comment_id": 46493776, "body": "Thank you very much, that was exactly what I was trying to accomplish."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 7, "last_activity_date": 1426709180, "creation_date": 1426709180, "answer_id": 29131682, "question_id": 29131356, "link": "https://stackoverflow.com/questions/29131356/how-to-change-the-title-bar-icon-using-winapi/29131682#29131682", "title": "How to change the title bar icon using winapi", "body": "<p>If you use <code>RegisterClassEx</code> to register your window class, the <code>WNDCLASSEX</code> structure has a <code>hIconSm</code> field that lets you specify a small icon. If you go this way, don't forget to also initialize the <code>cbSize</code> field.</p>\n\n<p>Alternatively, you can assign a small icon to a window after creation using the <code>WM_SETICON</code> message.</p>\n"}], "owner": {"reputation": 179, "user_id": 3200730, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/69283606df942d4fb20ba40758bca6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kilo King", "link": "https://stackoverflow.com/users/3200730/kilo-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1804, "favorite_count": 1, "accepted_answer_id": 29131682, "answer_count": 1, "score": 2, "last_activity_date": 1426709180, "creation_date": 1426707969, "last_edit_date": 1426708909, "question_id": 29131356, "link": "https://stackoverflow.com/questions/29131356/how-to-change-the-title-bar-icon-using-winapi", "title": "How to change the title bar icon using winapi", "body": "<p>I have made an application using Windows API and have used the resource folder to change the icon to a custom one I made. Now the program is using my icon on the desktop however in the title bar there is the default icon, this one to be exact.<img src=\"https://i.stack.imgur.com/IPXty.png\" alt=\"Default Icon\"></p>\n\n<p>Now how am I suppose to change it to my custom icon?\nI am using MSVC++</p>\n\n<pre><code>WNDCLASS wndclass;\n\nwndclass.style = CS_HREDRAW | CS_VREDRAW;\nwndclass.lpfnWndProc = WndProc;\nwndclass.cbClsExtra = 0;\nwndclass.cbWndExtra = 0;\nwndclass.hInstance = hInstance;\nwndclass.hIcon = LoadIcon(NULL, IDI_APPLICATION);\nwndclass.hCursor = LoadCursor(NULL, IDC_ARROW);\nwndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);\nwndclass.lpszMenuName = NULL;\nwndclass.lpszClassName = szAppName;\n\n\nhwnd = CreateWindow(szAppName,\n    TEXT(\"Random\"),\n    WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX,\n    CW_USEDEFAULT,\n    CW_USEDEFAULT,\n    300,\n    120,\n    NULL,\n    NULL,\n    hInstance,\n    NULL);\n</code></pre>\n"}, {"tags": ["c", "ffmpeg", "libav"], "answers": [{"comments": [{"owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "edited": false, "score": 0, "creation_date": 1426707897, "post_id": 29131235, "comment_id": 46488259, "body": "Why wouldn&#39;t it be LSB? Then the 3-byte value would be equal to the 4-byte value."}, {"owner": {"reputation": 1771, "user_id": 345930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3f7ae15076d7c3f4b821cdefe2fa58?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/345930/hendrik"}, "reply_to_user": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "edited": false, "score": 0, "creation_date": 1426711085, "post_id": 29131235, "comment_id": 46490207, "body": "Because then it would be a different format. This way, you can treat it just like 32-bit, which simplifies the process."}, {"owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "edited": false, "score": 0, "creation_date": 1426715463, "post_id": 29131235, "comment_id": 46492479, "body": "Also, how would you determine if a codec supports 24-bit audio?"}, {"owner": {"reputation": 4838, "user_id": 367916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cc06c56fb6ab3d98d25f7c30c81fd10?s=128&d=identicon&r=PG", "display_name": "thejoshwolfe", "link": "https://stackoverflow.com/users/367916/thejoshwolfe"}, "edited": false, "score": 1, "creation_date": 1426718339, "post_id": 29131235, "comment_id": 46493607, "body": "<code>0x123456 == 0x00123456</code>. This looks to me like the LSB&#39;s are matching and the MSB&#39;s are zeros. Are you saying that to convert 24-bit to 32-bit you would turn <code>0x123456</code> into <code>0x12345600</code>?"}, {"owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "edited": false, "score": 1, "creation_date": 1426806399, "post_id": 29131235, "comment_id": 46533791, "body": "According to my test results, you indeed must shift <code>0x123456</code> into <code>0x12345600</code> before passing the sample to libav/ffmpeg. This is the opposite of treating it just like 32-bit - it&#39;s simpler to <i>not</i> shift the value."}], "tags": [], "owner": {"reputation": 1771, "user_id": 345930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3f7ae15076d7c3f4b821cdefe2fa58?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/345930/hendrik"}, "is_accepted": true, "score": 3, "last_activity_date": 1426707499, "creation_date": 1426707499, "answer_id": 29131235, "question_id": 29131173, "link": "https://stackoverflow.com/questions/29131173/how-to-encode-24-bit-audio-with-libav-ffmpeg/29131235#29131235", "title": "How to encode 24-bit audio with libav/ffmpeg?", "body": "<p>Use AV_SAMPLE_FMT_S32 and set ctx->bits_per_raw_sample to 24. The audio needs to be in the MSBs of the 32-bit integer then, ie. padded with 0 at the end.</p>\n"}], "owner": {"reputation": 26832, "user_id": 432, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c641a026e20b5457fdc69a1d9f256cc5?s=128&d=identicon&r=PG", "display_name": "andrewrk", "link": "https://stackoverflow.com/users/432/andrewrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1956, "favorite_count": 0, "accepted_answer_id": 29131235, "answer_count": 1, "score": 0, "last_activity_date": 1426718307, "creation_date": 1426707290, "question_id": 29131173, "link": "https://stackoverflow.com/questions/29131173/how-to-encode-24-bit-audio-with-libav-ffmpeg", "title": "How to encode 24-bit audio with libav/ffmpeg?", "body": "<p>Here's a code snippet from <code>libavutil/samplefmt.h</code>:</p>\n\n<pre><code>/**\n * Audio Sample Formats\n *\n * @par\n * The data described by the sample format is always in native-endian order.\n * Sample values can be expressed by native C types, hence the lack of a signed\n * 24-bit sample format even though it is a common raw audio data format.\n *\n * @par\n * The floating-point formats are based on full volume being in the range\n * [-1.0, 1.0]. Any values outside this range are beyond full volume level.\n *\n * @par\n * The data layout as used in av_samples_fill_arrays() and elsewhere in Libav\n * (such as AVFrame in libavcodec) is as follows:\n *\n * @par\n * For planar sample formats, each audio channel is in a separate data plane,\n * and linesize is the buffer size, in bytes, for a single plane. All data\n * planes must be the same size. For packed sample formats, only the first data\n * plane is used, and samples for each channel are interleaved. In this case,\n * linesize is the buffer size, in bytes, for the 1 plane.\n */\nenum AVSampleFormat {\n    AV_SAMPLE_FMT_NONE = -1,\n    AV_SAMPLE_FMT_U8,          ///&lt; unsigned 8 bits\n    AV_SAMPLE_FMT_S16,         ///&lt; signed 16 bits\n    AV_SAMPLE_FMT_S32,         ///&lt; signed 32 bits\n    AV_SAMPLE_FMT_FLT,         ///&lt; float\n    AV_SAMPLE_FMT_DBL,         ///&lt; double\n\n    AV_SAMPLE_FMT_U8P,         ///&lt; unsigned 8 bits, planar\n    AV_SAMPLE_FMT_S16P,        ///&lt; signed 16 bits, planar\n    AV_SAMPLE_FMT_S32P,        ///&lt; signed 32 bits, planar\n    AV_SAMPLE_FMT_FLTP,        ///&lt; float, planar\n    AV_SAMPLE_FMT_DBLP,        ///&lt; double, planar\n\n    AV_SAMPLE_FMT_NB           ///&lt; Number of sample formats. DO NOT USE if linking dynamically\n};\n</code></pre>\n\n<p>It specifically mentions that 24-bit is missing even though it is a common raw audio data format. So if I were using libav/ffmpeg to export to an audio file, how would I use 24-bit audio?</p>\n\n<p>Exporting an audio file looks something like this:</p>\n\n<pre><code>AVCodec *codec = get_codec();\nAVOutputFormat *oformat = get_output_format();\nAVFormatContext *fmt_ctx = avformat_alloc_context();\nassert(fmt_ctx);\nint err = avio_open(&amp;fmt_ctx-&gt;pb, get_output_filename(), AVIO_FLAG_WRITE);\nassert(err &gt;= 0);\nfmt_ctx-&gt;oformat = oformat;\nAVStream *stream = avformat_new_stream(fmt_ctx, codec);\nassert(stream);\nAVCodecContext *codec_ctx = stream-&gt;codec;\ncodec_ctx-&gt;bit_rate = get_export_bit_rate();\n\n// How to set this to 24 bit instead of 32?\ncodec_ctx-&gt;sample_fmt = AV_SAMPLE_FMT_S32;\n\ncodec_ctx-&gt;sample_rate = get_sample_rate();\ncodec_ctx-&gt;channel_layout = get_channel_layout()\ncodec_ctx-&gt;channels = get_channel_count();\ncodec_ctx-&gt;strict_std_compliance = FF_COMPLIANCE_EXPERIMENTAL;\n</code></pre>\n"}, {"tags": ["c++", "c", "c++builder"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1426711972, "last_edit_date": 1426711972, "creation_date": 1426711602, "answer_id": 29132319, "question_id": 29130917, "link": "https://stackoverflow.com/questions/29130917/bcb-swprintf-not-working/29132319#29132319", "title": "BCB swprintf not working", "body": "<p>C++Builder does not support all of the size prefixes that Visual Studio supports (and vice versa).  In this case, C++Builder does not support the <code>w</code> prefix for <code>%s</code>, but Visual Studio does.</p>\n\n<p>Visual Studio:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/56e442dc.aspx\" rel=\"nofollow\">Format Specification Syntax: printf and wprintf Functions</a></p>\n\n<blockquote>\n  <p>A format specification, which consists of optional and required fields, has the following form:</p>\n\n<pre><code>%[flags] [width] [.precision] [{h | l | ll | w | I | I32 | I64}] type\n</code></pre>\n</blockquote>\n\n<p>C++Builder:</p>\n\n<p><a href=\"http://docwiki.embarcadero.com/RADStudio/XE7/en/Printf_Format_Specifiers\" rel=\"nofollow\">printf Format Specifiers</a></p>\n\n<blockquote>\n  <p>Print format specifiers have the following form: </p>\n\n<pre><code>% [flags] [width] [.prec] [F|N|h|l|L] type_char\n</code></pre>\n</blockquote>\n\n<p>If <code>var</code> is a wide string, you can use <code>%s</code> or <code>%ls</code> in both compilers.</p>\n"}], "owner": {"reputation": 3, "user_id": 4653572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2c6e230c321fbb7b245b10ca9bdf90?s=128&d=identicon&r=PG&f=1", "display_name": "0--", "link": "https://stackoverflow.com/users/4653572/0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 29132319, "answer_count": 1, "score": 0, "last_activity_date": 1426711972, "creation_date": 1426706514, "question_id": 29130917, "link": "https://stackoverflow.com/questions/29130917/bcb-swprintf-not-working", "title": "BCB swprintf not working", "body": "<p>Anyone else encountered a problem like this?</p>\n\n<pre><code>swprintf_s(v, len, L\"%ws\", var);\nMessageBox(NULL, v, NULL' NULL);\n</code></pre>\n\n<p>Message box prints out \"%ws\" not the contents of var.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "parsing", "recursion"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1426706522, "post_id": 29130708, "comment_id": 46487460, "body": "And your code? And your objective? You really must define your task before trying to implement it."}, {"owner": {"reputation": 39, "user_id": 4686854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed050b0839d9d87cacc656f09230690?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Bleins", "link": "https://stackoverflow.com/users/4686854/jon-bleins"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426706809, "post_id": 29130708, "comment_id": 46487628, "body": "I had some code for the first grammar, but it wouldn&#39;t work since it was left recursive. The second grammar I saw on the site seemed to fix that, but I don&#39;t have any code since I&#39;m stuck on how to implement it. I don&#39;t really understand the code in the articles examples, and I didn&#39;t understand the grammars meaning."}, {"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1426706865, "post_id": 29130708, "comment_id": 46487652, "body": "I&#39;m assuming you just want to parse simple arithmetic expressions. Did you construct a parse tree during the parsing process? You could recursively travel down the tree and then evaluate the expression from the bottom-up."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426707000, "post_id": 29130708, "comment_id": 46487738, "body": "You should understand that many commenters here are not interested in your links, but how you are trying to implement the ideas in code."}, {"owner": {"reputation": 39, "user_id": 4686854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed050b0839d9d87cacc656f09230690?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Bleins", "link": "https://stackoverflow.com/users/4686854/jon-bleins"}, "edited": false, "score": 0, "creation_date": 1426707007, "post_id": 29130708, "comment_id": 46487743, "body": "It&#39;s worth mentioning that I don&#39;t need to evaluate the expression, even if I were to just store each token from the expression into a list or something. And yes, an abstract syntax tree is constructed. And it depends what you mean by simple arithmetic expressions, something like in my post is what I&#39;m trying to parse."}, {"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1426707163, "post_id": 29130708, "comment_id": 46487839, "body": "@JonBleins I&#39;m actually a little confused where you&#39;re stuck--can you clarify for me? You said you wrote a recursive descent parser and it works, and that you&#39;ve constructed a parse tree. Doesn&#39;t that mean you&#39;ve successfully parsed the string? If you don&#39;t want to evaluate the expression, what else is there to do?"}, {"owner": {"reputation": 39, "user_id": 4686854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed050b0839d9d87cacc656f09230690?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Bleins", "link": "https://stackoverflow.com/users/4686854/jon-bleins"}, "edited": false, "score": 0, "creation_date": 1426707263, "post_id": 29130708, "comment_id": 46487901, "body": "Ohh, my bad, the AST is constructed for everything but expressions. I&#39;m trying to parse the expression to an AST Node."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1426770398, "post_id": 29130708, "comment_id": 46513385, "body": "By the way, have you considered using some kind of tool to help you with your parser?  try <b>flex(1)</b> / <b>bison(1)</b> for that and you&#39;ll never do parsing again without some toolkit like these."}, {"owner": {"reputation": 39, "user_id": 4686854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed050b0839d9d87cacc656f09230690?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Bleins", "link": "https://stackoverflow.com/users/4686854/jon-bleins"}, "edited": false, "score": 0, "creation_date": 1426780589, "post_id": 29130708, "comment_id": 46520710, "body": "Ahh, but I wont learn if I just get a tool to do it for me :)"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1426707676, "creation_date": 1426707676, "answer_id": 29131280, "question_id": 29130708, "link": "https://stackoverflow.com/questions/29130708/how-to-recursively-parse-an-expression/29131280#29131280", "title": "How to recursively parse an expression?", "body": "<p>In the \"Recursive-descent recognition\" section of the article you linked, the <code>E</code>, <code>P</code>, <code>B</code>, and <code>U</code> are the non-terminal symbols in the expression grammar presented.  From their definitions in the text, I infer that \"E\" is chosen as a mnemonic for \"expression\", \"P\" as mnemonic for \"primary\", \"B\" for \"binary (operator)\", and \"U\" for \"unary (operator)\".  Given those characterizations, it should be clear that the terminal symbol \"-\" can be reduced either to a <code>U</code> or to a <code>B</code>, depending on context:</p>\n\n<pre>\nunary:   -1\nbinary: x-1\n</pre>\n\n<p>The <code>expect()</code> function described in the article is used to consume the next token if it happens to be of the specified type, or otherwise to throw an error.  The <code>end</code> token is defined to be a synthetic token representing the end of the input.  Thus</p>\n\n<pre><code>expect(end)\n</code></pre>\n\n<p>expresses the expectation that there are no more tokens to process in the expression, and its given implementation throws an error if that expectation is not met.</p>\n\n<p>All of this is in the text, except the reason for choosing the particular symbols <code>E</code>, <code>P</code>, <code>B</code>, and <code>U</code>.  If you're having trouble following the text then you probably need to search out something simpler.</p>\n"}], "owner": {"reputation": 39, "user_id": 4686854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed050b0839d9d87cacc656f09230690?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Bleins", "link": "https://stackoverflow.com/users/4686854/jon-bleins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 29131280, "answer_count": 1, "score": 1, "last_activity_date": 1426707676, "creation_date": 1426705817, "question_id": 29130708, "link": "https://stackoverflow.com/questions/29130708/how-to-recursively-parse-an-expression", "title": "How to recursively parse an expression?", "body": "<p>I'm writing a small language, and I'm really stuck on expression parsing. I've written a LR Recursive Descent Parser, it works, but now I need to parse expressions I'm finding it really difficult. I do not have a grammar defined, but if it helps, I kind of have an idea on how it works even without a grammar. Currently, my expression struct looks like this:</p>\n\n<pre><code>typedef struct s_ExpressionNode {\n    Token *value;\n    char expressionType;\n\n    struct *s_ExpressionNode lhand;\n    char operand;\n    struct *s_ExpressionNode rhand;\n} ExpressionNode;\n</code></pre>\n\n<p>I'm trying to get it to parse something like:</p>\n\n<p><code>5 + 5 + 2 * (-3 / 2) * age</code></p>\n\n<p>I was reading <a href=\"http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm\" rel=\"nofollow\">this</a> article on how to parse expressions. The first grammar I tried to implement but it didn't work out too well, then I noticed the second grammar, which appears to remove left recursion. However, I'm stuck trying to implement it since I don't understand what P, B means, and also U is a <code>-</code> but the <code>-</code> is also for a B? Also I'm not sure what <code>expect(end)</code> is supposed to mean either.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1426705374, "post_id": 29130530, "comment_id": 46486852, "body": "Why don&#39;t you save yourself some grief and use different, and meaningful,  identifiers? The standard dictates what should happen if two of the same name are within scope."}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426705478, "post_id": 29130530, "comment_id": 46486905, "body": "It&#39;s not the problem in coding style, just a question to strengthen my knowledge :)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1426705593, "post_id": 29130530, "comment_id": 46486968, "body": "There is no syntax in C that allows you to access the <code>const int x</code>, after declaring <code>x[]</code> in <code>main</code>. The declaration of <code>x[]</code> hides the <code>const int x</code> as long as <code>x[]</code> is in scope, which would be all of <code>main</code> in this example."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1426706752, "post_id": 29130530, "comment_id": 46487592, "body": "Please note <code>int main</code> is standard not <code>void main</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1426734518, "post_id": 29130530, "comment_id": 46497943, "body": "@ShafikYaghmour: Specifically <code>int main(void)</code> in C, or <code>int main()</code> in C++."}], "answers": [{"comments": [{"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1426705411, "post_id": 29130566, "comment_id": 46486865, "body": "so, let say I define a variable like this: int x = x; after that, when I use y = x; what would be x here?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1426705567, "post_id": 29130566, "comment_id": 46486957, "body": "@duong_dajgja that would be undefined behavior since the value of <code>x</code> is indeterminate in that case: see <a href=\"http://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14?</a> ... It is also <a href=\"http://stackoverflow.com/q/22416319/1708801\">undefined behavior in C as well</a>"}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 9, "last_activity_date": 1426875978, "last_edit_date": 1426875978, "creation_date": 1426705258, "answer_id": 29130566, "question_id": 29130530, "link": "https://stackoverflow.com/questions/29130530/variable-and-constant-with-same-name/29130566#29130566", "title": "Variable and constant with same name", "body": "<p>For C++ this is covered in the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow\">draft C++ standard</a> section <code>3.3.2</code> <em>Point of declaration</em>:</p>\n\n<blockquote>\n  <p>The point of declaration for a name is immediately after its complete\n  declarator (Clause 8) and before its initializer (if any), except as\n  noted below. [ Example:</p>\n\n<pre><code>int x = 12;\n{ int x = x; }\n</code></pre>\n  \n  <p>Here the second x is initialized with its own (indeterminate) value.\n  \u2014end example ]</p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>[ Note: a name from an outer scope remains visible up to the point of\n  declaration of the name that hides it.[ Example:</p>\n\n<pre><code>const int i = 2;\n{ int i[i]; }\n</code></pre>\n  \n  <p>declares a block-scope array of two integers. \u2014end example ] \u2014end note\n  ]</p>\n</blockquote>\n\n<p>So in your case:</p>\n\n<pre><code>int x[x];\n</code></pre>\n\n<p>The <em>const int</em> <code>x</code> is visible until the closing <code>]</code>. To refer to <em>const int</em> <code>x</code> after that point you can use a <a href=\"http://en.cppreference.com/w/cpp/language/identifiers\" rel=\"nofollow\">qualified identifer</a>:</p>\n\n<pre><code>::x\n</code></pre>\n\n<p>Of course this begs the question, why not just use different names and not have to deal with these edge cases?</p>\n\n<p><B>C</B></p>\n\n<p>The equivalent quotes form the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">draft C99 standard</a> would be from section <code>6.2.1</code> <em>Scopes of identifiers</em> (<em>emphasis mine</em>):</p>\n\n<blockquote>\n  <p>Structure, union, and enumeration tags have scope that begins just\n  after the appearance of the tag in a type specifier that declares the\n  tag. Each enumeration constant has scope that begins just after the\n  appearance of its defining enumerator in an enumerator list. <strong>Any\n  other identifier has scope that begins just after the completion of\n  its declarator.</strong></p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>[...] Within the inner scope, the identifier designates the entity\n  declared in the inner scope; the entity declared in the outer scope is\n  hidden (and not visible) within the inner scope.</p>\n</blockquote>\n\n<p>there is no way to make the <code>x</code> in the outer scope visible in C.</p>\n"}], "owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 1, "accepted_answer_id": 29130566, "answer_count": 1, "score": 2, "last_activity_date": 1426875978, "creation_date": 1426705122, "last_edit_date": 1426706727, "question_id": 29130530, "link": "https://stackoverflow.com/questions/29130530/variable-and-constant-with-same-name", "title": "Variable and constant with same name", "body": "<p>I have a C code snippet as follows:</p>\n\n<pre><code>const int x = 5;\nvoid main()\n{\n    int x[x];\n    int y = sizeof(x) / sizeof(int);\n    printf(\"%d\",y);\n}\n</code></pre>\n\n<p>The code snippet would be compiled and run correctly. But I don't understand how to differentiate x 'variable' and x 'const'.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426705207, "post_id": 29130413, "comment_id": 46486734, "body": "Please show the input and state what expected output."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426708371, "post_id": 29130413, "comment_id": 46488539, "body": "It&#39;s hard to determine if my edit represents the intent. Please check and roll back the edit, if it doesn&#39;t."}, {"owner": {"reputation": 1, "user_id": 4686755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d53287679e3bea6a7f763583cd79f2?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Hecht", "link": "https://stackoverflow.com/users/4686755/nicholas-hecht"}, "edited": false, "score": 0, "creation_date": 1426886292, "post_id": 29130413, "comment_id": 46569626, "body": "I forgot to add in, I am trying to create a two pass assembler, the first pass  will create addresses and store the Label and its address into a hashtable."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4686755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d53287679e3bea6a7f763583cd79f2?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Hecht", "link": "https://stackoverflow.com/users/4686755/nicholas-hecht"}, "edited": false, "score": 0, "creation_date": 1426882137, "post_id": 29130499, "comment_id": 46567735, "body": "The only thing about using %s is it looks for a string of that length but this string cannot contain &#39; &#39; (space characters) which I need to include in the char array I read in. How would I account for that? The max length of the strings for each column would be the size I made each char array but can be less. Which is when I need to account for the spaces. There will be a guarantee that the spaces will be included if the string is not the max length."}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 1, "last_activity_date": 1426711478, "last_edit_date": 1426711478, "creation_date": 1426705015, "answer_id": 29130499, "question_id": 29130413, "link": "https://stackoverflow.com/questions/29130413/how-to-properly-read-from-a-file-in-a-certain-amount-of-multiple-characters-into/29130499#29130499", "title": "How to properly read from a file in a certain amount of multiple characters into a char array in C?", "body": "<p>As <code>fscanf</code> returns the number of read items, I suppose the condition should be</p>\n\n<pre><code> (7 == fscanf(f, \"%7s %c %c %6s %c %9s %51s\", firCol, space, secCol, thirCol, forCol, fifCol, comm))\n</code></pre>\n\n<p>Pay attention: </p>\n\n<ul>\n<li><p>to read a chacter use <code>%c</code> (without length specification)</p></li>\n<li><p>to read string use <code>%s</code></p></li>\n<li><p>length for strings should be (ARRAY SIZE - 1)</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1426887148, "post_id": 29131846, "comment_id": 46570018, "body": "What happens if your <code>fopen</code> fails? And why haven&#39;t you initialized your arrays? <code>= {0};</code>"}, {"owner": {"reputation": 1466, "user_id": 810658, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62139de5517901ce4c7ba8184070d24f?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/810658/philip"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1427057320, "post_id": 29131846, "comment_id": 46611714, "body": "@DavidC.Rankin If only I had mentioned that in the answer. If only."}], "tags": [], "owner": {"reputation": 1466, "user_id": 810658, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62139de5517901ce4c7ba8184070d24f?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/810658/philip"}, "is_accepted": false, "score": 1, "last_activity_date": 1426709787, "creation_date": 1426709787, "answer_id": 29131846, "question_id": 29130413, "link": "https://stackoverflow.com/questions/29130413/how-to-properly-read-from-a-file-in-a-certain-amount-of-multiple-characters-into/29131846#29131846", "title": "How to properly read from a file in a certain amount of multiple characters into a char array in C?", "body": "<p>First off, the proper way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n\n  //TODO: Name this variables better. I cannot stress how important naming this is\n  char firCol[9];        //first 8 characters including delimiters\n  char plusFlag;           //space or '+'\n  char thirCol[8];       //word of length 7 but if shorter includes delitimers\n  char fifCol[10];       //sames of 7 but length \n  char comm[53];         // length 52 char and delimitrer\n\n  FILE* f;  //Don't forget variables. And when asking questions with code, it's best to include everything\n\n  //Don't worry about initializing the strings. In general, initializing variables is a good idea, but these will be clobbered.\n\n  f = fopen(\"file.txt\", \"r\");                                                    \n  //Ah, dead code. It might have been something at some point. But it was killed. Now it's corpse litters the field of battle.\n  //memset(info, 0, sizeof(struct Account) * TABLE_SIZE);                                  //Initialize the array, set all indices equal 0 \n\n  //the spaces in the file are eaten by the spaces in the string literal\n  //The size of the strings can vary, but the number in %8s is the maximum. It's a good safety precausion.\n  // %*c eats a character and throws it away. We do this because there might be one or two whitespaces. The second of which may be important. If we put a whitespace in the string literal, it would have eaten both, throwing off the rest of the command.\n  //The %c is always just one character. You don't want to read in a string for that + symbol, as it isn't terminated by a null character. %1s would work... but no.  \n  //The %c is tied to &amp;plusFlag.   The ampersand indicates the address of the variable.  The other variables are arrays, and act like the address of the first character in the array.  \n  while(fscanf(f, \"%8s%*c%c%7s %9s %52s\", firCol, &amp;plusFlag, thirCol, fifCol, comm) != EOF)\n  {\n    printf(\"%s %c %s %s %s\\n\", firCol, plusFlag, thirCol, fifCol, comm);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>For varying degrees of \"proper\". I mean, are you REALLY sure that the data is well formatted?  That there's even data in that file? That there's a file at all?  Double-checking all the ways things can go tits up is the difference between life-critical DO-178c code and highschool demos. That and a fuckton of documentation.</p>\n\n<p>Technically, what you're doing should work. You just have extra spaces in your fscanf. So it scanned 8 characters, put them in firCol, then ate a space you thought would be going into <code>space</code>, and then put the <code>+</code> into space. Try:</p>\n\n<pre><code>fscanf(f, \"%8c%1c%1c%7c%1c%10c%52c\", firCol, space, secCol, thirCol, forCol, fifCol, comm))\n</code></pre>\n\n<p>This DOES read data from a file and put it into your variables...  But I wouldn't call it \"proper\".  If you want to use strings, you'll find it a lot more compatible with the rest of the programming world if you null terminate them.  This is conforming to... uh... common sense. While there are a million ways to skin a cat, following suit with all the other programmers and libraries and APIs will make your life easier. </p>\n\n<p>Character arrays in C, otherwise known as strings, need a null-terminating character at the end of them <code>'\\0'</code>.  <code>'\\0'</code> is the same as the binary value <code>0</code> but not the same as the the ascii character <code>'0'</code>. </p>\n\n<p>Note the quotes. In C anything in single quotes is a <code>char</code>.  'a', 'b', '9','0', along with command characters like '\\n' '\\0' or '\\b'.   Anything in quotes is a string literal. <code>\"This is a string literal\"</code>.  <code>char</code> characters pretty much just perform a lookup on the ascii table. Strings on the other hand, act a little funky with a lot of gotchas that screw with people learning the language. Making C strings easier to deal with is one of the primary forces that birthed other languages. </p>\n\n<p>It looks like you wanted to shove this all into a struct. You could do that with:</p>\n\n<pre><code>//Outside of main\ntypedef struct \n{\n  char firCol[9];        //first 8 characters including delimiters\n  char plusFlag;           //space or '+'\n  char thirCol[8];       //word of length 7 but if shorter includes delitimers\n  char fifCol[10];       //sames of 7 but length \n  char comm[53];         // length 52 char and delimitrer\n} DataFromFile_t;\n\n\nint main(int argc, char **argv)\n{\n  DataFromFile_t  dataFromFile;\n  . . .\n  fscan(f,\"%s ...\", dataFromFile.firstCol);\n</code></pre>\n\n<p>Lemmesee what else...</p>\n\n<ul>\n<li>[Generic angry ranting about proper indentation.] And I mean two-spaces and none of this \"tab\" business the heretics keep blabbering about.</li>\n<li>The importance of showing all the code in your example.</li>\n<li>State what what you have, what you're getting, and what you expected to get in your question. I'm not actually sure what you thought went wrong, I'm just guessing here. </li>\n<li>Don't stress out too much about what \"proper\". If it gits'er'done, often that's good enough. </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1426712883, "creation_date": 1426712883, "answer_id": 29132704, "question_id": 29130413, "link": "https://stackoverflow.com/questions/29130413/how-to-properly-read-from-a-file-in-a-certain-amount-of-multiple-characters-into/29132704#29132704", "title": "How to properly read from a file in a certain amount of multiple characters into a char array in C?", "body": "<p>The key is \"This is reading from one line at a time from the file ...\", so code that <em>first</em>:</p>\n\n<pre><code>char buf[100];\nwhile ((fgets(buf, sizeof buf, f) != NULL) {\n</code></pre>\n\n<p><em>Now</em>, let us parse the buffer per spec: \"... scan in 8 spaces, a word of length 5, 1 space, and another word of length 8 ...\".  Using <code>\"%n\"</code> to record the offset of the current scan makes validation easy.</p>\n\n<pre><code>  int sp1, sp2;\n  int n = 0;\n  char word5[5+1];\n  char word8[8+1];\n  sscanf(\" %n%5s %n%8s %n\", &amp;sp1, word5, &amp;sp2, word8, &amp;n);\n  if (n == 0 || sp1 != 8 || strlen(word5) != 5 || sp2 != (8+5+1) || \n      strlen(word8) != 8) {\n    Handle_BadInput();\n    continue;\n  }\n  // Use validated input;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4686755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d53287679e3bea6a7f763583cd79f2?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Hecht", "link": "https://stackoverflow.com/users/4686755/nicholas-hecht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1426886844, "creation_date": 1426704800, "last_edit_date": 1426886844, "question_id": 29130413, "link": "https://stackoverflow.com/questions/29130413/how-to-properly-read-from-a-file-in-a-certain-amount-of-multiple-characters-into", "title": "How to properly read from a file in a certain amount of multiple characters into a char array in C?", "body": "<p>I am pretty new to programming and I am not sure how to solve this problem. I tried doing %8s ... %52s but it does not take into account that delimiters are supposed to take up space in the substrings. So if I tried to scan in 8 spaces, a word of length 5, 1 space, and another word of length 8 it would grab the first string of letters not the spaces. This is reading from one line at a time from the file, but breaking it up into substrings, where each substring is put into a unique array.\nEX:</p>\n\n<pre><code>        Word AnotherW\n</code></pre>\n\n<p>the first array would take in <code>Word</code>, not <code>        </code> (8 spaces).</p>\n\n<pre><code>    char firCol[8];                   //first 8 characters including delimiters\n    char space[1] = {' '};            //guaranteed space\n    char secCol[1] = {' '};           //space or '+'\n    char thirCol[7];      //word of length 7 but if shorter includes delitimers\n    char forCol[1] = {' '};           //guaranteed space\n    char fifCol[10];                  //sames of 7 but length \n    char comm[52];                    // length 52 char and delimitrer\n\n    memset(firCol, ' ', 8);\n    memset(thirCol, ' ', 7);\n    memset(comm, ' ', 52);\n\n    f = fopen(argv[1], \"r\");                                                           \n\n    memset(info, 0, sizeof(struct Account) * TABLE_SIZE);\n            //Initialize the array, set all indices equal 0 \n\n      while(EOF != fscanf(f, \"%8c %1c %1c %7c %1c %10c %52c\", firCol, space, secCol, thirCol, forCol, fifCol, comm))\n      {\n        pass1(info, firCol, space, secCol, thirCol, forCol, fifCol, comm);\n      }\n\n\n\n\n/******************************/\n/***MORE    INFO    ADDED******/\n/******************************/\n\n\n    Col 1-8    label optional\n    Col 9      blank\n    Col 10     + optional\n    Col 11-17  mneumonic\n    Col 18     blank\n    Col 19     #, @, =  ... optional\n    Col 20-29  (operand) label, register, ',',X optional  ...\n    Col 30-31  blank\n    Col 32-80  comments optional (NO PERIOD REQUIRED)\n\n\n    ADDRES    START    100                               \n    . tests pc forward addressing\n    . tests base addressing\n    . tests pc backward addressing\n    NOW      +LDB     #BEGIN              load base register \n    XXX       BASE     BEGIN              tell assembler  \n    YYY       LDA      BE                 A &lt;- (m..m+2)    \n    EN        RESW     4                  \n    BE        WORD     2                              \n    BEGIN     RESW     1\n    JUNK      RESW     2200                              \n    THERE     RESW     1                              \n    ZZZ       LDA      JUNK                               \n    MMM       STA      THERE                              \n              END      NOW          \n\n\n    RESULTS:\n\n    100     ADDRES    START    100                               \n    . TESTS PC FORWARD ADDRESSING\n    . TESTS BASE ADDRESSING\n    . TESTS PC BACKWARD ADDRESSING\n    100    NOW      +LDB     #BEGIN              LOAD BASE REGISTER \n    104    XXX       BASE     BEGIN              TELL ASSEMBLER  \n    104    YYY       LDA      BE                 A &lt;- (M..M+2)    \n    107    EN        RESW     4                  \n    113    BE        WORD     2                              \n    116    BEGIN     RESW     1\n    119    JUNK      RESW     2200                              \n    1ae1   THERE     RESW     1                              \n    1ae4   ZZZ       LDA      JUNK                               \n    1ae7   MMM       STA      THERE                              \n    1aea                END      NOW                              \n\n    Table Location      Label      Address      Use Csect\n    135 0                   BE          113         main    main\n    147 0                   EN          107         main    main\n    231 0                   MMM        1ae7         main    main\n    244 0                   NOW        100          main    main\n    264 0                   XXX        104          main    main\n    267 0                   YYY        104          main    main\n    270 0                   ZZZ        1ae4         main    main\n    312 0                   JUNK          119       main    main\n    357 0                  BEGIN         116        main    main\n    376 0                  THERE         1ae1       main    main\n    435 0                  ADDRES       100         main    main\n</code></pre>\n"}, {"tags": ["c", "python-2.7"], "comments": [{"owner": {"reputation": 97521, "user_id": 565635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7b4b3e7c9ac68b7d2c93ad02d0b9c79d?s=128&d=identicon&r=PG", "display_name": "orlp", "link": "https://stackoverflow.com/users/565635/orlp"}, "edited": false, "score": 0, "creation_date": 1426704864, "post_id": 29130365, "comment_id": 46486517, "body": "Look up the terms &quot;embedding&quot; and &quot;extending&quot; in relation to scripting languages."}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1426704921, "post_id": 29130365, "comment_id": 46486550, "body": "<i>And why would these programs use python scripts instead of implementing what the python script would do in the actual program code?</i> because python is much easier to learn than c"}, {"owner": {"reputation": 5, "user_id": 4651898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3538ec32acf4f5ce359f80f9a84004b?s=128&d=identicon&r=PG&f=1", "display_name": "TheExceptionist", "link": "https://stackoverflow.com/users/4651898/theexceptionist"}, "edited": false, "score": 0, "creation_date": 1426706486, "post_id": 29130365, "comment_id": 46487433, "body": "thank you for for answering"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4651898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3538ec32acf4f5ce359f80f9a84004b?s=128&d=identicon&r=PG&f=1", "display_name": "TheExceptionist", "link": "https://stackoverflow.com/users/4651898/theexceptionist"}, "edited": false, "score": 0, "creation_date": 1426707461, "post_id": 29130491, "comment_id": 46488018, "body": "You also explained it quite well, with a link to help out, thank you for that as well"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1426705000, "creation_date": 1426705000, "answer_id": 29130491, "question_id": 29130365, "link": "https://stackoverflow.com/questions/29130365/is-it-possible-to-use-2-coding-languagespython-and-c-language-to-make-a-single/29130491#29130491", "title": "Is it possible to use 2 coding languages(python and C-language) to make a single program?", "body": "<p>Yes, you can do that. BTW, I suggest using some Python 3.4 (since 2.7 is really old, use it only for legacy code).</p>\n\n<p>It is called <a href=\"https://docs.python.org/3/extending/index.html\" rel=\"nofollow\">extending Python (with C code)</a> (you'll make a shared library -by compiling your C code- or \"plugin\" loadable by Python). You might also do the converse: embed a Python interpreter in your C program.</p>\n\n<p>BTW, some other scripting languages &amp; implementations have been specifically designed to be easily embedded in your C program, notably <a href=\"http://lua.org/\" rel=\"nofollow\">Lua</a> &amp; <a href=\"http://www.gnu.org/software/guile/\" rel=\"nofollow\">GNU guile</a></p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 4651898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3538ec32acf4f5ce359f80f9a84004b?s=128&d=identicon&r=PG&f=1", "display_name": "TheExceptionist", "link": "https://stackoverflow.com/users/4651898/theexceptionist"}, "edited": false, "score": 0, "creation_date": 1426707287, "post_id": 29130493, "comment_id": 46487919, "body": "Thank you, especially for elaborating, I like long answers better than short ones"}], "tags": [], "owner": {"reputation": 799, "user_id": 2852752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cccb091a6c93b982a5cb253eab25acd9?s=128&d=identicon&r=PG&f=1", "display_name": "brunch875", "link": "https://stackoverflow.com/users/2852752/brunch875"}, "is_accepted": false, "score": 1, "last_activity_date": 1426705006, "creation_date": 1426705006, "answer_id": 29130493, "question_id": 29130365, "link": "https://stackoverflow.com/questions/29130365/is-it-possible-to-use-2-coding-languagespython-and-c-language-to-make-a-single/29130493#29130493", "title": "Is it possible to use 2 coding languages(python and C-language) to make a single program?", "body": "<p>Taking a look at <a href=\"https://docs.python.org/2/extending/embedding.html\" rel=\"nofollow\">python documentation</a>, the answer is yes.</p>\n\n<blockquote>\n  <p>The simplest form of embedding Python is the use of the very high\n  level interface. This interface is intended to execute a Python script\n  without needing to interact with the application directly. This can\n  for example be used to perform some operation on a file.</p>\n</blockquote>\n\n<pre><code>#include &lt;Python.h&gt;\n\nint\nmain(int argc, char *argv[])\n{\n  Py_SetProgramName(argv[0]);  /* optional but recommended */\n  Py_Initialize();\n  PyRun_SimpleString(\"from time import time,ctime\\n\"\n                     \"print 'Today is',ctime(time())\\n\");\n  Py_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>The reason behind using a python script instead of directly implementing it in C is because python is much more high-level and thus easier and faster to create (for the price of performance).</p>\n"}], "owner": {"reputation": 5, "user_id": 4651898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3538ec32acf4f5ce359f80f9a84004b?s=128&d=identicon&r=PG&f=1", "display_name": "TheExceptionist", "link": "https://stackoverflow.com/users/4651898/theexceptionist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1426705006, "creation_date": 1426704659, "question_id": 29130365, "link": "https://stackoverflow.com/questions/29130365/is-it-possible-to-use-2-coding-languagespython-and-c-language-to-make-a-single", "title": "Is it possible to use 2 coding languages(python and C-language) to make a single program?", "body": "<p>I've seen other programs use python scripts, and I was wondering if I could so in C. And why would these programs use python scripts instead of implementing what the python script would do in the actual program code? Thanks for answering.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 2, "creation_date": 1426704234, "post_id": 29130174, "comment_id": 46486153, "body": "<code>&quot;int weeks = year * 52&quot; doesn&#39;t work, says the initializer element isn&#39;t constant.</code> <code>year</code> doesn&#39;t have a value yet (uninitialized)."}, {"owner": {"reputation": 772, "user_id": 2710153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56e81eb60ba0eda7e002c6536689f5?s=128&d=identicon&r=PG", "display_name": "danyhow", "link": "https://stackoverflow.com/users/2710153/danyhow"}, "edited": false, "score": 2, "creation_date": 1426704429, "post_id": 29130174, "comment_id": 46486246, "body": "Global variables cannot be initialized with other variables. Don&#39;t initialize <code>weeks. Instead, add </code>weeks = year * 52` after <code>scanf(&quot;%d&quot;, &amp;year);</code>.  <code>get_lotto_draw()</code> is just broken. You are returning after the first iteration in the loop."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 1, "creation_date": 1426704522, "post_id": 29130174, "comment_id": 46486302, "body": "<code>i</code> is also uninitialized in <code>get_lotto_draw()</code>"}, {"owner": {"reputation": 1856, "user_id": 582789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6fe229c431e3ab959b94940577f8d1?s=128&d=identicon&r=PG", "display_name": "Alfonso Nishikawa", "link": "https://stackoverflow.com/users/582789/alfonso-nishikawa"}, "edited": false, "score": 0, "creation_date": 1426704546, "post_id": 29130174, "comment_id": 46486316, "body": "Remember that in a for loop, the first is the initialization, the second is the comparison, and the third is the increment. Were you trying to write <code>for (i=0 ; i&lt;weeks ; i++)</code> maybe?"}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 1, "creation_date": 1426704746, "post_id": 29130174, "comment_id": 46486438, "body": "I don&#39;t see where you filled <code>randomNums</code> with random numbers either, and you&#39;re accessing it wrong in <code>get_lotto_draw()</code>."}, {"owner": {"reputation": 1856, "user_id": 582789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6fe229c431e3ab959b94940577f8d1?s=128&d=identicon&r=PG", "display_name": "Alfonso Nishikawa", "link": "https://stackoverflow.com/users/582789/alfonso-nishikawa"}, "edited": false, "score": 0, "creation_date": 1426704752, "post_id": 29130174, "comment_id": 46486442, "body": "<code>scanf(&quot;%s&quot;, &amp;name);</code> should be <code>scanf(&quot;%s&quot;, name);</code>. name is already a pointer: char a[] is equal to use char *a. In the case of char a[15] it will reserve memory, but that is other thing not related to the fact that an array variable is itself a pointer."}, {"owner": {"reputation": 1856, "user_id": 582789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6fe229c431e3ab959b94940577f8d1?s=128&d=identicon&r=PG", "display_name": "Alfonso Nishikawa", "link": "https://stackoverflow.com/users/582789/alfonso-nishikawa"}, "edited": false, "score": 0, "creation_date": 1426704827, "post_id": 29130174, "comment_id": 46486493, "body": "Please, do <i>not</i> modify your initial question. Make an update after your own text with your final source code version :)"}, {"owner": {"reputation": 1856, "user_id": 582789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6fe229c431e3ab959b94940577f8d1?s=128&d=identicon&r=PG", "display_name": "Alfonso Nishikawa", "link": "https://stackoverflow.com/users/582789/alfonso-nishikawa"}, "edited": false, "score": 0, "creation_date": 1426705025, "post_id": 29130174, "comment_id": 46486618, "body": "get_lotto_draw()  returns a pointer(as array), so maybe <code>printf(&quot;%d&quot;, &amp;get_lotto_draw);</code> should be something like printf(&quot;%d&quot;, get_lotto_draw <b>(missing parameter)</b> <b>[index]</b> );"}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 1, "creation_date": 1426705033, "post_id": 29130174, "comment_id": 46486623, "body": "Sorry to just throw those comments at you but you have some fundamental problems in the code. Hopefully our comments will help get you on the right track ;)"}, {"owner": {"reputation": 107, "user_id": 4293701, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/712465743/picture?type=large", "display_name": "Ben Parry", "link": "https://stackoverflow.com/users/4293701/ben-parry"}, "edited": false, "score": 0, "creation_date": 1426705297, "post_id": 29130174, "comment_id": 46486805, "body": "So how do I make my random numbers array actually hold six random numbers between 1-49?"}, {"owner": {"reputation": 1856, "user_id": 582789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6fe229c431e3ab959b94940577f8d1?s=128&d=identicon&r=PG", "display_name": "Alfonso Nishikawa", "link": "https://stackoverflow.com/users/582789/alfonso-nishikawa"}, "edited": false, "score": 0, "creation_date": 1426705705, "post_id": 29130174, "comment_id": 46487021, "body": "Something like <code>for (i=0 ; i&lt;6 ; i++) randomNums[i] = rand()%49 + 1 ;</code>, but I have never used <code>rand()</code>. Search about <code>rand()</code> and <code>srand()</code>. By the way, then <code>randomNums</code> should have a size for 6 elements? You have it for 49 elements (not values betweet 1-49)."}, {"owner": {"reputation": 772, "user_id": 2710153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56e81eb60ba0eda7e002c6536689f5?s=128&d=identicon&r=PG", "display_name": "danyhow", "link": "https://stackoverflow.com/users/2710153/danyhow"}, "edited": false, "score": 0, "creation_date": 1426706204, "post_id": 29130174, "comment_id": 46487264, "body": "With the approch of Alfonso, you&#39;d also need to check at each iteration that the random number you pick is not already contained in the array (I assume you want random numbers without repetition)."}], "answers": [{"tags": [], "owner": {"reputation": 458, "user_id": 4139707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db33d8b5f9dd4c6d7948323f76254590?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Maloney", "link": "https://stackoverflow.com/users/4139707/jack-maloney"}, "is_accepted": false, "score": 0, "last_activity_date": 1426810871, "last_edit_date": 1426810871, "creation_date": 1426806606, "answer_id": 29156624, "question_id": 29130174, "link": "https://stackoverflow.com/questions/29130174/lottery-program-problems/29156624#29156624", "title": "Lottery Program Problems", "body": "<p>Borrowing mostly from the comments, there are a few problems with your code.</p>\n\n<p><code>int weeks = year * 52;</code> results in an error because <code>year</code> hasn't been initialized. Change it to <code>int weeks = 0;</code>, and then put <code>weeks = year * 52</code> at the beginning of your main function.</p>\n\n<p>You don't need the <code>start:</code> label at the beginning of your program, unless for some reason you want to go back there using a <code>goto</code>, which is usually considered bad practice. </p>\n\n<p><code>printf(\"%d\", get_lotto_draw);</code> prints the address of <code>get_lotto_draw</code> as a decimal (\"%d\"), you need to make it <code>get_lotto_draw(args)</code> to get the return value of <code>get_lotto_draw</code>.</p>\n\n<p>system(\"PAUSE\"), runs the command PAUSE on the shell. I don't know if this will pause the current program, but if you don't want the program to exit, a loop will do instead.</p>\n\n<pre><code>while (1) {}\n</code></pre>\n\n<p>Your implementation of <code>get_lotto_draw</code> doesn't do what you think it does. What you are doing now is just returning <code>randomNums</code>, what you want to do is generate a random number between 1 and 49. To do this you should first generate a random number, and mod it by 48 and add one. This will get you a random number between 1 and 49. <code>srand(time(NULL)); int r = rand();</code> will generate a random number, and <code>r %= 48; r += 1;</code> will mod it by 48 and add one. You can then do this for each iteration of that for loop, and create an array with the values. The array that you will return will have to be <code>malloc</code>'d.</p>\n\n<pre><code>int get_lotto_draw() {\n    srand(time(NULL));\n    int* rv = malloc(sizeof(int) * 6);\n    for (int i = 0; i &lt; 6; i++) {\n        rv[i] = (rand() % 48) + 1;\n    }\n    return rv;\n}\n</code></pre>\n\n<p>Your <code>find_matches</code> function is also unimplemented. Simply iterating through the arrays to find matches should suffice.</p>\n\n<pre><code>int find_matches(int* a, int* b) {\n    int matches = 0;\n    for (int i = 0; i &lt; 6; i++) {\n        if (a[i] == b[i]) {\n            matches++;\n        }\n    }\n    return matches;\n}\n</code></pre>\n\n<p>Lastly, for your <code>print_array</code> function, you again just need to iterate through the list of lottery numbers, and print each one.</p>\n\n<pre><code>void print_array(int* arr) {\n    for (int i = 0; i &lt; 5; i++) {\n        printf(\"%d \", arr[i]);\n    }\n    printf(\"%d\", arr[5]);\n    printf(\"\\n\"); // remove this if you don't want a newline at the end.\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4293701, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/712465743/picture?type=large", "display_name": "Ben Parry", "link": "https://stackoverflow.com/users/4293701/ben-parry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1077, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1426810871, "creation_date": 1426704051, "last_edit_date": 1426705245, "question_id": 29130174, "link": "https://stackoverflow.com/questions/29130174/lottery-program-problems", "title": "Lottery Program Problems", "body": "<p>I'm currently in progress of creating my second main C program. I've only just started to learn C and I've had a few problems, as well confusion on what to do next with this program. </p>\n\n<p>The idea is to basically allow the user to enter in a desired amount of years, then the program simulates the lottery games played every week, depending on how many years they enter. Then inside the program, I want the two arrays to compare to each other and check for any numbers they both have at the same time. The lottery ticket on the user's end stays the same, which is set inside the array and of course, the random lottery numbers change every week. </p>\n\n<p>The basics are done, I'm just having a few problems, as well as not knowing where to go in certain areas.</p>\n\n<p>Problems:<br>\n\"int weeks = year * 52\" doesn't work, says the initializer element isn't constant.</p>\n\n<p>When I return the get_lotto_draw, I just get a bunched up number, it's not seperated in anyway, so I'm not sure how to do that. </p>\n\n<pre><code>#include &lt;stdio.h&gt; //Alows input/output operations\n#include &lt;stdlib.h&gt; //Standard utility operations\n\n//Declaring Variables\nint year;\nchar name[15];\nchar option;\nint lotteryPlayer[] = {5,11,15,33,42,43};\nint i;\nint randomNums[49];\nint *lotteryPtr = lotteryPlayer;\nint *randomPtr = randomNums;\nint weeks = 0;\n\nvoid print_array(int *lotteryPtr);\nint* get_lotto_draw(int *randomPtr);\n\n//Main Method\nint main(int argc, char *argv[])\n{\n    start: //Start of program\n\n    printf(\"\\n---------------------------\");\n    printf(\"\\nProject: Jackpot Dreams \");\n    printf(\"\\n---------------------------\\n\");\n\n   printf(\"\\nWhat is your First Name?:&gt; \"); //Asks them for their choice\n   scanf(\"%s\", &amp;name); //Reads the input\n\n   printf(\"\\nHow Many Years to Sleep?:&gt; \"); //Asks them for their choice\n   scanf(\"%d\", &amp;year); //Reads the input\n   weeks = year * 52;\n\n   printf(\"\\nOk %s, I will play the lottery for %d years!\\n\",name, year);\n   sleep(1500);\n   printf(\"Sweet Dreams %s, don't let the bed bugs bite\", &amp;name);\n   sleep(1500);\n   printf(\". \");\n   sleep(1500);\n   printf(\". \");\n   sleep(1500);\n   printf(\".\");\n   sleep(2000);\n\n   printf(\"%d\", get_lotto_draw);\n   system(\"PAUSE\");\n}\n\n//Returns an array of six random lottery numbers 1-49\nint* get_lotto_draw(int *randomPtr) \n{\n    for (i=0 ; i&lt;weeks ; i++)\n       return randomNums;  \n}\n\n//Print out the content of an array\nvoid print_array(int *lotteryPtr)\n{\n     printf(\"Hello\");\n}\n\n//Returns number of matches between two arrays\nint find_matches(int * lotteryPtr, int * randomPtr)\n{\n\n}\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>#include &lt;stdio.h&gt; //Alows input/output operations\n#include &lt;stdlib.h&gt; //Standard utility operations\n\n//Declaring Variables\nint year;\nchar name[15];\nchar option;\nint lotteryPlayer[] = {5,11,15,33,42,43};\nint i;\nint randomNums[49];\nint *lotteryPtr = lotteryPlayer;\nint *randomPtr = randomNums;\nint weeks = 0;\n\nvoid print_array(int *lotteryPtr);\nint* get_lotto_draw(int *randomPtr);\n\n//Main Method\nint main(int argc, char *argv[])\n{\n    start: //Start of program\n\n    printf(\"\\n---------------------------\");\n    printf(\"\\nProject: Jackpot Dreams \");\n    printf(\"\\n---------------------------\\n\");\n\n   printf(\"\\nWhat is your First Name?:&gt; \"); //Asks them for their choice\n   scanf(\"%s\", name); //Reads the input\n\n   printf(\"\\nHow Many Years to Sleep?:&gt; \"); //Asks them for their choice\n   scanf(\"%d\", &amp;year); //Reads the input\n   weeks = year * 52;\n\n   printf(\"\\nOk %s, I will play the lottery for %d years!\\n\",name, year);\n   sleep(1500);\n   printf(\"Sweet Dreams %s, don't let the bed bugs bite\", &amp;name);\n   sleep(1500);\n   printf(\". \");\n   sleep(1500);\n   printf(\". \");\n   sleep(1500);\n   printf(\".\");\n   sleep(2000);\n\n   printf(\"%d\", get_lotto_draw(*randomPtr));\n   system(\"PAUSE\");\n}\n\n//Returns an array of six random lottery numbers 1-49\nint* get_lotto_draw(int *randomPtr) \n{\n    for (i=0 ; i&lt;weeks ; i++)\n       return randomNums;  \n}\n\n//Print out the content of an array\nvoid print_array(int *lotteryPtr)\n{\n     printf(\"Hello\");\n}\n\n//Returns number of matches between two arrays\nint find_matches(int * lotteryPtr, int * randomPtr)\n{\n\n}\n</code></pre>\n"}, {"tags": ["c", "console-application"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "is_accepted": false, "score": 0, "last_activity_date": 1426704132, "creation_date": 1426704132, "answer_id": 29130197, "question_id": 29130138, "link": "https://stackoverflow.com/questions/29130138/get-previously-printed-line-from-console-output-in-c/29130197#29130197", "title": "Get previously printed line from console output in C", "body": "<p>Store every element you print in the editor in an char array, because you may have to go back all way up to start or in the middle, not only one line up.</p>\n"}, {"tags": [], "owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "is_accepted": false, "score": 2, "last_activity_date": 1426704174, "creation_date": 1426704174, "answer_id": 29130210, "question_id": 29130138, "link": "https://stackoverflow.com/questions/29130138/get-previously-printed-line-from-console-output-in-c/29130210#29130210", "title": "Get previously printed line from console output in C", "body": "<p>There is no way to do this using <code>scanf()</code> and <code>printf()</code>; the program would need to keep track of what it prints. However, it is also impossible to edit previously printed screen lines using only the standard I/O functions - in order to do that, you'd need to use e.g. <a href=\"https://www.gnu.org/software/ncurses/ncurses.html\" rel=\"nofollow\">ncurses</a>.</p>\n"}], "owner": {"reputation": 127, "user_id": 4564991, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/GriVk.png?s=128&g=1", "display_name": "2xedo", "link": "https://stackoverflow.com/users/4564991/2xedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1426704174, "creation_date": 1426703937, "question_id": 29130138, "link": "https://stackoverflow.com/questions/29130138/get-previously-printed-line-from-console-output-in-c", "title": "Get previously printed line from console output in C", "body": "<p>I'm making a very simple console text editor. In order to move the cursor to the end of the previous line when I backspace at the beginning of a line, I need to read an already printed line from the console, then get its length. How would I go about making this work?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "edited": false, "score": 2, "creation_date": 1426703412, "post_id": 29129909, "comment_id": 46485655, "body": "For some reason you seem to dereference an uninitialized pointer. Hint: let[i]. <code>char msg[] = &quot;&quot;</code> also declares an array of size 1 and then you write past that."}, {"owner": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "reply_to_user": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "edited": false, "score": 0, "creation_date": 1426703731, "post_id": 29129909, "comment_id": 46485839, "body": "So I should just have let[i] and not declare it to begin with? Sorry. I&#39;m new to this."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1426711333, "post_id": 29129909, "comment_id": 46490381, "body": "It&#39;s not <i>segment</i>, it&#39;s <i>segmentation</i> fault."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "edited": false, "score": 0, "creation_date": 1426709824, "post_id": 29130068, "comment_id": 46489441, "body": "I changed my let to char <i>*let =malloc(sizeof(char</i>)*10) but I&#39;m still getting the segment fault? I think it has to do with my let[i] = all(4,4,&#39;a&#39;,&#39;z&#39;) and my    char *c = malloc((n+1)*sizeof(char)); @sukkopera"}, {"owner": {"reputation": 601, "user_id": 4058347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce55d880bda3d2a21e6f10dfbbb404?s=128&d=identicon&r=PG", "display_name": "SukkoPera", "link": "https://stackoverflow.com/users/4058347/sukkopera"}, "reply_to_user": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "edited": false, "score": 0, "creation_date": 1426710077, "post_id": 29130068, "comment_id": 46489584, "body": "Would you explain exactly what the intended meaning of the <code>a</code> and <code>n</code> parameters to <code>let()</code> is? On a side note, the <code>free()</code> after <code>return</code> makes no sense, remove it. It is never executed anyway."}, {"owner": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "edited": false, "score": 0, "creation_date": 1426711091, "post_id": 29130068, "comment_id": 46490216, "body": "the a parameter is how many letters it starts with &amp; the n parameter is how many letters it ends with. For example if I did all(1,4,&#39;a&#39;,&#39;f&#39;); it would go from a, b, c, d, ... ffff"}, {"owner": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "edited": false, "score": 0, "creation_date": 1426711184, "post_id": 29130068, "comment_id": 46490290, "body": "full program was added to the question."}, {"owner": {"reputation": 601, "user_id": 4058347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce55d880bda3d2a21e6f10dfbbb404?s=128&d=identicon&r=PG", "display_name": "SukkoPera", "link": "https://stackoverflow.com/users/4058347/sukkopera"}, "reply_to_user": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "edited": false, "score": 0, "creation_date": 1426711423, "post_id": 29130068, "comment_id": 46490437, "body": "Then there are far too many problems in your program to discuss here. I would suggest revising the whole logic. Remember that array items are numbered from 0 to size-1 (so starting to fill c[i] with i = a does not start from the beginning of the array and will overflow). Also keep in mind what others said about <code>char msg[] = &quot;&quot;</code>. Good luck!"}], "tags": [], "owner": {"reputation": 601, "user_id": 4058347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce55d880bda3d2a21e6f10dfbbb404?s=128&d=identicon&r=PG", "display_name": "SukkoPera", "link": "https://stackoverflow.com/users/4058347/sukkopera"}, "is_accepted": false, "score": 0, "last_activity_date": 1426703711, "creation_date": 1426703711, "answer_id": 29130068, "question_id": 29129909, "link": "https://stackoverflow.com/questions/29129909/segment-fault-for-array-c-program/29130068#29130068", "title": "Segment fault for array C program", "body": "<p>You want <code>let</code> to be an array of (pointers to individual) strings. You are allocating storage space for the strings, but not for the array itself. So, either declare:</p>\n\n<pre><code>char *let[MAX_STRINGS];\n</code></pre>\n\n<p>if you have a maximum number of strings known at compile time, or allocate it dynamically:</p>\n\n<pre><code>let = malloc (sizeof (char *) * whatever_number);\n</code></pre>\n\n<p>In both cases you must take care not to exceed the allocate quantity during the input phase. If you want to be able to handle any possible quantity of input strings you will have to change your data structure, maybe to a linked list, but I guess that's an advanced topic for you at the moment.</p>\n\n<p>Also note that the <code>free(let)</code> you have right now in your code will only free memory for the array itself, but you will also need to free the individual strings before that. Basically you have to perform a <code>free()</code> for every <code>malloc()</code> you have in your code.</p>\n"}], "owner": {"reputation": 57, "user_id": 4681805, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9e60b9ab9197c9389d923019c7f4cc1?s=128&d=identicon&r=PG&f=1", "display_name": "kids", "link": "https://stackoverflow.com/users/4681805/kids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1426711162, "creation_date": 1426703248, "last_edit_date": 1426711162, "question_id": 29129909, "link": "https://stackoverflow.com/questions/29129909/segment-fault-for-array-c-program", "title": "Segment fault for array C program", "body": "<p>For some reason I am getting a segment fault at the line let[i] = all(4,4,'a','z'); I can't figure out why. I'm trying to put aaaa - zzzz in an array &amp; then compare the values one by one to an encrypted password. Any advice would help. Thanks. Ive given two snippets of my code that are giving the issue.</p>\n\n<pre><code> char* all(int a, int n,char begin, char end){\n   int i, j;\n   int k = 0;\n   char *c = malloc((n+1)*sizeof(char));\n\n   char msg[] = \"\";\n   k = strlen(msg);\n   for(i = a; i &lt;= n; i++)\n   {\n      for(j=0;j&lt;i;j++) c[j]=begin;\n      c[i]=0;\n      do {\n         for(int g = 0; g &lt; k; g++) \n            msg[g] = *c;\n      } while(inc(c,begin,end));\n   } \n   return c;\n   free(c);\n}   \n\nint main(int argc, char* argv[])\n{\n   char *result;\n   char **let;\n\n   int f = open(\"pass.txt\", O_RDONLY);\n   if (f &lt; 0) \n      return 0;\n   char buf[1024];\n   while (my_fgets(buf, sizeof(buf), f)) \n   {\n      int i = 0;\n            let[i] = all(4,4,'a','z');\n\n      result = crypt(argv[i+1], buf);\n      i++;\n      int ok = strcmp (result, buf) == 0;\n\n      return ok ? 0 : 1;\n\n   }\n   free(let);\n   close(f);\n}\n</code></pre>\n\n<p>Full program can be found here: </p>\n\n<p><a href=\"http://pastie.org/10035996\" rel=\"nofollow\">http://pastie.org/10035996</a></p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 2, "creation_date": 1426703345, "post_id": 29129892, "comment_id": 46485612, "body": "<code>deck[51][1]</code> means 51*1, you want <code>deck[52][2]</code>"}, {"owner": {"reputation": 1442, "user_id": 1974820, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dbef24ad4ab779ebde4faa296a5c407f?s=128&d=identicon&r=PG", "display_name": "Eric S.", "link": "https://stackoverflow.com/users/1974820/eric-s"}, "edited": false, "score": 1, "creation_date": 1426703491, "post_id": 29129892, "comment_id": 46485709, "body": "not directly related, but why have a separate field for four suits when you have 52 card values already? Did you want something like deck[13][4]?"}, {"owner": {"reputation": 6003, "user_id": 3229534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Pc9Po.png?s=128&g=1", "display_name": "Aron", "link": "https://stackoverflow.com/users/3229534/aron"}, "edited": false, "score": 0, "creation_date": 1426703761, "post_id": 29129892, "comment_id": 46485860, "body": "Because I want to be able to shuffle the deck afterwards, also I want to be able to shrink the deck afterwards depending on what cards had already been taken from the deck."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1426703797, "post_id": 29129892, "comment_id": 46485883, "body": "The 2-d array is silly. Just have each card be a single number, and derive the rank and suit from that--simpler, faster. That&#39;s what I do in <a href=\"http://lcrocker.github.io/onejoker/cardlib/\" rel=\"nofollow noreferrer\">lcrocker.github.io/onejoker/cardlib</a> , for example."}], "answers": [{"comments": [{"owner": {"reputation": 6003, "user_id": 3229534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Pc9Po.png?s=128&g=1", "display_name": "Aron", "link": "https://stackoverflow.com/users/3229534/aron"}, "edited": false, "score": 0, "creation_date": 1426703718, "post_id": 29129966, "comment_id": 46485832, "body": "God.. Ok thank you. My teacher did not explain this to me properly. I thought that indexing and array size declarations would work the same way. Thanks!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 6003, "user_id": 3229534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Pc9Po.png?s=128&g=1", "display_name": "Aron", "link": "https://stackoverflow.com/users/3229534/aron"}, "edited": false, "score": 1, "creation_date": 1426707404, "post_id": 29129966, "comment_id": 46487991, "body": "@Aron <code>if (age &lt; 18) BlameTeacher =  true;  else BlameStudent =  true;</code>"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1426703414, "creation_date": 1426703414, "answer_id": 29129966, "question_id": 29129892, "link": "https://stackoverflow.com/questions/29129892/creating-deck-of-cards-in-c/29129966#29129966", "title": "Creating deck of cards in C", "body": "<p>Although array indexes in C are zero-based, it does not mean that the compiler would add <code>1</code> to each dimension on a declaration. Your declaration makes an array that is 51x1, not 52x2. For 52x2 array use</p>\n\n<pre><code>int deck[52][2];\n</code></pre>\n\n<p>Your current implementation has undefined behavior, which makes the output of your program incorrect: accessing <code>deck[x][1]</code> goes past the boundaries of the array, producing incorrect output.</p>\n"}], "owner": {"reputation": 6003, "user_id": 3229534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Pc9Po.png?s=128&g=1", "display_name": "Aron", "link": "https://stackoverflow.com/users/3229534/aron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2897, "favorite_count": 0, "accepted_answer_id": 29129966, "answer_count": 1, "score": 1, "last_activity_date": 1426703414, "creation_date": 1426703212, "question_id": 29129892, "link": "https://stackoverflow.com/questions/29129892/creating-deck-of-cards-in-c", "title": "Creating deck of cards in C", "body": "<p>I am trying to create a deck of cards in C. The way I want to implement this is by having a 2 dimensional array of <code>deck[51][1]</code>, which will have 52 slots of 2 slots each. The first slot will contain the card value (1-52) and the second slot will contain the suit (1-4). </p>\n\n<p>I have tried to assign this by using the below code:</p>\n\n<pre><code>int deck[51][1];\nint i;\nint j;\nint suit = 1;\n\nint main()\n{\n    for(i=0; i&lt;52; i++){\n        for(j=0; j&lt;2; j++){\n            if(j==0){\n                deck[i][j] = i+1;\n            } else {\n                deck[i][j] = suit % 4;\n            }\n            suit++;\n        }\n    }\n</code></pre>\n\n<p>I then try and make it print out every card's value using the following double loop: </p>\n\n<pre><code>for(i=0; i&lt;52; i++){\n    for(j=0; j&lt;2; j++){\n        printf(\"%i \",deck[i][j]);\n    }\n    printf(\"\\n\");\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>However instead of resulting in 52 lines of the card value followed by its suit, it just displays a weird </p>\n\n<pre><code>1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n</code></pre>\n\n<p>and so on until </p>\n\n<pre><code>51 52\n52 0\n</code></pre>\n\n<p>I can't work out why it's not assigning the <code>suit % 4</code> value to the second item of every array, which should result in a neat </p>\n\n<pre><code>1 1\n2 2\n3 3\n4 4\n5 1\n6 2\n7 3\n8 4\n</code></pre>\n"}, {"tags": ["c", "structure"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426703393, "post_id": 29129880, "comment_id": 46485647, "body": "One problem is that the input only has 10 words, so the <code>&lt; 11</code> (two places) should be <code>&lt; 10</code>, but even better would be to check the return value from <code>strtok</code> so you know when <code>strtok</code> has reached the end."}, {"owner": {"reputation": 23, "user_id": 4552760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0098e208c017fa623f2acdbd996943d4?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Mcnaughton", "link": "https://stackoverflow.com/users/4552760/jamie-mcnaughton"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1426703467, "post_id": 29129880, "comment_id": 46485692, "body": "that fixed it lol thank you!"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4683705"}, "is_accepted": false, "score": 1, "last_activity_date": 1426706234, "creation_date": 1426706234, "answer_id": 29130832, "question_id": 29129880, "link": "https://stackoverflow.com/questions/29129880/copying-over-from-a-string-of-words-to-a-structure-in-c/29130832#29130832", "title": "Copying over from a string of words to a structure in c.", "body": "<p>May be this will be better solution:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct myWord\n{\n    char Word[21];\n    int Length;\n} WordList[20];\n\nint main(){\n  int i;\n  char myString[] = \"the cat in the hat jumped over the lazy fox\";\n  char *ptr;\n  ptr = strtok(myString, \" \");\n  for(i=0; i&lt;9 &amp;&amp; ptr != NULL; i++){\n      ptr = strtok(NULL, \" \");\n      strcpy(WordList[i].Word, ptr);\n      WordList[i].Length = strlen(WordList[i].Word);\n  }\n  for(i=0; i&lt;11; i++){\n    printf(\"%s\\n\", WordList[i].Word); \n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4552760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0098e208c017fa623f2acdbd996943d4?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie Mcnaughton", "link": "https://stackoverflow.com/users/4552760/jamie-mcnaughton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426706234, "creation_date": 1426703167, "question_id": 29129880, "link": "https://stackoverflow.com/questions/29129880/copying-over-from-a-string-of-words-to-a-structure-in-c", "title": "Copying over from a string of words to a structure in c.", "body": "<p>i'm starting to use structures with very basic knowledge in my class and i am having trouble understanding how to copy from a string using strtok to a wordlist in a structure. This is my code so far but when I run it all I get are segmentation faults. Also afterwards i would like to print the words in the word list along with getting their lengths. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct myWord\n{\n    char Word[21];\n    int Length;\n} WordList[20];\n\nint main(){\n  int i;\n  char myString[] = \"the cat in the hat jumped over the lazy fox\";\n\n  strcpy(WordList[0].Word, strtok(myString, \" \"));\n  WordList[0].Length = strlen(WordList[0].Word);\n\n  for(i=1; i&lt;11; i++){\n      strcpy(WordList[i].Word, strtok(NULL, \" \"));\n      WordList[i].Length = strlen(WordList[i].Word);\n  }\n  for(i=0; i&lt;11; i++){\n    printf(\"%s\\n\", WordList[i].Word); \n  }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "driver", "kernel-module"], "answers": [{"tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 5, "last_activity_date": 1426703078, "creation_date": 1426703078, "answer_id": 29129850, "question_id": 29129668, "link": "https://stackoverflow.com/questions/29129668/linux-kernel-module-kernel-method-undefined-kthread-create-on-cpu/29129850#29129850", "title": "linux kernel module: kernel method undefined (kthread_create_on_cpu)", "body": "<p><code>kthread_create_on_cpu</code> is not exported by kernel, it is internal function used by CPU hotplug threads (see <code>linux/smpboot.h</code>). </p>\n\n<p>I suggest you to use <code>kthread_bind</code> instead.</p>\n"}], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "accepted_answer_id": 29129850, "answer_count": 1, "score": 1, "last_activity_date": 1426703169, "creation_date": 1426702505, "last_edit_date": 1426703169, "question_id": 29129668, "link": "https://stackoverflow.com/questions/29129668/linux-kernel-module-kernel-method-undefined-kthread-create-on-cpu", "title": "linux kernel module: kernel method undefined (kthread_create_on_cpu)", "body": "<p>The method</p>\n\n<pre><code>struct task_struct *kthread_create_on_cpu(int(*threadfn)(void *data),\n    void *data, unsigned int cpu,\n    const char *namefmt)\n</code></pre>\n\n<p>is defined in kthread.c file and prototyped in kthread.h. But it is not exported.</p>\n\n<p>In my driver I want to start a kthread on a given CPU, so I do:</p>\n\n<pre><code>#include &lt;linux/kthread.h&gt;\n\nint udpsrv_start_single( unsigned int cpu)\n{\n     DEBUG_PRINT_INFO( \"[udpsrv] udpsrv_start: Initializing...\\n\");\n     //(...)\n     kthread-&gt;thread = kthread_create_on_cpu((void *)kthread_start_single, \n                                                      NULL, cpu, \"mpsrv\");\n     //(...)\n</code></pre>\n\n<p>I can compile but I get linkage error on resolving module symbols on MODPOST:</p>\n\n<pre><code>1&gt;    LD [M]  /tmp/VisualKernel/mpsrvlkm.o\n1&gt;    Building modules, stage 2.\n1&gt;    MODPOST 1 modules\n1&gt;EXEC : warning : \"kthread_create_on_cpu\"[/tmp/VisualKernel/mpsrvlkm.ko] undefined!\n</code></pre>\n\n<p>How should I proceed? How to import this symbol or what to do instead?</p>\n"}, {"tags": ["c++", "c", "gcc", "instrumentation"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426702579, "post_id": 29129604, "comment_id": 46485106, "body": "This isn&#39;t a &quot;how to&quot; site."}, {"owner": {"reputation": 772, "user_id": 2710153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56e81eb60ba0eda7e002c6536689f5?s=128&d=identicon&r=PG", "display_name": "danyhow", "link": "https://stackoverflow.com/users/2710153/danyhow"}, "edited": false, "score": 0, "creation_date": 1426707733, "post_id": 29129604, "comment_id": 46488166, "body": "That is possible with LLVM, so it should also be possible with gcc (for example, the -fgnu-tm instruments loads and stores for its own needs). Depending on what your goals is, an alternative could be to use dynamic binary instrumentation with Intel Pin or Dyninst. That might be faster to prototype something."}, {"owner": {"user_type": "does_not_exist", "display_name": "user90843"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1430639565, "post_id": 29129604, "comment_id": 48141069, "body": "@WeatherVane, what kind of site is it? and what isn&#39;t a &quot;how to&quot;?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1475087149, "post_id": 29129604, "comment_id": 66806153, "body": "I found <a href=\"http://linuxgazette.net/151/melinte.html\" rel=\"nofollow noreferrer\">this guy&#39;s solution</a> that, using the <code>-finstrument-functions</code>, extracts the arguments and return values."}], "owner": {"reputation": 736, "user_id": 1304608, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2813acd7073e52836114ec1d869b00bd?s=128&d=identicon&r=PG&f=1", "display_name": "Yogi Joshi", "link": "https://stackoverflow.com/users/1304608/yogi-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426702298, "creation_date": 1426702298, "question_id": 29129604, "link": "https://stackoverflow.com/questions/29129604/instrumenting-for-value-changes-of-variables-using-gcc", "title": "Instrumenting for value changes of variables using gcc", "body": "<p>I found that we could use <code>-finstrument-functions</code> in gcc for instrumentation to find function call sequences. Is there a way to do instrumentation (using gcc options or plugins) similarly to find out the changes in the values of individual data variables as well?</p>\n"}, {"tags": ["c", "struct", "bit-manipulation", "unions", "twos-complement"], "comments": [{"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 2, "creation_date": 1426702383, "post_id": 29129594, "comment_id": 46484978, "body": "Have you tried using unsigned int for your bits?"}, {"owner": {"reputation": 1315, "user_id": 3331879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Rto4V.jpg?s=128&g=1", "display_name": "davidhood2", "link": "https://stackoverflow.com/users/3331879/davidhood2"}, "reply_to_user": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1426702611, "post_id": 29129594, "comment_id": 46485129, "body": "Problem solved! Thanks very much - out of interest - why should that make a difference though? I don&#39;t see why after assigning a number, it should appear differently?"}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1426723430, "post_id": 29129594, "comment_id": 46495218, "body": "Well, a one bit signed int is a special case.  It can only take on the values <code>0</code> or <code>-1</code>.  When you assigned the bit a <code>1</code>, you actually assigned it a <code>-1</code>.  Similarly, if you assigned the value <code>12</code> to a four bit signed bitfield, you would actually be assigning the value <code>-4</code>, because you used a value too large for the signed bitfield."}, {"owner": {"reputation": 51497, "user_id": 49246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c421b43470bb8d3c099c5a847e588549?s=128&d=identicon&r=PG", "display_name": "starblue", "link": "https://stackoverflow.com/users/49246/starblue"}, "edited": false, "score": 0, "creation_date": 1426796239, "post_id": 29129594, "comment_id": 46529315, "body": "Bit fields are best avoided, they add unnecessary complexity and their representation is implementation defined. It is better to use bit operations on unsigned types."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1426702694, "creation_date": 1426702694, "answer_id": 29129735, "question_id": 29129594, "link": "https://stackoverflow.com/questions/29129594/assigning-collectively-to-a-struct/29129735#29129735", "title": "Assigning collectively to a struct", "body": "<p>When you use <code>int</code> for a regular variable, it is a <code>signed int</code>. However, when you use type <code>int</code> in a bit-field, whether it is <code>signed</code> or <code>unsigned</code> is implementation dependent. It's better to be precise. For bit-fields of width 1, it is better to use <code>unsigned int</code>.</p>\n"}], "owner": {"reputation": 1315, "user_id": 3331879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Rto4V.jpg?s=128&g=1", "display_name": "davidhood2", "link": "https://stackoverflow.com/users/3331879/davidhood2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 1, "accepted_answer_id": 29129735, "answer_count": 1, "score": 0, "last_activity_date": 1431521793, "creation_date": 1426702275, "last_edit_date": 1431521793, "question_id": 29129594, "link": "https://stackoverflow.com/questions/29129594/assigning-collectively-to-a-struct", "title": "Assigning collectively to a struct", "body": "<p>I have a struct of 4 bits: A,B,C and D. I wish to be able to refer to them independently (by their names) but also assign to them collectively. For example, if I said <code> variables = 11; </code>, I would get A, B &amp; D equal to 1, and C = 0, as 8 = 1011 in binary.</p>\n\n<p>My approach to this is to have a union of a 4 bit <code> int </code> and a  <code> struct </code> of 4, 1-bit <code> int </code> types. </p>\n\n<p>However, I appear to have it beginning to work - however, when printing out, I keep getting 2's complement negative numbers instead of the numbers I am putting in - what am I doing wrong? When debugging, I notice that assigning a number to the union seems to set all the high-end bits to 1 - which surely shouldn't occur!?</p>\n\n<p>Thanks very much for feedback and help! Code so far is below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;math.h&gt;\ntypedef enum boolean {\n    FALSE = 0, TRUE = 1\n} bool;\ntypedef struct names {\n    int A :1;\n    int B :1;\n    int C :1;\n    int D :1;\n} var_names;\ntypedef union variables {\n    int number :4;\n    var_names names;\n} variables;\n\nint main() {\n    variables vars = { 0 };\n    vars.number = 10;\n    printf(\"Overall number: %d\\n\", vars.number);\n    printf(\"A:\\t%d\\nB:\\t%d\\nC:\\t%d\\nD:\\t%d\\n\", vars.names.A, vars.names.B,\n            vars.names.C, vars.names.D);\n    return 0;\n}\n</code></pre>\n\n<p>And the printout of this program is:</p>\n\n<pre><code>Overall number: -6\nA:  0\nB:  -1\nC:  0\nD:  -1\n</code></pre>\n"}, {"tags": ["c", "linux", "shared-libraries", "ld-preload"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426707706, "post_id": 29129446, "comment_id": 46488154, "body": "two possibilites. 1) not using the library correctly,  see the man page for an example.  2) the open function is actually a macro to built-in in the OS or the SHELL."}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 4237666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7ae969c04f35296ec87fceaf77e878?s=128&d=identicon&r=PG&f=1", "display_name": "shooper", "link": "https://stackoverflow.com/users/4237666/shooper"}, "is_accepted": false, "score": 2, "last_activity_date": 1426702549, "creation_date": 1426702549, "answer_id": 29129678, "question_id": 29129446, "link": "https://stackoverflow.com/questions/29129446/ld-preload-ed-shared-object-traps-read-but-not-open-why/29129678#29129678", "title": "LD_PRELOAD-ed shared object traps read(), but not open().. Why?", "body": "<p>Maybe try \"open64\" instead of \"open\"?</p>\n"}, {"tags": [], "owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "is_accepted": false, "score": 3, "last_activity_date": 1426705796, "last_edit_date": 1426705796, "creation_date": 1426704796, "answer_id": 29130408, "question_id": 29129446, "link": "https://stackoverflow.com/questions/29129446/ld-preload-ed-shared-object-traps-read-but-not-open-why/29130408#29130408", "title": "LD_PRELOAD-ed shared object traps read(), but not open().. Why?", "body": "<p>To add to shooper's answer, it seems glibc performs an assembly-level rename from <code>open()</code> to <code>open64()</code> when compiling an application that calls <code>open()</code> with e.g.</p>\n\n<pre><code>$ gcc -D_FILE_OFFSET_BITS=64 open.c -o open\n</code></pre>\n\n<p>Adding <code>-S</code> to the above command and inspecting the assembly source in <code>open.s</code> shows that <code>open64()</code> is indeed being called. <code>$ gcc -E ...</code> shows that it isn't simply a preprocessor-based rename.</p>\n\n<p>The preprocessed source has this bit though, which performs the renaming:</p>\n\n<pre><code>extern int open (const char *__file, int __oflag, ...) __asm__ (\"\" \"open64\")\n     __attribute__ ((__nonnull__ (1)));\n</code></pre>\n\n<p>The code responsible for generating that declaration is in <em>/usr/include/fcntl.h</em>:</p>\n\n<pre><code>#ifndef __USE_FILE_OFFSET64\nextern int open (const char *__file, int __oflag, ...) __nonnull ((1));\n#else\n# ifdef __REDIRECT\nextern int __REDIRECT (open, (const char *__file, int __oflag, ...), open64)\n     __nonnull ((1));\n# else\n#  define open open64\n# endif\n#endif\n#ifdef __USE_LARGEFILE64\nextern int open64 (const char *__file, int __oflag, ...) __nonnull ((1));\n#endif\n</code></pre>\n\n<p>The declaration with the <code>__REDIRECT</code> is what's being used here.</p>\n\n<p>Provided that this is the real issue, my guess is that glibc in turn turns the <code>open64()</code> call into the <code>open(\"Makefile\", O_RDONLY|O_LARGEFILE)</code> system call that you see in the <code>strace</code>. Since you can only override functions and not the system calls themselves, you should try <code>open64()</code> instead like shooper suggested.</p>\n\n<p>(I'm not sure why glibc does it this way by the way, if it's for other reasons than simply to avoid macros.)</p>\n"}], "owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1426705796, "creation_date": 1426701802, "question_id": 29129446, "link": "https://stackoverflow.com/questions/29129446/ld-preload-ed-shared-object-traps-read-but-not-open-why", "title": "LD_PRELOAD-ed shared object traps read(), but not open().. Why?", "body": "<p>I'm having trouble intercepting <code>open()</code> on Linux (Debian in my case). Here is a minimalistic C source that gets built into a shared object:</p>\n\n<pre><code>/* Defines are needed for dlfcn.h (RTLD_NEXT) */\n#define __USE_GNU\n#define _GNU_SOURCE\n\n#include &lt;stdarg.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dlfcn.h&gt;\n#include &lt;unistd.h&gt;\n\nint open(char const *path, int oflag, ...) {\n    int (*real_open)(char const *, int, ...);\n    char *msg;\n    va_list args;\n    int mflag;\n\n    fprintf(stderr, \"&gt;&gt;&gt;&gt;&gt; in open &lt;&lt;&lt;&lt;&lt;&lt;\\n\");\n    real_open = dlsym(RTLD_NEXT, \"open\");\n    if ( (msg = dlerror()) ) {\n        fprintf(stderr, \"dlsym error: %s\\n\", msg);\n        exit(1);\n    }\n    va_start(args, oflag);\n    mflag = va_arg(args, int);\n    return real_open(path, oflag, mflag);\n}\n\nssize_t read(int fd, void *buf, size_t count) {\n    ssize_t (*real_read)(int, void*, size_t);\n    char *msg;\n\n    fprintf(stderr, \"&gt;&gt;&gt;&gt;&gt; in read &lt;&lt;&lt;&lt;&lt;\\n\");\n    real_read = dlsym(RTLD_NEXT, \"read\");\n    if ( (msg = dlerror()) ) {\n        fprintf(stderr, \"dlsym error: %s\\n\", msg);\n        exit(1);\n    }\n    return real_read(fd, buf, count);\n}\n</code></pre>\n\n<p>The shared object is built using:</p>\n\n<pre><code>cc -c -fPIC -Wall funcs.c\ncc -shared -o libfuncs.so funcs.o -ldl -lc\n</code></pre>\n\n<p>Now when I try</p>\n\n<pre><code>export LD_PRELOAD=/path/to/libfuncs.so\ncat somefile\n</code></pre>\n\n<p>then I only see in the output the trace of <code>read()</code> which is <code>&gt;&gt;&gt;&gt;&gt; in read &lt;&lt;&lt;&lt;&lt;</code>. I never see a trace of <code>open()</code>. I checked what <code>cat Makefile</code> does using <code>strace</code> and sure enough - both <code>open()</code> and <code>read()</code> are called:</p>\n\n<pre><code>open(\"Makefile\", O_RDONLY|O_LARGEFILE)  = 3\nfstat64(3, {st_mode=S_IFREG|0644, st_size=213, ...}) = 0\nread(3, \"testrun: libfuncs.so\\n\\tLD_PRELOAD\"..., 32768) = 213\n</code></pre>\n\n<p>Incidentally I checked also with other programs like <code>od</code> or <code>bash</code>, never got to intercept <code>open()</code>. What's going on here? Thanks in advance...</p>\n\n<p>`</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1426701724, "post_id": 29129393, "comment_id": 46484550, "body": "Well, when you tried it, did it work?"}, {"owner": {"reputation": 13, "user_id": 4677949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c837a68ab89eb792287d6c5923b7936?s=128&d=identicon&r=PG&f=1", "display_name": "Larry S.", "link": "https://stackoverflow.com/users/4677949/larry-s"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1426701945, "post_id": 29129393, "comment_id": 46484689, "body": "It did not, just wondering what else I need to change?"}, {"owner": {"reputation": 174, "user_id": 4264158, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd740e6a9590210f8ce122bd117750d5?s=128&d=identicon&r=PG", "display_name": "SUMIT KUMAR SINGH", "link": "https://stackoverflow.com/users/4264158/sumit-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1426702010, "post_id": 29129393, "comment_id": 46484730, "body": "it might be that simple !! but why don&#39;t tell us what you actually want us to answer about this question-simple/not simple????"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426702725, "post_id": 29129393, "comment_id": 46485210, "body": "Unrelated, move the declaration of <code>current</code> <i>out</i> of (above) the loop. As written now your code invokes undefined behavior by eval/dereference of an indeterminate pointer."}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1426702312, "creation_date": 1426702312, "answer_id": 29129608, "question_id": 29129393, "link": "https://stackoverflow.com/questions/29129393/inserting-strings-into-linked-list-structure/29129608#29129608", "title": "Inserting strings into linked list structure", "body": "<p>Yeah! it will also work. But the better one is to keep a temporary buffer which will store the string inputs. Now whenever you get a string just dynamically allocate (using <code>malloc()</code>)that number characters + 1 char to that pointer. And copy the buffered input to it using <code>strcpy()</code>. Look at this code snippet.</p>\n\n<pre><code>struct struct_name\n{\n   char *data;\n    ....\n};\nchar buffer[MAXBUFFERSIZE];\nscanf(\"%s\",buffer);\nstruct struct_name * temp= (struct struct_name*) malloc(sizeof(char)*(strlen(buffer)+1));\nif(temp==NULL)\n{\n    //error.\n}\nstrcpy(temp-&gt;data,buffer);\n.....\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4677949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c837a68ab89eb792287d6c5923b7936?s=128&d=identicon&r=PG&f=1", "display_name": "Larry S.", "link": "https://stackoverflow.com/users/4677949/larry-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1318, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426704956, "creation_date": 1426701624, "last_edit_date": 1426704956, "question_id": 29129393, "link": "https://stackoverflow.com/questions/29129393/inserting-strings-into-linked-list-structure", "title": "Inserting strings into linked list structure", "body": "<p>I'm trying to dynamically add strings to a linked list. (I don't know how many strings there are going to be). </p>\n\n<p>Here is my code so far that I've found:</p>\n\n<pre><code>struct node\n{\nint data;\nstruct node *next;\n}*start=NULL;\n//------------------------------------------------------------\n\nvoid creat()\n{\nchar ch;\n do\n {\n  struct node *new_node,*current;\n\n  new_node=(struct node *)malloc(sizeof(struct node));\n\n  printf(\"nEnter the data : \");\n  scanf(\"%d\",&amp;new_node-&gt;data);\n  new_node-&gt;next=NULL;\n\n  if(start==NULL)\n  {\n  start=new_node;\n  current=new_node;\n  }\n  else\n  {\n  current-&gt;next=new_node;\n  current=new_node;\n  }\n\n printf(\"nDo you want to creat another : \");\n ch=getche();\n }while(ch!='n');\n}\n//------------------------------------------------------------------\n\nvoid display()\n{\nstruct node *new_node;\n printf(\"The Linked List : n\");\n new_node=start;\n while(new_node!=NULL)\n   {\n   printf(\"%d---&gt;\",new_node-&gt;data);\n   new_node=new_node-&gt;next;\n   }\n  printf(\"NULL\");\n}\n</code></pre>\n\n<p>If I want to add strings to the linked list structure do I only change:</p>\n\n<pre><code>    struct node {\n      int data;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>  struct node {\n    char abc[256];\n</code></pre>\n\n<p>And change all the %d to %s? Is it that simple?</p>\n"}, {"tags": ["c", "eclipse", "eclipse-cdt", "code-composer"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1426701002, "post_id": 29129104, "comment_id": 46484098, "body": "So what is your prebuild step is doing exactly? Maybe just do the same in the postbuild and rename the output artifact accordingly."}, {"owner": {"reputation": 2540, "user_id": 263607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0a0493b11d05dc10294a68ea2a1fc637?s=128&d=identicon&r=PG", "display_name": "mtbkrdave", "link": "https://stackoverflow.com/users/263607/mtbkrdave"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1426701348, "post_id": 29129104, "comment_id": 46484319, "body": "The pre-build script updates the build-date, build-time and build-num #define strings in a &quot;buildinfo.h&quot; header file. I suppose renaming the output file as a post-build step would be an easy way to skin that cat..."}], "owner": {"reputation": 2540, "user_id": 263607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0a0493b11d05dc10294a68ea2a1fc637?s=128&d=identicon&r=PG", "display_name": "mtbkrdave", "link": "https://stackoverflow.com/users/263607/mtbkrdave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426700651, "creation_date": 1426700651, "question_id": 29129104, "link": "https://stackoverflow.com/questions/29129104/can-c-macro-expansions-be-used-as-eclipse-environment-variables", "title": "Can C macro expansions be used as Eclipse environment variables?", "body": "<p>I have an Eclipse (Luna) CDT project and I'd like to automatically include build version numbers in the output file name. The build version is available in code as:</p>\n\n<pre><code>#define MAJOR           1\n#define MINOR           4\n#define BUILDNUM        9\n</code></pre>\n\n<p>The BUILDNUM macro is updated by a script as a pre-build step.</p>\n\n<p>Is it possible to use these preprocessor definitions/macros in the project settings under \"Build \u2192 Linker \u2192 Basic Options \u2192 Specify Output File Name\"?</p>\n\n<p>If not, is there another (preferred) way to specify and track build numbers symbolically so that they're available to both the environment and the code?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1426700329, "post_id": 29128939, "comment_id": 46483695, "body": "The time to call <code>printf</code> is negligible compared to the time to print the characters on the screen. So this is perfectly fine."}, {"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 0, "creation_date": 1426700334, "post_id": 29128939, "comment_id": 46483702, "body": "Not in any meaningful way."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1426700359, "post_id": 29128939, "comment_id": 46483716, "body": "Maybe, but who cares since it makes the code 100% more readable. After all, that&#39;s why we use a language like C."}], "answers": [{"tags": [], "owner": {"reputation": 230, "user_id": 2658313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1308aa2bd1c9c1d525138acc5b02cf09?s=128&d=identicon&r=PG", "display_name": "Gugg", "link": "https://stackoverflow.com/users/2658313/gugg"}, "is_accepted": false, "score": 1, "last_activity_date": 1426700421, "creation_date": 1426700421, "answer_id": 29129023, "question_id": 29128939, "link": "https://stackoverflow.com/questions/29128939/does-the-unnecessary-repeated-mention-of-the-printf-to-make-the-source-code-easy/29129023#29129023", "title": "Does the unnecessary repeated mention of the printf to make the source code easy to read slow down the program?", "body": "<p>\nthe answer for **Is this considered bad programming practice and does it increase the execution time of the program? **\nis No and No</p>\n"}, {"tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 1, "last_activity_date": 1426700480, "creation_date": 1426700480, "answer_id": 29129051, "question_id": 29128939, "link": "https://stackoverflow.com/questions/29128939/does-the-unnecessary-repeated-mention-of-the-printf-to-make-the-source-code-easy/29129051#29129051", "title": "Does the unnecessary repeated mention of the printf to make the source code easy to read slow down the program?", "body": "<p>It may increase the execution time of the program, as you're making multiple function calls, instead of just one. However, the difference will be negligible, especially because your terminal output (inside printf) is likely to be the bottleneck in the execution. It's also really of concern if you're printing a <em>lot</em> to the console. I think most would agree code readability is more important than extremely small optimizations such as combining the text.</p>\n"}], "owner": {"reputation": 13, "user_id": 4617994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0572b77492eb77b4638e306577fd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Soumil Aggarwal", "link": "https://stackoverflow.com/users/4617994/soumil-aggarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1426700496, "accepted_answer_id": 29129051, "answer_count": 2, "score": 1, "last_activity_date": 1426700480, "creation_date": 1426700150, "question_id": 29128939, "link": "https://stackoverflow.com/questions/29128939/does-the-unnecessary-repeated-mention-of-the-printf-to-make-the-source-code-easy", "closed_reason": "Opinion-based", "title": "Does the unnecessary repeated mention of the printf to make the source code easy to read slow down the program?", "body": "<p>As in the source code</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n\nint main()\n{    \n    printf(\"\\n\\tQuadratic Equation Solver\");\n    printf(\"\\n\\nUse this program to solve a quadratic equation.\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>I could have written all the text I wanted to output in a single statement, but I wrote it in two statements to make reading the source code easier for me. Is this considered bad programming practice and does it increase the execution time of the program? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1426699352, "post_id": 29128653, "comment_id": 46483087, "body": "Place <code>return sum;</code> outside of <code>for</code> loop."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1426699460, "creation_date": 1426699460, "answer_id": 29128712, "question_id": 29128653, "link": "https://stackoverflow.com/questions/29128653/unexpected-error-of-control-may-reach-end-of-a-non-void-function/29128712#29128712", "title": "unexpected error of &quot;control may reach end of a non void function&quot;", "body": "<p>Your function <code>sum()</code> is poorly formed and let's say the for loop condition fails at first attempt and you never enter the loop then you have a situation where you are not returning anything and your function return type is <code>int</code></p>\n\n<p>So this case needs to be addressed so that even if you fail to enter the loop there should be return after the loop.</p>\n\n<p>return within a loop makes no sense unless there is a condition based on which you return.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 4588581, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v3Ix8.jpg?s=128&g=1", "display_name": "silencefox", "link": "https://stackoverflow.com/users/4588581/silencefox"}, "edited": false, "score": 0, "creation_date": 1426699808, "post_id": 29128741, "comment_id": 46483376, "body": "Thanks, that makes sense. However, after i put the <code>return sum</code> outside the for loop and run the program, it does not generate any output jut blank and blank."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 69, "user_id": 4588581, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v3Ix8.jpg?s=128&g=1", "display_name": "silencefox", "link": "https://stackoverflow.com/users/4588581/silencefox"}, "edited": false, "score": 0, "creation_date": 1426699911, "post_id": 29128741, "comment_id": 46483447, "body": "It&#39;s because you increment <code>array</code>, while you should be incrementing <code>ptr</code>."}, {"owner": {"reputation": 69, "user_id": 4588581, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v3Ix8.jpg?s=128&g=1", "display_name": "silencefox", "link": "https://stackoverflow.com/users/4588581/silencefox"}, "edited": false, "score": 0, "creation_date": 1426699971, "post_id": 29128741, "comment_id": 46483492, "body": "Oh, I get that. Thanks"}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1426699857, "last_edit_date": 1426699857, "creation_date": 1426699553, "answer_id": 29128741, "question_id": 29128653, "link": "https://stackoverflow.com/questions/29128653/unexpected-error-of-control-may-reach-end-of-a-non-void-function/29128741#29128741", "title": "unexpected error of &quot;control may reach end of a non void function&quot;", "body": "<p>You try to <code>return sum</code> each time the loop body is executed, but functions only return <strong>once</strong>. So on the first iteration of the loop the function will return. That's the same as having no loop.</p>\n\n<p>You need to put <code>return sum</code> <em>after</em> the loop, so that your loop makes sense. I.e. <strong>first</strong> add <code>*ptr</code> to <code>sum</code> <em>n</em> times, <strong>then</strong> return the resulting <code>sum</code>.</p>\n\n<p>Also, in the loop you do <code>++array</code>. That should probably be <code>++ptr</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 4588581, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v3Ix8.jpg?s=128&g=1", "display_name": "silencefox", "link": "https://stackoverflow.com/users/4588581/silencefox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1426699857, "creation_date": 1426699281, "question_id": 29128653, "link": "https://stackoverflow.com/questions/29128653/unexpected-error-of-control-may-reach-end-of-a-non-void-function", "title": "unexpected error of &quot;control may reach end of a non void function&quot;", "body": "<p>I write a program to sum the elements in an array. However, when I am compiling the program, it tells me that \"control  may reach end of a non void function\". I don't know why. </p>\n\n<pre><code>//a program to sum the elements of an array\n\n#include &lt;stdio.h&gt;\n\nint sum(int array[],int n)\n{\nint sum =0, *ptr;\nint *arrayend=array +n;\nfor(ptr=array; ptr&lt;arrayend;++array)\n{\n    sum +=*ptr;\n    return sum;\n}\n}\n\nint main(void)\n{\nint sum(int array[],int n);\nint value[10]={1,2,3,4,5,6,7,8,9,10};\nprintf(\"The sum is %i\\n\",sum(value,10));\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1426699601, "post_id": 29128632, "comment_id": 46483249, "body": "Aside from the missing semicolon, that line looks fine. Maybe you need to include more of your program."}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1426699825, "post_id": 29128632, "comment_id": 46483395, "body": "Well, and ignoring the fact that you&#39;re destroying whatever vestige of randomness was there in the first place. Besides those two things, yeah, looks great. Must be your other code that&#39;s also wrong."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1426701094, "post_id": 29128632, "comment_id": 46484164, "body": "Notice that if <code>RAND_MAX%sum!=0</code>,the probability of occurrence of each integer <code>i</code> are not equal. Integers below <code>RAND_MAX%sum</code> have a slightly higher probability to occur. It can be bypassed by skipping number above <code>(RAND_MAX&#47;sum)*sum</code>. The most probable issue is that this line is part of a function <code>void myrand(int sum,int random)</code> which should be <code>void myrand(int sum,int* random)</code> and the corresponding line should be <code>*random=...</code>. More code is needed to provide you with a good answer."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1426702495, "post_id": 29128632, "comment_id": 46485050, "body": "@Blindy: How does that &quot;destroy... whatever vestige of randomness was there in the first place&quot;?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1426702585, "post_id": 29128632, "comment_id": 46485112, "body": "Are you sure that <code>sum</code> has the value you think it does? Show more code, preferably a complete self-contained program that exhibits the problem. <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1426702922, "post_id": 29128632, "comment_id": 46485339, "body": "Assuming <code>sum</code> has a reasonable value, the tiny fragment of code you&#39;ve shown us <i>should</i> do what you want. Something else is going wrong. Once you figure out that part, there can still be some serious problems with the simple <code>rand() % whatever</code> approach. See section 13 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a>, particularly the questions about random numbers."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1426705119, "post_id": 29128632, "comment_id": 46486683, "body": "&quot;get extremely high numbers&quot; Where do you get them? How do you observe them?"}, {"owner": {"reputation": 11, "user_id": 4686484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f45bdc42fe019a7423095f18cd7adc?s=128&d=identicon&r=PG&f=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/4686484/julian"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1426706176, "post_id": 29128632, "comment_id": 46487251, "body": "@n.m. I ran the program a few times with a printf function added immediately after the value of the random variable was calculated. The numbers got as high as around 900."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426707086, "post_id": 29128632, "comment_id": 46487798, "body": "What is the value (or range) of <code>sum</code>?"}, {"owner": {"reputation": 11, "user_id": 4686484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f45bdc42fe019a7423095f18cd7adc?s=128&d=identicon&r=PG&f=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/4686484/julian"}, "edited": false, "score": 0, "creation_date": 1426707474, "post_id": 29128632, "comment_id": 46488023, "body": "The initial value is 30 and it changes depending on what the function returns."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1426717089, "post_id": 29128632, "comment_id": 46493166, "body": "Please show actual code and its expected output and actual output in the body of the question."}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1426729554, "post_id": 29128632, "comment_id": 46496751, "body": "@KeithThompson, modulo on an (almost) normally distributed RNG biases it towards the first part of the resulting sequence. As opposed to simply dividing by the maximum value and using the floating point range 0-1, where the error is uniformly distributed when using it to generate discrete numbers."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1426729678, "post_id": 29128632, "comment_id": 46496787, "body": "@Blindy: Sure -- but that hardly <i>destroys</i> any randomness. If <code>sum</code> is small compared to <code>RAND_MAX</code>, the bias could be insignificant -- or even nonexistent if <code>RAND_MAX+1</code> is a multiple of <code>sum</code>. And it wouldn&#39;t explain results outside the range <code>0</code> .. <code>sum-1</code> -- which is what the OP seems to be implying."}], "answers": [{"tags": [], "owner": {"reputation": 3695, "user_id": 4679661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfe9e5dd7661323595e25d592172b10?s=128&d=identicon&r=PG&f=1", "display_name": "juhist", "link": "https://stackoverflow.com/users/4679661/juhist"}, "is_accepted": false, "score": 1, "last_activity_date": 1426776438, "creation_date": 1426776438, "answer_id": 29147682, "question_id": 29128632, "link": "https://stackoverflow.com/questions/29128632/problems-with-generating-a-random-integer-in-c-using-the-modulus-operator/29147682#29147682", "title": "Problems with generating a random integer in C using the modulus operator", "body": "<p>There is nothing wrong in your program. I tested your function and indeed if I add printf(\"%d\\n\", random); to it and if sum is 5, then the value can be either 1, 2, 3, 4 or 5 but nothing else. I don't understand what your problem is, but it is not in the line of code you highlighted. It generates random numbers between 1 (inclusive) and sum (inclusive). However, you didn't provide the full code so it isn't possible to understand from your limited code what the real purpose of the full comp_output function is.</p>\n\n<p>Do note that using the low-order bits of the rand() implementation may not necessarily be a good idea. rand()%2 on many systems provides an alternating sequence 0, 1, 0, 1, 0, 1, 0, 1, ... The real fix is obviously to use a better random number generator such as the Mersenne Twister (<a href=\"http://en.wikipedia.org/wiki/Mersenne_twister\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Mersenne_twister</a>) or PCG (<a href=\"http://www.pcg-random.org/\" rel=\"nofollow\">http://www.pcg-random.org/</a>).</p>\n"}], "owner": {"reputation": 11, "user_id": 4686484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f45bdc42fe019a7423095f18cd7adc?s=128&d=identicon&r=PG&f=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/4686484/julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426776438, "creation_date": 1426699241, "last_edit_date": 1426704030, "question_id": 29128632, "link": "https://stackoverflow.com/questions/29128632/problems-with-generating-a-random-integer-in-c-using-the-modulus-operator", "title": "Problems with generating a random integer in C using the modulus operator", "body": "<p>I've written a function intended to use the modulus operator to output a random number between 1 and a variable named sum and analyze the value based on the range within which the random number falls. I've been running into trouble with the function, though: I used the following line of code to output the random number.</p>\n\n<pre><code>random = rand()%sum + 1\n</code></pre>\n\n<p>However, for some reason, I get extremely high numbers that don't fall within the range. I've seeded the function in the main program before calling the function, so I don't understand why it's not working. Any ideas on how to fix this? Thanks!</p>\n\n<p>EDIT: Here's the function in my program:</p>\n\n<pre><code>int comp_output (int row, int array[][3], int sum) {\n    int random;\n    random = rand()%sum + 1;\n\n    if (random &lt;= array[row][0]) {\n        return 0;\n    }\n    else if (random &gt;= sum - array[row][2] + 1) {\n        return 2;\n    }\n    else {\n        return 1;\n    }\n}\n</code></pre>\n\n<p>The array is initialized before the function is called, so that's not the problem. Does anything look wrong with the function as I've presented it? Thanks to everyone who's helped so far!</p>\n"}, {"tags": ["c", "windows", "gcc"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1426699095, "post_id": 29128560, "comment_id": 46482917, "body": "C is not C++ or Objective-C."}, {"owner": {"reputation": 63, "user_id": 865515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vsV7z.png?s=128&g=1", "display_name": "Gregory", "link": "https://stackoverflow.com/users/865515/gregory"}, "edited": false, "score": 0, "creation_date": 1426699495, "post_id": 29128560, "comment_id": 46483176, "body": "It says &quot;error: too few arguments to function &#39;exit&#39;&quot;. Change exit() to exit(1) for example."}, {"owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "edited": false, "score": 0, "creation_date": 1426699889, "post_id": 29128560, "comment_id": 46483436, "body": "Thanks all , it worked perfectly."}], "answers": [{"tags": [], "owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "is_accepted": true, "score": 2, "last_activity_date": 1426699239, "creation_date": 1426699239, "answer_id": 29128630, "question_id": 29128560, "link": "https://stackoverflow.com/questions/29128560/file-handling-in-c-programming/29128630#29128630", "title": "File Handling in C programming", "body": "<p><code>\\</code> is escape symbol in C, you should use <code>\\\\</code> in your strings, like:</p>\n\n<pre><code>fp=fopen(\"D:\\\\Documents\\\\sample.txt\",\"w\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1426699315, "creation_date": 1426699315, "answer_id": 29128659, "question_id": 29128560, "link": "https://stackoverflow.com/questions/29128560/file-handling-in-c-programming/29128659#29128659", "title": "File Handling in C programming", "body": "<p><code>exit()</code> is in <code>stdlib.h</code> and you don't include this header so there is a error.</p>\n\n<p>Also <code>return</code> is a better option than <code>exit</code> here</p>\n"}, {"tags": [], "owner": {"reputation": 7287, "user_id": 594267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a822bcc4849454cfc43b073bb0b8df6?s=128&d=identicon&r=PG", "display_name": "Vinicius Kamakura", "link": "https://stackoverflow.com/users/594267/vinicius-kamakura"}, "is_accepted": false, "score": 1, "last_activity_date": 1426700251, "creation_date": 1426700251, "answer_id": 29128968, "question_id": 29128560, "link": "https://stackoverflow.com/questions/29128560/file-handling-in-c-programming/29128968#29128968", "title": "File Handling in C programming", "body": "<p>In C, C++, C#, and a bunch of other languages, you can make strings with special characters, such as adding a new line (<code>'\\n'</code>), a tab (<code>'\\t'</code>) and many others.</p>\n\n<p>The convention is to 'escape' them, that is, use a backslash <code>\\</code> and one or more characters to symbolize the character you want. This means that <code>\\</code> is special in a string and you need to use it with care. </p>\n\n<p>In your case, when you want to use a real <code>\\</code> to separate directories, you need to escape it as <code>\\\\</code></p>\n"}], "owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 29128630, "answer_count": 3, "score": 0, "last_activity_date": 1426700251, "creation_date": 1426699047, "last_edit_date": 1426699277, "question_id": 29128560, "link": "https://stackoverflow.com/questions/29128560/file-handling-in-c-programming", "title": "File Handling in C programming", "body": "<p>I am trying to learn C. :) however I am getting this error which I do not understand . Can somebody please explain this to me. I am not able to understand what is causing this issue.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nmain()\n{\n    FILE *fp, *ft;\n    char ch;\n    fp=fopen(\"D:\\Documents\\sample.txt\",\"w\");\n    if (fp ==NULL) \n    {\n        puts(\"cannot open file\");\n        exit();\n    }\n\n    ft=fopen(\"D:\\Documents\\sample - Copy.txt\",\"w\");\n     if (ft ==NULL) \n    {\n        puts(\"cannot open file\");\n        exit();\n    }\n\n    while(1)\n    {\n        ch=fgetc(fp);\n        if (ch== EOF)\n            break;\n        else\n            fputc(ch,ft);\n    }\n    fclose(fp);\n    fclose(ft);\n}\n</code></pre>\n\n<p>Error message I am getting :- </p>\n\n<pre><code>C:\\Users\\LoneRanger\\Desktop\\FileHandling.c: In function 'main':\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:8:11: warning: unknown escape sequenc\ne: '\\D' [enabled by default]\n  fp=fopen(\"D:\\Documents\\sample.txt\",\"w\");\n           ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:8:11: warning: unknown escape sequenc\ne: '\\s' [enabled by default]\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:12:6: warning: incompatible implicit\ndeclaration of built-in function 'exit' [enabled by default]\n      exit();\n      ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:12:6: error: too few arguments to fun\nction 'exit'\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:15:11: warning: unknown escape sequen\nce: '\\D' [enabled by default]\n  ft=fopen(\"D:\\Documents\\sample - Copy.txt\",\"w\");\n           ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:15:11: warning: unknown escape sequen\nce: '\\s' [enabled by default]\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:19:6: warning: incompatible implicit\ndeclaration of built-in function 'exit' [enabled by default]\n      exit();\n      ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:19:6: error: too few arguments to fun\nction 'exit'\n\nC:\\Users\\LoneRanger\\Desktop&gt;gcc C:\\Users\\LoneRanger\\Desktop\\FileHandling.c -o Fi\nleHandling\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c: In function 'main':\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:8:11: warning: unknown escape sequenc\ne: '\\D' [enabled by default]\n  fp=fopen(\"D:/\\Documents/\\sample.txt\",\"w\");\n           ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:8:11: warning: unknown escape sequenc\ne: '\\s' [enabled by default]\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:12:6: warning: incompatible implicit\ndeclaration of built-in function 'exit' [enabled by default]\n      exit();\n      ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:12:6: error: too few arguments to fun\nction 'exit'\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:15:11: warning: unknown escape sequen\nce: '\\D' [enabled by default]\n  ft=fopen(\"D:/\\Documents/\\sample - Copy.txt\",\"w\");\n           ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:15:11: warning: unknown escape sequen\nce: '\\s' [enabled by default]\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:19:6: warning: incompatible implicit\ndeclaration of built-in function 'exit' [enabled by default]\n      exit();\n      ^\nC:\\Users\\LoneRanger\\Desktop\\FileHandling.c:19:6: error: too few arguments to fun\nction 'exit'\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1426698686, "post_id": 29128364, "comment_id": 46482620, "body": "mixing C and C++ is never a good idea.."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1426698720, "post_id": 29128364, "comment_id": 46482639, "body": "Looks like plain C code to me - why the C++ tag, I wonder ?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1426698840, "post_id": 29128364, "comment_id": 46482731, "body": "Your function&#39;s return type is void, so I don&#39;t understand how you want to return it."}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 1, "creation_date": 1426699799, "post_id": 29128364, "comment_id": 46483370, "body": "You don&#39;t <i>want</i> to use strings or you <i>cannot</i> use strings? If it&#39;s the former, you need to lose that mentality."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1426700407, "post_id": 29128364, "comment_id": 46483742, "body": "If you don&#39;t want to use <code>std::string</code>, don&#39;t write C++. In addition to <code>std::string</code>, you should also be using <code>std::vector</code>, <code>std::list</code>, or <code>std::array</code> instead of raw arrays."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1426699003, "creation_date": 1426699003, "answer_id": 29128537, "question_id": 29128364, "link": "https://stackoverflow.com/questions/29128364/return-char-or-passing-array-of-char/29128537#29128537", "title": "return char** or passing array of char*", "body": "<p><code>char* out[10]</code> allocates space for 10 character <em>pointers</em> only.  You read every line into the same location (<code>line</code>), and assign that pointer to each element of the array, so they are all the same.  But you never actually set aside space for this line, much less space for each line independently, which means you are asking for trouble.</p>\n"}, {"comments": [{"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1426700389, "post_id": 29128828, "comment_id": 46483730, "body": "If you extended your answer with the description of the memory allocation for hops array, i&#39;d upvote it"}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "reply_to_user": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1426700976, "post_id": 29128828, "comment_id": 46484077, "body": "Thanks for the suggestion @G&#233;zaT&#246;r&#246;k, I&#39;m not very up on my C knowledge, hopefully I didn&#39;t make any mistakes though :-)"}, {"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1426755728, "post_id": 29128828, "comment_id": 46504588, "body": "Seems fair enough :) +1"}], "tags": [], "owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1426700930, "last_edit_date": 1426700930, "creation_date": 1426699856, "answer_id": 29128828, "question_id": 29128364, "link": "https://stackoverflow.com/questions/29128364/return-char-or-passing-array-of-char/29128828#29128828", "title": "return char** or passing array of char*", "body": "<p>Apart from not allocating memory for <code>line</code>, you are doing what is called a shallow copy in this line:</p>\n\n<pre><code>hops[i] = line;\n</code></pre>\n\n<p>What it means is that you are copying the value of the pointer <code>line</code> to <code>hops[i]</code>, so at the end of the loop, all elements of <code>hops</code> are pointing to the same location in memory: wherever <code>line</code> is pointing.</p>\n\n<p>What you need is a deep copy. Assuming you have allocated memory for <code>hops</code> before calling <code>Traceroute</code>, you can use <code>strcpy</code>:</p>\n\n<pre><code>strcpy(hops[i], line);\n</code></pre>\n\n<p>since you don't want to use <code>std::string</code>.</p>\n\n<p>Again, going back to start, you need to allocate enough memory for <code>line</code> to be able to hold a line of your file. Something like:</p>\n\n<pre><code>line = (char *) malloc(MAX_LINE_LENGTH);\n</code></pre>\n\n<p>and then, at the very end of your function:</p>\n\n<pre><code>free(line);\n</code></pre>\n\n<p>EDIT: Adding memory allocation for <code>hops</code>:</p>\n\n<p>I'm assuming you want to do this outside <code>Traceroute</code>. So, before calling that function, use:</p>\n\n<pre><code>int i = 0;\nconst int nlines = 10;\nchar *hops[nlines];\nfor(i = 0; i &lt; nlines; ++i)\n    hops[i] = (char *) malloc(MAX_LINE_LENGTH);\n</code></pre>\n\n<p>And then, when you are done with the array <code>hops</code>, you need to free the memory:</p>\n\n<pre><code>for(i = 0; i &lt; nlines; ++i)\n    free(hops[i]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 252, "user_id": 4683326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyfLo.jpg?s=128&g=1", "display_name": "Gary Kaizer", "link": "https://stackoverflow.com/users/4683326/gary-kaizer"}, "is_accepted": false, "score": 0, "last_activity_date": 1426700596, "last_edit_date": 1426700596, "creation_date": 1426699939, "answer_id": 29128859, "question_id": 29128364, "link": "https://stackoverflow.com/questions/29128364/return-char-or-passing-array-of-char/29128859#29128859", "title": "return char** or passing array of char*", "body": "<p>You want to dynamically allocate and copy each char sequence:</p>\n\n<p>Thus:</p>\n\n<pre><code>hops[i] = line;\n</code></pre>\n\n<p>Becomes:</p>\n\n<pre><code>size_t nSize = sizeof(char) * read; //Get the byte size of the data\nhops[i] = malloc(nSize); //Allocate the proper number of chars\nmemcpy(hops[i], line, nSize); //Copy the data to that hops entry\n</code></pre>\n\n<p>This is because the data at line gets overwritten each iteration of the loop and since hops[i] points to that same area the data at hops[i] gets overwritten.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 0, "last_activity_date": 1426700659, "creation_date": 1426700659, "answer_id": 29129106, "question_id": 29128364, "link": "https://stackoverflow.com/questions/29128364/return-char-or-passing-array-of-char/29129106#29129106", "title": "return char** or passing array of char*", "body": "<p>The <code>getline</code> function can allocate memory for you, but <strong>only</strong> if you set <code>line</code> to NULL and <code>len</code> to 0 before each call. So the <code>Traceroute</code> function should look like this</p>\n\n<pre><code>int Traceroute( char *hops[], int size )\n{\n    char *line;\n    size_t len;\n\n    int i;\n    for ( i = 0; i &lt; size; i++ )\n    {\n        line = NULL;\n        len = 0;\n        if ( getline( &amp;line, &amp;len, fp ) &lt; 0 )\n            break;\n\n        hops[i] = line;\n    }\n\n    return i;\n}\n</code></pre>\n\n<p>and should be called like this</p>\n\n<pre><code>int main( void )\n{\n    char *hops[10];\n\n    int count = Traceroute( hops, 10 );\n    for ( int i = 0; i &lt; count; i++ )\n        printf( \"%s\", hops[i] );\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4228451, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7c75467c51cf0ebdf70e5278a208fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto", "link": "https://stackoverflow.com/users/4228451/alberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 29129106, "answer_count": 4, "score": 0, "last_activity_date": 1426701533, "creation_date": 1426698461, "question_id": 29128364, "link": "https://stackoverflow.com/questions/29128364/return-char-or-passing-array-of-char", "title": "return char** or passing array of char*", "body": "<p>I would like to get help in the following:</p>\n\n<pre><code>void Traceroute (char * hops[]){\n   char* line = NULL;\n   size_t len = 0;\n   ssize_t read;\n   int i = 0;\n   while ((read = getline(&amp;line, &amp;len, fp)) != -1) {\n        hops[i] = line;\n       i++;\n   }\n   printf (\"value1: %s value2: %s\\n\",hops[0],hops[1]);\n}\n</code></pre>\n\n<p>what I actually get is the latest value added to the array.!! hops\nand I tried in main to define:</p>\n\n<pre><code>char* out[10]\n</code></pre>\n\n<p>and pass it but the same I'm always getting the same output.\nAny suggestions ??\nif you could help me please as well on how can I return char ** from a function ?</p>\n\n<p>*** I don't want to use strings</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1426698329, "post_id": 29128242, "comment_id": 46482421, "body": "Regarding <code>user_input()</code>. For one thing, you shouldn&#39;t have executable code in a header file. For another, you are trying the use the address of the function itself, instead of a providing a function argument."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1426698771, "post_id": 29128242, "comment_id": 46482684, "body": "<a href=\"http://stackoverflow.com/a/28973549/3386109\">Example user input function</a>."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2645886, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6ea5b1f18ddbd60d244dd979747a3e94?s=128&d=identicon&r=PG", "display_name": "user2645886", "link": "https://stackoverflow.com/users/2645886/user2645886"}, "edited": false, "score": 0, "creation_date": 1426700719, "post_id": 29128418, "comment_id": 46483922, "body": "Thanks for your help, i have replied to my own thread instead of commenting to your comment. so i hope my post will be visible to you."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 43, "user_id": 2645886, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6ea5b1f18ddbd60d244dd979747a3e94?s=128&d=identicon&r=PG", "display_name": "user2645886", "link": "https://stackoverflow.com/users/2645886/user2645886"}, "edited": false, "score": 1, "creation_date": 1426700821, "post_id": 29128418, "comment_id": 46483987, "body": "@user2645886 Yeah you really shouldn&#39;t do that. I appended your post to your question as an edit."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 4, "last_activity_date": 1426700517, "last_edit_date": 1426700517, "creation_date": 1426698650, "answer_id": 29128418, "question_id": 29128242, "link": "https://stackoverflow.com/questions/29128242/function-prototype-in-c-compile-error/29128418#29128418", "title": "function prototype in c, compile error", "body": "<p><code>user_input()</code> doesn't return anything, since it's declared <code>void</code>.</p>\n\n<p>But you're trying to use the non-existing return value: <code>switch(user_input())</code>.</p>\n\n<p>This causes <em>undefined behavior</em>.</p>\n\n<hr>\n\n<p>Additionally, this:</p>\n\n<pre><code>scanf(\"%d\", &amp;user_input);\n</code></pre>\n\n<p>tries to read an <code>int</code> from <code>stdin</code> and store it in the memory address of the <code>user_input</code> function. Not a good idea. Again, undefined behavior.</p>\n\n<hr>\n\n<p>What you probably want the function to look like:</p>\n\n<pre><code>int user_input(){\n    int number; // store user input to this variable\n    scanf(\"%d\", &amp;number);\n    return number; // return the user input so that it can be used outside the function\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 168, "user_id": 1262984, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/472e2d87cf648188ce895f84a17a5034?s=128&d=identicon&r=PG", "display_name": "sorton9999", "link": "https://stackoverflow.com/users/1262984/sorton9999"}, "is_accepted": false, "score": 0, "last_activity_date": 1426698727, "creation_date": 1426698727, "answer_id": 29128447, "question_id": 29128242, "link": "https://stackoverflow.com/questions/29128242/function-prototype-in-c-compile-error/29128447#29128447", "title": "function prototype in c, compile error", "body": "<p>If you have header files declared in a previous header file.  You will not need to include it again in the subsequent included header files.  I tend to not include header files in my local *.h files just for that reason.  It avoids circular includes if you declare your includes in the .c files as much as possible.</p>\n\n<p>Your scanf function has as its second argument a function of type void(), void().  Meaning it takes no arguments and returns nothing or \"void\".  I think you want your user_input to be a variable of type 'double' that is filled somewhere, maybe via some user input from the console using a call to 'gets' from stdin.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 43, "user_id": 2645886, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6ea5b1f18ddbd60d244dd979747a3e94?s=128&d=identicon&r=PG", "display_name": "user2645886", "link": "https://stackoverflow.com/users/2645886/user2645886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496957890, "creation_date": 1426698102, "last_edit_date": 1496957890, "question_id": 29128242, "link": "https://stackoverflow.com/questions/29128242/function-prototype-in-c-compile-error", "title": "function prototype in c, compile error", "body": "<p>So am trying to learn c by-myself (basically not having any previous experience in any programming language) and now I have some issues with prototyping some of my functions to use in header files.</p>\n\n<p>For the sake of learning I only use the &lt; stdio.h > lib and only use the printf and scanf functions and for now it only prints to console.</p>\n\n<p>I was able to code a working prototype function for my menu that only uses the printf function but the scanf gives me more issues and it just refuses to compile and am having trouble to see where my thinking error is.</p>\n\n<p>my main program: </p>\n\n<pre><code>#include \"menu.h\"\n#include \"circlefunctions.h\"\n#include \"input.h\"\n\nint main(void){\n\n    float diameter;\n    double straal;\n    double oppervlakte;\n    double omtrek;\n\n\n        while(1){\n\n            menu();\n            user_input();\n            system(\"cls\");\n\n        switch(user_input())\n        {\n\n    case 1:\n\n        printf(\" ----------------------------------------\\n\");\n        printf(\" Typ de diameter van de cirkel: \");\n        scanf(\"%g\", &amp;diameter);\n        printf(\" ----------------------------------------\\n\");\n\n        straal = diameter / 2;\n        oppervlakte = PI * (straal * straal);\n        omtrek = 2 * PI * straal;\n\n        printf(\" De straal = %f \\n\\n\", straal  );\n        printf(\" De oppervlakte = %f \\n\\n\" , oppervlakte);\n        printf(\" De omtrek = %f \\n\" , omtrek);\n        printf(\" ----------------------------------------\\n\");\n\n        break;\n\n    case 2:\n        return(0);\n\n    case 3:\n        return(0);\n\n    case 9:\n        return(0);\n\n    case 0:\n        return(0);\n        }\n    }\n return 0;\n}\n</code></pre>\n\n<p>and the stubborn header: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid user_input();\n\n    void user_input(){\n        scanf(\"%d\", &amp;user_input);\n  }\n</code></pre>\n\n<p>The error that I get while trying to compile is in input.h \nthe part with;   scanf(\"%d\", &amp;user_input);</p>\n\n<p>errorcode: format '%d' expects argument type of 'int <em>', but argument 2 has type 'void (</em>) ()'.\nAnd I also got an error on the switch in the main program that the switch quantity is not an integer. I suspect that this error is related but am not sure. I still have to debug that part but if anyone is willing to point me to the right documentation i would much appreciate it.</p>\n\n<p>And a second question that I have is also related to headers:  I have &lt; stdio.h > already included in \"menu.h\". Would I need to include it again in \"input.h\"?\n(if i understand correctly how the preprocessor works i should not have to include it but I can't find anywhere where this is explained in simple terms unfortunately.)</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Thank you all for providing valuable information.</p>\n\n<p>@zenith Thank you for your example. I hope you don't mind me asking some more.</p>\n\n<p>I have replaced my code with yours in the \"input.h\" and it will compile and run now. However the behavior has changed. For some unclear reason i now have to input the choice twice before the program accepts my input. So the 1st input gets ignored after an enter and it will only accept the 2nd input.</p>\n\n<p>Could you perhaps point me in the direction what causes this bug? or perhaps point me to some documentation where this is explained? I don't want to take up to much of you valuable time of-course.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>Thanks for the reply and info. I got the bug out and it is working as intended(that was silly of me not to see that).\nAnd to the rest who replied:  Ill take your information of-course and also learn from that. Thank you all!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1426698192, "post_id": 29128200, "comment_id": 46482343, "body": "What&#39;s with the macros? What do they do? What are the values of the global variables? What result would you expect? What is the actual result? Have you tried stepping through the function line by line in a debugger?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426698275, "post_id": 29128200, "comment_id": 46482391, "body": "But most importantly, you don&#39;t initialize <code>set</code> anywhere, so its value is <i>indeterminate</i> and using it will lead to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. And do you initialize all other local variables before you use them?"}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 1, "creation_date": 1426698323, "post_id": 29128200, "comment_id": 46482417, "body": "FIX YOUR FORMATTING! It hurts in the eyes. (And probably hides your bug)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1426698743, "post_id": 29128200, "comment_id": 46482664, "body": "And use <i>proper naming</i>, something which tells what the variables, functions and macros are for or how they are used."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1426698847, "post_id": 29128200, "comment_id": 46482737, "body": "The impenetrable macro names and magic numbers make this code impossible to read."}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1426699273, "post_id": 29128200, "comment_id": 46483039, "body": "That is a giant pile of unmaintainability."}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 4432207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kuTX2SzdWHQ/AAAAAAAAAAI/AAAAAAAAACE/DCqH20h_6Fs/photo.jpg?sz=128", "display_name": "Kriszti&#225;n Kis", "link": "https://stackoverflow.com/users/4432207/kriszti%c3%a1n-kis"}, "edited": false, "score": 0, "creation_date": 1426699110, "post_id": 29128548, "comment_id": 46482922, "body": "Also, i have to add, that your code naming is realy hard to read. Try to use  tabbing, formatting and proper naming. Also, you should share the additional methods as well."}], "tags": [], "owner": {"reputation": 68, "user_id": 4432207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kuTX2SzdWHQ/AAAAAAAAAAI/AAAAAAAAACE/DCqH20h_6Fs/photo.jpg?sz=128", "display_name": "Kriszti&#225;n Kis", "link": "https://stackoverflow.com/users/4432207/kriszti%c3%a1n-kis"}, "is_accepted": false, "score": 0, "last_activity_date": 1426699025, "creation_date": 1426699025, "answer_id": 29128548, "question_id": 29128200, "link": "https://stackoverflow.com/questions/29128200/digital-clock-am-pm-display-problems-edit-here-is-the-whole-thing/29128548#29128548", "title": "digital clock am/pm display problems/ EDIT: here is the whole thing", "body": "<p>The problem is the following.</p>\n\n<p>If your set variable contains anything but 112 then your AP is set to 97 and properly handled as AM formatted.</p>\n\n<p>But!</p>\n\n<p>Even if your set is equals 112, you do not set your AP variable to 112.</p>\n\n<p>A simple modification in the code would solve your problem:</p>\n\n<pre><code>if (set!=112)\n{\n AP = 97;\n }\nelse\n{\n  AP = 112;\n}\n</code></pre>\n\n<p>This way, you will set your AP to 112 and properly write P before you write M.</p>\n"}], "owner": {"reputation": 3, "user_id": 4684365, "user_type": "registered", "profile_image": "https://graph.facebook.com/964047223620608/picture?type=large", "display_name": "Nevin Rae Orbigozo", "link": "https://stackoverflow.com/users/4684365/nevin-rae-orbigozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1426733319, "creation_date": 1426697980, "last_edit_date": 1426733319, "question_id": 29128200, "link": "https://stackoverflow.com/questions/29128200/digital-clock-am-pm-display-problems-edit-here-is-the-whole-thing", "title": "digital clock am/pm display problems/ EDIT: here is the whole thing", "body": "<p><code>#include&lt;conio.h&gt;</code>\n<code>#include&lt;process.h&gt;</code>\n<code>#include&lt;stdio.h&gt;</code>\n<code>#include&lt;windows.h&gt;</code></p>\n\n<p><code>int sun()</code>\n<code>void gotoxy(int x, int y);</code>\n<code>int EV(int i,int x,int y);</code>\n<code>int h,m,s;</code>\n<code>char ch='p';</code>\n<code>void Z (int x,int y);</code>\n<code>void O (int x,int y);</code>\n<code>void T (int x,int y);</code>\n<code>void TE (int x,int y);</code>\n<code>void F (int x,int y);</code>\n<code>void FE (int x,int y);</code>\n<code>void S (int x,int y);</code>\n<code>void SN (int x,int y);</code>\n<code>void E (int x,int y);</code>\n<code>void N (int x, int y);</code>\n<code>void TN (int x,int y);</code>\n<code>void AA (int x,int y);</code>\n<code>void PP (int x,int y);</code>\n<code>void MM (int x,int y);</code>\n<code>void CC (int x,int y);</code></p>\n\n<p><code>main()</code>\n<code>{</code>\n      <code>int set;</code>\n<code>void watch();</code>\n<code>void main_menu();</code></p>\n\n<p><code>main_menu();</code>\n<code>watch();</code></p>\n\n<p><code>while(1)</code>\n<code>{</code>\n<code>if(kbhit())</code>\n<code>ch=getch();</code>\n<code>if(ch=='s'||ch=='S')</code>\n<code>break;</code>\n<code>if(ch=='e'||ch=='E')</code>\n<code>exit(0);</code>\n<code>}</code></p>\n\n<p><code>while(1)</code>\n<code>{</code>\n<code>watch();</code>\n<code>sleep(1000);</code>\n<code>if(kbhit())</code>\n<code>ch=getch();</code></p>\n\n<p><code>if(ch=='r'||ch=='R')</code>\n<code>{</code>\n<code>main_menu();</code>\n<code>watch();</code></p>\n\n<p><code>while(1)</code>\n<code>{</code>\n<code>if(kbhit())</code>\n<code>ch=getch();</code>\n<code>if(ch=='s'||ch=='S')</code>\n<code>break;</code>\n<code>if(ch=='e'||ch=='E')</code>\n<code>exit(0);</code>\n<code>}</code>\n<code>}</code>\n<code>else</code>\n<code>if(ch=='p'||ch=='P')</code>\n<code>while(1)</code>\n<code>{\n</code>if(kbhit())<code>\n</code>ch=getch();<code>\n</code>if(ch=='s'||ch=='S')<code>\n</code>break;<code>\n</code>if(ch=='e'||ch=='E')<code>\n</code>exit(0);<code>\n</code>if(ch=='r'||ch=='R')<code>\n</code>{<code>\n</code>ch='c';<code>\n</code>main_menu();<code>\n</code>watch();<code>\n</code>}<code>\n</code>}<code>\n</code>else<code>\n</code>if(ch=='e'||ch=='E')<code>\n</code>exit(0);`</p>\n\n<p><code>if(s!=59)</code>\n<code>s++;</code>\n<code>else</code>\n<code>{</code>\n<code>s=0;</code>\n<code>if(m!=59)</code>\n<code>m++;</code>\n<code>else</code>\n<code>{</code>\n<code>m=0;</code>\n<code>if(h!=12)</code>\n<code>h++;</code>\n<code>else</code>\n<code>{</code>\n<code>h=1;</code>\n<code>}</code>\n<code>}</code>\n<code>}</code>\n<code>}</code>\n<code>}</code></p>\n\n<p><code>void watch()</code>\n<code>{</code>\n    <code>int ampm,AP,OS,TS,x,y;</code></p>\n\n<pre><code>` if (ampm!=112)`\n` {`\n` AP = 97;`\n    }`\n</code></pre>\n\n<p><code>else</code>\n  <code>{</code>\n       <code>AP=112;</code>\n       <code>}</code></p>\n\n<p><code>system(\"cls\");</code></p>\n\n<pre><code>            `TS = h/10;`\n           ` OS = h%10;`\n           ` x =12;`\n          `  y = 5;`\n  `EV(TS,x,y);`\n  `x+=6;`\n ` EV(OS,x,y);`\n ` x+=6;`\n ` CC(x,y);`\n ` TS = m/10;`\n ` OS = m%10;`\n ` x+=5;`\n  `EV(TS,x,y);`\n  `x+=6;`\n ` EV(OS,x,y);`\n ` x+=6;`\n ` CC(x,y);`\n ` TS = s/10;`\n ` OS = s%10;`\n  `x+=5;`\n ` EV(TS,x,y);`\n  `x+=6;`\n ` EV(OS,x,y);`\n  `x+=6; `\n\n `  if (h==12)`\n</code></pre>\n\n<p><code>{\n</code> if (AP==112)<code>\n</code> AP=97;`</p>\n\n<pre><code>     ` else if (AP==97)`\n          ` AP=112;`\n         `  }   `  \n</code></pre>\n\n<p><code>if (AP==97)</code>\n   <code>AA(x,y);</code>\n <code>else if (AP==112)</code>\n    <code>PP(x,y); \n</code>x+=5;<code>\n</code> MM(x,y);`</p>\n\n<p><code>printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\t\\t\\t\\t\\t\\t\\tPress Key\");</code>\n<code>printf(\"\\n\\t\\t\\t\\t\\t\\t\\t---------\");</code>\n<code>printf(\"\\n\\t\\t\\t\\t\\t\\t\\ts -&gt; Start\");</code>\n<code>printf(\"\\n\\t\\t\\t\\t\\t\\t\\tp -&gt; Pause\");</code>\n<code>printf(\"\\n\\t\\t\\t\\t\\t\\t\\tr -&gt; Reset\");</code>\n<code>printf(\"\\n\\t\\t\\t\\t\\t\\t\\te -&gt; Exit\");</code></p>\n\n<p><code>}\n</code>void main_menu()<code>\n</code>{\n    <code>int ampm;</code>\n     <code>system(\"cls\");</code>\n    <code>printf(\"WELCOME TO THE TIME MACHINE!!\");</code>\n    <code>printf(\"\\nPlease input the desired time you want to travel to:\");</code>\n     <code>printf(\"\\nHour:\");</code>\n     <code>scanf(\"%d\",&amp;h);</code>\n    <code>printf(\"\\nMinute:\");</code>\n     <code>scanf(\"%d\",&amp;m);</code>\n    <code>printf(\"\\nSecond:\");</code>\n    <code>scanf(\"%d\",&amp;s);</code>\n    <code>ampm=sun();</code>\n   <code>system(\"cls\");</code>\n   <code>}</code>\n<code>void Z (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\" ***\");</code>\n    <code>gotoxy(x,y+1);printf(\"*   *\");</code>\n     <code>gotoxy(x,y+2);printf(\"*   *\");</code>\n    <code>gotoxy(x,y+3);printf(\"*   *\");</code>\n    <code>gotoxy(x,y+4);printf(\" ***\");</code>\n<code>}</code>   </p>\n\n<p><code>void O (int x,int y)</code>\n<code>{</code>\n    <code>gotoxy(x,y)  ;printf(\"***  \\n\");</code>\n     <code>gotoxy(x,y+1);printf(\"  *  \\n\");</code>\n     <code>gotoxy(x,y+2);printf(\"  *  \\n\");</code>\n     <code>gotoxy(x,y+3);printf(\"  *  \\n\");</code>\n     <code>gotoxy(x,y+4);printf(\"*****\\n\");</code>\n<code>}</code></p>\n\n<p><code>void T (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\"*****  \\n\");</code>\n     <code>gotoxy(x,y+1);printf(\"    * \\n\");</code>\n     <code>gotoxy(x,y+2);printf(\"***** \\n\");</code>\n     <code>gotoxy(x,y+3);printf(\"*       \\n\");</code>\n     <code>gotoxy(x,y+4);printf(\"*****  \\n\");</code>\n<code>}</code></p>\n\n<p><code>void TE (int x,int y)</code>\n<code>{</code>\n    <code>gotoxy(x,y)  ;printf(\"*****  \\n\");</code>\n     <code>gotoxy(x,y+1);printf(\"    * \\n\");</code>\n     <code>gotoxy(x,y+2);printf(\"  *** \\n\");</code>\n     <code>gotoxy(x,y+3);printf(\"    * \\n\");</code>\n    <code>gotoxy(x,y+4);printf(\"***** \\n\");</code>\n<code>}</code> </p>\n\n<p><code>void F (int x,int y)</code>\n<code>{</code>\n    <code>gotoxy(x,y)  ;printf(\"*   * \\n\");</code>\n     <code>gotoxy(x,y+1);printf(\"*   * \\n\");</code>\n    <code>gotoxy(x,y+2);printf(\"***** \\n\");</code>\n    <code>gotoxy(x,y+3);printf(\"    * \\n\");</code>\n    <code>gotoxy(x,y+4);printf(\"    * \\n\");</code>\n`} </p>\n\n<p><code>void FE (int x,int y)\n</code>{\n     <code>gotoxy(x,y)  ;printf(\"*****  \\n\");</code>\n    <code>gotoxy(x,y+1);printf(\"*    \\n\");</code>\n    <code>gotoxy(x,y+2);printf(\"*****  \\n\");</code>\n     <code>gotoxy(x,y+3);printf(\"    * \\n\");</code>\n   <code>gotoxy(x,y+4);printf(\"*****  \\n\");</code>\n<code>}</code></p>\n\n<p><code>void S (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\" ***  \\n\");</code>\n    <code>gotoxy(x,y+1);printf(\"*     \\n\");</code>\n    <code>gotoxy(x,y+2);printf(\"***** \\n\");</code>\n    <code>gotoxy(x,y+3);printf(\"*   * \\n\");</code>\n     <code>gotoxy(x,y+4);printf(\" ***  \\n\");</code>\n<code>}</code></p>\n\n<p><code>void SN (int x, int y)</code>\n<code>{</code>\n    <code>gotoxy(x,y)  ;printf(\"***** \\n\");</code>\n    <code>gotoxy(x,y+1);printf(\"    * \\n\");</code>\n     <code>gotoxy(x,y+2);printf(\"   * \\n\");</code>\n    <code>gotoxy(x,y+3);printf(\"  * \\n\");</code>\n    <code>gotoxy(x,y+4);printf(\" *  \\n\");</code>\n<code>}</code></p>\n\n<p><code>void E (int x,int y)</code>\n<code>{</code>\n    <code>gotoxy(x,y)  ;printf(\" ***  \\n\");</code>\n   <code>gotoxy(x,y+1);printf(\"*   * \\n\");</code>\n     <code>gotoxy(x,y+2);printf(\"***** \\n\");</code>\n     <code>gotoxy(x,y+3);printf(\"*   * \\n\");</code>\n     <code>gotoxy(x,y+4);printf(\" ***  \\n\");</code>\n<code>}</code>  </p>\n\n<p><code>void N (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\" ***  \\n\");</code>\n     <code>gotoxy(x,y+1);printf(\"*   * \\n\");</code>\n     <code>gotoxy(x,y+2);printf(\"***** \\n\");</code>\n    <code>gotoxy(x,y+3);printf(\"    * \\n\");</code>\n     <code>gotoxy(x,y+4);printf(\" ***  \\n\");</code>\n<code>}</code></p>\n\n<p><code>void AA (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\" ***  \\n\");</code>\n     <code>gotoxy(x,y+1);printf(\"*   * \\n\");</code>\n     <code>gotoxy(x,y+2);printf(\"***** \\n\");</code>\n     <code>gotoxy(x,y+3);printf(\"*   * \\n\");</code>\n     <code>gotoxy(x,y+4);printf(\"*   * \\n\");</code>\n<code>}</code>  </p>\n\n<p><code>void PP (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\"***** \\n\");</code>\n   <code>gotoxy(x,y+1);printf(\"*   * \\n\");</code>\n    <code>gotoxy(x,y+2);printf(\"***** \\n\");</code>\n    <code>gotoxy(x,y+3);printf(\"*     \\n\");</code>\n     <code>gotoxy(x,y+4);printf(\"*     \\n\");</code>\n<code>}</code>  </p>\n\n<p><code>void MM (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\" *   * \\n\");</code>\n     <code>gotoxy(x,y+1);printf(\" ** ** \\n\");</code>\n    <code>gotoxy(x,y+2);printf(\" * * * \\n\");</code>\n    <code>gotoxy(x,y+3);printf(\" *   * \\n\");</code>\n    <code>gotoxy(x,y+4);printf(\" *   * \\n\");</code>\n<code>}</code></p>\n\n<p><code>void CC (int x,int y)</code>\n<code>{</code>\n     <code>gotoxy(x,y)  ;printf(\" \\n \");</code>\n    <code>gotoxy(x,y+1);printf(\" ** \\n\");</code>\n    <code>gotoxy(x,y+2);printf(\" \\n \");</code>\n     <code>gotoxy(x,y+3);printf(\" ** \\n\");</code>\n    <code>gotoxy(x,y+4);printf(\" \\n \");</code>\n<code>}</code><br>\n<code>int EV(int i,int x,int y)</code>\n<code>{</code>\n <code>switch(i)</code>\n <code>{</code>\n        <code>case 0:</code>\n               <code>{</code>\n                     <code>Z(x,y); break;}</code>\n          <code>case 1:</code>\n              <code>{</code>\n                       <code>O(x,y); break;}</code>\n         <code>case 2:</code>\n              <code>{</code>\n                       <code>T(x,y); break;}</code>\n         <code>case 3:</code>\n              <code>{</code>\n                      <code>TE(x,y); break;}</code>\n         <code>case 4:</code>\n              <code>{</code>\n                    <code>F(x,y); break;}</code>\n          <code>case 5:</code>\n              <code>{</code>\n                      <code>FE(x,y); break;}</code>\n          <code>case 6:</code>\n               <code>{</code>\n                      <code>S(x,y); break;}</code>\n          <code>case 7:</code>\n               <code>{</code>\n                      <code>SN(x,y); break;}</code>\n          <code>case 8:</code>\n               <code>{</code>\n                      <code>E(x,y); break;}</code>\n          <code>case 9:</code>\n              <code>{</code>\n                      <code>N(x,y); break;}</code>\n<code>}</code><br>\n<code>}</code>\n<code>void gotoxy(int x, int y)</code>\n<code>{</code>\n    <code>COORD coord;</code>\n     <code>coord.X = x; coord.Y = y;</code>\n     <code>SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);</code>\n<code>}</code>\n<code>int sun()</code>\n<code>{</code>\n <code>int key,ampm;</code>\n       <code>gotoxy(23,14);printf(\"\\n Press A for AM\");</code>\n       <code>gotoxy(27,15);printf(\"\\n Press P for PM\");</code>\n       <code>if(kbhit())</code>\n                  <code>if(key=getch()=='a')ampm = 97;</code>\n                 <code>if(key=getch()=='p')ampm = 112;</code>\n                <code>return ampm;</code>\n                  <code>}</code></p>\n\n<p>when I input the time to be 11:59:59AM it will display properly and will go 12:00:00PM when I would start the clock. but when I input 11:59:59PM only M would display and when start the clock it will display 11:59:59AM and will go to PM.\nsorry new to programming.</p>\n"}, {"tags": ["c", "windows", "process", "stdin"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1426698272, "post_id": 29128140, "comment_id": 46482388, "body": "You have to redirect the STDIN of the new process you are creating, then you can write to it. MSDN has an example of exactly that: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499.aspx\" rel=\"nofollow noreferrer\">Creating a Child Process with Redirected Input and Output</a>."}, {"owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1426699019, "post_id": 29128140, "comment_id": 46482864, "body": "@RemyLebeau Thanks. Is there a way to use <code>write()</code> with the pipe so that I don&#39;t have to rewrite larger parts of the code am trying to port?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1426699439, "post_id": 29128140, "comment_id": 46483145, "body": "Use <a href=\"https://msdn.microsoft.com/en-us/library/bdts1c9x.aspx\" rel=\"nofollow noreferrer\"><code>_open_osfhandle()</code></a> to associate a Win32 <code>HANDLE</code> with a C-style file descriptor.  Otherwise, stop using <code>write()</code> on Windows and use <code>WriteFile()</code> instead."}], "owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1426698590, "creation_date": 1426697867, "last_edit_date": 1426698590, "question_id": 29128140, "link": "https://stackoverflow.com/questions/29128140/how-to-write-to-the-standard-input-of-a-windows-process", "title": "How to write to the standard input of a Windows process?", "body": "<p>I run another executable as a child process with <code>CreateProcess()</code>. On Linux, I can just <code>read()</code> from a file and <code>write()</code> to the standard input of the process (or use <code>sendfile()</code>.) How can I do that on Windows?</p>\n"}, {"tags": ["c", "decimal"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 1, "creation_date": 1426698102, "post_id": 29128014, "comment_id": 46482286, "body": "The full source helps, especially when it is this short."}], "answers": [{"comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1426697794, "post_id": 29128073, "comment_id": 46482085, "body": "But by default it should be 6. <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">&quot;For a, A, e, E, f and F specifiers: this is the number of digits to be printed after the decimal point (by default, this is 6).&quot;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1426697825, "post_id": 29128073, "comment_id": 46482109, "body": "@clcto I was just coming to that - the fault must lie in the algorithm."}, {"owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 0, "creation_date": 1426708509, "post_id": 29128073, "comment_id": 46488631, "body": "I had a little look at this just to get a feel for what&#39;s required to get the world record. If I used say 9 decimal places in my algorithm then the result was only accurate to say 6 digits."}, {"owner": {"reputation": 69, "user_id": 1091614, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1947c4da48d4e73ce48f933d5e755396?s=128&d=identicon&r=PG", "display_name": "DCo", "link": "https://stackoverflow.com/users/1091614/dco"}, "edited": false, "score": 0, "creation_date": 1429461405, "post_id": 29128073, "comment_id": 47598475, "body": "This was the answer. It only was 3 decimal places because so few points were tested."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1426697681, "creation_date": 1426697681, "answer_id": 29128073, "question_id": 29128014, "link": "https://stackoverflow.com/questions/29128014/loss-of-precision-on-decimal-possible-formatting-issue-c-programming-language/29128073#29128073", "title": "Loss of precision on decimal, possible formatting issue? C programming language", "body": "<p>You can specify 6 decimal places like this</p>\n\n<pre><code>printf(\"\\n\\nPi: %.6lf\", pi);\n</code></pre>\n\n<p>Although as @clcto commented, that is the default.</p>\n\n<p>Perhaps the rounding of 3 decimal places is because 1000 points are tested.</p>\n"}, {"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 3, "last_activity_date": 1426697953, "creation_date": 1426697953, "answer_id": 29128185, "question_id": 29128014, "link": "https://stackoverflow.com/questions/29128014/loss-of-precision-on-decimal-possible-formatting-issue-c-programming-language/29128185#29128185", "title": "Loss of precision on decimal, possible formatting issue? C programming language", "body": "<p>Nothing is going wrong here. You are sampling 1000 points chosen at random and then calculating \u03c0 with the following formula:</p>\n\n<pre><code>double pi = 4.0 * (double)insideCircle / (double)points;\n</code></pre>\n\n<p>Since <code>points</code> is equal to 1000, you will get a result with three places of decimals.</p>\n"}], "owner": {"reputation": 69, "user_id": 1091614, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1947c4da48d4e73ce48f933d5e755396?s=128&d=identicon&r=PG", "display_name": "DCo", "link": "https://stackoverflow.com/users/1091614/dco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 29128073, "answer_count": 2, "score": 1, "last_activity_date": 1426698082, "creation_date": 1426697533, "last_edit_date": 1426698082, "question_id": 29128014, "link": "https://stackoverflow.com/questions/29128014/loss-of-precision-on-decimal-possible-formatting-issue-c-programming-language", "title": "Loss of precision on decimal, possible formatting issue? C programming language", "body": "<p>I have an assignment that requires us to calculate pi by determining whether or not a point is inside a circle or outside it. </p>\n\n<p>I have the assignment done, and it works great - except my answer is always rounded after the 3rd decimal point. Other classmates have precision up to 6 decimal points, and I'd like to know where I'm going wrong. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n  int square = 10; //this is the size of the square that contains the circle\n  int points = 1000; //this is how many points to test (how many times to run the loop)\n  double randX;\n  double randY;\n  int insideCircle = 0;\n  int outsideCircle = 0;\n  srand(time(NULL));\n\n  double radius = square / 2.0;\n  for (int i = 0; i &lt; points; i++) {\n    randX = ((double)rand())/RAND_MAX * square;\n    randY = ((double)rand())/RAND_MAX * square;\n\n    if (( (pow(randX - radius,2.0)) + (pow(randY - radius,2.0))) &lt; pow(radius,2.0)) {\n      insideCircle++;\n    } else {\n      outsideCircle++;\n    }\n\n  }\n\n  double pi = 4.0 * (double)insideCircle / (double)points;\n\n  printf(\"\\n\\nPi: %lf\", pi);\n  return 0;\n}\n</code></pre>\n\n<p>I assume my error lies in the formatting of my last print statement, but I can't seem to nail it down!</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c", "printf", "long-long"], "comments": [{"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426701615, "post_id": 29127854, "comment_id": 46484491, "body": "Didn&#39;t your compiler warn about that?"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1426697679, "last_edit_date": 1592644375, "creation_date": 1426697237, "answer_id": 29127888, "question_id": 29127854, "link": "https://stackoverflow.com/questions/29127854/impossible-to-print-a-long-long-integer-in-c/29127888#29127888", "title": "Impossible to print a long long integer in C", "body": "<p><code>1&lt;&lt;33</code> will invoke undefined behavior for 32 bit <code>int</code>.</p>\n<h3>C11: 6.5.7 Bitwise shift operators:</h3>\n<blockquote>\n<p>The result of <code>E1 &lt;&lt; E2</code> is <code>E1</code> left-shifted <code>E2</code> bit positions; vacated bits are filled with zeros. If <code>E1</code> has an unsigned type, the value of the result is <code>E1</code> <code>\u00d7</code> <code>2</code><sup><code>E2</code></sup>, reduced modulo one more than the maximum value representable in the result type. <strong>If <code>E1</code> has a signed type and nonnegative value, and <code>E1</code> <code>\u00d7</code> <code>2</code><sup><code>E2</code></sup> is representable in the result type, then that is the resulting value; otherwise, the behavior is undefined</strong>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1426701742, "post_id": 29127963, "comment_id": 46484560, "body": "The operands of <code>&lt;&lt;</code> and <code>&gt;&gt;</code> don&#39;t undergo usual arithmetic conversions. Having 33 promoted to <code>long long</code> in <code>1LL &lt;&lt; 33</code> is a K&amp;R C thing (the fact that K&amp;R C didn&#39;t have <code>long long</code> aside)."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1426697724, "last_edit_date": 1426697724, "creation_date": 1426697407, "answer_id": 29127963, "question_id": 29127854, "link": "https://stackoverflow.com/questions/29127854/impossible-to-print-a-long-long-integer-in-c/29127963#29127963", "title": "Impossible to print a long long integer in C", "body": "<p>Since you haven't qualified the literals 1 and 33 in any way, <code>1&lt;&lt;33</code> will have an <code>int</code> as its type. If <code>int</code> is 32 bit (very common on compilers targeting 64 bit) then this expression will yield <em>undefined behaviour</em>.</p>\n\n<p>A simple fix would be to write <code>1LL &lt;&lt; 33</code>. <code>1LL</code> is a <code>long long</code>, and 33 will be promoted to that type too. The C++ standard guarantees that <code>long long</code> is <em>at least</em> 64 bits.</p>\n\n<p>In many ways though I prefer <code>static_cast&lt;std::int64_t&gt;(1) &lt;&lt; 33</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": false, "score": 1, "last_activity_date": 1426697408, "creation_date": 1426697408, "answer_id": 29127964, "question_id": 29127854, "link": "https://stackoverflow.com/questions/29127854/impossible-to-print-a-long-long-integer-in-c/29127964#29127964", "title": "Impossible to print a long long integer in C", "body": "<p>The shift <code>1&lt;&lt;33</code> is not done on a <code>long long</code> type. The <code>1</code> is an <code>int</code> here; cast it to <code>long long</code> or suffix it with <code>LL</code>, e.g., <code>1LL &lt;&lt; 33</code>.</p>\n"}], "owner": {"reputation": 1325, "user_id": 3754413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/30dc5eeb93d93c105e2e58d3036bf201?s=128&d=identicon&r=PG&f=1", "display_name": "fonfonx", "link": "https://stackoverflow.com/users/3754413/fonfonx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 29127963, "answer_count": 3, "score": -1, "last_activity_date": 1426697724, "creation_date": 1426697140, "question_id": 29127854, "link": "https://stackoverflow.com/questions/29127854/impossible-to-print-a-long-long-integer-in-c", "title": "Impossible to print a long long integer in C", "body": "<p>I know there are many topics on this subject but none of them helped me to fix my problem.\nI work on Code::Blocks (with the option -std=c99 in \"Properties>Project Build Options>Compiler Settings>Other Options\") and the following code doesn't give the expected output:</p>\n\n<pre><code>long long val=1&lt;&lt;33;\nprintf(\"value: %llu\",val);\n</code></pre>\n\n<p>In fact I obtain \"value: 0\" in the terminal.\nHow can I fix that problem?</p>\n\n<p>When I write 30 instead of 33 (so val is an integer), I get the rigth answer. I have also tried %lld but that does not help.</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "edited": false, "score": 0, "creation_date": 1426696717, "post_id": 29127649, "comment_id": 46481344, "body": "Which programming language are we talking about here?"}, {"owner": {"reputation": 306, "user_id": 3508350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e8b4d87030697e2b69d6bdcf6c681c0?s=128&d=identicon&r=PG", "display_name": "Joe Sewell", "link": "https://stackoverflow.com/users/3508350/joe-sewell"}, "edited": false, "score": 0, "creation_date": 1426696867, "post_id": 29127649, "comment_id": 46481442, "body": "What language? This sounds like a tree structure, but it also sounds like a waste of time worrying about these other &quot;tables.&quot; Either the input tables can be removed, or the sensor value struct isn&#39;t necessary, from what you&#39;ve given."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1426698407, "post_id": 29127649, "comment_id": 46482468, "body": "Please show us some code, give some context, etc. You haven&#39;t given enough information for anyone to be able to help you."}], "answers": [{"tags": [], "owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "is_accepted": false, "score": 1, "last_activity_date": 1426699027, "creation_date": 1426699027, "answer_id": 29128550, "question_id": 29127649, "link": "https://stackoverflow.com/questions/29127649/non-contiguous-data-structure/29128550#29128550", "title": "Non Contiguous Data Structure", "body": "<p>I take it you want to pass an (array-of-)structures to a function such that it serializes a parametrized sub-set of the fields?</p>\n\n<p>One way of doing this would be to pass an array of field descriptors, containing the relative member offsets and sizes, to the generic functions. In C(++) you may take advantage of the <code>offsetof</code> macro to help you with this. </p>\n\n<p>E.g. something along these lines:</p>\n\n<pre><code>struct record {\n    int apple1, orange1;\n    int apple2, orange2;\n};\n\nstruct field { size_t offset, size; };\n#define FIELD(id) { offsetof(struct record, id), sizeof(struct record, id) }\n#define SENTINEL() { 0, 0 }\n\nconst struct field apples[] = { FIELD(apple1), FIELD(apple2), SENTINEL() };\nconst struct field oranges[] = { FIELD(orange1), FIELD(orange2), SENTINEL() };\n\nvoid write_subset(FILE *file, const struct record *record, const struct field *fields) {\n    for(; fields-&gt;size; ++fields)\n        fwrite((const char *) record + fields-&gt;offset, fields-&gt;size, 1, file);\n}\n</code></pre>\n\n<p>Naturally there are many alternative options. You might include type specifiers to do portable I/O, or create raw byte masks, or define a function per field set with callbacks for the I/O task, etc. As you might imagine it is difficult to good advice without more specifics.</p>\n"}], "owner": {"reputation": 1, "user_id": 4686228, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203044068856380/picture?type=large", "display_name": "bubbzilla", "link": "https://stackoverflow.com/users/4686228/bubbzilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426866406, "creation_date": 1426696528, "last_edit_date": 1426866406, "question_id": 29127649, "link": "https://stackoverflow.com/questions/29127649/non-contiguous-data-structure", "title": "Non Contiguous Data Structure", "body": "<p>I'm working on a bit of code that pulls data from various sensors and stores that data on an SD card. All sensor values belong to at least one group (or \"table\"). For example, there is a \"voltages\" table with all of the voltages. Only entire tables can be received from the sensors and only entire tables can be saved to the SD card.</p>\n\n<p>All sensor values are stored in one giant struct. The struct is contiguous but the members of a specific table are not necessarily contiguous. For example,</p>\n\n<pre><code>Value Name  |   Table Number\n-----------------------------\nValue 1     |   1\nValue 2     |   1\nValue 3     |     2\nValue 4     |     2\nValue 5     |   1\nValue 6     |     2\nValue 7     |   1\n</code></pre>\n\n<p>I'm using a real time kernal. I want to have one task that maintains the various tables and one task that saves things to the SD card. When a given table is requested, I want the \"table task\" to pass some kind of handle to the \"SD card task\". </p>\n\n<p>So my question is: Is there a reasonably simple way to create a handle for a data structure that is non-contiguous?</p>\n\n<p>Here is an example of the entire struct of sensor values (in reality there are about 600 values and 200 tables. Tables can overlap):</p>\n\n<pre><code>typedef struct __attribute__ ((__packed__)) {\n    uint8_t  vsys[3];    // Member of Voltage table\n    uint16_t cursys[3];  // Member of Current table\n    uint32_t cur1;   // Member of Current table\n    uint16_t v1;         // Member of Voltage table\n    uint16_t cur2;   // Member of Current table\n} housekeeping_t;\n</code></pre>\n\n<p>Functions would be (for example) <code>hk_handle_t get_voltages();</code> or <code>hk_handle_t get_currents();</code></p>\n\n<p>I can not change how the data is collected from the sensors. Only how it gets to the SD card.</p>\n\n<p>Reliability is valued above all else</p>\n"}, {"tags": ["c", "list", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 17, "user_id": 4458825, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1477878292/picture?type=large", "display_name": "Michele Bottini", "link": "https://stackoverflow.com/users/4458825/michele-bottini"}, "edited": false, "score": 0, "creation_date": 1426697542, "post_id": 29127502, "comment_id": 46481916, "body": "@MicheleBottini.: Now along with previous change change createlist function as shown in my answer. It will give correct result."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1426697483, "last_edit_date": 1426697483, "creation_date": 1426696172, "answer_id": 29127502, "question_id": 29127319, "link": "https://stackoverflow.com/questions/29127319/c-list-segmentation-fault/29127502#29127502", "title": "C List Segmentation Fault", "body": "<p>In stampa add check</p>\n\n<pre><code>while(p!=NULL)\n{\n  printf(\"Value %d\",p-&gt;info);\n  p=p-&gt;succ;\n}\n</code></pre>\n\n<p>You are probably accessing it when it is not allocated. Check it this way there is no problem if it reaches a null value also. And initial null value will not cause problem also(if used).</p>\n\n<p>I have modified your code</p>\n\n<pre><code>// this funct should create list with n members and return a pointer to the first element\nstruct nodo *Crealista(void) {\n    struct nodo *p, *primo, *back;\n    int i, n;\n    p = NULL;\n    primo = NULL;\n    back = NULL;\n    printf(\"Numero di elementi: \");\n    scanf(\"%d\", &amp;n);\n    printf(\"inserisci %d numeri interi positivi: \", n);\n    p = (struct nodo *)malloc(sizeof(struct nodo));\n        scanf(\"%d\", &amp;p-&gt;info);\n        p-&gt;prec = back;\n        p-&gt;succ = NULL;\n\n        back = p;\n    for (i=1; i&lt;n; i++) {\n        p = (struct nodo *)malloc(sizeof(struct nodo));\n        scanf(\"%d\", &amp;p-&gt;info);\n        p-&gt;prec = back;\n        p-&gt;prec-&gt;succ=p;\n        p-&gt;succ = NULL;\n        back = p;\n    }\n    primo = p;\n    while (primo-&gt;prec != NULL) { primo = primo-&gt;prec;}\n\n    return(primo);\n}\n</code></pre>\n\n<p>You are not setting the succ pointer of previous node correctly. That is what causing you the problem. Check now.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426696582, "post_id": 29127517, "comment_id": 46481243, "body": "The same would apply if <code>p</code> were <code>NULL</code>, but it doesn&#39;t look like that will happen in your program as it is currently written.  Instead, your program would (probably) crash in function <code>Crealista()</code> if you attempted to provide a zero-element list."}, {"owner": {"reputation": 17, "user_id": 4458825, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1477878292/picture?type=large", "display_name": "Michele Bottini", "link": "https://stackoverflow.com/users/4458825/michele-bottini"}, "edited": false, "score": 0, "creation_date": 1426696751, "post_id": 29127517, "comment_id": 46481364, "body": "the printf command was just a test the behaviour of the pointer"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 17, "user_id": 4458825, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1477878292/picture?type=large", "display_name": "Michele Bottini", "link": "https://stackoverflow.com/users/4458825/michele-bottini"}, "edited": false, "score": 0, "creation_date": 1426696936, "post_id": 29127517, "comment_id": 46481495, "body": "@MicheleBottini, your question title calls out the segfault associated with the <code>printf()</code> as the problem.  My apologies for overlooking the other aspect of your question, but it looks like Bill Lynch has already addressed it."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1426696191, "creation_date": 1426696191, "answer_id": 29127517, "question_id": 29127319, "link": "https://stackoverflow.com/questions/29127319/c-list-segmentation-fault/29127517#29127517", "title": "C List Segmentation Fault", "body": "<p>The <code>printf()</code> call you have commented out will always exhibit undefined behavior when <code>p-&gt;succ</code> is <code>NULL</code>, as it will be when <code>p</code> points to the last (or only) element of the list.  In that case, although the behavior is formally \"undefined\", it is quite likely to manifest as a segmentation fault.</p>\n"}, {"comments": [{"owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 0, "creation_date": 1426709071, "post_id": 29127622, "comment_id": 46488968, "body": "Versions of this post seem to be everywhere. Why aren&#39;t people researching what libraries exist to achieve, where possible I use the type GList from library GObject. This logic traversing the list may have occurred, but all other issues are dealt with a simple #include"}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 4, "last_activity_date": 1426696866, "last_edit_date": 1426696866, "creation_date": 1426696467, "answer_id": 29127622, "question_id": 29127319, "link": "https://stackoverflow.com/questions/29127319/c-list-segmentation-fault/29127622#29127622", "title": "C List Segmentation Fault", "body": "<h3>Stampa()</h3>\n\n<p>Let's look at what we want to do when we print the entire list:</p>\n\n<ol>\n<li>If the current element is valid, then we want to print it.</li>\n<li>Then, we want to iterate to the next element, and continue this loop.</li>\n</ol>\n\n<p>That's not what your code does. Your code looks to see if the current element has a successor, and if it does, we print the current element's value.</p>\n\n<p>That function should actually be:</p>\n\n<pre><code>void Stampa (struct nodo *p) {\n    while (p != NULL ) {\n        printf(\"Value: %d\\n\", p-&gt;info);\n        p = p-&gt;succ;\n    }\n}\n</code></pre>\n\n<h3>Crealista()</h3>\n\n<ol>\n<li>If you tell <code>Crealista()</code> to create a list of 0 elements, your final while loop will exhibit undefined behavior.</li>\n<li>If you tell <code>Crealista()</code> to create a list of less than 2 elements, your commented <code>printf()</code> in <code>main()</code> will cause undefined behavior (if it was uncommented).</li>\n</ol>\n\n<h3>Doubly Linked Lists</h3>\n\n<p>You never update the value of <code>nodo-&gt;succ</code>. You only update the value of <code>nodo-&gt;prev</code>. Here's one example of how to do that:</p>\n\n<pre><code>if (p-&gt;prec)\n    p-&gt;prec-&gt;succ = p;\n</code></pre>\n\n<h3>Putting all of this together</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\nstruct nodo {\n    int info;\n    struct nodo *prec;\n    struct nodo *succ;\n};\ntypedef struct nodo nodo;\n\nstruct nodo *Crealista(void);     \nvoid Stampa (struct nodo *nodo);\n\nint main(int argc, const char * argv[]) {\n    struct nodo *p;\n    p = Crealista();\n    Stampa(p);\n}\n\n// Print the list\nvoid Stampa (struct nodo *p) {\n    while (p != NULL ) {\n        printf(\"Value: %d \\n\", p-&gt;info);\n        p = p-&gt;succ;\n    }\n}\n\n// Create a list of n elements\nstruct nodo *Crealista(void) {\n    int i, n;\n    struct nodo *p = NULL;\n    struct nodo *primo = NULL;\n    struct nodo *back = NULL;\n\n    printf(\"Numero di elementi: \");\n    scanf(\"%d\", &amp;n);\n    assert(n != 0);\n    printf(\"inserisci %d numeri interi positivi: \", n);\n\n    for (i=0; i&lt;n; i++) {\n        p = malloc(sizeof(struct nodo));\n        scanf(\"%d\", &amp;p-&gt;info);\n        p-&gt;prec = back;\n        p-&gt;succ = NULL;\n        if (p-&gt;prec)\n            p-&gt;prec-&gt;succ = p;\n        back = p;\n    }\n\n    primo = p;\n    while (primo != NULL &amp;&amp; primo-&gt;prec != NULL)\n        primo = primo-&gt;prec;\n\n    return primo;\n}\n</code></pre>\n\n<h3>Which when run...</h3>\n\n<pre><code>Numero di elementi: 5\ninserisci 5 numeri interi positivi: 1 2 3 4 5\nValue: 1 \nValue: 2 \nValue: 3 \nValue: 4 \nValue: 5 \n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4458825, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1477878292/picture?type=large", "display_name": "Michele Bottini", "link": "https://stackoverflow.com/users/4458825/michele-bottini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 29127622, "answer_count": 3, "score": 0, "last_activity_date": 1426697483, "creation_date": 1426695692, "last_edit_date": 1426696318, "question_id": 29127319, "link": "https://stackoverflow.com/questions/29127319/c-list-segmentation-fault", "title": "C List Segmentation Fault", "body": "<p>Hello guys i got a problem while running this code:\ntrying to run the printf in the comment i got a segfault, also without that i dont see my listed printed ad the function Stampa should do.\nProbably i am missing something with pointers</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct nodo {     // double linked list\n    int info;\n    struct nodo *prec;\n    struct nodo *succ;\n};\ntypedef struct nodo nodo;\n\nstruct nodo *Crealista(void);     \nvoid Stampa (struct nodo *nodo);\n\nint main(int argc, const char * argv[]) {\n    struct nodo *p;\n    p = Crealista();\n    // printf(\"%d\",p-&gt;succ-&gt;info);\n    Stampa(p);\n\n    return 0;\n}\n\n// this funct should print the whole list\nvoid Stampa (struct nodo *p) {\n    while (p-&gt;succ != NULL ) {\n        printf(\"Value  : %d \\n\", p-&gt;info);\n        p = p-&gt;succ;\n    }\n}\n\n// this funct should create list with n members and return a pointer to the first element\nstruct nodo *Crealista(void) {\n    struct nodo *p, *primo, *back;\n    int i, n;\n    p = NULL;\n    primo = NULL;\n    back = NULL;\n    printf(\"Numero di elementi: \");\n    scanf(\"%d\", &amp;n);\n    printf(\"inserisci %d numeri interi positivi: \", n);\n    for (i=0; i&lt;n; i++) {\n        p = malloc(sizeof(struct nodo));\n        scanf(\"%d\", &amp;p-&gt;info);\n        p-&gt;prec = back;\n        p-&gt;succ = NULL;\n        back = p;\n    }\n    primo = p;\n    while (primo-&gt;prec != NULL) { primo = primo-&gt;prec;}\n\n    return(primo);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1426694674, "post_id": 29126812, "comment_id": 46479897, "body": "the declaration ` int** mirrorArray[sizeX][sizeY];` is a two dimensional array of double pointers to <code>int</code>. While readArray is accepting an array of pointers (or it can be seen as a two dimensional array of <code>int</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4686116, "user_type": "registered", "profile_image": "https://graph.facebook.com/701988593243935/picture?type=large", "display_name": "panuf", "link": "https://stackoverflow.com/users/4686116/panuf"}, "edited": false, "score": 0, "creation_date": 1426694827, "post_id": 29126955, "comment_id": 46480001, "body": "Thank you for your comment, but i still get exactly the same error."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1426695068, "post_id": 29126955, "comment_id": 46480174, "body": "Are you sure the problem with the array access? Could it be the <code>surf</code> thing?"}], "tags": [], "owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1426694665, "creation_date": 1426694665, "answer_id": 29126955, "question_id": 29126812, "link": "https://stackoverflow.com/questions/29126812/cannot-access-2-dim-array-in-function-c/29126955#29126955", "title": "Cannot access 2 DIM array in function C", "body": "<pre><code>int** mirrorArray[sizeX][sizeY]; \n</code></pre>\n\n<p><code>mirrorArray</code> is an 2D array of pointer to pointers. What you need is -</p>\n\n<pre><code>int mirrorArray[sizeX][sizeY];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 1, "creation_date": 1426695256, "post_id": 29127098, "comment_id": 46480311, "body": "I am very uncomfortable with you refering to arrays and pointers as &quot;equivalent&quot;.  They are not, although arrays will decay to pointers."}, {"owner": {"reputation": 1, "user_id": 4686116, "user_type": "registered", "profile_image": "https://graph.facebook.com/701988593243935/picture?type=large", "display_name": "panuf", "link": "https://stackoverflow.com/users/4686116/panuf"}, "edited": false, "score": 0, "creation_date": 1426695493, "post_id": 29127098, "comment_id": 46480492, "body": "Hello, thank you for your comment, i really am confused by the array-pointer stuff :/  the first line &quot;void readArray&quot; you suggested wont compile :( And the second gives me the same error as before. (I am using g++ compiler).  At this point, i am even more lost :D"}, {"owner": {"reputation": 2015, "user_id": 4686192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10ee99850609c1fd8793e1473d441b5?s=128&d=identicon&r=PG", "display_name": "Julien Simon", "link": "https://stackoverflow.com/users/4686192/julien-simon"}, "edited": false, "score": 0, "creation_date": 1426695592, "post_id": 29127098, "comment_id": 46480562, "body": "Kernighan tutorial (<a href=\"http://www.lysator.liu.se/c/bwk-tutor.html\" rel=\"nofollow noreferrer\">lysator.liu.se/c/bwk-tutor.html</a>) : &quot;*(y+i)  gives x[i]&quot;. Good enough for me when it comes to defining &quot;equivalence&quot;, but whatever floats your boat, man."}], "tags": [], "owner": {"reputation": 2015, "user_id": 4686192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10ee99850609c1fd8793e1473d441b5?s=128&d=identicon&r=PG", "display_name": "Julien Simon", "link": "https://stackoverflow.com/users/4686192/julien-simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1426695093, "creation_date": 1426695093, "answer_id": 29127098, "question_id": 29126812, "link": "https://stackoverflow.com/questions/29126812/cannot-access-2-dim-array-in-function-c/29127098#29127098", "title": "Cannot access 2 DIM array in function C", "body": "<p>The declaration is incorrect. It should read:</p>\n\n<pre><code>int mirrorArray[sizeX][sizeY]\n</code></pre>\n\n<p>Your function prototype is confusing. It would better to use:</p>\n\n<pre><code>void readArray(int p[][], int m, int n) {\n</code></pre>\n\n<p>or :</p>\n\n<pre><code>   void readArray(int** p, int m, int n) {\n</code></pre>\n\n<p>You seem to be uncomfortable with the pointer-array equivalence. You should read <a href=\"https://en.wikibooks.org/wiki/C_Programming/Pointers_and_arrays\" rel=\"nofollow\">https://en.wikibooks.org/wiki/C_Programming/Pointers_and_arrays</a>, it will certainly put you back on track.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4686116, "user_type": "registered", "profile_image": "https://graph.facebook.com/701988593243935/picture?type=large", "display_name": "panuf", "link": "https://stackoverflow.com/users/4686116/panuf"}, "edited": false, "score": 0, "creation_date": 1426700974, "post_id": 29128474, "comment_id": 46484076, "body": "Thank you very much for your response :) It really makes sense, but i am getting error &quot;use of parameter &quot;m&quot; outside function body&quot;. I guess g++ i am currently using cant work this out. Temporary i used #define to set the array size (i am 90% sure that 500x500 is going to be enough). It is stupid solution, but i cant &quot;change compiler and this stuff&quot; because it wouldnt work for my colleges."}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "reply_to_user": {"reputation": 1, "user_id": 4686116, "user_type": "registered", "profile_image": "https://graph.facebook.com/701988593243935/picture?type=large", "display_name": "panuf", "link": "https://stackoverflow.com/users/4686116/panuf"}, "edited": false, "score": 0, "creation_date": 1441968850, "post_id": 29128474, "comment_id": 52900997, "body": "@panuf: In your question&#39;s title and tag the language is said to be C; now you say you&#39;re using a C++ compiler. Make up your mind. Note that your colleagues can call C functions by using <code>extern &quot;C&quot;</code>."}], "tags": [], "owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "is_accepted": false, "score": 1, "last_activity_date": 1426698811, "creation_date": 1426698811, "answer_id": 29128474, "question_id": 29126812, "link": "https://stackoverflow.com/questions/29126812/cannot-access-2-dim-array-in-function-c/29128474#29128474", "title": "Cannot access 2 DIM array in function C", "body": "<p>You need to specify number of rows and columns on your array parameter. The following is valid in C99:</p>\n\n<pre><code>void readArray(int m, int n, int p[m][n]);\n</code></pre>\n\n<p>Notice that I needed to put the array sizes before the array in this declaration. Now the function can be called as:</p>\n\n<pre><code>int sizeX = surf-&gt;settings-&gt;x;   // getting one dimension of the array\nint sizeY = surf-&gt;settings-&gt;y;   // getting second dimension of the array\nint mirrorArray[sizeX][sizeY]; // create 2DIM array\nreadArray(sizeX, sizeY, mirrorArray);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4686116, "user_type": "registered", "profile_image": "https://graph.facebook.com/701988593243935/picture?type=large", "display_name": "panuf", "link": "https://stackoverflow.com/users/4686116/panuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1426698811, "creation_date": 1426694326, "last_edit_date": 1426698024, "question_id": 29126812, "link": "https://stackoverflow.com/questions/29126812/cannot-access-2-dim-array-in-function-c", "title": "Cannot access 2 DIM array in function C", "body": "<p>i have this funny problem. I have been trying to find a way how to pass my 2DIM array into function and i am still failing pretty hard.</p>\n\n<p>So i get sizeX and sizeY from another function, which is called after the array is loaded by user.</p>\n\n<p>...</p>\n\n<pre><code>   int sizeX = surf-&gt;settings-&gt;x;   // getting one dimension of the array\n   int sizeY = surf-&gt;settings-&gt;y;   // getting second dimension of the array\n   int** mirrorArray[sizeX][sizeY]; // create 2DIM array (I think this is perhaps wrong?\n   for (int i = 0; i &lt; sizeX; i = i+1 ) {   // filling it up with some zeros\n        for (int j = 0; j &lt; sizeY; j++ ) {\n        mirrorArray[i][j] = 0;\n\n    }}\n\n    readArray((int **)mirrorArray, sizeX, sizeY); // now i would like to read the array (also maybe a source of my problems?)\n</code></pre>\n\n<p>and this is my reading function</p>\n\n<pre><code>void readArray(int *p[], int m, int n) {\n\n        for (int i = 0; i &lt; m; i = i+1) {\n        for (int j = 0; j &lt; n; j++) {\n        printf(\"p[%i][%i] = %i \\n\", i, j, p[i][j]);\n            }\n        }\n\n}\n</code></pre>\n\n<p>I am really flustrated. I get the Segmentation faul (core dumped) even if i try to access the first element in my array :/\nIf i dont create the function and just use the reading algorith after filling the array up with zeros, everything works, but i really need to implement the function. Can anyone tell what i am doing wrong please? :) Thank you very much.</p>\n\n<p><strong>I still cant figure it out, every response will be highly useful :)</strong></p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1426696716, "post_id": 29127607, "comment_id": 46481341, "body": "thaks for your help, but it doens&#39;t work you could test it on your device !"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1426700720, "post_id": 29127607, "comment_id": 46483923, "body": "any idea why this isn&#39;t working, or is the rule to get the  angle value wrong ?"}, {"owner": {"reputation": 126, "user_id": 4686335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f1f2494d61aeca76b372d93b7c949f?s=128&d=identicon&r=PG&f=1", "display_name": "WhatRoughBeast", "link": "https://stackoverflow.com/users/4686335/whatroughbeast"}, "reply_to_user": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1426701585, "post_id": 29127607, "comment_id": 46484472, "body": "It took me a bit to figure this out. In setAngle(), x , y, and z are the relationships between S1, S2 and S3, not the values of S1, S2 and S3. So zaehler is simply x (since x = sin(angle) = S3 - S1)."}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1426702081, "post_id": 29127607, "comment_id": 46484771, "body": "sorry but I need you to explain I&#39;ve been setting the whole day on this still didn&#39;t figure it out"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1426702139, "post_id": 29127607, "comment_id": 46484813, "body": "is nenner that sqrt(3) cos(angle) = y-z;"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1426702212, "post_id": 29127607, "comment_id": 46484869, "body": "I&#39;ve tried it but still don&#39;t get the correct angle, I&#39;ve read the AD explanation sheet they said  that for instance x = sin(angle) , angle y-z = sqrt(3)cos(angle)"}, {"owner": {"reputation": 126, "user_id": 4686335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f1f2494d61aeca76b372d93b7c949f?s=128&d=identicon&r=PG&f=1", "display_name": "WhatRoughBeast", "link": "https://stackoverflow.com/users/4686335/whatroughbeast"}, "reply_to_user": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1426702649, "post_id": 29127607, "comment_id": 46485160, "body": "Go back to the app note, and look at equations 1 to 3. They do not describe the voltage at any of the 3 points - they describe the differences in the voltages. So your setAngle() is not correct. x,y and z are not the S1, S2 and S3 in your diagram."}], "tags": [], "owner": {"reputation": 126, "user_id": 4686335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f1f2494d61aeca76b372d93b7c949f?s=128&d=identicon&r=PG&f=1", "display_name": "WhatRoughBeast", "link": "https://stackoverflow.com/users/4686335/whatroughbeast"}, "is_accepted": true, "score": 1, "last_activity_date": 1426696437, "creation_date": 1426696437, "answer_id": 29127607, "question_id": 29126729, "link": "https://stackoverflow.com/questions/29126729/implementing-the-scott-t-method/29127607#29127607", "title": "Implementing the scott T method", "body": "<p>nenner  = (y -((x+z)/2))*(2/sqrt(3));</p>\n"}, {"tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": false, "score": 0, "last_activity_date": 1559554882, "creation_date": 1559554882, "answer_id": 56424719, "question_id": 29126729, "link": "https://stackoverflow.com/questions/29126729/implementing-the-scott-t-method/56424719#56424719", "title": "Implementing the scott T method", "body": "<p>here it is fixed up, I had to chage the order of x,y,z and fix the nenner formula.</p>\n\n<pre><code>void getAngle( float  xValue , float  yValue, float zValue){\n     float x = 0.0;\n     float y = 0.0;\n     float z = 0.0;\n     float rad_angle =0.0;\n     float  angle =0 ;\n     float zaehler = 0.0;\n     float nenner = 0.0;\n     y=xValue;\n     z=yValue;\n     x=zValue;\n\n     printf(\" Getangle \\n\" );\n     printf(\" X = %lf , [BY = %lf , Z = %lf \\n \" , x,y,z);\n     zaehler =z-x;\n     nenner  = (y -((x+z)/2))*(2/sqrt(3)); \n     printf (\" the sin value is  :  %lf  \\n\" , zaehler);\n     printf (\"  the cos value is  : %lf \\n\",nenner);\n     rad_angle = atan2(nenner,zaehler);\n     printf(\"Radangle = %lf \\n\",rad_angle);\n     angle =( rad_angle  * 180/PI);\n     printf(\"Angle in degree   = %lf \\n\",angle);\n}\n</code></pre>\n"}], "owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 1, "accepted_answer_id": 29127607, "answer_count": 2, "score": 0, "last_activity_date": 1559554882, "creation_date": 1426694145, "last_edit_date": 1434114690, "question_id": 29126729, "link": "https://stackoverflow.com/questions/29126729/implementing-the-scott-t-method", "title": "Implementing the scott T method", "body": "<p>I've trying to implement a math formal to convert a 3 phase system into 2 phases, using the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n#define PI 3.14159265358979\n\n\nvoid getAngle( float  xValue , float  yValue, float zValue){\n     float x = 0.0;\n     float y = 0.0;\n     float z = 0.0;\n     double rad_angle =0.0;\n     double  angle =0 ;\n     double zaehler = 0.0;\n     double nenner = 0.0;\n     z=xValue;\n     y=yValue;\n     x=zValue;\n\n     printf(\" Getangle \\n\" );\n     printf(\" X = %lf , [BY = %lf , Z = %lf \\n \" , x,y,z);\n     zaehler =z-x;\n     nenner  = ((y-x) -((x-z)/2-(z-y)/2))*(2*sqrt(3));\n     printf (\" the sin value is  :  %lf  \\n\" , zaehler);\n     printf (\"  the cos value is  : %lf \\n\",nenner);\n     rad_angle = atan2(nenner,zaehler);\n     printf(\"Radangle = %lf \\n\",rad_angle);\n     angle =( rad_angle  * 180/PI);\n     printf(\"Angle in degree   = %lf \\n\",angle);\n}\n\nvoid setAngle(float angle ){\n   float x = 0 ;\n   float y = 0 ;\n   float z = 0 ;\n   printf(\" the given angle is : %lf \\n\",angle);\n   angle = angle *PI/180;\n   x = sin(angle);\n   y = sin(angle+(120* (PI/180.0)));\n   z = sin(angle+(240* (PI/180.0)));\n   printf(\" Set  angle \\n\" );\n   printf(\" the x value  : %f ,\\n the y value : %f ,\\n the z value :%f \",x,y,z);\n   getAngle(x,y,z);\n}\n\nint main (){\n    float angle = 0;\n    while (1){\n        printf(\" angle in Degrees \\n\");\n        scanf(\"%f\" ,&amp;angle);\n        printf(\"  sinus angle : %f\", sin(angle*PI/180));\n        setAngle(angle);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>and here is what I'm trying to implement: </p>\n\n<p><img src=\"https://i.stack.imgur.com/eetfM.png\" alt=\"equation\"></p>\n\n<p>I never get the angle that I give back. </p>\n\n<p>Any idea what I'm doing wrong here ? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 480, "user_id": 3579432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0Yjb.jpg?s=128&g=1", "display_name": "Skrrp", "link": "https://stackoverflow.com/users/3579432/skrrp"}, "edited": false, "score": 0, "creation_date": 1426694317, "post_id": 29126669, "comment_id": 46479615, "body": "I guess it&#39;s because the random in sumintsrand() is getting generated each time it is called, so the answer in the while() end is different to the one in your if()."}], "answers": [{"tags": [], "owner": {"reputation": 584, "user_id": 4642538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a644d5166f1cbb8ce07d4b66d872df37?s=128&d=identicon&r=PG&f=1", "display_name": "sray", "link": "https://stackoverflow.com/users/4642538/sray"}, "is_accepted": false, "score": 0, "last_activity_date": 1426694268, "creation_date": 1426694268, "answer_id": 29126786, "question_id": 29126669, "link": "https://stackoverflow.com/questions/29126669/need-help-terminating-program-when-secret-number-is-found/29126786#29126786", "title": "Need help terminating program when secret number is found", "body": "<p>You are calling your sumintsrand() function thrice. Each time, the result of the function is going to be different based on what rand() returns. </p>\n\n<p>Your call to sumintsrand()within the while loop may have found the secret number, but that is not retained. You need to store it for checking whether while loop needs to be terminated.</p>\n\n<p>UPDATE:</p>\n\n<pre><code>int sum = 0;\ndo {\n\n   scanf(\"%i%i\", &amp;x, &amp;y);\n   sum = sumintsrand(x,y);\n\n} while(sum != secretnumber);\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4180612"}, "is_accepted": false, "score": 0, "last_activity_date": 1426694401, "creation_date": 1426694401, "answer_id": 29126853, "question_id": 29126669, "link": "https://stackoverflow.com/questions/29126669/need-help-terminating-program-when-secret-number-is-found/29126853#29126853", "title": "Need help terminating program when secret number is found", "body": "<p>It's not working, because in that line <code>while(sumintsrand(x,y) != secretnumber);</code> you are calling <code>sumintsrand</code> a second time - and it gives other result. </p>\n\n<p>Possible solutions:</p>\n\n<ol>\n<li>Save the result of first call of <code>sumintsrand</code> and check if it(the saved result) is the same as <code>secretnumber</code> </li>\n<li>Use <code>break</code></li>\n<li>Make <code>bool</code> variable which will end the loop - at the beginning it will be <code>true</code>, when you will find the number just set it to <code>false</code>.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4686126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-GfQ5mnBbX50/AAAAAAAAAAI/AAAAAAAAAC0/NiIj52YWt2Y/photo.jpg?sz=128", "display_name": "Gabriella Coronell", "link": "https://stackoverflow.com/users/4686126/gabriella-coronell"}, "edited": false, "score": 0, "creation_date": 1426695370, "post_id": 29126887, "comment_id": 46480398, "body": "I tried this but now my answers are huge numbers. Like i will type 1 + 2 + random number and it will return a huge number. what&#39;s going on?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 19, "user_id": 4686126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-GfQ5mnBbX50/AAAAAAAAAAI/AAAAAAAAAC0/NiIj52YWt2Y/photo.jpg?sz=128", "display_name": "Gabriella Coronell", "link": "https://stackoverflow.com/users/4686126/gabriella-coronell"}, "edited": false, "score": 0, "creation_date": 1426696996, "post_id": 29126887, "comment_id": 46481537, "body": "@GabriellaCoronell I have reposted my answer."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1426696858, "last_edit_date": 1426696858, "creation_date": 1426694483, "answer_id": 29126887, "question_id": 29126669, "link": "https://stackoverflow.com/questions/29126669/need-help-terminating-program-when-secret-number-is-found/29126887#29126887", "title": "Need help terminating program when secret number is found", "body": "<p><strong>UPDATE</strong></p>\n\n<p>I compiled your program with my earlier suggested mod, and I didn't get silly large numbers, so pass on that - different question?</p>\n\n<p>It seems a bit strange to keep changing the random number - the same guess might fail once but work the next time. Also there is a confusion about whether the range is 5 or 99.</p>\n\n<p>So I've simplified your work, to make you guess two numbers that sum to the secret number. If that's not your intention, perhaps you can draw on my code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n\n#define MAXVAL 5\n\nint main(){\n    int x, y, secretnumber, testval;\n    srand ((unsigned)time(NULL));\n    secretnumber = rand() % (MAXVAL+1);\n    do\n    {\n        printf(\"Enter two integers to be added to equal a secret random number from 0-%d\\n\"\n               \"Keep entering numbers until you hit the secret number!\\n\", MAXVAL);\n        if (scanf(\"%d%d\", &amp;x, &amp;y) != 2)\n            return 0;                       // exit program\n        testval = x + y;\n        if(testval != secretnumber)\n            printf(\"Sorry - try again!\\n\\n\");\n        else\n            printf(\"You have found the secret number: %d + %d = %d! Goodbye!\\n\", \n                    x, y, secretnumber);\n    }\n    while(testval != secretnumber);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4686126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-GfQ5mnBbX50/AAAAAAAAAAI/AAAAAAAAAC0/NiIj52YWt2Y/photo.jpg?sz=128", "display_name": "Gabriella Coronell", "link": "https://stackoverflow.com/users/4686126/gabriella-coronell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 29126887, "answer_count": 3, "score": 0, "last_activity_date": 1426696858, "creation_date": 1426694011, "last_edit_date": 1426694112, "question_id": 29126669, "link": "https://stackoverflow.com/questions/29126669/need-help-terminating-program-when-secret-number-is-found", "title": "Need help terminating program when secret number is found", "body": "<p>I'm trying to write a c program that uses a function that adds 2 integers to a random number. Which I have accomplished below. My problem is, I set a variable to a secret number and when that number is found, I need the program to terminate and it does not.</p>\n\n<pre><code>int x,y,secretnumber;\n\nsecretnumber = 5;\n\ndo\n{\n    printf(\"Please enter two integers to be added together to a random number from 0-99 \\n\"\n    \"Keep entering numbers until you hit the secret number!\\n\");\n    scanf(\"%i%i\", &amp;x, &amp;y);\n\n    if(sumintsrand(x,y) != secretnumber)\n    {\n        printf(\"The summation of integers %i and %i and a random number is %i \\n\\n\",x,y,sumintsrand(x,y));\n    }\n    else\n    {\n        printf(\"You have found the secret number: %i! Goodbye!\\n\", secretnumber);\n    }\n}\nwhile(sumintsrand(x,y) != secretnumber);\n\nreturn 0;\n}\n\n\n\nint sumintsrand(int x, int y)\n{\n\nint sumintsrand = x + y + rand()%5;\n\n return sumintsrand;\n}\n</code></pre>\n\n<p>If anyone has any idea where I'm going wrong I would really appreciate it</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array", "char"], "comments": [{"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1426693194, "post_id": 29126240, "comment_id": 46478771, "body": "Shouldn&#39;t it read <code>patterns[i - 1] = pData;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 2642803, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc131e345fd845449d913dd624cd36b7?s=128&d=identicon&r=PG", "display_name": "Oliver", "link": "https://stackoverflow.com/users/2642803/oliver"}, "edited": false, "score": 0, "creation_date": 1426693238, "post_id": 29126336, "comment_id": 46478804, "body": "Sorry I think thats a line written with inherent confusion, I basically need to assign the memory address at that patterns index to the address of pData"}], "tags": [], "owner": {"reputation": 1972, "user_id": 3738356, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/e17701b63957cb2224001256ad355f6b?s=128&d=identicon&r=PG&f=1", "display_name": "interestedparty333", "link": "https://stackoverflow.com/users/3738356/interestedparty333"}, "is_accepted": false, "score": 0, "last_activity_date": 1426693133, "creation_date": 1426693133, "answer_id": 29126336, "question_id": 29126240, "link": "https://stackoverflow.com/questions/29126240/allocating-a-char-pointer-array/29126336#29126336", "title": "Allocating a char pointer array", "body": "<p>I haven't read particularly carefully, but it strikes me as odd that you're taking the reference of patterns when it's a **.  This is in the line:</p>\n\n<pre><code>&amp;patterns[i-1] = &amp;pData;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1426693296, "creation_date": 1426693296, "answer_id": 29126398, "question_id": 29126240, "link": "https://stackoverflow.com/questions/29126240/allocating-a-char-pointer-array/29126398#29126398", "title": "Allocating a char pointer array", "body": "<p>This line is incorrect:</p>\n\n<pre><code>&amp;patterns[i - 1] = &amp;pData;\n</code></pre>\n\n<p>You are trying to assign to the result of the \"take an address\" operator, which is not possible because it's not an lvalue.</p>\n\n<p>The assignment should be as follows:</p>\n\n<pre><code>patterns[i - 1] = pData;\n</code></pre>\n\n<p>but you need to allocate <code>patterns</code> before you do this. You can use</p>\n\n<pre><code>patterns = malloc(sizeof(char*)*5);\n</code></pre>\n\n<p>or simply declare <code>patterns</code> to be an array of five:</p>\n\n<pre><code>char *patterns[5];\n</code></pre>\n\n<p>This assumes that your <code>ReadFromFile</code> function allocates a <code>char*</code>, and assigns it to the address pointed to by <code>pData</code>. Note that you need to <code>free</code> all pointers that were obtained through <code>malloc</code>/<code>calloc</code>/<code>realloc</code>.</p>\n"}], "owner": {"reputation": 611, "user_id": 2642803, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc131e345fd845449d913dd624cd36b7?s=128&d=identicon&r=PG", "display_name": "Oliver", "link": "https://stackoverflow.com/users/2642803/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "accepted_answer_id": 29126398, "answer_count": 2, "score": 1, "last_activity_date": 1426693736, "creation_date": 1426692890, "last_edit_date": 1426693736, "question_id": 29126240, "link": "https://stackoverflow.com/questions/29126240/allocating-a-char-pointer-array", "title": "Allocating a char pointer array", "body": "<p>I've got a number of files that I am reading the contents into a char array, I would like to store the contents I read from each file in an array of characters so that I could access the separate character arrays (file contents) by index, I am not sure of the syntax on how to do this. </p>\n\n<p>My understanding is that I need to set each of the memory addresses in my patterns array to one memory address per char array; to the char array stored in patternData but I do not know how to set this. What is the syntax that I am missing that I need to get this to happen?</p>\n\n<p>What I've tried</p>\n\n<p>I would have thought that If I was storing a type of <code>char*</code> then I would need a type <code>char**</code> to store the separate arrays of char arrays.</p>\n\n<p>I would access a <code>char*</code> by using the following notation to set the memory address of the pattern index to</p>\n\n<pre><code>&amp;patterns[INDEX] = &amp;pData;\n</code></pre>\n\n<p>However this does not work. There is a plethora of \"char pointer array\" questions but I'm not sure of the correct way to do this simple assignment of <code>pData</code> to an index of patterns.</p>\n\n<pre><code>char *tData;\nint tLength;\nchar *pData;\nint pLength;\n\nchar **patterns;\n\nvoid ReadFromFile(FILE *f, char **data, int *length) //This is what is passed into function\n\n\n    int main(int argc, char **argv)\n    {\n        for (int i = 1; i &lt;= 5; i++)\n        {\n            FILE *f;\n            char fileName[1000];\n            sprintf(fileName, \"file%d.txt\", i);\n            f = fopen(fileName, \"r\");\n            if (f == NULL)\n                return 0;\n\n            ReadFromFile(f, &amp;pData, &amp;pLength); //works to here, contents of file assigned to pData\n            fclose(f);\n\n            &amp;patterns[i - 1] = &amp;pData;\n\n        }\n\n        return 0;\n\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1426692759, "post_id": 29126174, "comment_id": 46478448, "body": "The &quot;assignment below&quot; is <i>not</i> an assignment."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "edited": false, "score": 0, "creation_date": 1426692841, "post_id": 29126174, "comment_id": 46478516, "body": "You cannot assign to an array, use <code>strcpy</code>."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1426693295, "post_id": 29126174, "comment_id": 46478861, "body": "It may help if you think that C has no strings. It does have string literals, which can be used in a few different ways, and it has standard library functions for manipulating byte sequences where 0-byte marks the end, AKA &quot;strings&quot;. But if you are used to strings of almost any other language, these are not something you would call &quot;strings&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 1, "last_activity_date": 1426692890, "creation_date": 1426692890, "answer_id": 29126239, "question_id": 29126174, "link": "https://stackoverflow.com/questions/29126174/cannot-assign-a-string-to-an-array/29126239#29126239", "title": "Cannot assign a string to an array", "body": "<p><code>john.name = \"John\";</code> is an assignment (which is not possible in this case) while  </p>\n\n<pre><code>char str[100] = \"this is a string\";  \n</code></pre>\n\n<p>is definition with initialization.  </p>\n\n<p><code>john.name = \"John\";</code> is an invalid statement in C because an array can't be a left operand of <code>=</code> operator. You need <code>strcpy</code> or <code>strncpy</code> to copy a string.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "is_accepted": false, "score": 0, "last_activity_date": 1426692966, "creation_date": 1426692966, "answer_id": 29126261, "question_id": 29126174, "link": "https://stackoverflow.com/questions/29126174/cannot-assign-a-string-to-an-array/29126261#29126261", "title": "Cannot assign a string to an array", "body": "<p>C doesn't allow you to use the assignment operator with arrays. There is a special provision that allows you to initialize arrays with string literals:</p>\n\n<pre><code>struct Person john = {\"John\"};\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4603911, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/86c3dd028de76f13d5ce1b056c18b0cf?s=128&d=identicon&r=PG&f=1", "display_name": "PMH", "link": "https://stackoverflow.com/users/4603911/pmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "closed_date": 1426692973, "accepted_answer_id": 29126239, "answer_count": 2, "score": 0, "last_activity_date": 1426692966, "creation_date": 1426692721, "question_id": 29126174, "link": "https://stackoverflow.com/questions/29126174/cannot-assign-a-string-to-an-array", "closed_reason": "Duplicate", "title": "Cannot assign a string to an array", "body": "<p>I need to create a structure whose member is an character array like below:</p>\n\n<pre><code>struct Person{\n    char name [100];\n\n};\n</code></pre>\n\n<p>Why the below results in a incompatible types error? And how to fix it?</p>\n\n<pre><code>struct Person john;\njohn.name = \"John\"; \n</code></pre>\n\n<p>what is the difference between the assignment above and bellow, which works well:</p>\n\n<pre><code>char str[100] = \"this is a string\";\n</code></pre>\n"}, {"tags": ["c", "pthreads", "aix", "powerpc", "xlc"], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 2108084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82081ac6062f2bcab8d8b72e34b3d48f?s=128&d=identicon&r=PG", "display_name": "Catherine Morton", "link": "https://stackoverflow.com/users/2108084/catherine-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1426767441, "creation_date": 1426767441, "answer_id": 29144368, "question_id": 29126055, "link": "https://stackoverflow.com/questions/29126055/libqrencode-segmentation-fault-couldnt-read-qrspec-c/29144368#29144368", "title": "libqrencode - Segmentation fault couldn&#39;t read &quot;qrspec.c&quot;", "body": "<p>I'm guessing you need to tell dbx where to find your source files</p>\n\n<p>From man dbx\n       -I Directory\n            (Uppercase i) Includes directory specified by the Directory variable in the list of directories searched for source files. The default is to look for source files in the following directories:\n              *    The directory the source file was located in when it was compiled. This directory is searched only if the compiler placed the source path in the object.\n              *    The current directory.\n              *    The directory where the program is currently located.</p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 1295813, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9f94581af9fbb689ab0da7e68d4f7256?s=128&d=identicon&r=PG", "display_name": "Vcoder", "link": "https://stackoverflow.com/users/1295813/vcoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1426860326, "last_edit_date": 1426860326, "creation_date": 1426854913, "answer_id": 29166650, "question_id": 29126055, "link": "https://stackoverflow.com/questions/29126055/libqrencode-segmentation-fault-couldnt-read-qrspec-c/29166650#29166650", "title": "libqrencode - Segmentation fault couldn&#39;t read &quot;qrspec.c&quot;", "body": "<p>I found the problem... The installation of the lib generated problems and caused the symbolic links to exist as a simple file and the library just wasn't there...</p>\n\n<p>This is the missing file \"/usr/local/lib/libqrencode.so.3.4.4\" which is the code itself... I was looking at the files and didn't notice it because there was a file called libqrencode.so.3.4 but this file was supose to be a symbolic link to libqrencode.so.3.4.4 since libqrencode.so.3.4.4 didn't exist, instead of the symbolic link failing, it created a empty file with that same name...</p>\n"}], "owner": {"reputation": 124, "user_id": 1295813, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9f94581af9fbb689ab0da7e68d4f7256?s=128&d=identicon&r=PG", "display_name": "Vcoder", "link": "https://stackoverflow.com/users/1295813/vcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 29166650, "answer_count": 2, "score": 0, "last_activity_date": 1426860326, "creation_date": 1426692453, "last_edit_date": 1495540616, "question_id": 29126055, "link": "https://stackoverflow.com/questions/29126055/libqrencode-segmentation-fault-couldnt-read-qrspec-c", "title": "libqrencode - Segmentation fault couldn&#39;t read &quot;qrspec.c&quot;", "body": "<p>I previously made this <a href=\"https://stackoverflow.com/questions/29107183/qrencode-segmentation-fault-core-dumped\" title=\"question\">question </a> and got a light at the end of the tunnel by the response that I got. But now that I found the problem, I don't understand it. I don't have root priv. Whenever I run the program I get segmentation fault and a core file. When I analyse it with dbx I get this </p>\n\n<pre><code>reading symbolic information ...\n\nSegmentation fault in QRspec_newFrame at line 546 in file \"\" ($t1)\ncouldn't read \"qrspec.c\"\n</code></pre>\n\n<p>How come he can't find qrspec.c if that file was included on the process of generating the lib? (I wasn't involved on that process so I have no idea if it went 100% but I gave the .tar with all the files). Also that file belongs to libqrencode.</p>\n\n<p>Compiling:</p>\n\n<pre><code>xlc_r7 -g qrgen.c -lqrencode -L/usr/local/lib -I/usr/local/include\n</code></pre>\n\n<p>I'm starting to bealive it can't find the file because there is a .so symbolic link missing on the /usr/local/lib folder. Could that be it? (Only .a , .la and .so.3 in there)</p>\n\n<p>I think my problem is similiar to this <a href=\"https://stackoverflow.com/questions/21530577/fatal-error-python-h-no-such-file-or-directory\">one</a> but I can't install the lib again unless that is the real problem.</p>\n\n<p>Machine: Unix AIX powerpc model: IBM,9117-MMB\nxlc version: 12.01.0000.0000</p>\n"}, {"tags": ["c++", "c", "logging", "gdb"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426694142, "post_id": 29126024, "comment_id": 46479480, "body": "If you can&#39;t log errors from within the program after segfault or stack overflow, you can log <i>intended</i> actions before attempting them."}, {"owner": {"reputation": 777, "user_id": 2422940, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7a760218278e61ac11b942632a56a4?s=128&d=identicon&r=PG", "display_name": "user2422940", "link": "https://stackoverflow.com/users/2422940/user2422940"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426694563, "post_id": 29126024, "comment_id": 46479812, "body": "i already did that. I am using log4cpp, but i would like to have more information than what is the last action that has been executed.in order to debug easly and be able to re-run the program if possible"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426695529, "post_id": 29126024, "comment_id": 46480515, "body": "Perhaps you need a two-stage process. First to isolate where the error is occurring. When you have found it, record more detailed information, perhaps with home-made tools writing to a file yourself."}, {"owner": {"reputation": 777, "user_id": 2422940, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7a760218278e61ac11b942632a56a4?s=128&d=identicon&r=PG", "display_name": "user2422940", "link": "https://stackoverflow.com/users/2422940/user2422940"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426696091, "post_id": 29126024, "comment_id": 46480894, "body": "yes this is my goal. after some research i think i will use another deamon to check every 5 min or so if my other deamon is running or not in order to re-launch it if its down. with this setteled i now need to record the error. this is where i am stuck."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 3, "creation_date": 1426697714, "post_id": 29126024, "comment_id": 46482021, "body": "Use  a master process that <code>fork()</code>s the actual worker process and then blocks indefinitely <code>wait()</code>ing for it.  If the child process crashes, <code>wait</code> will return you an error exit code that you can log and eventually restart the child process."}, {"owner": {"reputation": 420, "user_id": 2281645, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/94ECq.jpg?s=128&g=1", "display_name": "Tanner", "link": "https://stackoverflow.com/users/2281645/tanner"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1426698184, "post_id": 29126024, "comment_id": 46482336, "body": "To add to what @5gon12eder suggested, as the child process runs, it can re-write some diagnostic data to file, shared memory, etc. Then, the parent process can log this when the child crashes."}, {"owner": {"reputation": 777, "user_id": 2422940, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7a760218278e61ac11b942632a56a4?s=128&d=identicon&r=PG", "display_name": "user2422940", "link": "https://stackoverflow.com/users/2422940/user2422940"}, "edited": false, "score": 0, "creation_date": 1426699126, "post_id": 29126024, "comment_id": 46482933, "body": "i got your point. i will try to implement this solution right now. thanks for the help"}], "owner": {"reputation": 777, "user_id": 2422940, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7a760218278e61ac11b942632a56a4?s=128&d=identicon&r=PG", "display_name": "user2422940", "link": "https://stackoverflow.com/users/2422940/user2422940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426696145, "creation_date": 1426692344, "last_edit_date": 1426696145, "question_id": 29126024, "link": "https://stackoverflow.com/questions/29126024/catch-all-errors-and-exception-related-my-program", "title": "catch all errors and exception related my program", "body": "<p>I am currently working on a c++ daemon program that listen on a port for incoming requests.</p>\n\n<p>I would like to catch all the errors related to the program for that I implemented a logger in my program and catched some eventual ones, but other errors remain uncatchable using those methodes, example the Segfault or if the program was stopped because of memory shortage.\nI had the idea of using the 'bmesg' which contains logs of different process and then take what I need from there. the problem with this approach is that the logs from 'bmesg' don't contain human readable information more than that, the logs are not dated, so i used 'gdb' on my program, now i logs are more elaborated and contain better information but i can't catch the message of 'gdb'\nmy questions are:</p>\n\n<ol>\n<li>Is my approach to this problem correct? If yes how can i continue from where i am now</li>\n<li>Is there another way to listen to errors better than this.</li>\n<li>I will need somthing similar in a C program do you have a suggestion.</li>\n</ol>\n\n<p><strong>EDIT</strong></p>\n\n<p>after some research i think i will use another deamon to check every 5 min or so if my other deamon is running or not in order to re-launch it if its down. with this setteled i now need to record the error. this is where i am stuck</p>\n"}, {"tags": ["c", "variables", "terminate"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1426692598, "post_id": 29126023, "comment_id": 46478319, "body": "It won&#39;t work as the &quot;stringification&quot; will make a string of the symbol <code>ULLONG_MAX</code>, i.e. you get the string <code>&quot;ULLONG_MAX&quot;</code>."}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426692772, "post_id": 29126023, "comment_id": 46478460, "body": "Yes, that&#180;s right it returns 10 as the length of <code>ULLONG_MAX</code>. The problematic behavior is the real question though. But sorry for that I don&#180;t have a useful code to provide you."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1426693063, "post_id": 29126023, "comment_id": 46478672, "body": "you are asking us to debug a program without showing the source code or showing the error message(s). We are not wizards"}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 2, "creation_date": 1426693214, "post_id": 29126023, "comment_id": 46478788, "body": "I don&#180;t ask for debug. Not indirectly. Exactly because you are not wizards. If there is a real need for the entire code (which I doubt).. I am sorry but the code is private.However, I can show it only against private help as in team viewer. Also.. there are no error message(s). I wouldn&#180;t miss to point them out."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 2, "creation_date": 1426696671, "post_id": 29126023, "comment_id": 46481307, "body": "Can you pick a more descriptive title please?"}], "answers": [{"comments": [{"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426693064, "post_id": 29126215, "comment_id": 46478675, "body": "Their values are appropriate. I can show you for like 1 minute in team viewer how it does that if I comment-out this declaration."}, {"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426694529, "post_id": 29126215, "comment_id": 46479783, "body": "@Malina I tried your code on my PC, running VS 2012 compiler. It did not allow me to allocate an array using your define with a strlen. On my compiler config it demands a constant and not a variable  of any sort. Maybe that is a undefinied behavior"}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426695633, "post_id": 29126215, "comment_id": 46480584, "body": "I am with a mingw compiler. Also variable-sized arrays are <code>c99-specific</code>."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426696787, "post_id": 29126215, "comment_id": 46481391, "body": "@Malina VLA are only allowed inside functions. Your question does not show <code>variable</code> as being declared inside any function. See <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">sscce.org</a>"}], "tags": [], "owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "is_accepted": false, "score": 0, "last_activity_date": 1426692827, "creation_date": 1426692827, "answer_id": 29126215, "question_id": 29126023, "link": "https://stackoverflow.com/questions/29126023/strange-behavior-when-attempting-to-obtain-number-of-digits-of-unsigned-long-lon/29126215#29126215", "title": "Strange behavior when attempting to obtain number of digits of unsigned long long&#180;s maximum", "body": "<p>When you work with defines, you have to be aware that it is preprocessed before compilation begins.</p>\n\n<p>This means, that it can become pretty hard to debug, since the code was only pasted there and the compiler didn't check for semantics, type error, etc.</p>\n\n<p>Try printing ULLONG_MAX and its strlen. CHeck if none of those have weird values when you use your STRINGIFY.</p>\n"}, {"comments": [{"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426710000, "post_id": 29127599, "comment_id": 46489539, "body": "This is useful and related and helps and it is cool. I wouldn&#180;t skip to approve it as an answer."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426710365, "post_id": 29127599, "comment_id": 46489748, "body": "Thank you. Maybe you should change the title of the question to something more descriptive ?"}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426713960, "post_id": 29127599, "comment_id": 46491770, "body": "Ahh.. maybe it is too late."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428769902, "post_id": 29127599, "comment_id": 47308875, "body": "Note: <code>((3+(s) * CHAR_BIT) *4 &#47; 13)</code> works well enough for size 1,2,4,8 and <code>CHAR_BIT==8</code>.  The key is to use a ratio above log10(2).  Without using 3+ digit integers, found that <code>((s) * CHAR_BIT * 28 &#47; 93 + 1)</code> to be optimal. <a href=\"http://stackoverflow.com/q/18708679/2410359\">stackoverflow.com/q/18708679/2410359</a>"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": true, "score": 0, "last_activity_date": 1426696408, "creation_date": 1426696408, "answer_id": 29127599, "question_id": 29126023, "link": "https://stackoverflow.com/questions/29126023/strange-behavior-when-attempting-to-obtain-number-of-digits-of-unsigned-long-lon/29127599#29127599", "title": "Strange behavior when attempting to obtain number of digits of unsigned long long&#180;s maximum", "body": "<p>IIUC, the OQ wants the size needed to print the maximum values in decimal. The below works for sizes of 8 bits upto 64 bits, at least for <code>CHAR_BIT==8</code> :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n#define ASCII_SIZE(s) ((3+(s) * CHAR_BIT) *4 / 13)\n\nint main(void)\n{\nprintf(\"unsigned char : %zu\\n\", ASCII_SIZE(sizeof(unsigned char)) );\nprintf(\"unsigned short int : %zu\\n\", ASCII_SIZE(sizeof(unsigned short int)) );\nprintf(\"unsigned int : %zu\\n\", ASCII_SIZE(sizeof(unsigned int)) );\nprintf(\"unsigned long : %zu\\n\", ASCII_SIZE(sizeof(unsigned long)) );\nprintf(\"unsigned long long : %zu\\n\", ASCII_SIZE(sizeof(unsigned long long)) );\n\nprintf(\"          Ding : %u\\n\", UINT_MAX );\nprintf(\"     Lang Ding : %lu\\n\", ULONG_MAX );\nprintf(\"Heel lang Ding : %llu\\n\", ULLONG_MAX );\n\nreturn 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Output:</p>\n\n<pre><code>unsigned char : 3\nunsigned short int : 5\nunsigned int : 10\nunsigned long : 20\nunsigned long long : 20\n          Ding : 4294967295\n     Lang Ding : 18446744073709551615\nHeel lang Ding : 18446744073709551615\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 0, "last_activity_date": 1426696599, "creation_date": 1426696599, "answer_id": 29127682, "question_id": 29126023, "link": "https://stackoverflow.com/questions/29126023/strange-behavior-when-attempting-to-obtain-number-of-digits-of-unsigned-long-lon/29127682#29127682", "title": "Strange behavior when attempting to obtain number of digits of unsigned long long&#180;s maximum", "body": "<p>I don't know what causes your crash. To investigate that I'd first want to look at the preprocessor output (<code>cc -E</code>)</p>\n\n<p>But more importantly, your whole approach is wrong. The length of the preprocessor expansion of <code>ULLONG_MAX</code> is not guaranteed to have any relationship to the length of that number formatted as a string of decimal digits. The first system I checked had this:</p>\n\n<pre><code>#define ULLONG_MAX (LLONG_MAX * 2ULL + 1)\n</code></pre>\n\n<p>which fully expanded becomes this:</p>\n\n<pre><code>(9223372036854775807LL * 2ULL + 1)\n</code></pre>\n\n<p>and if you managed to get the <code>strlen</code> of that, it would be quite a bit larger than the length of <code>18446744073709551615</code> which is the same number, represented in the way you were probably thinking of.</p>\n\n<p>That means your buffer might be too large. But it also might be too small. Think about the possibility of <code>#define ULLONG_MAX 0xffffffffffffffff</code>.</p>\n\n<p>You need to calculate your buffer size using numeric operations, not string operations. The number of digits in the decimal representation of a positive integer <code>n</code> is <code>ceil(log10(n))+1</code>. You can't do that calculation exactly in the preprocessor because it doesn't do floating point. But you can do a reasonable approximation.</p>\n\n<p>The number of digits in the base 2 representation of <code>ULLONG_MAX</code> is the number of bits in the type: <code>sizeof(unsigned long long)*CHAR_BIT</code>. The number of decimal digits is roughly the number of base 2 digits times <code>log(2)/log(10)</code>. And now wildplasser has just posted an answer so I'll stop here and point out that <code>log(2)/log(10)</code> is slightly under 4/13 which is why wildplasser's answer works.</p>\n"}, {"comments": [{"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426697796, "post_id": 29127695, "comment_id": 46482086, "body": "Thanks. This was the fix I was thinking of. But the real question was the strange behavior. I guess I will drop it."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 0, "last_activity_date": 1426696631, "creation_date": 1426696631, "answer_id": 29127695, "question_id": 29126023, "link": "https://stackoverflow.com/questions/29126023/strange-behavior-when-attempting-to-obtain-number-of-digits-of-unsigned-long-lon/29127695#29127695", "title": "Strange behavior when attempting to obtain number of digits of unsigned long long&#180;s maximum", "body": "<p>You have to expand the argument of <code>STRINGIFY</code> once more to have the value of the constant</p>\n\n<pre><code>#define STRINGIFY_(x) #x\n#define STRINGIFY(x) STRINGIFY_(x)\n</code></pre>\n\n<p>then here you should use the <code>sizeof</code> operator</p>\n\n<pre><code>#define ULLONG_MAX_STRING STRINGIFY(ULLONG_MAX)\n#define NUMERAL_MAXIMUM (sizeof(ULLONG_MAX_STRING)-1)\n</code></pre>\n\n<p>which does everything at compile time.</p>\n"}], "owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 29127599, "answer_count": 4, "score": -2, "last_activity_date": 1435940851, "creation_date": 1426692343, "last_edit_date": 1435940851, "question_id": 29126023, "link": "https://stackoverflow.com/questions/29126023/strange-behavior-when-attempting-to-obtain-number-of-digits-of-unsigned-long-lon", "title": "Strange behavior when attempting to obtain number of digits of unsigned long long&#180;s maximum", "body": "<p>I like the luxury. I wanted to invent a way for you to obtain the number of digits the <code>unsigned long long int</code> maximum possess. All that automatically.\nHere it is:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;string.h&gt;\n\n#define STRINGIFY(x) #x\n#define ULLONG_MAX_STRING STRINGIFY(ULLONG_MAX)\n#define NUMERAL_MAXIMUM strlen(ULLONG_MAX_STRING)\n</code></pre>\n\n<p>Does this work as described?</p>\n\n<hr>\n\n<p>Now about the strange behavior that pretty much answers the question from above.\nIf I declare a variable like so (<code>-std=c99</code> specific):</p>\n\n<pre><code>char variable [NUMERAL_MAXIMUM];\n</code></pre>\n\n<p>instead of declaring automatic-scoped variable, array with the size of 20, it terminates the program before it even reaches that line. Though if I don\u00b4t declare the variable like so, nothing terminates and the program continues to work.</p>\n\n<hr>\n\n<p><strong>What is going on?</strong></p>\n\n<hr>\n\n<p>Update: Even more strange is that the program does that only if I use this obtained length as a size of an array.</p>\n"}, {"tags": ["c++", "c", "r", "compilation", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1426695219, "post_id": 29125901, "comment_id": 46480278, "body": "See this example on how to call R from C: <a href=\"https://gist.github.com/Sharpie/323498\" rel=\"nofollow noreferrer\">gist.github.com/Sharpie/323498</a>"}, {"owner": {"reputation": 95, "user_id": 847169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cd36428ce4db6b026a825ad7a8d739?s=128&d=identicon&r=PG", "display_name": "Drmanifold", "link": "https://stackoverflow.com/users/847169/drmanifold"}, "reply_to_user": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1426695323, "post_id": 29125901, "comment_id": 46480361, "body": "Thanks. Yes, I am aware. But this is not what I want. I do not want to call R functions from C. I want to <b>turn</b> R functions into C functions."}, {"owner": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1426696699, "post_id": 29125901, "comment_id": 46481322, "body": "I don&#39;t think that there is a large overhead in calling R from C. Every time you execute a line in R you are calling some C function. However, I don&#39;t think that what you ask is feasible and efficient in general. If it were, every R function would be translated in C and then in R you just had simple wrapper to call the C function."}, {"owner": {"reputation": 95, "user_id": 847169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cd36428ce4db6b026a825ad7a8d739?s=128&d=identicon&r=PG", "display_name": "Drmanifold", "link": "https://stackoverflow.com/users/847169/drmanifold"}, "reply_to_user": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1426696953, "post_id": 29125901, "comment_id": 46481507, "body": "There is an inherently large overhead due to the fact that the R objective functions is going to be slow and called several thousands of times during the optimization. As for the efficiency, this kind of approach was very successfully implemented several python packages (for instance in Theano.)"}, {"owner": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1426697208, "post_id": 29125901, "comment_id": 46481673, "body": "I admit that I&#39;m not much expert in this territory, but I would be very surprised if you could enhance the efficiency of an R function through a translator that could possibly translate any function. Why it hasn&#39;t been done?"}, {"owner": {"reputation": 95, "user_id": 847169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cd36428ce4db6b026a825ad7a8d739?s=128&d=identicon&r=PG", "display_name": "Drmanifold", "link": "https://stackoverflow.com/users/847169/drmanifold"}, "reply_to_user": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1426697397, "post_id": 29125901, "comment_id": 46481814, "body": "Well It does work quite well in python. Again you should check Theano and Cython. I have no idea why it hasn&#39;t been implemented in R."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1426697490, "post_id": 29125901, "comment_id": 46481876, "body": "Because you can&#39;t do this. With a language this established and popular, do you <i>really</i> think you are the first person to think about this?"}, {"owner": {"reputation": 95, "user_id": 847169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cd36428ce4db6b026a825ad7a8d739?s=128&d=identicon&r=PG", "display_name": "Drmanifold", "link": "https://stackoverflow.com/users/847169/drmanifold"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1426697819, "post_id": 29125901, "comment_id": 46482101, "body": "@DirkEddelbuettel . Of course not. That&#39;s why my first question is if it&#39;s even possible. I would really appreciate some directions to understand why it is possible in python and not in R."}, {"owner": {"reputation": 85935, "user_id": 211116, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf422e96227ee42abf42188feee10d9d?s=128&d=identicon&r=PG", "display_name": "Spacedman", "link": "https://stackoverflow.com/users/211116/spacedman"}, "edited": false, "score": 0, "creation_date": 1426697979, "post_id": 29125901, "comment_id": 46482194, "body": "Its not possible in python. Theano and cython are <i>nothing</i> like a way to turn arbitrary python functions into C. They have strictly limited ranges of functionality. A similar system in R is possible, but it would be in the realm of some &quot;little language&quot; of simple array processing, rather than full R."}, {"owner": {"reputation": 95, "user_id": 847169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cd36428ce4db6b026a825ad7a8d739?s=128&d=identicon&r=PG", "display_name": "Drmanifold", "link": "https://stackoverflow.com/users/847169/drmanifold"}, "reply_to_user": {"reputation": 85935, "user_id": 211116, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf422e96227ee42abf42188feee10d9d?s=128&d=identicon&r=PG", "display_name": "Spacedman", "link": "https://stackoverflow.com/users/211116/spacedman"}, "edited": false, "score": 0, "creation_date": 1426698273, "post_id": 29125901, "comment_id": 46482390, "body": "@Spacedman Thanks. You made me realise that the way I formulated my question makes it too broad. I was actually only thinking of functions you would typically see as cost functions in statistical and machine learning problems."}, {"owner": {"reputation": 85935, "user_id": 211116, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf422e96227ee42abf42188feee10d9d?s=128&d=identicon&r=PG", "display_name": "Spacedman", "link": "https://stackoverflow.com/users/211116/spacedman"}, "edited": false, "score": 1, "creation_date": 1426699011, "post_id": 29125901, "comment_id": 46482858, "body": "Okay, write a formal spec for such a thing and then you should be able to figure out if its possible to transcode it into C or C++ and then dynamically load it with Rcpp. Its probably easier to learn C or C++."}], "answers": [{"comments": [{"owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "edited": false, "score": 1, "creation_date": 1426698557, "post_id": 29128101, "comment_id": 46482535, "body": "<a href=\"http://www.renjin.org/\" rel=\"nofollow noreferrer\">Renjin</a> compiles a reasonably large swath of R code to Java for reasonable performance (I&#39;m told). Relevant for understanding the challenges of compiling R, though obviously not to C and the original question. Somehow it seems like &#39;native&#39; C / C++ code should be easy to handle via JNI, but I guess that&#39;s arm-chair programming."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "edited": false, "score": 0, "creation_date": 1426698665, "post_id": 29128101, "comment_id": 46482606, "body": "It cannot deal with Rcpp so by its reverse depends being somewhat far-reaching, it excludes a large set of CRAN."}, {"owner": {"reputation": 95, "user_id": 847169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cd36428ce4db6b026a825ad7a8d739?s=128&d=identicon&r=PG", "display_name": "Drmanifold", "link": "https://stackoverflow.com/users/847169/drmanifold"}, "edited": false, "score": 0, "creation_date": 1426719637, "post_id": 29128101, "comment_id": 46494062, "body": "Thanks for the explanations and references. However, What I am asking is much more limited in scope. How, if it is possible, to go about writing a mathematical expression compiler that would turn R mathematical expressions into C. If this can be done, the next step for me would be to study RcppDE code to see how to encapsulate and pass an external pointer object encapsulating the pointer to the compiled C function to the C optimizer."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 7, "last_activity_date": 1426700789, "last_edit_date": 1426700789, "creation_date": 1426697764, "answer_id": 29128101, "question_id": 29125901, "link": "https://stackoverflow.com/questions/29125901/passing-r-functions-to-c-as-c-functions/29128101#29128101", "title": "Passing R functions to C as C functions", "body": "<p>Some pointers at prior experiments:</p>\n\n<ul>\n<li><p><a href=\"http://www.hipersoft.rice.edu/rcc/\" rel=\"nofollow\">R to C compiler at Rice</a>: abandonded</p></li>\n<li><p><a href=\"http://www.rforge.net/r2c/\" rel=\"nofollow\">R to C compiler by Simon</a>: also stale.  </p></li>\n<li><p>R and LLVM attempts by Duncan Temple Lang:  There are two packages, and a published paper, yet (seemingly) nobody uses it.  Been a while since I read the paper(s) but one limitation was that it didn't even attempted to cover all of R.</p></li>\n</ul>\n\n<p>One of the reasons you can't easily do this is that the languages excels at computing on the language as well as non-standard evaluation versus standard evaluation, promises, forced evaluation and so.</p>\n\n<p>Lastly, for your narrow case of passing a <em>compiled objective function</em> to an optmizer: see my <a href=\"http://cran.rstudio.com/package=RcppDE\" rel=\"nofollow\">RcppDE package</a> which does that.</p>\n\n<p>H/t to Josh for the reminder about Simon's attempt.</p>\n"}], "owner": {"reputation": 95, "user_id": 847169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cd36428ce4db6b026a825ad7a8d739?s=128&d=identicon&r=PG", "display_name": "Drmanifold", "link": "https://stackoverflow.com/users/847169/drmanifold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 3, "answer_count": 1, "score": 7, "last_activity_date": 1426700789, "creation_date": 1426692027, "last_edit_date": 1426698928, "question_id": 29125901, "link": "https://stackoverflow.com/questions/29125901/passing-r-functions-to-c-as-c-functions", "title": "Passing R functions to C as C functions", "body": "<h1>Background</h1>\n\n<p>I am writing a package implementing a specific optimization algorithm in R for various pre-specified objective functions (functions to optimize). The optimization code itself is written in C. In order to make the code as efficient as possible I also re-implemented the objective function in C. At the current stage the role of R is to provide an interface to the C code using .Call.</p>\n\n<h1>Goal</h1>\n\n<p>I would like the package to be able to handle any user supplied objective function. However, I do not want to call R functions from C, that would incur a large overhead and will most likely be excruciatingly slow.</p>\n\n<p><strong>What I really want is a way to pass a limited class of R functions (Those you would typically see as cost functions in statistical and machine learning) as a parameter, have this R function converted to a C function</strong> and then subsequently used as an objective function in the optimization algorithm.</p>\n\n<h1>Solution Idea</h1>\n\n<p>R has a strong parenting with LISP. It is pretty straight forward to get a function's abstract syntax tree(AST). I am thinking it <em>may</em> be possible to parse the AST as a C function and then either compile it or just pass it dynamically (I don't know if that is even is doable in C)</p>\n\n<h1>Questions</h1>\n\n<ul>\n<li>Is the solution idea above even feasible?</li>\n<li>Is there any other way to do this?</li>\n<li>What must I learn to be able to do this? </li>\n</ul>\n\n<p>Note: Doing this as an R package is not necessary. Trying to do this inside the rigid structure of an R package might make things even more difficult. </p>\n"}, {"tags": ["c++", "c", "node.js", "libuv"], "answers": [{"comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1586173807, "post_id": 29782334, "comment_id": 108021366, "body": "Can you give example for one such task?"}], "tags": [], "owner": {"reputation": 1890, "user_id": 280310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acb8a5d8b51267e636e4736eee1379ea?s=128&d=identicon&r=PG", "display_name": "saghul", "link": "https://stackoverflow.com/users/280310/saghul"}, "is_accepted": true, "score": 1, "last_activity_date": 1429647612, "creation_date": 1429647612, "answer_id": 29782334, "question_id": 29125862, "link": "https://stackoverflow.com/questions/29125862/libuv-event-loop-prepare-handle-and-check-handle-usage/29782334#29782334", "title": "libuv event loop: prepare handle and check handle usage", "body": "<p>The i/o operations happen between those 2, so you may want to perform some operation before blocking for i/o (prepare handles), and after i/o (check handles).</p>\n\n<p>This diagram illustrates how the libuv event loop operates internally: <a href=\"http://docs.libuv.org/en/v1.x/design.html#the-i-o-loop\" rel=\"nofollow\">http://docs.libuv.org/en/v1.x/design.html#the-i-o-loop</a></p>\n"}], "owner": {"reputation": 571, "user_id": 3887433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5a651139b81334e63c6c035f6cd26712?s=128&d=identicon&r=PG&f=1", "display_name": "ftes", "link": "https://stackoverflow.com/users/3887433/ftes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 29782334, "answer_count": 1, "score": 0, "last_activity_date": 1429647612, "creation_date": 1426691937, "question_id": 29125862, "link": "https://stackoverflow.com/questions/29125862/libuv-event-loop-prepare-handle-and-check-handle-usage", "title": "libuv event loop: prepare handle and check handle usage", "body": "<p>What is the reason to invoke the <code>prepare handle callback</code> and the <code>check handle callback</code> in the libuv event loop?</p>\n"}, {"tags": ["c", "memory-alignment", "visual-studio-6"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426691046, "post_id": 29125371, "comment_id": 46477117, "body": "Have you checked the <a href=\"https://msdn.microsoft.com/en-us/library/aa296569%28v=vs.60%29.aspx\" rel=\"nofollow noreferrer\">MSDN docs</a>?  I&#39;m not sure offhand how that corresponds to the alignment options in VS 2013, and it&#39;s a bit imprecise, but I&#39;m not sure there&#39;s any better information to be had.  You may need to examine your VS6 programs&#39; actual behavior to sort out details."}], "answers": [{"tags": [], "owner": {"reputation": 1728, "user_id": 33130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f54b7c6904b59afe35f766cc2604733?s=128&d=identicon&r=PG", "display_name": "Craig Lebakken", "link": "https://stackoverflow.com/users/33130/craig-lebakken"}, "is_accepted": true, "score": 2, "last_activity_date": 1426691039, "creation_date": 1426691039, "answer_id": 29125533, "question_id": 29125371, "link": "https://stackoverflow.com/questions/29125371/what-was-default-variable-boundary-alignment-in-visual-studio-6/29125533#29125533", "title": "What was default variable boundary alignment in Visual Studio 6?", "body": "<p>According to MSDN \"<a href=\"https://msdn.microsoft.com/en-us/library/aa296569%28v=vs.60%29.aspx\" rel=\"nofollow\">Structure Alignment</a>\" documentation:</p>\n\n<blockquote>\n  <p>The default pack size for Windows 3.x is 2, whereas the default for\n  Win32 is 8.</p>\n</blockquote>\n\n<p>Be aware that compiler options can be overridden with <strong>#pragma pack</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1426693049, "last_edit_date": 1426693049, "creation_date": 1426692610, "answer_id": 29126132, "question_id": 29125371, "link": "https://stackoverflow.com/questions/29125371/what-was-default-variable-boundary-alignment-in-visual-studio-6/29126132#29126132", "title": "What was default variable boundary alignment in Visual Studio 6?", "body": "<p>As far as I can tell, Visual Studio's (default) layout and alignment <em>rules</em> have not changed between <a href=\"https://msdn.microsoft.com/en-us/library/aa296569%28v=vs.60%29.aspx\" rel=\"nofollow\">VS 6</a> and <a href=\"https://msdn.microsoft.com/en-us/library/1d48zaa8.aspx\" rel=\"nofollow\">VS 2013</a>.  Structure members are laid out on boundaries governed by their natural alignment requirements (relative to the lowest address of the structure representation), subject to a maximum of 8 padding bytes between members.  Structures' own alignment requirements are the same as the largest alignment requirement of any member.  All that is pretty routine, as it ensures that aligning a structure also aligns all its members.</p>\n\n<p>Therefore, if the two compilers produce different binary representations of <code>struct</code>s  declared the same way, then it's likely that something about the members is changing.  For instance, the size of pointers will differ between code built for Win32 and for Win64; even if you ignore their values (as you would need to do when transferring data between machines), the differing sizes of any pointer members would be likely to alter structure layouts.</p>\n\n<p>Look out especially for bitfields.  The size of the underlying integer datatype is implementation dependent, plus bitfield widths interact in sometimes non-obvious ways to affect the number of such units that are required at a given position in a given <code>struct</code>.</p>\n"}], "owner": {"reputation": 2706, "user_id": 25961, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91c5071ab875b23ad39a33a13cd4cc36?s=128&d=identicon&r=PG", "display_name": "leiflundgren", "link": "https://stackoverflow.com/users/25961/leiflundgren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 29125533, "answer_count": 2, "score": 0, "last_activity_date": 1426693049, "creation_date": 1426690606, "last_edit_date": 1426692524, "question_id": 29125371, "link": "https://stackoverflow.com/questions/29125371/what-was-default-variable-boundary-alignment-in-visual-studio-6", "title": "What was default variable boundary alignment in Visual Studio 6?", "body": "<p>I am trying to upgrade old Visual Studio 6 projects. They use \"default\" memory-boundary alignment. However, it seems that defaults for Visual Studio 6 and 2013 are not the same.</p>\n\n<p>Anyone know what the old default was?<br>\n<code>align(1)</code> ?</p>\n\n<p>(I need to know this since during the migration we will have a mix of programs. They communicate by serializing C-structs to byte-arrays and passing the array between programs. If the alignments are different that will fail horribly.)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 4, "creation_date": 1426688558, "post_id": 29124557, "comment_id": 46475280, "body": "<code>#define p printf</code> and <code>#define s scanf</code> causes a LOT of problems! Remove those and type <code>printf</code> and <code>scanf</code> manually. Also, what is <code>i&lt;input_code==1</code>,<code>i&lt;input_code==2</code> and <code>i&lt;input_code==3</code>?"}, {"owner": {"reputation": 28223, "user_id": 57095, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lhfGN.png?s=128&g=1", "display_name": "Alberto Zaccagni", "link": "https://stackoverflow.com/users/57095/alberto-zaccagni"}, "edited": false, "score": 3, "creation_date": 1426688735, "post_id": 29124557, "comment_id": 46475425, "body": "What specifically is the problem? Do you see anything printed? Is it just formatting?"}, {"owner": {"reputation": 11, "user_id": 4632250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sA0TmY1rS4Q/AAAAAAAAAAI/AAAAAAAAACA/GPX9zil9BlQ/photo.jpg?sz=128", "display_name": "Aaron Tumbokon", "link": "https://stackoverflow.com/users/4632250/aaron-tumbokon"}, "edited": false, "score": 0, "creation_date": 1426688910, "post_id": 29124557, "comment_id": 46475554, "body": "Well the input_code==1 is for the BSIT course to display.. and input_code==2 for BSCPE and input_code==3 for BSCS"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1426689354, "post_id": 29124557, "comment_id": 46475873, "body": "<code>i&lt;input_code==2</code> might mean something peculiar (the loop could iterate once) if <code>==</code> had precedence over <code>&lt;</code> but it doesn&#39;t. This is equivalent to <code>(i&lt;input_code)==2</code> which never evaluates to <code>1 (true)</code> so the loop is never iterated."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1426689778, "post_id": 29124557, "comment_id": 46476206, "body": "The <code>i&lt;input_code==2</code> (and the other similar expressions) will be interpreted as <code>(i&lt;input_code) == 2</code> which will <b>always be false</b>, since the relational check <code>i &lt; input_code</code> will be either false (<code>0</code>) or true (<code>1</code>). What is intended with this expression is unclear. I understand checking if <code>input_code == 2</code> but why is the <code>i &lt;</code> in front of it?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4632250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sA0TmY1rS4Q/AAAAAAAAAAI/AAAAAAAAACA/GPX9zil9BlQ/photo.jpg?sz=128", "display_name": "Aaron Tumbokon", "link": "https://stackoverflow.com/users/4632250/aaron-tumbokon"}, "edited": false, "score": 0, "creation_date": 1426690695, "post_id": 29124978, "comment_id": 46476882, "body": "Thank you Very Much... You are the answer to my prayer :D"}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "reply_to_user": {"reputation": 11, "user_id": 4632250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sA0TmY1rS4Q/AAAAAAAAAAI/AAAAAAAAACA/GPX9zil9BlQ/photo.jpg?sz=128", "display_name": "Aaron Tumbokon", "link": "https://stackoverflow.com/users/4632250/aaron-tumbokon"}, "edited": false, "score": 1, "creation_date": 1426691745, "post_id": 29124978, "comment_id": 46477662, "body": "@AaronTumbokon , don&#39;t forget to mark the answer as the accepted answer ( click the tick mark next to the answer ) if this is the correct solution to your question."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1426689579, "creation_date": 1426689579, "answer_id": 29124978, "question_id": 29124557, "link": "https://stackoverflow.com/questions/29124557/how-to-display-the-student-name-in-their-respective-courses/29124978#29124978", "title": "How to Display the Student Name in their Respective Courses", "body": "<p>I think your problem is here</p>\n\n<pre><code>p(\"\\nBSIT Students\");\nfor (i=0; i&lt;input_code==1; i++)\n          |--------------|\n   {\n     p(\"\\nName: %s\",c[i].name); `&lt;----- This is where my problem starts`\n   }\n</code></pre>\n\n<p>what you want is</p>\n\n<pre><code>p(\"\\nBSIT Students\");\nfor (i=0; i&lt;5; i++)                  //iterate over all the students\n   {\n     if(!strcmp(c[i].course, c[i].course1)) //check for the match\n     printf(\"Name: %s\\n\",c[i].name);\n   }\n</code></pre>\n\n<p>Similar for other courses also.</p>\n\n<p>Note: I prefer <code>printf()</code> and <code>scanf()</code> over <code>p()</code> and <code>s()</code>. YMMV.</p>\n"}, {"tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1426692061, "last_edit_date": 1426692061, "creation_date": 1426690797, "answer_id": 29125441, "question_id": 29124557, "link": "https://stackoverflow.com/questions/29124557/how-to-display-the-student-name-in-their-respective-courses/29125441#29125441", "title": "How to Display the Student Name in their Respective Courses", "body": "<p>First of all, as everyone has suggested, <code>printf()</code> and <code>scanf()</code> are better.</p>\n\n<p>I noticed that you have a variable <code>course_code</code> in your struct that you have not used, so I used it to store the <code>item_code</code> of each student.</p>\n\n<p>Now, the <code>i&lt;item_code==1</code> is wrong.<br>\nWhat you need is <code>i&lt;5</code> ( since the number of students is 5 ) and then later, just use an <code>if( c[i].course_code == 1 )</code> statement before outputting the names.</p>\n\n<p>Here is a fixed version of your code ( only the part where I have made changes )</p>\n\n<pre><code>    c[i].course_code = input_code;      // the cource_code is assigned\n    if ( input_code == 1 )\n     {\n       bsit_list++;\n       strcpy( c[i].course , \"BSIT\" );\n     }\n    else if ( input_code == 2 )\n     {\n       bscpe_list++;\n       strcpy( c[i].course , \"BSCPE\" );\n     }\n    else if ( input_code == 3 )\n     {\n       bscs_list++;\n       strcpy( c[i].course , \"BSCS\" );\n     }\n  }\n\n  p(\"\\nBSIT Students\");\n\n  for ( i = 0 ; i &lt; 5 ; i++ )\n    {\n       if( c[i].course_code == 1 )       // this if statement is what is required\n         p(\"\\nName: %s\",c[i].name); \n    }\n  p(\"\\nCount: %d\",bsit_list);\n\n\n  p(\"\\n\\nBSCPE Students\");\n\n  for ( i = 0 ; i &lt; 5 ; i++ )\n   {\n     if( c[i].course_code == 2 )       // this if statement is what is required\n        p(\"\\nName: %s\",c[i].name);   \n   }\n  p(\"\\nCount: %d\",bscpe_list);\n\n\n  p(\"\\n\\nBSCS Students\");\n\n  for ( i = 0 ; i &lt; 5 ; i++ )\n   {\n     if( c[i].course_code == 3 )       // this if statement is what is required\n        p(\"\\nName: %s\",c[i].name);   \n   }\n  p(\"\\nCount: %d\",bscs_list);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4632250, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sA0TmY1rS4Q/AAAAAAAAAAI/AAAAAAAAACA/GPX9zil9BlQ/photo.jpg?sz=128", "display_name": "Aaron Tumbokon", "link": "https://stackoverflow.com/users/4632250/aaron-tumbokon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1426692061, "creation_date": 1426688380, "last_edit_date": 1426689011, "question_id": 29124557, "link": "https://stackoverflow.com/questions/29124557/how-to-display-the-student-name-in-their-respective-courses", "title": "How to Display the Student Name in their Respective Courses", "body": "<p>I'm having troubles displaying the names of the students\nfor their respective course... and that is the only problem I've\nhad... </p>\n\n<p>Thank you very much</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define p printf\n#define s scanf\nstruct stud\n{\n  char name[50];\n  char course1[50];\n  char course2[50];\n  char course3[50];\n  char course[50];\n  int course_code;\n}c[5];\nint main(int argc, char *argv[])\n{\n  int input_code,i,bsit_list=0,bscpe_list=0,bscs_list=0;\n\n  for (i=0; i&lt;5; i++)\n  {\n    strcpy(c[i].course1,\"BSIT\");\n    strcpy(c[i].course2,\"BSCPE\");\n    strcpy(c[i].course3,\"BSCS\");\n\n    p(\"\\n[%d] Enter Student Name: \",i+1);\n    s(\"%s\",c[i].name);\n    p(\"   [1] %s\",c[i].course1);\n    p(\"\\n   [2] %s\",c[i].course2);\n    p(\"\\n   [3] %s\",c[i].course3);\n    p(\"\\nEnter Student Code: \");\n    s(\"%d\",&amp;input_code);\n\n    if (input_code==1)\n     {\n       bsit_list++;\n       strcpy(c[i].course,\"BSIT\");\n     }\n    else if (input_code==2)\n     {\n       bscpe_list++;\n       strcpy(c[i].course,\"BSCPE\");\n     }\n    else if (input_code==3)\n     {\n       bscs_list++;\n       strcpy(c[i].course,\"BSCS\");\n     }\n   }\n\n  p(\"\\nBSIT Students\");\n  for (i=0; i&lt;input_code==1; i++)\n   {\n     p(\"\\nName: %s\",c[i].name); `&lt;----- This is where my problem starts`\n   }\n  p(\"\\nCount: %d\",bsit_list);\n\n  p(\"\\n\\nBSCPE Students\");\n  for (i=0; i&lt;input_code==2; i++)\n   {\n     p(\"\\nName: %s\",c[i].name);   `&lt;----- Also this`\n   }\n  p(\"\\nCount: %d\",bscpe_list);\n\n  p(\"\\n\\nBSCS Students\");\n  for (i=0; i&lt;input_code==3; i++)\n   {\n     p(\"\\nName: %s\",c[i].name);   `&lt;----- And this`\n   }\n  p(\"\\nCount: %d\",bscs_list);\n\n  getch();\n} \n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 0, "creation_date": 1426688195, "post_id": 29124389, "comment_id": 46475017, "body": "You can&#39;t just write <code>EOF</code> as a <code>while</code> condition. You need to test your read character against <code>EOF</code>. And don&#39;t forget to reserve enough memory. <code>strcat</code>ing stuff to your string constant should cause a segfault."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 2, "creation_date": 1426688333, "post_id": 29124389, "comment_id": 46475109, "body": "shouldn&#39;t that be <code>while(!EOF){</code> ;)"}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1426688632, "last_edit_date": 1426688632, "creation_date": 1426688316, "answer_id": 29124525, "question_id": 29124389, "link": "https://stackoverflow.com/questions/29124389/using-getchar-to-read-all-input/29124525#29124525", "title": "using getchar() to read all input", "body": "<p>Write this way</p>\n\n<pre><code>int c;\nwhile((c=getchar())!=EOF)\n{\n   if(islower(c)==true)\n    printf(\"%c\",c);\n}\n</code></pre>\n\n<p>It will print all the lowercase letters.</p>\n"}, {"comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426688503, "post_id": 29124546, "comment_id": 46475228, "body": "The input also is made up of multiple lines. It looks like Ozan is stripping all non alpha characters."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426688537, "post_id": 29124546, "comment_id": 46475264, "body": "@BillLynch OOps, q got edited."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426688574, "post_id": 29124546, "comment_id": 46475293, "body": "Yep. The original question didn&#39;t have the input in a code block, so the newlines were ignored by markdown."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4135303"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426688876, "post_id": 29124546, "comment_id": 46475539, "body": "yep. it&#39;s the part which i couldn&#39;t. I have to read all the lines and keep in an string @BillLynch"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4135303"}, "edited": false, "score": 0, "creation_date": 1426690582, "post_id": 29124546, "comment_id": 46476791, "body": "char *string;     char c;         string = &quot;&quot;;     c = &quot;&quot;;     --------------------------------        do{        c = getchar();               if(c==EOF)             break;        if (c != &#39;.&#39;)              \t  strcat(string,c);      }while(EOF);      printf(&quot;\\n%s&quot;,string); } ---------------------- @SouravGhosh   i tried this but i coudnt get that wht strcat isn&#39; working."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426690995, "post_id": 29124546, "comment_id": 46477080, "body": "@ozan either use an array or allocate memory to the pointer. I&#39;m off for the day. Try this and let me know. We&#39;ll discuss if any issues."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1426689056, "last_edit_date": 1426689056, "creation_date": 1426688360, "answer_id": 29124546, "question_id": 29124389, "link": "https://stackoverflow.com/questions/29124389/using-getchar-to-read-all-input/29124546#29124546", "title": "using getchar() to read all input", "body": "<p>You have some issues in your code, specifically with <code>while(EOF)</code> part. Also, your code can be simpler with a little additional effort.</p>\n\n<p>Check the below code for reference.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void)\n{\n    int input = 0;\n\n    while (( input = getchar()) != EOF)   //read untill EOF\n    {\n        if (islower(input ))           //print only lower case alphabetic character  \n            putchar(input);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Note: Just in case you want also to <em>convert</em> the UPPERCASE alphabates to lowercase and print, have a look at <a href=\"http://linux.die.net/man/3/tolower\" rel=\"nofollow\"><code>tolower()</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 4568534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GTz-_9seXd8/AAAAAAAAAAI/AAAAAAAAAqE/z93C03-vcMs/photo.jpg?sz=128", "display_name": "Razetime", "link": "https://stackoverflow.com/users/4568534/razetime"}, "is_accepted": false, "score": 0, "last_activity_date": 1426688372, "creation_date": 1426688372, "answer_id": 29124552, "question_id": 29124389, "link": "https://stackoverflow.com/questions/29124389/using-getchar-to-read-all-input/29124552#29124552", "title": "using getchar() to read all input", "body": "<p>first, make a variable that will get the character using <code>getchar()</code>, then\nsubstitute the <code>getchar()</code>s with the variable.\n<code>int v = getchar()</code>\nThen you will surely get proper output.\n   `</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4135303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "closed_date": 1426700513, "answer_count": 3, "score": 0, "last_activity_date": 1426689056, "creation_date": 1426688005, "last_edit_date": 1426688437, "question_id": 29124389, "link": "https://stackoverflow.com/questions/29124389/using-getchar-to-read-all-input", "closed_reason": "Needs more focus", "title": "using getchar() to read all input", "body": "<h3>Input:</h3>\n\n<pre><code>hi my name is john\nhow are you\nthanks.\n</code></pre>\n\n<h3>Desired Output:</h3>\n\n<pre><code>himynameisjohnhowareyouthanks\n</code></pre>\n\n<h3>My code is:</h3>\n\n<pre><code>int main(void){\n    {\n        char *strptr = \"\"; \n        int i = 0;\n\n        while(EOF){\n\n            while(islower(getchar())==true){\n                strcat(strptr,tolower(getchar()));\n            }\n            printf(\"%s\",strptr); \n        }              \n    }  \n}\n</code></pre>\n\n<p>How can i do it? Thanks.</p>\n"}, {"tags": ["c", "do-while"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1426687559, "post_id": 29124188, "comment_id": 46474554, "body": "<code>main()</code> should be <code>int main(void)</code>, to start with. Also, take care of the indent, please:-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426687757, "post_id": 29124188, "comment_id": 46474720, "body": "You logic does not seem to be good. Re-think the logic."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1426690191, "post_id": 29124188, "comment_id": 46476492, "body": "Why are you using <code>int</code>s for literally exactly what a <code>bool</code> is designed to do?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426690615, "post_id": 29124188, "comment_id": 46476819, "body": "regarding this line: &#39;scanf(&quot; %s&quot;, password);&#39; 1) always check the returned value from scanf (and family) to assure the input/conversion operation was successful.  2) the format specifier &#39;%s&quot; has no size limit, so the user can overflow the input buffer password[] leading to undefined behaviour and possibly a seg fault event.  suggest either &quot;%19x&quot; with pre-setting of the buffer to all &#39;\\0&#39; --or-- (better) using fgets() then remove trailing newline from buffer"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426691017, "post_id": 29124188, "comment_id": 46477094, "body": "the second call to scanf() will overlay the password[] even if the password meets all the criteria.  Suggest: remove second call to scanf() and move first call to scanf() to immediately after the &#39;do {&#39; statement."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1426691508, "post_id": 29124188, "comment_id": 46477469, "body": "the &#39;bool&#39;, &#39;true&#39;, and &#39;false&#39; are defined in the &#39;stdbool.h&#39; header file"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4685561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eb8707da2dd79999c191341d75bef37?s=128&d=identicon&r=PG&f=1", "display_name": "Anne", "link": "https://stackoverflow.com/users/4685561/anne"}, "edited": false, "score": 0, "creation_date": 1426688749, "post_id": 29124584, "comment_id": 46475438, "body": "I&#39;ll give that a try... Thank you"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 3, "user_id": 4685561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eb8707da2dd79999c191341d75bef37?s=128&d=identicon&r=PG&f=1", "display_name": "Anne", "link": "https://stackoverflow.com/users/4685561/anne"}, "edited": false, "score": 3, "creation_date": 1426689127, "post_id": 29124584, "comment_id": 46475717, "body": "@Anne, As Arun A. S. mentions, the check on the &quot;Great password!&quot; can also be removed as the statement will never be reached without it satisfying the <code>do...while</code> condition anyway. Dont forget to set your question as &quot;answered&quot; if this or other answers solved your issue! Welcome to SO."}], "tags": [], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "is_accepted": false, "score": 2, "last_activity_date": 1426695722, "last_edit_date": 1426695722, "creation_date": 1426688439, "answer_id": 29124584, "question_id": 29124188, "link": "https://stackoverflow.com/questions/29124188/problems-with-a-do-while-loop-in-c/29124584#29124584", "title": "Problems with a Do-While Loop in C", "body": "<p>Your <code>while</code> conditions are faulty, also the variables need clearing after each attempt and the print out for a fail needs a check. Also, moving your <code>scanf()</code> to the start of the loop makes things easier and removes the need for the extra one outside of the loop on the initial input.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;    // Use for boolean types\n\nint main(int argc, const char argv[]) {    // Correct function signature\n    int i = 0, plen = 0;\n    bool hasUpper = false, hasLower = false, hasDigit = false;    //Change types to boolean\n    char password[20] = {0};    // Initialise string with all '\\0'\n\n    printf(\"Please enter an alpha-numeric password with upper and lower case\\n\");\n\n    do {\n        hasUpper = false;    // Clear boolean variables for each new password\n        hasLower = false;\n        hasDigit = false;\n\n        scanf(\"%s\", password);\n        password[19] = 0;    // ensure string is correctly terminated with '\\0'\n        plen = strlen(password); // Get the string length *once* per new password\n\n        for (i = 0; i &lt; plen; ++i) {\n            if (isdigit(password[i])) {    // Use 'if...else' in place of 'continue'\n                hasDigit = true;\n            } \n            else if (isupper(password[i])) {\n                hasUpper = true;\n            }\n            else if (islower(password[i])) {\n                hasLower = true;\n            }\n        }\n\n        if ((!hasDigit) || (!hasLower) || (!hasUpper)) {    // Check the booleans before printing fail message\n            printf(\"Not so good, try again!\");\n            for (i = 0; i &lt; 20; ++i) {\n                password[i] = 0;    // Clear the string with all '\\0'\n            }\n        }\n    } while ((!hasDigit) || (!hasLower) || (!hasUpper));   // Correct the logic here\n\n    printf(\"Great password!\");   // Remove the unneeded boolean check here\n    return 0;\n}\n</code></pre>\n\n<p>I would also consider replacing the <code>if...continue</code> pattern with an <code>if...else if</code> as use of <code>continue</code> is bad practice.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4685561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eb8707da2dd79999c191341d75bef37?s=128&d=identicon&r=PG&f=1", "display_name": "Anne", "link": "https://stackoverflow.com/users/4685561/anne"}, "edited": false, "score": 0, "creation_date": 1426702190, "post_id": 29124638, "comment_id": 46484850, "body": "I really don&#39;t know where else to post this - but Thank you it makes much more sense now!"}], "tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1426918880, "last_edit_date": 1426918880, "creation_date": 1426688595, "answer_id": 29124638, "question_id": 29124188, "link": "https://stackoverflow.com/questions/29124188/problems-with-a-do-while-loop-in-c/29124638#29124638", "title": "Problems with a Do-While Loop in C", "body": "<p>The code is not working because of a few logical problems.<br>\nFirst of all, the do while loop will continue even if all the values ( <code>hasDigit</code>, <code>hasLower</code> and <code>hasUpper</code> ) are 1 ( the condition in while is wrong ).  </p>\n\n<p>You are also printing the \"Not so good\" statement even if all of them are 1.</p>\n\n<p>There is also the problem that if you enter a bad password one time, the values are assigned to the three variables, but they are not reset to 0 and thus, when you enter a new password, the values of the three variables will be the values it obtained in the previous loop ( that is, if in your previous password, if any one of them had been set to 1, then the value will remain 1 even for the next password ).</p>\n\n<p>Now, Here is a code in which I have fixed the errors</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n {\n\n    int i;\n    int hasUpper,hasLower,hasDigit;\n    char password [20];\n    hasUpper=hasLower=hasDigit=0; // initialising these three variables to false (o)\n\n    printf(\"Please enter a alpha numeric password with upper and lower case\\n\");\n    scanf(\" %s\", password);\n\n    do\n     {\n       hasUpper=hasLower=hasDigit=0;   // you need to initialize them to 0 here as well\n\n       for(i=0;i&lt;strlen(password); i++)\n         {\n            if (isdigit(password[i]))\n             {\n               hasDigit = 1;\n             }\n\n            if (isupper(password[i]))\n             {\n               hasUpper = 1;\n             }\n\n            if (islower(password[i]))\n             {\n               hasLower = 1; \n             }\n         }\n\n       if( ( (hasUpper) &amp;&amp; (hasLower) &amp;&amp; (hasDigit) ) !=1 )  // with this if statement, only if all the criteria are not met, the printf is executed\n         { \n           printf(\"Not so good, try again!\");\n           scanf(\" %s\", password);\n         }\n\n     }while( ( (hasDigit) &amp;&amp; (hasLower) &amp;&amp; (hasUpper) ) !=1 );  // loop continues as long as all of them are not 1\n\n    // This statement will only execute if all three variables are true\n\n    printf(\"Great password!\");\n\n    return 0;\n }\n</code></pre>\n\n<p>Note that I have removed the if condition from </p>\n\n<pre><code>if  ((hasUpper)&amp;&amp;(hasLower)&amp;&amp;(hasDigit))\n{\n    printf(\"Great password!\");\n}\n</code></pre>\n\n<p>This is because the program comes out of the do while loop only when you enter a Good Password, and thus there is no longer a need for that if statement, just the printf is enough.</p>\n"}], "owner": {"reputation": 3, "user_id": 4685561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eb8707da2dd79999c191341d75bef37?s=128&d=identicon&r=PG&f=1", "display_name": "Anne", "link": "https://stackoverflow.com/users/4685561/anne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1299, "favorite_count": 0, "accepted_answer_id": 29124638, "answer_count": 2, "score": 0, "last_activity_date": 1426918880, "creation_date": 1426687454, "last_edit_date": 1426688768, "question_id": 29124188, "link": "https://stackoverflow.com/questions/29124188/problems-with-a-do-while-loop-in-c", "title": "Problems with a Do-While Loop in C", "body": "<p>I extremely new at coding and I'm tearing my hair out trying to get this code to loop (until the correct criteria has been met.. upper/lower case letters and a digit) am I putting the do while loop in the right place??</p>\n\n<p>Many Thanks in advance for any help received..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nmain()\n{\n    int i;\n    int hasUpper, hasLower, hasDigit;\n    char password[20];\n\n    hasUpper = hasLower = hasDigit = 0; // initialising these three variables to false (o)\n\n    printf(\"Please enter a alpha numeric password with upper and lower case\\n\");\n    scanf(\" %s\", password);\n\n    do {\n        for (i = 0; i &lt; strlen(password); i++) {\n            if (isdigit(password[i])) {\n                hasDigit = 1;\n                continue;\n            }\n\n            if (isupper(password[i])) {\n                hasUpper = 1;\n                continue;\n            }\n\n            if (islower(password[i])) {\n                hasLower = 1;\n                continue;\n            }\n        }\n\n        printf(\"Not so good, try again!\");\n        scanf(\" %s\", password);\n    } while ((hasDigit) &amp;&amp; (hasLower) &amp;&amp; (hasUpper)==1);\n\n    // This loop will only execute if all three variables are true\n\n    if ((hasUpper) &amp;&amp; (hasLower) &amp;&amp; (hasDigit)) {\n        printf(\"Great password!\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string-matching", "state-machine", "alphabet"], "comments": [{"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 1, "creation_date": 1426688075, "post_id": 29124130, "comment_id": 46474930, "body": "OK, so what have you done during your struggle to limit the alphabet length? What results have you get?"}, {"owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "reply_to_user": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1426688356, "post_id": 29124130, "comment_id": 46475130, "body": "When I change the variable NO_OF_CHARS to 2, the program has an error. I think this is due to char being 256?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1426688627, "post_id": 29124130, "comment_id": 46475334, "body": "What do you mean <i>my implementation looks similar to</i>? Do you have your own code, or is it just a copy of what&#39;s at that link? And what do you mean <i>the program has an error</i>? What was the error? Can you narrow down the area in your code where you have the error and show that portion?"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1426688737, "post_id": 29124130, "comment_id": 46475426, "body": "What kind of error? Does it refuse to compile? It compiles but doesn&#39;t start? It runs but crashes? It runs successfuly but produces wrong output?......  What error does it &#39;have&#39;?"}, {"owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "edited": false, "score": 0, "creation_date": 1426688795, "post_id": 29124130, "comment_id": 46475473, "body": "The program crashes. Get error message: abc.exe file has stopped working. The program does run but it crashes after."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1426688981, "post_id": 29124130, "comment_id": 46475597, "body": "Superb. Now kindly tell us what data are you supplying to your automaton."}, {"owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "edited": false, "score": 0, "creation_date": 1426689126, "post_id": 29124130, "comment_id": 46475716, "body": "The data type I am using is char."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1426689204, "post_id": 29124130, "comment_id": 46475767, "body": "I know what <i>type</i> of data it uses. But I&#39;m curious if you realise what <i>values</i> you give it to process."}, {"owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "edited": false, "score": 0, "creation_date": 1426689449, "post_id": 29124130, "comment_id": 46475954, "body": "char text[]=&quot;0101001010101&quot;;    char pattern[]=&quot;1001&quot;; I think is what your asking. My code is similar to the link given above"}, {"owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "edited": false, "score": 0, "creation_date": 1426689956, "post_id": 29124130, "comment_id": 46476332, "body": "Gets the same error as I do when i change the variable. Because the data type is char it doesn&#39;t handle any value other than 256"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1426690036, "post_id": 29124130, "comment_id": 46476385, "body": "I&#39;ll ask again: what do you mean by, <i>My code is similar to the link given above</i>? How similar? What&#39;s different? If you&#39;re going to use someone else&#39;s code to solve your problem, you need to learn at least a little bit about how that code works."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1426690091, "post_id": 29124130, "comment_id": 46476416, "body": "Well, so input is <code>char text[]=&quot;0101001010101&quot;; char pattern[]=&quot;1001&quot;;</code> Ok, see my answer."}], "answers": [{"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1426690506, "post_id": 29125145, "comment_id": 46476725, "body": "Correction: <code>Solution: Set NO_OF_CHAR at least 49+1</code>"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1426691192, "post_id": 29125145, "comment_id": 46477230, "body": "@wildplasser Right, plus one &#39;cause index is zero-based!"}], "tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 1, "last_activity_date": 1426691280, "last_edit_date": 1426691280, "creation_date": 1426690018, "answer_id": 29125145, "question_id": 29124130, "link": "https://stackoverflow.com/questions/29124130/limiting-the-alphabet-for-finite-state-automata-string-matching/29125145#29125145", "title": "Limiting the alphabet for finite state automata string matching", "body": "<p>From OP answer to my questions for a program's input:</p>\n\n<blockquote>\n  <p>char text[]=\"0101001010101\"; char pattern[]=\"1001\"; </p>\n</blockquote>\n\n<p>So you give it a normal string with characters encoded in ASCII. The FSM uses those characters to index a state-and-transition table (line 60.) Character '0' in your input string is an int value of 48 while '1' is 49. When you declare the array 2-items long those values cause the expression to reach far beyond the array limits and read some random data. That causes the program to wander in unexpected direction and eventually crash. It is a special case of Undefined Behavior.</p>\n\n<p><strong>Solution:</strong> Set NO_OF_CHAR at least <strike>49</strike> 49+1. (Thank you, @wildplasser!)</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1426690637, "creation_date": 1426690637, "answer_id": 29125380, "question_id": 29124130, "link": "https://stackoverflow.com/questions/29124130/limiting-the-alphabet-for-finite-state-automata-string-matching/29125380#29125380", "title": "Limiting the alphabet for finite state automata string matching", "body": "<p>An answer was already accepted but I post this based on the OP insistence in an earlier question on this topic, that there must be only 2 possibilities.</p>\n\n<p><code>int TF[][NO_OF_CHARS]</code> is an array originally sized by <code>#define NO_OF_CHARS 256</code>. So in the example all possible <code>unsigned char</code> values can index it. When you try to reduce the number of chars to <code>2</code> you can only index this array by <code>0</code> or <code>1</code>, but if your <code>'0'</code> and <code>'1'</code> in the cellular string are ASCII values, they will break the array.</p>\n\n<p>Based on that this line (and possibly others) are foxing the array</p>\n\n<pre><code>state = TF[state][txt[i]];\n</code></pre>\n\n<p>Notice that with characters <code>'0'</code> and <code>'1'</code> the array will be indexed by <code>48</code> and <code>49</code>. What you need to do here, and possibly elsewhere, is</p>\n\n<pre><code>state = TF[state][txt[i] &amp; 1];\n</code></pre>\n\n<p>Also watch out whether there are any places where this index of <code>0</code> or <code>1</code> is turned back into a <code>char</code>. If so you will need to add <code>'0'</code> to the array index.</p>\n"}], "owner": {"reputation": 93, "user_id": 1797299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5e76c32028461fdc87b508a1be2756a?s=128&d=identicon&r=PG", "display_name": "jonn", "link": "https://stackoverflow.com/users/1797299/jonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 29125380, "answer_count": 2, "score": 0, "last_activity_date": 1426691280, "creation_date": 1426687277, "question_id": 29124130, "link": "https://stackoverflow.com/questions/29124130/limiting-the-alphabet-for-finite-state-automata-string-matching", "title": "Limiting the alphabet for finite state automata string matching", "body": "<p>Hi I have programmed my finite state automata string matching algorithm. However I am struggling to limit the alphabet to only two characters. My implementation looks similar to \n<a href=\"http://www.sanfoundry.com/cpp-program-perform-finite-state-automaton-based-search/\" rel=\"nofollow\">http://www.sanfoundry.com/cpp-program-perform-finite-state-automaton-based-search/</a>. </p>\n\n<p>The NO_OF_CHAR variable is stating the alphabet of the program. I am trying to limit this to only two characters {0,1} eg: 0101001. If anyone has knowledge of finite state automata, input would be appreciated.</p>\n"}, {"tags": ["c", "struct", "linked-list"], "comments": [{"owner": {"reputation": 3711, "user_id": 745750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff67b821b06f226cec94c3bb1a422fe?s=128&d=identicon&r=PG&f=1", "display_name": "bwegs", "link": "https://stackoverflow.com/users/745750/bwegs"}, "edited": false, "score": 0, "creation_date": 1426686863, "post_id": 29123950, "comment_id": 46474073, "body": "Please clarify what error you&#39;re getting so we can help you find it. Does your code actually compile? Is it just not doing what you expect it to?"}, {"owner": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "reply_to_user": {"reputation": 3711, "user_id": 745750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff67b821b06f226cec94c3bb1a422fe?s=128&d=identicon&r=PG&f=1", "display_name": "bwegs", "link": "https://stackoverflow.com/users/745750/bwegs"}, "edited": false, "score": 0, "creation_date": 1426687460, "post_id": 29123950, "comment_id": 46474479, "body": "Code is run but Last data is not show."}, {"owner": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "reply_to_user": {"reputation": 3711, "user_id": 745750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff67b821b06f226cec94c3bb1a422fe?s=128&d=identicon&r=PG&f=1", "display_name": "bwegs", "link": "https://stackoverflow.com/users/745750/bwegs"}, "edited": false, "score": 0, "creation_date": 1426687860, "post_id": 29123950, "comment_id": 46474789, "body": "I am entering last data with addNode() method.However is not show."}, {"owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 0, "creation_date": 1426688516, "post_id": 29123950, "comment_id": 46475242, "body": "@Ahmet because you forgot to actually append your last data to the list. You search for the end of the list with your <code>while</code> loop, but don&#39;t save the last element, so you could append your new node to the list."}, {"owner": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "reply_to_user": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 0, "creation_date": 1426688866, "post_id": 29123950, "comment_id": 46475527, "body": "@UniversE there is saving; po = (node *) malloc(sizeof(node));     printf(&quot;Isim Girin: &quot;); scanf(&quot;%s&quot;, po-&gt;isim);     po-&gt;next = NULL;  Or how am I append ?"}], "answers": [{"tags": [], "owner": {"reputation": 899, "user_id": 1884937, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a3b6470808295421154b0654d357986b?s=128&d=identicon&r=PG", "display_name": "henrycharles", "link": "https://stackoverflow.com/users/1884937/henrycharles"}, "is_accepted": false, "score": -1, "last_activity_date": 1426687782, "creation_date": 1426687782, "answer_id": 29124302, "question_id": 29123950, "link": "https://stackoverflow.com/questions/29123950/linked-list-add-method-in-c/29124302#29124302", "title": "Linked list add() method in C", "body": "<p>You can have look this code and get to know where exactly you are having problem    </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;stdbool.h&gt;\n\n    struct test_struct\n    {\n        int val;\n        struct test_struct *next;\n    };\n\n    struct test_struct *head = NULL;\n    struct test_struct *curr = NULL;\n\n    struct test_struct* create_list(int val)\n    {\n        printf(\"\\n creating list with headnode as [%d]\\n\",val);\n        struct test_struct *ptr = (struct test_struct*)malloc(sizeof(struct test_struct));\n        if(NULL == ptr)\n        {\n            printf(\"\\n Node creation failed \\n\");\n            return NULL;\n        }\n        ptr-&gt;val = val;\n        ptr-&gt;next = NULL;\n\n        head = curr = ptr;\n        return ptr;\n    }\n\n    struct test_struct* add_to_list(int val, bool add_to_end)\n    {\n        if(NULL == head)\n        {\n            return (create_list(val));\n        }\n\n        if(add_to_end)\n            printf(\"\\n Adding node to end of list with value [%d]\\n\",val);\n        else\n            printf(\"\\n Adding node to beginning of list with value [%d]\\n\",val);\n\n        struct test_struct *ptr = (struct test_struct*)malloc(sizeof(struct test_struct));\n        if(NULL == ptr)\n        {\n            printf(\"\\n Node creation failed \\n\");\n            return NULL;\n        }\n        ptr-&gt;val = val;\n        ptr-&gt;next = NULL;\n\n        if(add_to_end)\n        {\n            curr-&gt;next = ptr;\n            curr = ptr;\n        }\n        else\n        {\n            ptr-&gt;next = head;\n            head = ptr;\n        }\n        return ptr;\n    }\n\n    struct test_struct* search_in_list(int val, struct test_struct **prev)\n    {\n        struct test_struct *ptr = head;\n        struct test_struct *tmp = NULL;\n        bool found = false;\n\n        printf(\"\\n Searching the list for value [%d] \\n\",val);\n\n        while(ptr != NULL)\n        {\n            if(ptr-&gt;val == val)\n            {\n                found = true;\n                break;\n            }\n            else\n            {\n                tmp = ptr;\n                ptr = ptr-&gt;next;\n            }\n        }\n\n        if(true == found)\n        {\n            if(prev)\n                *prev = tmp;\n            return ptr;\n        }\n        else\n        {\n            return NULL;\n        }\n    }\n\n    int delete_from_list(int val)\n    {\n        struct test_struct *prev = NULL;\n        struct test_struct *del = NULL;\n\n        printf(\"\\n Deleting value [%d] from list\\n\",val);\n\n        del = search_in_list(val,&amp;prev);\n        if(del == NULL)\n        {\n            return -1;\n        }\n        else\n        {\n            if(prev != NULL)\n                prev-&gt;next = del-&gt;next;\n\n            if(del == curr)\n            {\n                curr = prev;\n            }\n            else if(del == head)\n            {\n                head = del-&gt;next;\n            }\n        }\n\n        free(del);\n        del = NULL;\n\n        return 0;\n    }\n\n    void print_list(void)\n    {\n        struct test_struct *ptr = head;\n\n        printf(\"\\n -------Printing list Start------- \\n\");\n        while(ptr != NULL)\n        {\n            printf(\"\\n [%d] \\n\",ptr-&gt;val);\n            ptr = ptr-&gt;next;\n        }\n        printf(\"\\n -------Printing list End------- \\n\");\n\n        return;\n    }\n\n    int main(void)\n    {\n        int i = 0, ret = 0;\n        struct test_struct *ptr = NULL;\n\n        print_list();\n\n        for(i = 5; i&lt;10; i++)\n            add_to_list(i,true);\n\n        print_list();\n\n        for(i = 4; i&gt;0; i--)\n            add_to_list(i,false);\n\n        print_list();\n\n        for(i = 1; i&lt;10; i += 4)\n        {\n            ptr = search_in_list(i, NULL);\n            if(NULL == ptr)\n            {\n                printf(\"\\n Search [val = %d] failed, no such element found\\n\",i);\n            }\n            else\n            {\n                printf(\"\\n Search passed [val = %d]\\n\",ptr-&gt;val);\n            }\n\n            print_list();\n\n            ret = delete_from_list(i);\n            if(ret != 0)\n            {\n                printf(\"\\n delete [val = %d] failed, no such element found\\n\",i);\n            }\n            else\n            {\n                printf(\"\\n delete [val = %d]  passed \\n\",i);\n            }\n\n            print_list();\n        }\n\n        return 0;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "edited": false, "score": 0, "creation_date": 1426689433, "post_id": 29124855, "comment_id": 46475943, "body": "thanx, it&#39;s run. Just, I&#39;m add &quot;newNode-&gt;next = NULL;&quot; after from scanf method.Thanx a lot.."}, {"owner": {"reputation": 3711, "user_id": 745750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff67b821b06f226cec94c3bb1a422fe?s=128&d=identicon&r=PG&f=1", "display_name": "bwegs", "link": "https://stackoverflow.com/users/745750/bwegs"}, "reply_to_user": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "edited": false, "score": 0, "creation_date": 1426689495, "post_id": 29124855, "comment_id": 46475986, "body": "I added it to the answer as well."}, {"owner": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "edited": false, "score": 0, "creation_date": 1426689988, "post_id": 29124855, "comment_id": 46476349, "body": "thanx for your help (:"}], "tags": [], "owner": {"reputation": 3711, "user_id": 745750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff67b821b06f226cec94c3bb1a422fe?s=128&d=identicon&r=PG&f=1", "display_name": "bwegs", "link": "https://stackoverflow.com/users/745750/bwegs"}, "is_accepted": true, "score": 1, "last_activity_date": 1426689187, "creation_date": 1426689187, "answer_id": 29124855, "question_id": 29123950, "link": "https://stackoverflow.com/questions/29123950/linked-list-add-method-in-c/29124855#29124855", "title": "Linked list add() method in C", "body": "<p>Your current <code>addNode()</code> method creates a new node but it doesn't add it to your linked list.</p>\n\n<p>You need to modify your <code>addNode()</code> method like so:</p>\n\n<pre><code>void addNode(){\n    node *po, *newNode;\n    po = head;\n\n    while(po-&gt;next != NULL) { // change this so you don't lose the end of the list\n        po = po-&gt;next;        // po is now pointing to the last node in the list\n    }\n\n    newNode = (node *) malloc(sizeof(node)); // change this to newNode\n    printf(\"Isim Girin: \"); scanf(\"%s\", newNode-&gt;isim);\n    po-&gt;next = newNode; // add the new node here, don't set it to NULL\n    newNode-&gt;next = NULL; \n}\n</code></pre>\n"}], "owner": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 958, "favorite_count": 0, "accepted_answer_id": 29124855, "answer_count": 2, "score": 1, "last_activity_date": 1426691698, "creation_date": 1426686780, "last_edit_date": 1426691698, "question_id": 29123950, "link": "https://stackoverflow.com/questions/29123950/linked-list-add-method-in-c", "title": "Linked list add() method in C", "body": "<p>Where is error the following code?</p>\n\n<p><code>addNode()</code> function is not run, neither is the <code>traverse()</code> function.</p>\n\n<p>Last data is not shown.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct isimler{\n    char isim[10];\n    struct isimler *next;\n};\n\ntypedef struct isimler node;\nnode *head;\n\nvoid createList(){\n    int k, n;\n    node *po;\n    printf(\"Eleman Sayisi: \");  scanf(\"%d\", &amp;n);\n\n    for(k = 0; k&lt;n; k++){\n        if(k == 0){\n            head = (node *) malloc(sizeof(node));\n            po = head;\n        }else{\n            po-&gt;next = (node *) malloc(sizeof(node));\n            po = po-&gt;next;\n        }\n        printf(\"Isim Girin: \"); scanf(\"%s\",po-&gt;isim);\n    }\n    po-&gt;next = NULL;\n}\n\nvoid addNode(){\n    node *po, *newNode;\n    po = head;\n\n    while(po != NULL){\n        po = po-&gt;next;\n    }\n\n    po = (node *) malloc(sizeof(node));\n    printf(\"Isim Girin: \"); scanf(\"%s\", po-&gt;isim);\n    po-&gt;next = NULL;\n}\n\nvoid traverseList(){\n    node *po;\n    int i=0;\n    po = head;\n\n    while(po != NULL){\n        printf(\"%d.\\t%s\\n\",i,po-&gt;isim);\n        po = po-&gt;next;\n        i++;\n    }\n}\n\nint main(){\n    createList();\n    traverseList();\n    addNode();\n    traverseList();\n\n    return 1903;\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1426687430, "creation_date": 1426687430, "answer_id": 29124178, "question_id": 29123891, "link": "https://stackoverflow.com/questions/29123891/where-is-the-random-mac-address-generated-for-tap-interfaces/29124178#29124178", "title": "Where is the random MAC address generated for tap interfaces?", "body": "<p>The function <code>eth_random_addr</code> declared in the kernel header <code>Linux/include/linux/etherdevice.h</code></p>\n"}], "owner": {"reputation": 1005, "user_id": 1053143, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/c153148e19e1e7c04c48a2a5c4f68b54?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/1053143/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 0, "accepted_answer_id": 29124178, "answer_count": 1, "score": 0, "last_activity_date": 1426687430, "creation_date": 1426686626, "question_id": 29123891, "link": "https://stackoverflow.com/questions/29123891/where-is-the-random-mac-address-generated-for-tap-interfaces", "title": "Where is the random MAC address generated for tap interfaces?", "body": "<p>When I create a <code>tap</code> interface in Linux with <code>ip tuntap add mode tap</code> or <code>tunctl</code> commands, then it seems to get a random MAC address. For example:</p>\n\n<pre><code>root@fw-test:~# tunctl \nSet 'tap5' persistent and owned by uid 0\nroot@fw-test:~# ip link show dev tap5\n11: tap5: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 500\n    link/ether 76:df:78:5e:d6:9f brd ff:ff:ff:ff:ff:ff\nroot@fw-test:~# \n</code></pre>\n\n<p>If I look the <em>tunctl.c</em> source-file, then I quite don't understand where this MAC address is generated. Where and based on which rules the random MAC address is generated for tap interfaces?</p>\n"}, {"tags": ["c", "pthreads", "valgrind"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 1, "creation_date": 1426695795, "post_id": 29123759, "comment_id": 46480691, "body": "Is that the actual code, or are you calling other functions inside the wrapper before <code>VALGRIND_GET_ORIG_FN()</code>? Things work here (Ubuntu 14.10, valgrind-3.10.0, amd64) with that example and <code>int I_WRAP_SONAME_FNNAME_ZZ(libpthreadZdsoZd0, pthreadZucreateZAZa)</code>, including if I add a <code>puts()</code> after <code>VALGRIND_GET_ORIG_FN()</code>."}, {"owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426700852, "post_id": 29123759, "comment_id": 46484002, "body": "@Ulfalizer: The wrapper function is just that, I&#39;m not calling any other function before VALGRIND_GET_ORIG_FN(). I tryied with valgrind-3.10.0 and get the same. libpthreadZdsoZd0 is exactly the same that VG_Z_LIBPTHREAD_SONAME(there is macro where VG_Z_... is defined that way in valgrind.h). The only difference is that I&#39;m working in Fedora 20. But it&#39;s strange because with what you said I don&#39;t know why helgrind is working with no problems."}, {"owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426701561, "post_id": 29123759, "comment_id": 46484457, "body": "@Ulfalizer : When you tried that example, did you handle user requests?"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 1, "creation_date": 1426701906, "post_id": 29123759, "comment_id": 46484657, "body": "I just included your function verbatim (except for using <code>libpthreadZdsoZd0</code> instead of <code>VG_Z_LIBPTHREAD_SONAME</code>). I also confirmed that the wrapper (as well as the thread function) is called when running under Valgrind by adding some debug printouts. (If I use <code>VG_Z_LIBPTHREAD_SONAME</code> instead, I get e.g. these errors: <code>valgrind: m_demangle&#47;demangle.c:231 (vgPlain_maybe_Z_demangle): the &#39;impossible&#39; happened.</code>, <code>valgrind: symbol with a &#39;VG_Z_&#39; prefix: _vgw00000ZZ_VG_Z_LIBPTHREAD_SONAME_pthreadZucreateZAZa.</code>.)"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426702035, "post_id": 29123759, "comment_id": 46484740, "body": "&quot;Running under Valgrind&quot; was just a plain <code>$ valgrind .&#47;wrap</code>."}, {"owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426716952, "post_id": 29123759, "comment_id": 46493116, "body": "@Ulfalizer : hey I tried in ubuntu 14.04 and I can&#39;t make it work. I have this now: --21053-- VG_USERREQ__CLIENT_CALL2: func=0x0                --21053-- VG_USERREQ__CLIENT_CALL1: func=0x0                Unexpected error.                                                                                 Maybe is somthing related with user request. I don&#39;t know how did you do"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 1, "creation_date": 1426756048, "post_id": 29123759, "comment_id": 46504768, "body": "Here&#39;s the program and output on my system: <a href=\"http://pastie.org/10037606#1\" rel=\"nofollow noreferrer\">pastie.org/10037606#1</a>"}, {"owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426766736, "post_id": 29123759, "comment_id": 46511034, "body": "@Ulfalizer : I see... but it&#39;s not a valgrind tool. I was trying to make a tool like helgrind but minimal."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 1, "creation_date": 1426767317, "post_id": 29123759, "comment_id": 46511395, "body": "Ah, sorry, I&#39;ve never done that. <a href=\"http://www.valgrind.org/docs/manual/writing-tools.html\" rel=\"nofollow noreferrer\">valgrind.org/docs/manual/writing-tools.html</a> talks about needing to define certain functions (e.g. <code>pre_clo_init()</code>) and having them do various initialization. Have you done that?"}, {"owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426768673, "post_id": 29123759, "comment_id": 46512217, "body": "@Ulfalizer : yes I did, actually I did a tool for measure some things related with memory usage similar to memcheck and I had no problems. Is just this about wrapping functions from pthread that is being difficult to me. Actually I have no problems when I try to wrap functions that are defined by me. That&#39;s why I have no idea what&#39;s wrong."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 1, "creation_date": 1426769184, "post_id": 29123759, "comment_id": 46512554, "body": "Not sure either then. Sorry. :/"}, {"owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426778216, "post_id": 29123759, "comment_id": 46519037, "body": "@Ulfalizer Hey thanks a lot, I&#39;ll do it the you told me, you really helped me a lot."}, {"owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1427293602, "post_id": 29123759, "comment_id": 46719224, "body": "@Ulfalizer : hey, did you test our example in C? In C worked fine for me but in C++ I can&#39;t wrapp the fuctions."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1427310839, "post_id": 29123759, "comment_id": 46730931, "body": "It&#39;s because C++ compilers mangle names differently (use a different name format in object files). It&#39;s so that C++ can support many overloaded functions with the same name. Valgrind expects C-style mangling. To fix it, you could add <code>extern &quot;C&quot;</code> before the declaration, like <code>extern &quot;C&quot; int I_WRAP_SONAME...</code>, to tell the compiler to do C mangling."}], "owner": {"reputation": 493, "user_id": 4000536, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/065b5cda8359386cc6e8371a8015728c?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Tiraboschi", "link": "https://stackoverflow.com/users/4000536/andres-tiraboschi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556789986, "creation_date": 1426686284, "last_edit_date": 1556789986, "question_id": 29123759, "link": "https://stackoverflow.com/questions/29123759/segmentation-fault-when-wrapping-functions-in-valgrind", "title": "Segmentation fault when wrapping functions in valgrind", "body": "<p>I'm trying to make a valgrind tool for measure some thread related things from <code>pthread.h</code> library. For doing this I need to wrap some functions.</p>\n\n<p>The tool has 2 files: <code>fb_main.c</code> and <code>fb_intercept.c</code>.</p>\n\n<p><code>fb_intercept.c</code> is where the wrappers are. I began trying with a simple example wrapping <code>pthread_create</code> function.</p>\n\n<p><code>fb_intercept.c</code>:</p>\n\n<pre><code>#include \"pub_tool_basics.h\"\n#include \"pub_tool_redir.h\"\n#include \"pub_tool_clreq.h\"\n#include \"valgrind.h\"\n#include \"config.h\"\n\nint I_WRAP_SONAME_FNNAME_ZZ(VG_Z_LIBPTHREAD_SONAME, pthreadZucreateZAZa)\n    (pthread_t *thread, const pthread_attr_t *attr, void *(*start) (void*), void *arg)\n{\n    int result;\n    OrigFn fn;\n    VALGRIND_GET_ORIG_FN(fn);\n    CALL_FN_W_WWWW(result, fn, thread, attr, start, arg);\n    return result;\n}\n</code></pre>\n\n<p>For some reason when I run a program with this tool I have the following error:</p>\n\n<pre><code>--5013-- VG_USERREQ__CLIENT_CALL2: func=0x0\n==5013== \n==5013== Process terminating with default action of signal 11 (SIGSEGV)\n==5013==  Access not within mapped region at address 0x10\n==5013==    at 0x35006084D1: pthread_create@@GLIBC_2.2.5 (in /usr/lib64/libpthread-2.18.so)\n==5013==    by 0x4A07BF3: pthread_create@* (fb_intercept.c:66)\n==5013==    by 0x40074E: main (in /home/andres/Documents/valgrind/prueba/a.out)\n==5013==  If you believe this happened as a result of a stack\n==5013==  overflow in your program's main thread (unlikely but\n==5013==  possible), you can try to increase the size of the\n==5013==  main thread stack using the --main-stacksize= flag.\n==5013==  The main thread stack size used in this run was 8388608.\n</code></pre>\n\n<p>Actually the problem comes when I call <code>CALL_FN_W_WWWW(result, fn, thread, attr, start, arg)</code>. When I comment this line there are no errors, just <code>pthread_create</code> doesn't work properly as expected.</p>\n\n<p>I thought this was supposed to work that way but it doesn't, and I don't know what that error means or what I'm missing. Possibly someone knows a little more about this kind of stuff.</p>\n\n<p>I'm using valgind 3.11 from the svn repository.</p>\n"}, {"tags": ["c", "exception", "segmentation-fault", "memcpy"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1426686258, "post_id": 29123731, "comment_id": 46473646, "body": "Do you have a really small stack? The array is kind of large."}, {"owner": {"reputation": 1383, "user_id": 1310470, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8f6474171b2ddbcfbd14e125f4368009?s=128&d=identicon&r=PG", "display_name": "Zeezer", "link": "https://stackoverflow.com/users/1310470/zeezer"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1426686369, "post_id": 29123731, "comment_id": 46473723, "body": "@KerrekSB I dont think thats the case. The error also seems to be when the s and l variables are small/empty."}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1426687011, "post_id": 29123731, "comment_id": 46474159, "body": "Please show what is <code>s</code> pointing at."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1426687132, "post_id": 29123731, "comment_id": 46474245, "body": "you should remove the <code>&amp;</code> in the memcpy line. <code>buf</code> is already the address of the array. How do you call this function and how do you declare this array?"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1426687457, "post_id": 29123731, "comment_id": 46474476, "body": "@mch It&#39;s not the OP&#39;s <a href=\"https://github.com/fkuehne/upnpx/blob/master/src/ssdp/ssdptools.cpp\" rel=\"nofollow noreferrer\">code</a>."}, {"owner": {"reputation": 1383, "user_id": 1310470, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8f6474171b2ddbcfbd14e125f4368009?s=128&d=identicon&r=PG", "display_name": "Zeezer", "link": "https://stackoverflow.com/users/1310470/zeezer"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1426687494, "post_id": 29123731, "comment_id": 46474516, "body": "@trojanfoe Ok i see, this i probably an error originating somewhere else. s i usually something like this &quot;(unsigned char *) s = 0x00000001039b2f6b&quot; but at crash it is like this: &quot;(unsigned char *) s = 0x0000000000000007&quot;. Is it possible to check for allowed address space?"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 1, "creation_date": 1426687555, "post_id": 29123731, "comment_id": 46474552, "body": "@Zeezer Not reliably no,  Don&#39;t call this method with an invalid <code>s</code> parameter."}], "owner": {"reputation": 1383, "user_id": 1310470, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8f6474171b2ddbcfbd14e125f4368009?s=128&d=identicon&r=PG", "display_name": "Zeezer", "link": "https://stackoverflow.com/users/1310470/zeezer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426686723, "creation_date": 1426686205, "last_edit_date": 1426686723, "question_id": 29123731, "link": "https://stackoverflow.com/questions/29123731/memcpy-exc-bad-access-code-in-ios-c-library", "title": "Memcpy EXC_BAD_ACCESS code in iOS C library", "body": "<p>I am using a library in C for iOS which crashes randomly once in a while. Its a memcpy call that fails and Im thinking this must be possible to prevent. I tried try-catch but did obviously not work on memcpy. Im not too familiar with C, so do you have any idea how I can avoid this crash. Currently the whole app is crashing randomly because of this library.</p>\n\n<pre><code>int cachecontroltoi(u8* s, u32 l){\n    u32 ret = -1;\n    u32 p;\n\n    char buf[1024];\n    int buflen=1024;\n\n    if(l &gt;= buflen){\n       return ret;\n    }\n    memcpy(&amp;buf, s, l); // &lt;&lt;-- EXC_BAD_ACCESS\n</code></pre>\n\n<p>Are there some obvious mistakes in this code or can the error be catched/oppressed somehow?</p>\n\n<p>These are the variable values in the debugger when memcpy crashes<img src=\"https://i.stack.imgur.com/R7LTj.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "c", "linux", "cross-compiling"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "edited": false, "score": 0, "creation_date": 1426685434, "post_id": 29123267, "comment_id": 46473110, "body": "You have to port a C library. This is a non-trivial task."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1426685649, "post_id": 29123267, "comment_id": 46473237, "body": "Isn&#39;t <code>newlib</code> a standard library you&#39;re looking for? It ought to have <code>stdlib.h</code> etc. I think you should check where newlib headers and libs are and adjust your project accordingly"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1426685778, "post_id": 29123267, "comment_id": 46473312, "body": "@SeverinPappadeux It is far more complex than that. Sample the <a href=\"https://sourceware.org/newlib/\" rel=\"nofollow noreferrer\">README</a>."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1426687144, "post_id": 29123267, "comment_id": 46474259, "body": "Googling &quot;megadrive toolchain&quot; turns up this:  <a href=\"https://github.com/noname22/megadrive-gcc\" rel=\"nofollow noreferrer\">github.com/noname22/megadrive-gcc</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1269015"}, "reply_to_user": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1426688517, "post_id": 29123267, "comment_id": 46475243, "body": "@BrianMcFarland Thank you for the link but I wanted to do it myself to learn how to build cross compilers in the future."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1426691065, "post_id": 29123267, "comment_id": 46477135, "body": "Sure, it is more complex. But step 4 of gendev tutorial is to download (and presumably) build <code>newlib</code>. There should be <code>stdlib.h</code> in your installation, I just cloned whole <code>newlib</code> repository from cygwin and stdlib.h is present"}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 0, "creation_date": 1426705995, "post_id": 29123267, "comment_id": 46487163, "body": "Checkout <a href=\"http://www.linuxfromscratch.org/\" rel=\"nofollow noreferrer\">linuxfromscratch.org</a> You&#39;ll find walk-throughs for building several cross-compilers and this may give you a hint"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1269015"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1426788379, "post_id": 29123267, "comment_id": 46525280, "body": "@SeverinPappadeux I followed the whole tutoprial inclduing the newlib part, however I am still getting this error do I need to copy files from somewhere in order to get this to work?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1426790954, "post_id": 29123267, "comment_id": 46526648, "body": "How about pointing to right place using either compiler switches or envirnment variables?"}], "owner": {"user_type": "does_not_exist", "display_name": "user1269015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426685840, "creation_date": 1426684991, "question_id": 29123267, "link": "https://stackoverflow.com/questions/29123267/cross-compiler-standard-libraries", "title": "Cross compiler standard libraries", "body": "<p>I've been trying to build a cross compiler for the Sega Megadrive system so that I can test out a C game that I have been working on. I've been following the steps in <a href=\"http://gendev.spritesmind.net/forum/viewtopic.php?t=889\" rel=\"nofollow\">this</a> tutorial however I have run into an issue.</p>\n\n<p>As part of the tutorial there is an example project which I have tried to compile using the cross compiler but I encounter a compiler error telling em that the stdlib.h cannot be found.</p>\n\n<p>After some research I found that I must compile the standard libraries using my cross compiler to successfully compile programs using the compiler however I have not been able to find any instructions to do this.</p>\n\n<p>Does anyone here know how I would go about compiling these standard libraries in order to compiler the project? I should that the tutorial is for Linux systems and that I am running Ubuntu 14.04 (amd64).</p>\n\n<p>Kind regards,</p>\n\n<p>Sam</p>\n"}, {"tags": ["c", "video", "ffmpeg"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426685143, "post_id": 29123252, "comment_id": 46472899, "body": "You just need to write a c program that reads data from video files and then outputs the video on the screen."}, {"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1426692798, "post_id": 29123252, "comment_id": 46478481, "body": "you might be able to &quot;stream&quot; it using some encoding [libav*] <a href=\"https://trac.ffmpeg.org/wiki/StreamingGuide\" rel=\"nofollow noreferrer\">trac.ffmpeg.org/wiki/StreamingGuide</a> <a href=\"https://trac.ffmpeg.org/wiki/Using%20libav\" rel=\"nofollow noreferrer\">trac.ffmpeg.org/wiki/Using%20libav</a>*"}], "answers": [{"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 1, "last_activity_date": 1426690061, "creation_date": 1426690061, "answer_id": 29125161, "question_id": 29123252, "link": "https://stackoverflow.com/questions/29123252/ways-to-output-video-using-c/29125161#29125161", "title": "Ways to output video using C?", "body": "<p>I think you should stick with <code>ffmpeg</code>. There is a lot of <a href=\"https://www.ffmpeg.org/documentation.html\" rel=\"nofollow\">documentation</a> and even some <a href=\"https://ffmpeg.org/doxygen/trunk/api-example_8c-source.html\" rel=\"nofollow\">example</a>. Try ask specific questions about your issues with <code>ffmpeg</code> either here on SO either in <code>ffmpeg</code> <a href=\"https://www.ffmpeg.org/contact.html#Forums\" rel=\"nofollow\">forums</a>.</p>\n"}], "owner": {"reputation": 305, "user_id": 1040935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e6ce74e6b9f5d445f5461d47b17904f1?s=128&d=identicon&r=PG", "display_name": "Frank Harris", "link": "https://stackoverflow.com/users/1040935/frank-harris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426690061, "creation_date": 1426684937, "question_id": 29123252, "link": "https://stackoverflow.com/questions/29123252/ways-to-output-video-using-c", "title": "Ways to output video using C?", "body": "<p>I do a lot of physical modeling in C, and for a long time I've been using a roundabout way of animating these models; grid the system to an array of chars and write to a numerically ordered PPM file, then use <code>convert *.ppm video.gif</code> and wait.  The output is fine, the time it takes to run?  Not so much.  It can take a handful of minutes to produce a video from a simulation that takes a second to run.</p>\n\n<p>I'm convinced that there must be a more efficient way.  The first thing I tried was SDL; I was able to produce video with it, but I'm doing this on a remote server, and SDL's performance over SSH is beyond abysmal.  Maybe 0.7 FPS.</p>\n\n<p>I've tried using ffmpeg as well, but I haven't had luck with getting it to work; not sure why.  If there's no better solution I'll renew efforts in solving the ffmpeg problem.</p>\n\n<p>Ideally, I'd like a simple way to avoid outputting all those intermediate files in the first place.  Are there any C libraries that would allow me to sequentially combine pixel arrays into frames of an animation?  Preferably <em>relatively</em> simple?</p>\n"}, {"tags": ["c", "struct", "constructor"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 14, "creation_date": 1426684925, "post_id": 29123235, "comment_id": 46472749, "body": "It&#39;s most likely C++ code, not C code."}, {"owner": {"reputation": 3855, "user_id": 6063, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UmJfd.jpg?s=128&g=1", "display_name": "Simon Peverett", "link": "https://stackoverflow.com/users/6063/simon-peverett"}, "edited": false, "score": 0, "creation_date": 1426685198, "post_id": 29123235, "comment_id": 46472927, "body": "in C++, a struct is a type of Class and that code will work but not in C. If you want something similar in C - see <a href=\"https://stackoverflow.com/questions/17052443/c-function-inside-struct\" title=\"c function inside struct\">stackoverflow.com/questions/17052443/c-function-inside-struc&zwnj;&#8203;t</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426685206, "post_id": 29123235, "comment_id": 46472935, "body": "If it doesn&#39;t compile on your C compiler, chances are it is not valid C."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1426685207, "post_id": 29123235, "comment_id": 46472937, "body": "&quot;I have a C code&quot; competes with &quot;it has basically two constructors&quot;. thats paradox as in C code isn&#39;t anything provided, whats called constructor, or behaves after that concept.;)"}, {"owner": {"reputation": 859, "user_id": 2156825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/077db5bd1a2dda03bdf6146de32e44c4?s=128&d=identicon&r=PG", "display_name": "lulijeta", "link": "https://stackoverflow.com/users/2156825/lulijeta"}, "edited": false, "score": 0, "creation_date": 1426685845, "post_id": 29123235, "comment_id": 46473364, "body": "That was my point exactly, no constructors in C. It might be a C++ code, that makes sense. As source code I only have some headers which are written in C style."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 7, "last_activity_date": 1426687068, "last_edit_date": 1426687068, "creation_date": 1426685136, "answer_id": 29123324, "question_id": 29123235, "link": "https://stackoverflow.com/questions/29123235/function-definition-in-c-struct/29123324#29123324", "title": "Function definition in C struct?", "body": "<p>Your code is not valid C code (i.e. valid <a href=\"https://en.wikipedia.org/wiki/C11_%28C_standard_revision%29\" rel=\"nofollow\">C11</a>) code but it is valid C++ (i.e. <a href=\"https://en.wikipedia.org/wiki/C++14\" rel=\"nofollow\">C++14</a>) code.</p>\n\n<p>In C++, a <code>struct</code> is like a <code>class</code> except that all members are by default <code>public</code>; see e.g. <a href=\"http://en.cppreference.com/w/cpp/language/class\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "is_accepted": false, "score": 3, "last_activity_date": 1426685576, "last_edit_date": 1592644375, "creation_date": 1426685200, "answer_id": 29123348, "question_id": 29123235, "link": "https://stackoverflow.com/questions/29123235/function-definition-in-c-struct/29123348#29123348", "title": "Function definition in C struct?", "body": "<h1>There are no constructors in C.</h1>\n<p>This code is most probably in C++.\nIn C++, a <code>struct</code> is actually similar to a <code>class</code>, hence you <em>can</em> define constructors for structs in C++.</p>\n<p>Try to compile your code in gcc. You'll get a</p>\n<pre><code>error: expected specifier-qualifier-list before \u2018someStruct\u2019\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 4685453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YKMMVF3gqMI/AAAAAAAAAAI/AAAAAAAAAKY/8-j8l03Iw5Q/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/4685453/sachin"}, "is_accepted": false, "score": 0, "last_activity_date": 1426685907, "creation_date": 1426685907, "answer_id": 29123616, "question_id": 29123235, "link": "https://stackoverflow.com/questions/29123235/function-definition-in-c-struct/29123616#29123616", "title": "Function definition in C struct?", "body": "<p>The main difference between C and C++ is that C++ supports class but C does not. In C++ struct is a special class so the above code will work in C++ but not in C.</p>\n"}], "owner": {"reputation": 859, "user_id": 2156825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/077db5bd1a2dda03bdf6146de32e44c4?s=128&d=identicon&r=PG", "display_name": "lulijeta", "link": "https://stackoverflow.com/users/2156825/lulijeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 29123324, "answer_count": 3, "score": 1, "last_activity_date": 1426687068, "creation_date": 1426684872, "last_edit_date": 1426685054, "question_id": 29123235, "link": "https://stackoverflow.com/questions/29123235/function-definition-in-c-struct", "title": "Function definition in C struct?", "body": "<p>I have a C code I need to understand. There is a </p>\n\n<pre><code>typedef struct someStruct {\n    int i; \n    char c; \n    someStruct() {\n        i = 0;\n        c = 'c';\n    }\n    someStruct(char inpChar) {\n        i = 1;\n        c = inpChar;\n    }\n} t_someStruct;\n</code></pre>\n\n<p>(The code doesn't really make sense or serve a purpose, I know. I just simplified it.)\nSo there is this structure and it has two members (int i and char c). The interesting part is that it has basically two constructors, which is a new concept to me. \nIt works normally, but can we write constructors for structures? I couldn't find anything on Google, maybe I am not searching right.</p>\n"}, {"tags": ["c", "file", "position", "strstr"], "comments": [{"owner": {"reputation": 1107, "user_id": 2862952, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/CbFt3.jpg?s=128&g=1", "display_name": "mathiasfk", "link": "https://stackoverflow.com/users/2862952/mathiasfk"}, "edited": false, "score": 0, "creation_date": 1426685232, "post_id": 29123226, "comment_id": 46472957, "body": "The size of myArr shouldn&#39;t be MAXLENGTH*WORDMAXLENGTH ?"}], "answers": [{"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1426686309, "post_id": 29123262, "comment_id": 46473677, "body": "I would strongly recommend against the <code>strtok</code> method because this function is not thread-safe and has internal hidden state. It might not matter at the moment but getting started using it will built bad habits that will haunt you later."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1426684971, "creation_date": 1426684971, "answer_id": 29123262, "question_id": 29123226, "link": "https://stackoverflow.com/questions/29123226/strstr-function-get-the-position/29123262#29123262", "title": "strstr() function get the position", "body": "<p>The only problem is that <code>fgets()</code> puts the <code>'\\n'</code> in the buffer, thus making <code>strstr()</code> try to match that character too, there are multiple techniques to remove that character, a simple one is</p>\n\n<pre><code>strtok(myArr, \"\\n\");\n</code></pre>\n\n<p>right after the <code>fgets()</code> it works because <code>strtok()</code> will replace the <code>'\\n'</code> by a <code>'\\0'</code>., or</p>\n\n<pre><code>size_t length = strlen(myArr);\nmyArr[length - 1] = '\\0';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 4091456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d18a362f788d8b5a691c81590689e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Stoughton", "link": "https://stackoverflow.com/users/4091456/nick-stoughton"}, "is_accepted": false, "score": 0, "last_activity_date": 1426687291, "creation_date": 1426687291, "answer_id": 29124139, "question_id": 29123226, "link": "https://stackoverflow.com/questions/29123226/strstr-function-get-the-position/29124139#29124139", "title": "strstr() function get the position", "body": "<p>I'm not entirely sure I understand the question, but I'm guessing that \"query.txt\" (which gets read into the stack object) consists of lines of words (no longer than 30 chars per line), something like\n    some words\n    some more words\n    words on a line\nwhile \"hello.txt\" contains a single line, the word you are searching for:\n    word\nAnd you would like the program to produce the output:\n    6\n    11\n    1\n    1\nfor the above input.</p>\n\n<p>As mentioned in comments, the fgets() function will include the terminating '\\n' in the buffer it reads.\nAlso, the strstr() function takes arguments \n    char *strstr(const char *haystack, const char *needle);\nThat is, the first argument is the big string (the haystack) in which you are searching for a little string (the needle). It returns a pointer into the haystack for where to find the needle. Therefore, if I understood your question, the program should become:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\n#define WORDMAXLENGTH 30\n#define MAXLENGTH 200\nint\nmain()\n{\n    typedef struct {\n        char stack[MAXLENGTH][WORDMAXLENGTH];\n        int top;\n    } stack;\n    stack query;\n\n    query.top = 0;\n    int i = 0, j = 0, q = 0;\n\n    char myArr[MAXLENGTH];\n    char *PosStr = NULL;\n    FILE *inFile = fopen(\"query.txt\", \"r\");\n    FILE *inFile2 = fopen(\"hello.txt\", \"r\");\n\n    while (fgets(query.stack[query.top], WORDMAXLENGTH, inFile) != NULL) {\n        query.top++;\n    }\n\n    fgets(myArr, MAXLENGTH, inFile2);\n        myArr[strlen(myArr)-1] = 0;\n\n    for (i = 0; i &lt; query.top; i++) {\n        PosStr = strstr(query.stack[i], myArr); //get the position of s2 (Q1)\n\n        printf(\"%d\\n\", PosStr -query.stack[i] + 1);\n    }\n\n    fclose(inFile);\n    fclose(inFile2);\n    return 0;\n}\n</code></pre>\n\n<p>In particular, you were searching for a haystack in a needle, and the needle wasn't actually what you were looking for!</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 4610215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4cbe1c568135b68060c1d3611d9d1da?s=128&d=identicon&r=PG&f=1", "display_name": "whalesf", "link": "https://stackoverflow.com/users/4610215/whalesf"}, "edited": false, "score": 0, "creation_date": 1426698839, "post_id": 29124514, "comment_id": 46482730, "body": "Are there any faster way to know which word it is ? e.g dog 9 , fox 4"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 49, "user_id": 4610215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4cbe1c568135b68060c1d3611d9d1da?s=128&d=identicon&r=PG&f=1", "display_name": "whalesf", "link": "https://stackoverflow.com/users/4610215/whalesf"}, "edited": false, "score": 0, "creation_date": 1426699153, "post_id": 29124514, "comment_id": 46482950, "body": "Your program didn&#39;t go so far as to extract whole words from the <code>hello.txt</code> string, and I didn&#39;t go further than to improve what you have done. I suggest you examine <code>strtok()</code> which can be used in a loop to extract words from the test string, which you can then compare with the word list."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1426711895, "last_edit_date": 1426711895, "creation_date": 1426688287, "answer_id": 29124514, "question_id": 29123226, "link": "https://stackoverflow.com/questions/29123226/strstr-function-get-the-position/29124514#29124514", "title": "strstr() function get the position", "body": "<p>I presumed that the program is intended to check each of the word list in the first file, for occurrence in the single text line of the second file, and with a few tweaks, it works.</p>\n\n<p>I added some error checking and removed the trailing <code>newline</code> from the file inputs. I checked the result of <code>strstr()</code> before printing values based on <code>NULL</code>. I also added another <code>#define</code> to distinguish the size of the stack from the length of the test string, and, I check the stack does not overflow.</p>\n\n<p><strong>UPDATE</strong> revises the code to check whole words - case insensitive.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\n#define WORDMAXLENGTH 30\n#define MAXENTRY 200\n#define MAXLENGTH 200\n\ntypedef struct{\n    char stack[MAXENTRY][WORDMAXLENGTH];\n    int top;\n} stack;\n\nint main(){\n    FILE *inFile;\n    FILE *inFile2;\n    int i, w;\n    char myArr[MAXLENGTH];\n    char *sptr; \n    stack query;\n    query.top = 0;\n    inFile = fopen(\"query.txt\",\"r\");\n    inFile2 = fopen(\"hello.txt\",\"r\");\n    if (inFile == NULL || inFile2 == NULL) {\n        printf(\"Cannot open both files\\n\");\n        return 1;\n    }\n    while(fgets(query.stack[query.top], WORDMAXLENGTH, inFile) != NULL){\n        i = strcspn(query.stack[query.top], \"\\r\\n\");\n        query.stack[query.top][i] = 0;      // remove trailing newline etc\n        if (++query.top &gt;= MAXENTRY)        // check stack full\n            break;\n    }\n\n    fgets(myArr,MAXLENGTH,inFile2);\n    //myArr [ strcspn(myArr, \"\\r\\n\") ] = 0; // remove trailing newline etc\n    w = 1;                                  // word count\n    sptr = strtok(myArr, \" \\t\\r\\n\");        // removes trailing stuff anyway\n    while (sptr) {                          // each word in test string\n        for(i=0; i&lt;query.top; i++) {        // each word in library list\n            if (stricmp(sptr, query.stack[i]) == 0)  // without case\n                printf(\"%-4d %s\\n\", w, query.stack[i]);\n        }\n        w++;\n        sptr = strtok(NULL, \" \\t\\r\\n\");\n    }\n\n    fclose(inFile);\n    fclose(inFile2);\n    return 0;\n}\n</code></pre>\n\n<p>File <code>query.txt</code>:</p>\n\n<pre><code>cat\ndog\nfox\nrabbit\n</code></pre>\n\n<p>File <code>hello.txt</code>:</p>\n\n<pre><code>A quick brown fox jumps over the lazy dog\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>4    fox\n9    dog\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1426689747, "creation_date": 1426689747, "answer_id": 29125026, "question_id": 29123226, "link": "https://stackoverflow.com/questions/29123226/strstr-function-get-the-position/29125026#29125026", "title": "strstr() function get the position", "body": "<pre><code>Note: comments beginning with '// --' are reasons for following code changes\n\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt; // exit(), EXIT_FAILURE\n#include&lt;string.h&gt;\n\n// --wrap #define number in parens\n// --vertical alignment make the code easier to read\n// --vertical spacing makes the code easier to read\n#define WORDMAXLENGTH (30)\n#define MAXLENGTH     (200)\n\n// --place data type definitions outside of any function\n// --in modern C, for struct definitions just declare the struct\n// --and don't clutter the code with typedef's for struct definitions\nstruct stack\n{\n    char stack[MAXLENGTH][WORDMAXLENGTH];\n    int top;\n};\n\n// --place large data struct in file global memory, not on stack\n// contains search keys and number of search keys\nstatic struct stack query;\n\n// --using Georgian formatting for braces makes the code harder to read\n// --indent code blocks within braces for readabillity\nint main()\n{\n    query.top = 0;\n    // --while legal C, multiple variable declarations on same line\n    // --leads to maintenance problems and reduces readability\n    int i = 0;\n    // -- eliminate unused variables\n    //int j = 0;\n    //int q = 0;\n    char myArr[MAXLENGTH]; // line to search\n    char *PosStr = NULL;   // ptr to where search key found\n\n    // --always check the returned value from fopen to assure operation successful\n    // --always place the literal on the left in comparisons\n    // --    so compiler can catch errors like using '=' rather than '=='\n    FILE *inFile = fopen(\"query.txt\",\"r\");\n    if( NULL == inFile )\n    { // then fopen failed\n        perror( \"fopen for query.txt for read failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    FILE *inFile2 = fopen(\"hello.txt\",\"r\");\n    if( NULL == inFile2 )\n    { // then, fopen failed\n        perror( \"fopen for hello.txt for read failed\" );\n        fclose(inFile);  // cleanup\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    // --the following while loop can\n    // -overflow the available space in the struct\n    // --leading to undefined behaviour and can/will lead to a seg fault event\n    // --comment the code so reverse engineering is not needed\n    // note: each search key in the struct field: stack[]  will be terminated with '\\n'\n    //       so eliminate them\n    // read in complete file. line-by-line to struct\n    // while tracking number of lines\n    while(fgets(query.stack[query.top],WORDMAXLENGTH,inFile))\n    {\n        query.top++;\n        strtok(myArr, \"\\n\"); // replace newline with NUL char   \n    } // end while\n\n    // --always check returned value from fgets\n    // --to assure the operation was successful\n    // read line to search\n    if( NULL == fgets(myArr,MAXLENGTH,inFile2) )\n    { // then fgets failed\n        perror( \"fgets for hello.txt file failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fgets successful\n\n    for(i = 0; i &lt; query.top; i++)\n    {\n        // --strstr will return NULL if search string not found\n        // --always check returned value from strstr (!=NULL) to assure successful operation\n        PosStr = strstr(myArr,query.stack[i]);//get the position of s2 (Q1)\n\n        if( PosStr )\n        { // then at least one instance of current search key found in line\n            // --difference between two pointer is a 'long int', not an 'int'\n            // display offset into line\n            printf(\"%ld\\n\", PosStr -  myArr + 1);\n        } // end if\n    } // end for\n\n    fclose(inFile);\n    fclose(inFile2);\n    return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4610215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4cbe1c568135b68060c1d3611d9d1da?s=128&d=identicon&r=PG&f=1", "display_name": "whalesf", "link": "https://stackoverflow.com/users/4610215/whalesf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 0, "accepted_answer_id": 29124514, "answer_count": 4, "score": 0, "last_activity_date": 1426711895, "creation_date": 1426684849, "last_edit_date": 1426686448, "question_id": 29123226, "link": "https://stackoverflow.com/questions/29123226/strstr-function-get-the-position", "title": "strstr() function get the position", "body": "<p>There are two text, text a is content and text b is list out the words line by line. The program is to get the position of words from text b in the content.</p>\n\n<p>This is my program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\n#define WORDMAXLENGTH 30\n#define MAXLENGTH 200\n\nint main(){\n    typedef struct{\n        char stack[MAXLENGTH][WORDMAXLENGTH];\n        int top;\n    }stack;\n\n    stack query;\n    query.top = 0;\n    int i = 0, j = 0,q = 0;\n    char myArr[MAXLENGTH];\n    char *PosStr = NULL; \n    FILE *inFile = fopen(\"query.txt\",\"r\");\n    FILE *inFile2 = fopen(\"hello.txt\",\"r\");\n\n    while(fgets(query.stack[query.top],WORDMAXLENGTH,inFile) != NULL){\n        query.top++;\n    }\n\n    fgets(myArr,MAXLENGTH,inFile2);\n\n    for(i = 0; i &lt; query.top; i++){\n        PosStr = strstr(myArr,query.stack[i]);//get the position of s2 (Q1)\n        printf(\"%d\\n\", PosStr -  myArr + 1);\n    }\n\n    fclose(inFile);\n    fclose(inFile2);\n    return 0;\n}\n</code></pre>\n\n<p>Q1. Is this equation right? If it is wrong, how can I get the position? If it is right, why I can't get the position correctly? In addition, some of the result of PosStr is 0.</p>\n"}, {"tags": ["c", "segmentation-fault", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1426684767, "post_id": 29123182, "comment_id": 46472625, "body": "Please post the related code here."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 5, "creation_date": 1426684839, "post_id": 29123182, "comment_id": 46472679, "body": "You have a bug which is causing heap corruption - run your code under valgrind in order to find the bug."}, {"owner": {"reputation": 15670, "user_id": 2227834, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7rqSI.png?s=128&g=1", "display_name": "Unheilig", "link": "https://stackoverflow.com/users/2227834/unheilig"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1426685012, "post_id": 29123182, "comment_id": 46472817, "body": "@PaulR Just curious: which part of the error tells you that it has to deal with heap corruption? (<code>malloc.c</code> and / or <code>sysmalloc</code>?) Thanks."}, {"owner": {"reputation": 4265, "user_id": 1472474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fe184097bbf00ca0b37a90730454fdc?s=128&d=identicon&r=PG", "display_name": "Jan Spurny", "link": "https://stackoverflow.com/users/1472474/jan-spurny"}, "edited": false, "score": 0, "creation_date": 1426685186, "post_id": 29123182, "comment_id": 46472920, "body": "Please do not post code in images. That&#39;s just wrong."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 15670, "user_id": 2227834, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7rqSI.png?s=128&g=1", "display_name": "Unheilig", "link": "https://stackoverflow.com/users/2227834/unheilig"}, "edited": false, "score": 1, "creation_date": 1426687388, "post_id": 29123182, "comment_id": 46474424, "body": "@Unheilig: the error message is complaining because malloc&#39;s own internal data structures for managing the heap have become corrupted - this usually happens when something writes to an invalid address, e.g. writing to a dangling/wild pointer or running off the end of an array."}], "answers": [{"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 0, "last_activity_date": 1429079470, "creation_date": 1429079470, "answer_id": 29643064, "question_id": 29123182, "link": "https://stackoverflow.com/questions/29123182/unknown-segmentation-fault-error/29643064#29643064", "title": "Unknown segmentation fault error", "body": "<p>It means that the memory allocation/deallocation functions have detected a serious problem in the heap, one that means using it is probably not safe to continue.</p>\n\n<p>To understand this, realise that a heap almost always consists of data blocks <em>and</em> control information intermixed in memory (not totally required but most implementations would probably do it that way).</p>\n\n<p>If you write beyond the end of an allocated block, you're therefore likely to corrupt some control information, such as with:</p>\n\n<pre><code>char *twoBytes = malloc(2);\nmemset (twoBytes, '\\0', 10000);\n</code></pre>\n\n<p>Even assuming there's some free space at the end of the two bytes to make the allocations efficient (and you, as a developer, should <em>never</em> assume this), writing ten thousand bytes will almost certainly cause some severe damage.</p>\n\n<p>Unfortunately, errors in the heap are rarely detected close to where they happen, so you'll need to examine your code for places where you may be writing beyond the ends of buffers. Another alternative is to use a tool like <code>valgrind</code> to detect suspect writes.</p>\n"}], "owner": {"reputation": 37, "user_id": 4668645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b834134103683352b984a5c2b6dd1d5?s=128&d=identicon&r=PG&f=1", "display_name": "Proxy_IE", "link": "https://stackoverflow.com/users/4668645/proxy-ie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 29643064, "answer_count": 1, "score": -3, "last_activity_date": 1441977756, "creation_date": 1426684732, "last_edit_date": 1426687514, "question_id": 29123182, "link": "https://stackoverflow.com/questions/29123182/unknown-segmentation-fault-error", "title": "Unknown segmentation fault error", "body": "<p><img src=\"https://i.stack.imgur.com/dYbdH.png\" alt=\"enter image description here\"></p>\n\n<p>Can someone explain me what this error means?</p>\n\n<p>If the image is not clear, this is the error:</p>\n\n<pre><code>Main: malloc.c:2372: sysmalloc: Assertion `(old_top == (((mbinptr) (((char *) &amp;((av)-&gt;bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 *(sizeof(size_t))) - 1)) &amp; ~((2 *(sizeof(size_t))) - 1))) &amp;&amp; ((old_top)-&gt;size &amp; 0x1) &amp;&amp; ((unsigned long) old_end &amp; pagemask) == 0)' failed.\n</code></pre>\n"}, {"tags": ["c", "resources", "gtk", "embedded-resource", "gtk3"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1426691956, "post_id": 29122549, "comment_id": 46477857, "body": "What data format is the image resource itself?"}, {"owner": {"reputation": 141, "user_id": 3469518, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6f187b866be3a51e6ee29dd5e496930c?s=128&d=identicon&r=PG&f=1", "display_name": "DevOvercome", "link": "https://stackoverflow.com/users/3469518/devovercome"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1426692195, "post_id": 29122549, "comment_id": 46478026, "body": "@andlabs well, png for now. Can convert to bmp or any other, no problem."}], "answers": [{"tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": true, "score": 2, "last_activity_date": 1426692941, "creation_date": 1426692941, "answer_id": 29126257, "question_id": 29122549, "link": "https://stackoverflow.com/questions/29122549/how-to-load-image-from-embedded-resources/29126257#29126257", "title": "How to load image from embedded resources", "body": "<p>GTK+ doesn't support Windows resources (at least as far as I can tell). Instead, it uses its own cross-platform resource format, <a href=\"https://developer.gnome.org/gio/stable/gio-GResource.html\" rel=\"nofollow\">GResource</a>. The easiest way to get embedded resources working is to use this. It isn't compatible with Windows resource editors, and requires generating an extra C source file, but it should work fine so long as you use GLib or GTK+. You should have the GResource compiler as part of your GTK+ install (but I'm not 100% sure). And if you go this route, you'll be able to keep using PNG files. (I don't know how to use PNG files with Windows resources, if that even is possible.)</p>\n\n<p>If you insist on using Windows resources, though, I can think of one possible way to do this, though this isn't the only one: use the Windows API resource functions to load an <code>HBITMAP</code> from your resource, call <code>GetObject()</code> to get the <code>BITMAP</code> structure from the <code>HBITMAP</code>, and then calling <a href=\"https://developer.gnome.org/gdk-pixbuf/stable/gdk-pixbuf-Image-Data-in-Memory.html#gdk-pixbuf-new-from-data\" rel=\"nofollow\"><code>gdk_pixbuf_new_from_data()</code></a> with the appropriate fields from the <code>BITMAP</code> structure as parameters (<code>rowstride</code> == <code>BITMAP.bmWidthBytes</code>). Good luck!</p>\n"}], "owner": {"reputation": 141, "user_id": 3469518, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6f187b866be3a51e6ee29dd5e496930c?s=128&d=identicon&r=PG&f=1", "display_name": "DevOvercome", "link": "https://stackoverflow.com/users/3469518/devovercome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "accepted_answer_id": 29126257, "answer_count": 1, "score": 0, "last_activity_date": 1426692941, "creation_date": 1426682968, "question_id": 29122549, "link": "https://stackoverflow.com/questions/29122549/how-to-load-image-from-embedded-resources", "title": "How to load image from embedded resources", "body": "<p>I want to set image to button:</p>\n\n<pre><code>GtkImage* imageForButton = gtk_image_new_from_resource(\"which path is here?\");\nGtkWidget* btn = gtk_button_new();\ngtk_button_set_image(GTK_BUTTON(btn));\n</code></pre>\n\n<p>How to make it work with embedded resources? </p>\n\n<p>I have resource.h/resource.rc, gonna try to use MakeIntResource, but I don't see any use of it for GTK.</p>\n"}, {"tags": ["c", "hex"], "comments": [{"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 1, "creation_date": 1426683621, "post_id": 29122523, "comment_id": 46471755, "body": "Please don&#39;t just ask us to solve the problem for you. Show us how you tried to solve the problem yourself, then show us exactly what the result was, and tell us why you feel it didn&#39;t work. See also the help pages (linked at the top of every page) for how to write a good question."}, {"owner": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "reply_to_user": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 0, "creation_date": 1426686557, "post_id": 29122523, "comment_id": 46473847, "body": "More information added."}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "edited": false, "score": 0, "creation_date": 1426772341, "post_id": 29123787, "comment_id": 46514689, "body": "Thanks for your reply, would this be the correct way to join the two shorts (I got the datatype wrong in my original comment) <code>unsigned long combo(unsigned short n1, unsigned short n2) {     return n1 &lt;&lt; 16 | n2; }</code>"}, {"owner": {"reputation": 1268, "user_id": 3129752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9TDZu.jpg?s=128&g=1", "display_name": "Baris Demiray", "link": "https://stackoverflow.com/users/3129752/baris-demiray"}, "reply_to_user": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "edited": false, "score": 0, "creation_date": 1426864227, "post_id": 29123787, "comment_id": 46557842, "body": "You&#39;re welcome. Yes, it should work. Since you&#39;re using all unsigned you&#39;re good to go, but as an extra information just be careful when left shift and signed values are mixed as it results in undefined behaviour, AFAIK."}], "tags": [], "owner": {"reputation": 1268, "user_id": 3129752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9TDZu.jpg?s=128&g=1", "display_name": "Baris Demiray", "link": "https://stackoverflow.com/users/3129752/baris-demiray"}, "is_accepted": false, "score": 0, "last_activity_date": 1426686343, "creation_date": 1426686343, "answer_id": 29123787, "question_id": 29122523, "link": "https://stackoverflow.com/questions/29122523/arinc429-32-bit-words/29123787#29123787", "title": "Arinc429 32 bit words", "body": "<p>You will need to have a look at bitwise operators. Especially right and left shift operators (watch your Endianness) in order to, for example, set a variable to <code>arinc_high</code> and then to move it accordingly. Then you will be setting the remaining part with bitwise OR, for example.</p>\n"}], "owner": {"reputation": 186, "user_id": 886045, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/ba081ade4e31f47f147a0a2272c17682?s=128&d=identicon&r=PG", "display_name": "G33kCentric", "link": "https://stackoverflow.com/users/886045/g33kcentric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426686513, "creation_date": 1426682910, "last_edit_date": 1426686513, "question_id": 29122523, "link": "https://stackoverflow.com/questions/29122523/arinc429-32-bit-words", "title": "Arinc429 32 bit words", "body": "<p>So I have started a new project at work which is introducing a lot of new concepts. </p>\n\n<p>I'm using the arinc429 USB box and c and need to read information coming in from the buffer, which is fine, it's what to do with the data I get afterwards I'm having a little trouble with. </p>\n\n<p>With each data item in the buffer I get a arinc_low and arinc_high unsigned longs which both represent the end and beginning of a hex value. How do I take these two hex values, put them together and construct the 32 bit word so I can retrieve what I need, for example, bits 1-8 are used for the Label etc.</p>\n\n<p>So far I have the following: </p>\n\n<pre><code>snprintf(low, 16, \"%lx\", buffer[i].arinc_low);\nsnprintf(high, 16, \"%lx\", buffer[i].arinc_high);\n</code></pre>\n\n<p>Through which I can iterate the resulting chars: </p>\n\n<pre><code>for(i=0;i&lt;sizeof(low);i++)\n{\n    printf(\"%d\", low[i]);\n}\n</code></pre>\n\n<p>etc. </p>\n\n<p>The results im getting for example are: </p>\n\n<pre><code>102 55 102 -24 ......\n</code></pre>\n\n<p>Are these the bits that make up the 32 bit word that I am after, from looking at the documentation it would seem that these are sensible numbers to be getting back. Like I said, this project really brings in a lot of new concepts for me that I have glanced at fleetingly in the past, but never really put into practical use. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "struct", "tree"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1426683317, "post_id": 29122456, "comment_id": 46471564, "body": "When you create your node, the <code>child</code> pointer is being set to <code>NULL</code>. But your <code>for</code> loop is attempting to reference <code>child[i]</code>, so that&#39;s a segmentation fault. You need to allocate memory for the <code>child</code> array of node pointers before you can reference them."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4668115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8d03ebe024c4d85d0786708f193ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Hlias A.", "link": "https://stackoverflow.com/users/4668115/hlias-a"}, "edited": false, "score": 0, "creation_date": 1426693147, "post_id": 29122886, "comment_id": 46478729, "body": "Thank you very much. I used the structure you pointed out. That was really helpful. Could please also tell me a way to print or search for a node in this data structure? I am fairly new to C and particularly data structures and i am having a hard time."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 75, "user_id": 4668115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8d03ebe024c4d85d0786708f193ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Hlias A.", "link": "https://stackoverflow.com/users/4668115/hlias-a"}, "edited": false, "score": 0, "creation_date": 1426696808, "post_id": 29122886, "comment_id": 46481402, "body": "@HliasA. I think if you study this structure a little, you can figure this out. It&#39;s just based upon simple linked lists where you can follow the links until you see <code>NULL</code> (the <code>add_sibling</code> function is an example of that). To print the whole structure, you&#39;d need to decide if you are doing breadth-first or depth-first traversal. But it&#39;s the same idea: just follow the links and print at each step of the way. I&#39;ll leave that part as an exercise. Keep trying a bit and if you have a specific implementation and are stuck, you can post another question about it."}, {"owner": {"reputation": 417, "user_id": 405369, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b9c43c14b58fca81c2c892758fd556ae?s=128&d=identicon&r=PG", "display_name": "user405369", "link": "https://stackoverflow.com/users/405369/user405369"}, "edited": false, "score": 0, "creation_date": 1610123953, "post_id": 29122886, "comment_id": 116041736, "body": "Thank you very much for showing the right data structure to use.."}], "tags": [], "owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "is_accepted": true, "score": 10, "last_activity_date": 1426694894, "last_edit_date": 1426694894, "creation_date": 1426683905, "answer_id": 29122886, "question_id": 29122456, "link": "https://stackoverflow.com/questions/29122456/how-to-create-a-n-ary-tree-in-c/29122886#29122886", "title": "how to create a n-ary tree in c", "body": "<p>Just allocate memory for the <code>child</code> struct member before using it:</p>\n\n<pre><code>current_node-&gt;child = malloc(3 * sizeof(node *));\n\nfor (i=0; i&lt;3; i++) {\n    current_node-&gt;child[i] = createNode(array[i],(current_node-&gt;depth)+1);\n    current_node-&gt;children++;\n    printf(\"%s  has been inserted to the tree\\n\",current_node-&gt;word);\n}\n</code></pre>\n\n<p>The structure you've defined means you have to manage each level as an array of nodes with a potentially dynamic number of elements. A more common structure used for n-ary tree representation in C would be:</p>\n\n<pre><code>struct node {\n    char *word;\n    int depth, children;  // Reconsider if you need these\n                          //   for maintenance effort versus benefit\n    struct node *child;   // point to children of this node\n    struct node *next;    // point to next node at same level\n};\n</code></pre>\n\n<p>So the structure looks like this:</p>\n\n<pre><code>Root -&gt; NULL\n |\n V\nChild-1.1 -&gt; Child-1.2 -&gt; ... -&gt; Child-1.n -&gt; NULL\n |              |                   |            \n |              V                   V\n |              ...              Child-1.n.1 -&gt; ... -&gt; NULL\n V\nChild-1.1.1 -&gt; Child-1.1.2 -&gt; ... -&gt; NULL\n |\n ... etc\n</code></pre>\n\n<p>You'd then need to modify your <code>createNode</code> and write your other tree management routines accordingly. A partial and very terse sample of how they might look would be (not necessarily containing all the right validity checks or node removal/deallocations):</p>\n\n<pre><code>struct node {\n    int data;\n    struct node *next;\n    struct node *child;\n};\n\ntypedef struct node node;\n\nnode * new_node(int);\nnode * add_sibling(node *, int);\nnode * add_child(node *, int);\n\nint main(int argc, char *argv[])\n{\n    int i;\n    node *root = new_node(0);\n\n    for ( i = 1; i &lt;= 3; i++ )\n        add_child(root, i);\n}\n\nnode * new_node(int data)\n{\n    node *new_node = malloc(sizeof(node));\n\n    if ( new_node ) {\n        new_node-&gt;next = NULL;\n        new_node-&gt;child = NULL;\n        new_node-&gt;data = data;\n    }\n\n    return new_node;\n}\n\nnode * add_sibling(node * n, int data)\n{\n    if ( n == NULL )\n        return NULL;\n\n    while (n-&gt;next)\n        n = n-&gt;next;\n\n    return (n-&gt;next = new_node(data));\n}\n\nnode * add_child(node * n, int data)\n{\n    if ( n == NULL )\n        return NULL;\n\n    if ( n-&gt;child )\n        return add_sibling(n-&gt;child, data);\n    else\n        return (n-&gt;child = new_node(data));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "is_accepted": false, "score": 0, "last_activity_date": 1505322635, "creation_date": 1505322635, "answer_id": 46203300, "question_id": 29122456, "link": "https://stackoverflow.com/questions/29122456/how-to-create-a-n-ary-tree-in-c/46203300#46203300", "title": "how to create a n-ary tree in c", "body": "<p>some additional functions that might be useful</p>\n\n<pre><code>void remove_node(node* node, node* new_root)\n{\n    if(node-&gt;parent != NULL)\n        remove_node(node-&gt;parent, new_root)\n\n    if(node-&gt;next != NULL)\n        remove_node(node-&gt;next, new_root)\n\n    if((node-&gt;child != NULL) &amp;&amp; (node-&gt;child != new_root))\n        remove_node(node-&gt;child, new_root)\n\n    free(node)\n}\n\n// new root must be element of the tree\nvoid new_root_tree(node **root, node *new_root) {\n    *root = new_root\n    remove_node(new_root-&gt;parent);\n    remove_node(new_root-&gt;next);\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4668115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8d03ebe024c4d85d0786708f193ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Hlias A.", "link": "https://stackoverflow.com/users/4668115/hlias-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13523, "favorite_count": 2, "accepted_answer_id": 29122886, "answer_count": 2, "score": 6, "last_activity_date": 1505322635, "creation_date": 1426682732, "question_id": 29122456, "link": "https://stackoverflow.com/questions/29122456/how-to-create-a-n-ary-tree-in-c", "title": "how to create a n-ary tree in c", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nstruct node{\n  char *word;\n  int depth, children;\n  struct node  **child;\n};\n\ntypedef struct node node;\n\n\nnode *createTree();\nnode *createNode(char *word,int depth);\n\nint main(int argv,char *argc[]){\n   node *root,*current_node;\n   root=createNode(\"root\",0);\n   char *array[]={\"string1\",\"string2\",\"string3\"};\n   current_node=root;\n   printf(\"root has been created with word: %s \\n\",current_node-&gt;word);\n   int i;\n   for (i=0; i&lt;3; i++){\n      current_node-&gt;child[i]=createNode(array[i],(current_node-&gt;depth)+1);\n      current_node-&gt;children++;\n      printf(\"%s  has been inserted to the tree\\n\",current_node-&gt;word);\n   }\n\n}\n\n\n\nnode *createTree(){\n   printf(\"root has been created\\n\");\n   return createNode(\"\",0);    /*creates the first node*/\n}\n\nnode *createNode(char *word,int depth){\n   node *new_node;\n   new_node=malloc(sizeof(node));\n   new_node-&gt;word=word;\n   new_node-&gt;depth=depth;\n   new_node-&gt;children=0;\n   new_node-&gt;child=NULL;\n}\n</code></pre>\n\n<p>So what i am trying to do here is build a n-ary tree. I use createNode function to create the children of the root but as soon as i am trying to link an adress of a new node to a child, the program crashes with segmentation fault. I know my mistake probably is,the way i try to create the children but i cant find. Help anyone?</p>\n"}, {"tags": ["c", "io", "ternary-operator", "puts"], "comments": [{"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426682384, "post_id": 29122305, "comment_id": 46470938, "body": "Please, don&#180;t pay attention to the content of the line. I just exemplified it. The point is in the syntax, which remains the same as the origin."}], "answers": [{"comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1426683329, "post_id": 29122460, "comment_id": 46471576, "body": "This will insert an additional newline between the <code>: </code> and the <code>y</code>."}, {"owner": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1426683392, "post_id": 29122460, "comment_id": 46471620, "body": "Yes, you are right. It will. Your <code>printf()</code> method is better."}], "tags": [], "owner": {"reputation": 8450, "user_id": 2842375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25280992c96f51e2b09f71beb360ef?s=128&d=identicon&r=PG&f=1", "display_name": "shauryachats", "link": "https://stackoverflow.com/users/2842375/shauryachats"}, "is_accepted": false, "score": 2, "last_activity_date": 1426683581, "last_edit_date": 1426683581, "creation_date": 1426682741, "answer_id": 29122460, "question_id": 29122305, "link": "https://stackoverflow.com/questions/29122305/called-object-is-not-a-function-or-function-pointer-in-use-of-ternary/29122460#29122460", "title": "called object is not a function or function pointer in use of ternary", "body": "<blockquote>\n<pre><code>puts(\"\\nx: \" (0 == 1) ? \"y1\\n\" : \"y2\\n\");\n</code></pre>\n</blockquote>\n\n<p>This is not the right way to do what you want, because you cannot concatenate C strings like this.</p>\n\n<p>You can do this using <code>puts()</code>:</p>\n\n<pre><code>puts(\"\\nx: \");\nputs((0==1) ? \"y1\\n\" : \"y2\\n\");\n</code></pre>\n\n<h3>EDIT: (Suggested by @WilliamPursell</h3>\n\n<p>To avoid the appending of an unwanted newline character, use <code>fputs()</code> instead of <code>puts()</code>.</p>\n\n<pre><code>fputs(\"\\nx: \");\nfputs((0==1) ? \"y1\\n\" : \"y2\\n\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426683351, "post_id": 29122473, "comment_id": 46471593, "body": "Thanks. Well I thought I can, since I can <code>printf(&quot;sample&quot;&quot; continues&quot;);</code> Now the ternary is 1 level more useless to me."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 1, "creation_date": 1426683400, "post_id": 29122473, "comment_id": 46471623, "body": "Two literal strings can indeed be concatenated that way.  That rule does not extend to other tokens."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "edited": false, "score": 0, "creation_date": 1426683851, "post_id": 29122473, "comment_id": 46471934, "body": "@Malina it&#39;s not, there is not  much difference between your code and this solution."}, {"owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426684396, "post_id": 29122473, "comment_id": 46472354, "body": "@iharob Technically yes. But there is still difference pro-ternary."}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": true, "score": 3, "last_activity_date": 1426682765, "creation_date": 1426682765, "answer_id": 29122473, "question_id": 29122305, "link": "https://stackoverflow.com/questions/29122305/called-object-is-not-a-function-or-function-pointer-in-use-of-ternary/29122473#29122473", "title": "called object is not a function or function pointer in use of ternary", "body": "<p>You are attempting to call an object which is neither a function nor a function pointer!  In particular, the compiler is seeing the open paren after the string and thinks (as much as a compiler can be said to \"think\") that you are trying to invoke a function call.  You cannot concatenate a string with the ternary operator as you are trying to do.  Try:</p>\n\n<pre><code>printf(\"\\nx: %s\", (0 == 1) ? \"y1\\n\" : \"y2\\n\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15387, "user_id": 637284, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1df443ce610afdbcb3da8daf716dfd?s=128&d=identicon&r=PG", "display_name": "halex", "link": "https://stackoverflow.com/users/637284/halex"}, "is_accepted": false, "score": 1, "last_activity_date": 1426682792, "creation_date": 1426682792, "answer_id": 29122482, "question_id": 29122305, "link": "https://stackoverflow.com/questions/29122305/called-object-is-not-a-function-or-function-pointer-in-use-of-ternary/29122482#29122482", "title": "called object is not a function or function pointer in use of ternary", "body": "<p>You can not concat the strings the way you do.</p>\n\n<p>The simple solution is to use printf</p>\n\n<pre><code>printf(\"\\nx: %s\", (0 == 1) ? \"y1\\n\" : \"y2\\n\");\n</code></pre>\n\n<p>or if you insist on using puts you need the strcat function from string.h</p>\n\n<pre><code>char s[256] = \"\\nx: \";\nputs(strcat(s, (0 == 1) ? \"y1\\n\" : \"y2\\n\"));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1426682915, "creation_date": 1426682915, "answer_id": 29122526, "question_id": 29122305, "link": "https://stackoverflow.com/questions/29122305/called-object-is-not-a-function-or-function-pointer-in-use-of-ternary/29122526#29122526", "title": "called object is not a function or function pointer in use of ternary", "body": "<p>This is your code</p>\n\n<pre><code>\"\\nx: \" (0 == 1) ? \"y1\\n\" : \"y2\\n\"\n/*     ^ this is ignored        */\n</code></pre>\n\n<p>so it seems as if the string literal was being called as a function -> <code>\"\\nx: \"(0 == 1)</code>, doesn't it look like that?</p>\n\n<p>You can achieve what you want with the <code>printf()</code> function like this</p>\n\n<pre><code>printf(\"\\nx: %s\\n\", (0 == 1) ? \"y1\" : \"y2\");\n</code></pre>\n"}], "owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 29122473, "answer_count": 4, "score": 1, "last_activity_date": 1510579720, "creation_date": 1426682303, "last_edit_date": 1427361474, "question_id": 29122305, "link": "https://stackoverflow.com/questions/29122305/called-object-is-not-a-function-or-function-pointer-in-use-of-ternary", "title": "called object is not a function or function pointer in use of ternary", "body": "<p>I am constantly receiving:</p>\n\n<p><code>error: called object is not a function or function pointer</code></p>\n\n<p>When using ternary operator like that:</p>\n\n<p><code>puts(\"\\nx: \" (0 == 1) ? \"y1\\n\" : \"y2\\n\");</code></p>\n\n<hr>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "char", "scanf"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 4, "creation_date": 1426682042, "post_id": 29122166, "comment_id": 46470702, "body": "Why don&#39;t you read the <code>scanf()</code> manual? you are using it the wrong way anyway, even if you fix it."}, {"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1426682124, "post_id": 29122166, "comment_id": 46470751, "body": "Vivek, you are overwriting <code>d</code> 3 times."}, {"owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "reply_to_user": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1426683479, "post_id": 29122166, "comment_id": 46471663, "body": "@Jared Burrows can you please explain a bit more?"}, {"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1426683532, "post_id": 29122166, "comment_id": 46471697, "body": "You loop over <code>scanf</code> and read into he same variable 3 times."}, {"owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "edited": false, "score": 0, "creation_date": 1426683673, "post_id": 29122166, "comment_id": 46471790, "body": "Well its just a part of larger program I am doing in which the for loop contain more code. I just posted the problematic bit here"}, {"owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426685982, "post_id": 29122166, "comment_id": 46473474, "body": "@chux no no it is OK. As you can see I have received the answer. Once I added a space it worked correctly. scanf was working correctly but the overall execution made an unusual behavior in that part."}, {"owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426686412, "post_id": 29122166, "comment_id": 46473751, "body": "@chux Ohh I didn&#39;t give this title somebody must have changed it."}, {"owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426686680, "post_id": 29122166, "comment_id": 46473936, "body": "@chux its now more meaningful. Thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426686831, "post_id": 29122166, "comment_id": 46474046, "body": "@Vivek I&#39;m taking down my comments as they only applied to someone else&#39;s weak editing and not your work.  This comment too - later."}], "answers": [{"comments": [{"owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "edited": false, "score": 0, "creation_date": 1426682098, "post_id": 29122180, "comment_id": 46470737, "body": "Oh thanks for the reply it worked like a charm. why does i need to do that ? i mean why add a space?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "edited": false, "score": 0, "creation_date": 1426682321, "post_id": 29122180, "comment_id": 46470884, "body": "@Vivek updated my answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426685915, "post_id": 29122180, "comment_id": 46473416, "body": "&quot;<code>\\n</code> is not a valid input for <code>%d</code> specifier&quot; is misleading.   <code>\\n</code> <i>is</i> valid input for <code>&quot;%d&quot;</code> as that speciifer, unlike <code>&quot;%c&quot;</code>, first consumes leading white-space which includes <code>&#39;\\n&#39;</code> before continuing and scanning for numeric input."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1426686366, "post_id": 29122180, "comment_id": 46473718, "body": "@chux Thank you sir for the input. Updated accordingly. Kindly review."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 23, "last_activity_date": 1426686339, "last_edit_date": 1426686339, "creation_date": 1426681988, "answer_id": 29122180, "question_id": 29122166, "link": "https://stackoverflow.com/questions/29122166/c-scanf-for-char-not-working-as-expected/29122180#29122180", "title": "C: scanf for char not working as expected", "body": "<p>You have to change</p>\n\n<pre><code>scanf(\"%c\", &amp;d);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\" %c\", &amp;d);\n       ^\n       |\n</code></pre>\n\n<p>Otherwise, <code>scanf()</code> will consider the previously entered <code>ENTER</code> key press.</p>\n\n<p>Note: </p>\n\n<ol>\n<li><p><kbd>ENTER</kbd> key press generates a <code>\\n</code>, which is a vaild input for <code>%c</code> format specifier. Adding a space before <code>%c</code> tells <code>scanf()</code> to ignore all leading whitespace-like inputs (including that previously stored <code>\\n</code>) and read the first non-whitespace character from <code>stdin</code>.</p></li>\n<li><p>As for the case with <code>%d</code> format specifier, it consumes (and ignores) any leading whitespace-like inputs before scanning for numeric inputs, so the second case does not suffer any issues.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "edited": false, "score": 0, "creation_date": 1426683322, "post_id": 29122333, "comment_id": 46471572, "body": "Thank you for the detailed explanation"}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 2, "last_activity_date": 1426682990, "last_edit_date": 1426682990, "creation_date": 1426682400, "answer_id": 29122333, "question_id": 29122166, "link": "https://stackoverflow.com/questions/29122166/c-scanf-for-char-not-working-as-expected/29122333#29122333", "title": "C: scanf for char not working as expected", "body": "<p>The problem is that when you enter a character for <code>scanf(\"%c\", &amp;d);</code>, you press the enter key. The character is consumed by the <code>scanf</code> and the newline character stays in the standard input stream(<code>stdin</code>). When <code>scanf</code>(with <code>%c</code>) is called the next time, it sees the <code>\\n</code> character in the <code>stdin</code> and consumes it, and thus does not wait for further input.</p>\n\n<p>To fix it, change</p>\n\n<pre><code>scanf(\"%c\", &amp;d);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\" %c\", &amp;d);\n//    ^Note the space before %c\n</code></pre>\n\n<p>The space before the <code>%c</code> instructs <code>scanf</code> to scan any number of whitespace characters including none and stops scanning when it encounters a non-whitespace character. Quoting the standard:</p>\n\n<blockquote>\n  <p><strong>7.21.6.2 The fscanf function</strong></p>\n  \n  <p>[...]</p>\n  \n  <ol start=\"5\">\n  <li>A directive composed of white-space character(s) is executed by reading input up to the\n  first non-white-space character (which remains unread), or until no more characters can\n  be read. The directive never fails.</li>\n  </ol>\n</blockquote>\n\n<p>The reason that using <code>%d</code> worked is that the <code>%d</code> format specifier automatically skips whitespace characters and since <code>\\n</code> is a whitespace character, <code>%d</code> does not scan it. Quoting the standard again:</p>\n\n<blockquote>\n  <p><strong>7.21.6.2 The fscanf function</strong></p>\n  \n  <p>[...]</p>\n  \n  <ol start=\"8\">\n  <li>Input white-space characters (as specified by the <code>isspace</code> function) are skipped, unless\n  the specification includes a <code>[</code>, <code>c</code>, or <code>n</code> specifier. <sup>284</sup></li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 1127, "user_id": 4050406, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nJWPT.png?s=128&g=1", "display_name": "Vivek Sasidharan", "link": "https://stackoverflow.com/users/4050406/vivek-sasidharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15517, "favorite_count": 4, "closed_date": 1525670542, "accepted_answer_id": 29122180, "answer_count": 2, "score": 5, "last_activity_date": 1591716790, "creation_date": 1426681947, "last_edit_date": 1426686531, "question_id": 29122166, "link": "https://stackoverflow.com/questions/29122166/c-scanf-for-char-not-working-as-expected", "closed_reason": "Duplicate", "title": "C: scanf for char not working as expected", "body": "<p>I was recently running a c program in my PC. It have a for loop in which some char d is scanned. The for loop runs for 3 times. During each running it prints the the count of running and then scans the value of char d. The program is as follows</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    int f;\n    char d;\n    for(f=0;f&lt;3;f++){\n        printf(\"Choice %d\\n\", f);\n        scanf(\"%c\", &amp;d);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Now the trouble is that when I run the program, the for skips the scanf part when f is 1.\nNow if i changed the code as follows </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    int f;\n    int d;\n    for(f=0;f&lt;3;f++){\n        printf(\"Choice %d\\n\", f);\n        scanf(\"%d\", &amp;d);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Now the program works fine. and scanf is executed for every iteration of for loop.</p>\n\n<p>What does seem to be the problem here? I mean when d is of type int it works fine, but when d is of type char it does not work correctly.</p>\n"}, {"tags": ["c", "random", "cryptography", "prng"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 6, "creation_date": 1426681835, "post_id": 29122111, "comment_id": 46470558, "body": "Don&#39;t get me wrong, but the answer is <code>by writing a piece of code.</code> :-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426681946, "post_id": 29122111, "comment_id": 46470638, "body": "BTW, are you looking for <a href=\"http://www.cprogramming.com/tutorial/modulus.html\" rel=\"nofollow noreferrer\">modulus operator</a>?"}, {"owner": {"reputation": 8018, "user_id": 435733, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mcTFe.jpg?s=128&g=1", "display_name": "Muis", "link": "https://stackoverflow.com/users/435733/muis"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426682131, "post_id": 29122111, "comment_id": 46470757, "body": "@SouravGhosh Yes it could be done using modulus, if you make the comment an answer I accept it."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1426682517, "post_id": 29122111, "comment_id": 46471031, "body": "If you go for <code>%</code>, then you also might want to read about the <a href=\"https://zuttobenkyou.wordpress.com/2012/10/18/generating-random-numbers-without-modulo-bias/\" rel=\"nofollow noreferrer\">modulo bias</a>."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426686836, "post_id": 29122111, "comment_id": 46474049, "body": "Personally I would look up a piece of code (usually called something like <code>getInt(int max)</code>) and integrate that. Otherwise it&#39;s pretty easy to create bias. Related <a href=\"http://stackoverflow.com/a/17309537/589259\">JavaCard code</a> . Mind the remarks."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426691955, "post_id": 29122111, "comment_id": 46477856, "body": "I presume you mean <code>1 &lt;= x &lt;= 10</code> here :)"}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426692488, "post_id": 29122111, "comment_id": 46478247, "body": "I think the <a href=\"http://crypto.stackexchange.com/a/5721/1172\">first paragraph of this answer</a> tells you all you need to know."}], "answers": [{"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426687104, "post_id": 29122367, "comment_id": 46474224, "body": "Please add some information about bias to make this answer complete."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426689942, "post_id": 29122367, "comment_id": 46476323, "body": "@MaartenBodewes Updated. Please review."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426691744, "post_id": 29122367, "comment_id": 46477660, "body": "Much better. Unfortunately the answers in the link are pretty poor. Maybe try <a href=\"http://crypto.stackexchange.com/q/7996/1172\">this</a> instead. You could of course use 8 bit number for a range 0..10 - depends if you want to change to a larger range and how much data you want to extract from the random pool (you would be OK with just 4 bits, but you would have a reject 6 times out of 16, which is rather poor)."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1426689930, "last_edit_date": 1495541574, "creation_date": 1426682518, "answer_id": 29122367, "question_id": 29122111, "link": "https://stackoverflow.com/questions/29122111/how-to-generate-a-random-number-based-on-a-byte-array/29122367#29122367", "title": "How to generate a random number based on a byte array?", "body": "<p>As per the comments follow-up, it seems what you need is <a href=\"http://www.cprogramming.com/tutorial/modulus.html\" rel=\"nofollow noreferrer\">modulus operator</a> [<code>%</code>].</p>\n\n<p>You may also need to check the related <a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow noreferrer\">wiki</a>.</p>\n\n<p>Note: Every time we use the modulo operator on a random number, there is a probability that we'll be running into <a href=\"https://zuttobenkyou.wordpress.com/2012/10/18/generating-random-numbers-without-modulo-bias/\" rel=\"nofollow noreferrer\">modulo bias</a>, which ends up in disbalancing the fair distribution of random numbers. You've to take care of that.</p>\n\n<p>For a detailed discussion on this, please see this <a href=\"https://stackoverflow.com/q/10984974/2173917\">question</a> and related answers.</p>\n"}, {"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426699290, "post_id": 29126295, "comment_id": 46483050, "body": "This will leave you with a small but detectable bias Why would you need 16 bytes to generate an integer of 32 bits???."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426706561, "post_id": 29126295, "comment_id": 46487484, "body": "It&#39;s 4 different integers extracted from 16 bytes, it&#39;s typical output of secure PRNG. I changed my mind after typing it, I don&#39;t think the question has anything to do with secure PRNG"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 0, "last_activity_date": 1426693797, "last_edit_date": 1426693797, "creation_date": 1426693045, "answer_id": 29126295, "question_id": 29122111, "link": "https://stackoverflow.com/questions/29122111/how-to-generate-a-random-number-based-on-a-byte-array/29126295#29126295", "title": "How to generate a random number based on a byte array?", "body": "<p>It depends on a bunch of things. Secure PRNG sometimes makes long byte arrays instead of integers, let's say it is 16 bytes long array, then extract 32 bit integer like so: <code>buf[0]*0x1000000+buf[1]*0x10000+buf[2]*0x100+buf[3]</code> or use shift operator. This is random so big-endian/little-endian doesn't matter. </p>\n\n<pre><code>char randbytes[16];\n//...\n\nconst char *p = randbytes;\n\n//assumes size of int is 4\nunsigned int rand1 = p[0] &lt;&lt; 24 + p[1] &lt;&lt; 16 + p[2] &lt;&lt; 8 + p[3]; p += 4;\nunsigned int rand2 = p[0] &lt;&lt; 24 + p[1] &lt;&lt; 16 + p[2] &lt;&lt; 8 + p[3]; p += 4;\nunsigned int rand3 = p[0] &lt;&lt; 24 + p[1] &lt;&lt; 16 + p[2] &lt;&lt; 8 + p[3]; p += 4;\nunsigned int rand4 = p[0] &lt;&lt; 24 + p[1] &lt;&lt; 16 + p[2] &lt;&lt; 8 + p[3];\n</code></pre>\n\n<p>Then use <code>%</code> on the integer</p>\n\n<p>ps, I think that's a long answer. If you want number between 1 and 10 then just use <code>%</code> on first byte.</p>\n"}, {"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426697806, "post_id": 29127514, "comment_id": 46482092, "body": "Note that you need a maximum of 24 bytes to generate a number between 1 and 10 (after that the chance of not generating a number between 1 and 10 becomes smaller than 1 / 2 ^ 128 :P )"}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426698969, "post_id": 29127514, "comment_id": 46482821, "body": "Note too that it would be recommended to use a 16 bit number if you want to bring down the maximum number of bytes required (in this case to 20 bytes)."}, {"owner": {"reputation": 8018, "user_id": 435733, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mcTFe.jpg?s=128&g=1", "display_name": "Muis", "link": "https://stackoverflow.com/users/435733/muis"}, "edited": false, "score": 0, "creation_date": 1426703810, "post_id": 29127514, "comment_id": 46485894, "body": "I dont know how to translate (Integer.bitCount(n) == 1) to C, so I cannot use this function."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "reply_to_user": {"reputation": 8018, "user_id": 435733, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mcTFe.jpg?s=128&g=1", "display_name": "Muis", "link": "https://stackoverflow.com/users/435733/muis"}, "edited": false, "score": 0, "creation_date": 1426703964, "post_id": 29127514, "comment_id": 46486001, "body": "You can simply leave it out, that&#39;s required for optimization only. However, <a href=\"http://stackoverflow.com/q/109023/589259\">this is stackoverflow</a>. If you need a link on how to convert <code>unsigned char</code> to a 32 bit value, just scream :)"}], "tags": [], "owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "is_accepted": false, "score": 0, "last_activity_date": 1426696187, "creation_date": 1426696187, "answer_id": 29127514, "question_id": 29122111, "link": "https://stackoverflow.com/questions/29122111/how-to-generate-a-random-number-based-on-a-byte-array/29127514#29127514", "title": "How to generate a random number based on a byte array?", "body": "<p>OK, so this answer is in Java until I get to my Eclipse C/C++ IDE:</p>\n\n<pre><code>public final static int simpleBound(Random rbg, int n) {\n\n    final int BYTE_VALUES = 256;\n\n    // sanity check, only return positive numbers\n    if (n &lt;= 0) {\n        throw new IllegalArgumentException(\"Oops\");\n    }\n\n    // sanity check: choice of value 0 or 0...\n    if (n == 1) {\n        return 0;\n    }\n\n    // sanity check: does not fit in byte\n    if (n &gt; BYTE_VALUES) {\n        throw new IllegalArgumentException(\"Oops\");\n    }\n\n    // optimization for n = 2^y\n    if (Integer.bitCount(n) == 1) {\n        final int mask = n - 1;\n        return retrieveRandomByte(rbg) &amp; mask;\n    }\n\n    // you can skip to this if you are sure n = 10\n\n    // z is upper bound, and contains floor(z / n) blocks of n values\n    final int z = (BYTE_VALUES / n) * n;\n    int x;\n    do {\n        x = retrieveRandomByte(rbg);\n    } while (x &gt;= z);\n    return x % n;\n}\n</code></pre>\n\n<p>So n is the maximum value in a range [0..n), i.e. n is exclusive. For a range [1..10] simply increase the result with 1.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426700676, "post_id": 29127879, "comment_id": 46483886, "body": "@Maarten Bodewes Given OP is using a &quot;secure PRNG&quot;, certainly of reasonable length, so agree, no practical need for bias concerns."}, {"owner": {"reputation": 8018, "user_id": 435733, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mcTFe.jpg?s=128&g=1", "display_name": "Muis", "link": "https://stackoverflow.com/users/435733/muis"}, "edited": false, "score": 0, "creation_date": 1426703621, "post_id": 29127879, "comment_id": 46485788, "body": "I want to use this code, but in reality I dont need to pick between 1 and 10, it needs to be variabele. Can I just safely replace every occurence of  1 and 10 in your code with a upper/lower bound variabele?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 8018, "user_id": 435733, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mcTFe.jpg?s=128&g=1", "display_name": "Muis", "link": "https://stackoverflow.com/users/435733/muis"}, "edited": false, "score": 0, "creation_date": 1426705717, "post_id": 29127879, "comment_id": 46487032, "body": "@Muis Almost.  Let <code>ArrayModX()</code> return the range [0...X-1], then add lower bound with<code>X = upper-lower+1</code>. If the number is outside the range 255, use larger objects than <code>unsigned char *a</code> like <code>uint32_t *a</code> and then the &quot;10&quot; can be replaced.  Some additional concerns come in if your &quot;10&quot; is larger than <code>INT_MAX</code>.  IOWs saying &quot;code with a upper/lower bound variable&quot; is too vague.  Better to say the type or range of the number like: <code>0 &lt;= lower_bound &lt;= upper_bound &lt;= INT_MAX</code> or something like that."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426714875, "post_id": 29127879, "comment_id": 46492203, "body": "This answer does still have bias, where no bias is really required."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1426718536, "post_id": 29127879, "comment_id": 46493690, "body": "@Maarten Bodewes <code>ArrayMod10BiasDetect()</code> detects and reports the bias that occurs with modulo <code>10</code> on a binary number.  Do you refer to some other bias?"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1426698412, "last_edit_date": 1426698412, "creation_date": 1426697214, "answer_id": 29127879, "question_id": 29122111, "link": "https://stackoverflow.com/questions/29122111/how-to-generate-a-random-number-based-on-a-byte-array/29127879#29127879", "title": "How to generate a random number based on a byte array?", "body": "<p>Think of the array as one big unsigned integer.  Then the answer is simple:</p>\n\n<pre><code>(Big_Number % 10) + 1\n</code></pre>\n\n<p>So all that is needed is a method to find the modulus 10 of big integers.  Using <a href=\"http://en.wikipedia.org/wiki/Modular_exponentiation\" rel=\"nofollow\">modular exponentiation</a>:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdlib.h&gt;\n\nint ArrayMod10(const unsigned char *a, size_t n) {\n  int mod10 = 0;\n  int base = (UCHAR_MAX + 1) % 10;\n  for (size_t i = n; i-- &gt; 0;  ) {\n    mod10 = (base*mod10 + a[i]) % 10;\n    base = (base * base) % 10;\n  }\n  return mod10;\n}\n\nvoid test10(size_t n) {\n  unsigned char a[n];\n\n  // fill array with your secure PRNG\n  for (size_t i = 0; i&lt;n; i++) a[i] = rand();\n\n  return ArrayMod10(a, n) + 1;\n}\n</code></pre>\n\n<p>There will be a slight bias as <code>256^n</code> is not a power of <code>10</code>.  With large <code>n</code>, this will rapidly decrease in significance.</p>\n\n<p>Untested code: Detect if a biased result occurred.  Calling code could repeatedly call this function with new <code>a</code> array values to get an unbiased result on the rare occasions when bias occurs.</p>\n\n<pre><code>int ArrayMod10BiasDetect(const unsigned char *a, size_t n, bool *biasptr) {\n  bool bias = true;\n  int mod10 = 0;\n  int base = (UCHAR_MAX + 1) % 10;  // Note base is usually 6: 256%10, 65536%10, etc.\n  for (size_t i = n; i-- &gt; 0;  ) {\n    mod10 = (base*mod10 + a[i]) % 10;\n    if (n &gt; 0) {\n      if (a[i] &lt; UCHAR_MAX) bias = false;\n    } else {\n      if (a[i] &lt; UCHAR_MAX + 1 - base) bias = false;\n    }\n    base = (base * base) % 10;\n  }\n  *biaseptr = bias;\n  return mod10;\n}\n</code></pre>\n"}], "owner": {"reputation": 8018, "user_id": 435733, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/mcTFe.jpg?s=128&g=1", "display_name": "Muis", "link": "https://stackoverflow.com/users/435733/muis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 0, "accepted_answer_id": 29127879, "answer_count": 4, "score": 1, "last_activity_date": 1426698412, "creation_date": 1426681793, "question_id": 29122111, "link": "https://stackoverflow.com/questions/29122111/how-to-generate-a-random-number-based-on-a-byte-array", "title": "How to generate a random number based on a byte array?", "body": "<p>Suppose I have an array of bytes from a secure PRNG, and I need to generate a number between 1 and 10 using that data, how would I do that correctly?</p>\n"}, {"tags": ["c++", "c", "opengl"], "comments": [{"owner": {"reputation": 3155, "user_id": 633001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34544596b8173682fa9ae7f4fe569ec0?s=128&d=identicon&r=PG", "display_name": "SinisterMJ", "link": "https://stackoverflow.com/users/633001/sinistermj"}, "edited": false, "score": 4, "creation_date": 1426681769, "post_id": 29122043, "comment_id": 46470525, "body": "I&#39;d say the behaviour is correct. Since you have a quad in one layer, it has no depth, so if you look at it perpendicularly, it has 0 size. Works as intended. You could make it a very shallow cube maybe."}, {"owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "reply_to_user": {"reputation": 3155, "user_id": 633001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34544596b8173682fa9ae7f4fe569ec0?s=128&d=identicon&r=PG", "display_name": "SinisterMJ", "link": "https://stackoverflow.com/users/633001/sinistermj"}, "edited": false, "score": 0, "creation_date": 1426681892, "post_id": 29122043, "comment_id": 46470603, "body": "@SinisterMJ Fair enough; I removed the word &quot;corectly&quot; from the title, so maybe we could focus on tips like the one you just gave"}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 1, "creation_date": 1426702183, "post_id": 29122043, "comment_id": 46484839, "body": "If a filled primitive (<i>e.g.</i> quad) is perpendicular to the image plane, it has no rasterized surface area. Have you considered drawing these perpendicular quads using <code>GL_LINES</code> instead? Line and point primitives always have guaranteed width."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "is_accepted": false, "score": 1, "last_activity_date": 1426683079, "creation_date": 1426683079, "answer_id": 29122593, "question_id": 29122043, "link": "https://stackoverflow.com/questions/29122043/display-a-quad-perpendicular-to-the-screen/29122593#29122593", "title": "Display a quad perpendicular to the screen", "body": "<p>try making it a line of some definite width when the quad is perpendicular to the screen</p>\n"}, {"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1426684950, "post_id": 29122718, "comment_id": 46472766, "body": "Immediate mode (<code>glVertex</code> etc.) is orthogonal to shaders. You can use shaders in immediate mode, and you can use the fixed-function pipeline with arrays, or even buffer objects."}], "tags": [], "owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "is_accepted": false, "score": 2, "last_activity_date": 1426683440, "last_edit_date": 1495541640, "creation_date": 1426683440, "answer_id": 29122718, "question_id": 29122043, "link": "https://stackoverflow.com/questions/29122043/display-a-quad-perpendicular-to-the-screen/29122718#29122718", "title": "Display a quad perpendicular to the screen", "body": "<p>A quad (assuming it is defined by coplanar faces, as in this case) is by definition infinitely thin. It is correct behavior for it to be invisible when perpendicular to the camera.</p>\n\n<p>The \"correct\" solution is to make a box rather than a single quad.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/20106258/drawing-cube-3d-using-opengl\">Drawing cube 3D using Opengl</a> for an example using a cube. You'll need to tweak the vertex positions to  make the cube smaller along one dimension (probably Z), but it'll give you the effect that you're looking for. </p>\n\n<p>Also, <strong>stop using the fixed function stuff</strong> (<code>glVertex</code>, etc.). It's been deprecated for years. Shaders aren't that difficult, and examples are easy to find via your favorite search engine. </p>\n"}], "owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1426686622, "creation_date": 1426681644, "question_id": 29122043, "link": "https://stackoverflow.com/questions/29122043/display-a-quad-perpendicular-to-the-screen", "title": "Display a quad perpendicular to the screen", "body": "<p>When drawing a quad, it vanishes when rotation brings in a position perpendicular to the screen. Ideally what I'd like to see is (b) but I get nothing</p>\n\n<p><img src=\"https://i.stack.imgur.com/DOmMy.png\" alt=\"enter image description here\"></p>\n\n<p>Is there something wrong with my code ? (warning old openGL code following)</p>\n\n<pre><code>void draw_rect(double vector[4][3], int rgb[3], double transp)\n{\n    GLint is_depth, is_blend, blend_src, blend_dst; \n\n    glGetIntegerv(GL_DEPTH_WRITEMASK, &amp;is_depth); \n    glGetIntegerv(GL_BLEND, &amp;is_blend); \n    glGetIntegerv(GL_BLEND_SRC, &amp;blend_src); \n    glGetIntegerv(GL_BLEND_DST, &amp;blend_dst); \n\n    glEnable(GL_BLEND); \n    glDepthMask(0); \n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); \n\n    // code to set the color ... \n\n    glBegin(GL_POLYGON); \n    glVertex3v(&amp;vector[0][0]); \n    glVertex3v(&amp;vector[1][0]); \n    glVertex3v(&amp;vector[2][0]); \n    glVertex3v(&amp;vector[3][0]); \n    glEnd(); \n\n    if (!is_blend){ glDisable(GL_BLEND); }\n    glDepthMask(is_depth); \n    glBlendFunc(blend_src, blend_dst); \n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "header-files"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 3, "creation_date": 1426681797, "post_id": 29122040, "comment_id": 46470541, "body": "<code>drivers&#47;power&#47;power_supply_core.c</code> isn&#39;t a header file. It&#39;s part of the source code of Linux."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1426682185, "post_id": 29122040, "comment_id": 46470799, "body": "Can you tell us what you&#39;re trying to do? Do you want to call <code>power_supply_is_system_supplied()</code> (without underscores)? Then you have to include <code>linux&#47;power_supply.h</code> (<code>&#47;usr&#47;src&#47;linux-headers-3.13.0-46&#47;include&#47;linux&#47;power_supply&zwnj;&#8203;.h</code>)."}, {"owner": {"reputation": 81, "user_id": 4659164, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soWcL.jpg?s=128&g=1", "display_name": "anubhav", "link": "https://stackoverflow.com/users/4659164/anubhav"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1426682527, "post_id": 29122040, "comment_id": 46471037, "body": "I want to use the function &quot;class_for_each_device&quot; in which last parameter is a function call to &quot;__power_supply_is_system_supplied&quot;."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1426682618, "post_id": 29122040, "comment_id": 46471092, "body": "So basically <a href=\"http://lxr.free-electrons.com/source/drivers/power/power_supply_core.c?v=3.13#L291\" rel=\"nofollow noreferrer\"><code>power_supply_is_system_supplied()</code></a>?"}], "owner": {"reputation": 81, "user_id": 4659164, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soWcL.jpg?s=128&g=1", "display_name": "anubhav", "link": "https://stackoverflow.com/users/4659164/anubhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426681796, "creation_date": 1426681640, "last_edit_date": 1426681796, "question_id": 29122040, "link": "https://stackoverflow.com/questions/29122040/inclusion-of-header-file", "title": "Inclusion of header file", "body": "<p>I am working on Ubuntu 14.04 and my kernel version is 3.13.0-46-generic. I want to include a file named <code>power_supply_core.c</code> in my kernel module.</p>\n\n<p>The location (supposedly) for this file is <code>/usr/src/linux-headers-3.13.0-46-generic/drivers/power/power_supply_core.c</code>. But on my system, at the mentioned path, I can't locate this file (not sure if hidden or what).</p>\n\n<p>I got this location from the link: <a href=\"http://lxr.free-electrons.com/ident?v=3.13;i=__power_supply_is_system_supplied\" rel=\"nofollow\">http://lxr.free-electrons.com/ident?v=3.13;i=__power_supply_is_system_supplied</a></p>\n\n<p>My first question is, how to include this file in my kernel module since it is not in include directory?</p>\n\n<p>Second question is, what should I do if file indeed doesn't exist on my system?</p>\n"}, {"tags": ["c", "hex", "ascii"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1426681528, "post_id": 29121982, "comment_id": 46470377, "body": "And please post the code, because <b>convert</b> it makes absolutely no sense, is it display it?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 2, "creation_date": 1426681586, "post_id": 29121982, "comment_id": 46470415, "body": "sounds to me like a wrong conversion specifier in <code>printf()</code> so what about post a snippet?"}, {"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426681653, "post_id": 29121982, "comment_id": 46470456, "body": "@SouravGhosh I am expecting data in hex format but it is \ufffd"}, {"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426681718, "post_id": 29121982, "comment_id": 46470490, "body": "@iharob yeah I want to display that in hex."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1426681726, "post_id": 29121982, "comment_id": 46470495, "body": "hexformat is as it says a &quot;format&quot; so thats no answer on his question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426681745, "post_id": 29121982, "comment_id": 46470511, "body": "So please post the code you are using right now to display."}, {"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "edited": false, "score": 0, "creation_date": 1426681959, "post_id": 29121982, "comment_id": 46470651, "body": "i am new to stackoverflow, can you tell me how to post code."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1426682075, "post_id": 29121982, "comment_id": 46470724, "body": "Click edit and post it you need to indent each line with 4 spaces plus your indent."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1426682082, "post_id": 29121982, "comment_id": 46470729, "body": "@arjunsaini just post the code in your post and put for spaces in front of each line to indicate it as code"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "edited": false, "score": 0, "creation_date": 1426682587, "post_id": 29122285, "comment_id": 46471083, "body": "I have done that but it is showing me warning : &quot;format \u2018%hhx\u2019 expects argument of type \u2018int\u2019, but argument 3 has type \u2018char *\u2019&quot; ??"}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "reply_to_user": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "edited": false, "score": 0, "creation_date": 1426683715, "post_id": 29122285, "comment_id": 46471820, "body": "<code>%hhx</code> is for a single <code>char</code>, not for <code>char*</code>"}], "tags": [], "owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "is_accepted": false, "score": -2, "last_activity_date": 1426682251, "creation_date": 1426682251, "answer_id": 29122285, "question_id": 29121982, "link": "https://stackoverflow.com/questions/29121982/how-to-convert-char-to-int-and-then-display-it-in-hex-format/29122285#29122285", "title": "How to convert char to int and then display it in hex format", "body": "<p>You don't need to convert it. To display <code>char</code> as a hexadecimal number, use <code>%hhx</code> formatting in <code>printf</code>-group of functions.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "edited": false, "score": 0, "creation_date": 1426682883, "post_id": 29122403, "comment_id": 46471283, "body": "Thanks for your help. %X is for hexadecimal? If I want it in decimal or like binary.?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "edited": false, "score": 0, "creation_date": 1426682966, "post_id": 29122403, "comment_id": 46471333, "body": "For binary is no way provided sadly and for decimal simply use <code>%d</code> and note the cast to int."}, {"owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "edited": false, "score": 1, "creation_date": 1426683013, "post_id": 29122403, "comment_id": 46471361, "body": "Great.. you rock Thanks"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426683631, "post_id": 29122403, "comment_id": 46471761, "body": "Why <code>tmpfoo &lt; sizeof(receivebuffer)</code>? and suppose the <code>receivebuffer</code> is not <code>nul</code> terminated which is almost sure. Isn&#39;t it much simpler to take the value returned by <code>read()</code> and print exactly that number of bytes? also suppose there is an embedded <code>&#39;\\0&#39;</code> in the buffer? what? so if I could downvote twice I would."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426683790, "post_id": 29122403, "comment_id": 46471893, "body": "@iharob then his whole code would be wrong. he used <code>%s</code> which lets me expect, as he didn&#39;t mention any errors, that the array is null terminated. Otherwise he would get trouble in a way that doesn&#39;t belong to his question and should be a new post. So I feel safe to expect it as null terminated."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426683901, "post_id": 29122403, "comment_id": 46471974, "body": "@iharob: and the <code>tmpfoo &lt; sizeof(receivebuffer)</code> just in case the input may overflow the array, so reading the <code>&#39;\\0&#39;</code> 1 past the array bound would not lead to undefined behaving. Probably won&#39;t happen but it also isn&#39;t wrong."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426684030, "post_id": 29122403, "comment_id": 46472048, "body": "@iharob to your eddit: &quot; also suppose there is an embedded &#39;\\0&#39; in the buffer? what?&quot; again.... a array printed out by using <code>%s</code> probably won&#39;t have an embedded <code>&#39;\\0&#39;</code>. So I&#39;d love to downvote you for your ignorance if that wouldn&#39;t be unethical."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426684199, "post_id": 29122403, "comment_id": 46472192, "body": "@Zaibis not necessarily the OP might have been lucky and in that case <code>for (i = 0 ; receivebuffer[i] != &#39;\\0&#39; ; ++i)</code> would be enough if your statement is true, how would <code>tmpfoo &gt; sizeof(receivebuffer)</code> be possible?"}], "tags": [], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "is_accepted": false, "score": 1, "last_activity_date": 1426684255, "last_edit_date": 1426684255, "creation_date": 1426682612, "answer_id": 29122403, "question_id": 29121982, "link": "https://stackoverflow.com/questions/29121982/how-to-convert-char-to-int-and-then-display-it-in-hex-format/29122403#29122403", "title": "How to convert char to int and then display it in hex format", "body": "<p>You should replace this:</p>\n\n<pre><code>printf(\"value of buffer is %s\\n\\n\", receivebuffer);\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>for (int tmpfoo = 0; receivebuffer[tmpfoo] != '\\0'; tmpfoo++)\n{\n    printf(\"value of buffer is %X\\n\\n\", (int)receivebuffer[tmpfoo]);\n}\n</code></pre>\n\n<p>If you want it just to be followed HEXvalue by HEXvalue.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1426683419, "creation_date": 1426683419, "answer_id": 29122708, "question_id": 29121982, "link": "https://stackoverflow.com/questions/29121982/how-to-convert-char-to-int-and-then-display-it-in-hex-format/29122708#29122708", "title": "How to convert char to int and then display it in hex format", "body": "<p>You need to store the count of received bytes somewhere and use that in a for loop try it like this </p>\n\n<pre><code>char receivebuffer[100];\nint  count;\nint  i;\ncount = read (fd, receivebuffer, sizeof receivebuffer);  // read up to 100 characters if ready to read\nfor (i = 0 ; i &lt; count ; ++i)\n {\n    printf(\"0x%02X \", receivebuffer[i]);\n    if ((i + 1) % 8 == 0)\n        printf(\"\\n\");\n }\n</code></pre>\n\n<p>this <code>if ((i + 1) % 8 == 0)</code> is just to print <code>8</code> bytes in a row, you can change or remove it, it helps inspecting the data though.</p>\n"}], "owner": {"reputation": 117, "user_id": 4673389, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe2f7aa4e7ea5086ec10e0f73ff63512?s=128&d=identicon&r=PG&f=1", "display_name": "user46573544", "link": "https://stackoverflow.com/users/4673389/user46573544"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 29122708, "answer_count": 3, "score": 0, "last_activity_date": 1426684255, "creation_date": 1426681447, "last_edit_date": 1426682256, "question_id": 29121982, "link": "https://stackoverflow.com/questions/29121982/how-to-convert-char-to-int-and-then-display-it-in-hex-format", "title": "How to convert char to int and then display it in hex format", "body": "<p>I am making a program in c in which I am getting data from serial device and I am storing it in buffer <code>char receivebuffer[100]</code> . when I display the contents of receivebuffer, the output shows <code>\ufffd</code> (Is this an ASCII format) . But the expected output is in hex format. How can i convert it in hex?</p>\n\n<p>I also want to know that if I convert buffer to int, will the output be same. Please tell me how can I convert char buffer to int also?</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\nint set_interface_attribs (int fd, int speed, int parity)\n{\n    struct termios tty;\n    memset (&amp;tty, 0, sizeof tty);\n    if (tcgetattr (fd, &amp;tty) != 0)\n    {\n            printf(\"error %d from tcgetattr\\n\\n\", errno);\n            printf(\"Error Opening the device\\n\\n\");\n            exit(0);\n            //error_message (\"error %d from tcgetattr\", errno);\n            return -1;\n    }\n\n    cfsetospeed (&amp;tty, speed);\n    cfsetispeed (&amp;tty, speed);\n\n    tty.c_cflag = (tty.c_cflag &amp; ~CSIZE) | CS8;     // 8-bit chars\n    // disable IGNBRK for mismatched speed tests; otherwise receive break\n    // as \\000 chars\n    tty.c_iflag &amp;= ~IGNBRK;         // disable break processing\n    tty.c_lflag = 0;                // no signaling chars, no echo,\n                                    // no canonical processing\n    tty.c_oflag = 0;                // no remapping, no delays\n    tty.c_cc[VMIN]  = 0;            // read doesn't block\n    tty.c_cc[VTIME] = 5;            // 0.5 seconds read timeout\n\n    tty.c_iflag &amp;= ~(IXON | IXOFF | IXANY); // shut off xon/xoff ctrl\n\n    tty.c_cflag |= (CLOCAL | CREAD);// ignore modem controls,\n                                    // enable reading\n    tty.c_cflag &amp;= ~(PARENB | PARODD);      // shut off parity\n    tty.c_cflag |= parity;\n    tty.c_cflag &amp;= ~CSTOPB;\n    tty.c_cflag &amp;= ~CRTSCTS;\n\n    if (tcsetattr (fd, TCSANOW, &amp;tty) != 0)\n    {\n            printf(\"error %d from tcsetattr\\n\\n\", errno);\n            printf(\"Error Opening the device\\n\\n\");\n            exit(0);\n            //error_message (\"error %d from tcsetattr\", errno);\n            return -1;\n    }\n    return 0;\n}\n\nvoid set_blocking (int fd, int should_block)\n{\n    struct termios tty;\n    memset (&amp;tty, 0, sizeof tty);\n    if (tcgetattr (fd, &amp;tty) != 0)\n    {\n            printf(\"error\\n\\n\");\n            printf(\"Error Opening the device\\n\\n\");\n                    exit(0);\n            //error_message (\"error %d from tggetattr\", errno);\n            return;\n    }\n\n    tty.c_cc[VMIN]  = should_block ? 1 : 0;\n    tty.c_cc[VTIME] = 5;            // 0.5 seconds read timeout\n\n    if (tcsetattr (fd, TCSANOW, &amp;tty) != 0)\n        printf(\"Error Opening the device\\n\\n\");\n        //error_message (\"error %d setting term attributes\", errno);\n}\n\nint main()\n{\nchar *portname = \"/dev/ttyUSB0\";\n\nint fd = open (portname, O_RDWR | O_NOCTTY | O_SYNC);\nif (fd &lt; 0)\n{\n    //error_message (\"error %d opening %s: %s\", errno, portname,         strerror (errno));\n    printf(\"error\");\n\n}\n\nset_interface_attribs (fd, B9600, 0);  // set speed to 115,200 bps, 8n1 (no parity)\nset_blocking (fd, 0);                // set no blocking\n\n       // send 7 character greeting\n\nusleep ((7 + 25) * 100);             // sleep enough to transmit the 7    plus\nwhile(1)\n{\n\nchar receivebuffer [100];\nread (fd, receivebuffer, sizeof receivebuffer);  // read up to 100    characters if ready to read\n\nprintf(\"value of buffer is %s\\n\\n\", receivebuffer);\nreturn 0;\n}\n}\n</code></pre>\n"}, {"tags": ["c", "libc", "opendir"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1426681692, "post_id": 29121962, "comment_id": 46470477, "body": "The code you posted cannot be causing this behavior, maybe you have some other code causing undefined behavior, and then something happens when you call this function."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1426682248, "post_id": 29121962, "comment_id": 46470839, "body": "You say it &quot;works perfectly [the first time]&quot;.  I see no evidence of that in your sample output.  Have you trimmed the output or given a bad description?"}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 2, "creation_date": 1426682714, "post_id": 29121962, "comment_id": 46471158, "body": "Attach a debugger i.e. by using gdb: <code>gdb -p &lt;PID of your program&gt;</code>, and call <code>bt</code> to get backtrace and understand where program had been hanged. <code>strace</code> may be also useful in your case"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1426701938, "post_id": 29121962, "comment_id": 46484684, "body": "Standard output may be buffered. Add <code>fflush(stdout);</code> after <code>printf()</code> to be sure the the problem is in this part of the code. In the end, the most effective way to find the issue will be a debugger like gdb, as adviced by @myaut."}, {"owner": {"reputation": 87, "user_id": 4685144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sd21Y.png?s=128&g=1", "display_name": "Aurelien", "link": "https://stackoverflow.com/users/4685144/aurelien"}, "edited": false, "score": 0, "creation_date": 1426898662, "post_id": 29121962, "comment_id": 46573307, "body": "My problem is solved, I debug it with valgrind and gdb. The problem was outside this function, but it&#39;s still strange that opendir() didn&#39;t work. Anyway, for people having the same issue, I&#39;d got many memory problems, I solve the issue by fixing them. Thanks for the help"}], "owner": {"reputation": 87, "user_id": 4685144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sd21Y.png?s=128&g=1", "display_name": "Aurelien", "link": "https://stackoverflow.com/users/4685144/aurelien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570432730, "creation_date": 1426681384, "last_edit_date": 1451255700, "question_id": 29121962, "link": "https://stackoverflow.com/questions/29121962/opendir-sleeps-or-infinite-loop-the-program", "title": "opendir sleeps or infinite loop the program", "body": "<p>I'm making a simple LS command in C in a program, when I open the directory for the first time and read it, it works perfectly, but when I call the function a second time, <code>opendir()</code> seems to sleep or loop infinitely:</p>\n\n<pre><code>int server_list(t_server_data *sd)\n{\n  DIR *dir;\n  struct dirent *entry;\n\n  printf(\"In list()\\n\");\n  printf(\"Open directory\\n\");\n\n  if ((dir = opendir(\"./\")) == NULL)\n      perror(\"Error: opendir()\");\n\n  printf(\"Directory opened\\n\");\n\n  while ((entry = readdir(dir)) != NULL)\n  {\n      printf(\"Reading dir...\\n\");\n      /* code */\n  }\n\n  closedir(dir);\n  return (0);\n}\n</code></pre>\n\n<p>Then this is the output I get:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>In list()\nOpen directory\n</code></pre>\n\n<p>And the program does nothing (waits).</p>\n"}, {"tags": ["c++", "c", "malloc", "tcmalloc"], "answers": [{"comments": [{"owner": {"reputation": 561, "user_id": 3659568, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4134ead78c1b16bbfef2784b92069386?s=128&d=identicon&r=PG&f=1", "display_name": "aQuip", "link": "https://stackoverflow.com/users/3659568/aquip"}, "edited": false, "score": 0, "creation_date": 1426685288, "post_id": 29122620, "comment_id": 46472989, "body": "And if this results in <code>WARNING: Perftools heap leak checker is active -- Performance may suffer</code> everything works as expected?"}, {"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "reply_to_user": {"reputation": 561, "user_id": 3659568, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4134ead78c1b16bbfef2784b92069386?s=128&d=identicon&r=PG&f=1", "display_name": "aQuip", "link": "https://stackoverflow.com/users/3659568/aquip"}, "edited": false, "score": 0, "creation_date": 1426735264, "post_id": 29122620, "comment_id": 46498111, "body": "Yes, it means tcmalloc is being used."}], "tags": [], "owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "is_accepted": true, "score": 2, "last_activity_date": 1426683177, "creation_date": 1426683177, "answer_id": 29122620, "question_id": 29121620, "link": "https://stackoverflow.com/questions/29121620/c-c-using-tcmalloc/29122620#29122620", "title": "C/C++ using tcmalloc", "body": "<p>The simplest way is to check if <code>heap checker</code> is working or not, by setting env <code>HEAPCHECK</code>, e.g. <code>HEAPCHECK=normal</code></p>\n\n<p>See <a href=\"https://gperftools.googlecode.com/git/doc/heap_checker.html\" rel=\"nofollow\">https://gperftools.googlecode.com/git/doc/heap_checker.html</a> for details</p>\n"}], "owner": {"reputation": 561, "user_id": 3659568, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4134ead78c1b16bbfef2784b92069386?s=128&d=identicon&r=PG&f=1", "display_name": "aQuip", "link": "https://stackoverflow.com/users/3659568/aquip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1485, "favorite_count": 1, "accepted_answer_id": 29122620, "answer_count": 1, "score": 0, "last_activity_date": 1426691334, "creation_date": 1426680419, "last_edit_date": 1495541184, "question_id": 29121620, "link": "https://stackoverflow.com/questions/29121620/c-c-using-tcmalloc", "title": "C/C++ using tcmalloc", "body": "<p>I've been trying to compile my application using tcmalloc. Therefore I append, as recommended in the usage instructions, <code>-ltcmalloc</code> to my compiler flags. After rerunning my application I could not see any performance differences. </p>\n\n<p>How can I check if the calls to malloc have been replaced like the author of <a href=\"https://stackoverflow.com/questions/1553435/tcmalloc-how-can-i-get-my-malloc-calls-overridden-when-compiling-statically\">this question</a> mentions. I had a look at the compiled assembler code but there were still calls to malloc.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "valgrind", "realloc"], "comments": [{"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 2, "creation_date": 1426680071, "post_id": 29121458, "comment_id": 46469470, "body": "Are we supposed to guess how <code>Stack</code> and <code>Item</code> are defined? Are they <code>struct</code> types? Show them."}, {"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 2, "creation_date": 1426680129, "post_id": 29121458, "comment_id": 46469507, "body": "Don&#39;t post error messages and Valgrind output as pictures or links to pictures. Include, wehenver possible, the relevant parts in the question. And try to reduce your code as much as possible."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1426680139, "post_id": 29121458, "comment_id": 46469518, "body": "Hint: <code>stack-&gt;items</code> value at that instance is not that one returned by <code>malloc()</code> or <code>realloc()</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1426686715, "post_id": 29121458, "comment_id": 46473965, "body": "Posting pictures of code rather than text is a down-vote magnet."}, {"owner": {"reputation": 43, "user_id": 4685050, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8580745f8ab040c54b2fa996ff471d96?s=128&d=identicon&r=PG&f=1", "display_name": "Menocode", "link": "https://stackoverflow.com/users/4685050/menocode"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1426689001, "post_id": 29121458, "comment_id": 46475618, "body": "@BrettHale Stack is a struct with an array of integers (Item is an int), top element, and the maxSize of the struct."}, {"owner": {"reputation": 43, "user_id": 4685050, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8580745f8ab040c54b2fa996ff471d96?s=128&d=identicon&r=PG&f=1", "display_name": "Menocode", "link": "https://stackoverflow.com/users/4685050/menocode"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426689055, "post_id": 29121458, "comment_id": 46475654, "body": "@SouravGhosh I don&#39;t understand could you please elaborate?"}, {"owner": {"reputation": 43, "user_id": 4685050, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8580745f8ab040c54b2fa996ff471d96?s=128&d=identicon&r=PG&f=1", "display_name": "Menocode", "link": "https://stackoverflow.com/users/4685050/menocode"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1426742661, "post_id": 29121458, "comment_id": 46499797, "body": "@BrettHale Hey sorry, I edited it in now"}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1426680363, "creation_date": 1426680363, "answer_id": 29121607, "question_id": 29121458, "link": "https://stackoverflow.com/questions/29121458/realloc-invalid-next-size/29121607#29121607", "title": "realloc(): invalid next size", "body": "<p>You are off by one here:</p>\n\n<pre><code>if (stack-&gt;top &lt; stack-&gt;maxSize+1) {\n    stack-&gt;items[stack-&gt;top] = item;\n</code></pre>\n\n<p>Valid indexes for <code>stack-&gt;items[index]</code> is [0..maxSize-1], so you need to change the condition to:</p>\n\n<pre><code>if (stack-&gt;top &lt; stack-&gt;maxSize) {\n    stack-&gt;items[stack-&gt;top] = item;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4685050, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8580745f8ab040c54b2fa996ff471d96?s=128&d=identicon&r=PG&f=1", "display_name": "Menocode", "link": "https://stackoverflow.com/users/4685050/menocode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1426742589, "creation_date": 1426679931, "last_edit_date": 1426742589, "question_id": 29121458, "link": "https://stackoverflow.com/questions/29121458/realloc-invalid-next-size", "title": "realloc(): invalid next size", "body": "<p>I read some threads on the forum regarding issues like these but I still can't figure it out.</p>\n\n<p>I'm writing a stack implementation code and I am stuck on the part where I have to reallocate memory when the stack is full and make the array twice as large as before. </p>\n\n<p>Here's my code for the push function;</p>\n\n<pre><code>typedef struct stackImp *Stack;\ntypedef int Item;\n\nstruct stackImp{\n    Item * items;\n    int top;\n    int maxSize;\n\nvoid push (Stack stack, Item item){ \n    assert(stack != NULL);\n    Item *temp;\n    if (stack-&gt;top &lt; stack-&gt;maxSize+1) {\n    stack-&gt;items[stack-&gt;top] = item;\n    stack-&gt;top++;\n    }\n    else {\n    temp = realloc(stack-&gt;items, 2*(stack-&gt;maxSize) * sizeof(Item));\n    assert (temp != NULL);\n    stack-&gt;items = temp;\n    stack-&gt;items[stack-&gt;top] = item;\n    stack-&gt;top++;\n    stack-&gt;maxSize = (stack-&gt;maxSize)*2;\n    } \n}\n</code></pre>\n\n<p>And the error I keep getting is: <img src=\"https://i.stack.imgur.com/K4cmr.png\" alt=\"enter image description here\"> \nThe message from Valgrind: <img src=\"https://i.stack.imgur.com/QEGXG.png\" alt=\"enter image description here\"></p>\n\n<p>Can someone please explain what's going on?</p>\n"}, {"tags": ["c", "post"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4685005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b3a9478a05c7d6eb16724909f67ebf?s=128&d=identicon&r=PG&f=1", "display_name": "Richbm", "link": "https://stackoverflow.com/users/4685005/richbm"}, "edited": false, "score": 0, "creation_date": 1426680681, "post_id": 29121540, "comment_id": 46469860, "body": "Hi, That was the approach I tried initially, but the code converts the value of the host variable to an IP."}], "tags": [], "owner": {"reputation": 216, "user_id": 1693120, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/d687da8a34db2c4f372606d47ad22b61?s=128&d=identicon&r=PG", "display_name": "Jiechao Li", "link": "https://stackoverflow.com/users/1693120/jiechao-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1426680133, "creation_date": 1426680133, "answer_id": 29121540, "question_id": 29121400, "link": "https://stackoverflow.com/questions/29121400/http-post-in-c-using-domain-name-not-ip/29121540#29121540", "title": "HTTP POST in C using domain name not IP", "body": "<p>I think http POST should be working fine with URL. You can either use domain name or direct ip. both should work.</p>\n\n<p>In your code, try to edit the variable 'host'.</p>\n"}], "owner": {"reputation": 1, "user_id": 4685005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b3a9478a05c7d6eb16724909f67ebf?s=128&d=identicon&r=PG&f=1", "display_name": "Richbm", "link": "https://stackoverflow.com/users/4685005/richbm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426680133, "creation_date": 1426679742, "last_edit_date": 1495535056, "question_id": 29121400, "link": "https://stackoverflow.com/questions/29121400/http-post-in-c-using-domain-name-not-ip", "title": "HTTP POST in C using domain name not IP", "body": "<p>I searched and found this related post, and use it as the basis for this question</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22077802/simple-c-example-of-doing-an-http-post-and-consuming-the-response/22135885#22135885\">Simple C example of doing an HTTP POST and consuming the response</a></p>\n\n<p>Jerry's code works perfectly, but I have an unusual issue.  I have Cloudflare implemented on the destination server, which means that the destination cannot be addressed by IP, it has to be directed to the fully qualified domain URL. I proved this by using the code, but got a return message from Cloudflare informing me that the IP could not be used.</p>\n\n<p>My question is, will C support POST to a URL, or does it have to be to an IP address? If if will accept the domain, what can I do to alter that code ?</p>\n"}, {"tags": ["c++", "c", "sqlite"], "owner": {"reputation": 2636, "user_id": 4635560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv67d.jpg?s=128&g=1", "display_name": "Manthan Tilva", "link": "https://stackoverflow.com/users/4635560/manthan-tilva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "closed_date": 1426686754, "answer_count": 0, "score": 1, "last_activity_date": 1426679125, "creation_date": 1426679125, "question_id": 29121179, "link": "https://stackoverflow.com/questions/29121179/get-query-from-sqlite3-stmt-of-sqlite-in-c-cpp", "closed_reason": "Duplicate", "title": "Get query from sqlite3_stmt of SQLite in c/cpp", "body": "<p>I am using SQLite database with c/cpp and sqlite3 library from <a href=\"https://www.sqlite.org/index.html\" rel=\"nofollow\">https://www.sqlite.org/index.html</a>. For debugging purpose I want to print actual query from either sqlite3_stmt*  or sqlite3* object. How can i do that?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1426678993, "post_id": 29121125, "comment_id": 46468804, "body": "<a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behavior</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426679051, "post_id": 29121125, "comment_id": 46468836, "body": "Undefined and unspecified behavior."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1426679059, "post_id": 29121125, "comment_id": 46468840, "body": "See <a href=\"http://stackoverflow.com/q/949433/1708801\">Why are these constructs (using ++) undefined behavior?</a> but there is a better duplicate someplace"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1426679208, "post_id": 29121125, "comment_id": 46468928, "body": "@ShafikYaghmour A closer dupe : <a href=\"http://stackoverflow.com/q/27877872/2173917\">This</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1426679321, "post_id": 29121125, "comment_id": 46469004, "body": "@SouravGhosh But don&#39;t use closed questions as duplicates: use one of the threads listed below &quot;frequent&quot;, because every &quot;close as duplicate&quot; counts towards the question becoming on of the &quot;frequent&quot; ones."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1426679333, "post_id": 29121125, "comment_id": 46469011, "body": "<a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\" title=\"undefined behavior and sequence points\">stackoverflow.com/questions/4176328/&hellip;</a> Could also be the duplicate"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426679337, "post_id": 29121125, "comment_id": 46469015, "body": "@SouravGhosh it is heavily downvoted which makes it a bad dup for me but the <a href=\"http://stackoverflow.com/q/376278/1708801\">duplicate is is linked to</a> is good."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426679391, "post_id": 29121125, "comment_id": 46469051, "body": "@Lundin crossing tags is not good and there are definitely better C duplciates"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1426679504, "post_id": 29121125, "comment_id": 46469101, "body": "@ShafikYaghmour In this case, there&#39;s really not any notable differences between the C and C++ languages."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1426679599, "post_id": 29121125, "comment_id": 46469185, "body": "@ShafikYaghmour Right. Understood."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426679623, "post_id": 29121125, "comment_id": 46469201, "body": "@Lundin I did not vote for dupe. Was just suggesting an alternate read. :-)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1426680075, "post_id": 29121125, "comment_id": 46469474, "body": "I get <code>1,1  1,1  2,2</code> which makes no sense whether you look at left-to-right evaluation or right-to-left. Undefined behaviour."}], "owner": {"reputation": 1, "user_id": 4685004, "user_type": "registered", "profile_image": "https://graph.facebook.com/1389083661410227/picture?type=large", "display_name": "facebook-1389083661410227", "link": "https://stackoverflow.com/users/4685004/facebook-1389083661410227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1426679097, "answer_count": 0, "score": 0, "last_activity_date": 1426679069, "creation_date": 1426678960, "last_edit_date": 1426679069, "question_id": 29121125, "link": "https://stackoverflow.com/questions/29121125/int-a-1-printfd-d-n-a-a", "closed_reason": "Duplicate", "title": "int a = 1; printf(&quot;%d, %d\\n&quot;, (a++), a);", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(void)\n{\n    int a = 1;\n    printf(\"%d, %d\\n\", a++, a);\n    a = 1;\n    printf(\"%d, %d\\n\", (a++), a);\n    a = 1;\n    printf(\"%d, %d\\n\", ++a, a);\n}\n</code></pre>\n\n<p>I wonder Why is this result </p>\n\n<pre><code>1, 2\n1, 2\n2, 2\n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>1, 2\n2, 2\n2, 2\n</code></pre>\n\n<p>By the way, I use visual studio 2013 to build this.</p>\n"}, {"tags": ["c++", "c", "struct", "alignment", "c++14"], "comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1426679930, "post_id": 29120386, "comment_id": 46469402, "body": "I think sizes of types is unknown things on preprocessor stage. Therefore positions of the names cannot be exchanged. Seems, I should wait for introspection introducing in the language."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1426694916, "post_id": 29120386, "comment_id": 46480070, "body": "You could achieve this with variadic templates and tuples, but you would be able to access the members only by index/type."}, {"owner": {"reputation": 333, "user_id": 3638462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aeb6323b49bc558b0d61ee7e0a9f0ebe?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/3638462/coder"}, "edited": false, "score": 0, "creation_date": 1437610426, "post_id": 29120386, "comment_id": 51106835, "body": "@Orient You can achieve the desired result by creating a code generator that takes in a configuration file and outputs the appropriate header files."}], "answers": [{"comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 1, "creation_date": 1447248674, "post_id": 33647798, "comment_id": 55076419, "body": "Not sole goal is total size, but also correct alignment for all data members."}], "tags": [], "owner": {"reputation": 4705, "user_id": 20514, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ae5e6f919842852e9e838db77b987d9a?s=128&d=identicon&r=PG", "display_name": "avp", "link": "https://stackoverflow.com/users/20514/avp"}, "is_accepted": false, "score": 0, "last_activity_date": 1447234727, "last_edit_date": 1592644375, "creation_date": 1447234727, "answer_id": 33647798, "question_id": 29120386, "link": "https://stackoverflow.com/questions/29120386/approach-for-automatic-fields-reordering-in-c-like-structs/33647798#33647798", "title": "Approach for automatic fields reordering in C-like structs", "body": "<ul>\n<li>For MS compiler use <a href=\"https://stackoverflow.com/questions/3318410/pragma-pack-effect\">#pragma pack</a>, (<code>#pragma pack(1)</code> eliminates all gaps). And check the link for details, as this directive is not guaranteed to work always.</li>\n<li>For GCC there is <a href=\"https://ohse.de/uwe/articles/gcc-attributes.html#type-packed\" rel=\"nofollow noreferrer\"><code>__attribute__ ((packed))</code></a></li>\n</ul>\n<p>As your only goal is the minimal possible size of the data in memory, this is exactly what you need.</p>\n"}, {"tags": [], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "is_accepted": true, "score": 2, "last_activity_date": 1484282385, "creation_date": 1484282385, "answer_id": 41627474, "question_id": 29120386, "link": "https://stackoverflow.com/questions/29120386/approach-for-automatic-fields-reordering-in-c-like-structs/41627474#41627474", "title": "Approach for automatic fields reordering in C-like structs", "body": "<p>I found the <em>C++14</em> solution:</p>\n\n<pre><code>#include &lt;boost/preprocessor/seq/for_each_i.hpp&gt;\n#include &lt;boost/preprocessor/repetition/enum.hpp&gt;\n\n#include &lt;utility&gt;\n\n#include &lt;cstddef&gt;\n\nnamespace details\n{\n\ntemplate&lt; std::size_t /*index*/, typename /*tag*/ &gt;\nstruct member;\n\nstruct pair\n{\n    std::size_t k, v; \n    constexpr bool operator &lt; (pair const &amp; r) const { return r.k &lt; k; }\n};\n\nconstexpr void swap(pair &amp; l, pair &amp; r) { pair m = r; r = l; l = m; }\n\ntemplate&lt; int N &gt;\nconstexpr\nvoid qsort(pair (&amp;a)[N], int const l, int const r)\n{ \n    int i = l, j = r;\n    pair pivot = a[l + (r - l) / 2];\n    while (!(j &lt; i)) { \n        while (a[i] &lt; pivot) ++i;\n        while (pivot &lt; a[j]) --j;\n        if (!(j &lt; i)) {\n            swap(a[i], a[j]);\n            ++i;\n            --j;\n        }\n    }\n    if (l &lt; j) qsort(a, l, j);\n    if (i &lt; r) qsort(a, i, r);\n}\n\ntemplate&lt; int N &gt;\nstruct map\n{\n    pair a[N];\n};\n\ntemplate&lt; int N, std::size_t ...indices &gt;\nconstexpr\nmap&lt; N &gt; make_map(pair (&amp;a)[N], std::index_sequence&lt; indices... &gt;)\n{\n    return {{a[indices]...}};\n}\n\ntemplate&lt; int N &gt;\nconstexpr\nmap&lt; N &gt; qsort(pair (&amp;&amp;a)[N])\n{\n    if (1 &lt; N) {\n        qsort&lt; N &gt;(a, 0, N - 1);\n    }\n    return make_map&lt; N &gt;(a, std::make_index_sequence&lt; N &gt;{});\n}\n\n}\n\n#define GEN0(z, tag, index, type_name) template&lt;&gt; struct member&lt; index, tag &gt; \\\n{ BOOST_PP_SEQ_HEAD(type_name) BOOST_PP_SEQ_HEAD(BOOST_PP_SEQ_TAIL(type_name)); };\n\n#define GEN1(z, ignored, index, type_name) {sizeof(BOOST_PP_SEQ_HEAD(type_name)), index},\n\n#define GEN2(z, index, tags) details::member&lt; BOOST_PP_SEQ_HEAD(tags)::map.a[index].v, BOOST_PP_SEQ_HEAD(BOOST_PP_SEQ_TAIL(tags)) &gt;\n\n#define GEN(ns, tag, members) \\\nnamespace ns { struct tag; } \\\nnamespace details { BOOST_PP_SEQ_FOR_EACH_I(GEN0, ns::tag, members) } \\\nnamespace details::tags::ns { struct tag { static constexpr auto map = qsort({BOOST_PP_SEQ_FOR_EACH_I(GEN1, %%, members)}); }; } \\\nnamespace ns { struct tag : BOOST_PP_ENUM(BOOST_PP_SEQ_SIZE(members), GEN2, (details::tags::ns::tag)(tag)) {}; }\n\nstruct T { char c[3]; };\n\nGEN(user::u2, S, ((char)(c))((int)(i))((T)(t)))\n\n#include &lt;cassert&gt;\n\nint main()\n{\n    using namespace details;\n    void(member&lt; 0, user::u2::S &gt;{}.c);\n    void(member&lt; 1, user::u2::S &gt;{}.i);\n    static_assert(tags::user::u2::S::map.a[0].k == 4);\n    static_assert(tags::user::u2::S::map.a[1].k == 3);\n    static_assert(tags::user::u2::S::map.a[2].k == 1);\n    user::u2::S s{4, {'a', 'b', 'c'}, 'd'};\n    assert((void *)&amp;s.i == (void *)&amp;s);\n    assert((void *)&amp;s.t &lt; (void *)&amp;s.c);\n    static_assert(sizeof(s) == 8);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 1, "last_activity_date": 1570076925, "creation_date": 1570076925, "answer_id": 58212322, "question_id": 29120386, "link": "https://stackoverflow.com/questions/29120386/approach-for-automatic-fields-reordering-in-c-like-structs/58212322#58212322", "title": "Approach for automatic fields reordering in C-like structs", "body": "<p>Some solutions:</p>\n\n<ul>\n<li>Reorder the fields with <a href=\"https://reviews.llvm.org/rL280456\" rel=\"nofollow noreferrer\"><code>clang-reorder-fields</code></a> in <a href=\"http://clang.llvm.org/extra/\" rel=\"nofollow noreferrer\"><code>clang-tools-extra</code></a></li>\n<li>Let gcc do that automatically using <a href=\"https://stackoverflow.com/a/28780286/995714\"><code>-fipa-struct-reorg</code></a>. Since that option has been removed, currently if you want to try you'll have to use the <code>struct-reorg</code> branch on <a href=\"https://gcc.gnu.org/svn.html\" rel=\"nofollow noreferrer\">gcc SVN</a> or the <a href=\"https://github.com/gcc-mirror/gcc/tree/sje/struct-reorg\" rel=\"nofollow noreferrer\">github mirror</a></li>\n</ul>\n\n<p>Related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/867471/995714\">Automated field re-ordering in C structs to avoid padding</a></li>\n<li><a href=\"https://stackoverflow.com/q/38244689/995714\">Struct Reordering by compiler</a></li>\n</ul>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 3, "accepted_answer_id": 41627474, "answer_count": 3, "score": 5, "last_activity_date": 1570076925, "creation_date": 1426676737, "last_edit_date": 1495541239, "question_id": 29120386, "link": "https://stackoverflow.com/questions/29120386/approach-for-automatic-fields-reordering-in-c-like-structs", "title": "Approach for automatic fields reordering in C-like structs", "body": "<p>Is there a way to perform <a href=\"https://stackoverflow.com/questions/9486364/why-cant-c-compilers-rearrange-struct-members-to-eliminate-alignment-padding\">automatic fields reordering</a> in C-like structs? I mean the using of the language features like( preprocessor for C and C++ and templates/type traits/etc for C++), which make it possible to do the following macro (Boost.Fusion-like style to adapt structures):</p>\n\n<pre><code>REARRANGE(StructureName,\n          (int8_t)(FieldName1),\n          (int32_t)(FieldName2),\n          (int16_t)(FieldName3),\n          (int32_t)(FieldName4));\n// is equivalent to (without loss of generality):\nstruct StructureName\n{\n\n    int32_t FieldName2;\n    int32_t FieldName4;\n    int16_t FieldName3;\n    int8_t FieldName1;\n\n};\n</code></pre>\n\n<p>Of course, approach should take into account <code>alignof</code> values (together with <code>sizeof</code>) for fields and, if it possible, <code>#pragma pack</code> current value.</p>\n\n<p>I am aware of bad portability of the result, but it for local use only.</p>\n\n<p>It is mandatory thing to save the field names together with respective types.</p>\n\n<p>The aim is to reduce total structure size.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 4, "creation_date": 1426675222, "post_id": 29119667, "comment_id": 46466428, "body": "<code>int arr[2] = { 5, 10 };</code>"}, {"owner": {"reputation": 1075, "user_id": 3411933, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GG3Em.jpg?s=128&g=1", "display_name": "Anshuman Singh", "link": "https://stackoverflow.com/users/3411933/anshuman-singh"}, "edited": false, "score": 2, "creation_date": 1426675890, "post_id": 29119667, "comment_id": 46466907, "body": "In global scope statement can&#39;t be executed..You need function to execute any statement :-)"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1426678431, "post_id": 29119667, "comment_id": 46468466, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/20157484/25-warning-initializer-element-is-not-a-constant-expression\">25: warning: initializer element is not a constant expression</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1426674894, "creation_date": 1426674894, "answer_id": 29119710, "question_id": 29119667, "link": "https://stackoverflow.com/questions/29119667/initialization-and-assignment-in-c/29119710#29119710", "title": "Initialization and assignment in c", "body": "<p>In global scope, assignment (initlialization) can be done only through brace enclosed list. You may not use a <em>statement</em> in global scope to initialize or assign variables seperately.</p>\n\n<p>In order to solve the issues, you need to put below statements</p>\n\n<pre><code>arr[0]=5;\narr[1]=10;\n</code></pre>\n\n<p>inside a function body.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 5, "last_activity_date": 1426676229, "last_edit_date": 1426676229, "creation_date": 1426674910, "answer_id": 29119715, "question_id": 29119667, "link": "https://stackoverflow.com/questions/29119667/initialization-and-assignment-in-c/29119715#29119715", "title": "Initialization and assignment in c", "body": "<p>These two lines   </p>\n\n<pre><code>arr[0]=5;   // Assignment. Not initialization.\narr[1]=10;  // Assignment. Not initialization.\n</code></pre>\n\n<p>are statements that can't be executed outside a function. In global space only declaration and definitions are valid.  </p>\n\n<pre><code>int arr[2];  \n</code></pre>\n\n<p>is a definition and it is valid. Brace initializers can be used to initialize <code>arr</code> with desired values</p>\n\n<pre><code>int arr[2] = {5, 10};  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1690, "user_id": 4672556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/6f4NK.png?s=128&g=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4672556/charlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1426702119, "creation_date": 1426702119, "answer_id": 29129543, "question_id": 29119667, "link": "https://stackoverflow.com/questions/29119667/initialization-and-assignment-in-c/29129543#29129543", "title": "Initialization and assignment in c", "body": "<p>If you are new to programming you should know that the compiling always starts at the main function. Any code outside the main function is called \"unreachable code\" unless it is called by the main function.</p>\n\n<p>For example you can have another function outside the main function(with new variables) but it will not be executed unless you call for it in the main() function.</p>\n\n<p>Variables always needs to be inside a function or they will be unreachable.</p>\n\n<p>The only exception I know to this rule is Constants. You can assign a constant using #define, before the main() function but not after the main(). For example:</p>\n\n<pre><code>#define  LENGTH 100\n#define WIDTH 50\nvoid main()\n  {\n  }\n</code></pre>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1426702119, "creation_date": 1426674773, "question_id": 29119667, "link": "https://stackoverflow.com/questions/29119667/initialization-and-assignment-in-c", "title": "Initialization and assignment in c", "body": "<p>If assignment can be done as many times we want then why is it showing an error. It was not showing an error if the same code was inside main.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n  int arr[2]; // array elements are initialized as zero\n  arr[0]=5;\n  arr[1]=10;\nint main()\n{ \n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "ffmpeg", "static-libraries", "codeblocks"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1426674717, "post_id": 29119525, "comment_id": 46466131, "body": "in one word: YES. e.g.: <code>libmp3lame.c</code> -&gt; <code>lame</code>."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1426682840, "post_id": 29119525, "comment_id": 46471248, "body": "link the missing libraries."}, {"owner": {"reputation": 187, "user_id": 4683544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27185467f3f06f6f600c441f75fb6e96?s=128&d=identicon&r=PG&f=1", "display_name": "Yoohoo", "link": "https://stackoverflow.com/users/4683544/yoohoo"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1426741285, "post_id": 29119525, "comment_id": 46499450, "body": "ya, thank you i have fixed by adding -lmp3lame"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4318665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HNC3x.png?s=128&g=1", "display_name": "FreakInDroid", "link": "https://stackoverflow.com/users/4318665/freakindroid"}, "is_accepted": false, "score": 0, "last_activity_date": 1468299952, "last_edit_date": 1495540732, "creation_date": 1468222290, "answer_id": 38301414, "question_id": 29119525, "link": "https://stackoverflow.com/questions/29119525/ffmpeg-link-error-with-codeblocks/38301414#38301414", "title": "ffmpeg link error with CodeBlocks", "body": "<p>It seems to be linking order mismatched. To understand linking order please refer\n<a href=\"https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc\">Why does the order in which libraries are linked sometimes cause errors in GCC?</a></p>\n\n<p>Try the following linking order</p>\n\n<pre><code>libavdevice\nlibavformat\nlibavfilter\nlibavcodec\nlibwscale\nlibavutil\nlibswresample\nlibswscale\nlibpostproc\nlibavresample\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 4683544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27185467f3f06f6f600c441f75fb6e96?s=128&d=identicon&r=PG&f=1", "display_name": "Yoohoo", "link": "https://stackoverflow.com/users/4683544/yoohoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1281, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468299952, "creation_date": 1426674397, "question_id": 29119525, "link": "https://stackoverflow.com/questions/29119525/ffmpeg-link-error-with-codeblocks", "title": "ffmpeg link error with CodeBlocks", "body": "<p>Hi\uff0cI am currently doing a real time video encoding c program using ffmpeg, initially I encountered a lot of \"undefined reference\" error, after I set the linker in build options, some error got disappeared, but still some error remains.</p>\n\n<pre><code>||=== Build: Debug in c_3rd party encoding (compiler: GNU GCC Compiler)     ===|\n/home/yonghao/codeblocksfile/c_3rd party encoding/main.c||In function     \u2018init_video_encode\u2019:|\n/home/yonghao/codeblocksfile/c_3rd party encoding/main.c|73|warning: \u2018avcodec_alloc_frame\u2019 is deprecated (declared at ../../ffmpeg_build/include/libavcodec/avcodec.h:3618) [-Wdeprecated-declarations]|\n/home/yonghao/codeblocksfile/c_3rd party encoding/main.c||In function \u2018cancle_encode\u2019:|\n/home/yonghao/codeblocksfile/c_3rd party encoding/main.c|134|warning: \u2018avcodec_free_frame\u2019 is deprecated (declared at ../../ffmpeg_build/include/libavcodec/avcodec.h:3643) [-Wdeprecated-declarations]|\n/home/yonghao/codeblocksfile/c_3rd party encoding/main.c|21|warning: \u2018endcode\u2019 defined but not used [-Wunused-variable]|\n../../ffmpeg_build/lib/libavcodec.a(libmp3lame.o)||In function `mp3lame_encode_frame':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|211|undefined reference to `lame_encode_buffer_float'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|195|undefined reference to `lame_encode_buffer'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|198|undefined reference to `lame_encode_buffer_int'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|219|undefined reference to `lame_encode_flush'|\n../../ffmpeg_build/lib/libavcodec.a(libmp3lame.o)||In function `mp3lame_encode_close':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|86|undefined reference to `lame_close'|\n../../ffmpeg_build/lib/libavcodec.a(libmp3lame.o)||In function `mp3lame_encode_init':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|98|undefined reference to `lame_init'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|102|undefined reference to `lame_set_num_channels'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|103|undefined reference to `lame_set_mode'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|106|undefined reference to `lame_set_in_samplerate'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|107|undefined reference to `lame_set_out_samplerate'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|111|undefined reference to `lame_set_quality'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|115|undefined reference to `lame_set_VBR'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|116|undefined reference to `lame_set_VBR_quality'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|120|undefined reference to `lame_set_VBR'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|121|undefined reference to `lame_set_VBR_mean_bitrate_kbps'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|123|undefined reference to `lame_set_brate'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|128|undefined reference to `lame_set_bWriteVbrTag'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|131|undefined reference to `lame_set_disable_reservoir'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|134|undefined reference to `lame_init_params'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|140|undefined reference to `lame_get_encoder_delay'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libmp3lame.c|143|undefined reference to `lame_get_framesize'|\n../../ffmpeg_build/lib/libavcodec.a(libopusdec.o)||In function `libopus_flush':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|178|undefined reference to `opus_multistream_decoder_ctl'|\n../../ffmpeg_build/lib/libavcodec.a(libopusdec.o)||In function `libopus_decode':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|143|undefined reference to `opus_multistream_decode_float'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|139|undefined reference to `opus_multistream_decode'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|148|undefined reference to `opus_strerror'|\n../../ffmpeg_build/lib/libavcodec.a(libopusdec.o)||In function `libopus_decode_close':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|121|undefined reference to `opus_multistream_decoder_destroy'|\n../../ffmpeg_build/lib/libavcodec.a(libopusdec.o)||In function `libopus_decode_init':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|87|undefined reference to `opus_multistream_decoder_create'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|91|undefined reference to `opus_strerror'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|97|undefined reference to `opus_multistream_decoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusdec.c|99|undefined reference to `opus_strerror'|\n../../ffmpeg_build/lib/libavcodec.a(libopusenc.o)||In function `libopus_encode':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|346|undefined reference to `opus_multistream_encode'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|342|undefined reference to `opus_multistream_encode_float'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|351|undefined reference to `opus_strerror'|\n../../ffmpeg_build/lib/libavcodec.a(libopusenc.o)||In function `libopus_encode_close':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|389|undefined reference to `opus_multistream_encoder_destroy'|\n../../ffmpeg_build/lib/libavcodec.a(libopusenc.o)||In function `libopus_encode_init':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|254|undefined reference to `opus_multistream_encoder_create'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|260|undefined reference to `opus_strerror'|\n../../ffmpeg_build/lib/libavcodec.a(libopusenc.o)||In function `libopus_configure_encoder':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|117|undefined reference to `opus_multistream_encoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|119|undefined reference to `opus_strerror'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|124|undefined reference to `opus_multistream_encoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|127|undefined reference to `opus_strerror'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|130|undefined reference to `opus_multistream_encoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|132|undefined reference to `opus_strerror'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|135|undefined reference to `opus_multistream_encoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|138|undefined reference to `opus_strerror'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|141|undefined reference to `opus_multistream_encoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|144|undefined reference to `opus_strerror'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|149|undefined reference to `opus_multistream_encoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|152|undefined reference to `opus_strerror'|\n../../ffmpeg_build/lib/libavcodec.a(libopusenc.o)||In function `libopus_encode_init':|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|288|undefined reference to `opus_multistream_encoder_ctl'|\n/home/yonghao/ffmpeg_sources/ffmpeg/libavcodec/libopusenc.c|290|undefined reference to `opus_strerror'|\n||More errors follow but not being shown.|\n||Edit the max errors limit in compiler options...|\n||=== Build failed: 50 error(s), 3 warning(s) (0 minute(s), 3 second(s)) ===|\n</code></pre>\n\n<p>Here are my screen shot of the CodeBlock linker setting.</p>\n\n<pre><code>ffmpeg_build/lib/libvpx.a\nffmpeg_build/lib/libswscale.a\nffmpeg_build/lib/libwresample.a\nffmpeg_build/lib/libpostproc.a\nffmpeg_build/lib/libfdk-aac.a\nffmpeg_build/lib/libvutil.a\nffmpeg_build/lib/libvformat.a\nffmpeg_build/lib/libavfilter.a\nffmpeg_build/lib/libavdevice.a\nffmpeg_build/lib/libavcodec.a\n</code></pre>\n\n<p>Totally 10 libs.</p>\n\n<p>My Questions:</p>\n\n<ol>\n<li>Are these errors caused by lacking libs or libs not linked.</li>\n<li>What libs I missing or what libs should I add to linker.</li>\n</ol>\n"}, {"tags": ["c", "struct", "embedded", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1426673803, "post_id": 29119284, "comment_id": 46465585, "body": "Standard Warning : Please <a href=\"http://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1426673860, "post_id": 29119284, "comment_id": 46465620, "body": "Yes, you&#39;re right. I will change it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426673875, "post_id": 29119284, "comment_id": 46465636, "body": "Use a <code>void *</code> in the structure, cast it to the actual type when needed inside your source, and don&#39;t tell anyone about what it really is."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1426674022, "post_id": 29119284, "comment_id": 46465720, "body": "@JoachimPileborg Why void? Why not incomplete struct type?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426674047, "post_id": 29119284, "comment_id": 46465732, "body": "You can also make the whole <i>structure</i> opaque, by not defining it in the header file, just <i>declare</i> the structure. Then define the structure in the source file."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1426674079, "post_id": 29119284, "comment_id": 46465752, "body": "@n.m. Yeah, just thought about it. :)"}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1426674125, "post_id": 29119284, "comment_id": 46465776, "body": "Can you give me an example? I need to set some values in this struct from outside (mostly hardware-oriented settings)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1426674185, "post_id": 29119284, "comment_id": 46465813, "body": "If you make the structure opaque, then simply use special functions to set fields in the structure."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1426674346, "post_id": 29119284, "comment_id": 46465919, "body": "Something like this? <a href=\"http://c-faq.com/struct/sd1.html\" rel=\"nofollow noreferrer\">c-faq.com/struct/sd1.html</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426674421, "post_id": 29119284, "comment_id": 46465964, "body": "@TomL. Yes, exactly something like that. :)"}, {"owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "edited": false, "score": 2, "creation_date": 1426675046, "post_id": 29119284, "comment_id": 46466327, "body": "use an opaque pointer to encapsulate your <code>struct</code> like <a href=\"http://stackoverflow.com/questions/7553750/what-is-an-opaque-pointer-in-c\">explained here</a>"}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1426678916, "post_id": 29119284, "comment_id": 46468769, "body": "@JoachimPileborg: Can you put this into an answer so I can accept it? (because this is what I&#39;ve been looking for)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426679931, "post_id": 29119284, "comment_id": 46469403, "body": "<a href=\"http://stackoverflow.com/questions/29034417/c-preprocessor-generate-macros-by-concatenation-and-stringification/29035658#29035658\">Here is an example for how to do the program design for such a case.</a>. If that&#39;s not what you want, the feature you are looking for is known as <i>opaque type</i>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426680103, "post_id": 29119284, "comment_id": 46469495, "body": "Btw why do you need to use dynamic memory allocation if you always allocate a fixed size buffer? Including dynamic memory allocation in embedded systems can actually <i>reduce</i> the total amount of RAM available to you, because the heap has to be stored somewhere, and it has to cover the worst case. If there are no other processes in the system, nor an OS, a heap doesn&#39;t really make any sense."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426680979, "post_id": 29119284, "comment_id": 46470044, "body": "@Lundin: the size of the buffer is fixed, but I can have any number from 1 to 4 of the same ICs on board (and each requires its own memory area); I would like my component to account for all of these possibilities."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1426681136, "post_id": 29119284, "comment_id": 46470133, "body": "@TomL. Then why don&#39;t you always reserve space for 4 ICs, since your program must always be able to handle the worst case anyhow?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1426681213, "post_id": 29119284, "comment_id": 46470183, "body": "Btw I took the time to rewrite this particular code in the question into opaque type, see my answer below."}, {"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426681741, "post_id": 29119284, "comment_id": 46470506, "body": "@Lundin: Thinking about it, you might be right. I just thought of what happens in case I need 8, 10, 32, ..? Yet, that would leave me with a three-dimensional array (#ICs, #Channels, #Samples which is set during compile-time). But I wouldn&#39;t need to resort to malloc ..."}], "answers": [{"comments": [{"owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "edited": false, "score": 0, "creation_date": 1426678879, "post_id": 29119629, "comment_id": 46468738, "body": "Wouldn&#39;t that be just the opposite of what I&#39;m trying to achieve? My main is the function which should be free of any knowledge of the underlying data."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426680275, "post_id": 29119629, "comment_id": 46469606, "body": "This won&#39;t give private encapsulation since the struct declaration is known to the whole program. You need to use opaque/incomplete type to achieve private encapsulation."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426684916, "post_id": 29119629, "comment_id": 46472737, "body": "@Lundin,  an opaque type hides <b>all</b>  the members of the struct,  I don&#39;t know if this is what OP wants."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1426674669, "creation_date": 1426674669, "answer_id": 29119629, "question_id": 29119284, "link": "https://stackoverflow.com/questions/29119284/data-encapsulation-in-c/29119629#29119629", "title": "Data encapsulation in C", "body": "<blockquote>\n  <p>I would like this data to be non-accessible from the \"outside\" of my\n  component (only through special functions in my component).</p>\n</blockquote>\n\n<p>You can do it in this way (a big <code>malloc</code> including the data):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\ntypedef struct {\n    uint32_t pin_reset;\n    uint32_t pin_drdy;\n    uint32_t pin_start;\n    volatile avr32_spi_t *spi_module;\n    uint8_t cs_id;  \n} ads1248_options_t;\n\nvoid fn(ads1248_options_t *x)\n{\n    int32_t *values = (int32_t *)(x + 1);\n    /* values are not accesible via a member of the struct */\n\n    values[0] = 10;\n    printf(\"%d\\n\", values[0]);\n}\n\nint main(void)\n{\n    ads1248_options_t *x = malloc(sizeof(*x) + (sizeof(int32_t) * 100));\n\n    fn(x);\n    free(x);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426680338, "post_id": 29121382, "comment_id": 46469649, "body": "C uses incomplete type for private encapsulation. It is the very same thing as a complete private class."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426680709, "post_id": 29121382, "comment_id": 46469880, "body": "@Lundin: Some use it, some don&#39;t. I mentioned both ways. And pimpling differs from C++ <code>private</code> in that the members are invisible even for the compiler (and the debugger), so it&#39;s not exactly the same."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426681138, "post_id": 29121382, "comment_id": 46470134, "body": "@Lundin: And C++ <code>private</code> still allows declaring instances of such types on the stack, what is impossible with pimpling as well."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426681369, "post_id": 29121382, "comment_id": 46470272, "body": "No you can allocate it on the stack using functions such as <a href=\"http://man7.org/linux/man-pages/man3/alloca.3.html\" rel=\"nofollow noreferrer\">alloca</a>, although that&#39;s a non-standard function. Another way is to allocate a private static memory pool, which is what you&#39;d usually do on an embedded system where the heap cannot be used."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1426682085, "post_id": 29121382, "comment_id": 46470730, "body": "@Lundin: <code>alloca</code> still needs the size. Of course, you could define a constant in the header representing the size, either by feeding an anonymous structure declaration identical to the private implementation to <code>sizeof</code>, or by hard-coding it (and statically asserting that this is indeed the size of the structure in the .c file). Given that they solve a non-issue (seriously, did you ever accidentally access a member of a <code>FILE</code> object?) and rely on non-standard <code>alloca</code>, I think they introduce too much clutter."}, {"owner": {"reputation": 446, "user_id": 4654918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf5be94df38bc12d3747540082466bbd?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/4654918/jon"}, "edited": false, "score": 1, "creation_date": 1426685815, "post_id": 29121382, "comment_id": 46473337, "body": "I agree with mafso. The question is about a deeply embedded system (Atmel). Anyone using the library will be injecting all the register symbols into their code every time they include &#39;atmegaxx.h&#39; so trying to hide some data structure members in your library is really a minor issue - as he says in his answer. Leaving it &#39;public&#39; with a useful comment will help everyone out when they inevitably need to modify the library or debug it."}], "tags": [], "owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "is_accepted": false, "score": 2, "last_activity_date": 1426679687, "creation_date": 1426679687, "answer_id": 29121382, "question_id": 29119284, "link": "https://stackoverflow.com/questions/29119284/data-encapsulation-in-c/29121382#29121382", "title": "Data encapsulation in C", "body": "<p>It's common that structures in C are defined completely in the header, although they're totally opaque (<code>FILE</code>, for example), or only have some of their fields specified in the documentation.</p>\n\n<p>C lacks <code>private</code> to prevent accidental access, but I consider this a minor problem: If a field isn't mentioned in the spec, why should someone try to access it? Have you ever accidentally accessed a member of a <code>FILE</code>? (It's probably better not to do things like having a published member <code>foo</code> and a non-published <code>fooo</code> which can easily be accessed by a small typo.) Some use conventions like giving them \"unusual\" names, for example, having a trailing underscore on private members.</p>\n\n<p>Another way is the <a href=\"https://en.wikipedia.org/wiki/Pimpl\" rel=\"nofollow\">PIMPL idiom</a>: Forward-declare the structure as an incomplete type and provide the complete declaration in the implementation file only. This may complicate debugging, and may have performance penalties due to less possibilities for inlining and an additional indirection, though this may be solvable with link-time optimization. A combination of both is also possible, declaring the public fields in the header along with a pointer to an incomplete structure type holding the private fields.</p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 1, "creation_date": 1426769268, "post_id": 29121847, "comment_id": 46512609, "body": "And if you try to acces private members you&#39;ll get a compiler error.  Good response Lundlin."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 27, "last_activity_date": 1426681050, "last_edit_date": 1495542833, "creation_date": 1426681050, "answer_id": 29121847, "question_id": 29119284, "link": "https://stackoverflow.com/questions/29119284/data-encapsulation-in-c/29121847#29121847", "title": "Data encapsulation in C", "body": "<p>For the specific case of writing hardware drivers for a microcontroller, which this appears to be, please consider <a href=\"https://stackoverflow.com/questions/29034417/c-preprocessor-generate-macros-by-concatenation-and-stringification/29035658#29035658\">doing like this</a>.</p>\n\n<p>Otherwise, use <strong>opaque/incomplete type</strong>. You'd be surprised to learn how shockingly few C programmers there are who know how to actually implement 100% private encapsulation of custom types. This is why there's some persistent myth about C lacking the OO feature known as private encapsulation. This myth originates from lack of C knowledge and nothing else.</p>\n\n<p>This is how it goes:</p>\n\n<p>ads1248.h</p>\n\n<pre><code>typedef struct ads1248_options_t ads1248_options_t; // incomplete/opaque type\n\nads1248_options_t* ads1248_init (parameters); // a \"constructor\"\nvoid ads1248_destroy (ads1248_options_t* ads); // a \"destructor\"\n</code></pre>\n\n<p>ads1248.c</p>\n\n<pre><code>#include \"ads1248.h\"\n\nstruct ads1248_options_t {\n    uint32_t pin_reset;\n    uint32_t pin_drdy;\n    uint32_t pin_start;\n    volatile avr32_spi_t *spi_module;\n    uint8_t cs_id;  \n};\n\nads1248_options_t* ads1248_init (parameters)\n{\n  ads1248_options_t* ads = malloc(sizeof(ads1248_options_t));\n  // do things with ads based on parameters\n  return ads;\n}\n\nvoid ads1248_destroy (ads1248_options_t* ads)\n{\n  free(ads);\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include \"ads1248.h\"\n\nint main()\n{\n  ads1248_options_t* ads = ads1248_init(parameters);\n  ...\n  ads1248_destroy(ads);\n}\n</code></pre>\n\n<p>Now the code in main cannot access any of the struct members, all members are 100% private. It can only create a pointer to a struct object, not an instance of it. Works <em>exactly</em> like abstract base classes in C++, if you are familiar with that. The only difference is that you'll have to call the init/destroy functions manually, rather than using true constructors/destructors.</p>\n"}, {"tags": [], "owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "is_accepted": false, "score": 0, "last_activity_date": 1426685539, "creation_date": 1426685539, "answer_id": 29123465, "question_id": 29119284, "link": "https://stackoverflow.com/questions/29119284/data-encapsulation-in-c/29123465#29123465", "title": "Data encapsulation in C", "body": "<p>You could make a portion of your structure private like this.</p>\n\n<p>object.h</p>\n\n<pre><code>struct object_public {\n    uint32_t public_item1;\n    uint32_t public_item2;\n};\n</code></pre>\n\n<p>object.c</p>\n\n<pre><code>struct object {\n    struct object_public public;\n    uint32_t private_item1;\n    uint32_t *private_ptr;\n}\n</code></pre>\n\n<p>A pointer to an <code>object</code> can be cast to a pointer to <code>object_public</code> because <code>object_public</code> is the first item in <code>struct object</code>.  So the code outside of object.c will reference the object through a pointer to <code>object_public</code>.  While the code within object.c references the object through a pointer to <code>object</code>.  Only the code within object.c will know about the private members.</p>\n\n<p>The program should not define or allocate an instance <code>object_public</code> because that instance won't have the private stuff appended to it.</p>\n\n<p>The technique of including a struct as the first item in another struct is really a way for implementing single inheritance in C.  I don't recall ever using it like this for encapsulation.  But I thought I would throw the idea out there.</p>\n"}, {"tags": [], "owner": {"reputation": 2240, "user_id": 3499640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff85dddff0538584dfeb0dfc0946a341?s=128&d=identicon&r=PG&f=1", "display_name": "srdjan.veljkovic", "link": "https://stackoverflow.com/users/3499640/srdjan-veljkovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1427298510, "creation_date": 1427298510, "answer_id": 29260367, "question_id": 29119284, "link": "https://stackoverflow.com/questions/29119284/data-encapsulation-in-c/29260367#29260367", "title": "Data encapsulation in C", "body": "<p>You can:</p>\n\n<ol>\n<li>Make your whole <code>ads1248_options_t</code> an opaque type (as already discussed in other answers)</li>\n<li><p>Make just the <code>adc_values</code> member an opaque type, like:</p>\n\n<pre><code> // in the header(.h)\ntypedef struct adc_values adc_values_t;\n\n // in the code (.c)\nstruct adc_values { \n    int32_t *values;\n};\n</code></pre></li>\n<li><p>Have a static array of array of values \"parallel\" to your <code>ads1248_options_t</code> and provide functions to access them. Like:</p>\n\n<pre><code>// in the header (.h)\nint32_t get_adc_value(int id, int value_idx);\n\n// in the code (.c)\nstatic int32_t values[MAX_ADS][MAX_VALUES];\n// or\nstatic int32_t *values[MAX_ADS]; // malloc()-ate members somewhere\n\nint32_t get_adc_value(int id, int value_idx) {\n    return values[id][value_idx]\n}\n</code></pre>\n\n<p>If the user doesn't know the index to use, keep an index (<code>id</code>) in your <code>ads1248_options_t</code>.</p></li>\n<li><p>Instead of a static array, you may provide some other way of allocating the value arrays \"in parallel\", but, again, need a way to identify which array belongs to which ADC, where its <code>id</code> is the simplest solution.</p></li>\n</ol>\n"}], "owner": {"reputation": 816, "user_id": 2110255, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Lih1Q.jpg?s=128&g=1", "display_name": "Tom L.", "link": "https://stackoverflow.com/users/2110255/tom-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10178, "favorite_count": 11, "accepted_answer_id": 29121847, "answer_count": 5, "score": 7, "last_activity_date": 1427298510, "creation_date": 1426673690, "question_id": 29119284, "link": "https://stackoverflow.com/questions/29119284/data-encapsulation-in-c", "title": "Data encapsulation in C", "body": "<p>I am currently working on an embedded system and I have a component on a board which appears two times. I would like to have one .c and one .h file for the component.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>typedef struct {\n    uint32_t pin_reset;\n    uint32_t pin_drdy;\n    uint32_t pin_start;\n    volatile avr32_spi_t *spi_module;\n    uint8_t cs_id;  \n} ads1248_options_t;\n</code></pre>\n\n<p>Those are all hardware settings. I create two instances of this struct (one for each part).</p>\n\n<p>Now I need to keep an array of values in the background. E.g. I can read values from that device every second and I want to keep the last 100 values. I would like this data to be non-accessible from the \"outside\" of my component (only through special functions in my component).</p>\n\n<p>I am unsure on how to proceed here. Do I really need to make the array part of my struct? What I thought of would be to do the following:</p>\n\n<pre><code>int32_t *adc_values; // &lt;-- Add this to struct\n\nint32_t *adc_value_buffer = malloc(sizeof(int32_t) * 100); // &lt;-- Call in initialize function, this will never be freed on purpose\n</code></pre>\n\n<p>Yet, I will then be able to access my int32_t pointer from everywhere in my code (also from outside my component) which I do not like.</p>\n\n<p>Is this the only way to do it? Do you know of a better way?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["mysql", "c", "database", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "edited": false, "score": 0, "creation_date": 1426677833, "post_id": 29120694, "comment_id": 46468108, "body": "i intend to transfer mysql database from one client to another, through sockets and mysql c api."}, {"owner": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "edited": false, "score": 0, "creation_date": 1426677867, "post_id": 29120694, "comment_id": 46468130, "body": "please give a few more hints."}, {"owner": {"reputation": 106, "user_id": 4590039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4467f16fff8b116b58e05e0348c4280d?s=128&d=identicon&r=PG&f=1", "display_name": "horsefeathers", "link": "https://stackoverflow.com/users/4590039/horsefeathers"}, "reply_to_user": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "edited": false, "score": 0, "creation_date": 1426678012, "post_id": 29120694, "comment_id": 46468213, "body": "So you are looking for a function to copy the database, or you have the new database and you are looking to load the data into it?"}, {"owner": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "edited": false, "score": 0, "creation_date": 1426678270, "post_id": 29120694, "comment_id": 46468365, "body": "i have a database on my client 1, i have to create a copy of that database on client 2 all connected through tcp sockets. i must do it through mysql c api."}, {"owner": {"reputation": 106, "user_id": 4590039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4467f16fff8b116b58e05e0348c4280d?s=128&d=identicon&r=PG&f=1", "display_name": "horsefeathers", "link": "https://stackoverflow.com/users/4590039/horsefeathers"}, "reply_to_user": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "edited": false, "score": 0, "creation_date": 1426729625, "post_id": 29120694, "comment_id": 46496769, "body": "Hmm.. If you have to copy the database as well as the data, then I don&#39;t think prepared statements are your best option actually. They&#39;re good for queries such as simple inserts, but for copying an entire database I think you&#39;ll want something heftier."}], "tags": [], "owner": {"reputation": 106, "user_id": 4590039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4467f16fff8b116b58e05e0348c4280d?s=128&d=identicon&r=PG&f=1", "display_name": "horsefeathers", "link": "https://stackoverflow.com/users/4590039/horsefeathers"}, "is_accepted": true, "score": 1, "last_activity_date": 1426677693, "creation_date": 1426677693, "answer_id": 29120694, "question_id": 29119269, "link": "https://stackoverflow.com/questions/29119269/inserting-into-mysql-table-using-a-variable/29120694#29120694", "title": "Inserting into MySQL table using a variable", "body": "<p>I think prepared statements/PDO should work for what you're looking for. Without knowing what your table schema looks like, it's a bit hard to tell you what the statement would look like, but here's some information for the C API. </p>\n\n<p><a href=\"http://dev.mysql.com/doc/refman/5.1/en/c-api-prepared-statements.html\" rel=\"nofollow\">http://dev.mysql.com/doc/refman/5.1/en/c-api-prepared-statements.html</a>\n<a href=\"http://dev.mysql.com/doc/refman/5.0/en/c-api-prepared-statement-data-structures.html\" rel=\"nofollow\">http://dev.mysql.com/doc/refman/5.0/en/c-api-prepared-statement-data-structures.html</a>\n<a href=\"http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html\" rel=\"nofollow\">http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html</a></p>\n"}], "owner": {"reputation": 398, "user_id": 4546831, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7469881a075e3e1d1504ae72b9a14edf?s=128&d=identicon&r=PG&f=1", "display_name": "Novak007", "link": "https://stackoverflow.com/users/4546831/novak007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 29120694, "answer_count": 1, "score": 0, "last_activity_date": 1486330512, "creation_date": 1426673664, "last_edit_date": 1486330512, "question_id": 29119269, "link": "https://stackoverflow.com/questions/29119269/inserting-into-mysql-table-using-a-variable", "title": "Inserting into MySQL table using a variable", "body": "<p>I have long known that one could fetch results from a mysql table and print it as :   </p>\n\n<p>(MySQL C API)</p>\n\n<pre><code>MYSQL_RES *result = mysql_store_result(con);\n\nif (result == NULL)    \n{    \n  finish_with_error(con);    \n}\n\nint num_fields = mysql_num_fields(result);        \nMYSQL_ROW row;        \nwhile ((row = mysql_fetch_row(result)))    \n{     \n   printf(\"%s \", row[i] ? row[i] : \"NULL\");    \n}\n</code></pre>\n\n<p><strong>Now suppose I have to copy a database into another, can I do the other way round i.e can I somehow use the row variable to insert into the new database.</strong></p>\n\n<p>If I could do this copying a database would be so easy.</p>\n\n<p>By copying a database I mean I have to create a database that is exactly the same as the original one, with all its data and attributes being the same.</p>\n"}, {"tags": ["c", "unix", "memory-management"], "comments": [{"owner": {"reputation": 187, "user_id": 4684506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/614780fe132255bfc9b55735a6ca9c97?s=128&d=identicon&r=PG&f=1", "display_name": "Meraj Hussain", "link": "https://stackoverflow.com/users/4684506/meraj-hussain"}, "edited": false, "score": 1, "creation_date": 1426673469, "post_id": 29118833, "comment_id": 46465358, "body": "Thanks Arun! I was unable to edit it."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 4684506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/614780fe132255bfc9b55735a6ca9c97?s=128&d=identicon&r=PG&f=1", "display_name": "Meraj Hussain", "link": "https://stackoverflow.com/users/4684506/meraj-hussain"}, "edited": false, "score": 0, "creation_date": 1426677902, "post_id": 29119643, "comment_id": 46468151, "body": "Thank you Ulfalizer. So do you mean that the task_struct the keeps tracks of all the process related statistics sums up all the mappings per process to get rss size??"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 187, "user_id": 4684506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/614780fe132255bfc9b55735a6ca9c97?s=128&d=identicon&r=PG&f=1", "display_name": "Meraj Hussain", "link": "https://stackoverflow.com/users/4684506/meraj-hussain"}, "edited": false, "score": 0, "creation_date": 1426678544, "post_id": 29119643, "comment_id": 46468539, "body": "@MerajHussain: I&#39;m not sure exactly where <code>&#47;proc&#47;&lt;pid&gt;&#47;&lt;statm&gt;</code> gets the information, but yeah, it probably just shows the total rss of all the mappings."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "reply_to_user": {"reputation": 187, "user_id": 4684506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/614780fe132255bfc9b55735a6ca9c97?s=128&d=identicon&r=PG&f=1", "display_name": "Meraj Hussain", "link": "https://stackoverflow.com/users/4684506/meraj-hussain"}, "edited": false, "score": 0, "creation_date": 1426679516, "post_id": 29119643, "comment_id": 46469113, "body": "...and any time you see &quot;rss for process <i>x</i>&quot;, then that is likely to mean (or at least approximate) the total rss of all the mappings. (There might be some subtleties that I&#39;m not aware of.) Inspecting the rss of each mapping will give you an idea of where memory is being used at least."}], "tags": [], "owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "is_accepted": true, "score": 2, "last_activity_date": 1426775889, "last_edit_date": 1426775889, "creation_date": 1426674709, "answer_id": 29119643, "question_id": 29118833, "link": "https://stackoverflow.com/questions/29118833/why-is-the-resident-set-size-rss-of-my-program-larger-than-the-executable/29119643#29119643", "title": "Why is the resident set size (RSS) of my program larger than the executable?", "body": "<p>More things will need to be resident in memory than just the code and data segments from your executable file while the program is running. For example, it's likely to also have resident memory pages from the stack, the heap, shared libraries, and file mappings.</p>\n\n<p>If you want to see how the resident pages are being used, you could look at <code>/proc/&lt;pid&gt;/smaps</code> -- specifically the <em>Rss:</em> field.</p>\n\n<p><code>/proc/&lt;pid&gt;/maps</code> (no 's') will give you a more readable overview of the mappings of the process. Note that e.g. the stack (or stacks in case of many threads) and the heap count as mappings too.</p>\n\n<p>Here's some example output for <code>cat /proc/self/maps</code> (which will print the mappings for the <code>cat</code> process itself). I've added arrows on the right (might need to scroll) to explain what some of the different mappings are. Once you know that, you can check out <code>cat /proc/&lt;pid&gt;/smaps</code> to see what the resident size of each mapping is.</p>\n\n<pre>\n00400000-0040c000 r-xp 00000000 08:01 3409248            /bin/cat                            &lt;- text (code) segment\n0060b000-0060c000 r--p 0000b000 08:01 3409248            /bin/cat                            &lt;- read-only data segment (for e.g. string literals)\n0060c000-0060d000 rw-p 0000c000 08:01 3409248            /bin/cat                            &lt;- read/write data segment\n01d6a000-01d8b000 rw-p 00000000 00:00 0                  [heap]\n7f23d2b5c000-7f23d3328000 r--p 00000000 08:01 8126750    /usr/lib/locale/locale-archive      &lt;- memory-mapped file (actually, executables and\n                                                                                                shared libraries are memory-mapped files too)\n7f23d3328000-7f23d34e2000 r-xp 00000000 08:01 11155466   /lib/x86_64-linux-gnu/libc-2.19.so  ^\n7f23d34e2000-7f23d36e1000 ---p 001ba000 08:01 11155466   /lib/x86_64-linux-gnu/libc-2.19.so  | Various mappings for\n7f23d36e1000-7f23d36e5000 r--p 001b9000 08:01 11155466   /lib/x86_64-linux-gnu/libc-2.19.so  | glibc\n7f23d36e5000-7f23d36e7000 rw-p 001bd000 08:01 11155466   /lib/x86_64-linux-gnu/libc-2.19.so  v\n7f23d36e7000-7f23d36ec000 rw-p 00000000 00:00 0                                              &lt;- Anonymous mapping (MAP_ANONYMOUS)\n...\n7fffbc234000-7fffbc255000 rw-p 00000000 00:00 0          [stack]\n7fffbc3a1000-7fffbc3a3000 r-xp 00000000 00:00 0          [vdso]                              ^\n7fffbc3a3000-7fffbc3a5000 r--p 00000000 00:00 0          [vvar]                              | Internal stuff related to how some\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0  [vsyscall]                          v system calls are implemented\n</pre>\n"}], "owner": {"reputation": 187, "user_id": 4684506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/614780fe132255bfc9b55735a6ca9c97?s=128&d=identicon&r=PG&f=1", "display_name": "Meraj Hussain", "link": "https://stackoverflow.com/users/4684506/meraj-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 1, "accepted_answer_id": 29119643, "answer_count": 1, "score": 1, "last_activity_date": 1426775889, "creation_date": 1426672378, "last_edit_date": 1426769360, "question_id": 29118833, "link": "https://stackoverflow.com/questions/29118833/why-is-the-resident-set-size-rss-of-my-program-larger-than-the-executable", "title": "Why is the resident set size (RSS) of my program larger than the executable?", "body": "<p>Running a simple program that simple waits in a while loop and I was curious to know the memory stats of the process. The program I am running is as follows</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    while(1)\n    {\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>when compiled the above program produces an executable file of 7950 bytes(2 pages approx). But <code>/proc/pid/statm</code> gives rss size as 72 pages? Can anyone give some insight here?</p>\n\n<p>Regards,\nMeraj</p>\n"}, {"tags": ["c", "microcontroller", "stm32"], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 4654918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf5be94df38bc12d3747540082466bbd?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/4654918/jon"}, "is_accepted": true, "score": 4, "last_activity_date": 1426676991, "creation_date": 1426676991, "answer_id": 29120465, "question_id": 29118509, "link": "https://stackoverflow.com/questions/29118509/stm32-hal-library-simple-c-coding-error/29120465#29120465", "title": "STM32 HAL Library simple C coding error", "body": "<p>Technically yes, though from my experiences with compilers for embedded targets, that loop will not get optimised out. If you think about it, having a pointless loop is not really a construct you are going to see in a program unless the programmer does it on purpose, so I doubt many compilers bothers to optimise for it.</p>\n\n<p>The fact that you have to make assumptions about how it might be optimised though means it most certainly is a bug, and one of the worst types at that. More than likely ST wanted to only use C in their library, so did this instead of the inline assembler delay that they should have used. But since the problem they are trying to solve is heavily platform dependent, an annoying platform/compiler dependent solution is unavoidable, and all they have done here is try to hide that dependency.</p>\n\n<p>Declaring the variable volatile will help, but you still really have no idea how long that loop is taking to execute without making assumptions about how the compiler is building it. This is still very bad practice, though if they added an assert reminding you to check the delay manually that might be passable.</p>\n"}, {"comments": [{"owner": {"reputation": 2798, "user_id": 492747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6175ac3e7ef6faba1f1ac2a3decbec7b?s=128&d=identicon&r=PG", "display_name": "evading", "link": "https://stackoverflow.com/users/492747/evading"}, "edited": false, "score": 1, "creation_date": 1427266317, "post_id": 29245871, "comment_id": 46702767, "body": "I just feel that relying on disassembly is not going to be very maintainable in the long run. What if optimization levels need to be changed later on?"}], "tags": [], "owner": {"reputation": 21, "user_id": 2691085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cf5cb036ee14b8914411770dbad69f9?s=128&d=identicon&r=PG&f=1", "display_name": "lo_529", "link": "https://stackoverflow.com/users/2691085/lo-529"}, "is_accepted": false, "score": 1, "last_activity_date": 1427246307, "creation_date": 1427246307, "answer_id": 29245871, "question_id": 29118509, "link": "https://stackoverflow.com/questions/29118509/stm32-hal-library-simple-c-coding-error/29245871#29245871", "title": "STM32 HAL Library simple C coding error", "body": "<p>This depends on the compiler and the optimization level. To confirm the result, just enter debug mode and check the disassembly code of the piece of code.</p>\n"}], "owner": {"reputation": 2798, "user_id": 492747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6175ac3e7ef6faba1f1ac2a3decbec7b?s=128&d=identicon&r=PG", "display_name": "evading", "link": "https://stackoverflow.com/users/492747/evading"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "accepted_answer_id": 29120465, "answer_count": 2, "score": 2, "last_activity_date": 1427246307, "creation_date": 1426671504, "question_id": 29118509, "link": "https://stackoverflow.com/questions/29118509/stm32-hal-library-simple-c-coding-error", "title": "STM32 HAL Library simple C coding error", "body": "<p>I am using the STM32 HAL Library for a micro controller project. In the ADC section I found the following code:</p>\n\n<pre><code>uint32_t WaitLoopIndex = 0;                                                                           \n/...    \n.../                                                                      \n/* Delay for ADC stabilization time.                                      */                        \n/* Delay fixed to worst case: maximum CPU frequency                       */                        \nwhile(WaitLoopIndex &lt; ADC_STAB_DELAY_CPU_CYCLES)                                                    \n{                                                                                                   \n  WaitLoopIndex++;                                                                                  \n}   \n</code></pre>\n\n<p>It is my understanding that this code will most likely get optimized away since <code>WaitLoopIndex</code> isn't used anywhere else in the function and is not declared volatile, right?</p>\n"}]