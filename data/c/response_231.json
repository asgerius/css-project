[{"tags": ["c", "pointers", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 0, "last_activity_date": 1560380566, "creation_date": 1560380566, "answer_id": 56571376, "question_id": 56571300, "link": "https://stackoverflow.com/questions/56571300/how-to-correctly-pass-an-array-in-a-pthread-function/56571376#56571376", "title": "How to correctly pass an array in a pthread function", "body": "<p>The <code>int *</code> array is passed in as <code>void *</code>, then is cast to <code>long int *</code>. Change your function to:</p>\n\n<pre><code>void* print_array(void* arg) {\n    int *element_array = (int *)arg;\n\n    for (int i = 0; i &lt; elements; i++) {\n        printf(\"Element %d of the array: %d\\n\", i, element_array[i]);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 810, "user_id": 1161132, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gNKM0.jpg?s=128&g=1", "display_name": "bgura", "link": "https://stackoverflow.com/users/1161132/bgura"}, "is_accepted": false, "score": 0, "last_activity_date": 1560380566, "creation_date": 1560380566, "answer_id": 56571377, "question_id": 56571300, "link": "https://stackoverflow.com/questions/56571300/how-to-correctly-pass-an-array-in-a-pthread-function/56571377#56571377", "title": "How to correctly pass an array in a pthread function", "body": "<p>In <code>print_array</code> you are casting your arg to a <code>long int*</code> rather than an <code>int*</code>. This is causing you to read past your buffer. Additionally, the first value you are reading <code>element_array[0]</code> is probably a combination of your first 2 values.</p>\n"}], "owner": {"reputation": 41, "user_id": 9229736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50fd940d7186bd0d0188be8d382df84e?s=128&d=identicon&r=PG&f=1", "display_name": "kirios kavouris", "link": "https://stackoverflow.com/users/9229736/kirios-kavouris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1578793855, "creation_date": 1560379878, "last_edit_date": 1578793855, "question_id": 56571300, "link": "https://stackoverflow.com/questions/56571300/how-to-correctly-pass-an-array-in-a-pthread-function", "title": "How to correctly pass an array in a pthread function", "body": "<p>What I want to do is to loop through an array using a pthread and print its values. The problem is that the output is completely different from what I expect.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n\nint elements = 0;\nint n = 0;\n\nvoid *print_array(void* arg); \n\n\nint main()\n{   \n    /* ----- User input ----- */\n    printf(\"Creating a NxN array. Give N: \");\n    scanf(\"%d\", &amp;n);\n    int element_array[n*n];\n    elements = n*n;\n\n    printf(\"Give the elements of the %dx%d array \\n\", n, n);\n    for (int i=0; i&lt;n; i++) {\n        printf(\"\\n\");\n        for (int j=0; j&lt;n; j++) {\n            printf(\"(%d,%d): \", i, j);\n            scanf(\"%d\", &amp;element_array[i*n+j]);\n            //This way the array will be filled line by line\n            //eg. for n=4 --&gt; element_array[0..3 then 4..7 then 8..11 then 12..15]\n        }\n    }\n\n\n    pthread_t newthread;\n    pthread_create(&amp;newthread, NULL, print_array, (void *)element_array);\n    pthread_join(newthread, NULL);\n\n    return 0;\n}\n\n\nvoid* print_array(void* arg) {\n    long int *element_array = (long int *) arg;\n    for (int i = 0; i &lt; elements; i++) {\n        printf(\"Element %d of the array: %ld\\n\", i, element_array[i]);\n    }\n\n}\n</code></pre>\n\n<p>For an input of a 2x2 array, for example (0,0): 1, (0,1): 1, (1,0): 1, (1,1): 1 the output will be:</p>\n\n<pre><code>Element 0: 4294967297\nElement 1: 4294967297\nElement 2: 194\nElement 3: 8589934594\n</code></pre>\n\n<p>There clearly is an issue with my use of pointers, but I can't understand it.</p>\n"}, {"tags": ["c", "matlab", "memory-management", "mex"], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560438182, "post_id": 56572418, "comment_id": 99744883, "body": "Thanks! I didn&#39;t realize that it stayed in memory after it completed, I assumed the MEX files were wiped, but that makes sense because otherwise <code>clear mex</code> wouldn&#39;t do much. But the rest of the state of the MEX file is lost, right? Like local variables and anything global that wasn&#39;t told to be <code>mexMemoryMakePersistent()</code>, and any other state of the program, right?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560439905, "post_id": 56572418, "comment_id": 99745926, "body": "@Tyler: <code>mexMemoryMakePersistent</code> is to tell MATLAB to not automatically free memory created with <code>mxCalloc</code> and the like. MATLAB otherwise automatically cleans up all memory allocated. If you allocate something with <code>malloc</code>, then MATLAB doesn&#39;t know anything about it and will not clean it up -- it is automatically persistent."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560439907, "post_id": 56572418, "comment_id": 99745927, "body": "Then there&#39;s the difference between global variables (those defined outside the scope of any function), static variables (those declared <a href=\"https://stackoverflow.com/questions/572547/what-does-static-mean-in-c\"><code>static</code></a> inside a function scope) and local variables (all other variables declared inside a function). Of these, the latter type does not persist between function calls, and hence don&#39;t persist between calls to your MEX-file. The other two types do persist. The normal scoping rules for C apply here, think of MATLAB as <code>main</code> and <code>mexFunction</code> as a function in your program."}, {"owner": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560442809, "post_id": 56572418, "comment_id": 99747470, "body": "So does that mean that if someone has say, a normal global c++ <code>int</code>, it&#39;ll stick around between calls to the MEX file? Currently, to maintain such an int, I&#39;m actually mxMalloc&#39;ing space for it and making it persistent. If I don&#39;t need to do that, that&#39;d be great."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560443272, "post_id": 56572418, "comment_id": 99747694, "body": "@Tyler: Yes, either a global <code>int</code> outside the function body or a <code>static int</code> inside the function body will be preserved between function calls, at least until <code>clear mex</code> is called. You should look at the docs for <code>mexLock</code> to learn about how to prevent the MEX-file from being cleared. <a href=\"https://github.com/DIPlib/diplib/blob/4d9bb512121bdd90b1f14b7cb0e681aa9a34d8f8/dipimage/private/imagedisplay.cpp#L145\" rel=\"nofollow noreferrer\">Here</a> is a rather complex example, but I declare some <code>static</code> objects of complex C++ classes inside <code>mexFunction</code>, no <code>mxMalloc</code> is involved."}, {"owner": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560448053, "post_id": 56572418, "comment_id": 99749938, "body": "Alright. So mxAlloc, mxCalloc and similar are only useful inside a MEX file if you want to use MATLAB types? And mexMemoryMakePersistent is only useful if you want to make something allocated by either of those neither a global nor a static?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560448938, "post_id": 56572418, "comment_id": 99750307, "body": "@Tyler: No, <code>mxCalloc</code> and the like are useful if you don&#39;t want to bother with manually freeing the memory allocated. MATLAB takes care of that for you. If you use <code>malloc</code> and the like instead, you need to make sure to also call <code>free</code>. If these are supposed to be persistent, then you also need to write a <code>mexAtExit</code> function."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560448972, "post_id": 56572418, "comment_id": 99750325, "body": "@Tyler: <code>mexMakeMemoryPersistent</code> needs to be used in combination with a global or static variable to hold the pointer, otherwise the memory will still be around but you will not be able to access it. If you assign a <code>mxCalloc</code>ed memory pointer to a static variable, the pointer will live across MEX calls, but the memory won&#39;t, so the pointer will be invalid."}, {"owner": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560449408, "post_id": 56572418, "comment_id": 99750519, "body": "So using both mxCalloc/mxMalloc along with mexMakeMemoryPersistent would be pointless - as the convenience of the memory being automatically cleaned up would be lost by forcing you to make a mexAtExit() method to do an mxFree(). So in sum - if you don&#39;t need things to be persistent between calls and want it cleaned up automatically - use mxMalloc and mxCalloc. If you <i>do</i> want it to be persistent, than just make it static or global. Just make sure to have a mexAtExit function if there&#39;s a global/staci pointing to malloc&#39;d memory though, so it&#39;ll be cleaned up on <code>clear mex</code>. Is that right?"}, {"owner": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "edited": false, "score": 0, "creation_date": 1560451476, "post_id": 56572418, "comment_id": 99751500, "body": "Ah, thanks. That makes sense. Appreciate all the info!"}, {"owner": {"reputation": 1026, "user_id": 4656601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H54K.jpg?s=128&g=1", "display_name": "James Tursa", "link": "https://stackoverflow.com/users/4656601/james-tursa"}, "edited": false, "score": 0, "creation_date": 1560542890, "post_id": 56572418, "comment_id": 99785314, "body": "@Chris: Your statements about mxCalloc and friends never leaking are not true. See my Answer and example."}], "tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": true, "score": 2, "last_activity_date": 1560449562, "last_edit_date": 1560449562, "creation_date": 1560391112, "answer_id": 56572418, "question_id": 56571246, "link": "https://stackoverflow.com/questions/56571246/when-a-mex-file-is-called-using-mexmakememorypersistent-how-are-variables-re-as/56572418#56572418", "title": "When a MEX file is called using mexMakeMemoryPersistent, how are variables re-assigned their pointers on subsequent calls?", "body": "<p>MEX-files are loaded into memory the first time they\u2019re called. At this point, global variables in the MEX-file get a location in memory and are initialized. Next <code>mexFunction</code> is called, where your code gets a chance to allocate memory and assign the pointer to this global variable.</p>\n\n<p>The next time you call the MEX-file, it is still loaded in memory, and those global variables are still there. This time MATLAB just needs to call <code>mexFunction</code>.</p>\n\n<p>When you do <code>clear mex</code> or <code>clear all</code> in MATLAB, the MEX-file will be unloaded from memory. The global variables will stop existing at this point. Because you used <code>mxCalloc</code> to allocate memory, MATLAB can reclaim the lost memory. If you had used <code>calloc</code> instead, you would have leaked memory at this point.</p>\n\n<p>The next time you call the MEX-file, it will be like the first time you called it.</p>\n\n<hr>\n\n<p>Note that, since a MEX-file is a compiled binary, your variable names are no longer visible (except in debug information). The machine code just deals with memory addresses and registers.</p>\n\n<p>In the case of C++, scoping rules, inheritance, etc are all just abstractions that lead to the same machine code you can obtain with C or any other compiled language.</p>\n\n<hr>\n\n<p>A few cases to clarify things:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) \n{\n    static int* myVar = NULL; // This is basically the same as a global myVar in this case\n    if(myVar == NULL) \n    {\n        myVar = (int*)mxCalloc(sizeof(int*), 10);\n        //mexMakeMemoryPersistent(myVar); // Let's leave out this line!\n        myVar[0] = 1;\n    }\n\n    myVar[0] *= 2;\n}\n</code></pre>\n\n<p>In the case above, we didn't make the memory persistent. The <code>myVar</code> pointer is preserved across MEX-file calls, but not the memory pointed to. The 2nd time you call the MEX-file, <code>myVar[0] *= 2</code> will do something illegal and likely crash MATLAB.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) \n{\n    int* myVar = NULL; // This is now a local variable\n    if(myVar == NULL) \n    {\n        myVar = (int*)mxCalloc(sizeof(int*), 10);\n        mexMakeMemoryPersistent(myVar);\n        myVar[0] = 1;\n    }\n\n    myVar[0] *= 2;\n}\n</code></pre>\n\n<p>In the case above, <code>myVar</code> will be NULL every time the MEX-file is called, so every time new memory will be allocated. The memory is persistent, so eventually you will run out of memory with this.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) \n{\n    static int* myVar = NULL;\n    if(myVar == NULL) \n    {\n        myVar = (int*)malloc(sizeof(int*), 10); // Using the system malloc\n        myVar[0] = 1;\n    }\n\n    myVar[0] *= 2;\n}\n</code></pre>\n\n<p>In the case above, things are OK, except that the memory allocated by <code>malloc</code> is never freed. When you do <code>clear all</code> or <code>clear mex</code>, the MEX-file will be cleared, the <code>myVar</code> static variable will be deleted, but the memory allocated by <code>malloc</code> is still there. You are leaking memory again. If you want to do it this way, you need to register a function to be run when the MEX-file exists, using <code>mexAtExit()</code>.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) \n{\n    static int myVar[10] = {1};\n    myVar[0] *= 2;\n}\n</code></pre>\n\n<p>In the case above, we use a static variable to hold all our data, no dynamic memory allocation is used, we don't need to worry about leaking memory. I recommend this unless the array is very large.</p>\n"}, {"comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1560543134, "post_id": 56604511, "comment_id": 99785404, "body": "Thanks for clarifying this."}], "tags": [], "owner": {"reputation": 1026, "user_id": 4656601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H54K.jpg?s=128&g=1", "display_name": "James Tursa", "link": "https://stackoverflow.com/users/4656601/james-tursa"}, "is_accepted": false, "score": 1, "last_activity_date": 1560543722, "last_edit_date": 1560543722, "creation_date": 1560542810, "answer_id": 56604511, "question_id": 56571246, "link": "https://stackoverflow.com/questions/56571246/when-a-mex-file-is-called-using-mexmakememorypersistent-how-are-variables-re-as/56604511#56604511", "title": "When a MEX file is called using mexMakeMemoryPersistent, how are variables re-assigned their pointers on subsequent calls?", "body": "<p>There seems to be some confusion about how mexMakeMemoryPersistent and mexMakeArrayPersistent work that I would like to clear up.  DISCLAIMER: The following is based on behavior I have observed from tests I have performed ... not necessarily on official MATLAB documentation.</p>\n\n<p>mxArray variable headers have a field which I will call VariableType that contains a value indicating the type of variable it is. E.g., for R2018b and earlier:</p>\n\n<pre><code>struct mxArray_header {\n    void *RevCrossLink;\n    mxClassID ClassID;\n    int VariableType;\n    :\n    etc.\n</code></pre>\n\n<p>For variables in the workspace, VariableType will be 0 (normal). Typically, variables passed into prhs[ ] will be normal types.</p>\n\n<p>All(*) of the official API functions that allocate memory (either mxArray variables or raw memory) put the address of that memory on the MATLAB Memory Manager temporary allocation list for the mex routine. NOTE: The \"data\" memory of an mxArray variable (i.e., the stuff behind the mxGetPr( ) and friends) is <strong>not</strong> on this allocation list ... its disposition is entirely dependent on the mxArray it is a part of. The VariableType of mxArrays created with official API functions is 4 (temporary).</p>\n\n<p>(*) mxArrayToString( ) used to be an exception to this, but that was fixed in R2017a.</p>\n\n<p>When the mex routine exits, as near as I can tell the following things happen:</p>\n\n<ol>\n<li><p>Shared data copies of the plhs[ ] variables are created (these\nare what are actually passed back to the caller).</p></li>\n<li><p>Everything on the temporary allocation lists for this mex routine are\ndestroyed/freed.</p></li>\n</ol>\n\n<p>With that backdrop, here is what the persistent functions do:</p>\n\n<p>mexMakeMemoryPersistent(memory_address)</p>\n\n<ul>\n<li>Removes memory_address from the temporary memory allocation list</li>\n</ul>\n\n<p>mexMakeArrayPersistent(mxArray_address)</p>\n\n<ul>\n<li>Removes mxArray_address from the temporary mxArray allocation list</li>\n<li>Changes the VariableType of the mxArray behind mxArray_address to 0 (normal)</li>\n</ul>\n\n<p>And, in fact, the documentation for mexMakeMemoryPersistent states the following:</p>\n\n<p><em>\"If you create persistent memory, you are responsible for freeing it when the MEX function is cleared. If you do not free the memory, MATLAB leaks memory.\"</em></p>\n\n<p>Bottom line is, you <strong>must</strong> manually destroy/free persistent memory ... the MATLAB Memory Manager will no longer help you once you make the memory persistent.  This is particularly true when the mex function is cleared from memory.  Your persistent memory <strong>will</strong> be leaked regardless of the fact that you had a global variable storing it and regardless of the fact that it originally came from an official MATLAB API function.  You need to use some combination of mexAtExit and/or mexLock/mexUnlock functions to manage this situation so that you don't have a memory leak.  This has always been the behavior of these persistent functions to my knowledge. </p>\n\n<p>SIDE NOTE: There are no official API functions to do the reverse ... i.e., you cannot make persistent memory non-persistent again.  Once you make something persistent, you are stuck with it and must deal with it manually.</p>\n\n<p>A demonstration with a 100MB memory block:</p>\n\n<pre><code>/* persist_test.c */\n#include \"mex.h\"\nchar *cp = NULL;\n#define ONE_MB (1024*1024)\nvoid mexFunction( int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n    if( cp == NULL ) {\n        cp = mxMalloc(100*ONE_MB);\n        mexMakeMemoryPersistent(cp);\n    }\n}\n</code></pre>\n\n<p>And at the command line, clearly showing the memory leaking even when the mex routine is cleared from memory (memory usage constantly going up and never going down):</p>\n\n<pre><code>&gt;&gt; memory\nMaximum possible array:        2324 MB (2.436e+09 bytes) *\nMemory available for all arrays:        2324 MB (2.436e+09 bytes) *\nMemory used by MATLAB:        1012 MB (1.061e+09 bytes)\nPhysical Memory (RAM):        8056 MB (8.447e+09 bytes)\n\n*  Limited by System Memory (physical + swap file) available.\n&gt;&gt; persist_test\n&gt;&gt; memory\nMaximum possible array:        2183 MB (2.289e+09 bytes) *\nMemory available for all arrays:        2183 MB (2.289e+09 bytes) *\nMemory used by MATLAB:        1115 MB (1.169e+09 bytes)\nPhysical Memory (RAM):        8056 MB (8.447e+09 bytes)\n\n*  Limited by System Memory (physical + swap file) available.\n&gt;&gt; [~,mexnames] = inmem\n\nmexnames = \n\n    'winqueryreg'\n    'persist_test'\n\n&gt;&gt; clear persist_test\n&gt;&gt; [~,mexnames] = inmem\n\nmexnames = \n\n    'winqueryreg'\n\n&gt;&gt; memory\nMaximum possible array:        2174 MB (2.279e+09 bytes) *\nMemory available for all arrays:        2174 MB (2.279e+09 bytes) *\nMemory used by MATLAB:        1103 MB (1.157e+09 bytes)\nPhysical Memory (RAM):        8056 MB (8.447e+09 bytes)\n\n*  Limited by System Memory (physical + swap file) available.\n&gt;&gt; \n&gt;&gt; % Do it again\n&gt;&gt; \n&gt;&gt; persist_test\n&gt;&gt; memory\nMaximum possible array:        2053 MB (2.153e+09 bytes) *\nMemory available for all arrays:        2053 MB (2.153e+09 bytes) *\nMemory used by MATLAB:        1206 MB (1.265e+09 bytes)\nPhysical Memory (RAM):        8056 MB (8.447e+09 bytes)\n\n*  Limited by System Memory (physical + swap file) available.\n&gt;&gt; [~,mexnames] = inmem\n\nmexnames = \n\n    'winqueryreg'\n    'persist_test'\n\n&gt;&gt; clear persist_test\n&gt;&gt; [~,mexnames] = inmem\n\nmexnames = \n\n    'winqueryreg'\n\n&gt;&gt; memory\nMaximum possible array:        2073 MB (2.174e+09 bytes) *\nMemory available for all arrays:        2073 MB (2.174e+09 bytes) *\nMemory used by MATLAB:        1202 MB (1.260e+09 bytes)\nPhysical Memory (RAM):        8056 MB (8.447e+09 bytes)\n\n*  Limited by System Memory (physical + swap file) available.\n&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 687, "user_id": 5403466, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9d2024715232484a2e467afa8de1af7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Shellberg", "link": "https://stackoverflow.com/users/5403466/tyler-shellberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 56572418, "answer_count": 2, "score": 1, "last_activity_date": 1560543722, "creation_date": 1560379410, "last_edit_date": 1560390613, "question_id": 56571246, "link": "https://stackoverflow.com/questions/56571246/when-a-mex-file-is-called-using-mexmakememorypersistent-how-are-variables-re-as", "title": "When a MEX file is called using mexMakeMemoryPersistent, how are variables re-assigned their pointers on subsequent calls?", "body": "<p>I'm trying to wrap my head around <code>mexMakeMemoryPersistent()</code> from MATLAB's C MEX API.</p>\n\n<p>I don't understand - when a MEX file is called more than once, with <code>mexMakeMemoryPersistent()</code> having been used, how is the memory it's assigned given back to the MEX file when it's called a second time?</p>\n\n<p>In example, let's say I have a MEX file called myFunc</p>\n\n<p>And it contains the following:</p>\n\n<pre><code>int* myVar = NULL;\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) \n{\n    if(myVar == NULL) \n    {\n        myVar = (int*)mxCalloc(sizeof(int*), 10);\n        mexMakeMemoryPersistent(myVar);\n        myVar[0] = 1;\n    }\n\n    // Do the thing I want with it\n    myVar[0] *= 2;\n}\n</code></pre>\n\n<p>The first time we do</p>\n\n<p><code>fx&gt;&gt; myFunc()</code></p>\n\n<p>Inside MATLAB, it's obvious that <code>myVar</code> will be <code>NULL</code>, and then <code>mxCalloc</code> will grab some memory and get a pointer to it, etc.</p>\n\n<p>But what about after it returns, and then gets called a <strong>second</strong> time:</p>\n\n<p><code>fx&gt;&gt; myFunc()</code></p>\n\n<p>We told MATLAB not to destroy the memory we just allocated for <code>myVar</code>. But how does that pointer get re-assigned into <code>myVar</code> when the new instance of <code>myFunc</code> is run? If it didn't, <code>myVar</code> would just be <code>NULL</code> and we'd be back at square one. Does it maintain a list of variable names and the memory that was assigned to them? But what happens if we have odd scoping rules, inheritance (in the case of C++) etc? How does it resolve <em>what</em> variable needs to be handed that pointer, and actually do the handoff?</p>\n\n<p>I'm not having trouble using this, I just want to understand it conceptually because I think it's really neat.</p>\n"}, {"tags": ["c", "makefile", "shared-libraries", "linker-errors"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1560376989, "post_id": 56570914, "comment_id": 99720707, "body": "Yes it&#39;s a linking error. As the Linux manual pages for e.g. <a href=\"http://man7.org/linux/man-pages/man3/crypt.3.html\" rel=\"nofollow noreferrer\"><code>crypt</code></a> and <a href=\"http://man7.org/linux/man-pages/man3/encrypt.3.html\" rel=\"nofollow noreferrer\"><code>encrypt</code> and <code>setkey</code></a> should tell you, you need to link with the <code>crypt</code> library. Unless you have done a mistake in the configuration for the build, it needs to be brought to the attention of the project maintainer."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1560382734, "post_id": 56570914, "comment_id": 99721949, "body": "Your makefile is looking for /usr/include/crypt.h to determine if libcrypt is installed. Perhaps you need to install it?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1560470746, "post_id": 56570914, "comment_id": 99757333, "body": "strongly suggest posting the contents of the makefile."}], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 10135774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06rMk.gif?s=128&g=1", "display_name": "minto", "link": "https://stackoverflow.com/users/10135774/minto"}, "is_accepted": false, "score": 0, "last_activity_date": 1566768923, "last_edit_date": 1566768923, "creation_date": 1566768063, "answer_id": 57649813, "question_id": 56570914, "link": "https://stackoverflow.com/questions/56570914/undefined-reference-errors-when-linking/57649813#57649813", "title": "Undefined reference errors when linking", "body": "<p>I solved this issue, problem was that Makefile have code (line 138) which was looking for libcrypt*.* libraries in the wrong place, under /usr/lib on my build PC (which have no these libs) instead of the toolchain included in the tarball. \nI modified this line:</p>\n\n<pre><code>ifneq ($(wildcard /usr/lib/libcrypt*.*),)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>ifneq ($(shell find ../.. -name libcrypt*.*),)\n</code></pre>\n\n<p>After the modification, Makefile located the library and set LIBS accordingly.</p>\n"}], "owner": {"reputation": 131, "user_id": 10135774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06rMk.gif?s=128&g=1", "display_name": "minto", "link": "https://stackoverflow.com/users/10135774/minto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 615, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566769361, "creation_date": 1560376784, "last_edit_date": 1566769361, "question_id": 56570914, "link": "https://stackoverflow.com/questions/56570914/undefined-reference-errors-when-linking", "title": "Undefined reference errors when linking", "body": "<p>Linux debian 32-bit host PC. \nProject contains the source code and a pre-built toolchain, the target is ARM.  When I tried run <code>make</code> to build a firmware image, there is few <code>undefined reference</code> errors shown, compilation stopped.</p>\n\n<pre><code>... ...\nif [ -f pppd/Makefile.cyt ]; then \\\n    make -C pppd -f Makefile.cyt; \\\nelse \\\n    make -C pppd; \\\nfi\nmake[3]: Entering directory '/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/router/open_source/pkgs/pppd-2.4.1'\nmake -C pppd\nmake[4]: Entering directory '/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/router/open_source/pkgs/pppd-2.4.1/pppd'\n/opt/emlix/pnx8181/bin/arm-linux-gnueabi-gcc -O2 -pipe -Wall -D__linux__=1 -DHAVE_PATHS_H  -DHAVE_MMAP -I../include -I/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/router/open_source/include  -DCHAPMS=1 -DMPPE=1 -DHAVE_CRYPT_H=1 -DUSE_CRYPT=1 -DPLUGIN -DCBCP_SUPPORT -Wl,-E -o pppd main.o magic.o fsm.o lcp.o ipcp.o upap.o chap-new.o md5.o ccp.o ecp.o auth.o options.o demand.o utils.o sys-linux.o ipxcp.o tty.o eap.o chap-md5.o md4.o chap_ms.o sha1.o pppcrypt.o cbcp.o  -ldl\nauth.o: In function `check_passwd':\nauth.c:(.text+0x1d00): undefined reference to `crypt'\nauth.c:(.text+0x1e2c): undefined reference to `crypt'\npppcrypt.o: In function `DesDecrypt':\npppcrypt.c:(.text+0xfc): undefined reference to `encrypt'\npppcrypt.o: In function `DesEncrypt':\npppcrypt.c:(.text+0x158): undefined reference to `encrypt'\npppcrypt.o: In function `DesSetkey':\npppcrypt.c:(.text+0x230): undefined reference to `setkey'\ncollect2: ld returned 1 exit status\nMakefile:226: recipe for target 'pppd' failed\nmake[4]: *** [pppd] Error 1\nmake[4]: Leaving directory '/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/router/open_source/pkgs/pppd-2.4.1/pppd'\nMakefile.cyt:18: recipe for target 'all' failed\nmake[3]: *** [all] Error 2\nmake[3]: Leaving directory '/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/router/open_source/pkgs/pppd-2.4.1'\n/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/Rules.mk:74: recipe for target '_subdir_pppd' failed\nmake[2]: *** [_subdir_pppd] Error 2\nmake[2]: Leaving directory '/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/router/open_source'\n/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/Rules.mk:74: recipe for target '_subdir_open_source' failed\nmake[1]: *** [_subdir_open_source] Error 2\nmake[1]: Leaving directory '/home/roleyf/test/payton_1.4.1.SR1_gpl/payton/src/router'\nRules.mk:74: recipe for target '_subdir_router' failed\nmake: *** [_subdir_router] Error 2\n</code></pre>\n\n<p><a href=\"https://pastebin.com/H9ecTx6n\" rel=\"nofollow noreferrer\">Makefile</a> for 'pppd' sub-directory.  I assume this is linking error, a Makefile in pppd submodule can't find <code>libcrypt</code> library for some reason. The issue looks like an intermittent error, that occurs irregular, randomly. Sometimes compilation allowed me to build a module, but more often it doesn\u2019t. How to fix this issue?</p>\n"}, {"tags": ["c", "gcc", "mingw"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560376408, "post_id": 56570819, "comment_id": 99720576, "body": "Which directory do you add to <code>PATH</code>? Which directory is <code>libwinpthread-1.dll</code> in? And which <code>PATH</code> environment variable did you change? How did you change it?"}, {"owner": {"reputation": 609, "user_id": 11171682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b4b97bc5566dbe16f0e5f8eeaeb6d5?s=128&d=identicon&r=PG&f=1", "display_name": "hkj447", "link": "https://stackoverflow.com/users/11171682/hkj447"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560376536, "post_id": 56570819, "comment_id": 99720600, "body": "I added <code>C:\\Program Files (x86)\\CodeBlocks\\MinGW\\bin</code> to my path. <code>libwinpthread-1.dll</code> is located in <code>bin</code>. I didn&#39;t change one, I added it."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 15000722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d567a91f017cdd53ccf85c46dc7d8868?s=128&d=identicon&r=PG", "display_name": "GiovanniF", "link": "https://stackoverflow.com/users/15000722/giovannif"}, "is_accepted": true, "score": 1, "last_activity_date": 1610565192, "last_edit_date": 1610565192, "creation_date": 1610564625, "answer_id": 65708305, "question_id": 56570819, "link": "https://stackoverflow.com/questions/56570819/gcc-exe-error-missing-libwinpthread-1-dll-but-it-is-not-missing/65708305#65708305", "title": "gcc.exe error Missing libwinpthread-1.dll, but it is not missing", "body": "<p>I solved the same problem on my codeblocks going to <code>settings \u2192 compiler</code>, choosing &quot;Searching directories&quot; and then choosing &quot;linker&quot; tab below and adding the following path:</p>\n<pre><code>C:\\Program Files\\CodeBlocks\\MinGW\\x86_64-w64-mingw32\\lib\n</code></pre>\n<p>\u2026(or your MingW installation). All libraries are linked statically.</p>\n<p>CodeBlocks version 20.03</p>\n"}], "owner": {"reputation": 609, "user_id": 11171682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b4b97bc5566dbe16f0e5f8eeaeb6d5?s=128&d=identicon&r=PG&f=1", "display_name": "hkj447", "link": "https://stackoverflow.com/users/11171682/hkj447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 1, "accepted_answer_id": 65708305, "answer_count": 1, "score": 0, "last_activity_date": 1610565192, "creation_date": 1560376181, "question_id": 56570819, "link": "https://stackoverflow.com/questions/56570819/gcc-exe-error-missing-libwinpthread-1-dll-but-it-is-not-missing", "title": "gcc.exe error Missing libwinpthread-1.dll, but it is not missing", "body": "<p>I attempted the solution found <a href=\"https://stackoverflow.com/questions/28907304/cc1-exe-system-error-libwinpthread-1-dll-missing-but-it-isnt\">here</a> which said to add MingW to the system path, but this did not work. I installed MingW alongside Codeblocks, and compiling works just fine. However, I have had issues with the the <code>make</code> command, which has led me to trying to see if there is issues with my compiler. Running <code>gcc.exe</code> in <code>CMD</code> gave the error that <code>libwinpthread-1.dll</code> was missing, but it clearly isn't. How can I get my computer to recognize it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "edited": false, "score": 1, "creation_date": 1560376515, "post_id": 56570719, "comment_id": 99720597, "body": "Also, if you print out <code>target</code> on failure, you would (hopefully) see the newline in it.  Especially when testing something, it&#39;s always a good idea to print diagnostics for error conditions."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1560375986, "creation_date": 1560375986, "answer_id": 56570787, "question_id": 56570719, "link": "https://stackoverflow.com/questions/56570719/strstr-not-working-within-the-loop-as-intended/56570787#56570787", "title": "strstr not working within the loop as intended", "body": "<p><code>target</code> has a <code>'\\n'</code> in it - thus no pattern match with <code>strstr()</code>.</p>\n\n<p>After reading the line, lop off that potential <code>'\\n'</code>.</p>\n\n<pre><code>target[strcspn(target,\"\\n\")] = 0;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10849810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026d22b36751baedbffc73e97f82df0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rudalf", "link": "https://stackoverflow.com/users/10849810/rudalf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 56570787, "answer_count": 1, "score": 0, "last_activity_date": 1560375986, "creation_date": 1560375620, "last_edit_date": 1560375884, "question_id": 56570719, "link": "https://stackoverflow.com/questions/56570719/strstr-not-working-within-the-loop-as-intended", "title": "strstr not working within the loop as intended", "body": "<p>I am learning C from the head first C and I tried making a small program which searches user input within a 2d array.</p>\n\n<p>But my code isn't working as intended and always return false.</p>\n\n<p>My code :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nchar songs[][50] = {\"Meri aashiqui ab tum hi ho\",\n\"Aaja Maahi\",\n\"Tum mere ho\",\n\"Akelapan\",\n\"kangana tera ni\"};\n\nvoid search_tar(char target[]) {\n    printf(\"Searching for %s \",target);\n    int i;\n    for ( i = 0; i &lt; 5; i++)\n    {\n        if (strstr(songs[i],target))\n        {\n            printf(\"Found the track %s from the keyword\",songs[i]);\n        }\n    }\n\n\n}\n\nint main()\n{\n    char target[50];\n    printf(\"Find the song with a keyword: \");\n    fgets(target,50,stdin);\n    search_tar(target);\n    return 0;\n}\n</code></pre>\n\n<p>Code from the book:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zznwi.png\" rel=\"nofollow noreferrer\">Code from book</a></p>\n\n<p>I expect the code to output the results.</p>\n"}, {"tags": ["c", "hex", "octal"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 6, "creation_date": 1560371161, "post_id": 56569860, "comment_id": 99718853, "body": "Welcome to SO. Your question is not clear. Do you want to know how to convert a string that represents an octal number to another string that represents the same number, but with hexadecimal digits?"}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "edited": false, "score": 0, "creation_date": 1560371470, "post_id": 56569860, "comment_id": 99718996, "body": "First, how would you do it with paper and pencil? Can you write a main() function which defines a variable which holds the input you want to convert and another one which will contain the output ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560372614, "post_id": 56569860, "comment_id": 99719397, "body": "You might not even need to do this. Numbers are numbers and their specific representation is only for input/output. So this question has no good answer until the specific problem is presented."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1560375411, "post_id": 56569860, "comment_id": 99720277, "body": "On paper, you successively divide the resulting octal quotients by <code>020</code>, and keep track of the remainders, until your quotient is 0. You translate <code>000</code> ... <code>017</code> to <code>0x0</code> ... <code>0xF</code> when transcribing the octal remainders into hexadecimal digits."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1560375697, "post_id": 56569860, "comment_id": 99720374, "body": "@jxh I find it much easier to to go octal-&gt;binary-&gt;hex. No math involved, only need to know binary representation of 0-15"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560376585, "post_id": 56569860, "comment_id": 99720611, "body": "@EugeneSh. Yes, that&#39;s easier in terms of mechanics, but explain that shifting by 4 bits is the same as dividing by 16."}], "answers": [{"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1616816214, "last_edit_date": 1616816214, "creation_date": 1560372653, "answer_id": 56570180, "question_id": 56569860, "link": "https://stackoverflow.com/questions/56569860/how-can-i-convert-octal-to-hexadecimal/56570180#56570180", "title": "How can I convert octal to hexadecimal?", "body": "<p>Since the concept of a radix only makes sense when describing the representation or output of a number, I'll assume you mean &quot;how can I convert between octal and hexadecimal <em>representations</em> of a number?&quot;</p>\n<p>Lucky for you, the <code>printf</code>-family functions are required by the C standard to include the format specifiers <code>%o</code> and <code>%x</code>, which represent &quot;octal number&quot; and &quot;hexadecimal number&quot;, respectively, so with <code>snprintf</code>, you could do this:</p>\n<pre><code>char buffer[100];\n\nsnprintf(buffer, 100, &quot;%X&quot;, 0777);\nprintf(&quot;%s\\n&quot;, buffer);\n\nsnprintf(buffer, 100, &quot;%o&quot;, 0xFFF);\nprintf(&quot;%s\\n&quot;, buffer);\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>1FF\n7777\n</code></pre>\n<p>Also, the <code>strtol</code>-family functions have a radix parameter for converting a string to a number:</p>\n<pre><code>int n;\n\nn = strtol(&quot;0777&quot;, NULL, 8);\nprintf(&quot;%d\\n&quot;, n);\n\nn = strtol(&quot;0x1FF&quot;, NULL, 16);\nprintf(&quot;%d\\n&quot;, n);\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>511\n511\n</code></pre>\n<p>With these building blocks you now possess the requisite knowledge to process input in the form of, and convert between, octal and hexadecimal representations of numeric values.</p>\n"}], "owner": {"reputation": 59, "user_id": 11595605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aqxVd.jpg?s=128&g=1", "display_name": "ManulMax", "link": "https://stackoverflow.com/users/11595605/manulmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "closed_date": 1560409446, "answer_count": 1, "score": -2, "last_activity_date": 1616816214, "creation_date": 1560371018, "last_edit_date": 1616815938, "question_id": 56569860, "link": "https://stackoverflow.com/questions/56569860/how-can-i-convert-octal-to-hexadecimal", "closed_reason": "Needs details or clarity", "title": "How can I convert octal to hexadecimal?", "body": "<p>How can I convert octal numbers to hexadecimal and hexadecimal to octal in C language?</p>\n"}, {"tags": ["c", "language-lawyer", "standards", "iso"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1560370589, "post_id": 56569636, "comment_id": 99718643, "body": "Probably not as many people as they want buy the standard:)."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1560370753, "post_id": 56569636, "comment_id": 99718703, "body": "Are you seriously asking for passwords to copyrighted material here?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1560371323, "post_id": 56569636, "comment_id": 99718930, "body": "@Broman: copyrighted material does not have to be locked down and for sale only. Most of the software we use everyday is copyrighted, but freely available. Why do other standard bodies such as ECMA publish their standards online for free download? Does it not seem obvious that the ISO, funded by governments, by definition a not for profit organisation, publish their standards under an Open document licence?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1560371446, "post_id": 56569636, "comment_id": 99718988, "body": "ECMA chooses to publish it standards freely. ISO doesn&#39;t. (I don&#39;t like it either.)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1560371567, "post_id": 56569636, "comment_id": 99719035, "body": "@KeithThompson: what is the decision process at ISO? Any idea on how to change this situation? Any data on the actual economics of selling the pdfs?"}, {"owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "edited": false, "score": 1, "creation_date": 1560371663, "post_id": 56569636, "comment_id": 99719066, "body": "That seems like a question out of the scope for StackOverflow."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "edited": false, "score": 2, "creation_date": 1560371857, "post_id": 56569636, "comment_id": 99719124, "body": "@Das_Geek: It seems on topic to me to find ways to make the ultimate reference for questions about the C language feely available."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1560372204, "post_id": 56569636, "comment_id": 99719243, "body": "I&#39;m voting to close this question as off-topic because it is not about programming as defined in the <a href=\"https://stackoverflow.com/help/on-topic\">guidelines</a>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1560373033, "post_id": 56569636, "comment_id": 99719562, "body": "In addition to not being about programming, this is not a practical, answerable question. This is a rhetorical question a.k.a. rant, and an invitation to an open-ended fruitless discussion. There is no chance anyone will let you know the password. There is no chance anyone  knows &quot;What can be done to bring this work to the public domain&quot; (where it most definitely does not belong)."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1560373104, "post_id": 56569636, "comment_id": 99719585, "body": "I think the question is ok, except for asking for passwords. I also think that it should be open, but it is the way it is, and sharing the password would be illegal."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1560374371, "post_id": 56569636, "comment_id": 99719967, "body": "When they charged $30-$60 for the PDF of the standard, I was happy to buy a copy.  When they charge $360 (or whatever the actual number is) for a standard, it is too expensive for me to justify buying it.  They&#39;ve shot themselves in the foot AFAIAC.  I&#39;d rather buy the standard, but it has to be at a sensible price \u2014 and $360 is not sensible for someone like me who is not writing a C compiler."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562104568, "post_id": 56569636, "comment_id": 100270824, "body": "How about <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2310.pdf\" rel=\"nofollow noreferrer\">this one</a> ? Looks like some C2x draft and it is open"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560370643, "post_id": 56569772, "comment_id": 99718653, "body": "Well, it appears that the drafts are protected as well."}, {"owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560370772, "post_id": 56569772, "comment_id": 99718712, "body": "@EugeneSh. The draft referenced in the question has already been finalized and published as of last year, so it&#39;s still consistent with my answer&#39;s information about the drafts being locked down after the official publication has been released."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1560371696, "post_id": 56569772, "comment_id": 99719080, "body": "@Das_Geek: This policy is recent. The drafts to the previous releases are not password protected."}], "tags": [], "owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "is_accepted": false, "score": 1, "last_activity_date": 1560370684, "last_edit_date": 1560370684, "creation_date": 1560370611, "answer_id": 56569772, "question_id": 56569636, "link": "https://stackoverflow.com/questions/56569636/why-are-the-documents-from-the-c-standard-working-group-password-protected/56569772#56569772", "title": "Why are the documents from the C Standard working group password protected?", "body": "<p>I would imagine that it's because they want you to <a href=\"https://www.iso.org/standard/74528.html\" rel=\"nofollow noreferrer\">pay for it</a>. Generally speaking only drafts of the standards are available, and even those become locked down after the completed version is published. Your comment about C++ being open is incorrect: the C++17 standard is <a href=\"https://www.iso.org/standard/68564.html\" rel=\"nofollow noreferrer\">for sale</a> on the ISO website, while the C++20 standard (not completed at the time of this writing) is <a href=\"https://github.com/cplusplus/draft\" rel=\"nofollow noreferrer\">available on GitHub</a>. From the <a href=\"https://isocpp.org/std/the-standard\" rel=\"nofollow noreferrer\">official webpage</a>:</p>\n\n<blockquote>\n  <p><strong>Q:</strong> Why are the C++ working materials freely available on GitHub when the standard must be purchased from ISO or another standards organization?</p>\n  \n  <p>ISO holds the copyright for all balloted and published versions of the C++ International Standard (IS) and related C++ Technical Specifications (TSes). The GitHub repo contains the incremental in-progress working source snapshots as they are edited, which may frequently be in an inconsistent in-progress state as edits are applied, and which does not contain the final source for any published standards.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1560521421, "post_id": 56570036, "comment_id": 99775661, "body": "Hi Jens, thank you for your answer, I understand this situation although I deeply regret it. The standards can be described as <i>collective work</i> by the members of the committee, who as far as I know are not paid for their contributions. Making the pdf of the C Standard freely available would be in the best interest of the C programming community. It does not mean ISO would stop selling it online or selling paper copies. I&#39;m curious how many of each are actually sold each year."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1560521991, "post_id": 56570036, "comment_id": 99775949, "body": "Regarding enrolling in the national standards body, I am willing to do that and it would probably mean the French one (AFNOR?). Can you share your own experience with me? You can find my details on my profile. Thank you."}, {"owner": {"reputation": 1072, "user_id": 2585413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KbWNE.jpg?s=128&g=1", "display_name": "nteissler", "link": "https://stackoverflow.com/users/2585413/nteissler"}, "edited": false, "score": 0, "creation_date": 1601406205, "post_id": 56570036, "comment_id": 113396599, "body": "Link to N2310 for the c-crusaders: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2310.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n2310.pdf</a>"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": true, "score": 10, "last_activity_date": 1560371898, "creation_date": 1560371898, "answer_id": 56570036, "question_id": 56569636, "link": "https://stackoverflow.com/questions/56569636/why-are-the-documents-from-the-c-standard-working-group-password-protected/56570036#56570036", "title": "Why are the documents from the C Standard working group password protected?", "body": "<p>The drafts are password protected when they contain only the material that has been or will potentially be published as the ISO standard itself. Because C17 was basically a bugfix release (no new material) this was unfortunately the case for most of the development phase of C17. </p>\n\n<p>But as soon as we switched to \"C2x mode\" the drafts are open. The first of these, N2310, is still pretty close to C17, so this could be a good base to work with. (And maybe this will draw more attention to the ongoing work on C2x, enroll in your national standards body to participate!)</p>\n\n<p>Whether or not this \"belongs in the public domain\" is certainly a matter of debade. ISO doesn't work like this, unfortunately, and there is not much that anybody can do. At this time, having their special international status, they <em>own</em> the copyright of the standard itself. But they do not own the work surrounding it, the papers that people present etc, so anybody who contributes might still get their credits.</p>\n"}], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "accepted_answer_id": 56570036, "answer_count": 2, "score": 6, "last_activity_date": 1560436334, "creation_date": 1560369942, "last_edit_date": 1560436334, "question_id": 56569636, "link": "https://stackoverflow.com/questions/56569636/why-are-the-documents-from-the-c-standard-working-group-password-protected", "title": "Why are the documents from the C Standard working group password protected?", "body": "<p>I just realized many of the recent pdfs on the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/\" rel=\"nofollow noreferrer\">C Standard working group</a> <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/wg14_document_log.htm\" rel=\"nofollow noreferrer\">archives</a> are now password protected! For example the latest draft of the C Standard aka C18 is <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2177.pdf\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>What prompted such a backwards move against common sense when C++, java, javascript and all recent programming languages are completely open! What is going on?</p>\n\n<p>I'm not asking if anyone knows the password, sharing it would be illegal anyway, but voiding access to the general public seems counterproductive, especially for students and programmers.</p>\n\n<p>What can be done to bring this work to the public domain where it belongs?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 1239, "user_id": 4452971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/og0oX.png?s=128&g=1", "display_name": "Castorix", "link": "https://stackoverflow.com/users/4452971/castorix"}, "edited": false, "score": 2, "creation_date": 1560375984, "post_id": 56569611, "comment_id": 99720453, "body": "Where is the <b>MOUSEEVENTF_LEFTUP</b> event ?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1560385229, "post_id": 56569611, "comment_id": 99722369, "body": "What mouse events do you expect it to process with the mouse button down without being released?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1560386343, "post_id": 56569611, "comment_id": 99722527, "body": "&quot;<i>... until i manually unlock the mouse</i>&quot; - and how are you doing that?"}], "owner": {"reputation": 79, "user_id": 1757350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0551cf966b35a32392a80dcf1ecda8f9?s=128&d=identicon&r=PG", "display_name": "mitch2na", "link": "https://stackoverflow.com/users/1757350/mitch2na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560369997, "creation_date": 1560369787, "last_edit_date": 1560369997, "question_id": 56569611, "link": "https://stackoverflow.com/questions/56569611/mouse-locking-after-mouseeventf-leftdown-sendinput", "title": "Mouse Locking After MOUSEEVENTF_LEFTDOWN SendInput", "body": "<p>I have been trying to toggle down and up the mouse to simulated dragging a window. The problem i have been noticing is that  when i call toggle down for too long (say maybe 200 milliseconds), it locks the mouse and doesn't process any other mouse events until i manually unlock the mouse. Is there something i can call in the code provided to prevent this?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    INPUT mouseInput;\n    mouseInput.type = INPUT_MOUSE;\n    mouseInput.mi.dx = 0;\n    mouseInput.mi.dy = 0;\n    mouseInput.mi.dwFlags = MOUSEEVENTF_LEFTDOWN;\n    mouseInput.mi.time = 0; //System will provide the timestamp\n    mouseInput.mi.dwExtraInfo = 0;\n    mouseInput.mi.mouseData = 0;\n    SendInput(1, &amp;mouseInput, sizeof(mouseInput));\n</code></pre>\n"}, {"tags": ["c", "opendaylight", "sdn", "mininet"], "comments": [{"owner": {"reputation": 9, "user_id": 11638743, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ImiIzGIfyvw/AAAAAAAAAAI/AAAAAAAAABo/fKvV5shVNxU/photo.jpg?sz=128", "display_name": "Amel Ouferhat", "link": "https://stackoverflow.com/users/11638743/amel-ouferhat"}, "edited": false, "score": 0, "creation_date": 1560449301, "post_id": 56569510, "comment_id": 99750477, "body": "@Shubha can you help please??"}, {"owner": {"reputation": 804, "user_id": 793712, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/TiKkA.png?s=128&g=1", "display_name": "Dr. Arslan", "link": "https://stackoverflow.com/users/793712/dr-arslan"}, "edited": false, "score": 0, "creation_date": 1561721136, "post_id": 56569510, "comment_id": 100166051, "body": "is it necessary in your case to use ODL or you can use any other SDN controller?"}, {"owner": {"reputation": 9, "user_id": 11638743, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ImiIzGIfyvw/AAAAAAAAAAI/AAAAAAAAABo/fKvV5shVNxU/photo.jpg?sz=128", "display_name": "Amel Ouferhat", "link": "https://stackoverflow.com/users/11638743/amel-ouferhat"}, "reply_to_user": {"reputation": 804, "user_id": 793712, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/TiKkA.png?s=128&g=1", "display_name": "Dr. Arslan", "link": "https://stackoverflow.com/users/793712/dr-arslan"}, "edited": false, "score": 0, "creation_date": 1561809870, "post_id": 56569510, "comment_id": 100188052, "body": "I have already started installing odl environment... but it is not necessary to use it .. i can use any other controller ."}, {"owner": {"reputation": 804, "user_id": 793712, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/TiKkA.png?s=128&g=1", "display_name": "Dr. Arslan", "link": "https://stackoverflow.com/users/793712/dr-arslan"}, "edited": false, "score": 0, "creation_date": 1561813686, "post_id": 56569510, "comment_id": 100188787, "body": "If you can use another controller then I can propose to use ryu controller. I am putting an answer for your help."}], "answers": [{"tags": [], "owner": {"reputation": 662, "user_id": 9174438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f269ed2d579bc64af29e37aaebb72b?s=128&d=identicon&r=PG&f=1", "display_name": "jamo", "link": "https://stackoverflow.com/users/9174438/jamo"}, "is_accepted": false, "score": -1, "last_activity_date": 1560453077, "creation_date": 1560453077, "answer_id": 56587153, "question_id": 56569510, "link": "https://stackoverflow.com/questions/56569510/how-to-make-openflow-switch-capable-of-marking-informations-on-the-id-field-of-i/56587153#56587153", "title": "How to make openflow switch capable of marking informations on the id field of ip packets?", "body": "<p>if you manage your switches with OpenDaylight, then you don't want to use iptables.\nyou can use the openflowplugin to write flows to the switch to do all you want. I\nthink you can have a match-all kind of flow that will have the action you require\nto \"mark ip packets\".</p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 793712, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/TiKkA.png?s=128&g=1", "display_name": "Dr. Arslan", "link": "https://stackoverflow.com/users/793712/dr-arslan"}, "is_accepted": false, "score": 0, "last_activity_date": 1561813983, "creation_date": 1561813983, "answer_id": 56817840, "question_id": 56569510, "link": "https://stackoverflow.com/questions/56569510/how-to-make-openflow-switch-capable-of-marking-informations-on-the-id-field-of-i/56817840#56817840", "title": "How to make openflow switch capable of marking informations on the id field of ip packets?", "body": "<p>I will recommend you to use <a href=\"https://osrg.github.io/ryu/\" rel=\"nofollow noreferrer\">Ryu controller</a> (a python based SDN controller). Regarding Queuing, packet marking and MPLS, you can check the <strong>chapter 12 QoS</strong> from the <a href=\"https://osrg.github.io/ryu-book/en/Ryubook.pdf\" rel=\"nofollow noreferrer\">Ryu Book</a>. There are detailed examples there. I hope it will work for you. </p>\n"}], "owner": {"reputation": 9, "user_id": 11638743, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ImiIzGIfyvw/AAAAAAAAAAI/AAAAAAAAABo/fKvV5shVNxU/photo.jpg?sz=128", "display_name": "Amel Ouferhat", "link": "https://stackoverflow.com/users/11638743/amel-ouferhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1561813983, "creation_date": 1560369231, "question_id": 56569510, "link": "https://stackoverflow.com/questions/56569510/how-to-make-openflow-switch-capable-of-marking-informations-on-the-id-field-of-i", "title": "How to make openflow switch capable of marking informations on the id field of ip packets?", "body": "<p>I'm still a beginner in SDN and all that comes with it (openflow, mininet, opendaylight...) and so if I say a mistake, please excuse my ignorance.\nSo my request is about marking ip packets by openflow switches: I want to intercept packets coming to switches (by iptables that will send packets in a nfqueue queue) so that the switch can then mark them with its own information (identifier, distance from destination...) on the id field of an ip packet.... this information is then collected by the destination to reconstruct the path taken by the packet.\nHow can I enable a switch to mark packets like this? what commands should I execute? what language to implement the process? Where should I access it?\nknowing that I have already implemented in C the marking process that works well in the traditional network (I tested it in a quagga router). can this code be useful to me for something in the mininet switches?\nthen if I don't use mininet, can OVS switch do the job? how?\nSorry, if I hadn't been more specific, but in anyway I'm here to answer any questions. I hope you can help me clear the way to get started.\nThank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1560368027, "post_id": 56569205, "comment_id": 99717508, "body": "In <code>clearField</code> you have a local var with same name as the parameter."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1560368071, "post_id": 56569205, "comment_id": 99717532, "body": "Also, in the <code>while</code>, you are not calling the functions, just declaring them. You want <code>clearField(board); printField(board);</code>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1560368186, "post_id": 56569205, "comment_id": 99717582, "body": "Also, your arrays should be chars: <code>&#39;1&#39;, &#39;2&#39;,</code> etc."}, {"owner": {"reputation": 21, "user_id": 10620210, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yGwsMSlfuoQ/AAAAAAAAAAI/AAAAAAAAGbo/NQCUrhFERbM/photo.jpg?sz=128", "display_name": "m004yu", "link": "https://stackoverflow.com/users/10620210/m004yu"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1560368214, "post_id": 56569205, "comment_id": 99717598, "body": "@JohnnyMopp Don&#39;t I have to include the local var in the parameter? Isn&#39;t that how you import stuff from function to function without using global variables?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1560368358, "post_id": 56569205, "comment_id": 99717674, "body": "If you pass <code>board</code> as a parameter, you don&#39;t have to redeclare it. <code>void clearField(char board[4][4]) {board[0][0] = &#39; &#39;; board[0][1] = &#39;0&#39;; .....}</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560374138, "post_id": 56569205, "comment_id": 99719903, "body": "Note that the <code>while</code> loop just declares two functions (<code>void clearField(char board[4][4]); void printField(char board[4][4]);</code>) \u2014 it does not call them (<code>clearField(board); printField(board);</code> would call them). The absence of a number or other symbol before the first comma in <code>char board[4][4]={{ ,0,1,2}\u2026</code> is wrong, too.  Since the code shown isn&#39;t an MCVE (<a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example?</a>) (or MRE or whatever name SO now uses; MCVE was good for over five years and it did not need changing), it&#39;s hard to know why the compiler&#39;s complaining."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1560490694, "post_id": 56569205, "comment_id": 99760997, "body": "why do you say you are not redeclaring when you are continously redeclaring things? you are declaring <code>char board[4][4]</code> as a parameter to function <code>clearField</code> and then again later in the body of the function as a local variable... each time you begin something with a type identifier <b>you are declaring something</b>.  Indeed, you are not calling your functions, but just declaring them."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1560368158, "creation_date": 1560368158, "answer_id": 56569243, "question_id": 56569205, "link": "https://stackoverflow.com/questions/56569205/error-value-redeclared-as-different-kind-of-symbol-even-though-its-never-b/56569243#56569243", "title": "&quot;error: &#39;value&#39; redeclared as different kind of symbol&quot; Even though it&#39;s never been redeclared", "body": "<p>Inside <code>clearField()</code>, you are indeed re-declaring the array with the same name as the argument, which makes no sense.</p>\n\n<p>If you intended to assign to the argument, which makes sense, you can't repeat it's type like that.</p>\n\n<p>Also, you cannot assign to arrays like that, most normal code would use either nested loops or a <code>memset()</code> call, I think.</p>\n\n<p>Other strangenesses include the non-quoted <code>N</code> and <code>n</code> that you compare <code>start</code> against, and the repeated pointless function declarations inside the <code>if</code>.</p>\n\n<p>It seems you really need to read up on basic C syntax and structure, you seem to want to repeat declarations when you actually need statements that do something (like calling a function).</p>\n"}], "owner": {"reputation": 21, "user_id": 10620210, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yGwsMSlfuoQ/AAAAAAAAAAI/AAAAAAAAGbo/NQCUrhFERbM/photo.jpg?sz=128", "display_name": "m004yu", "link": "https://stackoverflow.com/users/10620210/m004yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560368158, "creation_date": 1560367907, "last_edit_date": 1560367980, "question_id": 56569205, "link": "https://stackoverflow.com/questions/56569205/error-value-redeclared-as-different-kind-of-symbol-even-though-its-never-b", "title": "&quot;error: &#39;value&#39; redeclared as different kind of symbol&quot; Even though it&#39;s never been redeclared", "body": "<p>Doing an assignment to make a tic-tac-toe game, and this early I've hit a block.</p>\n\n<p>Compilers keeps hollering at me that my array has been redeclared as a different kind of symbol even though it's been declared as nothing but an array.</p>\n\n<p>As I am learning I hope this is an obvious fix.</p>\n\n<pre><code>    char board[4][4];\n    printf(\"Would you like to play a game of tic-tac-toe? (Y or N)\\n\");\n    scanf(\"%c\", &amp;start);\n    while(start!=N &amp;&amp; start!=n){\n        void clearField(char board[4][4]);\n        void printField(char board[4][4]);\n    }\n}\nvoid clearField(char board[4][4]){\n    char board[4][4]={{ ,0,1,2},{0,_,_,_},{1,_,_,_},{2,_,_,_}};\n}\n</code></pre>\n\n<p>Error is at the second to last line. \"board redeclared as different kind of symbol\". What gives?</p>\n"}, {"tags": ["c", "linux", "compiler-errors"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 3, "creation_date": 1560367630, "post_id": 56569115, "comment_id": 99717324, "body": "Never use any members of the <code>FILE</code> structure. Instead, use <code>fileno(stdin)</code>."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1560369957, "post_id": 56569115, "comment_id": 99718364, "body": "The <code>lio_number</code> argument is peculiar.  Can you show at least one example of the code that uses this function, please?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1560370019, "post_id": 56569115, "comment_id": 99718395, "body": "Where did you get this code from? It\u2019s written in an ancient style of C (and is non-portable)."}], "answers": [{"tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": true, "score": 4, "last_activity_date": 1560368650, "last_edit_date": 1560368650, "creation_date": 1560367679, "answer_id": 56569157, "question_id": 56569115, "link": "https://stackoverflow.com/questions/56569115/how-do-i-fix-struct-io-file-has-no-member-named-file/56569157#56569157", "title": "How do I fix &quot;&#39;struct _IO_FILE&#39; has no member named &#39;_file&#39;&quot;?", "body": "<p>Never use any members of the <code>FILE</code> structure.</p>\n\n<p>Use <code>fileno(stdin)</code> instead of <code>stdin-&gt;_file</code>.</p>\n\n<p>The member <code>_file</code> is a MinGW-specific name for the file descriptor, while <code>fileno</code> is a widely-supported POSIX-compliant function.</p>\n\n<p>Along with that, you may want to <code>#include &lt;unistd.h&gt;</code> instead of defining <code>isatty</code> explicitly.</p>\n\n<p>If you're limited to writing your code this way for some reason, don't expect it to be portable. Otherwise, this should work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nlong isatty_(long *lio_number)\n{\n        int file_desc;\n\n        if (*lio_number == 5)\n        {\n                file_desc = fileno(stdin);\n                return isatty(file_desc);\n        }\n        else\n        {\n                return 0;\n        }\n}\n</code></pre>\n\n<p>What this changes is that it includes <code>unistd.h</code> which provides a declaration for <code>isatty</code>, it includes the types of the arguments within the function definition, and it uses <code>fileno(stdin)</code> instead of <code>stdin-&gt;_file</code>, of which the former is much more portable. It also improves the formatting so others can read your code if they need to.</p>\n"}, {"tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 3, "last_activity_date": 1560369786, "last_edit_date": 1560369786, "creation_date": 1560368110, "answer_id": 56569231, "question_id": 56569115, "link": "https://stackoverflow.com/questions/56569115/how-do-i-fix-struct-io-file-has-no-member-named-file/56569231#56569231", "title": "How do I fix &quot;&#39;struct _IO_FILE&#39; has no member named &#39;_file&#39;&quot;?", "body": "<p>Modernize the code. The original seems to be targeting some ancient Unix. This should work on more recent POSIX-compliant systems, since virtually every such system should provide the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fileno.html\" rel=\"nofollow noreferrer\">fileno()</a> function. Changing the code to standard C is also a good idea.</p>\n\n<p>So use <code>fileno()</code>, include <code>&lt;unistd.h&gt;</code> instead of forward declaring <code>isatty()</code>, and use standard C function parameter declarations:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nlong isatty_(long *lio_number)\n{\n    if (*lio_number == 5)\n    {\n        return isatty(fileno(stdin));\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11634848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28564b25d6d6a88ede9a4421f9d11c62?s=128&d=identicon&r=PG&f=1", "display_name": "Kurtyy Islay", "link": "https://stackoverflow.com/users/11634848/kurtyy-islay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "accepted_answer_id": 56569157, "answer_count": 2, "score": 2, "last_activity_date": 1560373510, "creation_date": 1560367535, "last_edit_date": 1560373510, "question_id": 56569115, "link": "https://stackoverflow.com/questions/56569115/how-do-i-fix-struct-io-file-has-no-member-named-file", "title": "How do I fix &quot;&#39;struct _IO_FILE&#39; has no member named &#39;_file&#39;&quot;?", "body": "<p>I have a version of a program that used to compile to a <code>*.o</code> file, but now it does not, and gives a compiler error.</p>\n\n<p>I have tried to compile my code with gcc compiler on Linux, and the compile fails.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint isatty();\n\nlong isatty_(lio_number)\nlong *lio_number;\n{\n        int file_desc;\n\n        if ((*lio_number)==5)\n        {\n                file_desc = stdin-&gt;_file;\n                return isatty(file_desc);\n        }\n        else\n                return 0;\n}\n</code></pre>\n\n<p>I expect the command <code>gcc -c isatty.c</code> to yield <code>isatty.o</code> but it does not. Instead, I get this message:</p>\n\n<pre><code>isatty.c: In function \u2018isatty_\u2019:\nisatty.c:11: error: \u2018struct _IO_FILE\u2019 has no member named \u2018_file\u2019\n</code></pre>\n"}, {"tags": ["c", "pointers", "arm", "archlinux-arm"], "comments": [{"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1560366981, "post_id": 56568955, "comment_id": 99717059, "body": "you forgot to ask a question"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1560367227, "post_id": 56568955, "comment_id": 99717162, "body": "@OznOg question is how to solve this as my code has compiled in all other platforms except linux arm hf"}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 1, "creation_date": 1560367336, "post_id": 56568955, "comment_id": 99717199, "body": "Try to show some code.. hard to fix descriptions of errors"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1560367587, "post_id": 56568955, "comment_id": 99717309, "body": "@OznOg addr&gt;(void *)0XFFFE00000000 this is the one line code"}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1560367675, "post_id": 56568955, "comment_id": 99717344, "body": "well then give more context, what is addr, and where is the <code>;</code> ?"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1560368323, "post_id": 56568955, "comment_id": 99717658, "body": "@OznOg address is si_addr of a signal <a href=\"https://www.mkssoftware.com/docs/man5/siginfo_t.5.asp\" rel=\"nofollow noreferrer\">mkssoftware.com/docs/man5/siginfo_t.5.asp</a> and the code is if(addr&gt;(void *)0XFFFE00000000 )"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1560370518, "post_id": 56568955, "comment_id": 99718605, "body": "Comparing pointers for ordering doesn\u2019t make any sense except when both pointers point into the same array (and even then it\u2019s questionable at best). The ARM compiler is right to reject the code, and ideally other compilers would <i>also</i> reject it. The fix is to use equality comparison instead of less-than."}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "edited": false, "score": 0, "creation_date": 1560397911, "post_id": 56568955, "comment_id": 99724489, "body": "The problem here is my signal&#39;s address higher bytes is getting overwritten by 0XFFFE0 ,so I thought to check if the address is greater than this value,I will remove this offset,can you suggest how can I use equality comparison in my case"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1560399538, "post_id": 56568955, "comment_id": 99724776, "body": "@KonradRudolph I updated my comment"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1560419158, "post_id": 56568955, "comment_id": 99733257, "body": "@srinicx I\u2019m still not sure what you mean but would this solve it? <code>if ((((uintptr_t) addr) &amp; mask) == mask)\u00a0addr = (your_type *) (((uintptr_t) addr) &amp; ~ mask);</code> where <code>mask = 0xFFFE00000000</code>."}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1560425168, "post_id": 56568955, "comment_id": 99736553, "body": "@KonradRudolph In the working scenario, addr=0x12ab840 and in the non working scenario addr=0xfffe012ab840 , I am working on to remove  first 20 bits of the address i.e 0XFFFE0  if and only if the address is greater than 0XFFFE0000000"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1560430768, "post_id": 56568955, "comment_id": 99739913, "body": "@srinicx Yes, that is exactly what my previous comment does."}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1560437020, "post_id": 56568955, "comment_id": 99744099, "body": "@KonradRudolph Will check this and update,thanks"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1560530123, "post_id": 56568955, "comment_id": 99780197, "body": "@KonradRudolph uintptr_t mask=0XFFFE00000000;                if(((uintptr_t)addr &amp; mask) == mask &amp;&amp; uid==0)                {                  addr=(void *)((uintptr_t)addr &amp; ~mask);                                 } I used the code suggested by you but it fails in 32 bit machine as the size of void pointer(uintptr_t )is 32 bits,can I dynamically assign the mask based on bitness, for now I have defined conditional compilation for 64 bit  #if UINTPTR_MAX==0XFFFFFFFFFFFFFFFFULL #define  Build64 1 #endif"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1561106562, "post_id": 56568955, "comment_id": 99963606, "body": "@KonradRudolph Any thoughts on this how to make generic independent of bitness?"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "edited": false, "score": 0, "creation_date": 1561294039, "post_id": 56568955, "comment_id": 100008167, "body": "@KonradRudolphThe below code suggested by you does not left shift in 32 bits,so mask will be 0XFFFE. The problem is my address is 28-32 bits and for 32 bit if the lower two bytes of the address is  0XFFFE ,it would hit the if condition and mask the address which would again cause the issue. To be more clear about my issue,the offset is not happening in 32 bits ,and issue is happening in 64 bits randomly when higher 16 bits of the address is getting overwritten. Better approach would be to include macro for 64 bit,however I am not allowed to do so as the code has to be common for 32bit &amp;64 bit"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "edited": false, "score": 0, "creation_date": 1560369854, "post_id": 56569480, "comment_id": 99718329, "body": "Why I am checking this random address can be attributed to this question :<a href=\"https://stackoverflow.com/questions/56406841/while-return-si-addr-with-offset-from-sigwaitinfo-function-causing-segmentation?noredirect=1#comment99714415_56406841\" title=\"while return si addr with offset from sigwaitinfo function causing segmentation\">stackoverflow.com/questions/56406841/&hellip;</a>"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1560369076, "creation_date": 1560369076, "answer_id": 56569480, "question_id": 56568955, "link": "https://stackoverflow.com/questions/56568955/error-ordered-comparison-of-pointer-with-null-pointer-werror-extra/56569480#56569480", "title": "error: ordered comparison of pointer with null pointer [-Werror=extra]", "body": "<p>Probably the integer literal is overflowing into 32 bits, which becomes 0 or <code>NULL</code>.</p>\n\n<p>But you shouldn't go around comparing random (<code>void</code>) pointers for being greater than some random integer, anyway. Cast the pointer to <code>uintptr_t</code>, and make sure the literal is of a suitable type too, then it starts becoming more likely to work. There doesn't seem to be a <code>UINTPTR_C()</code> macro, but perhaps it makes sense to use <code>UINTMAX_C()</code>?</p>\n\n<p>Of course, if your unspecified \"ARM\" is 32-bit, then the address is way out of bounds and probably larger than the pointers will be ... quite confusing.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "edited": false, "score": 0, "creation_date": 1561205499, "post_id": 56700654, "comment_id": 99992800, "body": "I have asked my actual issue in other question why the signal is getting offset <a href=\"https://stackoverflow.com/questions/56406841/while-return-si-addr-with-offset-from-sigwaitinfo-function-causing-segmentation\" title=\"while return si addr with offset from sigwaitinfo function causing segmentation\">stackoverflow.com/questions/56406841/&hellip;</a>"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "edited": false, "score": 0, "creation_date": 1561293993, "post_id": 56700654, "comment_id": 100008161, "body": "The above code suggested by you does not left shift in 32 bits,so mask will be 0XFFFE. The problem is my address is 28-32 bits and for 32 bit if the lower two bytes of the address is  0XFFFE ,it would hit the if condition and mask the address which would again cause the issue. To be more clear about my issue,the offset is not happening in 32 bits ,and issue is happening in 64 bits randomly when higher 16 bits of the address is getting overwritten. Better approach would be to include macro for 64 bit,however I am not allowed to do so as the code has to be common for 32bit &amp;64 bit"}, {"owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "edited": false, "score": 0, "creation_date": 1561380077, "post_id": 56700654, "comment_id": 100032357, "body": "The user ID of the signal is changing to nobody(65534) hence the offset 0XFFFE"}], "tags": [], "owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "is_accepted": false, "score": 0, "last_activity_date": 1561109505, "creation_date": 1561109505, "answer_id": 56700654, "question_id": 56568955, "link": "https://stackoverflow.com/questions/56568955/error-ordered-comparison-of-pointer-with-null-pointer-werror-extra/56700654#56700654", "title": "error: ordered comparison of pointer with null pointer [-Werror=extra]", "body": "<p>Comparing the ordering of two pointers doesn\u2019t make sense except when both pointers point into the same array (and even then it\u2019s questionable at best; generally you\u2019d use inequality instead of ordering).</p>\n\n<p>Since your actual problem is</p>\n\n<blockquote>\n  <p>my signal's address higher bytes is getting overwritten by 0XFFFE0</p>\n</blockquote>\n\n<p>The first order of business is to find out why this is happening and whether it can be prevented: If an address gets overridden this indicates that there\u2019s something very wrong with the code, and that you should fix the root cause rather than the symptoms.</p>\n\n<p>That said, if all that\u2019s required is to zero out the higher, overridden bytes of your pointer, the portable way is to convert the pointer to an integer and manipulate <em>that</em>, rather than manipulating the pointer directly:</p>\n\n<pre><code>const uintptr_t mask_bytes = 0xFFFE;\nconst int mask_width = 4 * CHAR_BIT; // ?!\nconst uintptr_t mask = mask_bytes &lt;&lt; ((sizeof(uintptr_t) * CHAR_BIT) - mask_width);\n\nuintptr_t uaddr = (uintptr_t) addr;\n\nif ((uaddr &amp; mask) == mask) {\n    addr = (void*) (uaddr &amp; ~ mask);\n}\n</code></pre>\n\n<p>\u2026 substitute <code>void*</code> with your actual pointer type.</p>\n"}], "owner": {"reputation": 37, "user_id": 11586817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2f3b3a4603186ad6e99239e886f304?s=128&d=identicon&r=PG&f=1", "display_name": "scx", "link": "https://stackoverflow.com/users/11586817/scx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 56569480, "answer_count": 2, "score": -1, "last_activity_date": 1561109505, "creation_date": 1560366892, "last_edit_date": 1560367168, "question_id": 56568955, "link": "https://stackoverflow.com/questions/56568955/error-ordered-comparison-of-pointer-with-null-pointer-werror-extra", "title": "error: ordered comparison of pointer with null pointer [-Werror=extra]", "body": "<p>I am getting the below error in linux arm architecture when trying to compare  void pointer addr>(void *)0XFFFE00000000 .Here addr is of type void pointer error: ordered comparison of pointer with null pointer [-Werror=extra]</p>\n\n<p>This is happening only in Linux arm architecture,in other architecture it is working fine</p>\n\n<p>addr>(void *)0XFFFE00000000</p>\n\n<p>How to solve this?</p>\n"}, {"tags": ["c", "profiling", "profiler", "gprof"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11019779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21a519f7d86d6afcc7740c45f5c99f4?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Tavares", "link": "https://stackoverflow.com/users/11019779/matheus-tavares"}, "edited": false, "score": 0, "creation_date": 1560432491, "post_id": 56581565, "comment_id": 99741015, "body": "Perfect! I wasn&#39;t accounting for gcc optimizations. Re-compiling with <code>-O0</code> gives me the profiling I expected."}], "tags": [], "owner": {"reputation": 62, "user_id": 3422072, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1c5855c8e341e3e3d4bf73bd107cce7?s=128&d=identicon&r=PG&f=1", "display_name": "MrParrot", "link": "https://stackoverflow.com/users/3422072/mrparrot"}, "is_accepted": true, "score": 0, "last_activity_date": 1560432332, "creation_date": 1560432332, "answer_id": 56581565, "question_id": 56568219, "link": "https://stackoverflow.com/questions/56568219/gprof-output-shows-a-nonexistent-call-graph-edge/56581565#56581565", "title": "gprof output shows a nonexistent call graph edge", "body": "<p>Check if your code is being optimized by the compiler. If yes, then disable it by using -O0.</p>\n"}], "owner": {"reputation": 13, "user_id": 11019779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21a519f7d86d6afcc7740c45f5c99f4?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Tavares", "link": "https://stackoverflow.com/users/11019779/matheus-tavares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56581565, "answer_count": 1, "score": 1, "last_activity_date": 1560432332, "creation_date": 1560363607, "question_id": 56568219, "link": "https://stackoverflow.com/questions/56568219/gprof-output-shows-a-nonexistent-call-graph-edge", "title": "gprof output shows a nonexistent call graph edge", "body": "<p>I'm interested in profiling the function <code>grep_source_is_binary()</code>[1], whose code goes as following: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static int grep_source_is_binary(struct grep_source *gs,\n                 struct index_state *istate)\n{\n    grep_source_load_driver(gs, istate);\n    if (gs-&gt;driver-&gt;binary != -1)\n        return gs-&gt;driver-&gt;binary;\n\n    if (!grep_source_load(gs))\n        return buffer_is_binary(gs-&gt;buf, gs-&gt;size);\n\n    return 0;\n}\n</code></pre>\n\n<p>gprof's call graph gives me this information:</p>\n\n<pre><code>                0.00    1.58  304254/304254      grep_source_1 [6]\n[7]     72.9    0.00    1.58  304254         grep_source_is_binary [7]\n                0.01    1.20  304254/304254      show_line_header [8]\n                0.00    0.37  303314/607568      grep_source_load [15]\n\n</code></pre>\n\n<p>This seems weird to me, as <code>show_line_header()</code> is not called by <code>grep_source_binary()</code> nor any of its children. Am I misinterpreting gprof's output?</p>\n\n<p>[1]: at <a href=\"https://github.com/git/git/blob/master/grep.c#L2183\" rel=\"nofollow noreferrer\">https://github.com/git/git/blob/master/grep.c#L2183</a></p>\n"}, {"tags": ["c", "file", "fread"], "comments": [{"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 6, "creation_date": 1560363498, "post_id": 56568159, "comment_id": 99715595, "body": "time to check error codes, probably fp is null (BTW activating warnings at compile time would also point you some potential problems...)"}, {"owner": {"reputation": 735, "user_id": 11579184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206508738170662/picture?type=large", "display_name": "Gerardo Zinno", "link": "https://stackoverflow.com/users/11579184/gerardo-zinno"}, "edited": false, "score": 0, "creation_date": 1560364270, "post_id": 56568159, "comment_id": 99715911, "body": "You are reading 32 bytes, not 128"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1560371101, "post_id": 56568159, "comment_id": 99718831, "body": "Please don&#39;t repeat in the comment what is written in the code. It leads to what we see here: Comments with literals are almost always wrong. ;-)"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1560443117, "post_id": 56568159, "comment_id": 99747611, "body": "If any of these answer are helpful, please upvote them and/or accept them as the answer. Also, have you figured out the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 735, "user_id": 11579184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206508738170662/picture?type=large", "display_name": "Gerardo Zinno", "link": "https://stackoverflow.com/users/11579184/gerardo-zinno"}, "is_accepted": true, "score": 1, "last_activity_date": 1560364624, "creation_date": 1560364624, "answer_id": 56568478, "question_id": 56568159, "link": "https://stackoverflow.com/questions/56568159/cant-access-a-place-in-memory/56568478#56568478", "title": "can&#39;t access a place in memory", "body": "<p>It's because of the path. Make sure that <code>\"/path/to/myfiles/program1.ijvm\"</code> points to an existing file.\nYou should always check the return value of <code>fopen</code>. </p>\n\n<pre><code>\\\\Open read-only\nfp = fopen(binary, \"rb\");\nif(fp==NULL){\n    perror(\"problem opening the file\");\n    exit(EXIT_FAILURE);\n}\n\n</code></pre>\n\n<p>Notice also that you are reading 32 bytes in your buffer and not 128 as your comment says.</p>\n"}, {"comments": [{"owner": {"reputation": 735, "user_id": 11579184, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206508738170662/picture?type=large", "display_name": "Gerardo Zinno", "link": "https://stackoverflow.com/users/11579184/gerardo-zinno"}, "edited": false, "score": 2, "creation_date": 1560364963, "post_id": 56568507, "comment_id": 99716195, "body": "He should also close the file before returning"}, {"owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "edited": false, "score": 2, "creation_date": 1560364967, "post_id": 56568507, "comment_id": 99716197, "body": "Why must you initialize <code>fp</code> to <code>NULL</code>? What about things like <code>FILE *fp = fopen(&quot;&#47;foo&#47;bar&#47;baz.quux&quot;);</code>?"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "edited": false, "score": 0, "creation_date": 1560365736, "post_id": 56568507, "comment_id": 99716520, "body": "@EdwardMinnix Of course, you can do the open and assignment of fp on the same line."}, {"owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "edited": false, "score": 0, "creation_date": 1560365895, "post_id": 56568507, "comment_id": 99716570, "body": "@Chimera Then why <i>must</i> you set <code>fp</code> to NULL? As long as <code>fp</code> is <i>unconditionally</i> set to the result of <code>fopen(3)</code>, it shouldn&#39;t matter what it was initially bound to."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "edited": false, "score": 0, "creation_date": 1560366071, "post_id": 56568507, "comment_id": 99716654, "body": "@EdwardMinnix Did you read my answer where I said &quot;Also note, it&#39;s a good idea to initialize FILE *fp to NULL. On my machine, if I didn&#39;t do that and the file wasn&#39;t opened it would still crash.&quot;"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1560366346, "post_id": 56568507, "comment_id": 99716772, "body": "<code>fp</code> does not need to be initialised. It is set later before being used. This is Ok. If is was being used before being used that would be a problem"}, {"owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "edited": false, "score": 0, "creation_date": 1560366369, "post_id": 56568507, "comment_id": 99716785, "body": "@Chimera, yes but the second sentence of your answer is <i>Also, you must initialize <code>fp</code> to null. The following code is safe.</i> I am unsure if you are asserting if it is a <i>must</i> or a <i>should</i>. Also, I don&#39;t understand why it is unsafe to not initialize <code>fp</code> when you are immediately assigning it, especially since <code>man 3 fopen</code> states clearly that it will only be non-null if it was opened successfully. If you don&#39;t use it before assigning it, I don&#39;t see how that would be an issue."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1560366397, "post_id": 56568507, "comment_id": 99716797, "body": "@EdHeal That is what you would think. However. on my machine and compiler, if I don&#39;t initialize fp to null the program fails if the file isn&#39;t opened."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "edited": false, "score": 0, "creation_date": 1560366430, "post_id": 56568507, "comment_id": 99716812, "body": "@EdwardMinnix Ok, it&#39;s a should."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1560366524, "post_id": 56568507, "comment_id": 99716861, "body": "It&#39;s good practice to initialize all of your variables when you declare them, regardless."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1560366533, "post_id": 56568507, "comment_id": 99716863, "body": "Thought experiment <code>FILE *fp;</code> - <code>fp</code> can be anything. Program continues. Next time <code>fp</code> is used is here <code>fp = fopen....</code> - Now <code>fp</code> has a value. After this things are dangy is the value of <code>fp</code> is treated properly"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1560366577, "post_id": 56568507, "comment_id": 99716883, "body": "@EdHeal YES! That is how it <i>should</i> work. But that isn&#39;t what my compiler / std library DID."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1560366637, "post_id": 56568507, "comment_id": 99716902, "body": "Sorry but this statement <code>Also note, it&#39;s a good idea to initialize FILE *fp to NULL. On my machine, if I didn&#39;t do that and the file wasn&#39;t opened it would still crash.</code> is untrue.<code>fp</code> will be set to <code>NULL</code> in the event of not being able to open the file - as per the manual,"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1560366644, "post_id": 56568507, "comment_id": 99716908, "body": "@EdHeal Would  you like to see how my compiler/library failed that though experiment? I can show you."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1560366881, "post_id": 56568507, "comment_id": 99717009, "body": "@EdHeal I just redid my test. I must tested incorrectly. I just updated my answer. I thought it was weird that I&#39;d have to initialize fp. I don&#39;t know how I ran a bad test. :-("}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1560369172, "post_id": 56568507, "comment_id": 99718028, "body": "@Chimera - No worries - It happens to the best of us"}], "tags": [], "owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "is_accepted": false, "score": 1, "last_activity_date": 1560368713, "last_edit_date": 1560368713, "creation_date": 1560364768, "answer_id": 56568507, "question_id": 56568159, "link": "https://stackoverflow.com/questions/56568159/cant-access-a-place-in-memory/56568507#56568507", "title": "can&#39;t access a place in memory", "body": "<p>You <em>must</em> check the return result from <code>fopen()</code>.</p>\n\n<p>I'm assuming  you are getting the segfault in the <code>fread()</code> call because your data file doesn't exist, or couldn't be opened, and you are trying to work on a NULL FILE structure.</p>\n\n<p>See the following safe code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n#define SIZE_BUFFER      32\n\nint main()\n{\n   char *binary = \"data.txt\";\n   FILE *fp = NULL;\n   char buffer[SIZE_BUFFER];\n\n   // Open read-only\n   fp = fopen(binary, \"rb\");\n\n   // Read SIZE_BUFFER bytes into buffer\n   if( fp )\n   {\n        printf(\"Elements read %ld\\n\", fread (buffer, sizeof(char), SIZE_BUFFER, fp));\n        fclose(fp);\n   }\n   else\n   {\n        // Use perror() here to show a text description of what failed and why\n        perror(\"Unable to open file: \");\n   }\n   return 0;\n }\n</code></pre>\n\n<p>When I execute this code it doesn't crash and will print the number of elements read if the file is opened or it will print \"Unable to open file\" if the file could not be opened.</p>\n\n<p>As mentioned in the comments you should also close the file being exiting. Another thing you can do is the following:</p>\n\n<pre><code>FILE *fp = fopen(.....);\n</code></pre>\n\n<p>Instead of declaring and assigning in two separate steps.</p>\n"}, {"comments": [{"owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "edited": false, "score": 0, "creation_date": 1560365612, "post_id": 56568571, "comment_id": 99716478, "body": "But he has <code>char binary[32]</code> declared, not <code>binary[30]</code>"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1560365663, "post_id": 56568571, "comment_id": 99716496, "body": "The buffer size is NOT the problem. It&#39;s exactly the size of the number of bytes being read. Most certainly the issue is the file isn&#39;t being open leaving fp null."}, {"owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "edited": false, "score": 1, "creation_date": 1560366647, "post_id": 56568571, "comment_id": 99716910, "body": "thanks EdwardMinnix and Chimera for your comments. He edited his code after I posted my comments, hence this discrepancy or confusion. Earlier it was something like &#39;char *buffer = &quot;/path/to/myfiles/program1.ijvm&quot; which is also mentioned in the other answer to this question by gerardo"}], "tags": [], "owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "is_accepted": false, "score": 0, "last_activity_date": 1560367951, "last_edit_date": 1560367951, "creation_date": 1560365110, "answer_id": 56568571, "question_id": 56568159, "link": "https://stackoverflow.com/questions/56568159/cant-access-a-place-in-memory/56568571#56568571", "title": "can&#39;t access a place in memory", "body": "<p>There are two possible reasons</p>\n\n<ol>\n<li>The <code>fopen(3)</code> function failed due to some reason, which means <code>fp</code> is NULL, and then you are trying to use the null-pointer in <code>fread(3)</code>. This can crash. @OznOg has already given a subtle hint to look into this direction.</li>\n<li>If the <code>fopen</code> call is a success (i.e. <code>fp</code> is non-NULL after calling <code>fopen</code>), the code can still crash because you are reading 32 chars into the variable <code>binary</code>, while <code>binary</code> has been initialized with only 30 chars.</li>\n</ol>\n"}], "owner": {"reputation": 47, "user_id": 10506530, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3RwV19VRJ8c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW-FKUlEarwTZyeY6lMrjdqpwh9_Q/mo/photo.jpg?sz=128", "display_name": "Umar Sheikh Salem", "link": "https://stackoverflow.com/users/10506530/umar-sheikh-salem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 56568478, "answer_count": 3, "score": 1, "last_activity_date": 1560368713, "creation_date": 1560363377, "last_edit_date": 1560363543, "question_id": 56568159, "link": "https://stackoverflow.com/questions/56568159/cant-access-a-place-in-memory", "title": "can&#39;t access a place in memory", "body": "<p>I'm trying to read a binary file of 32 bytes in C, however I'm keep getting \"segmentation fault (code dumped)\" when I run my program, \nit would be great if somebody can help me out by pointing where did I go wrong?.\nmy code is here below:</p>\n\n<pre><code>int main()\n{\n\n\n   char *binary = \"/path/to/myfiles/program1.ijvm\";\n   FILE *fp;\n   char buffer[32];\n\n   // Open read-only\n   fp = fopen(binary, \"rb\");\n\n   // Read 128 bytes into buffer\n   fread (buffer, sizeof(char), 32, fp);\n\n\n\n   return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "internals"], "comments": [{"owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 1, "creation_date": 1560363310, "post_id": 56568109, "comment_id": 99715504, "body": "Yes, for static (global) variables, not for auto (stack) variables. But still, it&#39;s so fast that it doesn&#39;t matter."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1560363390, "post_id": 56568109, "comment_id": 99715542, "body": "It still needs to load the address of the data into the right memory location or copy the data to said memory location, so <code>mov</code> instructions are needed anyway, even if the actual data is stored in the executable."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560363429, "post_id": 56568109, "comment_id": 99715565, "body": "Are you talking about automatic or static variables?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1560363937, "post_id": 56568109, "comment_id": 99715776, "body": "<a href=\"https://godbolt.org/z/Zf3Hjr\" rel=\"nofollow noreferrer\">godbolt.org/z/Zf3Hjr</a>; As you can see, there&#39;s a <code>mov</code> instruction, but the value <code>1234</code> is stored right in the executable as an immediate value."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1560364001, "post_id": 56568109, "comment_id": 99715806, "body": "Your example <a href=\"https://godbolt.org/z/HgJyxp\" rel=\"nofollow noreferrer\">compiles to nothing</a>, i.e. it&#39;s just <code>foo: ret</code> (if you enable optimizations)."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1560370096, "post_id": 56568109, "comment_id": 99718434, "body": "<a href=\"https://stackoverflow.com/questions/56530702/where-does-initialized-auto-variables-local-variables-placed-in-object-file\">Near duplicate.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 4, "last_activity_date": 1560364338, "creation_date": 1560364338, "answer_id": 56568399, "question_id": 56568109, "link": "https://stackoverflow.com/questions/56568109/when-initializing-variables-in-c-does-the-compiler-store-the-intial-value-in-the/56568399#56568399", "title": "When initializing variables in C does the compiler store the intial value in the executable", "body": "<p>A compiler is not <em>required</em> to do either of them. As long as the behavior of the program stays the same it can pretty much do whatever it wants.</p>\n\n<p>Especially when using optimization, crazy stuff can happen. Looking at the assembly code after heavy optimization can be confusing to say the least.</p>\n\n<p>In your example, both the constant <code>1234</code> and the variable <code>c</code> would be optimized away since they are not used.</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560364635, "post_id": 56568455, "comment_id": 99716055, "body": "&quot;Yes&quot; is not an answer to an either/or question."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1560364803, "post_id": 56568455, "comment_id": 99716122, "body": "Who&#39;s asking what a compiler is? In any case, a compiler may put a value into a known location and reference that location in the code--no moving or loading beyond loading the program required."}, {"owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560366098, "post_id": 56568455, "comment_id": 99716666, "body": "@melpomene: thanks for your good remark. I&#39;ve edited my response based on that. Could you please check?"}, {"owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1560366319, "post_id": 56568455, "comment_id": 99716761, "body": "@DaveNewton,.Yes, a common agreement of the word &#39;compiler&#39; is essential because too often new programmers confuse compilers with some magical software that runs/executes computer programs. If you don&#39;t believe, then take up teaching programming for those who are learning their first programming language.As an expert, could you please show examples of all the systems where C is used to show that processor directly dereferences some memory location, without loading the memory address into some register? loading address + dereferencing = 2 instructions (now re-read my answer)"}, {"owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560366392, "post_id": 56568455, "comment_id": 99716795, "body": "@melpomene, could you please elaborate why it is wrong?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1560370428, "post_id": 56568455, "comment_id": 99718570, "body": "It is imprecise, in many points wrong, part of it is not related and it is very hard to understand what you mean . Deserves a lots of dv"}, {"owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "edited": false, "score": 0, "creation_date": 1560373114, "post_id": 56568455, "comment_id": 99719588, "body": "@P__J__40, simply making some statement that &quot;it&#39;s difficult to understand&quot; and then listing your conclusion saying that it deserves &#39;lots of dv i.e. down votes&quot; doesn&#39;t help anyone other than probably you. If you didn&#39;t understand something then please ask a clarification question through comments,"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1560373851, "post_id": 56568455, "comment_id": 99719807, "body": "@ARD I already teach programming. The OP is asking a question about compilers; IMO it&#39;s clear they already know what one is.You specifically said: &quot;the init value has to be somehow pushed to the given/assigned address [...]&quot;. This is not always the case; values can be compiled into an executable directly with zero initialization required."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1560373961, "post_id": 56568455, "comment_id": 99719844, "body": "@ARD I.e., there does not <i>need</i> to be an explicit assembly call to set the initial value of a variable, even if there often is. <i>Using</i> that variable may require additional instructions (although that may be intra-CPU)."}, {"owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "edited": false, "score": 0, "creation_date": 1560375371, "post_id": 56568455, "comment_id": 99720261, "body": "@newton, please do start providing real world examples or references in support of the the generic points that you make about C , otherwise it&#39;s like having some debate on a possible scientific stuff such as &quot;can Earth&#39;s orbit be shifted a bit further when the sun goes into red Giant mode? Yes/no, please explain&quot; kind of wonderful question in which you DV me for no substainted reason, and I up vote you for a very right reason"}], "tags": [], "owner": {"reputation": 48, "user_id": 11579707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/251deac0d938d0d3deb300539991a969?s=128&d=identicon&r=PG&f=1", "display_name": "ARD", "link": "https://stackoverflow.com/users/11579707/ard"}, "is_accepted": false, "score": -8, "last_activity_date": 1560365695, "last_edit_date": 1592644375, "creation_date": 1560364526, "answer_id": 56568455, "question_id": 56568109, "link": "https://stackoverflow.com/questions/56568109/when-initializing-variables-in-c-does-the-compiler-store-the-intial-value-in-the/56568455#56568455", "title": "When initializing variables in C does the compiler store the intial value in the executable", "body": "<p>Firstly, its important to have a common understanding of the word 'compiler', else we can end-up arguing endlessly.</p>\n<p>In simple words,</p>\n<blockquote>\n<p>a compiler is a computer program that translates computer code written\nin one programming language (the source language) into another\nprogramming language (the target language). The name compiler is\nprimarily used for programs that translate source code from a\nhigh-level programming language to a lower level language (e.g.,\nassembly language, object code, or machine code) to create an\nexecutable program.</p>\n</blockquote>\n<p>(Ref: <a href=\"https://en.wikipedia.org/wiki/Compiler\" rel=\"nofollow noreferrer\">Wikipedia</a>)</p>\n<p>With this common understanding, let's now find answer you question: The answer is  'yes, the final code contains explicit assembly call to set it to an initial value' for any kind of variables. It is so because finally the variables are either stored in some memory location, or they live in some CPU register in case the number of variables are so less that the variable can be accommodated into some CPU registers such as your code snippet running on lets say most modern servers (Side note: different systems have different number of registers).</p>\n<p>For the variables that are stored in registers, there has to be a mov (or equivalent) kind of instruction to load that initial value into the register. Without such an instruction the assigned register cannot be assigned with the intended value.</p>\n<p>For the variables that are stored in memory, depending on the architecture and the compiler efficiency, the init value has to be somehow pushed to the given/assigned address, which takes at least a couple of asm instructions.</p>\n<p>Does this answer your question?</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 3, "last_activity_date": 1560369948, "last_edit_date": 1560369948, "creation_date": 1560365715, "answer_id": 56568699, "question_id": 56568109, "link": "https://stackoverflow.com/questions/56568109/when-initializing-variables-in-c-does-the-compiler-store-the-intial-value-in-the/56568699#56568699", "title": "When initializing variables in C does the compiler store the intial value in the executable", "body": "<p>If it's a variable with <strong>static lifetime</strong>, it'll typically become part of the executable's static image, which'll get <code>memcpy</code>'ed, along with other statically known data, into the process's allocated memory when the process is started/loaded.</p>\n\n<pre><code>void take_ptr(int*);\n\nvoid static_lifetime_var(void)\n{\n    static int c = 1234;\n    take_ptr(&amp;c);\n}\n</code></pre>\n\n<p><em>x86-64 assembly from gcc -Os:</em></p>\n\n<pre><code>static_lifetime_var:\n        mov     edi, OFFSET FLAT:c.1910\n        jmp     take_ptr\nc.1910:\n        .long   1234\n</code></pre>\n\n<p>If it's <strong>unused</strong>, it'll typically vanish:</p>\n\n<pre><code>void unused(void)\n{\n    int c = 1234;\n}\n</code></pre>\n\n<p><em>x86-64 assembly from gcc -Os:</em></p>\n\n<pre><code>unused:\n        ret\n</code></pre>\n\n<p>If it is used, it may not be necessary to put it into the function's frame (its local variables on the stack)\u2014it might be possible to directly embed it into an assembly instruction, or \"use it as <strong>an immediate</strong>\":</p>\n\n<pre><code>void take_int(int);\n\nvoid used_as_an_immediate(int d) \n{\n  int c = 1234;\n  take_int(c*d);\n}\n</code></pre>\n\n<p><em>x86-64 assembly from gcc -Os:</em></p>\n\n<pre><code>used_as_an_immediate:\n        imul    edi, edi, 1234\n        jmp     take_int\n</code></pre>\n\n<p>If it is <strong>used as a true local</strong>, it'll need to be loaded into stack-allocated space:</p>\n\n<pre><code>void take_ptr(int*);\n\nvoid used(int d)\n{\n  int  c = 1234;\n  take_ptr(&amp;c);\n}\n</code></pre>\n\n<p><em>x86-64 assembly from gcc -Os:</em></p>\n\n<pre><code>used:\n        sub     rsp, 24\n        lea     rdi, [rsp+12]\n        mov     DWORD PTR [rsp+12], 1234\n        call    take_ptr\n        add     rsp, 24\n        ret\n</code></pre>\n\n<p>When pondering these things <a href=\"https://gcc.godbolt.org/z/WXDwBv\" rel=\"nofollow noreferrer\">Compiler Explorer</a> along with some <a href=\"https://github.com/vsergeev/apfcp\" rel=\"nofollow noreferrer\">basic knowledge of assembly</a> are your friends.</p>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 0, "last_activity_date": 1560372815, "creation_date": 1560372815, "answer_id": 56570216, "question_id": 56568109, "link": "https://stackoverflow.com/questions/56568109/when-initializing-variables-in-c-does-the-compiler-store-the-intial-value-in-the/56570216#56570216", "title": "When initializing variables in C does the compiler store the intial value in the executable", "body": "<p>TL;DR: Your examples declares and initializes an automatic variable. It has to be initialized each time the function is called. So there will be some instruction to do this.</p>\n\n<hr>\n\n<p>As an adjusted duplicate of my answer to <a href=\"https://stackoverflow.com/questions/56512652/how-compile-time-initialization-of-variables-works-internally-in-c/56513223#56513223\">How compile time initialization of variables works internally in c?</a>:</p>\n\n<p>The standard defines no exact way of initialization. It depends on the environment your code is developed and run on.</p>\n\n<p>How variables are initialized depends also on their storage duration. You didn't mention it in the text, your example is an automatic variable. (Which is most probably optimized away, as commenters point out.)</p>\n\n<p><strong>Initialized automatic variables</strong> will be written each time their declaration is reached. The compiled program executes some machine code for this to happen.</p>\n\n<p><strong>Static variables</strong> are always intialized and only once before the program startup.</p>\n\n<p>Examples from the real world:</p>\n\n<p>Most (if not all) PC systems store the initial values of explicitly (and not zero-) initialized static variables in a special section called <code>data</code> that is loaded by the system's loader to RAM. That way those variables get their values before the program startup. Static variables not explicitly initialized or with zero-like values are placed in a section <code>bss</code> and are filled with zeroes by the startup code before program startup.</p>\n\n<p>Many embedded systems have their program in non-volatile memory that can't be changed. On such systems the startup code copies the initial values of the section <code>data</code> into its allocated space in RAM, producing a similar result. The same startup code zeroes also the section <code>bss</code>.</p>\n\n<p><em>Note 1: The sections don't have to be named liked this. But it is common.</em></p>\n\n<p>This startup code might be part of the compiled program, or might not. It depends, see above. But speaking of efficience it doesn't matter which program initializes variables. It just has to be done.</p>\n\n<p><em>Note 2: There are more kinds of storage duration, please see chapter 6.2.4 of the standard.</em></p>\n\n<p>As long as the standard is met, a system is free to implement any other kind of initialization, including writing the initial values into their variables step by step.</p>\n"}], "owner": {"reputation": 22394, "user_id": 242042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a798a3d661375ece15776f83fbb80c2c?s=128&d=identicon&r=PG", "display_name": "Archimedes Trajano", "link": "https://stackoverflow.com/users/242042/archimedes-trajano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 56568699, "answer_count": 4, "score": 2, "last_activity_date": 1560372815, "creation_date": 1560363156, "last_edit_date": 1560363713, "question_id": 56568109, "link": "https://stackoverflow.com/questions/56568109/when-initializing-variables-in-c-does-the-compiler-store-the-intial-value-in-the", "title": "When initializing variables in C does the compiler store the intial value in the executable", "body": "<p>When <a href=\"https://stackoverflow.com/questions/7975008/initializing-variables-in-c\">Initializing variables in C</a> I was wondering does the compiler make it so that when the code is loaded at run time the value is already set OR does it have to make an explicit assembly call to set it to an initial value?</p>\n\n<p>The first one would be slightly more efficient because you're not making a second CPU call just to set the value.</p>\n\n<p>e.g.</p>\n\n<pre><code>void foo() {\n  int c = 1234;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1560361898, "post_id": 56567803, "comment_id": 99714869, "body": "Have you considered using <code>fgets()</code>? Watch out for the retained newline at the back end."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1560361922, "post_id": 56567803, "comment_id": 99714886, "body": "Not sure... But why do you need to <i>read</i> this string from input? Your only input as I understand is <code>k</code>. What you <i>might</i> want to use here is <code>sprintf</code>. But I would think of a better algorithmic solution"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1560361985, "post_id": 56567803, "comment_id": 99714909, "body": "string[21] = &#39;5&#39;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1560362026, "post_id": 56567803, "comment_id": 99714921, "body": "If you ony need the input for <code>int k</code> you can use <code>int ret = scanf(&quot;%d&quot;, &amp;k);</code> in C."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1560362095, "post_id": 56567803, "comment_id": 99714952, "body": "Your question is unclear to me. Do you need to generate the <i>entire</i> string of numbers - or just <i>change</i> a single digit? Something else?"}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560362107, "post_id": 56567803, "comment_id": 99714963, "body": "@Eugene I&#39;m reading only k,  but I&#39;m storing it into  an array. Later on,  I&#39;m printing the k-th element..."}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 1, "creation_date": 1560362134, "post_id": 56567803, "comment_id": 99714976, "body": "@David only the k-th element"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1560362188, "post_id": 56567803, "comment_id": 99715002, "body": "@NehalSamee: Where does the original string come from?"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1560362490, "post_id": 56567803, "comment_id": 99715148, "body": "@NehalSamee: It&#39;s still not clear to me I&#39;m afraid. Your definition of the required inputs, outputs and variables is ill-defined as far as I can discern."}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 1, "creation_date": 1560362570, "post_id": 56567803, "comment_id": 99715180, "body": "@David added source..now?"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1560370028, "post_id": 56567803, "comment_id": 99718399, "body": "@NehalSamee: This is really a question of algorithm design rather than a question specific to the C language or strings.  Have you tried solving the problem with a pen and paper? Knowledge of string manipulation in C is not needed for this."}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "edited": false, "score": 1, "creation_date": 1560363496, "post_id": 56568129, "comment_id": 99715593, "body": "Awesome...undersrood! Now,  what should I do in case of overflow?? @gsamaras"}, {"owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "edited": false, "score": 0, "creation_date": 1560363715, "post_id": 56568129, "comment_id": 99715698, "body": "I tried the algorithm you mentioned.. It came to my mind readily...but it gives time limit exceeded for larger values like 21"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "edited": false, "score": 0, "creation_date": 1560363723, "post_id": 56568129, "comment_id": 99715700, "body": "I guess go algorithmic @NehalSamee! That was just a thought I had, I didn&#39;t really think that over... :) But that&#39;s another question. :)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 0, "last_activity_date": 1560363563, "last_edit_date": 1560363563, "creation_date": 1560363247, "answer_id": 56568129, "question_id": 56567803, "link": "https://stackoverflow.com/questions/56567803/storing-generated-integers-into-an-array-to-produce-a-string/56568129#56568129", "title": "Storing generated integers into an array to produce a string", "body": "<p>The equivalent of what you describe in C++, to C, is the following complete example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define SIZE 1024\n\nint main(void)\n{\n  int k;\n  scanf(\"%d\", &amp;k);  // read input\n\n  char str[SIZE] = {0};\n  char generated_str[SIZE] = {0};\n\n  for(int i = 1; i &lt;= k; i++)\n  {\n    sprintf(str, \"%d\", i);        // convert int to string\n    strcat(generated_str, str);   // append current term to the overall string\n  }\n\n  printf(\"%s\\n\", generated_str);\n  printf(\"%c\\n\", generated_str[k - 1]);\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>123456789101112131415161718192021\n5\n</code></pre>\n\n<p>Note: Probably there is an algorithmic method to do that though.. Think about the number of digits every number has. Then think about of how you can use the modulo and the division operators (by 10) to get what you need from a number. After that, you should go and have fun.</p>\n"}, {"tags": [], "owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "is_accepted": false, "score": 0, "last_activity_date": 1560374399, "creation_date": 1560374399, "answer_id": 56570507, "question_id": 56567803, "link": "https://stackoverflow.com/questions/56567803/storing-generated-integers-into-an-array-to-produce-a-string/56570507#56570507", "title": "Storing generated integers into an array to produce a string", "body": "<p>As I mentioned in my comment, this is more a question of algorithm design than C programming or string-handling. Perhaps the easiest way to approach it is to imagine the string as consisting of several 'blocks' of numbers.</p>\n\n<ul>\n<li>block 1 consists of the numbers 1 - 9 and starts at offset 0</li>\n<li>block 2 contains numbers 10 - 99 and starts at offset 9</li>\n<li>block 3 contains numbers 100 - 999 and starts at offset 189</li>\n<li>etc.</li>\n</ul>\n\n<p>Because we know the offset of each block, we can compute the offset <em>within a block</em> that the global offset <code>k</code> corresponds to.</p>\n\n<p>E.g., if <code>k = 207</code>, we know the relevant digit must begin in block 3 (number range <code>100</code> to <code>999</code>), and that its offset within this block is <code>207 - 189 = 8</code>. Since each number within this block has 3 digits, offset 8 must correspond to the third number in the block - i.e <code>102</code>. And since the remainder of 8 divided by 3 is 2, we know we are looking for the third digit in this number (indices begin at 0).</p>\n\n<p>A picture would help to explain this - but it's late, so ...</p>\n\n<p>In code ...</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static char find_kth_digit(int k) {\n    int offset = 0;        // Global offset\n    int block_length = 0;  // Length of current 'block'\n    int offset_inner = 0;  // Offset within current block\n    // Power to which 10 is currently raised\n    int l = 1;\n    int start = 1, end = 10;  // start / end of current block\n    char digit = '0';         // result\n\n    if (k == 0) { \n        return -1;\n    }\n\n    // Our indices start at 0 - while the question demands they begin at 1.\n    k--;\n\n    while (l &lt; 5) {  // Only required to go up to k = 10000\n        end = start * 10;\n        offset_inner = k - offset;\n        // How many digits overall in the current block of numbers?\n        block_length = l * (end - start);\n        // Update global offset\n        offset = offset + block_length;\n        // Is k within these block?\n        if (k &lt; offset) {\n            int n = start + offset_inner / l;\n            int d = offset_inner % l;\n            return kth_digit_from_end_of_n(n, l - d);\n        }\n        l++;\n        start = end;\n    }\n\n    if (l == 5) {\n        return -1;\n    }\n\n    return digit;\n}\n</code></pre>\n\n<p>A helper to find a particular digit within a number ...</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static char kth_digit_from_end_of_n(int n, int k) {\n    char c = '0';\n    while (k--) {\n        c = n % 10;\n        n /= 10;\n    }\n    return c + '0';\n}\n</code></pre>\n\n<p>Note that - internally - the algorithm uses indices starting at 0, while the question you linked to expects indices starting at 1. Hence the need to decrement the offset before the main <code>while()</code> loop:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>k--;\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 10532707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nyxOb.jpg?s=128&g=1", "display_name": "Nehal Samee", "link": "https://stackoverflow.com/users/10532707/nehal-samee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 56568129, "answer_count": 2, "score": 0, "last_activity_date": 1560374399, "creation_date": 1560361744, "last_edit_date": 1560362710, "question_id": 56567803, "link": "https://stackoverflow.com/questions/56567803/storing-generated-integers-into-an-array-to-produce-a-string", "title": "Storing generated integers into an array to produce a string", "body": "<p>I've seen a problem,  where it is told that there is a string which consists of numbers like  <strong>\"123456789101112131415...k\"</strong>,  where k is an input from user. <strong>k</strong> is the only input here.  The string is generated based on the input.  Suppose I enter 11. The string would be <strong>\"1234567891011\"</strong>.  It is told to generate the <em>k-th</em> element of string . \nFor example,  for k=21,  output would be 5. </p>\n\n<p>In C++,  I can actually create a string type array and store integers from a for loop into it via <strong>to_string</strong> function.  But,  I'm actually at a loss how to do it in C.  The only thing I know of scanning a string into an array is :</p>\n\n<pre><code>scanf(\" %[^\\n]\", array); \n</code></pre>\n\n<p><strong>source:</strong> : <a href=\"https://codeforces.com/problemset/problem/1177/A\" rel=\"nofollow noreferrer\">https://codeforces.com/problemset/problem/1177/A</a></p>\n\n<p>I'm new in C.  Any help would be appreciated... </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1560360899, "post_id": 56567578, "comment_id": 99714419, "body": "You could have an <code>else *ch++ = &#39; &#39;;</code> Also please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is <code>while ( !feof (file) )</code> always wrong?</a>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1560361036, "post_id": 56567578, "comment_id": 99714472, "body": "You&#39;re only leaving characters where <code>isalpha</code> returns true. So it will remove numbers and spaces as well."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1560361296, "post_id": 56567578, "comment_id": 99714588, "body": "Ah, I just noticed... <code>isalnum()</code> is what you need. But if you want consecutive non-alphanum characters replaced with a <b>single</b> space, you&#39;ll need another variable to keep track of that."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1560361583, "post_id": 56567578, "comment_id": 99714723, "body": "Why doesn&#39;t the expected result include <code>1</code> and <code>2</code> from the beginning of each line? Are those not really part of the file?"}, {"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 1, "creation_date": 1560361997, "post_id": 56567578, "comment_id": 99714913, "body": "Your expected output is inserting a space for the first &#39;(&#39; but not for the closing &#39;)&#39;?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 0, "creation_date": 1560362355, "post_id": 56567578, "comment_id": 99715076, "body": "@MichaelBianconi it appears that a <b>single</b> space is required for any number of consecutive non-alphanum characters. There is only one space before the <code>&#39;f&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1560361888, "post_id": 56567605, "comment_id": 99714864, "body": "Replacing symbols with space characters would not produce the expected output the OP presented."}], "tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": false, "score": -1, "last_activity_date": 1560361437, "last_edit_date": 1560361437, "creation_date": 1560360852, "answer_id": 56567605, "question_id": 56567578, "link": "https://stackoverflow.com/questions/56567578/remove-punctuation-from-characters-in-c/56567605#56567605", "title": "Remove punctuation from characters in C", "body": "<p>You're shifting elements left when you reach a symbol. Try replacing symbols with <code>' '</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3525, "user_id": 10927863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OYbxO.jpg?s=128&g=1", "display_name": "Eliahu Aaron", "link": "https://stackoverflow.com/users/10927863/eliahu-aaron"}, "is_accepted": true, "score": 1, "last_activity_date": 1560364469, "last_edit_date": 1560364469, "creation_date": 1560364101, "answer_id": 56568341, "question_id": 56567578, "link": "https://stackoverflow.com/questions/56567578/remove-punctuation-from-characters-in-c/56568341#56568341", "title": "Remove punctuation from characters in C", "body": "<p>I updated your <code>chip_punct</code> function to give the desired result.</p>\n\n<ol>\n<li>I call <code>isalnum</code> to check for alphanumeric - letters and numbers. <code>isalpha</code> checks only for letters.</li>\n<li>I use a flag <code>addSpace</code> to remember if last char was not a alphanumeric. Then, before adding a char, I check if a space needs to be added.</li>\n<li>I remember the first <code>ch</code> position with <code>ch0</code> to avoid adding a space at the beginning.</li>\n</ol>\n\n<pre><code>void chip_punct(char *ch) {\n    int addSpace = 0; // Flag if need to add space\n    char *ch0 = ch; // Remember first position\n    for (char *p = ch; *p; ++p)\n    {\n        if (isalnum(*p)) // Check if char is alphanumeric\n        {\n            if (addSpace &amp;&amp; ch &gt; ch0) // Check if need to add space\n                *ch++ = ' ';\n            *ch++ = *p;\n            addSpace = 0;\n        }\n        else\n            addSpace = 1;\n    }\n    *ch = '\\0';\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 g7 h 8 zs892 fd sa\n</code></pre>\n\n<p>The lack of a space between <code>zs89</code> and <code>2</code> from the next line is because the <code>main</code> prints them with no space. You can change that by adding a space: <code>printf(\"%s \", ch);</code> </p>\n"}], "owner": {"reputation": 3, "user_id": 7336845, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xmp58dt486o/AAAAAAAAAAI/AAAAAAAAAhA/-q_hRBXn6-A/photo.jpg?sz=128", "display_name": "dbz", "link": "https://stackoverflow.com/users/7336845/dbz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 56568341, "answer_count": 2, "score": -1, "last_activity_date": 1560449334, "creation_date": 1560360722, "last_edit_date": 1560449334, "question_id": 56567578, "link": "https://stackoverflow.com/questions/56567578/remove-punctuation-from-characters-in-c", "title": "Remove punctuation from characters in C", "body": "<p>I have a text file called <code>adc.txt</code>, and I'm trying to read the characters and remove all punctuation inside.</p>\n\n<p>The file <code>adc.text</code>: </p>\n\n<pre><code>*1. g7 h(8) zs89';\n2. ;';fd(sa\n</code></pre>\n\n<p>The actual result was:</p>\n\n<pre><code>ghzsfdsa\n</code></pre>\n\n<p>What I expected was: </p>\n\n<pre><code>g7 h 8 zs89 fd sa\n</code></pre>\n\n<p>Any suggestion?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>void chip_punct(char *ch){\n    for(char *p = ch; *p; ++p)\n        if(isalpha(*p))\n            *ch++ = *p;\n    *ch = '\\0';\n}\n\nint main(void){\n    FILE *fp;\n    char ch[1024];\n    size_t pos =0;\n\n    fp = fopen(\"adc.txt\", \"r\");\n    if(fp != NULL){\n        while(!feof(fp)){\n            fgets(ch, sizeof(ch), fp);\n            chip_punct(ch);\n            printf(\"%s\", ch);\n        }\n    }\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "types"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 4, "creation_date": 1560359198, "post_id": 56567215, "comment_id": 99713693, "body": "An array is not a pointer. It will decay to a pointer to its first element when used as a value. Also, taking the address of an array gives a pointer to the first element of that array, not a pointer to some memory location with the address of the first element o the array. Make sure that your warnings are turned on, because <code>int **ptr2 = &amp;p;</code> should cause some since you&#39;re assigning an <code>int *</code> to an <code>int **</code>."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1560359340, "post_id": 56567215, "comment_id": 99713761, "body": "<code>&amp;p</code> is the same as <code>p</code> in this case"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 1, "creation_date": 1560359602, "post_id": 56567215, "comment_id": 99713872, "body": "@alinsoar The value may be the same, but the <b>type</b> is not."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5522185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c04b40ca6400196bae1016259432dd22?s=128&d=identicon&r=PG&f=1", "display_name": "Darklink9110", "link": "https://stackoverflow.com/users/5522185/darklink9110"}, "edited": false, "score": 0, "creation_date": 1560359863, "post_id": 56567326, "comment_id": 99713974, "body": "So in the case of doing something like int * p = (int*)malloc(sizeof(int)*3); Then p would be of type pointer to int and in this case int **ptr = &amp;p would work? Its strange because in that case p would act like an array but it wouldn&#39;t have that type."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 165, "user_id": 5522185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c04b40ca6400196bae1016259432dd22?s=128&d=identicon&r=PG&f=1", "display_name": "Darklink9110", "link": "https://stackoverflow.com/users/5522185/darklink9110"}, "edited": false, "score": 0, "creation_date": 1560360114, "post_id": 56567326, "comment_id": 99714089, "body": "Indeed, yopu can do that as well."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560362355, "post_id": 56567326, "comment_id": 99715077, "body": "Why do you claim it&#39;s not useful to take the address of an array?  It might not be appropriate <i>for some particular purpose</i>, but that doesn&#39;t mean there is <i>no</i> purpose for it."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560362699, "post_id": 56567326, "comment_id": 99715234, "body": "@John OK, it was a turn of phrase. In C the type of &quot;pointer to array&quot; isn&#39;t generally <i>very</i> useful, compared to a pointer to the elements."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1560363094, "post_id": 56567326, "comment_id": 99715416, "body": "I suspect people who work with (<i>bona fide</i>) multi-dimensional arrays would disagree.  Pointers to arrays arise naturally and are very useful in that context.  I&#39;d be prepared to accept that applying the address-of operator to an array is rarely what one really wants to do, but that&#39;s about array usage, not about the resulting pointer type."}], "tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1560362812, "last_edit_date": 1560362812, "creation_date": 1560359598, "answer_id": 56567326, "question_id": 56567215, "link": "https://stackoverflow.com/questions/56567215/pointer-to-integer-array-versus-double-pointer-to-integer/56567326#56567326", "title": "Pointer to Integer Array versus Double Pointer to Integer", "body": "<p>As you have discovered, you can take the address of an array. the type of that is a generally not very useful \"pointer to specific array type\", not a generic pointer to pointer to content. </p>\n\n<p>If you must, you can create a pointer that is equivalent to the array, and then take the address of that:</p>\n\n<pre><code>int p[] = {1,2,3};\nint *q=p;\nint **r=q;\n</code></pre>\n\n<p>But there is no way to shortcut this step, and you are dependent on the lifetime of that intermediate pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": true, "score": 2, "last_activity_date": 1560360599, "creation_date": 1560360599, "answer_id": 56567550, "question_id": 56567215, "link": "https://stackoverflow.com/questions/56567215/pointer-to-integer-array-versus-double-pointer-to-integer/56567550#56567550", "title": "Pointer to Integer Array versus Double Pointer to Integer", "body": "<blockquote>\n  <p>I would have thought that an integer array is of type pointer to integer, </p>\n</blockquote>\n\n<p>It is not. Arrays <em>decays</em> to pointers in many common circumstances, but they are not the same.</p>\n\n<blockquote>\n  <p>so that would mean that a pointer to an integer array is of type double pointer to integer.</p>\n</blockquote>\n\n<p>No it is not.</p>\n\n<blockquote>\n  <p>why doesn't ptr2 work as expected?</p>\n</blockquote>\n\n<p><code>ptr2</code> is a pointer that contains the address of the array <code>p</code>. Dereferencing this with <code>*ptr2</code> would give the first element in <code>p</code>. Dereferencing this again would use the first element in <code>p</code> as an address, and give the value at that address. </p>\n\n<p>This is why you should read the warnings from your compiler. Even without the flags <code>-Wall</code> and <code>-Wextra</code> (which you always should use) this code emits this warning:</p>\n\n<pre><code>k.c:6:16: warning: initialization of \u2018int **\u2019 from incompatible pointer type \u2018int (*)[3]\u2019 [-Wincompatible-pointer-types]\n   int **ptr2 = &amp;p;\n                ^\n</code></pre>\n\n<p>There you have it in plain text. <code>int **</code> is not compatible with <code>int(*)[3]</code> </p>\n\n<p>Always read compiler warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1560370559, "last_edit_date": 1560370559, "creation_date": 1560361345, "answer_id": 56567709, "question_id": 56567215, "link": "https://stackoverflow.com/questions/56567215/pointer-to-integer-array-versus-double-pointer-to-integer/56567709#56567709", "title": "Pointer to Integer Array versus Double Pointer to Integer", "body": "<p>While the innermost dimension of a multidimensional array in C readily converts to a pointer:</p>\n\n<pre><code>char (*p)[2][3][4]= //&lt;pointer to an array of 2 or array of 3 of array of 4 char\n    (char[5/*&lt;- this one decays to a ptr*/][2][3][4]){0};\n    //^array 5 of array 2 of arry 3 of array 4 of char\n    ;\n</code></pre>\n\n<p>arrays and pointers are <em>very</em> different in C despite the confusingly identical syntax for indexing and dereferencing (which are both two sides of the same coin as: <code>x[index]</code> is the same as <code>*(x+index)</code> or <code>index[x]</code>).</p>\n\n<p>I think this is a part of C where if you don't have context, the idea that the language maps directly to assembly breaks down most apparently.</p>\n\n<p>Compare</p>\n\n<pre><code>char a[1][1][1][1]={{{{'a'}}}}; //1 byte\nchar ****b = &amp;(char***){&amp;(char**){&amp;(char*){&amp;(char){'b'}}}}; //1byte+4*ptr_sz\n</code></pre>\n\n<p>and now the code that <a href=\"https://gcc.godbolt.org/z/SofEhd\" rel=\"nofollow noreferrer\"><code>****a</code> generates vs what <code>****b</code> generates</a>:</p>\n\n<pre><code>char get_a_char(void)\n{\n    return ****a;\n}\nchar get_b_char(void)\n{\n    return ****b;\n}\n</code></pre>\n\n<p>x86-64:</p>\n\n<pre><code>get_a_char:\n        mov     al, BYTE PTR a[rip]\n        ret\nget_b_char:\n        mov     rax, QWORD PTR b[rip]\n        mov     rax, QWORD PTR [rax]\n        mov     rax, QWORD PTR [rax]\n        mov     rax, QWORD PTR [rax]\n        mov     al, BYTE PTR [rax]\n        ret\n</code></pre>\n\n<p>When you dereference a multiply indirect pointer (<code>b</code>), you get a pointer chase.</p>\n\n<p>When you dereference/subscript a multidimensional array, then your subscripts (zeros if you're just dereferencing) and the dimensions of the array are used to calculate an offset from a base, so you eventually either get an offsetted pointer (the same pointer if you're just derefing, just with a different type) if you deref/subscript through <em>just some</em> of the dimensions, or the same followed by a fetch from that address if you deref/subscript through all of them.</p>\n\n<p>In your case <code>ptr</code> is <code>int (*)[3]</code> -- a pointer to an array of 3 int but <code>ptr2</code> is <code>int**</code> -- a pointer to a pointer to int.</p>\n\n<p>When you do <code>ptr2[1][2]</code> you add 1 pointer size, fetch a pointer from there, and then add 2 int (target type) sizes to the fetched pointer\nand fetch from there.</p>\n\n<p>That's very different from when you do <code>ptr[1][2]</code> in which case you add one <code>int[3]</code> size to the base pointer and then 2 int sizes and fetch from there (a total of 1 fetch).</p>\n\n<p>The types of <code>ptr</code> obviously cannot be compatible with the type of <code>ptr2</code>.</p>\n"}], "owner": {"reputation": 165, "user_id": 5522185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c04b40ca6400196bae1016259432dd22?s=128&d=identicon&r=PG&f=1", "display_name": "Darklink9110", "link": "https://stackoverflow.com/users/5522185/darklink9110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 56567550, "answer_count": 3, "score": 3, "last_activity_date": 1560370559, "creation_date": 1560359141, "question_id": 56567215, "link": "https://stackoverflow.com/questions/56567215/pointer-to-integer-array-versus-double-pointer-to-integer", "title": "Pointer to Integer Array versus Double Pointer to Integer", "body": "<p>I would have thought that an integer array is of type pointer to integer, so that would mean that a pointer to an integer array is of type double pointer to integer. But the results that I am getting say otherwise. I have suspicion that the type integer array is not of type pointer to integer.</p>\n\n<p>Here is my example:</p>\n\n<pre><code>int main(){\n  int p[3]={1,2,3};\n  int (*ptr)[3] = &amp;p;\n  int **ptr2 = &amp;p;\n\n  printf(\"%d\\n\",(*ptr)[0]);\n  printf(\"%d\\n\",**ptr2);\n  return 0;\n}\n</code></pre>\n\n<p><strong>p</strong> is of type 3 element integer array. </p>\n\n<p><strong>&amp;p</strong> is of type pointer to 3 element integer array. </p>\n\n<p><strong>ptr</strong> is of type pointer to 3 element integer array.</p>\n\n<p><strong>ptr2</strong> is of type double pointer to integer</p>\n\n<p>So my question is, if an integer array is a pointer to integer, why doesn't <strong>ptr2</strong> work as expected? Is the type double pointer to integer different from the type pointer to integer array? Any help clearing this up for me would be appreciated. Thank you!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560358947, "post_id": 56567141, "comment_id": 99713565, "body": "Not sure what exactly you are trying to calculate, but it sounds that the result is overflowing the <code>int</code> type."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1560359274, "post_id": 56567141, "comment_id": 99713725, "body": "Rewriting the<code>while()</code>loops into <code>for()</code> loops would make the thing more readable."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1560359495, "post_id": 56567141, "comment_id": 99713825, "body": "you should separate the loop <code>while(numlen &gt; 0)</code> in a distinct function and provide an eloquent name for this function -- <code>check_digits_09</code> for example -- to make things clearer about what you tru to do"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560359756, "post_id": 56567141, "comment_id": 99713927, "body": "Anyway, I would go with the opposite approach - generate all of the numbers composed of <code>9</code>s and <code>0</code>s and check which one is divisible by the input."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1560361600, "post_id": 56567141, "comment_id": 99714727, "body": "Your way to compute the multiples of <i>n</i> is wrong, this is why the result is not correct for 23 etc, see my answer"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1560373887, "post_id": 56567141, "comment_id": 99719818, "body": "OT:  When the parameters to <code>main()</code> are not going to be used, either: 1) use the signature: <code>int main( void )</code>  or 2) the first two lines in the body should be: <code>(void)argc;</code> and <code>(void)argv</code>"}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 1, "last_activity_date": 1560364933, "last_edit_date": 1560364933, "creation_date": 1560361500, "answer_id": 56567747, "question_id": 56567141, "link": "https://stackoverflow.com/questions/56567141/why-is-this-code-not-working-when-i-use-23-as-input/56567747#56567747", "title": "Why is this code not working when i use 23 as input?", "body": "<p>Your way to compute the multiples of <em>n</em> doing <code>n = n * i/(i-1);</code> is wrong, so for at least 23 you imagine you find a multiple of 23 composed of 0 and 9 but that number is not a multiple of 23.</p>\n\n<p>A corrected version from your proposal checking the multiple of <em>n</em> up to a solution can be :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  int n;\n\n  if ((scanf(\"%d\", &amp;n) == 1) &amp;&amp; (n &gt; 0)) {\n    int multn;\n\n    for (multn = n; ; multn += n) {\n      /* only 9 and 0 ? */\n      int j;\n\n      for (j = multn; j &gt; 0; j /= 10) {\n        int digit = j % 10;\n\n        if ((digit != 0) &amp;&amp; (digit != 9))\n          break;\n      }\n      if (j == 0)\n        /* only 9 and 0 ! */\n        break;\n    }\n\n    printf(\"%d -&gt; %d (remainder = %d)\\n\", n, multn, multn%n);\n  }\n}\n</code></pre>\n\n<p>Compilation and executions:</p>\n\n<pre><code>pi@raspberrypi:/tmp $ gcc -pedantic -Wall -Wextra m.c\npi@raspberrypi:/tmp $ ./a.out\n1\n1 -&gt; 9 (remainder = 0)\npi@raspberrypi:/tmp $ ./a.out\n2\n2 -&gt; 90 (remainder = 0)\npi@raspberrypi:/tmp $ ./a.out\n3\n3 -&gt; 9 (remainder = 0)\npi@raspberrypi:/tmp $ ./a.out\n23\n23 -&gt; 990909 (remainder = 0)\npi@raspberrypi:/tmp $ ./a.out\n32\n32 -&gt; 900000 (remainder = 0)\npi@raspberrypi:/tmp $ ./a.out\n11111111\n11111111 -&gt; 99999999 (remainder = 0)\npi@raspberrypi:/tmp $ ./a.out\n12345678\n12345678 -&gt; 9900900 (remainder = 9900900)\npi@raspberrypi:/tmp $ \n</code></pre>\n\n<p>Note : the last try produces an overflow (<em>int</em> are on 32b) and the result is wrong, but there is no guaranty the program ends in case of an overflow.</p>\n"}], "owner": {"reputation": 45, "user_id": 11638173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48331bf8c14e9ded5ff8f2c571a6bbb6?s=128&d=identicon&r=PG&f=1", "display_name": "francesco signorini", "link": "https://stackoverflow.com/users/11638173/francesco-signorini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 56567747, "answer_count": 1, "score": 2, "last_activity_date": 1560490205, "creation_date": 1560358830, "question_id": 56567141, "link": "https://stackoverflow.com/questions/56567141/why-is-this-code-not-working-when-i-use-23-as-input", "title": "Why is this code not working when i use 23 as input?", "body": "<p>The goal of the code is to find the smallest possible multiple composed of only 9s and 0s of a positive integer. Don't know why it works for all numbers smaller than 23 but not 23. All help is appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char * argv[]){\n    int n, check, i, numlen, j, digit;\n    i = 2;\n    check = 0;\n\n    scanf(\"%d\", &amp;n);\n\n    while(check == 0){\n        numlen = 0;\n        n = n * i/(i-1);\n        j = n;\n        while(j &gt; 0){\n            j /= 10;\n            numlen++;\n        }\n        j = n;\n        while(numlen &gt; 0){\n            digit = j % 10;\n            j = j / 10;\n            numlen --;\n            check = 1;\n            if (!(digit == 0 || digit == 9)){\n                numlen = 0;\n                check = 0;\n            }\n        }\n        i ++;\n    }\n    printf(\"%d\\n\", n);\n}\n</code></pre>\n"}, {"tags": ["c", "pic", "microchip", "pic32"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1560359104, "post_id": 56567056, "comment_id": 99713647, "body": "This seems to be specific to your specific operating environment and implementation, as you don&#39;t seem to be using any of the standard C or POSIX timer interfaces.  Nevertheless, I&#39;m suspicious that you may have a misconception about the timer resolution.  No timer interface I&#39;ve dealt with defines timer ticks to correspond to single clock cycles, and some do not even promise to provide single-tick resolution."}, {"owner": {"reputation": 11, "user_id": 749511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66bcbae201a9f77a92f60d7db6f082db?s=128&d=identicon&r=PG", "display_name": "Patrick Ayers", "link": "https://stackoverflow.com/users/749511/patrick-ayers"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560360322, "post_id": 56567056, "comment_id": 99714159, "body": "I am using MPLAB X and a PICKit 3 to program the microcontroller. I had sourced the information to write this code from here <a href=\"https://www.youtube.com/watch?v=bu6TTZHnMPY\" rel=\"nofollow noreferrer\">youtube.com/watch?v=bu6TTZHnMPY</a>"}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1560405698, "post_id": 56567056, "comment_id": 99726471, "body": "show you config Bits and the oszillator setting. Is the PIC rreally running at 80MHz? I guess not. With PR = 20000 you should measure 250Hz and not 500 Hz."}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "reply_to_user": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1560534931, "post_id": 56567056, "comment_id": 99782154, "body": "@Mike 80MHz is the upper bound for SYSCLK on this PIC32"}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1560749362, "post_id": 56567056, "comment_id": 99822821, "body": "of course the PIC32 could run at 80 MHz but I guess in would not in your application. Therefore I ask for the config Bits."}], "owner": {"reputation": 11, "user_id": 749511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66bcbae201a9f77a92f60d7db6f082db?s=128&d=identicon&r=PG", "display_name": "Patrick Ayers", "link": "https://stackoverflow.com/users/749511/patrick-ayers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560358514, "creation_date": 1560358514, "question_id": 56567056, "link": "https://stackoverflow.com/questions/56567056/trouble-getting-uno32-to-run-timer-1-interrupt-at-expected-frequency", "title": "Trouble getting Uno32 to run timer 1 interrupt at expected frequency", "body": "<p>I have been trying to set up Timer 1 on my pic32mx320f128h based development board (Uno32 by Digilent). The clock speed is supposed to be 80MHz which should mean each clock cycle takes 12.5ns. a 500Hz signal should take 2,000,000ns. By that logic this is 160,000 clock cycles. I decided to use prescalar of 8 so that the 16bit timer 1 does not roll over. This should mean the timer hits a value of 20,000 for a 500Hz frequency. </p>\n\n<p>However on my oscilloscope I measure a much lower frequency of only 1.57Hz</p>\n\n<p>If i change the prescalar to 1, the speed increaes as expected to 1.57x8 =12.56Hz. However if I then lower PR1 by half to 9999, the speed does not exactly double resulting in only 25.2Hz</p>\n\n<p>I must be missing something here, can anyone guide me on what I might try?</p>\n\n<p>I have tried adjusting the priority levels, and using non multi vectored interrupts to no avail.I have also tried using timer 2 with similar speed issues.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;xc.h&gt;\n#include &lt;plib.h&gt;\n\n#define TICKS_PER_SECOND 80000000 //80MHz\n\n#define PIN2_TRIS TRISDbits.TRISD8\n#define PIN2_BIT PORTDbits.RD8\n#define PIN2_LAT LATDbits.LATD8\n\n#define PIN3_TRIS TRISDbits.TRISD0\n#define PIN3_BIT PORTDbits.RD0\n#define PIN3_LAT LATDbits.LATD0\n\n#define PINA0_TRIS TRISBbits.TRISB2\n#define PINA0_BIT PORTBbits.RB2\n#define PINA0_LAT LATBbits.LATB2\n\nint8_t pwmActive = 0;\n\n\nvoid __ISR(_TIMER_1_VECTOR, IPL5SOFT) Timer1ISR(void){\n\n    PIN3_LAT = ~PIN3_LAT;\n\n    IFS0bits.T1IF = 0; //set timer 1 int flag back to off\n}\n\nint main(int argc, char** argv) {\n\n\n\n//    PIN2_TRIS = 1;\n//    PINA0_TRIS = 1;\n//    \n//    PIN3_LAT = 0;\n\n\n    INTDisableInterrupts();\n    T1CONbits.TCKPS = 1; //prescale 8\n    T1CONbits.TCS = 0; //80MHz internal source\n    PR1 = 19999; //500Hz period\n    TMR1 = 0; //start timer at 0\n    T1CONbits.ON = 1; //start the timer\n\n    IPC1bits.T1IP = 5; //int priority 5\n    IPC1bits.T1IS = 0; //sub int priority 0\n    IFS0bits.T1IF = 0; //set timer 1 int flag off\n    IEC0bits.T1IE = 1; //enable interrupt for timer 1\n    INTEnableSystemMultiVectoredInt();\n\n\n    PIN3_TRIS = 0;\n\n    while(1){\n\n    }\n\n    return (EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>I expect to get a 500Hz square wave toggled on pin 3 but instead the frequency is much much lower at 1.57Hz</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 6, "creation_date": 1560358019, "post_id": 56566922, "comment_id": 99713128, "body": "Consider isolating the function call from printf?"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 2, "creation_date": 1560358192, "post_id": 56566922, "comment_id": 99713192, "body": "Running tests where n = 10 is going to tell you more about unpredictable scheduling and cache behavior than it will tell you anything about the code under test. Try something like n = 10^9."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 2, "creation_date": 1560358227, "post_id": 56566922, "comment_id": 99713209, "body": "the time you measure is far too small to be meaningful.. considere looooong runs"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1560359063, "post_id": 56566922, "comment_id": 99713626, "body": "And when benchmarking, always build with optimizations enabled."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 1, "creation_date": 1560359135, "post_id": 56566922, "comment_id": 99713664, "body": "BTW, you are expecting a time unit in seconds here when your test is far faster than a second, thus the result is just noise"}, {"owner": {"reputation": 171, "user_id": 7799945, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wJ03VF1fydg/AAAAAAAAAAI/AAAAAAAAAPk/aHxe2gE2oTw/photo.jpg?sz=128", "display_name": "aaron", "link": "https://stackoverflow.com/users/7799945/aaron"}, "edited": false, "score": 0, "creation_date": 1560359295, "post_id": 56566922, "comment_id": 99713738, "body": "thanks, all; everything above makes a lot of sense. Almost too much sense. Almost as if I should have thought a little bit harder about it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560402793, "post_id": 56566922, "comment_id": 99725565, "body": "Incidentally, you could show that the speed is coincidental by (1) reversing the order of the two calls, or (2) repeating the same call twice, or (3) repeating the other call twice, or (4) running the whole lot in a loop to get repeated timings.  You would probably find that the first call is slow and the others are faster.  I recommend trying to use more than one value to search for (so different code paths are executed), and make sure you do something with the result, such as accumulate it, so the compiler can&#39;t optimize the code away."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560402873, "post_id": 56566922, "comment_id": 99725582, "body": "It might also be a possibility that one of the functions is laid out in memory in a more preferential location than the other.  That is less likely to be the issue, though."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1560358985, "post_id": 56566977, "comment_id": 99713583, "body": "You were the first to spot the reason, and I took inspiration from your answer. Have an upvote for good feelings."}], "tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": true, "score": 3, "last_activity_date": 1560358593, "last_edit_date": 1560358593, "creation_date": 1560358175, "answer_id": 56566977, "question_id": 56566922, "link": "https://stackoverflow.com/questions/56566922/why-do-these-two-identical-functions-have-wildly-different-execution-times/56566977#56566977", "title": "Why do these two identical functions have wildly different execution times?", "body": "<p>You are measuring the time of printing as well.  You should not count the time of execution of <code>printf</code>.</p>\n\n<pre><code>  clock_t begin_old = clock();\n  int val = binsearch_old(x, v, n);\n  clock_t end_old = clock();\n  printf(\"\\nbinsearch_old :: position: %i\\n\", val);\n  double time_spent_old = (double)(end_old - begin_old) / CLOCKS_PER_SEC;\n  printf(\"time spent old: %f\\n\", time_spent_old);\n</code></pre>\n\n<p>If you do not count so then you should ask yourself <code>why does printf have different times for similar calls ?</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1560358486, "creation_date": 1560358486, "answer_id": 56567049, "question_id": 56566922, "link": "https://stackoverflow.com/questions/56566922/why-do-these-two-identical-functions-have-wildly-different-execution-times/56567049#56567049", "title": "Why do these two identical functions have wildly different execution times?", "body": "<p>The \"warming up\" of all the necessary functionality to implement <code>print</code> is not-inconsiderable. Step through the C runtime library source code to see for yourself. So the first call you make to <code>printf</code> will commonly be slower than subsequent calls.</p>\n\n<p>The calls to <code>printf</code> you make are within the timings, which is an error in your implementation.</p>\n\n<p>Removing the <code>printf</code> call from the timings will par the result.</p>\n"}], "owner": {"reputation": 171, "user_id": 7799945, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wJ03VF1fydg/AAAAAAAAAAI/AAAAAAAAAPk/aHxe2gE2oTw/photo.jpg?sz=128", "display_name": "aaron", "link": "https://stackoverflow.com/users/7799945/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 56566977, "answer_count": 2, "score": 0, "last_activity_date": 1560358593, "creation_date": 1560357933, "question_id": 56566922, "link": "https://stackoverflow.com/questions/56566922/why-do-these-two-identical-functions-have-wildly-different-execution-times", "title": "Why do these two identical functions have wildly different execution times?", "body": "<p>I have two C functions that are copies of each other. In the code below, I'm printing out how long they take to execute. The first function (no matter which copy it is) always takes longer to execute than the second. Why is that?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt; // for clock_t\n\nint binsearch_old (int x, int v[], int n);\nint binsearch_new (int x, int v[], int n);\n\nvoid main ()\n{\n  int x = 4;\n  int v[10] = { 1,2,3,4,5,6,7,8,9,10 };\n  int n = 10;\n\n  clock_t begin_old = clock();\n  printf(\"\\nbinsearch_old :: position: %i\\n\", binsearch_old(x, v, n));\n  clock_t end_old = clock();\n  double time_spent_old = (double)(end_old - begin_old) / CLOCKS_PER_SEC;\n  printf(\"time spent old: %f\\n\", time_spent_old);\n\n  clock_t begin_new = clock();\n  printf(\"\\nbinsearch_new :: position: %i\\n\", binsearch_new(x, v, n));\n  clock_t end_new = clock();\n  double time_spent_new = (double)(end_new - begin_new) / CLOCKS_PER_SEC;\n  printf(\"time spent new: %f\\n\", time_spent_new);\n}\n\nint binsearch_old (int x, int v[], int n)\n{\n\n  int low, high, mid;\n  low = 0;\n  high = n - 1;\n  while (low &lt;= high) {\n    mid = (low + high) / 2;\n    if ( x &lt; v[mid])\n      high = mid - 1;\n    else if (x &gt; v[mid])\n      low = mid + 1;\n    else //found match\n      return mid;\n  }\n  return -1; // no match\n}\n\nint binsearch_new (int x, int v[], int n)\n{\n  int low, high, mid;\n  low = 0;\n  high = n - 1;\n\n  while (low &lt;= high) {\n    mid = (low + high) / 2;\n    if (x &lt; v[mid])\n      high = mid - 1;\n    else if (x &gt; v[mid])\n      low = mid + 1;\n    else //found match\n      return mid;\n  }\n  return -1; // no match\n}\n\n</code></pre>\n\n<p>After <code>gcc test.c</code> and <code>./a.out</code>, you'll see something along the lines of:</p>\n\n<pre><code>binsearch_old :: position: 3\ntime spent old: 0.000115\n\nbinsearch_new :: position: 3\ntime spent new: 0.000007\n\n</code></pre>\n\n<p>And the relationship between those times is stable! The first will always be greater than the second, and usually by quite a bit. What's going on?</p>\n"}, {"tags": ["c#", "c"], "comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1560358332, "post_id": 56566300, "comment_id": 99713254, "body": "This is an X-Y problem.  You want to construct a path from parts by concatenating two strings.  In C you used <code>sprintf_s()</code>, but rather than asking how to emulate <code>sprintf_s()</code> you would do far better to ask about the much simpler and more direct task concatenating two strings.  Not least because <code>sprintf_s()</code> can do so much more that you are not interested in this application so &quot;emulating&quot; it would be a waste.  It is not even the most obvious and simple method of doing it in C - <code>strcat_s()</code> would seem more appropriate."}], "answers": [{"comments": [{"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 1, "creation_date": 1560356825, "post_id": 56566649, "comment_id": 99712630, "body": "I would prefer to see <code>Path.Combine(path, &quot;SerialComs.ini&quot;);</code>"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 1, "creation_date": 1560356974, "post_id": 56566649, "comment_id": 99712682, "body": "@itsme86 That <i>does</i> look more idiomatic than what I&#39;m doing so I will edit that in but include my original line to demonstrate basic string concatenation."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1560367978, "last_edit_date": 1560367978, "creation_date": 1560356721, "answer_id": 56566649, "question_id": 56566300, "link": "https://stackoverflow.com/questions/56566300/how-can-i-emulate-the-effect-of-the-c-function-sprintf-s-in-c/56566649#56566649", "title": "How can I emulate the effect of the C function sprintf_s in C#?", "body": "<p>You don't need <code>sprintf</code>-family functions in higher level languages like C# since they normally allow string concatenation and assignment with the simple <code>=</code> and <code>+=</code> operators.</p>\n\n<p>Just write idiomatic C# code for it:</p>\n\n<pre><code>str = path + \"\\\\SerialComms.ini\";\n</code></pre>\n\n<p>Commenter @itsme86 points out that for the task of building a path, you should instead use <code>Path.Combine</code>:</p>\n\n<pre><code>Path.Combine(path, \"SerialComms.ini\");\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11637879, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pTc4psphA1U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf51YSIfXE68Hh-Pjld_qE9u2mFDQ/mo/photo.jpg?sz=128", "display_name": "JOV", "link": "https://stackoverflow.com/users/11637879/jov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 56566649, "answer_count": 1, "score": 1, "last_activity_date": 1560367978, "creation_date": 1560355374, "last_edit_date": 1560356945, "question_id": 56566300, "link": "https://stackoverflow.com/questions/56566300/how-can-i-emulate-the-effect-of-the-c-function-sprintf-s-in-c", "title": "How can I emulate the effect of the C function sprintf_s in C#?", "body": "<p>I am trying to take some old code written by my predecessor in C and migrate it to C#. I have tried using the P/invoke way but running into issues with sprint_s. Any recommendation on how to fix this or maybe write it using C#'s SerialPort class?</p>\n\n<pre><code>    [StructLayout(LayoutKind.Sequential)]\n    internal struct Dcb\n    {\n        internal uint DCBLength;\n        internal uint BaudRate;\n        private BitVector32 Flags;\n\n        private ushort wReserved;        // not currently used \n        internal ushort XonLim;           // transmit XON threshold \n        internal ushort XoffLim;          // transmit XOFF threshold             \n\n        internal byte ByteSize;\n        internal Parity Parity;\n        internal StopBits StopBits;\n\n        internal sbyte XonChar;          // Tx and Rx XON character \n        internal sbyte XoffChar;         // Tx and Rx XOFF character \n        internal sbyte ErrorChar;        // error replacement character \n        internal sbyte EofChar;          // end of input character \n        internal sbyte EvtChar;          // received event character \n        private ushort wReserved1;       // reserved; do not use     \n\n        private static readonly int fBinary;\n        private static readonly int fParity;\n        private static readonly int fOutxCtsFlow;\n        private static readonly int fOutxDsrFlow;\n        private static readonly BitVector32.Section fDtrControl;\n        private static readonly int fDsrSensitivity;\n        private static readonly int fTXContinueOnXoff;\n        private static readonly int fOutX;\n        private static readonly int fInX;\n        private static readonly int fErrorChar;\n        private static readonly int fNull;\n        private static readonly BitVector32.Section fRtsControl;\n        private static readonly int fAbortOnError;\n\n        static Dcb()\n        {\n            // Create Boolean Mask\n            int previousMask;\n            fBinary = BitVector32.CreateMask();\n            fParity = BitVector32.CreateMask(fBinary);\n            fOutxCtsFlow = BitVector32.CreateMask(fParity);\n            fOutxDsrFlow = BitVector32.CreateMask(fOutxCtsFlow);\n            previousMask = BitVector32.CreateMask(fOutxDsrFlow);\n            previousMask = BitVector32.CreateMask(previousMask);\n            fDsrSensitivity = BitVector32.CreateMask(previousMask);\n            fTXContinueOnXoff = BitVector32.CreateMask(fDsrSensitivity);\n            fOutX = BitVector32.CreateMask(fTXContinueOnXoff);\n            fInX = BitVector32.CreateMask(fOutX);\n            fErrorChar = BitVector32.CreateMask(fInX);\n            fNull = BitVector32.CreateMask(fErrorChar);\n            previousMask = BitVector32.CreateMask(fNull);\n            previousMask = BitVector32.CreateMask(previousMask);\n            fAbortOnError = BitVector32.CreateMask(previousMask);\n\n            // Create section Mask\n            BitVector32.Section previousSection;\n            previousSection = BitVector32.CreateSection(1);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            fDtrControl = BitVector32.CreateSection(2, previousSection);\n            previousSection = BitVector32.CreateSection(1, fDtrControl);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            previousSection = BitVector32.CreateSection(1, previousSection);\n            fRtsControl = BitVector32.CreateSection(3, previousSection);\n            previousSection = BitVector32.CreateSection(1, fRtsControl);\n        }\n\n        public bool Binary\n        {\n            get { return Flags[fBinary]; }\n            set { Flags[fBinary] = value; }\n        }\n\n        public bool CheckParity\n        {\n            get { return Flags[fParity]; }\n            set { Flags[fParity] = value; }\n        }\n\n        public bool OutxCtsFlow\n        {\n            get { return Flags[fOutxCtsFlow]; }\n            set { Flags[fOutxCtsFlow] = value; }\n        }\n\n        public bool OutxDsrFlow\n        {\n            get { return Flags[fOutxDsrFlow]; }\n            set { Flags[fOutxDsrFlow] = value; }\n        }\n\n        public DtrControl DtrControl\n        {\n            get { return (DtrControl)Flags[fDtrControl]; }\n            set { Flags[fDtrControl] = (int)value; }\n        }\n\n        public bool DsrSensitivity\n        {\n            get { return Flags[fDsrSensitivity]; }\n            set { Flags[fDsrSensitivity] = value; }\n        }\n\n        public bool TxContinueOnXoff\n        {\n            get { return Flags[fTXContinueOnXoff]; }\n            set { Flags[fTXContinueOnXoff] = value; }\n        }\n\n        public bool OutX\n        {\n            get { return Flags[fOutX]; }\n            set { Flags[fOutX] = value; }\n        }\n\n        public bool InX\n        {\n            get { return Flags[fInX]; }\n            set { Flags[fInX] = value; }\n        }\n\n        public bool ReplaceErrorChar\n        {\n            get { return Flags[fErrorChar]; }\n            set { Flags[fErrorChar] = value; }\n        }\n\n        public bool Null\n        {\n            get { return Flags[fNull]; }\n            set { Flags[fNull] = value; }\n        }\n\n        public RtsControl RtsControl\n        {\n            get { return (RtsControl)Flags[fRtsControl]; }\n            set { Flags[fRtsControl] = (int)value; }\n        }\n\n        public bool AbortOnError\n        {\n            get { return Flags[fAbortOnError]; }\n            set { Flags[fAbortOnError] = value; }\n        }\n    }\n\n    public enum DtrControl : int\n    {\n        /// &lt;summary&gt;\n        /// Disables the DTR line when the device is opened and leaves it disabled.\n        /// &lt;/summary&gt;\n        Disable = 0,\n\n        /// &lt;summary&gt;\n        /// Enables the DTR line when the device is opened and leaves it on.\n        /// &lt;/summary&gt;\n        Enable = 1,\n\n        /// &lt;summary&gt;\n        /// Enables DTR handshaking. If handshaking is enabled, it is an error for the application to adjust the line by \n        /// using the EscapeCommFunction function.\n        /// &lt;/summary&gt;\n        Handshake = 2\n    }\n    public enum RtsControl : int\n    {\n        /// &lt;summary&gt;\n        /// Disables the RTS line when the device is opened and leaves it disabled.\n        /// &lt;/summary&gt;\n        Disable = 0,\n\n        /// &lt;summary&gt;\n        /// Enables the RTS line when the device is opened and leaves it on.\n        /// &lt;/summary&gt;\n        Enable = 1,\n\n        /// &lt;summary&gt;\n        /// Enables RTS handshaking. The driver raises the RTS line when the \"type-ahead\" (input) buffer \n        /// is less than one-half full and lowers the RTS line when the buffer is more than \n        /// three-quarters full. If handshaking is enabled, it is an error for the application to \n        /// adjust the line by using the EscapeCommFunction function.\n        /// &lt;/summary&gt;\n        Handshake = 2,\n\n        /// &lt;summary&gt;\n        /// Specifies that the RTS line will be high if bytes are available for transmission. After \n        /// all buffered bytes have been sent, the RTS line will be low.\n        /// &lt;/summary&gt;\n        Toggle = 3\n    }\n    public enum Parity : byte\n    {\n        None = 0,\n        Odd = 1,\n        Even = 2,\n        Mark = 3,\n        Space = 4,\n    }\n    public enum StopBits : byte\n    {\n        One = 0,\n        OnePointFive = 1,\n        Two = 2\n    }\n\n    [DllImport(\"kernel32.dll\", SetLastError = true)]\n    private static extern bool ReadFile(IntPtr handle,\n                                        byte[] buffer, uint toRead, ref uint read, IntPtr lpOverLapped);\n\n    [DllImport(\"msvcrt.dll\", EntryPoint = \"memset\", CallingConvention = CallingConvention.Cdecl, SetLastError = false)]\n    public static extern IntPtr MemSet(IntPtr dest, int c, int byteCount);\n\n\n    [DllImport(\"kernel32.dll\", SetLastError = true)]\n    static extern bool SetCommTimeouts(IntPtr hFile, [In] ref COMMTIMEOUTS\n                                           lpCommTimeouts);\n    struct COMMTIMEOUTS\n    {\n        public UInt32 ReadIntervalTimeout;\n        public UInt32 ReadTotalTimeoutMultiplier;\n        public UInt32 ReadTotalTimeoutConstant;\n        public UInt32 WriteTotalTimeoutMultiplier;\n        public UInt32 WriteTotalTimeoutConstant;\n    }\n\n    [DllImport(\"kernel32.dll\", CharSet = CharSet.Auto, SetLastError = true)]\n    public static extern IntPtr CreateFile(\n        [MarshalAs(UnmanagedType.LPTStr)] string filename,\n        [MarshalAs(UnmanagedType.U4)] FileAccess access,\n        [MarshalAs(UnmanagedType.U4)] FileShare share,\n        IntPtr securityAttributes, // optional SECURITY_ATTRIBUTES struct or IntPtr.Zero\n        [MarshalAs(UnmanagedType.U4)] FileMode creationDisposition,\n        [MarshalAs(UnmanagedType.U4)] FileAttributes flagsAndAttributes,\n        IntPtr templateFile);\n\n    struct FILE\n    {\n        IntPtr _ptr;\n        int _cnt;\n        IntPtr _base;\n        int _flag;\n        int _file;\n        int _charbuf;\n        int _bufsiz;\n        IntPtr _tmpfname;\n    };\n\n\n    [DllImport(\"kernel32.dll\")]\n    static extern bool WriteFile(IntPtr hFile, byte[] lpBuffer,\n                                 uint nNumberOfBytesToWrite, out uint lpNumberOfBytesWritten,\n                                 IntPtr lpOverLapped);\n    [DllImport(\"kernel32.dll\", SetLastError = true)]\n    private static extern bool FlushFileBuffers(IntPtr handle);\n\n    public bool InitSerialComms()\n    {\n        FILE file = new FILE();\n        COMMTIMEOUTS timeouts;\n        Dcb dcb = new Dcb();\n        long len;\n        char[] name = new char[10];\n        char[] settings = new char[40];\n        string str;\n\n        // Form the initialization file name\n\n        sprintf_s(str, 800, \"%s\\\\SerialComms.ini\", path);\n\n        // Open the initialization file\n        fopen_s(&amp;file, str, \"r\");\n\n        // Check for errors\n        if (file)\n        {\n            Console.WriteLine(\"Error: cannot open file %s\\n\");\n            return false;\n        }\n\n        // Scan the serial port name\n        fgets(name, 10, file);\n        len = strlen(name);\n        name[len - 1] = 0;\n\n        // Scan the serial port settings\n        fgets(settings, 40, file);\n        len = settings.Length;\n        settings[len - 1] = 0;\n\n        // Scan the timeout settings\n        fgets(str, 40, file); len = strlen(str); string[len - 1] = 0;\n        sscanf_s(str, \"%d,%d,%d,%d,%d\",\n            &amp;timeouts.ReadIntervalTimeout,\n            &amp;timeouts.ReadTotalTimeoutConstant,\n            &amp;timeouts.ReadTotalTimeoutMultiplier,\n            &amp;timeouts.WriteTotalTimeoutConstant,\n            &amp;timeouts.WriteTotalTimeoutMultiplier);\n\n        // Close the initialization file\n        fclose(file);\n\n        // Open the serial port\n        port = CreateFile(name, GENERIC_READ | GENERIC_WRITE,\n            0, nullptr, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, nullptr);\n\n        // Check for errors\n        if (port == INVALID_HANDLE_VALUE)\n        {\n            // Report the error and return\n            fprintf(stderr, \"Error: cannot open serial port %s\\n\", name);\n            fflush(stderr);\n            return false;\n        }\n\n        // Build the serial port device control block\n        MemSet(dcb., 0, sizeof(DCB));\n        dcb.DCBlength = sizeof(DCB);\n        if (!BuildCommDCB(settings, &amp;dcb))\n        {\n            // Report the error and return\n            fprintf(stderr, \"Error: cannot create device control block for %s\\n\", name);\n            CloseHandle(port);\n            fflush(stderr);\n            return false;\n        }\n\n        // Configure the serial port\n        if (!SetCommState(port, &amp;dcb))\n        {\n            // Report the error and return\n            fprintf(stderr, \"Error: cannot configure serial port %s\\n\", name);\n            CloseHandle(port);\n            fflush(stderr);\n            return false;\n        }\n\n        // Set the timeouts for the serial port\n        if (!SetCommTimeouts(port, &amp;timeouts))\n        {\n            // Report the error and return\n            fprintf(stderr, \"Error: cannot set timeouts for %s\\n\", name);\n            CloseHandle(port);\n            fflush(stderr);\n            return false;\n        }\n\n        // Success\n        return true;\n    }\n\n    bool ReceiveReply(IntPtr port, ref byte[] reply, ref byte num)\n    {\n\n        uint num_read = 0;\n        uint num_to_read = 255;\n        ushort crc = 0XFFFF;\n        byte i, j;\n\n        // Clear the reply buffer\n        //reply = new byte[255]; \n\n        num = 0;\n\n        // Read the data\n        if (!ReadFile(port, reply, num_to_read, ref num_read, IntPtr.Zero)) return false;\n\n        // Check number of bytes that were read\n        if (num_read &lt; 2) return false;\n\n        // Check number of bytes that were read\n        if (num_read &gt; 255) return false;\n\n        // Form the CRC\n        for (i = 0; i &lt; num_read - 2; i++)\n        {\n            crc ^= reply[i];\n            for (j = 0; j &lt; 8; j++)\n            {\n                ushort flag = (ushort) (crc &amp; 0X0001);\n                crc &gt;&gt;= 1;\n                //TODO: risky flag check\n                if (flag == 0) crc ^= 0XA001;\n            }\n        }\n\n        // Check the CRC\n        if (reply[i++] != (crc &amp; 0X00FF)) return false;\n        if (reply[i++] != (crc &amp; 0XFF00) &gt;&gt; 8) return false;\n        num = (byte)(num_read - 2);\n\n        // Success\n        return true;\n    }\n\n\n    public static bool SendRequest(IntPtr port, ref byte[] request, ref byte num)\n    {\n        ushort crc = 0XFFFF;\n        byte i, j;\n\n        // Check number of bytes\n        if (num &gt; 253) return false;\n\n        // Set number of bytes to write\n        uint num_to_write = num;\n\n        // Form the CRC\n        for (i = 0; i &lt; num_to_write; i++)\n        {\n            crc ^= request[i];\n            for (j = 0; j &lt; 8; j++)\n            {\n                ushort flag =  (ushort) (crc &amp; 0X0001);\n                crc &gt;&gt;= 1; if (flag == 0) crc =  (ushort) (crc ^ 0XA001);\n            }\n        }\n\n        // Set the CRC bytes in the request\n        request[num_to_write++] = (byte) (crc &amp; 0X00FF);\n        request[num_to_write++] = (byte) ((crc &amp; 0XFF00) &gt;&gt; 8);\n\n        // Send the request\n        if (!WriteFile(port, request, num_to_write, out uint _, IntPtr.Zero)) return false;\n\n        string text = request.ToString().Substring(0, (int) num_to_write).Replace(\"\\r\\n\", \" \");\n\n        // Flush the serial line\n        if (!FlushFileBuffers(port)) return false;\n\n        // Success\n        return true;\n    }\n</code></pre>\n"}, {"tags": ["c", "language-lawyer", "operator-precedence"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560353956, "post_id": 56565885, "comment_id": 99711111, "body": "Please link the resource you are referring to."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1560354473, "post_id": 56565885, "comment_id": 99711394, "body": "In C++ it&#39;s trivial to show this (e.g. ++++c is allowed in C++), C is harder. I racked my brains for a bit to no avail. Added the lawyer tag to attract experts."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560354489, "post_id": 56565885, "comment_id": 99711402, "body": "I&#39;m not sure I follow.  <i>Some</i> choice for these properties must be made, at least implicitly, in order to specify how expressions are to be evaluated.  Are you asking for a <i>rationale</i> for the particular choices?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560354876, "post_id": 56565885, "comment_id": 99711632, "body": "Note also that C doesn&#39;t actually define operator precedence or associativity as such.  Those are an <i>interpretation</i> of the language standard."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1560354975, "post_id": 56565885, "comment_id": 99711692, "body": "Do you really want to cherry-pick specifically the pre- and post-fix increment operators? Or do you just want to know why operator precedence is needed in general? Because assigning <i>some</i> precedence to each operator proceeds from the general case..."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1560355107, "post_id": 56565885, "comment_id": 99711768, "body": "You can <a href=\"https://stackoverflow.com/posts/56565885/edit\">edit</a> your question to clarify which operators (or <i>operator</i>?) you are talking about. Is it all of them, or only one, or a few?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1560355453, "post_id": 56565885, "comment_id": 99711946, "body": "<code>a = -*arr[i]++;</code> as part of some &quot;copy all items in the 2D array but negative their values&quot; algorithm. But writing so many operators on the same line is bad practice."}], "answers": [{"comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1560354691, "post_id": 56566085, "comment_id": 99711529, "body": "Out of curiosity when might the syntax <code>&amp;*</code> be meaningful in C++? I&#39;ll admit I don&#39;t know nearly enough about C++ but I can&#39;t wrap my head around the syntax <code>&amp;*ptr</code> not being redundant."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560354733, "post_id": 56566085, "comment_id": 99711556, "body": "Agreed that with different precedence rules the effect would be different, but how does that demonstrate that the particular choice of precedence is &quot;needed&quot;?"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1560354967, "post_id": 56566085, "comment_id": 99711688, "body": "C++ has operator overloading, so many &quot;trivial&quot; expressions may do arbitrary things. However, thinking about C++ when answering a C question is dangerous - there are subtle differences between C and C++ concerning specifically operator precedence."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 3, "creation_date": 1560354981, "post_id": 56566085, "comment_id": 99711698, "body": "<code>&amp;*ptr</code> makes sense in C++ if <code>ptr</code> is not a simple pointer, but presumably has an <code>operator*</code> that returns a reference to the actual object, or an instance of a proxy reference. <code>&amp;</code> then takes the address of that instance as a raw pointer, normally, though it, too can be overloaded."}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560355001, "post_id": 56566085, "comment_id": 99711710, "body": "I understood the question for &quot;needed&quot; as where these rules apply meaningfully in the real world. Not as a justification for this being the only choice. One could of course define a different semantic. @JohnBollinger"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1560355219, "post_id": 56566085, "comment_id": 99711830, "body": "I think the &quot;outward&quot; ordering makes sense. <code>*++ptr</code> and <code>++*ptr</code> are very different beasts. But the choice postfix over prefix is arbitrary, I think.<code>++ptr[0]</code> is different to <code>*ptr++</code> even though they are basically similar operations being applied."}], "tags": [], "owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "is_accepted": true, "score": 4, "last_activity_date": 1560355277, "last_edit_date": 1560355277, "creation_date": 1560354585, "answer_id": 56566085, "question_id": 56565885, "link": "https://stackoverflow.com/questions/56565885/can-anyone-show-an-example-where-this-precedence-matters/56566085#56566085", "title": "Can anyone show an example where this precedence matters?", "body": "<p>This is needed for an expression like</p>\n\n<pre><code>data = *pointer++;\n</code></pre>\n\n<p>You to obtain the value at pointer in data, and then increment it to the next element. If the precedence of the postfix weren't greater, you'd end up with an incremented value in data. </p>\n\n<p>And the associativity of the prefix operator is right-to-left because you want an expression like</p>\n\n<pre><code>data = **pointer_to_pointer;\n</code></pre>\n\n<p>to be evaluated from right to left as if you'd write</p>\n\n<pre><code>data = *(*pointer_to_pointer);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 0, "creation_date": 1560355747, "post_id": 56566343, "comment_id": 99712091, "body": "Interesting, I would have called the <code>-&gt;</code> an infix \ud83e\udd14"}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 0, "creation_date": 1560356727, "post_id": 56566343, "comment_id": 99712584, "body": "I&#39;m aware of that, it just surprised me that they consider this a postfix."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1560355528, "creation_date": 1560355528, "answer_id": 56566343, "question_id": 56565885, "link": "https://stackoverflow.com/questions/56565885/can-anyone-show-an-example-where-this-precedence-matters/56566343#56566343", "title": "Can anyone show an example where this precedence matters?", "body": "<blockquote>\n  <p>(i) precedence of postfix operator is greater than precedence of\n  prefix operator.</p>\n</blockquote>\n\n<p>Consider the code:</p>\n\n<pre><code>int x[] = {1,2,3};\nint *p = x;\nint y;\ny = ++p[0]; \n</code></pre>\n\n<p>This will increment the first element of <code>x</code> and assign it to y.</p>\n\n<p>versus this one, where we explicitly changing the precedence so the prefix <code>++</code> gets a higher one:</p>\n\n<pre><code>y = (++p)[0];\n</code></pre>\n\n<p>This will <em>not</em> increment <code>x</code> elements but will move <code>p</code> to the second element of <code>x</code> and assign <code>y</code> with it.</p>\n\n<blockquote>\n  <p>(ii) associativity of postfix operator is left-to-right but that of prefix operator is right-to-left.</p>\n</blockquote>\n\n<p>This means that:\n<code>p-&gt;x-&gt;y</code> should be read as <code>(p-&gt;x)-&gt;y</code>, and not <code>p-&gt;(x-&gt;y)</code> which does not even make any sense. </p>\n\n<p>Same for other the other operators of the postfix group - the RTL associativity just doesn't make sense for them:\n<code>p[x][y][z]</code> is the same as <code>((p[x])[y])[z]</code>, but <code>p[x]([y]([z]))</code> is meaningless (and illegal).</p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1560356399, "creation_date": 1560356399, "answer_id": 56566558, "question_id": 56565885, "link": "https://stackoverflow.com/questions/56565885/can-anyone-show-an-example-where-this-precedence-matters/56566558#56566558", "title": "Can anyone show an example where this precedence matters?", "body": "<p>From historical point of view, the precedence of the operators was influenced by the <code>B and BCPL programming languages</code>.  In the article <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow noreferrer\"><code>The Development of the C Language</code></a>, Dennis Ritchie explains how he chose the precedence.</p>\n\n<blockquote>\n  <p>An accident of syntax contributed to the perceived complexity of the language. The indirection operator, spelled * in C, is syntactically a unary prefix operator, <strong>just as in BCPL and B</strong>. This works well in simple expressions, but in more complex cases, parentheses are required to direct the parsing. For example, to distinguish indirection through the value returned by a function from calling a function designated by a pointer, one writes *fp() and (*pf)() respectively</p>\n</blockquote>\n\n<p>There is no clear logic about the precedence -- you need to memorize it or to use parenthesis when you are not sure about the precedence.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1560360993, "creation_date": 1560360993, "answer_id": 56567639, "question_id": 56565885, "link": "https://stackoverflow.com/questions/56565885/can-anyone-show-an-example-where-this-precedence-matters/56567639#56567639", "title": "Can anyone show an example where this precedence matters?", "body": "<p>The precedence and associativity of the operators fall out of the language grammar.  For postfix and unary operators, that's as follows:</p>\n\n<pre><code><em>postfix-expression</em>:\n    <em>primary-expression</em>\n    <em>postfix-expression</em> [ <em>expression</em> ]\n    <em>postfix-expression</em> ( <em>argument-expression-list<sub>opt</sub></em> )\n    <em>postfix-expression</em> . <em>identifier</em>\n    <em>postfix-expression</em> -> <em>identifier</em>\n    <em>postfix-expression</em> ++\n    <em>postfix-expression</em> --\n    ( <em>type-name</em> ) { <em>initializer-list</em> }\n    ( <em>type-name</em> ) { <em>initializer-list</em> , }\n\n<em>unary-expression</em>:\n    <em>postfix-expression</em>\n    ++ <em>unary-expression</em>\n    -- <em>unary-expression</em>\n    <em>unary-operator</em> <em>cast-expression</em>\n    sizeof <em>unary-expression</em>\n    sizeof ( <em>type-name</em> )\n    _Alignof ( <em>type-name</em> )\n\n<em>unary-operator</em>: one of\n    & * + - ~ !\n\n<em>cast-expression</em>:\n    <em>unary-expression</em>\n    ( <em>type-name</em> ) <em>cast-expression</em>\n</code></pre>\n\n<p><sub><em><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C 2011 Online Draft</a>, Appendix A.2 Phase Structure Grammar</em></sub></p>\n\n<p>So, how does that determine precedence and associativity, and why does it matter?    Let's start with an expression like <code>*p++</code> - are we dereferencing <code>p++</code>, or are incrementing <code>*p</code>? Those are two very different operations, so it matters how the grammar is structured. Let's trace through it:</p>\n\n<pre><code>        *            p            ++\n        |            |            |\n        |         primary         |\n        |        expression       |\n        |            |            |\n        |         postfix         |\n        |        expression       |\n        |            |            |\n        |            +------+-----+\n        |                   |\n        |                postfix\n        |               expression\n        |                   |\n        |                 unary\n        |               expression\n        |                   |\n      unary                cast\n     operator           expression\n        |                   |\n        +---------+---------+\n                  |\n                unary\n              expression\n</code></pre>\n\n<p>In English:</p>\n\n<ol>\n<li><code><em>unary-expression</em></code> produces <code><em>unary-operator cast-expression</em></code>\n<li><code><em>unary-operator</em></code> produces <code>*</code>\n<li><code><em>cast-expression</em></code> produces <code><em>unary-expression</em></code>\n<li><code><em>unary-expression</em></code> produces <code><em>postfix-expression</em></code>\n<li><code><em>postfix-expression</em></code> produces <code><em>postfix-expression</em> ++</code>\n<li><code><em>postfix-expression</em></code> produces <code><em>primary-expression</em></code>\n<li><code><em>primary-expression</em></code> produces <code>p</code>\n</ol>\n\n<p>This means the expression <code>*p++</code> is parsed as <code>*(p++)</code> - the <code>*</code> operator will be applied to the <em>result</em> of <code>p++</code>.  </p>\n\n<p>Same kind of thing for <code>*p[i]</code> - we will wind up dereferencing the pointer at <code>p[i]</code>, rather than subscripting <code>*p</code>.  </p>\n\n<p>For a slightly more complicated example that gets into associativity, let's look at the member selection operator <code>-&gt;</code>, as in the expression <code>foo-&gt;bar-&gt;bletch-&gt;blurga</code>.  The grammar for the <code>-&gt;</code> member selection operator is</p>\n\n<pre><code><em>postfix-expression</em> -> <em>identifier</em></code></pre>\n\n<p>This tells us that <code>foo-&gt;bar-&gt;bletch</code> reduces to <em><code>postfix-expression</code></em> and <code>blurga</code> reduces to <em><code>identifier</code></em>.  Hence, the associativity of the operator is right-to-left, and the expression parses as <code>((foo-&gt;bar)-&gt;blurga)-&gt;bletch</code>, rather than <code>foo-&gt;(bar-&gt;(blurga-&gt;bletch))</code>.</p>\n\n<p>Those tables you're looking at are summaries of how the grammar is set up.  The grammar is set up the way it is so that operator and operand groupings are somewhat intuitive.  You expect an expression like <code>++foo.bar[i]</code> to increment <code>foo.bar[i]</code>, you expect <code>*f()</code> to dereference the pointer value returned from a function, etc.   </p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1560364455, "creation_date": 1560364455, "answer_id": 56568427, "question_id": 56565885, "link": "https://stackoverflow.com/questions/56565885/can-anyone-show-an-example-where-this-precedence-matters/56568427#56568427", "title": "Can anyone show an example where this precedence matters?", "body": "<p>In C, as in most languages, postfix operators bind more tightly than prefix operators, and prefix operators bind more tightly than binary operators. (There are exceptions to the second part, but not in C.) That generally corresponds to intuitions about the meaning of expressions.</p>\n\n<p>For example, almost everyone would expect</p>\n\n<pre><code>-a[0]\n</code></pre>\n\n<p>to mean \"the negative of element 0 of the array <code>a</code>\", rather than \"element 0 of the array <code>-a</code>\", particularly in languages like C where \"the array <code>-a</code>\" is not meaningful. Similarly,</p>\n\n<pre><code>-a++\n</code></pre>\n\n<p>has the expected meaning \"the negative of the current value of <code>a</code>, which is subsequently incremented.\" Again, incrementing <code>-a</code> is meaningless since <code>-a</code> is not a variable.</p>\n\n<p>Naive intuitions might not work as well with more obscure operators, so it is useful to maintain consistency. While it is imaginable that there might exist a prefix operator which almost always needs to be surrounded in parentheses because it doesn't bind tightly enough, making that operator an exception to the general rule us likely to create more surprises than it solves, and few languages take this path.</p>\n\n<p>So prefix and postfix uses of <code>++</code> and <code>--</code> have syntax defined by this common rule. Nonetheless, in C at least, it is an error to apply both to the same operand (<code>++a--</code>) because the value returned, both by the pre- and post-fix versions, is not an lvalue, while the operand is required to be an lvalue. In that sense, the particular case of comparing precedences of prefix and postfix <code>++</code> and <code>--</code> never shows up in a correct program. But other combinations of prefix and postfix operators do, and precedence levels need to apply homogenously.</p>\n\n<p>There is another sense in which the precedence and associativity declarations are redundant. It is syntactically meaningless to talk about the associaticity between two prefix operators, or between two postfix operators. And if prefix and postfix operators have different precedence levels, it is also meaningless to talk about associativity between a prefix and a postfix operator. So the associativity is irrelevant.</p>\n\n<p>However, you could stretch the concept of associativity and say that all unary operators have the same precedence and all of them associate to the right. That will actually produce a correct parser, and was used in the definition of B (C's predecessor). But it really is too confusing for most people not accustomed to grammatical analysis.</p>\n"}], "owner": {"reputation": 85, "user_id": 11191881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa553c2fdb4bbd40bb072722871fd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashis Ghosh", "link": "https://stackoverflow.com/users/11191881/ashis-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 56566085, "answer_count": 5, "score": 4, "last_activity_date": 1560364455, "creation_date": 1560353887, "last_edit_date": 1560362426, "question_id": 56565885, "link": "https://stackoverflow.com/questions/56565885/can-anyone-show-an-example-where-this-precedence-matters", "title": "Can anyone show an example where this precedence matters?", "body": "<p>I'm reading precedence and associativity. In the <a href=\"https://www.tutorialspoint.com/cprogramming/c_operators_precedence.htm\" rel=\"nofollow noreferrer\">table</a>, I observed these two things -</p>\n\n<p>(i) precedence of postfix increment(or decrement) operator is greater than precedence of prefix increment(or dec.) operator. </p>\n\n<p>(ii) associativity of postfix inc.(or dec.) operator is left-to-right but that of prefix increment(or dec.) operator is right-to-left. </p>\n\n<p>I'm not sure why it is needed. Can anyone help me by showing code(separately for each case), which shows the need of these two facts? Thanks.</p>\n\n<p>I tried to think about cases but not getting any such(as I'm very new to programming).</p>\n"}, {"tags": ["c", "asp.net-web-api", "asp.net-core"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5405227, "user_type": "registered", "profile_image": "https://graph.facebook.com/726743084097437/picture?type=large", "display_name": "Adriano Faria Alves", "link": "https://stackoverflow.com/users/5405227/adriano-faria-alves"}, "edited": false, "score": 0, "creation_date": 1560366914, "post_id": 56567297, "comment_id": 99717027, "body": "Thanks for the help, but I have already tested it with no route and it did not work, I think this Remote is only for client side validation."}], "tags": [], "owner": {"reputation": 76, "user_id": 7698191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6A8o.png?s=128&g=1", "display_name": "Elias K.", "link": "https://stackoverflow.com/users/7698191/elias-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1560359464, "creation_date": 1560359464, "answer_id": 56567297, "question_id": 56565612, "link": "https://stackoverflow.com/questions/56565612/how-to-validate-if-email-attribute-is-unique-in-an-asp-net-core-api/56567297#56567297", "title": "How to validate if email attribute is unique in an ASP .NET CORE API?", "body": "<p>I cant comment cause I lack the sufficient reputation, and if I had time I would had gone and verified but I think your issue here is the [Route(\"api/users\")].\nYou are giving your decorator the Controller name but that controller is behind a different route. Easy debug of that will be to remove the Route temporarily OR put the \"VerifyEmail\" action to another controller that you arent altering its route.</p>\n"}, {"comments": [{"owner": {"reputation": 1085, "user_id": 32044, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c4e23857198befca85a2df236e8cb54e?s=128&d=identicon&r=PG", "display_name": "SwampyFox", "link": "https://stackoverflow.com/users/32044/swampyfox"}, "edited": false, "score": 0, "creation_date": 1589033659, "post_id": 56569163, "comment_id": 109133688, "body": "This is a fine and reusable way to do this validation. When I saw this, I was looking to see that you found the &quot;GetService&quot; method on the validation context. This method is a good example of &quot;Service Locator&quot; that is often considered an Anti-Pattern. However, because of the way DI works with validation filters, it is perfectly pragmatic to use."}], "tags": [], "owner": {"reputation": 121, "user_id": 5405227, "user_type": "registered", "profile_image": "https://graph.facebook.com/726743084097437/picture?type=large", "display_name": "Adriano Faria Alves", "link": "https://stackoverflow.com/users/5405227/adriano-faria-alves"}, "is_accepted": false, "score": 5, "last_activity_date": 1583606519, "last_edit_date": 1583606519, "creation_date": 1560367715, "answer_id": 56569163, "question_id": 56565612, "link": "https://stackoverflow.com/questions/56565612/how-to-validate-if-email-attribute-is-unique-in-an-asp-net-core-api/56569163#56569163", "title": "How to validate if email attribute is unique in an ASP .NET CORE API?", "body": "<p>Seeing that it was not progressing, I decided to do a personalized validation.</p>\n\n<p>EmailUserUniqueAttribute.cs</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.ComponentModel.DataAnnotations;\nusing Base.Models;\n\nnamespace Core.Models\n{\n    public class EmailUserUniqueAttribute : ValidationAttribute\n    {\n        protected override ValidationResult IsValid(\n            object value, ValidationContext validationContext)\n        {\n            var _context = (AppDbContext)validationContext.GetService(typeof(AppDbContext));\n            var entity = _context.Users.SingleOrDefault(e =&gt; e.Email == value.ToString());\n\n            if (entity != null)\n            {\n                return new ValidationResult(GetErrorMessage(value.ToString()));\n            }\n            return ValidationResult.Success;\n        }\n\n        public string GetErrorMessage(string email)\n        {\n            return $\"Email {email} is already in use.\";\n        }\n    }\n}\n</code></pre>\n\n<p>User.cs</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.ComponentModel.DataAnnotations;\nusing System.ComponentModel.DataAnnotations.Schema;\nusing Microsoft.AspNetCore.Mvc;\n\nnamespace Base.Models\n{\n    [Table(\"users\")]\n    public partial class User\n    {\n        ...\n        [Required]\n        [EmailAddress]\n        [EmailUserUnique]\n        [Column(\"email\", TypeName = \"varchar(254)\")]\n        public string Email { get; set; }\n    }\n}\n        ...\n</code></pre>\n\n<p>It works, but I don't know if this is the best way to do this.</p>\n"}], "owner": {"reputation": 121, "user_id": 5405227, "user_type": "registered", "profile_image": "https://graph.facebook.com/726743084097437/picture?type=large", "display_name": "Adriano Faria Alves", "link": "https://stackoverflow.com/users/5405227/adriano-faria-alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3817, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1583606519, "creation_date": 1560352929, "question_id": 56565612, "link": "https://stackoverflow.com/questions/56565612/how-to-validate-if-email-attribute-is-unique-in-an-asp-net-core-api", "title": "How to validate if email attribute is unique in an ASP .NET CORE API?", "body": "<p>I was needing to make a post or put a validation on the server side to check if the email is unique.</p>\n\n<p>In the research I have always done the example was a traditional MVC application and never an api.</p>\n\n<p>In many cases I saw that the [Remote] <a href=\"https://docs.microsoft.com/pt-br/aspnet/core/mvc/models/validation?view=aspnetcore-2.2#remote-attribute\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/pt-br/aspnet/core/mvc/models/validation?view=aspnetcore-2.2#remote-attribute</a> . I tried to implement according to the documentation, but debugging verified that the function in the controller is neither called.</p>\n\n<p>User.cs</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.ComponentModel.DataAnnotations;\nusing System.ComponentModel.DataAnnotations.Schema;\nusing Microsoft.AspNetCore.Mvc;\n\nnamespace Base.Models\n{\n    [Table(\"users\")]\n    public partial class User\n    {\n        ...\n        [Required]\n        [EmailAddress]\n        [Remote(action: \"VerifyEmail\", controller: \"UserController\",ErrorMessage=\"Email already in use\")]\n        [Column(\"email\", TypeName = \"varchar(254)\")]\n        public string Email { get; set; }\n        ...\n    }\n}\n</code></pre>\n\n<p>UserController.cs</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Mvc;\nusing Microsoft.EntityFrameworkCore;\nusing Base.Models;\n\nnamespace Base.Controllers\n{\n    [Route(\"api/users\")]\n    [ApiController]\n    public class UserController : Controller\n    {\n        ...\n        [AcceptVerbs(\"Get\")]\n        public IActionResult VerifyEmail(string email)\n        {\n            //forcing it to go wrong\n            return Json($\"Email {email} is already in use.\");\n        }\n        ...\n    }\n}\n\n</code></pre>\n\n<p>Anyone have any idea how to implement this?</p>\n"}, {"tags": ["c++", "c", "visual-c++", "network-programming"], "comments": [{"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1560352937, "post_id": 56565551, "comment_id": 99710513, "body": "<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winsock2/nf-winsock2-connect\" rel=\"nofollow noreferrer\">&quot;If socket s, is unbound, unique values are assigned to the local association by the system, and the socket is marked as bound.&quot;</a>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1560353027, "post_id": 56565551, "comment_id": 99710575, "body": "You need to call <code>bind</code> if you want to specify which interface/port combination to use."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560353958, "post_id": 56565551, "comment_id": 99711115, "body": "&quot;<i>Let that be applications responsibility to decide on source port or IP to bind to</i>&quot; -- note that although there may indeed be reasons for taking this approach with a socket you are going to <code>connect()</code>, they are at best rare.  The source port for such a connection is not normally significant at the application level, and there are rarely many options for the source IP (unless the machine is connecting to itself)."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1560368084, "creation_date": 1560368084, "answer_id": 56569228, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor/56569228#56569228", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<blockquote>\n  <p>How can I tell the connect() function to use a particular source IP and source port values?</p>\n</blockquote>\n\n<p>Use the socket library's <code>bind()</code> function for that.  Yes, you can call <code>bind()</code> before <code>connect()</code> for an outgoing socket.  That is a perfectly legitimate operation for both UDP and TCP sockets.</p>\n"}, {"comments": [{"owner": {"reputation": 620, "user_id": 8924129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc041e5ba3467df99d37319628ed9a6?s=128&d=identicon&r=PG&f=1", "display_name": "Bar Stool", "link": "https://stackoverflow.com/users/8924129/bar-stool"}, "edited": false, "score": 0, "creation_date": 1560401934, "post_id": 56569711, "comment_id": 99725327, "body": "A couple of use cases off the top of my head: It is possible to bind a socket to an interface without binding to a port (here the port will be selected when connect is called.). Also, in P2P networking, explicit port allocation is needed before connect is called to enable NAT traversal."}], "tags": [], "owner": {"reputation": 427, "user_id": 9988199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWaFH.jpg?s=128&g=1", "display_name": "H4ze", "link": "https://stackoverflow.com/users/9988199/h4ze"}, "is_accepted": false, "score": 3, "last_activity_date": 1560370297, "creation_date": 1560370297, "answer_id": 56569711, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor/56569711#56569711", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<p><code>bind()</code> requests port that is not in use so it can claim it and become a server, while <code>connect()</code> wants a port that is already in use, so it can connect to it and talk to the server.</p>\n\n<p>As user <em>stark</em> said, you need to call <code>bind</code> if you want to specify which interface/port combination to use, although if you want next call to bind it to a random available port number, you can opt out from <code>bind()</code> call because client doesn't necessarily has to have a fixed port number.</p>\n\n<p>It is possible to ask the kernel to select a specific port before calling <code>connect()</code>, but if I may ask - why you wouldn't want to kernel to allocate source ports, as far as I know it's not best practice.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1618904949, "last_edit_date": 1618904949, "creation_date": 1560489193, "answer_id": 56591732, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor/56591732#56591732", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<p>Yes, you can.  <strong>Indeed there's a reason to do that:</strong>  In case your routing policy makes your connection to be established from an IP address which is not the one you want to use, you can force in a multihomed/routing host a specific IP address as source by means of <code>bind(2)</code> system call.  Another use is to specify a fixed source port for the connection, but this is not as usual as the previous case.</p>\n<p>But beware: you can select only one of the already configured IP addresses you have, not any address you can imagine.</p>\n"}], "owner": {"reputation": 59, "user_id": 9765204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9m7Vy6sCOio/AAAAAAAAAAI/AAAAAAAAB6Y/G6tOvYCtdN8/photo.jpg?sz=128", "display_name": "anup kataria", "link": "https://stackoverflow.com/users/9765204/anup-kataria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1618904949, "creation_date": 1560352721, "last_edit_date": 1560367994, "question_id": 56565551, "link": "https://stackoverflow.com/questions/56565551/can-i-call-bind-and-then-connect-on-same-socket-descriptor", "title": "Can I call bind() and then connect() on same socket descriptor?", "body": "<p>Just a curious question about networking socket programming in a Windows Application with C/C++: </p>\n\n<p>How can I tell the <code>connect()</code> function to use a particular source IP and source port values?</p>\n\n<ul>\n<li><p>After a socket is created, application calls <code>connect()</code> to remote IP and port by using the <code>sockaddr</code> structure.</p></li>\n<li><p>the <code>connect()</code> function internally selects the source IP and port for the connection. </p></li>\n</ul>\n\n<p>Rather than the system deciding the source IP and/or port for the <code>connect()</code>, let that be the application's responsibility to decide which source IP and/or port to bind to.</p>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1560352953, "post_id": 56565539, "comment_id": 99710518, "body": "See &quot;notes&quot; in <a href=\"https://en.cppreference.com/w/c/string/byte/memset\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/string/byte/memset</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560353023, "post_id": 56565539, "comment_id": 99710571, "body": "I would think that the compiler may be allowed to optimize out <code>memset(p, c,..)</code> in case it doesn&#39;t see any use of the memory pointed by <code>p</code> in the future."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1560353448, "post_id": 56565539, "comment_id": 99710830, "body": "<a href=\"https://wiki.sei.cmu.edu/confluence/display/c/MSC06-C.+Beware+of+compiler+optimizations\" rel=\"nofollow noreferrer\">wiki.sei.cmu.edu/confluence/display/c/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560353133, "post_id": 56565637, "comment_id": 99710640, "body": "Wouldn&#39;t <code>memset((volatile void*)password, &#39;\\0&#39;, sizeof(password));</code> work around it?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1560353190, "post_id": 56565637, "comment_id": 99710678, "body": "Not necessarily, no \u2014 not least because it isn&#39;t clear you can safely pass a volatile pointer to a function that doesn&#39;t know it is going to get one."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560353283, "post_id": 56565637, "comment_id": 99710732, "body": "Ah right... The function code is already there, so there is no way it can accommodate it.."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1560353332, "post_id": 56565637, "comment_id": 99710760, "body": "@DevSolar: Yes, the requirement is on the compiler to actually generate that call to <code>memset_s()</code> even though if the function was <code>memset()</code>, it could be omitted.  The library writer merely has to ensure that <code>memset_s()</code> does its job."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560353338, "post_id": 56565637, "comment_id": 99710764, "body": "@EugeneSh.: IMHO a simple loop <code>for (size_t i = 0; i &lt; sizeof password; i++) { *(volatile char *)(password + i) = 0; }</code> should do the trick, making <code>memset_s</code> a rather useless addition to the C standard."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1560353385, "post_id": 56565637, "comment_id": 99710792, "body": "@chqrlie I wouldn&#39;t call it useless.. You can replace the <code>memset</code> with loop too"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1560353432, "post_id": 56565637, "comment_id": 99710823, "body": "@JonathanLeffler: Oh... and there I was already hammering those <code>volatile</code>s into my <code>memset_s</code>... that must be a pain for optimizer maintainers!"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1560354035, "post_id": 56565637, "comment_id": 99711160, "body": "@JonathanLeffler AFAIK <code>memset_s</code> can just be a forward to <code>memset</code> the only difference is that the compiler is not allowed to optimize it out."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1560354090, "post_id": 56565637, "comment_id": 99711194, "body": "@chqrlie actually no because of &#39;AS-IF&#39; if the compiler can detect the buffer isn&#39;t read after the writes it&#39;s free to remove code that writes up to the last read."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1560354251, "post_id": 56565637, "comment_id": 99711268, "body": "@Mgetz: more or less.  If you look at the prototype <code>errno_t memset_s(void *s, rsize_t smax, int c, rsize_t n);</code>, there are a number of differences from <code>void *memset(void *s, int c, size_t n);</code>.  And officially, <code>memset_s()</code> has to check that <code>s</code> is not a null pointer, and so on.  But the grunt work \u2014 actually setting the data to the specified byte value \u2014 could be handled by <code>memset_s()</code> calling <code>memset()</code>."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1560354342, "post_id": 56565637, "comment_id": 99711317, "body": "@JonathanLeffler yeah I realized that after I commented, I do wish glibc etc would implement just that method so people don&#39;t have to resort to <code>volatile</code> hacks. I could care less about the rest of annex k."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1560354458, "post_id": 56565637, "comment_id": 99711387, "body": "@Mgetz: Well, the reason I am <i>working</i> on Annex K at all is <code>strtok_s()</code>, on direct request by downstream... ;-) But yes, most of those functions are a bit clunky. (Including <code>strtok_s()</code>, which is worded in a way that <i>cannot</i> be fulfilled. :-D )"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1560354522, "post_id": 56565637, "comment_id": 99711427, "body": "@DevSolar AFAIK <code>strtok_s</code> and <code>strtok_r</code> were macro identical (parameter order changes I believe)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1560354552, "post_id": 56565637, "comment_id": 99711444, "body": "@DevSolar: Note that Microsoft has its own <code>strtok_s()</code> \u2014 and the Annex K version is loosely based on the MS version.  The MS <code>strtok_s()</code> matches the interface to POSIX <code>strtok_r()</code> except in the spelling, but Annex K <a href=\"http://port70.net/~nsz/c/c11/n1570.html#K.3.7.3.1\" rel=\"nofollow noreferrer\"><code>strtok_s()</code></a> is different from <i>both</i>!"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1560354621, "post_id": 56565637, "comment_id": 99711484, "body": "@JonathanLeffler OOPS, yeah I got confused because I&#39;ve used the MS one and macroed before..."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1560354978, "post_id": 56565637, "comment_id": 99711694, "body": "@JonathanLeffler: I realized. But my lib is strictly ISO 9899 <i>only</i>, so I couldn&#39;t provide either MS <code>strtok_s</code> nor POSIX <code>strtok_r</code>... so I implemented ISO <code>strtok_s</code> by means of a reserved-namespace worker function, so downstream can either go for ISO <code>strtok_s</code> <i>or</i> wrap my worker function with a MS <code>strtok_s</code> / POSIX <code>strtok_r</code>, as per preference. ;-) -- The &quot;impossible&quot; part about ISO <code>strtok_s</code> is that I am supposed to bug out if the next token end cannot be found in the next <code>s1max</code> characters... but may not access the string with the delimiters if it doesn&#39;t. <i>That</i> cracked me up. :-D"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 12, "last_activity_date": 1560422198, "last_edit_date": 1560422198, "creation_date": 1560353010, "answer_id": 56565637, "question_id": 56565539, "link": "https://stackoverflow.com/questions/56565539/memset-s-what-does-the-standard-mean-with-this-piece-of-text/56565637#56565637", "title": "memset_s(): What does the standard mean with this piece of text?", "body": "<p>Imagine you have read a password:</p>\n\n<pre><code>{\n    char password[128];\n\n    if (fgets(password, sizeof(password), stdin) != 0)\n    {\n        password[strcspn(password), \"\\n\\r\"]) = '\\0';\n        validate_password(password);\n        memset(password, '\\0', sizeof(password));\n    }\n}\n</code></pre>\n\n<p>You've carefully zapped the password so it can't be found accidentally.</p>\n\n<p>Unfortunately, the compiler is allowed to omit that <code>memset()</code> call because <code>password</code> is not used again.  The rule for <a href=\"http://port70.net/~nsz/c/c11/n1570.html#K.3.7.4.1\" rel=\"nofollow noreferrer\"><code>memset_s()</code></a> means that the call cannot be omitted; the <code>password</code> variable <em>must</em> be zeroed, regardless of optimization.</p>\n\n<pre><code>memset_s(password, sizeof(password), '\\0', sizeof(password));\n</code></pre>\n\n<p>This is one of the few really useful features in <a href=\"https://stackoverflow.com/questions/372980/do-you-use-the-tr-24731-safe-functions\">Annex K</a>. (We can debate the merits of having to repeat the size.  However, in a more general case, the second size can be a variable, not a constant, and then the first size becomes a runtime protection against the variable being out of control.)</p>\n\n<p>Note that this requirement is placed on the compiler rather than the library.  The <code>memset_s()</code> function will behave correctly if it is called, just as <code>memset()</code> will behave correctly <em>if</em> it is called.  The rule under discussion says that the compiler <em>must</em> call <code>memset_s()</code>, even though it may be able omit the call to <code>memset()</code> because the variable is never used again.</p>\n"}], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 56565637, "answer_count": 1, "score": 12, "last_activity_date": 1560422198, "creation_date": 1560352677, "question_id": 56565539, "link": "https://stackoverflow.com/questions/56565539/memset-s-what-does-the-standard-mean-with-this-piece-of-text", "title": "memset_s(): What does the standard mean with this piece of text?", "body": "<p>In C11, K.3.7.4.1 <em>The memset_s function</em>, I found this bit of rather confusing text:</p>\n\n<blockquote>\n  <p>Unlike <code>memset</code>, any call to the <code>memset_s</code> function shall be evaluated strictly according to the rules of the abstract machine as described in (5.1.2.3). That is, any call to the <code>memset_s</code> function shall assume that the memory indicated by <code>s</code> and <code>n</code> may be accessible in the future and thus must contain the values indicated by <code>c</code>.</p>\n</blockquote>\n\n<p>This implies that <code>memset</code> is <em>not</em> (necessarily) \"evaluated strictly according to the rules of the abstract machine\". (The chapter referenced is 5.1.2.3 <em>Program execution</em>.)</p>\n\n<p><strong>I fail to understand the leeway the standard gives to <code>memset</code> that is explicitly ruled out here for <code>memset_s</code>, and what that would mean for an implementor of either function.</strong></p>\n"}, {"tags": ["c", "file", "segmentation-fault", "coredump"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1560347775, "post_id": 56563850, "comment_id": 99707350, "body": "You allready asked exactly the same question."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1560348693, "post_id": 56563850, "comment_id": 99707967, "body": "This appears to be <b>exactly</b> the same as your question from yesterday.  And on June 5:  <a href=\"https://stackoverflow.com/questions/56459467/segmentation-fault-core-dumped-while-trying-to-open-a-file\" title=\"segmentation fault core dumped while trying to open a file\">stackoverflow.com/questions/56459467/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 6, "last_activity_date": 1560347813, "creation_date": 1560347813, "answer_id": 56563958, "question_id": 56563850, "link": "https://stackoverflow.com/questions/56563850/segmentation-fault-core-dump-while-loading-a-file/56563958#56563958", "title": "segmentation fault (core dump) while loading a file", "body": "<p>In <code>list_create</code> you do</p>\n\n<pre><code>l-&gt;head=NULL;\n</code></pre>\n\n<p>Then in <code>load</code>you do</p>\n\n<pre><code>node tmp=l-&gt;head;\n</code></pre>\n\n<p>so now <code>tmp</code> is NULL.</p>\n\n<p>But later in <code>load</code> you dereference <code>tmp</code> (e.g. here <code>tmp-&gt;next= ....</code>). So you dereference a NULL pointer which causes your program to crash.</p>\n"}], "owner": {"reputation": 125, "user_id": 11600108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EFcNDwG4oJ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reuhyyeP5WPt8dd4KxYVxny1f83nA/mo/photo.jpg?sz=128", "display_name": "Azzarian", "link": "https://stackoverflow.com/users/11600108/azzarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1560348665, "answer_count": 1, "score": 0, "last_activity_date": 1560347813, "creation_date": 1560347499, "question_id": 56563850, "link": "https://stackoverflow.com/questions/56563850/segmentation-fault-core-dump-while-loading-a-file", "closed_reason": "Duplicate", "title": "segmentation fault (core dump) while loading a file", "body": "<p>I am trying to create a function which loads data from a .txt file but when it runs I always get a segmentation fault(core dumped) error. The file contains an unknown number of lines while each line has a string and an integer separated by tab.The list_create function just creates a data structure. The while loop in the end deletes the data structure, I did not include the code because I am sure it does not cause the problem but I also want show that I am freeing the data structure.It is worth mentioning that when is gdb used, I get:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x0000555555554c46 in load (filename=0x7fffffffe2ab \"students.txt\", \n    l=0x555555757260) at Student.c:92\n92                  tmp-&gt;next=malloc(sizeof(struct _node));\n</code></pre>\n\n<p>I have tried to change the feof with something else,use with and without ferror and change the mode for fopen to r instead of a.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;string.h&gt;\n#define MAXSTRING 50\ntypedef struct{\n    char name[MAXSTRING];\n    int id;\n} student;\ntypedef struct _node* node;\ntypedef struct _list* list;\n\nstruct _node {\n    student data;\n    node next;\n};\n\nstruct _list {\n    node head;\n    int size;\n};\n\n\nlist list_create(){\n    list l=(list) malloc(sizeof(struct _list));\n    assert(1);\n    l-&gt;head=NULL;\n    l-&gt;size=0;\n    return l;\n}\nvoid load(char*filename,list l){\n    FILE *fd=fopen(filename,\"r\");\n    node tmp=l-&gt;head;\n\n    if(fd==NULL){\n        printf(\"Error trying to open the file\\n\");\n                abort();\n    }\n    else{\n\n                while(!feof(fd)&amp;&amp;!ferror(fd)){\n\n        fscanf(fd,\"%s\\t%d\\n\",tmp-&gt;data.name,&amp;tmp-&gt;data.id);   \n                tmp-&gt;next=(node)malloc(sizeof(struct _node));\n        assert(tmp-&gt;next);\n        tmp=tmp-&gt;next;                \n        l-&gt;size++;\n            if (tmp==NULL){\n                printf(\"Error trying to allocate memory\\n\");\n                abort();\n            }\n                }      \n        }\n\n    tmp-&gt;next=NULL;\n    fclose(fd);\n}   \n\n\n\nint main(int argc,char *argv[]){ \nlist l=list_create();\nif(argc!=2){\n        printf(\"Input Error\\n\");\n    }\n    load(argv[1],l);\n\\*Some code*\\\n\n\nwhile (!list_empty(l)){\n                list_freenode(list_deletefirst(l));\n        }\n\n    free(l);\n        return 0;\n</code></pre>\n\n<p>I am expecting to load the file successfully, be able to edit its components and save them.</p>\n"}, {"tags": ["c", "pointers", "memory-management", "reference"], "comments": [{"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 1, "creation_date": 1560346803, "post_id": 56563607, "comment_id": 99706709, "body": "Likely nothing else overwrote it, that&#39;s why."}, {"owner": {"reputation": 1, "user_id": 7697493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f6b3b537a36f7f9e606f293f6f7b89d?s=128&d=identicon&r=PG&f=1", "display_name": "nehal choraria", "link": "https://stackoverflow.com/users/7697493/nehal-choraria"}, "reply_to_user": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1560347040, "post_id": 56563607, "comment_id": 99706883, "body": "If that is the case, is there any way I can ask the garbage collector to clear the space manually in order to check?"}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 1, "creation_date": 1560347066, "post_id": 56563607, "comment_id": 99706893, "body": "There&#39;s no gc in C."}], "owner": {"reputation": 1, "user_id": 7697493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f6b3b537a36f7f9e606f293f6f7b89d?s=128&d=identicon&r=PG&f=1", "display_name": "nehal choraria", "link": "https://stackoverflow.com/users/7697493/nehal-choraria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1560346795, "answer_count": 0, "score": 0, "last_activity_date": 1560346902, "creation_date": 1560346692, "question_id": 56563607, "link": "https://stackoverflow.com/questions/56563607/can-anyone-please-explain-the-output-of-the-following-code", "closed_reason": "Duplicate", "title": "Can anyone please explain the output of the following code?", "body": "<p>Following is the code which I wrote.\nAs per my concept, when the func function runs and allocates 100 value to i and later returns the address via a pointer it should print some garbage value as the memory allocated in stack of the function func is no longer available therefore ptr should now point to a garbage value.\nBut after running the code the output of i is 100 in both the cases. Can anyone please explain why?</p>\n\n<pre><code>    int* func(){\n\n    int i=100;\n    int *ptr = &amp;i;\n    printf(\"address is : %p\\n\",ptr);\n    printf(\"value is : %d\\n\",i);\n    return ptr;\n    }\n\n    void main(){\n\n    int x = 1;\n    int *r = func();\n    printf(\"%p : %d\", r , *r);\n\n    }\n</code></pre>\n\n<p>Following is the output received. <br>\naddress is : 0x7ffe4340efdc <br>\nvalue is : 100 <br>\n0x7ffe4340efdc : 100</p>\n"}, {"tags": ["c", "msvcrt", "crt"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1560346648, "post_id": 56563161, "comment_id": 99706609, "body": "Nothing dramatic, it maps directly to CreateFile&#39;s dwShareMode argument.  Consider the &quot;x&quot; mode argument in fopen(), available since C11, better than nothing."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1560348069, "post_id": 56563161, "comment_id": 99707547, "body": "@HansPassant <code>&quot;x&quot;</code> is for <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow noreferrer\"><code>O_EXCL</code></a> which only helps with file creation."}], "answers": [{"comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1560351453, "post_id": 56563470, "comment_id": 99709640, "body": "Share modes aren&#39;t needed to share files between processes but to control Windows&#39; mandatory locking. Linux has limited support for mandatory locking, too."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1560352070, "post_id": 56563470, "comment_id": 99710020, "body": "@nwellnhof, &quot;sharing&quot; is the term that many Microsoft docs use, including the doc referenced by the question.  Yes, it is implemented with mandatory locking, and yes, it is possible to perform mandatory locking on Linux (with considerable caveats), but that has so different of an interface and is so much less pervasive that I am entirely comfortable with my remarks as given."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 6, "last_activity_date": 1560346272, "creation_date": 1560346272, "answer_id": 56563470, "question_id": 56563161, "link": "https://stackoverflow.com/questions/56563161/how-exactly-fsopen-works/56563470#56563470", "title": "How exactly _fsopen() works?", "body": "<blockquote>\n  <p>How exactly _fsopen() works?</p>\n</blockquote>\n\n<p>You've linked to the docs.  It does what they say it does.  If you're asking how it is implemented then we cannot answer because that information is proprietary.</p>\n\n<blockquote>\n  <p>and Does linux also has similar way of opening files which prepares the file for subsequent shared reading or writing based on shflg?</p>\n</blockquote>\n\n<p>Linux does not have share modes.  That's a Windows quirk.  Under Linux or other Unix-like operating systems such as macOS, you don't need special flags or modes to share files between processes.</p>\n\n<p>Overall, <code>_fsopen()</code> is an MS-specific variant of the C standard library's <code>fopen()</code> function.  In addition to the share-mode flag, which is not relevant to other operating systems, it performs parameter validation in the manner of various other MS extension functions.  On Linux, one takes responsibility for validating one's own arguments and simply uses <code>fopen()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "is_accepted": false, "score": 1, "last_activity_date": 1560348556, "last_edit_date": 1560348556, "creation_date": 1560347968, "answer_id": 56564016, "question_id": 56563161, "link": "https://stackoverflow.com/questions/56563161/how-exactly-fsopen-works/56564016#56564016", "title": "How exactly _fsopen() works?", "body": "<p>On Windows files are opened using the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-createfilew\" rel=\"nofollow noreferrer\"><code>CreateFileW</code></a> function which uses the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winternl/nf-winternl-ntcreatefile\" rel=\"nofollow noreferrer\"><code>NtCreateFile</code></a> system call.</p>\n\n<p>Argument <code>dwShareMode</code> is used to specify file sharing policy and contains combination of flags <code>FILE_SHARE_DELETE</code>, <code>FILE_SHARE_READ</code> and <code>FILE_SHARE_WRITE</code> which are mapped to <code>shflag</code> argument of <code>_fsopen</code>.</p>\n\n<p>If you want to know how possible implementation of the function can look like, then first you should keep in mind that MSVCRT tries to support to some equivalent of POSIX file descriptor API. Then check the following functions:</p>\n\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/open-osfhandle?view=vs-2019\" rel=\"nofollow noreferrer\"><code>_open_osfhandle</code></a> allows you to convert NT <code>HANDLE</code> to POSIX-like file descriptor </li>\n<li><a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/fdopen-wfdopen?view=vs-2019\" rel=\"nofollow noreferrer\"><code>_fdopen</code></a> allows you to get a <code>FILE *</code> from a file descriptor (equivalent of POSIX <a href=\"https://linux.die.net/man/3/fdopen\" rel=\"nofollow noreferrer\"><code>fdopen</code></a> function).</li>\n</ul>\n\n<p>So the possible implementation can look like this (in pseudo code):</p>\n\n<pre><code>FILE *_fsopen(...)\n{\n    HANDLE hFile = CreateFileW(...);\n    int fd = _open_osfhandle(hFile, ...);\n    return _fdopen(fd, ...);\n}\n</code></pre>\n\n<p>Linux doesn't provide an equivalent of file sharing policy, so there is no equivalent.</p>\n\n<p>PS: Another related function is <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/sopen-wsopen?view=vs-2019\" rel=\"nofollow noreferrer\"><code>_wsopen</code></a> - combines <code>CreateFileW</code> and <code>_open_osfhandle</code>.</p>\n"}], "owner": {"reputation": 148, "user_id": 1174114, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ee177f5ee7fd0c9c3c3ee7948bee93d9?s=128&d=identicon&r=PG", "display_name": "user1174114", "link": "https://stackoverflow.com/users/1174114/user1174114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1560348556, "creation_date": 1560345257, "last_edit_date": 1560348142, "question_id": 56563161, "link": "https://stackoverflow.com/questions/56563161/how-exactly-fsopen-works", "title": "How exactly _fsopen() works?", "body": "<p>How exactly <code>_fsopen()</code> works? Does Linux also has similar way of opening files which prepares the file for subsequent shared reading or writing based on <code>shflag</code>?</p>\n\n<p>Referred article <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/fsopen-wfsopen?view=vs-2019\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 2, "creation_date": 1560345646, "post_id": 56563056, "comment_id": 99705962, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/410980/include-a-text-file-in-a-c-program-as-a-char\">&quot;#include&quot; a text file in a C program as a char&#91;&#93;</a> (in a more generic way)"}], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 6268689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c046808ca5e03e9dcffdcde33f81b37a?s=128&d=identicon&r=PG&f=1", "display_name": "AdamTL", "link": "https://stackoverflow.com/users/6268689/adamtl"}, "edited": false, "score": 0, "creation_date": 1560347811, "post_id": 56563776, "comment_id": 99707372, "body": "I guess you&#39;re right... Still, the question can have an exploratory aspect"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1560347228, "creation_date": 1560347228, "answer_id": 56563776, "question_id": 56563056, "link": "https://stackoverflow.com/questions/56563056/how-to-insert-the-content-of-a-h-file-into-string-for-runtime-compilation/56563776#56563776", "title": "How to insert the content of a .h file into string for runtime compilation?", "body": "<blockquote>\n  <p>Is there a way to \"paste\" the content of the file as a string using e.g. the preprocessor?</p>\n  \n  <p>[...]</p>\n  \n  <p>I'm trying not to use xxd or some other tool before building the program, I can do that fine by inserting the text with a python script or whatever. I'm just curious if a \"pure\" solution is possible.</p>\n</blockquote>\n\n<p>The C language does not have a built-in feature for including compile-time file contents as character array contents, whether in string literal form or any other kind of initializer form.  If you want that then you need to use some kind of code generator.</p>\n\n<p>But I'd like to challenge your assumptions for a moment.  You say,</p>\n\n<blockquote>\n  <p>Obviously struct.h won't be available for the runtime compilation.</p>\n</blockquote>\n\n<p>, but I don't see why that has to be true.  At least in principle, nothing prevents you from packaging the header file together with the program, installing it in a location known to the program (or that the program can discover or be configured for) and using it as a normal header.</p>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1560355366, "post_id": 56564170, "comment_id": 99711891, "body": "Watch out for commas in the argument to <code>STRINGIFY</code>."}, {"owner": {"reputation": 144, "user_id": 6268689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c046808ca5e03e9dcffdcde33f81b37a?s=128&d=identicon&r=PG&f=1", "display_name": "AdamTL", "link": "https://stackoverflow.com/users/6268689/adamtl"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1560369655, "post_id": 56564170, "comment_id": 99718255, "body": "Yeah... it also won&#39;t work for defines/includes in the argument from what I can tell"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1560371677, "post_id": 56564170, "comment_id": 99719071, "body": "that, too. The external utility to generate code is really the best solution. You could write your own in a couple of hours if you don&#39;t want to rely on <code>xxd</code> for whatever reason."}], "tags": [], "owner": {"reputation": 144, "user_id": 6268689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c046808ca5e03e9dcffdcde33f81b37a?s=128&d=identicon&r=PG&f=1", "display_name": "AdamTL", "link": "https://stackoverflow.com/users/6268689/adamtl"}, "is_accepted": false, "score": 0, "last_activity_date": 1560348483, "creation_date": 1560348483, "answer_id": 56564170, "question_id": 56563056, "link": "https://stackoverflow.com/questions/56563056/how-to-insert-the-content-of-a-h-file-into-string-for-runtime-compilation/56564170#56564170", "title": "How to insert the content of a .h file into string for runtime compilation?", "body": "<p>Found a trick with defines that'll do it <a href=\"https://stackoverflow.com/a/15237943/6268689\">here</a>.\nIt's a bit wacky, but it does exactly what I wanted.</p>\n\n<p>In struct.h:</p>\n\n<pre><code>#ifndef STRINGIFY\n#define STRINGIFY(x) x\n#endif\n\nSTRINGIFY (\nstruct example_struct\n{\n    int field_a;\n    int field_b;\n    int field_c;\n}; )\n#undef STRINGIFY\n</code></pre>\n\n<p>That way when it's included as a regular file, the define does nothing.\nIn main.c I can now insert the string as follows:</p>\n\n<pre><code>#define STRINGIFY(x) #x\nconst char * header_string = \n#include \"struct.h\"\n;\n#undef STRINGIFY\n</code></pre>\n\n<p>Code from \"struct.h\" will be included as a string literal.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1560348581, "creation_date": 1560348581, "answer_id": 56564204, "question_id": 56563056, "link": "https://stackoverflow.com/questions/56563056/how-to-insert-the-content-of-a-h-file-into-string-for-runtime-compilation/56564204#56564204", "title": "How to insert the content of a .h file into string for runtime compilation?", "body": "<p>It is not a language question, but some development systems could help. For example the Windows API has the notion of <em>resource</em> which allows to embed a file in an executable and access that <em>resource</em> as run time more or less as if it were an internal file.</p>\n\n<p>According to those other SO questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/4158900/3545273\">Embedding resources in executable using GCC</a></li>\n<li><a href=\"https://stackoverflow.com/q/4864866/3545273\">C/C++ with GCC: Statically add resource files to executable/library</a></li>\n<li><a href=\"https://stackoverflow.com/q/1997172/3545273\">Is there a Linux equivalent of Windows&#39; &quot;resource files&quot;?</a></li>\n</ul>\n\n<p>(and probably others: just follow the possible duplicate links), there are various ways with gcc on Linux from directly using the <code>ld</code> linker, to using external tools like ImageMagick.</p>\n\n<p>But IMHO there is nothing wrong in just including the .h include file into the pack of distributable files that are required to use the application.</p>\n"}], "owner": {"reputation": 144, "user_id": 6268689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c046808ca5e03e9dcffdcde33f81b37a?s=128&d=identicon&r=PG&f=1", "display_name": "AdamTL", "link": "https://stackoverflow.com/users/6268689/adamtl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1560355564, "answer_count": 3, "score": 1, "last_activity_date": 1560355612, "creation_date": 1560345011, "last_edit_date": 1560346684, "question_id": 56563056, "link": "https://stackoverflow.com/questions/56563056/how-to-insert-the-content-of-a-h-file-into-string-for-runtime-compilation", "closed_reason": "Duplicate", "title": "How to insert the content of a .h file into string for runtime compilation?", "body": "<p>I'm working on part of a C program where a user inputs a network filter string (think Wireshark).\nA filter string like, for example</p>\n\n<pre><code>(s-&gt;field_a == 1 || s-&gt;field_c &lt;= 10) &amp;&amp; ! (s-&gt;field_c % 2)\n</code></pre>\n\n<p>Is entered by the user and pasted into a function in a temporary file, which is compiled as a shared lib and loaded wit dlopen. The function simply evaluates the string.</p>\n\n<p>Now, the type of \"s\" struct is defined in some .h file, let's say struct.h.\nObviously struct.h won't be available for the runtime compilation. I can just paste its content to a string and <code>fprintf</code> it, but then I'd have to re-paste it whenever I change the header. </p>\n\n<p>I could write a script that'd do it during building, but maybe there's a better option.</p>\n\n<p>Is there a way to \"paste\" the content of the file as a string using e.g. the preprocessor?</p>\n\n<p>Some code to illustrate what I'm trying to do:</p>\n\n<p>struct.h: </p>\n\n<pre><code>struct example_struct\n{\n    int field_a;\n    int field_b;\n    int field_c;\n};\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;dlfcn.h&gt;\n#include \"struct.h\"\n\nint main(int argc, char *argv[]) {\n\n    struct example_struct s;\n\n    char filter_string[] = \"(s-&gt;field_a == 1 || s-&gt;field_c &lt;= 10) &amp;&amp; ! (s-&gt;field_c % 2)\"; // what the user can input\n\n    FILE *f = fopen(\"/tmp/prog.c\",\"w\");\n    // here I'd like to insert contents of struct.h into f\n    fprintf(f, \"int filter(struct example_struct * s) {\\n\");\n    fprintf(f, \"return (%s);}\\n\", filter_string);\n    fclose(f);\n\n    system(\"gcc /tmp/prog.c -o /tmp/prog.so -shared -fPIC\");\n\n    // load and use function...\n}\n</code></pre>\n\n<p>Edit:\nI don't need an actual representation as a char[], it can be a string literal.</p>\n\n<p>I'm trying not to use <code>xxd</code> or some other tool before building the program, I can do that fine by inserting the text with a python script or whatever. I'm just curious if a \"pure\" solution is possible.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1560344354, "post_id": 56562805, "comment_id": 99705061, "body": "You need to provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1560344504, "post_id": 56562805, "comment_id": 99705175, "body": "Did you get the input using <code>fgets()</code>? Please see <a href=\"https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input/28462221#28462221\">Removing trailing newline character from fgets() input</a>"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 1, "creation_date": 1560344506, "post_id": 56562805, "comment_id": 99705177, "body": "C doesn&#39;t support <i>false</i> keyword."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1560344577, "post_id": 56562805, "comment_id": 99705228, "body": "@snr <code>bool b = false; if (b == false) puts(&quot;false&quot;);</code>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1560344631, "post_id": 56562805, "comment_id": 99705269, "body": "@snr: <code>false</code> is defined in <code>&lt;stdbool.h&gt;</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560344640, "post_id": 56562805, "comment_id": 99705275, "body": "You&#39;ve not presented enough information for us to answer the question.  How is <code>str</code> declared?  How did it get its value?  What is <code>false</code>? All these questions would be answered by a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which wouldn&#39;t need to be very much bigger than what you&#39;ve already presented."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1560344652, "post_id": 56562805, "comment_id": 99705285, "body": "Check your <code>str</code> <code>01234567890</code> should be ok, when &#39;abcdef&#39; - no :)  btw. Try this <code>for (const char* c = str; &#39;\\0&#39; != *c || !isspace(*c); ++c) {  if (!isdigit(*c)) {         printf(&quot;wrong input! \\n&quot;);         exit(0);     }  }</code>"}, {"owner": {"reputation": 3, "user_id": 7889083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62b99571b3254dd76e9dabc9ab7d3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Kastritis JkProductio", "link": "https://stackoverflow.com/users/7889083/dimitris-kastritis-jkproductio"}, "edited": false, "score": 0, "creation_date": 1560344736, "post_id": 56562805, "comment_id": 99705338, "body": "i have an fgets actually its a client and im trying to check in the given string is integers and not letters etc"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1560344800, "post_id": 56562805, "comment_id": 99705378, "body": "<code>fgets</code> retains the newline which is not a digit."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560344823, "post_id": 56562805, "comment_id": 99705393, "body": "@DimitrisKastritisJkProductio, do not (merely) describe the code.  <i>Edit the question</i> to present the relevant details."}], "owner": {"reputation": 3, "user_id": 7889083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62b99571b3254dd76e9dabc9ab7d3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris Kastritis JkProductio", "link": "https://stackoverflow.com/users/7889083/dimitris-kastritis-jkproductio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1560344865, "answer_count": 0, "score": 0, "last_activity_date": 1560344621, "creation_date": 1560344239, "last_edit_date": 1560344621, "question_id": 56562805, "link": "https://stackoverflow.com/questions/56562805/i-cant-understand-what-i-did-wrong-with-cytype-and-boolean", "closed_reason": "Duplicate", "title": "I cant understand what i did wrong with cytype and boolean", "body": "<pre><code>int len;\nlen=strlen(str);\nfor (int i = 0; i &lt; len; i++) {\n    if (isdigit(str[i]) == false  ) {\n        printf(\"wrong input! \\n\");\n        exit(0);\n    }  \n }\n</code></pre>\n\n<p>I cant understand what i did wrong i just used isdigit and ctype lib bu i always get wrong input no matter what if my input is integer(sorry for bad english) </p>\n"}, {"tags": ["c", "assembly", "x86", "att", "rdtsc"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1560343833, "post_id": 56562569, "comment_id": 99704711, "body": "Is a <code>long long</code> actually supposed to be returned in <code>edx:eax</code> according to your (unknown) ABI? - also, CPUID is not needed here, nor the save of <code>ebx</code>, nor the stack frame. (well, the save of <code>ebx</code> is needed if you insist on <code>cpuid</code>)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1560344250, "post_id": 56562569, "comment_id": 99704998, "body": "@500-InternalServerError <code>cpuid</code> is needed as a synchronising instruction."}, {"owner": {"reputation": 15, "user_id": 9687647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431bff5a753eaf3409d52d31a6a758b5?s=128&d=identicon&r=PG&f=1", "display_name": "delvian", "link": "https://stackoverflow.com/users/9687647/delvian"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1560344590, "post_id": 56562569, "comment_id": 99705239, "body": "@500-InternalServerError You&#39;re right about stack frame, updated."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1560344728, "post_id": 56562569, "comment_id": 99705332, "body": "Use <code>lfence</code> instead of <code>cpuid</code> so you don&#39;t have to push/pop <code>ebx</code> in RDTSC.  But yes, in 32-bit calling conventions <code>long long</code> does return in <code>EDX:EAX</code>."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1560344894, "post_id": 56562569, "comment_id": 99705439, "body": "Why not use <a href=\"https://stackoverflow.com/questions/13772567/get-cpu-cycle-count\">the <code>__rdtsc</code> intrinsic</a>? But the real problem is in your <code>print</code> function, which does not follow SysV ABI. (In general, when you say &quot;I get a segmentation fault&quot; you need to provide details, because those details often tell you where you messed up.)"}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 3, "last_activity_date": 1560345329, "last_edit_date": 1560345329, "creation_date": 1560344960, "answer_id": 56563038, "question_id": 56562569, "link": "https://stackoverflow.com/questions/56562569/rdtsc-and-system-calls-sys-read-and-sys-write/56563038#56563038", "title": "RDTSC and system calls, sys_read and sys_write", "body": "<p>Your problem has nothing to do with RDTSC, and everything to do with your <code>print()</code> function.  Reducing your problem to a MCVE would have narrowed that down.</p>\n\n<p><code>movl $STDOUT, %ebx</code></p>\n\n<p><strong>You clobber EBX in your <code>print</code> function</strong>.  You save/restore it correctly in your rdtsc function, but not <code>print</code>.  EBX is a call-preserved register that the compiler will assume keeps its value across function calls.</p>\n\n<p>If you compiled a 32-bit PIE executable, it probably used EBX for a GOT pointer, and thus faults when trying to get the address of the string literal for <code>printf</code> or at some point earlier.</p>\n\n<hr>\n\n<p>Ironically, you don't need to save/restore EBX in your <code>rdtsc</code> function if you use <code>lfence</code> to serialize it instead of <code>cpuid</code>.</p>\n\n<p>Or better, use <code>_mm_lfence()</code> + <code>__rdtsc()</code> intrinsics instead of asm.  See <a href=\"https://stackoverflow.com/questions/13772567/get-cpu-cycle-count\">Get CPU cycle count?</a></p>\n"}], "owner": {"reputation": 15, "user_id": 9687647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431bff5a753eaf3409d52d31a6a758b5?s=128&d=identicon&r=PG&f=1", "display_name": "delvian", "link": "https://stackoverflow.com/users/9687647/delvian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 56563038, "answer_count": 1, "score": 1, "last_activity_date": 1560345329, "creation_date": 1560343529, "last_edit_date": 1560344620, "question_id": 56562569, "link": "https://stackoverflow.com/questions/56562569/rdtsc-and-system-calls-sys-read-and-sys-write", "title": "RDTSC and system calls, sys_read and sys_write", "body": "<p>I'm trying to count, using rdtsc, how many cycles it takes write something using sys_write. I was able to test the printf and scanf functions. They worked correctly, and now I have a problem with system calls.</p>\n\n<p>In my opinion, the problem is with %eax and %edx registers, because rdtsc saves the result in these registers. </p>\n\n<p>write.s</p>\n\n<pre><code>.data\nSYS_EXIT = 1\nSYS_WRITE = 4\nSTDOUT = 1\nEXIT_SUCCES = 0\ntext: .ascii  \"Hello from assembler\\n\"\ntextLength: .long   . - text\n\n.section .text\n.globl print\n.type print, @function             \nprint:\n\n\n  movl $SYS_WRITE, %eax\n  movl $STDOUT, %ebx\n  movl $text, %ecx\n  movl textLength, %edx\n  int $0x80\n\n  ret\n</code></pre>\n\n<p>rdtsc.s</p>\n\n<pre><code>.data\n.text\n\n.globl rdtsc\n\nrdtsc:\n   push %ebx\n   xor %eax, %eax\n   cpuid\n   rdtsc\n   pop %ebx\nret\n\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>\n#include &lt;stdio.h&gt;\n\nunsigned long long rdtsc();\nextern void print();\nunsigned long long startTime, stopTime, workingTime;\n\nint main (void)\n{\n            startTime = rdtsc();\n        print();\n        stopTime = rdtsc();\n        workingTime = stopTime - startTime;\n        printf(\"Cycles %llu\\n\", workingTime);\nreturn 0;\n}\n</code></pre>\n\n<p>When I run the program I get a Segmentation fault (core dumped) error.</p>\n"}, {"tags": ["c++", "c", "image-processing", "simd", "simd-library"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 6, "creation_date": 1560342889, "post_id": 56562326, "comment_id": 99704125, "body": "The same function goes backwards as well. It swaps B and R, the opposite of a swap is that same swap"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1560342897, "post_id": 56562326, "comment_id": 99704130, "body": "Isn&#39;t the conversion symmetric?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1560343101, "post_id": 56562326, "comment_id": 99704252, "body": "The documentation you linked even says &quot;also it performs backward conversion&quot;."}, {"owner": {"reputation": 71, "user_id": 5857381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbddf9346141ba87dc4ab4773886cae?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5857381/william"}, "edited": false, "score": 0, "creation_date": 1560343185, "post_id": 56562326, "comment_id": 99704309, "body": "So I can use the same (SimdBgrToRgb) function?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1560343333, "post_id": 56562326, "comment_id": 99704390, "body": "@William Unless the meaning of English words have changed dramatically recently, yes. (Note that the documentation for the result parameter is obviously wrong, though.)"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1560353689, "post_id": 56562326, "comment_id": 99710994, "body": "Equally, you could potentially use the somewhat more mainstream OpenCV library which has SIMD-optimised <code>cvtColor(image,COLOR_BGR2RGB)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 7, "last_activity_date": 1560342955, "creation_date": 1560342955, "answer_id": 56562398, "question_id": 56562326, "link": "https://stackoverflow.com/questions/56562326/fast-image-rgb-to-bgr-conversion/56562398#56562398", "title": "Fast image RGB to BGR conversion", "body": "<p>For 24bpp images, it's the same shuffle: reverse 3-byte chunks.  For 16bpp 5:6:5 image formats, it's again the same shuffle with symmetry around the middle field.</p>\n\n<p><strong>Use any of the existing BGR to RGB functions you found.</strong></p>\n"}], "owner": {"reputation": 71, "user_id": 5857381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbddf9346141ba87dc4ab4773886cae?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5857381/william"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "closed_date": 1560378125, "accepted_answer_id": 56562398, "answer_count": 1, "score": 1, "last_activity_date": 1560342955, "creation_date": 1560342746, "question_id": 56562326, "link": "https://stackoverflow.com/questions/56562326/fast-image-rgb-to-bgr-conversion", "closed_reason": "Not suitable for this site", "title": "Fast image RGB to BGR conversion", "body": "<p>I need to perform conversion of images from BGR to RGB image format and also backward conversion. I found <a href=\"http://github.com/ermig1979/Simd\" rel=\"nofollow noreferrer\">Simd Library</a> which contains function <a href=\"http://ermig1979.github.io/Simd/help/group__bgr__conversion.html#ga0ec8d4dc18f9cdbdaf2e300a101e8a40\" rel=\"nofollow noreferrer\">SimdBgrToRgb</a> which performs fast conversion from BGR to RGB.\nBut I didn't find any function for backward (RGB to BGR) conversion.</p>\n\n<p>Maight any to know any C/C++ library which allows to perform this conversion?</p>\n"}, {"tags": ["c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4943725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e1e7d2b2068e42ff7003662cec51f66?s=128&d=identicon&r=PG&f=1", "display_name": "Varun Kerenalli", "link": "https://stackoverflow.com/users/4943725/varun-kerenalli"}, "edited": false, "score": 0, "creation_date": 1560413334, "post_id": 56562378, "comment_id": 99730070, "body": "What arguments would i pass into the function? How would I pass the address of the pointers in my array of pointers into the function?"}], "tags": [], "owner": {"reputation": 46, "user_id": 11634123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/219fd61122db014c1a61a58ee5f2e10f?s=128&d=identicon&r=PG&f=1", "display_name": "brandonhewer", "link": "https://stackoverflow.com/users/11634123/brandonhewer"}, "is_accepted": false, "score": 1, "last_activity_date": 1560342874, "creation_date": 1560342874, "answer_id": 56562378, "question_id": 56562107, "link": "https://stackoverflow.com/questions/56562107/how-would-callback-occur-when-passing-array-of-pointers-into-a-function/56562378#56562378", "title": "How would callback occur when passing array of pointers into a function?", "body": "<p>The swap function that you are using takes each of its pointer arguments by value, however, for the desired functionality it is required to take them by (pointer) reference.</p>\n\n<p>The distinction to be made here is that swap takes values of type <code>team</code> by (pointer) reference (i.e., <code>team *</code>), but it takes values of type <code>team *</code> by value. Hence, it only swaps its local references, which is why it works if it is directly inserted into your <code>sort</code> function.</p>\n\n<p>Instead, consider the following implementation of <code>swap</code></p>\n\n<pre><code>void swap(team **t1, team **t2)\n{\n  team *t = *t1;\n  *t1 = *t2;\n  *t2 = t;\n}\n</code></pre>\n\n<p>In this case, <code>swap</code> takes (pointer) references to values of type <code>team *</code>, and swaps them. This will now work for the intended use case.</p>\n"}, {"tags": [], "owner": {"reputation": 1590, "user_id": 3796272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqSzP.jpg?s=128&g=1", "display_name": "Kampi", "link": "https://stackoverflow.com/users/3796272/kampi"}, "is_accepted": false, "score": 0, "last_activity_date": 1560343392, "last_edit_date": 1560343392, "creation_date": 1560343053, "answer_id": 56562425, "question_id": 56562107, "link": "https://stackoverflow.com/questions/56562107/how-would-callback-occur-when-passing-array-of-pointers-into-a-function/56562425#56562425", "title": "How would callback occur when passing array of pointers into a function?", "body": "<p>Your <code>swap</code> function do nothing, because C uses <code>call by value</code>. You have to pass a pointer to a pointer:</p>\n\n<pre><code>void swap(team **t1, team **t2)\n{\n  team **t = t1;\n\n  *t1 = *t2;\n  *t2 = t;\n}\n</code></pre>\n\n<p>Now you pass the address of the pointer into the function and manipulate the data at the given address.</p>\n\n<pre><code>t[0] is 2\nt[0] is 6\n</code></pre>\n\n<p>You can test it <a href=\"https://www.onlinegdb.com/online_c_compiler\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Edit: The previous one was faster :)</p>\n"}], "owner": {"reputation": 1, "user_id": 4943725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e1e7d2b2068e42ff7003662cec51f66?s=128&d=identicon&r=PG&f=1", "display_name": "Varun Kerenalli", "link": "https://stackoverflow.com/users/4943725/varun-kerenalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560343392, "creation_date": 1560342036, "last_edit_date": 1560342491, "question_id": 56562107, "link": "https://stackoverflow.com/questions/56562107/how-would-callback-occur-when-passing-array-of-pointers-into-a-function", "title": "How would callback occur when passing array of pointers into a function?", "body": "<p>When I pass an array of pointers through a sort function, I have another function for the swapping.</p>\n\n<p>What exact variables (of the array of pointers) do I pass into the swap function?</p>\n\n<p>Not using the swap as a function but actually just copying that directly into the sort works.</p>\n\n<pre><code>typedef struct team\n{\n  int val;\n} team;\n\nvoid swap(team *t1, team *t2);\nvoid sort(team *t[4]);\n\nvoid swap(team *t1, team *t2)\n{\n  team *t = t1;\n  t1 = t2;\n  t2 = t;\n}\n\nvoid sort(team *t[4])\n{\n  printf(\"t[0] is %d\\n\", t[0]);\n  // I have a sorting algorithm here that uses this swap\n  swap(t[0], t[1]);\n  printf(\"t[0] is %d\\n\", t[0]);\n}\n\nint main()\n{\n  team table[4] = {2, 6, 7, 8};\n  team *aop[4] = {&amp;table[0], &amp;table[1], &amp;table[2], &amp;table[3]};\n  sort(aop);\n  return 0;\n}\n</code></pre>\n\n<p>BTW I'm a total noob here, any other tips on how to ask a question or coding in general would be much appreciated.</p>\n"}, {"tags": ["php", "c"], "answers": [{"tags": [], "owner": {"reputation": 1199, "user_id": 2539616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eP6z3.jpg?s=128&g=1", "display_name": "Dammeul", "link": "https://stackoverflow.com/users/2539616/dammeul"}, "is_accepted": false, "score": 0, "last_activity_date": 1560342163, "creation_date": 1560342163, "answer_id": 56562145, "question_id": 56562045, "link": "https://stackoverflow.com/questions/56562045/how-can-we-run-a-c-code-using-php-code-written-and-uploaded-on-a-website/56562145#56562145", "title": "How can we run a C code using php code written and uploaded on a website?", "body": "<p>You either need a <code>static IP address</code> and to open up the ports you need on your PC both incoming and out going...</p>\n\n<p>... or you need a dynamic IP service that will pretty much give your PC a domain name you can access, and will update your IP everytime it changes (usually when restarting router). \n You will still need to open the ports you require. </p>\n\n<p>Many ISP will give you a static IP though, so if you have a static IP, you can just use that.</p>\n\n<p>DynIP is a good example of a dynamicIP address: <a href=\"https://www.dynip.com/\" rel=\"nofollow noreferrer\">https://www.dynip.com/</a></p>\n\n<p>Simple install, but it's paid for. There's probably free alternatives out there.</p>\n\n<p>Or... get a server on AWS or similar, and host the C script on there, and call that server, rather than your home PC.</p>\n"}, {"comments": [{"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1560343256, "post_id": 56562173, "comment_id": 99704348, "body": "Or you could make a client on the local machine which is then the interface between the server and the computer as most of those interactions is done."}], "tags": [], "owner": {"reputation": 2051, "user_id": 2863018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a27fc29c67f771ab6518b31388f2706f?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Hillier", "link": "https://stackoverflow.com/users/2863018/ben-hillier"}, "is_accepted": false, "score": 0, "last_activity_date": 1560342226, "creation_date": 1560342226, "answer_id": 56562173, "question_id": 56562045, "link": "https://stackoverflow.com/questions/56562045/how-can-we-run-a-c-code-using-php-code-written-and-uploaded-on-a-website/56562173#56562173", "title": "How can we run a C code using php code written and uploaded on a website?", "body": "<p>If I understand it correctly, you've got a <code>C</code> program on your local computer, that you want to run from a remote website. Your local PC is simply a client and not offering any services. That's not possible for security reasons. Imagine what the internet would be like if servers could start running programs on random PC's.</p>\n\n<p>You need to set up your local PC as a server, and offer the C program through it; possibly a web service running CGI.</p>\n\n<p>On another note, <code>192.168.188.24</code> is a local IP address, behind a router; I don't think your website can talk to it unless it's also behind the same router.</p>\n"}], "owner": {"reputation": 9, "user_id": 11635903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jkXzREeGf5k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcvCcQdaeseCMlDBeP92Sc-sIR_vw/mo/photo.jpg?sz=128", "display_name": "Wolfenstein", "link": "https://stackoverflow.com/users/11635903/wolfenstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560342226, "creation_date": 1560341825, "question_id": 56562045, "link": "https://stackoverflow.com/questions/56562045/how-can-we-run-a-c-code-using-php-code-written-and-uploaded-on-a-website", "title": "How can we run a C code using php code written and uploaded on a website?", "body": "<p>I am working on a task that requires running a C code on my PC using a PHP code on a website created by me so how can that be possible using the IP and Port Number of my PC ?</p>\n\n<p>I've searched for some codes to do that task but haven't find enough what i demand , it's quite similar to this in that question : <a href=\"https://stackoverflow.com/questions/35178912/php-sending-message-via-tcp-ip?fbclid=IwAR37XCjm4xkMjpeuhipEtKS1a3CIbltvZ5auyyrHbxrkI55OgnA3ilU4bbc\">PHP sending message via TCP/IP</a>\nbut not exactly and the code inlink is : </p>\n\n<pre><code>&lt;?php \n$errno = NULL;\n$error = NULL;\n\nif (!$handle = @fsockopen(\"192.168.188.24\", \"49419\", $errno, $error, 10))\n{\n   die(\"Fehler (\".$errno.\"): \".$error);\n}\n\nfwrite($handle, \"ON\\r\\n\");\nfclose($handle);\n?&gt;\n</code></pre>\n\n<p>Well, since not working with Arduino , i hope it's possible to compile and run code remotely from the website</p>\n"}, {"tags": ["c", "pointers", "scope", "atoi"], "answers": [{"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1560341609, "creation_date": 1560341609, "answer_id": 56561978, "question_id": 56561942, "link": "https://stackoverflow.com/questions/56561942/is-this-pointer-return-safe/56561978#56561978", "title": "Is this pointer return safe?", "body": "<p><code>*out = l;</code> doesn't set <code>out</code>, it sets <code>*out</code>. I.e., whatever it is that <code>out</code> is already pointing at, because it <em>dereferences</em> the pointer. So long as a valid address is passed in, the function will modify a non-local object.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1560341667, "creation_date": 1560341667, "answer_id": 56561996, "question_id": 56561942, "link": "https://stackoverflow.com/questions/56561942/is-this-pointer-return-safe/56561996#56561996", "title": "Is this pointer return safe?", "body": "<p>The <code>out</code> parameter is a pointer which points to the variable <code>i</code> in <code>main</code>.  When you later do this:</p>\n\n<pre><code>*out = l;\n</code></pre>\n\n<p>This does not change <code>out</code> but <strong>dereferences</strong> it and changes the variable it points to, namely <code>i</code> in <code>main</code>.  So when the function returns <code>i</code> is modified.</p>\n\n<p>If <code>out</code> pointed to a local variable in <code>str2int</code>, then you would have the problem of a pointer pointing to invalid memory.</p>\n"}], "owner": {"reputation": 1, "user_id": 11636586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc165aa2403d2ec26b8cc101ab2901bf?s=128&d=identicon&r=PG&f=1", "display_name": "trbasat", "link": "https://stackoverflow.com/users/11636586/trbasat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 56561996, "answer_count": 2, "score": -1, "last_activity_date": 1560341667, "creation_date": 1560341491, "question_id": 56561942, "link": "https://stackoverflow.com/questions/56561942/is-this-pointer-return-safe", "title": "Is this pointer return safe?", "body": "<p>A few days ago I wanted to find a safe alternative to <code>atoi</code> and found the following code as a response to <a href=\"https://stackoverflow.com/questions/7021725/how-to-convert-a-string-to-integer-in-c\">this</a> SO question:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef enum {\n    STR2INT_SUCCESS,\n    STR2INT_OVERFLOW,\n    STR2INT_UNDERFLOW,\n    STR2INT_INCONVERTIBLE\n} str2int_errno;\n\nstr2int_errno str2int(int *out, char *s, int base) {\n    char *end;\n    if (s[0] == '\\0' || isspace(s[0]))\n        return STR2INT_INCONVERTIBLE;\n    errno = 0;\n    long l = strtol(s, &amp;end, base);\n    /* Both checks are needed because INT_MAX == LONG_MAX is possible. */\n    if (l &gt; INT_MAX || (errno == ERANGE &amp;&amp; l == LONG_MAX))\n        return STR2INT_OVERFLOW;\n    if (l &lt; INT_MIN || (errno == ERANGE &amp;&amp; l == LONG_MIN))\n        return STR2INT_UNDERFLOW;\n    if (*end != '\\0')\n        return STR2INT_INCONVERTIBLE;\n    *out = l;\n    return STR2INT_SUCCESS;\n}\n\n\nint main(void) {\n  int i;\n    /* Lazy to calculate this size properly. */\n    char s[256];\n\n    /* Simple case. */\n    assert(str2int(&amp;i, \"11\", 10) == STR2INT_SUCCESS);\n    assert(i == 11);\n    printf(\"%i\", i);\n\n    /* Negative number . */\n    assert(str2int(&amp;i, \"-11\", 10) == STR2INT_SUCCESS);\n    assert(i == -11);\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/12923949/11636586\">Original code source</a></p>\n\n<hr>\n\n<p>Isn't this unsafe since the <em>out</em> pointer is set to a variable that has been defined locally within the function? <br>\nWouldn't that mean that once the conversion has been done and the local variable goes out of scope it could get overwritten and we couldn't rely on the value anymore? </p>\n\n<p>I might just be missing something, however currently I do not understand how this is a safe way of going about this. </p>\n"}, {"tags": ["c", "char", "segmentation-fault"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 4, "creation_date": 1560340660, "post_id": 56561687, "comment_id": 99702713, "body": "Yes and the problem is unrelated to the line you posted.... And probably related to the next <code>unsigned char message_unicode[(sizeof(message_text) + 1) * 2];</code> line.."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1560340680, "post_id": 56561687, "comment_id": 99702734, "body": "Don&#39;t <i>think</i>, by using a debugger to catch the crash you can <i>know</i> where the problem is and can start to figure out what might cause it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1560340776, "post_id": 56561687, "comment_id": 99702799, "body": "And as a hint: Doing <code>sizeof</code> on a pointer returns the size of the <i>pointer</i>, and not whatever it might point to."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1560340792, "post_id": 56561687, "comment_id": 99702818, "body": "The linked code looks quite bad overall and probably shouldn&#39;t be used for any purpose..."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1560341366, "post_id": 56561687, "comment_id": 99703184, "body": "I agree with @Lundin. I checked the <a href=\"https://github.com/gammu/gammu/blob/ed2fec4a382e7ac4b5dfc92f5b10811f76f4817e/libgammu/misc/coding/coding.c#L336\" rel=\"nofollow noreferrer\">EncodeUnicode</a> function, and it just doesn&#39;t work."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1560378605, "post_id": 56561687, "comment_id": 99721122, "body": "DO not post links to code.  Rather copy/paste the code directly into the question."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1560378741, "post_id": 56561687, "comment_id": 99721163, "body": "regarding: <code>char *message_text = argv[2];</code>  All this does is assign the pointer <code>message_text</code> with the address of the third parameter in <code>argv[]</code>"}], "owner": {"reputation": 23, "user_id": 4755210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e6b95c97b9d188e44c291ee935f8bca?s=128&d=identicon&r=PG&f=1", "display_name": "classxor", "link": "https://stackoverflow.com/users/4755210/classxor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560340580, "creation_date": 1560340580, "question_id": 56561687, "link": "https://stackoverflow.com/questions/56561687/c-char-length-more-than-255-sigsegv-error", "title": "C - char length more than 255 - SIGSEGV error", "body": "<p>I run this code - <a href=\"https://github.com/jesobreira/gammu-sms-tools/blob/master/gammu-long-sms.c\" rel=\"nofollow noreferrer\">https://github.com/jesobreira/gammu-sms-tools/blob/master/gammu-long-sms.c</a>\non my raspberry to send SMS.</p>\n\n<p>If the SMS have more than 255 chars, it gives an error \"SIGSEGV\".</p>\n\n<p>I think it is on line 61:</p>\n\n<pre><code>char *message_text = argv[2];\n</code></pre>\n\n<p>Is possible to have string in this variable longer than 255 chars?</p>\n"}, {"tags": ["c#", "c", "marshalling"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1560344031, "post_id": 56561549, "comment_id": 99704839, "body": "It is standard UB, a <a href=\"https://en.wikipedia.org/wiki/Dangling_pointer\" rel=\"nofollow noreferrer\">dangling pointer bug</a>, sA.S refers to a local variable whose lifetime ends when the function returns.  Tends to go unnoticed in a C program, if you&#39;re lucky, but definitely misbehaves in C# when the stack frames used by the pinvoke marshaler code overwrite the memory formerly occupied by the old stack frame."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1560344405, "post_id": 56561549, "comment_id": 99705103, "body": "This requires a major redesign.  The memory management is too painful to consider keeping the StructB*, both in C and C#, consider <code>StructB S</code> instead."}, {"owner": {"reputation": 1, "user_id": 1863296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f25ce086712300caf5dff8b2b59e11d?s=128&d=identicon&r=PG", "display_name": "Pavel Vavlis Vavra", "link": "https://stackoverflow.com/users/1863296/pavel-vavlis-vavra"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1560406222, "post_id": 56561549, "comment_id": 99726632, "body": "Thank you. And what if is StructB pointer to linked list? Is it possible or redesign requires?"}], "owner": {"reputation": 1, "user_id": 1863296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f25ce086712300caf5dff8b2b59e11d?s=128&d=identicon&r=PG", "display_name": "Pavel Vavlis Vavra", "link": "https://stackoverflow.com/users/1863296/pavel-vavlis-vavra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560340116, "creation_date": 1560340116, "question_id": 56561549, "link": "https://stackoverflow.com/questions/56561549/marshaling-compose-c-c-structure-in-c", "title": "Marshaling compose c/c++ structure in c#", "body": "<p>I need to solve this problem. I have structure (StructA) which contains pointer to second structure. The second structure has integer variable. </p>\n\n<p>In code below I have C procedure(GetStrucure()). I want to set integer value into variable ValB in StructB. StructA contains pointer to StructB. GetStrucure() returns StructA. This works correctly.   </p>\n\n<p>In C# code I want to call GetStrucure() form C dll. ValA is returned correctly but ValB return incorrect value 3207020. Why is value from pointer not correct? </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct StructB\n{\n   int ValB;\n};\n\nstruct StructA\n{   \n   StructB* S;\n   int ValA;\n};\n</code></pre>\n\n<p>and procedure:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>extern \"C\"\n{\n    __declspec(dllexport) StructA GetStrucure() \n    {   \n        StructA sA;\n        StructB sB;\n        sB.ValB = 5;    \n\n        sA.S = &amp;sB;\n        sA.ValA = 6;\n        return sA;\n    }\n}    \n</code></pre>\n\n<p>and C# code:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>[StructLayout(LayoutKind.Sequential]   \npublic struct StructA\n{        \n    public StructB S;\n    public int ValA;        \n}\n\n[StructLayout(LayoutKind.Sequential)]\npublic struct StructB\n{\n   [MarshalAs(UnmanagedType.I4)]\n   public int ValB;\n}\n\nclass Program\n{\n   [DllImport(\"TestLib.dll\", CallingConvention = CallingConvention.Cdecl)]\n   static extern StructA GetStrucure();        \n\n   static void Main(string[] args)\n   {\n      StructA a = GetStrucure();            \n   }\n}\n\n</code></pre>\n\n<p>I too tried </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>[StructLayout(LayoutKind.Sequential]   \npublic struct StructA\n{        \n    public IntPtr S;\n    public int ValA;        \n}\n\n</code></pre>\n\n<p>and </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>StructB b = (StructB)Marshal.PtrToStructure(a.S, typeof(StructB));\n</code></pre>\n\n<p>But I got different nonsensical value...</p>\n\n<p>Please can any body help me?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1560337258, "post_id": 56560548, "comment_id": 99700731, "body": "Arguments are passed by value. This means that if you change them in the function they only change locally. You need to pass a pointer to them and then change the value through that."}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1560337621, "post_id": 56560548, "comment_id": 99700941, "body": "Can you give me an example in my code or something"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 3, "creation_date": 1560337733, "post_id": 56560548, "comment_id": 99701007, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19483459/why-function-will-not-change-variable\">Why function will not change variable?</a>"}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1560338177, "post_id": 56560548, "comment_id": 99701247, "body": "I tried changing str[] to *str[] and then editing it in gets(&amp;str) but still getting that zeroes"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1560338437, "post_id": 56560548, "comment_id": 99701397, "body": "That\u2019s not the variable you\u2019re trying to <i>return</i> a value in"}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1560339051, "post_id": 56560548, "comment_id": 99701760, "body": "So pretty much i need to get that string in main and then get it into void password by using pointers * and &amp; not sure how it works It is my homework so I am pretty new to this"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1560339664, "post_id": 56560548, "comment_id": 99702129, "body": "We stopped using <code>gets</code> over 20 years ago, so you need a new source of learning. In addition, you are using it wrong, which is why you get compiler messages there."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1560343758, "post_id": 56560548, "comment_id": 99704663, "body": "<code>if(*str[i] &gt;= &#39;A&#39; &amp;&amp; *str[i] &lt;= &#39;Z&#39;)</code> is not guaranteed to work.  Only the digits <code>&#39;0&#39;</code> through <code>&#39;9&#39;</code> are guaranteed to be represented consecutively.  You should use <code>isupper()</code> (and <code>islower()</code> to detect lower-case letters.)  See <a href=\"https://port70.net/~nsz/c/c11/n1570.html#5.2.1\" rel=\"nofollow noreferrer\"><b>5.2.1 Character sets</b> of the C standard</a>."}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560351484, "post_id": 56560548, "comment_id": 99709655, "body": "Oh I never heard from my teacher about isupper() and islower() can you give me more details about it"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560351104, "post_id": 56562521, "comment_id": 99709412, "body": "Thanks for help! This helped me alot of understanding that I can use strlen() for it I am trying to learn stuff from other people and from online tutorials. I removed =&quot;Pa$$w0/2d&#39; and replaced it with scanf(&quot; %s&quot;,&amp;str)."}, {"owner": {"reputation": 168, "user_id": 11345020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d3d43d49cd02d98fc22e7036e9c977?s=128&d=identicon&r=PG&f=1", "display_name": "ooj-001", "link": "https://stackoverflow.com/users/11345020/ooj-001"}, "reply_to_user": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560351782, "post_id": 56562521, "comment_id": 99709848, "body": "@MarinSpudi\u0107 Hope you understand better now. Also, you&#39;ll get a warning by doing <code>scanf(&quot;%s&quot;, &amp;str)</code> if you first initialize your <code>str</code> by <code>char str[100]</code> : %s expects a <code>char *</code> when you give it a <code>char **</code>. So you have to remove the <code>&amp;</code>. (You can see the warnings when compiling with gcc by giving the flags -Wall -Wextra)"}], "tags": [], "owner": {"reputation": 168, "user_id": 11345020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d3d43d49cd02d98fc22e7036e9c977?s=128&d=identicon&r=PG&f=1", "display_name": "ooj-001", "link": "https://stackoverflow.com/users/11345020/ooj-001"}, "is_accepted": true, "score": 1, "last_activity_date": 1560343377, "creation_date": 1560343377, "answer_id": 56562521, "question_id": 56560548, "link": "https://stackoverflow.com/questions/56560548/how-to-fix-problem-counting-letters-symbols-numbers-in-string-using-function-to/56562521#56562521", "title": "How to fix problem counting letters,symbols,numbers in string using function to check number", "body": "<p>Few points : 1) There is no need to pass i as argument since you can get the length of your string with <code>strlen</code> from <code>string.h</code> (which returns a <code>size_t</code> type and not an <code>int</code>). 2) You passed your arguments as value, which means that they'll only change locally to your function. 3) Don't use the gets function that is not safe, you may want to use <code>fgets</code> or <code>scanf</code>.</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid password(char *str, int *together, int *numbers, int *symbols, int *uppercase, int *lowercase){\n    for(size_t i=0; i&lt;strlen(str); i++){\n        if(str[i] &gt;= '0' &amp;&amp; str[i] &lt;= '9') (*numbers)++;\n        if(str[i] &gt;= 'A' &amp;&amp; str[i] &lt;= 'Z') (*uppercase)++;\n        if(str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z') (*lowercase)++;\n        if(str[i] &gt;= '!' &amp;&amp; str[i] &lt;= '/') (*symbols)++;\n    }\n    *together = (*uppercase) + (*lowercase);\n}\n\nint main(void){\n\n    char str[100] = \"Pa$$w0/2d\";\n    int together = 0;\n    int numbers = 0;\n    int symbols = 0;\n    int uppercase = 0;\n    int lowercase = 0;\n\n    password(str, &amp;together, &amp;numbers, &amp;symbols, &amp;uppercase, &amp;lowercase);\n    printf(\"Letters = %d\\n\", together);\n    printf(\"Uppercase  = %d\\n\", uppercase);\n    printf(\"Lowercase = %d\\n\", lowercase);\n    printf(\"Numbers = %d\\n\", numbers);\n    printf(\"Symbols = %d\\n\", symbols)\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 56562521, "answer_count": 1, "score": 0, "last_activity_date": 1560343377, "creation_date": 1560337112, "last_edit_date": 1560339430, "question_id": 56560548, "link": "https://stackoverflow.com/questions/56560548/how-to-fix-problem-counting-letters-symbols-numbers-in-string-using-function-to", "title": "How to fix problem counting letters,symbols,numbers in string using function to check number", "body": "<p>I want to count letters,numbers,symbols using function password Seems like it doesn't count out numbers correctly because i get 0 for every printf in the end</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid password(char * str[],int together,int numbers,int symbols,int i,int uppercase,int lowercase);\nint main()\n{\n    char str[100];\n    int together, numbers, symbols, i,uppercase,lowercase;\n\n        together = numbers = symbols = i = uppercase = lowercase = 0;\n\n    printf(\"password : \");\n    gets(&amp;str);\n    printf(\" %s\", str);\n    password(&amp;str,together,numbers,symbols,i,uppercase,lowercase);\n    printf(\"Number of letters = %d\\n\", together);\n    printf(\"number uppercase  = %d\\n\", uppercase);\n    printf(\"Number lowecase  = %d\\n\", lowercase);\n    printf(\"numbers = %d\\n\", numbers);\n    printf(\"Simboli = %d\", symbols);\nif (together &gt;= 8 &amp;&amp; numbers &gt;= 2){\n    printf(\"\\nPassword is correct\");\n}else{\n    printf(\"\\nPassword isn't correct\");\n}\n    return 0;\n}\nvoid password(char * str[],int together,int numbers,int symbols,int i,int uppercase,int lowercase){\n     while(*str[i]!='\\0')\n    {\n        if((*str[i]&gt;='a' &amp;&amp; *str[i]&lt;='z') || (*str[i]&gt;='A' &amp;&amp; *str[i]&lt;='Z'))\n        {\n            together++;\n        }\n        else if(*str[i]&gt;='0' &amp;&amp; *str[i]&lt;='9')\n        {\n            numbers++;\n        }\n        else if(*str[i] &gt;= 'A' &amp;&amp; *str[i] &lt;= 'Z') {\n         uppercase++;\n        }\n        else if(*str[i] &gt;= 'a' &amp;&amp; *str[i] &lt;= 'z'){\n            lowercase++;\n        }\n        else\n        {\n            symbols++;\n        }\n\n        i++;\n    }\n}\n</code></pre>\n\n<p>I get zeroes for every number,letter &amp; symbol program runs without any error I tried changing some stuff but I am currently learning C so it is hard for me!</p>\n"}, {"tags": ["c", "function-call", "order-of-execution"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9970808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0-p96AWkVyg/AAAAAAAAAAI/AAAAAAAAJAg/9EgMd9NubZY/photo.jpg?sz=128", "display_name": "Sanket Wankhede", "link": "https://stackoverflow.com/users/9970808/sanket-wankhede"}, "edited": false, "score": 0, "creation_date": 1560333186, "post_id": 56559261, "comment_id": 99698554, "body": "Thanks for your reply can i find more detail article on this topic?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 73, "user_id": 9970808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0-p96AWkVyg/AAAAAAAAAAI/AAAAAAAAJAg/9EgMd9NubZY/photo.jpg?sz=128", "display_name": "Sanket Wankhede", "link": "https://stackoverflow.com/users/9970808/sanket-wankhede"}, "edited": false, "score": 1, "creation_date": 1560333209, "post_id": 56559261, "comment_id": 99698571, "body": "Just Google some of the terms I&#39;ve mentioned in the answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1560333379, "post_id": 56559261, "comment_id": 99698656, "body": "This is the very definition of undefined behavior. Undefined behavior is something that is not specified (defined) by the standard. Each compiler can choose how to process."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1560333462, "post_id": 56559261, "comment_id": 99698701, "body": "@Nico238: I&#39;m not sure about that. Why not answer along those lines and see how the community reacts to it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1560333670, "post_id": 56559261, "comment_id": 99698795, "body": "@Bathsheba Because your answer is correct : the order of evaluation is unspecified, and that is what is called undefined behavior."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1560333690, "post_id": 56559261, "comment_id": 99698807, "body": "@Nico238; Without this comment stream starting to sound like the script of a poor Christmas pantomime, &quot;Oh no they&#39;re not.&quot;. Perhaps ask a question along these lines yourself? I&#39;d upvote it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 8, "creation_date": 1560335209, "post_id": 56559261, "comment_id": 99699626, "body": "@Nico238 &quot;3.4.4 <b>1 unspecified behavior</b> use of an unspecified value, or other behavior where this International Standard provides two or more possibilities and imposes no further requirements on which is chosen in any instance. <b>2 EXAMPLE</b> An example of unspecified behavior is the order in which the arguments to a function are evaluated.&quot; As distinct from &quot;3.4.3 <b>1 undefined behavior</b>&quot;."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 3, "creation_date": 1560337170, "post_id": 56559261, "comment_id": 99700687, "body": "@Nico238: The C standard explicitly defines \u201cundefined behavior\u201d to mean behavior upon which the standard imposes <b>no</b> requirements. If, in some situation, the behavior imposes partial but not total requirements, such as requiring evaluations be performed separately (not interleaved at all) but in any order, that is not undefined behavior as the standard defines it."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1560337739, "post_id": 56559261, "comment_id": 99701010, "body": "Historically, on Intel, parameters to a function were pushed right-to-left, thus implying right-to-left evaluation. This was (is?) used by the <code>vararg</code> macros to get the next parameter of a parameter list whose length is a priori not known."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 73, "user_id": 9970808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0-p96AWkVyg/AAAAAAAAAAI/AAAAAAAAJAg/9EgMd9NubZY/photo.jpg?sz=128", "display_name": "Sanket Wankhede", "link": "https://stackoverflow.com/users/9970808/sanket-wankhede"}, "edited": false, "score": 0, "creation_date": 1560337763, "post_id": 56559261, "comment_id": 99701023, "body": "@SanketWankhede This might be helpful: <a href=\"https://stackoverflow.com/questions/44770170/what-is-the-difference-between-a-sequence-point-and-operator-precedence\">What is the difference between a sequence point and operator precedence?</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1560338231, "post_id": 56559261, "comment_id": 99701280, "body": "@Nico238 Undefined behavior and unspecified behavior are both formal terms and they are different. <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">Undefined, unspecified and implementation-defined behavior</a>"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1560341519, "post_id": 56559261, "comment_id": 99703276, "body": "@PaulOgilvie The evaluation order does not necessarily always match the order in which arguments are pushed on the stack, even if a non-optimizing compiler would naturally follow it. For instance, GCC and Clang do not evaluate the arguments in the same order even when targeting the very same historical Intel architecture you were talking about: <a href=\"https://gcc.godbolt.org/z/6l75w1\" rel=\"nofollow noreferrer\">gcc.godbolt.org/z/6l75w1</a>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1560343121, "post_id": 56559261, "comment_id": 99704269, "body": "@PascalCuoq, with &quot;historically&quot; I meant some 20-30 years ago. Only later the standard came along and defined this to be undefined."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 12, "last_activity_date": 1560335326, "last_edit_date": 1560335326, "creation_date": 1560333077, "answer_id": 56559261, "question_id": 56559231, "link": "https://stackoverflow.com/questions/56559231/why-is-my-program-evaluating-arguments-right-to-left/56559261#56559261", "title": "Why is my program evaluating arguments right-to-left?", "body": "<p>The order of the evaluation of the function arguments is <em>unspecified</em> in C. (Note there's no undefined behaviour here; the arguments are not allowed to be evaluated concurrently for example.)</p>\n\n<p>Typically the evaluation of the arguments is either from right to left, or from left to right.</p>\n\n<p>As a rule of thumb don't call the same function twice in a function parameter list if that function has side-effects (as it does in your case), or if you pass the same parameter twice which allows something in the calling site to be modified (e.g. passing a pointer).</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5415148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a739c7548401896ab352217f504f9d34?s=128&d=identicon&r=PG&f=1", "display_name": "Abraham Le", "link": "https://stackoverflow.com/users/5415148/abraham-le"}, "is_accepted": false, "score": 0, "last_activity_date": 1592695653, "creation_date": 1592695653, "answer_id": 62492830, "question_id": 56559231, "link": "https://stackoverflow.com/questions/56559231/why-is-my-program-evaluating-arguments-right-to-left/62492830#62492830", "title": "Why is my program evaluating arguments right-to-left?", "body": "<p><a href=\"https://en.cppreference.com/w/c/language/eval_order\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/c/language/eval_order</a></p>\n<p>Before C11, you must follow Rule (2)</p>\n<pre><code>There is a sequence point after evaluation of the first (left) operand and \nbefore evaluation of the second (right) operand of the following binary \noperators: &amp;&amp; (logical AND), || (logical OR), and , (comma).\n</code></pre>\n<p>Because arguments are considered separated by comma operator before C11. This is not optimal because arguments are pushed right to left on some platform. Thus, C11 adds Rule (12) making it unspecified.</p>\n<pre><code>A function call that is not sequenced before or sequenced after another \nfunction call is indeterminately sequenced (CPU instructions that \nconstitute different function calls cannot be interleaved, even if the \nfunctions are inlined)\n</code></pre>\n<p>Even C99 designated initializers still go back to Rule (2), where earlier (left) initializers are resolved before later (right) initializers relative to the comma operator. That is, until C11 adds Rule (13) making it unspecified.</p>\n<pre><code>In initialization list expressions, all evaluations are indeterminately \nsequenced\n</code></pre>\n<p>In other words, before Rule (12) and Rule (13), the comma operator from Rule (2) is the specified behavior. Rule (2) leads to inefficient code that cannot be optimized on some platform. There is not enough registers if the number of structure member or function parameter exceed some threshold. That is, &quot;Register Pressure&quot; becomes an issue.</p>\n<p>Historically, aggregate type initializers and function arguments falls back to the comma operator. In C11, they specifically add the definition that commas in those aggregate type initializers and function arguments are not &quot;comma operators&quot; so that Rule (12) and Rule (13) makes sense, and that Rule (2) is not applied.</p>\n"}], "owner": {"reputation": 73, "user_id": 9970808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0-p96AWkVyg/AAAAAAAAAAI/AAAAAAAAJAg/9EgMd9NubZY/photo.jpg?sz=128", "display_name": "Sanket Wankhede", "link": "https://stackoverflow.com/users/9970808/sanket-wankhede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 56559261, "answer_count": 2, "score": 7, "last_activity_date": 1592695653, "creation_date": 1560332970, "last_edit_date": 1560365567, "question_id": 56559231, "link": "https://stackoverflow.com/questions/56559231/why-is-my-program-evaluating-arguments-right-to-left", "title": "Why is my program evaluating arguments right-to-left?", "body": "<p>I am learning C so I tried the below code and am getting an output of <code>7,6</code> instead of <code>6,7</code>. Why?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint f1(int);\nvoid main()\n{\n    int b = 5;\n    printf(\"%d,%d\", f1(b), f1(b));\n}\nint f1(int b)\n{\n    static int n = 5;\n    n++;\n    return n;\n}\n</code></pre>\n"}, {"tags": ["c", "inline-assembly", "neon"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1560333183, "post_id": 56559223, "comment_id": 99698553, "body": "<code>using a shell command</code> what shell command? Which compiler, compiler options, compiler version, how did you compile the code?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1560335301, "post_id": 56559223, "comment_id": 99699681, "body": "Remove parts of the code until the message no longer appears. Then investigate that part."}, {"owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "edited": false, "score": 1, "creation_date": 1560335864, "post_id": 56559223, "comment_id": 99699980, "body": "are you building for <code>arm-v7a</code> only?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1560341166, "post_id": 56559223, "comment_id": 99703044, "body": "side-note:  <code>char array1[16]</code> and 2 don&#39;t need to be <code>volatile</code>, the <code>&quot;memory&quot;</code> clobber on the asm statement is sufficient even though you just pass pointers to them, not use them as <code>&quot;m&quot;</code> input operands."}, {"owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "edited": false, "score": 0, "creation_date": 1560343130, "post_id": 56559223, "comment_id": 99704280, "body": "When assigned properly, a single <code>vst3.16</code> instruction would replace the 12 <code>vst1.16</code>s inside the loop. And the you can simply replace the 8 <code>vst1.16</code>s after the loop by <code>vst1.16 {d4, d5}, [r6]!</code>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7097864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584daaa66996f6dcffdb8dd4ee4c4dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Jiankang Liu", "link": "https://stackoverflow.com/users/7097864/jiankang-liu"}, "edited": false, "score": 0, "creation_date": 1560404236, "post_id": 56562353, "comment_id": 99725992, "body": "Thanks for your detailed explanations.I changed my code as your suggestions,and  the codes can be passed when compling.however, there is  a error as follows:"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 35, "user_id": 7097864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584daaa66996f6dcffdb8dd4ee4c4dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Jiankang Liu", "link": "https://stackoverflow.com/users/7097864/jiankang-liu"}, "edited": false, "score": 0, "creation_date": 1560404420, "post_id": 56562353, "comment_id": 99726044, "body": "@JiankangLiu: debugging your loop once you get it to compile is a totally separate problem.  (unless you introduced a bug while applying this answer).  You should probably ask a separate debugging question to avoid cluttering up this generic answer to the general question that&#39;s hopefully useful to future readers."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 3, "last_activity_date": 1560345168, "last_edit_date": 1560345168, "creation_date": 1560342813, "answer_id": 56562353, "question_id": 56559223, "link": "https://stackoverflow.com/questions/56559223/c-embedded-assembly-error-asm-operand-has-impossible-constraints/56562353#56562353", "title": "C embedded assembly error: \u2018asm\u2019 operand has impossible constraints", "body": "<p>You declare clobbers on most of the integer registers, but then you ask for 13 different input variables.  32-bit ARM only has 16 registers, and 2 of those are PC and SP leaving only 14 at best really general purpose registers.</p>\n\n<p>We can test that too many clobbers + operands are the problem by removing all the clobbers on <code>r0</code>.. <code>r12</code>; this lets it compile (into incorrect code!!). <a href=\"https://godbolt.org/z/Z6x78N\" rel=\"nofollow noreferrer\">https://godbolt.org/z/Z6x78N</a>  This is <em>not</em> the solution because it introduces huge bugs, it's just how I confirmed that this is the problem.</p>\n\n<p><strong>Any time your inline asm template starts with <code>mov</code> to copy from an input register operand into a hard-coded register, you're usually doing it wrong.</strong>  Even if you had enough registers, the compiler is going to have to emit code to get the variable into a register, then your hand-written asm uses another <code>mov</code> to copy it for no reason.</p>\n\n<p>See <a href=\"https://stackoverflow.com/tags/inline-assembly/info\">https://stackoverflow.com/tags/inline-assembly/info</a> for more guides.</p>\n\n<p>Instead ask the compiler for the input in that register in the first place with <code>register int foo asm(\"r0\")</code>, or better <strong>let the compiler do register allocation</strong> by using <code>%0</code> or the equivalent named operand like <code>%[src1]</code> instead of a hard-coded <code>r0</code> everywhere inside your asm template.  The syntax for naming an operand is <code>[name] \"r\" (C_var_name)</code>.  They don't <em>have</em> to match, but they don't have to be unique either; it's often convenient to use the same asm operand name as the C var name.</p>\n\n<p>Then you can remove the clobbers on most of the GP registers.  You do need to tell the compiler about any input registers you <em>modify</em>, e.g. by using a <code>\"+r\"</code> constraint instead of <code>\"r\"</code> (and then not using that C variable after the asm modifies it).  Or use an <code>\"=r\"</code> output constraint and a matching input constraint like <code>\"0\" (var)</code> to put that input in the same register as output operand 0.  <code>\"+r\"</code> is much easier in a wrapper function where the C variable is not used afterwards anyway.</p>\n\n<p>You can remove the clobbers on vector registers if you use dummy output operands to get the compiler to do register allocation, but it's basically fine if you just leave those hard-coded.</p>\n\n<pre><code>asm(  // \"mov        r0, %[src1]; \"   // remove this and just use %[src1] instead of r0\n\n      \"... \\n\\t\"\n      \"VST1.16     {d30[0]}, [%[dstData]]!   \\n\\t\"  //restore img_temp[m][n] to pointer data\n      \"... \\n\\t\"\n\n    : [src1]\"+&amp;r\"(src1), [src2]\"+&amp;r\"(src2), [dstData]\"+&amp;r\"(dstData),\n      [dstSum]\"+&amp;r\"(dstSum), [height]\"+&amp;r\"(height)\n\n    : [temp_comp1] \"r\"(temp_comp1),  [niter] \"r\"(numofiterations),\n      [temp_comp2] \"r\"(temp_comp2), [temp_comp3] \"r\"(temp_comp3),\n      ...\n    : \"memory\", \"cc\", all the q and d regs you use.  // but not r0..r13\n   );\n</code></pre>\n\n<p>You can look at the compiler's asm output to see how it filled in the <code>%0</code> and <code>%[name]</code> operands in the asm template you gave it.  Use <code>\"instruction \\n\\t\"</code> to make this readable, <code>;</code> puts all the instructions onto the same line in the asm output.  (C string-literal concatenation doesn't introduce newlines).</p>\n\n<p>The early-clobber declarations on the read/write operands makes sure that none of the input-only operands share a register with them, even if they have the compiler knows that <code>temp_comp1 == height</code> for example.  Because the original value of <code>temp_comp1</code> still needs to be readable from the register <code>%[temp_comp1]</code>, even after something has modified <code>%[height]</code>.  So they can't both be <code>r4</code> for example.   Otherwise, without the <code>&amp;</code> in <code>\"+&amp;r\"</code>, the compiler <em>could</em> choose that to gain efficiency if outputs are only written after all inputs are read.  (e.g. when wrapping a single instruction, like GNU C inline asm is designed to do efficiently).</p>\n\n<hr>\n\n<p>side-note:  <code>char array1[16]</code> and 2 don't need to be <code>volatile</code>; the <code>\"memory\"</code> clobber on the asm statement is sufficient even though you just pass pointers to them, not use them as <code>\"m\"</code> input operands.</p>\n"}], "owner": {"reputation": 35, "user_id": 7097864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584daaa66996f6dcffdb8dd4ee4c4dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Jiankang Liu", "link": "https://stackoverflow.com/users/7097864/jiankang-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 56562353, "answer_count": 1, "score": 1, "last_activity_date": 1560345168, "creation_date": 1560332930, "question_id": 56559223, "link": "https://stackoverflow.com/questions/56559223/c-embedded-assembly-error-asm-operand-has-impossible-constraints", "title": "C embedded assembly error: \u2018asm\u2019 operand has impossible constraints", "body": "<p>When I embedded assembly in C language, I met the following  error compiling these code using a shell command in ubuntu linux 14.04.</p>\n\n<pre><code>    IFR_temp_measure.cpp: In function \u2018void BlockTempClc(char*, char*, \n     int, int, char, int, int, int, int*, int, int*, int)\u2019:\n     IFR_temp_measure.cpp:1843:6: error: \u2018asm\u2019 operand has impossible \n    constraints);\n    ^\n    &amp;make: *** [IFR_temp_measure.o] Error 1\n</code></pre>\n\n<p>or the  position of the error code line 1842\uff0c1843 is respond to the code </p>\n\n<pre><code>    :\"cc\", \"memory\",\"q0\", \"q1\", \"q2\", \"q3\", \"q4\", \"q5\", \"q6\", \"q7\", \"q8\", \"q10\", \"q11\", \"q12\", \"q13\", \"q14\", \"q15\",\"r0\", \"r1\", \"r3\", \"r4\", \"r5\",\"r6\",\"r8\", \"r9\", \"r10\", \"r12\"\n            );\n</code></pre>\n\n<p>I have tried to  solve this problem,but Few references are available online\uff0cthere is a linker:\n<a href=\"https://stackoverflow.com/questions/25579759/gcc-inline-assembly-what-does-asm-operand-has-impossible-constraints-mean\">Gcc inline assembly what does &quot;&#39;asm&#39; operand has impossible constraints&quot; mean?</a> and <a href=\"http://www.ethernut.de/en/documents/arm-inline-asm.html\" rel=\"nofollow noreferrer\">http://www.ethernut.de/en/documents/arm-inline-asm.html</a>\nbut not helped. \n   My code is as follows:</p>\n\n<pre><code>    void BlockTempClc(char* src1,char* src2,int StrideDist,int height,char temp_comp1,int numofiterations,int temp_comp2,int temp_comp3,int *dstData,int width,int *dstSum,int step)\n{\n\n            volatile char array1[16] = {0,0,0,0,0,0,0,0,\n                                       0,0,0,0,0,0,0,0};\n            volatile char array2[16] = {0,0,1,0,2,0,3,0,\n                                       4,0,5,0,6,0,7,0};\n            asm volatile(   \n            \"mov        r0, %0; \" //image[0]    \n            \"mov        r1, %1; \"  //image[1] \n            \"mov        r12,%11; \" //m\n            \"mov        r3, %4; \" //n\n            \"mov        r4, %2; \" //store data\n            \"mov        r8, %12; \" //step down for loading next line of image\n            \"mov        r5, %6; \" //numofiterations\n            \"mov        r6, %3; \" //out\n\n            \"mov.8 r9,%5;\"//isp_temp_comp\n            \"mov.8 r10,%7;\"//led_temp_comp\n            \"mov.8 r11,%8;\"//fac_temp_comp\n\n\n            \"vdup.8 d20,r9;\"//copy arm register value isp_temp_comp to neon  register\n            \"VMOV.S16 q9, d20; \" //isp_temp_comp transfer to signed short type\n\n            \"VLD1.8     {d16,d17}, [%9];\"//q8  array1 sum\n            \"VLD1.8     {d6,d7}, [%10];\"//q3  array2\n\n            \"VMOV.S16   q0, #256; \"\n            \"VMOV.S16   q1, #2730; \" //Assign immediate number 2730 to each 16 bits of d1       \n\n            \".loop:;\"           \n\n            \"vdup.8 d21,r10;\"//copy arm register value led_temp_comp to neon  register \n            \"vdup.8 d22,r11;\"//copy arm register value fac_temp_comp to neon  register \n\n            \"VLD1.8    d14, [r1],r8; \"    // q7  *(image[1] + tmp + n)  Load: Load Picture Pixels   r6:move step  ?\n            \"VLD1.8    d15, [r0],r8 \"    // *(image[0] + tmp + n)  Load: Load Picture Pixels            \n\n            \"PLD        [r1]; \" //Preload: one line in cache\n            \"PLD        [r0]; \"  //?\n\n            \"VMOV.S16  q5, d14; \" //q5    8*16  transfer to signed short type:*(image[1] + tmp + n) \n            \"VMOV.S16  q6, d15; \" //q6    8*16  transfer to signed short type : *(image[0] + tmp + n) \n\n            \"VADD.S16  q12,q6, q9;\"//*(image[0] + tmp + n) + isp_temp_comp              \n            \"VMOV.S16  q6, d21; \" //led_temp_comp\n            \"VADD.S16  q13,q12, q6;\"//*(image[0] + tmp + n) + isp_temp_comp+ + led_temp_comp\n            \"VMOV.S16  q6, d22; \" //fac_temp_comp\n            \"VADD.S16  q14,q13, q6;\"//*(image[0] + tmp + n) + isp_temp_comp+ + led_temp_comp+ fac_temp_comp\n            \"VSUB.S16  q15,q14, q1;\"//*(image[0] + tmp + n) + isp_temp_comp+ + led_temp_comp+ fac_temp_comp-2730\n            \"VMLA.S16   q15, q5, q0;\"//img_temp[m][n]=*(image[0] + tmp + n) + isp_temp_comp+ + led_temp_comp+ fac_temp_comp-2730+*(image[1] + tmp + n) *256 \n\n\n            \"VADD.S16  q2,q15, q8;\"//sum                \n            \"VMOV.S16    q8, q2; \" //q8\n\n\n            \"vdup.8 d20,r3;\"//n \n            \"vdup.8 d21,r12;\"//m\n\n            \"VMOV.S16  q11, d20; \" //n\n            \"VMOV.S16  q10, d21; \" //m\n\n            \"VADD.S16  q4,q3, q11;\"//(n,n+1,n+2,n+3,n+4,n+5,n+6,n+7)\n            \"VADD.S16  q7,q3, q10;\"//(m,m+1,m+2,m+3,m+4,m+5,m+6,m+7)  q7\n\n\n            \"VST1.16     {d30[0]}, [r4]!; \"//restore img_temp[m][n] to pointer data\n            \"VST1.16     {d14[0]}, [r4]!; \"//restore m\n            \"VST1.16     {d8[0]}, [r4]!; \"  //restore n\n\n            \"VST1.16     {d30[1]}, [r4]!; \"     \n            \"VST1.16     {d14[1]}, [r4]!; \"\n            \"VST1.16     {d8[1]}, [r4]!; \"\n\n            \"VST1.16     {d30[2]}, [r4]!; \"     \n            \"VST1.16     {d14[2]}, [r4]!; \"\n            \"VST1.16     {d8[2]}, [r4]!; \"\n\n            \"VST1.16     {d30[3]}, [r4]!; \"     \n            \"VST1.16     {d14[3]}, [r4]!; \"\n            \"VST1.16     {d8[3]}, [r4]!; \"//response to array\n\n            \"subs        r5, r5, #1; \"   // decrement: numofinteration -= 1;\n            \"bne        .loop; \"        // Branch If Not Zero; to .loop\n            \"VST1.16     {d4[0]}, [r6]!; \"//q2 refer to sum restore the final result to pointer out\n            \"VST1.16     {d4[1]}, [r6]!; \"\n            \"VST1.16     {d4[2]}, [r6]!; \"\n            \"VST1.16     {d4[3]}, [r6]!; \"\n            \"VST1.16     {d5[0]}, [r6]!; \"\n            \"VST1.16     {d5[1]}, [r6]!; \"\n            \"VST1.16     {d5[2]}, [r6]!; \"\n            \"VST1.16     {d5[3]}, [r6]!; \"\n\n            :\"+r\"(src1),\"+r\"(src2),\"+r\"(dstData),\"+r\"(dstSum),\"+r\"(height)\n            :\"r\"(temp_comp1),\"r\"(numofiterations),\"r\"(temp_comp2),\"r\"(temp_comp3),\n                \"r\"(array1),\"r\"(array2), \"r\"(width),\"r\"(step)\n            :\"cc\", \"memory\",\"q0\", \"q1\", \"q2\", \"q3\", \"q4\", \"q5\", \"q6\", \"q7\", \"q8\", \"q10\", \"q11\", \"q12\", \"q13\", \"q14\", \"q15\",\"r0\", \"r1\", \"r3\", \"r4\", \"r5\",\"r6\",\"r8\", \"r9\", \"r10\", \"r12\"\n            );\n}\n</code></pre>\n\n<p>I suppose the problem maybe output operands lists or output operands lists.\nWhats cause the error of my code?and how to solve it?</p>\n"}, {"tags": ["c", "firebase", "openssl", "firebase-cloud-messaging", "xmpp"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 11309957, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iRza4QwJyaM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdkzOeczhjVxe1xqTiS38pGBrhONA/mo/photo.jpg?sz=128", "display_name": "Tubif Fux", "link": "https://stackoverflow.com/users/11309957/tubif-fux"}, "is_accepted": false, "score": 0, "last_activity_date": 1560403759, "creation_date": 1560403759, "answer_id": 56573876, "question_id": 56559145, "link": "https://stackoverflow.com/questions/56559145/unable-to-connect-my-app-server-to-fcm-xmpp-server/56573876#56573876", "title": "Unable to Connect my App Server to FCM XMPP Server", "body": "<p>The app-server to FCN-XMPP should be:</p>\n\n<pre><code>&lt;auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='PLAIN'&gt;&lt;/auth&gt;\n</code></pre>\n\n<p>The server will then respond with an empty string. That's your signal to now send the encoded data:</p>\n\n<pre><code>&lt;response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"&gt;encodedData&lt;/response&gt;\n</code></pre>\n\n<p>for which the encodedData should be the encoded version of:<br>\n\\0sendID@fcm-xmpp.googleapis.com\\0serverKey  </p>\n\n<p>If this is successful you will receive the success-tag.</p>\n\n<p>At least all this is the case on my client which i implemented myself.</p>\n"}], "owner": {"reputation": 11, "user_id": 10317602, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154515222427868/picture?type=large", "display_name": "Lee Chua", "link": "https://stackoverflow.com/users/10317602/lee-chua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560591434, "creation_date": 1560332671, "last_edit_date": 1560335845, "question_id": 56559145, "link": "https://stackoverflow.com/questions/56559145/unable-to-connect-my-app-server-to-fcm-xmpp-server", "title": "Unable to Connect my App Server to FCM XMPP Server", "body": "<p>I am trying to connect to FCM XMPP server using Openssl TLS</p>\n\n<p>I have registered a project and have a Server Key and Sender ID. I follow the notes in <a href=\"https://firebase.google.com/docs/cloud-messaging/auth-server#authorize_an_xmpp_connection\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/cloud-messaging/auth-server#authorize_an_xmpp_connection</a></p>\n\n<p>All my codes are in C using openssl.</p>\n\n<p>Following are the communications between my App Server and FCM-XMPP Server\nApp Server to FCM-XMPP:</p>\n\n<pre><code>&lt;stream:stream to='fcm-xmpp.googleapis.com' version='1.0' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'&gt;\n</code></pre>\n\n<p>from FCM-XMPP Server:</p>\n\n<pre><code>&lt;stream:stream from=\"fcm-xmpp.googleapis.com\" id=\"E1204B9D567A6A8A\" version=\"1.0\" xmlns:stream=\"http://etherx.jabber.org/streams\" xmlns=\"jabber:client\"&gt;\n&lt;stream:features&gt;&lt;mechanisms xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"&gt;&lt;mechanism&gt;X-OAUTH2&lt;/mechanism&gt;&lt;mechanism&gt;X-GOOGLE-TOKEN&lt;/mechanism&gt;&lt;mechanism&gt;PLAIN&lt;/mechanism&gt;&lt;/mechanisms&gt;&lt;/stream:features&gt;\n</code></pre>\n\n<p>App Server to FCM-XMPP:</p>\n\n<pre><code>&lt;auth mechanism='PLAIN' xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;base 64 encoding of &lt;null&gt;sendID@fcm-xmpp.googleapis.com&lt;null&gt;serverKey&lt;/auth&gt;\n</code></pre>\n\n<p>from FCM-XMPP Server:</p>\n\n<pre><code>&lt;failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"&gt;&lt;not-authorized/&gt;&lt;/failure&gt;\n</code></pre>\n\n<p>I have a App Server communicating with GCM-XMPP Server. I am running basically the same code and I get</p>\n\n<pre><code>&lt;success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"/&gt;\n</code></pre>\n"}, {"tags": ["c++", "c", "malloc", "language-lawyer", "new-operator"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 3, "creation_date": 1560332088, "post_id": 56558944, "comment_id": 99697927, "body": "you are not using &quot;placement new&quot;"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1560332115, "post_id": 56558944, "comment_id": 99697946, "body": "1. You&#39;re asking about placement <code>new</code>, but there is no placement <code>new</code> in your code. Where are you trying to add it, and why? 2. A name like <code>_Ctype</code> (starting with unerscore followed by cap) is reserved for the compiler/library in C++, and must not be used in user code."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1560332128, "post_id": 56558944, "comment_id": 99697956, "body": "It is never safe to <code>new</code> a C type... however, you have wrapped the C struct inside of a class... so you are using <code>new</code> on a C++ class, which is fine."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 2, "creation_date": 1560332238, "post_id": 56558944, "comment_id": 99698015, "body": "@DavidHoelzer Erm, what? There are no &quot;C types&quot; in C++ code, really. But note that the OP is using <code>new</code> of the struct which they (it seems) intend to be accessible from C, not on the class <code>A</code>. (Not that it matters, it would be fine either way)."}, {"owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1560333278, "post_id": 56558944, "comment_id": 99698607, "body": "@bolov Sorry, bad terminology, I fixed it now"}, {"owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1560333350, "post_id": 56558944, "comment_id": 99698640, "body": "@Angew The question deals with a mixing of C and C++ code, assuming that I do not have control on the C part (e.g., by using a C library, see the linked question)"}, {"owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1560333462, "post_id": 56558944, "comment_id": 99698700, "body": "@DavidHoelzer The struct _Ctype is defined in the C header."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1560336196, "post_id": 56558944, "comment_id": 99700161, "body": "When the contents of the .h file are compiled by C++ compiler, then it is C++ code (brcause that is what C++ compiler processes)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1560338705, "post_id": 56558944, "comment_id": 99701562, "body": "This is not really mixed C and C++. It seems all your translation units are C++."}, {"owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1560343037, "post_id": 56558944, "comment_id": 99704219, "body": "@hyde Yes, in the above example all the code is compiled by a c++ compiler. But I am thinking of a case of using a C library, which includes obj.h as header and it is compiled with a C compiler."}], "answers": [{"comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 2, "creation_date": 1560602854, "post_id": 56559642, "comment_id": 99795887, "body": "it&#39;s worth noting they can use <code>std::unique_ptr</code> and <code>std::make_unique</code> to follow rule of zero anyway. Even if this requires a custom deallocator they can just <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">write a deleter.</a>"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 4, "last_activity_date": 1560334230, "creation_date": 1560334230, "answer_id": 56559642, "question_id": 56558944, "link": "https://stackoverflow.com/questions/56558944/using-operator-new-in-mixed-c-and-c-code/56559642#56559642", "title": "Using operator new in mixed c and c++ code", "body": "<p>As long as the deallocation only ever happens under your control and using a <code>delete</code> expression, there is no problem at all. The C code interacting with the structure does not care how it was allocated.</p>\n\n<p>Side note: the name <code>_Ctype</code> is not legal in C++, as it starts with an underscore followed by an uppercase letter. Such names (as well as names containing double underscore) are reserved for the compiler &amp; standard library.</p>\n"}], "owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 56559642, "answer_count": 1, "score": 1, "last_activity_date": 1560600953, "creation_date": 1560331961, "last_edit_date": 1560600953, "question_id": 56558944, "link": "https://stackoverflow.com/questions/56558944/using-operator-new-in-mixed-c-and-c-code", "title": "Using operator new in mixed c and c++ code", "body": "<p>Consider a program with mixed C and C++ code. The C++ part contains a class which dinamically allocates a C-style <code>typedef struct</code>. Minimal example:</p>\n\n<p><strong>obj.h</strong> (C-code)</p>\n\n<pre><code>typedef struct _Ctype {\n  int i;\n} Ctype;\n</code></pre>\n\n<p><strong>class.hpp</strong> (C++ code)</p>\n\n<pre><code>struct A {\n  struct _Ctype *x;\n  A(int i);\n  ~A();\n};\n</code></pre>\n\n<p><strong>class.cpp</strong> (C++ code)</p>\n\n<pre><code>#include \"class.hpp\"\n\nextern \"C\" {\n#include \"obj.h\"\n}\n\n\nA::A(int i)\n{\n  x = new struct _Ctype;\n  x-&gt;i = i;\n}\n\nA::~A()\n{\n  delete(x);\n}\n</code></pre>\n\n<p><strong>main.cpp</strong> (C++ code, main program)</p>\n\n<pre><code>#include \"class.hpp\"\n\nint main()\n{\n  A a(3);\n  return 0;\n}\n</code></pre>\n\n<p>(The rationale for this design originates from <a href=\"https://stackoverflow.com/a/52094011/8769985\">this answer</a>)</p>\n\n<p>Is it safe (i.e., no UB) to use a <code>new</code> expression to allocate a C-style type <code>struct _Ctype</code>, as in the code above, or should one better use the C-style <code>malloc</code>/<code>free</code>?</p>\n\n<p><strong>class.cpp</strong> (C++ code, alternative)</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include \"class.hpp\"\n\nextern \"C\" {\n  #include \"obj.h\"\n  }\n\n\nA::A(int i)\n{\n  x = (struct _Ctype *)malloc(sizeof(struct _Ctype));\n  x-&gt;i = i;\n}\n\nA::~A()\n{\n  free(x);\n}\n</code></pre>\n\n<p><strong>ADDITION</strong></p>\n\n<p>To clarify the question after some comments below: In the minimal example above, all the code is compiled with a C++ compiler. One can however think to use the C++ code in conjunction with a C library. The question can then be reformulated as follows:</p>\n\n<ul>\n<li>If I allocate memory for an C-style <code>typedef struct</code> via a C++ code, can the C library <em>safely</em> use the allocated variable? If so, are the alternatives given above both safe?</li>\n</ul>\n\n<p>Note that one could also think to allocate the memory for <code>Ctype</code> through a C function, so that the C++ code only manages a pointer to it, for example:</p>\n\n<p><strong>obj.h</strong> (C-code)</p>\n\n<pre><code>typedef struct _Ctype {\n  int i;\n} Ctype;\n\nCtype *allocate_Ctype();\nvoid deallocate_Ctype(Ctype* p);\n</code></pre>\n\n<p><strong>obj.C</strong> (C-code)</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include \"obj.h\"\n\nCtype *allocate_Ctype()\n{\n   return (Ctype *)malloc(sizeof(Ctype));\n}\n\nvoid deallocate_Ctype(Ctype *p)\n{\n   free(p);\n}\n</code></pre>\n\n<p><strong>class.cpp</strong> (C++ code)</p>\n\n<pre><code>#include \"class.hpp\"\n\nextern \"C\" {\n#include \"obj.h\"\n}\n\n\nA::A(int i)\n{\n  x = allocate_Ctype();\n  x-&gt;i = i;\n}\n\nA::~A()\n{\n  deallocate_Ctype(x);\n}\n</code></pre>\n\n<p>(Note: of course the copy constructor and operator assignment of class A need to be properly defined, the code serves as illustration of the question)</p>\n"}, {"tags": ["c", "linux-kernel", "dma", "v4l2"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1560358478, "post_id": 56558517, "comment_id": 99713327, "body": "You are messing up a lot of things. First of all DMA address and physical address are different things. Second, <code>dma_alloc_coherent()</code> returns a continuous area of mapped address space. It also returns you a virtual address of the area."}, {"owner": {"reputation": 21, "user_id": 11236403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0aa46a6a6aa8531981b298f0d8cd0d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/11236403/andrea"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1560407986, "post_id": 56558517, "comment_id": 99727362, "body": "I know that <code>dma_alloc_coherent ()</code> returns a continuous memory area (17 MB in my case) and it is precisely for this reason that I use it, the hardware that writes into the ram needs to have a contiguous allocated area and two physical addresses, one for the luma and a second for the chroma. The address for the luma is the <code>dma_addr_t</code>, but now I need to obtain the second address. My idea, to obtain the second address, it&#39;s to do something like this <code>dma_addr_t + offset </code>."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1560408463, "post_id": 56558517, "comment_id": 99727578, "body": "Physical addresses are not coming from <code>dma_alloc_coherent()</code>. You have to figure out what exactly your hardware needs."}, {"owner": {"reputation": 577, "user_id": 656347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/f15mA.jpg?s=128&g=1", "display_name": "Sanchayan Maity", "link": "https://stackoverflow.com/users/656347/sanchayan-maity"}, "edited": false, "score": 0, "creation_date": 1560414002, "post_id": 56558517, "comment_id": 99730426, "body": "Have a look at the dma_to_phys function if that is what you need."}, {"owner": {"reputation": 21, "user_id": 11236403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0aa46a6a6aa8531981b298f0d8cd0d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/11236403/andrea"}, "edited": false, "score": 1, "creation_date": 1560417240, "post_id": 56558517, "comment_id": 99732184, "body": "Maybe now I&#39;ve understood, the hardware needs the physical address of the ram, with physical I mean the address range that I reserved in device tree to the driver. In my case I&#39;ve reserved 500MB of memory from the address &#39;0x0E000000&#39;. So to the hw I need to pass the address &#39;0x0E000000&#39;, that corresponds to the &#39;dma_addr_t&#39; returned by &#39;dma_alloc_coherent()&#39;. This is the DMA address, so to get the next DMA addresses I can just use &#39;0x0E000000 + offset&#39;."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1560489612, "post_id": 56558517, "comment_id": 99760683, "body": "No, hardware most likely needs a <b>bus</b> address of the RAM, which is returned by <code>dma_alloc_coherent()</code>. Physical address of the same chunk of memory may be different (it depends on several factors, such as CPU architecture, presence of IOMMU)."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1560489962, "post_id": 56558517, "comment_id": 99760777, "body": "Now, with this knowledge, you may read a documentation on the hardware to understand if simple offset will work in your case (most likely)."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1579648955, "post_id": 56558517, "comment_id": 105834774, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/59847162/get-pfn-from-dma-address-dma-addr-t\">Get PFN from DMA address (dma_addr_t)?</a>"}], "owner": {"reputation": 21, "user_id": 11236403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0aa46a6a6aa8531981b298f0d8cd0d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/11236403/andrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560331171, "creation_date": 1560330557, "last_edit_date": 1560331171, "question_id": 56558517, "link": "https://stackoverflow.com/questions/56558517/get-physical-address-of-memory-allocated-with-dma-alloc-coherent", "title": "Get physical address of memory allocated with dma_alloc_coherent", "body": "<p>I'm writing a linux driver and to store the frames into the RAM I used the function <code>dma_alloc_coherent(struct device *dev, size_t size,dma_addr_t *dma_handle, gfp_t flag)</code>. The first physical address of that area it's returned by the function (<code>dma_handle</code>) (in my case in the first half part of the area there is the luma pixels), but I need also the first physical address of the second half of that area. How can I get the physical address and than convert to virtual? (I don't know if I can do something like this to get the others physical addresses: <code>dma_handle + offset</code>)</p>\n"}, {"tags": ["c", "linux", "centos7", "mmap", "huge-pages"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1560326918, "post_id": 56556994, "comment_id": 99695082, "body": "Linux produces EINVAL also on &quot;file not open for writing&quot;"}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1560327356, "post_id": 56556994, "comment_id": 99695320, "body": "@IngoLeonhardt yes, my bad.  let me fix it."}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1560327543, "post_id": 56556994, "comment_id": 99695405, "body": "@AnttiHaapala I included how I opened the file with read-write access.  It didn&#39;t return -1."}], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1560423214, "post_id": 56577229, "comment_id": 99735535, "body": "Interesting that regular shared memory pages (usually 4K) is allowed to be <code>ftruncate()</code>-ed to whatever size but hugepages aren&#39;t allowed.  Thanks!  Just a side question if you don&#39;t mind -- do you know how to properly clean up a mmap-ed hugeages (mapped to a mounted hugepage fs)? I still see the files there even I <code>close()</code> and <code>mumap()</code> it sometimes.  Thanks."}], "tags": [], "owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "is_accepted": true, "score": 1, "last_activity_date": 1560417445, "creation_date": 1560417445, "answer_id": 56577229, "question_id": 56556994, "link": "https://stackoverflow.com/questions/56556994/ftruncate-failed-for-hugepages/56577229#56577229", "title": "ftruncate() failed for hugepages", "body": "<p>Files in the huge pages filing system may only be a integer number huge pages in length, in your case a multiple of 2MB. You should not use huge pages for such a small amount of memory.</p>\n"}], "owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 56577229, "answer_count": 1, "score": 0, "last_activity_date": 1560417445, "creation_date": 1560325337, "last_edit_date": 1560358349, "question_id": 56556994, "link": "https://stackoverflow.com/questions/56556994/ftruncate-failed-for-hugepages", "title": "ftruncate() failed for hugepages", "body": "<p>My application tried to <code>ftruncate()</code> and <code>mmap()</code>-ed 32-33KB with a 2MB hugepage but it exited.</p>\n\n<p>Then I realized that <code>ftruncate()</code> failed:</p>\n\n<pre><code>int fd = open(\"/mnt/huge2m/test\", O_RDWR|O_CREAT, 0666);\nint rc0 = ftruncate(fd, size);\nif (0 != rc0) {\n    fprintf(stderr,\n        \"Can't ftruncate shared memory segment: %d, %lu, errno = %d, err = %s\\n\",\n        fd, size, errno, strerror(errno));\n    exit(1);\n}\n</code></pre>\n\n<p>And it exited:</p>\n\n<pre><code>Can't ftruncate shared memory segment: 5, 32896, errno = 22, err = Invalid argument\nterminate called without an active exception\n</code></pre>\n\n<p>I checked <code>/mnt/huge2m</code> where I mounted my hugepage fs.  I do see the file was created there but with zero size.</p>\n\n<p>Then I checked whether I still have free 2MB hugepages:</p>\n\n<pre><code>$ numastat -vm\n\nPer-node system memory usage (in MBs):\n                          Node 0          Node 1           Total\n                 --------------- --------------- ---------------\nMemTotal                96936.38        98304.00       195240.38\nMemFree                 94171.20        95491.38       189662.58\nMemUsed                  2765.17         2812.62         5577.80\nActive                     79.84          416.48          496.32\nInactive                  136.42           57.93          194.35\nActive(anon)               22.71            4.80           27.52\nInactive(anon)              9.20            0.01            9.21\nActive(file)               57.13          411.68          468.80\nInactive(file)            127.21           57.92          185.14\nUnevictable                 0.00            0.00            0.00\nMlocked                     0.00            0.00            0.00\nDirty                       0.00            0.00            0.00\nWriteback                   0.00            0.00            0.00\nFilePages                 193.86          470.31          664.17\nMapped                     16.09            1.28           17.37\nAnonPages                  22.45            4.84           27.29\nShmem                       9.52            0.05            9.56\nKernelStack                 7.42            4.59           12.02\nPageTables                  2.75            0.32            3.07\nNFS_Unstable                0.00            0.00            0.00\nBounce                      0.00            0.00            0.00\nWritebackTmp                0.00            0.00            0.00\nSlab                       94.56           47.73          142.30\nSReclaimable               34.54           19.01           53.55\nSUnreclaim                 60.02           28.73           88.75\nAnonHugePages               0.00            0.00            0.00\nHugePages_Total            80.00           80.00          160.00\nHugePages_Free             80.00           12.00           92.00\nHugePages_Surp              0.00            0.00            0.00\n</code></pre>\n\n<p>I still have quite a bit (92MB).</p>\n\n<p>Then, I checked the limit as suggested by this <a href=\"https://stackoverflow.com/questions/47304716/mmap-returning-enomem\">post</a>:</p>\n\n<pre><code>$ cat /proc/22749/limits \nLimit                     Soft Limit           Hard Limit           Units     \nMax cpu time              unlimited            unlimited            seconds   \nMax file size             unlimited            unlimited            bytes     \nMax data size             unlimited            unlimited            bytes     \nMax stack size            8388608              unlimited            bytes     \nMax core file size        0                    unlimited            bytes     \nMax resident set          unlimited            unlimited            bytes     \nMax processes             4096                 767758               processes \nMax open files            1024                 4096                 files     \nMax locked memory         65536                65536                bytes     \nMax address space         unlimited            unlimited            bytes     \nMax file locks            unlimited            unlimited            locks     \nMax pending signals       767758               767758               signals   \nMax msgqueue size         819200               819200               bytes     \nMax nice priority         0                    0                    \nMax realtime priority     0                    0                    \nMax realtime timeout      unlimited            unlimited            us        \n</code></pre>\n\n<p>My application only opens like &lt; 10 files.</p>\n\n<p>I also thought that my user opened too many files, reaching its (hard) limit.  Tho, if it were the case, when I attempted to <code>open()</code> the file (the hugepage), I should have got -1 instead of 5 (which is a valid fd descriptor and the file wouldn't be created in <code>/mnt/huge2m</code>).</p>\n\n<p><code>strace</code> doesn't show much:</p>\n\n<pre><code>open(\"/mnt/huge2m/test\", O_RDWR|O_CREAT, 0666) = 5\nftruncate(5, 32896)                    = -1 EINVAL (Invalid argument)\nwrite(2, \"Can't ftruncate shared mem segme\"..., 82Can't ftruncate shared mem segment: 5, 262272, errno = 22, err = Invalid argument\n) = 82\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["c", "scanf", "stdbool"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1560324690, "post_id": 56556789, "comment_id": 99693912, "body": "Because for <code>%d</code> you have to pass an <code>int*</code> and nothing else. Passing anything else is undefined behavior. If you&#39;re not sure what to pass for each format specifier, check the table here: <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/scanf</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1560324755, "post_id": 56556789, "comment_id": 99693947, "body": "It&#39;s not scanf, it&#39;s your code. taufique&#39;s answer is wrong."}, {"owner": {"reputation": 91, "user_id": 9434450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc80d5c06a0a21e9e0e9ef8d3ddbdcef?s=128&d=identicon&r=PG&f=1", "display_name": "Alagusankar", "link": "https://stackoverflow.com/users/9434450/alagusankar"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1560324844, "post_id": 56556789, "comment_id": 99693998, "body": "@StoryTeller But it has been approved by many it seems"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1560324902, "post_id": 56556789, "comment_id": 99694029, "body": "You do not know what is behind the bool  object and you cannot assume that it is int.  My advice: less useless forums, more books"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1560324908, "post_id": 56556789, "comment_id": 99694031, "body": "3 is not many. 3 is users who don&#39;t know any better. 20 is many. And did you miss the comment on that answer that explains <i>exactly</i> what&#39;s wrong with it?"}, {"owner": {"reputation": 91, "user_id": 9434450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc80d5c06a0a21e9e0e9ef8d3ddbdcef?s=128&d=identicon&r=PG&f=1", "display_name": "Alagusankar", "link": "https://stackoverflow.com/users/9434450/alagusankar"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1560325031, "post_id": 56556789, "comment_id": 99694096, "body": "@StoryTeller Sorry for misleading with that. Is there any way to use scanf to directly get input for bool ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1560325110, "post_id": 56556789, "comment_id": 99694144, "body": "@Alagusankar - There is no standard format specifier for booleans. But you don&#39;t need one. The extra integer is not going to be the performance bottleneck in your program."}, {"owner": {"reputation": 91, "user_id": 9434450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc80d5c06a0a21e9e0e9ef8d3ddbdcef?s=128&d=identicon&r=PG&f=1", "display_name": "Alagusankar", "link": "https://stackoverflow.com/users/9434450/alagusankar"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1560325191, "post_id": 56556789, "comment_id": 99694195, "body": "@StoryTeller Thanks for the mention. I&#39;ll better change it to int then."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1560326034, "post_id": 56556789, "comment_id": 99694670, "body": "FYI, taufique&#39;s answer is now deleted. Hopefully no more people will be misled by it."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1560326610, "post_id": 56556789, "comment_id": 99694960, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12920694/format-specifier-in-scanf-for-bool-datatype-in-c\">Format specifier in scanf for bool datatype in C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1560326459, "creation_date": 1560326459, "answer_id": 56557314, "question_id": 56556789, "link": "https://stackoverflow.com/questions/56556789/why-is-scanf-working-abnormally-for-bool-input-in-c/56557314#56557314", "title": "Why is scanf working abnormally for bool input in C?", "body": "<p>There is no format specifier for <code>bool</code> and having one doesn't make much sense. What would the user type, <code>\"true\"</code>? You can't use <code>%d</code> for any other type than <code>int</code>.</p>\n\n<p>If you for some reason need to take boolean input from stdin, use <code>int</code> values <code>1</code> or <code>0</code>, then convert it to <code>bool</code> later. For example: </p>\n\n<pre><code>int living; \nscanf(\"%d\", &amp;living);\nbool is_living = living;\n</code></pre>\n\n<p>Conversions from <code>int</code> to <code>bool</code> will automatically convert any non-zero value to <code>true</code> and zero to <code>false</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 0, "last_activity_date": 1560326951, "creation_date": 1560326951, "answer_id": 56557456, "question_id": 56556789, "link": "https://stackoverflow.com/questions/56556789/why-is-scanf-working-abnormally-for-bool-input-in-c/56557456#56557456", "title": "Why is scanf working abnormally for bool input in C?", "body": "<p>There is no format specifier for <code>bool</code>.\nBecause for <code>bool</code> it not that clear how it should look like.</p>\n\n<p>There are many possibilities:</p>\n\n<ul>\n<li>yes/no</li>\n<li>y/n</li>\n<li>true/false</li>\n<li>t/f</li>\n<li>any different case version of the above</li>\n<li>what about locals?</li>\n<li>1/0</li>\n</ul>\n\n<p>Unlike for numbers and their different formats the above possibilities have different semantics. So support them all with a single specifier is not desirable.</p>\n\n<p>So if you want to support it, you have to chose and implement it by yourself.</p>\n"}], "owner": {"reputation": 91, "user_id": 9434450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc80d5c06a0a21e9e0e9ef8d3ddbdcef?s=128&d=identicon&r=PG&f=1", "display_name": "Alagusankar", "link": "https://stackoverflow.com/users/9434450/alagusankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560334938, "creation_date": 1560324586, "last_edit_date": 1560334938, "question_id": 56556789, "link": "https://stackoverflow.com/questions/56556789/why-is-scanf-working-abnormally-for-bool-input-in-c", "title": "Why is scanf working abnormally for bool input in C?", "body": "<p>I am trying to get input for 3 bool variables and 1 int variable. Even though I give input correctly, it is not behaving right.</p>\n\n<p>I am using <code>%d</code> as format specifier for <code>bool</code> in <code>stdbool.h</code> as suggested by @taufique in <a href=\"https://stackoverflow.com/questions/12920694/format-specifier-in-scanf-for-bool-datatype-in-c\">Format specifier in scanf for bool datatype in C</a></p>\n\n<p>Here is my code and its behaviour:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\nint main( )\n{\n    bool health,sex,living;\n    int age;\n    scanf(\"%d%d%d%d\",&amp;sex,&amp;health,&amp;living,&amp;age);\n    printf(\"\\n%d %d %d %d\\n\",sex,health,living,age);\n}\n</code></pre>\n\n<p>Console:</p>\n\n<pre><code>0 1 0 25\n0 0 0 25\n</code></pre>\n\n<p>For some other Input:</p>\n\n<pre><code>1 0 0 26\n0 0 0 26\n</code></pre>\n\n<p>But when using temporary integer variables to get input as suggested by @ouah in the same <a href=\"https://stackoverflow.com/questions/12920694/format-specifier-in-scanf-for-bool-datatype-in-c\">Format specifier in scanf for bool datatype in C</a> , it works fine.</p>\n\n<p>So why is scanf behaving improperly ?</p>\n\n<hr>\n\n<p>PS : It does work correctly for some input:</p>\n\n<pre><code>0 0 1 26\n0 0 1 26\n</code></pre>\n"}, {"tags": ["c", "tensorflow", "deep-learning"], "comments": [{"owner": {"reputation": 1590, "user_id": 3796272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqSzP.jpg?s=128&g=1", "display_name": "Kampi", "link": "https://stackoverflow.com/users/3796272/kampi"}, "edited": false, "score": 0, "creation_date": 1560323901, "post_id": 56556483, "comment_id": 99693526, "body": "You can compile it for your machine: <a href=\"https://stackoverflow.com/questions/41293077/how-to-compile-tensorflow-with-sse4-2-and-avx-instructions\" title=\"how to compile tensorflow with sse4 2 and avx instructions\">stackoverflow.com/questions/41293077/&hellip;</a>"}, {"owner": {"reputation": 723, "user_id": 10454790, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KgTAEhXsikc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUzmIL0mpexoEX8YwlIRZB54Ac2SA/mo/photo.jpg?sz=128", "display_name": "Mete Han Kahraman", "link": "https://stackoverflow.com/users/10454790/mete-han-kahraman"}, "reply_to_user": {"reputation": 1590, "user_id": 3796272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqSzP.jpg?s=128&g=1", "display_name": "Kampi", "link": "https://stackoverflow.com/users/3796272/kampi"}, "edited": false, "score": 0, "creation_date": 1560324653, "post_id": 56556483, "comment_id": 99693898, "body": "this is not an error, tensorflow is just reminding you that it can do better if it was compiled with different settings.  @Kampi &#39;s link can guide you if you really want to compile it yourself."}, {"owner": {"reputation": 20747, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1560334693, "post_id": 56556483, "comment_id": 99699364, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41293077/how-to-compile-tensorflow-with-sse4-2-and-avx-instructions\">How to compile Tensorflow with SSE4.2 and AVX instructions?</a>"}, {"owner": {"reputation": 373, "user_id": 11351605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d9dcc9f54ca5b6bf71493f0dda846fb?s=128&d=identicon&r=PG&f=1", "display_name": "tre95", "link": "https://stackoverflow.com/users/11351605/tre95"}, "edited": false, "score": 0, "creation_date": 1560337248, "post_id": 56556483, "comment_id": 99700725, "body": "Hi, thanks for your replies. However as I never compiled Tensorflow on my own I have a question regarding this. Using the C API seems to be possible without any installation, I just had to link it (see: <a href=\"https://www.tensorflow.org/install/lang_c\" rel=\"nofollow noreferrer\">tensorflow.org/install/lang_c</a>), so I did not use bazel, conda, pip or whatever. Is there something precompiled or how would the procedure look like for my case? Would the C API even recognize that I compiled Tensorflow with AVX when it does not require an installation at all?"}], "answers": [{"tags": [], "owner": {"reputation": 373, "user_id": 11351605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d9dcc9f54ca5b6bf71493f0dda846fb?s=128&d=identicon&r=PG&f=1", "display_name": "tre95", "link": "https://stackoverflow.com/users/11351605/tre95"}, "is_accepted": true, "score": 0, "last_activity_date": 1561728563, "creation_date": 1561728563, "answer_id": 56807859, "question_id": 56556483, "link": "https://stackoverflow.com/questions/56556483/is-there-a-way-to-get-tensorflows-c-api-with-avx-support/56807859#56807859", "title": "Is there a way to get Tensorflow&#39;s C API with AVX support?", "body": "<p>Found it out some time ago:</p>\n\n<p><a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/lib_package/README.md\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/lib_package/README.md</a>\nunder C library.</p>\n"}], "owner": {"reputation": 373, "user_id": 11351605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d9dcc9f54ca5b6bf71493f0dda846fb?s=128&d=identicon&r=PG&f=1", "display_name": "tre95", "link": "https://stackoverflow.com/users/11351605/tre95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 56807859, "answer_count": 1, "score": -1, "last_activity_date": 1561728563, "creation_date": 1560323359, "question_id": 56556483, "link": "https://stackoverflow.com/questions/56556483/is-there-a-way-to-get-tensorflows-c-api-with-avx-support", "title": "Is there a way to get Tensorflow&#39;s C API with AVX support?", "body": "<p>I am currently using Tensorflow's C API for a project. However during the first inference run I get this message:</p>\n\n<pre><code>Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\n</code></pre>\n\n<p>Is there a way to use the C API with AVX or AVX2 support?</p>\n"}, {"tags": ["c", "xml", "compare", "beyondcompare"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1560320089, "post_id": 56555580, "comment_id": 99691987, "body": "Do you want a way to do it most efficiently in the GUI or programmatically? If programmatically, please show how far you got by making a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what gets closest (but still is not what you want)."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1560320171, "post_id": 56555580, "comment_id": 99692016, "body": "By the way, I think the question is on-topic, because to me this kind of using comparison tools IS very closely related to programming - even if the question is about using the GUI."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1560320294, "post_id": 56555580, "comment_id": 99692056, "body": "You seem to have an often-repeated typo &quot;Singal/Signal&quot;. Did you notice? It does however not break the question."}, {"owner": {"reputation": 95, "user_id": 9999799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4fc656d9f0fcd4cb5efc30cf4e6012?s=128&d=identicon&r=PG&f=1", "display_name": "Loois95", "link": "https://stackoverflow.com/users/9999799/loois95"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1560320311, "post_id": 56555580, "comment_id": 99692064, "body": "Hi, thank u for your comment. I want to do it with minimal edtion in Code. I tried to add &quot;orientation comments&quot; but ist kinda inefficent and the Code gets confusing."}, {"owner": {"reputation": 95, "user_id": 9999799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4fc656d9f0fcd4cb5efc30cf4e6012?s=128&d=identicon&r=PG&f=1", "display_name": "Loois95", "link": "https://stackoverflow.com/users/9999799/loois95"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1560320380, "post_id": 56555580, "comment_id": 99692090, "body": "@Yunnosch oh yeah thank you didnt notice this. But it is not important the actual Code Looks way more complexe this is just a simple example to Show the Problem."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1560320586, "post_id": 56555580, "comment_id": 99692174, "body": "Please show your coding attempts. It is as much about which coding API you use as about the effort you spend and the research results you already have. Otherwise you might end up being considered off-topic for not showing a MCVE - and I really want this question to survive... I itch to start looking for an answer..."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 9999799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4fc656d9f0fcd4cb5efc30cf4e6012?s=128&d=identicon&r=PG&f=1", "display_name": "Loois95", "link": "https://stackoverflow.com/users/9999799/loois95"}, "edited": false, "score": 0, "creation_date": 1560441996, "post_id": 56584449, "comment_id": 99747083, "body": "Yes, but my Files are very big with a Lot of function calls so this method is not feasible"}], "tags": [], "owner": {"reputation": 2101, "user_id": 4871247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxeDz.png?s=128&g=1", "display_name": "Chris Kennedy", "link": "https://stackoverflow.com/users/4871247/chris-kennedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1560441622, "creation_date": 1560441622, "answer_id": 56584449, "question_id": 56555580, "link": "https://stackoverflow.com/questions/56555580/beyond-compare-compare-whole-function-calls-or-xml-blocks/56584449#56584449", "title": "Beyond Compare: compare whole function calls or xml blocks", "body": "<p>Beyond Compare doesn't provide a method to do this. The best workaround is to use the right click <strong>Align With</strong> command to shift the function alignment.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 9999799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4fc656d9f0fcd4cb5efc30cf4e6012?s=128&d=identicon&r=PG&f=1", "display_name": "Loois95", "link": "https://stackoverflow.com/users/9999799/loois95"}, "edited": false, "score": 0, "creation_date": 1569826827, "post_id": 57744493, "comment_id": 102707465, "body": "Hi, yes I did. But it don&#39;t help either. Thank you"}], "tags": [], "owner": {"reputation": 1206, "user_id": 6279949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UAxfC.jpg?s=128&g=1", "display_name": "opus131", "link": "https://stackoverflow.com/users/6279949/opus131"}, "is_accepted": false, "score": 0, "last_activity_date": 1567327301, "creation_date": 1567327301, "answer_id": 57744493, "question_id": 56555580, "link": "https://stackoverflow.com/questions/56555580/beyond-compare-compare-whole-function-calls-or-xml-blocks/57744493#57744493", "title": "Beyond Compare: compare whole function calls or xml blocks", "body": "<p>Did you try the \"Never align differences\" checkbox in the Alignment tab of the session settings?</p>\n\n<p><a href=\"https://i.stack.imgur.com/MpsQc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MpsQc.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 95, "user_id": 9999799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4fc656d9f0fcd4cb5efc30cf4e6012?s=128&d=identicon&r=PG&f=1", "display_name": "Loois95", "link": "https://stackoverflow.com/users/9999799/loois95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1567327301, "creation_date": 1560319411, "last_edit_date": 1560321183, "question_id": 56555580, "link": "https://stackoverflow.com/questions/56555580/beyond-compare-compare-whole-function-calls-or-xml-blocks", "title": "Beyond Compare: compare whole function calls or xml blocks", "body": "<p>I want to compare c and XML files with Beyond Compare. But I want to detect if there are differences within a Block to the corrosponding on the other file and if there is a difference in a block I dont want Beyond Compare to Show the difference in the block, but handle it like this block is not in the other file. I Need this because in my files are certain Code blocks which are nearly the same but do have different Signalnames in it.</p>\n\n<p>So for example i got a c file that Looks like this:</p>\n\n<pre><code>//1\nfunctioncall(\n    Singalname1,\n    Singalname2,\n    Singalname3,\n    Singalname4,\n    Singalname5,\n    Singalname6);\n\n//2    \nfunctioncall(\n    Singalname31,\n    Singalname32,\n    Singalname33,\n    Singalname34,\n    Singalname53,\n    Singalname36);\n</code></pre>\n\n<p>And a second file which Looks like this:</p>\n\n<pre><code>    //1\nfunctioncall(\n    Singalname1,\n    Singalname2,\n    Singalname3,\n    Singalname4,\n    Singalname5,\n    Singalname6);\n\n//2    \nfunctioncall(\n    Singalname371,\n    Singalname372,\n    Singalname373,\n    Singalname374,\n    Singalname573,\n    Singalname376);\n</code></pre>\n\n<p>If I compare those two files with BeyondCompare it determines the difference within the second function call because the signalnames all contain a 7. But i want Beondcompare compare the whol functioncall an if there are differences in the functionCall to Show the functioncall beside empty space so i can add it eaily to the second file.\nSo not like this:\n<a href=\"https://i.stack.imgur.com/gllHR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gllHR.png\" alt=\"enter image description here\"></a>\nI want it like this:\n<a href=\"https://i.stack.imgur.com/bsZ1j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bsZ1j.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried to add some comments with a begin comment and an end comment with a incrementing number in it something like this:</p>\n\n<pre><code>    //begin1\nfunctioncall(\n    Singalname1,\n    Singalname2,\n    Singalname3,\n    Singalname4,\n    Singalname5,\n    Singalname6);\n//end1    \n</code></pre>\n\n<p>And then adding a specific rule in beyond compare. Unfortnatly i did not manage to add this rule to beyond compare.\nFurthermore Ithink the Code is not good with this comments in it.</p>\n"}, {"tags": ["c", "linux", "webkit", "gtk3"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1560324739, "post_id": 56555511, "comment_id": 99693938, "body": "<a href=\"https://stackoverflow.com/q/56548193/608639\">How to turn-off the context menu for the Mouse Right-Click</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11627549"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1560341111, "post_id": 56555511, "comment_id": 99703002, "body": "@jww I saw that but there are no answeres to it and I hoped that someone can help me"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 10759547, "user_type": "registered", "profile_image": "https://graph.facebook.com/2185787468361231/picture?type=large", "display_name": "Unknown", "link": "https://stackoverflow.com/users/10759547/unknown"}, "is_accepted": false, "score": 0, "last_activity_date": 1560342926, "creation_date": 1560342926, "answer_id": 56562392, "question_id": 56555511, "link": "https://stackoverflow.com/questions/56555511/how-to-turn-off-the-right-click-context-menu/56562392#56562392", "title": "How to turn off the Right-Click Context Menu", "body": "<p>If you meant to disable it in the main Window off your Webbrowswer(Web_View) than just do this:</p>\n\n<pre><code>g_signal_connect(G_OBJECT(web_view), \"context-menu\", G_CALLBACK(off_context), NULL);\n\n</code></pre>\n\n<p>In your function you return TRUE which means it can't be void, here you need gboolean:</p>\n\n<pre><code>gboolean off_context(GtkWidget *w, gpointer data) {\n    return TRUE;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11627549"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560342926, "creation_date": 1560319051, "question_id": 56555511, "link": "https://stackoverflow.com/questions/56555511/how-to-turn-off-the-right-click-context-menu", "title": "How to turn off the Right-Click Context Menu", "body": "<p>For a Task I need to do a Simple Webbrowser. The task also says that I should turn the context menu of the Mouse Right-Click off by using the \"context-menu\" callback.</p>\n\n<p>What I thought doing is:</p>\n\n<pre><code>g_signal_connect(G_OBJECT(-), \"context-menu\", G_CALLBACK(off_context), NULL);\n\nvoid off_context(GtkWidget *w, gpointer data) {\n    return TRUE;\n}\n</code></pre>\n\n<p>But I don't know to which GObject I need to conect it or if this would work.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1560318699, "post_id": 56555396, "comment_id": 99691539, "body": "Time to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1560324767, "post_id": 56555396, "comment_id": 99693954, "body": "The assignments <code>*r = *q;</code> and <code>*p = *r;</code> copy one single letter."}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 2473475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34c910cc0777383b087661047763925?s=128&d=identicon&r=PG", "display_name": "Julio P.C.", "link": "https://stackoverflow.com/users/2473475/julio-p-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1560325644, "creation_date": 1560325644, "answer_id": 56557080, "question_id": 56555396, "link": "https://stackoverflow.com/questions/56555396/why-am-i-not-getting-the-desired-output/56557080#56557080", "title": "Why am I not getting the desired output?", "body": "<h2>First answering the main question, as of \"Why I'm not getting the desired output\":</h2>\n\n<p>Because you don't know what you're doing.</p>\n\n<p>You are declaring 3 char[] variables statically, assigning them to pointers of type char*, and not even using them correctly.</p>\n\n<p>Let's annalyze a part of your code:</p>\n\n<pre><code>for(i=0;i&lt;n-1;i++)\n{\n    *r = *q;\n    strcat(str2,str1);\n    *p = *r;\n}\n</code></pre>\n\n<h2>What you're doing is basically:</h2>\n\n<ul>\n<li>assign str3[0] = 'b' (in *r = *q)</li>\n<li>copy the contents of str1 into str2, so, \"ba\" in the first run</li>\n<li>assign str1[0] = 'b' (in *p = *r)</li>\n<li>And then, repeatedly concatenate \"b\" into str2, because both str1 will only contain a single \"b\" for now on.</li>\n</ul>\n\n<p>Doing that, for anything above 4, you'll only get \"babbbbbbbbbb\"...</p>\n\n<p>My advice: If you're going to statically declare some variables, stop using pointers to access them. Try accessing the str1/str2 as vectors.</p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1560332322, "last_edit_date": 1560332322, "creation_date": 1560331791, "answer_id": 56558895, "question_id": 56555396, "link": "https://stackoverflow.com/questions/56555396/why-am-i-not-getting-the-desired-output/56558895#56558895", "title": "Why am I not getting the desired output?", "body": "<p>Your code is obfuscated.  I modified it so:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar*fib(int n)\n{\n  if (0==n)\n    return \"a\";\n  else if (1==n)\n    return \"b\";\n  else\n  {\n    char static out[2000]={'b', 'a'};\n    int idx=2, prev=1, tmp;\n    n-=2;\n    while(n--)\n    {\n      /* invariant: all values start at the beginning of `out`.\n         idx: keep the length of the current object\n         prev: keep the size of previous object\n       */\n      memcpy(out+idx, out, prev);\n      tmp=prev;\n      prev=idx;\n      idx+=tmp;\n    }\n    return out;\n  }\n}\n\nint main()\n{\n  int x;\n  printf(\"Enter the fibonacci nword number you want to see:\"\n         \"(f(x), f(0) is the starting element.):\\n\");\n  scanf(\"%d\",&amp;x);\n  printf(\"Required Word is:\\n\");\n  printf(\"~~%s\\n\", fib(x));\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 7860546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5450bff38307680bd38f682612affe8d?s=128&d=identicon&r=PG&f=1", "display_name": "Sukrit Kapil", "link": "https://stackoverflow.com/users/7860546/sukrit-kapil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 56557080, "answer_count": 2, "score": 0, "last_activity_date": 1560332322, "creation_date": 1560318486, "last_edit_date": 1560324060, "question_id": 56555396, "link": "https://stackoverflow.com/questions/56555396/why-am-i-not-getting-the-desired-output", "title": "Why am I not getting the desired output?", "body": "<p>The problem is to write the asked fibonacci word. For example if input is 0, then f(0) = a, if 1, f(1) = b and similarly f(2) = ba, f(3) = bab, f(4) = babba and so on. I wrote the following code to find the output on Ubuntu 18.04 LTS Terminal. I am getting the right output for n=0,1,2,3. But for n=4 I am getting babb instead of babba. I have tried debugging also but could not find where the code is going wrong. Kindly help me in finding the error.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nvoid fibonacci(int n);\nint main()\n{\n    int x;\n    printf(\"Enter the fibonacci nword number you want to see:(f(x), f(0) is the starting element.):\\n\");\n    scanf(\"%d\",&amp;x);\n    printf(\"Required Word is:\\n\");\n    fibonacci(x);\n    return 0;\n}\n\nvoid fibonacci(int n)\n{\n    int i,j=0;\n    char *p,*q,*r;\n    if(n==0)\n    {\n        printf(\"a\\n\");\n    }\n    else if(n==1)\n    {\n        printf(\"b\\n\");\n    }\n    else \n    {\n        char str1[100] = \"a\";\n        char str2[100] = \"b\";\n\n    char str3[100];\n        p = str1;\n        q = str2;\n        r = str3;\n        for(i=0;i&lt;n-1;i++)\n        {\n            *r = *q;\n            strcat(str2,str1);\n            *p = *r;\n        }\n        printf(\"%s\\n\",str2);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "io"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 3, "creation_date": 1560315453, "post_id": 56554840, "comment_id": 99690643, "body": "How do you know that the contents are reaching the disk? If you are simply reading the contents of the file from another process like <code>cat</code>, it could also be reading from the kernel buffer."}, {"owner": {"reputation": 1, "user_id": 10888899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pma0EYPCEOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZNhwkqaFyH79AtR2Z2kA9hh9P3zg/mo/photo.jpg?sz=128", "display_name": "gradientw", "link": "https://stackoverflow.com/users/10888899/gradientw"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1560315789, "post_id": 56554840, "comment_id": 99690718, "body": "@AjayBrahmakshatriya Oh! I never thought of it. Thank you. If so, the current file may be in a state that is not actually written and only buffered in kernel space."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1560316805, "post_id": 56554840, "comment_id": 99690969, "body": "@gradientw: That&#39;s why stuff like <code>sync</code>/<code>fsync</code> are generally discouraged for anything without strict transactional integrity rules. The <code>write</code> itself is enough to make the file work &quot;as if&quot; the write has completed for all practical purposes save power failure or the kernel itself crashing, since barring extreme measures, everyone else is reading the file via the same kernel buffering layer. Kernel crashes are much less common nowadays, and people rarely feel the need to protect against power failure, so <code>fsync</code> and company needlessly slow your program to achieve a very small benefit."}, {"owner": {"reputation": 1, "user_id": 10888899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pma0EYPCEOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZNhwkqaFyH79AtR2Z2kA9hh9P3zg/mo/photo.jpg?sz=128", "display_name": "gradientw", "link": "https://stackoverflow.com/users/10888899/gradientw"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1560317837, "post_id": 56554840, "comment_id": 99691252, "body": "@AjayBrahmakshatriya Thank you. However, in the case of a socket, if I write () to a socket descriptor, I can read it immediately. Is this the way kernel buffering works? In other words, should I study Disk I / O and Socket I / O separately?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10888899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pma0EYPCEOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZNhwkqaFyH79AtR2Z2kA9hh9P3zg/mo/photo.jpg?sz=128", "display_name": "gradientw", "link": "https://stackoverflow.com/users/10888899/gradientw"}, "edited": false, "score": 0, "creation_date": 1560320783, "post_id": 56555234, "comment_id": 99692256, "body": "Thank you. I can set the input and output buffers according to fd through the setvbuf function. If so, is the page cache area also clearly seperated between the input and output parts?"}, {"owner": {"reputation": 1, "user_id": 10888899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pma0EYPCEOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZNhwkqaFyH79AtR2Z2kA9hh9P3zg/mo/photo.jpg?sz=128", "display_name": "gradientw", "link": "https://stackoverflow.com/users/10888899/gradientw"}, "edited": false, "score": 0, "creation_date": 1560322005, "post_id": 56555234, "comment_id": 99692711, "body": "As described, I / O buffers on disk I / O seem to use one space, called kernel buffer cache, without distinction between input and output. Is this right?"}, {"owner": {"reputation": 66, "user_id": 5717985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224f1aa0a29784cc39786bca4a595e54?s=128&d=identicon&r=PG&f=1", "display_name": "andoryu-", "link": "https://stackoverflow.com/users/5717985/andoryu"}, "reply_to_user": {"reputation": 1, "user_id": 10888899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pma0EYPCEOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZNhwkqaFyH79AtR2Z2kA9hh9P3zg/mo/photo.jpg?sz=128", "display_name": "gradientw", "link": "https://stackoverflow.com/users/10888899/gradientw"}, "edited": false, "score": 0, "creation_date": 1560339783, "post_id": 56555234, "comment_id": 99702198, "body": "<code>man setvbuf(3)</code> shows the manual entry is in section 3, typical section for libc, also the required header is &lt;stdio.h&gt;, which means its libc not syscall. I think you&#39;re confusing libc buffer with page cache. By default libc io is line-buffered on the foreground, fully-buffered on the background, meaning on the background chars are only put onto libc internal buffer instead of commited to os via write(2). The libc function setvbuf is provided to modify that behavour. Page cache is an operationg system thing."}, {"owner": {"reputation": 1, "user_id": 10888899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pma0EYPCEOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZNhwkqaFyH79AtR2Z2kA9hh9P3zg/mo/photo.jpg?sz=128", "display_name": "gradientw", "link": "https://stackoverflow.com/users/10888899/gradientw"}, "edited": false, "score": 0, "creation_date": 1560404057, "post_id": 56555234, "comment_id": 99725940, "body": "Thank you. I found that disk file I / O uses page cache rather than I / O buffers. The reason I was confused is socket file I / O. I found that disk file I / O and socket file I / O have different internal operations, and socket files have I / O buffers, unlike disk file I / O. I&#39;m wondering if the socket file&#39;s I / O buffer is the same as the TCP / UDP send/receive buffer, or if there is a separate I / O buffer. Can you answer this question?"}], "tags": [], "owner": {"reputation": 66, "user_id": 5717985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224f1aa0a29784cc39786bca4a595e54?s=128&d=identicon&r=PG&f=1", "display_name": "andoryu-", "link": "https://stackoverflow.com/users/5717985/andoryu"}, "is_accepted": false, "score": 0, "last_activity_date": 1560318380, "last_edit_date": 1592644375, "creation_date": 1560317509, "answer_id": 56555234, "question_id": 56554840, "link": "https://stackoverflow.com/questions/56554840/when-is-the-kernel-buffer-cache-empty-for-disk-i-o/56555234#56555234", "title": "When is the kernel buffer cache empty for Disk I/O?", "body": "<blockquote>\n<p>When is page cache bypassed?</p>\n</blockquote>\n<p>Page cache shall be bypassed using direct I/O, provided that</p>\n<ul>\n<li>opened with O_DIRECT flag</li>\n<li>certain offset/address alignment constraint is met</li>\n<li>no extending writes performed</li>\n</ul>\n<p>See <a href=\"https://lwn.net/Articles/348739/\" rel=\"nofollow noreferrer\">this link</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 3944, "user_id": 2732969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01822efaf66e4b81d6f947cba7e0613a?s=128&d=identicon&r=PG", "display_name": "Anon", "link": "https://stackoverflow.com/users/2732969/anon"}, "is_accepted": false, "score": 0, "last_activity_date": 1567239148, "creation_date": 1567239148, "answer_id": 57736311, "question_id": 56554840, "link": "https://stackoverflow.com/questions/56554840/when-is-the-kernel-buffer-cache-empty-for-disk-i-o/57736311#57736311", "title": "When is the kernel buffer cache empty for Disk I/O?", "body": "<p>(I'm assuming Linux for the answers below)</p>\n\n<blockquote>\n  <p>When is the kernel buffer cache empty? </p>\n</blockquote>\n\n<p>You would need more context for this to be answerable. Additionally as you seem to be making files in a filesystem I'll refer to the kernel cache being used as the page cache, see the <a href=\"https://www.quora.com/What-is-the-major-difference-between-the-buffer-cache-and-the-page-cache-Why-were-they-separate-entities-in-older-kernels-Why-were-they-merged-later-on\" rel=\"nofollow noreferrer\">\"What is the major difference between the buffer cache and the page cache?\"</a> quora question for the difference. For example, a write can be in the kernel page cache but not have made its way to do disk (i.e. dirty) or it can be in BOTH the page cache AND on disk (i.e. it got written out but the kernel is choosing to hold on to it in RAM). Do you mean \"made clean\" or do you mean \"entirely discarded from the page cache\"? Or do you mean \"when is the I/O done visible to other programs working on the same file\"?</p>\n\n<blockquote>\n  <p>This does not seem to be LINE Buffering</p>\n</blockquote>\n\n<p>At the <em>C library level</em> there's a difference between <a href=\"https://www.gnu.org/software/libc/manual/html_node/I_002fO-on-Streams.html#I_002fO-on-Streams\" rel=\"nofollow noreferrer\">I/O done on streams</a> (which can be line buffered) and <a href=\"https://www.gnu.org/software/libc/manual/html_node/Low_002dLevel-I_002fO.html#Low_002dLevel-I_002fO\" rel=\"nofollow noreferrer\">low-level I/O done on file descriptors</a>. Your example is using file descriptors so there would <a href=\"https://stackoverflow.com/a/51483636/2732969\">never be line buffering</a>. Further, C library buffering is orthogonal to kernel buffering.</p>\n\n<blockquote>\n  <p>does the input and output buffers of the socket file also use the kernel buffer cache like Disk I / O? </p>\n</blockquote>\n\n<p>Sockets don't use the page cache as they aren't block or file backed. However, <a href=\"https://www.linuxjournal.com/article/1312\" rel=\"nofollow noreferrer\">socket I/O IS buffered using <code>sk_buff</code> in the kernel</a>.</p>\n\n<blockquote>\n  <p>Also, does the input and output buffers of the kernel space used for read() and write() exist for each open file (fd)?</p>\n</blockquote>\n\n<p>Sorry, I don't understand the question. The page cache is shared for files/block devices so multiple file descriptors to the same file will be serviced by the same entries in the page cache (assuming they are requesting identical offsets).</p>\n\n<p>(<code>ETOOMANYQUESTIONS</code>! @andoryu please can you limit one question per post? It's tough going for someone trying to answer otherwise. Thanks!) </p>\n"}], "owner": {"reputation": 1, "user_id": 10888899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Pma0EYPCEOE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZNhwkqaFyH79AtR2Z2kA9hh9P3zg/mo/photo.jpg?sz=128", "display_name": "gradientw", "link": "https://stackoverflow.com/users/10888899/gradientw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567239148, "creation_date": 1560314917, "last_edit_date": 1560316520, "question_id": 56554840, "link": "https://stackoverflow.com/questions/56554840/when-is-the-kernel-buffer-cache-empty-for-disk-i-o", "title": "When is the kernel buffer cache empty for Disk I/O?", "body": "<p>When is the kernel buffer cache empty? This does not seem to be LINE Buffering. If I write () a string without a newline character, it is immediately output to the file.</p>\n\n<p>In addition, does the input and output buffers of the socket file also use the kernel buffer cache like Disk I / O? Also, does the input and output buffers of the kernel space used for read() and write() exist for each open file (fd)?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    int fd = open(\"text\", O_RDWR | O_CREAT);\n\n    write(fd, \"message\", strlen(\"message\"));\n\n    // I can check the string in the file without fsync(fd).\n    sleep(30);\n\n    close(fd);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "operating-system"], "comments": [{"owner": {"reputation": 675, "user_id": 8080186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-McEQfRsNbi8/AAAAAAAAAAI/AAAAAAAAAAk/vCmuaovIxrU/photo.jpg?sz=128", "display_name": "Ajit Panigrahi", "link": "https://stackoverflow.com/users/8080186/ajit-panigrahi"}, "edited": false, "score": 1, "creation_date": 1560315145, "post_id": 56554806, "comment_id": 99690580, "body": "Where is <code>i</code> initialised? What does it signify?"}, {"owner": {"reputation": 29, "user_id": 10359505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lXINbmDuBks/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPSECaZ-DwkWploz4UJp-bCuHXZFw/mo/photo.jpg?sz=128", "display_name": "HyeokJin", "link": "https://stackoverflow.com/users/10359505/hyeokjin"}, "reply_to_user": {"reputation": 675, "user_id": 8080186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-McEQfRsNbi8/AAAAAAAAAAI/AAAAAAAAAAk/vCmuaovIxrU/photo.jpg?sz=128", "display_name": "Ajit Panigrahi", "link": "https://stackoverflow.com/users/8080186/ajit-panigrahi"}, "edited": false, "score": 0, "creation_date": 1560315425, "post_id": 56554806, "comment_id": 99690636, "body": "variable i means pid, And this algorithm is bakery algorithm"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1560315877, "post_id": 56554806, "comment_id": 99690739, "body": "<a href=\"https://en.wikipedia.org/wiki/Lamport%27s_bakery_algorithm\" rel=\"nofollow noreferrer\">Lamport&#39;s bakery algorithm</a> doesn&#39;t work on modern processors. To quote the article: <i>&quot;Lamport&#39;s bakery algorithm assumes a sequential consistency memory model. Few, if any, languages or multi-core processors implement such a memory model. Therefore correct implementation of the algorithm typically requires inserting fences to inhibit reordering.&quot;</i>"}, {"owner": {"reputation": 29, "user_id": 10359505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lXINbmDuBks/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPSECaZ-DwkWploz4UJp-bCuHXZFw/mo/photo.jpg?sz=128", "display_name": "HyeokJin", "link": "https://stackoverflow.com/users/10359505/hyeokjin"}, "edited": false, "score": 0, "creation_date": 1560317294, "post_id": 56554806, "comment_id": 99691100, "body": "Good info, but I wonder if this can violate the mutual exclusion rule."}], "owner": {"reputation": 29, "user_id": 10359505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lXINbmDuBks/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPSECaZ-DwkWploz4UJp-bCuHXZFw/mo/photo.jpg?sz=128", "display_name": "HyeokJin", "link": "https://stackoverflow.com/users/10359505/hyeokjin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560318197, "creation_date": 1560314672, "last_edit_date": 1560318197, "question_id": 56554806, "link": "https://stackoverflow.com/questions/56554806/some-general-question-about-bakery-algorithm", "title": "Some general question about bakery algorithm", "body": "<p>In this bakery algorithm, choosing[n] is initialized to False, And number[n] Also 0</p>\n\n<pre><code>int number[n];\nbool choosing[n];\nwhile(1){\n  choosing[i] = True;\n  number[i] = 1 + max(number[0] + ..... + number[n-1]);\n  choosing[i] = False;\n  for(int j = 0; j &lt; n ; j++){\n    while(choosing[j]);\n    while(number[j]!=0 &amp;&amp; ((number[j],j)&lt;(number[i],i)));\n  }\n  // Critical Section\n  number[i] = 0;\n}\n</code></pre>\n\n<p>In this code \nIf \"choosing[i] = TRUE and choosing[i] = FALSE, while(choosing[i]);\" is removed, can we keep mutual exclusion?</p>\n\n<p>However, number[i] is either assigned a value or not assigned.</p>\n"}, {"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1560313567, "post_id": 56554608, "comment_id": 99690245, "body": "If you&#39;re going to stick with integers, encode the on/off as 1/0.  Alternatively, create a structure type with elements x, y, z and tool \u2014 which need not all be integers.  This would have an additional advantage; you&#39;d only need a 1D array (of structures), not a 2D array (of integers)."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "edited": false, "score": 0, "creation_date": 1560313522, "post_id": 56554659, "comment_id": 99690236, "body": "no i cant replace it. coz 0 and 1 are TRUE and FALSE in my code"}, {"owner": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "edited": false, "score": 0, "creation_date": 1560313844, "post_id": 56554659, "comment_id": 99690308, "body": "Sorry, my bad...0 is False and 1 is True. i just mistyped it"}, {"owner": {"reputation": 99, "user_id": 7031361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a807a2ace2d33d67eced978e71a217d?s=128&d=identicon&r=PG&f=1", "display_name": "gxexx", "link": "https://stackoverflow.com/users/7031361/gxexx"}, "edited": false, "score": 1, "creation_date": 1560313979, "post_id": 56554659, "comment_id": 99690343, "body": "Like Jonathan said, a structure would be a good choice. You will be able to name the struct variables X,Y,Z,Tool to make it easier for others to understand your code."}], "tags": [], "owner": {"reputation": 99, "user_id": 7031361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a807a2ace2d33d67eced978e71a217d?s=128&d=identicon&r=PG&f=1", "display_name": "gxexx", "link": "https://stackoverflow.com/users/7031361/gxexx"}, "is_accepted": false, "score": 2, "last_activity_date": 1560313476, "creation_date": 1560313476, "answer_id": 56554659, "question_id": 56554608, "link": "https://stackoverflow.com/questions/56554608/how-to-define-2d-array-in-c/56554659#56554659", "title": "How to define 2D array in C", "body": "<p>You have to set the size of the array like so:</p>\n\n<pre><code>int majorPositions[][3]={{0,90,-90},{90,15,90},{-45,-30,30},{0,60,0}};\n</code></pre>\n\n<p>or </p>\n\n<pre><code>int majorPositions[4][3]={{0,90,-90},{90,15,90},{-45,-30,30},{0,60,0}};\n</code></pre>\n\n<p>If your last column is just ON/OFF, cant you just represent it as a 1 or 0?</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "edited": false, "score": 0, "creation_date": 1560313684, "post_id": 56554662, "comment_id": 99690268, "body": "0 and 1 are FALSE and TRUE in my code...being used for something else. any other suggestion?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "edited": false, "score": 0, "creation_date": 1560313897, "post_id": 56554662, "comment_id": 99690321, "body": "@Gurjotkaur: Since ON and OFF are separate from TRUE and FALSE, there&#39;s no problem using 1 and 0 for ON and OFF, as well as using 1 for TRUE and 0 for FALSE (but 0 for TRUE and 1 for FALSE is completely anti-idiomatic C).  You could use <code>enum ToolAttached { OFF = 0, ON = 1 }</code> and then <code>enum ToolAttached tool;</code> as part of a structure."}, {"owner": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560314152, "post_id": 56554662, "comment_id": 99690382, "body": "@JonathanLeffler after defining ON AND OFF as 1 and 0. the code: int majorPositions[4][4]={{0,90,-90,OFF},{90,15,90,ON},{-45,-30,&zwnj;&#8203;30,ON},{0,60,0,OFF}}&zwnj;&#8203;; is also syntax error"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "edited": false, "score": 1, "creation_date": 1560314859, "post_id": 56554662, "comment_id": 99690511, "body": "@Gurjotkaur There should be some info displayed along with that error."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "edited": false, "score": 0, "creation_date": 1560315145, "post_id": 56554662, "comment_id": 99690581, "body": "@Gurjotkaur you can use 1/0 for ON/OFF AND TRUE/FALSE. There is no issue with that. The context in which the values are used determines whether it is representing TRUE/FALSE or ON/OFF."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560315184, "post_id": 56554662, "comment_id": 99690588, "body": "Without seeing what you&#39;ve done with <code>ON</code> and <code>OFF</code>, it isn&#39;t easy to guess what&#39;s wrong.  Maybe you wrote <code>#define OFF 0;</code> with the semicolon at the end.  That semicolon should not be there because it leads to inscrutable syntax errors."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "edited": false, "score": 0, "creation_date": 1560315221, "post_id": 56554662, "comment_id": 99690600, "body": "@Gurjotkaur just like the numbers 1-100 can be used to represent the age of a person and also their weight in Kgs, you can use the same number combination to represent two different quantities."}], "tags": [], "owner": {"reputation": 86, "user_id": 7959020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19510c38910a0ba8baf67550e57f56fc?s=128&d=identicon&r=PG", "display_name": "Masahiro Wada", "link": "https://stackoverflow.com/users/7959020/masahiro-wada"}, "is_accepted": false, "score": 1, "last_activity_date": 1560313495, "creation_date": 1560313495, "answer_id": 56554662, "question_id": 56554608, "link": "https://stackoverflow.com/questions/56554608/how-to-define-2d-array-in-c/56554662#56554662", "title": "How to define 2D array in C", "body": "<p>You have to specify the size of inner array as following.</p>\n\n<pre><code>int majorPositions[][3]={{0,90,-90},{90,15,90},{-45,-30,30},{0,60,0}};\n</code></pre>\n\n<p>And, I think you can encode ON and OFF into 1 and 0.</p>\n"}, {"comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 2, "creation_date": 1560318409, "post_id": 56555176, "comment_id": 99691443, "body": "If you <code>#include &lt;stdbool.h&gt;</code> you could use <code>bool</code> as a type and <code>true</code> and <code>false</code> as values. I&#39;d never define booleans myself. This header was introduced 20 years ago in C99."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1560328074, "post_id": 56555176, "comment_id": 99695665, "body": "Using a struct will probably lead to less efficient code though. The compiler is going to pad that bool to alignment anyway."}, {"owner": {"reputation": 1590, "user_id": 3796272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqSzP.jpg?s=128&g=1", "display_name": "Kampi", "link": "https://stackoverflow.com/users/3796272/kampi"}, "edited": false, "score": 0, "creation_date": 1560329225, "post_id": 56555176, "comment_id": 99696282, "body": "You can avoid this when you add <code>__attribute__ ((packed))</code>. In this case the compiler don&#180;t pad (if the compiler uses a padding). If the compiler doesn&#180;t pad you don&#180;t need this."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1560373349, "post_id": 56555176, "comment_id": 99719668, "body": "The compiler doesn&#39;t pad for fun; it does so because the code will be more efficient than if it is unpadded."}], "tags": [], "owner": {"reputation": 1590, "user_id": 3796272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqSzP.jpg?s=128&g=1", "display_name": "Kampi", "link": "https://stackoverflow.com/users/3796272/kampi"}, "is_accepted": false, "score": 1, "last_activity_date": 1560325237, "last_edit_date": 1560325237, "creation_date": 1560317164, "answer_id": 56555176, "question_id": 56554608, "link": "https://stackoverflow.com/questions/56554608/how-to-define-2d-array-in-c/56555176#56555176", "title": "How to define 2D array in C", "body": "<p>I would use something like (like the other mention above)</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\ntypedef struct\n{\n   int x;\n   int y;\n   int z;\n   bool Tool;\n} TableEntry_t;\n\nTableEntry_t majorPositions[4];\n</code></pre>\n\n<p>It\u00b4s a clear solution and you can easily extend the table if you want.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1560328422, "creation_date": 1560328422, "answer_id": 56557852, "question_id": 56554608, "link": "https://stackoverflow.com/questions/56554608/how-to-define-2d-array-in-c/56557852#56557852", "title": "How to define 2D array in C", "body": "<p>You need to type out the inner dimension size(s) explicitly. To simplify everything, consider taking advantage of the fact that booleans in C are just glorified integers. You can use an <code>int</code> as <code>bool</code> and vice versa.</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nint majorPositions[][4]=\n{\n  {  0,  90, -90, false },\n  { 90,  15,  90, true  },\n  {-45, -30,  30, true  },\n  {  0,  60,   0, false },\n};\n</code></pre>\n\n<p>You can get the size of this array at compile-time using <code>sizeof(majorPositions)/sizeof(majorPositions[0])</code> (which will be 4 in this case).</p>\n\n<p>Alternatively use a <code>struct</code> as proposed in other answers. It may or may not give less efficient code.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11264078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8344f794aad51fbe287d026c441bbaf8?s=128&d=identicon&r=PG&f=1", "display_name": "laddu", "link": "https://stackoverflow.com/users/11264078/laddu"}, "is_accepted": false, "score": 0, "last_activity_date": 1560331769, "creation_date": 1560331769, "answer_id": 56558885, "question_id": 56554608, "link": "https://stackoverflow.com/questions/56554608/how-to-define-2d-array-in-c/56558885#56558885", "title": "How to define 2D array in C", "body": "<p>In two dimensional arrays, you must specify second dimension of an array during the declaration.</p>\n\n<p><code>int majorPositions[][3]={{0,90,-90},{90,15,90},{-45,-30,30},{0,60,0}};</code> </p>\n"}], "owner": {"reputation": 145, "user_id": 8101708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ykW_MKIw_5Q/AAAAAAAAAAI/AAAAAAAAT5g/mIQsfmRfHg4/photo.jpg?sz=128", "display_name": "Gurjot kaur", "link": "https://stackoverflow.com/users/8101708/gurjot-kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1560440568, "creation_date": 1560313019, "last_edit_date": 1560440568, "question_id": 56554608, "link": "https://stackoverflow.com/questions/56554608/how-to-define-2d-array-in-c", "title": "How to define 2D array in C", "body": "<p>I have to make a 2D array that carries the information of a table</p>\n\n<p>I can't find the syntax error in the following</p>\n\n<pre><code>int majorPositions[][]={{0,90,-90},{90,15,90},{-45,-30,30},{0,60,0}};\n</code></pre>\n\n<p>also, how do I enter last column details as it is a char, not an integer</p>\n"}, {"tags": ["c++", "c", "windows", "gcc", "mingw"], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1610853181, "post_id": 56554568, "comment_id": 116262226, "body": "The feature enabled by <code>-ms-extensions</code> is not the standard &quot;anonymous structs and unions&quot;. Standard anonymous structs and unions only allow nested <i>tagless</i> struct/union declarations to introduce an unnamed field. This extension, on the other hand, allows <i>tagged</i> struct/union declaration that introduce an unnamed field. It also allows using previously declared struct/union types for that purpose (tagged or typedefed). This is quite different and notably wider functionality than the standard feature."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1611873011, "post_id": 56554568, "comment_id": 116598175, "body": "@AnT Updated thanks, if it&#39;s not correct then don&#39;t hesitate to edit"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 7, "last_activity_date": 1611872996, "last_edit_date": 1611872996, "creation_date": 1560312721, "answer_id": 56554568, "question_id": 56554567, "link": "https://stackoverflow.com/questions/56554567/what-does-the-ms-extensions-flag-do-exactly-with-gcc/56554568#56554568", "title": "What does the ms-extensions flag do exactly with gcc?", "body": "<p>According to the gcc 9.1.0 source code (grepped for <code>flag_ms_extensions</code>) the effects are:</p>\n<ul>\n<li>(C) Allow Microsoft's version of anonymous unions and struct. This includes support for <a href=\"https://stackoverflow.com/questions/8932707/what-are-anonymous-structs-and-unions-useful-for-in-c11\">C11 anonymous unions and structs</a> as well as <a href=\"https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/z2cx9y4f(v=vs.120)?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">Microsoft-specific flavours</a>, including omitting the braced member list entirely, and placing members in the parent namespace even if the struct/union had an identifier.</li>\n<li>(C++) Allow a class member to have the same name as its type (e.g. <code>using foo = int; struct A { foo foo; }</code>). With ms-extensions disabled, the behaviour is to accept this code in C (where it is legal); or an <code>extern &quot;C&quot;</code> block unless <code>-pedantic</code> flag was given. The error message for this is <code>declaration of NAME changes meaning of NAME</code>.</li>\n<li>(C++) Allow <em>implicit int</em>; any situation that would have produced the diagnostic <code>ISO C++ forbids declaration of NAME with no type</code> is now allowed, with <code>int</code> assumed as the type. Examples: <code>const *p;</code> or <code>const f();</code>.</li>\n<li>(C++) Allow implicit conversion from a <em>qualified-id</em> naming a non-static member function, to a pointer-to-member.   In ISO C++ the <code>&amp;</code> operator is required to perform that conversion.</li>\n<li>(C++) Allow <code>&amp;f</code> to form a pointer-to-member,  if <code>f</code> (an unqualified-id) names a non-overloaded member function in that context. ISO C++ requires explicit qualification with the class name.</li>\n</ul>\n<hr />\n<p>The flag is turned on by default if the Target ABI is a Microsoft ABI.  It can be disabled by manually specifying <code>-fno-ms-extensions</code>.</p>\n<hr />\n<p>The rationale behind this is a tougher question.  The <a href=\"https://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Dialect-Options.html#index-fms-extensions-1\" rel=\"nofollow noreferrer\">documentation</a> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-fms-extensions\" rel=\"nofollow noreferrer\">has</a> to say:</p>\n<blockquote>\n<p>Accept some non-standard constructs used in Microsoft header files.</p>\n<p>Disable Wpedantic warnings about constructs used in MFC.</p>\n</blockquote>\n<p>So I assume the rationale is to allow g++ to build <a href=\"https://stackoverflow.com/questions/tagged/mfc\">MFC</a> applications which depend on non-standard code in MSVC vendor-supplied headers.</p>\n<p>I am not sure how relevant that still is in 2019 and I think a good case could be made for gcc to default to having this flag turned off. (Users can always specify it if they want to build an old MFC app).</p>\n<p>For example MSVC 19.xx (the latest version to date) no longer allows the last three bullet points in its default mode. (It does still allow <code>foo foo;</code> even with <code>/Za</code> flag).</p>\n"}], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 0, "accepted_answer_id": 56554568, "answer_count": 1, "score": 6, "last_activity_date": 1611872996, "creation_date": 1560312721, "question_id": 56554567, "link": "https://stackoverflow.com/questions/56554567/what-does-the-ms-extensions-flag-do-exactly-with-gcc", "title": "What does the ms-extensions flag do exactly with gcc?", "body": "<p>GCC has a flag <code>-fms-extensions</code>.</p>\n\n<p>What does this flag do exactly? Why is it sometimes on by default, and why does it exist?</p>\n"}, {"tags": ["c", "lint"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1560312994, "post_id": 56554528, "comment_id": 99690146, "body": "It isn&#39;t clear what <code>lint</code> is complaining about \u2014 there isn&#39;t a problem that I see in the code.  You&#39;ll need to study your <code>lint</code> manual and see how it recommends you fix the issue \u2014 and how it explains what the issue (because, as I said, I don&#39;t see any problem with the code)."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1560316917, "post_id": 56554528, "comment_id": 99690998, "body": "<a href=\"https://stackoverflow.com/a/3887901/3386109\">Here&#39;s a related answer</a>. If I&#39;m reading that answer correctly, then I think you should file a bug report."}], "owner": {"reputation": 868, "user_id": 4402433, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9bce35bd631fc9215f7885d6d0c84366?s=128&d=identicon&r=PG&f=1", "display_name": "Sathiya", "link": "https://stackoverflow.com/users/4402433/sathiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560312855, "creation_date": 1560312408, "last_edit_date": 1560312855, "question_id": 56554528, "link": "https://stackoverflow.com/questions/56554528/overcome-lint-warning-custodial-pointer-has-not-been-freed-or-returned", "title": "Overcome lint warning: custodial pointer has not been freed or returned", "body": "<p>I have a simple C code where I pass by reference like below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid fun(int *a)\n{\n    *a = 12;\n}\n\nint main()\n{\n    int a=10;\n    printf(\"%d\\n\",a);\n    fun(&amp;a);\n    printf(\"%d\\n\",a);\n    return 0;\n}\n</code></pre>\n\n<p>Lint throws:</p>\n\n<pre><code>error:custodial pointer 'a' has not been freed or returned.\n</code></pre>\n\n<p>I don't want to suppress lint warning; I rather want to avoid the error. This symbol <code>a</code> remains custodial until it is passed to another function. Here I am not passing it to another function. Also it can't be freed, as I am accessing its reference from <code>main()</code>. How to overcome this lint warning?</p>\n"}, {"tags": ["c", "macros", "variadic-functions"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1560306205, "post_id": 56553819, "comment_id": 99688870, "body": "You need to have a limit on the number of variables that you can pass to the <code>ASSERT_EXIST</code> macro. AFAIK, there is no way to write a macro that can expand all the arguments passed to it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560306665, "post_id": 56553819, "comment_id": 99688961, "body": "Look at the <a href=\"https://www.boost.org/doc/libs/1_70_0/libs/preprocessor/doc/index.html\" rel=\"nofollow noreferrer\">Boost Preprocessor</a> library (nominally for C++, but perfectly usable with C too).  It has tools to handle those requirements, at least for sensible sizes of argument list.  If you insist on 300 arguments, you may have some extra work to do.  See also <a href=\"https://stackoverflow.com/questions/2308243/macro-returning-the-number-of-arguments-it-is-given-in-c\">Macro returning the numnber of arguments it is given in C</a> and related questions."}], "answers": [{"comments": [{"owner": {"reputation": 31255, "user_id": 28494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/c14ME.gif?s=128&g=1", "display_name": "qrdl", "link": "https://stackoverflow.com/users/28494/qrdl"}, "edited": false, "score": 0, "creation_date": 1560320331, "post_id": 56554424, "comment_id": 99692069, "body": "varargs have nothing to do with variadic macros"}], "tags": [], "owner": {"reputation": 845, "user_id": 4077574, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/orn50.png?s=128&g=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/4077574/galaxy"}, "is_accepted": false, "score": -1, "last_activity_date": 1560326604, "last_edit_date": 1560326604, "creation_date": 1560311444, "answer_id": 56554424, "question_id": 56553819, "link": "https://stackoverflow.com/questions/56553819/expand-c-macro-va-args-elements/56554424#56554424", "title": "expand c macro __VA_ARGS__ elements", "body": "<p>If you just want to throw variable number of arguments to a function, <code>__VA_ARGS__</code> is enough as you already did. To handle the trending comma, sometimes you may also need <code>##</code>.</p>\n\n<p>If you want to iterate through the arguments, use varargs from <code>&lt;stdarg.h&gt;</code>.</p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/stdarg.3.html\" rel=\"nofollow noreferrer\">stdarg.h</a></p>\n"}, {"comments": [{"owner": {"reputation": 869, "user_id": 1903880, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3a7f0353e763f3e86ca839f199ebc6dd?s=128&d=identicon&r=PG", "display_name": "zhihuifan", "link": "https://stackoverflow.com/users/1903880/zhihuifan"}, "edited": false, "score": 0, "creation_date": 1560345277, "post_id": 56557680, "comment_id": 99705714, "body": "I agree with you,  by practice it doesn&#39;t mean a lot."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1560327821, "creation_date": 1560327821, "answer_id": 56557680, "question_id": 56553819, "link": "https://stackoverflow.com/questions/56553819/expand-c-macro-va-args-elements/56557680#56557680", "title": "expand c macro __VA_ARGS__ elements", "body": "<p>There are various dirty tricks where you can have variadic macros work up to a certain fixed number. However, the proper and correct solution is to not write a variadic macro at all. It is much better practice to simply use</p>\n\n<pre><code>#define ASSERT_EXISTS(val, x) if (!x##_exists) { return error(#x \" is missing\", val); }\n\nASSERT_EXIST(100, a);\nASSERT_EXIST(100, b);\n...\n</code></pre>\n\n<p>Or better yet, drop all such icky macros in favour of readable standard C.</p>\n\n<pre><code>if(!a_exists) { return error(\"a is missing\", 100); }\nif(!b_exists) { return error(\"b is missing\", 100); }\nif(!c_exists) { return error(\"c is missing\", 100); }\n</code></pre>\n\n<p>Sure, code repetition is bad practice, but secret macro languages are extremely bad practice. </p>\n"}], "owner": {"reputation": 869, "user_id": 1903880, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3a7f0353e763f3e86ca839f199ebc6dd?s=128&d=identicon&r=PG", "display_name": "zhihuifan", "link": "https://stackoverflow.com/users/1903880/zhihuifan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56557680, "answer_count": 2, "score": 1, "last_activity_date": 1560327821, "creation_date": 1560305838, "last_edit_date": 1560306942, "question_id": 56553819, "link": "https://stackoverflow.com/questions/56553819/expand-c-macro-va-args-elements", "title": "expand c macro __VA_ARGS__ elements", "body": "<p>I want to define a macro like this</p>\n\n<pre><code>#define ASSERT_EXIST(error, ...)  some-impl-here\n</code></pre>\n\n<p>then we can call it like this</p>\n\n<pre><code>ASSERT_EXIST(100, a, b, c)\n</code></pre>\n\n<p>and it should be expand to this</p>\n\n<pre><code>if (!a_exists)  return error(\"a is missing\", 100);\nif (!b_exists)  return error(\"b is missing\", 100);\nif (!c_exists)  return error(\"c is missing\", 100);\n</code></pre>\n\n<p>the most trouble part of this is I can't iterate over <code>__VA_ARGS__</code> easily in a macro.</p>\n"}, {"tags": ["c", "linker"], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 3584262, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/136ced4c4b2bb8f35d2f7701a6d5fbe7?s=128&d=identicon&r=PG&f=1", "display_name": "hacksoi", "link": "https://stackoverflow.com/users/3584262/hacksoi"}, "edited": false, "score": 0, "creation_date": 1560305272, "post_id": 56553691, "comment_id": 99688727, "body": "Ah okay, I wasn&#39;t sure if the linker ran and resolved references for DLLs. Not sure where I could&#39;ve found this info though... I can&#39;t really find anything."}, {"owner": {"reputation": 1075, "user_id": 3584262, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/136ced4c4b2bb8f35d2f7701a6d5fbe7?s=128&d=identicon&r=PG&f=1", "display_name": "hacksoi", "link": "https://stackoverflow.com/users/3584262/hacksoi"}, "edited": false, "score": 0, "creation_date": 1560375181, "post_id": 56553691, "comment_id": 99720196, "body": "Ordered. Thanks."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 1, "last_activity_date": 1560304566, "creation_date": 1560304566, "answer_id": 56553691, "question_id": 56553654, "link": "https://stackoverflow.com/questions/56553654/how-are-symbols-resolved-when-creating-a-dynamic-library/56553691#56553691", "title": "How are symbols resolved when creating a dynamic library?", "body": "<p>Yes, the linker runs to finalize the build of the DLL and will need a definition of <code>foo</code> to build.  But as long as you aren't linking the same library of code containing <code>my_program::foo</code> into <code>my_dll.dll</code>, the <code>foo</code> picked up for linking the DLL itself will be <code>my_dll::foo</code>.</p>\n\n<p>The only time you can get yourself in trouble here is if you had a <code>shared.lib</code> static code library that implements an independent <code>foo</code> function and is linked with both with the EXE and DLL. It might be ambiguous which one the DLL picks up if it has a local implementation of <code>foo</code>.</p>\n"}], "owner": {"reputation": 1075, "user_id": 3584262, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/136ced4c4b2bb8f35d2f7701a6d5fbe7?s=128&d=identicon&r=PG&f=1", "display_name": "hacksoi", "link": "https://stackoverflow.com/users/3584262/hacksoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 56553691, "answer_count": 1, "score": 0, "last_activity_date": 1560304566, "creation_date": 1560304174, "question_id": 56553654, "link": "https://stackoverflow.com/questions/56553654/how-are-symbols-resolved-when-creating-a-dynamic-library", "title": "How are symbols resolved when creating a dynamic library?", "body": "<p>For example, let's say I have the following structure:</p>\n\n<p><code>\nmy_program\n| main.c - defines main()\n| foo.c - defined foo()\nmy_dll\n| dll_start.c - defined dll_start()\n| foo.c - defines foo()</code></p>\n\n<p>where main() calls foo() and then dll_start(). </p>\n\n<p>In what order are they called? For example, is it:</p>\n\n<ol>\n<li>my_program::main</li>\n<li>my_program::foo </li>\n<li>my_dll::dll_start</li>\n<li>my_dll::foo</li>\n</ol>\n\n<p>?</p>\n\n<p>Basically, I want to know if when you create a dynamic library, if the linker (does the linker even run?) always uses symbols inside the dll when resolving symbols inside the dll itself - for example, in this case, does the foo() inside my_dll call the my_dll::foo or the my_program::foo?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1560301100, "post_id": 56553273, "comment_id": 99688080, "body": "<code>ucontext_t</code> is a struct that is either defined above somewhere in your code, or it is provided in a header file. Since you have direct access to its members, (e.g. <code>p-&gt;uc_mcontext.error_code</code> shows it is not an <i>opaque type</i>), you should be able to look the remainder of your code and find where <code>ucontext_t</code> is defined and look at what the <code>error_code</code> member is."}, {"owner": {"reputation": 157, "user_id": 807764, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e635149bd7b556c1b3306fe67f960c24?s=128&d=identicon&r=PG", "display_name": "wthung", "link": "https://stackoverflow.com/users/807764/wthung"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1560314543, "post_id": 56553273, "comment_id": 99690462, "body": "Yes, I can see it&#39;s defined as <code>unsigned long</code> in <code>struct sigcontext</code>, but what the value of it mean? Sometimes when the fault address is 0, the error code is 23. What the 23 means?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1560348199, "post_id": 56553273, "comment_id": 99707632, "body": "You will have to chase the <code>thread.error_code</code> down which is where your <code>uc_mcontext.error_code</code> is derived, e.g. <code>.error_code    = current-&gt;thread.error_code,</code> from <code>arch&#47;arm&#47;kernel&#47;signal.c</code> (which I suspect draws from <code>errno.h</code>). You can start with <a href=\"https://lkml.org/lkml/2019/2/13/1501\" rel=\"nofollow noreferrer\">Commit 5ca451cf6ed04443774bbb7ee45332dafa42e99f</a> and work from there."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 807764, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e635149bd7b556c1b3306fe67f960c24?s=128&d=identicon&r=PG", "display_name": "wthung", "link": "https://stackoverflow.com/users/807764/wthung"}, "edited": false, "score": 0, "creation_date": 1560392923, "post_id": 56564986, "comment_id": 99723627, "body": "Wow, this is really a super detailed and useful information. Thanks!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 157, "user_id": 807764, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e635149bd7b556c1b3306fe67f960c24?s=128&d=identicon&r=PG", "display_name": "wthung", "link": "https://stackoverflow.com/users/807764/wthung"}, "edited": false, "score": 0, "creation_date": 1560393372, "post_id": 56564986, "comment_id": 99723718, "body": "Sure, hope it helps. It&#39;s not hard to do when you know where to start, but it is quite bewildering the first time. For big code bases like the Linux kernel there are usually a few good sites that provide the source online in a way you can either search or use the linked annotations to move around pretty quickly. Take a minute and look through a few. Good luck with your coding."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1560351480, "last_edit_date": 1560351480, "creation_date": 1560350939, "answer_id": 56564986, "question_id": 56553273, "link": "https://stackoverflow.com/questions/56553273/the-meaning-of-error-code-of-mcontext-t-in-arm/56564986#56564986", "title": "The meaning of error_code of mcontext_t in arm", "body": "<blockquote>\n  <p>\"Sometimes when the fault address is 0, the error code is 23. What the\n  23 means?\"</p>\n</blockquote>\n\n<p>If you start with the signal source for arm in <a href=\"https://elixir.bootlin.com/linux/latest/source/arch/arm/kernel/signal.h\" rel=\"nofollow noreferrer\">/arch/arm/kernel/signal.h</a>, you find the struct is defined in <a href=\"https://elixir.bootlin.com/linux/latest/source/arch/arm/include/uapi/asm/sigcontext.h\" rel=\"nofollow noreferrer\">/arch/arm/include/uapi/asm/sigcontext.h</a></p>\n\n<p>And then you find <code>error_code</code> defined as an <code>unsigned long</code> in <code>struct sigcontext</code>, e.g.</p>\n\n<pre><code>struct sigcontext {\n    unsigned long trap_no;\n    unsigned long error_code;\n    unsigned long oldmask;\n    unsigned long arm_r0;\n    unsigned long arm_r1;\n    unsigned long arm_r2;\n    unsigned long arm_r3;\n    unsigned long arm_r4;\n    unsigned long arm_r5;\n    unsigned long arm_r6;\n    unsigned long arm_r7;\n    unsigned long arm_r8;\n    unsigned long arm_r9;\n    unsigned long arm_r10;\n    unsigned long arm_fp;\n    unsigned long arm_ip;\n    unsigned long arm_sp;\n    unsigned long arm_lr;\n    unsigned long arm_pc;\n    unsigned long arm_cpsr;\n    unsigned long fault_address;\n};\n</code></pre>\n\n<p>(<strong>note:</strong> the struct is different for <code>arm64</code>)</p>\n\n<p>Then to find out what error number (<code>errno</code>) <code>23</code> is, you would start at <a href=\"https://elixir.bootlin.com/linux/latest/source/arch/arm/kernel/signal.c\" rel=\"nofollow noreferrer\">/arch/arm/kernel/signal.c</a> and see that <code>linux/errno.h</code> is included and follow the trail to <a href=\"https://elixir.bootlin.com/linux/latest/source/include/linux/errno.h\" rel=\"nofollow noreferrer\">/include/linux/errno.h</a> which leads you to <a href=\"https://elixir.bootlin.com/linux/latest/source/include/uapi/asm-generic/errno.h\" rel=\"nofollow noreferrer\">/include/uapi/asm-generic/errno.h</a> and which finally leads you to <a href=\"https://elixir.bootlin.com/linux/latest/source/include/uapi/asm-generic/errno-base.h\" rel=\"nofollow noreferrer\">/include/uapi/asm-generic/errno-base.h</a></p>\n\n<pre><code>#ifndef _ASM_GENERIC_ERRNO_BASE_H\n#define _ASM_GENERIC_ERRNO_BASE_H\n\n#define EPERM        1  /* Operation not permitted */\n...\n#define ENFILE      23  /* File table overflow */\n...\n</code></pre>\n\n<p>(<strong>note:</strong> the first 38 error codes are generic to all processes and architectures, though some cannot occur on specific architectures. Thus the reason they are found under the define <code>_ASM_GENERIC_ERRNO_BASE_H</code>)</p>\n\n<p>Which you can then use any general reference to lookup like <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow noreferrer\">man 3 errno</a> which would explain:</p>\n\n<blockquote>\n<pre><code>   ENFILE          Too many open files in system (POSIX.1-2001).  On\n                   Linux, this is probably a result of encountering the\n                   /proc/sys/fs/file-max limit (see proc(5)).\n</code></pre>\n</blockquote>\n\n<p>You can also consult the <code>libc</code> <a href=\"https://www.gnu.org/software/libc/manual/html_node/Error-Codes.html\" rel=\"nofollow noreferrer\">Error Codes</a> documentation to find:</p>\n\n<blockquote>\n<pre><code>Macro: int ENFILE\n\n    \u201cToo many open files in system.\u201d There are too many distinct file \n    openings in the entire system. Note that any number of linked \n    channels count as just one file opening; see Linked Channels. This \n    error never occurs on GNU/Hurd systems.\n</code></pre>\n</blockquote>\n\n<p>Both of which point clearly to the problem being <strong>\"too many open files in system\"</strong>. Now it is up to you to find out why that is occurring in your code.</p>\n\n<p>(<strong>note:</strong> as a shortcut you can simply search, e.g. <code>\"linux error 23\"</code> from which you would find the needed information at, e.g. <a href=\"http://www-numi.fnal.gov/offline_software/srt_public_context/WebDocs/Errors/unix_system_errors.html\" rel=\"nofollow noreferrer\">Errors: Linux System Errors</a>, but in not doing to reverse-trace, pay close attention to how old the file-location information is, as the <code>errno</code> could now be located at a completely different place in the tree than what is listed on older pages -- as is the case with the link above)</p>\n"}], "owner": {"reputation": 157, "user_id": 807764, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e635149bd7b556c1b3306fe67f960c24?s=128&d=identicon&r=PG", "display_name": "wthung", "link": "https://stackoverflow.com/users/807764/wthung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 56564986, "answer_count": 1, "score": 1, "last_activity_date": 1560351480, "creation_date": 1560300069, "last_edit_date": 1560314594, "question_id": 56553273, "link": "https://stackoverflow.com/questions/56553273/the-meaning-of-error-code-of-mcontext-t-in-arm", "title": "The meaning of error_code of mcontext_t in arm", "body": "<p>We use the following code snippets to print the user context information in the handler registered via sigaction:</p>\n\n<pre><code>ucontext_t *p = (ucontext_t *)context;\nfprintf(out, \"pc %x\\n\", p-&gt;uc_mcontext.arm_pc);\nfprintf(out, \"fault addr %x\\n\", p-&gt;uc_mcontext.fault_address);\nfprintf(out, \"error %lu\\n\", p-&gt;uc_mcontext.error_code);\n</code></pre>\n\n<p>Does anyone know what is the meaning of <code>uc_mcontext.error_code</code>. Where can I find the list of possible error codes? Thanks.</p>\n"}, {"tags": ["c", "linker"], "comments": [{"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1560302840, "post_id": 56553077, "comment_id": 99688327, "body": "please post your code and what you try to do"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1560303058, "creation_date": 1560303058, "answer_id": 56553536, "question_id": 56553077, "link": "https://stackoverflow.com/questions/56553077/are-references-across-o-files-resolved-when-building-a-static-library/56553536#56553536", "title": "Are references across .o files resolved when building a static library?", "body": "<p>Let us assume that:</p>\n\n<ol>\n<li>The library is <code>libfoobar.a</code> (or <code>libfoobar.lib</code>) and is in directory <code>./lib</code>.</li>\n<li>The library file <code>foo.c</code> defines <code>foo()</code> and <code>foo()</code> calls <code>bar()</code>.</li>\n<li>The library file <code>bar.c</code> defines <code>bar()</code>.</li>\n<li>The library source files are not in the current directory.</li>\n<li>The program file <code>bar.c</code> also defines <code>bar()</code> \u2014 a different implementation.</li>\n<li>The program file <code>main.c</code> calls both <code>foo()</code> and <code>bar()</code>.</li>\n<li><p>Your linking command line looks like:</p>\n\n<pre><code>cc -o program main.o bar.o -L ./lib -lfoobar\n</code></pre></li>\n</ol>\n\n<p>Then:</p>\n\n<ul>\n<li>The program will contain the <code>bar()</code> from the program file <code>bar.c</code> (because that was explicitly included on the command line, ahead of the library).</li>\n<li>The program will contain the <code>foo()</code> from the library file <code>foo.c</code>, but the <code>bar()</code> that it calls will be the one from the program file <code>bar.c</code>, not the one from the library.</li>\n</ul>\n\n<p>If there are more symbols involved, so that the library <code>foo.c</code> calls functions which are only available in the library <code>bar.c</code> (the program <code>bar.c</code> does not implement all those functions), then the linking will fail because the program contains the program's <code>bar.c</code> (unconditionally), but it also needs the library's <code>bar.c</code>, but that gives you a double definition of the function <code>bar()</code> \u2014 which is an error.</p>\n\n<p>The twists and turns can get serious.  Simple rule of thumb \u2014 don't do it.  That is, don't make the program's <code>bar.c</code> provide the symbol that is also available in the library's <code>bar.c</code>.  If you must and there are other entry points involved, then you have to work a lot harder.</p>\n\n<p>Don't put libraries before object files; then you'll fail with <code>bar()</code> doubly defined.  Libraries go after object files in the link list.  You do need to get multiple (static) libraries in the correct order, though.  Or use special options to make the loader rescan libraries, etc.</p>\n"}], "owner": {"reputation": 1075, "user_id": 3584262, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/136ced4c4b2bb8f35d2f7701a6d5fbe7?s=128&d=identicon&r=PG&f=1", "display_name": "hacksoi", "link": "https://stackoverflow.com/users/3584262/hacksoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 56553536, "answer_count": 1, "score": 0, "last_activity_date": 1560303058, "creation_date": 1560297998, "question_id": 56553077, "link": "https://stackoverflow.com/questions/56553077/are-references-across-o-files-resolved-when-building-a-static-library", "title": "Are references across .o files resolved when building a static library?", "body": "<p>For example, let's say I build a library a.lib that has two files: foo.c and bar.c. foo.c calls a function <code>void bar()</code> defined in bar.c.</p>\n\n<p>Now let's say I have an executable that I'm going to create that has two files: main.c and bar.c. This bar.c also has <code>void bar()</code> defined, but with a different implementation.</p>\n\n<p>When I link the executable with a.lib, which <code>void bar()</code> will be called by the executable?</p>\n"}, {"tags": ["python", "c", "avr", "microprocessors"], "comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1560297780, "post_id": 56552990, "comment_id": 99687538, "body": "Too many pieces are missing. My recommendation is to attach the scope and see precisely what&#39;s on the wire."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1560298219, "post_id": 56552990, "comment_id": 99687604, "body": "&quot;I do not seem to be able to identify/recieve a &#39;\\0&#39; character at the end of the string&quot; --&gt; perhaps the sending side never sends the <i>null character</i>."}, {"owner": {"reputation": 359, "user_id": 10921202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82ab7ba81a3429f0302bc241c16be57?s=128&d=identicon&r=PG&f=1", "display_name": "dunajski", "link": "https://stackoverflow.com/users/10921202/dunajski"}, "edited": false, "score": 2, "creation_date": 1560327802, "post_id": 56552990, "comment_id": 99695521, "body": "With another string terminator for example % works? I&#39;m asking because afaik there is no &#39;\\0&#39; at the end of string in Python."}, {"owner": {"reputation": 3648, "user_id": 4931630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4290ddd0630dd0091e3b9713a23c3434?s=128&d=identicon&r=PG&f=1", "display_name": "AterLux", "link": "https://stackoverflow.com/users/4931630/aterlux"}, "edited": false, "score": 1, "creation_date": 1560424146, "post_id": 56552990, "comment_id": 99736019, "body": "Are you sure \\0 charater is sent? Can you take a screenshot from Termite in hex mode?"}], "owner": {"reputation": 11, "user_id": 11633837, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTUXamc-i5Q/AAAAAAAAAAI/AAAAAAAAABM/Pn7ycvM8N-E/photo.jpg?sz=128", "display_name": "Mr. Owels", "link": "https://stackoverflow.com/users/11633837/mr-owels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568443900, "creation_date": 1560297065, "last_edit_date": 1568443900, "question_id": 56552990, "link": "https://stackoverflow.com/questions/56552990/cannot-receive-0-character-over-uart", "title": "Cannot receive &#39;\\0&#39; character over UART", "body": "<p>I am currently working on a project that requires me to send instructions from Python to a microprocessor using UART. The problem I am having however is that I do not seem to be able to identify/receive a '\\0' character at the end of the string and therefore I have no way of telling when the string ends on the microprocessor side.</p>\n\n<p>I have tried a simple echo (send character back right after receiving it) so I know that the communication works.</p>\n\n<p>Here is the interrupt function for reading UART:</p>\n\n<pre><code>char data[10];\nvolatile uint8_t charIndex = 0;\nvolatile uint8_t dataComplete = 0;\n\nISR(USART1_RX_vect){\n    if(dataComplete == 0){\n        char input = UDR1;\n        if(input == '\\0'){\n            send('X');\n            charIndex = 0;\n            dataComplete = 1;\n        }\n        else{\n            data[charIndex] = input;\n            charIndex++;\n        }\n    }\n}\n</code></pre>\n\n<p>I expect the microprocessor to send a X character over UART but that does not happen. I am not sure where the problem is.</p>\n\n<p>EDIT: I tried adding '\\0' to '\\r' but it has the same negative result. I also tried using a proper serial communicator (Termite) for this task but even with that I am not able to get anything back.</p>\n"}, {"tags": ["c", "libwebsockets"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1560803010, "post_id": 56552944, "comment_id": 99847760, "body": "I&#39;m biased, but I&#39;m also curious because I want to improve my library... Why libwebsockets and not <a href=\"http://facil.io\" rel=\"nofollow noreferrer\">facil.io</a>?"}, {"owner": {"reputation": 13, "user_id": 11628012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd32c87b4a715fdb92fecc218117ac3?s=128&d=identicon&r=PG&f=1", "display_name": "hotzjacobb", "link": "https://stackoverflow.com/users/11628012/hotzjacobb"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1560817881, "post_id": 56552944, "comment_id": 99851567, "body": "No reason in particular; I might give your library a try. Thanks."}, {"owner": {"reputation": 13, "user_id": 11628012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd32c87b4a715fdb92fecc218117ac3?s=128&d=identicon&r=PG&f=1", "display_name": "hotzjacobb", "link": "https://stackoverflow.com/users/11628012/hotzjacobb"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1560818436, "post_id": 56552944, "comment_id": 99851657, "body": "Actually according to Wiki facil.io doesn&#39;t do client websockets which I need. But I have to say that the name makes it very attractive. (:"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1560842287, "post_id": 56552944, "comment_id": 99857535, "body": "Oh... Which Wiki is that? I guess I need to update some documentation somewhere, because you <b>can</b> use <a href=\"http://facil.io/0.7.x/http#websocket-connections-client\" rel=\"nofollow noreferrer\">facil.io as a WebSocket client</a>."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1560844112, "post_id": 56552944, "comment_id": 99858547, "body": "Thank you for your time, answering my question."}, {"owner": {"reputation": 13, "user_id": 11628012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd32c87b4a715fdb92fecc218117ac3?s=128&d=identicon&r=PG&f=1", "display_name": "hotzjacobb", "link": "https://stackoverflow.com/users/11628012/hotzjacobb"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1560873213, "post_id": 56552944, "comment_id": 99875746, "body": "Yep, the Wikipedia page. It&#39;s updated now."}], "owner": {"reputation": 13, "user_id": 11628012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd32c87b4a715fdb92fecc218117ac3?s=128&d=identicon&r=PG&f=1", "display_name": "hotzjacobb", "link": "https://stackoverflow.com/users/11628012/hotzjacobb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560296591, "creation_date": 1560296591, "question_id": 56552944, "link": "https://stackoverflow.com/questions/56552944/unable-to-run-minimal-ws-client-echo", "title": "Unable to run minimal-ws-client-echo", "body": "<p>I'm currently trying to run a minimal example linked below:</p>\n\n<p><a href=\"https://github.com/warmcat/libwebsockets/tree/master/minimal-examples/ws-client/minimal-ws-client-echo\" rel=\"nofollow noreferrer\">https://github.com/warmcat/libwebsockets/tree/master/minimal-examples/ws-client/minimal-ws-client-echo</a></p>\n\n<p>for libwebsockets with a simple Python http server on localhost:7681. I'm getting an error:</p>\n\n<pre><code>\n\n    minimal-ws-client-echo jeffhotz$ ./minimal-ws-client-echo \n    [2019/06/11 15:55:03:1087] USER: LWS minimal ws client echo + permessage-deflate + multifragment bulk message\n    [2019/06/11 15:55:03:1087] USER:    lws-minimal-ws-client-echo [-n (no exts)] [-u url] [-p port] [-o (once)]\n    [2019/06/11 15:55:03:1087] USER: options 0, ads localhost\n    [2019/06/11 15:55:03:1112] NOTICE: created client ssl context for default\n    [2019/06/11 15:55:03:1113] USER: connecting to localhost:7681//\n    [2019/06/11 15:55:03:1206] ERR: CLIENT_CONNECTION_ERROR: HS: URI missing\n    [2019/06/11 15:55:03:1208] USER: Completed 3 failed\n\n</code></pre>\n\n<p>I'm clueless as to what the error is. Thanks for your help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1560295960, "post_id": 56552850, "comment_id": 99687225, "body": "You should get a text book on C. C is notoriously difficult to learn by trial and error."}], "answers": [{"comments": [{"owner": {"reputation": 64, "user_id": 3382147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d8exa.png?s=128&g=1", "display_name": "can&#39;tThinkOfAName", "link": "https://stackoverflow.com/users/3382147/cantthinkofaname"}, "edited": false, "score": 0, "creation_date": 1560316151, "post_id": 56552889, "comment_id": 99690804, "body": "Or declare it globally."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 64, "user_id": 3382147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d8exa.png?s=128&g=1", "display_name": "can&#39;tThinkOfAName", "link": "https://stackoverflow.com/users/3382147/cantthinkofaname"}, "edited": false, "score": 0, "creation_date": 1560325676, "post_id": 56552889, "comment_id": 99694463, "body": "Globals are rarely a good idea. They can work but it tends not to scale well."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1560296112, "creation_date": 1560296112, "answer_id": 56552889, "question_id": 56552850, "link": "https://stackoverflow.com/questions/56552850/why-this-is-not-correctly-printing-the-username-i-entered/56552889#56552889", "title": "Why this is not correctly printing the username i entered?", "body": "<p>You have two <em>different</em> <code>a</code> variables of type <code>ng</code>, one in each function.</p>\n\n<p>You need to pass the <code>main</code> one into <code>print</code>, such as with:</p>\n\n<pre><code>void print(Ng *a) {\n    printf(\"Username: %s\",a-&gt;username);\n}\n</code></pre>\n\n<p>and call it with:</p>\n\n<pre><code>print(&amp;a);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11633026, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MyKgB7qK5X4/AAAAAAAAAAI/AAAAAAAAABQ/Le3-0gdwXbo/photo.jpg?sz=128", "display_name": "REHAN SHAKIR", "link": "https://stackoverflow.com/users/11633026/rehan-shakir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "closed_date": 1560296007, "answer_count": 1, "score": -2, "last_activity_date": 1560296112, "creation_date": 1560295827, "question_id": 56552850, "link": "https://stackoverflow.com/questions/56552850/why-this-is-not-correctly-printing-the-username-i-entered", "closed_reason": "Duplicate", "title": "Why this is not correctly printing the username i entered?", "body": "<p>In this code i store username entered by user in 1-d array in struct but when i print this username it cannot print it right.</p>\n\n<h1>CODE:</h1>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\ntypedef struct ng\n{\n    char username[32];\n}ng;\nvoid print();\nint main()\n{\n    ng a;\n    printf(\"Enter Username: \");\n    scanf(\"%[^\\n]%*c\",a.username);\n    print();\n}\nvoid print(void)\n{\n    ng a;\n    printf(\"Username: %s\",a.username);\n}\n</code></pre>\n\n<h1>OUTPUT:</h1>\n\n<p>Look at the output i enter \"George\" and it cannot be printed.</p>\n\n<pre><code>Enter Username: Geroge\nUsername: \n--------------------------------\nProcess exited after 8.333 seconds with return value 0\nPress any key to continue . . .\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "locking", "linux-device-driver"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1560290476, "post_id": 56551396, "comment_id": 99686004, "body": "It looks like it&#39;s assuming that you have a single writer, and that the point is to do atomic updates with respect to the readers only (&quot;without ever exposing an incorrect value&quot;). It&#39;s not designed to allow multiple writers to atomically increment the same value at the same time."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1560290659, "post_id": 56551396, "comment_id": 99686060, "body": "As far as I understand this, it\u2019s a simple way to do <code>READ_ONCE()</code> on some architectures (on the rest it might not work). Be careful in <i>consistency</i> vs. <i>serialization</i>."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1560293755, "post_id": 56551396, "comment_id": 99686792, "body": "&quot;What could happen if barrier() wasn&#39;t there?&quot; - Without the barrier, the compiler may decide to optimize out <code>new</code> variable and write intermediate result directly to the <code>index</code>, thus exposing incorrect value of <code>index</code> to the reader. Oh, wait, this is exactly written in the comments. [Sarcasm off] So, what is exactly unclear in the comments?"}, {"owner": {"reputation": 181, "user_id": 8351650, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2979e9f1415e57e46ad3e7cad184f91b?s=128&d=identicon&r=PG&f=1", "display_name": "nanoman", "link": "https://stackoverflow.com/users/8351650/nanoman"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1560296597, "post_id": 56551396, "comment_id": 99687343, "body": "@Tsyvarev, I mean to say &quot;why would this optimization be a problem&quot;? How would the optimization leave an incorrect value? What is one way this can go wrong (ASM wise)?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1560298704, "post_id": 56551396, "comment_id": 99687683, "body": "&quot; How would the optimization leave an incorrect value? What is one way this can go wrong (ASM wise)?&quot; - So, this is a real question. Add it to the question post."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1560349672, "post_id": 56551396, "comment_id": 99708556, "body": "@nanoman, between conditional and its branch may have passed some time when <code>*index</code> would be different (imagine no <code>new</code> variable in the code)."}], "owner": {"reputation": 181, "user_id": 8351650, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2979e9f1415e57e46ad3e7cad184f91b?s=128&d=identicon&r=PG&f=1", "display_name": "nanoman", "link": "https://stackoverflow.com/users/8351650/nanoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560300064, "creation_date": 1560285656, "last_edit_date": 1560300064, "question_id": 56551396, "link": "https://stackoverflow.com/questions/56551396/how-does-lockless-incrementing-work-in-ldd3s-shortprint", "title": "How does lockless incrementing work in LDD3&#39;s &quot;shortprint&quot;?", "body": "<p>I am having a hard time understanding how <code>shortp_incr_bp()</code> works. How is it able to atomically increment without the need for a spinlock or semaphore? (I don't really understand the provided comments.) What could happen if <code>barrier()</code> wasn't there? How does the optimization cause incorrect values? What is one way this optimization can go wrong?</p>\n\n<pre><code>/*\n * Input is managed through a simple circular buffer which, among other things,\n * is allowed to overrun if the reader isn't fast enough.  That makes life simple\n * on the \"read\" interrupt side, where we don't want to block.\n */\nstatic unsigned long shortp_in_buffer = 0;\nstatic unsigned long volatile shortp_in_head;\nstatic volatile unsigned long shortp_in_tail;\n\n/*\n * Atomically increment an index into \"shortp_in_buffer\"\n *\n * This function has been carefully written to wrap a pointer into the circular \n * buffer without ever exposing an incorrect value. The \"barrier\" call is there \n * to block compiler optimizations across the other two lines of the function. \n * Without the barrier, the compiler might decide to optimize out the \"new\" \n * variable and assign directly to \"*index\". That optimization could expose an \n * incorrect value of the index for a brief period in the case where it wraps. \n * By taking care to prevent in inconsistent value from ever being visible to \n * other threads, we can manipulate the circular buffer pointers safely without \n * locks.\n */\nstatic inline void shortp_incr_bp(volatile unsigned long *index, int delta)\n{\n    unsigned long new = *index + delta;\n    barrier();  /* Don't optimize these two together */\n    *index = (new &gt;= (shortp_in_buffer + PAGE_SIZE)) ? shortp_in_buffer : new;\n}\n\n</code></pre>\n"}, {"tags": ["c", "fpga", "xilinx", "vivado", "bare-metal"], "answers": [{"tags": [], "owner": {"reputation": 748, "user_id": 11384455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WtYR8.jpg?s=128&g=1", "display_name": "pico", "link": "https://stackoverflow.com/users/11384455/pico"}, "is_accepted": false, "score": 0, "last_activity_date": 1560305614, "creation_date": 1560305614, "answer_id": 56553790, "question_id": 56551365, "link": "https://stackoverflow.com/questions/56551365/vivado-xsdk-how-to-access-address-from-zynq-m-axi-gp0-bus/56553790#56553790", "title": "Vivado/XSDK: How to access address from Zynq M_AXI_GP0 Bus?", "body": "<p>The \"xil_ io.h\" file contains the interface for the general IO component, which encapsulates the Input/Output functions for processors that do not require any special I/O handling:</p>\n\n<pre><code>u32  Xil_In32  (UINTPTR Addr);\nvoid Xil_Out32 (UINTPTR Addr, u32 Value);\n</code></pre>\n\n<p>The \"M_AXI_GP0\" Bus is mapped to the PL or \"Programmable Logic\" address region in the Zynq Address Map:</p>\n\n<pre><code>Xilinx Zynq: ARM Cortex A9 Memory Map\n\nDDR                    0x00000000 - 0x3FFFFFFF\nPL                     0x40000000 - 0xBFFFFFFF\nReserved               0xC0000000 - 0xDFFFFFFF\nMemory mapped devices  0xE0000000 - 0xE02FFFFF\nReserved               0xE0300000 - 0xE0FFFFFF\nNAND, NOR              0xE1000000 - 0xE3FFFFFF\nSRAM                   0xE4000000 - 0xE5FFFFFF\nReserved               0xE6000000 - 0xF7FFFFFF\nAMBA APB Peripherals   0xF8000000 - 0xF8FFFFFF\nReserved               0xF9000000 - 0xFBFFFFFF\nLinear QSPI - XIP      0xFC000000 - 0xFDFFFFFF\nReserved               0xFE000000 - 0xFFEFFFFF\nOCM                    0xFFF00000 - 0xFFFFFFFF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 577, "user_id": 656347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/f15mA.jpg?s=128&g=1", "display_name": "Sanchayan Maity", "link": "https://stackoverflow.com/users/656347/sanchayan-maity"}, "is_accepted": false, "score": 0, "last_activity_date": 1560336415, "creation_date": 1560336415, "answer_id": 56560330, "question_id": 56551365, "link": "https://stackoverflow.com/questions/56551365/vivado-xsdk-how-to-access-address-from-zynq-m-axi-gp0-bus/56560330#56560330", "title": "Vivado/XSDK: How to access address from Zynq M_AXI_GP0 Bus?", "body": "<p>Did you see the AXI GPIO driver and example in <a href=\"https://github.com/Xilinx/embeddedsw/tree/master/XilinxProcessorIPLib/drivers/gpio\" rel=\"nofollow noreferrer\">here</a>?  Whether you need to worry about virtual to physical address translation depends on what exactly are you running? Do you have a bare metal/RTOS setup?</p>\n"}], "owner": {"reputation": 748, "user_id": 11384455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WtYR8.jpg?s=128&g=1", "display_name": "pico", "link": "https://stackoverflow.com/users/11384455/pico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 797, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560336415, "creation_date": 1560285477, "last_edit_date": 1560294087, "question_id": 56551365, "link": "https://stackoverflow.com/questions/56551365/vivado-xsdk-how-to-access-address-from-zynq-m-axi-gp0-bus", "title": "Vivado/XSDK: How to access address from Zynq M_AXI_GP0 Bus?", "body": "<p>Let's say I built a vivado Zynq FPGA project, and I want to write and read the Zynq's \"M_AXI_GP0\" port from a c-program running on the zynq as follows.  Further, let's suppose the address I want to read and write on the \"M_AXI_GP0\" port of the Zynq is address \"0x000A1000\". How would I do that in the code below?  Do I need to worry about virtual address to physical address translation in the ARM?  is there a XIL api for that? etc... see code example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"platform.h\"\n\n\n#include \"xil_printf.h\"\n\nvoid write(uint32_t addr, uint32_t wdata) {\n   //????? how to implement\n}\n\nuint32_t read(uint32_t addr) {\n    return 0;\n}\n\nint main()\n{\n    init_platform();\n\n    print(\"Hello World\\n\\r\");\n\n    uint32_t beef;\n    write(0x000A1000, 0xDEADBEEF);\n    write(0x000A1004, 0x12345678);\n    beef = read(0x000A1000);\n\n    cleanup_platform();\n    return 0;\n}\n\n\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aKZWL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aKZWL.png\" alt=\"Xilinx ZYNQ - ARM CORTEX A9 -Xilinx SDK\"></a></p>\n"}, {"tags": ["c", "parsing", "scanf", "fgets"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1560282504, "post_id": 56550779, "comment_id": 99683287, "body": "fwiw <code>strcpy(command, &quot;&quot;);</code> is equivalent to <code>command[0]=&#39;\\0&#39;;</code> which is probably more efficient."}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 2, "creation_date": 1560282517, "post_id": 56550779, "comment_id": 99683294, "body": "Is this your real code? <code>printf(&quot;command: %s reference: %s value: %s\\n&quot;);</code> this should throw an warning and not print what you say it prints"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 3, "creation_date": 1560282617, "post_id": 56550779, "comment_id": 99683325, "body": "As @xing, you can have <code>%s</code> or <code>%[]</code> but <code>%[]s</code> is a hybrid unless you want to match an <code>&#39;s&#39;</code> from the input."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1560283246, "post_id": 56550779, "comment_id": 99683562, "body": "When you reparse, this: <code>\\&quot;%[^\\t\\n\\&quot;]s\\&quot;</code> should probably be this, instead: <code>\\&quot;%[^\\&quot;]\\&quot;</code>.  That is, in addition to dropping the <code>s</code>, you probably want to scan everything up to the next quotation mark, even whitespace."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1560283834, "post_id": 56550779, "comment_id": 99683788, "body": "I know your instructor and your textbooks make it seem like <code>scanf</code> is <i>the</i> function for input, but it&#39;s not.  If you&#39;re doing anything but &quot;toy&quot; input processing, <code>scanf</code> is usually inadequate for the job.  If you want to learn to do how to do input processing in C properly, your first step is going to have to be, sadly, to abandon <code>scanf</code> entirely.  (Me, I&#39;ve been programming in C for 40 years, and I have virtually never used <code>scanf</code>.) <code>sscanf</code> is a little better, but not much."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1560285213, "post_id": 56550779, "comment_id": 99684303, "body": "@SteveSummit Knock down any windmills lately?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1560287883, "post_id": 56550779, "comment_id": 99685215, "body": "@Barmar No, but I do like this horse..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1560297635, "post_id": 56550779, "comment_id": 99687518, "body": "@SteveSummit OP&#39;s post does not include <code>scanf()</code> of your <a href=\"https://stackoverflow.com/questions/56550779/how-do-i-parse-three-values-from-a-string-in-c-using-sscanf-when-one-is-in-doubl/56552985#comment99683788_56550779\">comment</a>.  It does use <code>fgets()</code> - good first step."}, {"owner": {"reputation": 19, "user_id": 11633145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ea0f5a4ba399dcc7e4c8d7a1b31695d?s=128&d=identicon&r=PG&f=1", "display_name": "ZackaryF", "link": "https://stackoverflow.com/users/11633145/zackaryf"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1560456308, "post_id": 56550779, "comment_id": 99753575, "body": "@SteveSummit So if not sscanf, what should I parse with then?"}, {"owner": {"reputation": 19, "user_id": 11633145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ea0f5a4ba399dcc7e4c8d7a1b31695d?s=128&d=identicon&r=PG&f=1", "display_name": "ZackaryF", "link": "https://stackoverflow.com/users/11633145/zackaryf"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1560456344, "post_id": 56550779, "comment_id": 99753589, "body": "@xing ty, that solved my problem.   also thanks for the tip on clearing the strings, Eugene."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1560457925, "post_id": 56550779, "comment_id": 99754141, "body": "@ZackaryF See <a href=\"https://stackoverflow.com/questions/56569178/learning-inputs-in-c-opinion/56571542#56571542\">this answer</a>."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1560298100, "last_edit_date": 1560298100, "creation_date": 1560297044, "answer_id": 56552985, "question_id": 56550779, "link": "https://stackoverflow.com/questions/56550779/how-do-i-parse-three-values-from-a-string-in-c-using-sscanf-when-one-is-in-doubl/56552985#56552985", "title": "How do I parse three values from a string in C using sscanf when one is in double quotes?", "body": "<p>If the input string is of the form ...</p>\n\n<pre><code>command \"reference\" value\n</code></pre>\n\n<p>... where <code>command</code> and <code>value</code> have no white-spaces, code can use:</p>\n\n<pre><code>char command[100], reference[100],  value[100];\nint n = 0;\nsscanf(input, \"%99s \\\"%99[^\\\"]\\\" %99s %n\", command, reference,  value, &amp;n);\nif (n &gt; 0 &amp;&amp; input[n] == 0) {\n  // success\n  printf(\"command: '%s' reference: '%s' value: '%s'\\n\", command, reference,  value);\n}\n</code></pre>\n\n<p>A scan that succeeds will set the value of <code>n</code> and <code>input[n]</code> will be the <em>null character</em>.</p>\n\n<hr>\n\n<p>It is often easier to follow parsing by breaking up the format</p>\n\n<pre><code>#define FMT_CMD \"%99s\"\n#define FMT_REF \" \\\"%99[^\\\"]\\\"\"\n#define FMT_VAL \"%99s\"\nsscanf(input, FMT_CMD FMT_REF FMT_VAL \" %n\", \n    command, reference,  value, &amp;n);\n</code></pre>\n\n<hr>\n\n<p>With <code>sscanf(input, \"%s %[^\\t\\n]s\\n\", command, value);</code> there is no width limit for <code>command, value</code> risking buffer overrun.  the final <code>'s'</code> in the format has no use.  Format's trailing <code>'\\n'</code> also has no use.</p>\n"}], "owner": {"reputation": 19, "user_id": 11633145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ea0f5a4ba399dcc7e4c8d7a1b31695d?s=128&d=identicon&r=PG&f=1", "display_name": "ZackaryF", "link": "https://stackoverflow.com/users/11633145/zackaryf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560298100, "creation_date": 1560282381, "question_id": 56550779, "link": "https://stackoverflow.com/questions/56550779/how-do-i-parse-three-values-from-a-string-in-c-using-sscanf-when-one-is-in-doubl", "title": "How do I parse three values from a string in C using sscanf when one is in double quotes?", "body": "<p>I'm attempting to parse three strings from a larger string, but only the first two values are being parsed. Is there something wrong with my format string used by sscanf?</p>\n\n<p>I've already tried using \"%s %[^\\n\\t\\^]s %s\\n\" as the format string, and it works for the first two values, but the third one remains blank.</p>\n\n<pre><code>printf(\"&gt;&gt; \");\nfflush(stdout);\nfgets(input, MAX_STR, stdin);\nsscanf(input, \"%s %[^\\t\\n]s\\n\", command, value);\n\n/* parse it differently if the command is average*/\nif(!strcmp(command, \"average\")) {\n  /* clear the values */\n  strcpy(command, \"\");\n  strcpy(reference, \"\");\n  strcpy(value, \"\");\n\n  /* re-parse the input */    \n  sscanf(input, \"%s \\\"%[^\\t\\n\\\"]s\\\" %[^\\t\\n]s\\n\", command, reference, value);\n}\n\nprintf(\"command: %s reference: %s value: %s\\n\");\n</code></pre>\n\n<p>I'm expecting that if I type in say... average \"cody\" 500, that the print statement at the end would print</p>\n\n<p>command: average reference: cody value: 500</p>\n\n<p>but instead it prints</p>\n\n<p>command: average reference: cody value: </p>\n\n<p>for some reason the value string is cut off when parsing.</p>\n"}, {"tags": ["c", "serial-port", "gps", "nmea"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1560282147, "post_id": 56550514, "comment_id": 99683136, "body": "Byte- by-byte state machine.  Try hard to not do this any other way:)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1560282752, "post_id": 56550514, "comment_id": 99683383, "body": "Is there a <code>ReadLine</code> you can use instead of a <code>ReadFile</code>?"}, {"owner": {"reputation": 452, "user_id": 4979500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f086626050779746a62e119df0ceb55e?s=128&d=identicon&r=PG&f=1", "display_name": "El Stepherino", "link": "https://stackoverflow.com/users/4979500/el-stepherino"}, "edited": false, "score": 0, "creation_date": 1560287599, "post_id": 56550514, "comment_id": 99685128, "body": "Is this on Linux, Windows or an embedded system?"}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1560289620, "post_id": 56550514, "comment_id": 99685767, "body": "In Linux you can read from a serial terminal a line at a time.  See <a href=\"https://stackoverflow.com/questions/53728798/serial-communication-canonical-mode-non-blocking-nl-detection/53739332#53739332\" title=\"serial communication canonical mode non blocking nl detection\">stackoverflow.com/questions/53728798/&hellip;</a>  You will have to read every line, and parse for the &quot;$GPRMC&quot; lines that you want to process while tossing the rest."}, {"owner": {"reputation": 13, "user_id": 11067218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45cde9b04c22329996481ef36a9a6518?s=128&d=identicon&r=PG&f=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/11067218/narek"}, "edited": false, "score": 0, "creation_date": 1560329142, "post_id": 56550514, "comment_id": 99696218, "body": "It&#39;s for Windows"}], "answers": [{"tags": [], "owner": {"reputation": 2943, "user_id": 9014308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6e0464313ca63c239f5d973213daf9?s=128&d=identicon&r=PG&f=1", "display_name": "kunif", "link": "https://stackoverflow.com/users/9014308/kunif"}, "is_accepted": false, "score": 0, "last_activity_date": 1560339448, "creation_date": 1560339448, "answer_id": 56561323, "question_id": 56550514, "link": "https://stackoverflow.com/questions/56550514/how-can-i-get-data-from-a-gps-module-coming-with-nmea-protocol-through-a-serial/56561323#56561323", "title": "How can I get data from a GPS module coming with NMEA protocol through a Serial port with c", "body": "<p>GPS <a href=\"https://en.wikipedia.org/wiki/NMEA_0183\" rel=\"nofollow noreferrer\">NMEA 0183</a> is a text-based protocol and can be processed with a platform-independent C language standard library.<br>\nMany libraries and parsers have already been developed, and you can use them without redevelopment.  </p>\n\n<p>For example, you can find this article on the StackOverflow site:<br>\n<a href=\"https://stackoverflow.com/q/21498838/9014308\">NMEA library - nmeaINFO empty</a> / <a href=\"http://nmea.sourceforge.net/\" rel=\"nofollow noreferrer\">NMEA Library</a><br>\n<a href=\"https://stackoverflow.com/q/48608805/9014308\">C Gps nmea parser from linux serial port does not parse the last line of the read buffer</a><br>\n<a href=\"https://stackoverflow.com/q/19868156/9014308\">Parsing code for GPS NMEA string</a>  </p>\n\n<p>Other site:<br>\n<a href=\"https://objectcomputing.com/resources/publications/mnb/multi-platform-serial-interfacing-using-boost-a-gps-sensor-and-opendds-part-i\" rel=\"nofollow noreferrer\">MULTI-PLATFORM SERIAL INTERFACING USING BOOST: A GPS SENSOR AND OPENDDS - PART I</a> / <a href=\"https://objectcomputing.com/resources/publications/mnb/multi-platform-serial-interfacing-using-boost-a-gps-sensor-and-opendds-part-ii\" rel=\"nofollow noreferrer\">PART II</a>  </p>\n\n<p>These are parsers, libraries that parse the read data.<br>\n<a href=\"https://github.com/jacketizer/libnmea\" rel=\"nofollow noreferrer\">jacketizer/libnmea</a><br>\n<a href=\"https://github.com/kosma/minmea\" rel=\"nofollow noreferrer\">kosma/minmea</a><br>\n<a href=\"https://github.com/MaJerle/GPS_NMEA_parser\" rel=\"nofollow noreferrer\">MaJerle/GPS_NMEA_parser</a>  </p>\n\n<p>After analyzing in the above library, you should use only the data you want.</p>\n"}], "owner": {"reputation": 13, "user_id": 11067218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45cde9b04c22329996481ef36a9a6518?s=128&d=identicon&r=PG&f=1", "display_name": "Narek", "link": "https://stackoverflow.com/users/11067218/narek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 834, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1560339448, "creation_date": 1560281094, "question_id": 56550514, "link": "https://stackoverflow.com/questions/56550514/how-can-i-get-data-from-a-gps-module-coming-with-nmea-protocol-through-a-serial", "title": "How can I get data from a GPS module coming with NMEA protocol through a Serial port with c", "body": "<p>I need to get data from a GPS module which is coming in NMEA protocol through a Serial port, and the input looks something like this:</p>\n\n<blockquote>\n  <p>$GPRMC,190335.389,V,3754.931,N,08002.496,W,33.6,0.59,110619,,E*47\n  $GPGGA,190336.389,3754.931,N,08002.496,W,0,00,,,M,,M,,*52\n  $GPGLL,3754.931,N,08002.496,W,190337.389,V*33\n  $GPVTG,0.59,T,,M,33.6,N,62.2,K*5C\n  $GPRMC,190339.389,V,3754.932,N,08002.494,W,11.9,0.62,110619,,E*4D\n  $GPGGA,190340.389,3754.932,N,08002.494,W,0,00,,,M,,M,,*52\n  $GPGLL,3754.932,N,08002.494,W,190341.389,V*33</p>\n</blockquote>\n\n<p>The thing is, I only need the lines starting with GPRMC. And the problem is the data is coming asynchronous, first comes the first half of a line, for example, then the other half and some of the other line and so on. Now how can I get the input line-by-line and only get the ones starting with GPRMC. The input is coming incessant and I need to get the correct line real-time. How could I do this with C? </p>\n\n<p>I don't really know how to read from a Serial port, I tried something but because the input's coming asynchronous, I couldn't get the correct lines. Oh, and one more thing, the maximum length of a line is 83.</p>\n\n<p>Here's some code I tried, I know it's bad</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int a = 0;\nint test = 0;\nint gprmc_find(char* gps)\n{\n    while(a &lt; strlen(gps))\n    {\n        if(gps[a] =='$' &amp;&amp; gps[a+1] == 'G' &amp;&amp; gps[a+2] == 'P' &amp;&amp; gps[a+3] == 'R' )\n        {\n            test = 1;\n            break;\n        }\n        else\n        {\n            test = 0;\n        }\n        a++;\n        return test;\n    }\n}\nint main()\n{\n\nDWORD  accessdirection =GENERIC_READ | GENERIC_WRITE;\nHANDLE hSerial = CreateFile(\"COM4\",\n                            accessdirection,\n                            0,\n                            0,\n                            OPEN_EXISTING,\n                            0,\n                            0);\nif (hSerial == INVALID_HANDLE_VALUE) {\n    printf(\"Invalid\\n\");\n}\n\nDCB dcbSerialParams = {0};\ndcbSerialParams.DCBlength=sizeof(dcbSerialParams);\nif (!GetCommState(hSerial, &amp;dcbSerialParams)) {\n     printf(\"could not get the state of the comport\\n\");\n}\ndcbSerialParams.BaudRate=9600;\ndcbSerialParams.ByteSize=8;\ndcbSerialParams.StopBits=ONESTOPBIT;\ndcbSerialParams.Parity=NOPARITY;\nif(!SetCommState(hSerial, &amp;dcbSerialParams)){\n     printf(\"Error\\n\");\n}\nCOMMTIMEOUTS timeouts={0};\ntimeouts.ReadIntervalTimeout=50;\ntimeouts.ReadTotalTimeoutConstant=50;\ntimeouts.ReadTotalTimeoutMultiplier=10;\ntimeouts.WriteTotalTimeoutConstant=50;\ntimeouts.WriteTotalTimeoutMultiplier=10;\nif(!SetCommTimeouts(hSerial, &amp;timeouts)){\n    printf(\"handle error1\");\n}\n    char buf[83] = {0};\n    while(1)\n    {\n\n\n        DWORD dwBytesRead = 0;\n\n       //CloseHandle(hSerial);\n\n        if(!ReadFile(hSerial, buf, 82, &amp;dwBytesRead, NULL)){\n            printf(\"handle error\");\n        }\n        printf(\" %d \\n\", test);\n        if(gprmc_find(buf) == 1)\n        {\n            printf(buf);  \n        }\n        memset(buf, 0, 83);\n        delay(1);\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "is_accepted": false, "score": 1, "last_activity_date": 1560284283, "creation_date": 1560284283, "answer_id": 56551156, "question_id": 56550448, "link": "https://stackoverflow.com/questions/56550448/how-to-clear-the-entry-box-when-its-activeclicked/56551156#56551156", "title": "how to clear the entry box when it&#39;s active(clicked)", "body": "<p>There are a couple of ways, but before we start: user may want to copy URL, clearing it on click event may be confusing.</p>\n\n<ol>\n<li>Connect to parent class <code>\"grab-focus\"</code> signal</li>\n<li>Use <code>gtk_entry_set_placeholder_text</code> to make text a placeholder (appears as slightly shadowed)</li>\n<li>Conforming to the note above: set a secondary icon (<code>gtk_entry_set_icon_from_icon_name</code>, icon \"edit-clear-symbolic\") and connect to <code>\"icon_press\"</code> signal.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "is_accepted": true, "score": 0, "last_activity_date": 1560285238, "creation_date": 1560285238, "answer_id": 56551329, "question_id": 56550448, "link": "https://stackoverflow.com/questions/56550448/how-to-clear-the-entry-box-when-its-activeclicked/56551329#56551329", "title": "how to clear the entry box when it&#39;s active(clicked)", "body": "<p>Complementing Alexander's answer ...</p>\n\n<p>In case you don't know to associate callbacks with signals, you can use <a href=\"https://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-connect\" rel=\"nofollow noreferrer\"><code>g_signal_connect()</code></a>. This takes four parameters:</p>\n\n<ol>\n<li>the object we are interested in - we need to use <code>G_OBJECT()</code> to cast this to the relevant type</li>\n<li>the signal we want to watch - in this case <code>grab-focus</code></li>\n<li>the <em>callback</em> to invoke when the signal is raised</li>\n<li>arbitrary user data (probably not needed in this case).</li>\n</ol>\n\n<p>In this case you could call it like</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>g_signal_connect(G_OBJECT(w-&gt;entry), \"grab-focus\", G_CALLBACK(on_input_focus), NULL);\n</code></pre>\n\n<p>If you check the signature of the the callback for the <a href=\"https://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-grab-focus\" rel=\"nofollow noreferrer\"><code>grab-focus</code> signal</a> you will see it accepts two arguments and returns nothing. The last argument is the arbitrary user data which was the last parameter in the <code>g_signal_connect()</code> function; we did not set it and can ignore it. The first argument is the widget on which the signal was triggered - which we can cast to a <code>GtkEntry</code>.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void on_input_focus(GtkWidget *w, gpointer data) {\n    gtk_entry_set_text(GTK_ENTRY(w), \"\");\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11627549"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1560309717, "accepted_answer_id": 56551329, "answer_count": 2, "score": 1, "last_activity_date": 1560285238, "creation_date": 1560280796, "question_id": 56550448, "link": "https://stackoverflow.com/questions/56550448/how-to-clear-the-entry-box-when-its-activeclicked", "closed_reason": "Not suitable for this site", "title": "how to clear the entry box when it&#39;s active(clicked)", "body": "<p>I wanted to clear my entrybox in order to when I want to enter something again it's clear.\nI implemented a Simple Webbrowser.\nIn the entrybox is always the url but what I was looking for is that if i click (activate) the entrybox, the entrybox should be cleared.</p>\n\n<p>I hopped I could do something like this:</p>\n\n<pre><code>if(gtk_window_get_focus(GTK_WINDOW(w-&gt;window)) == w-&gt;entry)\n          gtk_entry_set_text (GTK_ENTRY(w-&gt;entry), \"\");\n</code></pre>\n\n<p>But I don't realy know where to do it and how this wokrs that it can detect that the entrybock was clicked.</p>\n"}, {"tags": ["c", "eclipse", "gcc", "mingw", "warnings"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1560280462, "post_id": 56550354, "comment_id": 99682507, "body": "How is <code>MENU_DEFINITION</code> defined?  What about <code>_menuMain_L1</code>, <code>_menuMain_L2</code>, etc?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1560280589, "post_id": 56550354, "comment_id": 99682545, "body": "You are missing too much code. All I get are compile errors attempting to compile your code. <code>static const char *const  _menuMain_Strings_1[] = { &quot;a&quot;, &quot;bb&quot;, &quot;ccc&quot;, &quot;dddd&quot; };</code> compiles just fine with <code>-Wall</code>. Also see <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1560281627, "creation_date": 1560281627, "answer_id": 56550622, "question_id": 56550354, "link": "https://stackoverflow.com/questions/56550354/warning-initialization-discards-const-qualifier-from-pointer-target-type-wd/56550622#56550622", "title": "warning: initialization discards &#39;const&#39; qualifier from pointer target type [-Wdiscarded-qualifiers]", "body": "<p>The error message indicates that <code>_menuMain_Strings_1</code> identifies a pointer to <code>const</code> data (which it does), but you are using it to initialize a pointer to non-<code>const</code> data.  You have not presented all the details of those types, but this is not about the compiler discarding qualifiers.  Rather, it is about <em>your code</em> having a <code>const</code>-qualification mismatch.</p>\n\n<p>Such a situation warrants a warning because if the pointed-to data is in fact itself declared <code>const</code> (as opposed to that qualification being only in the pointer) then attempting to modify it produces undefined behavior.  The compiler can spot that and reject it when access is through the original, <code>const</code>-qualified pointer, but not when access is through the non-<code>const</code>-qualifed copy with which <code>_menuDef_Main_1</code> is initialized.</p>\n\n<blockquote>\n  <p>How can I satisfy the compiler without it giving me warnings?</p>\n</blockquote>\n\n<p>Use <code>const</code> consistently or not at all.  And note that it is viral: you can apply <code>const</code>-qualification freely, but you cannot safely remove it.  Presumably, you will need to modify the definition of <code>MENU_DEFINITION</code> to carry through <code>const</code> appropriately, and this may require you to make further changes as a result.</p>\n"}], "owner": {"reputation": 11, "user_id": 10688184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0119bb27c97cf8ccdec5b8b99c4c67a5?s=128&d=identicon&r=PG&f=1", "display_name": "whitleystriber", "link": "https://stackoverflow.com/users/10688184/whitleystriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1560281627, "creation_date": 1560280253, "question_id": 56550354, "link": "https://stackoverflow.com/questions/56550354/warning-initialization-discards-const-qualifier-from-pointer-target-type-wd", "title": "warning: initialization discards &#39;const&#39; qualifier from pointer target type [-Wdiscarded-qualifiers]", "body": "<p>I am trying to understand why my compiler is warning me about this code:</p>\n\n<pre><code>static const char *const  _menuMain_Strings_1[] __ATTR_PROGMEM__ = { _menuMain_L1,\n        _menuMain_L2, _menuMain_L3, _menuMain_L4 }\n\nstatic const MENU_DEFINITION _menuDef_Main_1 __ATTR_PROGMEM__ = {\n        _menuMain_Strings_1, _menuMain_Fields_1 };\n</code></pre>\n\n<pre><code>../menudefs.h:53:3: warning: initialization discards 'const' qualifier from pointer target type [-Wdiscarded-qualifiers]\n   53 |   _menuMain_Strings_1, _menuMain_Fields_1 };\n      |   ^~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>At first, I had to add the extra <strong>*const</strong> in order for it to generate a hex file to remove the compiler error. From my assumption, the compiler is discarding one of the <strong>const</strong> regardless. How can I satisfy the compiler without it giving me warnings? Thank you.</p>\n"}, {"tags": ["c", "compilation", "runtime", "extern", "compile-time"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1560280144, "post_id": 56550261, "comment_id": 99682380, "body": "Please show your code related to the variable in question. A variable allocated in a function is not file scope."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1560280153, "post_id": 56550261, "comment_id": 99682384, "body": "You don&#39;t <code>extern</code> variables which are local to functions."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1560281036, "post_id": 56550261, "comment_id": 99682720, "body": "External variables need to be global variables. The linker arranges for all the object files to connect to the same memory location of the variable, just like it does for functions."}, {"owner": {"reputation": 39, "user_id": 7934159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afd886e4569400baa379975df25b24c?s=128&d=identicon&r=PG&f=1", "display_name": "ani", "link": "https://stackoverflow.com/users/7934159/ani"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1560284028, "post_id": 56550261, "comment_id": 99683862, "body": "Thanks all, @Barmar explanation adds to your explanation"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1560281449, "creation_date": 1560281449, "answer_id": 56550581, "question_id": 56550261, "link": "https://stackoverflow.com/questions/56550261/extern-variable-memory-location-and-compile-run-time-behaviour/56550581#56550581", "title": "Extern variable memory location and Compile/Run time behaviour", "body": "<p>One of the compilation units has to define the variable as a global variable. When compiling this file, memory is allocated for the variable in the data segment, similar to file scope variables. The difference is that the variable is registered in the linkage table so that other object files can find it.</p>\n\n<p>All the other compilation units declare it using the <code>extern</code> keyword. This prevents them from allocating memory for the variable, and arranges for the linker to find the external variable.</p>\n\n<p>When you link all the object files together, the linker finds all the object files that have the external reference to the variable, and connects that link to the memory that was allocated in the first object file.</p>\n"}], "owner": {"reputation": 39, "user_id": 7934159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afd886e4569400baa379975df25b24c?s=128&d=identicon&r=PG&f=1", "display_name": "ani", "link": "https://stackoverflow.com/users/7934159/ani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 56550581, "answer_count": 1, "score": 0, "last_activity_date": 1560283770, "creation_date": 1560279857, "last_edit_date": 1560283770, "question_id": 56550261, "link": "https://stackoverflow.com/questions/56550261/extern-variable-memory-location-and-compile-run-time-behaviour", "title": "Extern variable memory location and Compile/Run time behaviour", "body": "<p>I have read a lot about extern variables but no one seems to address it appropriately. If I declare and define a variable in C, it gets memory assigned in that scope of the file. but at a later stage in multi-file modular project that variable is declared as an extern which should store the it in the Data segment to exhibit the global behavior intended with the extern functionality.</p>\n\n<p>So I am trying to figure out how and when the memory is being allocated, i.e. the compile time and run time behavior of the extern variable.</p>\n"}, {"tags": ["c", "macros", "token"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 7, "creation_date": 1560279703, "post_id": 56550127, "comment_id": 99682171, "body": "Hm. Why <code>##</code>? <code>#define MS_INC(ms, name) ms-&gt;name++</code> works just fine. <code>-&gt;</code> is a separate token."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560280298, "post_id": 56550127, "comment_id": 99682443, "body": "The <code>##</code> should result in a single preprocessor token. But pasting <code>.</code> or <code>-&gt;</code> will result in at least two."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1560281982, "post_id": 56550127, "comment_id": 99683077, "body": "You only need to use <code>##</code> if you need to combine two tokens into one. If you have <code>#define prefix uint</code> and <code>#define suffix 64</code>, you might use <code>prefix ## suffix ## _t</code> to create <code>uint64_t</code>"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1560282351, "creation_date": 1560282351, "answer_id": 56550773, "question_id": 56550127, "link": "https://stackoverflow.com/questions/56550127/operator-in-c-does-not-paste-as-expected/56550773#56550773", "title": "## operator in C does not paste as expected", "body": "<blockquote>\n  <p>It is giving me error: \"pasting \"a\" and \"++\" does not give a valid preprocessing token\"</p>\n</blockquote>\n\n<p>And it is right.  And C does not allow the token-pasting operator to be used like that.</p>\n\n<p>It looks like you want to produce an expression of the form</p>\n\n<pre><code>ms-&gt;name++\n</code></pre>\n\n<p>Note well that that is composed of <em>four</em> tokens: <code>ms</code>, <code>-&gt;</code>, <code>name</code>, and <code>++</code>.  If your token-pasting operation were performed where the macro argument corresponding to <code>name</code> in fact had the form of an identifier, say <code>Mark</code>, then the result would be a single token <code>-&gt;Mark</code> (between two others).  <code>-&gt;Mark</code> is not a valid token.</p>\n\n<p>Although whitespace often does separate tokens, it is not required between most tokens.  On the other hand, it is always <em>allowed</em> between tokens, so you could always write the above expression like this, instead:</p>\n\n<pre><code>ms -&gt; name ++\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>ms-&gt;name ++\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>ms /* look, Ma, a comment! */\n    -&gt;name\n  ++\n</code></pre>\n\n<p>As far as I can tell, your macro has absolutely no need for token pasting. Just remove the <code>##</code>.</p>\n"}], "owner": {"reputation": 4740, "user_id": 738154, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f2c009cb225b8ecee8de486630c37225?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/738154/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1560282351, "creation_date": 1560279239, "last_edit_date": 1560280242, "question_id": 56550127, "link": "https://stackoverflow.com/questions/56550127/operator-in-c-does-not-paste-as-expected", "title": "## operator in C does not paste as expected", "body": "<pre><code>struct ms {\n        uint64_t a;\n        uint64_t b;\n        uint64_t c;\n        uint64_t d;\n};\n#define MS_INC(ms, name) ms-&gt;##name++\n\n...\nstruct ms m;\nMS_INC(&amp;m, a);\n</code></pre>\n\n<p>It is giving me error: \"pasting \"a\" and \"++\" does not give a valid preprocessing token\"</p>\n\n<p>Is it not allowed to paste `->' or '.' ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1560277639, "post_id": 56549695, "comment_id": 99681231, "body": "<code>while(!feof())</code> is always wrong. Don&#39;t mix <code>scanf()</code> and <code>getchar()</code>, use only <code>fgets()</code> for user input."}, {"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1560277882, "post_id": 56549695, "comment_id": 99681343, "body": "As a side note, you should read : <a href=\"https://stackoverflow.com/questions/3517726/what-is-wrong-with-using-goto\" title=\"what is wrong with using goto\">stackoverflow.com/questions/3517726/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11632820, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAf5KcHLJrOENQe5oXkSf7NSt2nPS8jwFYasCJT=k-s128", "display_name": "Rehan Shakir", "link": "https://stackoverflow.com/users/11632820/rehan-shakir"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1560278975, "post_id": 56549695, "comment_id": 99681843, "body": "<b>Yeah!</b>, Its work,<b>Thanks</b> @xing"}], "owner": {"reputation": 1, "user_id": 11632820, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAf5KcHLJrOENQe5oXkSf7NSt2nPS8jwFYasCJT=k-s128", "display_name": "Rehan Shakir", "link": "https://stackoverflow.com/users/11632820/rehan-shakir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1560316815, "answer_count": 0, "score": 0, "last_activity_date": 1560277441, "creation_date": 1560277441, "last_edit_date": 1592644375, "question_id": 56549695, "link": "https://stackoverflow.com/questions/56549695/1st-time-the-program-stores-the-input-using-but-when-i-want-to-store-username-2n", "closed_reason": "Duplicate", "title": "1st time the program stores the input using but when i want to store username 2nd time in the running program it just skip it", "body": "<p>In this code, the first time when &quot;Enter Username&quot; print on the screen it scans the value entered from keyboard but i press 2 to again enter username(a condition in code) it cannot scan it just skip it and print &quot;Enter age &quot;.</p>\n<h1>Code:</h1>\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;conio.h&gt;\nvoid print(void);\ntypedef struct us{\n    char username[15];\n    int age;\n}us;\n;\nint main()\n{\n    struct us a;\n    char n;\n    FILE *fp,*fp1;\n    a:\n    printf(&quot;\\nEnter Username: &quot;);\n    scanf(&quot;%[^\\n]%*c&quot;,a.username);\n    printf(&quot;Enter AGE:&quot;);\n    scanf(&quot;%d&quot;,&amp;a.age);\n    \n    fp=fopen(&quot;Us.dat&quot;,&quot;a+&quot;);\n    \n    fprintf(fp,&quot;%s  %d\\n&quot;,a.username,a.age);\n    \n    \n    \n    printf(&quot;Press 1 to print the file and 2 to again enter data into the file\\n&quot;);\n    \n    //scanf(&quot;%d&quot;,&amp;n);\n    n=getch();\n    if(n=='1')\n    {\n        print();\n    }\n    else if(n=='2')\n    {\n        system(&quot;CLS&quot;);\n        goto a;\n    }\n    \n    fp1 = fopen(&quot;copy.dat&quot;,&quot;w+&quot;);\n    fp=fopen(&quot;Us.dat&quot;,&quot;r&quot;);\n    while(!feof(fp))\n    {\n        fscanf(fp,&quot;%s \\n %d&quot;,a.username,&amp;a.age);\n        fprintf(fp1,&quot;%s \\n %d&quot;,a.username,a.age);\n    }\n    \n    fclose(fp);\n    fclose(fp1);\n}\nvoid print(void)\n{\n    char a;\n    \n    system(&quot;CLS&quot;);\n    printf(&quot;Press 1 to Print File 1 or 2 To print File 2&quot;);\n    a=getch();\n    FILE *fp1,*fp2;\n    char c,d;\n    if(a=='1')\n    {\n    fp1=fopen(&quot;Us.dat&quot;,&quot;r&quot;);\n    if(fp1==NULL)\n    {\n        printf(&quot;FILE NOT FOUND&quot;);\n        exit(0);\n    }\n    while(!feof(fp1))\n    {\n        c=getc(fp1);\n        printf(&quot;%c&quot;,c);\n    }\n    fclose(fp1);\n   }\n   else if(a=='2')\n   {\n    fp2=fopen(&quot;copy.dat&quot;,&quot;r&quot;);\n    if(fp2==NULL)\n    {\n        printf(&quot;FILE NOT FOUND&quot;);\n        exit(0);\n    }\n    while(!feof(fp2))\n    {\n        d=getc(fp2);\n        printf(&quot;%c&quot;, d);\n    }\n   }\n}\n</code></pre>\n<h1>Output:</h1>\n<p>Here is the first input it runs normally,</p>\n<pre><code>Enter Username: George\nEnter AGE:50\nPress 1 to print the file and 2 to again enter data into the file\n</code></pre>\n<p>But when i press 2 to again enter data into file this happens,</p>\n<pre><code>Enter Username: Enter AGE:\n</code></pre>\n<p>it just skip to store username 2nd time.</p>\n<p>Please help me out to solve this problem.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 2, "creation_date": 1560277022, "post_id": 56549586, "comment_id": 99680948, "body": "Have you tried: <code>c = ((double) a)&#47; b;</code>?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1560277513, "post_id": 56549586, "comment_id": 99681160, "body": "Side note: cast operator has stronger precedence, so the additional parentheses can be left out: <code>c = (double)a &#47; b;</code>"}], "owner": {"reputation": 26, "user_id": 10826556, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oM7EJD4gq5Q/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZBcVD0czA_Wv9DYkiBCdUXfiJIXQ/mo/photo.jpg?sz=128", "display_name": "Sparrowhawk", "link": "https://stackoverflow.com/users/10826556/sparrowhawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1560277152, "answer_count": 0, "score": 1, "last_activity_date": 1560277073, "creation_date": 1560276953, "question_id": 56549586, "link": "https://stackoverflow.com/questions/56549586/is-there-a-way-to-divide-these-two-int-variables-and-get-a-valid-float-value-it", "closed_reason": "Duplicate", "title": "Is there a way to divide these two int variables and get a valid float value, Itried double but its not working properly, thanks", "body": "<p>I'm trying to divide two int variables and get a float, but I don't know what the right way of doing it without losing any value.</p>\n\n<p>I tried using double but its just messing it up</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a, b;\n    double c;\n    a = 5;\n    b = 2;\n    c = a / b;\n    printf(\"%lf\", c);\n//output: 2.000000\n}\n</code></pre>\n\n<p>This should be 2.500000</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1560275714, "post_id": 56549258, "comment_id": 99680398, "body": "The value of an assignment expression is the new value of whatever was on the left side of the assignment operator.  In this case, that&#39;s <code>0.1</code>, which is nonzero, and therefore counts as true for <code>if</code>.  Compare what happens if you change the <code>0.1</code> on the right side of the assignment to <code>0.2</code> and to <code>0.0</code>."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1560275754, "post_id": 56549258, "comment_id": 99680417, "body": "Because the result of the assignment is interpreted as a boolean value. <code>==0</code> means <code>false</code>, <code>!=0</code> means <code>true</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1560309880, "post_id": 56549258, "comment_id": 99689559, "body": "regarding: <code>float f = 0.1;</code>   The literal: <code>0.1</code>  is a <code>double</code>, not a <code>float</code>   The correct way to write the literal is to include a trailing <code>f</code> in the literal.  I.E.  <code>float f = 0.1f;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1560310218, "post_id": 56549258, "comment_id": 99689644, "body": "regarding: <code>if (f=0.1)</code>  This will always result in <code>true</code>.   The statement should be: <code>if (f == 0.1f )</code>  However, not all fractions can be exactly represented in  in <code>float</code>, so this equality may or maynot be <code>true</code>  However, the assignment (of anything other than 0.0f) will be resolved to <code>true</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10370213"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1560452648, "post_id": 56549258, "comment_id": 99752035, "body": "@zwol Thanks, I got it. When we insert 0.0 instead of 0.1 the statement evaluates to false."}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 11218205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea0f36074b704f686940881088809458?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Phil", "link": "https://stackoverflow.com/users/11218205/dr-phil"}, "edited": false, "score": 1, "creation_date": 1560277790, "post_id": 56549429, "comment_id": 99681306, "body": "and this syntax feature has lead to &quot;yoda-style&quot; checks like if(0==var) instead of more naturally looking if(var==0), which with a typo can become if(var=0)..."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 4, "last_activity_date": 1560276296, "creation_date": 1560276296, "answer_id": 56549429, "question_id": 56549258, "link": "https://stackoverflow.com/questions/56549258/how-come-this-code-prints-yes-even-though-there-is-an-assignment-and-not-compa/56549429#56549429", "title": "How come this code prints &quot;yes&quot; even though there is an assignment and not comparison operator in the following code", "body": "<p>The assignment operator has a result, it is the variable that just has been assigned!</p>\n\n<p>So the code actually is equivalent to:</p>\n\n<pre><code>f = 0.1;\nif(f) // and as unequal to 0...\n</code></pre>\n\n<p>You can try to assign 0.0 for comparison:</p>\n\n<pre><code>if(f = 0.0)\n</code></pre>\n\n<p>Now it will print <code>no</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10370213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 56549429, "answer_count": 1, "score": 0, "last_activity_date": 1560277134, "creation_date": 1560275527, "last_edit_date": 1560277134, "question_id": 56549258, "link": "https://stackoverflow.com/questions/56549258/how-come-this-code-prints-yes-even-though-there-is-an-assignment-and-not-compa", "title": "How come this code prints &quot;yes&quot; even though there is an assignment and not comparison operator in the following code", "body": "<p>There is an assignment operator in the if condition and when executed it prints \"yes\" as output. I didn't get it.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    float f = 0.1;\n\n    if (f=0.1)\n    {\n        printf(\"Yes\");\n    }\n    else \n    {\n        printf (\"no\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1560275130, "post_id": 56549150, "comment_id": 99680121, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1247989/how-do-you-allow-spaces-to-be-entered-using-scanf\">How do you allow spaces to be entered using scanf?</a>"}, {"owner": {"reputation": 586, "user_id": 9149934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5ff11850461a5d4b495f04c3b895010?s=128&d=identicon&r=PG&f=1", "display_name": "earthling", "link": "https://stackoverflow.com/users/9149934/earthling"}, "edited": false, "score": 0, "creation_date": 1560275501, "post_id": 56549150, "comment_id": 99680292, "body": "Did you put your input in quotes?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1560275890, "post_id": 56549150, "comment_id": 99680480, "body": "Use <code>fgets()</code> to read a line. <code>scanf()</code> is for parsing formatted input."}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1560275391, "post_id": 56549212, "comment_id": 99680240, "body": "In the case perhaps <code>fgets</code> might be better? Alternatively add the control for the maximum length of string."}, {"owner": {"reputation": 31, "user_id": 11631938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ce6427613df88283b3513f1a0b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Robt800", "link": "https://stackoverflow.com/users/11631938/robt800"}, "edited": false, "score": 0, "creation_date": 1560364933, "post_id": 56549212, "comment_id": 99716180, "body": "Thanks very much for the responses - looks like I have 2 options &amp; they both work.  Thanks for the help!"}], "tags": [], "owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "is_accepted": true, "score": 2, "last_activity_date": 1560275429, "last_edit_date": 1560275429, "creation_date": 1560275311, "answer_id": 56549212, "question_id": 56549150, "link": "https://stackoverflow.com/questions/56549150/capturing-input-in-c/56549212#56549212", "title": "Capturing input in C", "body": "<p><code>\"%s\"</code> capture only word and the capture stop if a white space retrieved. So the capture will stop in the first space found that's why you got only 1 word\nUse the following pattern instead:</p>\n\n<pre><code>scanf(\"%[^\\n\\r]\", str);\n</code></pre>\n\n<p><code>\"%[^\\n\\r]\"</code> means capture all characters till retrieving <code>\"\\r\"</code> or <code>\"\\n\"</code></p>\n\n<p>To prevent your source code from buffer overflow you have to specify the maximum number of characters of the capture. Use the following pattern</p>\n\n<pre><code>char str[500];\nscanf(\"%499[^\\n\\r]\", str);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11631938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ce6427613df88283b3513f1a0b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Robt800", "link": "https://stackoverflow.com/users/11631938/robt800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 56549212, "answer_count": 1, "score": -1, "last_activity_date": 1560275429, "creation_date": 1560275072, "question_id": 56549150, "link": "https://stackoverflow.com/questions/56549150/capturing-input-in-c", "title": "Capturing input in C", "body": "<p>I'm a beginner in C programming so please be nice!  I'm trying to solve some practice beginner challenges and the one I'm on at the moment needs me to capture text input.\nIn the brief code below anything will be captured up to the 1st space.  after this nothing appears whilst debugging.</p>\n\n<p>I did try the gets instruction 1st but this wouldn't compile even though I'd followed examples online</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\nchar stringcapture[500];\nscanf(\"%s\", stringcapture);\n\nLongestWords(stringcapture);       \nreturn 0;\n}\n</code></pre>\n\n<p>So I'm trying to pass 'stringcapture' into the longestwords function.  However all that gets captured and hence passed is the 1st word up to a space being entered</p>\n"}, {"tags": ["c++", "c", "clang", "stack-overflow", "buffer-overflow"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560274164, "post_id": 56548757, "comment_id": 99679660, "body": "&quot;I want to see what happens when I overflow a buffer&quot; &quot;Program aborts due to overflow&quot; &quot;How can I make this stop so I can see what happens when I overflow the buffer&quot; ???"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560274180, "post_id": 56548757, "comment_id": 99679668, "body": "What are you <i>actually</i> trying to achieve?"}, {"owner": {"reputation": 1, "user_id": 11632494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a992a673f8b98afafbe519be22c25ee4?s=128&d=identicon&r=PG&f=1", "display_name": "sengi12", "link": "https://stackoverflow.com/users/11632494/sengi12"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560283142, "post_id": 56548757, "comment_id": 99683522, "body": "lol y&#39;all sarcastic. I am trying to implement a proof of concept. If you want to see specifically what I am doing, check out Engineer Man&#39;s video:<a href=\"https://www.youtube.com/watch?v=CQ6pGrXY1Us\" rel=\"nofollow noreferrer\">youtube.com/watch?v=CQ6pGrXY1Us</a>. Here he does the exact same thing except can read the output of the buffers. that is what I am trying to achieve."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560283608, "post_id": 56548757, "comment_id": 99683702, "body": "Then you have employed a fundamental misunderstanding of the very nature of undefined behaviour, and indeed of an abstract programming language in the first place! If you want to code bare metal, it&#39;s time to open up your text editor and get writing some assembly. Oops, nope, the OS is still going to reel you back in... Computers specifically do not want people doing things like this, obviously!"}, {"owner": {"reputation": 1, "user_id": 11632494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a992a673f8b98afafbe519be22c25ee4?s=128&d=identicon&r=PG&f=1", "display_name": "sengi12", "link": "https://stackoverflow.com/users/11632494/sengi12"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560285614, "post_id": 56548757, "comment_id": 99684456, "body": "I understand this. did you watch the video? I am simply trying to reproduce the same output. running the exact same commands he got this output:                                   buf1 val: 1234567890123456789     buf2 val: 789      do you know if this is possible?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560285985, "post_id": 56548757, "comment_id": 99684597, "body": "Your previous comment shows that you do <i>not</i> understand this! You are expecting to rely on some particular outcome of undefined behaviour. That is nonsense, folly, not going to happen. I can&#39;t really make that clearer. Don&#39;t care what some guy on YouTube says..."}, {"owner": {"reputation": 1, "user_id": 11632494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a992a673f8b98afafbe519be22c25ee4?s=128&d=identicon&r=PG&f=1", "display_name": "sengi12", "link": "https://stackoverflow.com/users/11632494/sengi12"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560286530, "post_id": 56548757, "comment_id": 99684786, "body": "thanks for all the help! you really tried your best to see things from my perspective. hope you hav a great rest of your day."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560287319, "post_id": 56548757, "comment_id": 99685025, "body": "Sarcasm won&#39;t help either."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1560274258, "creation_date": 1560274258, "answer_id": 56548950, "question_id": 56548757, "link": "https://stackoverflow.com/questions/56548757/problems-implementing-clang-fno-stack-protector-to-compile-code-on-macbook-pro/56548950#56548950", "title": "Problems implementing clang -fno-stack-protector to compile code on Macbook Pro", "body": "<blockquote>\n  <p>Why might this be happening?</p>\n</blockquote>\n\n<p>It's happening because, erm, <em>you overflowed the buffer!</em></p>\n\n<p>This is literally what you wanted to observe: what happens when you overflow the buffer.</p>\n\n<p>Results may vary, as is always the case with undefined behaviour.</p>\n\n<p>Stop overflowing the buffer.</p>\n"}], "owner": {"reputation": 1, "user_id": 11632494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a992a673f8b98afafbe519be22c25ee4?s=128&d=identicon&r=PG&f=1", "display_name": "sengi12", "link": "https://stackoverflow.com/users/11632494/sengi12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1560274258, "creation_date": 1560273325, "question_id": 56548757, "link": "https://stackoverflow.com/questions/56548757/problems-implementing-clang-fno-stack-protector-to-compile-code-on-macbook-pro", "title": "Problems implementing clang -fno-stack-protector to compile code on Macbook Pro", "body": "<p>I am trying to test a buffer overflow example. </p>\n\n<p>Below is my code that I am trying to compile with filename buffOVF.c :</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    //stack corruption\n    char buf2[16] = \"overwriteme\";\n    //slightly less than 16 bytes but it doesn't matter\n    char buf1[16];\n    //uninitialized\n\n    strcpy(buf1, \"1234567890123456789\");\n    //buffer contains 16 bytes, I've input 19 (overflow of 4 due to null ptr at end of string)\n    //writing to buf1\n\n    printf(\"buf1 val: %s\\n\", buf1);\n    printf(\"buf2 val: %s\\n\", buf2);\n    printf(\"buf1 addr: %p\\n\", (void *)buf1);\n    printf(\"buf2 addr: %p\\n\", (void *)buf2);\n\n    // TO RUN : gcc -o bufferOVF. bufferOVF.c -fno-stack-protector &amp;&amp; clear &amp;&amp; ./bufferOVF.\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I am trying to compile this on a Macbook Pro with OSX 10.14 using the following command:</p>\n\n<p><code>clang -o buffOVF. buffOVF.c -fno-stack-protector</code></p>\n\n<p>Now I am attempting to run this <em>without</em> stack protection so that I can see the overflow occur. However, this does not happen as I keep getting this as my output:\n<code>Abort trap: 6</code></p>\n\n<p>Why might this be happening? I've done a lot of research and I can't find anything that solves this particular issue.</p>\n"}, {"tags": ["c", "visual-studio-code", "complex-numbers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1560274398, "post_id": 56548725, "comment_id": 99679761, "body": "Looks like another VS non-compliance..."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1560274431, "post_id": 56548725, "comment_id": 99679773, "body": "Does your compiler actually support C99&#39;s complex numbers?  Microsoft doesn&#39;t exactly have the best track record with C standards beyond C89."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 284, "user_id": 11562467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVLZx.png?s=128&g=1", "display_name": "rjg", "link": "https://stackoverflow.com/users/11562467/rjg"}, "edited": false, "score": 0, "creation_date": 1560275357, "post_id": 56548725, "comment_id": 99680226, "body": "@gtzkw What visual C++ has to do with the code above? It is clearly mingw"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1560276969, "post_id": 56548725, "comment_id": 99680926, "body": "Try <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/cabs?view=vs-2019\" rel=\"nofollow noreferrer\"><code>struct _complex z1 = {1.0, 3.0};</code></a> (I don&#39;t have Microsoft products to test this on)"}, {"owner": {"reputation": 23, "user_id": 11632427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fa0bf78e5644a3f9cfc4e8aecc61d?s=128&d=identicon&r=PG&f=1", "display_name": "grchen", "link": "https://stackoverflow.com/users/11632427/grchen"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1560277816, "post_id": 56548725, "comment_id": 99681313, "body": "@pmg The problem is I&#39;m using g++ instead of gcc , so the announcement of my code doesn&#39;t work in C++,thank you very much anyway"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1560278238, "post_id": 56548725, "comment_id": 99681503, "body": "Oh, ok @grchen. Thanks for the feedback. I&#39;ll leave the comment anyway: might be useful for someone else."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11632427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fa0bf78e5644a3f9cfc4e8aecc61d?s=128&d=identicon&r=PG&f=1", "display_name": "grchen", "link": "https://stackoverflow.com/users/11632427/grchen"}, "edited": false, "score": 0, "creation_date": 1560276778, "post_id": 56549377, "comment_id": 99680842, "body": "Oh! It really is ,I didn&#39;t notice that I used g++ to compile ,appreciate your answer , have a nice day"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 23, "user_id": 11632427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fa0bf78e5644a3f9cfc4e8aecc61d?s=128&d=identicon&r=PG&f=1", "display_name": "grchen", "link": "https://stackoverflow.com/users/11632427/grchen"}, "edited": false, "score": 0, "creation_date": 1560277464, "post_id": 56549377, "comment_id": 99681133, "body": "@grchen You&#39;re welcome. It this answers your question, please accept it and lets move on"}], "tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": true, "score": 2, "last_activity_date": 1560276030, "creation_date": 1560276030, "answer_id": 56549377, "question_id": 56548725, "link": "https://stackoverflow.com/questions/56548725/complex-number-syntax-error-in-c-using-vscode/56549377#56549377", "title": "Complex number syntax error in C (using VScode)", "body": "<p>Your problem is you're compiling it as C++ code, not C11.</p>\n\n<p>I was able to compiler it with mingw64 on Windows 10, GCC v8.1, x64.</p>\n\n<pre><code>&gt; gcc -std=c11 a.c\n</code></pre>\n\n<p>works and produce .exe which runs as expected</p>\n\n<pre><code>&gt; g++ a.c\n</code></pre>\n\n<p>produce compilation errors like you stated. Compile it as C11 program and everything should be fine</p>\n"}], "owner": {"reputation": 23, "user_id": 11632427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fa0bf78e5644a3f9cfc4e8aecc61d?s=128&d=identicon&r=PG&f=1", "display_name": "grchen", "link": "https://stackoverflow.com/users/11632427/grchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 56549377, "answer_count": 1, "score": 2, "last_activity_date": 1560278731, "creation_date": 1560273193, "last_edit_date": 1560278731, "question_id": 56548725, "link": "https://stackoverflow.com/questions/56548725/complex-number-syntax-error-in-c-using-vscode", "title": "Complex number syntax error in C (using VScode)", "body": "<p>I want to use Complex number in c (using VScode),but it doesn't work.</p>\n\n<p>other c code without Complex number can compile &amp; execute successfully,</p>\n\n<p>I've included complex.h and set Cstandard as C99</p>\n\n<p>here's my code &amp; error message</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;      \n#include &lt;complex.h&gt;    \n\nint main() \n{\n    double complex z1 = 1.0 + 3.0 * I;\n    double complex z2 = 1.0 - 4.0 * I;\n\n    printf(\" values: Z1 = %.2f + %.2fi\\tZ2 = %.2f + %.2fi\\n\", \n           creal(z1), \n           cimag(z1), \n           creal(z2), \n           cimag(z2));\n\n    getchar();\n}\n</code></pre>\n\n<p>error message:</p>\n\n<pre><code>c:\\grchen\\C\\code\\practice\\dft.c: In function 'int main()':\nc:\\grchen\\C\\code\\practice\\dft.c:6:20: error: expected initializer before 'z1'\n     double complex z1 = 1.0 + 3.0 * I;\n                    ^~\nc:\\grchen\\C\\code\\practice\\dft.c:7:20: error: expected initializer before 'z2'\n     double complex z2 = 1.0 - 4.0 * I;\n                    ^~\nc:\\grchen\\C\\code\\practice\\dft.c:12:18: error: 'z1' was not declared in this scope\n            creal(z1),\n                  ^~\nc:\\grchen\\C\\code\\practice\\dft.c:12:18: note: suggested alternative: 'y1'\n            creal(z1),\n                  ^~\n                  y1\nc:\\grchen\\C\\code\\practice\\dft.c:14:18: error: 'z2' was not declared in this scope\n            creal(z2),\n                  ^~\nThe terminal process terminated with exit code: 1\n\nTerminal will be reused by tasks, press any key to close it.\n\n&gt; Executing task: g++ -g c:\\grchen\\C\\code\\practice\\dft.c -o C:\\grchen\\C\\code\\dft.exe &lt;\n\nc:\\grchen\\C\\code\\practice\\dft.c: In function 'int main()':\nc:\\grchen\\C\\code\\practice\\dft.c:6:20: error: expected initializer before 'z1'\n     double complex z1 = 1.0 + 3.0 * I;\n                    ^~\nc:\\grchen\\C\\code\\practice\\dft.c:7:20: error: expected initializer before 'z2'\n     double complex z2 = 1.0 - 4.0 * I;\n                    ^~\nc:\\grchen\\C\\code\\practice\\dft.c:12:18: error: 'z1' was not declared in this scope\n            creal(z1),\n                  ^~\nc:\\grchen\\C\\code\\practice\\dft.c:12:18: note: suggested alternative: 'y1'\n            creal(z1),\n                  ^~\n                  y1\nc:\\grchen\\C\\code\\practice\\dft.c:14:18: error: 'z2' was not declared in this scope\n            creal(z2),\n</code></pre>\n\n<p>c_cpp_properties.json:</p>\n\n<pre><code>{\n    \"configurations\": [\n        {\n            \"name\": \"Win32\",\n            \"includePath\": [\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++/i686-w64-mingw32\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++/backward\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++/tr1\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/include\",\n                \"${workspaceFolder}/**\"\n            ],\n            \"cStandard\": \"c99\",\n            \"cppStandard\": \"c++98\",\n            \"defines\": [\n                \"_DEBUG\",\n                \"UNICODE\",\n                \"_UNICODE\"\n            ],\n            \"intelliSenseMode\": \"msvc-x64\",\n            \"browse\": {\n                \"path\": [\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++/i686-w64-mingw32\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++/backward\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/lib/gcc/i686-w64-mingw32/8.1.0/include/c++/tr1\",\n                \"C:/Program Files (x86)/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/include\",\n                \"${workspaceFolder}/**\"\n                ],\n                \"limitSymbolsToIncludedHeaders\": true,\n                \"databaseFilename\": \"\"\n            }\n\n        }\n    ],\n    \"version\": 4\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gfVLw.png\" rel=\"nofollow noreferrer\">code&amp;error</a>\n<a href=\"https://i.stack.imgur.com/brlZP.png\" rel=\"nofollow noreferrer\">properties</a></p>\n\n<p>Thanks for your time.</p>\n\n<p>(I'm not native speaker,my English is pretty basic, please don't mind)</p>\n"}, {"tags": ["c", "azure", "azure-iot-central", "azure-sphere"], "answers": [{"comments": [{"owner": {"reputation": 1699, "user_id": 8188729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a6db6711243fbd3012089095f53bf4?s=128&d=identicon&r=PG&f=1", "display_name": "AshokPeddakotla-MSFT", "link": "https://stackoverflow.com/users/8188729/ashokpeddakotla-msft"}, "edited": false, "score": 0, "creation_date": 1560422949, "post_id": 56577209, "comment_id": 99735385, "body": "Glad to hear that your issue is resolved after changing the network. I hope suggestion provided on the MSDN helped resolved this issue. <a href=\"https://social.msdn.microsoft.com/Forums/en-US/6d05f3f1-347c-4aaf-aa9d-b375b82facc5/azure-sphere-doesnt-send-telemetry-to-iot-central-iothubclientconnectionnonetwork?forum=azuresphere\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a>"}, {"owner": {"reputation": 81, "user_id": 2042400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b472bdf549a91fadd08abab7b99454b?s=128&d=identicon&r=PG", "display_name": "niziak", "link": "https://stackoverflow.com/users/2042400/niziak"}, "edited": false, "score": 0, "creation_date": 1603890047, "post_id": 56577209, "comment_id": 114178280, "body": "The <code>IOTHUB_CLIENT_CONNECTION_NO_NETWORK</code> is returned when given IoT HUB is not added to <code>app_manifest.json</code>&#39;s <code>AllowedConnections</code> key."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10294434"}, "is_accepted": true, "score": 1, "last_activity_date": 1560417357, "creation_date": 1560417357, "answer_id": 56577209, "question_id": 56548478, "link": "https://stackoverflow.com/questions/56548478/azure-sphere-doesnt-send-telemetry-to-iot-central-iothub-client-connection-no-n/56577209#56577209", "title": "Azure Sphere Doesn&#39;t send telemetry to Iot central IOTHUB_CLIENT_CONNECTION_NO_NETWORK", "body": "<p>Solved, it was a network problem.\nI changed network and run ShowIotCentral and got the right connection string to use in allowedConnections</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10294434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 56577209, "answer_count": 1, "score": 0, "last_activity_date": 1560432767, "creation_date": 1560272051, "last_edit_date": 1560432767, "question_id": 56548478, "link": "https://stackoverflow.com/questions/56548478/azure-sphere-doesnt-send-telemetry-to-iot-central-iothub-client-connection-no-n", "title": "Azure Sphere Doesn&#39;t send telemetry to Iot central IOTHUB_CLIENT_CONNECTION_NO_NETWORK", "body": "<p>Hello I'm trying to run the MT3620 AzureIot sample to send data from my azure sphere MT3620 (Mini-devboard) to my Azure Iot Central.</p>\n\n<p>I followed all the steps of the tutorial: <a href=\"https://github.com/Azure/azure-sphere-samples/tree/master/Samples/AzureIoT#run-the-sample-with-iot-central\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sphere-samples/tree/master/Samples/AzureIoT#run-the-sample-with-iot-central</a></p>\n\n<p>But after sending the data I got (in the output window): </p>\n\n<pre><code>IOTHUB_CLIENT_CONNECTION_NO_NETWORK\n</code></pre>\n\n<p>and I don't get anything on my IotCentral :(</p>\n\n<p>I executed the dev wifi show-status and the device is connected to my mobile hotspot</p>\n\n<p>What does that mean? Thanks!</p>\n\n<pre><code>IoT Hub Authenticated: IOTHUB_CLIENT_CONNECTION_NO_NETWORK\nINFO: Message received by IoT Hub. Result is: 1\nIoTHubDeviceClient_LL_CreateWithAzureSphereDeviceAuthProvisioning returned 'AZURE_SPHERE_PROV_RESULT_OK'.\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1560271930, "post_id": 56548202, "comment_id": 99678643, "body": "What&#39;s the point of a function if you call it only once? Why not define the <code>reciprocal</code> function as <code>float reciprocal(int itop, int ibase)</code> and then store the results in the float array within the loop?"}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1560272099, "post_id": 56548202, "comment_id": 99678728, "body": "That is the same thing that I was thinking but It was written in exam that you need void function and call it in main to calculate this"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1560272277, "post_id": 56548202, "comment_id": 99678813, "body": "Does the exam require the function definition to calculate all the details in one function call (must use arrays and pointers), or does the exam require that the function calculate the reciprocal value? Does the function <code>float reciprocal(int itop, int ibase) { return (1.0 * ibase) &#47; itop; }</code> not fit the requirements?"}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1560272352, "post_id": 56548202, "comment_id": 99678850, "body": "Exam requires use of function and array use as well with pointers"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 2, "creation_date": 1560273525, "post_id": 56548202, "comment_id": 99679364, "body": "@Myst the point of a function that is only called once is readability and segmentation.  When executed in a debugger, you can step over the function to skip it rather than trying to continue to a certain line number.  When reading the code, you can clearly see which lines of code are related to which functionality.  You can easily refactor the code by moving the call site of the function.  You can add more invocations of the function as needed.  There are far too many good reasons to write a function that is only called once than can fit in this comment box."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1560274575, "post_id": 56548202, "comment_id": 99679839, "body": "@WilliamPursell , the function is a simple mathematical operation (<code>(float)a&#47;b</code>). None of the reasons listed here apply. If the function was something like <code>io_reactor_initialize()</code> I wouldn&#39;t have given it a second thought."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560271867, "post_id": 56548304, "comment_id": 99678613, "body": "Thank you It fixed the problem my teacher wanted me to somehow use pointers inside of a function and then convert them from memory in main thats how I think it was but It got me so confused haha"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560271915, "post_id": 56548304, "comment_id": 99678634, "body": "@MarinSpudi\u0107 in <i>reciprocal</i> the parameters are pointer, and you can use them as pointer modifying them rather than using array index in the loop, do you want I show you how to ?"}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560272025, "post_id": 56548304, "comment_id": 99678687, "body": "Thank you for helping me there I now found out that I can cast to float !"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560272098, "post_id": 56548304, "comment_id": 99678727, "body": "@MarinSpudi\u0107 yes it is needed to cast at least one of the value to divide, else the division is made between int and <i>after</i> transformed to a <i>loat</i> but too late"}, {"owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "edited": false, "score": 0, "creation_date": 1560272231, "post_id": 56548304, "comment_id": 99678792, "body": "Thank you so much I did it !"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 0, "last_activity_date": 1560271851, "last_edit_date": 1560271851, "creation_date": 1560271396, "answer_id": 56548304, "question_id": 56548202, "link": "https://stackoverflow.com/questions/56548202/how-to-calculate-inside-of-function-and-pass-it-into-main-using-arrays/56548304#56548304", "title": "How to calculate inside of function and pass it into main using arrays", "body": "<p>If I well understand </p>\n\n<blockquote>\n  <p>void reciprocal (int topnumber[],int botnumber[],float *argument[]);</p>\n</blockquote>\n\n<p>must be</p>\n\n<pre><code>void reciprocal (int topnumber[],int botnumber[],float argument[]);\n</code></pre>\n\n<p>in <em>main</em></p>\n\n<blockquote>\n<pre><code>reciprocal(topnumber[i],botnumber[i],&amp;argument[i]);\n</code></pre>\n</blockquote>\n\n<p>must be</p>\n\n<pre><code>    reciprocal(topnumber,botnumber,argument);\n</code></pre>\n\n<p>and</p>\n\n<blockquote>\n<pre><code>void reciprocno (int topnumber[],int botnumber[],float *argument[]){\n...\n  &amp;argument[i] = botnumber[i] / topnumber[i];\n</code></pre>\n</blockquote>\n\n<p>must be</p>\n\n<pre><code>void reciprocal (int topnumber[],int botnumber[],float argument[]){\n  ...\n   argument[i] = ((float) botnumber[i]) / topnumber[i];\n</code></pre>\n\n<p>note the cast to <em>float</em> to do a float computation rather than a division between <em>int</em></p>\n\n<hr>\n\n<p>I also encourage you to check the <em>scanf</em> returns 1 to be sure a valid input was enter</p>\n"}], "owner": {"reputation": 11, "user_id": 11632293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MXsmuJ1X3n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI9f3UEfqS27xf-4Rsex_TcmW6ZA/mo/photo.jpg?sz=128", "display_name": "Marin Spudi\u0107", "link": "https://stackoverflow.com/users/11632293/marin-spudi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 56548304, "answer_count": 1, "score": 1, "last_activity_date": 1560271851, "creation_date": 1560271038, "last_edit_date": 1560271165, "question_id": 56548202, "link": "https://stackoverflow.com/questions/56548202/how-to-calculate-inside-of-function-and-pass-it-into-main-using-arrays", "title": "How to calculate inside of function and pass it into main using arrays", "body": "<p>Currently I am working on some of homework stuff and I got stuck on point where i need to calculate Reciprocal of a Fraction</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid reciprocal (int topnumber[],int botnumber[],float *argument[]);\n\nint main(){\n    int topnumber[3],botnumber[3],i,n;\n    float argument[3];\n\n    for(i=0;i&lt;3;i++){\n      printf(\"Top number of %d fraction\\n\",i+1);\n      scanf(\"%d\",&amp;topnumber[i]);\n      printf(\"Bot number of %d fraction\\n\",i+1);\n      scanf(\"%d\",&amp;botnumber[i]);\n    }\n    reciprocal(topnumber[i],botnumber[i],&amp;argument[i]);\n}\n\nvoid reciprocno (int topnumber[],int botnumber[],float *argument[]){\n    int i;\n    for (i=0;i&lt;3;i++){\n      &amp;argument[i] = botnumber[i] / topnumber[i];\n      printf(\"Reciprocal of a Fraction %d / %d is %f\\n\",topnumber[i],botnumber[i],argument[i]);\n    }\n\n}\n</code></pre>\n\n<p>I want it to write Reciprocal of 2/5 is 5/2 = 2.5 and I need it  to be calculated in function and then passed into main function using scanf to collect top and bot numbers with for loop</p>\n"}, {"tags": ["c", "macros"], "answers": [{"comments": [{"owner": {"reputation": 6240, "user_id": 3223157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/s6g80.jpg?s=128&g=1", "display_name": "Xatenev", "link": "https://stackoverflow.com/users/3223157/xatenev"}, "edited": false, "score": 1, "creation_date": 1560271401, "post_id": 56548277, "comment_id": 99678388, "body": "Requires &gt;= C99,  (= Section 6.10.9 of the C99 standard)."}, {"owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "edited": false, "score": 0, "creation_date": 1560327716, "post_id": 56548277, "comment_id": 99695487, "body": "ok perfect i will check this. thank you. ( PS: i use C11 since its meanwhile 2019 :-) )"}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 5, "last_activity_date": 1560271609, "last_edit_date": 1560271609, "creation_date": 1560271335, "answer_id": 56548277, "question_id": 56548146, "link": "https://stackoverflow.com/questions/56548146/forward-define-a-pragma-for-gcc/56548277#56548277", "title": "Forward-define a pragma for GCC", "body": "<p>You want the <code>_Pragma</code> preprocessing operator (introduced in C99):</p>\n\n<pre><code>// Definition\n#define PRAGMA(...) _Pragma(#__VA_ARGS__)\n\n#if 1 // generate todo list\n#define ADD_TODO(msg) PRAGMA( message \"[todo]\" msg)\n#else\n#define ADD_TODO(msg) /*empty*/\n#endif\n// Usage\nADD_TODO(\"this may result in unitialized variables, fix this\")\n</code></pre>\n\n<p>The operator solves the problem of not being able to use preprocessor directives (such as <code>#pragma</code>) inside a <code>#define</code>). It takes a string-literal argument, which is quite impractical to construct by hand, and that is why you'll pretty much always see it wrapped in macro that constructs the string using the <code>#</code> (stringification) operator as shown in the above snippet.</p>\n"}], "owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 56548277, "answer_count": 1, "score": 3, "last_activity_date": 1560271609, "creation_date": 1560270777, "question_id": 56548146, "link": "https://stackoverflow.com/questions/56548146/forward-define-a-pragma-for-gcc", "title": "Forward-define a pragma for GCC", "body": "<p>I am looking for a solution to forward-declare/define a pragma for GCC.</p>\n\n<p>I use message pragmas as todo list (#pragma message \"do this and that\").\nHowever, i would like the option to enable/disable the messages completely by a construct as follows:</p>\n\n<p>Warning, this is pseudo-code:</p>\n\n<pre><code>// Definition\n#if 1 // generate todo list\n#define ADD_TODO(msg) #pragma message \"[todo]\" msg\n#else\n#define ADD_TODO(msg) /*empty*/\n#endif\n// Usage\nADD_TODO(\"this may result in unitialized variables, fix this\")\n</code></pre>\n\n<p>Has someone experience with such constructs?</p>\n"}, {"tags": ["c", "pthreads", "mutex", "thread-synchronization"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560270560, "post_id": 56547704, "comment_id": 99677995, "body": "At the end, you seem to be saying that the program does not work as you expect.  It would be appropriate to present the program output or other information that leads you to draw that conclusion, and explain your analysis of it."}, {"owner": {"reputation": 9, "user_id": 11632121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68d29ca53671d57b490f7bf58950e53?s=128&d=identicon&r=PG&f=1", "display_name": "kubek_tysionc", "link": "https://stackoverflow.com/users/11632121/kubek-tysionc"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560270973, "post_id": 56547704, "comment_id": 99678193, "body": "At the begining all readers are coming in, then also writers which shouldn&#39;t be possible at the same time. Then all readers are gone but there are more than one writer at the same time in library. The best idea is to run it and see for yourself."}], "answers": [{"tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": false, "score": 1, "last_activity_date": 1560271538, "creation_date": 1560271538, "answer_id": 56548335, "question_id": 56547704, "link": "https://stackoverflow.com/questions/56547704/readers-writers-problem-writers-preference-readers-may-starve/56548335#56548335", "title": "Readers-Writers problem writers-preference (readers may starve)", "body": "<p>It seems to do what you want, that is give preference to the writers.   Because your threads loop acquiring and releasing the lock; if you have more than one writer, the writers will take turns passing it between themselves and starve the readers.  That is, every time one releases the resourceMutex, there is another writer waiting on it, so NO_WRITERS_WRITING will never hit zero.</p>\n\n<p>To see it operating as intended, add a delay at the top of the while loop of each thread:</p>\n\n<p>usleep((rand() % 10000) * 10000);</p>\n\n<p>That will permit the readers to periodically get access, whenever all the writers are in the usleep().</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 11632121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68d29ca53671d57b490f7bf58950e53?s=128&d=identicon&r=PG&f=1", "display_name": "kubek_tysionc", "link": "https://stackoverflow.com/users/11632121/kubek-tysionc"}, "edited": false, "score": 0, "creation_date": 1560279636, "post_id": 56549583, "comment_id": 99682140, "body": "Yeah, I see what I did wrong with NO_WRITERS_WRITING I added one more variable to count writers. But I still can&#39;t simulate it right. Maybe because I don&#39;t know how should correct outcome look like. I have problem with placing those sleeps. <a href=\"https://pastebin.com/snB5XhT8\" rel=\"nofollow noreferrer\">pastebin.com/snB5XhT8</a> Is it correct now?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 9, "user_id": 11632121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68d29ca53671d57b490f7bf58950e53?s=128&d=identicon&r=PG&f=1", "display_name": "kubek_tysionc", "link": "https://stackoverflow.com/users/11632121/kubek-tysionc"}, "edited": false, "score": 0, "creation_date": 1560280483, "post_id": 56549583, "comment_id": 99682510, "body": "@kubek_tysionc, if the writer <code>sleep()</code>s between incrementing <code>NO_WRITERS_WRITING</code> and decrementing it again, especially if it does so while holding <code>resourceMutex</code>, then that simulates the writer taking some time to complete its task.  That&#39;s ok, but if the readers are ever to run then there must be times when no writers are working.  That would be best implemented by a second <code>sleep</code> -- a longer one, preferrably random one -- either at the very beginning or at the very end of the writer loop."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1560276945, "creation_date": 1560276945, "answer_id": 56549583, "question_id": 56547704, "link": "https://stackoverflow.com/questions/56547704/readers-writers-problem-writers-preference-readers-may-starve/56549583#56549583", "title": "Readers-Writers problem writers-preference (readers may starve)", "body": "<blockquote>\n  <p>At the begining all readers are coming in,</p>\n</blockquote>\n\n<p>By \"coming in\", I take you to mean executing the <code>printf()</code> calls in the <code>readerJob</code> loop.  It's not surprising that the readers all come in first, because you start them first, and in the likely event that the first reader thread to attempt to lock <code>tryResourceMutex</code> does so before any writer thread does, it will then lock <code>resourceMutex()</code>, too, preventing any writer from \"coming in\".  <strong>But that <em>does not</em> prevent writers from incrementing <code>NO_WRITERS_WRITING</code>.</strong>  And it also does not preventing one of them from locking <code>tryResourceMutex</code> and holding it locked.</p>\n\n<p>The <code>sleep()</code> call in the reader will then (probably) cause <code>resourceMutex</code> to be held continuously long enough that all the readers come in before any of the writers do, since each writer needs to acquire <code>resourceMutex</code> to come in.</p>\n\n<blockquote>\n  <p>then also writers which shouldn't be possible at the same time.</p>\n</blockquote>\n\n<p>I don't see that in my tests.  But I <em>do</em> see what I already described: the writer count increases from zero, even though they are prevented from coming in while any readers are inside.  In effect, the name of your variable <code>NO_WRITERS_WRITING</code> is inconsistent with your actual usage -- indicates how many writers are writing <em>or waiting to write</em>.</p>\n\n<p>When the readers leave they are blocked from reentering right away because one of the writers holds <code>tryResourceMutex</code>.  Eventually, then, the last reader will exit and release the <code>resourceMutex</code>.  This will allow the writers to proceed, one at a time, but with the <code>sleep()</code> call positioned where it is in the writer loop, it is extremely unlikely that the number of writers will ever fall to zero to allow any of the readers to re-enter.  If it did, however, then very likely the same cycle would repeat: all of the readers would enter, once, while all the writers queue up.</p>\n\n<blockquote>\n  <p>Then all readers are gone but there are more than one writer at the same time in library.</p>\n</blockquote>\n\n<p>Again, no.  Only one writer is inside at a time, but the others are queued most of the time, so <code>NO_WRITERS_WRITING</code> will almost always be equal to <code>NO_WRITERS</code>.</p>\n\n<p>Bottom line, then: you have confused yourself.  You are using variable <code>NO_WRITERS_WRITING</code> primarily to represent the number of writers that are ready to write, but your messaging uses it as if it were the number actually writing.  The same does not apply to <code>NO_READERS_READING</code> because once a thread acquires the mutex needed to modify that variable, nothing else prevents it from proceeding on into the room.</p>\n\n<p>One more thing: to make the simulation interesting -- i.e. to keep the writers from taking permanent control -- you should implement a delay, preferably a random one, after each thread leaves the room, before it tries to reenter.  And the delay for writers should probably be substantially longer than the delay for readers.</p>\n"}], "owner": {"reputation": 9, "user_id": 11632121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f68d29ca53671d57b490f7bf58950e53?s=128&d=identicon&r=PG&f=1", "display_name": "kubek_tysionc", "link": "https://stackoverflow.com/users/11632121/kubek-tysionc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560276945, "creation_date": 1560268975, "last_edit_date": 1560270103, "question_id": 56547704, "link": "https://stackoverflow.com/questions/56547704/readers-writers-problem-writers-preference-readers-may-starve", "title": "Readers-Writers problem writers-preference (readers may starve)", "body": "<p>I have problem with readers-writers problem. I want to write writers favor solution using mutex. So far i have written this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdint.h&gt;\n#include&lt;unistd.h&gt;\n\nint NO_READERS;\nint NO_WRITERS;\nint NO_READERS_READING = 0;     // How many readers need shared resources\nint NO_WRITERS_WRITING = 0;     // How many writers need shared resources\n\npthread_mutex_t resourceMutex = PTHREAD_MUTEX_INITIALIZER;\npthread_mutex_t tryResourceMutex = PTHREAD_MUTEX_INITIALIZER;\npthread_mutex_t readerMutex = PTHREAD_MUTEX_INITIALIZER;\npthread_mutex_t writerMutex = PTHREAD_MUTEX_INITIALIZER;\n\nvoid *readerJob(void *arg) {\n    int *id = (int*)arg;\n    while (1) {\n        pthread_mutex_lock(&amp;tryResourceMutex); // Indicate reader is trying to enter\n        pthread_mutex_lock(&amp;readerMutex);\n        NO_READERS_READING++; // Indicate that you are needing the shared resource (one more reader)\n        if (NO_READERS_READING == 1) {\n            pthread_mutex_lock(&amp;resourceMutex);\n        }\n        pthread_mutex_unlock(&amp;readerMutex);\n        pthread_mutex_unlock(&amp;tryResourceMutex);\n         printf(\"READER ID %d WALKED IN \\n\",*id);\n        printf(\"ReaderQ: %d , WriterQ: %d [in: R:%d W:%d]\\n\",\n                NO_READERS - NO_READERS_READING,\n                NO_WRITERS - NO_WRITERS_WRITING,\n                NO_READERS_READING,\n                NO_WRITERS_WRITING);\n        sleep(1);\n        pthread_mutex_lock(&amp;readerMutex);\n        NO_READERS_READING--;\n        if (NO_READERS_READING == 0) { // Check if you are the last reader\n            pthread_mutex_unlock(&amp;resourceMutex);\n        }\n        pthread_mutex_unlock(&amp;readerMutex);\n    }\n    return 0;\n}\n\nvoid *writerJob(void *arg) {\n    int *id = (int*)arg;\n    while (1) {\n        pthread_mutex_lock(&amp;writerMutex);\n        NO_WRITERS_WRITING++;\n        if (NO_WRITERS_WRITING == 1) {\n            pthread_mutex_lock(&amp;tryResourceMutex); // If there are no other writers lock the readers out\n        }\n        pthread_mutex_unlock(&amp;writerMutex);\n\n        pthread_mutex_lock(&amp;resourceMutex);\n        printf(\"WRITER ID %d WALKED IN \\n\",*id);\n        printf(\"ReaderQ: %d , WriterQ: %d [in: R:%d W:%d]\\n\",\n                NO_READERS - NO_READERS_READING,\n                NO_WRITERS - NO_WRITERS_WRITING,\n                NO_READERS_READING,\n                NO_WRITERS_WRITING);\n        sleep(1);\n        pthread_mutex_unlock(&amp;resourceMutex);\n\n        pthread_mutex_lock(&amp;writerMutex);\n        NO_WRITERS_WRITING--;\n        if (NO_WRITERS_WRITING == 0) {\n            pthread_mutex_unlock(&amp;tryResourceMutex); // If there are no writers left unlock the readers\n        }\n        pthread_mutex_unlock(&amp;writerMutex);\n    }\n    return 0;\n}\n\nint main(int argc, char *argv[]) {\n    NO_READERS = atoi(argv[1]);\n    NO_WRITERS = atoi(argv[2]);\n\n    // Initialize arrays of threads IDs\n    pthread_t *readersThreadsIds = malloc(NO_READERS * sizeof(pthread_t));\n    pthread_t *writersThreadsIds = malloc(NO_READERS * sizeof(pthread_t));\n\n    // Initialize shared memory (array) with random numbers\n\n    // Create readers threads\n    for (int i = 0; i &lt; NO_READERS; ++i) {\n        int* id = (int*)(malloc(sizeof(int)));\n        *id = i;\n        pthread_create(&amp;readersThreadsIds[i], NULL, readerJob,(void*)id);\n    }\n    // Create writers threads\n    for (int i = 0; i &lt; NO_WRITERS; ++i) {\n        int* id = (int*)(malloc(sizeof(int)));\n        *id = i;\n        pthread_create(&amp;writersThreadsIds[i], NULL, writerJob, (void*)id);\n\n    }\n\n    // Wait for readers to finish\n    for (int i = 0; i &lt; NO_READERS; ++i) {\n        pthread_join(readersThreadsIds[i], NULL);\n        }\n    // Wait for writers to finish\n    for (int i = 0; i &lt; NO_WRITERS; ++i) {\n        pthread_join(writersThreadsIds[i], NULL);\n    }\n\n    free(readersThreadsIds);\n    free(writersThreadsIds);\n    pthread_mutex_destroy(&amp;resourceMutex);\n    pthread_mutex_destroy(&amp;tryResourceMutex);\n    pthread_mutex_destroy(&amp;readerMutex);\n    pthread_mutex_destroy(&amp;writerMutex);\n    return 0;\n}\n</code></pre>\n\n<p>And I'm not sure if this should be working like this. Can anyone check this for me? I want to have information about which reader or writer is going in or out. It seems like it stuck in some point but I don't know why.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1560268879, "post_id": 56547637, "comment_id": 99677132, "body": "<a href=\"https://en.wikipedia.org/wiki/Article_(grammar)\" rel=\"nofollow noreferrer\">article?</a>"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 4, "creation_date": 1560268914, "post_id": 56547637, "comment_id": 99677150, "body": "First of all, you need to know what an article is. Say, you can have a hardcoded array of what you&#39;d classify as an article."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1560269167, "post_id": 56547637, "comment_id": 99677273, "body": "and first you have to extract the words from your input to compare each with your list of articles"}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1560269542, "post_id": 56547637, "comment_id": 99677463, "body": "First you need to figure out what an &#39;article&#39; is (hint it is a class of words much like noun or verb), then figure out how to split a sentence into words, i.e. &quot;I went to a movie yesterday along with an old man&quot; into &quot;I&quot;, &quot;went&quot;, &quot;to&quot;, &quot;a&quot;, &quot;movie&quot;, &quot;yesterday&quot;, &quot;along&quot;, &quot;with&quot;, &quot;an&quot;, &quot;old&quot;, &quot;man&quot;.  Then how to count the number of articles.  Although the sentence &quot;the cat ran into the house&quot; has a single article that appears twice so you need to figure out if you should report one article or the number of occurrences of that article."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1560270692, "post_id": 56547637, "comment_id": 99678053, "body": "What is your question?  Are you asking how to edit a file to generate source code?  Are you asking about how to compile a program?  Are you asking how to run it?  Are you asking how to read data?  Are you asking how to parse data?  Are you asking how to increment a variable?  Are you asking how to recognize an article?  Are you asking how to tokenize the input?  So many possible variations.  Be specific."}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 1, "creation_date": 1560270814, "post_id": 56547637, "comment_id": 99678116, "body": "Start by writing the &quot;hello world&quot; program. Then write a program which prints the sentence you gave as input. Break the problem into small steps and you will solve it."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 10759547, "user_type": "registered", "profile_image": "https://graph.facebook.com/2185787468361231/picture?type=large", "display_name": "Unknown", "link": "https://stackoverflow.com/users/10759547/unknown"}, "is_accepted": false, "score": 0, "last_activity_date": 1560274488, "creation_date": 1560274488, "answer_id": 56549011, "question_id": 56547637, "link": "https://stackoverflow.com/questions/56547637/how-to-find-the-number-of-articles-in-a-string-by-using-c/56549011#56549011", "title": "How to find the number of articles in a string by using c?", "body": "<p>I don't know exactly where your problem is, so I hope that this could help you</p>\n\n<p>You can enter a text witch scanf. To split this string use strtok and for the comperison strcmp.\nAlso look:\n<a href=\"https://devdocs.io/c/string/byte/strtok\" rel=\"nofollow noreferrer\">https://devdocs.io/c/string/byte/strtok</a></p>\n\n<p><a href=\"https://devdocs.io/c/string/byte/strcmp\" rel=\"nofollow noreferrer\">https://devdocs.io/c/string/byte/strcmp</a></p>\n\n<p>so here is how it can look like:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main()\n{\n\n    char arr[MAX];\n    printf(\"Input: \");\n    scanf(\"%[^\\n]s\",arr);\n    int count = 0;\n    char *token = strtok(arr, \" \");\n    while(token)\n    {\n        if(strcmp(token, \"an\") == 0|| strcmp(token, \"a\") == 0 || strcmp(token, \"the\") == 0)\n            count++;\n        if(strcmp(token, \"An\") == 0|| strcmp(token, \"A\") == 0 || strcmp(token, \"The\") == 0)\n            count++;\n        token = strtok(NULL, \" \");\n    }\n    printf(\"Output: %d\", count);\n    return 0;\n}\n</code></pre>\n\n<p>you could make an char array for the articles and than interate it. And don't foget to inlcude the librarys for this ;)</p>\n"}], "owner": {"reputation": 1, "user_id": 8244715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b469aee52ff86f190fa910abb1cc53b2?s=128&d=identicon&r=PG&f=1", "display_name": "BALAJI E", "link": "https://stackoverflow.com/users/8244715/balaji-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1560274488, "creation_date": 1560268743, "question_id": 56547637, "link": "https://stackoverflow.com/questions/56547637/how-to-find-the-number-of-articles-in-a-string-by-using-c", "title": "How to find the number of articles in a string by using c?", "body": "<p>A string S is passed as the input. The program must print the number of articles in S.</p>\n\n<p>I have no idea about this problem. Help me to find a solution to this problem.</p>\n\n<p>Input:\nI went to a movie yesterday along with an old man.</p>\n\n<p>Output:\n2</p>\n\n<p>There are two articles in the string.</p>\n"}, {"tags": ["c", "cryptography"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 11609854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1211167772425163/picture?type=large", "display_name": "Lorenzo Toscano", "link": "https://stackoverflow.com/users/11609854/lorenzo-toscano"}, "edited": false, "score": 0, "creation_date": 1560273901, "post_id": 56548120, "comment_id": 99679519, "body": "My apologies, I corrected that part, q was used for debugging in a previous version of the code, I forgot to delete it. The variables are all initialized at the beginning of the main. if you want to see more of it i uploaded the code to my <a href=\"https://github.com/Tabamon/Enigma\" rel=\"nofollow noreferrer\">github</a>"}], "tags": [], "owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "is_accepted": true, "score": 3, "last_activity_date": 1560277989, "last_edit_date": 1560277989, "creation_date": 1560270677, "answer_id": 56548120, "question_id": 56547518, "link": "https://stackoverflow.com/questions/56547518/coding-enigma-algorithm-can-encrypt-but-not-decrypt/56548120#56548120", "title": "Coding Enigma algorithm, can encrypt but not decrypt", "body": "<p>First of all, I don't see where you initialize the variables <code>j</code> or <code>z</code> and you never use the variable <code>q</code> after assigning a value to it. Assuming that you do initialize everything, that you don't need the variable <code>q</code> and that your code is otherwise correct then the problem is here:</p>\n\n<pre><code>if (z==26){\n    z=0;\n    temp=rs2[0];\n    for(int s=0;s&lt;26-1;s++)\n    {\n        rs2[s]=rs2[s+1];\n    }\n    rs2[26-1]=temp;\n}\n</code></pre>\n\n<p>In this block of code you should be working with <code>rs3</code> not <code>rs2</code>. It looks like you did a copy and paste but did not change all of the names.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>You must reverse the lookup mechanism for decryption and you do not need a <code>reflect</code> function. Replace</p>\n\n<pre><code>sentence[i]=reflect(sentence[i]);\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>sentence[i]=encrypt(sentence[i],reflector);\n</code></pre>\n\n<p>The <code>decrypt</code> function will look like this:</p>\n\n<pre><code>char decrypt(char c, char r[])\n{\n    for ( int num = 0; num &lt; 26; ++num )\n    {\n        if ( r[num] == c )\n        {\n            return((char)(65 + num));\n        }\n    }\n    return(c); // Should never get here\n}\n</code></pre>\n\n<p>Then to perform decryption, call <code>decrypt</code> instead of <code>encrypt</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 11609854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1211167772425163/picture?type=large", "display_name": "Lorenzo Toscano", "link": "https://stackoverflow.com/users/11609854/lorenzo-toscano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 56548120, "answer_count": 1, "score": 3, "last_activity_date": 1560283741, "creation_date": 1560268345, "last_edit_date": 1560283741, "question_id": 56547518, "link": "https://stackoverflow.com/questions/56547518/coding-enigma-algorithm-can-encrypt-but-not-decrypt", "title": "Coding Enigma algorithm, can encrypt but not decrypt", "body": "<p>I have to code the enigma algorithm used by Nazi-Germany to encrypt messages sent over radio, you can read how it works right <a href=\"https://www.cs.cornell.edu/courses/cs3110/2018sp/a1/a1.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>As of right now i am only coding the rotors, i didn't code the Plugboard or the rotor initial position yet, since i seem to have problems with this already.</p>\n\n<p>This is what i wrote:</p>\n\n<pre><code>    for (int i=0; i&lt;strlen(sentence);i++){\n\n        sentence[i]=toupper(sentence[i]);\n\n        temp=rs1[0];\n        for(int s=0;s&lt;26-1;s++)\n        {\n            rs1[s]=rs1[s+1];\n        }\n        rs1[26-1]=temp;\n        j++;\n\n        if (j==26){\n\n            j=0;\n            temp=rs2[0];\n            for(int s=0;s&lt;26-1;s++)\n            {\n                rs2[s]=rs2[s+1];\n            }\n            rs2[26-1]=temp;\n            z++;\n\n        }\n\n        if (z==26){\n\n            z=0;\n            temp=rs2[0];\n            for(int s=0;s&lt;26-1;s++)\n            {\n                rs2[s]=rs2[s+1];\n            }\n            rs2[26-1]=temp;\n\n        }\n\n        q=(sentence[i]-65);\n\n        //this cant decrypt\n\n        sentence[i]=encrypt(sentence[i],rs1);\n        //printf(\"%s\\n\",sentence);\n        sentence[i]=encrypt(sentence[i],rs2);\n        //printf(\"%s\\n\",sentence);\n        sentence[i]=encrypt(sentence[i],rs3);\n        //printf(\"%s\\n\",sentence);\n        sentence[i]=reflect(sentence[i]);\n        //printf(\"%s\\n\",sentence);\n        sentence[i]=encrypt(sentence[i],rs3);\n        //printf(\"%s\\n\",sentence);\n        sentence[i]=encrypt(sentence[i],rs2);\n        //printf(\"%s\\n\",sentence);\n        sentence[i]=encrypt(sentence[i],rs1);\n        //printf(\"%s\\n\",sentence);\n\n    }\n</code></pre>\n\n<p>the functions are:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char encrypt(char c, char r[]){\n\nint num=(int)c-65;\nchar newc;\n\nnewc=r[num];\n\nreturn newc;\n}\n\nchar relfect(char c){\n\nchar reflector[27]={'A','Q','W','S','E','D','R','F','T','G','Y','H','U','J','O','K','I','L','P','Z','V','C','X','B','N','M'};\nint num=(int)c-65;\nchar newc;\n\nnewc=reflector[num];\n\nreturn newc;\n}\n</code></pre>\n\n<p>When I compile and execute my code I manage to encrypt the word i input, but when I reset the program and insert the encrypted word it doesnt decrypt it, which seems odd.</p>\n\n<p>EXAMPLE:\nIf I input Hello I get QOBAJ but in I restart the program and enter QOBAJ I get MWCJC instead of Hello and i can't figure out why.</p>\n\n<p>The rotors i use are:</p>\n\n<p>1-  EKMFLGDQVZNTOWYHXUSPAIBRCJ</p>\n\n<p>2-  AJDKSIRUXBLHWTMCQGZNPYFVOE</p>\n\n<p>3-  BDFHJLCPRTXVZNYEIWGAKMUSQO</p>\n\n<p>Thank you for helping me.</p>\n\n<p>Lorenzo.</p>\n"}, {"tags": ["c", "machine-learning", "neural-network", "artificial-intelligence"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10650785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434ed8fcd3d742e7a9a0a6a9e31f5fe2?s=128&d=identicon&r=PG&f=1", "display_name": "skullmind", "link": "https://stackoverflow.com/users/10650785/skullmind"}, "edited": false, "score": 1, "creation_date": 1560958666, "post_id": 56644160, "comment_id": 99910299, "body": "Thanks!! I immediately changed the code and looked for further index errors and saw none. But unfortunately this didn&#39;t stop the error back propagation from being stucked.... I really appreciate your answer by the way !"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "reply_to_user": {"reputation": 37, "user_id": 10650785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434ed8fcd3d742e7a9a0a6a9e31f5fe2?s=128&d=identicon&r=PG&f=1", "display_name": "skullmind", "link": "https://stackoverflow.com/users/10650785/skullmind"}, "edited": false, "score": 0, "creation_date": 1561441383, "post_id": 56644160, "comment_id": 100053091, "body": "@skullmind - Hm\u2026 With the change, I get results much closer to the expected, e. g. <code>OUTPUT 0.02 0.08 0.16 0.21 0.24 0.25 0.24 0.21 0.16 0.08 0.02</code> (sometimes somewhat worse). I&#39;m in doubt whether we can expect this network with just four hidden neurons to perform better than that."}], "tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 1, "last_activity_date": 1560844096, "creation_date": 1560844096, "answer_id": 56644160, "question_id": 56547322, "link": "https://stackoverflow.com/questions/56547322/error-back-propagation-gets-stuck-in-a-wrong-value/56644160#56644160", "title": "Error Back Propagation gets stuck in a wrong value", "body": "<p>In the loop <code>//Sum up net_v and produce o</code> where the <code>v</code>-weighted output from the hidden layer's neurons' activations <code>h</code> is accumulated in <code>net_v</code>, there's a wrong index <code>k</code>:</p>\n\n<pre><code>                    net_v[n][k] += h[n][k] * v[k][j];\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>                    net_v[n][k] += h[n][j] * v[k][j];\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10650785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434ed8fcd3d742e7a9a0a6a9e31f5fe2?s=128&d=identicon&r=PG&f=1", "display_name": "skullmind", "link": "https://stackoverflow.com/users/10650785/skullmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560844096, "creation_date": 1560267789, "last_edit_date": 1560321198, "question_id": 56547322, "link": "https://stackoverflow.com/questions/56547322/error-back-propagation-gets-stuck-in-a-wrong-value", "title": "Error Back Propagation gets stuck in a wrong value", "body": "<p>I am currently doing an assignment which requires me to make a neural network of <code>f(x) = x(1-x)</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n\n#define ITER 300000\n#define L_RATE 0.5\n#define N 11\n#define I 1\n#define J 4\n#define K 1\n#define SIGMOID(x) (1/(1+exp(-(x))))\n</code></pre>\n\n<p>So I am currently using 4 hiden nodes(<code>J</code>) and a learning rate of 0.5(<code>L_RATE</code>) and planning to have 11 datas(<code>N</code>) as inputs for training.    </p>\n\n<pre><code>double error_v(double o, double t, double h)\n{\n    return -(t-o)*o*(1-o)*h;\n}\n\n\ndouble error_w(double x, double h, double w, double t, double o)\n{\n    return -x*h*(1-h)*w*(t-o)*o*(1-o);\n}\n</code></pre>\n\n<p>These would be the error gradient for weight of each layers.    </p>\n\n<pre><code>int main(void)\n{\n    double x[N][I]; \n    double t[N][K];\n    double w[J][I+1];\n    double v[K][J+1];\n    double net_w[N][J];\n    double net_v[N][K];\n    double h[N][J];\n    double o[N][K];\n\n    for(int n=0; n&lt;N; n++)\n    {\n        for(int i=0; i&lt;I; i++)\n        {\n            x[n][i] = 0.1 * n;\n            t[n][i] = x[n][i] * (1 - x[n][i]);\n        }\n    }\n\n    //INITIALIZE WEIGHT\n    srand(time(NULL));\n    for(int j=0; j&lt;J; j++)\n    {\n        for(int i=0; i&lt;I+1; i++)\n        {\n            w[j][i] = (double)rand()/RAND_MAX*2.0-1.0;\n            printf(\"%.2f \", w[j][i]);\n        }\n    }\n    for(int k=0; k&lt;K; k++)\n    {\n        for(int j=0; j&lt;J+1; j++)\n        {\n            v[k][j] = (double)rand()/RAND_MAX*2.0-1.0;\n            printf(\"%.2f \", v[k][j]);\n        }\n    }\n\n    for(int iter=0; iter&lt;ITER; iter++)\n    {   \n        for(int n=0; n&lt;N; n++)\n        {\n            //Initialize net zero\n            for(int j=0; j&lt;J; j++)\n            {\n                net_w[n][j] = 0;\n            }\n            for(int k=0; k&lt;K; k++)\n            {\n                net_v[n][k] = 0;\n            }\n            //Sum up net_w and produce h\n            for(int j=0; j&lt;J; j++)\n            {\n                for(int i=0; i&lt;I; i++)\n                {\n                    net_w[n][j] += x[n][i] * w[j][i];\n                }\n                net_w[n][j] += 1 * w[j][I];\n                h[n][j] = SIGMOID(net_w[n][j]);\n            }\n            //Sum up net_v and produce o\n            for(int k=0; k&lt;K; k++)\n            {\n                for(int j=0; j&lt;J; j++)\n                {\n                    net_v[n][k] += h[n][k] * v[k][j];\n                }\n                net_v[n][k] += 1 * v[k][J];\n                o[n][k] = SIGMOID(net_v[n][k]);\n            }\n        }\n</code></pre>\n\n<p>So until here, I calculated the first net value by multiplying the input(including one bias) and weight(w) and the second net value by multiplying the 'sigmoided' value of the first net(including one bias) and weight(v).</p>\n\n<pre><code>        for(int n=0; n&lt;N; n++)\n        {\n            //error_v\n            for(int k=0; k&lt;K; k++)\n            {\n                for(int j=0; j&lt;J; j++)\n                {\n                    v[k][j] -= L_RATE * error_v(o[n][k], t[n][k], h[n][j]);\n                }\n                v[k][J] -= L_RATE * error_v(o[n][k], t[n][k], 1);\n            }\n        }\n        for(int n=0; n&lt;N; n++)\n        {\n            //error_w\n            for(int j=0; j&lt;J; j++)\n            {\n                for(int i=0; i&lt;I; i++)\n                {\n                    for(int k=0; k&lt;K; k++)\n                    {\n                        w[j][i] -= L_RATE * error_w(x[n][i], h[n][j], w[k][j], t[n][k], o[n][k]);\n                    }\n                }\n                for(int k=0; k&lt;K; k++)\n                {\n                    w[j][I] -= L_RATE * error_w(1, h[n][j], w[k][j], t[n][k], o[n][k]);\n                }\n            }\n        }\n\n    }\n</code></pre>\n\n<p>But here's the problem. I corrected the error of the weight by multiplying the learning rate and the error gradient by the following formula.\n<a href=\"https://i.stack.imgur.com/OXRhT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OXRhT.png\" alt=\"enter image description here\"></a>\nI thought I had to use 3-for-loop for the second layer and 4-for-loop in respect of each number of input layer, hidden layer, output layer and training data.</p>\n\n<pre><code>    printf(\"INPUT\\n\");\n    for(int n=0; n&lt;N; n++)\n    {\n        printf(\"%.2f \", x[n][0]);\n    }\n    printf(\"\\n\");\n    printf(\"OUTPUT\\n\");\n    for(int n=0; n&lt;N; n++)\n    {\n        printf(\"%.2f \", o[n][0]);\n    }\n    printf(\"\\n\");\n    printf(\"EXPECTED\\n\");\n    for(int n=0; n&lt;N; n++)\n    {\n        printf(\"%.2f \", t[n][0]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>But when I print out the trained output, It doesn't get close to the expected data but rather gets stuck in a particular value.\n<a href=\"https://i.stack.imgur.com/R628H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R628H.png\" alt=\"enter image description here\"></a></p>\n\n<p>I saw many others had been through this kind of problem, and their solution was giving random non zero values to the initial weight or changing the learning rate or number of iterations. I've done this numerous times but It doesn't seem to match my problem. I would be very thankful if someone could tell me what I am doing wrong right now.</p>\n"}, {"tags": ["python", "c", "arrays", "numpy", "c-api"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560269861, "post_id": 56547130, "comment_id": 99677647, "body": "I haven&#39;t tried to understand your C structure, but can comment on the <code>dtype</code>.  One record of the array will have 30 floats.  10 are accessed as &#39;position_x&#39;, next 10 as &#39;y&#39; etc.  x,y,z values within a record are not interleaved."}, {"owner": {"reputation": 21, "user_id": 3831259, "user_type": "registered", "profile_image": "https://graph.facebook.com/1310802988/picture?type=large", "display_name": "Pyramid", "link": "https://stackoverflow.com/users/3831259/pyramid"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560270232, "post_id": 56547130, "comment_id": 99677831, "body": "Hey @hpaulj, thanks for the reply. What you mention is the behavior I expect. I want <code>position_x</code> to be an array of 10 (just an example) floats together in memory, then <code>position_y</code> the next 10, etc. The problem is, the <code>[(s, O), ...]</code> part is probably not right, as the &quot;O&quot; from PyObject does not seem to translate to an array of floats."}], "owner": {"reputation": 21, "user_id": 3831259, "user_type": "registered", "profile_image": "https://graph.facebook.com/1310802988/picture?type=large", "display_name": "Pyramid", "link": "https://stackoverflow.com/users/3831259/pyramid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560267120, "creation_date": 1560267120, "question_id": 56547130, "link": "https://stackoverflow.com/questions/56547130/casting-a-numpy-structured-array-to-a-c-array-of-structs", "title": "Casting a Numpy Structured Array to a C-array of structs", "body": "<p>I'm trying to pass and access a Numpy Structured Array created in Python from the C part of an application. The usage I want to make of such array is to create the array from the Python side, use it as I will (still from Python) and then for heavy-computation phases pass the array to a C module (no copies, using pointers) so that data can be accessed and modified in the C side.</p>\n\n<p>From the Python-side, I'm creating a Numpy structured array with a custom <strong>dtype</strong> such as the following, and passing it to a function located in a simple C extension:  </p>\n\n<p><strong>Python</strong></p>\n\n<pre><code>import numpy\nimport cmodule\n\nblocksize=10\nnumblocks=5\n\nparticle_struct_dtype = numpy.dtype([\n    ('position_x', 'f4', (blocksize,)),\n    ('position_y', 'f4', (blocksize,)),\n    ('position_z', 'f4', (blocksize,))\n])\n\nparticles = numpy.empty(numblocks, dtype=particle_struct_dtype)\n\ncmodule.compute(particles, blocksize, numblocks) \n</code></pre>\n\n<p>As shown, I'm creating an array of key-values, where each key represents the \"field\" of a C struct, and each value of such field is an <strong>array</strong> of floats.\nThen, in the C side, I try to obtain the array by:<br>\n- First using the <code>PyArg_ParseTuple</code> function to retreive a reference to the array<br>\n- Then using a dummy PyObject created by <code>Py_BuildValue</code> to obtain a representation of the dtype of the array (the structure's type), to later cast it with <code>PyArray_AsCArray</code>  </p>\n\n<p><strong>C</strong></p>\n\n<pre><code>static PyObject *compute(PyObject *self, PyObject *args)\n{\n    PyArrayObject *particles;\n    int numblocks, blocksize;\n\n    // Parse arguments\n    if (!PyArg_ParseTuple(args, \"O!ii\", &amp;PyArray_Type, &amp;particles, &amp;blocksize, &amp;numblocks)) {\n        Py_RETURN_NONE;\n    }\n    PyArray_Descr* arrayDescr;\n    PyObject* dummy;\n\n    dummy = Py_BuildValue(\"[(s, O), (s, O), (s, O)]\", \"position_x\", (blocksize), \"position_y\", (blocksize), \"position_z\", (blocksize));\n    PyArray_DescrConverter(dummy, &amp;arrayDescr);\n\n    struct particles_t *castedParticles;\n    npy_intp dims[1];\n    dims[0] = blocksize;\n    PyArray_AsCArray((PyObject **)&amp;particles, (struct particles_t**)&amp;castedParticles, dims, 1, arrayDescr);\n    ...\n}\n</code></pre>\n\n<p>Nonetheless, I keep getting SEGFAULT errors when accessing the data. Digging into the errors, I found that the data is not casted as I thought it would be (the conversion is not properly done).<br>\nI have tried to simplify the example by passing an array of simple tuples instead of an array of tuples with more arrays inside them:</p>\n\n<pre><code>dummy = Py_BuildValue(\"[(s, s), (s, s), (s, s)]\", \"position_x\", \"f4\", \"position_y\", \"f4\", \"position_z\", \"f4\");\nPyArray_DescrConverter(dummy, &amp;arrayDescr);\n\nstruct simple_particles_t *castedParticles;\nnpy_intp dims[1];\ndims[0] = blocksize;\nPyArray_AsCArray((PyObject **)&amp;particles, (struct simple_particles_t**)&amp;castedParticles, dims, 1, arrayDescr);\n</code></pre>\n\n<p>And this seems to work, I obtain the array of simplified structures, each only holding 3 floats (one per field) instead of 3 arrays of floats.</p>\n\n<p>My doubts are:<br>\n- Am I missing something? Is it even possible to cast the structured numpy array, where each field has an array of floats, to a C array of structures, so that each Python-field is mapped to the C structure's field? As an example, accessing <code>particles[0].position_x[0]</code> from C would be like accessing <code>particles[0]['position_x'][0]</code> from the Python side.<br>\n- Is this going to create any copies? I am trying to access and modify the memory that is allocated by Python from C.  </p>\n"}, {"tags": ["c", "shell", "unix", "calendar"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1560267678, "post_id": 56547068, "comment_id": 99676422, "body": "Why do you need all those <code>floor</code> calls in <code>easter</code> when all the variables and constants are integers anyway?"}, {"owner": {"reputation": 15, "user_id": 7653602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95488d7665861552b776f627715c7cda?s=128&d=identicon&r=PG&f=1", "display_name": "ronanvanderveken", "link": "https://stackoverflow.com/users/7653602/ronanvanderveken"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1560271739, "post_id": 56547068, "comment_id": 99678556, "body": "That was just a quick C example. Thus not 100% ok (it works though)."}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 2, "last_activity_date": 1560275553, "creation_date": 1560275553, "answer_id": 56549266, "question_id": 56547068, "link": "https://stackoverflow.com/questions/56547068/calculating-events-in-time-with-respect-to-easter/56549266#56549266", "title": "Calculating events in time, with respect to easter", "body": "<p>Just write a function that calls <code>ncal -e</code></p>\n\n<pre><code>easter() {\n    local year=${1:-$(date \"+%Y\")}   # use this year if no arg provided\n    local easter=$(ncal -e \"$year\")  # month day year\n    date -d \"$easter\" \"+%F\"          # YYYY-mm-dd\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>$ easter\n2019-04-21\n$ easter 2018\n2018-04-01\n$ easter 2020\n2020-04-12\n$ date -d \"$(easter) - 1 week\" \"+%F\"\n2019-04-14\n$ date -d \"$(easter) + 1 week\" \"+%F\"\n2019-04-28\n</code></pre>\n\n<p>Use a different date format if you choose.</p>\n"}], "owner": {"reputation": 15, "user_id": 7653602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95488d7665861552b776f627715c7cda?s=128&d=identicon&r=PG&f=1", "display_name": "ronanvanderveken", "link": "https://stackoverflow.com/users/7653602/ronanvanderveken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56549266, "answer_count": 1, "score": 0, "last_activity_date": 1560275553, "creation_date": 1560266942, "last_edit_date": 1560271681, "question_id": 56547068, "link": "https://stackoverflow.com/questions/56547068/calculating-events-in-time-with-respect-to-easter", "title": "Calculating events in time, with respect to easter", "body": "<p>Let's say John his anniversary is exactly on easter. Johnny his anniversary is always the week after easter. And Ellen her anniversary is a week before pentecost (42 days after easter). </p>\n\n<p>How can I with a shell script, calculate the day (number and day-name) and month of their birthdays. For all future years.</p>\n\n<p>I know, that I can calculate the day of easter, with <code>ncal -e \"year\"</code>.\nIn C is what I did:</p>\n\n<pre><code>typedef struct {\n  int day;\n  int month;\n  int year;\n} Date;\n</code></pre>\n\n<p>I then calculate the day of easter (with Gauss's algorithm). And return the day, month, year to a pentecost function, that takes the day+49 and decrements the day, and increments the month. </p>\n\n<p>Thus:</p>\n\n<ol>\n<li>In the shell, how can I convert the <code>ncal -e</code>output from \"January\n1 2019\" to \"1 1 2019\" with only the shell. </li>\n<li>If i have this how\nwould you start making the rules, for the story above. (For the\nbirthdays)</li>\n</ol>\n\n<pre class=\"lang-c prettyprint-override\"><code>Date easter(int Y)\n{\n    Date date;\n    int C = floor(Y/100);\n    int N = Y - 19*floor(Y/19);\n    int K = floor((C - 17)/25);\n    int I = C - floor(C/4) - floor((C - K)/3) + 19*N + 15;\n    I = I - 30*floor((I/30));\n    I = I - floor(I/28)*(1 - floor(I/28)*floor(29/(I + 1))*floor((21 - N)/11));\n    int J = Y + floor(Y/4) + I + 2 - C + floor(C/4);\n    J = J - 7*floor(J/7);\n    int L = I - J;\n    int M = 3 + floor((L + 40)/44);\n    int D = L + 28 - 31*floor(M/4);\n\n    date.d = D;\n    date.m = M;\n    date.y = Y;\n    return date;\n}\n</code></pre>\n"}, {"tags": ["c", "logic", "logical-operators"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560266754, "post_id": 56546888, "comment_id": 99675810, "body": "Prompted? How? You have only one prompt."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1560266844, "post_id": 56546888, "comment_id": 99675874, "body": "Start by making those functions either use boolean logic (that is <code>&amp;&amp;</code>, <code>||</code>, <code>!</code> etc) or bitwise logic, instead of the unreadable arithmetic. Your current code has various bugs. for example <code>!=</code> is not the same as XOR. <code>1!=2</code> gives 1, but <code>1 ^ 2</code> gives 3."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1560266854, "post_id": 56546888, "comment_id": 99675880, "body": "This code shouldn&#39;t be prompting you at all since you don&#39;t actually call <code>getinput</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560266900, "post_id": 56546888, "comment_id": 99675912, "body": "Reading warnings should help"}, {"owner": {"reputation": 3, "user_id": 11483154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yrfdz98tYCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-5OIAo0LY4qRjeqlrC65G-hC0EA/mo/photo.jpg?sz=128", "display_name": "Tilemachos Oikonomidis", "link": "https://stackoverflow.com/users/11483154/tilemachos-oikonomidis"}, "edited": false, "score": 0, "creation_date": 1560266935, "post_id": 56546888, "comment_id": 99675941, "body": "By prompted I mean I can input 8 times instead of 6. The inputs are only 0 and 1, so there is no problem in the actual function of the gate functions."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1560267013, "post_id": 56546888, "comment_id": 99675980, "body": "@dbush yes it does, but not correctly. It&#39;s in the <code>eval</code> And there lays a huge problem: <code>Callback</code> doesn&#39;t match the argument list of <code>getinput</code> whatsoever. A big phat warning should  be shown on those <code>creategate(getinput)</code> calls, that apparently the OP is completely ignoring."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1560267021, "post_id": 56546888, "comment_id": 99675988, "body": "<a href=\"https://i.imgur.com/ZL3OkGr.jpg\" rel=\"nofollow noreferrer\">i.imgur.com/ZL3OkGr.jpg</a>"}, {"owner": {"reputation": 3, "user_id": 11483154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yrfdz98tYCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-5OIAo0LY4qRjeqlrC65G-hC0EA/mo/photo.jpg?sz=128", "display_name": "Tilemachos Oikonomidis", "link": "https://stackoverflow.com/users/11483154/tilemachos-oikonomidis"}, "edited": false, "score": 0, "creation_date": 1560267138, "post_id": 56546888, "comment_id": 99676068, "body": "There are no warnings. I have enabled them all and they are being treated as errors."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1560267139, "post_id": 56546888, "comment_id": 99676070, "body": "But <code>getinput</code> is actually called 8 times. Put this as first line of <code>getinput</code> : <code>static int nbcalled;  printf(&quot;Getinput: %d\\n&quot;, nbcalled++);</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560267337, "post_id": 56546888, "comment_id": 99676201, "body": "Why are you passing <code>getinput</code> as a callback to your <code>creategate</code> anyway?"}, {"owner": {"reputation": 3, "user_id": 11483154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yrfdz98tYCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-5OIAo0LY4qRjeqlrC65G-hC0EA/mo/photo.jpg?sz=128", "display_name": "Tilemachos Oikonomidis", "link": "https://stackoverflow.com/users/11483154/tilemachos-oikonomidis"}, "edited": false, "score": 0, "creation_date": 1560267352, "post_id": 56546888, "comment_id": 99676213, "body": "It is indeed called 8 times. And that&#39;s the problem. I can&#39;t see why it is called 8 times."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560267387, "post_id": 56546888, "comment_id": 99676239, "body": "Also why are you passing <code>Gate</code> pointers as callbacks?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1560267398, "post_id": 56546888, "comment_id": 99676248, "body": "What arguments does a <code>Callback</code> take ? Now, what arguments does <code>getinput</code> take? Do you not see a problem ? Was that your intent ? <code>getinput</code> does take arbitrary arguments (e.g it&#39;s not <code>getinput(void)</code>, it&#39;s <code>getinput()</code>, so I suppose it&#39;s feasible it <i>could</i> work, but was that <i>really</i> your intent? If you <i>really</i> want to see the call chains, fire this in a debugger, set a breakpoint on <code>getinput</code> and examine the call stack on each trip. There are only eight of them. It&#39;s not going to take long."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1560268602, "post_id": 56546888, "comment_id": 99676971, "body": "<code>getinput()</code> It is called 8 times because gate 2 is evaluated twice - once for gate 4 input 2 and once for gate 5 input 1."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1560278425, "creation_date": 1560278425, "answer_id": 56549927, "question_id": 56546888, "link": "https://stackoverflow.com/questions/56546888/why-am-i-prompted-for-input-more-times-than-i-am-expecting/56549927#56549927", "title": "Why am I prompted for input more times than I am expecting?", "body": "<p>Every time you try to evaluate one of your \"input\" terms, you ask for input from the user.  Since <code>gate2_ptr</code> is referenced by two gates, its value is evaluated twice, and each of its inputs is evaluated twice.  This results in the two extra input prompts when ou run the program.</p>\n\n<p>You should ask for the input values when the inputs are created, not when they are evaluated.</p>\n\n<p>Unrelated, but some compilers will issue a warning for <code>creategate(getinput)</code> because <code>creategate</code> expects a pointer to a function that takes two <code>int</code> parameters, while <code>getinput</code> expects none.  In this instance, this is harmless because the extra parameters will be ignored by <code>getinput</code> and removed by the caller, but it does represent a potentially flawed design.  (If <code>getinput</code> would expect more parameters - like 3 <code>int</code>s - you'd get a different set of warnings and introduce more serious problems.)</p>\n"}], "owner": {"reputation": 3, "user_id": 11483154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yrfdz98tYCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-5OIAo0LY4qRjeqlrC65G-hC0EA/mo/photo.jpg?sz=128", "display_name": "Tilemachos Oikonomidis", "link": "https://stackoverflow.com/users/11483154/tilemachos-oikonomidis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560283866, "creation_date": 1560266266, "last_edit_date": 1560283866, "question_id": 56546888, "link": "https://stackoverflow.com/questions/56546888/why-am-i-prompted-for-input-more-times-than-i-am-expecting", "title": "Why am I prompted for input more times than I am expecting?", "body": "<p>I have to create a program that solves the following gate circuit. However, something goes wrong during program execution, because I am prompted to input eight times instead of six. Please, only provide solutions that involve changes in the main function, and not others.</p>\n\n<p>Here is a diagram of the circuit problem I have to solve:<br>\n<img src=\"https://i.stack.imgur.com/OpWyB.png\" alt=\"Circuit problem I have to solve\"></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef int (*CallBack)(int, int);\n\ntypedef struct gate {\n    CallBack f;  \n    struct gate * in1 ;  \n    struct gate * in2 ; \n} Gate;  \n\nint getinput() {  \n    int x;  \n    scanf(\"%d\", &amp;x);  \n    return x; \n} \n\nint myand (int a, int b) {  \n    return a * b; \n} \n\nint myor (int a, int b) {  \n    return a + b&gt;0;\n}\n\nint mynand (int a, int b) {  \n    return !(a * b); \n} \n\nint mynor (int a, int b) {  \n    return a + b&lt;=0;\n}\n\nint myxor (int a, int b) {\n    return a!=b;\n}   \n\n\nGate * creategate(CallBack f) {  \n    Gate * temp ;  \n    temp = malloc(sizeof (Gate));  \n    temp-&gt;f = f;  \n    temp-&gt;in1 = NULL;  \n    temp-&gt;in2 = NULL;    \n    return temp; \n} \n\nint eval(Gate *x) {  \n    int a, b;  \n    if (x-&gt;in1 != NULL)    \n        a = eval(x-&gt;in1);  \n    if (x-&gt;in2 != NULL)   \n        b = eval(x-&gt;in2);  \n    if (x-&gt;in1==NULL &amp;&amp; x-&gt;in2 == NULL)   \n        return (x-&gt;f)(0,0);  \n    else   \n        return (x-&gt;f)(a,b); \n} \n\nint main( ) {  \n    Gate * gate1_ptr, * gate2_ptr, * gate3_ptr, * gate4_ptr, * gate5_ptr, * gate6_ptr;\n    Gate * a_ptr, * b_ptr, * c_ptr, * d_ptr, * e_ptr, * f_ptr;    \n\n    gate1_ptr = creategate(mynor);  \n    gate2_ptr = creategate(myand);  \n    gate3_ptr = creategate(myor);\n    gate4_ptr = creategate(mynand);\n    gate5_ptr = creategate(myxor);\n    gate6_ptr = creategate(myor);\n\n    printf(\"Enter six inputs, split by enter:\\n\");\n\n    a_ptr = creategate(getinput);  \n    b_ptr = creategate(getinput);  \n    c_ptr = creategate(getinput);\n    d_ptr = creategate(getinput);\n    e_ptr = creategate(getinput);\n    f_ptr = creategate(getinput); \n\n    gate1_ptr-&gt;in1 = a_ptr;  \n    gate1_ptr-&gt;in2 = b_ptr;\n    gate2_ptr-&gt;in1 = c_ptr;  \n    gate2_ptr-&gt;in2 = d_ptr;\n    gate3_ptr-&gt;in1 = e_ptr;  \n    gate3_ptr-&gt;in2 = f_ptr;  \n\n    gate4_ptr-&gt;in1 = gate1_ptr;\n    gate4_ptr-&gt;in2 = gate2_ptr;\n    gate5_ptr-&gt;in1 = gate2_ptr;\n    gate5_ptr-&gt;in2 = gate3_ptr;  \n\n    gate6_ptr-&gt;in1 = gate4_ptr;\n    gate6_ptr-&gt;in2 = gate5_ptr;\n\n    printf(\"%d\", eval(gate6_ptr));    \n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1560302619, "post_id": 56546651, "comment_id": 99688293, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/194790/discussion-on-question-by-daros-fflush-on-a-file\">moved to chat</a>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1563196104, "post_id": 56546651, "comment_id": 100608584, "body": "@Daros: you can accept one of the answers by clicking on the grey checkmark below its score."}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1560266343, "post_id": 56546876, "comment_id": 99675550, "body": "If you have a file opened in update mode, and write to it, you have to use one of a number of functions including <code>fflush()</code> to be able to then read from it. See <a href=\"https://en.cppreference.com/w/c/io/fopen\" rel=\"nofollow noreferrer\">cppreference documentation</a>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1560266373, "post_id": 56546876, "comment_id": 99675568, "body": "This is flat out wrong. See my duplicate or cppreference, or another answer."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1560266630, "post_id": 56546876, "comment_id": 99675725, "body": "I&#39;m afraid your explanation is inadequate. <code>fflush()</code> is one of the ways to allow switching from writing to reading mode. <code>fseek(pFile, 0L, SEEK_CUR)</code> would have had the same effect. Furthermore, <code>fflush()</code> may not suffice for other processes to see the actual file contents, <code>fclose()</code> might be needed for some file systems and/or operating systems."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1560266639, "post_id": 56546876, "comment_id": 99675735, "body": "@SergeyA The first line of the accepted answer of your duplicate says <b>A single file stream has a single buffer.</b>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1560266687, "post_id": 56546876, "comment_id": 99675768, "body": "@Barmar that is true. But your conclusion (&quot;flushing isn&#39;t necessary in this case&quot;) is wrong."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1560266873, "post_id": 56546876, "comment_id": 99675890, "body": "I&#39;ve updated my answer to explain that using <code>fseek()</code> to go back to where you started writing will synchronize reading and writing as well."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1560266815, "last_edit_date": 1560266815, "creation_date": 1560266226, "answer_id": 56546876, "question_id": 56546651, "link": "https://stackoverflow.com/questions/56546651/fflush-on-a-file/56546876#56546876", "title": "Fflush on a file", "body": "<p><code>fflush()</code> normally isn't needed  when you're reading and writing the same <code>stdio</code> stream. <code>fputs()</code> and <code>fgets()</code> both access the same I/O buffer, so flushing isn't usually necessary in this case.</p>\n\n<p>There are some restrictions, though. Even though the same buffer is used, you have to do something to synchronize between writing and reading. This can be <code>fflush()</code>, but it will also synchronize if you use <code>fseek()</code>. And if you want to read what you just wrote, you have to use <code>fseek()</code> to move back to the place where you started writing; that will synchronize without the need for <code>fflush()</code>.</p>\n\n<p>But <code>fflush()</code> is really needed if some <em>other</em> process tries to read the file while this process is writing it. You need to call <code>fflush()</code> to force the data from your I/O buffer to the actual file, so the other process will see the changes.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1560266881, "post_id": 56546941, "comment_id": 99675894, "body": "<i>Here</i> being slightly east of Paris... I did not know you could localise SO this way: <a href=\"https://ru.stackoverflow.com/users/196880/sergeya\">ru.stackoverflow.com/users/196880/sergeya</a>"}, {"owner": {"reputation": 59, "user_id": 11592900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1914f724656d07e37ec9cd66326be96?s=128&d=identicon&r=PG&f=1", "display_name": "Daros", "link": "https://stackoverflow.com/users/11592900/daros"}, "edited": false, "score": 0, "creation_date": 1560268130, "post_id": 56546941, "comment_id": 99676689, "body": "@chqrlie Thx for detailed answer:-) but can You explain me  <code>Note however that if the file contained 4 bytes or less, fgets(mybuffer, 80, pFile) fails</code>?"}, {"owner": {"reputation": 59, "user_id": 11592900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1914f724656d07e37ec9cd66326be96?s=128&d=identicon&r=PG&f=1", "display_name": "Daros", "link": "https://stackoverflow.com/users/11592900/daros"}, "edited": false, "score": 0, "creation_date": 1560269463, "post_id": 56546941, "comment_id": 99677431, "body": "@chqrlie Can You answer my last question please?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1560275100, "post_id": 56546941, "comment_id": 99680108, "body": "@chqrlie it is a separate profile on ru.stackoverflow.com Actually, I am significantly <b>west</b> of Paris nowadays :)"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1560325344, "post_id": 56546941, "comment_id": 99694284, "body": "@chqrlie Where did you find the C18 standard?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1560355506, "post_id": 56546941, "comment_id": 99711975, "body": "@Broman: C18 is the latest revision of the C Standard: <a href=\"https://en.wikipedia.org/wiki/C18_(C_standard_revision)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C18_(C_standard_revision)</a>  - The latest draft available free of charge, N2176, is here: <a href=\"https://web.archive.org/web/20181230041359if_/http://www.open-std.org/jtc1/sc22/wg14/www/abq/c17_updated_proposed_fdis.pdf\" rel=\"nofollow noreferrer\">web.archive.org/web/20181230041359if_/http://www.open-std.or&zwnj;&#8203;g/&hellip;</a>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1560356491, "post_id": 56546941, "comment_id": 99712467, "body": "@chqrlie Ah, ok. Thanks. I usually go to <a href=\"https://port70.net/~nsz/c/\" rel=\"nofollow noreferrer\">port70.net/~nsz/c</a> but they only have up to C11"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1560369345, "post_id": 56546941, "comment_id": 99718116, "body": "@Broman: the pdf files are on the working group are now password protected! Such  a backwards move against common sense when C++, java, javascript and all recent languages are completely open! What is going on?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 5, "last_activity_date": 1560267142, "last_edit_date": 1560267142, "creation_date": 1560266478, "answer_id": 56546941, "question_id": 56546651, "link": "https://stackoverflow.com/questions/56546651/fflush-on-a-file/56546941#56546941", "title": "Fflush on a file", "body": "<p>From the C18 Standard:</p>\n\n<blockquote>\n  <p><strong>7.21.5.3 the <code>fopen</code> function</strong></p>\n  \n  <p><strong>Synopsis</strong></p>\n\n<pre><code>#nclude &lt;stdio.h&gt;\nFILE *fopen(const char * restrict filename,\n            const char * restrict mode);          \n</code></pre>\n  \n  <p><strong>Description</strong></p>\n  \n  <p>...</p>\n  \n  <p>7 When a file is opened with update mode (<code>+</code> as the second or third character in the above list of <code>mode</code> argument values), both input and output may be performed on the associated stream. However, output shall not be directly followed by input without an intervening call to the <code>fflush</code> function or to a file positioning function (<code>fseek</code>, <code>fsetpos</code>, or <code>rewind</code>), and input shall not be directly followed by output without an intervening call to a file positioning function, unless the input operation encounters end-of-file. Opening (or creating) a text file with update mode may instead open (or create) a binary stream in some implementations.</p>\n</blockquote>\n\n<p>Here are the steps performed by the posted code</p>\n\n<ul>\n<li><p>the file <strong>example.txt</strong> is opened in read and update mode.</p></li>\n<li><p>4 bytes (<code>text</code>) are written to the file, overwriting the first 4 bytes of the file.</p></li>\n<li><p>the stream buffer is flushed with <code>fflush()</code>, allowing a mode change from writing to reading. This is what the comment refers to: <code>// flushing or repositioning required</code></p></li>\n<li><p>the program switches to read mode without a position change and tries to read up to 79 bytes from position 4 in the file, stopping at a newline. If no bytes can be read, <code>NULL</code> is returned.</p></li>\n<li><p>this line is output to standard output. Note however that if the file contained 4 bytes or less, <code>fgets(mybuffer, 80, pFile)</code> fails and returns <code>NULL</code>, leaving the array <code>mybuffer</code> in an undetermined state, causing <code>puts(mybuffer);</code> to have undefined behavior.</p></li>\n<li><p>the file is closed</p></li>\n</ul>\n"}], "owner": {"reputation": 59, "user_id": 11592900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1914f724656d07e37ec9cd66326be96?s=128&d=identicon&r=PG&f=1", "display_name": "Daros", "link": "https://stackoverflow.com/users/11592900/daros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1560274354, "creation_date": 1560265425, "last_edit_date": 1560274354, "question_id": 56546651, "link": "https://stackoverflow.com/questions/56546651/fflush-on-a-file", "title": "Fflush on a file", "body": "<p>Having simple code from a <a href=\"http://www.cplusplus.com/reference/cstdio/fflush/\" rel=\"nofollow noreferrer\">cplusplus.com site</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar mybuffer[80];\n\nint main() {\n    FILE *pFile;\n    pFile = fopen(\"example.txt\",\"r+\");\n    if (pFile == NULL)\n        perror(\"Error opening file\");\n    else {\n        fputs(\"test\",pFile);\n        fflush(pFile);    // flushing or repositioning required\n        fgets(mybuffer, 80, pFile);\n        puts(mybuffer);\n        fclose(pFile);\n        return 0;\n    }\n}\n</code></pre>\n\n<p>I'm wondering what <code>fflush</code> really does in case of <code>file</code> as its argument like in the above code because the result is the same with and without the <code>fflush(pFile)</code> line  - en empty buffer (nothing on the output).</p>\n\n<p>PS: I'm running the code on Linux gcc (6.3.0)</p>\n"}, {"tags": ["c", "node.js", "struct"], "comments": [{"owner": {"reputation": 61, "user_id": 6506370, "user_type": "registered", "profile_image": "https://graph.facebook.com/1150471885017033/picture?type=large", "display_name": "Maxim Irrigad", "link": "https://stackoverflow.com/users/6506370/maxim-irrigad"}, "edited": false, "score": 1, "creation_date": 1560267392, "post_id": 56546645, "comment_id": 99676242, "body": "There are <a href=\"https://www.npmjs.com/package/c-struct\" rel=\"nofollow noreferrer\">libraries</a> that do this, but please don&#39;t. This is not a good idea for a number of reason, not last of all the fact that by doing this it you make your dataset not portable, not only to a different architecture (of course, hi there <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianess</a> for example) but also to different compilers. Structure packing and padding is complicated, I advise you to use a different method for saving your data."}, {"owner": {"reputation": 43, "user_id": 5098923, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207149426718732/picture?type=large", "display_name": "Gianluca B.", "link": "https://stackoverflow.com/users/5098923/gianluca-b"}, "reply_to_user": {"reputation": 61, "user_id": 6506370, "user_type": "registered", "profile_image": "https://graph.facebook.com/1150471885017033/picture?type=large", "display_name": "Maxim Irrigad", "link": "https://stackoverflow.com/users/6506370/maxim-irrigad"}, "edited": false, "score": 0, "creation_date": 1560346673, "post_id": 56546645, "comment_id": 99706624, "body": "I&#39;m not the owner of the c application. That file is generated by a legacy c application and I need to parse that in node.js. BTW, I used the library you suggested, and it worked. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 5098923, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207149426718732/picture?type=large", "display_name": "Gianluca B.", "link": "https://stackoverflow.com/users/5098923/gianluca-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1561032672, "last_edit_date": 1561032672, "creation_date": 1560346327, "answer_id": 56563484, "question_id": 56546645, "link": "https://stackoverflow.com/questions/56546645/how-to-read-a-file-containing-c-struct-in-nodejs/56563484#56563484", "title": "How to read a file containing c-struct in nodeJS?", "body": "<p>I solved in this way, using <a href=\"https://www.npmjs.com/package/c-struct\" rel=\"nofollow noreferrer\">c-struct</a> module:</p>\n\n<pre><code>var fileData = Buffer.from(binaryFileData, 'binary');\nvar _ = require('c-struct');\nvar inputParam = new _.Schema({\n  inputFlag: _.type.uint16,  // ushort\n  inputName: _.type.string() // string is 0-terminated\n});\n// register to cache\n_.register('InputParam', inputParam);\n\nvar out = [];\nfor (var i = 0; i &lt; fileData.length; i+=22) {\n  var partial = fileData.slice(i, i+22);\n  out.push(_.unpackSync('InputParam', partial));\n}\nconsole.log(out);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5098923, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207149426718732/picture?type=large", "display_name": "Gianluca B.", "link": "https://stackoverflow.com/users/5098923/gianluca-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 2, "accepted_answer_id": 56563484, "answer_count": 1, "score": 2, "last_activity_date": 1561032672, "creation_date": 1560265394, "question_id": 56546645, "link": "https://stackoverflow.com/questions/56546645/how-to-read-a-file-containing-c-struct-in-nodejs", "title": "How to read a file containing c-struct in nodeJS?", "body": "<p>In NodeJS, I have to parse a binary file written in C, composed of binary c-struct.</p>\n\n<p>This is the c-code I have to convert in NodeJS.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>\n  typedef struct INPUTPARM {                                     \n    ushort inputFlag;                                    \n    char inputName[20];\n  }\n\n  // ...\n  FILE *fInp = NULL; \n  struct INPUTPARM inputParm;\n\n  fInp = fopen(filePath, \"rb\");\n\n  // in a loop, it reads one record every time\n\n  fread ((void *)&amp;inputParm, 1, sizeof(struct INPUTPARM), fInp);\n\n</code></pre>\n\n<p>How to code the same in NodeJS?</p>\n"}, {"tags": ["c", "linux", "shared-memory", "mmap", "huge-pages"], "answers": [{"tags": [], "owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "is_accepted": true, "score": 1, "last_activity_date": 1560442245, "creation_date": 1560442245, "answer_id": 56584610, "question_id": 56546543, "link": "https://stackoverflow.com/questions/56546543/proper-way-to-release-a-hugepage/56584610#56584610", "title": "Proper Way to Release a Hugepage?", "body": "<p>To delete files you need to unmap all mappings, close all file descriptors, and unlink all names.</p>\n\n<p>You need to call <code>unlink()</code> on the file.</p>\n"}], "owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 56584610, "answer_count": 1, "score": 0, "last_activity_date": 1560442245, "creation_date": 1560265074, "question_id": 56546543, "link": "https://stackoverflow.com/questions/56546543/proper-way-to-release-a-hugepage", "title": "Proper Way to Release a Hugepage?", "body": "<p>Let's say I mount hugepages at <code>/mnt/hugepages</code>; and then two applications <code>open()</code> and then <code>mmap()</code> to the same hugepage.</p>\n\n<p>After one crashes, another <code>close()</code> and then <code>munmap()</code>, I noticed the hugepage is still allocated inside <code>/mnt/hugepages</code>, <code>numastat -vm</code> also shows that a hugepage is occupied.  Then, I manually delete that file (/hugepage), <code>numastat -vm</code> still shows a hugepage is occupied.  Then, I killed the remaining application.  Finally, <code>numastat -vm</code> shows the hugepage is no longer occupied.</p>\n\n<p>Now my question is what is the proper way to release the hugepage in this case without killing all the applications previously mmap-ed the page?</p>\n\n<p>I did read this <a href=\"https://stackoverflow.com/questions/20366181/how-to-release-hugepages-from-the-crashed-application\">post</a>.</p>\n\n<p>But my post is different that I don't want to kill all the applications but release the hugepage asap and I don't want to unmount.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1560263901, "post_id": 56546110, "comment_id": 99673979, "body": "<a href=\"https://www.factmonster.com/math-science/mathematics/rounding-numbers-rules-examples-for-fractions-sums\" rel=\"nofollow noreferrer\">factmonster.com/math-science/mathematics/&hellip;</a>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1560264145, "post_id": 56546110, "comment_id": 99674130, "body": "In what way is that rounding unexpected? It&#39;s exactly how I would round it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1560264146, "post_id": 56546110, "comment_id": 99674132, "body": "Good luck with recoding <code>printf</code>, this is not something for beginners. Try easier things first"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1560264576, "post_id": 56546110, "comment_id": 99674441, "body": "When should you round ? When he format string demands it. How should you round ? To the nearest value with the requested precision."}, {"owner": {"reputation": 31, "user_id": 11631620, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8uz6l_0_as/AAAAAAAAAAI/AAAAAAAABAs/KQAGfHXSkrg/photo.jpg?sz=128", "display_name": "Kchahid", "link": "https://stackoverflow.com/users/11631620/kchahid"}, "edited": false, "score": 0, "creation_date": 1560265788, "post_id": 56546110, "comment_id": 99675201, "body": "if you see in the example we have as result 0.00010 and our float before round is 0.00009 we can say that 9 is rounded to 10 we write 0 and keep 1 to add it to 0 which gives us the 0.00010 but this rule is not general"}, {"owner": {"reputation": 31, "user_id": 11631620, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8uz6l_0_as/AAAAAAAAAAI/AAAAAAAABAs/KQAGfHXSkrg/photo.jpg?sz=128", "display_name": "Kchahid", "link": "https://stackoverflow.com/users/11631620/kchahid"}, "edited": false, "score": 0, "creation_date": 1560266091, "post_id": 56546110, "comment_id": 99675384, "body": "if in this exemple =&gt; printf (&quot;%. 7f&quot;, 0.000099); we have as a result 0.0000990 why in this case we did not round the 99 we can see that our float number is 0.000099 we can conclude that it is because we rounded only the digits &gt;&gt; precision of 6 but also it is not a general rule for all the numbers"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1560270321, "post_id": 56546110, "comment_id": 99677876, "body": "When you wrote &quot;our float before round is 0.00009&quot;, the value being rounded is not 0.00009, it is 0.000098999...something."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1560271170, "post_id": 56546110, "comment_id": 99678294, "body": "You need a better grasp of the concept of rounding. If you round $9.89 to the nearest dollar, you get $10, not $9."}, {"owner": {"reputation": 31, "user_id": 11631620, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8uz6l_0_as/AAAAAAAAAAI/AAAAAAAABAs/KQAGfHXSkrg/photo.jpg?sz=128", "display_name": "Kchahid", "link": "https://stackoverflow.com/users/11631620/kchahid"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1560271180, "post_id": 56546110, "comment_id": 99678299, "body": "@IanAbbott  yes you&#39;re right but it&#39;s only to be a little clearer"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11631620, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8uz6l_0_as/AAAAAAAAAAI/AAAAAAAABAs/KQAGfHXSkrg/photo.jpg?sz=128", "display_name": "Kchahid", "link": "https://stackoverflow.com/users/11631620/kchahid"}, "edited": false, "score": 0, "creation_date": 1560268744, "post_id": 56547193, "comment_id": 99677062, "body": "thank you for your answer it&#39;s my fault it&#39;s me who did double instead of float but it&#39;s not a problem in this case because here I want to know how printf manages the rounding for float or double or long double"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1560268853, "post_id": 56547193, "comment_id": 99677116, "body": "No upcasting involved: The constants <i>are</i> <code>double</code>-constants."}], "tags": [], "owner": {"reputation": 3305, "user_id": 1428695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a843c704cdb7e32a93769cddfed4747?s=128&d=identicon&r=PG", "display_name": "yhyrcanus", "link": "https://stackoverflow.com/users/1428695/yhyrcanus"}, "is_accepted": false, "score": 3, "last_activity_date": 1560267333, "creation_date": 1560267333, "answer_id": 56547193, "question_id": 56546110, "link": "https://stackoverflow.com/questions/56546110/how-does-printf-in-c-round-floating-point-numbers/56547193#56547193", "title": "How does printf in C round floating-point numbers?", "body": "<p>Not sure if this is exactly how <code>printf</code> does it, but this seems to work for your example:</p>\n\n<blockquote>\n  <p>Add 5/(10^(number of decimal points+1). Then truncate.</p>\n</blockquote>\n\n<p>Your interpretation is flawed: Your C compiler is upcasting your constants to doubles.  So it's not using <code>0.0000989999....</code> It's using the more accurate double equivalent. </p>\n\n<p>Try this:</p>\n\n<pre><code> printf(\"|%.f| |%.1f| |%.2f| |%.5f| |%.12f\", (float)0.000099, (float)0.000099, (float)0.000099, (float)0.000099, (float)0.000099);\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>|0| |0.0| |0.00| |0.00010| |0.000098999997</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 11631620, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8uz6l_0_as/AAAAAAAAAAI/AAAAAAAABAs/KQAGfHXSkrg/photo.jpg?sz=128", "display_name": "Kchahid", "link": "https://stackoverflow.com/users/11631620/kchahid"}, "edited": false, "score": 0, "creation_date": 1560269077, "post_id": 56547602, "comment_id": 99677226, "body": "thank you for your answer I already recode printf and recode successfully float, double and long double thanks to the method ieee-754 but here I still have not found a general rule for the rounding that I should to implement in my code"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1560268638, "creation_date": 1560268638, "answer_id": 56547602, "question_id": 56546110, "link": "https://stackoverflow.com/questions/56546110/how-does-printf-in-c-round-floating-point-numbers/56547602#56547602", "title": "How does printf in C round floating-point numbers?", "body": "<p>The problem you are trying to address is actually <strong>very difficult</strong> to solve correctly.</p>\n\n<p>Many existing <code>printf</code> implementations use <a href=\"http://www.netlib.org/fp/dtoa.c\" rel=\"nofollow noreferrer\">conversion code <strong>dtoa.c</strong> written by <em>David M. Gay</em></a> almost 30 years ago.</p>\n\n<p>You can learn more about this from this question, which is not an exact duplicate:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3173056/why-does-dtoa-c-contain-so-much-code\">Why does &quot;dtoa.c&quot; contain so much code?</a></li>\n</ul>\n\n<p>And these sites:</p>\n\n<ul>\n<li>Rick Regan's blog article <a href=\"https://www.exploringbinary.com/quick-and-dirty-floating-point-to-decimal-conversion/\" rel=\"nofollow noreferrer\">https://www.exploringbinary.com/quick-and-dirty-floating-point-to-decimal-conversion/</a></li>\n<li>Clinger's <a href=\"http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.45.4152\" rel=\"nofollow noreferrer\">How to Read Floating Point Numbers Accurately</a></li>\n<li>David M. Gay's paper, <a href=\"https://ampl.com/REFS/rounding.ps.gz\" rel=\"nofollow noreferrer\">Correctly Rounded Binary-Decimal and Decimal-Binary Conversions</a>.</li>\n<li>David Goldberg's <a href=\"http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.22.6768\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating Point Arithmetic</a>.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 31, "user_id": 11631620, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8uz6l_0_as/AAAAAAAAAAI/AAAAAAAABAs/KQAGfHXSkrg/photo.jpg?sz=128", "display_name": "Kchahid", "link": "https://stackoverflow.com/users/11631620/kchahid"}, "edited": false, "score": 0, "creation_date": 1560271122, "post_id": 56547769, "comment_id": 99678270, "body": "@kamal: hope it helped."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1560269609, "last_edit_date": 1560269609, "creation_date": 1560269185, "answer_id": 56547769, "question_id": 56546110, "link": "https://stackoverflow.com/questions/56546110/how-does-printf-in-c-round-floating-point-numbers/56547769#56547769", "title": "How does printf in C round floating-point numbers?", "body": "<p>The C standard provides the following in &sect;7.21.6.1p13:</p>\n\n<blockquote>\n  <p>For <code>e, E, f, F, g, and G</code> conversions, if the number of significant decimal digits is at most <code>DECIMAL_DIG</code>, then the result should be correctly rounded. If the number of significant decimal digits is more than <code>DECIMAL_DIG</code> but the source value is exactly representable with <code>DECIMAL_DIG</code> digits, then the result should be an exact representation with trailing zeros. Otherwise, the source value is bounded by two adjacent decimal strings <code>L&lt;U</code>, both having <code>DECIMAL_DIG</code> significant digits; the value of the resultant decimal string <code>D</code> should satisfy <code>L \u2264 D \u2264 U</code>, with the extra stipulation that the error should have  a  correct sign for the current rounding direction.</p>\n</blockquote>\n\n<p>However, that paragraph is part of a subsection headed \"Recommended Practice\". (If Annex F is in effect, then the recommended practice is required. See F.5.)</p>\n\n<p>\"Correctly rounded\" is defined by the current rounding direction. See <code>fsetround</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 11631620, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8uz6l_0_as/AAAAAAAAAAI/AAAAAAAABAs/KQAGfHXSkrg/photo.jpg?sz=128", "display_name": "Kchahid", "link": "https://stackoverflow.com/users/11631620/kchahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1547, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1560269609, "creation_date": 1560263584, "last_edit_date": 1560267444, "question_id": 56546110, "link": "https://stackoverflow.com/questions/56546110/how-does-printf-in-c-round-floating-point-numbers", "title": "How does printf in C round floating-point numbers?", "body": "<p>I'm trying to implement <code>printf</code> and I want to know how <code>printf</code> rounds floating-point numbers because I cannot find a general rule</p>\n\n<p>If for example input => <code>printf(\"|%.f| |%.1f| |%.2f| |%.5f| |%.12f\", 0.000099, 0.000099, 0.000099, 0.000099, 0.000099);</code></p>\n\n<p>Here is the output => <code>|0| |0.0| |0.00| |0.00010| |0.000099000000</code></p>\n\n<p>I use the method from IEEE-754 so our floating-point number in memory is: <code>0.000098999999999999994037755413067714016506215557456016540527343750</code></p>\n\n<p>My question is when and how should I round my floating-point number?</p>\n\n<p>I am looking for a general rule that I must follow for all floating-point numbers.</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1560263553, "post_id": 56546030, "comment_id": 99673716, "body": "How about this: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.1.0/cpp/Preprocessor-Output.html#Preprocessor-Output\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc-9.1.0/cpp/&hellip;</a> ?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1560264092, "post_id": 56546030, "comment_id": 99674098, "body": "<code># N &quot;file&quot;</code> marks line number <code>N</code> in the given file.  The suffix number tells you something about the state of processing of the file (along the lines of: 1 start, 2 finish, 3 and 4 related to nested included files).  Or simply ignore the <code>#</code> lines; they&#39;re &#39;commentary&#39; on the preprocessor output."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 9154194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f98f004da2be0672db785718d2108f?s=128&d=identicon&r=PG&f=1", "display_name": "DisplayName001", "link": "https://stackoverflow.com/users/9154194/displayname001"}, "edited": false, "score": 2, "creation_date": 1560267121, "post_id": 56546257, "comment_id": 99676056, "body": "Thanks for the response, this isn&#39;t homework. I just never got a strong education in things that happen under the hood."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 4, "last_activity_date": 1560264109, "creation_date": 1560264109, "answer_id": 56546257, "question_id": 56546030, "link": "https://stackoverflow.com/questions/56546030/how-to-read-the-c-preprocessor-file/56546257#56546257", "title": "How to read the C-preprocessor file", "body": "<p>The lines starting with <code>#</code> exist so the compiler can report errors on the correct file and line. The best thing to do is ignore them . In between them is C code with all macros and include files expanded. Typically one reads preprocessor output to debug macros, but your sample has none.</p>\n\n<p>I guess this is a homework assignment to demonstrate include files.</p>\n"}], "owner": {"reputation": 113, "user_id": 9154194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f98f004da2be0672db785718d2108f?s=128&d=identicon&r=PG&f=1", "display_name": "DisplayName001", "link": "https://stackoverflow.com/users/9154194/displayname001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "closed_date": 1560269048, "answer_count": 1, "score": 3, "last_activity_date": 1560272304, "creation_date": 1560263362, "last_edit_date": 1560272304, "question_id": 56546030, "link": "https://stackoverflow.com/questions/56546030/how-to-read-the-c-preprocessor-file", "closed_reason": "Duplicate", "title": "How to read the C-preprocessor file", "body": "<p>I am calling on the crowd to help me understand how to read the preprocessor output. I am attempting to go through an exercise of going through the compilation process of a simple C application on Ubuntu 18.04. </p>\n\n<p>The code simpler.c</p>\n\n<pre><code>#include \"simpler.h\"\nint main()\n{\n      // This is a comment\n      return 0;\n}\n</code></pre>\n\n<p>for simpler.h</p>\n\n<pre><code>int y;\n</code></pre>\n\n<p>I then run the command <br></p>\n\n<pre><code>username$ cpp simpler.c simpler_cpp\n</code></pre>\n\n<p>This then produces the preprocessed c file as follows</p>\n\n<pre><code># 1 \"simpler.c\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 31 \"&lt;command-line&gt;\"\n# 1 \"/usr/include/stdc-predef.h\" 1 3 4\n# 32 \"&lt;command-line&gt;\" 2\n# 1 \"simpler.c\"\n\n# 1 \"simpler.h\" 1\nint y;\n# 3 \"simpler.c\" 2\n\nint main()\n{\n\n return 0;\n}\n</code></pre>\n\n<p>Looking this over I am not sure I follow how to read this file? Or at least put it in terms I understand. I do however see that my comment is not there any more, and that I have my line from my header file there. But other than that this is not too clear.</p>\n\n<p>I am attempting to tell myself a \"story\" with this file, such as \"The # 1 is an preprocessor index of the file, so there are # 1, # 31, # 32, and # 3 or 4 files total\". That the \"# 31 \"\" means something... I really don't know what?</p>\n\n<p>If anyone can help me interpret this file, I would greatly appreciate it.</p>\n\n<p>I have been attempting to follow the page <a href=\"http://gcc.gnu.org/onlinedocs/cpp/index.html#Top\" rel=\"nofollow noreferrer\">http://gcc.gnu.org/onlinedocs/cpp/index.html#Top</a>\nbut it reads more like an encyclopedia, which although good if you know the road map, if you are starting from square one it becomes more challenging.</p>\n\n<p>Possible Answer:\nThanks for the responses guys,\naccording to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.1.0/cpp/Preprocessor-Output.html#Preprocessor-Output\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc-9.1.0/cpp/Preprocessor-Output.html#Preprocessor-Output</a></p>\n\n<p>when reading the output of the preprocessed c file, first macros are expanded, comments are removed, and long runs of blanks lines are discarded. </p>\n\n<p>I read the line <br>\n     # 1 \"simpler.c\"\nis a linemarker and means that the following line originated in file \"simpler.c\" at line 1. \nAfter the file there are no flags, which is not described in the file. </p>\n\n<p>The other thing I can do is look at the line <br>\n     # 1 \"simpler.c\" <br>\nand say the file simpler.c exists, and then ignore it. Which is probably the most practical thing to do. Except I wonder what the <br>\n    # 1 \"built-in\" <br>\n    # 1 \"command-line\" <br>\nmean? \nif I ignore these then I get something that looks like </p>\n\n<pre><code>int y;\n\n\nint main()\n{\n\n return 0;\n}\n</code></pre>\n\n<p>Which is what I originally expected from the description of cpp. </p>\n\n<p>Last edit for the day. One thing I have found is the command <br>\n    cpp -P simpler.c simpler_cpp\ngive the output <br></p>\n\n<pre><code>int y;\nint main()\n{\n return 0;\n}\n</code></pre>\n\n<p>There is a no #line flag in the man page that outputs the preprocessed file without any line information. I am guessing that this is really the only output that does matter. I am guessing that this output should have a .i extension, but I don' tknow . Oh well, I hope this is useful to anyone else. If I find any good information out there I will try and write something up.</p>\n"}, {"tags": ["c", "struct", "valgrind", "memcpy"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1560261859, "post_id": 56545436, "comment_id": 99672641, "body": "The code shown for the header won&#39;t compile \u2014 unless you have a second identical definition of <code>Bar_t</code> somewhere else.  You&#39;ve not shown how <code>foo_data</code> is defined.  And you appear to be handling data from one thread&#39;s stack in a second thread, which is dubious at best.  There&#39;s nothing we can do with the information provided.  You&#39;ll need to provide something closer to an MCVE (<a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example?</a>) (or MRE or whatever name SO now uses; MCVE was good for over five years and it did not need changing)."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1560261863, "post_id": 56545436, "comment_id": 99672647, "body": "If that is the entirety of your C code, you&#39;re likely reading uninitialized memory."}, {"owner": {"reputation": 168, "user_id": 11345020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d3d43d49cd02d98fc22e7036e9c977?s=128&d=identicon&r=PG&f=1", "display_name": "ooj-001", "link": "https://stackoverflow.com/users/11345020/ooj-001"}, "edited": false, "score": 0, "creation_date": 1560262041, "post_id": 56545436, "comment_id": 99672762, "body": "One of the common idiom for a typedef struct is <code>typedef struct S { int s; } S;</code>. Also switch the two struct codes otherwise it will not compile."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1560262386, "post_id": 56545436, "comment_id": 99672984, "body": "You should exhibit your working code."}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1560262591, "post_id": 56545436, "comment_id": 99673107, "body": "Since you use <code>foo_data</code> as a pointer i suspect you did not allocate memory for it correctly. Maybe you have used <code>sizeof(uint64_t)</code> and/or <code>sizeof(uint16_t)</code> for allocation. Note that a structs size is not always the sum of the sizes of its members. I simply added a static definition of <code>foo_data</code> to test your code and i do not get any errors."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "edited": false, "score": 0, "creation_date": 1560353122, "post_id": 56547754, "comment_id": 99710631, "body": "Thanks for your answer! This is the same conclusion that we came to when another engineer took a look. The results are still valid however we now know that this might not always be the case, depending on how quickly the MMU has re-allocated the memory where that thread&#39;s stack sat in memory.. At least that is our understanding anyway, we&#39;re still quite new to C. We have decided to re-write this using a global variable and mutex instead."}], "tags": [], "owner": {"reputation": 2065, "user_id": 85696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9d5b650b104a98538d5aab145ea192d?s=128&d=identicon&r=PG", "display_name": "danadam", "link": "https://stackoverflow.com/users/85696/danadam"}, "is_accepted": true, "score": 1, "last_activity_date": 1560269140, "creation_date": 1560269140, "answer_id": 56547754, "question_id": 56545436, "link": "https://stackoverflow.com/questions/56545436/invalid-read-of-size-8-valgrind-trying-to-populate-struct-with-data-from-ot/56547754#56547754", "title": "&#39;Invalid read of Size 8&#39; - Valgrind. Trying to populate struct with data from other struct", "body": "<p>The valgrind message suggests that:</p>\n\n<ul>\n<li>in thread 11 you created <code>Foo_s</code> as a local variable, i.e., on stack</li>\n<li>you started a new thread, thread 36, passing a pointer to that variable</li>\n<li>thread 36 tries to read data from that pointer</li>\n<li>but the thread 11 already \"left\" the function where you created the variable, so the data that the thread 36 tries to read is already invalid</li>\n</ul>\n\n<p>By chance you are still getting valid results when running the program because nothing has overwritten that data yet.</p>\n"}], "owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 56547754, "answer_count": 1, "score": 1, "last_activity_date": 1560269140, "creation_date": 1560261433, "question_id": 56545436, "link": "https://stackoverflow.com/questions/56545436/invalid-read-of-size-8-valgrind-trying-to-populate-struct-with-data-from-ot", "title": "&#39;Invalid read of Size 8&#39; - Valgrind. Trying to populate struct with data from other struct", "body": "<p>When running Valgrind checks, I am getting an 'Invalid read of size 8' which points to the use of a memcpy. The destination field is an empty, uninitialized struct. The source is a the same struct which is a member of another struct.</p>\n\n<p>i.e Destination = Bar, Source = Foo->Bar.  </p>\n\n<p>I am assuming the issue lies with the size arg in memcpy. I have tried using sizeof(Foo->Bar), sizeof(Bar) and sizeof(Bar_s). </p>\n\n<p>In header:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct Foo_s\n{\n  Bar_t payload;\n  //other structs and variables\n};\n\ntypedef struct\n{\n    uint64_t timestamp;\n    uint16_t id;\n} Bar_t;\n</code></pre>\n\n<p>In c file: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>//Foo_s is passed into the function already populated, let's call it foo_data\nBar_t payload_data;\n\nmemcpy(&amp;payload_data, &amp;(foo_data-&gt;payload_data), sizeof(foo_data-&gt;payload_data));\n</code></pre>\n\n<p>I am getting the expected behaviour however Valgrind doesn't seem to like how it's being done. </p>\n\n<p>Here is the error: </p>\n\n<pre><code>Thread 36 function_name:47/101:\n==774== Invalid read of size 8\n==774==    at 0x1C1E59: function_name (in /path/to/exe)\n==774==    by 0x189065: another_function (in /path/to/exe)\n==774==    by 0x5D544A3: another_function2 (pthread_create.c:456)\n==774==  Address 0x40bb6b8 is on thread 11's stack\n==774==  1896 bytes below stack pointer\n</code></pre>\n"}, {"tags": ["linux", "networking", "linux-kernel", "c"], "comments": [{"owner": {"reputation": 608, "user_id": 8225884, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ZzuYo.png?s=128&g=1", "display_name": "\u70b8\u9c7c\u85af\u6761\u5fb7\u91cc\u514b", "link": "https://stackoverflow.com/users/8225884/%e7%82%b8%e9%b1%bc%e8%96%af%e6%9d%a1%e5%be%b7%e9%87%8c%e5%85%8b"}, "edited": false, "score": 1, "creation_date": 1560261332, "post_id": 56560337, "comment_id": 99700279, "body": "No, the socket sending/receiving buffer is managed by kernel and can&#39;t be exposed to userspace, otherwise there would be a  security problem of linux kernel"}, {"owner": {"reputation": 10896, "user_id": 453851, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f72d9b8fe02cc534906f89eb22d74cb0?s=128&d=identicon&r=PG", "display_name": "Philip Couling", "link": "https://stackoverflow.com/users/453851/philip-couling"}, "edited": false, "score": 0, "creation_date": 1560263036, "post_id": 56560337, "comment_id": 99700280, "body": "If these are <a href=\"https://linux.die.net/man/7/socket\" rel=\"nofollow noreferrer\">AF_INET or AF_INET6</a> sockets (TCP or UDP) then then then tools like <a href=\"https://www.wireshark.org/\" rel=\"nofollow noreferrer\">Wireshark</a> and <a href=\"https://www.telerik.com/fiddler\" rel=\"nofollow noreferrer\">Fiddler</a> are extremely useful for debugging this type of issue.  Wireshark lets you see what&#39;s going on in packets.  Fiddler is useful if your protocol is based on HTTP and can show a full history of request / response even for encrypted HTTPS connections."}, {"owner": {"reputation": 10896, "user_id": 453851, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f72d9b8fe02cc534906f89eb22d74cb0?s=128&d=identicon&r=PG", "display_name": "Philip Couling", "link": "https://stackoverflow.com/users/453851/philip-couling"}, "edited": false, "score": 6, "creation_date": 1560263879, "post_id": 56560337, "comment_id": 99700281, "body": "There is almost certainly nothing going wrong inside the socket.  While it is technically possible that you&#39;ve discovered a bug in the Linux kernel please remember that Linux is used on hundreds of millions of machines and most of them rely on networking.  So the chance of finding a bug which changes data inside a socket is highly unlikely.  The chance you made a mistake in your own code is pretty likely."}, {"owner": {"reputation": 13, "user_id": 3380335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb718da9cb13d46be13e46edbea8598?s=128&d=identicon&r=PG&f=1", "display_name": "Sahitya Gupta", "link": "https://stackoverflow.com/users/3380335/sahitya-gupta"}, "reply_to_user": {"reputation": 10896, "user_id": 453851, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f72d9b8fe02cc534906f89eb22d74cb0?s=128&d=identicon&r=PG", "display_name": "Philip Couling", "link": "https://stackoverflow.com/users/453851/philip-couling"}, "edited": false, "score": 0, "creation_date": 1560265297, "post_id": 56560337, "comment_id": 99700282, "body": "Thanks, @PhilipCouling. Using Wireshark was a good idea. I&#39;ll check this if it helps. Since the communication is happening in localhost, so will use Wireshark with the loopback address. I acknowledge your second comment also."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1560279172, "post_id": 56560337, "comment_id": 99700283, "body": "Yes, there is. Look for the <code>MSG_PEEK</code> flag of <code>recv(2)</code>. Whether this is useful for debugging your program is a completely different matter -- and that is highly doubtful. Your &quot;server&quot; should be able to handle malformed data instead of going into a recursive trip or blowing up the stack as it apparently does."}, {"owner": {"reputation": 708, "user_id": 1515570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aa073a21af43d184b2cbeab2129b8d?s=128&d=identicon&r=PG", "display_name": "X Tian", "link": "https://stackoverflow.com/users/1515570/x-tian"}, "edited": false, "score": 0, "creation_date": 1560333216, "post_id": 56560337, "comment_id": 99700284, "body": "I&#39;m voting to close this question because it appears to have been answered. In comments and answer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1560372336, "post_id": 56560337, "comment_id": 99719288, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of both your server and client so we can reproduce the problem and help you debug it."}], "answers": [{"comments": [{"owner": {"reputation": 10896, "user_id": 453851, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f72d9b8fe02cc534906f89eb22d74cb0?s=128&d=identicon&r=PG", "display_name": "Philip Couling", "link": "https://stackoverflow.com/users/453851/philip-couling"}, "edited": false, "score": 1, "creation_date": 1560331808, "post_id": 56560338, "comment_id": 99700285, "body": "This is certainly something that needs to be fixed, but necessarily an answer to the question. The OP believes the crash is caused by incorrect data being received.  The receiving program most definitely should avoid stack-overflow errors when receiving and parsing bad data (yes), but protecting against this won&#39;t fix the problem if the sender is sending bad data."}], "tags": [], "owner": {"reputation": 1891, "user_id": 340790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4126cfd2c1180ef43f0587519b1bba1c?s=128&d=identicon&r=PG", "display_name": "JdeBP", "link": "https://stackoverflow.com/users/340790/jdebp"}, "is_accepted": true, "score": 1, "last_activity_date": 1560329178, "creation_date": 1560329178, "answer_id": 56560338, "question_id": 56560337, "link": "https://stackoverflow.com/questions/56560337/how-to-access-data-written-in-a-socket-without-reading-it/56560338#56560338", "title": "How to access data written in a socket without reading it", "body": "<p>You have a stack buffer overflow problem.  If you have never heard of the GCC stack protector, now is the time to look it up.  Whilst Wireshark is the obvious tool for looking at data in flight, this is not the locus of your problem.  Your server should be proof against any and all malicious data read from the network.  This is basic good server design and implementation practice.  <strong>You have a stack buffer overflow problem.</strong></p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1560336428, "question_id": 524210}, "owner": {"reputation": 13, "user_id": 3380335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb718da9cb13d46be13e46edbea8598?s=128&d=identicon&r=PG&f=1", "display_name": "Sahitya Gupta", "link": "https://stackoverflow.com/users/3380335/sahitya-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 56560338, "answer_count": 1, "score": 0, "last_activity_date": 1560336428, "creation_date": 1560260856, "question_id": 56560337, "link": "https://stackoverflow.com/questions/56560337/how-to-access-data-written-in-a-socket-without-reading-it", "title": "How to access data written in a socket without reading it", "body": "<p>I'm working on an embedded system having Linux.\nA client thread is writing some data in the socket but what server thread is reading on the other side isn't the same as it was written. Which is causing the thread (and parent process)  to crash.</p>\n\n<p>I'm new to networking and Linux.\nI have dumped every piece of data which is being written, it's all fine.</p>\n\n<p>The function trace in gdb shows the following information.</p>\n\n<pre><code>(gdb) \n#0  0x00007f62be8e8670 in getenv () from /lib/libc.so.6\n#1  0x00007f62be92057a in __libc_message () from /lib/libc.so.6\n#2  0x00007f62be99f927 in __fortify_fail () from /lib/libc.so.6\n#3  0x00007f62be99f8f0 in __stack_chk_fail () from /lib/libc.so.6\n#4  0x0000000000406471 in reading (sockFd=15) at __line_number_in_the_program__\n#5  0x793bcf318b18bb01 in ?? ()\n#6  0x117d0300942ff567 in ?? ()\n#7  0x0000000100000000 in ?? ()\n..\n..\n..\n</code></pre>\n\n<p>It goes till #785 with some [random] address.</p>\n\n<p>reading() is the function which processes the read data in the server thread.</p>\n\n<p>I suspect there something going wrong inside the socket.\nIs there any way to see the data which is in the sockets(client/server) buffer without reading it?\nOr any other way to debug it further with gdb?</p>\n\n<p>There are already some checks to handle the read data properly but those are also not helping.</p>\n"}, {"tags": ["c", "transform", "fft"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1560259271, "post_id": 56544650, "comment_id": 99671038, "body": "Do you really need the precision that comes from computing with so many samples? You can always just compute the FFT on smaller segments of your data."}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 2, "creation_date": 1560259277, "post_id": 56544650, "comment_id": 99671047, "body": "FFTs are efficient because they use power-of-two size inputs. Having arbitrary-size data breaks this a bit. As a side note, 128 000 samples is very far from near-infinite. I&#39;d suggest reading into how FFTs and Fourier transforms in general work."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1560260246, "post_id": 56544650, "comment_id": 99671683, "body": "If you are doing block FT the low-freq components will be limited by the block size. There is no FFT algorithm working on streamed data. You could look into Sparse Fourier Transform (SFT) instead, which has been designed specifically for that. Info on the lowe freqs will only be available once the full dataset in acquired."}, {"owner": {"reputation": 3305, "user_id": 1428695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a843c704cdb7e32a93769cddfed4747?s=128&d=identicon&r=PG", "display_name": "yhyrcanus", "link": "https://stackoverflow.com/users/1428695/yhyrcanus"}, "edited": false, "score": 1, "creation_date": 1560263419, "post_id": 56544650, "comment_id": 99673633, "body": "Why do you need to measure for that long? If you actually need the low frequency components, decimate your samples. If not, just limit your block size."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560263718, "post_id": 56544650, "comment_id": 99673846, "body": "Your claim that one sin+cos calculation costs 400 ticks is plausible, but 400 ticks is not 1 ns (nanosecond) on a 480 MHz processor \u2014 each tick is about 2 ns.  So, it&#39;s wrong by three orders of magnitude \u2014 it would be about 1 &#181;s (microsecond).  Interestingly, the calculation 2k * 128k * 1 &#181;s <i>is</i> about 256 seconds.  So, you probably simply (mis)used ns where you mean &#181;s (or &#39;us&#39; if you don&#39;t have easy access to Greek characters)."}, {"owner": {"reputation": 9, "user_id": 11334512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324f5a74135cebf3a9ced7e24d40b85?s=128&d=identicon&r=PG&f=1", "display_name": "AngusSchmaloer", "link": "https://stackoverflow.com/users/11334512/angusschmaloer"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1560326958, "post_id": 56544650, "comment_id": 99695102, "body": "@CrisLuengo Yes i do need that precision. We intend to set noise onto it and perform a Fourier transform. We also care about the phase shift. So, we want to be able to detect up to a 10KHz, therefore we do need the prececion."}, {"owner": {"reputation": 9, "user_id": 11334512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324f5a74135cebf3a9ced7e24d40b85?s=128&d=identicon&r=PG&f=1", "display_name": "AngusSchmaloer", "link": "https://stackoverflow.com/users/11334512/angusschmaloer"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1560327145, "post_id": 56544650, "comment_id": 99695211, "body": "@ThomasJager yes, 128 000 is not near-infinite, i know. But when i looked around at most FFT libs, but the input has the size of 2N, with a max of 4096, maybe some have 16384 points. Wich they almost never do (I never found one). So, if the max set number of variables for all FFTs are to little, I am looking for a way to theoretically proccess infinit data. Also, the measuring time is not a set length. It might change and might become way more than 10 secs. I do know about the normal Fourier, but not yes much about the FFT, still learning, thats why i asked for a solution for a large data set"}, {"owner": {"reputation": 9, "user_id": 11334512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324f5a74135cebf3a9ced7e24d40b85?s=128&d=identicon&r=PG&f=1", "display_name": "AngusSchmaloer", "link": "https://stackoverflow.com/users/11334512/angusschmaloer"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1560327424, "post_id": 56544650, "comment_id": 99695352, "body": "@JonathanLeffler yes, i did ment 1us, i always switch the us and ns up. I edited it now. thnx"}, {"owner": {"reputation": 9, "user_id": 11334512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324f5a74135cebf3a9ced7e24d40b85?s=128&d=identicon&r=PG&f=1", "display_name": "AngusSchmaloer", "link": "https://stackoverflow.com/users/11334512/angusschmaloer"}, "reply_to_user": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1560332164, "post_id": 56544650, "comment_id": 99697977, "body": "@norok2 Thanks, i will look into the SFT"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1560345623, "post_id": 56544650, "comment_id": 99705946, "body": "I don\u2019t believe any of this. I don\u2019t believe you need to do a 100k-point FFT, and I don\u2019t believe it\u2019s hard to find an implementation that can do it. Note that if you only read the first 2000 elements from the output, then you only need to do a 2000-point FFT. If you are worried about the noise, you can average over many 2000-point FFTs in your sample window."}, {"owner": {"reputation": 3305, "user_id": 1428695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a843c704cdb7e32a93769cddfed4747?s=128&d=identicon&r=PG", "display_name": "yhyrcanus", "link": "https://stackoverflow.com/users/1428695/yhyrcanus"}, "edited": false, "score": 0, "creation_date": 1560351669, "post_id": 56544650, "comment_id": 99709776, "body": "You only need 10KHz. You can decimate to 25.6 KHz easily, which should give you more than enough breathing room."}, {"owner": {"reputation": 9, "user_id": 11334512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324f5a74135cebf3a9ced7e24d40b85?s=128&d=identicon&r=PG&f=1", "display_name": "AngusSchmaloer", "link": "https://stackoverflow.com/users/11334512/angusschmaloer"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1560414485, "post_id": 56544650, "comment_id": 99730707, "body": "@CrisLuengo Hmm, i am really not an expert. But now, i do think you are right. I only need the Hz I want to measure times 2 a 3 times. I thought i needed it in order to measure the phase correctly, but the Fourier doesn&#39;t care about high data rates. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4431683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db21f1d8ee964446b34a10e380e2ad70?s=128&d=identicon&r=PG&f=1", "display_name": "Yeo", "link": "https://stackoverflow.com/users/4431683/yeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1560320237, "last_edit_date": 1560320237, "creation_date": 1560319637, "answer_id": 56555622, "question_id": 56544650, "link": "https://stackoverflow.com/questions/56544650/need-a-fft-for-an-near-infinite-set-of-data-points/56555622#56555622", "title": "Need a FFT for an near infinite set of data points", "body": "<p>If your calculation involved floating points, avoid double precision if you doesn't need that kind of guaranteed floating point precision.</p>\n\n<p>If your ADC resolution is not that high (says less than 16 bits), you can consider to use fixed point arithmetic. This can help to reduce computation time especially if your machine does not support hardware floating point calculation. please refer: <a href=\"https://en.wikipedia.org/wiki/Q_(number_format)\" rel=\"nofollow noreferrer\">Q number format</a></p>\n\n<p>If you are using ARM base controller, you may want to check out this:\n<a href=\"http://www.keil.com/pack/doc/CMSIS/DSP/html/index.html\" rel=\"nofollow noreferrer\">http://www.keil.com/pack/doc/CMSIS/DSP/html/index.html</a></p>\n"}], "owner": {"reputation": 9, "user_id": 11334512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324f5a74135cebf3a9ced7e24d40b85?s=128&d=identicon&r=PG&f=1", "display_name": "AngusSchmaloer", "link": "https://stackoverflow.com/users/11334512/angusschmaloer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1560327481, "creation_date": 1560259042, "last_edit_date": 1560327481, "question_id": 56544650, "link": "https://stackoverflow.com/questions/56544650/need-a-fft-for-an-near-infinite-set-of-data-points", "title": "Need a FFT for an near infinite set of data points", "body": "<p>I need to perform a Fourier transform on a long stream of data. I made a DFT .c file that works fine, the downside is of course the speed. It is slow AF.</p>\n\n<p>I am looking for a way to perform the FFT on a long stream of data.\nAll the FFT libs require an array of max 1024, 2048 or some even 4096 data points.</p>\n\n<p>I get the data from an ADC that runs around 128000 Hz and I need to measure data between 1 and 10 seconds. This means an array from 128 000 to 1 280 000 samples. In my code I check the frequencies 0 till 2000. It took around 400 core ticks for one sin+cos calculation. The core runs at 480 Mhz, so it costs around 1 us.</p>\n\n<p>This means 2000 frequencies * 128 000 samples * 1 us = +/- 256 seconds(4 min) of analysis per 1 second of data.</p>\n\n<p>And when 10 secs are used, it would cost 40 mins.</p>\n\n<p>Does anyone know a faster way or a FFT solution that supports a near \"infinite\" data array?</p>\n"}, {"tags": ["c", "keras", "operation"], "answers": [{"tags": [], "owner": {"reputation": 3107, "user_id": 8893595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27d7c8a34c7abf24ea4499f8757b3f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwin Geet D&#39;Sa", "link": "https://stackoverflow.com/users/8893595/ashwin-geet-dsa"}, "is_accepted": true, "score": 1, "last_activity_date": 1560260830, "creation_date": 1560260830, "answer_id": 56545223, "question_id": 56544546, "link": "https://stackoverflow.com/questions/56544546/what-does-tf-keras-backend-dot-does/56545223#56545223", "title": "What does tf.keras.backend.dot does?", "body": "<p>Yes, it returns the dot product of the two tensors. And as per your example, it is right in the sense of dot product of variable length tensor, which is the same as matrix multiplication. Hence, you get it as expected.</p>\n\n<p>Mathematically dot product of two variable <code>a</code> and <code>b</code> can be defined as:\n<code>a.b=sum(a&lt;i&gt;*b&lt;i&gt;); where i ranges from 0 to n;</code></p>\n"}], "owner": {"reputation": 111, "user_id": 11597209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mzVuF4abzdc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiXvSRNihx0hAAJ9GSS6pwSmDd1A/mo/photo.jpg?sz=128", "display_name": "Playergod", "link": "https://stackoverflow.com/users/11597209/playergod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "accepted_answer_id": 56545223, "answer_count": 1, "score": 1, "last_activity_date": 1560260830, "creation_date": 1560258666, "question_id": 56544546, "link": "https://stackoverflow.com/questions/56544546/what-does-tf-keras-backend-dot-does", "title": "What does tf.keras.backend.dot does?", "body": "<p>I am currently trying to implement LSTM in C. Therefore I need to understand  <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/backend/dot\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/api_docs/python/tf/keras/backend/dot</a>.</p>\n\n<p>For example if I would call: <code>dot([1,2],[3,4,5])</code><br></p>\n\n<pre><code>for(i = 0; i&lt;size1; i++)\n{\n    for(j = 0; j&lt;size2; j++)\n    {\n        tmp += first[j]*second[i];\n    }\n    result[i] = tmp;\n    tmp = 0;\n}\n</code></pre>\n\n<p>So it would result: [1*3+2*3,1*4+2*4, 1*5+2*5]<br>\nIs this right?</p>\n"}, {"tags": ["c", "windows", "usb", "usb-drive", "raw-data"], "comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 1, "creation_date": 1560265883, "post_id": 56544306, "comment_id": 99675267, "body": "please show your code where your try to open the volume."}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1560267305, "post_id": 56546677, "comment_id": 99676179, "body": "In this case the scope is limited to a removable disk. By default since Vista, local interactive users (i.e. user tokens containing the SID S-1-5-4) have read-write access to removable storage devices (see <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/storage/acls-and-the-device-stack\" rel=\"nofollow noreferrer\">ACLs and the Device Stack</a>). This can be locked down via the &quot;Removable Storage Access&quot; group policy. Note that denying read, write, or execute access to interactive users will include interactive administrators. Only non-interactive users (e.g. services) will be unaffected."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1560267599, "post_id": 56546677, "comment_id": 99676356, "body": "Also, we can access the volume via the classic drive-letter mountpoint, e.g. &quot;//./E:&quot;. We don&#39;t have to use the internal volume name. A drive letter will be assigned to the volume even if it has no recognized filesystem. A GUI can also automate the list via <code>FindFirstVolumeW</code>, etc. Without a recognized filesystem, the volume is mounted by the RAW &#39;filesystem&#39;, which just provides low-level read-write access, effectively just forwarding these requests to the underlying disk device."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1560325931, "post_id": 56546677, "comment_id": 99694607, "body": "@eryksun thank you, i took your points into account and changed my answer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7263832"}, "edited": false, "score": 0, "creation_date": 1560433291, "post_id": 56546677, "comment_id": 99741568, "body": "Thank you, it appears that all this time my problem was that the length of the buffer I was using wasn&#39;t sector aligned."}], "tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": true, "score": 2, "last_activity_date": 1560351865, "last_edit_date": 1560351865, "creation_date": 1560265543, "answer_id": 56546677, "question_id": 56544306, "link": "https://stackoverflow.com/questions/56544306/how-can-i-readwrite-raw-data-to-a-usb-drive-using-c-on-windows/56546677#56546677", "title": "How can I Read&amp;Write raw data to a USB-Drive using C on windows", "body": "<p>The problem with your approach is, that windows always asks if the drive should be formatted. And it may be very likely that the one or other day the question will be answered the wrong way ;)</p>\n\n<p>However you can open  a volume, if you know the correct name, that windows uses internally for it. You can get Sysinternals <code>WinObj</code> which can show you all names. For drives Windows also creates symlinks like <code>\\\\.\\C:</code> to access them via the drive letter. Make sure that the backslashes are escaped correctly in your code (usually <code>\"\\\\\\\\.\\\\C:\"</code>) and that there is no trailing slash after the colon.</p>\n\n<p>But I like to point you to the documentation of <code>CreateFile</code> especially the remarks section (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/FileAPI/nf-fileapi-createfilea#remarks\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/FileAPI/nf-fileapi-createfilea#remarks</a>):</p>\n\n<p>Maybe you missed one of the following points:</p>\n\n<blockquote>\n  <p>The following requirements must be met for such a call to succeed:</p>\n  \n  <ul>\n  <li>The caller must have administrative privileges. For more information, see Running with Special Privileges.</li>\n  <li>The dwCreationDisposition parameter must have the OPEN_EXISTING flag.</li>\n  <li>When opening a volume or floppy disk, the dwShareMode parameter must have the FILE_SHARE_WRITE flag.</li>\n  </ul>\n</blockquote>\n\n<p>As Eryksun pointed out: for a drive that itself reports to be removable, the administrative privileges are not required.</p>\n\n<p>Example to open an USB-Drive that has the letter 'D';</p>\n\n<pre><code>HANDLE h = CreateFile(\"\\\\\\\\.\\\\D:\", (GENERIC_READ | GENERIC_WRITE), FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL);\n\nif (h != INVALID_HANDLE_VALUE) {\n  unsigned char buffer[512];\n  DWORD readBytes = 0;\n  ReadFile(h, buffer, sizeof(buffer), &amp;readBytes, NULL);\n  /* .. */\n  CloseHandle(h);\n}\n</code></pre>\n\n<p>Please also note that according to citings in <a href=\"https://stackoverflow.com/a/31712818/2331592\">https://stackoverflow.com/a/31712818/2331592</a> the read/written data blocks must sector aligned.<br>\nSo to be safe determine the sector size first(e.g. with <code>GetDiskFreeSpace</code>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7263832"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 56546677, "answer_count": 1, "score": 1, "last_activity_date": 1560351865, "creation_date": 1560257871, "question_id": 56544306, "link": "https://stackoverflow.com/questions/56544306/how-can-i-readwrite-raw-data-to-a-usb-drive-using-c-on-windows", "title": "How can I Read&amp;Write raw data to a USB-Drive using C on windows", "body": "<p>So I made my own encryption scheme and I came up with an idea that I can have a USB drive with raw data (no file-system at all) that I can use as a \"key\" in my encryption scheme.</p>\n\n<p>I need a way to read and write data right into the USB, Iv'e tried using <a href=\"https://libusb.info/\" rel=\"nofollow noreferrer\">libusb</a> but I couldn't figure it out (too low-level for me).</p>\n\n<p>Iv'e also seen that there's a way to open a handle to the USB drive using <code>CreateFile</code> function on windows but I couldn't figure out the required parameters and I got <code>ERROR_INVALID_PARAMETER</code> when trying to read.</p>\n\n<p>I understand that the OS will think that the drive/its file system are corrupted (since it won't have one) but it doesn't matter, I just need a way to store raw data.</p>\n\n<p>Any help appreciated, thank you!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560255588, "post_id": 56543528, "comment_id": 99668689, "body": "Welcome to Stack Overflow. Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, take <a href=\"http://stackoverflow.com/tour\">the SO tour</a>, read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1560255620, "post_id": 56543528, "comment_id": 99668711, "body": "All you&#39;ve given is a the definition of a struct.  There&#39;s no code here that shows what you&#39;re trying to do.  Please update your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that others can compile and run as is that replicates your problem."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1560259196, "post_id": 56544464, "comment_id": 99670993, "body": "In which case, the input stream must have been opened in binary mode."}, {"owner": {"reputation": 9, "user_id": 6593478, "user_type": "registered", "profile_image": "https://graph.facebook.com/112937719143462/picture?type=large", "display_name": "Howard Choi", "link": "https://stackoverflow.com/users/6593478/howard-choi"}, "edited": false, "score": 0, "creation_date": 1560259444, "post_id": 56544464, "comment_id": 99671165, "body": "I got it I really appreciate it for you!"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 4, "last_activity_date": 1560258846, "last_edit_date": 1560258846, "creation_date": 1560258412, "answer_id": 56544464, "question_id": 56543528, "link": "https://stackoverflow.com/questions/56543528/c-language-result-is-different-in-windows-10/56544464#56544464", "title": "c language result is different in windows 10", "body": "<p>On windows you seem to read a <code>\\r</code> which will give you -35 because <code>\\r</code> has the value 13.</p>\n\n<p>You need to make sure not to include non-digits in your list.</p>\n\n<p>So change </p>\n\n<pre><code>while (c != '\\n') {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>while (isdigit(c)) {\n</code></pre>\n\n<p>or in case you want to check manually (instead of using <code>isdigit</code>)</p>\n\n<pre><code>while (c &gt;= '0' &amp;&amp; c &lt;= '9') {\n</code></pre>\n\n<p>Note: <code>isdigit</code> require <code>#include &lt;ctype.h&gt;</code></p>\n\n<p>The different results on Linux and Windows is because they have different definitions for \"newline\". Linux just us \"\\n\" while windows use \"\\r\\n\"</p>\n"}], "owner": {"reputation": 9, "user_id": 6593478, "user_type": "registered", "profile_image": "https://graph.facebook.com/112937719143462/picture?type=large", "display_name": "Howard Choi", "link": "https://stackoverflow.com/users/6593478/howard-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1560258846, "creation_date": 1560255361, "last_edit_date": 1560257856, "question_id": 56543528, "link": "https://stackoverflow.com/questions/56543528/c-language-result-is-different-in-windows-10", "title": "c language result is different in windows 10", "body": "<p>The result looks like bug!\nthe code result is different in window 10 and ubuntu\nas I expected result is:</p>\n\n<p>if input 5;\nexpected result (it work in ubunt )</p>\n\n<p>5\nThe number 5</p>\n\n<p>is not divisible by 3.</p>\n\n<p>5 (it work in windows 10 )\nThe number 5 - 35</p>\n\n<p>is divisible by 3.</p>\n\n<p>in Visual Studio(Cl.exe exited code 2)</p>\n\n<p>I have no idea why is -35 attached in my result and wrong calculation!</p>\n\n<p>in window 10 eclipse cygwin gcc</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct digit\n{\n    int num;\n    struct digit *next;\n};\nstruct digit *createDigit(int dig);\nstruct digit * append(struct digit * end, struct digit * newDigptr);\nvoid printNumber(struct digit *start);\nstruct digit *readNumber(void);\nvoid freeNumber(struct digit *start);\nint divisibleByThree(struct digit *ptr);\n\nint main(void) {\n\n    struct digit *start;\n    start = readNumber();\n\n    printf(\"The number \");\n    printNumber(start);\n    if (divisibleByThree(start))\n        printf(\"is divisible by 3.\\n\");\n    else\n        printf(\"is not divisible by 3.\\n\");\n    freeNumber(start);\n    return 0;\n}\n\nstruct digit *createDigit(int dig) {\n    struct digit *ptr;\n    ptr = (struct digit *) malloc(sizeof(struct digit));\n    ptr-&gt;num = dig;\n    ptr-&gt;next = NULL;\n    return ptr;\n}\n\nstruct digit * append(struct digit * end, struct digit * newDigptr) {\n    end-&gt;next = newDigptr;\n    return(end-&gt;next);\n}\n\nvoid printNumber(struct digit *start) {\n    struct digit * ptr = start;\n    while (ptr!=NULL) {\n        printf(\"%d\", ptr-&gt;num);\n        ptr = ptr-&gt;next;\n    }\n    printf(\"\\n\");\n}\n\nvoid freeNumber(struct digit *start) {\n    struct digit * ptr = start;\n    struct digit * tmp;\n    while (ptr!=NULL) {\n        tmp = ptr-&gt;next;\n        free(ptr);\n        ptr = tmp;\n    }\n}\n\n\nstruct digit *readNumber(void) {\n    char c; // read character\n    int d;\n    struct digit *start, *end, *newptr;\n    start = NULL;\n    scanf(\"%c\", &amp;c);\n    while (c != '\\n') {\n        d = c - 48; // character to integer\n        newptr = createDigit(d);\n        if (start == NULL) {\n            start = newptr;\n            end = start;\n        } else {\n            end = append(end, newptr); // linked to each other\n        }\n        scanf(\"%c\", &amp;c);\n    }\n    return(start);\n}\n\nint divisibleByThree(struct digit *start){\n    struct digit *ptr = start;\n    int i = ptr-&gt;num;\n    int divisible = 3;\n    while( ptr-&gt;next!= NULL){\n        i = ptr-&gt;next-&gt;num + (i % divisible)*10;\n        ptr = ptr-&gt;next;\n    }\n    //printf(\"\\n%d\\n\",i);\n    if(i % divisible) return 0;\n    else return 1;\n\n}\n</code></pre>\n\n<p>5\nThe number 5\nis not divisible by 3.\n5\nThe number 5 - 35\nis divisible by 3.</p>\n"}, {"tags": ["c", "struct", "assignment-operator"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 4, "creation_date": 1560250480, "post_id": 56541914, "comment_id": 99665758, "body": "I wouldn&#39;t call what you are doing a &quot;deep copy&quot;. I would reserve that term for a data structure containing pointers to things that also need to be copied, and a simple assignment doesn&#39;t do that."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1560251093, "post_id": 56541914, "comment_id": 99666127, "body": "Note that <code>struct outer s2 = s1;</code> isn&#39;t an assignment but initialization."}, {"owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1560251143, "post_id": 56541914, "comment_id": 99666168, "body": "@KamilCuk: correct. but, isn&#39;t equivalent in terms of copying?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1560251241, "post_id": 56541914, "comment_id": 99666237, "body": "@KamilCuk That&#39;s not entirely relevant in C though, since we have 6.7.9 Initialization &#167;11: &quot;the same type constraints and conversions as for simple assignment apply&quot;. C++ is another story entirely."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1560250259, "post_id": 56541946, "comment_id": 99665625, "body": "The term recursion is often formally used in the standard though, for iterating through a structs members, without it having anything to do with recursive functions. Take the rules of 6.5 pointer aliasing for example: &quot;- an aggregate or union type that includes one of the aforementioned types among its members (including, <b>recursively</b>, a member of a subaggregate or contained union)&quot;. Or the rules of struct initialization: &quot;if it is an aggregate, every member is initialized (recursively) according to these rules, and any padding is initialized to zero bits;&quot;"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 5, "last_activity_date": 1560250376, "last_edit_date": 1560250376, "creation_date": 1560249821, "answer_id": 56541946, "question_id": 56541914, "link": "https://stackoverflow.com/questions/56541914/c-does-the-assignment-operator-deep-copy/56541946#56541946", "title": "C: does the assignment operator deep copy?", "body": "<p>There is no \"recursion\"; it copies all the (value) bits of the value. Pointers are not magically followed of course, the assignment operator wouldn't know how to duplicate the pointed-to data.</p>\n\n<p>You can think of</p>\n\n<pre><code>a = b;\n</code></pre>\n\n<p>as shorthand for</p>\n\n<pre><code>memcpy(&amp;a, &amp;b, sizeof a);\n</code></pre>\n\n<p>The <code>sizeof</code> is misleading of course, since we know the types are the same on both sides but I don't think <code>__typeof__</code> helps.</p>\n\n<p>The draft C11 spec says (in 6.5.16.1 Simple assignment, paragraph 2):</p>\n\n<blockquote>\n  <p>In simple assignment (<code>=</code>), the value of the right operand is converted to the \n  type of the assignment expression and replaces the value stored in the object \n  designated by the left operand.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1560254415, "post_id": 56542229, "comment_id": 99668010, "body": "Two structure or union types must also have the same tag (or both be untagged) to be compatible.  Member correspondence is not enough.  In practice, it follows that inside a code block, a structure or union type is compatible only with itself."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560265203, "post_id": 56542229, "comment_id": 99674858, "body": "@JohnBollinger Yep but I didn&#39;t want to drag the whole compatible struct definition into this answer since it is complex, hence &quot;simply put&quot;. For those who are interested, it&#39;s the first wall of text below chapter 6.2.7 in the standard."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560265902, "post_id": 56542229, "comment_id": 99675283, "body": "I understand what you&#39;re doing, and I know you were already aware of the details of struct compatibility.  It&#39;s not necessary to go into the full details here, but I think it&#39;s important to convey that member correspondence is not enough, because that would be an easy misunderstanding for an inexperienced person to take away."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1560266274, "post_id": 56542229, "comment_id": 99675506, "body": "@JohnBollinger To make matters worse, you can have two structs with same members but different tags or names. They are not compatible types, but you can in theory lvalue access their data through pointers by using the &quot;union common initial sequence hack&quot;. Which is an obscure rule that has caused various standard DR and compiler bug reports. <a href=\"https://stackoverflow.com/a/54571011/584518\">stackoverflow.com/a/54571011/584518</a>"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1560250812, "creation_date": 1560250812, "answer_id": 56542229, "question_id": 56541914, "link": "https://stackoverflow.com/questions/56541914/c-does-the-assignment-operator-deep-copy/56542229#56542229", "title": "C: does the assignment operator deep copy?", "body": "<ul>\n<li><blockquote>\n  <p>does the assignment recursively deep copy the values?</p>\n</blockquote>\n\n<p>Yes, just as if you would have used <code>memcpy</code>. Pointers are copied, but not what they point at. The term \"deep copy\" often means: also copy what the pointers point at (for example in a C++ copy constructor).</p>\n\n<p>Except the values of any padding bytes may hold indeterminate values. (Meaning that <code>memcmp</code> on a struct might be unsafe.)</p></li>\n<li><blockquote>\n  <p>does the same happen when passing the struct to a function?</p>\n</blockquote>\n\n<p>Yes. See the reference to 6.5.2.2 below.</p></li>\n<li><blockquote>\n  <p>By experimenting it seems like it does, but can anyone point to the specification of the behavior?</p>\n</blockquote>\n\n<p>C17 6.5.16:</p>\n\n<blockquote>\n  <p>An assignment operator stores a value in the object designated by the left operand. An\n  assignment expression has the value of the left operand after the assignment, but is not\n  an lvalue. The type of an assignment expression is the type the left operand would have\n  after lvalue conversion.</p>\n</blockquote>\n\n<p>(Lvalue conversion in this case isn't relevant, since both structs must be of 100% identical and compatible types. Simply put: two structs are compatible if they have exactly the same members.)</p>\n\n<p>C17 6.5.16.1 Simple assignment:</p>\n\n<blockquote>\n  <ul>\n  <li>the left operand has an atomic, qualified, or unqualified version of a structure or union\n  type compatible with the type of the right;</li>\n  </ul>\n</blockquote>\n\n<p>C17 6.5.2.2 Function calls, \u00a77:</p>\n\n<blockquote>\n  <p>If the expression that denotes the called function has a type that does include a prototype,\n  the arguments are implicitly converted, as if by assignment, ...</p>\n</blockquote></li>\n</ul>\n"}], "owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 1, "accepted_answer_id": 56542229, "answer_count": 2, "score": 0, "last_activity_date": 1560251386, "creation_date": 1560249730, "last_edit_date": 1560251386, "question_id": 56541914, "link": "https://stackoverflow.com/questions/56541914/c-does-the-assignment-operator-deep-copy", "title": "C: does the assignment operator deep copy?", "body": "<p>For scalar values, the assignment operator seems to copy the right-hand side value to the left. How does that work for composite data types? Eg, if I have a nested struct</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct inner {\n    int b;\n};\n\nstruct outer {\n   struct inner a;\n};\n\nint main() {\n   struct outer s1 = { .a = {.b=1}};   \n   struct outer s2 = s1;\n}\n</code></pre>\n\n<ul>\n<li>does the assignment recursively deep copy the values? </li>\n<li>does the same happen when passing the struct to a function?</li>\n</ul>\n\n<p>By experimenting it seems like it does, but can anyone point to the specification of the behavior?</p>\n"}, {"tags": ["mysql", "c"], "comments": [{"owner": {"reputation": 19, "user_id": 11567179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3972ba92d51aa24e862353ee024997?s=128&d=identicon&r=PG&f=1", "display_name": "lonesome", "link": "https://stackoverflow.com/users/11567179/lonesome"}, "edited": false, "score": 0, "creation_date": 1560245278, "post_id": 56540232, "comment_id": 99662799, "body": "This will print d e f and g in the columns not the values of them.. SO I tried                                                   if (mysql_query(con, &quot;INSERT INTO SMTP VALUES(%s %s %s %d)&quot;,d,e,f,j)) {       finish_with_error(con);                                                             but now it is giving error too many arguments to function \u2018mysql_query\u2019"}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 1, "last_activity_date": 1560246379, "last_edit_date": 1560246379, "creation_date": 1560245023, "answer_id": 56540471, "question_id": 56540232, "link": "https://stackoverflow.com/questions/56540232/mysql-insert-values-to-column-using-c/56540471#56540471", "title": "MySQL: Insert values to column using C", "body": "<p>You can use <code>snprintf</code> or <code>sprintf</code> to form the query, before to that extract the complete data instead of single <code>char</code> from the <code>packet</code>.</p>\n\n<pre><code>char d[100], e[100], f[100];\n\n\nprintf(\"\\nResponse Code: \");\n for(i = 54; i&lt;=56; i++)\n {       \n    d[i-54] = packet[i];  //Copy the individual char\n    printf(\"%c\", packet[i]);\n }\n d[i-54] = '\\0';  //null terminate the array\n\n\n\nprintf(\"\\nCommand: \");\nfor(i = 54; i&lt;=57; i++)\n{       \n    e[i-54] = packet[i];\n    printf(\"%c\", packet[i]);\n}\ne[i-54] = '\\0';\n\n\nprintf(\"\\nResponse Parameter: \");\nfor(i = 58; i&lt;=104; i++)\n{       \n    f[i-58] = packet[i];\n    printf(\"%c\", packet[i]);\n }\n f[i-58] = '\\0';\n\n//do the same for even \"Time to live\"\n</code></pre>\n\n<p>Then form the prepared statement and execute it,</p>\n\n<pre><code>char query[300];\nsprintf(query, \"INSERT INTO SMTP VALUES (?,?,?)\");\n\nMYSQL_STMT    *stmt;\nMYSQL_BIND    bind[3];\n\nstmt = mysql_stmt_init(con);\nif (!stmt)\n{\n    return;//error\n}\nif (mysql_stmt_prepare(con, query, strlen(query)))\n{\n    return;//error\n}\n\nint dLen = strlen(d);\nbind[0].buffer_type= MYSQL_TYPE_STRING;\nbind[0].buffer= (char *)d;\nbind[0].buffer_length= STRING_SIZE;\nbind[0].is_null= 0;\nbind[0].length= &amp;dLen;\n\n int eLen = strlen(e);\nbind[1].buffer_type= MYSQL_TYPE_STRING;\nbind[1].buffer= (char *)e;\nbind[1].buffer_length= STRING_SIZE;\nbind[1].is_null= 0;\nbind[1].length= &amp;eLen ;\n\n int fLen = strlen(f);\nbind[2].buffer_type= MYSQL_TYPE_STRING;\nbind[2].buffer= (char *)f;\nbind[2].buffer_length= STRING_SIZE;\nbind[2].is_null= 0;\nbind[2].length= &amp;fLen;\n\n/* Execute the INSERT statement - 1*/\nif (mysql_stmt_execute(stmt))\n{\n  return; //error\n}\n\n mysql_stmt_close(stmt\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11567179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3972ba92d51aa24e862353ee024997?s=128&d=identicon&r=PG&f=1", "display_name": "lonesome", "link": "https://stackoverflow.com/users/11567179/lonesome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 56540471, "answer_count": 1, "score": 1, "last_activity_date": 1560285826, "creation_date": 1560244274, "last_edit_date": 1560285826, "question_id": 56540232, "link": "https://stackoverflow.com/questions/56540232/mysql-insert-values-to-column-using-c", "title": "MySQL: Insert values to column using C", "body": "<p>I have put the value coming out of the the packet[i] from the for loops in  variables d,e f,j. but when I am trying to put the values of these variables in a column of mysql I get an error</p>\n\n<blockquote>\n  <p>Unknown column 'd' in 'field list'</p>\n</blockquote>\n\n<p>My code:</p>\n\n<pre><code>printf(\"\\nResponse Code: \");\n\nfor(i = 54; i&lt;=56; i++)\n{       \n    d = packet[i];\n    printf(\"%c\", packet[i]);\n }\nprintf(\"\\nCommand: \");\nfor(i = 54; i&lt;=57; i++)\n    {       \n    e = packet[i];\n    printf(\"%c\", packet[i]);\n}\n\nprintf(\"\\nResponse Parameter: \");\n\nfor(i = 58; i&lt;=104; i++)\n{       \n    f = packet[i];\n    printf(\"%c\", packet[i]);\n}\n\nprintf(\"\\nTime to live:\");\nj = packet[22];\nprintf(\"%c\", packet[i]); \n\nif (mysql_query(con, \"CREATE TABLE SMTP(Response_Code CHAR(250) , Command CHAR(250), Response_Parameter CHAR(250), Time_to_live CHAR(250))\"))         {      \n     finish_with_error(con);\n  }\n  printf(\"here\");\n  if (mysql_query(con, \"INSERT INTO SMTP VALUES(d,e,f,j)\")) {\n  finish_with_error(con);\n  }\n</code></pre>\n\n<p>I want the values of d e f and j to be printed in these columns but I am getting error Unknown column 'd' in 'field list'</p>\n"}, {"tags": ["c++", "c", "libspatialindex"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1560241975, "post_id": 56539530, "comment_id": 99660908, "body": "You&#39;ll generally get warnings when redefining macros. Do you?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1560241976, "post_id": 56539530, "comment_id": 99660910, "body": "The macros you show are defined only <i>once</i> because of the conditions."}, {"owner": {"reputation": 33, "user_id": 11605062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624af450e724e5efab21e428432eb47d?s=128&d=identicon&r=PG&f=1", "display_name": "Amis71", "link": "https://stackoverflow.com/users/11605062/amis71"}, "edited": false, "score": 0, "creation_date": 1560242191, "post_id": 56539530, "comment_id": 99661037, "body": "@ Some programmer dude You man that sidx_dll_export in line 46 will always be defined?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1560242222, "post_id": 56539530, "comment_id": 99661062, "body": "Consider emailing the person who put their email at the top of the file? Does it build? Does it work? The various <code>if defined</code> around these might stop redefinitions. At a high level the <code>dllexport</code> is for functions  to be exported for use outside a dll/so which happens differently on *nix and Windows. How are you building it? For which platform?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1560242306, "post_id": 56539530, "comment_id": 99661106, "body": "If I paste this into MSVC, then <code>SIDX_DLL</code> is indeed defined twice, once as <code>__declspec(dllimport)</code> and once as <code>__declspec(dllexport)</code>. Yikes!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560242434, "post_id": 56539530, "comment_id": 99661175, "body": "What&#39;s missing from this is what macros are defined in the project settings when building the source files that include the header files."}, {"owner": {"reputation": 33, "user_id": 11605062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624af450e724e5efab21e428432eb47d?s=128&d=identicon&r=PG&f=1", "display_name": "Amis71", "link": "https://stackoverflow.com/users/11605062/amis71"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1560242506, "post_id": 56539530, "comment_id": 99661213, "body": "@doctorlove That is the problem, I mainly work with python and do not have to worry about macros. To speed up rtree query in python, I decided to wrap libspatialindex using ctypes. It has been only a week since I have started reading up on c++ syntax. I have not run this code and just wanted to understand its various parts."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1560242689, "post_id": 56539530, "comment_id": 99661308, "body": "Check it builds first. Then maybe try to write a dll/so yourself to understand some of it. Again at a high level some of these are for *nix and others for Windows"}, {"owner": {"reputation": 33, "user_id": 11605062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624af450e724e5efab21e428432eb47d?s=128&d=identicon&r=PG&f=1", "display_name": "Amis71", "link": "https://stackoverflow.com/users/11605062/amis71"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1560243122, "post_id": 56539530, "comment_id": 99661561, "body": "@doctorlove Well, I guess that is a good option that I have to take sooner or later."}, {"owner": {"reputation": 33, "user_id": 11605062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624af450e724e5efab21e428432eb47d?s=128&d=identicon&r=PG&f=1", "display_name": "Amis71", "link": "https://stackoverflow.com/users/11605062/amis71"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560243168, "post_id": 56539530, "comment_id": 99661592, "body": "@Someprogrammerdude How can I find out about the macros that are built during compilation and build?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1560243672, "post_id": 56539530, "comment_id": 99661883, "body": "Check makefiles and Visual Studio project files (whichever is relevant)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1560244321, "post_id": 56539530, "comment_id": 99662237, "body": "@Blaze I don&#39;t see how that can happen. Only one of those <code>#define</code> lines is executed, depending on <code>#ifdef DIX_DLL_EXPORT</code>."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1560244457, "post_id": 56539530, "comment_id": 99662308, "body": "@Barmar it happens if one of those <code>WIN</code> macros is defined, <code>__GNUC__</code> is not defined, <code>SIDX_DLL_EXPORT</code> is not defined and <code>SIDX_C_DLL</code> isn&#39;t defined either."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1560245000, "post_id": 56539530, "comment_id": 99662658, "body": "I see, it&#39;s getting defined in <code>Tools.h</code> and then getting redefined in <code>sidx_export.h</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1560245403, "post_id": 56539530, "comment_id": 99662861, "body": "@Blaze you are not supposed to just paste it and hope it will work. You need a complete environment of a project with its settings and compilation flags."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560254868, "post_id": 56540432, "comment_id": 99668292, "body": "The link given is to a draft of C99, which is obsolete.  The same provisions are also expressed by the two subsequent versions of the Standard, however."}], "tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 2, "last_activity_date": 1560246429, "last_edit_date": 1592644375, "creation_date": 1560244930, "answer_id": 56540432, "question_id": 56539530, "link": "https://stackoverflow.com/questions/56539530/is-it-possible-to-redefine-a-macro-without-the-use-of-undef/56540432#56540432", "title": "Is it possible to redefine a macro without the use of \u2018undef\u2019?", "body": "<p>If you redefine it you need to redefine it using exactly the same list of preprocessing tokens.  This is true for function-macros and for object-macros.</p>\n<p>From  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\"><code>6.10.3  Macroreplacement p2</code></a>:</p>\n<blockquote>\n<p>An  identifier  currently  defined  as  an  object-like macro  <strong>shall  not</strong>  be  redefined  by  another #define preprocessing  directive  unless  the  second  definition  is  an  object-like macro definition  and  the  two replacement  lists  are  identical.</p>\n<p>Likewise,  an  identifier  currently defined   as   a   function-like macro   <strong>shall   not</strong>   be   redefined   by   another #define preprocessing  directive  unless  the  second  definition  is  a  function-like macro  definition that  has  the  same  number  and  spelling  of  parameters,  and  the  two replacement  lists  are identical.</p>\n</blockquote>\n<p>So this definitions use <code>shall</code>.</p>\n<p>Now, from <code>4.Conformance p2</code>:</p>\n<blockquote>\n<p>If a \u2018\u2018shall\u2019\u2019or\u2018\u2018shall not\u2019\u2019requirement that appears outside of a constraint is violated, the behavior  is  undefined.</p>\n</blockquote>\n<p>This is the official definition.  So, without dropping the macro symbol out from the environment of the preprocessor (using #undef) before you redefine it you get undefined behavior.</p>\n<p>In case you find other situation in some implementations of C, this is not standardized.</p>\n<p>Correctly it would be to insert different definitions in function of some condition that you set outside:</p>\n<pre><code>#if COND\n#define M M1\n#else\n#define M M2\n#endif\n</code></pre>\n<p>If you use some library that redefines it, for sure there are some macros that set the <code>COND</code> and make the things well defined.  You need to learn how to use the library.  Redefining it with different list of pp tokens is not valid.</p>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1560260524, "last_edit_date": 1560260524, "creation_date": 1560246764, "answer_id": 56541056, "question_id": 56539530, "link": "https://stackoverflow.com/questions/56539530/is-it-possible-to-redefine-a-macro-without-the-use-of-undef/56541056#56541056", "title": "Is it possible to redefine a macro without the use of \u2018undef\u2019?", "body": "<p>No macro is illegally redefined here. Some may be defined more than once with identical definitions, which is OK. It's non-identical definitions that constitute a problem.</p>\n\n<p>The DLL itself is always built with <code>SIDX_DLL_EXPORT</code> defined by the project settings. Code that uses the DLL is built without this macro being defined.</p>\n\n<p>The second header is a part of the DLL. It is always compiled with <code>SIDX_DLL_EXPORT</code> being defined. Thus the macros defined by it, if any, are always identical to those defined in the first header. Such identical redefinition does not constitute a problem.</p>\n"}], "owner": {"reputation": 33, "user_id": 11605062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624af450e724e5efab21e428432eb47d?s=128&d=identicon&r=PG&f=1", "display_name": "Amis71", "link": "https://stackoverflow.com/users/11605062/amis71"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 56541056, "answer_count": 2, "score": 2, "last_activity_date": 1560260524, "creation_date": 1560241792, "question_id": 56539530, "link": "https://stackoverflow.com/questions/56539530/is-it-possible-to-redefine-a-macro-without-the-use-of-undef", "title": "Is it possible to redefine a macro without the use of \u2018undef\u2019?", "body": "<p>I am trying to make sense of the <a href=\"https://libspatialindex.org/doxygen/\" rel=\"nofollow noreferrer\">libspatialindex</a> source code. Being new to c++, I have difficulty wrapping my head around the concept of macros. \nThe library\u2019s API wrapper for C, <a href=\"https://libspatialindex.org/doxygen/sidx__api_8cc_source.html#l01663\" rel=\"nofollow noreferrer\">sidx_api.cc</a>, directly and indirectly includes numerous headers two of which seemingly define the same macro, concerned with interfacing a dynamic library, without \u2018undef\u2019:</p>\n\n<p><a href=\"https://libspatialindex.org/doxygen/Tools_8h_source.html\" rel=\"nofollow noreferrer\">Tools.h</a></p>\n\n<pre><code>45 #if (defined _WIN32 || defined _WIN64 || defined WIN32 || defined WIN64) &amp;&amp; !defined __GNUC__\n46  #ifdef SIDX_DLL_EXPORT\n47  #define SIDX_DLL __declspec(dllexport)\n48  #else\n49  #define SIDX_DLL __declspec(dllimport)\n50  #endif\n51 \n52  // Nuke this annoying warning. See http://www.unknownroad.com/rtfm/VisualStudio/warningC4251.html\n53 #pragma warning( disable: 4251 )\n54 \n55 #else\n56  #define SIDX_DLL\n57 #endif\n</code></pre>\n\n<p><a href=\"https://libspatialindex.org/doxygen/sidx__export_8h_source.html\" rel=\"nofollow noreferrer\">sidx_export.h</a></p>\n\n<pre><code>29 #pragma once\n30 \n31 #ifndef SIDX_C_DLL  \n32 #if defined(_MSC_VER)\n33 # define SIDX_C_DLL __declspec(dllexport)\n34 # define SIDX_DLL __declspec(dllexport)\n35 #else\n36 # if defined(USE_GCC_VISIBILITY_FLAG)\n37 # define SIDX_C_DLL __attribute__ ((visibility(\"default\")))\n38 # define SIDX_DLL __attribute__ ((visibility(\"default\")))\n39 # else\n40 # define SIDX_C_DLL\n41 # define SIDX_DLL\n42 # endif\n43 #endif\n44 #endif\n</code></pre>\n\n<p>I believe that redefining a macro without \u2018undef\u2019 is problematic, e.g., as discussed <a href=\"https://stackoverflow.com/questions/54943619/what-happens-if-i-redefine-a-macro-in-c-without-undef-directive\">here</a> and <a href=\"https://stackoverflow.com/questions/36976550/define-many-times-without-undef-is-it-legal\">here</a>.\nAm I missing something here?\nThanks.</p>\n"}]