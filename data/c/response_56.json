[{"tags": ["c", "linux", "sockets", "tcp", "port"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1454546732, "post_id": 35189924, "comment_id": 58098244, "body": "Your code is lacking all error checking. Without it, debugging is just a guessing game. Any system call that returns -1 should cause you to call <code>perror()</code> or friends and also not to continue as though it had succeeded."}, {"owner": {"reputation": 826, "user_id": 2289311, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3376cf8ad13e7af6a2acc4992a4ac109?s=128&d=identicon&r=PG", "display_name": "Howard Shane", "link": "https://stackoverflow.com/users/2289311/howard-shane"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1454564859, "post_id": 35189924, "comment_id": 58103701, "body": "That is just prototype code. But anyway, thanks for your suggestion to check the error code."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1454569626, "post_id": 35189924, "comment_id": 58105808, "body": "Don&#39;t kid yourself. You only put the error checking in after you&#39;ve debugged it? You need the error messages <i>now.</i> That&#39;s why you&#39;ve had to ask the question."}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 2289311, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3376cf8ad13e7af6a2acc4992a4ac109?s=128&d=identicon&r=PG", "display_name": "Howard Shane", "link": "https://stackoverflow.com/users/2289311/howard-shane"}, "edited": false, "score": 0, "creation_date": 1454546178, "post_id": 35189992, "comment_id": 58098082, "body": "Thanks - I did that before but looks does not work. I just pasted my code, can you help me check it again?"}, {"owner": {"reputation": 826, "user_id": 2289311, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3376cf8ad13e7af6a2acc4992a4ac109?s=128&d=identicon&r=PG", "display_name": "Howard Shane", "link": "https://stackoverflow.com/users/2289311/howard-shane"}, "edited": false, "score": 0, "creation_date": 1454564820, "post_id": 35189992, "comment_id": 58103675, "body": "Sorry, it is my mistake. Yes, your solution works:) I made the change but I did not &quot;make install&quot; of my new bits, so when run from cmd line, it runs previous installed version, not my changed version."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1454546780, "last_edit_date": 1454546780, "creation_date": 1454543234, "answer_id": 35189992, "question_id": 35189924, "link": "https://stackoverflow.com/questions/35189924/linux-c-socket-how-to-specify-tcp-client-port-with-structure-sockaddr-storage/35189992#35189992", "title": "Linux, C, socket: how to specify TCP client port with structure sockaddr_storage", "body": "<blockquote>\n  <p>I would like to bind those client sockets to different (randomized) TCP ports</p>\n</blockquote>\n\n<p>That happens automatically when you call <code>connect()</code> without calling <code>bind()</code> first. You don't need to write any code for this, and <code>sockaddr_storage</code> therefore doesn't come into it at all.</p>\n"}], "owner": {"reputation": 826, "user_id": 2289311, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3376cf8ad13e7af6a2acc4992a4ac109?s=128&d=identicon&r=PG", "display_name": "Howard Shane", "link": "https://stackoverflow.com/users/2289311/howard-shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454546780, "creation_date": 1454542915, "last_edit_date": 1454546148, "question_id": 35189924, "link": "https://stackoverflow.com/questions/35189924/linux-c-socket-how-to-specify-tcp-client-port-with-structure-sockaddr-storage", "title": "Linux, C, socket: how to specify TCP client port with structure sockaddr_storage", "body": "<p>I am trying to create Linux tool with multiple TCP connections, which supports both IPv4 and IPv6 so I choose to use \"sockaddr_storage\".</p>\n\n<p>Now, my question is, how do I bind client side socket to a specified (or random) TCP port?</p>\n\n<p>For TCP client side, in one thread, if I just create 10 sockets and then connect() to server, then those 10 sockets will use sequential TCP ports in client side, for example, starting from 54594, then 54596, 54600, 54602, etc.</p>\n\n<p>Now, I would like to bind those client sockets to different (randomized) TCP ports, how do I do with sockaddr_storage?</p>\n\n<p>Thanks!</p>\n\n<p>=============adding code ============</p>\n\n<pre><code>struct sockaddr_storage local_addr; \n\nsockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol)    \n\n(*(struct sockaddr_in*)&amp;local_addr).sin_port = 0;\nlocal_addr_size = sizeof(local_addr);\nbind(sockfd, (struct sockaddr *)&amp;local_addr, local_addr_size);\n\n............\nconnect(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen)\n</code></pre>\n"}, {"tags": ["c", "memory-management", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1454542798, "post_id": 35189840, "comment_id": 58096890, "body": "I don&#39;t think your <code>return pole;</code> is in right position."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454542888, "post_id": 35189840, "comment_id": 58096927, "body": "They say <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">you shouldn&#39;t cast the result of <code>malloc()</code> in C</a>."}, {"owner": {"reputation": 2295, "user_id": 1015722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95bc6501f8452eb4b459bf2dc4de5a96?s=128&d=identicon&r=PG", "display_name": "Jeremy Rodi", "link": "https://stackoverflow.com/users/1015722/jeremy-rodi"}, "edited": false, "score": 0, "creation_date": 1454543764, "post_id": 35189840, "comment_id": 58097266, "body": "What operating system are you running?"}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 2, "creation_date": 1454544547, "post_id": 35189840, "comment_id": 58097533, "body": "If the <code>return pole</code> is not a pasting mistake, then your problem is not memory leak, but free some random memory."}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 0, "creation_date": 1454544683, "post_id": 35189840, "comment_id": 58097573, "body": "And, you should show your entire main function. The code you shown has 26 allocs only."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454553934, "post_id": 35189840, "comment_id": 58100269, "body": "1) this line: ` return pole;` should be after the end of the <code>for()</code> loop, not in the middle of it. 2) in C, do not cast the returned value from <code>malloc()</code>. the return type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code making it more difficult to understand, debug, maintain. 3) always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1458479104, "post_id": 35189840, "comment_id": 59868751, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/35871265/c-valgrind-shows-memory-leak-in-hello-world\">c++ valgrind shows memory leak in hello world</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1454553785, "creation_date": 1454553785, "answer_id": 35191549, "question_id": 35189840, "link": "https://stackoverflow.com/questions/35189840/still-reachable-blocks-valgrind/35191549#35191549", "title": "Still reachable blocks - valgrind", "body": "<p>after correcting the <code>mallocator()</code> function, as specified in the comments.</p>\n\n<p>Then the <code>main()</code> function can free the allocated memory via:</p>\n\n<pre><code>for( int i=0; i&lt;RADEK; i++ )\n{\n    free( pole[i]);\n}\nfree( pole );\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5880517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48258ffb14cf0f032abb0b8f1fd35b91?s=128&d=identicon&r=PG&f=1", "display_name": "Adam J", "link": "https://stackoverflow.com/users/5880517/adam-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454663230, "creation_date": 1454542489, "last_edit_date": 1454663230, "question_id": 35189840, "link": "https://stackoverflow.com/questions/35189840/still-reachable-blocks-valgrind", "title": "Still reachable blocks - valgrind", "body": "<p>Hi I have problem with freeing array in my code.</p>\n\n<pre><code> int main(){\nint **pole = mallocator(); ...\n</code></pre>\n\n<p>In main I call function which allocates memory and looks this:</p>\n\n<pre><code>int ** mallocator(){\nint **pole = (int **) malloc(sizeof(int*)*RADEK);\n\nfor(int i=0; i &lt; RADEK; i++){ \n    pole[i] = (int *) malloc(sizeof(int)*RADEK); \n\n }\n\nreturn pole;\n}\n</code></pre>\n\n<p>And in the end i free it with this function:</p>\n\n<pre><code>void freedom(int **pole){\n\nfor(int i=0; i &lt; RADEK; i++){ \n    printf(\"%d\\n\", i);\n    free(pole[i]);\n}\nfree(pole);\n}\n</code></pre>\n\n<p>RADEK is constant with value 25.\nI thought it worked, but valgrind says I have 27 allocs and 26 frees and says that one block is still reachable. Any ideas on how to achieve no leaks? Thanks</p>\n\n<p>EDIT:The return line shouldn't have been in for cycle that was badly copied, thanks for noticing. Also it probably was a bug of compiler. If I use gcc instead of g++ it says there are no leaks, but when I compile with g++ it says static still reachable: 72,704 even when I don't use malloc in the code. </p>\n"}, {"tags": ["c", "gcc", "assembly", "inline-assembly"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1454541793, "post_id": 35189619, "comment_id": 58096512, "body": "You can&#39;t make while loops in assembly."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 3, "creation_date": 1454541809, "post_id": 35189619, "comment_id": 58096519, "body": "You are missing a colon to make it a label: <code>.while%=:</code>. Note that <code>-S</code> does not assemble, it just produces assembly output so it can contain errors too."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454542437, "post_id": 35189619, "comment_id": 58096751, "body": "That is not a <code>while</code> loop, but simple labels and jumps."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1454544720, "post_id": 35189619, "comment_id": 58097579, "body": "@AlphaBetaGamma Ah! That&#39;s supposed to be a label. Typically, you don&#39;t indent labels and if you make a local label on x86, it should begin with <code>.L</code>, so <code>.Lwhile:</code>. I thought that was an attempt to use a nonexisting pseudo-opcode named <code>.while</code>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1454545835, "post_id": 35189619, "comment_id": 58097975, "body": "Naming the label <code>while</code> is misleading. Yours is a <code>do {} while()</code>-loop, which makes a <i>significant difference</i> whenever your program is called with a count of zero. Also, your input operands all being <code>&quot;m&quot;</code> is <i>extremely</i> suspicious."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459731774, "post_id": 35189619, "comment_id": 60403044, "body": "Instead of <code>movsd</code> / <code>unpcklpd</code>, use SSE3 <code>movddup</code> to do a broadcast-load.  You would probably also get better results from splitting this into two <code>asm</code> statements.   One statement holding the loop, where you ask for the input params you&#39;re going to modify using stuff like <code>[kk] &quot;+r&quot;(kk)</code>, and with <code>__m128d C0_tmp</code> output operands like <code>[C0] &quot;=x&quot; (C0_tmp)</code>.  Then do the epilogue / store part with intrinsics, or with another asm statement that takes those same vectors as input operands, and has memory output operands. That lets the compiler handle integer reg allocation, and will work for 64b"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1459732834, "post_id": 35189619, "comment_id": 60403283, "body": "Any time you&#39;re writing <code>mov</code> instructions in inline asm, you should look for a way to let the compiler do it, so it can avoid unnecessary instructions in some cases.  e.g. for x86-64, the args will already all be in integer registers, so it&#39;s silly to do a bunch of <code>mov reg,reg</code> instead of just letting the compiler choose regs for you.  (see <a href=\"http://stackoverflow.com/tags/x86/info\">the x86 tag wiki</a> for a link to my inline asm examples of how to let the compiler do as much as possible.)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459782340, "post_id": 35189619, "comment_id": 60428596, "body": "@AlphaBetaGamma: &quot;the CPU&quot; only does what it&#39;s told, so that makes no sense.  Your inline asm looks correct.  Since you declared clobbers on all the non-operand regs you use by name, the compiler will put things somewhere else, like in a register not clobbered or used for an operand by your inline asm.  In your case, before the inline asm, the compile will store all 6 function args to memory, because your inline asm foolishly requires them to be memory operands, instead of using <code>&quot;rmi&quot;</code> constraints.  (A <code>&quot;+r&quot;</code> constraint and then using the reg the compiler chose is best, of course)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459782465, "post_id": 35189619, "comment_id": 60428653, "body": "Oh, you are missing a <code>&quot;memory&quot;</code> clobber, so the compiler isn&#39;t required to have done all the stores into the array that you loop over.  When you access memory other than with a memory input or read-write operand, you need a <code>&quot;memory&quot;</code> clobber.  The gcc docs have an example of using a struct as a dummy operand to tell the compiler which memory you modify, but a <code>&quot;memory&quot;</code> clobber (compiler memory barrier) is pretty cheap compared to a whole loop."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459783057, "post_id": 35189619, "comment_id": 60429092, "body": "If you don&#39;t declare a <code>&quot;memory&quot;</code> clobber, at some point in the future your code is going to get inlined and optimized around, and something will break (e.g. a store to <code>C[i]</code> will be done after your inline asm, or a load from it will be done before).  That&#39;s the thing with inline asm: if you get the constraints wrong, it can work perfectly in testing because gcc happens to do what the asm needs anyway.  The memory clobber is a totally separate issue from not forcing the compiler to waste instructions getting the pointers operands into the asm."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459783083, "post_id": 35189619, "comment_id": 60429113, "body": "@AlphaBetaGamma: post it on <a href=\"https://codereview.stackexchange.com\">Code Review</a> and tag me in a note here so I&#39;ll notice it.  Err, if it&#39;s not working, then open a new question here on SO.  This question needs to stay being about the <code>.while:</code> problem, to not invalidate the answer."}], "answers": [{"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 58770, "user_id": 4891738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kE2lh.jpg?s=128&g=1", "display_name": "\u674e\u54f2\u6e90", "link": "https://stackoverflow.com/users/4891738/%e6%9d%8e%e5%93%b2%e6%ba%90"}, "edited": false, "score": 0, "creation_date": 1454544770, "post_id": 35189981, "comment_id": 58097596, "body": "You&#39;re welcome! Enjoy sse2/xmm, it&#39;s fun [<i>after</i> it&#39;s been debugged :-)]."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1454548021, "post_id": 35189981, "comment_id": 58098678, "body": "@CraigEstey Yeah! I recently made a function <a href=\"https://www.reddit.com/r/asm/comments/43qma0\" rel=\"nofollow noreferrer\">79 times faster</a> by implementing it in AVX assembly instead of C code."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1454548789, "post_id": 35189981, "comment_id": 58098897, "body": "@FUZxxl Wow! You&#39;re a man after my own heart! My cpu is too old for AVX but I&#39;ve been itching to give it a try. I also commend you for having the sense to code this in asm [in a <code>.s</code>] instead of [like many do] try to stuff it into [<code>gcc</code>] inline asm. Finally, Intel is providing a rich enough instruction set to allow really good things (e.g. triple arg alone is worth the price of admission)."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 2, "last_activity_date": 1454544044, "last_edit_date": 1454544044, "creation_date": 1454543175, "answer_id": 35189981, "question_id": 35189619, "link": "https://stackoverflow.com/questions/35189619/inline-assembly-in-c-assembler-messages-error-unknown-pseudo-op/35189981#35189981", "title": "(inline assembly in C) Assembler messages: Error: unknown pseudo-op:", "body": "<p>Because your <code>.while</code> is not defined as a label, it's being seen as a [non-existent] pseudo-op.</p>\n\n<p>Change:</p>\n\n<pre><code>\".while%=\\n\\t\"\n</code></pre>\n\n<p>Into:</p>\n\n<pre><code>\".while%=:\\n\\t\"\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Per your request.</p>\n\n<p>A \"pseudo-op\" is [terminology for] an assember directive that doesn't correspond to an instruction.</p>\n\n<p>Some examples:</p>\n\n<p><code>.globl main</code> to specify that the <code>main</code> label is a global variable.</p>\n\n<p><code>.text</code> to specify that what follows should be placed in the \"text\" segment (likewise for <code>.data</code>).</p>\n\n<p>The <code>.</code> prefix is [generally] reserved for pseudo ops. That's why you got the <code>Error: unknown pseudo-op:</code> message.</p>\n\n<p>If you had done <code>\"while%=\\n\\t\"</code> instead [still wrong because there was no <code>:</code> to denote a label], you would have gotten a different message: <code>Error: no such instruction:</code></p>\n"}], "owner": {"reputation": 58770, "user_id": 4891738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kE2lh.jpg?s=128&g=1", "display_name": "\u674e\u54f2\u6e90", "link": "https://stackoverflow.com/users/4891738/%e6%9d%8e%e5%93%b2%e6%ba%90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6116, "favorite_count": 1, "accepted_answer_id": 35189981, "answer_count": 1, "score": 2, "last_activity_date": 1454544044, "creation_date": 1454541384, "question_id": 35189619, "link": "https://stackoverflow.com/questions/35189619/inline-assembly-in-c-assembler-messages-error-unknown-pseudo-op", "title": "(inline assembly in C) Assembler messages: Error: unknown pseudo-op:", "body": "<p>I have written a short C \"wrapper\" function for an <em>asm</em> inline assembly, as below. The assembly code consists of a while loop, computing several vector dot product using SSE2. I am using GCC 4.8.4 on Ubuntu 14.04 on an x86. The following code can be assembled \"without problem\" under</p>\n\n<p>gcc -fpic -O2 -msse2 -S foo.c</p>\n\n<p>But when I do</p>\n\n<p>gcc -c foo.s</p>\n\n<p>an error is triggered:</p>\n\n<p><strong>foo.c: Assembler messages:<br>\nfoo.c:2: Error: unknown pseudo-op: `.while5'</strong></p>\n\n<p>I checked the assembler ouput \"foo.s\" and found something strange.</p>\n\n<p>C file \"foo.c\":</p>\n\n<pre><code>#include &lt;emmintrin.h&gt;\n\nvoid foo (int kk, double *A, double *B, double *ALPHA, double *C, int ldc) {\n   asm(\"movl %0, %%ecx\\n\\t\"  /* kk -&gt; %ecx */\n       \"movl %3, %%eax\\n\\t\"  /* A -&gt; %eax */\n       \"movl %4, %%edx\\n\\t\"  /* B -&gt; %edx */\n       /* a while-loop */\n       \".while%=\\n\\t\"\n       \"movsd   (%%edx), %%xmm5\\n\\t\"\n       \"unpcklpd %%xmm5, %%xmm5\\n\\t\"\n       \"movapd  %%xmm5, %%xmm6\\n\\t\"\n       \"movapd  (%%eax), %%xmm4\\n\\t\"\n       \"mulpd   %%xmm4, %%xmm6\\n\\t\"\n       \"movapd  16(%%eax), %%xmm7\\n\\t\"\n       \"addl    $32, %%eax\\n\\t\"\n       \"addpd   %%xmm6, %%xmm0\\n\\t\"\n       \"mulpd   %%xmm7, %%xmm5\\n\\t\"\n       \"addpd   %%xmm5, %%xmm1\\n\\t\"\n       \"movsd   8(%%edx), %%xmm6\\n\\t\"\n       \"addl    $16, %%edx\\n\\t\"\n       \"unpcklpd %%xmm6, %%xmm6\\n\\t\"\n       \"mulpd   %%xmm6, %%xmm4\\n\\t\"\n       \"addpd   %%xmm4, %%xmm2\\n\\t\"\n       \"mulpd   %%xmm6, %%xmm7\\n\\t\"\n       \"addpd   %%xmm7, %%xmm3\\n\\t\"\n       \"subl    $1, %%ecx\\n\\t\"  /* kk-- */\n       \"testl   %%ecx, %%ecx\\n\\t\"  /* kk = 0 ? */\n       \"jne .while%=\\n\\t\"\n        /* other input operands passing */\n       \"movl %5, %%ecx\\n\\t\"  /* C -&gt; %ecx */\n       \"movl %1, %%eax\\n\\t\"  /* ALPHA -&gt; %eax, then C0 -&gt; %eax */\n       \"movl %2, %%edx\\n\\t\"  /* ldc -&gt; %edx */\n       /* write-back */\n       \"movsd (%%eax), %%xmm7\\n\\t\"\n       \"unpcklpd %%xmm7, %%xmm7\\n\\t\"\n       \"leal (%%ecx,%%edx,8), %%eax\\n\\t\"  /* C0=C+ldc */\n       \"mulpd %%xmm7, %%xmm0\\n\\t\"\n       \"addpd (%%ecx), %%xmm0\\n\\t\"\n       \"movapd %%xmm0, (%%ecx)\\n\\t\"\n       \"mulpd %%xmm7, %%xmm2\\n\\t\"\n       \"addpd (%%eax), %%xmm2\\n\\t\"\n       \"movapd %%xmm2, (%%eax)\\n\\t\"\n       \"mulpd %%xmm7, %%xmm1\\n\\t\"\n       \"addpd 16(%%ecx), %%xmm1\\n\\t\"\n       \"movapd %%xmm1, 16(%%ecx)\\n\\t\"\n       \"mulpd %%xmm7, %%xmm3\\n\\t\"\n       \"addpd 16(%%eax), %%xmm3\\n\\t\"\n       \"movapd %%xmm3, 16(%%eax)\\n\\t\"\n       : /* no output operands */\n       : \"m\"(kk), \"m\"(ALPHA), \"m\"(ldc), \"m\"(A), \"m\"(B), \"m\"(C)  /* input operands */\n       : \"eax\", \"edx\", \"ecx\", \"xmm0\", \"xmm1\", \"xmm2\", \"xmm3\", \"xmm4\", \"xmm5\", \"xmm6\", \"xmm7\"  /* clobbers */ );\n   }\n</code></pre>\n\n<p>assembler output (the while-loop looks odd!)</p>\n\n<pre><code>.LFB503:\n            .cfi_startproc\n #APP\n # 4 \"foo.c\" 1\n            movl 4(%esp), %ecx\n            movl 8(%esp), %eax\n            movl 12(%esp), %edx\n            .while5\n            movsd   (%edx), %xmm5\n            unpcklpd %xmm5, %xmm5\n            movapd  %xmm5, %xmm6\n            movapd  (%eax), %xmm4\n            mulpd   %xmm4, %xmm6\n            movapd  16(%eax), %xmm7\n            addl    $32, %eax\n            addpd   %xmm6, %xmm0\n            mulpd   %xmm7, %xmm5\n            addpd   %xmm5, %xmm1\n            movsd   8(%edx), %xmm6\n            addl    $16, %edx\n            unpcklpd %xmm6, %xmm6\n            mulpd   %xmm6, %xmm4\n            addpd   %xmm4, %xmm2\n            mulpd   %xmm6, %xmm7\n            addpd   %xmm7, %xmm3\n            subl    $1, %ecx\n            testl   %ecx, %ecx\n            jne .while5\n            movl 20(%esp), %ecx\n            movl 16(%esp), %eax\n            movl 24(%esp), %edx\n            movsd (%eax), %xmm7\n            unpcklpd %xmm7, %xmm7\n            leal (%ecx,%edx,8), %eax\n            mulpd %xmm7, %xmm0\n            addpd (%ecx), %xmm0\n            movapd %xmm0, (%ecx)\n            mulpd %xmm7, %xmm2\n            addpd (%eax), %xmm2\n            movapd %xmm2, (%eax)\n            mulpd %xmm7, %xmm1\n            addpd 16(%ecx), %xmm1\n            movapd %xmm1, 16(%ecx)\n            mulpd %xmm7, %xmm3\n            addpd 16(%eax), %xmm3\n            movapd %xmm3, 16(%eax)      \n# 0 \"\" 2\n#NO_APP\n            ret\n            .cfi_endproc\n</code></pre>\n\n<p>Can anyone kindly refer to me what has happened? I don't think it is my compiler's problem. There must be something wrong with my code. Thx!</p>\n"}, {"tags": ["c++", "c", "linux", "xinput"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1454540928, "post_id": 35189264, "comment_id": 58096203, "body": "SDL is at the top of your list, GLFW or SFML also work."}], "answers": [{"comments": [{"owner": {"reputation": 42418, "user_id": 912144, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/d17cb5b704821f11179ce281b8cae25e?s=128&d=identicon&r=PG", "display_name": "Shahbaz", "link": "https://stackoverflow.com/users/912144/shahbaz"}, "edited": false, "score": 0, "creation_date": 1454540711, "post_id": 35189374, "comment_id": 58096102, "body": "<code>ofxGamePad</code> <i>is</i> C++. I&#39;d have to study how it works, but it seems promising!"}], "tags": [], "owner": {"reputation": 81, "user_id": 3716731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5762ab993e86df07404e08adfac3efb6?s=128&d=identicon&r=PG&f=1", "display_name": "gdunstone", "link": "https://stackoverflow.com/users/3716731/gdunstone"}, "is_accepted": false, "score": 2, "last_activity_date": 1454540168, "creation_date": 1454540168, "answer_id": 35189374, "question_id": 35189264, "link": "https://stackoverflow.com/questions/35189264/whats-the-equivalent-of-xinput-functions-in-linux/35189374#35189374", "title": "What&#39;s the equivalent of XInput* functions in Linux?", "body": "<p>So I know its not pure C++ however there is a great addon for openFrameworks called <a href=\"https://github.com/underdoeg/ofxGamepad\" rel=\"nofollow\">ofxGamePad</a> that is compatible with linux. I have had success using it with linux for a gamepad.</p>\n"}, {"comments": [{"owner": {"reputation": 42418, "user_id": 912144, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/d17cb5b704821f11179ce281b8cae25e?s=128&d=identicon&r=PG", "display_name": "Shahbaz", "link": "https://stackoverflow.com/users/912144/shahbaz"}, "edited": false, "score": 0, "creation_date": 1454541335, "post_id": 35189532, "comment_id": 58096364, "body": "Didn&#39;t know SDL supports it. If it works, I agree, that would be the best option."}], "tags": [], "owner": {"reputation": 5978, "user_id": 231717, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/90bd57ca46c78c121d8da926463f7474?s=128&d=identicon&r=PG", "display_name": "smerlin", "link": "https://stackoverflow.com/users/231717/smerlin"}, "is_accepted": true, "score": 3, "last_activity_date": 1454541682, "last_edit_date": 1454541682, "creation_date": 1454540855, "answer_id": 35189532, "question_id": 35189264, "link": "https://stackoverflow.com/questions/35189264/whats-the-equivalent-of-xinput-functions-in-linux/35189532#35189532", "title": "What&#39;s the equivalent of XInput* functions in Linux?", "body": "<p>You can either:</p>\n\n<ol>\n<li>use the <a href=\"https://wiki.libsdl.org/CategoryGameController\" rel=\"nofollow\">SDL library</a></li>\n<li>use the functions in <code>linux/joystick.h</code> yourself</li>\n<li>find some other library which abstracts (3) for you like <a href=\"https://github.com/elanthis/gamepad\" rel=\"nofollow\">this</a> or the one linked by user3716731.</li>\n</ol>\n\n<p>The (1-2) solutions are mainly <code>C</code>, but so is the XInput API, so you probably can deal with it.</p>\n\n<p>I would probably go with number 1, because that approach should have the best documentation.</p>\n"}], "owner": {"reputation": 42418, "user_id": 912144, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/d17cb5b704821f11179ce281b8cae25e?s=128&d=identicon&r=PG", "display_name": "Shahbaz", "link": "https://stackoverflow.com/users/912144/shahbaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2951, "favorite_count": 0, "accepted_answer_id": 35189532, "answer_count": 2, "score": 0, "last_activity_date": 1454541682, "creation_date": 1454539602, "question_id": 35189264, "link": "https://stackoverflow.com/questions/35189264/whats-the-equivalent-of-xinput-functions-in-linux", "title": "What&#39;s the equivalent of XInput* functions in Linux?", "body": "<p>I'm porting an application that uses the Xbox controller to Linux. On windows, it essentially just uses <code>XInputGetState()</code> to read the state of the controller, so I'm looking for a replacement for that function on Linux.</p>\n\n<p>I see that <a href=\"https://github.com/wine-mirror/wine/blob/9bd963065b1fb7b445d010897d5f84967eadf75b/dlls/xinput1_3/xinput1_3_main.c#L68\" rel=\"nofollow\">wine hasn't implemented <code>XInputGetState()</code></a>, but at the same time there are a large number of games supporting the Xbox controller on Linux, so it's doable.</p>\n\n<p>Does anyone know what library can be used to interact with an Xbox controller on Linux?</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1454538811, "post_id": 35189029, "comment_id": 58095327, "body": "Can you rely on each line to have exactly six numbers, as in the example?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1454538909, "post_id": 35189029, "comment_id": 58095368, "body": "Use <code>fgets()</code> to read each line, <code>strtok()</code> to split it at whitespace, and <code>atof()</code> to convert each string to floating point."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1454538938, "post_id": 35189029, "comment_id": 58095378, "body": "Do you mean to store all the numbers from all the lines in the one long 1D array?  Or do you mean to fill a 2D array?  Or maybe with each line you overwrite the values from the previous line?"}, {"owner": {"reputation": 11, "user_id": 5572906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db219eeb3e913377d831a73c2b736a0a?s=128&d=identicon&r=PG&f=1", "display_name": "Kxzym", "link": "https://stackoverflow.com/users/5572906/kxzym"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1454538989, "post_id": 35189029, "comment_id": 58095407, "body": "Yes @JohnBollinger every line will have the same amount of numbers"}, {"owner": {"reputation": 11, "user_id": 5572906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db219eeb3e913377d831a73c2b736a0a?s=128&d=identicon&r=PG&f=1", "display_name": "Kxzym", "link": "https://stackoverflow.com/users/5572906/kxzym"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1454539026, "post_id": 35189029, "comment_id": 58095422, "body": "Thanks @Barmar I&#39;ll take a look to that"}, {"owner": {"reputation": 11, "user_id": 5572906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db219eeb3e913377d831a73c2b736a0a?s=128&d=identicon&r=PG&f=1", "display_name": "Kxzym", "link": "https://stackoverflow.com/users/5572906/kxzym"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1454539153, "post_id": 35189029, "comment_id": 58095477, "body": "@JohnBollinger I&#39;d like to save them in a 2D vector. In this example it would be like content[2][6], so the first row would be filled with the 6 numbers from the first line and the second row with the 6 numbers from the second line."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1454539827, "post_id": 35189029, "comment_id": 58095775, "body": "the &#39;with different precision&#39; phrase in the question suggests that there is more to this question"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454540124, "post_id": 35189029, "comment_id": 58095871, "body": "You should post your own answer as an <i>answer</i>, not a continuation of the question.  Your answer has weaknesses."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1454545748, "post_id": 35189029, "comment_id": 58097942, "body": "In your answer, it would be more reliable (better accuracy) to use type <code>double</code> instead of <code>float</code>.  You should also check the return values from <code>fscanf</code> to detect parsing errors or invalid input files."}], "answers": [{"tags": [], "owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "is_accepted": false, "score": 1, "last_activity_date": 1454539671, "last_edit_date": 1454539671, "creation_date": 1454539016, "answer_id": 35189133, "question_id": 35189029, "link": "https://stackoverflow.com/questions/35189029/read-floats-from-file-with-different-precision-in-c/35189133#35189133", "title": "Read floats from file with different precision in C", "body": "<p>Uses <a href=\"http://www.cplusplus.com/reference/cstdio/fgets/\" rel=\"nofollow\">fgets</a> go get a line of your file in a string. Than use <a href=\"http://www.cplusplus.com/reference/cstdio/sscanf/\" rel=\"nofollow\">sscanf</a> to parse the float into variables.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1454539780, "last_edit_date": 1454539780, "creation_date": 1454539369, "answer_id": 35189212, "question_id": 35189029, "link": "https://stackoverflow.com/questions/35189029/read-floats-from-file-with-different-precision-in-c/35189212#35189212", "title": "Read floats from file with different precision in C", "body": "<p>There are many ways to do it.  If you can rely on the input to be formatted as you describe, then <code>scanf()</code> is probably the easiest way to do the job.  The fact that the details of each number's formatting varies is no obstacle.  For example:</p>\n\n<pre><code>float array[2][6];\n\nfor (int i = 0; i &lt; 2; i += 1) {\n    int result = scanf(\"%f%f%f%f%f%f\", &amp;array[i][0], &amp;array[i][1], &amp;array[i][2],\n            &amp;array[i][3], &amp;array[i][4], &amp;array[i][5]);\n\n    if (result &lt; 6) {\n        /* handle error or EOF or malformed input */\n    }\n}\n</code></pre>\n\n<p><code>scanf()</code> automatically ignores leading whitespace, including line breaks, before most field types and breaks fields of most types at whitespace.  It returns the number of fields successfully scanned and assigned, or <code>EOF</code> if \nan error occurs or if the end of the file is reached before any field is successfully matched.</p>\n"}], "owner": {"reputation": 11, "user_id": 5572906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db219eeb3e913377d831a73c2b736a0a?s=128&d=identicon&r=PG&f=1", "display_name": "Kxzym", "link": "https://stackoverflow.com/users/5572906/kxzym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 35189212, "answer_count": 2, "score": -1, "last_activity_date": 1454539982, "creation_date": 1454538586, "last_edit_date": 1454539982, "question_id": 35189029, "link": "https://stackoverflow.com/questions/35189029/read-floats-from-file-with-different-precision-in-c", "title": "Read floats from file with different precision in C", "body": "<p>If I have a file that contains lines with float numbers like this:</p>\n\n<pre><code>4.5 -3.2 3.3 5.62 0.56 3.231\n5.632 -4.56 2 5.8212 4 6.7\n</code></pre>\n\n<p>How can I read it line by line and splitting the numbers to save them in an array (they are separated by 1 tabulator). </p>\n\n<p>Thank you</p>\n\n<p>EDIT: </p>\n\n<p>I did the following and it works, thanks everyone for helping</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main(){\n    float array[2][6];\n    FILE *f;\n    f=fopen(\"input.txt\", \"r\");\n    int i = 0;\n    int j = 0;\n    for(i=0; i&lt;2; i++){\n        for(j=0;j&lt;6;j++){\n            fscanf(f,\"%f\",&amp;array[i][j]);\n        }\n    }\n\n    for(i=0; i&lt;2; i++){\n        for(j=0;j&lt;6;j++){\n            printf(\"%f \", array[i][j]);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "c", "arrays", "bit-manipulation"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 5, "creation_date": 1454536409, "post_id": 35188340, "comment_id": 58094121, "body": "Do you want your homework solved in python, c or c++? Or maybe you just want all three?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1454536682, "post_id": 35188340, "comment_id": 58094262, "body": "All you need is a decorator that redirects accesses, that way you don&#39;t have to shuffle the data at all. That said, for larger data structures, you can first rotate tiles of N by N bits by their center and then rotate them around the data structure&#39;s center. Similarly to the bit order inversion that first swaps high and low half and then inverts these."}, {"owner": {"reputation": 31, "user_id": 5880052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daefcb49e5c0adf3c0e4802744017fd?s=128&d=identicon&r=PG&f=1", "display_name": "user5880052", "link": "https://stackoverflow.com/users/5880052/user5880052"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1454536764, "post_id": 35188340, "comment_id": 58094301, "body": "@4386427 Thanks for the offer, but this is not homework related."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1454536893, "post_id": 35188340, "comment_id": 58094383, "body": "Too bad you are only allowed to add five tags. TO narrow down your question, you should add C#, Fortran, Algol and OcamML and any other PL you ever heard about."}, {"owner": {"reputation": 31, "user_id": 5880052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daefcb49e5c0adf3c0e4802744017fd?s=128&d=identicon&r=PG&f=1", "display_name": "user5880052", "link": "https://stackoverflow.com/users/5880052/user5880052"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1454537160, "post_id": 35188340, "comment_id": 58094520, "body": "@Ulrich Eckhardt So for clarification, i do want to access bits, and not bytes. I cant se how one would do that efficiently with a python decorator..."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1454537234, "post_id": 35188340, "comment_id": 58094553, "body": "@user5880052 - ok - not homework then - well, if you are looking for an easy-to-use and high performance language with good bit-operations then <code>c</code> is a good choice. Also, <code>c++</code> is just as good when used correctly. To my limited knowledge <code>python</code> will not be able to perform as well but I&#39;m not an expert in that area. Just do a google for bitwise operators in <code>c</code> or <code>c++</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1454537478, "post_id": 35188340, "comment_id": 58094666, "body": "@4386427: As Python does not limit the size of an integer like the other languages, It would be the most simple language to use actually. Not the fastest, though. But it is not clear what OP actually wants and adding that much language tags makes it too broad."}, {"owner": {"reputation": 31, "user_id": 5880052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daefcb49e5c0adf3c0e4802744017fd?s=128&d=identicon&r=PG&f=1", "display_name": "user5880052", "link": "https://stackoverflow.com/users/5880052/user5880052"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454537583, "post_id": 35188340, "comment_id": 58094723, "body": "@Olaf Thanks, but C[++] or Python would be sufficient. If you care to explain how one would do it in the languarge of your choice, i would even try to understand whats going there..."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454537622, "post_id": 35188340, "comment_id": 58094746, "body": "@Olaf - I&#39;m sure your right - I&#39;ve seen examples of <code>python</code> code doing amazing stuff in a few lines but I assumed performance was the issue. Once again my disclaimer: I&#39;m not a <code>python</code>expert so I could be wrong :) And most certainly agree to your comment about the question being unclear."}, {"owner": {"reputation": 727, "user_id": 5825717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRVsi.jpg?s=128&g=1", "display_name": "RobClucas", "link": "https://stackoverflow.com/users/5825717/robclucas"}, "edited": false, "score": 0, "creation_date": 1454537655, "post_id": 35188340, "comment_id": 58094762, "body": "Will it always be 8 bit elements? Or are you looking for something more general, maybe 16, 32, and 64 bits as well? And will the  number of columns and rows always be the same?"}, {"owner": {"reputation": 31, "user_id": 5880052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daefcb49e5c0adf3c0e4802744017fd?s=128&d=identicon&r=PG&f=1", "display_name": "user5880052", "link": "https://stackoverflow.com/users/5880052/user5880052"}, "reply_to_user": {"reputation": 727, "user_id": 5825717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRVsi.jpg?s=128&g=1", "display_name": "RobClucas", "link": "https://stackoverflow.com/users/5825717/robclucas"}, "edited": false, "score": 0, "creation_date": 1454538007, "post_id": 35188340, "comment_id": 58094941, "body": "@nabla for the example i picked a byte sized data type, the real use case would propably break down the problem in chunks of 64x64."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5880052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daefcb49e5c0adf3c0e4802744017fd?s=128&d=identicon&r=PG&f=1", "display_name": "user5880052", "link": "https://stackoverflow.com/users/5880052/user5880052"}, "edited": false, "score": 0, "creation_date": 1454544615, "post_id": 35188886, "comment_id": 58097553, "body": "Thanks for the link, kind of what i looked for, works great. Also pointed me in the direction of &quot;8x8 bit matrix transposition&quot;, which is the keyword i was looking for."}], "tags": [], "owner": {"reputation": 1228, "user_id": 4023418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b157cf12258cebc22300af22dad977?s=128&d=identicon&r=PG", "display_name": "hiandbaii", "link": "https://stackoverflow.com/users/4023418/hiandbaii"}, "is_accepted": true, "score": 0, "last_activity_date": 1454538039, "creation_date": 1454538039, "answer_id": 35188886, "question_id": 35188340, "link": "https://stackoverflow.com/questions/35188340/efficient-vector-bit-data-rotation-rearrangement-in-memory-e-g-in-python/35188886#35188886", "title": "Efficient Vector Bit-Data &quot;Rotation&quot; / &quot;Rearrangement&quot; in Memory [e.g. in Python, Numpy]", "body": "<p>I suggest looking at the source provided <a href=\"http://programming.sirrida.de/calcperm.php\" rel=\"nofollow\">here</a></p>\n\n<p>In particular, calcperm.cpp. This is a simple bit permutation problem.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5880052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daefcb49e5c0adf3c0e4802744017fd?s=128&d=identicon&r=PG&f=1", "display_name": "user5880052", "link": "https://stackoverflow.com/users/5880052/user5880052"}, "edited": false, "score": 0, "creation_date": 1454544960, "post_id": 35189950, "comment_id": 58097673, "body": "Thanks nabla, for the detailed example. Looks faster than my original version. If you are interested in a more theoretical aproach finding fastest possible solutions (using SSE and AVX features), calculated from the number of cpu instructions, check out @haiandbaii &#39;s answer or search for &quot;8x8 bit matrix inversion&quot;."}], "tags": [], "owner": {"reputation": 727, "user_id": 5825717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRVsi.jpg?s=128&g=1", "display_name": "RobClucas", "link": "https://stackoverflow.com/users/5825717/robclucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1454542987, "creation_date": 1454542987, "answer_id": 35189950, "question_id": 35188340, "link": "https://stackoverflow.com/questions/35188340/efficient-vector-bit-data-rotation-rearrangement-in-memory-e-g-in-python/35189950#35189950", "title": "Efficient Vector Bit-Data &quot;Rotation&quot; / &quot;Rearrangement&quot; in Memory [e.g. in Python, Numpy]", "body": "<p>Here is a solution if the rotation is for a square number of rows and columns, and then it just does a transpose of the bits.</p>\n\n<p>I used 8 bit elements as in the question. Also, bit 7 is the leftmost bit, while bit 0 is the rightmost bit. I'll refer to the bits in columns and rows in the following format (simply because this is how I could most quickly print the bits -- as a result the indexing is trickier than in the best case, but it can be modified appropriately):</p>\n\n<pre><code>    | col : 7 6 5 4 3 2 1 0\n--------------------------\nrow:| 0     0 1 1 1 1 1 1 1\n    | 1     0 0 1 0 0 1 1 1 \n    | 2     0 0 0 0 0 1 0 0\n    | 3     0 0 0 0 1 0 0 1\n    | 4     0 0 0 0 1 1 0 0\n    | 5     0 1 1 0 0 1 0 0\n    | 6     1 1 0 0 1 0 0 0\n    | 7     1 0 0 1 0 1 1 0\n</code></pre>\n\n<p>Then I defined the following struct to wrap the 8 bit elements, and perform the bit manipulation and printing:</p>\n\n<pre><code>struct Element {\n    Element(uint8_t E) : e(E) {}\n\n    // Just for convienience\n    static constexpr int size = 8;\n    uint8_t e;\n\n    // Get a bit from the element\n    inline uint8_t get(uint8_t i) {\n        return (e &gt;&gt; i &amp; 0x01);\n    }\n\n    // Flip a bit in the element\n    inline void flip(uint8_t i) {\n        e ^= (0x01 &lt;&lt; i);\n    }\n\n    // Just for convienience\n    void print() {\n        std::cout &lt;&lt; std::bitset&lt;8&gt;(e) &lt;&lt; \"\\n\";\n    }\n};\n</code></pre>\n\n<p>As well as the following function to flip bits in two <code>Element</code>s -- note that you only need to flip the bits if they are not the same since the elements are binary.</p>\n\n<pre><code>inline void swap(Element&amp; a, Element&amp; b, int a_offset, int b_offset) {\n    if (a.get(a_offset) != b.get(b_offset)) {\n        a.flip(a_offset); b.flip(b_offset);\n    }\n}\n</code></pre>\n\n<p>Then it's just a matter of looping through the elements in the upper triangle (above the diagonal), and swapping them with the elements in the lower triangle (below the diagonal) as follows:</p>\n\n<pre><code>int main() {\n  std::vector&lt;Element&gt; array = { 127, 39, 4, 9, 12, 100, 200, 150 };\n\n  for (auto&amp; a : array) a.print(); std::cout &lt;&lt; \"\\n\"; // Before\n\n  // Do the swapping\n  for (size_t row = 0; row &lt; array.size(); ++row) {\n    for (size_t col = Element::size - 1 - row; col &gt;= 1; --col) {\n      swap(array[row], array[Element::size - col], col - 1, Element::size - 1 - row);\n    }\n  }\n\n  for (auto&amp; a : array) a.print(); // After\n}  \n</code></pre>\n\n<p>Which produces the transformation as in the question : see the <a href=\"http://coliru.stacked-crooked.com/a/8dade58f1b921cf6\" rel=\"nofollow\">live demo</a> which shows the input and output. Compiling with <code>-O3</code> ran in about 1.1 microseconds (just the transformation, not including the printing). </p>\n\n<p>You can also pretty easily change the transformation to be a 90 degree right or left rotation, just by modifying the indexing. </p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1454544438, "creation_date": 1454544438, "answer_id": 35190196, "question_id": 35188340, "link": "https://stackoverflow.com/questions/35188340/efficient-vector-bit-data-rotation-rearrangement-in-memory-e-g-in-python/35190196#35190196", "title": "Efficient Vector Bit-Data &quot;Rotation&quot; / &quot;Rearrangement&quot; in Memory [e.g. in Python, Numpy]", "body": "<p>Here is a simple implementation in C for the 8x8 case:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef unsigned char byte;\n\nvoid dump(const char *name, const byte *p, int size) {\n    int len = printf(\"%s =&gt; ['\", name) - 1;\n    for (int i = 0; i &lt; size; i++) {\n        for (int j = 0; j &lt; 8; j++) {\n            putchar('0' + ((p[i] &gt;&gt; (7 - j)) &amp; 1));\n        }\n        if (i &lt; 7) {\n            printf(\"',\\n%*s'\", len, \"\");\n        }\n    }\n    printf(\"']\\n\");\n}\n\nint main(int argc, char **argv) {\n    byte original[8], rotated[8];\n    int repeat = 1;\n\n    if (argc &gt; 1)\n        repeat = atoi(argv[1]);\n\n    for (int i = 0; i &lt; 8; i++) {\n        original[i] = rand() &amp; 255;\n    }\n    for (int r = 0; r &lt; repeat; r++) {\n        /*-------- this is the core of the rotation --------*/\n        for (int i = 0; i &lt; 8; i++) {\n            rotated[i] = 0;\n        }\n        for (int i = 0; i &lt; 8; i++) {\n            for (int j = 0; j &lt; 8; j++) {\n                rotated[j] |= ((original[i] &gt;&gt; (7 - j)) &amp; 1) &lt;&lt; (7 - i);\n            }\n        }\n        /*-------- end of the rotation code --------*/\n    }\n    if (repeat == 1) {\n        dump(\"original\", original, 8);\n        dump(\"rotated\", rotated, 8);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Run it without an argument for a sample random test:</p>\n\n<pre><code>chqrlie@mac ~/dev/stackoverflow &gt; ./rot8x8\noriginal =&gt; ['10100111',\n             '11110001',\n             '11011001',\n             '00101010',\n             '10000010',\n             '11001000',\n             '11011000',\n             '11111110']\nrotated =&gt; ['11101111',\n            '01100111',\n            '11010001',\n            '01100011',\n            '00110111',\n            '10000001',\n            '10011001',\n            '11100000']\n</code></pre>\n\n<p>Run it with a numeric argument for timing:</p>\n\n<pre><code>chqrlie@mac ~/dev/stackoverflow &gt; time ./rot8x8 20000000\nreal    0m0.986s\nuser    0m0.976s\nsys     0m0.004s\n</code></pre>\n\n<p>On a MacbookPro, with <code>clang -O3</code>, this naive program performs a single rotation takes <strong>less than 50ns</strong>, <strong>400 times faster</strong> than your Numpy example.  I'm sure there are faster methods, but this is already significantly better.</p>\n"}], "owner": {"reputation": 31, "user_id": 5880052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daefcb49e5c0adf3c0e4802744017fd?s=128&d=identicon&r=PG&f=1", "display_name": "user5880052", "link": "https://stackoverflow.com/users/5880052/user5880052"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "closed_date": 1454578538, "accepted_answer_id": 35188886, "answer_count": 3, "score": 1, "last_activity_date": 1454544438, "creation_date": 1454535866, "last_edit_date": 1454536410, "question_id": 35188340, "link": "https://stackoverflow.com/questions/35188340/efficient-vector-bit-data-rotation-rearrangement-in-memory-e-g-in-python", "closed_reason": "Needs more focus", "title": "Efficient Vector Bit-Data &quot;Rotation&quot; / &quot;Rearrangement&quot; in Memory [e.g. in Python, Numpy]", "body": "<p>How does one efficiently convert from an 8 element long array of e.g. uint8s into a its \"rotated\" counterpart, were e.g. the original 8bits of the first element are spread across all vector elements as the MSB, and the second last element spread across the second MSB, and so on: Working and slow example:</p>\n\n<pre><code>import numpy as np\n\noriginal = np.random.randint(0, 255, 8).astypye(np.uint8) # some random example vector\n[np.binary_repr(i, width=8) for i in original]            # original data\n=&gt;['01111111',\n   '00100111',\n   '01110111',\n   '00100010',\n   '00111101',\n   '10010000',\n   '10000100',\n   '10101000']\n\nrotated = np.packbits(np.unpackbits(original).reshape(-1,8).T) # &lt;= SLOW ROTATION\n[np.binary_repr(i, width=8) for i in rotated]                  # this is should be the result\n=&gt;['00000111',                                                 # what where rows originally\n   '10100000',                                                 # are now columns\n   '11111001',\n   '10101100',\n   '10001001',\n   '11101010',\n   '11110000',\n   '11101000']\n</code></pre>\n\n<p>So in the end, I want to reorder the layout how BITS are \"filed\" into the RAM. As you can see I got a working example in Numpy, it is not super slow (here ~ 21 \u00b5s), however I would like to do this excercise with data structures in the order of ~2k * 1 mio bits. Therefore the usage of the numpy or C bool dtype is to wasteful (factor 8 overhead).</p>\n\n<p>Any C bit shuffling magic or SSE instructions or general answers are welcome!</p>\n"}, {"tags": ["c", "sockets", "encryption", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 5648500, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/IC6tH.jpg?s=128&g=1", "display_name": "Alex1620", "link": "https://stackoverflow.com/users/5648500/alex1620"}, "edited": false, "score": 0, "creation_date": 1454537829, "post_id": 35188228, "comment_id": 58094846, "body": "I&#39;ve updated my code to show the client-side encryption issue"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 245, "user_id": 5648500, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/IC6tH.jpg?s=128&g=1", "display_name": "Alex1620", "link": "https://stackoverflow.com/users/5648500/alex1620"}, "edited": false, "score": 0, "creation_date": 1454538632, "post_id": 35188228, "comment_id": 58095249, "body": "But not how you <i>received</i> the public key. The presumption must be that the data you loaded it from isn&#39;t correct, so how you acquired that data is critical. In any case you are supposed to post a complete reproducible problem here."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 3, "last_activity_date": 1454535424, "creation_date": 1454535424, "answer_id": 35188228, "question_id": 35188150, "link": "https://stackoverflow.com/questions/35188150/how-to-send-and-then-encrypt-a-message-using-openssl-public-key-via-socket-in-c/35188228#35188228", "title": "How to send and then encrypt a message using OpenSSL public key via socket in C?", "body": "<blockquote>\n  <p>First off, is this the correct way to send a public key to the client?</p>\n</blockquote>\n\n<p>No. It isn't even a valid way to save the keys. It isn't valid to use <code>strcpy()</code> on binary data. You should use <code>memcpy().</code></p>\n\n<blockquote>\n  <p>how do I encrypt the message on the client-side only using the public key?</p>\n</blockquote>\n\n<p>You would need to show some code for comment.</p>\n\n<blockquote>\n  <p>Is it possible?</p>\n</blockquote>\n\n<p>Sure, but why? Why not use SSL/TLS?</p>\n"}], "owner": {"reputation": 245, "user_id": 5648500, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/IC6tH.jpg?s=128&g=1", "display_name": "Alex1620", "link": "https://stackoverflow.com/users/5648500/alex1620"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454537809, "creation_date": 1454535162, "last_edit_date": 1454537809, "question_id": 35188150, "link": "https://stackoverflow.com/questions/35188150/how-to-send-and-then-encrypt-a-message-using-openssl-public-key-via-socket-in-c", "title": "How to send and then encrypt a message using OpenSSL public key via socket in C?", "body": "<p>I am writing a simple server and client program using C and local sockets. I have successfully generated a public and private key with openSSL with the following code:</p>\n\n<pre><code>int generateKeys(char* publicDest, char* privateDest) {\n\n    RSA *keypair = RSA_generate_key(2048, 3, NULL, NULL);\n\n    BIO *pri = BIO_new(BIO_s_mem());\n    BIO *pub = BIO_new(BIO_s_mem());\n\n    PEM_write_bio_RSAPrivateKey(pri, keypair, NULL, NULL, 0, NULL, NULL);\n    PEM_write_bio_RSAPublicKey(pub, keypair);\n\n    size_t pri_len = BIO_pending(pri);\n    size_t pub_len = BIO_pending(pub);\n\n    char *pri_key = malloc(pri_len + 1);\n    char *pub_key = malloc(pub_len + 1);\n\n    BIO_read(pri, pri_key, pri_len);\n    BIO_read(pub, pub_key, pub_len);\n\n    pri_key[pri_len] = '\\0';\n    pub_key[pub_len] = '\\0';\n\n    strcpy(publicDest, pub_key);\n    strcpy(privateDest, pri_key);\n\n}\n</code></pre>\n\n<p>I now need to send the public key to the client so that they are able to encrypt their message for the server. I am doing this as follows:</p>\n\n<pre><code>    char publicKey[2048];\n    char privateKey[2048];\n    generateKeys(publicKey, privateKey);\n    write(clientSocket, publicKey, 2048);\n</code></pre>\n\n<p>First off, is this the correct way to send a public key to the client?</p>\n\n<p>This is where I am stuck now, how do I encrypt the message on the client-side only using the public key? Is it possible?</p>\n\n<p>Edit - here is my code on the client-side where I am trying to encrypt the message:</p>\n\n<pre><code>    char dest[2048];\n    BIO *pubBio = BIO_new_mem_buf(publicKey, -1);\n\n    RSA *pubRSA = PEM_read_bio_RSA_PUBKEY(pubBio, NULL, NULL, NULL);\n    if(!pubRSA) {\n            printf(\"Issue loading public key...\");\n    }\n    RSA_public_encrypt(sizeof(sigMessage), sigMessage, dest, pubRSA, RSA_PKCS1_PADDING);\n</code></pre>\n\n<p>My issue is that I am unable to load the public key in this way.</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 9, "creation_date": 1454533755, "post_id": 35187707, "comment_id": 58092669, "body": "Since the heap is part of a program&#39;s address space you&#39;ll be out of luck. Read about shared memory or other established forms of inter process communication."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 6, "creation_date": 1454533943, "post_id": 35187707, "comment_id": 58092771, "body": "When the <code>main</code> function returns, it returns to operating system code that is not expecting a pointer. So it&#39;s not clear what you hope to accomplish by returning a pointer."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1454534223, "post_id": 35187707, "comment_id": 58092945, "body": "Also, in your example, <code>i</code> is an automatic variable that would (usually) reside in the stack, not the heap."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1454534633, "post_id": 35187707, "comment_id": 58093167, "body": "Two problems here.  First on UNIX-type systems you can only return a single unsigned byte, 0-255.  The rest of the int is used for other things (see <code>man 2 wait</code>).  Secondly, assuming you are not on an embedded system, then a pointer is a virtual address, usually a page number followed by the offset within the page.  That is meaningful only within that process.  Once the process has ended, or in another process, it is meaningless."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1454534663, "post_id": 35187707, "comment_id": 58093184, "body": "Where do you think you will return that address? And what should whoever called it do with it?"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1454534919, "post_id": 35187707, "comment_id": 58093316, "body": "There are some embedded systems where the heap is a fixed memory location (although you are using the stack in your code) and it might be possible (if very dodgy).  Which type of system are you working on?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1454535597, "post_id": 35187707, "comment_id": 58093684, "body": "If you want to keep something running after the program exits, use <code>fork()</code> to create a new process. You can return from <code>main()</code> in the original process, and the child process will stick around."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1454536769, "post_id": 35187707, "comment_id": 58094307, "body": "@cdarke: If <code>main</code> returns an <code>int</code> with such an address, I&#39;d ecommend to fire the person responsible for that signature. For a freestanding ernvironment you are free to use whatever program entry function you want, including its signature, thus you should either return a pointer (maybe <code>void *</code>) or - at least <code>(u)intptr_t</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454538033, "post_id": 35187707, "comment_id": 58094953, "body": "Yes, I agree with @Olaf - fire the person responsible.  You will need a stake, rope, some dry brushwood and a flaming torch."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454544103, "post_id": 35187707, "comment_id": 58097380, "body": "@Olaf:  I agree, but I&#39;m just saying it might be possible.  There are lots of possible things that are very bad ideas, this is one of them.  But the world of embedded programming can be very different to conventional virtual memory systems, and the compilers often do not conform to standards."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1454545254, "post_id": 35187707, "comment_id": 58097782, "body": "@cdarke: Unless we talk about some crappy MCUs like PIC or 8051, C compilers for embedded systems are often very compatible with at least one of the older versions of the C standard. Anyway, as bare-bone systems are freestanding environments, they are free to choose their own program entry function (it need not even be called <code>main</code>). So that is even one excuse less to use an inappropriate signature."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454571063, "post_id": 35187707, "comment_id": 58106515, "body": "@Olaf:  you are right of course.  The point is that the OP would have said by now if he/she was working in such an environment.  It looks like they are just clueless about how memory works."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1454587853, "post_id": 35187707, "comment_id": 58117232, "body": "@cdarke: As I wrote: a freestanding implementation would be just a bonus. On a hosted like a PC, not returning the expected semantics is even worse and the compiler should warn already. But a little thought invested would also show how &quot;useless&quot; (I was told to be more friendly) the idea is."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5543481, "user_type": "registered", "profile_image": "https://graph.facebook.com/917844058271173/picture?type=large", "display_name": "Hein Zi", "link": "https://stackoverflow.com/users/5543481/hein-zi"}, "edited": false, "score": 0, "creation_date": 1454579374, "post_id": 35187956, "comment_id": 58111441, "body": "Thanks for your answer! I did already check out an implementation of shared memory in c. Let&#39;s see what it yields.."}, {"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "reply_to_user": {"reputation": 51, "user_id": 5543481, "user_type": "registered", "profile_image": "https://graph.facebook.com/917844058271173/picture?type=large", "display_name": "Hein Zi", "link": "https://stackoverflow.com/users/5543481/hein-zi"}, "edited": false, "score": 0, "creation_date": 1454599602, "post_id": 35187956, "comment_id": 58125510, "body": "Be careful with shared memory.  It stays persistent until something cleans it up. If your program crashes, it&#39;s still lingering around in the system.  This is unlike your heap memory which gets purged regardless of how your process ends (even if it crashes).  With greater power comes greater responsibility."}], "tags": [], "owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "is_accepted": true, "score": 6, "last_activity_date": 1454537659, "last_edit_date": 1454537659, "creation_date": 1454534477, "answer_id": 35187956, "question_id": 35187707, "link": "https://stackoverflow.com/questions/35187707/return-pointer-from-main/35187956#35187956", "title": "Return pointer from main", "body": "<p>In short, the answer is no.</p>\n\n<p>The return value from <code>main()</code> is typically for error codes.  Data to be kept persistent after the end of the process should be communicated in some other way.  When you return from <code>main()</code>, your process (and all its threads) has ended.  The memory space allocated by the operating system for the process has also been freed.  This includes your heap memory.  In short, once the process is over, there is no heap, and your object in the heap is gone.</p>\n\n<p>You seem to have discovered the difficulty of inter-process communication.  There are many possible techniques to allow one process to communicate with another.  <em>Some</em> of them are</p>\n\n<ul>\n<li>storing data to a file</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Pipeline_%28Unix%29\" rel=\"nofollow\">pipes</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Message_Passing_Interface\" rel=\"nofollow\">message passing interface</a> (MPI)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Shared_memory\" rel=\"nofollow\">shared memory</a></li>\n</ul>\n\n<p>Some techniques are better suited for different situations, this is why there are multiple options.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1454534486, "creation_date": 1454534486, "answer_id": 35187961, "question_id": 35187707, "link": "https://stackoverflow.com/questions/35187707/return-pointer-from-main/35187961#35187961", "title": "Return pointer from main", "body": "<p>Two problems:</p>\n\n<ol>\n<li><p>When <code>main</code> returns, <code>i</code> ceases to exist; any pointer value you returned would be invalid.</p></li>\n<li><p>I am not aware of any runtime environment that expects to receive a <em>pointer</em> value from any executed program; <code>main</code> returns an <code>int</code> because the runtime environment expects an <code>int</code>.  </p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1454534721, "creation_date": 1454534721, "answer_id": 35188019, "question_id": 35187707, "link": "https://stackoverflow.com/questions/35187707/return-pointer-from-main/35188019#35188019", "title": "Return pointer from main", "body": "<blockquote>\n  <p>Is it possible to keep the heap object alive if the called program terminates on the <code>main()</code> but continues running on a second thread which was started from <code>main</code>?</p>\n</blockquote>\n\n<p>No, it is not. When you return from <code>main</code>, it is equivalent to calling <code>exit</code>. Hence, the program terminates. No threads can be alive after that.</p>\n\n<p>From the C99 Standard:</p>\n\n<blockquote>\n  <p><strong>5.1.2.2.3 Program termination</strong></p>\n  \n  <p>1 If the return type of the <code>main</code> function is a type compatible with <code>int</code>, a return from the initial call to the <code>main</code> function is equivalent to calling the <code>exit</code> function with the value returned by the <code>main</code> function as its argument;</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1454534837, "creation_date": 1454534837, "answer_id": 35188046, "question_id": 35187707, "link": "https://stackoverflow.com/questions/35187707/return-pointer-from-main/35188046#35188046", "title": "Return pointer from main", "body": "<p>You cannot return it in a strictly-conforming program nor on most implementations.<br>\nFrom the C11 standard draft N1570, \u00a75.1.2.2.1:</p>\n\n<blockquote>\n  <p>The function called at program startup is named <code>main</code>. [...] It shall\n  be defined with a return type of <code>int</code> and with no parameters:</p>\n\n<pre><code>int main(void) { /* ... */ }\n</code></pre>\n  \n  <p>or with two parameters [...]:</p>\n\n<pre><code>int main(int argc, char *argv[]) { /* ... */ }\n</code></pre>\n  \n  <p>[...] or in some other implementation-defined manner.</p>\n</blockquote>\n\n<p>Mangling the pointer into an <code>int</code> would be possible but that would be implementation-defined, possibly undefined, and... nasty.</p>\n\n<blockquote>\n  <p>Is it possible to keep the heap object alive if the called program\n  terminates on the <code>main()</code> but continues running on a second thread\n  which was started from <code>main</code>?</p>\n</blockquote>\n\n<p>A program is process. <code>main</code> runs in a thread. Heap memory is shared between all threads, so yes, sharing heap memory between threads is entirely possible.<br>\nHowever, <code>main</code> returning is equivalent to the program terminating, so you need to find another way to share it between threads. An example would be to set a pointer pointing to heap memory in one thread (maybe make that thread yield), and use that pointer in the other threads.</p>\n\n<blockquote>\n  <p>i want to do this in order to return a heap object from one program to\n  anotherone..</p>\n</blockquote>\n\n<p>What now, between processes or threads? Heap memory is shared between threads but <strong>not</strong> between multiple processes. Sharing between multiple processes is done using <em>shared memory</em> (<code>mmap</code> or <code>shmopen</code>, <code>shmget</code>, etc.).</p>\n"}], "owner": {"reputation": 51, "user_id": 5543481, "user_type": "registered", "profile_image": "https://graph.facebook.com/917844058271173/picture?type=large", "display_name": "Hein Zi", "link": "https://stackoverflow.com/users/5543481/hein-zi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 35187956, "answer_count": 4, "score": 2, "last_activity_date": 1454537659, "creation_date": 1454533633, "question_id": 35187707, "link": "https://stackoverflow.com/questions/35187707/return-pointer-from-main", "title": "Return pointer from main", "body": "<p>I wanted to know if it was possible to return a pointer-address from the main function in c. Here a very short example:</p>\n\n<pre><code>int main(){\n  int i = 0;\n  return &amp;i; //won't work because of type difference and because i..\n}            //.. will be deallocated.\n</code></pre>\n\n<p>So is there any way to do this?\nAnd second: i want to do this in order to return a heap object from one program to anotherone..</p>\n\n<p>Is it possible to keep the heap object alive if the called program terminates on the main() but continues running on a second thread which was started from main?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1454531992, "post_id": 35187158, "comment_id": 58091612, "body": "You haven&#39;t declared <code>t</code>."}, {"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1454531996, "post_id": 35187158, "comment_id": 58091615, "body": "Welcome to Stack overflow.  I appreciate you&#39;re in a hurry to solve your problems, but please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>.  Particularly, see if you can limit the code you post to that which is relevant.  Sometimes, finding out what is relevant lets you solve the problem yourself.  As for your specific problem, here&#39;s a hint - the book structure has a member called <code>bookGenre</code>, not <code>genre</code>."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 3, "creation_date": 1454532034, "post_id": 35187158, "comment_id": 58091649, "body": "<code>(*bPtr).Date</code> doesn&#39;t exists...but <code>(*bPtr).published</code> does (same think for <code>genre</code>). Note that if it&#39;s urgent, SO is not necessarily the right channel, taking a good breath and thinking twice would help you much better."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1454532267, "post_id": 35187158, "comment_id": 58091802, "body": "Wow, this code could have been reduced to a very small portion of what it is in order to reproduce the problem. This is important because the more there is to read, the harder it can be to find the flaw and there will be fewer people willing to even look at it. Concise communication is an essential skill."}], "answers": [{"tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": false, "score": 0, "last_activity_date": 1454532110, "creation_date": 1454532110, "answer_id": 35187283, "question_id": 35187158, "link": "https://stackoverflow.com/questions/35187158/struct-in-struct-has-no-member/35187283#35187283", "title": "Struct in Struct has no member", "body": "<p><code>genre</code> and <code>Date</code> are the <em>types</em> of fields in the struct.<br>\n<code>bookGenre</code> and <code>published</code> are the <em>names</em> of fields in the struct.</p>\n\n<p>So, for example, where you wrote:</p>\n\n<pre><code>  (*bPtr).Date.day = dayT;\n</code></pre>\n\n<p>this is correct:</p>\n\n<pre><code>  (*bPtr).published.day = dayT;\n</code></pre>\n\n<p>BTW, almost every uses <code>-&gt;</code> instead of <code>(* ).</code> because it is easier, faster, and simpler:</p>\n\n<pre><code>  bPtr-&gt;published.day = dayT;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "reply_to_user": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1454532349, "post_id": 35187323, "comment_id": 58091850, "body": "What @JohnHascall I didn&#39;t copy your answer."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "reply_to_user": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1454534058, "post_id": 35187323, "comment_id": 58092837, "body": "added third problem @Les"}], "tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": true, "score": 0, "last_activity_date": 1454534043, "last_edit_date": 1454534043, "creation_date": 1454532264, "answer_id": 35187323, "question_id": 35187158, "link": "https://stackoverflow.com/questions/35187158/struct-in-struct-has-no-member/35187323#35187323", "title": "Struct in Struct has no member", "body": "<p>Your code has two problems:</p>\n\n<ol>\n<li>You are confusing type names and identifier names. For example, in your <code>book</code> structure, the member name is <code>bookGenre</code>, and its type is <code>enum genre</code>. You access structure members by identifier, not by type. So instead of writing <code>(*book).genre</code>, you need to write <code>(*book).bookGenre</code>.</li>\n<li>You haven't declared the variable <code>t</code> before your <code>scanf</code> call.</li>\n<li><p>You could implement your genre validation loop using <code>do</code>, like this:</p>\n\n<pre><code>enum genre input;\ndo {\n    printf(\"What is the genre?\\n\");\n} while (scanf(\"%d\", &amp;input) != 0 &amp;&amp; input &gt;= 0 &amp;&amp; input &lt;= 3);\n</code></pre>\n\n<p>A <code>do</code> loop will execute at least once, because the condition is evaluated <strong>after</strong> the loop body is done. This makes sense here, since we first ask the user the question, and then check if he has entered a number (<code>scanf(\"%d\", &amp;input) != 0</code>) and that it is in the range <code>[0, 3]</code>. If the condition has not been satisfied, the user is asked the question again, and this will continue until the user types a valid genre. Notice how we read into an <code>enum genre</code> directly, and not into an <code>int</code>--this is because <code>int</code>s can be assigned to <code>enum</code>s implicitly, without any casts.</p></li>\n</ol>\n\n<p>And by the way, you can access structure pointer members using <code>-&gt;</code>. For example, instead of <code>(*book).genre</code>, you can write <code>book-&gt;genre</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": false, "score": 0, "last_activity_date": 1454532401, "creation_date": 1454532401, "answer_id": 35187362, "question_id": 35187158, "link": "https://stackoverflow.com/questions/35187158/struct-in-struct-has-no-member/35187362#35187362", "title": "Struct in Struct has no member", "body": "<p>In addition, this:</p>\n\n<pre><code>if(-1&lt; t &lt;4) ...\n</code></pre>\n\n<p>will not work.\nThis:</p>\n\n<pre><code>int t;\n\nif ( (-1 &lt; t) &amp;&amp; (t &lt; 4) ) ...\n</code></pre>\n\n<p>will.</p>\n"}], "owner": {"reputation": 13, "user_id": 5879881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6d19210932285dab13c12b86a0680c8?s=128&d=identicon&r=PG&f=1", "display_name": "SassoFrasso", "link": "https://stackoverflow.com/users/5879881/sassofrasso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1025, "favorite_count": 1, "accepted_answer_id": 35187323, "answer_count": 3, "score": -5, "last_activity_date": 1454534043, "creation_date": 1454531640, "last_edit_date": 1454532216, "question_id": 35187158, "link": "https://stackoverflow.com/questions/35187158/struct-in-struct-has-no-member", "title": "Struct in Struct has no member", "body": "<p>Well this is my first post, I'm really sorry for what I'll do...\nI have a problem and I need to hurry, what I'm doing wrong?\nIt's abut a \"library\" program about structures\nI have to files: an header with this structures</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n//Strutture\nstruct Date{short day, month, year;};\nenum genre{thriller, novel, fantasy, horror};\n\nstruct Book{char title[64];\n    char writer[32];\n    enum genre bookGenre;\n    struct Date published;\n    short inLibrary;\n    short outLibrary;\n    short id;\n};\n</code></pre>\n\n<p>And then a c file, this file contains only definitions; the main will be in another .c file:</p>\n\n<pre><code>#include \"mylib.h\"\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n...\n\n//To add new book\nBook_t *newBook(){\nBook_t *bPtr;\nif ((bPtr = calloc(1,sizeof(Book_t))) == NULL){\n    printf(\"I'm sorry, I couldn't reserve enough memory\\n\");\n}\nelse{\n\n...\n\n//Book genre\n    while(genreOk ==0){\n        printf(\"Insert new book's genre(0=thriller, 1=novel, 2=fantasy, 3=horror): \");\n        scanf(\"%d\",&amp;t);\n        if(-1&lt; t &lt;4){\n            (*bPtr).genre = t;\n            genreOk =1;\n        }\n        else{\n            printf(\"\\nInapropriate genre, try again\");\n        }\n        printf(\"\\n\");\n    }\n\n    //Data libro\n    while(dateOk ==0){\n        printf(\"Insert new book's day of publish: \");\n        scanf(\"%d\", &amp;dayT);\n        printf(\"\\nInsert new book's month of publish: \");\n        scanf(\"%d\", &amp;monthT);\n        printf(\"\\nInsert new book's year of publish: \");\n        scanf(\"%d\", &amp;yearT);\n\n        dateOk = checkDate(dayT, monthT, yearT);\n        if (dateOk == 1){\n            (*bPtr).Date.day = dayT;\n            (*bPtr).Date.month = monthT;\n            (*bPtr).Date.year = yearT;\n        }\n        printf(\"\\n\");\n\n    }\nMore messy code\n</code></pre>\n\n<p>When I try to compile using gcc -c mylib.c I get this error:</p>\n\n<pre><code>mylib.c: In function newBook:\nmylib.c: error: 'Book_t {aka struct Book}' has no member named 'genre'\n (*bPtr).genre = t;\nmylib.c: error: 'Book_t {aka struct Book}' has no member named 'Date'\n (*bPtr).Date.day = dayT;\nmylib.c: error: 'Book_t {aka struct Book}' has no member named 'Date'\n (*bPtr).Date.month = monthT;\nmylib.c: error: 'Book_t {aka struct Book}' has no member named 'Date'\n (*bPtr).Date.year = yearT;\n</code></pre>\n\n<p>I'm using Virtual Box with Ubuntu on a Windows 10 machine</p>\n"}, {"tags": ["c", "image-processing", "android-ndk", "java-native-interface", "native"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1454530227, "post_id": 35186512, "comment_id": 58090465, "body": "There&#39;s a <a href=\"http://stackoverflow.com/questions/1610045/how-to-return-an-array-from-jni-to-java\">related question</a>; perhaps you shouldn&#39;t do <code>DeleteLocalRef( env, jniline )</code>?"}, {"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1454531326, "post_id": 35186512, "comment_id": 58091161, "body": "deleted it but same thing."}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1454531416, "post_id": 35186512, "comment_id": 58091222, "body": ":( JNI is tricky. If nothing else works, you could work around it by allocating the output array in Java and pass that to JNI."}, {"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1454531715, "post_id": 35186512, "comment_id": 58091440, "body": "how can I do it @Kenney"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454535343, "post_id": 35186512, "comment_id": 58093544, "body": "In the call to <code>ReleaseIntArrayElements</code>, shouldn&#39;t <code>arr</code> be <code>line</code> instead?"}, {"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "edited": false, "score": 0, "creation_date": 1455966817, "post_id": 35186512, "comment_id": 58734708, "body": "@Kinney, I get unpinpremitivearray,  why?"}, {"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455966867, "post_id": 35186512, "comment_id": 58734726, "body": "Any solution for the unpinpremitivearray error, @immibis?"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1456005357, "post_id": 35186512, "comment_id": 58748577, "body": "BTW, <code>DeleteLocalRef()</code> is necessary here."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "edited": false, "score": 0, "creation_date": 1455710583, "post_id": 35187356, "comment_id": 58608693, "body": "Unfortunately I get the same error:  <code>JNI: unpinPrimitiveArray(0x424eaea0) failed to find entry (valid=1)</code>."}], "tags": [], "owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "is_accepted": false, "score": 0, "last_activity_date": 1454532368, "creation_date": 1454532368, "answer_id": 35187356, "question_id": 35186512, "link": "https://stackoverflow.com/questions/35186512/jni-unpinned-primitve-array-error/35187356#35187356", "title": "JNI- unpinned primitve array error", "body": "<p>I'm no JNI whizz, so here's a workaround: allocate the output array in Java. It goes something like this:</p>\n\n<pre><code>// the public API - a helper wrapper for the native `inv`:\npublic final int[][] invert( int[][] inputArr, int w, int h ) {\n    int [][] outputArr = new int[h][w]; // allocate the array in Java\n    inv( inputArr, outputArr, w, h );\n    return outputArr;\n}\n\n// internal, private\nprivate native void inv(int[][] inputArr, int[][] outputArr , int w, int h);\n</code></pre>\n\n<p>And the C method signature would become:</p>\n\n<pre><code>JNIEXPORT jvoid JNICALL Java_com_example_invert_MainActivity_inv(\n  JNIEnv *env, jobject obj, \n  jobjectArray inputArr,  // your original 'arr' parameter\n  jobjectArray outputArr, // new: the output to store the results in\n  jint w, jint h)\n</code></pre>\n\n<p>As for the C code, you can do away with all the allocation methods and just put values in <code>outputArr</code> using <code>(*env)-&gt;SetIntArrayRegion(env, jline, 0, h, a[i]);</code>. I'll leave that to you, as you probably know more about JNI than I do ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "edited": false, "score": 0, "creation_date": 1455709127, "post_id": 35325654, "comment_id": 58607711, "body": "I&#39;m not just willing to implement simple filter, this is just a simple beginning for me, I&#39;m going to implement another complex algorithm, so JNI is my best solution. I implemented it in java and works, now I have to do it in jni world. I want to master how to pass multidimensional array From/To java/JNI.  Thanks anyway @Yang :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6856c892b26c9a9c4452fc0051117e22?s=128&d=identicon&r=PG&f=1", "display_name": "Yang Ni", "link": "https://stackoverflow.com/users/5910528/yang-ni"}, "is_accepted": false, "score": 0, "last_activity_date": 1455137505, "creation_date": 1455137505, "answer_id": 35325654, "question_id": 35186512, "link": "https://stackoverflow.com/questions/35186512/jni-unpinned-primitve-array-error/35325654#35325654", "title": "JNI- unpinned primitve array error", "body": "<p>I am not going to comment on JNI, but would suggest an alternative to solve your problem on Android.</p>\n\n<p>Your application is a good candidate for Android RenderScript. The image inverse algorithm can be implemented as a one-liner RenderScript kernel, which then can be launched from Java for parallel execution on GPU (or the multi-core CPU.)</p>\n\n<p>This would not only lead to simpler code, but also faster code.</p>\n\n<p>Here is a link to RenderScript. You can actually find an image inverse example there.</p>\n\n<p><a href=\"http://developer.android.com/guide/topics/renderscript/compute.html\" rel=\"nofollow\">http://developer.android.com/guide/topics/renderscript/compute.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "edited": false, "score": 0, "creation_date": 1456047947, "post_id": 35529203, "comment_id": 58757752, "body": "Thanks @Alex I managed to get it to work. Now I&#39;m facing the slowness of native code compared to pure java!! my new question with another account is: <a href=\"http://stackoverflow.com/questions/35529437/jni-slow-processing-in-native\">link</a> ."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "edited": false, "score": 0, "creation_date": 1456051391, "post_id": 35529203, "comment_id": 58758832, "body": "as a matter of fact, I don&#39;t understand why you didn&#39;t accept my answer"}, {"owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "edited": false, "score": 0, "creation_date": 1456060753, "post_id": 35529203, "comment_id": 58761797, "body": "yeah, sorry about that. I should have accepted it to help other users. anyway. did you check my new question about slowness of jni code?"}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 1, "last_activity_date": 1456005159, "last_edit_date": 1456005159, "creation_date": 1456003287, "answer_id": 35529203, "question_id": 35186512, "link": "https://stackoverflow.com/questions/35186512/jni-unpinned-primitve-array-error/35529203#35529203", "title": "JNI- unpinned primitve array error", "body": "<p><code>ReleaseDoubleArrayElements(A, B, 0)</code> should be called only corresponding to <code>B=GetDoubleArrayElements(env, A, 0)</code>. In your code, the arguments on <code>Release\u2026</code> are wrong, (<strong>arr</strong> instead of <strong>line1</strong>, <strong>line2</strong>, etc.). They should never be called to match <code>GetObjectArrayElement()</code>.</p>\n\n<p>As an optimization notice, access to 3-dimensional array is much slower both in Java and JNI than access to 1-dimensional array of same size. Therefore I would strongly recommend to create in Java <code>imgArray = new double[w*h*3]</code> and work with it.</p>\n\n<p><strong>PS</strong> same applies to the output array.</p>\n\n<p><strong>PPS</strong> using <code>SetDoubleArrayRegion()</code>, you introduce an extra memcopy; better, use <code>double* cArray = GetDoubleArrayElements(env, jArray, 0)</code>, put the values directly into <strong>cArray</strong>, and release it to Java with <code>ReleaseDoubleArrayElements(env, jArray, cArray, 0)</code>. This <strong>0</strong> means that the changes to <strong>cArray</strong> will be seen in <strong>jArray</strong> on the Java side.</p>\n"}], "owner": {"reputation": 89, "user_id": 4391555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmk1x.jpg?s=128&g=1", "display_name": "yanisB", "link": "https://stackoverflow.com/users/4391555/yanisb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 35529203, "answer_count": 3, "score": 0, "last_activity_date": 1456005159, "creation_date": 1454529580, "last_edit_date": 1455927030, "question_id": 35186512, "link": "https://stackoverflow.com/questions/35186512/jni-unpinned-primitve-array-error", "title": "JNI- unpinned primitve array error", "body": "<p>I want to implement invert effect in image processing. I decode color channels in java side the I pass a 2D array to C side, I invert (255-value) then I return a processed 2D array.</p>\n\n<p>Here is my C code:</p>\n\n<pre><code>   #include &lt;jni.h&gt;\n#include&lt;stddef.h&gt;\n#include &lt;stdio.h&gt;\n#include&lt;com_example_invert_MainActivity.h&gt;\nJNIEXPORT jobjectArray JNICALL Java_com_example_invert_MainActivity_inv\n  (JNIEnv *env, jobject obj, jobjectArray arr, jint w, jint h)\n{\n    double a[w][h][3];\n        int i,j,k;\n        double x = 0;\n        ///////////////////READING THE INPUT ARRAY////////////////////////\n\n\n         jsize dim1 = (*env)-&gt;GetArrayLength(env, arr);\n\n           for (i=0; i&lt;dim1; i++){\n\n                jdoubleArray *line1 =   (*env)-&gt;GetObjectArrayElement(env, arr, i);\n                int dim2 =       (*env)-&gt;GetArrayLength(env, line1);\n                jdouble *pos1 = (*env)-&gt;GetDoubleArrayElements(env, line1, 0);\n\n                for (j=0; j&lt;dim2; j++){\n                    jdoubleArray *line2 =   (*env)-&gt;GetObjectArrayElement(env, line1, j);\n                    int dim3 =       (*env)-&gt;GetArrayLength(env, line2);\n                    jdouble *pos2 = (*env)-&gt;GetDoubleArrayElements(env, line2, 0);\n\n                    for (k=0; k&lt;dim3; k++){\n                             a[i][j][k]= pos2[k];\n                        }\n                    (*env)-&gt;ReleaseDoubleArrayElements(env, arr, pos2, 0);\n                    (*env)-&gt;ReleaseDoubleArrayElements(env, arr, line2, 0);\n                  }\n\n                (*env)-&gt;ReleaseDoubleArrayElements(env, arr, pos1, 0);\n\n                (*env)-&gt;ReleaseDoubleArrayElements(env, arr, line1, 0);\n           }\n\n\n\n        /////////////////PROCESSING...///////////////////\n\n\n        for( i = 0; i&lt;w; i++){\n            for( j = 0; j&lt;h; j++){\n                for( k = 0; k&lt;3; k++){\n\n                    a[i][j][k] = 255-a[i][j][k];\n                }\n            }\n        }\n        //////////////RETURNING THE ARRAY////////////////////////////\n        jclass doubleArrayArrayClass = (*env)-&gt;FindClass(env,\"[[D\");\n                jclass doubleArrayClass = (*env)-&gt;FindClass(env,\"[D\");\n\n                jobjectArray ret  = (*env)-&gt;NewObjectArray(env,w, doubleArrayArrayClass, NULL);\n        for( i = 0; i&lt;w; i++){\n            jobjectArray dim2 = (*env)-&gt;NewObjectArray(env, w, doubleArrayClass, NULL);\n            for( j = 0; j&lt;h; j++) {\n                jdoubleArray dim1 = (*env)-&gt;NewDoubleArray(env,h);\n                jdouble tmp[256];\n                for( k = 0; k&lt;3; k++){\n                    tmp[k] = a[i][j][k];\n                }\n                (*env)-&gt;SetDoubleArrayRegion(env,dim1 , 0, 3, tmp);\n                (*env)-&gt;SetObjectArrayElement(env, dim2, j, dim1);\n                (*env)-&gt;DeleteLocalRef(env, dim1);\n            }\n            (*env)-&gt;SetObjectArrayElement(env,ret, i, dim2);\n            (*env)-&gt;DeleteLocalRef(env,dim2);\n        }\n        return ret;\n}\n</code></pre>\n\n<p>And here is the java code:</p>\n\n<pre><code>public class MainActivity extends ActionBarActivity {\nImageView imageView2;\ndouble[][][] imgArray;\nint w,h;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    imageView2 = (ImageView) findViewById(R.id.imageView1);\n    imageView2.setDrawingCacheEnabled(true);\n    BitmapDrawable bitmapDrawable = (BitmapDrawable) imageView2.getDrawable();\n    final Bitmap bitmap = bitmapDrawable.getBitmap();\n    Button button = (Button) findViewById(R.id.button1);\n\n\n    w = bitmap.getWidth();\n    h = bitmap.getHeight();\n    imgArray = new double[w][h][3];\n\n   for(int i = 0 ; i&lt;w; i++){\n        for(int j =0; j&lt;h; j++){\n            imgArray[i][j][0] = Color.red(bitmap.getPixel(i, j));\n            imgArray[i][j][1] = Color.green(bitmap.getPixel(i, j));\n            imgArray[i][j][2] = Color.blue(bitmap.getPixel(i, j));\n        }\n    }\n\n    button.setOnClickListener(new OnClickListener() {\n\n        @Override\n        public void onClick(View v) {\n\n            imgArray = inv(imgArray, w, h);\n            Bitmap newBitmap = Bitmap.createBitmap(w,h,bitmap.getConfig());\n            for(int i = 0 ; i&lt;w; i++){\n                for(int j =0; j&lt;h; j++){\n                    newBitmap.setPixel(i, j, Color.rgb((int)(imgArray[i][j][0]), (int)(imgArray[i][j][1]), (int)(imgArray[i][j][2])));\n                }\n           }\n            imageView2.setImageBitmap(newBitmap);\n        }\n    });\n\n}\nstatic{\n    System.loadLibrary(\"inv\");\n}\n\n// internal, private\npublic native double[][][] inv(double[][][] inputArr, int w, int h);\n\n\n    ...\n}\n</code></pre>\n\n<p>The application crashes with logcat error: <code>W/dalvikvm(5009): JNI: unpinPrimitiveArray(0x424eaea0) failed to find entry (valid=1)</code></p>\n"}, {"tags": ["c", "struct", "linked-list", "visual-studio-2015", "stack"], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1454529250, "post_id": 35186358, "comment_id": 58089872, "body": "@pm100: Yes, C++ allows this, but the question is about C."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1454529339, "post_id": 35186358, "comment_id": 58089940, "body": "i was telling the OP that if he changed to c++ he can do what he wants (if thats an option)"}, {"owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "edited": false, "score": 0, "creation_date": 1454529777, "post_id": 35186358, "comment_id": 58090192, "body": "I see, embedded the line in a function and worked. Much obliged!"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 9, "last_activity_date": 1454529228, "last_edit_date": 1454529228, "creation_date": 1454529035, "answer_id": 35186358, "question_id": 35186290, "link": "https://stackoverflow.com/questions/35186290/c-struct-object-stack-function-call-is-not-allowed-in-constant-expression-err/35186358#35186358", "title": "C struct object Stack - function call is not allowed in constant expression (error)", "body": "<p>In C language objects with <em>static storage duration</em> can only be initialized with constant expressions. </p>\n\n<p>You are initializing a <em>global variable</em> <code>S</code>, which is an object with static storage duration. Your expression <code>newStack(256)</code> is <em>not</em> a constant expression. As the compiler told you already, you are not allowed to call functions in constant expressions. Hence the error. That's all there is to it.</p>\n\n<p>If you want to have a global variable <code>S</code>, then the only way to \"initialize\" it with <code>newStack(256)</code> is to do it inside some function at program startup. E.g.</p>\n\n<pre><code>Stack * S;\n\nint main()\n{ \n  S = newStack(256);\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17666, "favorite_count": 2, "accepted_answer_id": 35186358, "answer_count": 1, "score": 8, "last_activity_date": 1454529228, "creation_date": 1454528819, "question_id": 35186290, "link": "https://stackoverflow.com/questions/35186290/c-struct-object-stack-function-call-is-not-allowed-in-constant-expression-err", "title": "C struct object Stack - function call is not allowed in constant expression (error)", "body": "<p>I am trying to create a struct object (stack) which consists of: </p>\n\n<pre><code>typedef struct node {\n    int val;\n    struct node * next;\n}node_t;\n\ntypedef struct {\n    node_t * top;\n    int max_size;\n    int used_size;\n} Stack;\n</code></pre>\n\n<p>However, when I try to initialize the object and allocate it some memory space using the function:</p>\n\n<pre><code> Stack * newStack(int max_size) {\n    Stack * S = malloc(sizeof(Stack));\n    S-&gt;top = NULL;\n    S-&gt;max_size = max_size;\n    S-&gt;used_size = 0;\n    return S;\n}\n\nStack * S = newStack(256); //error here\n</code></pre>\n\n<p>I get the error referred to above - </p>\n\n<blockquote>\n  <p>function call is not allowed in constant expression</p>\n</blockquote>\n\n<p>I have never come across this type of error before, and I don't know how to tackle it. Any help is appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1454528952, "post_id": 35186272, "comment_id": 58089662, "body": "Do you also have to take care of the issue of getting the wrong result when encountering two consecutive spaces?"}, {"owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1454529007, "post_id": 35186272, "comment_id": 58089706, "body": "@Jongware: I think I can neglect that issue."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1454529387, "post_id": 35186272, "comment_id": 58089982, "body": "...and the issue of considering a comma or period as a word separator when the author forgot to use a space. I recommend remembering the previous character, and checking if the next is another separator. This will also solve the paragraph problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1454529512, "post_id": 35186272, "comment_id": 58090057, "body": "@Immortal if you think you can &quot;neglect&quot; significant issues, your code will never be robust. Once a large user base is pushing and abusing it, they will find every possible weakness, as in <a href=\"https://en.wikipedia.org/wiki/Murphy&#39;s_law\" rel=\"nofollow noreferrer\">Murphy&#39;s Law</a>."}, {"owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1454529730, "post_id": 35186272, "comment_id": 58090165, "body": "@WeatherVane: Yeah, you&#39;re right. I&#39;ll think of rectifying my code to account for these situations."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454538122, "post_id": 35186555, "comment_id": 58095000, "body": "Recommend <code>if (n == &#39;\\n&#39; &amp;&amp; prev != &#39;\\n&#39;){</code> --&gt; <code>if (prev == &#39;\\n&#39;){</code>"}], "tags": [], "owner": {"reputation": 350, "user_id": 4684294, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DBUHlSel940/AAAAAAAAAAI/AAAAAAAAAQE/i5HDXWRTm7I/photo.jpg?sz=128", "display_name": "sudheesh shetty", "link": "https://stackoverflow.com/users/4684294/sudheesh-shetty"}, "is_accepted": false, "score": 0, "last_activity_date": 1454529716, "creation_date": 1454529716, "answer_id": 35186555, "question_id": 35186272, "link": "https://stackoverflow.com/questions/35186272/c-word-count-dealing-with-paragraphs/35186555#35186555", "title": "C Word Count - dealing with paragraphs", "body": "<p>Try to store the previous char in a variable and compare.</p>\n\n<pre><code>unsigned long int charcount = 0;\nunsigned long int wordcount = 0;\nunsigned long int linecount = 0;\nint n;\nint prev='\\n';\n\nwhile ((n = getchar()) != EOF){\n    charcount++;\n    if (n == '\\n' &amp;&amp; prev != '\\n'){\n        linecount++;\n    }\n    if (n == ' ' || n == '\\n' || n == '\\t')\n        wordcount++;\n    }\n    prev=n\n}\nprintf( \"%lu %lu %lu\\n\", charcount, wordcount, linecount );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": false, "score": 2, "last_activity_date": 1454529728, "creation_date": 1454529728, "answer_id": 35186561, "question_id": 35186272, "link": "https://stackoverflow.com/questions/35186272/c-word-count-dealing-with-paragraphs/35186561#35186561", "title": "C Word Count - dealing with paragraphs", "body": "<p>Use indicator which specifies whether you're reading word or whitespace:</p>\n\n<pre><code>int isWord = 0;\nwhile ((n = getchar()) != EOF) {\n    if (isspace(n)) {\n        if (n == '\\n') ++linecount;\n        if (isWord) {\n           ++wordcount;\n           isWord = 0;\n        }\n    }\n    else {\n        isWord = 1;\n    }\n}\nif (isWord)\n    ++wordcount;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "edited": false, "score": 0, "creation_date": 1454805886, "post_id": 35189055, "comment_id": 58210521, "body": "Hi, I tried your code and it isn&#39;t giving me the right output. It&#39;s outputting around 100 words too less."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "edited": false, "score": 0, "creation_date": 1454818730, "post_id": 35189055, "comment_id": 58212827, "body": "@Immortal 2nd version append to the answer."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1454818709, "last_edit_date": 1454818709, "creation_date": 1454538716, "answer_id": 35189055, "question_id": 35186272, "link": "https://stackoverflow.com/questions/35186272/c-word-count-dealing-with-paragraphs/35189055#35189055", "title": "C Word Count - dealing with paragraphs", "body": "<p>Consider using these definitions:  </p>\n\n<p><strong>line beginning</strong>: present character is the first or previous was <code>'\\n'</code>.<br>\n<strong>word beginning</strong>: present character is not a white-space and either it is the first or the previous character was a separator (white-space).</p>\n\n<p>This approach detects the <em>beginning</em> of a line/word.</p>\n\n<pre><code>unsigned long charcount = 0;\nunsigned long wordcount = 0;\nunsigned long linecount = 0;\nint previous = '\\n';\nint n;\n\nwhile ((n = getchar()) != EOF) {\n  ++charcount;\n  if (isspace(previous)) {\n    if (!issspace(n))  ++wordcount;    // Beginning of word detected\n    if (previous == '\\n') ++linecount; // Beginning of line detected\n  }\n  previous = n;\n}\nprintf(\"%lu %lu %lu\\n\", charcount, wordcount, linecount);\n</code></pre>\n\n<p>This approach work well including the following conditions:</p>\n\n<ol>\n<li><p>Multiple spaces are treat like a single space (separator).</p></li>\n<li><p>File beginning with spaces or not, does not throw off word count.</p></li>\n<li><p>File ending with spaces or not, does not throw off word count.</p></li>\n<li><p>Last line need not end with a <code>'\\n'</code>.</p></li>\n<li><p>Zero length files are not a problem.</p></li>\n<li><p>No post <code>EOF</code> code needed to adjust <code>line/word</code> count.</p></li>\n<li><p>No <code>word/line/char</code> length limitation other than <code>ULONG_MAX</code>.</p></li>\n</ol>\n\n<hr>\n\n<p>Details on OP's code</p>\n\n<pre><code>for (; (n = getchar()) != EOF; ++charcount) {\n\n    // This fails to count the last line of a file should it lack a \\n\n    if (n == '\\n')\n        ++linecount;\n\n    // This counts separator (white-space) occurrence.\n    // Multiple spaces count as 2 words: not good\n    // Files like \"Hello\" will count as 0 words: not good\n    // Files like \" Hello \" will count as 2 words: not good\n    if (n == ' ' || n == '\\n' || n == '\\t')\n        ++wordcount;\n\n    // Using `unsigned long` is good, maybe even `unsigned long long`.\n    printf(\"%lu %lu %lu\\n\", charcount, wordcount, linecount);\n}\n</code></pre>\n\n<hr>\n\n<p>OP it not getting enough \"words\".  Let us assume and non-letter is a valid word separator.</p>\n\n<pre><code>unsigned long charcount = 0;\nunsigned long wordcount = 0;\nunsigned long linecount = 0;\nint previous = '\\n';\nint n;\n\nwhile ((n = getchar()) != EOF) {\n  ++charcount;\n  if (!isalpha(previous)) {\n    if (previous == '\\n') ++linecount; // Beginning of line detected\n    if (isalpha(n))  ++wordcount;    // Beginning of word detected\n  }\n  previous = n;\n}\nprintf(\"%lu %lu %lu\\n\", charcount, wordcount, linecount);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1454818709, "creation_date": 1454528778, "last_edit_date": 1454532666, "question_id": 35186272, "link": "https://stackoverflow.com/questions/35186272/c-word-count-dealing-with-paragraphs", "title": "C Word Count - dealing with paragraphs", "body": "<p>Here is my current code:</p>\n\n<pre><code>unsigned long charcount = 0;\nunsigned long wordcount = 0;\nunsigned long linecount = 0;\nint n;\n\nfor (; (n = getchar()) != EOF; ++charcount) {\n    if (n == '\\n')\n        ++linecount;\n    if (n == ' ' || n == '\\n' || n == '\\t')\n        ++wordcount;\n    printf(\"%lu %lu %lu\\n\", charcount, wordcount, linecount);\n}\n</code></pre>\n\n<p>I think there's an issue with this code such that if the text file I'm reading from consists of paragraphs because of the newline that separates them,they would count as words. I'm not sure how I would fix it so that they don't count as words.</p>\n"}, {"tags": ["c++", "c", "variables", "pointers"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1454528831, "post_id": 35186257, "comment_id": 58089566, "body": "a pointer is a variable that stores the memory address of some other data. that&#39;s all. that&#39;s it. a pointer IS a variable with a very specific usage. neither of your vars above are pointers. memory is assigned to store the <code>5</code>, but that&#39;s not a pointer."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454528851, "post_id": 35186257, "comment_id": 58089585, "body": "Don&#39;t confuse <i>the letter &quot;a&quot;</i> with <i>the variable called &quot;a&quot;</i>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1454528856, "post_id": 35186257, "comment_id": 58089590, "body": "A better phrase might be &quot;a is the name for that block of memory&quot;."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1454528903, "post_id": 35186257, "comment_id": 58089623, "body": "@MarcB A pointer doesn&#39;t have to be a variable. With the example from the OPs code, <code>&amp;a</code> is a pointer but isn&#39;t a variable, and neither is <code>(char *) 0xffff0000</code>."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454528914, "post_id": 35186257, "comment_id": 58089635, "body": "Someone told me that &quot;my house&quot; means the house at 123 Fake St. So if my house just points to another house, what&#39;s the difference between a house and an address? (Answer: This question makes no sense, because I&#39;m deliberately conflating the words &quot;my&quot; &quot;house&quot;, and the actual house)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1454528947, "post_id": 35186257, "comment_id": 58089659, "body": "Please read some C and C++ books (maybe an assembler book, too)"}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 0, "creation_date": 1454529032, "post_id": 35186257, "comment_id": 58089725, "body": "Your question <code>how does it differ from a pointer? </code> has no answer, because it contains a false assumption: <code>...and it also points to something</code>. It doesn&#39;t."}, {"owner": {"reputation": 585, "user_id": 5090110, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdffb4ac46aea0059fd76f050ee78146?s=128&d=identicon&r=PG&f=1", "display_name": "ashwani", "link": "https://stackoverflow.com/users/5090110/ashwani"}, "edited": false, "score": 0, "creation_date": 1454529127, "post_id": 35186257, "comment_id": 58089792, "body": "can someone please explain me what is actually happening in the memory for the above code?"}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1454529141, "post_id": 35186257, "comment_id": 58089802, "body": "The somebody is wrong - there are 2 &#39;blocks&#39; of memory allocated, one for <code>a</code> and one for <code>b</code>. If you add <code>a = 6;</code> just before the return, then <code>a</code> and <code>b</code> have different values."}, {"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1454529149, "post_id": 35186257, "comment_id": 58089805, "body": "@DieterL&#252;cking IMO this is an intelligible, well-formed question a person can have while reading a book -- even if it&#39;s based on a false premise, there was research involved."}, {"owner": {"reputation": 5517, "user_id": 1227469, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d8fc267b1c19301d8baf672ebf9eb7b?s=128&d=identicon&r=PG", "display_name": "JBentley", "link": "https://stackoverflow.com/users/1227469/jbentley"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 3, "creation_date": 1454529825, "post_id": 35186257, "comment_id": 58090221, "body": "@Litty Not really. Most books will make it clear that a and b are separate memory locations. Failing that, a very quick and trivial test will confirm it."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 5517, "user_id": 1227469, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d8fc267b1c19301d8baf672ebf9eb7b?s=128&d=identicon&r=PG", "display_name": "JBentley", "link": "https://stackoverflow.com/users/1227469/jbentley"}, "edited": false, "score": 0, "creation_date": 1454531143, "post_id": 35186257, "comment_id": 58091028, "body": "@JBentley ... if they represent memory-locations at all."}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1454531598, "post_id": 35186384, "comment_id": 58091366, "body": "Note: the variable names are not stored in memory."}, {"owner": {"reputation": 6719, "user_id": 2945357, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd030641417e32d532056ed59e3340e3?s=128&d=identicon&r=PG", "display_name": "Andreas K.", "link": "https://stackoverflow.com/users/2945357/andreas-k"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1611311654, "post_id": 35186384, "comment_id": 116416024, "body": "@user253751 where are they stored?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 6719, "user_id": 2945357, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd030641417e32d532056ed59e3340e3?s=128&d=identicon&r=PG", "display_name": "Andreas K.", "link": "https://stackoverflow.com/users/2945357/andreas-k"}, "edited": false, "score": 0, "creation_date": 1611337185, "post_id": 35186384, "comment_id": 116428186, "body": "@AndreasK. They are not. They are only something the compiler looks at."}], "tags": [], "owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "is_accepted": true, "score": 6, "last_activity_date": 1454529118, "creation_date": 1454529118, "answer_id": 35186384, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers/35186384#35186384", "title": "What is the difference between variable name and pointers?", "body": "<p>Whoever explained this to you is wrong in this case:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int a = 5; //variable a has value 5 put it\n    //a does have an address\n    int b = a; \n    //variable b is created, it has its own seperate memory address.\n    //in this case the CONTENTS of a (5) are dumped inside b\n    return 0;\n}\n</code></pre>\n\n<p>saying <code>int b=a;</code> will not make the variables aliases of each other. </p>\n\n<p>What you heard about is this:</p>\n\n<pre><code>//...\nint a=1;\nint *b = &amp;a; //create a pointer called b and make it point to a \n//(set it equal to address of a)\n</code></pre>\n\n<p>in your case you have:</p>\n\n<pre><code>memory addresses:         variable name           value stored at memory address\n1000                      a(int)                    5\n1004                      b(int)                    5\n</code></pre>\n\n<p>obviously changing values of a and does not affect each other</p>\n\n<p>in the case I described you have this:</p>\n\n<pre><code>memory addresses:         variable name           value stored at memory address\n1000                      a(int)                    5\n1004                      b(int*)                   1000\n</code></pre>\n\n<p>as you can see, since <code>b</code> is a pointer, its actual value is the address of a. </p>\n\n<p>so doing <code>*b=3;</code> will change the value of <code>a</code></p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1454529143, "creation_date": 1454529143, "answer_id": 35186394, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers/35186394#35186394", "title": "What is the difference between variable name and pointers?", "body": "<p>In the above code, <code>a</code> and <code>b</code> are separate variables sitting in their own block of memory.</p>\n\n<p>This line:</p>\n\n<pre><code>int a = 5;\n</code></pre>\n\n<p>Creates a variable named <code>a</code> and gives it an initial value of <code>5</code>.</p>\n\n<p>This line:</p>\n\n<pre><code>int b = a;\n</code></pre>\n\n<p>Created a variable named <code>b</code> and gives it an initial value of whatever the current value of <code>a</code> is, in this case <code>5</code>.</p>\n\n<p>If you were to later add the line <code>a=4</code>, <code>a</code> would contain the value <code>4</code> while <code>b</code> will still contain the value <code>5</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1454530892, "last_edit_date": 1454530892, "creation_date": 1454529202, "answer_id": 35186412, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers/35186412#35186412", "title": "What is the difference between variable name and pointers?", "body": "<p>When you declare   </p>\n\n<pre><code>int a = 1;\n</code></pre>\n\n<p>Compiler allocate memory for <code>sizeof(int)</code> bytes and name that data location (or memory block) <code>a</code> and place a value <code>1</code> in that block. \nIn a very simple way a variable is a named location of data.  </p>\n\n<p>You can think of it as putting the value assigned in a box with the variable name as <a href=\"http://foobarnbaz.com/2012/07/08/understanding-python-variables/\" rel=\"nofollow noreferrer\">shown</a> below:<br>\n<a href=\"https://i.stack.imgur.com/SxvT7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SxvT7.png\" alt=\"enter image description here\"></a></p>\n\n<p>And for all the variables you create a new box is created with the variable name to hold the value.  </p>\n\n<p>Assigning one variable to another makes a copy of the value and put that value in the new box.</p>\n\n<pre><code>a = 2;\nint b = a;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wScHX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wScHX.png\" alt=\"enter image description here\"></a> <a href=\"https://i.stack.imgur.com/U4XoH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U4XoH.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, <code>a</code> and <code>b</code> are not pointers but are the names of different memory blocks having their own addresses.   </p>\n"}, {"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1454529756, "post_id": 35186461, "comment_id": 58090177, "body": "No <code>a</code> doesn&#39;t mean &quot;the value at address X&quot;, it depends if <code>a</code> is used as a left-value or a right-value."}, {"owner": {"reputation": 585, "user_id": 5090110, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdffb4ac46aea0059fd76f050ee78146?s=128&d=identicon&r=PG&f=1", "display_name": "ashwani", "link": "https://stackoverflow.com/users/5090110/ashwani"}, "edited": false, "score": 0, "creation_date": 1454529968, "post_id": 35186461, "comment_id": 58090295, "body": "&quot;At first, there are leftover values from whatever last used that area of memory&quot; - what do you mean by this?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 585, "user_id": 5090110, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdffb4ac46aea0059fd76f050ee78146?s=128&d=identicon&r=PG&f=1", "display_name": "ashwani", "link": "https://stackoverflow.com/users/5090110/ashwani"}, "edited": false, "score": 0, "creation_date": 1454530138, "post_id": 35186461, "comment_id": 58090412, "body": "@user132458 That means the memory could contain anything. Your code might not be the first code to use the addresses 1000 and 1004. (But it might be, since each process has its own address space, meaning your address 1000 is different from another process&#39;s address 1000)"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 1, "last_activity_date": 1454529409, "creation_date": 1454529409, "answer_id": 35186461, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers/35186461#35186461", "title": "What is the difference between variable name and pointers?", "body": "<blockquote>\n  <p>can someone please explain me what is actually happening in the memory for the above code? </p>\n</blockquote>\n\n<p>I'll make up some addresses - let's say a is at 1000 and b is at 1004.</p>\n\n<p>At first, there are leftover values from whatever last used that area of memory. That could be anything:</p>\n\n<pre><code>Address     Value\n  ...\n  1000      1234\n  1004      5678\n  ...\n</code></pre>\n\n<p>Then <code>int a = 5;</code> sets the space reserved for <code>a</code> to 5.</p>\n\n<pre><code>Address     Value\n  ...\n  1000      5\n  1004      5678\n  ...\n</code></pre>\n\n<p>Then <code>int b = a;</code> copies that to the space reserved for <code>b</code>:</p>\n\n<pre><code>Address     Value\n  ...\n  1000      5\n  1004      5\n  ...\n</code></pre>\n\n<p>At no point are the variable names actually involved.</p>\n\n<p>The variable names are used <em>by the compiler only</em>. In this case, the compiler knows that \"<code>a</code>\" means \"the value at address 1000\" and that \"<code>b</code>\" means \"the value at address 1004\". (That's slightly oversimplified, since local variables aren't always stored at the same address, but you get the idea)</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1454529606, "creation_date": 1454529606, "answer_id": 35186516, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers/35186516#35186516", "title": "What is the difference between variable name and pointers?", "body": "<p>In:</p>\n\n<pre><code>int a = 5;\n</code></pre>\n\n<p><code>a</code> denotes a container in which 5 is stored. <code>a</code> is just an identifier to represent either the memory location or its content. In <code>a=5</code>, <code>a</code> denotes the container, in <code>5+a</code>,  <code>a</code> denotes the value contained.</p>\n\n<p>In:</p>\n\n<pre><code>int b = a;\n</code></pre>\n\n<p><code>b</code> denotes a container in which the current value of the container <code>a</code> is stored.</p>\n\n<p>Then you have 2 containers, one denoted <code>a</code> and the other denoted <code>b</code>. Both contains a value (the same for both).</p>\n\n<p>Neither of these to variables are pointers. But, as every variable in C, they have address that is obtained with operator <code>&amp;</code>. <code>&amp;a</code> is the address of the container <code>a</code>.</p>\n\n<p>A pointer is a variable (a container if you wish) whose value is the address of some container. Thus:</p>\n\n<pre><code>int *p = &amp;a;\n</code></pre>\n\n<p><code>p</code> is a container that contains the address of <code>a</code>, we shortly say <code>p</code> points to <code>a</code>. And of course <code>p</code> also has an address (as every variable/container): <code>&amp;p</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 2, "creation_date": 1454530242, "post_id": 35186612, "comment_id": 58090476, "body": "Should be noted that this is a C++ answer."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 3, "last_activity_date": 1454535598, "last_edit_date": 1454535598, "creation_date": 1454529869, "answer_id": 35186612, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers/35186612#35186612", "title": "What is the difference between variable name and pointers?", "body": "<p>What you may be thinking of is (if this is in a C++ context):</p>\n\n<pre><code>int a = 5;\nint&amp; b = a;\n</code></pre>\n\n<p>This creates a <em>reference</em> to <code>a</code> which is bound to the memory of <code>a</code>.</p>\n\n<p>Changing <code>b</code> now alters <code>a</code>:</p>\n\n<pre><code>b = 42;\nif (a == 42) // true\n</code></pre>\n\n<p>In your OP that wouldn't be the case since <code>b</code> there is a separate variable independent to <code>a</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1454532934, "creation_date": 1454532934, "answer_id": 35187512, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers/35187512#35187512", "title": "What is the difference between variable name and pointers?", "body": "<p>You are confusing compile-time and run-time concepts.</p>\n\n<p>Names in a C program are compile-time entities that refer to storage that will be used at runtime.  Once the compiler finishes its work, and you have object code, the names are gone (except for debug info, which isn't really part of the runtime object code -- its extra info for a debugger to refer to), and your object code directly operates on values in registers or memory (the 'storage' I referred to above).</p>\n\n<p>We usually say \"refers to\" instead of \"points at\" even though the english meaning of those words is pretty much the same, as \"points at\" make one think of pointers, which are a completely different run-time concept.</p>\n"}], "owner": {"reputation": 585, "user_id": 5090110, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdffb4ac46aea0059fd76f050ee78146?s=128&d=identicon&r=PG&f=1", "display_name": "ashwani", "link": "https://stackoverflow.com/users/5090110/ashwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1562, "favorite_count": 2, "accepted_answer_id": 35186384, "answer_count": 7, "score": 0, "last_activity_date": 1454535598, "creation_date": 1454528725, "question_id": 35186257, "link": "https://stackoverflow.com/questions/35186257/what-is-the-difference-between-variable-name-and-pointers", "title": "What is the difference between variable name and pointers?", "body": "<p>Consider this example.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int a = 5;\n    int b = a;\n    return 0;\n}\n</code></pre>\n\n<p>Somebody told me in the above code, first a block of memory for integer is created and assigned value 5 and then <strong>a</strong> points to that block. And then, <strong>b</strong> also points to the same block of memory containing value 5.</p>\n\n<p>So my question is if <strong>a</strong> is an integer variable and it also points to something then how does it differ from a pointer? </p>\n\n<p>Pardon me if this question is too basic. But I need to know.</p>\n"}, {"tags": ["c", "arrays", "allocation"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1454528362, "post_id": 35186093, "comment_id": 58089315, "body": "What errors are you getting?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1454529008, "post_id": 35186093, "comment_id": 58089708, "body": "It&#39;s not quite clear what you want to re-allocate or what the last parameter to <code>reallocArray</code> is. At present, you only re-allocate the first row. When you want your whole array to grow, you must do a two-level re-allocation just as in <code>createArray</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1454544939, "post_id": 35186093, "comment_id": 58097663, "body": "Are you trying to say that you want to increase the number of columns in the array?"}], "answers": [{"tags": [], "owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1454528871, "creation_date": 1454528871, "answer_id": 35186314, "question_id": 35186093, "link": "https://stackoverflow.com/questions/35186093/reallocation-of-2d-arrays-in-c/35186314#35186314", "title": "reallocation of 2d arrays in c", "body": "<p>In <code>Free2DArray()</code>, you <code>free()</code> the individual arrays of integers, but not the \"outer\" dimension of the array which holds the integer pointers.\nYou could add another call to <code>free()</code> after the loop to take care of that.</p>\n\n<p>In <code>main()</code>:</p>\n\n<pre><code>for(i = 0; i &lt;size; i++) {\n    printf(\"%d\", testArray[0][i]);\n    free2DArray(testArray, size);\n}\n</code></pre>\n\n<p>you will end up <code>free()</code>-ing the (inner) integer arrays multiple times.\nThe call to <code>free2DArray()</code> should be outside the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5879310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d44d9127e28d71fb7e6638d00eeab1?s=128&d=identicon&r=PG&f=1", "display_name": "Rub3n", "link": "https://stackoverflow.com/users/5879310/rub3n"}, "edited": false, "score": 0, "creation_date": 1454621982, "post_id": 35186641, "comment_id": 58139506, "body": "I forgot the second free. I fixed that now, but I do not understand the last if-statement. The if-statement never works right?. if temp is idd NULL then the assert will interupt, but the code itself is really nice. I did not know that the pointers had to be safe temporary, so thanks :D           <code>(temp = realloc( temp, newSizeB * sizeof( int ) );            assert( temp != NULL );            if ( temp == NULL )               return array;              array[i] = temp;              }              return array;          }</code>"}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1454531023, "last_edit_date": 1454531023, "creation_date": 1454529946, "answer_id": 35186641, "question_id": 35186093, "link": "https://stackoverflow.com/questions/35186093/reallocation-of-2d-arrays-in-c/35186641#35186641", "title": "reallocation of 2d arrays in c", "body": "<p>You need a function <code>reallocArray</code> which realaoctes the outer array and all the inner arrays too.\nAdapt youre code like this:</p>\n\n<pre><code>#include &lt;malloc.h&gt; \n\nint **reallocArray( int **array, int oldSizeA, int newSizeA, int newSizeB )\n{\n    // realloc the array of pointers ( allocates new memory if array == NULL )\n    int **safe_array = realloc( array, newSizeA * sizeof( int* ) );\n    assert(safe_array != NULL);\n    if ( safe_array == NULL )\n        return array;\n    array = safe_array;\n\n    // realloc the inner arrays of int ( allocates new memory if i &gt;= oldSizeA )\n    for ( int i = 0; i &lt; newSizeA; i ++ )\n    {\n        int *temp = NULL;    // allocate new memory if i &gt;= oldSizeA\n        if ( i &lt; oldSizeA )  \n            temp = array[i]; // reallocate array[i] if i &lt; oldSizeA\n\n        temp = realloc( temp, newSizeB * sizeof( int ) );\n        assert( temp != NULL );\n        if ( temp == NULL )\n            return array;\n        array[i] = temp;\n    }\n    return array;\n}\n</code></pre>\n\n<p>Use function <code>reallocArray</code> in your function <code>create2darray</code> to create your array. If the input paramter of <code>ralloc</code> is <code>NULL</code>, then new dynamic memory is allocated.</p>\n\n<pre><code>int **create2darray( int sizeA, int sizeB )\n{\n    return reallocArray( NULL, 0, sizeA, sizeB );\n}\n</code></pre>\n\n<p>First you have to <code>free</code> the inner arrays of int in a loop, then you have to <code>free</code> the array of pointers:</p>\n\n<pre><code>void free2DArray( int **array, int sizeA )\n{\n    for (int i = 0; i &lt; sizeA; i ++)\n       free( array[i] );\n    free( array );\n}\n\n\nint main( int argv, char *argc[] ){\n\n    int sizeA = 1;\n    int sizeB = 10;\n    int **testArray = create2darray( sizeA, sizeB );\n    for ( int i = 0; i &lt; sizeB; i++ ) {\n        testArray[0][i] = 2; \n    }\n\n    int oldSizeA = sizeA;\n    int oldSizeB = sizeB;\n    sizeB = 2*sizeB;\n    testArray = reallocArray( testArray, oldSizeA, sizeA, sizeB );\n    for( int i = oldSizeB; i &lt; sizeB; i++ ) {\n        testArray[0][i] = 3;\n    }\n\n    for( int i = 0; i &lt; sizeB; i++ ) {\n        printf(\"%d\", testArray[0][i]);\n    }\n\n    free2DArray(testArray, sizeA );\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5879310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d44d9127e28d71fb7e6638d00eeab1?s=128&d=identicon&r=PG&f=1", "display_name": "Rub3n", "link": "https://stackoverflow.com/users/5879310/rub3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 35186641, "answer_count": 2, "score": 1, "last_activity_date": 1454531793, "creation_date": 1454528184, "last_edit_date": 1454531793, "question_id": 35186093, "link": "https://stackoverflow.com/questions/35186093/reallocation-of-2d-arrays-in-c", "title": "reallocation of 2d arrays in c", "body": "<p>I want to reallocate a 2d array, so that the arrays in the second array become bigger, so the things I want to store are bigger than the arrays I want to store them in and I want to make the arrays bigger. The problem is that I do not really know how to do this. I got it to compile without errors, but in Valgrind I saw a lot of memory errors, so I do something wrong. I saw <a href=\"https://stackoverflow.com/questions/33007171/using-alloc-on-a-2d-array-c\">a previous question about this here</a> but I do not really understand it, so any help and explanation on how to do this would be greatly appreciated.</p>\n\n<p>I have this so far.</p>\n\n<pre><code>int **create2darray(int a, int b) {\n  int i;\n  int **array;\n\n  array = malloc(a * sizeof(int *));\n  assert(array != NULL);\n  for (i = 0; i &lt; a; i++) {\n    array[i] = calloc(b, sizeof(int));\n    assert(array[i] != NULL);\n  }\n  return array;\n}\n\nint **reallocArray(int **array, int size, int i) {\n  int i;\n  int **safe_array;\n  safe_array = realloc(*array ,2 * size);\n  assert(safe_array != NULL);\n  array = safe_array;\n  return array;\n}\n\nvoid free2DArray(int **array, int m) {\n  int i;\n  for (i = 0; i &lt; m; i++) {\n    free(array[i]);\n  }\n}\n\n\nint main(int argv, char *argc[]) {\n  int i;\n  int size;\n  int **testArray = create2darray(1, 10);\n  size = 10;\n  for(i = 0; i &lt; size; i++) {\n    testArray[0][i] = 2;\n  }\n  testArray[0] = reallocArray(testArray, size, 0);\n  size = 2 * size;\n  for(i = 9; i &lt; size; i++) {\n    testArray[0][i] = 3;\n  }\n  for(i = 0; i &lt; size; i++) {\n    printf(\"%d\", testArray[0][i]);\n    free2DArray(testArray, size);\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "printf", "scanf", "words"], "comments": [{"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 3, "creation_date": 1454527414, "post_id": 35185808, "comment_id": 58088698, "body": "<code>it&#39;s not running.</code> Why not? Describe your problem further."}, {"owner": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1454527480, "post_id": 35185808, "comment_id": 58088746, "body": "the program end immediately"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1454527785, "post_id": 35185808, "comment_id": 58088962, "body": "The program end and the program not run are very different things."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1454527793, "post_id": 35185808, "comment_id": 58088969, "body": "Please read <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1454527835, "post_id": 35185808, "comment_id": 58089007, "body": "Also, exit if you encounter a fatal error, don&#39;t just print and keep going."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1454527918, "post_id": 35185808, "comment_id": 58089059, "body": "Unless the file is several gigabytes long, I would keep the list of words in memory, as a <a href=\"https://en.wikipedia.org/wiki/Binary_search_tree\" rel=\"nofollow noreferrer\">binary search tree</a>, or as a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">trie</a>, or in a <a href=\"https://en.wikipedia.org/wiki/Hash_table\" rel=\"nofollow noreferrer\">hash table</a>. But the simplest method is just to read the words into an unsorted array. Then sort the array, and scan the array for duplicates. Hint: the <code>realloc</code> function will be useful in creating the array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454540631, "post_id": 35185808, "comment_id": 58096076, "body": "<code>fscanf(fd, &quot;%s&quot;, aux1)</code> is bad as 1) does not limit input length 2) the result of the function is not checked."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 0, "creation_date": 1454528822, "post_id": 35186142, "comment_id": 58089560, "body": "how do i flush the output? i suppose the program close while it&#39;s trying to write the new word in the norep.txt"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 1, "creation_date": 1454529072, "post_id": 35186142, "comment_id": 58089754, "body": "@Marco I added a pointer to the fflush() entry in the two manuals."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 0, "creation_date": 1454529725, "post_id": 35186142, "comment_id": 58090158, "body": "@Marco The manual seems to say that because it is marked as &quot;append&quot; then the data written to the disk must always be at the end of the file. This seems to be a requirement of Unix."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 1, "creation_date": 1454530081, "post_id": 35186142, "comment_id": 58090371, "body": "@Marco I added an update to the answer but I do not have anything that I can say beyond this."}], "tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 2, "last_activity_date": 1454530028, "last_edit_date": 1454530028, "creation_date": 1454528320, "answer_id": 35186142, "question_id": 35185808, "link": "https://stackoverflow.com/questions/35185808/check-duplicates-words-in-a-file/35186142#35186142", "title": "Check duplicates words in a file", "body": "<p>You should flush the output file before you rewind it.</p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/fflush.3.html\" rel=\"nofollow\">fflush - flush a stream</a> or <a href=\"http://www.cplusplus.com/reference/cstdio/fflush/\" rel=\"nofollow\">fflush</a></p>\n\n<p>Of course, this will not fix your problem because:</p>\n\n<p>Note below that the manual says that reposition operations are ignored so that your attempt to read will always find the end of file.</p>\n\n<blockquote>\n  <p>append: Open file for output at the end of a file. Output operations\n  always write data at the end of the file, expanding it. Repositioning\n  operations (fseek, fsetpos, rewind) are ignored. The file is created\n  if it does not exist.</p>\n</blockquote>\n\n<p>What you should probably do is create an internal memory table that keeps all the unique entries and write it out to a new file <strong>after</strong> all processing is done.  As you read the fd file, check the list and add a new entry if it is not already in the list. Then after you have finished processing fd, then and only then write out your list. Of course, this may be too big depending on the size of your data file.</p>\n\n<p>You could append each unique entry to the output file as you go. but you would need to have some method of checking the previous entries <strong>without</strong> trying to read the output file.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 0, "creation_date": 1454538262, "post_id": 35187315, "comment_id": 58095059, "body": "how can i modify the loop if i need to put one time the non unique words in the file?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 0, "creation_date": 1454566046, "post_id": 35187315, "comment_id": 58104198, "body": "That&#39;s obvious, isn&#39;t it? A unique word occurs exactly once, a repeated word occurs more often. So you just need to change the condition for writing to <code>out</code> to <code>if (count &gt; 1) ...</code>."}, {"owner": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 0, "creation_date": 1454596741, "post_id": 35187315, "comment_id": 58123306, "body": "No, because i want to copy the non unique words only one time, in this way the program just copy the non unique words many time as they appears"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "edited": false, "score": 0, "creation_date": 1454597208, "post_id": 35187315, "comment_id": 58123641, "body": "Okay, you are right, the solution works only for unique words. You could probably work around that, but it would make a solution that is already quite ugly even uglier. Don&#39;t use the file approach, come up with a solution that stores the words in memory. In the comments, user3386109 has outlined some possibilities; his &quot;simples method&quot; would work for small files, I think."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 2, "last_activity_date": 1454532219, "creation_date": 1454532219, "answer_id": 35187315, "question_id": 35185808, "link": "https://stackoverflow.com/questions/35185808/check-duplicates-words-in-a-file/35187315#35187315", "title": "Check duplicates words in a file", "body": "<p>The usual way to go about this is to read the input file word for word, store the necessary information in some way and then, after you have read all information from the file, write the desired output to the output file.</p>\n\n<p>A rough skeleton of that approach might look like this:</p>\n\n<pre><code>int main()\n{\n    const char *infile = \"text.txt\";\n    const char *outfile = \"norep.txt\";\n\n    FILE *in;\n    FILE *out;\n\n    char word[30];\n\n    // (1) Read all words\n\n    in = fopen(infile, \"r\");      // .. and enforce success\n\n    while (fscanf(in, \"%29s\", word) == 1) {\n        // store word somewhere\n    }        \n    fclose(in);\n\n    // (2) Determine unique words somehow\n\n    // (3) Write out unique words\n\n    out = fopen(outfile, \"w\");    // .. and enforce success\n\n    for (i = 0; i &lt; nunique; i++) {\n        fprintf(out, \"%s\\n\", unique[i]);\n    }        \n    fclose(out);\n\n    return 0;\n}\n</code></pre>\n\n<p>The actual algorithm to fin the unique words is missing from this incomplete skeleton code.</p>\n\n<p>If you really want to test the words in a file for uniqueness without using additional memory beyond the current word, you can open the input file twice, with independent file pointers. Then you can write a loop like so:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    const char *infile = \"text.txt\";\n    const char *outfile = \"norep.txt\";\n\n    FILE *in1;\n    FILE *in2;\n    FILE *out;\n\n    char word1[30];\n    char word2[30];\n\n    in1 = fopen(infile, \"r\");\n    in2 = fopen(infile, \"r\");\n    out = fopen(outfile, \"w\");\n\n    if (in1 == NULL || in2 == NULL || out == NULL) {\n        fprintf(stderr, \"Could not open all required files.\\n\");\n        exit(1);\n    }\n\n    while (fscanf(in1, \"%29s\", word1) == 1) {\n        int count = 0;\n\n        while (fscanf(in2, \"%29s\", word2) == 1) {\n            if (strcmp(word1, word2) == 0) count++;\n            if (count &gt; 1) break;\n        }\n\n        if (count == 1) fprintf(out, \"%s\\n\", word1);\n        rewind(in2);\n    }\n\n    fclose(in1);\n    fclose(in2);\n    fclose(out);\n\n    return 0;\n}\n</code></pre>\n\n<p>This will, of course, re-read the file as often as there are words in the file. Not a good approach to find the unique words in Moby-Dick. I recommend that you look into the memory-based approach.</p>\n"}], "owner": {"reputation": 61, "user_id": 5113080, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/674c7e0786cb355c629513f1bd958826?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5113080/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1454533015, "creation_date": 1454527235, "last_edit_date": 1454533015, "question_id": 35185808, "link": "https://stackoverflow.com/questions/35185808/check-duplicates-words-in-a-file", "title": "Check duplicates words in a file", "body": "<p>I want to check if there are any duplicates in a .txt file. I've wrote a code but it's not running. I'm not sure about opening the <code>norep.txt</code> file in <code>\"a+\"</code> mode. The idea is to put the first word of my text in the <code>norep.txt</code> file, then compare every word in the <code>text.txt</code> with the words in <code>norep.txt</code> and copy only the words I need in the file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    FILE *fd;\n    FILE *ft;\n    char aux[30];\n    char aux1[30];    \n    int len;    \n\n    fd = fopen(\"c:\\\\text.txt\", \"r\");\n    if (fd == NULL) {\n        puts(\"Error\");\n    }\n\n    ft = fopen(\"c:\\\\norep.txt\", \"a+\");\n    if (ft == NULL) {\n        puts(\"Error\");\n    }\n\n    fscanf(fd, \"%s\", aux);\n    fprintf(ft, \"%s\", aux);\n    rewind(fd);\n    rewind(ft);\n    while (!feof(fd)) {\n        fscanf(fd, \"%s\", aux);\n\n        while (!feof(ft)) {\n            fscanf(ft, \"%s\", aux1);\n            len = strcmp(aux, aux1);\n\n            if (len != 0) {\n                fprintf(ft, \"%s\", aux);\n            }\n        }\n        rewind(ft);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 6007, "user_id": 188456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca3f7e968f1df433b6bc9adc9072f2cc?s=128&d=identicon&r=PG", "display_name": "Spaceghost", "link": "https://stackoverflow.com/users/188456/spaceghost"}, "edited": false, "score": 1, "creation_date": 1454527363, "post_id": 35185787, "comment_id": 58088667, "body": "Add linefeed &quot;\\n&quot; to your printf lines."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1454527605, "post_id": 35185852, "comment_id": 58088843, "body": "am sorry what does that mean?"}, {"owner": {"reputation": 6007, "user_id": 188456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca3f7e968f1df433b6bc9adc9072f2cc?s=128&d=identicon&r=PG", "display_name": "Spaceghost", "link": "https://stackoverflow.com/users/188456/spaceghost"}, "reply_to_user": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 1, "creation_date": 1454528090, "post_id": 35185852, "comment_id": 58089163, "body": "I think you need to find a good beginner book and work through it"}], "tags": [], "owner": {"reputation": 6007, "user_id": 188456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca3f7e968f1df433b6bc9adc9072f2cc?s=128&d=identicon&r=PG", "display_name": "Spaceghost", "link": "https://stackoverflow.com/users/188456/spaceghost"}, "is_accepted": false, "score": 0, "last_activity_date": 1454528054, "last_edit_date": 1454528054, "creation_date": 1454527393, "answer_id": 35185852, "question_id": 35185787, "link": "https://stackoverflow.com/questions/35185787/printf-not-working-with-scanf/35185852#35185852", "title": "Printf not working with scanf", "body": "<p>Add linefeed \"\\n\" to your printf lines like so:</p>\n\n<pre><code>printf(\"Write a number: \\n\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1454530924, "post_id": 35185862, "comment_id": 58090867, "body": "But why ist that code written in my book i am learning from. Also when i looked up on the internet, this code wastn inclued. @I3x"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1454531491, "post_id": 35185862, "comment_id": 58091283, "body": "@\u017digaGazvoda Prabably the author isn&#39;t aware of this or ignored it here and explained it elsewhere in the book or simply forgot to mention it. I can only guess. This is a standard behaviour and nothing unexpected/unusual about it."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1454528043, "last_edit_date": 1454528043, "creation_date": 1454527424, "answer_id": 35185862, "question_id": 35185787, "link": "https://stackoverflow.com/questions/35185787/printf-not-working-with-scanf/35185862#35185862", "title": "Printf not working with scanf", "body": "<blockquote>\n  <p>when i paste this into my program it works as it should but i am\n  wondering why do i have to do that?</p>\n</blockquote>\n\n<p>It's because <code>printf()</code> is usually line-buffered when attached to a terminal. So disabling the buffering with the call to <code>setvbuf()</code> makes stdio library to not buffer at all. </p>\n\n<p>You can also use <code>fflush(stdout);</code> after the <code>printf()</code> call to flush out the buffered output. The same can be done with <code>setbuf(stdout, NULL);</code> as well.</p>\n\n<hr>\n\n<p>You can also add a <code>\\n</code> at the end of <code>printf()</code> statement to force the flushing. But this will work only if the output goes to a terminal device.</p>\n\n<p>For example, if you do (on a unix-like system): </p>\n\n<pre><code>./a.out &gt; output_file\n</code></pre>\n\n<p>then the <code>\\n</code> will not flush the buffer. </p>\n\n<p>Out of the two options (<code>setbuf()</code> and <code>fflush()</code>),<code>fflush(stdout);</code> is probably the better option in most cases. Since disabling the buffering completely can have negative impact on performance (which is the primary reason for buffering in the first place) whereas <code>fflush()</code> can be judiciously used at the right place when you think it's necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1454568400, "post_id": 35185865, "comment_id": 58105216, "body": "But what did you mean by &quot;If the printf contains a new line this is done automatically&quot;."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 1, "last_activity_date": 1454527426, "creation_date": 1454527426, "answer_id": 35185865, "question_id": 35185787, "link": "https://stackoverflow.com/questions/35185787/printf-not-working-with-scanf/35185865#35185865", "title": "Printf not working with scanf", "body": "<p><code>printf</code> has a buffer. It is a mechanism to make code run faster by not having to switch between the user context and the kernel context. To get over this you can tell the code to flush the buffer - i.e. send it to the operating system. This can be done by</p>\n\n<pre><code>fflush(stdout);\n</code></pre>\n\n<p>After a <code>printf</code>. If the <code>printf</code> contains a new line this is done automatically.</p>\n"}, {"tags": [], "owner": {"reputation": 390, "user_id": 24854, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/041ae51aa0e641839ebb7914c594a4b3?s=128&d=identicon&r=PG", "display_name": "DarthNoodles", "link": "https://stackoverflow.com/users/24854/darthnoodles"}, "is_accepted": false, "score": 0, "last_activity_date": 1454527526, "creation_date": 1454527526, "answer_id": 35185898, "question_id": 35185787, "link": "https://stackoverflow.com/questions/35185787/printf-not-working-with-scanf/35185898#35185898", "title": "Printf not working with scanf", "body": "<p>You probably want \\n in each of those printf statements.</p>\n"}], "owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 35185862, "answer_count": 4, "score": 1, "last_activity_date": 1454528085, "creation_date": 1454527149, "last_edit_date": 1454527293, "question_id": 35185787, "link": "https://stackoverflow.com/questions/35185787/printf-not-working-with-scanf", "title": "Printf not working with scanf", "body": "<p>Hi i am new to the programing and for example in my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void){\n   int a;\n   printf(\"Write a number: \");\n   scanf(\"%d\", &amp;a);\n   printf(\"Your written number was: %d\", a);\n   return 0;\n}\n</code></pre>\n\n<p><code>Printf</code> does not write \"write a number\" in console when i start the program but only after i already inserted the number and pressed enter.\nI have already done some research and found out for this code:</p>\n\n<pre><code>setvbuf(stdout, NULL, _IONBF, 0);\n</code></pre>\n\n<p>when i paste this into my program it works as it should but i am wondering why do i have to do that?</p>\n"}, {"tags": ["c", "file-io", "printf", "output"], "comments": [{"owner": {"reputation": 258, "user_id": 2626606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f0tlt.jpg?s=128&g=1", "display_name": "shimonb89", "link": "https://stackoverflow.com/users/2626606/shimonb89"}, "edited": false, "score": 2, "creation_date": 1454526291, "post_id": 35185503, "comment_id": 58088003, "body": "why not use <code>fprintf</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2877117"}, "edited": false, "score": 0, "creation_date": 1454526328, "post_id": 35185503, "comment_id": 58088025, "body": "I have to use printf"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1454526375, "post_id": 35185503, "comment_id": 58088062, "body": "<code>freopen()</code> to stdout?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1454526473, "post_id": 35185503, "comment_id": 58088125, "body": "<code>open</code> is POSIX standard function, not a C standard library function. You can use <a href=\"http://en.cppreference.com/w/c/io/fopen\" rel=\"nofollow noreferrer\"><code>fopen</code></a> to open a file and then use <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>fprintf</code></a> and other functions from the standard library to write to the file."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1454526679, "post_id": 35185503, "comment_id": 58088266, "body": "what flags are you passing to open?  It can be tricky to get the correct set of flags the first time you try it."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1454533391, "post_id": 35185503, "comment_id": 58092468, "body": "What dbush said below will work, but in most cases, is bad practice.  If you use <code>fprintf</code>, you can then assign a file stream handle to the value of stdout on startup if you later decide to you do want output to stdout, i.e.:  <code>FILE * f = stdout</code>.  The &quot;normal&quot; way to write to a file with <code>printf</code> is to redirect stdout of your program when you call it, in which case your shell does something very similar to the code shown by dbush before calling <code>exec</code> or similar to start your program."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2877117"}, "edited": false, "score": 1, "creation_date": 1454526619, "post_id": 35185562, "comment_id": 58088225, "body": "The assignment specifies using printf and open"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1454526677, "post_id": 35185562, "comment_id": 58088262, "body": "@user2877117, looks like your instructor, or whoever created the assignment, is bit misguided."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2877117"}, "edited": false, "score": 0, "creation_date": 1454526745, "post_id": 35185562, "comment_id": 58088304, "body": "That doesn&#39;t really help me, I am just at a loss for how to proceed"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454527098, "post_id": 35185562, "comment_id": 58088505, "body": "@user2877117: Ask your instructor for advice. He seems to be confused himself. How can he even assume you have a POSIX-compliant system available? Is Unix or Linux (OS-X?) required for that course? AFAIK Windows dropped POSIX-support some time ago."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1454527176, "post_id": 35185562, "comment_id": 58088556, "body": "Use <code>dup2</code> to redirect <code>stdout</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1454528299, "post_id": 35185562, "comment_id": 58089279, "body": "@user2877117 On unix clones, you open a terminal window and type <code>man dup2</code>."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 1, "last_activity_date": 1454526421, "creation_date": 1454526421, "answer_id": 35185562, "question_id": 35185503, "link": "https://stackoverflow.com/questions/35185503/how-to-write-to-a-file-using-open-and-printf/35185562#35185562", "title": "How to write to a file using open() and printf()?", "body": "<p>If you open a file with <code>open()</code> then you get an <code>int</code> file descriptor which you can write to with <code>write()</code>.</p>\n\n<p>If you open a file with <code>fopen()</code> then you get a <code>FILE*</code> handle and can use the stdio family of functions to write to it, which includes <code>fprintf()</code> and <code>fputs()</code>.</p>\n\n<p>These are two different levels of abstraction. <code>open()</code> doesn't mix well with the <code>printf()</code> family. You could get them to work together with <code>fdopen()</code>, but it's not a good idea to mix abstractions.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1454533724, "post_id": 35186153, "comment_id": 58092648, "body": "You should remove the <code>close(fd)</code>:  <code>exit</code> or even just returning from <code>main</code> will cause <code>stdout</code> to be closed as if by <code>fclose(stdout)</code>, which will <code>fflush(stdout);</code>.  This step might be needed for the contents to be flushed to the file. Closing the system handle would prevent this."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1454533798, "post_id": 35186153, "comment_id": 58092691, "body": "@chqrlie Good call.  Edited."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1454533905, "post_id": 35186153, "comment_id": 58092750, "body": "@user2877117: if you haven&#39;t learned <code>dup2</code> yet, you could call <code>close(1);</code> before the <code>fd = open(name, O_WRONLY | O_CREAT, 0644);</code>.  There is a good chance <code>fd == 1</code> after this and you wont need the call <code>dup2(fd, 1);</code>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1454533787, "last_edit_date": 1454533787, "creation_date": 1454528369, "answer_id": 35186153, "question_id": 35185503, "link": "https://stackoverflow.com/questions/35185503/how-to-write-to-a-file-using-open-and-printf/35186153#35186153", "title": "How to write to a file using open() and printf()?", "body": "<p>There's a trick to this.  </p>\n\n<p>You need to duplicate the open file descriptor to file descriptor 1, i.e. <code>stdout</code>.  Then you can use <code>printf</code>:</p>\n\n<pre><code>int main(int argc, char *argv[]){\n\n    int fd;\n    char *name = \"helloworld\";\n    fd = open(name, O_WRONLY | O_CREAT, 0644);\n    if (fd == -1) {\n        perror(\"open failed\");\n        exit(1);\n    }\n\n    if (dup2(fd, 1) == -1) {\n        perror(\"dup2 failed\"); \n        exit(1);\n    }\n\n    // file descriptor 1, i.e. stdout, now points to the file\n    // \"helloworld\" which is open for writing\n    // You can now use printf which writes specifically to stdout\n\n    char *hi = \"Hello World\";\n    printf(\"%s\\n\", hi);\n\n    exit(0);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9213858, "user_type": "registered", "profile_image": "https://graph.facebook.com/267488706982963/picture?type=large", "display_name": "Angelos Guan", "link": "https://stackoverflow.com/users/9213858/angelos-guan"}, "is_accepted": false, "score": 0, "last_activity_date": 1515874940, "creation_date": 1515874940, "answer_id": 48243961, "question_id": 35185503, "link": "https://stackoverflow.com/questions/35185503/how-to-write-to-a-file-using-open-and-printf/48243961#48243961", "title": "How to write to a file using open() and printf()?", "body": "<p>You can close the standard out before you use printf, so that the output would be saved in the file directory you opened instead of printing to the console.</p>\n\n<pre><code>close(1); // close(STDOUT_FILENO);\nfd = open(name, O_CREAT);\n\nchar *hi = \"Hello World\";\nprintf(\"%s\\n\", hi);\n\nclose(fd);\n</code></pre>\n\n<p>I'm assuming the printf() command can only print the output to one directory at one time and it would go to the default standard output directory if you do not close it first. If you find out a way to set the output directory to the fd without closing the STDOUT_FILENO, please let me know.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 8301681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0080f10a7945580d5bdff22ebb0050bc?s=128&d=identicon&r=PG&f=1", "display_name": "Youwei Liang", "link": "https://stackoverflow.com/users/8301681/youwei-liang"}, "is_accepted": false, "score": -1, "last_activity_date": 1582513715, "last_edit_date": 1582513715, "creation_date": 1582257172, "answer_id": 60331969, "question_id": 35185503, "link": "https://stackoverflow.com/questions/35185503/how-to-write-to-a-file-using-open-and-printf/60331969#60331969", "title": "How to write to a file using open() and printf()?", "body": "<p>If you use <code>fopen</code> to handle this, a simpler trick is to use <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html\" rel=\"nofollow noreferrer\">variadic macros</a>, by which you can replace <code>printf</code> with <code>fprintf</code> in preprocessing. The <code>...</code> representing variable arguments in the macro is just like its counterpart in the declaration of functions with variable arguments. This trick works in C and C++. For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define printf(...) fprintf(File, __VA_ARGS__)\n\nint main()\n{\n    FILE *File;\n\n    File = fopen(\"file.txt\", \"w+\");\n\n    printf(\"Hello world!\");\n\n    fclose(File);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note: variadic macro is used because the number of arguments of <code>printf</code> is a variable.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2877117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23391, "favorite_count": 2, "accepted_answer_id": 35186153, "answer_count": 4, "score": 3, "last_activity_date": 1582513715, "creation_date": 1454526219, "last_edit_date": 1454535098, "question_id": 35185503, "link": "https://stackoverflow.com/questions/35185503/how-to-write-to-a-file-using-open-and-printf", "title": "How to write to a file using open() and printf()?", "body": "<p>I am opening a file with open(), and need to print to that file using printf with no output to the console. How do I do this? I can successfully create the file, and printf to the console, but that is not correct. </p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    int fd;\n    char *name = \"helloworld\";\n    fd = open(name, O_CREAT);\n\n    char *hi = \"Hello World\";\n    printf(\"%s\\n\", hi);\n\n    close(fd);\n    exit(0);\n}\n</code></pre>\n\n<p>I need the program to have no output to the console, but if I look at the file <code>helloworld</code>, it should have \"Hello World\" written inside. Such as: </p>\n\n<pre><code>prompt&gt; ./hello\nprompt&gt; more helloworld\n   Hello World\n</code></pre>\n"}, {"tags": ["c", "linux", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 3, "last_activity_date": 1454526936, "creation_date": 1454526936, "answer_id": 35185731, "question_id": 35184780, "link": "https://stackoverflow.com/questions/35184780/postgresql-connect-asynchronously-with-epoll-wait/35185731#35185731", "title": "PostgreSQL connect asynchronously with epoll_wait", "body": "<p>The postgresql client library first tries an ssl-connection and if that fails, it retries without ssl. This is done regardless of the reason <em>why</em> the connection failed and it does so without notifying the caller at all. So even if the error is a <em>wrong password</em>, the client library will close the filedescriptor and reopen the socket connection for plaintext.</p>\n\n<p>If a filedescriptor is closed, it is automatically <em>removed</em> from the epoll-set (which results in your \"No such file or directory\" error message). So you would have to manually re-add it:</p>\n\n<pre><code>if (epoll_ctl(epoll_fd, EPOLL_CTL_MOD, PQsocket(connection), &amp;event) == -1) {\n    if (errno == ENOENT) {\n        epoll_ctl(epoll_fd, EPOLL_CTL_ADD, PQsocket(connection), &amp;event);\n    } else {\n        printf(\"epoll_ctl() error: %u: %s\\n\", errno, strerror(errno));\n        exit(1);\n    }\n}\n</code></pre>\n\n<p>Another option would be to enable or disable ssl permanently, add <code>sslmode=require</code> or <code>sslmode=disable</code> to your connect string for this. But if you plan to use <code>PGreset()</code> (or encounter any other situation where the socket is closed and reopened transparently to the caller), you will have the same problem then.</p>\n\n<p>Admittedly, this behaviour of the postgresql-client-library is not very <code>epoll()</code>-friendly. In the old times, when using <code>select()</code> or <code>poll()</code>, this was a non-issue, because there was no state in kernel like with <code>epoll()</code> now.</p>\n"}], "owner": {"reputation": 33, "user_id": 5879364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbef29830e0530dae73315c52f158c1b?s=128&d=identicon&r=PG&f=1", "display_name": "SchodMC", "link": "https://stackoverflow.com/users/5879364/schodmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 2, "accepted_answer_id": 35185731, "answer_count": 1, "score": 3, "last_activity_date": 1454526936, "creation_date": 1454523933, "question_id": 35184780, "link": "https://stackoverflow.com/questions/35184780/postgresql-connect-asynchronously-with-epoll-wait", "title": "PostgreSQL connect asynchronously with epoll_wait", "body": "<p>I whant to work with PostgreSQL (9.1) asynchronously in my linux project. For this I have to use epoll_wait (because of other parts of the application). The goal will be to finally use epoll in edge triggered mode. But I cannot make the connection process work, even in non edge triggered mode. And I don't know why. However, when user name and password is correct, it works. But it also have to work when the password is wrong, too. In that case, I get some error I don't understand. :-/ Here is the code I use (the connection is already initialized with an PQconnectStart() and a parameter list that works fine with PQconnectdb()):</p>\n\n<pre><code>void ConnectDB(PGconn * connection)\n{\n    int pq_fd = PQsocket(connection);\n    int epoll_fd = epoll_create1(0);\n    struct epoll_event event;\n    struct epoll_event *eventList = (epoll_event *)calloc(64, sizeof(epoll_event));\n\n    event.data.fd = pq_fd;\n    event.events = EPOLLOUT | EPOLLERR;\n    epoll_ctl(epoll_fd, EPOLL_CTL_ADD, pq_fd, &amp;event);\n\n    while (true) {\n        PostgresPollingStatusType pt = PQconnectPoll(connection);\n        switch (pt)\n        {\n        case PGRES_POLLING_OK:\n            printf(\"*** connection established!\\n\");\n            return;\n\n        case PGRES_POLLING_FAILED:\n            printf(\"*** connection failed: %s\\n\", PQerrorMessage(connection));\n            return;\n\n        case PGRES_POLLING_ACTIVE:\n            printf(\"   --- poll result: PGRES_POLLING_ACTIVE\\n\");\n            break;\n\n        case PGRES_POLLING_READING:\n            printf(\"   --- poll result: PGRES_POLLING_READING - Modifiing epoll to EPOLLIN\\n\");\n            event.events = EPOLLIN | EPOLLERR;\n            if (epoll_ctl(epoll_fd, EPOLL_CTL_MOD, PQsocket(connection), &amp;event) == -1) {\n                printf(\"epoll_ctl() error: %u: %s\\n\", errno, strerror(errno));\n                exit(1);\n            }\n            break;\n\n        case PGRES_POLLING_WRITING:\n            printf(\"   --- poll result: PGRES_POLLING_WRITING - Modifiing epoll to EPOLLOUT\\n\");\n            event.events = EPOLLOUT | EPOLLERR;\n            if (epoll_ctl(epoll_fd, EPOLL_CTL_MOD, PQsocket(connection), &amp;event) == -1) {\n                printf(\"epoll_ctl() error: %u: %s\\n\", errno, strerror(errno));\n                exit(1);\n            }\n            break;\n        }\n\n        int n = epoll_wait(epoll_fd, eventList, 64, -1);\n        if (n == -1) {\n            printf(\"epoll_wait() error: %u: %s\\n\", errno, strerror(errno));\n            exit(1);\n        }\n    }\n}\n</code></pre>\n\n<p>And here is the output I get:</p>\n\n<pre><code>--- poll result: PGRES_POLLING_WRITING - Modifiing epoll to EPOLLOUT\n--- poll result: PGRES_POLLING_READING - Modifiing epoll to EPOLLIN\n--- poll result: PGRES_POLLING_READING - Modifiing epoll to EPOLLIN\n--- poll result: PGRES_POLLING_READING - Modifiing epoll to EPOLLIN\n--- poll result: PGRES_POLLING_WRITING - Modifiing epoll to EPOLLOUT\n--- poll result: PGRES_POLLING_READING - Modifiing epoll to EPOLLIN\n--- poll result: PGRES_POLLING_READING - Modifiing epoll to EPOLLIN\n--- poll result: PGRES_POLLING_WRITING - Modifiing epoll to EPOLLOUT\nepoll_ctl() error: 2: No such file or directory\n</code></pre>\n\n<p>Has anyone an idea?</p>\n"}, {"tags": ["c", "c-preprocessor", "primitive-types", "fixed-width"], "comments": [{"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 2, "creation_date": 1454523083, "post_id": 35184502, "comment_id": 58086131, "body": "Have a look at the documentation: <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/types/integer</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454523372, "post_id": 35184502, "comment_id": 58086291, "body": "An implementation is not required to provide any fixed-with integer types. State your target platform."}, {"owner": {"reputation": 169, "user_id": 2846321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45278b308d0695424a6d15d6b2328fed?s=128&d=identicon&r=PG", "display_name": "user163911", "link": "https://stackoverflow.com/users/2846321/user163911"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1454523610, "post_id": 35184502, "comment_id": 58086442, "body": "@moooeeeep That&#39;s what I&#39;ve been looking at, but they don&#39;t tell me where I got <code>__INT64_TYPE__</code> from, or anything regarding the width of <code>uintmax_t</code>.  @Olaf I think implementation was a poor choice of words. I would like my answer to be portable yet as accurate as possible."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454523649, "post_id": 35184502, "comment_id": 58086470, "body": "In general, an algorithm is written for a specific precision. Thus you use a defined type. If you really have to optimise for speed, you have to adopt at leat parts to the platform anyway. Please state your actual problem. You might be working on a symptom."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1454527147, "post_id": 35184502, "comment_id": 58088534, "body": "Do you really need the width as a constant expression in the preprocessing directive phase? If not, you could just use <code>#define UINTMAX_BITS ((sizeof(uintmax_t) * CHAR_BIT)</code> to determine the number of bits."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1454527220, "post_id": 35184502, "comment_id": 58088589, "body": "@Ian Abbott <code>((sizeof(uintmax_t) * CHAR_BITS)</code> works great unless on a rare platform that has padding bits in the type."}, {"owner": {"reputation": 169, "user_id": 2846321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45278b308d0695424a6d15d6b2328fed?s=128&d=identicon&r=PG", "display_name": "user163911", "link": "https://stackoverflow.com/users/2846321/user163911"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1454593432, "post_id": 35184502, "comment_id": 58120891, "body": "@Ian Abbot, I think you&#39;ve prompted me to solve it. I needed a number that was <code>1 &lt;&lt; NUM_BITS - 2</code>. I think <code>(UINTMAX_MAX &gt;&gt; 1) ^ (UINTMAX_MAX &gt;&gt; 2)</code> would work. I&#39;m still relatively new to C, so I don&#39;t know if I&#39;d run into any issues regarding this."}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1454865516, "post_id": 35184502, "comment_id": 58225403, "body": "If you&#39;re confident that <code>uintmax_t</code> has less than 2040 bits, you can (probably) use one of Hallvard&#39;s macros in <a href=\"http://stackoverflow.com/a/4589384/\">this answer</a> to calculate the number if bits at compile time."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454523475, "post_id": 35184615, "comment_id": 58086359, "body": "Why the <code>5</code> at the end?"}, {"owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454523517, "post_id": 35184615, "comment_id": 58086389, "body": "I was superstitious! The low bits don&#39;t really matter after all."}], "tags": [], "owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "is_accepted": false, "score": 0, "last_activity_date": 1454523424, "creation_date": 1454523424, "answer_id": 35184615, "question_id": 35184502, "link": "https://stackoverflow.com/questions/35184502/which-fixed-width-integer-types-are-available/35184615#35184615", "title": "Which fixed-width integer types are available", "body": "<p>I've used things like</p>\n\n<pre><code>#if (UINTMAX_MAX &gt; 0xFFFFFFFFFFFFFFF5ULL)\n</code></pre>\n\n<p>etc.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1454531997, "last_edit_date": 1454531997, "creation_date": 1454526965, "answer_id": 35185738, "question_id": 35184502, "link": "https://stackoverflow.com/questions/35184502/which-fixed-width-integer-types-are-available/35185738#35185738", "title": "Which fixed-width integer types are available", "body": "<blockquote>\n  <p>if anyone knows a way to count the number of bits in <code>uintmax_t</code>, that'd be perfect, but failing that where have I got <strong>INT64_TYPE</strong> from?</p>\n</blockquote>\n\n<p>To count the number of bit in an unsigned type is easy.  Set to -1 and count the number of shift until 0.</p>\n\n<pre><code>int bc_uintmax_t(void) {\n  int bc = 0;\n  uintmax_t x = -1;\n  while (x) {\n    x %= 2;\n    bc++;\n  }\n  return bc;\n}\n</code></pre>\n\n<p>To <em>portable</em> detect the number of bits in <code>uintmax_t</code> at compile time is harder.  A chief obstacle is the pre-preprocessor arithmetic may only work up to <code>intmax_t</code>.  So unless some assumptions are made, a <em>portable</em> solution may be unfindable.</p>\n\n<p>Of course <code>sizeof (uintmax_t) * CHAR_BIT</code> is the <em>maximum</em> possible bit width that type could have.  Yet padding bits could occur.</p>\n\n<p>Look for <code>(u)intmax_t</code> and Exact-width integer types like <code>uint64_t</code> in <code>&lt;stdint.h&gt;</code>.</p>\n\n<hr>\n\n<p>[Edit]</p>\n\n<p>To determine the <em>value</em> bit width of a constant at compile time, code could use the following.  Note: With <code>UINTMAX_MAX</code>, I am not certain how portable is this code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n#define ISGE2_1(x)  ((x) &gt;= 2)\n#define ISGE2_2(x)  ((x) &gt;= 4)\n#define ISGE2_4(x)  ((x) &gt;= 16)\n#define ISGE2_8(x)  ((x) &gt;= 256)\n#define ISGE2_16(x) ((x) &gt;= 65536)\n#define ISGE2_32(x) ((x)/65536 &gt;= 65536)\n#define ISGE2_64(x) ((x)/4294967296 &gt;= 4294967296)\n#define ISGE2_128(x) ((x)/18446744073709551616 &gt;= 18446744073709551616)\n\n#define BW_1ORLESS(x)   ((x) ?  1 : 0)\n#define BW_2ORLESS(x)   (ISGE2_1(x)  ?  1 + BW_1ORLESS(x/2)                     : BW_1ORLESS(x))\n#define BW_4ORLESS(x)   (ISGE2_2(x)  ?  2 + BW_2ORLESS(x/4)                     : BW_2ORLESS(x))\n#define BW_8ORLESS(x)   (ISGE2_4(x)  ?  4 + BW_4ORLESS(x/16)                    : BW_4ORLESS(x))\n#define BW_16ORLESS(x)  (ISGE2_8(x)  ?  8 + BW_8ORLESS(x/256)                   : BW_8ORLESS(x))\n#define BW_32ORLESS(x)  (ISGE2_16(x) ? 16 + BW_16ORLESS(x/65536)                : BW_16ORLESS(x))\n#define BW_64ORLESS(x)  (ISGE2_32(x) ? 32 + BW_32ORLESS(x/4294967296)           : BW_32ORLESS(x))\n#define BW_128ORLESS(x) (ISGE2_64(x) ? 64 + BW_64ORLESS(x/18446744073709551616) : BW_64ORLESS(x))\n\n\n#if INTMAX_MAX/4294967296 &gt; 4294967296\n  #define BW_65PLUS(x) (ISGE2_128(x) ? BW_129PLUS(x) : BW_128ORLESS(x))\n  #define BIT_WIDTH_POSITIVE_VALUE(x) (ISGE2_64(x) ? BW_65PLUS(x) : BW_64ORLESS(x))\n\n#else\n  #define BW_33PLUS(x) (ISGE2_64(x)   ? BW_65PLUS(x)  : BW_64ORLESS(x))\n  #define BIT_WIDTH_POSITIVE_VALUE(x) (ISGE2_32(x) ? BW_64ORLESS(x) : BW_32ORLESS(x))\n#endif\n\n// Do not call BIT_WIDTH_POSITIVE_VALUE with negative values.\n</code></pre>\n\n<p>Application</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(true));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(CHAR_BIT));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(SCHAR_MAX));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(SHRT_MAX));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(INT_MAX));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(LONG_MAX));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(LLONG_MAX));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(INTMAX_MAX));\n  printf(\"%d\\n\", BIT_WIDTH_POSITIVE_VALUE(UINTMAX_MAX));\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>1\n4\n7\n15\n31\n31\n63\n63\n64\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 2846321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45278b308d0695424a6d15d6b2328fed?s=128&d=identicon&r=PG", "display_name": "user163911", "link": "https://stackoverflow.com/users/2846321/user163911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1455702891, "creation_date": 1454522997, "last_edit_date": 1455702891, "question_id": 35184502, "link": "https://stackoverflow.com/questions/35184502/which-fixed-width-integer-types-are-available", "title": "Which fixed-width integer types are available", "body": "<p>So I'm trying to create an implementation of an algorithm that uses fixed-width integers. That being said I want to use the largest size available, and at the same time need to know the number of bits in it, as the algorithm relies on bit shifting.</p>\n\n<p>I would like a way, preferably via pre-processor, to determine the width of the largest integer type (currently I'm using <code>uintmax_t</code> from <code>stdint.h</code>), but failing that I could exhaustively achieve this if I know the fixed-width types that are defined/supported by the compiler.</p>\n\n<p>I found an old program on my PC where I have the pre-processor directives of <code>#ifdef __INT64_TYPE__</code>, which would be passable, but I have no idea where these would be defined, or under what standards.</p>\n\n<p>So to sum up, if anyone knows a way to count the number of bits in <code>uintmax_t</code>, that'd be perfect, but failing that where have I got <code>__INT64_TYPE__</code> from?</p>\n"}, {"tags": ["c", "winapi", "tabcontrol"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1547385447, "post_id": 35184498, "comment_id": 95167300, "body": "See this answer for an approach for using dialog templates to create the content for the tab panes of a tab control using the Win API <a href=\"https://stackoverflow.com/a/53108864/1466970\">stackoverflow.com/a/53108864/1466970</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1454525563, "post_id": 35184831, "comment_id": 58087526, "body": "The second point highlights a common mistake. The tab control creates the illusion to host the child dialogs, but is really a sibling that merely switches the visibility of those dialogs. An artifact of this is the <code>WM_NOTIFY</code>-handler implementation. Interesting information giving a bit of background information for your first point: <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040730-00/?p=38293\" rel=\"nofollow noreferrer\">What is the DS_CONTROL style for?</a> This especially describes the issue of the OP with respect to keyboard navigation."}, {"owner": {"reputation": 100, "user_id": 1771409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ca01a734bc2ccd89e9446269702605?s=128&d=identicon&r=PG", "display_name": "rom1nux", "link": "https://stackoverflow.com/users/1771409/rom1nux"}, "edited": false, "score": 0, "creation_date": 1454528182, "post_id": 35184831, "comment_id": 58089209, "body": "A big thank-you Soots and IInspectable, it work like a charme ! This change all my positionning because of parent reference but it&#39;s easy to fix. Another thank-you for your quick response and the interesting and well written link about DS_CONTROL."}], "tags": [], "owner": {"reputation": 15649, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": true, "score": 4, "last_activity_date": 1454524088, "creation_date": 1454524088, "answer_id": 35184831, "question_id": 35184498, "link": "https://stackoverflow.com/questions/35184498/c-winapi-tab-on-dialog-based-tabcontrol/35184831#35184831", "title": "C winapi tab on dialog based tabcontrol", "body": "<p>I see two problems here.</p>\n\n<ol>\n<li><p>In resources, add <code>DS_CONTROL</code> bit to <code>IDD_DLG_PAGE1</code> and <code>IDD_DLG_PAGE2</code>.</p></li>\n<li><p>In code, in your <code>WM_INITDIALOG</code> handler, that <code>CreateDialog</code> calls say your child dialogs are created children of <code>hTabCtrlMain</code>. Make them children of <code>hWnd</code> instead.</p></li>\n</ol>\n"}], "owner": {"reputation": 100, "user_id": 1771409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ca01a734bc2ccd89e9446269702605?s=128&d=identicon&r=PG", "display_name": "rom1nux", "link": "https://stackoverflow.com/users/1771409/rom1nux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 35184831, "answer_count": 1, "score": 0, "last_activity_date": 1454524088, "creation_date": 1454522976, "question_id": 35184498, "link": "https://stackoverflow.com/questions/35184498/c-winapi-tab-on-dialog-based-tabcontrol", "title": "C winapi tab on dialog based tabcontrol", "body": "<p>I working on dialog with TabControl based on child dialog.\nTab key work well on parent but never focus controls inside the child dialogs.</p>\n\n<p>I create a simple sample to replicate the problem. \nI work on Window 7, i use MinGW as compiler and ResEdit/Notepad++ for resource edition. Can someone help me ?</p>\n\n<p>C Source file \"tabdlg.c\" :</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n#include \"resource.h\"\n\nHANDLE hInstance;\nHWND hDlgMain;\nHWND hDlgPage1;\nHWND hDlgPage2;\nHWND hTabCtrlMain;\n\nBOOL CALLBACK DlgPage1Fn(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg)\n    {\n        case WM_CLOSE:\n            EndDialog(hWnd, 0);\n            return TRUE;\n        case WM_INITDIALOG:\n            return TRUE;\n    }\n    return FALSE;\n}\n\nBOOL CALLBACK DlgPage2Fn(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg)\n    {\n        case WM_CLOSE:\n            EndDialog(hWnd, 0);\n            return TRUE;\n        case WM_INITDIALOG:\n            return TRUE;\n    }\n    return FALSE;\n}\n\nBOOL CALLBACK DlgMainFn(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg){\n        case WM_CLOSE:\n            EndDialog(hWnd, 0);\n            return TRUE;\n        case WM_INITDIALOG:\n            {\n                hInstance=GetModuleHandle(NULL);\n                hDlgMain=hWnd;\n                TCITEM tcBtn;               \n                hTabCtrlMain=GetDlgItem(hDlgMain,IDT_TAB_CTRL_MAIN);\n                memset(&amp;tcBtn,0x0,sizeof(TCITEM));\n                tcBtn.mask = TCIF_TEXT;\n                tcBtn.pszText = \"Page 1\";\n                SendMessage(hTabCtrlMain, TCM_INSERTITEM, 0, (LPARAM)&amp;tcBtn);\n                hDlgPage1=CreateDialog(hInstance,  MAKEINTRESOURCE(IDD_DLG_PAGE1), hTabCtrlMain, DlgPage1Fn);\n                tcBtn.pszText = \"Page 2\";\n                SendMessage(hTabCtrlMain, TCM_INSERTITEM, 1, (LPARAM)&amp;tcBtn);\n                hDlgPage2=CreateDialog(hInstance,  MAKEINTRESOURCE(IDD_DLG_PAGE2), hTabCtrlMain, DlgPage2Fn);\n                ShowWindow(hDlgPage2, SW_HIDE);\n            }\n            return TRUE;            \n        case WM_NOTIFY:\n            {\n                INT nSel;\n                UINT uNotify=((LPNMHDR)lParam)-&gt;code;\n                switch(uNotify){\n                    case TCN_SELCHANGE:\n                        nSel=SendMessage(hTabCtrlMain, TCM_GETCURSEL, 0, 0);\n                        if (nSel==0){\n                            ShowWindow(hDlgPage1, SW_SHOW);\n                            ShowWindow(hDlgPage2, SW_HIDE);\n                        }else{\n                            ShowWindow(hDlgPage1, SW_HIDE);\n                            ShowWindow(hDlgPage2, SW_SHOW);\n                        }\n                        break;\n                }\n            }\n            return TRUE;\n    }\n    return FALSE;\n}\n\n\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)\n{\n    DialogBox(GetModuleHandle(NULL), MAKEINTRESOURCE(IDD_DLG_MAIN), NULL, &amp;DlgMainFn);\n    return 0;\n}\n</code></pre>\n\n<p>Resource include file \"resource.h\" :</p>\n\n<pre><code>#ifndef IDC_STATIC\n#define IDC_STATIC (-1)\n#endif\n\n#define IDD_DLG_MAIN                            103\n#define IDD_DLG_PAGE1                           105\n#define IDD_DLG_PAGE2                           107\n#define IDB_BTN_PAGE1                           40000\n#define IDB_BTN_PAGE2                           40000\n#define IDE_EDIT_MAIN                           40000\n#define IDB_BTN_MAIN_B                          40001\n#define IDE_EDIT_PAGE2                          40001\n#define IDB_BTN_MAIN_A                          40003\n#define IDT_TAB_CTRL_MAIN                       40004\n</code></pre>\n\n<p>Resource file \"tabdlg.rc\" :</p>\n\n<pre><code>LANGUAGE LANG_NEUTRAL, SUBLANG_NEUTRAL\nIDD_DLG_MAIN DIALOG 0, 0, 327, 207\nSTYLE DS_3DLOOK | DS_CENTER | DS_MODALFRAME | DS_SHELLFONT | WS_CAPTION | WS_VISIBLE | WS_POPUP | WS_SYSMENU\nCAPTION \"Main Dialog\"\nFONT 8, \"Ms Shell Dlg\"\n{\n    PUSHBUTTON      \"Main Button A\", IDB_BTN_MAIN_A, 7, 7, 140, 14, 0, WS_EX_LEFT\n    PUSHBUTTON      \"Main Button B\", IDB_BTN_MAIN_B, 175, 7, 145, 14, 0, WS_EX_LEFT\n    CONTROL         \"\", IDT_TAB_CTRL_MAIN, WC_TABCONTROL, WS_TABSTOP, 7, 30, 313, 142, WS_EX_LEFT\n    EDITTEXT        IDE_EDIT_MAIN, 7, 177, 313, 14, ES_AUTOHSCROLL, WS_EX_LEFT\n}\n\n\n\nLANGUAGE LANG_NEUTRAL, SUBLANG_NEUTRAL\nIDD_DLG_PAGE1 DIALOG 0, 20, 186, 95\nSTYLE DS_3DLOOK | DS_SHELLFONT | WS_VISIBLE | WS_CHILDWINDOW\nFONT 8, \"Ms Shell Dlg\"\n{\n    PUSHBUTTON      \"Page1 Button\", IDB_BTN_PAGE1, 67, 37, 48, 14, 0, WS_EX_LEFT\n}\n\n\n\nLANGUAGE LANG_NEUTRAL, SUBLANG_NEUTRAL\nIDD_DLG_PAGE2 DIALOG 0, 20, 186, 95\nSTYLE DS_3DLOOK | DS_SHELLFONT | WS_VISIBLE | WS_CHILDWINDOW\nFONT 8, \"Ms Shell Dlg\"\n{\n    DEFPUSHBUTTON   \"Page2 Button\", IDB_BTN_PAGE2, 67, 32, 48, 14, 0, WS_EX_LEFT\n    EDITTEXT        IDE_EDIT_PAGE2, 72, 57, 40, 14, ES_AUTOHSCROLL, WS_EX_LEFT\n}\n</code></pre>\n\n<p>Simple build script \"make.bat\" :</p>\n\n<pre><code>gcc -c tabdlg.c -o tabdlg.o\nwindres tabdlg.rc -O coff -o tabdlg.res\ngcc tabdlg.o tabdlg.res -o tabdlg.exe -mwindows -lcomctl32\n</code></pre>\n\n<p>I try different things without success (like : DS_CONTROL or WS_EX_CONTROLPARENT), i think i missed something.</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1454522635, "post_id": 35184359, "comment_id": 58085850, "body": "Please provide details inside the question. Image sites can go offline, and that makes the question useless for future readers (Assuming it&#39;s a good question)."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1454522677, "post_id": 35184359, "comment_id": 58085871, "body": "Also, &quot;I am having a time doing it&quot; is not a valid problem description, what exactly is the trouble you are facing?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1454523271, "post_id": 35184359, "comment_id": 58086220, "body": "What&#39;s this strange obsession with creating images of text among new programmers? Code is text. Use copy and paste and <i>post the text</i>."}, {"owner": {"reputation": 1, "user_id": 5879269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291e63bd3b52e7f60fcc7e08aa005d4c?s=128&d=identicon&r=PG&f=1", "display_name": "nasrul", "link": "https://stackoverflow.com/users/5879269/nasrul"}, "edited": false, "score": 0, "creation_date": 1454526257, "post_id": 35184359, "comment_id": 58087979, "body": "I have edited my question.... hope this helps."}], "answers": [{"tags": [], "owner": {"reputation": 1640, "user_id": 3550662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hlaxt.png?s=128&g=1", "display_name": "Keno Clayton", "link": "https://stackoverflow.com/users/3550662/keno-clayton"}, "is_accepted": false, "score": 0, "last_activity_date": 1454548494, "last_edit_date": 1495542212, "creation_date": 1454548494, "answer_id": 35190821, "question_id": 35184359, "link": "https://stackoverflow.com/questions/35184359/creating-a-christmas-tree-programatically-in-c/35190821#35190821", "title": "Creating a Christmas tree programatically in c?", "body": "<p>Firstly, your code is in C and not C++. If you're using C++ you'd use functions such as <code>cin</code> or <code>cout</code> but here you're using <code>printf</code> and <code>scanf</code>.</p>\n\n<p>To create this tree you're going to have two sections. One part that deals with the main tree, and the other that deals with the trunk. In the code below I used a variable <code>offset</code> to calculate a certain number to determine the midpoint of the tree. Basically, each level has an odd number of stars. If you subtract the offset from the number of stars, you'll find the number at the mid-point. Starting from 3 the offset is 1. 3 - 1 = 2 which is the mid-point. For every two stars added to the level, the offset must go up by one.</p>\n\n<p>To print the tree:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\n    char choice;\n    int level, levelcount, star, starcount, offset;\n\n    printf(\"Do you want to print a Christmas Tree (Y/N)?\");\n    scanf_s(\" %c\", &amp;choice);\n\n    if (choice == 'Y')\n    {\n        printf(\"How tall is your Christmas Tree (Level 4 to 10)?\");\n        scanf_s(\"%d\", &amp;levelcount);\n\n        //Check if level is within valid range\n        starcount = 1;\n        offset = 0;\n        if (levelcount &lt; 4 || levelCount &gt; 10)\n        {\n            //Prints default tree (4 levels)\n            for (level = 1; level &lt;= 4; level++)\n        {\n            for(star = 1; star &lt;= starcount; star++)\n            {\n                printf(\"*\");\n            }\n            printf(\"\\n\");\n            //Adds two stars each level \n            starcount += 2;\n            offset += 1;\n        }\n    }\n        else \n        {\n            //Prints tree with custom levels\n            for (level = 1; level &lt;= levelCount; level++)\n            {\n                for(star = 1; star &lt;= starcount; star++)\n                {\n                    printf(\"*\");\n                }\n                printf(\"\\n\");\n                //Adds two stars each level \n                starcount += 2;\n                offset += 1;\n            }\n        }\n\n        //Finds out the mid-point of the tree\n        int midpoint = starcount - offset;\n\n        //Prints the trunk\n        printf(\"%*s%s\\n\", offset - 1, \"***\");\n        printf(\"%*s%s\\n\", offset - 1, \"***\");\n\n    }\n    else if (choice == 'N')\n    {\n        printf(\"Merry Christmas and Goodbye!\\n\");\n    }\n}\n</code></pre>\n\n<p>For the trunk section, since it was at a fixed width of 3 stars and had only two levels, a loop wasn't exactly necessary but it would be good to include it. The <code>%*s</code> was a specific modifier to print some extra spaces to the left so it would be at the mid-point of the tree. </p>\n\n<p>For more on padding with spaces in C <a href=\"https://stackoverflow.com/a/293448/3550662\">check this answer by Bill the Lizard</a>. One of the comments below the answer will show how I managed to print a certain number of spaces determined by the variable <code>offset - 1</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5879269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291e63bd3b52e7f60fcc7e08aa005d4c?s=128&d=identicon&r=PG&f=1", "display_name": "nasrul", "link": "https://stackoverflow.com/users/5879269/nasrul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1841, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1454548494, "creation_date": 1454522490, "last_edit_date": 1454548025, "question_id": 35184359, "link": "https://stackoverflow.com/questions/35184359/creating-a-christmas-tree-programatically-in-c", "title": "Creating a Christmas tree programatically in c?", "body": "<p>I need help with creating a Christmas tree in C which varies based on user input.</p>\n\n<p>Firstly, the user is prompted for the number of levels they want on the tree. E.g. First level \"*\", second level \"***\". Two stars are added every level.</p>\n\n<p>Valid levels run between 4 and 10 inclusive. Anything less than 4 or greater than 10 is invalid, an error message will be displayed in the program output and the minimum level of the tree will also be displayed (4 levels). </p>\n\n<p>The final part of the tree is done by adding a trunk with a width of 3 stars and a height of 2 stars.</p>\n\n<p>This is my c program. It is incomplete and I have no idea how to move on. I am totally confused.</p>\n\n<pre><code> #include &lt;stdio.h&gt;\nvoid main()\n{\n    char choice;\n    int level, levelcount, star, starcount;\n\n\n\n    printf(\"Do you want to print a Christmas Tree (Y/N)?\");\n    scanf_s(\" %c\", &amp;choice);\n\n    if (choice == 'Y')\n    {\n        printf(\"How tall is your Christmas Tree (Level 4 to 10)?\");\n        scanf_s(\"%d\", &amp;levelcount);\n\n    starcount = 1;\n    for (level = 1; level &lt;= levelcount; level++)\n    {\n        for (star = 1; star &lt;= starcount; star++)\n        {\n            printf(\"*\");\n        }\n        printf(\"\\n\");\n    }\n        starcount += 2;\n    }\n    else if (choice == 'N')\n    {\n        printf(\"Merry Christmas and Goodbye!\\n\");\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "operating-system", "cpu-registers", "instructions"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1454522275, "post_id": 35184089, "comment_id": 58085618, "body": "&quot;since an OS is an extended or virtual machine&quot; - Huh? That sounds wrong. What do you mean?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454522360, "post_id": 35184089, "comment_id": 58085666, "body": "@Olaf: that could sound ok, in a very specific sense. See my answer"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454522533, "post_id": 35184089, "comment_id": 58085775, "body": "@BasileStarynkevitch: Hmm... maybe. But I strongly suspect there are quite some missconceptions leading to the question. To really understand the implications, these missconceptions have to be resolved first."}, {"owner": {"reputation": 1164, "user_id": 2175534, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8495695328eb312bdd894387e0675c9c?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2175534/bob"}, "edited": false, "score": 0, "creation_date": 1454523310, "post_id": 35184089, "comment_id": 58086248, "body": "It was a prefessor given question from a class I wasn&#39;t in and it got be thinking, mainly because of my extreme lack of knowledge on the subject."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1454523347, "post_id": 35184089, "comment_id": 58086274, "body": "If the compiler doesn&#39;t know the number of registers, how can it decide what to store in registers and what not to store in registers? Isn&#39;t that one of its jobs?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454523983, "post_id": 35184089, "comment_id": 58086656, "body": "@DavidScwartz: some compilers are generating C code (not assember)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1454538625, "post_id": 35184089, "comment_id": 58095244, "body": "I have not seen any CPU that can execute C.   The ones I&#39;ve seen only understand binary instruction codes and data.  If the output is a C source text file, I would suggest that it&#39;s not a compiler."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454566714, "post_id": 35184089, "comment_id": 58104449, "body": "My <code>gcc</code>  compiler is emitting assembler files, and my CPU cannot handle it neither; also several things like Chicken or Oz are named compilers and translate some language (e.g. Scheme) to C. The first C++ implementations emitted C, and Cfront was a compiler"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 5, "last_activity_date": 1454523850, "last_edit_date": 1495542744, "creation_date": 1454521938, "answer_id": 35184186, "question_id": 35184089, "link": "https://stackoverflow.com/questions/35184089/operating-systems-compiler-confusion/35184186#35184186", "title": "Operating Systems: Compiler Confusion", "body": "<p>In practice, the compiler is compiling (into <a href=\"https://en.wikipedia.org/wiki/Object_code\" rel=\"nofollow noreferrer\">object code</a>, often via some assembler file) not only for a target <a href=\"https://en.wikipedia.org/wiki/Microprocessor\" rel=\"nofollow noreferrer\">processor</a> (in particular <a href=\"https://en.wikipedia.org/wiki/Instruction_set\" rel=\"nofollow noreferrer\">instruction set</a> architecture - ISA), but for a target <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">application binary interface</a> - ABI, which defines some <em>conventions</em> regarding <a href=\"https://en.wikipedia.org/wiki/Processor_register\" rel=\"nofollow noreferrer\">register</a> usage (and how to make <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system calls</a>) &amp; <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">calling conventions</a>.</p>\n\n<p>An Operating system (provided by the <a href=\"https://en.wikipedia.org/wiki/Kernel_%28operating_system%29\" rel=\"nofollow noreferrer\">kernel</a>) is - or gives to application programs and processes - a virtual machine very close to the processor; the VM is the (user-mode, unpriviledged) machine instructions + an instruction (<code>SYSENTER</code>) to switch into kernel or <a href=\"https://en.wikipedia.org/wiki/Protection_ring#SUPERVISOR-MODE\" rel=\"nofollow noreferrer\">supervisor mode</a> for system calls.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/a/34690642/841108\">this</a> &amp; <a href=\"https://stackoverflow.com/a/24993449/841108\">that</a>. Regarding <a href=\"https://en.wikipedia.org/wiki/Compiler\" rel=\"nofollow noreferrer\">compilers</a>, read about <a href=\"https://en.wikipedia.org/wiki/Register_allocation\" rel=\"nofollow noreferrer\">register allocation</a>, <a href=\"https://en.wikipedia.org/wiki/Instruction_scheduling\" rel=\"nofollow noreferrer\">instruction scheduling</a>, <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow noreferrer\">optimizing compilers</a>.</p>\n\n<p>If you have <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> on your computer, try compiling a hello-world program (perhaps in a fresh directory) with <code>gcc -fverbose-asm -O -S hello.c</code> then look into the generated assembler code <code>hello.s</code>; add <code>-fdump-tree-gimple</code>  and look into additional compiler dump file[s] (and even more of them with <code>-fdump-tree-all</code>)</p>\n\n<p>PS. Some compilers compile to machine code in memory (e.g. <a href=\"http://sbcl.org/\" rel=\"nofollow noreferrer\">SBCL</a>). Read also about <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\" rel=\"nofollow noreferrer\">JIT compilers</a>. Other compilers <a href=\"https://softwareengineering.stackexchange.com/a/273895/40065\">compile</a> to <a href=\"https://softwareengineering.stackexchange.com/a/257873/40065\">C code</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1454523525, "creation_date": 1454523525, "answer_id": 35184644, "question_id": 35184089, "link": "https://stackoverflow.com/questions/35184089/operating-systems-compiler-confusion/35184644#35184644", "title": "Operating Systems: Compiler Confusion", "body": "<p>Compilation have several stages, from different abstractions to the target machine and this depend on the compiler architecture.</p>\n\n<p>In some stages, registers are not very limited, but at some stages later a mapping is done. You can read about <a href=\"https://en.wikipedia.org/wiki/Register_allocation\" rel=\"nofollow\">register allocation</a> for more details. I can also suggest you to have a look at <a href=\"https://www.cs.princeton.edu/~appel/modern/\" rel=\"nofollow\">Appel's book</a> about compilers architecture.</p>\n"}], "owner": {"reputation": 1164, "user_id": 2175534, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8495695328eb312bdd894387e0675c9c?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2175534/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 35184186, "answer_count": 2, "score": -2, "last_activity_date": 1454523850, "creation_date": 1454521607, "question_id": 35184089, "link": "https://stackoverflow.com/questions/35184089/operating-systems-compiler-confusion", "title": "Operating Systems: Compiler Confusion", "body": "<p>I was posed the question by a classmate asking since an OS is an extended or virtual machine, does the compiler need to know the number of registers, or instructions of the processor when it generates assembly code of a C program.</p>\n\n<p>I've spent a while scouring the internet and here is what I think...</p>\n\n<p>It doesn't need to know the number of registers because being a virtual machine it has unlimited resources in memory per say.</p>\n\n<p>However, it does need to know the instructions of the processor to know when it is able to perform specific functions at specific times.</p>\n\n<p>I was wondering if someone could clarify this for me because I'm not very confident in my answers.</p>\n"}, {"tags": ["c", "trigonometry", "pi", "math.h"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1454521314, "post_id": 35183929, "comment_id": 58085015, "body": "Lookup CORDIC for an efficient algorithm or implement the Taylor series as outline on the corresponding Wikipedia article (it only terminates for |x| &lt; 1 so you need to scale the argument appropriately)."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1454523106, "post_id": 35183929, "comment_id": 58086144, "body": "Taylor is bad for this due to poor convergence rate and convergence radius. There are better techniques: best discovered by searching, but a Newton Raphson I believe works well."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1454527067, "post_id": 35183929, "comment_id": 58088481, "body": "keyword: cordic atan   <a href=\"http://www.uio.no/studier/emner/matnat/ifi/INF5430/v12/undervisningsmateriale/dirk/Lecture_cordic.pdf\" rel=\"nofollow noreferrer\">uio.no/studier/emner/matnat/ifi/INF5430/v12/&hellip;</a>"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1454550778, "post_id": 35183929, "comment_id": 58099434, "body": "For a single-precision implementation, see <a href=\"http://stackoverflow.com/questions/26692859/best-machine-optimized-polynomial-minimax-approximation-to-arctangent-on-1-1\">this question</a>"}, {"owner": {"reputation": 356, "user_id": 1474013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSNwY.jpg?s=128&g=1", "display_name": "crbah", "link": "https://stackoverflow.com/users/1474013/crbah"}, "edited": false, "score": 1, "creation_date": 1455531051, "post_id": 35183929, "comment_id": 58514334, "body": "the domain of arctan function is not the angles, its (-inf,inf). Get used to use the syntax &#39;atan(x) = theta&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 5817380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PBI8.png?s=128&g=1", "display_name": "Vicente Cunha", "link": "https://stackoverflow.com/users/5817380/vicente-cunha"}, "edited": false, "score": 1, "creation_date": 1454524177, "post_id": 35184478, "comment_id": 58086766, "body": "Shouldn&#39;t that be a 7 instead of 5?"}], "tags": [], "owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "is_accepted": true, "score": 3, "last_activity_date": 1454530873, "last_edit_date": 1454530873, "creation_date": 1454522908, "answer_id": 35184478, "question_id": 35183929, "link": "https://stackoverflow.com/questions/35183929/approximating-atan-without-a-math-library/35184478#35184478", "title": "Approximating atan without a math library", "body": "<p>Let me complete your example and talk about some things that might help:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n\ndouble my_atan(double x)\n{\n    return x - (x*x*x)/3 + (x*x*x*x*x)/5 - (x*x*x*x*x*x*x)/7;\n}\n\nint main()\n{\n    double x;\n    for (x=0.0; x&lt;M_PI*2; x+=0.1)\n    {\n        printf(\"x: %f\\n\",    x);\n        printf(\"Actual: %f\\n\",    atan(x));\n        printf(\"Approx: %f\\n\", my_atan(x));\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>The term <code>int x</code> is an integer and you are approximating large angles. try to use doubles here you get no conversioncast errors.</p>\n\n<p>Now to your problem. The Taylor series you use only works if your |x| &lt; 1.</p>\n\n<p>Taylor Series get inaccurate the more you get away from a given point or in your case zero (0+x).</p>\n\n<p>That series works well up to <code>pi/4</code>, even at that point it is very inaccurate but larger values get very bad. So for smaller angles it works well enough.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454537173, "post_id": 35184789, "comment_id": 58094529, "body": "Good thoughts about the issues +1.  Not impressed with the blog post as it centers on absolute error over the interval and not relative error which is akin to <code>ULP</code> measurement."}, {"owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454541693, "post_id": 35184789, "comment_id": 58096482, "body": "@chux, about halfway through the lolremez toolkit tutorial there is a &quot;switch to relative error&quot; <a href=\"http://lolengine.net/wiki/doc/maths/remez/tutorial-relative-error\" rel=\"nofollow noreferrer\">lolengine.net/wiki/doc/maths/remez/tutorial-relative-error</a>"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1529223498, "post_id": 35184789, "comment_id": 88789774, "body": "@DougCurrie still missing one identity to maintain performance and accuracy as if <code>x&gt;0.8</code> the Taylor series approach starts to converge more and more badly (the closer it gets to <code>1</code>). I am using <code>atan(x)-atan(y)=atan((x-y)&#47;(1+x.y))</code>  see <a href=\"https://stackoverflow.com/a/50894477/2521214\">my C++ atan,asin</a>"}], "tags": [], "owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "is_accepted": false, "score": 3, "last_activity_date": 1454524598, "last_edit_date": 1454524598, "creation_date": 1454523964, "answer_id": 35184789, "question_id": 35183929, "link": "https://stackoverflow.com/questions/35183929/approximating-atan-without-a-math-library/35184789#35184789", "title": "Approximating atan without a math library", "body": "<p>The solution I used for a fixed point library was a minimax approximation using the <a href=\"https://en.wikipedia.org/wiki/Remez_algorithm\" rel=\"nofollow\">Remez algorithm</a>. Even there, I used a different set of coefficients for three ranges: 0 to 0.5; 0.5 to 0.75, and 0.75 to 1. With that breakdown I was able to get 1 ULP accuracy.</p>\n\n<p>Then you need good argument reduction to get the argument in range. In my case I used a good reciprocal function for arguments over 1. Here are the identities:</p>\n\n<pre><code>atan(-x) == -atan(x)\n\natan(x) == pi/2 - atan(1/x) // for x &gt; 1\n</code></pre>\n\n<p>There is a <a href=\"http://lolengine.net/blog/2011/12/21/better-function-approximations\" rel=\"nofollow\">nice blog post</a> on Taylor vs. Remez approximations <a href=\"http://lolengine.net/blog/2011/12/21/better-function-approximations\" rel=\"nofollow\">here</a>; at that site is also a <a href=\"http://lolengine.net/wiki/oss/lolremez\" rel=\"nofollow\">Remez toolkit</a> for finding the coefficients you need.</p>\n"}], "owner": {"reputation": 135, "user_id": 4953343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9041c6b7d1562140178c2fda4e750c9a?s=128&d=identicon&r=PG&f=1", "display_name": "vgm", "link": "https://stackoverflow.com/users/4953343/vgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1853, "favorite_count": 0, "accepted_answer_id": 35184478, "answer_count": 2, "score": 1, "last_activity_date": 1454530873, "creation_date": 1454521109, "question_id": 35183929, "link": "https://stackoverflow.com/questions/35183929/approximating-atan-without-a-math-library", "title": "Approximating atan without a math library", "body": "<p>I've been googling around for a solution to this problem. I've seen a number of ways to calculate atan(theta) for any -1 &lt;= theta &lt;= 1, but I am not sure what to do when theta is bigger or smaller than those bounds. </p>\n\n<p>I assume I need to add or subtract multiples of pi to offset it? Is this line of thinking correct?</p>\n\n<p>Currently I have:</p>\n\n<pre><code>double my_atan(double x)\n{\n    return x - (x*x*x)/3 + (x*x*x*x*x)/5;\n}\n</code></pre>\n\n<p>Which is using the <a href=\"http://people.math.sc.edu/girardi/m142/handouts/10sTaylorPolySeries.pdf\" rel=\"nofollow\">taylor series</a>.</p>\n\n<p>And for the following code,</p>\n\n<pre><code>int x;\nfor (x=0; x&lt;M_PI*2; x++)\n{\n    printf(\"Actual: %f\\n\",    atan(x));\n    printf(\"Approx: %f\\n\", my_atan(x));\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>It quickly loses control (as expected, as it's out of range):</p>\n\n<pre><code>Actual: 0.000000\nApprox: 0.000000\n\nActual: 0.785398\nApprox: 0.866667\n\nActual: 1.107149\nApprox: 5.733333\n\nActual: 1.249046\nApprox: 42.600000\n\nActual: 1.325818\nApprox: 187.466667\n\nActual: 1.373401\nApprox: 588.333333\n\nActual: 1.405648\nApprox: 1489.200000\n</code></pre>\n\n<p>Not pictured here, but the output is fairly accurate when theta is within the appropriate range. </p>\n\n<p>So my question is what steps exactly need to be taken to the my_tan function to allow it to support wider bounds?</p>\n\n<p>Been staring at this for a while and so any guidance that can be offered would be much appreciated</p>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1454521462, "post_id": 35183899, "comment_id": 58085107, "body": "What do you actually get as a result and what value are you testing."}, {"owner": {"reputation": 123, "user_id": 3483844, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/281ef502e84c501bb56d8cf0af7e4749?s=128&d=identicon&r=PG&f=1", "display_name": "user3483844", "link": "https://stackoverflow.com/users/3483844/user3483844"}, "reply_to_user": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1454521613, "post_id": 35183899, "comment_id": 58085205, "body": "@sabbahillel RIght now I testing -2147483648 [0x80000000] and get -268435455 and the right answer is -268435456"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1454521846, "post_id": 35183899, "comment_id": 58085367, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. As it looks that will invoke both: <i>undefined</i> and <i>implementation defined behaviour</i> for certain constellations. Why do you try to optimise manually? Does the compiler not optimise readable code properly? Its that relevant? Did you benchmark? Unless you have answerd all these questions (and possibly some I just forgot to ask), you should not do premature optimisations."}, {"owner": {"reputation": 123, "user_id": 3483844, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/281ef502e84c501bb56d8cf0af7e4749?s=128&d=identicon&r=PG&f=1", "display_name": "user3483844", "link": "https://stackoverflow.com/users/3483844/user3483844"}, "edited": false, "score": 0, "creation_date": 1454526409, "post_id": 35183899, "comment_id": 58088088, "body": "@harlod I don&#39;t understand. The question calls for rounding AFTER you multiply by 3/8ths. I have absolutely no idea what to do anymore"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1454527310, "post_id": 35183899, "comment_id": 58088631, "body": "@user3483844 never mind I interpreted it badly. Though in general, rounding &quot;after&quot; something has been done is only a way to describe the result, not a way to actually do it."}], "answers": [{"comments": [{"owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "edited": false, "score": 0, "creation_date": 1454522404, "post_id": 35184252, "comment_id": 58085691, "body": "The left shift works, though, and does what he expects. His problem is simple overflow. But sure, at some point he has to confront loss of the sign bit. On virtually every CPU ever made, this is all predictable. The standard punts with <i>undefined</i> so as to permit machines that don&#39;t use 2&#39;s complement, but it&#39;s not really the problem here."}, {"owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "edited": false, "score": 0, "creation_date": 1454524583, "post_id": 35184252, "comment_id": 58086991, "body": "Another way to phrase this is that he is not programming to the standard, kind of by necessity.  He is using C to manipulate specifically two&#39;s complement values, given that it apparently should produce correct results on negative numbers. And that&#39;s fine, many many lines of code have been written that do just that, standards or no standards."}], "tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 0, "last_activity_date": 1454522168, "creation_date": 1454522168, "answer_id": 35184252, "question_id": 35183899, "link": "https://stackoverflow.com/questions/35183899/bitwise-multiplication-and-division-not-working-with-large-numbers/35184252#35184252", "title": "Bitwise multiplication and division not working with large numbers", "body": "<p>The left shifts that you use in effect shifts the individual bits as an <strong>unsigned integer</strong> so that you could wind up losing the sign bit. That is not what it sounds like you want. Try the multiplication to see what you should be getting against the bit shift to see what you are getting.</p>\n\n<pre><code>x *= 3.0/8.0;\n</code></pre>\n\n<p>Note the manual entry below showing that if the signed bit is affected the result <strong>is undefined</strong></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/336xbhcz.aspx\" rel=\"nofollow\">Left shift</a></p>\n\n<blockquote>\n  <p>The left-shift operator causes the bits in shift-expression to be\n  shifted to the left by the number of positions specified by\n  additive-expression. The bit positions that have been vacated by the\n  shift operation are zero-filled. A left shift is a logical shift (the\n  bits that are shifted off the end are discarded, including the sign\n  bit). For more information about the kinds of bitwise shifts, see\n  Bitwise shifts.</p>\n  \n  <p>The following example shows left-shift operations using unsigned\n  numbers. The example shows what is happening to the bits by\n  representing the value as a bitset. For more information, see bitset\n  Class. </p>\n  \n  <p><strong>If you left-shift a signed number so that the sign bit is affected, the result is undefined</strong>. The following example shows what happens in\n  Visual C++ when a 1 bit is left-shifted into the sign bit position.</p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bitset&gt;\nusing namespace std;\n\nint main() {\n  short short1 = 16384;    \n  bitset&lt;16&gt; bitset1{short2};\n  cout &lt;&lt; bitset1 &lt;&lt; endl;  // 0100000000000000 \n\n  short short3 = short1 &lt;&lt; 1;\n  bitset&lt;16&gt; bitset3{short3};  // 16384 left-shifted by 1 = -32768\n  cout &lt;&lt; bitset3 &lt;&lt; endl;  // 100000000000000\n\n  short short4 = short1 &lt;&lt; 14;\n  bitset&lt;16&gt; bitset4{short4};  // 4 left-shifted by 14 = 0\n  cout &lt;&lt; bitset4 &lt;&lt; endl;  // 000000000000000  \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 3483844, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/281ef502e84c501bb56d8cf0af7e4749?s=128&d=identicon&r=PG&f=1", "display_name": "user3483844", "link": "https://stackoverflow.com/users/3483844/user3483844"}, "edited": false, "score": 0, "creation_date": 1454522619, "post_id": 35184322, "comment_id": 58085839, "body": "Is the problem the left shift? Can I just change it to x+x+x instead of ((x &lt;&lt; 1) + x)"}, {"owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "reply_to_user": {"reputation": 123, "user_id": 3483844, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/281ef502e84c501bb56d8cf0af7e4749?s=128&d=identicon&r=PG&f=1", "display_name": "user3483844", "link": "https://stackoverflow.com/users/3483844/user3483844"}, "edited": false, "score": 0, "creation_date": 1454523908, "post_id": 35184322, "comment_id": 58086609, "body": "You only have 32-bits to work with. That&#39;s the problem. There isn&#39;t an easy way to fix this, but every way that will work starts with truely understanding the problem. Start printing your values with <code>%08x</code> and you should start to see that your shifts are simply causing bits to fall off the end."}, {"owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "reply_to_user": {"reputation": 123, "user_id": 3483844, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/281ef502e84c501bb56d8cf0af7e4749?s=128&d=identicon&r=PG&f=1", "display_name": "user3483844", "link": "https://stackoverflow.com/users/3483844/user3483844"}, "edited": false, "score": 0, "creation_date": 1454524038, "post_id": 35184322, "comment_id": 58086692, "body": "And read up on the 2&#39;s complement binary signed number representation, by far the most widely used radix complement.  You need to understand what the bit strings mean and how you are always working with a finite number of bits."}], "tags": [], "owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": false, "score": 0, "last_activity_date": 1454524296, "last_edit_date": 1454524296, "creation_date": 1454522361, "answer_id": 35184322, "question_id": 35183899, "link": "https://stackoverflow.com/questions/35183899/bitwise-multiplication-and-division-not-working-with-large-numbers/35184322#35184322", "title": "Bitwise multiplication and division not working with large numbers", "body": "<p>You are overflowing your format by testing with the most negative number and then trying to multiply it to a larger (i.e., even more negative) number.</p>\n\n<p>There are various ways to fix this.</p>\n\n<ol>\n<li>Use something larger like int64.</li>\n<li>Use a second value to hold the overflow.</li>\n<li>Split the value in half and then compute it as a polynomial.</li>\n</ol>\n\n<p>For the one test case, you could divide first and then multiply, and it would \"work\", but it would fail for all the cases where you then lose bits off the right side.</p>\n"}], "owner": {"reputation": 123, "user_id": 3483844, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/281ef502e84c501bb56d8cf0af7e4749?s=128&d=identicon&r=PG&f=1", "display_name": "user3483844", "link": "https://stackoverflow.com/users/3483844/user3483844"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454524296, "creation_date": 1454521037, "last_edit_date": 1454524185, "question_id": 35183899, "link": "https://stackoverflow.com/questions/35183899/bitwise-multiplication-and-division-not-working-with-large-numbers", "title": "Bitwise multiplication and division not working with large numbers", "body": "<p>I'm trying to get this problem to work where I have to multiply 3/8 in bit and then round towards zero.</p>\n\n<p>So far I have this</p>\n\n<pre><code>((((x&lt;&lt;1)+x)&gt;&gt;3)+((x&gt;&gt;31)&amp;1));\n</code></pre>\n\n<p>The idea behind it is that the first part takes x and shifts it left 1 and adds x to get the multiplied by 3 effect and then shifts right 3 to get the divide by 8 part. Then I would add 1 if it is negative by testing to see if the sign bit is 1 (1&amp;1 = 1) or 0 (0&amp;1 = 0). My code won't work though, the tests are off.</p>\n\n<p>Any ideas what I am doing wrong?</p>\n"}, {"tags": ["c", "syntax"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1454520509, "post_id": 35183722, "comment_id": 58084481, "body": "What compiler is that?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1454521073, "post_id": 35183722, "comment_id": 58084867, "body": "I don&#39;t work with <code>_Complex</code> numbers. After some reading in the standard and the provided link, I think @iharob&#39;s answer is correct."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454521296, "post_id": 35183722, "comment_id": 58085004, "body": "@Olaf The fastet Fourier Transform in the West <i>fftw</i> uses the <code>_Complex</code> type. I found this out while writing a data processing software for my thesis (<i>Physics actually, not computer science or alike</i>) - (<i>I had to apply a low pass filter, so convolution so Fast Fourier Transform, so fftw</i>)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1454521726, "post_id": 35183722, "comment_id": 58085273, "body": "@iharob: Hmm, is that faster than the ffte and if not, am I allowed to use the faster if I live in the west, but east of you? ;-) Seriously: thanks for the info. As it looks, the C standard does not even support a similar simple notation with C11."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1454525248, "post_id": 35183722, "comment_id": 58087358, "body": "A very good example of &quot;.. not &#39;Eureka&#39; but &#39;That&#39;s funny...&#39;&quot;!"}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1454521108, "post_id": 35183761, "comment_id": 58084894, "body": "Looking at the assembly code, function <code>foo</code> does not return <code>0</code> as it should?"}, {"owner": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "edited": false, "score": 12, "creation_date": 1454521169, "post_id": 35183761, "comment_id": 58084930, "body": "Wow, that came as a surprise! Will you tell me why it worked even when i did not include complex.h header file?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "edited": false, "score": 4, "creation_date": 1454521227, "post_id": 35183761, "comment_id": 58084965, "body": "@daltonfury42 The header is for the <code>_Complex</code> type, <code>2i</code> is a constant (<i>as gcc understands it</i>). Add the <code>std=c99</code> or <code>std=c11</code> flag combined with <code>-Wall</code> and you shall see a warning. Also, indeed it does not return <code>0</code> but since the return type should be <code>_Complex</code> and the value <code>0 + 2i</code>, you can&#39;t inspect it with <code>printf()</code>. So perhaps that is just the <b>real</b> part <code>0</code>!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "edited": false, "score": 12, "creation_date": 1454521536, "post_id": 35183761, "comment_id": 58085157, "body": "@daltonfury42: You don&#39;t have to <code>#include &lt;float.h&gt;</code> (or <code>math.h</code>) to get support for <i>floating point constants</i> either."}, {"owner": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454521724, "post_id": 35183761, "comment_id": 58085271, "body": "@iharob Correct me if I am wrong: The constant <code>2i</code> is something understood by the compiler directly and so is float as @Olaf illustrates?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "edited": false, "score": 2, "creation_date": 1454522054, "post_id": 35183761, "comment_id": 58085488, "body": "@daltonfury42 That&#39;s right. Header files don&#39;t change the language syntax, they just declare things like variables, functions, types, etc."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "edited": false, "score": 2, "creation_date": 1454522126, "post_id": 35183761, "comment_id": 58085532, "body": "@daltonfury42 Although it could have been possible for recognition of this syntax to be controlled by a <code>#pragma</code>, which <code>complex.h</code> could issue. But they didn&#39;t do it this way."}, {"owner": {"reputation": 18517, "user_id": 203458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1b9f56786ceba3c57d0d2fe56182a4d3?s=128&d=identicon&r=PG", "display_name": "Kate Gregory", "link": "https://stackoverflow.com/users/203458/kate-gregory"}, "edited": false, "score": 0, "creation_date": 1454532019, "post_id": 35183761, "comment_id": 58091633, "body": "here is a way to look at it: would 2f or 2u confuse you? They are literal suffixes to make a constant be a float or an unsigned int. There are user defined literals for time spans, imaginary numbers, and so on. If you&#39;re writing standard C++, you would have to include an appropriate header and use an appropriate namespace for <code>2i</code> to mean <code>2 times the square root of -1</code>. The only weird thing here is gcc doing that for you without the include and the using."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 18517, "user_id": 203458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1b9f56786ceba3c57d0d2fe56182a4d3?s=128&d=identicon&r=PG", "display_name": "Kate Gregory", "link": "https://stackoverflow.com/users/203458/kate-gregory"}, "edited": false, "score": 0, "creation_date": 1454533107, "post_id": 35183761, "comment_id": 58092302, "body": "@Kate Gregory My gcc C compiler complains about <code>2f</code>.  Confident FP constants need a <code>.</code>"}, {"owner": {"reputation": 18517, "user_id": 203458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1b9f56786ceba3c57d0d2fe56182a4d3?s=128&d=identicon&r=PG", "display_name": "Kate Gregory", "link": "https://stackoverflow.com/users/203458/kate-gregory"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454534185, "post_id": 35183761, "comment_id": 58092912, "body": "@chux you&#39;re right. <code>2u</code> or <code>2.f</code> are the builtins. Also <code>2L</code> etc"}, {"owner": {"reputation": 566, "user_id": 3998030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed43d5674f291a1e7ea5c4955ba6abf6?s=128&d=identicon&r=PG&f=1", "display_name": "user23013", "link": "https://stackoverflow.com/users/3998030/user23013"}, "edited": false, "score": 0, "creation_date": 1454562659, "post_id": 35183761, "comment_id": 58102880, "body": "Is it possible to stack <code>i</code> with <code>u</code>, <code>f</code>, etc?"}, {"owner": {"reputation": 14944, "user_id": 433373, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e191cfc8eb0f9986e30461621be1d0f5?s=128&d=identicon&r=PG", "display_name": "Nicolas Miari", "link": "https://stackoverflow.com/users/433373/nicolas-miari"}, "edited": false, "score": 0, "creation_date": 1454661457, "post_id": 35183761, "comment_id": 58153558, "body": "I was expecting it to be some obscure, signed analog to <code>2u</code>! XD"}, {"owner": {"reputation": 52680, "user_id": 1673391, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d0fdf8fc4fd7daa19b20cd3f76d2a1e0?s=128&d=identicon&r=PG", "display_name": "Grijesh Chauhan", "link": "https://stackoverflow.com/users/1673391/grijesh-chauhan"}, "edited": false, "score": 0, "creation_date": 1455171330, "post_id": 35183761, "comment_id": 58371930, "body": "this is very interesting, how does system prints constant numbers ?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 52680, "user_id": 1673391, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d0fdf8fc4fd7daa19b20cd3f76d2a1e0?s=128&d=identicon&r=PG", "display_name": "Grijesh Chauhan", "link": "https://stackoverflow.com/users/1673391/grijesh-chauhan"}, "edited": false, "score": 0, "creation_date": 1455194168, "post_id": 35183761, "comment_id": 58386251, "body": "@GrijeshChauhan I don&#39;t understand your question."}, {"owner": {"reputation": 52680, "user_id": 1673391, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d0fdf8fc4fd7daa19b20cd3f76d2a1e0?s=128&d=identicon&r=PG", "display_name": "Grijesh Chauhan", "link": "https://stackoverflow.com/users/1673391/grijesh-chauhan"}, "edited": false, "score": 0, "creation_date": 1455205600, "post_id": 35183761, "comment_id": 58394711, "body": "@iharob how to print  <code>_Complex</code> object - does gcc provides any format string - I was interested to know (i am asking without trying myself)"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 107, "last_activity_date": 1469056071, "last_edit_date": 1469056071, "creation_date": 1454520587, "answer_id": 35183761, "question_id": 35183722, "link": "https://stackoverflow.com/questions/35183722/why-does-the-statement-2i-not-cause-a-compiler-error/35183761#35183761", "title": "Why does the statement &quot;2i;&quot; NOT cause a compiler error?", "body": "<p>This is a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Complex.html\" rel=\"nofollow noreferrer\"><em>gcc</em> extension</a>, and <code>2i</code> is the imaginary constant <a href=\"https://i.stack.imgur.com/efus9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/efus9.png\" alt=\"enter image description here\"></a>. So you can write a complex number like so:</p>\n\n<pre><code>#include &lt;complex.h&gt;\n\n_Complex x = 4 + 5i;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "edited": false, "score": 0, "creation_date": 1454587885, "post_id": 35190356, "comment_id": 58117258, "body": "Well, this is what I got when I used GCC 5.3.0 on my PC running Arch Linux. <a href=\"https://paste.ubuntu.com/14876825/\" rel=\"nofollow noreferrer\">Here</a> is my gcc configuration if you are interested."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 13, "last_activity_date": 1454661338, "last_edit_date": 1454661338, "creation_date": 1454545427, "answer_id": 35190356, "question_id": 35183722, "link": "https://stackoverflow.com/questions/35183722/why-does-the-statement-2i-not-cause-a-compiler-error/35190356#35190356", "title": "Why does the statement &quot;2i;&quot; NOT cause a compiler error?", "body": "<p><code>2i</code> is a <code>gcc</code> extension for a complex integer literal, a pure imaginary number twice the square root of <code>-1</code>.  This extension is supported by <code>clang</code> as well.</p>\n\n<p>It is somewhat surprising that your compiling with <code>gcc 5.4.0</code> produces the posted assembly output:</p>\n\n<ul>\n<li>Compiling on <a href=\"http://gcc.godbolt.org/#\">http://gcc.godbolt.org/#</a> I get a compilation error from <code>gcc</code> 5.3.0: <code>http://gcc.godbolt.org/#</code>: <code>error: cannot convert '__complex__ int' to 'int' in return</code>.</li>\n<li>The posted assembly code for function <code>foo</code> is incorrect: it does not return <code>0</code>.  Converting the complex integer constant <code>2i</code> to <code>int</code> should return its real part <code>0</code>.</li>\n</ul>\n\n<p>Conversely, with <code>clang</code> 3.7, it compiles without a warning and generates optimum code, but of course not what you expect:</p>\n\n<pre><code>foo(int):                       # @foo(int)\n    xorl    %eax, %eax\n    retq\n</code></pre>\n\n<p>This syntax can be combined with other suffixes in any order. Compiling the code below with <code>clang -Weverything</code> gives me appropriate warnings <code>warning: imaginary constants are a GNU extension [-Wgnu-imaginary-constant]</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    /* complex integer literals */\n    printf(\"sizeof(2i) = %zd\\n\", sizeof(2i));\n    printf(\"sizeof(2ui) = %zd\\n\", sizeof(2ui));\n    printf(\"sizeof(2li) = %zd\\n\", sizeof(2li));\n    printf(\"sizeof(2lli) = %zd\\n\", sizeof(2lli));\n    /* complex floating point literals */\n    printf(\"sizeof(2.i) = %zd\\n\", sizeof(2.i));\n    printf(\"sizeof(2.fi) = %zd\\n\", sizeof(2.fi));\n    printf(\"sizeof(2e0fi) = %zd\\n\", sizeof(2e0fi));\n    printf(\"sizeof(2e0i) = %zd\\n\", sizeof(2e0i));\n    /* alternate order */\n    printf(\"sizeof(2il) = %zd\\n\", sizeof(2il));\n    printf(\"sizeof(2ill) = %zd\\n\", sizeof(2ill));\n    printf(\"sizeof(2.if) = %zd\\n\", sizeof(2.if));\n\n    return 0;\n}\n</code></pre>\n\n<p>It produces this output in my environment:</p>\n\n<pre><code>sizeof(2i) = 8\nsizeof(2ui) = 8\nsizeof(2li) = 16\nsizeof(2lli) = 16\nsizeof(2.i) = 16\nsizeof(2.fi) = 8\nsizeof(2e0fi) = 8\nsizeof(2e0i) = 16\nsizeof(2il) = 16\nsizeof(2ill) = 16\nsizeof(2.if) = 8\n</code></pre>\n\n<p>Try the last one with your syntax coloring editor <code>;-)</code></p>\n"}], "owner": {"reputation": 1593, "user_id": 3073656, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jl88K.png?s=128&g=1", "display_name": "daltonfury42", "link": "https://stackoverflow.com/users/3073656/daltonfury42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4327, "favorite_count": 6, "accepted_answer_id": 35183761, "answer_count": 2, "score": 82, "last_activity_date": 1469056071, "creation_date": 1454520446, "last_edit_date": 1454610305, "question_id": 35183722, "link": "https://stackoverflow.com/questions/35183722/why-does-the-statement-2i-not-cause-a-compiler-error", "title": "Why does the statement &quot;2i;&quot; NOT cause a compiler error?", "body": "<p>Instead of <code>2*i</code>, I carelessly wrote <code>2i</code>:</p>\n\n<pre><code>int foo(int i)\n{\n    2i;\n    return 2i;\n}\n</code></pre>\n\n<p>I expected the compiler to catch the error. But it did not. So is <code>2i</code> a valid statement in C? If so what does it do? Puzzled!</p>\n\n<p>I compiled using gcc version 5.3.0 and here is the assembly output:</p>\n\n<pre><code>    .file   \"strange.c\"\n    .text\n    .globl  foo\n    .type   foo, @function\nfoo:\n.LFB0:\n    .cfi_startproc\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset 6, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register 6\n    movl    %edi, -4(%rbp)\n    nop\n    popq    %rbp\n    .cfi_def_cfa 7, 8\n    ret\n    .cfi_endproc\n.LFE0:\n    .size   foo, .-foo\n    .ident  \"GCC: (GNU) 5.3.0\"\n    .section    .note.GNU-stack,\"\",@progbits\n</code></pre>\n"}, {"tags": ["c++", "c", "qt", "linker", "extern"], "comments": [{"owner": {"reputation": 13, "user_id": 4105753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1f604eb59b4b37e550bcddf01856d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Brown", "link": "https://stackoverflow.com/users/4105753/jake-brown"}, "edited": false, "score": 0, "creation_date": 1454520538, "post_id": 35183698, "comment_id": 58084499, "body": "Right now I am simply including the header in my Qt project and then trying to call the generate_id() function.."}, {"owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 2, "creation_date": 1454520722, "post_id": 35183698, "comment_id": 58084633, "body": "What&#39;s the error exactly?"}, {"owner": {"reputation": 13, "user_id": 4105753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1f604eb59b4b37e550bcddf01856d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Brown", "link": "https://stackoverflow.com/users/4105753/jake-brown"}, "reply_to_user": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1454520783, "post_id": 35183698, "comment_id": 58084675, "body": "Undefined symbols for architecture x86_64:   &quot;_generate_id&quot;, referenced from:       MainWindow::MainWindow(QWidget*) in mainwindow.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) make: *** [Ground_Control.app/Contents/MacOS/Ground_Control] Error 1 12:32:46: The process &quot;/usr/bin/make&quot; exited with code 2. Error while building/deploying project Ground_Control (kit: Desktop Qt 5.3 clang 64bit) When executing step &quot;Make&quot;  @AdiLevin"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1454521060, "post_id": 35183698, "comment_id": 58084854, "body": "Eh ... <i>are</i> you linking against the object files (or library) containing the definitions of these functions?"}, {"owner": {"reputation": 13, "user_id": 4105753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1f604eb59b4b37e550bcddf01856d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Brown", "link": "https://stackoverflow.com/users/4105753/jake-brown"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1454521235, "post_id": 35183698, "comment_id": 58084968, "body": "@DanielJour all I&#39;m doing is just #include &quot;/PATH/Ground_Server.h&quot;"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1454521352, "post_id": 35183698, "comment_id": 58085045, "body": "@JakeBrown You need to also compile the file(s) with the function definitions (presumably <code>Ground_Server.c</code>) which will yield a object file (e.g. <code>Ground_Server.o</code>) which you need to add to the linking phase of your build."}, {"owner": {"reputation": 13, "user_id": 4105753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1f604eb59b4b37e550bcddf01856d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Brown", "link": "https://stackoverflow.com/users/4105753/jake-brown"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1454521820, "post_id": 35183698, "comment_id": 58085350, "body": "So I can make the .o files when i compile &quot;gcc -c Ground_Server.c&quot; but will it not have to be done with g++ and if so then I will get a bunch of errors because I am using strlen in my c code... as well as other c specific functions. @DanielJour"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1454523033, "post_id": 35183698, "comment_id": 58086104, "body": "&quot;c specific functions&quot; do not exist, they&#39;re just functions from the c standard library, compiled as every other function and thus accessible from any code linking against them (and using the correct calling convention)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4105753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1f604eb59b4b37e550bcddf01856d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Brown", "link": "https://stackoverflow.com/users/4105753/jake-brown"}, "edited": false, "score": 0, "creation_date": 1454529892, "post_id": 35184348, "comment_id": 58090255, "body": "Thanks for that! I went through and added the object files to the .pro file in QT and seems to have done the trick. Thanks for the example! @DanielJour"}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 1, "last_activity_date": 1454522442, "creation_date": 1454522442, "answer_id": 35184348, "question_id": 35183698, "link": "https://stackoverflow.com/questions/35183698/linking-error-when-calling-a-c-header-file/35184348#35184348", "title": "Linking error when Calling a C header file", "body": "<p><code>#include \"foo.h\"</code> is only the textual inclusion of the contents of <code>foo.h</code> into the current compilation unit. If you implement a function in a different file, then you need to compile that file, too, and link the resulting object files to form an executable (or library).</p>\n\n<p>This does also apply when mixing C and C++ (or most other compiled) code: You compile the source code files with the compiler suitable for the language they're written in, and finally link everything together.</p>\n\n<p>So:</p>\n\n<h3>foo.h</h3>\n\n<pre><code>#ifndef FOO_H\n#define FOO_H 1\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nint answer(void);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<h2>foo.c</h2>\n\n<pre><code>int answer(void) {\n  return 42;\n}\n</code></pre>\n\n<h2>bar.cc</h2>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"foo.h\"\n\nint main(int argc, char ** argv) {\n  std::cout &lt;&lt; \"The answer is \" &lt;&lt; answer() &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>To create an executable from these files, you need to:</p>\n\n<pre><code>gcc -c foo.c   # Compile C file\ng++ -c bar.cc  # Compile C++ file\ng++ -o foobar foo.o bar.o # Link\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4105753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1f604eb59b4b37e550bcddf01856d?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Brown", "link": "https://stackoverflow.com/users/4105753/jake-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1400, "favorite_count": 0, "accepted_answer_id": 35184348, "answer_count": 1, "score": 0, "last_activity_date": 1454522442, "creation_date": 1454520367, "last_edit_date": 1454520990, "question_id": 35183698, "link": "https://stackoverflow.com/questions/35183698/linking-error-when-calling-a-c-header-file", "title": "Linking error when Calling a C header file", "body": "<p>I am calling a C function from a header file I wrote in Qt written in Cpp. I keep getting a linking error when I try to compile my Qt Application.</p>\n\n<p>here is the header file:</p>\n\n<pre><code>#ifndef GROUND_SERVER_H\n#define GROUND_SERVER_H\n\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nstruct system_info{\n    char id[33];\n};\n\n/*  Support function for the below function */\n    void Generate_Key(char*,char*,char*);\n\n/*  Runs the actual key generation as well as \n    moves the file to the respectful card or\n    USB drive inserted in the system that will\n    act as the user system key  */ \nvoid run_key_generation(struct system_info*,char*,char*);\n\n/*  Function to run the server on a selected \n    port at which the medium that the server \n    is to listen on will be connected.  */\nvoid run_server(unsigned short);\n\nvoid generate_id();\n\n#ifdef __cplusplus\n};\n#endif\n\n\n#endif\n</code></pre>\n"}, {"tags": ["c", "return", "double", "return-value"], "comments": [{"owner": {"reputation": 1939, "user_id": 4930607, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ab1470af1835821aec698e59fed72346?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4930607/tom"}, "edited": false, "score": 0, "creation_date": 1454520920, "post_id": 35183695, "comment_id": 58084771, "body": "can someone explain the downvote?!"}, {"owner": {"reputation": 1939, "user_id": 4930607, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ab1470af1835821aec698e59fed72346?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4930607/tom"}, "edited": false, "score": 0, "creation_date": 1454522258, "post_id": 35183695, "comment_id": 58085609, "body": "so yeah?! I am waiting for an explanation !"}, {"owner": {"reputation": 17564, "user_id": 2780791, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1feea731a99cb95e342d196802bb868a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei - check Codidact", "link": "https://stackoverflow.com/users/2780791/alexei-check-codidact"}, "edited": false, "score": 0, "creation_date": 1454530419, "post_id": 35183695, "comment_id": 58090576, "body": "Just reviewed this question in triage, did not vote, but I have an explanation: many would consider this too simple to deserve a question on StackOverflow."}, {"owner": {"reputation": 1939, "user_id": 4930607, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ab1470af1835821aec698e59fed72346?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4930607/tom"}, "reply_to_user": {"reputation": 17564, "user_id": 2780791, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1feea731a99cb95e342d196802bb868a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei - check Codidact", "link": "https://stackoverflow.com/users/2780791/alexei-check-codidact"}, "edited": false, "score": 0, "creation_date": 1454532972, "post_id": 35183695, "comment_id": 58092221, "body": "I know that but why? I did several C tutorials, none of them mentioned this. Also when I google this it&#39;s not very clear that you need this. Stackoverflow is also for beginners not only for advanced stuff. I did my research and spent enough time on that, I am sorry that I am just a beginner and didn&#39;t see that but that was my problems. Forums like these should be there for cases like that. The least thing I can expect is a rebuttal to that."}, {"owner": {"reputation": 1939, "user_id": 4930607, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ab1470af1835821aec698e59fed72346?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4930607/tom"}, "reply_to_user": {"reputation": 17564, "user_id": 2780791, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1feea731a99cb95e342d196802bb868a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei - check Codidact", "link": "https://stackoverflow.com/users/2780791/alexei-check-codidact"}, "edited": false, "score": 0, "creation_date": 1454534358, "post_id": 35183695, "comment_id": 58093009, "body": "ok, so now, that I complained,  I see that I got one downvote removed. This seems to be completely random. I&#39;ll just go downvote whatever I want to, too."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 6, "last_activity_date": 1454520435, "creation_date": 1454520435, "answer_id": 35183721, "question_id": 35183695, "link": "https://stackoverflow.com/questions/35183695/double-gets-rounded-when-returned/35183721#35183721", "title": "double gets rounded when returned", "body": "<p>Your function returns \u0670<code>int</code> it must return <code>double</code></p>\n\n<p>Change</p>\n\n<pre><code>int function()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>double function()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17564, "user_id": 2780791, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1feea731a99cb95e342d196802bb868a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei - check Codidact", "link": "https://stackoverflow.com/users/2780791/alexei-check-codidact"}, "is_accepted": false, "score": 1, "last_activity_date": 1454863650, "last_edit_date": 1495540800, "creation_date": 1454863650, "answer_id": 35256218, "question_id": 35183695, "link": "https://stackoverflow.com/questions/35183695/double-gets-rounded-when-returned/35256218#35256218", "title": "double gets rounded when returned", "body": "<p><code>iharob</code>'s answer is of course correct, but I think that it is also important to know how to avoid this kind of errors in the future. </p>\n\n<p>I have also have not found any explicit reference of this behavior (implicit cast from a \"large\" numeric type to a \"smaller\" one), so I have asked a <a href=\"https://stackoverflow.com/questions/35245625/c-implicit-numeric-type-demoting\">question</a> about this. </p>\n\n<p>Shortly put, <strong>by providing the correct compilation warning flags, these errors can be spotted at compile time</strong> (e.g. <code>-Wconversion</code>), as it's almost always a bug.</p>\n\n<p>However, this behavior is by design, and as mentioned by Chris in a comment, sometimes it <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">might be useful</a> in terms of performance.</p>\n"}], "owner": {"reputation": 1939, "user_id": 4930607, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ab1470af1835821aec698e59fed72346?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4930607/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 35183721, "answer_count": 2, "score": -1, "last_activity_date": 1454863650, "creation_date": 1454520361, "last_edit_date": 1454520940, "question_id": 35183695, "link": "https://stackoverflow.com/questions/35183695/double-gets-rounded-when-returned", "title": "double gets rounded when returned", "body": "<p>How do I return a double without getting <a href=\"http://coliru.stacked-crooked.com/a/ecfd74d963ff3632\" rel=\"nofollow\">rounded</a>: </p>\n\n<pre><code>int function() {\n    double d = 5.894; \n    printf(\"d=%f\\n\", d);\n    return d;\n}\n\nint main() {\n    double d = function();\n    printf(\"d=%f\\n\", d);\n    return 0;\n}\n</code></pre>\n\n<p>This gives me </p>\n\n<pre><code>d=5.894000\nd=5.000000\n</code></pre>\n\n<p>What am I missing here? </p>\n"}, {"tags": ["c", "header-files", "iar"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454520423, "post_id": 35183659, "comment_id": 58084436, "body": "C does not support classes. Sure this is not C++?"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1454520580, "post_id": 35183659, "comment_id": 58084538, "body": "Order of includes matter. As you say, first header includes the second, but second headers needs the definitions of the first."}, {"owner": {"reputation": 75, "user_id": 2867649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1145478879/picture?type=large", "display_name": "Smiley", "link": "https://stackoverflow.com/users/2867649/smiley"}, "edited": false, "score": 0, "creation_date": 1454520687, "post_id": 35183659, "comment_id": 58084606, "body": "Maybe I&#39;m using the wrong word. It&#39;s not class, it&#39;s just another c file. I&#39;m more of a C++ programmer, but this is written in C as far as I understand."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1454520693, "post_id": 35183659, "comment_id": 58084613, "body": "Your <code>macAddr</code> typedef is in header1.h, but <i>after</i> you <code>#include &quot;header2.h&quot;</code>.  So when header2.h is processed, the typedef hasn&#39;t been reached yet, and the reference to <code>macAddr</code> in the <code>getMAC()</code> prototype triggers an error (correctly)."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1454520799, "post_id": 35183659, "comment_id": 58084683, "body": "<code>#define __HEADER1_H</code> BTW: preprocessor identifiers with a leading undersccore are reserved. Don&#39;t use them."}, {"owner": {"reputation": 75, "user_id": 2867649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1145478879/picture?type=large", "display_name": "Smiley", "link": "https://stackoverflow.com/users/2867649/smiley"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1454522892, "post_id": 35183659, "comment_id": 58086014, "body": "@Mat and @Dmitri -- to avoid circular includes, does this mean that I need to <code>#include header1.h</code> in header2.h? Would that create circular includes issue?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1454526675, "post_id": 35183659, "comment_id": 58088259, "body": "@Smiley What you should try to do is place the typedef either early in header2.h (before the <code>getMAC()</code> prototype or any other use of it), or into another file that is <code>#include</code>d by header2.h and possibly other files that need the typedef but otherwise nothing from header2.h.  From what you&#39;ve shown I can&#39;t see a reason why they&#39;re not in the same file."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454539694, "post_id": 35183659, "comment_id": 58095719, "body": "the <code>for()</code> statement is written <code>for( initializer; condition; step )</code>   Notice that each part of the <code>for()</code> statement is separated from the other parts via semicolons, not commas."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1454540001, "post_id": 35183659, "comment_id": 58095831, "body": "note that symbols starting with double underscore, or underscore and a capital letter, are unconditionally reserved for the implementation. Yes, system headers use names with double underscores \u2014 they&#39;re part of the implementation and aren&#39;t allowed to pollute your namespace. You shouldn&#39;t pollute their namespace. For all practical purposes, and multiple counter-examples notwithstanding, treat names starting with underscore as reserved for the implementation."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454540386, "post_id": 35183659, "comment_id": 58095976, "body": "the posted code 1) is referencing a 5th file: <code>#include &quot;otherheader.h&quot;</code> that is not posted.  2) does nothing with the  <code>transmit[]</code> array after setting it.  this causes the compiler to raise a warning.  <code>warning: variable &#39;transmit&#39; set but not used [-Wunused-but-set-variable]</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454540463, "post_id": 35183659, "comment_id": 58096012, "body": "under most scenarios, the signature for the main function: <code>void main()</code> will cause the compiler to raise a warning about the return type not being <code>int</code>.  Suggest changing the signature to: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454540573, "post_id": 35183659, "comment_id": 58096050, "body": "in the file <code>header1.h</code> need to insert the statement: <code>#include &lt;stdint.h&gt;</code> so the <code>uint8_t</code> will be defined"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 2867649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1145478879/picture?type=large", "display_name": "Smiley", "link": "https://stackoverflow.com/users/2867649/smiley"}, "edited": false, "score": 0, "creation_date": 1454967503, "post_id": 35196516, "comment_id": 58271286, "body": "assuming that I can&#39;t change around the functions and declaration, is there any way that I can make this work? I tried using circular includes, but not working as I hoped to be. And about forward declaration, I tried that and didn&#39;t work. I may have declared it wrong. Not sure. For now, I moved the function so it works, but let&#39;s just assume that I&#39;m not able to move around the function for some odd reason, how would I go about that?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 75, "user_id": 2867649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1145478879/picture?type=large", "display_name": "Smiley", "link": "https://stackoverflow.com/users/2867649/smiley"}, "edited": false, "score": 0, "creation_date": 1455007946, "post_id": 35196516, "comment_id": 58285325, "body": "@Smiley Your real code is probably more complicated than this, but my first list of how to change includes is what you should consider. If nothing else, move <code>macAddr</code> definition to another header (with approriate header guards) and incluce that to other headers. I am not entirely sure how to forward declare array typedefs because I don&#39;t use them, so can&#39;t help you with that."}, {"owner": {"reputation": 75, "user_id": 2867649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1145478879/picture?type=large", "display_name": "Smiley", "link": "https://stackoverflow.com/users/2867649/smiley"}, "edited": false, "score": 0, "creation_date": 1455205878, "post_id": 35196516, "comment_id": 58394947, "body": "just to keep you updated. I came to learn that <code>header1.h</code> is public, and <code>header2.h</code> is private. So I made some changes so that <code>header2.h</code> is only for <code>main.c</code> and <code>function.c</code> and not for anywhere else, <code>but header1.h</code> can be used anywhere else.   that being said, both <code>main.c</code> and <code>function.c</code> has <code>#include &quot;header2.h&quot;</code>, and <code>header2.h</code> has <code>#include &quot;header1.h&quot;</code>.   You&#39;re right, it is more complicated than this as there are many units working together. But your answer is really the answer, it made more sense when we state the purpose for each file."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 75, "user_id": 2867649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1145478879/picture?type=large", "display_name": "Smiley", "link": "https://stackoverflow.com/users/2867649/smiley"}, "edited": false, "score": 0, "creation_date": 1455205957, "post_id": 35196516, "comment_id": 58395025, "body": "@Smiley Yes, header includes an be complex sometimes. If this helped, you can mark the answer, so that others know this question is solved."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 1, "last_activity_date": 1454577437, "last_edit_date": 1454577437, "creation_date": 1454576238, "answer_id": 35196516, "question_id": 35183659, "link": "https://stackoverflow.com/questions/35183659/typedef-is-declared-in-other-header-is-included-in-necessary-files-however-pro/35196516#35196516", "title": "Typedef is declared in other header, is included in necessary files, however produced: Error[Pe020]: identifier &quot;&quot; is undefined. Why?", "body": "<p>Problem is that <code>header1.h</code> includes <code>header2.h</code>, but <code>header2.h</code> requires <code>macAddr</code> which is not yet defined.</p>\n\n<hr>\n\n<p>Rule of thumb is that each file should include only the files it needs. Thus:</p>\n\n<ul>\n<li><code>header1.h</code> has a single <code>typedef</code>. It should only include <code>stdint.h</code>.</li>\n<li><code>header2.h</code> needs <code>macAddr</code> to work, thus it should include <code>header1.h</code>.</li>\n<li><code>main.c</code> uses getMAC, so it should include <code>header2.h</code>. <code>header1.h</code> is already included, so no need to include it.</li>\n<li><code>function.c</code> strictly only needs <code>header1.h</code>, but it's good practice to make sure that function declaration and definition match, so it should include <code>header2.h</code> instead.</li>\n</ul>\n\n<p>It seems like <code>header1.h</code> is used as a monolith header that is used to include everything (It's hard to be sure because your example has so few files). This is a <em>very bad</em> practice. It can increase compilation times, and makes refactoring hard since dependencies are difficult to track. </p>\n\n<p>Ideally each header should only have single well defined responsibility. It's not always possible, but it's a good goal.</p>\n\n<p>Circular includes are not a huge issue as long as you use header guards as you have, and not include everything everywhere unless it's needed. Sometimes you might need to add extra forward declarations, but that's about it.</p>\n\n<hr>\n\n<p>Here's some additional notes:</p>\n\n<ul>\n<li><p>As user3629249 and others noted, you really shouldn't declare symbols starting with <code>_</code> underscore. These are reserved for C standard or compiler use.</p></li>\n<li><p>I don't recommend using <code>typedef</code> on arrays (or pointers). Arrays decay to pointer in some cases without telling you, so when using <code>typedef</code> this is hidden from user and can cause bugs with careless use. I would wrap it struct instead:<br>\n<code>typedef struct { uint8_t address[8]; } MAC_T;</code></p></li>\n</ul>\n"}], "owner": {"reputation": 75, "user_id": 2867649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1145478879/picture?type=large", "display_name": "Smiley", "link": "https://stackoverflow.com/users/2867649/smiley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 35196516, "answer_count": 1, "score": 1, "last_activity_date": 1454615927, "creation_date": 1454520217, "last_edit_date": 1454615927, "question_id": 35183659, "link": "https://stackoverflow.com/questions/35183659/typedef-is-declared-in-other-header-is-included-in-necessary-files-however-pro", "title": "Typedef is declared in other header, is included in necessary files, however produced: Error[Pe020]: identifier &quot;&quot; is undefined. Why?", "body": "<p>Let's say I have the project in C in IAR, and I'm working with these 4 files. I have a header for defines, and another header for extern functions. I also have two .c files, one for main, and one for functions, as shown below. </p>\n\n<p>First header file: header1.h</p>\n\n<pre><code>#ifndef __HEADER1_H\n#define __HEADER1_H\n\n#include \"header2.h\"\n#include \"otherheader.h\"\n\n// bunch of 'define' here\ntypedef uint8_t   macAddr[8];\n#endif\n</code></pre>\n\n<p>Another header file: header2.h</p>\n\n<pre><code>#ifndef __HEADER2_H\n#define __HEADER2_H\n\n//other extern functions here\nextern void getMAC(macAddr deviceAddr);\n#endif\n</code></pre>\n\n<p>main.c file here:</p>\n\n<pre><code>#include \"header1.h\"\nvoid main ()\n{\n    macAddr dev1Address = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};\n    getMAC(dev1Address);\n}\n</code></pre>\n\n<p>function.c file here:</p>\n\n<pre><code>#include \"header1.h\"\nvoid getMAC(macAddr deviceAddr)\n{ \n  uint8_t transmit[8];\n  for (int i = 0; i&lt;8; i++)\n      transmit[i] = deviceAddr[i];\n}\n</code></pre>\n\n<p>The error reported is this:</p>\n\n<pre><code>Error[Pe020]: identifier \"macAddr\" is undefined \n</code></pre>\n\n<p>I'm having a little trouble understanding why this does not work. The first header (where <code>macAddr</code> is defined) includes the second header (where <code>getMac()</code> function is declared), and the first header is included in main.c as well as function.c. As far as I understand, there is no circular includes (as other questions suggested... correct me if I'm wrong, and show me how)</p>\n"}, {"tags": ["c", "caching", "dynamic-programming"], "answers": [{"comments": [{"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454522088, "post_id": 35184011, "comment_id": 58085509, "body": "Thanks for that. What is <code>MAX</code> though? Is that <code>INT_MAX</code>?"}, {"owner": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "reply_to_user": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454522192, "post_id": 35184011, "comment_id": 58085577, "body": "It can be any MAX value user is allowed to enter. You also need to take care of memory available in your system. Or, you can dynamically allocate after the user types the value of v. In that case, you don&#39;t have to bother about wasting space. In that case : <code>int * change; change = malloc (sizeof(int)*v);</code>"}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454522438, "post_id": 35184011, "comment_id": 58085720, "body": "So what do I have to do for it to compile? It&#39;s telling me <code>initChange</code> has conflicting types"}, {"owner": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "reply_to_user": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454522500, "post_id": 35184011, "comment_id": 58085753, "body": "see the update, I forgot to declare before the main."}], "tags": [], "owner": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "is_accepted": true, "score": 2, "last_activity_date": 1454522483, "last_edit_date": 1454522483, "creation_date": 1454521352, "answer_id": 35184011, "question_id": 35183641, "link": "https://stackoverflow.com/questions/35183641/dynamic-programming-minimum-coin-caching/35184011#35184011", "title": "Dynamic Programming - Minimum Coin caching", "body": "<p>With your existing code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint computeChange(int[],int,int);\nint min(int[],int);\nvoid initChange ();\nint change [MAX]; //used for memoization\n\n\n\nint main(){\n    int cur[]={1,2,5,10,20,50,100,200};\n    int n = sizeof(cur)/sizeof(int);\n    int v;\n\n    initChange ();\n    printf(\"Enter a value in euro cents: \");\n    scanf(\"%d\", &amp;v);\n\n    printf(\"The minimum number of euro coins required is %d\", computeChange(cur, v, n));\n\n    return 0;\n}\n\nvoid initChange () {\n    int i =0;\n    for (i = 0; i &lt; MAX; i++) {\n        change[i] = INT_MAX;\n    }\n}\n\nint computeChange(int cur[], int v, int n){\n    if(v &lt; 0)\n        return INT_MAX;\n    else if(v == 0)\n        return 0;\n    else{\n\n        if (change[v] == INT_MAX) {\n            int possible_mins[n], i;\n            for(i = 0; i &lt; n; i++){\n                possible_mins[i]=computeChange(cur, v-cur[i], n);\n            }\n            change[v] = 1 + min(possible_mins, n); // memoization\n        }\n        return change[v];//you return the memoized value\n\n    };\n}\n\nint min(int a[], int n){\n    int min = INT_MAX, i;\n    for(i = 0; i &lt; n; i++){\n        if((a[i]&gt;=0) &amp;&amp; (a[i]&lt; min))\n            min = a[i];\n    }\n    return min;\n}\n</code></pre>\n\n<p><br>\n<br>\n<br>\nI already posted a solution using loops in your previous question. I will post it again here:</p>\n\n<p>So the below is the code snippet for your problem using memoization and dynamic programming. The complexity is O(Val*numTypesofCoins).</p>\n\n<p>In the end, change[val] will give you the min number of coins for val.</p>\n\n<pre><code>int main (void) {\n    int change [MAX];\n    int cur[]={1,2,5,10,20,50,100,200};\n    int n = sizeof(a)/sizeof(int);\n    int val; //whatever user enters to get the num of coins required.\n    printf(\"Enter a value in euro cents: \");\n    scanf(\"%d\", &amp;val);\n\n    for (i=0; i &lt;= val; i++) {\n        change[i] = INT_MAX;\n    }\n    for (i=0; i &lt; n; i++) { // change for the currency coins should be 1.\n        change[cur[i]] = 1;\n    }\n\n    for (i=1; i &lt;= val; i++) {\n        int min = INT_MAX;\n        int coins = 0;\n        if (change[i] != INT_MAX) { // Already got in 2nd loop\n            continue;\n        }\n        for (j=0; j &lt; n; j++) {\n            if (cur[j] &gt; i) { // coin value greater than i, so break.\n                break;\n            }\n            coins = 1 + change[i - cur[j]]; \n            if (coins &lt; min) {\n                min = coins;\n            }\n        }\n        change[i] = min;\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 35184011, "answer_count": 1, "score": 1, "last_activity_date": 1454522483, "creation_date": 1454520122, "last_edit_date": 1495541251, "question_id": 35183641, "link": "https://stackoverflow.com/questions/35183641/dynamic-programming-minimum-coin-caching", "title": "Dynamic Programming - Minimum Coin caching", "body": "<p>Earlier I posted a <a href=\"https://stackoverflow.com/questions/35177518/dynamic-programming-minimum-number-of-coins-in-c\">question</a> about the coin vending machine problem (the minimum number of coins required). Turns out the issue was a typo in a for loop, so now the program works. The original question was this:</p>\n\n<blockquote>\n  <p>As the programmer of a vending machine controller your are required to compute the minimum number of coins that make up the required change to give back to customers. An efficient solution to this problem takes a dynamic programming approach, starting off computing the number of coins required for a 1 cent change, then for 2 cents, then for 3 cents, until reaching the required change and each time making use of the prior computed number of coins. Write a program containing the function <code>ComputeChange()</code>, that takes a list of valid coins and the required change. This program should repeatedly ask for the required change from the console and call <code>ComputeChange()</code> accordingly. <strong>It should also make use of \u201ccaching\u201d, where any previously computed intermediate values are retained for subsequent look-up.</strong></p>\n</blockquote>\n\n<p>The issue is that the code makes use of recursion, so it takes quite a long time to evaluate large values. Making use of caching should improve the issue, but I have no idea how to go about it. The code can be found below.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint computeChange(int[],int,int);\nint min(int[],int);\n\nint main(){\n    int cur[]={1,2,5,10,20,50,100,200};\n    int n = sizeof(cur)/sizeof(int);\n    int v;\n\n    printf(\"Enter a value in euro cents: \");\n    scanf(\"%d\", &amp;v);\n\n    printf(\"The minimum number of euro coins required is %d\", computeChange(cur, v, n));\n\n    return 0;\n}\n\nint computeChange(int cur[], int v, int n){\n    if(v &lt; 0)\n        return INT_MAX;\n    else if(v == 0)\n        return 0;\n    else{\n        int possible_mins[n], i;\n        for(i = 0; i &lt; n; i++){\n            possible_mins[i]=computeChange(cur, v-cur[i], n);\n        }\n        return 1+min(possible_mins, n);\n    };\n}\n\nint min(int a[], int n){\n    int min = INT_MAX, i;\n    for(i = 0; i &lt; n; i++){\n        if((a[i]&gt;=0) &amp;&amp; (a[i]&lt; min))\n            min = a[i];\n    }\n    return min;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "numpy", "ctypes"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1454523214, "post_id": 35183473, "comment_id": 58086196, "body": "<code>x = np.frombuffer((c_float * D).from_address(foo()), np.float32).copy()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 467, "user_id": 3102241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f06533f45ad2611fc2283c4ee1463329?s=128&d=identicon&r=PG&f=1", "display_name": "user3102241", "link": "https://stackoverflow.com/users/3102241/user3102241"}, "is_accepted": false, "score": 3, "last_activity_date": 1454682226, "creation_date": 1454682226, "answer_id": 35226486, "question_id": 35183473, "link": "https://stackoverflow.com/questions/35183473/convert-ctypes-pointer-to-a-numpy-array-of-floats/35226486#35226486", "title": "Convert ctypes pointer to a numpy array of floats", "body": "<p>Thanks to eryksun in comments:</p>\n\n<pre><code>x = np.frombuffer((c_float * D).from_address(foo()), np.float32).copy()\n</code></pre>\n"}], "owner": {"reputation": 467, "user_id": 3102241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f06533f45ad2611fc2283c4ee1463329?s=128&d=identicon&r=PG&f=1", "display_name": "user3102241", "link": "https://stackoverflow.com/users/3102241/user3102241"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1807, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1454682226, "creation_date": 1454519601, "question_id": 35183473, "link": "https://stackoverflow.com/questions/35183473/convert-ctypes-pointer-to-a-numpy-array-of-floats", "title": "Convert ctypes pointer to a numpy array of floats", "body": "<p>I am using a C Library and interfacing it with python, without going into too much detail, my library has a C function which we will call 'foo' that returns void const* (it either returns float const* or double const* depending on application). In python I declared this as:</p>\n\n<pre><code>from ctypes import *\nmylib = cdll.LoadLibrary('mylib.so')\n\nfoo = mylib.foo\nfoo.restype = c_void_p\n</code></pre>\n\n<p>From now we will assume that we are using float not double and given the expected dimensions of the pointer as 'D' e.g. 12</p>\n\n<pre><code>D = 12\n</code></pre>\n\n<p>I am trying to do a deep copy of the return value into a python numpy array so that I don't need to worry about the memory allocated by the C Library being freed, I have tried implementing it as follows:</p>\n\n<pre><code>import numpy as np\nx = np.frombuffer(foo(), np.float32, D * np.dtype(np.float32).itemsize).copy()\n\nAttributeError: 'int' object has no attribute '__buffer__'\n</code></pre>\n\n<p>But it doesn't seem to work, I thought that the return type of 'foo' would be a ctypes c_void_p type python object but actually it is just an int. I am guessing the value of the int corresponds to the address in memory of the first float in the array but maybe I am wrong. There must be an easy way of doing this, has anybody got any suggestions?</p>\n\n<p>If you would like more details (on the library, etc.) let me know I tried to keep the question simple.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "scanf"], "answers": [{"tags": [], "owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "is_accepted": true, "score": 4, "last_activity_date": 1454518522, "creation_date": 1454518522, "answer_id": 35183079, "question_id": 35183013, "link": "https://stackoverflow.com/questions/35183013/program-crashing-after-using-scanf/35183079#35183079", "title": "Program crashing after using scanf", "body": "<p>It is due to the fact that the correct syntax for <code>scanf</code> is:</p>\n\n<pre><code>scanf(\"%d\", &amp;u); // notice the \" is after the \"d\"\n</code></pre>\n\n<p>You actually got it right in your other <code>scanf</code>s.</p>\n"}], "owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 35183079, "answer_count": 1, "score": 2, "last_activity_date": 1454519472, "creation_date": 1454518350, "last_edit_date": 1454519472, "question_id": 35183013, "link": "https://stackoverflow.com/questions/35183013/program-crashing-after-using-scanf", "title": "Program crashing after using scanf", "body": "<p>This is a program I wrote that calculates time of landing a plane when you give it starting time and it flies for a second. But when I run a program and insert the first number in the console it immediately crashes.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n    int m, s;\n    int u;\n    long flight, landing;\n\n    printf(\"insert time of taking a plane:\\n time in hours: \"); \n    scanf(\"%d, &amp;u\");\n    printf(\" minutes: \");\n    scanf(\"%d\", &amp;m);\n    printf(\" seconds: \");\n    scanf(\"%d\", &amp;s);\n    printf(\"Duration of a flight (in seconds): \");\n    scanf(\"%ld\", &amp;flight);\n    pristanek = u * 3600 + m * 60 + s + let;\n    u = landing / 3600;\n    m = (landing % 3600) % 60;\n    s = landing % 60;\n    printf(\"Time of landing; %d:%02d:%02d\\n\", u, m, s);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "graphics", "sdl-2"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454518305, "post_id": 35182818, "comment_id": 58082928, "body": "Try <code>fflush(stdout);</code> in-between."}, {"owner": {"reputation": 924, "user_id": 4899740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96c5e1381891a68f8b805b5e29f860e?s=128&d=identicon&r=PG&f=1", "display_name": "Serikov", "link": "https://stackoverflow.com/users/4899740/serikov"}, "edited": false, "score": 3, "creation_date": 1454518401, "post_id": 35182818, "comment_id": 58082999, "body": "See <a href=\"http://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin\">Why does printf not flush after the call unless a newline is in the format string?</a>"}, {"owner": {"reputation": 109, "user_id": 1253202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtI82.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/1253202/joe"}, "edited": false, "score": 0, "creation_date": 1454518415, "post_id": 35182818, "comment_id": 58083009, "body": "I&#39;m more looking for why this behavior is occurring."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1454519467, "post_id": 35182818, "comment_id": 58083795, "body": "Useful general hint: If someone gives you advice, but does not explain why, it might be a good idea to do some research on your own. That way you get more details, learn something new and very likely will memorise the information much better."}, {"owner": {"reputation": 109, "user_id": 1253202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtI82.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/1253202/joe"}, "edited": false, "score": 0, "creation_date": 1454519625, "post_id": 35182818, "comment_id": 58083885, "body": "Thank you to Serikov, I did fallow up on that link and it lead me to the information I was looking for. I agree Olaf."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454541118, "post_id": 35182818, "comment_id": 58096275, "body": "when compiling, always enable all the warnings, then fix those warnings.  The compiler will raise: <code>warning: unused parameter &#39;argc&#39; [-Wunused-parameter]</code> and <code>warning: unused parameter &#39;argv&#39; [-Wunused-parameter]</code>.   those can be easily corrected by changing the <code>main()</code> signature to: <code>int main( void )</code>"}, {"owner": {"reputation": 109, "user_id": 1253202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtI82.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/1253202/joe"}, "edited": false, "score": 0, "creation_date": 1454849950, "post_id": 35182818, "comment_id": 58220001, "body": "I keep 2 version, debug and final. I do no include the warnings in the final version. I only place the build command for the final version at the top because i change the debug flags consistently. I do agree with you though user3629249"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1454554587, "creation_date": 1454554587, "answer_id": 35191670, "question_id": 35182818, "link": "https://stackoverflow.com/questions/35182818/why-does-sdl2-display-the-dialog-messages-before-the-last-printf-very-interesti/35191670#35191670", "title": "Why does SDL2 display the dialog messages before the last printf? Very interesting", "body": "<p>the reason for the seemingly mixed output order is because in C, stdout is internally buffered.</p>\n\n<p>There are only a few ways that the stdout buffer is actually flushed to the terminal.</p>\n\n<ol>\n<li>a fprintf( stdout,... has the format string end in '\\n'</li>\n<li>similar format string considerations for printf()</li>\n<li>a string item that is being output via <code>%s</code> contains a <code>\\n</code></li>\n<li>the function <code>fflush( stdout )</code> is executed</li>\n<li>the program tries to input anything from <code>stdin</code></li>\n<li>the program exits</li>\n<li>the buffer is completely filled</li>\n<li>the <code>setbuf()</code> function is called at the beginning of the program with setting the <code>stdout</code> buffer to length 0</li>\n<li>the <code>puts()</code> function is called.</li>\n<li>the <code>putc()</code> function is called with a char parameter of '\\n'</li>\n</ol>\n"}], "owner": {"reputation": 109, "user_id": 1253202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtI82.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/1253202/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 35191670, "answer_count": 1, "score": -1, "last_activity_date": 1454554587, "creation_date": 1454517852, "question_id": 35182818, "link": "https://stackoverflow.com/questions/35182818/why-does-sdl2-display-the-dialog-messages-before-the-last-printf-very-interesti", "title": "Why does SDL2 display the dialog messages before the last printf? Very interesting", "body": "<p>I can not figure out why the dialog messages get displayed before the \"printf\" statement.</p>\n\n<p>If I add a '\\n' to the \"printf\" than it acts like normal, but without it the dialog boxs ends up being displayed before the \"printf\".</p>\n\n<p>Here is the test program:</p>\n\n<pre><code>/* Build: gcc -o test `sdl2-config --libs --cflags` test.c */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;SDL2/SDL.h&gt;\n\nvoid MessageBox(void);\nvoid clean(void);\n\nint main(int argc, char* argv[]) {\n    SDL_Init(SDL_INIT_EVERYTHING);\n    atexit(clean);\n    SDL_DisplayMode mode;\n    int id = 0;\n    SDL_GetCurrentDisplayMode(id, &amp;mode);\n    char smode[20];\n    sprintf(smode, \"%ix%i@%iHz\", mode.h, mode.w, mode.refresh_rate);\n    printf(\"%s\", smode);\n\n    MessageBox();\n\n    SDL_ShowSimpleMessageBox(SDL_MESSAGEBOX_ERROR,\n            \"Missing file\",\n            \"File is missing. Please reinstall the program.\",\n            NULL\n            );\n    return(0);\n}\n\nvoid MessageBox() {\n    const SDL_MessageBoxButtonData buttons[] ={ /* .flags, .buttonid, .text */\n        {0, 0, \"no\"},\n        {SDL_MESSAGEBOX_BUTTON_RETURNKEY_DEFAULT, 1, \"yes\" },\n        { SDL_MESSAGEBOX_BUTTON_ESCAPEKEY_DEFAULT, 2, \"cancel\" },\n        };\n\n    const SDL_MessageBoxColorScheme colorScheme = { /* .colors (.r, .g, .b) */\n        {   /* [SDL_MESSAGEBOX_COLOR_BACKGROUND] */\n            { 0, 0, 0 },\n                /* [SDL_MESSAGEBOX_COLOR_TEXT] */\n            { 0, 255, 0 },\n                /* [SDL_MESSAGEBOX_COLOR_BUTTON_BORDER] */\n            { 255, 255, 255 },\n                /* [SDL_MESSAGEBOX_COLOR_BUTTON_BACKGROUND] */\n            { 0, 0, 0 },\n                /* [SDL_MESSAGEBOX_COLOR_BUTTON_SELECTED] */\n            { 255, 0, 255 }\n        }\n    };\n    const SDL_MessageBoxData messageboxdata = {\n        SDL_MESSAGEBOX_INFORMATION, /* .flags */\n        NULL,                       /* .window */\n        \"example message box\",      /* .title */\n        \"select a button\",          /* .message */\n        SDL_arraysize(buttons),     /* .numbuttons */\n        buttons,                    /* .buttons */\n        &amp;colorScheme                /* .colorScheme */\n    };\n    int buttonid;\n    if(SDL_ShowMessageBox(&amp;messageboxdata, &amp;buttonid) &lt; 0) {\n        SDL_Log(\"error displaying message box\");\n    }\n    if(buttonid == -1) {\n        SDL_Log(\"no selection\");\n    } else {\n        SDL_Log(\"selection was %s\", buttons[buttonid].text);\n    }\n}\n\nvoid clean() {\n    SDL_Quit();\n}\n</code></pre>\n"}, {"tags": ["c", "bitmap", "vga"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1454518035, "post_id": 35182684, "comment_id": 58082712, "body": "A 16-color image would have 2 pixels per byte. Or are you talking about a 256-color image that only uses 16 colors? Also note that biClrUsed could be 0, in which case you&#39;d use biBitCount to deduce the number of colors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454518654, "post_id": 35182684, "comment_id": 58083197, "body": "I&#39;m voting to close this question as off-topic because stack overflow is not a code review or debugging service."}, {"owner": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1454518937, "post_id": 35182684, "comment_id": 58083412, "body": "@Olaf there&#39;s an existing close reason that&#39;s applicable. &quot;Questions asking <i>why isn&#39;t my code working?</i> should include a MCVE&quot;."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1454519011, "post_id": 35182684, "comment_id": 58083457, "body": "Why do you only plot non zero <code>data</code>?  Is color 0 supposed to be transparent?"}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1454519056, "post_id": 35182684, "comment_id": 58083499, "body": "@chqrlie Yes, 0 is my defined transparent color."}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454519148, "post_id": 35182684, "comment_id": 58083575, "body": "@Olaf I&#180;m sorry for doing that, I did not know I could not post this types of questions. It&#180;s ok to close the question then."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1454519229, "post_id": 35182684, "comment_id": 58083630, "body": "@Mat&#39;sMug: Sure, but the one given is more specific, as OP clearly asks to review his code and find the problem. Feel free to close-vote for the other reason."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1454519232, "post_id": 35182684, "comment_id": 58083632, "body": "Is the bitmap a 256 color BITMAP with 1 byte per pixel?  If so, modify the question to clarify this.  Also you do not apply the palette anywhere, what is the prototype and semantics of <code>plot_pixel</code>?  How many bits for the third argument? what representation of colors?"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1454519268, "post_id": 35182684, "comment_id": 58083657, "body": "There&#39;s nothing wrong with your question.  I don&#39;t see anywhere that you initialize the palette, nor do I see where you set the video mode.  That code could prove very useful."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454519289, "post_id": 35182684, "comment_id": 58083673, "body": "The kind of problem is not OT per-se. Take the <a href=\"https://stackoverflow.com/tour\">tour</a> and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454519696, "post_id": 35182684, "comment_id": 58083926, "body": "Thanks to everyone for your comments. I added all the information you requested on the question. Im reading the How to Ask section too. Thanks @Olaf"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454520022, "post_id": 35182684, "comment_id": 58084136, "body": "Why not first try to simply put colored points or a line?"}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454520117, "post_id": 35182684, "comment_id": 58084204, "body": "@Olaf I can already do that. I just did not included the line function since I did not considered it relevant to the question. However the plot_pixel function does work and it&#180;s on the edits I made."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454520358, "post_id": 35182684, "comment_id": 58084394, "body": "The function itself might not be relevant, bnut the information you tried and that it works very well is. For example it shows your palette is correct and you uise the correct memory, etc. - presuming your claim &quot;does work&quot; means you tested correctly."}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "edited": false, "score": 0, "creation_date": 1454520689, "post_id": 35182684, "comment_id": 58084610, "body": "Ok I&#180;m sorry for forgetting the info. But yes, right now I can plot lines with different colors with no problem at all (I use random number between 0-15 for the colors). However when calling the draw bitmap I just get white pixels plotted on my screen."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454543448, "post_id": 35182684, "comment_id": 58097148, "body": "please post info about the <code>fskip()</code> function.  I&#39;m not finding it under ubuntu linux 14.04 with gcc compiler man pages.  Nor am I finding it via an online search."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1454544325, "post_id": 35182684, "comment_id": 58097467, "body": "in C, when calling the system memory allocation functions, do not cast the returned value.  The returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, leads to misunderstandings, makes understanding, debug, maintenance much more difficult.  Note: <code>malloc()</code> expects a <code>size_t</code> not a <code>word</code> type for a parameter"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454548296, "post_id": 35182684, "comment_id": 58098765, "body": "the allocated memory for <code>data</code> must be such that each row is a multiple of <code>sizeof(long)</code>   which often means there are some padding bytes on the end of each row in the pixel map."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454548553, "post_id": 35182684, "comment_id": 58098841, "body": "the posted code contains lots of &#39;magic&#39; numbers.  &#39;magic&#39; numbers make the code much harder to read/understand.   Strongly suggest: use a <code>enum</code> to give those &#39;magic&#39; numbers meaningful names then use those meaningful names throughout the code.  Some of the &#39;magic&#39; numbers are: 16,2,22,6, 3, (256*3)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454549143, "post_id": 35182684, "comment_id": 58098991, "body": "this line: <code>if ((x&lt;0) &amp;&amp; (x&gt;=SCREEN_WIDTH) &amp;&amp; (y&lt;0) &amp;&amp; (y&gt;=SCREEN_HEIGHT))</code> seems to be incorrect.  <code>x</code> cannot be both &lt;0 and &gt;SCREEN_WIDTH.   Similar statement for <code>y</code>.   Perhaps you meant: <code>if ((x&lt;0) || (x&gt;=SCREEN_WIDTH) || (y&lt;0) || (y&gt;=SCREEN_HEIGHT))</code>"}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454549914, "post_id": 35182684, "comment_id": 58099199, "body": "@user3629249 thanks that&#39;s an error I did not notice."}, {"owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "edited": false, "score": 0, "creation_date": 1454551700, "post_id": 35182684, "comment_id": 58099660, "body": "I finally was able to load a bmp. But it was a 256 color bmp. Somehow my functions work for those types of bmp. I&#180;m now just dealing with the problem that it is being displayed at an offset of the position I give it. I tell it to draw at (0,0) it starts drawing the left half of the bmp on the right side and the right half of the bmp on the left side."}], "owner": {"reputation": 2382, "user_id": 2370400, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5a0796d3f5a35d57f483d7d13d884007?s=128&d=identicon&r=PG", "display_name": "Pablo Estrada", "link": "https://stackoverflow.com/users/2370400/pablo-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1454544321, "creation_date": 1454517481, "last_edit_date": 1454544321, "question_id": 35182684, "link": "https://stackoverflow.com/questions/35182684/loading-and-drawing-a-bitmap-on-vga-in-c", "title": "Loading and drawing a bitmap on VGA in C", "body": "<p>I\u00b4m trying to load and draw a 16 color bitmap on screen. I have a function for loading it and another for drawing the bitmap. However, when trying to draw the bitmap I\u00b4m getting all pixels in color white.</p>\n\n<p>I think I might be having a problem with the color palette. Can anyone tell me if my palette information is correct or if there\u00b4s any problem with my loading or drawing method?</p>\n\n<p><strong>Load Bitmap:</strong></p>\n\n<pre><code>typedef struct {\n    word width;\n    word height;\n    byte pallete[256 * 3];\n    byte *data;\n} BITMAP;\n\n/**************************************************************************\n *  load_bmp                                                              *\n *    Loads a bitmap file into memory.                                    *\n **************************************************************************/\n\nvoid load_bmp(char *file, BITMAP *b) {      \n    FILE *fp;\n    long index;\n    byte a;\n    word num_colors;\n    int x;\n    //SetGfxMode(0x3);\n\n    /* Opening file */\n    if ((fp = fopen(file,\"rb\")) == NULL) {\n        printf(\"Error al abrir el archivo %s.\\n\", file);\n        exit(1);\n    }\n\n    /* Validating if the image is a valid bitmap */\n    if (fgetc(fp) != 'B' || fgetc(fp) != 'M') {\n        fclose(fp);\n        printf(\"%s is not a bitmap file. \\n\", file);\n        exit(1);\n    }\n\n    /* Height and width of the image */\n    fskip(fp, 16);\n    fread(&amp;b-&gt;width, sizeof(word), 1, fp);\n    fskip(fp, 2);\n    fread(&amp;b-&gt;height, sizeof(word), 1, fp);\n    fskip(fp, 22);\n    fread(&amp;num_colors, sizeof(word), 1, fp);\n    fskip(fp, 6);\n\n    /* We are loading a 16 color image */\n    if (num_colors == 0)\n        num_colors = 16;\n\n    /* Intentamos alojar memoria para la data del bitmap */\n    if ((b-&gt;data = (byte *)malloc((word)(b-&gt;width * b-&gt;height))) == NULL) {\n        fclose(fp);\n        printf(\"Error allocating memory for file %s.\\n\", file);\n        exit(1);\n    }\n\n    /* Reading palette info */\n    for (index = 0; index &lt; num_colors; index++) {\n        b-&gt;pallete[(int)(index*3+2)] = fgetc(fp) &gt;&gt; 2;\n        b-&gt;pallete[(int)(index*3+1)] = fgetc(fp) &gt;&gt; 2;\n        b-&gt;pallete[(int)(index*3+0)] = fgetc(fp) &gt;&gt; 2;\n        x = fgetc(fp);\n    }\n\n    /* Leyendo el bitmap */\n    for (index = (b-&gt;height - 1) * b-&gt;width; index &gt;= 0; index -= b-&gt;width) {\n        for (x = 0; x &lt; b-&gt;width; x++) {\n            a = fgetc(fp);\n            //printf(\"%d\",a);\n            //getch();\n            b-&gt;data[(word)(index + x)] = a;\n        }\n    }\n    fclose(fp);\n}\n</code></pre>\n\n<p><strong>Draw Bitmap:</strong></p>\n\n<pre><code>/**************************************************************************\n *  draw_transparent_bitmap                                               *\n *    Draws a transparent bitmap.                                         *\n **************************************************************************/\n\nvoid draw_transparent_bitmap(BITMAP *bmp, int x, int y) {\n    int i, j;\n    word bitmap_offset = 0;\n    byte data;\n\n    for (j = 0; j &lt; bmp-&gt;height; j++) {\n        for (i = 0; i &lt; bmp-&gt;width; i++, bitmap_offset++) {\n            data = bmp-&gt;data[bitmap_offset];\n            /* Pintando en pantalla */\n            if (data)\n                plot_pixel(x + i, j + y, data);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>For more information: Im using 12h mode 16 color VGA:</p>\n\n<p>this are my video_set and plot pixel functions:</p>\n\n<pre><code>void SetGfxMode(int mode)\n{\n    __dpmi_regs regs;\n    memset(&amp;regs,0, sizeof(regs));\n    regs.x.ax=mode;\n    //regs.x.ax=0xD; //screen mode (EGA)\n    //regs.x.ax=0x13; //screen mode (VGA)\n    __dpmi_int(0x10,&amp;regs);\n    //_farsetsel(_dos_ds);\n    VGA=(byte *)0xA0000 + __djgpp_conventional_base;\n\n    unsigned char weird_number=(SCREEN_WIDTH/8);\n    for (int x=0; x&lt;SCREEN_WIDTH; x++)\n    {\n        for (int y=0; y&lt;SCREEN_HEIGHT; y++)\n        {\n            setpixel_i[x][y] = y*weird_number + x/8; /* Memory Location */\n        }\n        setpixel_b[x] = (0x80)&gt;&gt;(x%8); /* compute Bit Mask */\n    }\n\n\n    return;\n    }\n</code></pre>\n\n<p><strong>Plot Pixel:</strong> </p>\n\n<pre><code>typedef unsigned char byte;\nbyte * VGA;\nlong int setpixel_i[SCREEN_WIDTH][SCREEN_HEIGHT];\nunsigned char setpixel_b[SCREEN_WIDTH];\nlong int setpixel_ti;\nbyte double_buffer[SCREEN_SIZE];\nunsigned char setpixel_tb;\nvoid plot_pixel(int x, int y, int col) \n{ \n    #ifdef SCREEN_SAFE\n        if ((x&lt;0) &amp;&amp; (x&gt;=SCREEN_WIDTH) &amp;&amp; (y&lt;0) &amp;&amp; (y&gt;=SCREEN_HEIGHT))\n        {return;}\n    #endif\n    //char far *screen = (char far *)0xA0000000; //djgpp doesn't understand far for some reason, maybe it's just me! heh\n    //long int i;\n    //unsigned char b;\n\n    outp(0x3ce,0x05); /* Graphics Mode */ \n    outp(0x3cf,0x02); /* Write Mode 2 */ \n\n    setpixel_ti=setpixel_i[x][y];\n    setpixel_tb=setpixel_b[x];\n    //i = y*40 + x/8; /* Memory Location */\n    //b = (0x80)&gt;&gt;(x%8); /* compute Bit Mask */\n\n    outp(0x3ce,0x08); /* Bit Mask Register */ \n    outp(0x3cf,setpixel_tb); /* Bit Mask */\n    outp(0x3ce,0x03); /* Function Select Register */ \n    outp(0x3cf,0x00); /* Replace Pixel */ \n    setpixel_tb = VGA[setpixel_ti]; /* Dummy Read to refresh latch registers (THIS IS *VERY* IMPORTANT)*/\n    VGA[setpixel_ti] = col; /* Set Pixel */\n\n} \n</code></pre>\n\n<p><strong>Set Pallete:</strong></p>\n\n<pre><code>void set_pallete(byte *pallete){\n    int i;\n    outp(PALETTE_INDEX,0);\n    for(i=0;i&lt;16*3;i++){\n        outp(PALETTE_DATA,pallete[i]);\n\n    }\n}\n</code></pre>\n\n<p><strong>Fskip</strong></p>\n\n<pre><code> void fskip(FILE *fp, int num_bytes){\n\n    int i;\n    for(i=0; i&lt;num_bytes; i++){\n            fgetc(fp);\n\n    }\n}\n</code></pre>\n\n<p><strong>Main:</strong></p>\n\n<pre><code>load_bmp(\"home16.bmp\",&amp;fondo_inicio);   \nset_pallete(fondo_inicio.pallete);\n\ndraw_transparent_bitmap(&amp;fondo_inicio,0,0); \n</code></pre>\n"}, {"tags": ["c", "assembly", "floating-point", "reverse-engineering", "x87"], "comments": [{"owner": {"reputation": 59, "user_id": 5878854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrW5R.png?s=128&g=1", "display_name": "MCan", "link": "https://stackoverflow.com/users/5878854/mcan"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 7, "creation_date": 1454517347, "post_id": 35182509, "comment_id": 58082205, "body": "x87 is a floating point-related subset of the x86 architecture instruction set. =&gt; <a href=\"https://en.wikipedia.org/wiki/X87\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/X87</a>"}, {"owner": {"reputation": 5652, "user_id": 467968, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e81a0b12d4c3f0f3f93099e181660f?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/467968/neil"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 6, "creation_date": 1454517364, "post_id": 35182509, "comment_id": 58082223, "body": "@m0skit0 One better than a x86, of course."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1454517625, "post_id": 35182509, "comment_id": 58082411, "body": "0x4141414142424242 x 1.4426950408889634074 is definitely 6783712964982603776.000000, not 3262848.902912714389."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 1, "creation_date": 1454518430, "post_id": 35182509, "comment_id": 58083027, "body": "@m0skit0: If you were that old as your profile-image implies, you should know ;-)"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454518485, "post_id": 35182509, "comment_id": 58083068, "body": "@Olaf In fact I knew because I even had a 387 I just got confused by the notation :^P"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1454518572, "post_id": 35182509, "comment_id": 58083122, "body": "@m0skit0: 386/387 is still pretty young."}], "answers": [{"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1454517999, "post_id": 35182779, "comment_id": 58082689, "body": "This assumes <code>long long int</code> and <code>double</code> have the same width. Can that be safely made?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1454518071, "post_id": 35182779, "comment_id": 58082747, "body": "OK - it&#39;s only for illustration purposes, but to keep everyone happy I&#39;ll change it to <code>uint64_t</code>."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 59, "user_id": 5878854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrW5R.png?s=128&g=1", "display_name": "MCan", "link": "https://stackoverflow.com/users/5878854/mcan"}, "edited": false, "score": 1, "creation_date": 1455558656, "post_id": 35182779, "comment_id": 58532564, "body": "@MCan : If this answer solved you problem and was useful, please consider accepting it as an answer. You can find out more about the hows and whys of answering questions on SO here: <a href=\"http://meta.stackexchange.com/a/5235/271768\">meta.stackexchange.com/a/5235/271768</a>"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 8, "last_activity_date": 1454518565, "last_edit_date": 1454518565, "creation_date": 1454517746, "answer_id": 35182779, "question_id": 35182509, "link": "https://stackoverflow.com/questions/35182509/how-to-decompile-this-x87-assembly-calculation/35182779#35182779", "title": "How to decompile this x87 assembly calculation?", "body": "<p>In the asm code you're actually multiplying two <code>double</code>s with the <code>fmul</code> instruction, not a <code>float</code> and an <code>int</code>. To do something similar in C:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    uint64_t vbi = 0x4141414142424242ULL; // hex representation of double\n    double r, vb, va = 1.4426950408889634074;\n\n    memcpy(&amp;vb, &amp;vbi, sizeof(vb));        // copy hex to double\n    r = va * vb;\n    printf(\"va = %f, vb = %f, r = %f\\n\", va, vb, r);\n    return 0;\n}\n</code></pre>\n\n<p>Result = <code>va = 1.442695, vb = 2261634.517647, r = 3262848.902913</code>.</p>\n\n<p><kbd><a href=\"http://ideone.com/mA3Fld\" rel=\"nofollow\">LIVE DEMO</a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "is_accepted": false, "score": 3, "last_activity_date": 1455558167, "last_edit_date": 1455558167, "creation_date": 1454520398, "answer_id": 35183707, "question_id": 35182509, "link": "https://stackoverflow.com/questions/35182509/how-to-decompile-this-x87-assembly-calculation/35183707#35183707", "title": "How to decompile this x87 assembly calculation?", "body": "<p>This assembler code is not doing what you think it is doing:</p>\n\n<pre><code>main:\n    fld tword[va]\n    fmul qword[vb]\n    ret\n</code></pre>\n\n<p>You suggest <em>simple multiplication between float number and 8 byte integer</em> . This is actually multiplication of a 10-byte extended double floating point value by the 8-byte double (not 8-byte integer) represented by 0x4141414142424242 . 0x4141414142424242 is treated as the bits of an 8-byte double floating point value by your code, not an 8-byte integer converted to a double floating point value.</p>\n\n<p>The code for what you believed was happening could have looked something like:</p>\n\n<pre><code>main:\n    fild qword[vb]     ; Convert 64-bit integer to an extended precision double in st0\n    fld tword[va]      ; st(0)=&gt;st(1) st(0) = 10-byte float(va)\n    fmulp              ; Multiply st(0) and st(1). Result in st(0).\n</code></pre>\n\n<p>This just clears up your misinterpretation of the assembler code.</p>\n"}], "owner": {"reputation": 59, "user_id": 5878854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrW5R.png?s=128&g=1", "display_name": "MCan", "link": "https://stackoverflow.com/users/5878854/mcan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1455558167, "creation_date": 1454517041, "last_edit_date": 1454561174, "question_id": 35182509, "link": "https://stackoverflow.com/questions/35182509/how-to-decompile-this-x87-assembly-calculation", "title": "How to decompile this x87 assembly calculation?", "body": "<p>The program I'm reversing does simple multiplication between float number and 8 byte integer:</p>\n\n<pre><code>section .data\n\nva: dt 1.4426950408889634074\nvb: dd 0x42424242\n    dd 0x41414141\n\nsection .text\nglobal main\n\nmain:\n    fld tword[va]\n    fmul qword[vb]\n    ret\n</code></pre>\n\n<p>Result under gdb:</p>\n\n<pre><code>Breakpoint 1, 0x08048360 in main ()\n(gdb) x/i $eip\n0x8048360 &lt;main&gt;:       fld    TBYTE PTR ds:0x804953c\n0x8048366 &lt;main+6&gt;:     fmul   QWORD PTR ds:0x8049546\n0x804836c &lt;main+12&gt;:    ret\n(gdb) x/gx 0x8049546\n0x8049546 &lt;vb&gt;: 0x4141414142424242\n(gdb) si\n0x08048366 in main ()\n0x0804836c in main ()\n(gdb) info float\n=&gt;R7: Valid   0x4014c726039c95268dc4 +3262848.902912714389\n</code></pre>\n\n<p>I'm trying to recreate this program in C (same 32bit environment):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    unsigned long long vb = 0x4141414142424242LL;\n    float r, va = 1.4426950408889634074F;\n\n    r = va * vb;\n    printf(\"%f\\n\", r);\n}\n</code></pre>\n\n<p>...but I get very different results:</p>\n\n<pre><code>$ ./test\n6783712964982603776.000000\n</code></pre>\n\n<p>What I'm doing wrong in my C program?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1454517268, "post_id": 35182382, "comment_id": 58082127, "body": "Any case where your conditions will be false ?"}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 4, "last_activity_date": 1454517303, "creation_date": 1454517303, "answer_id": 35182614, "question_id": 35182382, "link": "https://stackoverflow.com/questions/35182382/display-an-error-message/35182614#35182614", "title": "Display an error message?", "body": "<p>By doing:</p>\n\n<pre><code>if (strcmp || strcmp || strcmp || strcmp != 0)\n</code></pre>\n\n<p>You seem to be trying to check ALL the different results against 0 at the same time.</p>\n\n<p>That is not how C works.<br>You must check each value individually</p>\n\n<pre><code>if (strcmp(command, \"EXIT\") &amp;&amp;\n    strcmp(command, \"add\" ) &amp;&amp;\n    strcmp(command, \"sub\" ) &amp;&amp;\n    strcmp(command, \"div\" ) &amp;&amp;\n    strcmp(command, \"mult\"))\n { /* Show Warning message */ }\n</code></pre>\n\n<p><strong>Translation:</strong><br>\nIf the string is <strong><em>not</em></strong> <code>\"EXIT\"</code> and also is not <code>\"add\"</code>, and also is not <code>\"sub\"</code>.... then the string was not any known command; Therefore, show a warning.</p>\n"}, {"tags": [], "owner": {"reputation": 806, "user_id": 1482201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/536d19e96ddde3c04777185e4e418957?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/1482201/tano"}, "is_accepted": false, "score": 0, "last_activity_date": 1454517855, "creation_date": 1454517855, "answer_id": 35182822, "question_id": 35182382, "link": "https://stackoverflow.com/questions/35182382/display-an-error-message/35182822#35182822", "title": "Display an error message?", "body": "<p>The <code>strcmp</code> function returns <code>0</code> if the two strings match. Consequently  your condition will always evaluate as <code>true</code>, since only one string can match with a certain input.</p>\n"}], "owner": {"reputation": 13, "user_id": 5878941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77e4d7d3b4120e2db379de86091f96a6?s=128&d=identicon&r=PG&f=1", "display_name": "Gee Wiz", "link": "https://stackoverflow.com/users/5878941/gee-wiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 35182614, "answer_count": 2, "score": 1, "last_activity_date": 1454517894, "creation_date": 1454516724, "last_edit_date": 1454517894, "question_id": 35182382, "link": "https://stackoverflow.com/questions/35182382/display-an-error-message", "title": "Display an error message?", "body": "<p>Hi my program basically is when a user input an unrecognizable command it suppose to display an error message, however when the user input valid commands and non valid commands it still displays error message. </p>\n\n<pre><code>int main(){\n\n    char command[20];\n\n    printf(\"Enter either add, sub, mult, div, or EXIT:\\n\");\n    scanf(\"%5s\", command);\n\n\n    if(strcmp(command, \"EXIT\") || strcmp(command, \"add\" ) ||strcmp(command, \"sub\")|| strcmp(command,\"div\") || strcmp(command,\"mult\") != 0){\n        printf(\"Warning either enter the following commands\\n\");\n\n    }\n    else\n    {\n        printf(\"Welcome\\n\");\n        //function..\n    }\n    return 0;   \n}\n</code></pre>\n\n<p>Also i am new to C and i am experimenting i'm not sure if that is the proper way to implement this feature.</p>\n"}, {"tags": ["c", "encryption"], "comments": [{"owner": {"reputation": 1542, "user_id": 2460285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d32aaf4649b4c7d09710656264eb32?s=128&d=identicon&r=PG", "display_name": "zindorsky", "link": "https://stackoverflow.com/users/2460285/zindorsky"}, "edited": false, "score": 0, "creation_date": 1454516855, "post_id": 35182334, "comment_id": 58081829, "body": "This probably belongs in Cryptography."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1454517158, "post_id": 35182334, "comment_id": 58082051, "body": "Use <a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security\" rel=\"nofollow noreferrer\">TLS</a> to encrypt your traffic. But you shouldn&#39;t encrypt passwords at all. Instead, hash them with a secure password hashing algorithm such as <a href=\"https://en.wikipedia.org/wiki/Bcrypt\" rel=\"nofollow noreferrer\">bcrypt</a>."}], "answers": [{"tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": false, "score": 1, "last_activity_date": 1454517329, "last_edit_date": 1454517329, "creation_date": 1454516868, "answer_id": 35182444, "question_id": 35182334, "link": "https://stackoverflow.com/questions/35182334/data-encryption-in-c-server/35182444#35182444", "title": "Data Encryption in C Server", "body": "<p>You will have few issues to solve before you tackle that:</p>\n\n<p>You want to encrypt the data possibly with a symmetric cipher such as AES (you will need to find a library which implements AES in C), and also find out about encryption modes such as CBC etc.</p>\n\n<p>But then comes the question what key will you use with cipher to encrypt your data? So you have arrived at a different issue called key management. The most trivial - and if it is fine in your scenario- could be having a  key stored on the server (this approach is called key pre-distribution) which also the client knows. Anyway, there are many ways to do key management. You would have to read on that too.</p>\n\n<hr>\n\n<p>PS. it is also true that normally you don't encrypt passwords rather - store their hashes. But I answered you anyway in case you may want to encrypt some other information.</p>\n"}], "owner": {"reputation": 7, "user_id": 5535232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a02f1d83405038ef98860c5bdc0eb98?s=128&d=identicon&r=PG&f=1", "display_name": "Winner Inc", "link": "https://stackoverflow.com/users/5535232/winner-inc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1454556080, "answer_count": 1, "score": 0, "last_activity_date": 1454517329, "creation_date": 1454516599, "question_id": 35182334, "link": "https://stackoverflow.com/questions/35182334/data-encryption-in-c-server", "closed_reason": "Needs more focus", "title": "Data Encryption in C Server", "body": "<p>I am making a relatively simple file transfer server in C.  This server is being developed through the lens of network security.  I know C is an inherently insecure language due to lack of bounds checks (and other problems); however I know it is possible to make data at least somewhat secure in C.<br>\nMy exact problem is that, the client side will send a password to the server for their folder; however, I would like this password to be encrypted (it isn't as important for the other information, but I might encrypt that too).  What is a good way to encrypt/decrypt a string being sent over a network, in C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1454516485, "post_id": 35182264, "comment_id": 58081506, "body": "You don&#39;t need to pass the address of an array, the array name is already the address."}, {"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "edited": false, "score": 2, "creation_date": 1454516628, "post_id": 35182264, "comment_id": 58081629, "body": "Please indent your code properly."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1454516731, "post_id": 35182264, "comment_id": 58081723, "body": "Do you want a matrix of ints or a matrix of pointers to ints?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1454516794, "post_id": 35182264, "comment_id": 58081780, "body": "<code>N</code> and <code>M</code> are not global , therefore not visible in function . Pass them to function from calling function ."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5429869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7b3aa986dd33bc4bf0d8141116b4212?s=128&d=identicon&r=PG&f=1", "display_name": "drt", "link": "https://stackoverflow.com/users/5429869/drt"}, "edited": false, "score": 0, "creation_date": 1454518472, "post_id": 35182412, "comment_id": 58083060, "body": "Thank you very much! This is an exercise in using and understanding pointers however from my book so I would like to use them. Do you know how that would be done?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 11, "user_id": 5429869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7b3aa986dd33bc4bf0d8141116b4212?s=128&d=identicon&r=PG&f=1", "display_name": "drt", "link": "https://stackoverflow.com/users/5429869/drt"}, "edited": false, "score": 0, "creation_date": 1454518733, "post_id": 35182412, "comment_id": 58083260, "body": "Yes of course I know. But why doesn&#39;t your book help?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 5, "last_activity_date": 1454516809, "creation_date": 1454516809, "answer_id": 35182412, "question_id": 35182264, "link": "https://stackoverflow.com/questions/35182264/beginner-c-code-trouble-with-two-dimensional-array/35182412#35182412", "title": "beginner c code- trouble with two dimensional array", "body": "<p>You have a few mistakes in your code, the most important is that you don't need to pass the address of the array, and if you do so you should handle it correctly in the <code>print_matrix()</code> function.</p>\n\n<p>The following code fixes all the issues</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define SIZE 10\nint print_matrix(int N, int M, int matrix[N][M]);\n\nint\nmain(void)\n{\n    int N = rand() % SIZE;\n    int M = rand() % SIZE;\n    int matrix[N][M];\n    int n;\n    int m;\n\n    for (n = 0 ; n &lt; N ; n++)\n    {\n        for (m = 0 ; m &lt; M ; m++)\n            matrix[n][m]= rand() % 20 + (-10);\n    }\n    print_matrix(N, M, matrix);\n    return 0;\n}\n\nint\nprint_matrix(int N, int M, int matrix[N][M])\n{\n    int m;\n    int n;\n    for (n = 0 ; n &lt; N ; n++)\n    {\n        for (m = 0 ; m &lt; M ; m++)\n            printf(\"%5d \", matrix[n][m]);\n        fputc('\\n', stdout);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I now explain what I fixed</p>\n\n<ol>\n<li>Pass the number of rows and columns to <code>print_matrix()</code>.</li>\n<li>You had another error when assigning matrix elements, you used upper case <code>N</code> and <code>M</code>, hence you were always accessing the element after the last in the array.</li>\n<li>Remove the <code>&amp;</code> and the <code>*</code> from the function call and it's defenition respectively, the array is automatically converted to a pointer when it's the argument of a function, try <code>sizeof(matrix)</code> and you can verify that it's the same as <code>sizeof(void *)</code>.</li>\n</ol>\n\n<p>You can do this</p>\n\n<pre><code>int\nprint_matrix(int N, int M, int matrix[N][M])\n</code></pre>\n\n<p>because you also can do this</p>\n\n<pre><code>int N = rand() % SIZE;\nint M = rand() % SIZE;\nint matrix[N][M];\n</code></pre>\n\n<p>and viceversa.</p>\n"}], "owner": {"reputation": 11, "user_id": 5429869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7b3aa986dd33bc4bf0d8141116b4212?s=128&d=identicon&r=PG&f=1", "display_name": "drt", "link": "https://stackoverflow.com/users/5429869/drt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454519758, "creation_date": 1454516447, "last_edit_date": 1454519758, "question_id": 35182264, "link": "https://stackoverflow.com/questions/35182264/beginner-c-code-trouble-with-two-dimensional-array", "title": "beginner c code- trouble with two dimensional array", "body": "<p>I'm simply trying to print this matrix, and to be honest I have no idea why i'm getting certain compiler errors.I am getting \"formal parameter incomplete\" and both M and N undeclared errors.</p>\n\n<pre><code>int print_matrix(int*[][]);\n\nint main()\n{\n  int N = rand() % 10;\n  int M= rand() % 10;\n  int matrix[N][M];\n  int n; \n  int m;\n\n  for (n=0; n&lt;N; n++)\n  {\n    for (m=0; m&lt;M; m++)\n    {\n      matrix[N][M]= rand()%20 +(-10);\n    }\n  }\n  print_matrix(&amp;matrix);\n\n  return 0;\n}\n\nint print_matrix(int *matrix[N][M])\n{   \n  int m;\n  int n;\n\n  for (n=0; n&lt;N; n++)\n  {\n    for (m=0; m&lt;M; m++)\n    {\n      printf(\"%2d\", matrix[n][m]);\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "matrix-multiplication"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1454516687, "post_id": 35182218, "comment_id": 58081680, "body": "arrays are not first class objects so you shouldn&#39;t just copy what works for <code>int</code> and translate it to an array version. This code is very FOOBAR and very hard to explain thoroughly."}, {"owner": {"reputation": 806, "user_id": 1482201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/536d19e96ddde3c04777185e4e418957?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/1482201/tano"}, "edited": false, "score": 1, "creation_date": 1454518887, "post_id": 35182218, "comment_id": 58083381, "body": "Check for duplicates before asking a question <a href=\"http://stackoverflow.com/questions/14548753/passing-a-multidimensional-variable-length-array-to-a-function\" title=\"passing a multidimensional variable length array to a function\">stackoverflow.com/questions/14548753/&hellip;</a>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1454520840, "post_id": 35182218, "comment_id": 58084718, "body": "@user3528438: I&#39;m not sure what you mean by <i>FOOBAR</i>, maybe FUBAR? But this would be vastly overstated IMHO. The types are wrong and can easily be fixed, the rest is pretty straightforward."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5211920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837bd3bcc819ce4b15df49d6e719ebd4?s=128&d=identicon&r=PG", "display_name": "Subramanian Sridharan", "link": "https://stackoverflow.com/users/5211920/subramanian-sridharan"}, "edited": false, "score": 0, "creation_date": 1454676018, "post_id": 35183484, "comment_id": 58162885, "body": "Thanks a lot! But can you tell me how to make changes  to the array I&#39;m passing from main() without using a pointer parameter?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 87, "user_id": 5211920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837bd3bcc819ce4b15df49d6e719ebd4?s=128&d=identicon&r=PG", "display_name": "Subramanian Sridharan", "link": "https://stackoverflow.com/users/5211920/subramanian-sridharan"}, "edited": false, "score": 0, "creation_date": 1454696732, "post_id": 35183484, "comment_id": 58176450, "body": "@SubramanianSridharan: there is no simple way to avoid passing a pointer parameter, nor is it useful.  Defining the function argument as <code>int arr[10][10]</code> actually tells the compiler that the function receives a pointer to an array of arrays of 10 ints.  It is equivalent to <code>int arr[][10]</code>.  Passing an array of conforming size to the function passes a pointer to its first element. I posted a complete version of the code, check it out."}, {"owner": {"reputation": 87, "user_id": 5211920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837bd3bcc819ce4b15df49d6e719ebd4?s=128&d=identicon&r=PG", "display_name": "Subramanian Sridharan", "link": "https://stackoverflow.com/users/5211920/subramanian-sridharan"}, "edited": false, "score": 0, "creation_date": 1454782884, "post_id": 35183484, "comment_id": 58203307, "body": "Oh thanks! I thought passing the array is similar to passing an integer wherein the changes made to the formal parameters won&#39;t reflect in the actual parameters."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1454696521, "last_edit_date": 1454696521, "creation_date": 1454519624, "answer_id": 35183484, "question_id": 35182218, "link": "https://stackoverflow.com/questions/35182218/warnings-in-matrix-multiplication-using-functions/35183484#35183484", "title": "Warnings in matrix multiplication using functions", "body": "<p>The type <code>int *(arr[10][10])</code> for a function argument is not the same as <code>int arr[10][10]</code>.  Change the prototype this way:</p>\n\n<pre><code>void read_matrix(int arr[10][10], int row, int col)\n</code></pre>\n\n<p>You should not name your function <code>read</code> as it is the name of the Posix system call used by the C library to implement the <code>FILE*</code> stream interface.  Rename it <code>read_matrix</code> and invoke it this way:</p>\n\n<pre><code>printf(\"Enter the elements of matrix A:\\n\");\nread_matrix(a,m,n); //Second error here\nprintf(\"Enter the elements of matrix B:\\n\");\nread_matrix(b,p,q); //Second error here\n</code></pre>\n\n<p>The prototype for the matrix multiplication should be changed similarly to:</p>\n\n<pre><code>void multiply(int arr1[10][10], int row1, int col1,\n              int arr2[10][10], int row2, int col2,\n              int prod[10][10])\n</code></pre>\n\n<p>The confusion stems from the way arrays are passed to functions in C: they are passed as a pointer to their first element.  We say that arrays automatically <em>decay</em> as pointers when used in expressions and passed as function arguments or return values.  <code>multiply</code> should be called this way:</p>\n\n<pre><code>multiply(a, m, n, b, p, q, c);\n</code></pre>\n\n<p>Note that you should use braces <code>{</code> and <code>}</code> for all your <code>for</code> loops whose body has more than one line.  Your omitting them for the outer loops in <code>read</code> and <code>multiply</code> are not strictly incorrect, but error prone and not recommended.</p>\n\n<p>You should also check the return value from <code>scanf()</code> and validate the matrix dimensions.</p>\n\n<p>Here is an improved version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint matrix_read(int arr[10][10], int row, int col) {\n    int i, j;\n\n    for (i = 0; i &lt; row; i++) {\n        for (j = 0; j &lt; col; j++) {\n            if (scanf(\"%d\", &amp;arr[i][j]) != 1)\n                return -1;\n        }\n    }\n    return 0;\n}\n\nint matrix_multiply(int arr1[10][10], int row1, int col1,\n                    int arr2[10][10], int row2, int col2,\n                    int prod[10][10]) {\n    int i, j, k, temp;\n\n    if (col1 != row2)\n        return -1;\n\n    for (i = 0; i &lt; row1; i++) {\n        for (j = 0; j &lt; col2; j++) {\n            temp = 0;\n            for (k = 0; k &lt; col1; k++) {\n                temp += arr1[i][k] * arr2[k][j];\n            }\n            prod[i][j] = temp;\n        }\n    }\n    return 0;\n}\n\nvoid matrix_display(int arr[10][10], int row, int col) {\n    int i, j;\n\n    for (i = 0; i &lt; row; i++) {\n        for (j = 0; j &lt;col; j++) {\n            printf(\"%d\\t\", arr[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n\nint main(void) {\n    int a[10][10], b[10][10], c[10][10], m = 0, n = 0, p = 0, q = 0;\n\n    printf(\"Enter the order of matrix A: \");\n    if (scanf(\"%d %d\", &amp;m, &amp;n) != 2 || m &lt; 1 || m &gt; 10 || n &lt; 1 || n &gt; 10) {\n        printf(\"Invalid matrix size: %d x %d.\\n\", m, n);\n        exit(1);\n    }\n    printf(\"Enter the order of matrix B: \");\n    if (scanf(\"%d %d\", &amp;p, &amp;q) != 2 || p &lt; 1 || p &gt; 10 || q &lt; 1 || q &gt; 10) {\n        printf(\"Invalid matrix size: %d x %d.\\n\", p, q);\n        exit(1);\n    }\n    if (n != p) {\n        printf(\"Matrix multiplication is not possible.\");\n        exit(1);\n    }\n    printf(\"Enter the elements of matrix A:\\n\");\n    if (matrix_read(a, m, n)) {\n        printf(\"Invalid matrix data.\\n\");\n        exit(1);\n    }\n    printf(\"Enter the elements of matrix B:\\n\");\n    if (matrix_read(b, p, q)) {\n        printf(\"Invalid matrix data.\\n\");\n        exit(1);\n    }\n    if (matrix_multiply(a, m, n, b, p, q, c)) {\n        printf(\"Matrix multiplication error.\\n\");\n        exit(1);\n    }\n    printf(\"Matrix A is:\\n\");\n    matrix_display(a, m, n);\n    printf(\"Matrix B is:\\n\");\n    matrix_display(b, p, q);\n    printf(\"Product matrix is:\\n\");\n    matrix_display(c, m, q);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5211920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/837bd3bcc819ce4b15df49d6e719ebd4?s=128&d=identicon&r=PG", "display_name": "Subramanian Sridharan", "link": "https://stackoverflow.com/users/5211920/subramanian-sridharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 35183484, "answer_count": 1, "score": 2, "last_activity_date": 1454696521, "creation_date": 1454516341, "last_edit_date": 1454520704, "question_id": 35182218, "link": "https://stackoverflow.com/questions/35182218/warnings-in-matrix-multiplication-using-functions", "title": "Warnings in matrix multiplication using functions", "body": "<p>I'm getting three errors:</p>\n\n<ol>\n<li>Assignment makes integer from pointer without a cast</li>\n<li>Passing argument 1 of <code>read</code> from incompatible pointer type</li>\n<li>Expected <code>int * (*)[10]</code> but argument is of type <code>int (*)[10][10]</code></li>\n</ol>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid read(int *(arr[10][10]), int row, int col) { //Third error here\n    int i, j;\n    for (i = 0; i &lt; row; i++)\n        for (j = 0; j &lt; col; j++)\n            scanf(\"%d\", &amp;arr[i][j]);\n}\nvoid multiply(int arr1[10][10], int row1, int col1,\n              int arr2[10][10], int row2, int col2,\n              int *prod[10][10]) { //Third error here\n    int i, j, k, temp;\n    for (i = 0; i &lt; row1; i++)\n        for (j = 0; j &lt; col2; j++) {\n            temp = 0;\n            for (k = 0; k &lt; col1; k++)\n                temp += arr1[i][k] * arr2[k][j];\n            prod[i][j] = temp; //First error here\n        }\n}\nvoid display(int arr[10][10], int row, int col) {\n    int i, j;\n    for (i = 0; i &lt; row; i++) {\n        for (j = 0; j &lt;col; j++)\n            printf(\"%d\\t\",arr[i][j]);\n        printf(\"\\n\");\n    }\n}\nint main() {\n    int a[10][10], b[10][10], c[10][10], m, n, p, q, i, j, k;\n    printf(\"Enter the order of matrix A:\");\n    scanf(\"%d %d\", &amp;m, &amp;n);\n    printf(\"Enter the order of matrix B:\");\n    scanf(\"%d %d\", &amp;p, &amp;q);\n    if (n != p) {\n        printf(\"Matrix multiplication is not possible.\");\n        exit(0);\n    }\n    printf(\"Enter the elements of matrix A:\\n\");\n    read(&amp;a, m, n); //Second error here\n    printf(\"Enter the elements of matrix B:\\n\");\n    read(&amp;b, p, q); //Second error here\n    multiply(a, m, n, b, p, q, &amp;c);\n    printf(\"Matrix A is:\\n\");\n    display(a, m, n);\n    printf(\"Matrix B is:\\n\");\n    display(b, p, q);\n    printf(\"Product matrix is:\\n\");\n    display(c, m, q);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sandbox", "ptrace", "seccomp"], "answers": [{"tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 0, "last_activity_date": 1454529219, "creation_date": 1454529219, "answer_id": 35186416, "question_id": 35182056, "link": "https://stackoverflow.com/questions/35182056/seccomp-how-to-handle-ptrace-events/35186416#35186416", "title": "seccomp how to handle ptrace events", "body": "<p>You need to have a separate program which traces the inferior. This tracer shall call</p>\n\n<pre><code>    ptrace(PTRACE_SETOPTIONS, tracee_pid, 0, PTRACE_O_TRACESECCOMP);\n</code></pre>\n\n<p>to request notifications, and call</p>\n\n<pre><code>    waitpid(tracee_pid, &amp;status, __WALL);\n</code></pre>\n\n<p>to be notified. When <code>waitpid</code> returns, analyze <code>status</code>, and retrieve notification via</p>\n\n<pre><code>    unsigned long data;\n    ptrace(PTRACE_GETEVENTMSG, tracee_pid, 0, &amp;data);\n</code></pre>\n"}], "owner": {"reputation": 1497, "user_id": 4843379, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a3681737b6e2ecc037c83474eed2309c?s=128&d=identicon&r=PG&f=1", "display_name": "incompetent", "link": "https://stackoverflow.com/users/4843379/incompetent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1454529219, "creation_date": 1454515924, "question_id": 35182056, "link": "https://stackoverflow.com/questions/35182056/seccomp-how-to-handle-ptrace-events", "title": "seccomp how to handle ptrace events", "body": "<p>I am using <code>seccomp</code> filters to restrict system calls made by a process. Up to using whitelist of system calls to allow and disallow system call is understandable. I stuck on concept of <code>ptrace</code> events generated by <code>seccomp</code> rules. For example I can disallow <code>open</code> but I want to generate <code>ptrace</code> event on <code>open</code> system call so that I can determine whether process can open that file or not. My specific question is how to catch ptrace event generated by seccomp? Any help or reference will be a great blessing. </p>\n\n<p>I googled in my humble capacity but did not find any help and running example. </p>\n"}, {"tags": ["c", "string", "pointers", "strtok"], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 1927609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4qWkg.png?s=128&g=1", "display_name": "fakedad", "link": "https://stackoverflow.com/users/1927609/fakedad"}, "edited": false, "score": 0, "creation_date": 1569132059, "post_id": 35181970, "comment_id": 102492312, "body": "What systems normally support <code>upstr</code>? The <a href=\"https://manpages.debian.org/testing/alliance/upstr.3.en.html\" rel=\"nofollow noreferrer\">Debian manpage</a> for <code>upstr</code> says that it is from the &quot;Alliance CAD System.&quot;"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 18, "last_activity_date": 1454516529, "last_edit_date": 1454516529, "creation_date": 1454515691, "answer_id": 35181970, "question_id": 35181913, "link": "https://stackoverflow.com/questions/35181913/converting-char-to-uppercase-in-c/35181970#35181970", "title": "Converting Char * to Uppercase in C", "body": "<p><code>toupper()</code> converts a single <code>char</code>.</p>\n\n<p>Simply use a loop:</p>\n\n<pre><code>void func(char * temp) {\n  char * name;\n  name = strtok(temp,\":\");\n\n  // Convert to upper case\n  char *s = name;\n  while (*s) {\n    *s = toupper((unsigned char) *s);\n    s++;\n  }\n\n}\n</code></pre>\n\n<p>Detail:  The standard Library function <code>toupper(int)</code> is defined for all <code>unsigned char</code> and <code>EOF</code>.  Since <code>char</code> may be signed, convert to <code>unsigned char</code>.</p>\n\n<p>Some OS's support a function call that does this: <a href=\"http://linux.die.net/man/3/upstr\" rel=\"noreferrer\"><code>upstr()</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/ms235331.aspx\" rel=\"noreferrer\"><code>strupr()</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1454600953, "post_id": 35181981, "comment_id": 58126490, "body": "Maybe I will delete this answer, as it does not add value, but what&#39;s the reason for DV?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1454515726, "creation_date": 1454515726, "answer_id": 35181981, "question_id": 35181913, "link": "https://stackoverflow.com/questions/35181913/converting-char-to-uppercase-in-c/35181981#35181981", "title": "Converting Char * to Uppercase in C", "body": "<p><a href=\"http://linux.die.net/man/3/toupper\" rel=\"nofollow\"><code>toupper()</code></a> works on one element (<code>int</code> argument, value ranging the same as of <code>unsigned char</code> or EOF) at a time. </p>\n\n<p>Prototype:</p>\n\n<blockquote>\n  <p><code>int toupper(int c);</code></p>\n</blockquote>\n\n<p>You need to use a loop to supply one element at a time from your <em>string</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 6, "creation_date": 1454515843, "post_id": 35181983, "comment_id": 58080995, "body": "<code>strupr</code> is not standard. As far as I know it&#39;s only supported by Microsoft&#39;s library."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1454515942, "post_id": 35181983, "comment_id": 58081071, "body": "@interjay:  it is supported also by Greenhills and Borland.  But you are right, it is not in glibc."}], "tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 5, "last_activity_date": 1454515728, "creation_date": 1454515728, "answer_id": 35181983, "question_id": 35181913, "link": "https://stackoverflow.com/questions/35181913/converting-char-to-uppercase-in-c/35181983#35181983", "title": "Converting Char * to Uppercase in C", "body": "<p><code>toupper()</code> works only on a single character.  But there is <code>strupr()</code> which is what you want for a pointer to a string.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1559657916, "post_id": 54942441, "comment_id": 99485064, "body": "Curious, why use type <code>unsigned long int s_len</code> vs. <code>unsigned s_len</code> or even better <code>size_t s_len</code>?  Seems odd to use <code>unsigned long s_len</code> and <code>int a</code> in <code>a &lt; s_len</code>.  I&#39;d expect the variables to be the same type."}, {"owner": {"reputation": 301, "user_id": 9836333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAPXR.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9836333/mike"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1560286547, "post_id": 54942441, "comment_id": 99684792, "body": "Honestly I&#39;m new to C and programming in general, so it is quite probable that the variable types are not the best ones."}], "tags": [], "owner": {"reputation": 301, "user_id": 9836333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bAPXR.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9836333/mike"}, "is_accepted": false, "score": 2, "last_activity_date": 1551435305, "creation_date": 1551435305, "answer_id": 54942441, "question_id": 35181913, "link": "https://stackoverflow.com/questions/35181913/converting-char-to-uppercase-in-c/54942441#54942441", "title": "Converting Char * to Uppercase in C", "body": "<p>For those of you who want to uppercase a string <strong>and store it</strong> in a variable (that was what I was looking for when I read these answers).  </p>\n\n<pre><code>#include &lt;stdio.h&gt;  //&lt;-- You need this to use printf.\n#include &lt;string.h&gt;  //&lt;-- You need this to use string and strlen() function.\n#include &lt;ctype.h&gt;  //&lt;-- You need this to use toupper() function.\n\nint main(void)\n{\n    string s = \"I want to cast this\";  //&lt;-- Or you can ask to the user for a string.\n\n    unsigned long int s_len = strlen(s); //&lt;-- getting the length of 's'.  \n\n    //Defining an array of the same length as 's' to, temporarily, store the case change.\n    char s_up[s_len]; \n\n    // Iterate over the source string (i.e. s) and cast the case changing.\n    for (int a = 0; a &lt; s_len; a++)\n    {\n        // Storing the change: Use the temp array while casting to uppercase.  \n        s_up[a] = toupper(s[a]); \n    }\n\n    // Assign the new array to your first variable name if you want to use the same as at the beginning\n    s = s_up;\n\n    printf(\"%s \\n\", s_up);  //&lt;-- If you want to see the change made.\n}\n</code></pre>\n\n<p><strong>Note:</strong> If you want to lowercase a string instead, change <code>toupper(s[a])</code> to <code>tolower(s[a])</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 1130000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554838f16f4b75fdc671c2da71617885?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Pedro Nascimento", "link": "https://stackoverflow.com/users/1130000/jo%c3%a3o-pedro-nascimento"}, "is_accepted": false, "score": 3, "last_activity_date": 1596821349, "creation_date": 1596821349, "answer_id": 63306643, "question_id": 35181913, "link": "https://stackoverflow.com/questions/35181913/converting-char-to-uppercase-in-c/63306643#63306643", "title": "Converting Char * to Uppercase in C", "body": "<p>How about this little function? It assumes ASCII represented chars and modifies string in place.</p>\n<pre><code>void to_upper(char* string)\n{\n    const char OFFSET = 'a' - 'A';\n    while (*string)\n    {\n        *string = (*string &gt;= 'a' &amp;&amp; *string &lt;= 'z') ? *string -= OFFSET : *string;\n        string++;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5878862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19e8965b9270308132b272cec95e6f3?s=128&d=identicon&r=PG&f=1", "display_name": "EDEDE", "link": "https://stackoverflow.com/users/5878862/edede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73840, "favorite_count": 2, "accepted_answer_id": 35181970, "answer_count": 5, "score": 7, "last_activity_date": 1596821349, "creation_date": 1454515549, "question_id": 35181913, "link": "https://stackoverflow.com/questions/35181913/converting-char-to-uppercase-in-c", "title": "Converting Char * to Uppercase in C", "body": "<p>I'm trying to convert a <code>char *</code> to uppercase in c, but the function <code>toupper()</code> doesn't work here.</p>\n\n<p>I'm trying to get the name of the the value of temp, the name being anything before the colon, in this case it's \"Test\", and then I want to capitalize the name fully.</p>\n\n<pre><code>void func(char * temp) {\n // where temp is a char * containing the string \"Test:Case1\"\n char * name;\n\n name = strtok(temp,\":\");\n\n //convert it to uppercase\n\n name = toupper(name); //error here\n\n}\n</code></pre>\n\n<p>I'm getting the error that the function toupper expects an int, but receives a char *. Thing is, I have to use char *'s, since that is what the function is taking in, (I can't really use char arrays here, can I?).</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1454511945, "post_id": 35180528, "comment_id": 58078025, "body": "Please show your research effort till time. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 4, "creation_date": 1454512463, "post_id": 35180528, "comment_id": 58078406, "body": "You probably want to use the litteral <code>&quot;BlahBlah\\x04&quot; &quot;BlahBlah&quot;</code>. The compiler sees this as a single string but the escape sequence stops at <code>4</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1454512482, "post_id": 35180528, "comment_id": 58078420, "body": "&quot;<i>C treats all characters following a &#39;\\x&#39; in a string as hexadecimal numbers</i>&quot; when using which function, operator, whatever? As it stands it&#39;s a &quot;string&quot;-literal and treated as such, and not as a hex-value at all."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1454512883, "post_id": 35180528, "comment_id": 58078738, "body": "@alk He&#39;s obviously referring to a hex escape sequence inside a string literal, which you can see if you read the code in the question."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1454513145, "post_id": 35180861, "comment_id": 58078973, "body": "Upvoted, but I wouldn&#39;t really call it <i>pre-processor</i> at that translation phase."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1454513611, "post_id": 35180861, "comment_id": 58079308, "body": "@user694733 Uuh right, that will get mixed up with <code>##</code> which I believe is formally named &quot;pre-processor concatenation&quot;. I&#39;ll edit."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1454514023, "post_id": 35180861, "comment_id": 58079613, "body": "(For those with a nerdy interest in translation phases, pre-processing is apparently phase 4, hex escape sequences are converted in phase 5, and string literal concatenation is done in phase 6. Which actually explains just why this trick works. See 5.1.1.2 Translation phases. There, I learned something new too!)"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 12, "last_activity_date": 1454513620, "last_edit_date": 1454513620, "creation_date": 1454512662, "answer_id": 35180861, "question_id": 35180528, "link": "https://stackoverflow.com/questions/35180528/limit-the-length-of-a-hexadecimal-escape-sequence-in-a-c-string/35180861#35180861", "title": "Limit the Length of a Hexadecimal Escape Sequence in a C-String", "body": "<p>As you noticed, C is pretty dumb when it comes to hex escape sequences in string literals. Fix it by using string concatenation, like this:</p>\n\n<pre><code>\"BlahBlah\\x04\" \"BlahBlah\"\n</code></pre>\n\n<p>It is good practice to never have any trailing characters behind such a hex escape sequence. Always end the string as in this example.</p>\n"}], "owner": {"reputation": 767, "user_id": 4694206, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/701006f9bb2efc54349e1bce7b21ea0a?s=128&d=identicon&r=PG&f=1", "display_name": "wahab", "link": "https://stackoverflow.com/users/4694206/wahab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 1, "closed_date": 1502368995, "accepted_answer_id": 35180861, "answer_count": 1, "score": 10, "last_activity_date": 1458011383, "creation_date": 1454511830, "last_edit_date": 1454514699, "question_id": 35180528, "link": "https://stackoverflow.com/questions/35180528/limit-the-length-of-a-hexadecimal-escape-sequence-in-a-c-string", "closed_reason": "Duplicate", "title": "Limit the Length of a Hexadecimal Escape Sequence in a C-String", "body": "<p>In a string literal, how can I follow a hexadecimal escape sequence immediately with a literal character that can be interpreted as a hexadecimal digit?  For example, if I write this literal ...</p>\n\n<pre><code>\"BlahBlah\\x04BlahBlah\"\n</code></pre>\n\n<p>... the <code>'B'</code> immediately following the <code>'4'</code> will be interpreted as part of the hexadecimal escape, because it is a valid hexadecimal digit.  </p>\n\n<blockquote>\n  <p>How can I write a string literal that represents the string that the above would represent if the <code>'4'</code> were taken as the last character of the hex escape?</p>\n</blockquote>\n"}, {"tags": ["c", "encryption", "segmentation-fault"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1454512235, "post_id": 35180482, "comment_id": 58078244, "body": "Passing uninitialized vvariable to <code>strncpy()</code> and <code>strcat()</code> is a bad idea. It seems you also have other problems."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454512283, "post_id": 35180482, "comment_id": 58078270, "body": "The problem is inifinite recursion because you always call <code>encrypt(left, k);</code> in function <code>encrypt</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": true, "score": 4, "last_activity_date": 1454514378, "last_edit_date": 1454514378, "creation_date": 1454512041, "answer_id": 35180621, "question_id": 35180482, "link": "https://stackoverflow.com/questions/35180482/c-segmentation-fault-on-simple-encryption-code/35180621#35180621", "title": "C Segmentation Fault on simple encryption code", "body": "<p>The <code>strncpy</code> takes a buffer as the first parameter, where to copy the data to. In your case you pass to it an uninitialized pointer instead:</p>\n\n<pre><code>char *left = strncpy(left, str, k);\n</code></pre>\n\n<p>The correct would be something like:</p>\n\n<pre><code>char left[SOME_SIZE];\nstrncpy(left, str, size); //size should not be greater than SOME_SIZE\n</code></pre>\n\n<p>And the same with <code>right</code> variable. Reference: <a href=\"http://linux.die.net/man/3/strncpy\" rel=\"nofollow\">strncpy</a></p>\n"}], "owner": {"reputation": 141, "user_id": 5870497, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/UVDZd.jpg?s=128&g=1", "display_name": "s.gang", "link": "https://stackoverflow.com/users/5870497/s-gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 35180621, "answer_count": 1, "score": 0, "last_activity_date": 1454514378, "creation_date": 1454511731, "question_id": 35180482, "link": "https://stackoverflow.com/questions/35180482/c-segmentation-fault-on-simple-encryption-code", "title": "C Segmentation Fault on simple encryption code", "body": "<p>I'm working on making an encryption code for class which continually splits a string down in half until there are only 1 or 2 chars left, in which you swap with the split chars to its right. However when i run the code I continually get this error:</p>\n\n<pre><code>INPUT A PHRASE: 1234\nLENGTH: 4\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Below is my source code, if anyone could help me resolve this issue it'd be greatly appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid encrypt(char *str, int size);\n\nint main(){\n    char input[8192];\n    int length;\n\n    printf(\"INPUT A PHRASE: \");\n    fgets(input, 8192, stdin);\n    length = strlen(input) -1;\n    printf(\"LENGTH: %d\\n\", length);\n\n    encrypt(input, length);\n    printf(\"ENCRYPTION: %s\\n\", input);  \n    return 0;\n}\n\nvoid encrypt(char str[], int size){\n\n    char *final;\n\n    int i;\n    int k = size / 2;\n\n    char *left = strncpy(left, str, k);\n    encrypt(left, k);\n\n    char *right = strncpy(right, str + k, size - k);\n    encrypt(right, size - k);\n\n    if(size &lt;= 2 &amp;&amp; size &gt; 0){\n        final = strcat(final, right);\n        final = strcat(final, left);\n        return;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "void-pointers", "dereference"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454511764, "post_id": 35180437, "comment_id": 58077889, "body": "What is the definition of <code>inode</code>?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1454511875, "post_id": 35180437, "comment_id": 58077969, "body": "<code>inode-&gt;i_private = info;</code> why do you assign after kmallo()? You may want a &quot;deep&quot; copy here (memcpy)"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454511958, "post_id": 35180437, "comment_id": 58078036, "body": "@MikeCAT, <a href=\"http://lxr.free-electrons.com/source/include/linux/fs.h\" rel=\"nofollow noreferrer\"><code>struct inode *</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1454515264, "post_id": 35180535, "comment_id": 58080581, "body": "It would be more readable to use a local pointer variable though: <code>struct osffs_inode_private_info *pinfo = inode-&gt;i_private;</code> and <code>strncpy(pinfo-&gt;name, &quot;private succ&quot;, OSFFS_MAX_NAME_LEN);</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1454515428, "post_id": 35180535, "comment_id": 58080705, "body": "@IanAbbott Right, you certainly can. I think once we change to <code>info = inode-&gt;i_private;</code> in the code, rest part is pretty straight. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1454515399, "last_edit_date": 1454515399, "creation_date": 1454511838, "answer_id": 35180535, "question_id": 35180437, "link": "https://stackoverflow.com/questions/35180437/dereferencing-void-pointer-when-using-struct/35180535#35180535", "title": "Dereferencing &#39;void *&#39; pointer when using struct", "body": "<p>First of all, in your code</p>\n\n<pre><code>inode-&gt;i_private = kzalloc(sizeof(struct osffs_inode_private_info), GFP_KERNEL);\ninode-&gt;i_private = info;\n</code></pre>\n\n<p>you're leaking memory. In the later statement, you're overwriting the previous pointer in <code>inode-&gt;i_private</code> by assigning <em>to</em> it.</p>\n\n<p>maybe you wanted to do</p>\n\n<pre><code>info = inode-&gt;i_private;\n</code></pre>\n\n<p>That said, the issue in the question is with the said usage of <code>i_private</code>. This being a <code>void</code> pointer, cannot be dereferenced.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.5.2.3, <em>Structure and union members</em></p>\n\n<blockquote>\n  <p>The first operand of the <code>-&gt;</code> operator shall have type \u2018\u2018pointer to atomic, qualified, or\n  unqualified structure\u2019\u2019 or \u2018\u2018pointer to atomic, qualified, or unqualified union\u2019\u2019,[...]</p>\n</blockquote>\n\n<p>That's why, you have to cast the <code>void *</code> to the pointer-to-required-type to make that eligible to be used as the left-operand for member access operator (<code>-&gt;</code>).</p>\n\n<p>You need to use something like</p>\n\n<pre><code> strncpy( ((struct osffs_inode_private_info *)(inode-&gt;i_private))-&gt;name, \n           \"private succ\", \n            OSFFS_MAX_NAME_LEN);\n</code></pre>\n"}], "owner": {"reputation": 2375, "user_id": 2745116, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6e52cda3e0dccbd57c3020a3e6cecfa?s=128&d=identicon&r=PG&f=1", "display_name": "CGFoX", "link": "https://stackoverflow.com/users/2745116/cgfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 1, "accepted_answer_id": 35180535, "answer_count": 1, "score": 0, "last_activity_date": 1454515399, "creation_date": 1454511621, "last_edit_date": 1454512424, "question_id": 35180437, "link": "https://stackoverflow.com/questions/35180437/dereferencing-void-pointer-when-using-struct", "title": "Dereferencing &#39;void *&#39; pointer when using struct", "body": "<p>I'm trying to make use of <a href=\"http://lxr.free-electrons.com/source/fs/inode.c\" rel=\"nofollow\">inode</a>'s i_private and store a struct with name and block number in it:</p>\n\n<pre><code>struct osffs_inode_private_info* info;\ninode-&gt;i_private = kzalloc(sizeof(struct osffs_inode_private_info), GFP_KERNEL);\ninode-&gt;i_private = info;\nstrncpy(inode-&gt;i_private-&gt;name, \"private succ\", OSFFS_MAX_NAME_LEN);\n</code></pre>\n\n<p>Where the struct is defined as follows:</p>\n\n<pre><code>struct osffs_inode_private_info {\n    char name[OSFFS_MAX_NAME_LEN];\n    __be64 block;\n};\n</code></pre>\n\n<p>When I try to compile, I get a warning that I am </p>\n\n<blockquote>\n  <p>\"dereferencing a 'void *' pointer\" </p>\n</blockquote>\n\n<p>and an error </p>\n\n<blockquote>\n  <p>\"request for member \u2018name\u2019 in something not a structure or union\" </p>\n</blockquote>\n\n<p>in the line where I do the <code>strncpy()</code>.</p>\n\n<p>I know there are many threads/questions about dereferencing a void pointer and it seems like I just have to do a cast or such. But unfortunately, I don't know how to apply that to my problem.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1454510310, "post_id": 35179924, "comment_id": 58076840, "body": "Print <code>index</code> and <code>i</code> to the screen, does it reach 50? does it go beyond 50?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1454510347, "post_id": 35179924, "comment_id": 58076874, "body": "Are you sure the code does not index <code>primes</code> by any index <code>&gt;49</code>? <code>primes[49]</code> accesses the 50th element. Indexing C arrays is <code>0</code>-based."}, {"owner": {"reputation": 53, "user_id": 5878335, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1bd1ad287df5ef85c9e3b83475e845e4?s=128&d=identicon&r=PG&f=1", "display_name": "Junchoon", "link": "https://stackoverflow.com/users/5878335/junchoon"}, "edited": false, "score": 0, "creation_date": 1454510433, "post_id": 35179924, "comment_id": 58076939, "body": "testing in gdb: index = 1128, why?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1454510639, "post_id": 35179924, "comment_id": 58077102, "body": "&quot;Why?&quot; not check yourself first? Why not single step in the debugger?"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 7, "last_activity_date": 1454510419, "creation_date": 1454510419, "answer_id": 35179987, "question_id": 35179924, "link": "https://stackoverflow.com/questions/35179924/c-language-segmentation-fault/35179987#35179987", "title": "C language: Segmentation Fault", "body": "<p>You have an inifinite loop because this</p>\n\n<pre><code>for (p = 5 ; p &lt;= 50 ; p + 2)\n                   //    ^ has no effect\n</code></pre>\n\n<p>you mean</p>\n\n<pre><code>for (p = 5 ; p &lt;= 50 ; p += 2)\n</code></pre>\n\n<ul>\n<li><p>How did I find this so quickly?</p>\n\n<p>The fact is I did without reading the code, just copied it and pasted it in my favourite text editor, and then compiled it with <code>-Wall</code>, the compiler then told me</p>\n\n<pre><code>stack-overflow.c:129:5: warning: statement with no effect [-Wunused-value]\n     for (p = 5 ; p &lt;=50 ; p + 2)\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1454510566, "post_id": 35180004, "comment_id": 58077041, "body": "Not necessarily, <code>p</code> is not used as an index there."}], "tags": [], "owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "is_accepted": false, "score": -3, "last_activity_date": 1454510460, "creation_date": 1454510460, "answer_id": 35180004, "question_id": 35179924, "link": "https://stackoverflow.com/questions/35179924/c-language-segmentation-fault/35180004#35180004", "title": "C language: Segmentation Fault", "body": "<p>in writing <code>p &lt;=50;</code>, you will access <code>primes[50]</code>, and that index is out of bounds.</p>\n\n<p>primes[49] is the last element.</p>\n\n<p>And you need p+=2 in your loop as your increment, else it will never terminate.</p>\n"}], "owner": {"reputation": 53, "user_id": 5878335, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1bd1ad287df5ef85c9e3b83475e845e4?s=128&d=identicon&r=PG&f=1", "display_name": "Junchoon", "link": "https://stackoverflow.com/users/5878335/junchoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1454510460, "creation_date": 1454510239, "question_id": 35179924, "link": "https://stackoverflow.com/questions/35179924/c-language-segmentation-fault", "title": "C language: Segmentation Fault", "body": "<p>For testing, I composed a code to calculate the prime number&lt;50. But I got the Segmentation Fault. And I checked the code by gdb and it shows \"primes [index] = p;\" is wrong. But I really don't know why and how to fix it, please help me. Many thanks.</p>\n\n<p>OS:Ubuntu 14.04</p>\n\n<p>Kernel:3.19.0-33-generic</p>\n\n<p>Compiler: GCC 4.84</p>\n\n<pre><code>    #include  &lt;stdio.h&gt;\n    #include &lt;stdbool.h&gt;\n\n    int main(void)\n    {\n     int   p, i, primes[50], index;\n     bool isprime;\n\n     primes[0] = 2;\n     primes[1] = 3;\n     index = 2;\n\n     for (p = 5; p &lt;=50; p+2)\n     {\n         isprime = true;\n         for (i = 0; isprime &amp;&amp; ((p/primes[i]) &gt;= primes[i]); i=i+1)\n         {\n             if (p%primes[i] == 0)\n                 isprime = false;\n         }\n\n         if  (isprime == true)\n         {\n             primes [index] = p;\n             index = index +1;\n         }\n     }\n     printf (\"\\n\");\n     for (i = 0; i &lt;index; i=i+1)\n     {\n         printf(\"%i  \", primes[i]);\n     }\n\n     return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "stack", "postfix-notation", "infix-notation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1454508763, "post_id": 35179279, "comment_id": 58075604, "body": "You are never initializing the stack <code>T</code> before trying to push to it."}, {"owner": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "edited": false, "score": 0, "creation_date": 1454508778, "post_id": 35179279, "comment_id": 58075613, "body": "It means that one of your pointers is invalid at the time of call. You need to allocate memory for your stack."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1454508815, "post_id": 35179279, "comment_id": 58075642, "body": "Please see how to create <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We don&#39;t need to see all this code. You could for example use hard coded input; currently we don&#39;t know what input you are using."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1454509244, "post_id": 35179279, "comment_id": 58076001, "body": "Start by compiling with all warnings enabled."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1454509449, "post_id": 35179279, "comment_id": 58076154, "body": "...and run it with your favorite debugger which will tell you <i>where</i> the crash occurs."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1454509865, "post_id": 35179279, "comment_id": 58076482, "body": "You never initialize the <code>T</code> declared here <code>struct stack2 T</code>. Espectially <code>T.pointer</code> contains garbage. But  the way your code is written suggests that there are many other issues."}, {"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1454510439, "post_id": 35179279, "comment_id": 58076943, "body": "Another issue is, in the inner while loop of <code>while (output[y] != &#39; &#39;)</code> you are not taking into the fact that y can go outside of the string, so better check like for instance <code>while (output[y] != &#39; &#39; &amp;&amp; output[y]!= &#39;\\0&#39;) &#47;&#47; CHECK FOR END OF THE STRING</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 0, "last_activity_date": 1454509283, "creation_date": 1454509283, "answer_id": 35179597, "question_id": 35179279, "link": "https://stackoverflow.com/questions/35179279/segmentation-fault-in-c-infix-to-postfix-evaluation/35179597#35179597", "title": "Segmentation Fault in C: Infix to Postfix Evaluation", "body": "<p>After you define ptr2 (and any other stack pointer), use malloc to set it up properly. Also keep a pointer to the top of the stack so that when you pop, you do an error check to ensure that you have not popped too far. and so that you can free it properly when you no longer need it.</p>\n"}], "owner": {"reputation": 160, "user_id": 5731841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NSoa0.jpg?s=128&g=1", "display_name": "sigma", "link": "https://stackoverflow.com/users/5731841/sigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454509283, "creation_date": 1454508429, "question_id": 35179279, "link": "https://stackoverflow.com/questions/35179279/segmentation-fault-in-c-infix-to-postfix-evaluation", "title": "Segmentation Fault in C: Infix to Postfix Evaluation", "body": "<p>I have written a program which converts expressions from arithmetic infix notation to postfix. There is no issue with this part of the program. After the conversion, the program should evaluate the expression and give a numeric answer by use of a stack. </p>\n\n<p>The issue arises in line 232 when refering to <code>push2</code>, which gives a segmentation fault (SIGSEGV). </p>\n\n<p>How can I resolve this?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAX 100 // maximum number of input characters\n\nbool open_close(char opening, char closing);\nbool check_balanced_par(char * exp, int length);\n\nstruct stack\n{\n    char my_stack[MAX];\n    int pointer;\n};\n\nstruct stack2\n{\n    float my_stack[MAX];\n    int pointer;\n};\n\nint precedence(char x);\nvoid push(struct stack *S, char *x);\nchar pop(struct stack *S);\nvoid push2(struct stack2 *S, float *x);\nchar pop2(struct stack2 *S);\n\nint precedence(char x)\n{\n    if(x == '#')\n        return 0;\n    if(x == '(')\n        return 1;\n    if(x == '+' || x == '-')\n        return 2;\n    if(x == '*' || x == '/')\n        return 3;\n    else\n        return 4;\n}\n\nvoid push(struct stack *S, char *x)\n{\n    S-&gt;pointer++;\n    S-&gt;my_stack[S-&gt;pointer] = *x;\n}\n\nchar pop(struct stack *S)\n{\n    char data = S-&gt;my_stack[S-&gt;pointer];\n    S-&gt;pointer--;\n    return data;\n}\n\nvoid push2(struct stack2 *S, float *x)\n{\n    S-&gt;pointer++;\n    S-&gt;my_stack[S-&gt;pointer] = *x;\n}\n\nchar pop2(struct stack2 *S)\n{\n    char data = S-&gt;my_stack[S-&gt;pointer];\n    S-&gt;pointer--;\n    return data;\n}\n\n// checks to see if ()/[]/{} is the case\nbool open_close(char opening, char closing)\n{\n    if (opening == '(' &amp;&amp; closing == ')') return true;\n    if (opening == '{' &amp;&amp; closing == '}') return true;\n    if (opening == '[' &amp;&amp; closing == ']') return true;\n    return false;\n}\n\nbool check_balanced_par(char * exp, int length)\n{\n    struct stack S;\n    S.pointer = 0;\n    int i;\n    for(i=0; i&lt;length; i++)\n    {\n        if (exp[i] == '(' || exp[i] == '{' || exp[i] == '[')\n        {\n            S.pointer = S.pointer +1;\n            S.my_stack[S.pointer] = exp[i];\n        }\n        else if (exp[i] == ')' || exp[i] == '}' || exp[i] == ']')\n        {\n            if(S.pointer == 0 || !open_close(S.my_stack[S.pointer],exp[i]))\n                    return false;\n            else\n                S.pointer = S.pointer-1;\n        }\n        else if (exp[i] == '*' || exp[i] == '/' || exp[i] == '+' || exp[i] == '-' || isdigit(exp[i]))\n        {\n            continue;\n        }\n        else\n            return false; // if input is not as expected\n    }\n    if (S.pointer == 0) // checks if stack is empty\n        return true;\n    else\n        return false;\n}\n\n\nint main(void)\n{\n    char c;\n    int size = 0;\n    char arr[MAX];\n    int o=0; // counter for arr[]\n\n    printf(\"Enter an expression to check:\\n\");\n    fflush(stdout);\n    fgets(arr, MAX, stdin);\n    arr[strlen(arr)-1] = '\\0'; // clears \\n from array\n    while((c=arr[o++]) != '\\0')\n    {\n        size++;\n    }\n\n    if(check_balanced_par(arr, size))\n    {\n        printf(\"Balanced.\\n\");\n        printf(\"Postfix notation is: \");\n\n            struct stack S;\n            struct stack *ptr; // pointer to stack\n            ptr = &amp;S; // setting the pointer\n            S.pointer = -1;\n            int z = 0; // counter to traverse input array\n            char output[MAX]; // stores output\n            int out_count = 0; // stores no. of characters of output\n\n            char x = ' ';\n            char y = '#';\n            push(ptr, &amp;y);\n\n            while('\\0' != arr[z]) // going through the input array and incrementing z everytime\n            {\n                if(isdigit(arr[z])) // if an operand is found print to screen\n                {\n                    output[out_count] = arr[z];\n                    out_count++;\n                }\n                else if(arr[z] == '(') // if ( is found push on stack\n                {\n                    push(ptr, &amp;arr[z]);\n                }\n                else if(arr[z] == ')') // if ) is found pop stack until ( is found\n                {\n                    while(!(S.my_stack[S.pointer] == '('))\n                    {\n                        output[out_count] = pop(ptr);\n                        out_count++;\n                    }\n                    S.pointer--; // pop the extra (\n                }\n                else if(arr[z] == '*' || arr[z] == '/' || arr[z] == '+' || arr[z] == '-')\n                {\n                    push(ptr, &amp;x); // used for correct output layout\n                    while(precedence(S.my_stack[S.pointer]) &gt;= precedence(arr[z]))\n                    {\n                        // pop stack\n                        if(arr[z] == '(' || arr[z] == ')')\n                            continue;\n                        output[out_count] = pop(ptr);\n                        out_count++;\n                    }\n\n                    // push arr[z] on stack\n                    push(ptr, &amp;arr[z]);\n\n                }\n                z++;\n            }\n\n            int j = S.pointer;\n            while(S.my_stack[j] != '#')\n            {\n                if(S.my_stack[j] == '(')\n                    continue;\n                output[out_count] = S.my_stack[j];\n                out_count++;\n                j--;\n            }\n\n            output[out_count] = '\\0';\n            int k=0;\n            while(output[k] != '\\0') // go through output array and print\n            {\n                printf(\"%c\", output[k]);\n                k++;\n            }\n\n            // start evaluating the postfix format [THIS IS WHERE THE ISSUE IS]\n            struct stack2 T;\n            struct stack2 *ptr2; // pointer to stack\n            ptr2 = &amp;T; // setting the pointer\n            int i=0, l, g; // i counter for output[], l counter for nums[]\n            float a,b;\n            float toPush;\n            float *ptr_toPush;\n            char nums[MAX];\n            char operator;\n            float total;\n\n            while(output[i++] != '\\0')\n            {\n                if(isdigit(output[i]))\n                {\n                    l=0;\n                    int y=i;\n                    while(output[y] != ' ') // if character is not a space\n                    {\n                        nums[l] = output[y]; // place character in nums[]\n                        y++;\n                        l++;\n                    }\n                    i=y; // setting the counter for output[] to the character we have reached\n\n                    toPush = atof(nums);\n                    for(g=0; g&lt;k; g++)\n                        nums[g] = '\\0';\n\n                    ptr_toPush = &amp;toPush;\n                    push2(ptr2, ptr_toPush);\n                }\n                else if(output[i] == ' ') // if a space is found continue\n                {\n                    continue;\n                }\n                else // operator \n                {\n                    a = pop(ptr);\n                    b = pop(ptr);\n                    operator = output[i];\n                    switch(operator)\n                    {\n                        case '+':\n                            total = a+b;\n                            push2(ptr2,&amp;total);\n                            break;\n                        case '-':\n                            total = a-b;\n                            push2(ptr2,&amp;total);\n                            break;\n                        case '*':\n                            total = a*b;\n                            push2(ptr2,&amp;total);\n                            break;\n                        case '/':\n                            total = a/b;\n                            push2(ptr2,&amp;total);\n                            break;\n                        default: printf(\"Error.\\n\");\n                    }\n                }\n            }\n            printf(\"Result is: %d\", pop2(ptr2));\n    }\n    else\n        printf(\"Not balanced.\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "makefile"], "comments": [{"owner": {"reputation": 437, "user_id": 3214670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822c3edc7d842c642172f5f9b98ce3b1?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Smaro\u0144", "link": "https://stackoverflow.com/users/3214670/piotr-smaro%c5%84"}, "edited": false, "score": 0, "creation_date": 1454508353, "post_id": 35179191, "comment_id": 58075327, "body": "Can you say what error do you have?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454508578, "post_id": 35179191, "comment_id": 58075493, "body": "Are you sure you are failing to compile, not to link?"}, {"owner": {"reputation": 169, "user_id": 1382272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f2093ff903c4d45e922ecef6f247376?s=128&d=identicon&r=PG", "display_name": "user1382272", "link": "https://stackoverflow.com/users/1382272/user1382272"}, "edited": false, "score": 0, "creation_date": 1454508742, "post_id": 35179191, "comment_id": 58075591, "body": "Yes the error happens during the link. I have added the error."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1454508815, "post_id": 35179191, "comment_id": 58075643, "body": "I notice that you have no actual code (a.cpp) within the target a.o Is this a typo? Also you build c.o with d.cpp While this is valid, it could also be a typo (instead of c.cpp)"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1454508884, "post_id": 35179191, "comment_id": 58075693, "body": "Did you use <code>extern &quot;C&quot;</code> properly?"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1454508923, "post_id": 35179191, "comment_id": 58075727, "body": "Did you need to have -L and -l defined for your linker?"}, {"owner": {"reputation": 169, "user_id": 1382272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f2093ff903c4d45e922ecef6f247376?s=128&d=identicon&r=PG", "display_name": "user1382272", "link": "https://stackoverflow.com/users/1382272/user1382272"}, "reply_to_user": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1454509159, "post_id": 35179191, "comment_id": 58075928, "body": "@sabbahillel : no this is not a typo, a, b, c and d files have been written by someone else. a.h only contains declaration of preprocessor constant. I have no idea about using -L or -l."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 1, "creation_date": 1454509205, "post_id": 35179191, "comment_id": 58075963, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8653860/how-to-write-makefile-mixing-c-and-c\">how to write makefile mixing C and C++</a>"}, {"owner": {"reputation": 169, "user_id": 1382272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f2093ff903c4d45e922ecef6f247376?s=128&d=identicon&r=PG", "display_name": "user1382272", "link": "https://stackoverflow.com/users/1382272/user1382272"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454509226, "post_id": 35179191, "comment_id": 58075988, "body": "@MikeCAT do you mean in main.c ? No I just call the method &quot;as usual&quot; (without extern or something else)."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454509314, "post_id": 35179191, "comment_id": 58076053, "body": "No. I mean in the definition in <code>d.cpp</code>."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1454509499, "post_id": 35179191, "comment_id": 58076182, "body": "-L contains directories to use when looking for libraries. -l  is the flag giving a library to link with the code. <code>_crypto_aead_encrypt</code> seems to be a function that needs to be found in an encryption library. I do not know if it is found in a default library or not."}, {"owner": {"reputation": 169, "user_id": 1382272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f2093ff903c4d45e922ecef6f247376?s=128&d=identicon&r=PG", "display_name": "user1382272", "link": "https://stackoverflow.com/users/1382272/user1382272"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1454509845, "post_id": 35179191, "comment_id": 58076467, "body": "@MikeCAT No they didn&#39;t use the extern flag in the d.cpp file."}, {"owner": {"reputation": 169, "user_id": 1382272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f2093ff903c4d45e922ecef6f247376?s=128&d=identicon&r=PG", "display_name": "user1382272", "link": "https://stackoverflow.com/users/1382272/user1382272"}, "reply_to_user": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1454509876, "post_id": 35179191, "comment_id": 58076494, "body": "@sabbahillel This function is defined in d.cpp and declared in c.h."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 1382272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f2093ff903c4d45e922ecef6f247376?s=128&d=identicon&r=PG", "display_name": "user1382272", "link": "https://stackoverflow.com/users/1382272/user1382272"}, "edited": false, "score": 0, "creation_date": 1454509908, "post_id": 35179712, "comment_id": 58076528, "body": "Thank you, I&#39;ll try you solution ! :)"}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 2, "last_activity_date": 1454510070, "last_edit_date": 1454510070, "creation_date": 1454509621, "answer_id": 35179712, "question_id": 35179191, "link": "https://stackoverflow.com/questions/35179191/makefile-to-compile-both-c-and-cpp-files/35179712#35179712", "title": "Makefile to compile both c and cpp files", "body": "<p>The most likely cause is that the definitions in c.h included by main is compiled as extern \"C\" when compiling main.c, but as C++ extern (name mangling) when compiled into d.cpp.</p>\n\n<p>(if the c.h is the location where the crypto_aead_encrypt function comes from)</p>\n\n<p>The easy solution would be to compile everything as C++ (either rename the main to .cpp, or compile main.c with ${CXX} and and add \" -x c++\" to CXXFLAGS).</p>\n\n<p>The not-so-easy solution requires to compile the c.h methods as extern \"C\" when compiling d.cpp - this requires to change the c.h and/or d.cpp. Or provide a C wrapper for the C++ methods included from c.h.</p>\n"}], "owner": {"reputation": 169, "user_id": 1382272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f2093ff903c4d45e922ecef6f247376?s=128&d=identicon&r=PG", "display_name": "user1382272", "link": "https://stackoverflow.com/users/1382272/user1382272"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2760, "favorite_count": 0, "accepted_answer_id": 35179712, "answer_count": 1, "score": 2, "last_activity_date": 1454510070, "creation_date": 1454508187, "last_edit_date": 1454508703, "question_id": 35179191, "link": "https://stackoverflow.com/questions/35179191/makefile-to-compile-both-c-and-cpp-files", "title": "Makefile to compile both c and cpp files", "body": "<p>I would like to compile my program but I have some problems to do so. My program is composed of a main function, written in C. The other files are either .h or .cpp files that I haven't written. I have a make file but unfortunately I cannot compile my program. This is the \"architecture\" of the files :</p>\n\n<p>a.h only contains definitions of constant.</p>\n\n<p>b.h and b.cpp. b.cpp includes a.h</p>\n\n<p>c.h and d.cpp. c.h contains the signatures of d.cpp's methods. d.cpp includes a.h, b.h and c.h.</p>\n\n<p>The last file is main.c which include c.h.</p>\n\n<p>The makefile I used is the following one :</p>\n\n<pre><code>CXX      = g++\nCXXFLAGS = -Wall -ansi -g\nCC       = gcc\nCCFLAGS  = -g\nOBJS     = main.o a.o b.o c.o\n\nexec : $(OBJS)\n    $(CXX) -o $@ $(OBJS)\n\nc.o: d.cpp b.h a.h  \n    $(CXX) -c $(CXXFLAGS) $&lt;\n\na.o: a.h\n    $(CXX) -c $(CXXFLAGS) $&lt;\n\nb.o: b.cpp a.h\n    $(CXX) -c $(CXXFLAGS) $&lt;\n\n%.o : %.cpp\n    $(CXX) -c $(CXXFLAGS) $&lt;\n\n%.o : %.c\n    $(CC) -c $(CCFLAGS) $&lt;\n</code></pre>\n\n<p>Can someone me where I'm wrong ? Furthermore, how can I modify the makefile such that I can put a,b,c and d files in a subfolder without causing any problem ?</p>\n\n<p>Thank you !</p>\n\n<p>EDIT :\nThis is the error I get :</p>\n\n<pre><code>g++ -o tester main.o a.o b.o c.o\nUndefined symbols for architecture x86_64:\n    \"_crypto_aead_encrypt\", referenced from:\n         _main in main.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [tester] Error 1\n</code></pre>\n\n<p>The function is defined in declared in c.h and defined in d.cpp</p>\n"}, {"tags": ["c", "stdio"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1454507209, "post_id": 35178520, "comment_id": 58074479, "body": "Looks like a tutorial to me. Good idea, but imo not on SO."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1454507541, "post_id": 35178520, "comment_id": 58074730, "body": "@Olaf: Born from me giving basically the same answers, with only slight variations, <i>many</i> times over the years because there really wasn&#39;t a good &quot;cover it all&quot; answer to use for close-as-duplicate. <a href=\"http://stackoverflow.com/a/35172465/60281\">This one</a>, and chux&#39; reaction to it, finally made me write one, in the style of the <a href=\"http://stackoverflow.com/questions/tagged/c%2b%2b-faq\">c++-faq</a> entries."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1454508120, "post_id": 35178520, "comment_id": 58075159, "body": "Sorry, but while I acknowledge your effort and fully understand your being tired about getting the same sh** every day, the subject is too broad. Where e.g. do you set the threshold for using a proper lexxer/parser approach? Or single char read vs. <code>strtoXXX</code>, etc. As you write: every question has slight variations. For duplicate questions, there is already a procedure established. Most answer for such are more compact. Note that one major problem askers have is abstraction and adapting general concepts to their problems. That will not change with a generic tutorial(not FAQ) like this."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454508467, "post_id": 35178520, "comment_id": 58075419, "body": "@Olaf: In the end, it&#39;s up to the community to decide. Where I draw the line is pretty much what I covered below -- feof(), gets(), fgets() / strtol() instead of scanf(). I wouldn&#39;t go into multibyte / wide input, lexxing / parsing etc.. As this apparently was not clear, I added those particular questions above, and re-labelled the answer as &quot;<i>Beginner&#39;s</i> C Input Primer&quot;. At this point, I bow out and won&#39;t argue pro / con this approach either way -- if the community says it should go, I won&#39;t hold a grudge."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 5, "creation_date": 1454508791, "post_id": 35178520, "comment_id": 58075624, "body": "If this is an attempt to create a &quot;canonical duplicate&quot; which we can use to close down newbie FAQs regarding scanf and left-over new line characters in stdin, then I fully support it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1454508975, "post_id": 35178520, "comment_id": 58075775, "body": "@DevSolar Note that the c-faq tag is apparently used for questions regarding the classic comp.lang.c FAQ. And not like the C++-faq tag which is used as a SO on-site FAQ. We could of course change the definition of the tag, since it is barely used. Should we create a similar C FAQ? We could open up a discussion about this on meta."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1454509575, "post_id": 35178520, "comment_id": 58076238, "body": "@rykker: No, this is not a movement toward writing tutorials, at least not intended as such. Lundin got it right: This is meant as a &quot;canonical duplicate&quot; for a certain type of C I/O questions that <i>keeps</i> popping up and didn&#39;t have a good link-to answer yet. You cannot use any of your links for close-as-duplicate, as they are off-site and too broad to actually be of help. I&#39;m trimming down the answer below as we speak, to be more focussed on addressing the couple of issues I meant it for."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1454509919, "post_id": 35178520, "comment_id": 58076533, "body": "@ryyker The main problem with all those tutorials are that they tend to be of questionable quality. The power of SO is that we can make a FAQ that isn&#39;t the work of one (would-be) guru, but hundreds of them. It is not nearly as easy to go and make blatantly incorrect statements on SO, because your post will hopefully get reviewed by multiple experts. Now if you collect every FAQ on SO (there are lots of excellent ones already, below &quot;frequent&quot; questions), you could probably put together a complete Q&amp;A addressing all possible beginner issues."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1454513267, "post_id": 35178520, "comment_id": 58079070, "body": "Anyway, this comment field is not the place to have this discussion, it belongs on meta."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 1, "creation_date": 1454554826, "post_id": 35178520, "comment_id": 58100472, "body": "I would definitely say this kind of &quot;question&quot; is too broad here..."}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1498554870, "post_id": 35178520, "comment_id": 76533298, "body": "Hardly any professional programs use stdin. It&#39;s the mainstay of homework exercises, and it is hard to use robustly."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1498554985, "post_id": 35178520, "comment_id": 76533364, "body": "@MalcolmMcLean: That doesn&#39;t keep users from asking about it. Note that the answer handles the more general case."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1525955719, "post_id": 35178521, "comment_id": 87562928, "body": "A file open example in text mode rather than binary mode, for the purpose of a beginner&#39;s guide, would be more applicable.  <code>fopen(argv[1], &quot;rb&quot;);</code> --&gt; <code>fopen(argv[1], &quot;r&quot;);</code>"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 1, "creation_date": 1531865333, "post_id": 35178521, "comment_id": 89753801, "body": "This would be a good answer, but you didn&#39;t mention any of the <code>fgetc</code> or <code>fgets</code>-related pitfalls, and your &quot;GOOD CODE&quot; is broken in a severe way because of that."}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": true, "score": 34, "last_activity_date": 1532016537, "last_edit_date": 1532016537, "creation_date": 1454506371, "answer_id": 35178521, "question_id": 35178520, "link": "https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq/35178521#35178521", "title": "How to read / parse input in C? The FAQ", "body": "<h1>The Beginner's C Input Primer</h1>\n\n<ul>\n<li>Text mode vs. Binary mode</li>\n<li>Check <a href=\"http://en.cppreference.com/w/c/io/fopen\" rel=\"noreferrer\">fopen()</a> for failure</li>\n<li>Pitfalls\n\n<ul>\n<li>Check any functions you call for success</li>\n<li>EOF, or \"why does the last line print twice\"</li>\n<li>Do not use <a href=\"http://en.cppreference.com/w/c/io/gets\" rel=\"noreferrer\">gets()</a>, ever</li>\n<li>Do not use <a href=\"http://en.cppreference.com/w/c/io/fflush\" rel=\"noreferrer\">fflush()</a> on <code>stdin</code> or any other stream open for reading, ever</li>\n<li>Do not use <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> for potentially malformed input</li>\n<li>When <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> does not work as expected</li>\n</ul></li>\n<li>Read, <em>then</em> parse\n\n<ul>\n<li>Read (part of) a line of input via <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"noreferrer\">fgets()</a></li>\n<li>Parse the line in-memory</li>\n</ul></li>\n<li>Clean Up</li>\n</ul>\n\n<hr>\n\n<h2>Text mode vs. Binary mode</h2>\n\n<p>A \"binary mode\" stream is read in exactly as it has been written. However, there might (or might not) be an implementation-defined number of null characters ('<code>\\0</code>') appended at the end of the stream.</p>\n\n<p>A \"text mode\" stream may do a number of transformations, including (but not limited to):</p>\n\n<ul>\n<li>removal of spaces immediately before a line-end;</li>\n<li>changing newlines (<code>'\\n'</code>) to something else on output (e.g. <code>\"\\r\\n\"</code> on Windows) and back to <code>'\\n'</code> on input;</li>\n<li>adding, altering, or deleting characters that are neither printing characters (<code>isprint(c)</code> is true), horizontal tabs, or new-lines.</li>\n</ul>\n\n<p>It should be obvious that text and binary mode do not mix. Open text files in text mode, and binary files in binary mode.</p>\n\n<h2>Check <a href=\"http://en.cppreference.com/w/c/io/fopen\" rel=\"noreferrer\">fopen()</a> for failure</h2>\n\n<p>The attempt to open a file may fail for various reasons -- lack of permissions, or file not found being the most common ones. In this case, <a href=\"http://en.cppreference.com/w/c/io/fopen\" rel=\"noreferrer\">fopen()</a> will return a <code>NULL</code> pointer.  <em>Always</em> check whether <code>fopen</code> returned a <code>NULL</code> pointer, before attempting to read or write to the file.</p>\n\n<p>When <code>fopen</code> fails, it usually sets the global <a href=\"http://en.cppreference.com/w/c/error/errno\" rel=\"noreferrer\">errno</a> variable to indicate <em>why</em> it failed.  (This is technically not a requirement of the C language, but both POSIX and Windows guarantee to do it.)  <code>errno</code> is a code number which can be compared against constants in <code>errno.h</code>, but in simple programs, usually all you need to do is turn it into an error message and print that, using <a href=\"http://en.cppreference.com/w/c/io/perror\" rel=\"noreferrer\"><code>perror()</code></a> or <a href=\"http://en.cppreference.com/w/c/string/byte/strerror\" rel=\"noreferrer\"><code>strerror()</code></a>.  The error message should also include the filename you passed to <code>fopen</code>; if you don't do that, you will be very confused when the problem is that the filename isn't what you thought it was.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nint main(int argc, char **argv)\n{\n    if (argc &lt; 2) {\n        fprintf(stderr, \"usage: %s file\\n\", argv[0]);\n        return 1;\n    }\n\n    FILE *fp = fopen(argv[1], \"rb\");\n    if (!fp) {\n        // alternatively, just `perror(argv[1])`\n        fprintf(stderr, \"cannot open %s: %s\\n\", argv[1], strerror(errno));\n        return 1;\n    }\n\n    // read from fp here\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<h2>Pitfalls</h2>\n\n<p><strong>Check any functions you call for success</strong></p>\n\n<p>This should be obvious. But <em>do</em> check the documentation of any function you call for their return value and error handling, and <em>check</em> for those conditions.</p>\n\n<p>These are errors that are easy when you catch the condition early, but lead to lots of head-scratching if you do not.</p>\n\n<p><strong>EOF, or \"why does the last line print twice\"</strong></p>\n\n<p>The function <a href=\"http://en.cppreference.com/w/c/io/feof\" rel=\"noreferrer\">feof()</a> returns <code>true</code> if EOF has been reached. A misunderstanding of what \"reaching\" EOF actually means makes many beginners write something like this:</p>\n\n<pre><code>// BROKEN CODE\nwhile (!feof(fp)) {\n    fgets(buffer, BUFFER_SIZE, fp);\n    printf(\"%s\", buffer);\n}\n</code></pre>\n\n<p>This makes the last line of the input print <em>twice</em>, because when the last line is read (up to the final newline, the last character in the input stream), <em>EOF is <strong>not</strong> set.</em></p>\n\n<p>EOF only gets set when you attempt to read <em>past</em> the last character!</p>\n\n<p>So the code above loops once more, <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"noreferrer\">fgets()</a> fails to read another line, sets EOF <em>and leaves the contents of <code>buffer</code> untouched</em>, which then gets printed again.</p>\n\n<p>Instead, check whether <code>fgets</code> failed directly:</p>\n\n<pre><code>// GOOD CODE\nwhile (fgets(buffer, BUFFER_SIZE, fp)) {\n    printf(\"%s\", buffer);\n}\n</code></pre>\n\n<p><strong>Do not use <a href=\"http://en.cppreference.com/w/c/io/gets\" rel=\"noreferrer\">gets()</a>, ever</strong></p>\n\n<p><a href=\"https://stackoverflow.com/q/1694036/3049655\">There is no way to use this function safely.</a> Because of this, it has been <em>removed</em> from the language with the advent of C11.</p>\n\n<p><strong>Do not use <a href=\"http://en.cppreference.com/w/c/io/fflush\" rel=\"noreferrer\">fflush()</a> on <code>stdin</code> or any other stream open for reading, ever</strong></p>\n\n<p>Many people expect <code>fflush(stdin)</code> to discard user input that has not yet been read.  <em>It does not do that.</em>   In plain ISO C, calling <a href=\"http://en.cppreference.com/w/c/io/fflush\" rel=\"noreferrer\">fflush()</a> on an input stream has <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behaviour</a>.  It does have well-defined behavior in POSIX and in MSVC, but neither of those make it discard user input that has not yet been read.</p>\n\n<p>Usually, the right way to clear pending input is read and discard characters up to and including a newline, but not beyond:</p>\n\n<pre><code>int c;\ndo c = getchar(); while (c != EOF &amp;&amp; c != '\\n');\n</code></pre>\n\n<p><strong>Do not use <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> for potentially malformed input</strong></p>\n\n<p>Many tutorials teach you to use <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> for reading any kind of input, because it is so versatile.</p>\n\n<p>But the purpose of <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> is really to read bulk data that can be somewhat <em>relied</em> upon being in a predefined format. (Such as being written by another program.)</p>\n\n<p>Even then <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> can trip the unobservant:</p>\n\n<ul>\n<li>Using a format string that in some way can be influenced by the user is a gaping security hole.</li>\n<li>If the input does not match the expected format, <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> immediately stops parsing, leaving any remaining arguments uninitialized.</li>\n<li>It will tell you how many <em>assignments</em> it has successfully done -- which is why you should <strong>check its return code</strong> (see above) -- but not where exactly it stopped parsing the input, making graceful error recovery difficult.</li>\n<li>It skips any leading whitespaces in the input, except when it does not (<code>[</code>, <code>c</code>, and <code>n</code> conversions). (See next paragraph.)</li>\n<li>It has somewhat peculiar behaviour in some corner cases.</li>\n</ul>\n\n<p><strong>When <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> does not work as expected</strong></p>\n\n<p>A frequent problem with <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> is when there is an unread whitespace (<code>' '</code>, <code>'\\n'</code>, ...) in the input stream that the user did not account for.</p>\n\n<p>Reading a number (<code>\"%d\"</code> et al.), or a string (<code>\"%s\"</code>), stops at any whitespace. And while most <code>*scanf()</code> conversion specifiers <em>skip</em> leading whitespace in the input, <code>[</code>, <code>c</code> and <code>n</code> do not. So the newline is still the first pending input character, making either <code>%c</code> and <code>%[</code> fail to match.</p>\n\n<p>You can skip over the newline in the input, by explicitly reading it e.g. via <a href=\"http://en.cppreference.com/w/c/io/fgetc\" rel=\"noreferrer\">fgetc()</a>, or by adding a whitespace to your <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> format string. (A single whitespace in the format string matches <em>any</em> number of whitespace in the input.)</p>\n\n<h2>Read, <em>then</em> parse</h2>\n\n<p>We just adviced against using <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> except when you really, positively, know what you are doing. So, what to use as a replacement?</p>\n\n<p>Instead of reading and parsing the input in one go, as <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> attempts to do, separate the steps.</p>\n\n<p><strong>Read (part of) a line of input via <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"noreferrer\">fgets()</a></strong></p>\n\n<p><a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"noreferrer\">fgets()</a> has a parameter for limiting its input to at most that many bytes, avoiding overflow of your buffer. If the input line did fit into your buffer completely, the last character in your buffer will be the newline (<code>'\\n'</code>). If it did not all fit, you are looking at a partially-read line.</p>\n\n<p><strong>Parse the line in-memory</strong></p>\n\n<p>Especially useful for in-memory parsing are the <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"noreferrer\">strtol()</a> and <a href=\"http://en.cppreference.com/w/c/string/byte/strtof\" rel=\"noreferrer\">strtod()</a> function families, which provide similar functionality to the <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"noreferrer\">*scanf()</a> conversion specifiers <code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>a</code>, <code>e</code>, <code>f</code>, and <code>g</code>.</p>\n\n<p>But they also tell you <em>exactly</em> where they stopped parsing, and have meaningful handling of numbers too large for the target type.</p>\n\n<p>Beyond those, C offers a <a href=\"http://en.cppreference.com/w/c/string/byte\" rel=\"noreferrer\">wide range of string processing functions</a>. Since you have the input in memory, and always know exactly how far you have parsed it already, you can walk back as many times you like trying to make sense of the input.</p>\n\n<p>And if all else fails, you have the whole line available to print a helpful error message for the user.</p>\n\n<h2>Clean Up</h2>\n\n<p>Make sure you explicitly close any stream you have (successfully) opened. This flushes any as-yet unwritten buffers, and avoids resource leaks.</p>\n\n<pre><code>fclose(fp);\n</code></pre>\n"}], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11750, "favorite_count": 12, "accepted_answer_id": 35178521, "answer_count": 1, "score": 21, "last_activity_date": 1532016537, "creation_date": 1454506371, "last_edit_date": 1498553271, "question_id": 35178520, "link": "https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq", "title": "How to read / parse input in C? The FAQ", "body": "<p>I have problems with my C program when I try to read / parse input.</p>\n\n<p>Help?</p>\n\n<hr>\n\n<p>This is a FAQ entry.</p>\n\n<p>StackOverflow has <em>many</em> questions related to reading input in C, with answers usually focussed on the specific problem of that particular user without really painting the whole picture.</p>\n\n<p>This is an attempt to cover a number of common mistakes comprehensively, so this specific family of questions can be answered simply by marking them as duplicates of this one:</p>\n\n<ul>\n<li>Why does the last line print twice?</li>\n<li>Why does my <code>scanf(\"%d\", ...)</code> / <code>scanf(\"%c\", ...)</code> fail?</li>\n<li>Why does <code>gets()</code> crash?</li>\n<li>...</li>\n</ul>\n\n<p>The answer is marked as community wiki. Feel free to improve and (cautiously) extend.</p>\n"}, {"tags": ["c++", "c", "raspberry-pi"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454506024, "post_id": 35178297, "comment_id": 58073595, "body": "No, you cannot not use a C++ compiler to compile C code. As much as you cannot use a Java compiler to compile C code. Same syntax does not imply identical semantics."}, {"owner": {"reputation": 1, "user_id": 5877951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbed46823c4f89c00e53db7b2dd2e27f?s=128&d=identicon&r=PG&f=1", "display_name": "Yata", "link": "https://stackoverflow.com/users/5877951/yata"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454506369, "post_id": 35178297, "comment_id": 58073863, "body": "Ok, so I guess that it&#39;s also not possible to use this c++ library in C ^^ I hope I will find a C library... :)"}, {"owner": {"reputation": 908, "user_id": 1220312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85bfd271749bd0ba3d9b18d2437bc283?s=128&d=identicon&r=PG", "display_name": "lcjury", "link": "https://stackoverflow.com/users/1220312/lcjury"}, "edited": false, "score": 0, "creation_date": 1454506861, "post_id": 35178297, "comment_id": 58074225, "body": "I think you can use <a href=\"http://stackoverflow.com/questions/2744181/how-to-call-c-function-from-c\" title=\"how to call c function from c\">stackoverflow.com/questions/2744181/&hellip;</a> . But I don&#39;t think you want to do that."}, {"owner": {"reputation": 1, "user_id": 5877951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbed46823c4f89c00e53db7b2dd2e27f?s=128&d=identicon&r=PG&f=1", "display_name": "Yata", "link": "https://stackoverflow.com/users/5877951/yata"}, "edited": false, "score": 0, "creation_date": 1454569687, "post_id": 35178297, "comment_id": 58105841, "body": "I think there  not is any others options. I will try this, thanks."}, {"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "edited": false, "score": 0, "creation_date": 1491821642, "post_id": 35178297, "comment_id": 73706611, "body": "There is a small C library that supports humidity, pressure and the LED matrix here: <a href=\"https://github.com/davebm1/c-sense-hat\" rel=\"nofollow noreferrer\">github.com/davebm1/c-sense-hat</a>"}], "owner": {"reputation": 1, "user_id": 5877951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbed46823c4f89c00e53db7b2dd2e27f?s=128&d=identicon&r=PG&f=1", "display_name": "Yata", "link": "https://stackoverflow.com/users/5877951/yata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2047, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1454506477, "creation_date": 1454505834, "last_edit_date": 1454506477, "question_id": 35178297, "link": "https://stackoverflow.com/questions/35178297/using-rtimulib-c-library-in-c", "title": "Using RTIMULib C++ library in C", "body": "<p>I'm trying to control my Raspberry Pi Sense Hat with C code. Why ? Because I want to learn this language, and it's a fun project. \nBut I don't find any C library. There is RTIMULib but it's a C++ library. I guess I can use g++ to compile my C program using RTIMULib but it's seems to not work with some C libraries like stdatomic.</p>\n\n<p>Do you have a way to use this library in C ? </p>\n\n<p>Link to the RTIMULib library : <a href=\"https://github.com/RPi-Distro/RTIMULib\" rel=\"nofollow\">https://github.com/RPi-Distro/RTIMULib</a></p>\n"}, {"tags": ["c", "function", "pointers", "parameters"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1454505763, "post_id": 35178254, "comment_id": 58073389, "body": "shouldn&#39;t it be <code>allocArray2D(&amp;head, array);</code> or is it a typo?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1454506090, "post_id": 35178254, "comment_id": 58073638, "body": "Please show the <code>allocArray2D</code> function."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1454506128, "post_id": 35178254, "comment_id": 58073670, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. <code>*head</code> looks very wrong."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1454506157, "post_id": 35178254, "comment_id": 58073696, "body": "what is <code>allocArray2D</code> and what is it supposed to do? Can you please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us? Code says more than a thousand pictures."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454506244, "post_id": 35178254, "comment_id": 58073769, "body": "Yet another example of adding stars instead of simply returning a result. You don&#39;t become a better C-programmer by using more stars. This is not cooking."}, {"owner": {"reputation": 288, "user_id": 4030580, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9180b9eb22269ef014d6563e68035344?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Shahid", "link": "https://stackoverflow.com/users/4030580/ahmed-shahid"}, "edited": false, "score": 0, "creation_date": 1454506331, "post_id": 35178254, "comment_id": 58073834, "body": "How are you allocating memory for the array? on the heap or on the stack? This is important because if you allocate on the stack the scope of the array would finish as soon as the allocArray2D is finished its execution."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1454506371, "post_id": 35178254, "comment_id": 58073867, "body": "Compile with all warnings enabled."}, {"owner": {"reputation": 25, "user_id": 5513787, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s53d143pu-s/AAAAAAAAAAI/AAAAAAAAAGc/ZCwe3c_8tbM/photo.jpg?sz=128", "display_name": "Aleks H. Lamarche", "link": "https://stackoverflow.com/users/5513787/aleks-h-lamarche"}, "edited": false, "score": 0, "creation_date": 1454506411, "post_id": 35178254, "comment_id": 58073899, "body": "True, it is &amp;head. it&#39;s just a typo."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1454508796, "post_id": 35178254, "comment_id": 58075631, "body": "What is this <code>..., *x, *y);</code>? <code>x</code> and <code>y</code> are <code>int</code>s, to which you cannot apply the de-referencing operator <code>*</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1454508925, "post_id": 35178254, "comment_id": 58075730, "body": "Also all those casts are useless."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1454505974, "creation_date": 1454505974, "answer_id": 35178360, "question_id": 35178254, "link": "https://stackoverflow.com/questions/35178254/c-double-pointer-passed-as-parameters-comes-back-empty/35178360#35178360", "title": "C : double pointer passed as parameters comes back empty", "body": "<p>If I have understood you correctly what you need is something like the following\nFor simplicity I excluded the parameter that refers to the structure.</p>\n\n<pre><code>void allocArray2D( unsigned char ***a, size_t n )\n{\n    *a = malloc( n * sizeof( unsigned char * ) );\n\n    for ( size_t i = 0; i &lt; n; i++ ) ( *a )[i] = malloc( n * sizeof( unsigned char ) );\n}\n\n//...\n\nunsigned char **array = NULL; // pointer to 2D array\n\nallocArray2D( &amp;array, 21 );\n</code></pre>\n\n<p>If you want that the original object would be changed after passing it to a function then you have to pass it by reference.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5513787, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s53d143pu-s/AAAAAAAAAAI/AAAAAAAAAGc/ZCwe3c_8tbM/photo.jpg?sz=128", "display_name": "Aleks H. Lamarche", "link": "https://stackoverflow.com/users/5513787/aleks-h-lamarche"}, "edited": false, "score": 0, "creation_date": 1454513797, "post_id": 35178382, "comment_id": 58079437, "body": "Thank you, now I understand why."}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1454507116, "last_edit_date": 1454507116, "creation_date": 1454506022, "answer_id": 35178382, "question_id": 35178254, "link": "https://stackoverflow.com/questions/35178254/c-double-pointer-passed-as-parameters-comes-back-empty/35178382#35178382", "title": "C : double pointer passed as parameters comes back empty", "body": "<p>You have to pass a pointer to the 2dimensional array to your function, to write in  the function to the value behind the pointer:</p>\n\n<pre><code>SHead head; // Custom struct\nunsigned char **array = NULL; // pointer to 2D array\n\nallocArray2D(*head, &amp;array)\n                 // ^ address of array  \n</code></pre>\n\n<p>-</p>\n\n<pre><code>void allocArray(SHead* head, unsigned char*** pArray)\n                                  // ^ pointer to char** because its an output parameter\n{\n    int x, y, i;\n    getsize( head, &amp;x, &amp;y );\n\n    *pArray = malloc( y * sizeof( unsigned char * ); \n // ^ assigne somtething to the variable array refered by the pointer pArray\n    if( *pArray == NULL ) \n    {\n        printf(\"&gt;&gt; Erro allocating memory\\n\")\n        return;\n    }\n\n    for ( i = 0; i &lt; y; i ++ )\n        (*pArray)[i] = malloc( x * sizeof( unsigned char ) );\n}\n</code></pre>\n\n<p>Note, what you did was to pass a <code>NULL</code>-pointe to the function <code>allocArray</code>.</p>\n\n<p>An other solution would be to return the allocated memory by the return value of function <code>allocArray</code>:</p>\n\n<pre><code> SHead head; // Custom struct\n unsigned char **array = NULL;\n\n array = allocArray( &amp;head );\n</code></pre>\n\n<p>-</p>\n\n<pre><code> unsigned char** allocArray( SHead* head )\n {\n     int x, y, i;\n     getsize( head, &amp;x, &amp;y );\n\n     unsigned char** arr = malloc( y * sizeof( unsigned char * );\n     if( arr  == NULL ) \n     {\n        printf(\"&gt;&gt; Erro allocating memory\\n\")\n        return;\n     }\n\n     for ( int i = 0; i &lt; y; i ++ )\n         arr[i] = malloc( x * sizeof( unsigned  char ) );\n     return arr;\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 0, "last_activity_date": 1454506033, "creation_date": 1454506033, "answer_id": 35178386, "question_id": 35178254, "link": "https://stackoverflow.com/questions/35178254/c-double-pointer-passed-as-parameters-comes-back-empty/35178386#35178386", "title": "C : double pointer passed as parameters comes back empty", "body": "<p>Your call looks very strange. </p>\n\n<p>First, you are passing *head. head seems to be an uninitialised variable, so passing *head seems badly wrong. </p>\n\n<p>Second, the function called has no way of seeing array. Your call is equivalent to allocArray2D (*head, NULL) and not having the array variable at all. This also seems very wrong. </p>\n"}], "owner": {"reputation": 25, "user_id": 5513787, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s53d143pu-s/AAAAAAAAAAI/AAAAAAAAAGc/ZCwe3c_8tbM/photo.jpg?sz=128", "display_name": "Aleks H. Lamarche", "link": "https://stackoverflow.com/users/5513787/aleks-h-lamarche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "closed_date": 1454508955, "accepted_answer_id": 35178382, "answer_count": 3, "score": 0, "last_activity_date": 1454507116, "creation_date": 1454505692, "last_edit_date": 1454506794, "question_id": 35178254, "link": "https://stackoverflow.com/questions/35178254/c-double-pointer-passed-as-parameters-comes-back-empty", "closed_reason": "Duplicate", "title": "C : double pointer passed as parameters comes back empty", "body": "<p>At first, it may sound normal if I free the allocation within the function, but it's not the case. As I'm writting these lines, I've found a work around, but I would like to keep a certain homogeneity in my code and would prefer to keep it the way it ways but you know working properly, so is there another solutions or my workaround is the only option?</p>\n\n<p>The main function:</p>\n\n<pre><code>void main(void)\n{\n    SHead head; // Custom struct\n    unsigned char **array = NULL; // pointer to 2D array\n\n    allocArray2D(&amp;head, array) // the function signature: (SHead*, unsigned char**)\n\n    // here, the array pointer is still NULL (0x0)\n    //...\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The allocation function malloc a very small amount of memory around 21 unsigned char* and for each simple pointer 21 unsigned char.\nWithin the function, the pointer is fine and points to a proper address.</p>\n\n<p>So my work around was modify the function from:</p>\n\n<pre><code>void allocArray(SHead* h, unsigned char** arr)\n{\n    int x, y, i;\n    getsize(head, *x, *y);\n\n    arr = (unsigned char**)malloc(sizeof(unsigned char*)*y);\n    if(arr)\n        printf(\"&gt;&gt; Erro allocating memory\\n\"), return;\n\n    for(i =0; i&lt;y; i++)\n    {\n        arr[i] = (unsigned char)malloc(sizeof(unsigned char)*x);\n    }\n}\n</code></pre>\n\n<p>to the following:</p>\n\n<pre><code>unsigned char** allocArray(SHead*)\n{\n    int x, y, i;\n    unsigned char **arr;\n    getsize(head, *x, *y);\n\n    arr = (unsigned char**)malloc(sizeof(unsigned char*)*y);\n    if(arr)\n        printf(\"&gt;&gt; Erro allocating memory\\n\"), return;\n\n    for(i =0; i&lt;y; i++)\n    {\n        arr[i] = (unsigned char)malloc(sizeof(unsigned char)*x);\n    }\n\n    return arr; // returning the address\n}\n</code></pre>\n\n<p>As I said earlier, I'd like to keep homogeneity within my code and would prefer to keep a function signature similar to other function I have. My workaround work properly. And I'm wondering if it is the only solution, or perhaps I am missing something. </p>\n\n<p>EDIT: Following the comments I added more code.</p>\n\n<p>Thank you,\nAlex.</p>\n"}, {"tags": ["c", "winapi", "unicode"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1454505702, "post_id": 35178145, "comment_id": 58073351, "body": "You are specifying the buffer size correctly so nothing can go wrong.  Whether the converted string actually fits is secondary and has nothing to do with the encoding or the codepoint values, you&#39;ll get ERROR_INSUFFICIENT_BUFFER if it doesn&#39;t.  You&#39;d be wise to not risk this failure mode but that decision is entirely up to you."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1454506544, "post_id": 35178145, "comment_id": 58073991, "body": "@Olaf no MCVE needed here. It&#39;s Win32 and all relevant information has been provided."}, {"owner": {"reputation": 1, "user_id": 5132068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48185164b4dcd48e9bbf643d4e452bbe?s=128&d=identicon&r=PG&f=1", "display_name": "homer321", "link": "https://stackoverflow.com/users/5132068/homer321"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1454509780, "post_id": 35178145, "comment_id": 58076402, "body": "Sorry for not including the correct tag, and thanks @HansPassant for the answer."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1454516010, "post_id": 35178145, "comment_id": 58081125, "body": "There is no character, whose UTF-16 encoding is 3 bytes in length. Unless you are dealing with a platform where a byte is an even multiple of an octet. Windows isn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "is_accepted": false, "score": 3, "last_activity_date": 1454612757, "last_edit_date": 1454612757, "creation_date": 1454545464, "answer_id": 35190360, "question_id": 35178145, "link": "https://stackoverflow.com/questions/35178145/secure-multibytetowidechar-usage/35190360#35190360", "title": "Secure MultiByteToWideChar Usage", "body": "<blockquote>\n  <p>Could there be a default code page that maps a character into a 3-byte or larger [sequence of wchar_t UTF-16 code units]</p>\n</blockquote>\n\n<p>There is currently no ANSI code page that maps a single byte to a character outside the BMP (ie one that would take more than one 2-byte codeunit in UTF-16).</p>\n\n<p>No single multi-byte ANSI character can ever be encoded as more than two 2-byte codeunits in UTF-16.  So, at <em>worse</em>, you will never end up with a UTF-16 string that has more than 2x the length of the input ANSI string (not counting the null-terminator, which does not apply in this case since you are passing explicit lengths), and at <em>best</em> you will end up with a UTF-16 string that has fewer <code>wchar_t</code> characters than the input string has <code>char</code> characters.</p>\n\n<p>For what it's worth, Microsoft are <a href=\"http://www.siao2.com/2005/02/06/368081.aspx\" rel=\"nofollow\">endeavouring</a> not to develop the ANSI code pages any further, and I suspect the NLS file format would need changes to allow it, so it's pretty unlikely that this will change in future. But there is no firm API promise that this will definitely always hold true.</p>\n"}], "owner": {"reputation": 1, "user_id": 5132068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48185164b4dcd48e9bbf643d4e452bbe?s=128&d=identicon&r=PG&f=1", "display_name": "homer321", "link": "https://stackoverflow.com/users/5132068/homer321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454612757, "creation_date": 1454505409, "last_edit_date": 1454506666, "question_id": 35178145, "link": "https://stackoverflow.com/questions/35178145/secure-multibytetowidechar-usage", "title": "Secure MultiByteToWideChar Usage", "body": "<p>I've got code that used MultiByteToWideChar like so:</p>\n\n<pre><code>wchar_t * bufferW = malloc(mbBufferLen * 2);\nMultiByteToWideChar(CP_ACP, 0, mbBuffer, mbBufferLen, bufferW, mbBufferLen);\n</code></pre>\n\n<p>Note that the code does not use a previous call to MultiByteToWideChar to check how large the new unicode buffer needs to be, and assumes it will be twice the multibyte buffer.</p>\n\n<p>My question is if this usage is safe? <strong>Could there be a default code page that maps a character into a 3-byte or larger unicode character, and cause an overflow?</strong> While I'm aware the usage isn't exactly correct, I'd like to gauge the risk impact.</p>\n"}, {"tags": ["objective-c", "c", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1454505305, "post_id": 35178076, "comment_id": 58073037, "body": "If I understood your case, you&#39;re talking about a variable of type pointer to function. You can always change the value pointed by a pointer, right?"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1454505894, "creation_date": 1454505894, "answer_id": 35178324, "question_id": 35178076, "link": "https://stackoverflow.com/questions/35178076/modifying-a-function-pointer-passed-to-a-method/35178324#35178324", "title": "Modifying a function pointer passed to a method?", "body": "<p>This can be done using pointers to function pointers. Perhaps the most readable way to do it is to <code>typedef</code> your function pointer, like this:</p>\n\n<pre><code>typedef void (*FunPtr)(int a, float b);\n</code></pre>\n\n<p>Then use a pointer of that <code>typedef</code>-ed type to assign in a function, like this:</p>\n\n<pre><code>void foo(int a, float b) {\n    printf(\"FOO : %d %f\\n\", a, b);\n}\n\nvoid bar(int a, float b) {\n    printf(\"BAR : %d %f\\n\", a, b);\n}\n\n// This function receives a pointer to function pointer\nvoid assign(int n, FunPtr *ptr) {\n    if (n == 0) {\n        *ptr = foo;\n    } else {\n        *ptr = bar;\n    }\n}\n</code></pre>\n\n<p>Here is how you call <code>assign</code> from your code:</p>\n\n<pre><code>int main(void) {\n    FunPtr f;\n    assign(0, &amp;f);\n    f(10, 20.5);\n    assign(1, &amp;f);\n    f(10, 20.5);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/Vgpb7g\" rel=\"nofollow\">Demo.</a></p>\n\n<p><strong>Note:</strong> You are right about blocks in Objective-C greatly reducing the need for direct use of function pointers. However, you can use a similar <code>typedef</code> trick with pointers to blocks.</p>\n"}], "owner": {"reputation": 363, "user_id": 4914582, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ee0046625d38a23d7ad4dd5854f21f?s=128&d=identicon&r=PG&f=1", "display_name": "CMPXCHG8B", "link": "https://stackoverflow.com/users/4914582/cmpxchg8b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 35178324, "answer_count": 1, "score": 2, "last_activity_date": 1454505894, "creation_date": 1454505220, "question_id": 35178076, "link": "https://stackoverflow.com/questions/35178076/modifying-a-function-pointer-passed-to-a-method", "title": "Modifying a function pointer passed to a method?", "body": "<p>Is there any way to pass a function pointer to an Objective C method, and then have that method modify the function pointer to point at a C function somewhere else?</p>\n\n<p>Creating a method that accepts a function pointer is simple enough:</p>\n\n<pre><code>- (void)doSomethingWithFunctionPointer:(void(*)(/* args go here */))functionPointer;\n</code></pre>\n\n<p>I can then call that function inside doSomethingWithFunctionPointer simply by calling:</p>\n\n<pre><code>if (functionPointer)\n{\n    functionPointer();\n}\n</code></pre>\n\n<p>But what if I actually wanted to change the functionPointer to point at something else within doSomethingWithFunctionPointer, so that any code outside that method can then call the changed function pointer to call the function that doSomethingWithFunctionPointer point it to?</p>\n\n<p>I know this is probably a prime example of how not to do things in Objective C (especially considering we've got blocks and what not). It's more just curiosity at this point. It almost sounds like I'd need a function pointer pointer, but I'm not sure how that would work, if it's even possible.</p>\n"}, {"tags": ["c", "dynamic-programming"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1454503890, "post_id": 35177518, "comment_id": 58072060, "body": "Have you tried stepping through the code, line by line, in a debugger?"}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1454504062, "post_id": 35177518, "comment_id": 58072178, "body": "@JoachimPileborg I have, but since <code>computeChange()</code> is being used recursively, it&#39;s got a bit confusing. I&#39;m debugging it again at the moment."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1454504218, "post_id": 35177518, "comment_id": 58072289, "body": "So... if you put a breakpoint in computeChange(), it is continually getting hit, ie. runaway recursion?"}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454504363, "post_id": 35177518, "comment_id": 58072379, "body": "I tried inputting the number 1 and the array <code>possible_mins</code> had the elements 683967304 and -858993469 in the first execution of the <code>else</code>, which isn&#39;t a good sign...."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1454504418, "post_id": 35177518, "comment_id": 58072418, "body": "lol no, probably not:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1454504510, "post_id": 35177518, "comment_id": 58072486, "body": "Owait - it&#39;s not initialized at entry to the &#39;else&#39;"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 3, "creation_date": 1454504632, "post_id": 35177518, "comment_id": 58072580, "body": "Nice job on a really well formatted question"}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1454504676, "post_id": 35177518, "comment_id": 58072611, "body": "@MartinJames what d&#39;you mean?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1454504997, "post_id": 35177518, "comment_id": 58072811, "body": "You probably need to return <code>INT_MAX</code> instead of <code>-1</code> when <code>v &lt; 0</code> in your <code>computeChange</code> function."}, {"owner": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "edited": false, "score": 0, "creation_date": 1454505153, "post_id": 35177518, "comment_id": 58072922, "body": "yes, I agree with Ian Abbott here on returning INT_MAX when v &lt; 0."}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1454505173, "post_id": 35177518, "comment_id": 58072941, "body": "@IanAbbott I changed that, but I still got those big numbers :("}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1454505411, "post_id": 35177518, "comment_id": 58073123, "body": "Do you expect that <code>possible_mins</code> will be &#39;shared&#39; between different recursive calls of <code>computeChange()?</code> Because it won&#39;t. Nor do VLAs, as I think @MartinJames was saying, have all of their elements initialised to 0."}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454505969, "post_id": 35177518, "comment_id": 58073555, "body": "How would I do that? In the else clause?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1454506002, "post_id": 35177518, "comment_id": 58073579, "body": "Do what, 0-initialise it? If so, well, it&#39;s only scoped within the <code>else</code> clause, so yes, and <code>memset</code> is the usual way to zero-out things."}, {"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 0, "creation_date": 1454526052, "post_id": 35177518, "comment_id": 58087840, "body": "I believe that with the given currencies, a greedy algorithm is guaranteed to get the right answer and be much simpler"}], "answers": [{"tags": [], "owner": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "is_accepted": false, "score": 0, "last_activity_date": 1454508582, "creation_date": 1454508582, "answer_id": 35179339, "question_id": 35177518, "link": "https://stackoverflow.com/questions/35177518/dynamic-programming-minimum-number-of-coins-in-c/35179339#35179339", "title": "Dynamic Programming - Minimum number of coins in C", "body": "<p>So the below is the code snippet for your problem using memoization and dynamic programming. The complexity is O(Val*numTypesofCoins). </p>\n\n<p>In the end, change[val] will give you the min number of coins for val.</p>\n\n<pre><code>int change [MAX];\nint cur[]={1,2,5,10,20,50,100,200};\nint n = sizeof(a)/sizeof(int);\nint val= //whatever user enters to get the num of coins required.\n\nfor (i=0; i &lt;= val; i++) {\n    change[i] = INT_MAX;\n}\nfor (i=0; i &lt; n; i++) { // change for the currency coins should be 1.\n    change[cur[i]] = 1;\n}\n\nfor (i=1; i &lt;= val; i++) {\n    int min = INT_MAX;\n    int coins = 0;\n    if (change[i] != INT_MAX) { // Already got in 2nd loop\n        continue;\n    }\n    for (j=0; j &lt; n; j++) {\n        if (cur[j] &gt; i) { // coin value greater than i, so break.\n            break;\n        }\n        coins = 1 + change[i - cur[j]]; \n        if (coins &lt; min) {\n            min = coins;\n        }\n    }\n    change[i] = min;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1454525637, "last_edit_date": 1454525637, "creation_date": 1454523750, "answer_id": 35184714, "question_id": 35177518, "link": "https://stackoverflow.com/questions/35177518/dynamic-programming-minimum-number-of-coins-in-c/35184714#35184714", "title": "Dynamic Programming - Minimum number of coins in C", "body": "<p>OP's supplied <code>Change()</code> algorithm incurs <em>lots</em> of recursion, even with the <code>if(v &lt; 0) return INT_MAX;</code> correction.  So much recursion that even small-ish values take millions of recursive calls.</p>\n\n<p>A simple improvement is to \"cache\" the best solution found so far.  Then when an intermediate solution is already worse than the best, no need to continue that path.</p>\n\n<pre><code>int computeChange(int cur[], int v, int n, int count_now, int *bestcount) {\n  if (count_now &gt;= *bestcount) {\n    return INT_MAX;\n  }\n  if (v &lt; 0) {\n    return INT_MAX;\n  }\n  if (v == 0) {\n    *bestcount = count_now;\n    return 0;\n  }\n\n  int min_count = INT_MAX;\n  for (int i = 0; i &lt; n; i++) {\n    int count = computeChange(cur, v - cur[i], n, count_now+1, bestcount);\n    if (count &lt; min_count) {\n      min_count = count + 1;\n    }\n  }\n  return min_count;\n}\n\n  int bc = INT_MAX;\n  computeChange(cur, v, n, 0, &amp;bc));\n</code></pre>\n\n<p>A secondary improvement is to attempt using large coins first</p>\n\n<pre><code> // int count = computeChange(cur, v - cur[i], n, count_now+1, bestcount);\n int count = computeChange(cur, v - cur[n-i-1], n, count_now+1, bestcount);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 5141702, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63e72254111b45e77ecb8242b6153cc6?s=128&d=identicon&r=PG&f=1", "display_name": "anand zutshi", "link": "https://stackoverflow.com/users/5141702/anand-zutshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1455365172, "last_edit_date": 1455365172, "creation_date": 1455361900, "answer_id": 35379128, "question_id": 35177518, "link": "https://stackoverflow.com/questions/35177518/dynamic-programming-minimum-number-of-coins-in-c/35379128#35379128", "title": "Dynamic Programming - Minimum number of coins in C", "body": "<p>if you have the sum of say x and the coins of denominations say <code>a1, a2, a3, a4..</code>(in decreasing order)\nthen the answer is simply->\n<code>x/a1+(x%a2)/a3+((x%a2)%a3)/a4+...</code>\nThis should hopefully give the answer</p>\n"}], "owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2099, "favorite_count": 2, "accepted_answer_id": 35184714, "answer_count": 3, "score": 14, "last_activity_date": 1455365172, "creation_date": 1454503643, "question_id": 35177518, "link": "https://stackoverflow.com/questions/35177518/dynamic-programming-minimum-number-of-coins-in-c", "title": "Dynamic Programming - Minimum number of coins in C", "body": "<p>I have looked through various questions on the site and I haven't managed to find anything which implements this by the following reasoning (so I hope this isn't a duplicate).</p>\n\n<p>The problem I'm trying to solve via a C program is the following:</p>\n\n<blockquote>\n  <p>As the programmer of a vending machine controller your are required to compute the minimum number of coins that make up the required change to give back to customers. An efficient solution to this problem takes a dynamic programming approach, starting off computing the number of coins required for a 1 cent change, then for 2 cents, then for 3 cents, until reaching the required change and each time making use of the prior computed number of coins. Write a program containing the function <code>ComputeChange()</code>, that takes a list of valid coins and the required change. This program should repeatedly ask for the required change from the console and call <code>ComputeChange()</code> accordingly. It should also make use of \u201ccaching\u201d, where any previously computed intermediate values are retained for subsequent look-up.</p>\n</blockquote>\n\n<p>After looking around online to find how others have solved it, I found the following example applied with pennies, nickels and dimes:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dYlPp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dYlPp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Which I tried to base my code upon. But first of all, my code isn't halting, and secondly, I'm not sure if I'm incorporating the <em>caching</em> element mentioned in the rubric above. (I'm not really sure how I need to go about that part). </p>\n\n<p>Can anyone help find the flaws in my code?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint computeChange(int[],int,int);\nint min(int[],int);\n\nint main(){\n    int cur[]={1,2,5,10,20,50,100,200};\n    int n = sizeof(cur)/sizeof(int);\n    int v;\n\n    printf(\"Enter a value in euro cents: \");\n    scanf(\"%d\", &amp;v);\n\n    printf(\"The minimum number of euro coins required is %d\", computeChange(cur, v, n));\n\n    return 0;\n}\n\nint computeChange(int cur[], int v, int n){\n    if(v &lt; 0)\n        return -1;\n    else if(v == 0)\n        return 0;\n    else{\n        int possible_mins[n], i;\n        for(i = 0; i &lt; n; i++){\n            possible_mins[i]=computeChange(cur, v-cur[i], n);\n        }\n        return 1+min(possible_mins, n);\n    };\n}\n\nint min(int a[], int n){\n    int min = INT_MAX, i;\n    for(i = 0; i &lt; n; i++){\n        if((i&gt;=0) &amp;&amp; (a[i]&lt; min))\n            min = a[i];\n    }\n    return min;\n}\n</code></pre>\n\n<p>Any assistance will be greatly appreciated.</p>\n"}, {"tags": ["c", "audio", "plugins", "gstreamer", "gst-launch"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2635529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b314b279e90adc71a2be2df2d0767e6?s=128&d=identicon&r=PG", "display_name": "Ro Step an ovr", "link": "https://stackoverflow.com/users/2635529/ro-step-an-ovr"}, "is_accepted": true, "score": 0, "last_activity_date": 1455802703, "creation_date": 1455802703, "answer_id": 35483008, "question_id": 35177309, "link": "https://stackoverflow.com/questions/35177309/how-to-use-level-plugin-of-gstreamer-to-get-peak-and-rms-value-of-a-particular-a/35483008#35483008", "title": "How to use level plugin of GStreamer to get peak and rms value of a particular audio file", "body": "<p>The \"level\" element sends messages. Usage example may be found on the link (gstreamer examples):\n<a href=\"https://github.com/krad-radio/gstreamer-plugins-good-krad/blob/master/tests/examples/level/level-example.c\" rel=\"nofollow\">https://github.com/krad-radio/gstreamer-plugins-good-krad/blob/master/tests/examples/level/level-example.c</a></p>\n"}, {"tags": [], "owner": {"reputation": 5796, "user_id": 3326331, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/bZcAe.jpg?s=128&g=1", "display_name": "Sagar Pilkhwal", "link": "https://stackoverflow.com/users/3326331/sagar-pilkhwal"}, "is_accepted": false, "score": 2, "last_activity_date": 1456470977, "creation_date": 1456470977, "answer_id": 35645713, "question_id": 35177309, "link": "https://stackoverflow.com/questions/35177309/how-to-use-level-plugin-of-gstreamer-to-get-peak-and-rms-value-of-a-particular-a/35645713#35645713", "title": "How to use level plugin of GStreamer to get peak and rms value of a particular audio file", "body": "<p>try using:</p>\n\n<pre><code>gst-launch -v -m  filesrc location=audioandsilence.wav ! decodebin ! audioconvert ! level message=TRUE ! pulsesink\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 5876893, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vUSJV.jpg?s=128&g=1", "display_name": "iTink", "link": "https://stackoverflow.com/users/5876893/itink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 35483008, "answer_count": 2, "score": 1, "last_activity_date": 1456470977, "creation_date": 1454503034, "last_edit_date": 1455021571, "question_id": 35177309, "link": "https://stackoverflow.com/questions/35177309/how-to-use-level-plugin-of-gstreamer-to-get-peak-and-rms-value-of-a-particular-a", "title": "How to use level plugin of GStreamer to get peak and rms value of a particular audio file", "body": "<p>I want to detect peak and rms value of particular audio files (format can be .opus, .wav etc., or it can be input from mic as well without recording a voice). Using GStreamer's good 'level' plugin I can achieve this.</p>\n\n<p>I tried the sample provided here,  <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-level.html\" rel=\"nofollow\" title=\"level_plugin_example\">level_plugin_example</a></p>\n\n<p>I also tried command line example,</p>\n\n<blockquote>\n  <p>$ gst-launch-1.0 -v -m audiotestsrc ! audioconvert !\n  audio/x-raw,format=S8,channels=2 ! level ! fakesink silent=TRUE</p>\n</blockquote>\n\n<p>OR</p>\n\n<blockquote>\n  <p>$ gst-launch-1.0 -v -m audiotestsrc ! volume volume=1.0 ! level !\n  fakesink silent=TRUE</p>\n</blockquote>\n\n<p>these are giving null rms and peak values.</p>\n\n<p>By going through these examples, I got to know how to use level. But question is, in the example they have used caps to set raw media (Is there anything done internally to get output of level plugin?) but I want user defined media input so how to achieve this?</p>\n\n<p>Summary: I want a sample code snippet of 'level' plugin which takes an input as a recorded audio or live audio file and detect its rms and peak values.</p>\n"}, {"tags": ["c++", "c", "arrays", "initialization", "switch-statement"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1357959"}, "edited": false, "score": 0, "creation_date": 1454503101, "post_id": 35177275, "comment_id": 58071504, "body": "Why would you expect the compiler to not like that? <code>c</code> is totally valid in the context of <code>switch(ch)</code>, but not visible outside."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1454503121, "post_id": 35177275, "comment_id": 58071516, "body": "It is OK to define (locally) and initialize an array however you won&#39;t be able to use it outside the <code>switch</code> scope... (also <code>int a = 42;</code> should perfectly work) (... no reason to tag C++ here)"}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "edited": false, "score": 0, "creation_date": 1454503246, "post_id": 35177275, "comment_id": 58071589, "body": "This is just a MWE. I intend to use <code>c</code> in the case statement."}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1454503733, "post_id": 35177275, "comment_id": 58071963, "body": "@AlexLop. The question relates to C and C++"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1357959"}, "is_accepted": false, "score": 0, "last_activity_date": 1454503425, "last_edit_date": 1495540235, "creation_date": 1454503425, "answer_id": 35177442, "question_id": 35177275, "link": "https://stackoverflow.com/questions/35177275/initializing-arrays-in-switch-case-statements/35177442#35177442", "title": "Initializing arrays in switch case statements", "body": "<p>Your array is totally fine where it is. You are declaring (and initializing) it in the lexical scope of <code>switch(ch)</code>, where it is allowed to live, be initialized, and be referenced by other operations (after it was declared).</p>\n\n<p>What wouldn't work is referencing it outside of the <code>switch</code>, like so:</p>\n\n<pre><code>switch(ch) {\n  ...\n  case 'z':\n    int c[2] = { 0 , 1 };  // OKAY (Huh???)\n    break;\n};\n\nsome_operation(c);\n</code></pre>\n\n<p>The only situation in which this would be forbidden would be if you had <em>another</em> <code>case</code> statement that uses the same variable. As <code>case</code> statements are just labels (as pointed out <a href=\"https://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement\">here</a>), you could potentially just skip the initialization of a later-on used variable.</p>\n\n<p>So, the compiler let's you do that as long as you use the variable only in one label, but not in multiple.</p>\n"}, {"comments": [{"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "edited": false, "score": 0, "creation_date": 1454505374, "post_id": 35177468, "comment_id": 58073092, "body": "Nice example with the goto! I see what the committee meant to do by preventing jumps past initializations but its not  bullet proof as jumps past deferred initializations are not forbidden."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1454503943, "last_edit_date": 1454503943, "creation_date": 1454503506, "answer_id": 35177468, "question_id": 35177275, "link": "https://stackoverflow.com/questions/35177275/initializing-arrays-in-switch-case-statements/35177468#35177468", "title": "Initializing arrays in switch case statements", "body": "<p>The compiler would issue an error if a jump to a case label bypassed the initialized array. For example</p>\n\n<pre><code>    switch( ch )\n    {\n        int c[2] = { 0 , 1 };  // OKAY (Huh???)\n    case 'x':\n        //int a = 42; // NOT OKAY\n        break;\n\n    case 'y':\n        int b;\n        b = 42;    // OKAY\n\n    case 'z':\n//        int c[2] = { 0 , 1 };  // OKAY (Huh???)\n        break;\n    } \n</code></pre>\n\n<p>or</p>\n\n<pre><code>    switch( ch )\n    {\n    case 'x':\n        //int a = 42; // NOT OKAY\n        break;\n\n    case 'y':\n        int b;\n        b = 42;    // OKAY\n\n    case 'z':\n        int c[2] = { 0 , 1 };  // OKAY (Huh???)\n        break;\n    default:\n        break;\n    } \n</code></pre>\n\n<p>However in the original program neither jump bypasses the initialized array.  </p>\n\n<p>Here is a more simplified demonstrative program.\nThis will compile successfully</p>\n\n<pre><code>int main() \n{\n    goto L1;\n\n    {\n        L1:;\n        int c[2] = { 0 , 1 };\n    }       \n}    \n</code></pre>\n\n<p>while this will issue an error</p>\n\n<pre><code>int main() \n{\n    goto L1;\n\n    {\n        int c[2] = { 0 , 1 };\n        L1:;\n    }       \n}    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 6, "last_activity_date": 1454505947, "last_edit_date": 1454505947, "creation_date": 1454503722, "answer_id": 35177550, "question_id": 35177275, "link": "https://stackoverflow.com/questions/35177275/initializing-arrays-in-switch-case-statements/35177550#35177550", "title": "Initializing arrays in switch case statements", "body": "<p>If you change your example to</p>\n\n<pre><code>int main()\n{\n    char ch;\n\n    switch( ch )\n    {\n    case 'x':\n        int c[2] = { 0 , 1 };\n        break;\n\n    case 'z':\n        int a = 42;\n        break;\n    }\n}\n</code></pre>\n\n<p>you'll notice that the error now occurs for the array, but not for the <code>int</code>.</p>\n\n<p>Intialisation is actually allowed for the last case.</p>\n\n<p>The rule is not \"you're not allowed to initialise a variable in a <code>case</code>\" but \"you're not allowed to jump across a variable initialisation.\"</p>\n\n<p>And it's impossible to jump across the initialisation in the last case.</p>\n\n<p>The reason for the rule is that a variable declared in a <code>case</code> is in scope in the subsequent cases, and jumping to a subsequent case would bypass the initialisation.</p>\n\n<p>This becomes (slightly) clearer if you rewrite as a goto-sequence, as the same rules about scope and initialisation apply:</p>\n\n<pre><code>if (ch == 'x') goto x;\nif (ch == 'y') goto y;\nif (ch == 'z') goto z;\ngoto end;\n{\n  x:\n    int a = 42;  // goto y or z breaks this\n    goto end;\n  y:\n    int b;      // uninitialised, so OK\n    b = 42;\n    goto end;\n  z:\n    int c[2] = {0, 1};  // No label after this, so can't jump across, so OK\n    goto end;\n}\nend:\n</code></pre>\n"}], "owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2722, "favorite_count": 0, "accepted_answer_id": 35177550, "answer_count": 3, "score": 1, "last_activity_date": 1454506710, "creation_date": 1454502934, "last_edit_date": 1454506710, "question_id": 35177275, "link": "https://stackoverflow.com/questions/35177275/initializing-arrays-in-switch-case-statements", "title": "Initializing arrays in switch case statements", "body": "<p>Whimsically, I initialized the following array <code>c</code> in a switch statement fully expecting my compiler to say <em>NO you can't do that</em> but much to my surprise it compiled in MSVC, GCC and Clang. Online <a href=\"http://rextester.com/FRB5433\" rel=\"nofollow\">example</a></p>\n\n<p>I'm assuming that the standard allows it, in which case my question is why? ... considering that declaration and initialization of non-arrays is NOT allowed in case statements.  </p>\n\n<pre><code>int main()\n{\n    char ch;\n\n    switch( ch )\n    {\n    case 'x':\n        //int a = 42; // NOT OKAY\n        break;\n\n    case 'y':\n        int b;\n        b = 42;    // OKAY\n\n    case 'z':\n        int c[2] = { 0 , 1 };  // OKAY (Huh???)\n        break;\n    };\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "minimum"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1454501246, "post_id": 35176564, "comment_id": 58070196, "body": "When you pass an array to a function, it decays to a pointer. Doing <code>sizeof</code> on a pointer only gives you the size of the pointer and not what it points to."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1454501266, "post_id": 35176564, "comment_id": 58070210, "body": "No it&#39;s not correct in this case. See the second answer on the question you linked."}, {"owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "edited": false, "score": 0, "creation_date": 1454501881, "post_id": 35176564, "comment_id": 58070651, "body": "@Luke Collons: As Joachim Pileborg mentioned in comment just find size of array using <code>sizeof(a)&#47;sizeof(a[0])</code> and pass it to <code>min</code> function as second argument and use it in <code>min</code> function."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1454501437, "post_id": 35176668, "comment_id": 58070332, "body": "Downvoted, because this question has already been answered in more depth in other questions."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454501492, "post_id": 35176668, "comment_id": 58070367, "body": "You say: *a is a pointer to integer array*<code>, but a</code> is not a pointer to an integer array."}, {"owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1454501644, "post_id": 35176668, "comment_id": 58070477, "body": "@user694733, I wrote the answer before seeing the duplicate link. Not sure whether that is enough reason to down vote."}, {"owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454501664, "post_id": 35176668, "comment_id": 58070497, "body": "@2501 what do you mean by <code>a</code> is not a pointer?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454501689, "post_id": 35176668, "comment_id": 58070519, "body": "That is not what I wrote."}, {"owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454501780, "post_id": 35176668, "comment_id": 58070579, "body": "@2501 I didn&#39;t get what you mean. It would have been more helpful to me if you described in more depth."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454501828, "post_id": 35176668, "comment_id": 58070612, "body": "You wrote: <i><code>a</code> is a pointer to integer array</i> , but <code>a</code> is not a pointer to an integer array."}, {"owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454501860, "post_id": 35176668, "comment_id": 58070632, "body": "@2501 Then what is <code>a</code>?"}, {"owner": {"reputation": 2846, "user_id": 5255147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yGBy9.jpg?s=128&g=1", "display_name": "Zain Farooq", "link": "https://stackoverflow.com/users/5255147/zain-farooq"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1454502921, "post_id": 35176668, "comment_id": 58071373, "body": "@user694733 You kind of people are virus in this site"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 2846, "user_id": 5255147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yGBy9.jpg?s=128&g=1", "display_name": "Zain Farooq", "link": "https://stackoverflow.com/users/5255147/zain-farooq"}, "edited": false, "score": 1, "creation_date": 1454503286, "post_id": 35176668, "comment_id": 58071623, "body": "@ZainFarooq With my voting I try to encourage people in certain direction. Feel free to hate me for it, but please remember that I do not hate this answer; I simply think that closing as a dupe was more appropriate than giving answer. Downvotes should not be taken as a personal insult."}, {"owner": {"reputation": 2846, "user_id": 5255147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yGBy9.jpg?s=128&g=1", "display_name": "Zain Farooq", "link": "https://stackoverflow.com/users/5255147/zain-farooq"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1454509300, "post_id": 35176668, "comment_id": 58076038, "body": "This is not my question or answer but I have experienced you people. You people discourage others to ask questions and make answers here. You have a lot of knowledge but you are arrogant of it and you misuse your voting here. @user694733"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 2846, "user_id": 5255147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yGBy9.jpg?s=128&g=1", "display_name": "Zain Farooq", "link": "https://stackoverflow.com/users/5255147/zain-farooq"}, "edited": false, "score": 0, "creation_date": 1454511092, "post_id": 35176668, "comment_id": 58077427, "body": "@ZainFarooq As I said, I want to encourage people to read existing answers as they are quite complete already. I don&#39;t downvote just to make myself feel better. If you want to discuss this further, create a <a href=\"http://stackoverflow.com/help/privileges/chat-rooms\">chat room</a> for it. In the mean time, please avoid <a href=\"http://stackoverflow.com/help/be-nice\">name-calling</a>."}], "tags": [], "owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "is_accepted": true, "score": 1, "last_activity_date": 1454502277, "last_edit_date": 1454502277, "creation_date": 1454501312, "answer_id": 35176668, "question_id": 35176564, "link": "https://stackoverflow.com/questions/35176564/calculating-the-minimum-element-in-an-array/35176668#35176668", "title": "Calculating the minimum element in an array", "body": "<p>Inside the function, <code>a</code> is a pointer to integer array, so <code>sizeof(a)</code> returns the size of a pointer which is typically 4 or 8 bytes depending on the system. Saying that, it is not possible to count the number of elements in a C array using <code>sizeof(a)/sizeof(a[0])</code> inside the function. You need to pass the number of elements explicitly as an argument to the function. </p>\n\n<pre><code>int min(int a[], int n) {\n    ...\n    for (i = 0; i &lt; n; i++) {...}\n    ...\n}\n\nprintf(\"%d\", min(a, sizeof(a)/sizeof(a[0])));\n</code></pre>\n"}], "owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1454501716, "accepted_answer_id": 35176668, "answer_count": 1, "score": -2, "last_activity_date": 1454502277, "creation_date": 1454501031, "last_edit_date": 1495542211, "question_id": 35176564, "link": "https://stackoverflow.com/questions/35176564/calculating-the-minimum-element-in-an-array", "closed_reason": "Duplicate", "title": "Calculating the minimum element in an array", "body": "<p>I've written a little program to determine the minimum element in an array <code>a[]</code>. When I debug, the program seems to be working fine initially but then the for loop in the <code>min()</code> function stops execution after two steps, despite the array being of size 10. </p>\n\n<p>The final output is 23, when it sould be 3.</p>\n\n<p>Is the code <code>sizeof(a)/sizeof(int)</code> incorrect? I found it on another <a href=\"https://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c\">article</a> on stackoverflow.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint min(int[]);\n\nint main(){\n    int a[]={100,23,3,4,5,6,7,8,9,10};\n    printf(\"%d\", min(a));\n    return 0;\n}\n\nint min(int a[]){\n    int min = INT_MAX, i;\n    for(i = 0; i &lt; sizeof(a)/sizeof(a[0]); i++){\n        if((i&gt;=0) &amp;&amp; (a[i]&lt; min))\n            min = a[i];\n    }\n    return min;\n}\n</code></pre>\n"}, {"tags": ["c", "mongoose", "mingw", "winsockets"], "owner": {"reputation": 11, "user_id": 5019534, "user_type": "registered", "profile_image": "https://graph.facebook.com/1671486273071174/picture?type=large", "display_name": "\u9ec3\u51a0\u878d", "link": "https://stackoverflow.com/users/5019534/%e9%bb%83%e5%86%a0%e8%9e%8d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1454499370, "creation_date": 1454499370, "question_id": 35175968, "link": "https://stackoverflow.com/questions/35175968/cant-compile-mongoose-after-add-lpthread-lws2-32-fopenmp-lwsock32-using-min", "title": "Can&#39;t compile mongoose after add -lpthread -lws2_32 -fopenmp -lwsock32 using MinGw", "body": "<p>I using CLion to write my project,Windows 10 is my OS.\nI use MinGw to compile the source code with CMAKE,\nand following the wrong message</p>\n\n<pre><code>CMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_mgr_init':\nC:/Users/admin/Desktop/TB2/mongoose.c:2023: undefined reference to `WSAStartup@8'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_mgr_free':\nC:/Users/admin/Desktop/TB2/mongoose.c:2081: undefined reference to `closesocket@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:2082: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_resolve2':\nC:/Users/admin/Desktop/TB2/mongoose.c:2139: undefined reference to `gethostbyname@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_resolve':\nC:/Users/admin/Desktop/TB2/mongoose.c:2151: undefined reference to `inet_ntoa@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_parse_address':\nC:/Users/admin/Desktop/TB2/mongoose.c:2226: undefined reference to `htonl@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:2227: undefined reference to `htons@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:2238: undefined reference to `htons@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:2246: undefined reference to `htons@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_do_connect':\nC:/Users/admin/Desktop/TB2/mongoose.c:2565: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:2565: undefined reference to `inet_ntoa@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_broadcast':\nC:/Users/admin/Desktop/TB2/mongoose.c:2763: undefined reference to `send@16'\nC:/Users/admin/Desktop/TB2/mongoose.c:2765: undefined reference to `recv@16'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_set_non_blocking_mode':\nC:/Users/admin/Desktop/TB2/mongoose.c:2861: undefined reference to `ioctlsocket@12'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_is_error':\nC:/Users/admin/Desktop/TB2/mongoose.c:2881: undefined reference to `WSAGetLastError@0'\nC:/Users/admin/Desktop/TB2/mongoose.c:2882: undefined reference to `WSAGetLastError@0'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_if_connect_tcp':\nC:/Users/admin/Desktop/TB2/mongoose.c:2890: undefined reference to `socket@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:2899: undefined reference to `connect@12'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_if_connect_udp':\nC:/Users/admin/Desktop/TB2/mongoose.c:2905: undefined reference to `socket@12'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_if_destroy_conn':\nC:/Users/admin/Desktop/TB2/mongoose.c:2950: undefined reference to `closesocket@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:2953: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_accept_conn':\nC:/Users/admin/Desktop/TB2/mongoose.c:2970: undefined reference to `accept@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:2977: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_open_listening_socket':\nC:/Users/admin/Desktop/TB2/mongoose.c:3001: undefined reference to `socket@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3006: undefined reference to `setsockopt@20'\nC:/Users/admin/Desktop/TB2/mongoose.c:3024: undefined reference to `bind@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3025: undefined reference to `listen@8'\nC:/Users/admin/Desktop/TB2/mongoose.c:3029: undefined reference to `getsockname@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3032: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_write_to_socket':\nC:/Users/admin/Desktop/TB2/mongoose.c:3051: undefined reference to `sendto@24'\nC:/Users/admin/Desktop/TB2/mongoose.c:3053: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3053: undefined reference to `inet_ntoa@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3082: undefined reference to `send@16'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_read_from_socket':\nC:/Users/admin/Desktop/TB2/mongoose.c:3127: undefined reference to `recv@16'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_recvfrom':\nC:/Users/admin/Desktop/TB2/mongoose.c:3149: undefined reference to `recvfrom@24'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_handle_udp_read':\nC:/Users/admin/Desktop/TB2/mongoose.c:3162: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3162: undefined reference to `inet_ntoa@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_mgr_handle_conn':\nC:/Users/admin/Desktop/TB2/mongoose.c:3227: undefined reference to `getsockopt@20'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_mgr_handle_ctl_sock':\nC:/Users/admin/Desktop/TB2/mongoose.c:3287: undefined reference to `recv@16'\nC:/Users/admin/Desktop/TB2/mongoose.c:3289: undefined reference to `send@16'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_mgr_poll':\nC:/Users/admin/Desktop/TB2/mongoose.c:3547: undefined reference to `select@20'\nC:/Users/admin/Desktop/TB2/mongoose.c:3553: undefined reference to `__WSAFDIsSet@8'\nC:/Users/admin/Desktop/TB2/mongoose.c:3561: undefined reference to `__WSAFDIsSet@8'\nC:/Users/admin/Desktop/TB2/mongoose.c:3562: undefined reference to `__WSAFDIsSet@8'\nC:/Users/admin/Desktop/TB2/mongoose.c:3563: undefined reference to `__WSAFDIsSet@8'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_socketpair':\nC:/Users/admin/Desktop/TB2/mongoose.c:3604: undefined reference to `htons@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3605: undefined reference to `htonl@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3607: undefined reference to `socket@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3608: undefined reference to `bind@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3609: undefined reference to `listen@8'\nC:/Users/admin/Desktop/TB2/mongoose.c:3610: undefined reference to `getsockname@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3611: undefined reference to `socket@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3612: undefined reference to `connect@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3614: undefined reference to `getsockname@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3615: undefined reference to `connect@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3617: undefined reference to `accept@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3622: undefined reference to `closesocket@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3627: undefined reference to `closesocket@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3628: undefined reference to `closesocket@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:3629: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_sock_get_addr':\nC:/Users/admin/Desktop/TB2/mongoose.c:3643: undefined reference to `getpeername@12'\nC:/Users/admin/Desktop/TB2/mongoose.c:3645: undefined reference to `getsockname@12'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `deliver_websocket_data':\nC:/Users/admin/Desktop/TB2/mongoose.c:4091: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:4094: undefined reference to `ntohl@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:4095: undefined reference to `ntohl@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_send_ws_header':\nC:/Users/admin/Desktop/TB2/mongoose.c:4193: undefined reference to `htons@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:4200: undefined reference to `htonl@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:4202: undefined reference to `htonl@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `wait_until_ready':\nC:/Users/admin/Desktop/TB2/mongoose.c:5806: undefined reference to `select@20'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `push_to_stdin':\nC:/Users/admin/Desktop/TB2/mongoose.c:5815: undefined reference to `recv@16'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `pull_from_stdout':\nC:/Users/admin/Desktop/TB2/mongoose.c:5837: undefined reference to `send@16'\nC:/Users/admin/Desktop/TB2/mongoose.c:5844: undefined reference to `shutdown@8'\nC:/Users/admin/Desktop/TB2/mongoose.c:5845: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `start_process':\nC:/Users/admin/Desktop/TB2/mongoose.c:5931: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `handle_cgi':\nC:/Users/admin/Desktop/TB2/mongoose.c:6241: undefined reference to `closesocket@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_send_http_file':\nC:/Users/admin/Desktop/TB2/mongoose.c:6333: undefined reference to `ntohl@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_sock_addr_to_str':\nC:/Users/admin/Desktop/TB2/mongoose.c:6725: undefined reference to `inet_ntoa@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:6731: undefined reference to `ntohs@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `parse_mqtt':\nC:/Users/admin/Desktop/TB2/mongoose.c:7137: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7141: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7148: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7157: undefined reference to `ntohs@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_send_mqtt_handshake_opt':\nC:/Users/admin/Desktop/TB2/mongoose.c:7225: undefined reference to `htons@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7228: undefined reference to `htons@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_mqtt_publish':\nC:/Users/admin/Desktop/TB2/mongoose.c:7261: undefined reference to `htons@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7262: undefined reference to `htons@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_mqtt_subscribe':\nC:/Users/admin/Desktop/TB2/mongoose.c:7280: undefined reference to `htons@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj):C:/Users/admin/Desktop/TB2/mongoose.c:7285: more undefined references to `htons@4' follow\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_dns_encode_record':\nC:/Users/admin/Desktop/TB2/mongoose.c:7699: undefined reference to `htonl@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7714: undefined reference to `htons@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_send_dns_query':\nC:/Users/admin/Desktop/TB2/mongoose.c:7751: undefined reference to `htons@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_parse_dns':\nC:/Users/admin/Desktop/TB2/mongoose.c:7823: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7824: undefined reference to `ntohs@4'\nC:/Users/admin/Desktop/TB2/mongoose.c:7825: undefined reference to `ntohs@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `dns_handler':\nC:/Users/admin/Desktop/TB2/mongoose.c:7906: undefined reference to `htons@4'\nCMakeFiles\\TB2.dir/objects.a(mongoose.c.obj): In function `mg_resolve_from_hosts_file':\nC:/Users/admin/Desktop/TB2/mongoose.c:8132: undefined reference to `htonl@4'\ncollect2.exe: error: ld returned 1 exit status\nCMakeFiles\\TB2.dir\\build.make:225: recipe for target 'TB2.exe' failed\nmingw32-make.exe[2]: *** [TB2.exe] Error 1\nmingw32-make.exe[1]: *** [CMakeFiles/TB2.dir/all] Error 2\nCMakeFiles\\Makefile2:66: recipe for target 'CMakeFiles/TB2.dir/all' failed\nMakefile:82: recipe for target 'all' failed\nmingw32-make.exe: *** [all] Error 2\n</code></pre>\n\n<p>and my Cmake write like this</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(TB2)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 \")\n\nset(CMAKE_C_FLAGS \"-std=c99 -static-libgcc -w -lpthread -lws2_32 -fopenmp -lwsock32\")\n\nset(SOURCE_FILES main.c r2nat_to_local.h mongoose.c mongoose.h sqlite3.c sqlite3.h TUtility.c TUtility.h cJSON.c cJSON.h url_parser.c url_parser.h)\n\nadd_executable(TB2 ${SOURCE_FILES})\n\ntarget_link_libraries(TB2 sqlite3)\n\nadd_definitions(-DUNICODE -D_UNICODE -DMG_ENABLE_THREADS -DDEBUG -DDEBUG -DHAVE_MD5 -DRA100)\n</code></pre>\n\n<p>I don't know where is worng. After I add -lws2_32 -fopenmp -lwsock32</p>\n\n<p>How to fix the error?</p>\n"}, {"tags": ["c", "multithreading", "openmp", "critical-section", "reduction"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 2, "creation_date": 1454499877, "post_id": 35175957, "comment_id": 58069287, "body": "And who initializes the variables? Seems like UB."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4433856"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454505546, "post_id": 35175957, "comment_id": 58073210, "body": "OpenMP does that in <b>reduction</b> directive automatically (0 for + and -, 1 for * and /)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1454505755, "post_id": 35175957, "comment_id": 58073380, "body": "For private copies, but not for the visible variable. What happens if you initialize it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4433856"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1454508534, "post_id": 35175957, "comment_id": 58075470, "body": "I was convinced that the reduction implicitly privatises reduced values."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1454518348, "post_id": 35175957, "comment_id": 58082964, "body": "@nullPointer You are technically correct. But why rely on OpenMP implicit behavior when you can be verbose and fully convince yourself that what you are writing is working exactly as you expect it to?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4433856"}, "edited": false, "score": 0, "creation_date": 1454524651, "post_id": 35175957, "comment_id": 58087034, "body": "I can&#39;t agree more - it&#39;s better to write a little more code just to avoid assumptions and get things straightforward as they should be. Nevertheless, at some point while playing with the new toy, which OpenMP is for me, I obtained such code with behaviour I wouldn&#39;t expect. Examples like these are IMO the most valuable since they give you a little experience. Even though it&#39;s basic incrementation."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4433856"}, "edited": false, "score": 1, "creation_date": 1454509743, "post_id": 35179079, "comment_id": 58076373, "body": "Thank you for a great answer! Double count explains a lot. However, I&#39;m not entirely sure about the &#39;undefined behaviour&#39; you&#39;ve mentioned. I have this course at the university and our tutor has never initialised the reduced value - I was told that they are initiated by the OpenMP with 0 or 1, depending on the reduction&#39;s operator. Tbh I&#39;ve done the same, and beside the situation above, it&#39;s always worked.  EDIT: Although, I must say that when I initialised the values x,y without changing anything else the code worked just as @2501 suggested"}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 1, "creation_date": 1454510081, "post_id": 35179079, "comment_id": 58076659, "body": "Yes, I see that OpenMP defines the default initializers for reduction variables.  However, ISO C does not have a default initializer for local variables (<a href=\"http://stackoverflow.com/a/1597426/2189128\">stackoverflow.com/a/1597426/2189128</a>), which means your program has undefined behavior if OpenMP is not enabled.  You don&#39;t want that.  Also, the <code>critical</code> variable does not have a default initializer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4433856"}, "edited": false, "score": 0, "creation_date": 1454524210, "post_id": 35179079, "comment_id": 58086786, "body": "I believe your last sentence is also very crucial in terms of my problem. Once again thanks for helping me understand it :)"}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1454527411, "post_id": 35179079, "comment_id": 58088696, "body": "@nullPointer Indeed, I didn&#39;t call that out explicitly, but yes, that would explain your results.  Thanks for noting it."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 2, "creation_date": 1454594878, "post_id": 35179079, "comment_id": 58121954, "body": "Your first sentence makes no sense to me. The presence of <code>critical</code> in no way changes the reduction properties besides slowing the code down. The code is simply UB because <code>x</code> and <code>y</code> are not initialised. Setting them to <code>0</code> before the <code>parallel</code> regions results in the correct output. The <b>private</b> copies of the reduction variables are initialised to zero, but then the result from the reduction is added to the values the variables had before the region, hence UB."}], "tags": [], "owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "is_accepted": false, "score": 6, "last_activity_date": 1454597368, "last_edit_date": 1454597368, "creation_date": 1454507878, "answer_id": 35179079, "question_id": 35175957, "link": "https://stackoverflow.com/questions/35175957/openmp-critical-section-reduction/35179079#35179079", "title": "OpenMP - critical section + reduction", "body": "<p>The primary problem with your code is that <code>x</code> and <code>y</code> are not initialized.  A second problem is that the variable used in the critical section should be <code>shared</code> instead of a reduction variable, although this should only affect performance, not correctness.</p>\n\n<p>I've corrected your code and modified it to demonstrate how <code>reduce</code>, <code>critical</code> and <code>atomic</code> all produce the same result.</p>\n\n<h1>Source</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;omp.h&gt;\n\nint main(int argc, char* argv[])\n{\n    int iter = (argc&gt;1) ? atoi(argv[1]) : 50000;\n    int r=0, c=0, a=0;\n\n    printf(\"OpenMP threads = %d\\n\", omp_get_max_threads() );\n\n    #pragma omp parallel reduction(+:r) shared(c,a)\n    {\n        #pragma omp for\n        for (int i = 0; i &lt; iter; i++ ) {\n            r++;\n            #pragma omp critical\n            c++;\n            #pragma omp atomic\n            a++;\n        }\n    }\n    printf(\"reduce   = %d\\n\"\n           \"critical = %d\\n\"\n           \"atomic   = %d\\n\", r, c, a);\n    return 0;\n}\n</code></pre>\n\n<h1>Compile</h1>\n\n<pre><code>icc -O3 -Wall -qopenmp -std=c99 redcrit.c\n</code></pre>\n\n<h1>Output</h1>\n\n<pre><code>OpenMP threads = 4\nreduce   = 50000\ncritical = 50000\natomic   = 50000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "is_accepted": true, "score": 6, "last_activity_date": 1454598070, "last_edit_date": 1454598070, "creation_date": 1454595994, "answer_id": 35203589, "question_id": 35175957, "link": "https://stackoverflow.com/questions/35175957/openmp-critical-section-reduction/35203589#35203589", "title": "OpenMP - critical section + reduction", "body": "<p>Your code simply exhibits undefined behaviour and the presence of <code>critical</code> has nothing to do with you getting wrong results.</p>\n\n<blockquote>\n  <p>Did the <strong>critical</strong> somehow made <strong>y</strong> public (shared)?</p>\n</blockquote>\n\n<p>No, it did not. It only slows down the loop by preventing the concurrent execution of the threads.</p>\n\n<p>What you are missing is that the result of the reduction operation is <strong>combined with the initial value of the reduction variable</strong>, i.e. with the value the variable had before the parallel region. In your case, both <code>x</code> and <code>y</code> have random initial values and therefore you are getting random results. That the initial value <code>x</code> happens to be 0 in your case and that's why you are getting the correct result for it is simply UB. Initialising both <code>x</code> and <code>y</code> makes your code behave as expected.</p>\n\n<p>The OpenMP specification states:</p>\n\n<blockquote>\n  <p>The <code>reduction</code> clause specifies a <em>reduction-identifier</em> and one or more list items. For each list item, a private copy is created in each implicit task or SIMD lane, and is initialized with the initializer value of the <em>reduction-identifier</em>. After the end of the region, <strong>the original list item</strong> is <strong>updated</strong> with the values of the private copies using the combiner associated with the <em>reduction-identifier</em>.</p>\n</blockquote>\n\n<p>Here is the execution of your original code with 4 threads:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>$ icc -O3 -openmp -std=c99 -o cnc cnc.c\n$ OMP_NUM_THREADS=1 ./cnc\nnon critical = 82765\ncritical = 50000\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 82765\ncritical = 50000\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 50000\ncritical = 50000\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 82765\ncritical = 50194\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 82767\ncritical = 2112072800\n</code></pre>\n\n<p>The first run with one thread demonstrates that it is not due to a data race.</p>\n\n<p>With <code>int x=0, y=0;</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ icc -O3 -openmp -std=c99 -o cnc cnc.c\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 50000\ncritical = 50000\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 50000\ncritical = 50000\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 50000\ncritical = 50000\n$ OMP_NUM_THREADS=4 ./cnc\nnon critical = 50000\ncritical = 50000\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4433856"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2976, "favorite_count": 0, "accepted_answer_id": 35203589, "answer_count": 2, "score": 2, "last_activity_date": 1454598070, "creation_date": 1454499340, "question_id": 35175957, "link": "https://stackoverflow.com/questions/35175957/openmp-critical-section-reduction", "title": "OpenMP - critical section + reduction", "body": "<p>I'm currently learning Parallel Programming using C and OpenMP.\nI wanted to write simple code where two shared values are beeing incremented by multiple threads.\nFirstly I used <strong>reduction</strong> directive and it worked as it was meant to. Then I switched to using the <strong>critical</strong> directive to initiate critical section - it also worked.\nOut of curiosity I've tried to merge these two solution and check the behaviour. I expected two valid, equal values.<br/><br/>code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"omp.h\"\n\n#define ITER 50000\n\nint main( void )\n{\n    int x, y;\n    #pragma omp parallel reduction(+:x,y)\n    {\n       #pragma omp for\n       for (int i = 0; i &lt; ITER; i++ )  \n       {\n            x++;\n            #pragma omp critical\n            y++;\n       }\n    }\n\n    printf(\"non critical = %d\\ncritical = %d\\n\", x, y);\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<blockquote>\n  <p>non critical = 50000<br/>\n  critical = 4246432</p>\n</blockquote>\n\n<p>Of course output is random when it comes to 'critical' (variable y), the other behaves as expected and is always 50000.  </p>\n\n<p>The behaviour of <strong>x</strong> is understandable - <strong>reduction</strong> makes it private in scope of single thread. After the incrementation values from threads are summed up and passed to the non-local x.  </p>\n\n<p>What I don't understand is the behaviour of <strong>y</strong>. It's private just like <strong>x</strong> but it's also inside the <strong>critical</strong> section so it 'has more than one reason' to be inaccessible from other threads. Yet what, I think, happens is the race condition. Did the <strong>critical</strong> somehow made <strong>y</strong> public (shared)?  </p>\n\n<p>I know that this code makes no sense since it's enough to use only one of <strong>reduction</strong> / <strong>critical</strong>. I'd like just to know what's behind such behaviour. </p>\n"}, {"tags": ["c", "frama-c", "abstract-interpretation"], "answers": [{"comments": [{"owner": {"reputation": 1426, "user_id": 800385, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ZEcEy.jpg?s=128&g=1", "display_name": "Maor Veitsman", "link": "https://stackoverflow.com/users/800385/maor-veitsman"}, "edited": false, "score": 0, "creation_date": 1454577170, "post_id": 35182664, "comment_id": 58109895, "body": "I don&#39;t seem to be getting the correct results, log_input is [5, MaxInt] and log_global [MinInt, MaxInt], perhaps this is a version issue? I&#39;m using sodium. Also if I understand correctly, this is not applicable to unknown or very large intervals, right?"}, {"owner": {"reputation": 3212, "user_id": 1295435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf39389382759c77d2ffc06815de574f?s=128&d=identicon&r=PG&f=1", "display_name": "byako", "link": "https://stackoverflow.com/users/1295435/byako"}, "reply_to_user": {"reputation": 1426, "user_id": 800385, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ZEcEy.jpg?s=128&g=1", "display_name": "Maor Veitsman", "link": "https://stackoverflow.com/users/800385/maor-veitsman"}, "edited": false, "score": 0, "creation_date": 1454591139, "post_id": 35182664, "comment_id": 58119372, "body": "My mistake, <code>Frama_C_interval_split</code> is not part of the released version. You can obtain the same result by writing a (tedious) ACSL disjunction after the call to <code>Frama_C_interval</code>: <code>&#47;&#47;@ assert n == -10 | n == -9 || ... n == 10</code>. And indeed, this won&#39;t work well for large intervals. On the other hand, if you do not aim for full automaticity, you can do a smart partioning: <code>&#47;&#47;@ assert n &lt;= 0 || n &gt; 0</code> will work in  this case."}], "tags": [], "owner": {"reputation": 3212, "user_id": 1295435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf39389382759c77d2ffc06815de574f?s=128&d=identicon&r=PG&f=1", "display_name": "byako", "link": "https://stackoverflow.com/users/1295435/byako"}, "is_accepted": false, "score": 3, "last_activity_date": 1454517744, "last_edit_date": 1454517744, "creation_date": 1454517430, "answer_id": 35182664, "question_id": 35175736, "link": "https://stackoverflow.com/questions/35175736/calculate-reachability-to-a-function-using-frama-cs-value-analysis/35182664#35182664", "title": "Calculate reachability to a function using frama-c&#39;s value analysis", "body": "<p>Here is a possible solution. Use the builtin <code>Frama_C_interval_split</code> and an appropriate <code>-slevel N</code> (here, at least <code>N=21</code>). The function <code>sum</code> will be examined N times, one for each possible value of N, and the result will be precise</p>\n\n<pre><code>int n = Frama_C_interval_split(-10, 10);\n</code></pre>\n\n<p>The results:</p>\n\n<pre><code> [value] Values at end of function sum:\n  log_input \u2208 [5..14]\n  log_global \u2208 [1..10]\n  __retres \u2208 {0}\n</code></pre>\n\n<p>(Basically, this amounts to performing manual model-checking, so the performances won't be good for large values of N.)</p>\n"}], "owner": {"reputation": 1426, "user_id": 800385, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ZEcEy.jpg?s=128&g=1", "display_name": "Maor Veitsman", "link": "https://stackoverflow.com/users/800385/maor-veitsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1454517744, "creation_date": 1454498726, "question_id": 35175736, "link": "https://stackoverflow.com/questions/35175736/calculate-reachability-to-a-function-using-frama-cs-value-analysis", "title": "Calculate reachability to a function using frama-c&#39;s value analysis", "body": "<p>Here is my example:</p>\n\n<pre><code>int in;\nint sum(int n){\n    int log_input = n;\n    int log_global = in;\n    return 0;\n}\n\nint main(){\n    int n = Frama_C_interval(-10, 10);\n    in = n;\n    if (n &gt; 0){\n        sum(n + 4);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>What I'd like to do is to find the range of the input variable n when initialized in main that results in reaching the function sum. The correct range in this example is [1, 10].</p>\n\n<p>In the sample, I'd like to \"save\" the original input in a global value <strong>in</strong> and reintroduce it in the function sum by assigning it into the variable <strong>log_global</strong> and thus discovering the original input that resulted in reaching the function.\nWhen running frama-c on this sample, we get that the range of log_input is [5, 14] and the range of log_global is [-10, 10]. \nI understand why this happens - the value of <strong>in</strong> is set at the start of <strong>main</strong> and is not affected by further manipulations on <strong>n</strong>.</p>\n\n<p>I was wondering whether there is a simple way to change this in frama-c? Perhaps a simple modification in frama-c's code?</p>\n\n<p>One unrelated idea I had was to manipulate the if statement in main:</p>\n\n<pre><code>if (in &gt; 0){\n    sum(in + 4);\n}\n</code></pre>\n\n<p>I used the global variable instead of <strong>n</strong>. This indeed results in the right range but this solution doesn't scale well to more complicated function and deeper call stacks.</p>\n"}, {"tags": ["c", "opengl", "glut"], "answers": [{"comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1454499603, "post_id": 35175829, "comment_id": 58069098, "body": "Thanks! I hope it is also clear from my code that I&#39;ve read the documentation, about &quot;timers occurring only once&quot;. Please pardon my using inappropriate term for <b>deregistering</b>. If I got you right, in the code snippet after  <code>else</code> should say <code>;</code>  ?"}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "reply_to_user": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1454500210, "post_id": 35175829, "comment_id": 58069507, "body": "Yes, but that&#39;s probably not enough. Updated the answer with code."}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1454583317, "post_id": 35175829, "comment_id": 58114333, "body": "Thanks, you probably meant <code>GLboolean isCallbackRegistered = GL_FALSE</code>, not <code>int isCallbackRegistered = GL_FALSE</code> in line 1 of your code - as you haven&#39;t reacted, I assumed freedom of editing it myself. The rest of your code seems to work well against several independent sources assigning <code>GLboolean condition = GL_TRUE</code>, possibly attempting to register the callback without prior checking if it is already registered, IMHO. &#39;GLboolean condition&#39; has to have the same scope as &#39;GLboolean isCallbackRegistered&#39;."}], "tags": [], "owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "is_accepted": true, "score": 3, "last_activity_date": 1454588312, "last_edit_date": 1454588312, "creation_date": 1454499009, "answer_id": 35175829, "question_id": 35175485, "link": "https://stackoverflow.com/questions/35175485/taming-the-gluttimerfunc/35175829#35175829", "title": "taming the glutTimerFunc", "body": "<p>You can simply avoid registering the callback when <code>condition</code> is false, instead of making it run more slowly. From <code>glutTimerFunc</code> documentation:</p>\n\n<blockquote>\n  <p>Unlike most other callbacks, timers only occur once. </p>\n</blockquote>\n\n<p>Then, when the <code>condition</code> becomes true again, register the callback, from the code that sets <code>condition</code> to true. Be careful not to re-register an already scheduled callback - you should keep another flag that tells whether the callback is currently registered or not, as the docs says that \"you cannot deregister a timer callback\".</p>\n\n<p>Code example:</p>\n\n<pre><code>GLboolean isCallbackRegistered = GL_FALSE;\n\nvoid timerCallback(int par)\n{\n  if(condition == GL_TRUE){\n    update(1);\n    glutTimerFunc(FAST, timerCB, FAST); \n  } else {\n    isCallbackRegistered = GL_FALSE;\n  }\n}\n\n// ... the code the changes the value of `condition`\ncondition = GL_TRUE;\nif(isCallbackRegistered != GL_TRUE) {\n  isCallbackRegistered = GL_TRUE;\n  glutTimerFunc(FAST, timerCB, FAST); \n}\n</code></pre>\n"}], "owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 35175829, "answer_count": 1, "score": 1, "last_activity_date": 1454588312, "creation_date": 1454497989, "last_edit_date": 1454583390, "question_id": 35175485, "link": "https://stackoverflow.com/questions/35175485/taming-the-gluttimerfunc", "title": "taming the glutTimerFunc", "body": "<p>I am using the <strong>GLUT timer function</strong> in a scenario slightly more complex than covered in tutorials and FAQs. Simplified abstract is the following:</p>\n\n<p>If a <strong><em>condition</em></strong> is met, screen has to redraw timely and in short intervals. If a condition isn't met, it means the re-display is controlled by other mechanisms, therefore the timer function shouldn't stay in the way by repeating the work already being done otherwise. As it cannot be <strong><em>deregistered</em></strong>, does it have to be programmatically slowed down and put out of purpose? Is the following code snippet a proper way of implementing it in <strong>C</strong>?</p>\n\n<pre><code>#define SLOW 1000\n#define FAST 100\nGLboolean condition = GL_FALSE\n\n//   {   \u2026   } //mechanism for setting the condition\n\nvoid update (int val)\n{\nif(val)glutPostRedisplay();\nreturn;\n}\n\nvoid timerCallback(int par)\n{\nif(condition == GL_TRUE){\n  update(1);\n  glutTimerFunc(FAST, timerCB, FAST); \n  }else {\n  glutTimerFunc(SLOW, timerCB, SLOW);\n  }\nreturn;\n}\n</code></pre>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["c", "gcc", "ld"], "comments": [{"owner": {"reputation": 2039, "user_id": 837515, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/58b4d4cbe8c9ae5011ad3ded31bcfdd8?s=128&d=identicon&r=PG", "display_name": "cbinder", "link": "https://stackoverflow.com/users/837515/cbinder"}, "edited": false, "score": 0, "creation_date": 1454559838, "post_id": 35175472, "comment_id": 58102027, "body": "Anybody out there ? Do I need to add more info."}], "owner": {"reputation": 2039, "user_id": 837515, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/58b4d4cbe8c9ae5011ad3ded31bcfdd8?s=128&d=identicon&r=PG", "display_name": "cbinder", "link": "https://stackoverflow.com/users/837515/cbinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1454497961, "creation_date": 1454497961, "question_id": 35175472, "link": "https://stackoverflow.com/questions/35175472/how-to-disable-creation-of-eh-symbols-in-library", "title": "How to disable creation of .eh symbols in library", "body": "<p>I have built an executable linking it with curl and other custom libraries. Though executable is getting built successfully but I am getting the following warnings:</p>\n\n<pre><code>ld: warning, can't find matching function for eh symbol _Curl_urldecode.eh\nld: warning, can't find matching function for eh symbol _curl_free.eh\nld: warning, can't find matching function for eh symbol _Curl_blockread_all.eh\nld: warning, can't find matching function for eh symbol _Curl_SOCKS4.eh\nld: warning, can't find matching function for eh symbol _Curl_SOCKS5.eh\nld: warning, can't find matching function for eh symbol _Curl_http_setup_conn.eh\nld: warning, can't find matching function for eh symbol _Curl_http.eh\nld: warning, can't find matching function for eh symbol _Curl_http_done.eh\nld: warning, can't find matching function for eh symbol _Curl_http_connect.eh\n</code></pre>\n\n<p>These seems to be some symbols helpful for debugging and alike but I don't want these symbols as well as the warnings of such sort. I read through some posts and passed the following CFLAGS while building the executable</p>\n\n<pre><code>-fno-asynchronous-unwind-tables -dead_strip\n</code></pre>\n\n<p>But it didn't work. Any clue regarding these .eh symbols and meaning of functions for this symbols. I just want to suppress these warnings.</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1454497050, "post_id": 35175065, "comment_id": 58067336, "body": "Make the array size an additional parameter to your functions instead of a global constant."}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1454497218, "post_id": 35175065, "comment_id": 58067450, "body": "@MOehm I was thinking of doing something like that, but I wasn&#39;t sure how to go about it. Could you clarify?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1454499692, "post_id": 35175065, "comment_id": 58069155, "body": "Overall, you might want to look at the standard C <code>qsort</code> function prototype, for ideas how to write such function interfaces in generic ways."}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1454515594, "post_id": 35175065, "comment_id": 58080830, "body": "in naive sort, invert the conditions of the while loop so it never tries to compute a[j] if j&lt;0."}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1454522166, "post_id": 35175065, "comment_id": 58085555, "body": "@Puck You mean just switch the order round?"}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1454534760, "post_id": 35175065, "comment_id": 58093223, "body": "if you put ((j &gt;= 0) &amp;&amp; (t &lt; a[j])), with the operator &amp;&amp;, if the first condition is not true, it doesn&#39;t try the second, meaning no seg fault if j is out of bound of a."}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1454534804, "post_id": 35175065, "comment_id": 58093248, "body": "@Puck I tried that but it still didn&#39;t go beyond 100 :("}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1454535246, "post_id": 35175065, "comment_id": 58093494, "body": "Maybe edit the post so we can see the current state of the problem. Did you replaced the array with dynamic allocation (malloc)? (don&#39;t know if related to your problem, but it bother me to see that)"}], "answers": [{"comments": [{"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454497954, "post_id": 35175411, "comment_id": 58067951, "body": "But what about varying the random array being created in the main function?"}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "reply_to_user": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 1, "creation_date": 1454498985, "post_id": 35175411, "comment_id": 58068654, "body": "No problem here, if you want to have the length in a variable, use malloc: int len = 5678; int * a = malloc(len*sizeof(int)); for(int i=0; i&lt;len; i++)         a[i]= rand() % (MAX+1);  Don&#39;t forget to free, particularly if you put that in a loop to test several values!!"}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454511618, "post_id": 35175411, "comment_id": 58077802, "body": "Would it be wrong if I put all the contents of the main function in another void function <code>perf(int L)</code> and instantiate it for different values of <code>L</code> in <code>main</code>? Why would I have to modify <code>swap</code>?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454511965, "post_id": 35175411, "comment_id": 58078042, "body": "@LukeCollins: You can put the core code into a separate function, which you then call with a length parameter, <code>perf(L)</code>. But you&#39;d still have to communicate the array length to all functions that you call, because <code>L</code> would be local to <code>perf</code>. That means that all array functions should have both array data and length as arguments. (The modification of <code>swap</code> is arguably not necessary. It just provides you with a possibility to enforce the array bounds. In your example, I&#39;d leave <code>swap</code> as it is.)"}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 1, "creation_date": 1454512016, "post_id": 35175411, "comment_id": 58078081, "body": "Yeah, actually the smarter_sort already take care the length of the array in its argument. You would just have to add the length as a parameter of naive_sort to make it proper. But there is still a reason to modify the other functions: to really make sure no segmentation fault will occur, even if you use these function in another context (for example the swap function can be useful for other things)"}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454512391, "post_id": 35175411, "comment_id": 58078348, "body": "I&#39;ve edited the post to show you guys what I&#39;ve done, it&#39;s still not working  now. :("}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1454515359, "post_id": 35175411, "comment_id": 58080661, "body": "Don&#39;t use array with variable length, instead use malloc-free at begin-end of perf_routine: int * a = malloc(L*sizeof(int); --&gt; free(a);"}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "edited": false, "score": 0, "creation_date": 1454552419, "post_id": 35175411, "comment_id": 58099845, "body": "@Puck Can you clarify a bit more on how to use <code>malloc</code>? I forgot how it works."}], "tags": [], "owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "is_accepted": false, "score": 4, "last_activity_date": 1454497797, "creation_date": 1454497797, "answer_id": 35175411, "question_id": 35175065, "link": "https://stackoverflow.com/questions/35175065/varying-the-size-of-an-array-in-c/35175411#35175411", "title": "Varying the size of an Array in C", "body": "<p>I would, in each function gives the length of the array in parameters and make sure you don't try to reach element outside of array, for example swap would become:</p>\n\n<pre><code>int swap(int *a, int length, int i, int j)\n{\n    if(i&gt;=length || j&gt;=length)\n        return -1;\n    int t=a[i];\n    a[i]=a[j];\n    a[j]=t;\n    return 0;\n}\n</code></pre>\n\n<p>Also note the return -1 or 0 to indicates a failure. Apply that to the rest of the code and you'll have something that can be applied to any array.</p>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 3, "last_activity_date": 1454516693, "last_edit_date": 1454516693, "creation_date": 1454498209, "answer_id": 35175564, "question_id": 35175065, "link": "https://stackoverflow.com/questions/35175065/varying-the-size-of-an-array-in-c/35175564#35175564", "title": "Varying the size of an Array in C", "body": "<p>When arrays are passed to functions, they are passed as (or \"decay into\") pointer to their first element. There is no way to know about the size of the array.</p>\n\n<p>It is therefore very common to pass the actual length as additional parameter to the function. An example of your naive sort with three arrays of different size if below.</p>\n\n<p>Of course, one must take care to keep the array and length in sync. Passing a length that is too big may result in undefined behaviour. For example, calling <code>fill(tiny, LARGE)</code> in the example below may result in disaster.</p>\n\n<p>(Aside: An array may have a maximum length or capacity and an actual length. For example if you want to read up to ten numbers from a file, you must pass an array of length 10, but if there are only four numbers read, you are dealing with two additional parameters here: the possible array length, 10, and the actual length, 4. That's not the case here, though.)</p>\n\n<p>Well, here goes. All three array functions have the same signature: They take an array and its length.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nvoid sort(int a[], size_t len)\n{\n    size_t i, j;\n\n    for (i = 1; i &lt; len; i++) {\n        int t = a[i];\n\n        j = i - 1;\n\n        while (j &gt;= 0 &amp;&amp; t &lt; a[j]) {\n            a[j + 1] = a[j];\n            j--;\n        }\n\n        a[j + 1] = t;\n    }\n}\n\nvoid fill(int a[], size_t len)\n{\n    size_t i;\n\n    for (i = 0; i &lt; len; i++) {\n        a[i] = rand() / (1.0 + RAND_MAX) * 100;\n    }\n}\n\nvoid print(int a[], size_t len)\n{\n    size_t i;\n\n    for (i = 0; i &lt; len; i++) {\n        if (i) printf(\", \");\n        printf(\"%d\", a[i]);\n    }\n\n    puts(\"\");\n}\n\n#define TINY 3\n#define MEDIUM 10\n#define LARGE 15\n\nint main(void)\n{\n    int tiny[TINY];\n    int medium[MEDIUM];\n    int large[LARGE];\n\n    srand(time(NULL));\n\n    fill(tiny, TINY);\n    fill(medium, MEDIUM);\n    fill(large, LARGE);\n\n    print(tiny, TINY);\n    print(medium, MEDIUM);\n    print(large, LARGE);\n\n    sort(tiny, TINY);\n    sort(medium, MEDIUM);\n    sort(large, LARGE);\n\n    print(tiny, TINY);\n    print(medium, MEDIUM);\n    print(large, LARGE);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 1, "accepted_answer_id": 35175564, "answer_count": 2, "score": 2, "last_activity_date": 1454516693, "creation_date": 1454496809, "last_edit_date": 1454512304, "question_id": 35175065, "link": "https://stackoverflow.com/questions/35175065/varying-the-size-of-an-array-in-c", "title": "Varying the size of an Array in C", "body": "<p>I have written a program which generates a random array and sorts it by using both the insertion and quicksort algorithms. The program also measures the runtime of each function. The size of the array is defined in the preamble as a parameterised macro <code>L</code>. My question is:</p>\n\n<blockquote>\n  <p>How can I test both sorting algorithms with arrays of various sizes in a single execution? </p>\n</blockquote>\n\n<p>I want my program to sort arrays of size <code>L=10, 100, 1000, 5000</code> and <code>10000</code> in one execution. My program code is detailed below.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n//Random Array Length\n#define MAX 100\n#define L 10\n\nvoid naive_sort(int[]);\nvoid smarter_sort(int[],int,int);\nvoid swap(int[],int,int);\nint choose_piv(int[],int,int);\n\nint main(){\n    int i, a[L], b[L];\n    clock_t tic, toc;\n\n    //Generate an array of random numbers\n    for(i=0; i&lt;L; i++)\n        a[i]= rand() % (MAX+1);\n\n    //Define b identical to a for fair comparison\n    for(i=0; i&lt;L; i++)\n        b[i]=a[i];\n\n    //Unsorted Array\n    printf(\"\\nUnsorted array:   \");\n    for(i=0; i&lt;L; i++)\n            printf(\"%d    \", a[i]);\n\n    //Insertion Sort (1e)\n    tic = clock();\n    naive_sort(a);\n    printf(\"\\nInsertion Sort:   \");\n            for(i=0; i&lt;L; i++)\n                printf(\"%d    \", a[i]);\n    toc = clock();\n    printf(\"  (Runtime: %f seconds)\\n\", (double)(toc-tic)/CLOCKS_PER_SEC);\n\n    //Quicksort (1f)\n    tic = clock();\n    smarter_sort(b,0,L-1);\n    printf(\"Quicksort:        \");\n            for(i=0; i&lt;L; i++)\n                printf(\"%d    \", b[i]);\n    toc = clock();\n   printf(\"  (Runtime: %f seconds)\\n\", (double)(toc-tic)/CLOCKS_PER_SEC);\n\n   return 0;\n}\n\nvoid naive_sort(int a[]){\n    int i, j, t;\n    for(i=1; i &lt; L; i++){\n        t=a[i];\n        j=i-1;\n        while((t &lt; a[j]) &amp;&amp; (j &gt;= 0)){\n            a[j+1] = a[j];\n            j--;\n        }\n        a[j+1]=t;\n    }\n}\n\nvoid smarter_sort(int a[], int l, int r){\n    if(r &gt; l){\n        int piv = choose_piv(a, l, r);\n        smarter_sort(a, l, piv-1);\n        smarter_sort(a, piv+1, r);\n    }\n}\n\nvoid swap(int a[], int i, int j){\n    int t=a[i];\n    a[i]=a[j];\n    a[j]=t;\n}\n\nint choose_piv(int a[], int l, int r){\n    int pL = l, pR = r;\n    int piv = l;\n    while (pL &lt; pR){\n        while(a[pL] &lt; a[piv])\n            pL++;\n        while(a[pR] &gt; a[piv])\n            pR--;\n        if(pL &lt; pR)\n            swap(a, pL, pR);\n    }\n    swap(a, piv, pR);\n    return pR;\n}\n</code></pre>\n\n<p>I would appreciate any feedback.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> I modified the code as suggested, and it worked for the small values. But for the quicksort case <code>L=100</code> and beyond it, I don't get any output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ACTUS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ACTUS.png\" alt=\"enter image description here\"></a></p>\n\n<p>and as you can see, the few outputs I get are zero. What's wrong with the code?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/*\n * Task 1, question h\n */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n//Random Array Length\n#define MAX 100\n\nvoid perf_routine(int);\nvoid naive_sort(int[],int);\nvoid smarter_sort(int[],int,int);\nvoid swap(int[],int,int);\nint choose_piv(int[],int,int);\n\nint main(){\n    perf_routine(10);\n    perf_routine(100);\n    perf_routine(1000);\n    perf_routine(5000);\n    perf_routine(10000);\n   return 0;\n}\n\nvoid perf_routine(int L){\n    int i, a[L], b[L];\n        clock_t tic, toc;\n\n        printf(\"Arrays of Length %d:\\n\", L);\n\n        //Generate an array of random numbers\n        for(i=0; i&lt;L; i++)\n            a[i]= rand() % (MAX+1);\n\n        //Define b identical to a for fair comparison\n        for(i=0; i&lt;L; i++)\n            b[i]=a[i];\n\n        //Insertion Sort (1e)\n        tic = clock();\n        naive_sort(a, L);\n        toc = clock();\n        printf(\"Insertion Sort Runtime: %f seconds\\n\", (double)(toc-tic)/CLOCKS_PER_SEC);\n\n        //Quicksort (1f)\n        tic = clock();\n        smarter_sort(b,0,L-1);\n        toc = clock();\n       printf(\"Quicksort Runtime: %f seconds\\n\", (double)(toc-tic)/CLOCKS_PER_SEC);\n}\n\nvoid naive_sort(int a[], int L){\n    int i, j, t;\n    for(i=1; i &lt; L; i++){\n        t=a[i];\n        j=i-1;\n        while((t &lt; a[j]) &amp;&amp; (j &gt;= 0)){\n            a[j+1] = a[j];\n            j--;\n        }\n        a[j+1]=t;\n    }\n}\n\nvoid smarter_sort(int a[], int l, int r){\n    if(r &gt; l){\n        int piv = choose_piv(a, l, r);\n        smarter_sort(a, l, piv-1);\n        smarter_sort(a, piv+1, r);\n    }\n}\n\nvoid swap(int a[], int i, int j){\n    int t=a[i];\n    a[i]=a[j];\n    a[j]=t;\n}\n\nint choose_piv(int a[], int l, int r){\n    int pL = l, pR = r;\n    int piv = l;\n    while (pL &lt; pR){\n        while(a[pL] &lt; a[piv])\n            pL++;\n        while(a[pR] &gt; a[piv])\n            pR--;\n        if(pL &lt; pR)\n            swap(a, pL, pR);\n    }\n    swap(a, piv, pR);\n    return pR;\n}\n</code></pre>\n"}, {"tags": ["c#", "c", "datagridview"], "comments": [{"owner": {"reputation": 4659, "user_id": 856152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8271c3ef2813f7b0c57a42a647f47adb?s=128&d=identicon&r=PG", "display_name": "Smartis", "link": "https://stackoverflow.com/users/856152/smartis"}, "edited": false, "score": 0, "creation_date": 1454496947, "post_id": 35175038, "comment_id": 58067250, "body": "DataGridView itself doesn&#39;t have any encoding associated with it. The problem must be located in the value behind. Please provide more information."}, {"owner": {"reputation": 4659, "user_id": 856152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8271c3ef2813f7b0c57a42a647f47adb?s=128&d=identicon&r=PG", "display_name": "Smartis", "link": "https://stackoverflow.com/users/856152/smartis"}, "edited": false, "score": 1, "creation_date": 1454497086, "post_id": 35175038, "comment_id": 58067366, "body": "Another idea would be, that the default font of your operating system don&#39;t support the letters. Tahoma is the default system font of Windows XP, on Vista, Windows 7 it is Segoe UI. Check it."}], "owner": {"reputation": 23, "user_id": 5592434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2402e6da8e6b11c383a812c1ddf3eb?s=128&d=identicon&r=PG&f=1", "display_name": "david1928", "link": "https://stackoverflow.com/users/5592434/david1928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1059, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1454496750, "creation_date": 1454496750, "question_id": 35175038, "link": "https://stackoverflow.com/questions/35175038/c-datagridview-encoding-utf-8", "title": "C# - datagridview encoding utf-8", "body": "<p>I have problem with datagridview encoding utf-8. There are Georgian letters shown as ????? in the picture, and here is link: <a href=\"http://postimg.org/image/63o1evn77/\" rel=\"nofollow\">http://postimg.org/image/63o1evn77/</a>\nThank you beforehand.</p>\n"}, {"tags": ["c", "icap"], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 2461817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CpGi0.jpg?s=128&g=1", "display_name": "SYA-KE", "link": "https://stackoverflow.com/users/2461817/sya-ke"}, "is_accepted": true, "score": 1, "last_activity_date": 1458399929, "creation_date": 1458399929, "answer_id": 36103318, "question_id": 35174747, "link": "https://stackoverflow.com/questions/35174747/create-a-custom-response-to-an-http-request-using-c-icap/36103318#36103318", "title": "Create a custom response to an HTTP request using c-icap", "body": "<p>ci_http_response() is not for \"modify\" but \"create\".\nif you want to modify service_io() or end_of_data()</p>\n"}], "owner": {"reputation": 288, "user_id": 4030580, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9180b9eb22269ef014d6563e68035344?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Shahid", "link": "https://stackoverflow.com/users/4030580/ahmed-shahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 36103318, "answer_count": 1, "score": 1, "last_activity_date": 1458399929, "creation_date": 1454495986, "question_id": 35174747, "link": "https://stackoverflow.com/questions/35174747/create-a-custom-response-to-an-http-request-using-c-icap", "title": "Create a custom response to an HTTP request using c-icap", "body": "<p>I am using c-icap to modify HTTP transactions. According to the documentation. I should be able to do so by using the following functions.</p>\n\n<pre><code>int ci_http_response_create (   ci_request_t *  req,\nint     has_reshdr,\nint     has_body     \n)   \n</code></pre>\n\n<p><a href=\"http://www.firefly.kutc.kansai-u.ac.jp/~k843966/c-icap/doc/group__HTTP.html\" rel=\"nofollow\">http://www.firefly.kutc.kansai-u.ac.jp/~k843966/c-icap/doc/group__HTTP.html</a></p>\n\n<p>I tried this,however, all this does is add's to the response header's that are already there. I want to block the request from getting to the server and send my own customized response. Is there something else I need to do to be able to do this?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1454494101, "post_id": 35173897, "comment_id": 58065263, "body": "It works - The shell is probably setting the process group id  the same as the process id. Perhaps do a fork and try it in the child process"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1454494167, "post_id": 35173897, "comment_id": 58065312, "body": "First try describing in what situation the PID and PGID would be different. Then reproduce that before trying again."}, {"owner": {"reputation": 81, "user_id": 5609037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142c9aaf9efe601d2896036c72db3c66?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Dupond", "link": "https://stackoverflow.com/users/5609037/thomas-dupond"}, "edited": false, "score": 0, "creation_date": 1454496206, "post_id": 35173897, "comment_id": 58066726, "body": "Ok, I tried to fork, so this time : For the parent process : The pgid is the same as the pid...  And for the child process the pgid is the same as the ppid... And sometimes, it just print one for the ppid. But I gess i did something wrong in the fork"}, {"owner": {"reputation": 1009, "user_id": 1749566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BU4GG.jpg?s=128&g=1", "display_name": "Snaipe", "link": "https://stackoverflow.com/users/1749566/snaipe"}, "edited": false, "score": 1, "creation_date": 1454679188, "post_id": 35173897, "comment_id": 58165195, "body": "@ThomasDupond the ppid being 1 tells you that the parent process died before the child process, and the child process has been adopted by the init process (PID 1)."}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1535459461, "post_id": 35173897, "comment_id": 91066076, "body": "Minimal runnable <code>setpgid</code> and <code>getpgid</code> where they differ: <a href=\"https://stackoverflow.com/questions/6108953/how-does-ctrl-c-terminate-a-child-process/52042970#52042970\" title=\"how does ctrl c terminate a child process\">stackoverflow.com/questions/6108953/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5876740, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rcEspsnPwQM/AAAAAAAAAAI/AAAAAAAAABc/PHJJBklORQY/photo.jpg?sz=128", "display_name": "ashvathy suriyanarayanan", "link": "https://stackoverflow.com/users/5876740/ashvathy-suriyanarayanan"}, "is_accepted": false, "score": -2, "last_activity_date": 1454497074, "last_edit_date": 1454497074, "creation_date": 1454494762, "answer_id": 35174238, "question_id": 35173897, "link": "https://stackoverflow.com/questions/35173897/how-does-getpgid-work/35174238#35174238", "title": "How does getpgid() work?", "body": "<p>It is a group ID of the process specified by pid.</p>\n\n<p>Suppose if we consider pid as zero then the ID of the current process is used in it. <code>getpgrp()</code> and <code>getpgid(0)</code> are equivalent to each other.</p>\n\n<p>e.g. <code>pid_t getpgid(pid_t pid);</code></p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5609037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142c9aaf9efe601d2896036c72db3c66?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Dupond", "link": "https://stackoverflow.com/users/5609037/thomas-dupond"}, "edited": false, "score": 0, "creation_date": 1454496756, "post_id": 35174829, "comment_id": 58067117, "body": "And how can this help me understand why the process group id is the same as the pid ?"}, {"owner": {"reputation": 81, "user_id": 5609037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142c9aaf9efe601d2896036c72db3c66?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Dupond", "link": "https://stackoverflow.com/users/5609037/thomas-dupond"}, "edited": false, "score": 0, "creation_date": 1454497668, "post_id": 35174829, "comment_id": 58067757, "body": "Ok. I guess I need to read the man page of &quot;ps&quot;, since I cannot even see Firefox running, while using &quot;ps&quot;. Only two things are displayed : bash and ps..."}, {"owner": {"reputation": 81, "user_id": 5609037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142c9aaf9efe601d2896036c72db3c66?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Dupond", "link": "https://stackoverflow.com/users/5609037/thomas-dupond"}, "edited": false, "score": 0, "creation_date": 1454498435, "post_id": 35174829, "comment_id": 58068295, "body": "Ok, never mind. I understand my mistake... &quot;ps -j&quot; said PID and PGID are the same. Thanks for the help ;)"}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 0, "last_activity_date": 1454496218, "creation_date": 1454496218, "answer_id": 35174829, "question_id": 35173897, "link": "https://stackoverflow.com/questions/35173897/how-does-getpgid-work/35174829#35174829", "title": "How does getpgid() work?", "body": "<p>getpid() returns the process ID of the current process.\nWhen a process is running, the kernel schedules its runtime - especially it assigns a PID to it - such information is stored inside the kernel address space, in data structures (e.g. inside a task struct).\nThus, when a process calls the getpid() system call, the kernel just has to look in the task structure of the calling process.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5609037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142c9aaf9efe601d2896036c72db3c66?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Dupond", "link": "https://stackoverflow.com/users/5609037/thomas-dupond"}, "edited": false, "score": 0, "creation_date": 1454765986, "post_id": 35225115, "comment_id": 58197194, "body": "Thank you very much. This was much more instructive than the previous answer."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 2, "last_activity_date": 1454678694, "last_edit_date": 1454678694, "creation_date": 1454677874, "answer_id": 35225115, "question_id": 35173897, "link": "https://stackoverflow.com/questions/35173897/how-does-getpgid-work/35225115#35225115", "title": "How does getpgid() work?", "body": "<p>The process group leader is always the one that has <code>pid == pgid</code>, so perhaps you are making always the same test (on a process group leader) and this is the reason of getting always the same <code>pgid</code> as the <code>pid</code> of the process.  When a process becomes a group leader, the kernel assigns it it's own <code>pid</code>  as the <code>pgid</code>, so perhaps you are always getting that if you are checking in only one process.  Bash uses process groups to distinguish background jobs and do job control, so every command you execute from a <code>bash(1)</code> shell will have a new process group and one of these processes (the only one if you only launched one process) will have the same the <code>pgid</code> and the <code>pid</code> of one of the processes of the job you are requesting.</p>\n\n<p>The reason of this logic (to use the pid of the process group leader as the pgid) is to not have to deal with active process groups as no more groups than processed can be in the system... so when a new group id is needed the nearest process available is the own process that triggers the new process group creation, so assigning its own <code>pid</code> as <code>pgid</code> is no harmful.</p>\n\n<p>For a simple example... just try the same program you used to demonstrate the <code>pid</code> and <code>pgid</code> values in a long pipe by piping them (you should try to print the output to stderr instead of stdout or all the outputs will get lost in the input buffer of the next process in the pipe):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    int pid = getpid();\n    fprintf(stderr, \"pid=%d; pgid=%d\\n\", pid, getpgid(pid));\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>$ testpgid | testpgid | testpgid\npid=3819; pgid=3819\npid=3820; pgid=3819\npid=3821; pgid=3819\n$ testpgid | testpgid | testpgid\npid=3833; pgid=3833\npid=3835; pgid=3833\npid=3834; pgid=3833\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5609037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142c9aaf9efe601d2896036c72db3c66?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Dupond", "link": "https://stackoverflow.com/users/5609037/thomas-dupond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4382, "favorite_count": 0, "accepted_answer_id": 35225115, "answer_count": 3, "score": 1, "last_activity_date": 1454678694, "creation_date": 1454493938, "last_edit_date": 1454495057, "question_id": 35173897, "link": "https://stackoverflow.com/questions/35173897/how-does-getpgid-work", "title": "How does getpgid() work?", "body": "<p>I'm trying to get the pid, the ppid and the <strong>pgid</strong>\nand no matter what I do <code>getpgid(pid)</code> always gives me the pid.  </p>\n\n<p>At first, I was using it like this: </p>\n\n<pre><code> printf(\"PGID: %d\", getpgid());\n</code></pre>\n\n<p>Then I realized, <code>getpgid</code> was taking a pid as argument so I did this:</p>\n\n<pre><code> printf(\"PGID: %d\", getpgid(getpid()));\n</code></pre>\n\n<p>But this is still giving me the same number as the pid...</p>\n\n<p>So I tried this:</p>\n\n<pre><code> pid_t pid;  \n pid = getpid(); \n printf(\"PGID: %d\", getpgid(pid));\n</code></pre>\n\n<p>And this still doesn't work... Any idea why?</p>\n\n<p>PS: I'm a beginner in c.</p>\n"}, {"tags": ["c", "pthreads", "semaphore"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1454492892, "post_id": 35173335, "comment_id": 58064394, "body": "<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html\" rel=\"nofollow noreferrer\"><code>&lt;semaphore.h&gt;</code></a> is a POSIX header file, which means it only exist on POSIX system like Linux, BSD and OSX. If you want to use Windows native semaphores I suggest you start reading <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681924%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">about synchronization on MSDN</a>."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1454493440, "post_id": 35173335, "comment_id": 58064795, "body": "If you want to use Linux libs, install <a href=\"http://www.mingw.org/\" rel=\"nofollow noreferrer\">MinGW</a>"}, {"owner": {"reputation": 31, "user_id": 5823722, "user_type": "registered", "profile_image": "https://graph.facebook.com/1220368334657556/picture?type=large", "display_name": "\u12a5\u1235\u12ac\u1295\u12f5\u122d \u1270\u1293\u130d\u1228\u1281", "link": "https://stackoverflow.com/users/5823722/%e1%8a%a5%e1%88%b5%e1%8a%ac%e1%8a%95%e1%8b%b5%e1%88%ad-%e1%89%b0%e1%8a%93%e1%8c%8d%e1%88%a8%e1%8a%81"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1454496602, "post_id": 35173335, "comment_id": 58067025, "body": "@JoachimPileborg I have no problem in linux environment with this, .. the reason i wanted to use windows is because , i&#39;m new to c and wanted an IDE for c with all the good stuff that an IDE provides, .. gedit and the eclipse for linux doesn&#39;t seem to have the functionality... like syntax error check.. highlight occurrence.."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1454496806, "post_id": 35173335, "comment_id": 58067155, "body": "Eclipse should be pretty complete, what is it you miss? As for the problem, that&#39;s what I&#39;m saying, the <code>&lt;semaphore.h&gt;</code> header exist on Linux but not on Windows. If you want to use native threading primitives then you need to learn about them, which is what my <a href=\"https://msdn.microsoft.com/en-us/default.aspx\" rel=\"nofollow noreferrer\">MSDN (MicroSoft Developer Network)</a> link was for.For Windows specific things, MSDN is the site you should default to."}, {"owner": {"reputation": 31, "user_id": 5823722, "user_type": "registered", "profile_image": "https://graph.facebook.com/1220368334657556/picture?type=large", "display_name": "\u12a5\u1235\u12ac\u1295\u12f5\u122d \u1270\u1293\u130d\u1228\u1281", "link": "https://stackoverflow.com/users/5823722/%e1%8a%a5%e1%88%b5%e1%8a%ac%e1%8a%95%e1%8b%b5%e1%88%ad-%e1%89%b0%e1%8a%93%e1%8c%8d%e1%88%a8%e1%8a%81"}, "edited": false, "score": 0, "creation_date": 1454498309, "post_id": 35173335, "comment_id": 58068202, "body": "got it. using eclipse in linux now, it is working. thanx for help."}], "owner": {"reputation": 31, "user_id": 5823722, "user_type": "registered", "profile_image": "https://graph.facebook.com/1220368334657556/picture?type=large", "display_name": "\u12a5\u1235\u12ac\u1295\u12f5\u122d \u1270\u1293\u130d\u1228\u1281", "link": "https://stackoverflow.com/users/5823722/%e1%8a%a5%e1%88%b5%e1%8a%ac%e1%8a%95%e1%8b%b5%e1%88%ad-%e1%89%b0%e1%8a%93%e1%8c%8d%e1%88%a8%e1%8a%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1454492428, "creation_date": 1454492428, "question_id": 35173335, "link": "https://stackoverflow.com/questions/35173335/eclipse-c-c-mars-1-release-4-5-1-how-to-include-the-semaphore", "title": "Eclipse C/C++ Mars.1 Release (4.5.1) how to include the semaphore ?", "body": "<p>I'm experimenting with threads and synchronization of threads in c, in eclipse(mars) on windows. <code>#include &lt;semaphore.h&gt;</code> library is missing. how to install it for this IDE? older solutions doesn't seem to apply..  </p>\n"}, {"tags": ["c", "operating-system"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1454491391, "post_id": 35172889, "comment_id": 58063346, "body": "Im voting to close this question because: <i>Many good questions generate some degree of opinion based on expert experience, but answers to this question will tend to be almost entirely based on opinions, rather than facts, references, or specific expertise.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 2, "last_activity_date": 1454491571, "creation_date": 1454491571, "answer_id": 35173018, "question_id": 35172889, "link": "https://stackoverflow.com/questions/35172889/what-is-the-purpose-of-condition-variables-in-monitors/35173018#35173018", "title": "What is the purpose of condition variables in Monitors?", "body": "<p>A <strong>condition variable</strong> is basically a <strong>container of threads</strong> that are waiting for a certain condition. Monitors provide a mechanism for threads to temporarily give up exclusive access in order to wait for some condition to be met, before regaining exclusive access and resuming their task.Reference link <a href=\"https://en.wikipedia.org/wiki/Monitor_(synchronization)\" rel=\"nofollow\">here</a>.</p>\n\n<p>Conceptually a condition variable is a queue of threads, associated with a monitor, on which a thread may wait for some condition to become true.</p>\n"}], "owner": {"reputation": 845, "user_id": 3082254, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Xt3H7.jpg?s=128&g=1", "display_name": "Muzahir Hussain", "link": "https://stackoverflow.com/users/3082254/muzahir-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "closed_date": 1454499598, "accepted_answer_id": 35173018, "answer_count": 1, "score": 0, "last_activity_date": 1454491571, "creation_date": 1454491224, "question_id": 35172889, "link": "https://stackoverflow.com/questions/35172889/what-is-the-purpose-of-condition-variables-in-monitors", "closed_reason": "Needs details or clarity", "title": "What is the purpose of condition variables in Monitors?", "body": "<p>What is the purpose of condition variables in Monitors? Why really do we need the condition variables? It may sound something stupid to ask, but never mind I am really new at this. Thanks in advance</p>\n"}, {"tags": ["c", "sorting", "integer-math"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1454487855, "post_id": 35171823, "comment_id": 58061116, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. You might also want to learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1454488653, "post_id": 35171823, "comment_id": 58061527, "body": "I don&#39;t see how this is a duplicate. Should have been closed as &quot;unclear what you are asking&quot; or &quot;too broad&quot; as it isn&#39;t clear what specific problem the OP has while implementing this."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1454491234, "post_id": 35171823, "comment_id": 58063230, "body": "I tried hammering this into something somewhat answerable. Let me know what you think and rollback as necessary."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1454491531, "post_id": 35171823, "comment_id": 58063431, "body": "@user3386109 I&#39;ll fix that now, I didn&#39;t intend to remove the &quot;Unique&quot;"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1454491746, "post_id": 35171823, "comment_id": 58063587, "body": "@Magisch Thanks, I thought perhaps you knew something about the problem that I didn&#39;t. My bet is that there is no solution."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1454491792, "post_id": 35171823, "comment_id": 58063622, "body": "@user3386109 Oh, there is. The solution can be inferred out of nneo&#39;s answer to this."}, {"owner": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1454492395, "post_id": 35171823, "comment_id": 58064042, "body": "@Magisch this is a spec"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1454493599, "post_id": 35171823, "comment_id": 58064895, "body": "I&#39;m not sure what this question is, apart from bad."}, {"owner": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1454493861, "post_id": 35171823, "comment_id": 58065087, "body": "@Magisch mainly liked the answer he said in socvr. So let&#39;s move on."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454494112, "post_id": 35172249, "comment_id": 58065271, "body": "Nice - even though It does quite ensure neither a nor b is zero. (<code>a == UINT_MAX</code>)"}, {"owner": {"reputation": 1286, "user_id": 3668368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cee76bdb17420321a7f4c9be16ccd9?s=128&d=identicon&r=PG&f=1", "display_name": "Rob11311", "link": "https://stackoverflow.com/users/3668368/rob11311"}, "edited": false, "score": 1, "creation_date": 1454515865, "post_id": 35172249, "comment_id": 58081017, "body": "Yes, using the idea from this min function, a max function based on it is indeed possible.  Whilst not too broad, posting an answer is probably spoiling someone&#39;s course assignment so I refrained from posting code.  Dealing with integer overflow handling is unrealistic without conditionals, values within a range seems a reasonable assumption to me for an artificially constrained example program."}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 8, "last_activity_date": 1454491905, "last_edit_date": 1454491905, "creation_date": 1454489274, "answer_id": 35172249, "question_id": 35171823, "link": "https://stackoverflow.com/questions/35171823/sorting-integers-in-c-with-only-basic-math-functions/35172249#35172249", "title": "Sorting integers in C with only basic math functions", "body": "<p>This is a bit tricky. With only \"mathematical\" arithmetic functions, I don't think it would be possible (i.e. using true mathematical operators on real numbers).</p>\n\n<p>But, luckily, this is C and we have integer operations like integer divide. Integer division has the useful property that <code>a/b == 0</code> if <code>a&lt;b</code> and <code>a/b &gt; 0</code> if <code>a&gt;b</code>. We can exploit this to write a <code>min</code> function that returns the smaller number from two you input:</p>\n\n<pre><code>unsigned math_min(unsigned a, unsigned b) {\n    a++; b++; // ensure neither a nor b is zero\n    unsigned c = ((a/b)*b + (b/a)*a) / ((a/b) + (b/a));\n    return c-1; // correct for earlier increment\n}\n</code></pre>\n\n<p>This works by computing <code>a/b*b</code> and <code>b/a*a</code>. If we assume <code>a</code> and <code>b</code> are distinct from each other and positive, then exactly one of these will be nonzero - the one corresponding to the smaller value. (In fact, this function works even if <code>a==b</code> since in that case we add <code>a+b</code> and divide by two).</p>\n\n<p>Using this \"math-only\" <code>min</code> function, you should be able to implement a sorting operation; this is left as an exercise.</p>\n"}], "owner": {"reputation": 33, "user_id": 5876777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8A-NgKcpl8s/AAAAAAAAAAI/AAAAAAAAADU/h2nfl4yJbh0/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/5876777/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "closed_date": 1454513957, "answer_count": 1, "score": -6, "last_activity_date": 1454493751, "creation_date": 1454487695, "last_edit_date": 1454491540, "question_id": 35171823, "link": "https://stackoverflow.com/questions/35171823/sorting-integers-in-c-with-only-basic-math-functions", "closed_reason": "Needs more focus", "title": "Sorting integers in C with only basic math functions", "body": "<p>Im attempting to write a program in C</p>\n\n<p>Given an input of three unique, non negative <code>int</code> type numbers, the program should sort them and output them sorted in an increasing order. For this program, only the basic mathematical constructs are permitted. (<code>+</code>,<code>-</code>,<code>/</code>,<code>*</code>,<code>%</code>)</p>\n\n<p>Example of an input would be:</p>\n\n<blockquote>\n  <p>Input three integer numbers:\n  32 29 21</p>\n</blockquote>\n\n<p>And then, the example output should be:</p>\n\n<blockquote>\n  <p>Sorted numbers: 21 29 31</p>\n</blockquote>\n\n<p>The use of logical operators, like <code>&gt;</code> <code>&lt;</code> and <code>==</code> as well as selection statements <code>if</code> <code>for</code> and <code>switch</code> is explicitly not allowed.</p>\n"}, {"tags": ["c", "input", "console", "fgetc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1454487735, "post_id": 35171799, "comment_id": 58061040, "body": "The C specification says that numerical digits always have to be consecutive, no matter the encoding. That means you can do e.g. <code>&#39;1&#39; - &#39;0&#39;</code> to get the integer value <code>1</code>. From there it&#39;s easy to create integer values no matter the base used for the input. No need to store in a string for later use with <code>atoi</code>. If you don&#39;t want to construct the number on the fly, and use <code>atoi</code>, this comment gives you a hint about that too."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1454488434, "post_id": 35171799, "comment_id": 58061410, "body": "Quick fix is to do <code>count += c - &#39;0&#39;;</code>"}, {"owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454496598, "post_id": 35171799, "comment_id": 58067020, "body": "Lundin, when I made that change, it converted &quot;11&quot; to 2"}], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454498069, "post_id": 35171951, "comment_id": 58068030, "body": "Thanks Klas.  I have to actually iterate through the file to find other text and numbers while keeping track of them so I would need some sort of line position with the above?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454508868, "post_id": 35171951, "comment_id": 58075688, "body": "You can use <code>ftell</code> to find the current position in the file. You should also consider the answer by @DevSolar which may be a better fit for your problem."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1454488194, "creation_date": 1454488194, "answer_id": 35171951, "question_id": 35171799, "link": "https://stackoverflow.com/questions/35171799/best-way-to-get-numbers-from-input/35171951#35171951", "title": "Best way to get numbers from input?", "body": "<p>Most people would use <code>fscanf</code>:</p>\n\n<pre><code>int number, items_scanned;\nitems_scanned = fscanf(fp, \"%d\", &amp;number);\nif (items_scanned == 0) {\n     /* Scanning for a number failed */\n     printf(\"Scan failed!\\n\");\n}\nprintf(\"Found number: %d\\n\", number);\n</code></pre>\n\n<p><code>fscanf</code> skips whitespace. It will succeed if it finds a number and fail if it finds something else.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454490482, "post_id": 35172465, "comment_id": 58062722, "body": "Even though variations of this question come up from time to time and similar answers discussing <code>*scanf()</code> and <code>strto*()</code>,  this is one of the best ones yet for a learner."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454490540, "post_id": 35172465, "comment_id": 58062761, "body": "@chux: Thanks. Together with &quot;what is Unicode, and how do I use it in C/C++&quot;, it&#39;s one of those I&#39;ve been thinking about writing a FAQ entry for and never got around to doing it (yet). Seems I answer one of them every other week. ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454490641, "post_id": 35172465, "comment_id": 58062822, "body": "Contact me should you embark on that and want a (pre-)review."}, {"owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454498388, "post_id": 35172465, "comment_id": 58068261, "body": "Thanks DevSolar. Im trying to grasp what you wrote simply because of unfamiliarity with C. I need to iterate through a file and find numbers and words that I will later use. Fgetc seemed to be the most natural since I can continue from where I last found something. I should be able to use scanptr for that? Part of me is thinking of switching to C++ so I can just work with strings but feels like I&#39;m quitting if I do ha"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454499961, "post_id": 35172465, "comment_id": 58069354, "body": "@cpd1: Going for C++ is not &quot;quitting&quot;. It&#39;s a much more powerful language that makes many things much easier -- but comes with its own pitfalls. Generally speaking, while it&#39;s a good thing to work along some &quot;toy&quot; application while learning a language, it&#39;s not a good idea to try <i>both</i> learning a languagne <i>and</i> solving a &quot;real&quot; problem at the same time. You want to first get a &quot;feel&quot; for a language, and the tools it provides, so you can select the right tools for any given problem. Otherwise, you&#39;ll always play blind man&#39;s bluff, and become frustrated."}, {"owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454500348, "post_id": 35172465, "comment_id": 58069596, "body": "I hear you and I wish I had more time to learn before I try coding up something but I really don&#39;t.  This is just a small piece of something larger I have to put together and I&#39;ve spent the last few days trying to get my head around the parsing part.  Likely because I&#39;m thinking of it as how I would handle it in Java with strings etc"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454514303, "post_id": 35172465, "comment_id": 58079831, "body": "I hoped the scope of that <a href=\"http://stackoverflow.com/questions/35178520\">Q&amp;A</a> would have been much smaller along the lines of &quot;How to read / parse an integer in C?&quot; - it is fairly broad."}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 4, "last_activity_date": 1454490594, "last_edit_date": 1495540346, "creation_date": 1454489967, "answer_id": 35172465, "question_id": 35171799, "link": "https://stackoverflow.com/questions/35171799/best-way-to-get-numbers-from-input/35172465#35172465", "title": "Best way to get numbers from input?", "body": "<p>While it looks like the natural solution, <strong>I usually advice against using <code>fscanf()</code> on potentially malformed input</strong>.</p>\n\n<p>There are several issues with the function, among them:</p>\n\n<ul>\n<li>The inability to recover gracefully from an error (short of <code>ftell()</code> / <code>fseek()</code>), because you don't know where <em>exactly</em> it stopped parsing input.</li>\n<li>The ease with which it leads to using uninitialized values (if the format failed to match the input, and you didn't check the return code properly).</li>\n<li>Some corner cases where <code>fscanf()</code> chokes on input where <code>atoi()</code> / <code>strtol()</code> don't (<a href=\"https://stackoverflow.com/questions/1425730/difference-between-scanf-and-strtol-strtod-in-parsing-numbers\">\"0xz\"</a>...).</li>\n</ul>\n\n<p>All this relegates <code>fscanf()</code> to read <em>well-formatted</em> input only, i.e. things your own program had written before in a known format.</p>\n\n<p>For any kind of input that might <em>not</em> be in the expected format, <strong>I recommend reading a line at a time (<code>fgets()</code>), and parsing it in-memory</strong>, for example with <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>strtol()</code></a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n\n#define LINE_BUFFER_SIZE 256;\n\n// ...\nchar line[ LINE_BUFFER_SIZE ];\nfgets( line, LINE_BUFFER_SIZE, fp );\nchar * scanptr;\nerrno = 0;\nlong number = strtol( line, &amp;scanptr, 0 );\nif ( scanptr == line )\n{\n    // not a number...\n}\n</code></pre>\n\n<ul>\n<li><code>scanptr</code> now points to where number parsing ended.</li>\n<li><code>number</code> contains the number parsed, 0 if line did not start with a number, and <code>LONG_MAX</code> resp. <code>LONG_MIN</code> if the number found is out of <code>long</code> range (in which case <code>errno == ERANGE</code> as well).</li>\n</ul>\n\n<p>I don't know your exact requirements, so I cannot give a good example for what to do if you don't find a number, or what to do with the text. But since you got the line (or, the first <code>LINE_BUFFER_SIZE</code> characters of a longer line...) in memory, you have the whole range of the <a href=\"http://en.cppreference.com/w/c/string/byte\" rel=\"nofollow noreferrer\">string functions</a> at your disposal. <a href=\"http://en.cppreference.com/w/c/string/byte/strpbrk\" rel=\"nofollow noreferrer\"><code>strpbrk( line, \"0123456789\" )</code></a> could be used to scan for the next digit, or <code>strpbrk( line, \"+-0123456789\" )</code> if you might have <code>+-</code> in your input...</p>\n"}], "owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1580029397, "creation_date": 1454487604, "last_edit_date": 1580029397, "question_id": 35171799, "link": "https://stackoverflow.com/questions/35171799/best-way-to-get-numbers-from-input", "title": "Best way to get numbers from input?", "body": "<p>I would like to loop character by character from an input file that has text and numbers.</p>\n\n<p>I thought I could just loop</p>\n\n<pre><code>char count;\n\nwhile( c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t' ) {\n  count += c;\n  c = fgetc(fp);\n}\n</code></pre>\n\n<p>To say get \"11\" from the text file and then use <code>atoi()</code> to convert to an int but I then realized I'm just adding ASCII numbers.</p>\n\n<p>I'm fairly new to C and from what I understand strings are just char arrays - does this mean I have to put \"1\" and \"1\" into a char array?</p>\n\n<p>But then I would have to worry about array size and converting that to a number?</p>\n"}, {"tags": ["c", "multithreading", "openmp", "execution-time"], "comments": [{"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1454487578, "post_id": 35171628, "comment_id": 58060928, "body": "On a non-realtime platform I would not really suspect so little difference. Here a better way would be to see the disassembled code to comprehand the change. Then you can indirectly estimate the performance delta."}], "answers": [{"tags": [], "owner": {"reputation": 6306, "user_id": 301717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb6fdb16164a361eec8872e6b46dc95?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Pouiller", "link": "https://stackoverflow.com/users/301717/j%c3%a9r%c3%b4me-pouiller"}, "is_accepted": true, "score": 0, "last_activity_date": 1454487674, "creation_date": 1454487674, "answer_id": 35171818, "question_id": 35171628, "link": "https://stackoverflow.com/questions/35171628/execution-time-with-parallel-for/35171818#35171818", "title": "Execution time with parallel for", "body": "<p><code>clock()</code> return value of <code>CLOCK_PROCESS_CPUTIME_ID</code> clock. This clock is described in <code>clock_gettime(3)</code>:</p>\n\n<pre><code>CLOCK_PROCESS_CPUTIME_ID (since Linux 2.6.12)\n          Per-process CPU-time clock (measures CPU time consumed by all\n          threads in the process).\n</code></pre>\n\n<p>Use <code>clock_gettime()</code> with <code>CLOCK_MONOTONIC</code> in order to get correct measure.</p>\n"}], "owner": {"reputation": 197, "user_id": 4054572, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/dmtbd.jpg?s=128&g=1", "display_name": "Davide R.", "link": "https://stackoverflow.com/users/4054572/davide-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "closed_date": 1454497900, "accepted_answer_id": 35171818, "answer_count": 1, "score": 0, "last_activity_date": 1454487674, "creation_date": 1454487057, "question_id": 35171628, "link": "https://stackoverflow.com/questions/35171628/execution-time-with-parallel-for", "closed_reason": "Duplicate", "title": "Execution time with parallel for", "body": "<p>I was curious about the time spent to do a for with a single thread, or with multithreading (using openmp), so I wrote this code to see the difference:</p>\n\n<pre><code>#define N 1000000000 // 10^9\n\nint main(int argc, char* argv[])\n{\n    int i, *a = malloc(N * sizeof *a);\n    clock_t begin, end;\n    double time_spent;\n\n    begin = clock();\n\n    #pragma omp parallel for\n    for(i=0;i&lt;N;i++)\n        a[i] = i;\n\n    end = clock();\n    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;\n    printf(\"Time Spent: %lf\\n\", time_spent);\n    free(a);\n    return 0;\n}\n</code></pre>\n\n<p>But then a strange thing happens: with the <code>#pragma</code> rule, the execution time was about 4.6s, but without it, it was about 3.6s. How can it be possibile? Am I doing something wrong? Or maybe I'm not using the correct timing function?</p>\n"}, {"tags": ["c", "output"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1454487262, "post_id": 35171556, "comment_id": 58060765, "body": "If it is C (as stated in the title, why the C++ tag?)"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1454487305, "post_id": 35171556, "comment_id": 58060783, "body": "I tried hammering this into shape a tad."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 1, "creation_date": 1454487394, "post_id": 35171556, "comment_id": 58060828, "body": "Use marks[i] instead of (*marks)."}, {"owner": {"reputation": 806, "user_id": 1482201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/536d19e96ddde3c04777185e4e418957?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/1482201/tano"}, "edited": false, "score": 0, "creation_date": 1454488833, "post_id": 35171556, "comment_id": 58061641, "body": "You&#39;re always writing and reading the first <code>mark</code>. Note that in the two <code>for</code> cycles you&#39;re not making use of the index <code>i</code>. Instead you should use the index to select the correct <code>mark</code> in the <code>marks</code> array. For example <code>scanf(&quot;%d&quot;,&amp;marks[i].x)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "is_accepted": false, "score": 0, "last_activity_date": 1454486972, "creation_date": 1454486972, "answer_id": 35171604, "question_id": 35171556, "link": "https://stackoverflow.com/questions/35171556/struct-and-values-entered-in-c/35171604#35171604", "title": "struct and values entered in C", "body": "<p>change :</p>\n\n<pre><code>scanf(\"%d\",&amp;marks[i].x);\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>sum= sum+marks[i].x;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 3214670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822c3edc7d842c642172f5f9b98ce3b1?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Smaro\u0144", "link": "https://stackoverflow.com/users/3214670/piotr-smaro%c5%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1454487116, "creation_date": 1454487116, "answer_id": 35171645, "question_id": 35171556, "link": "https://stackoverflow.com/questions/35171556/struct-and-values-entered-in-c/35171645#35171645", "title": "struct and values entered in C", "body": "<p>Inside <code>main</code> in this piece of code:</p>\n\n<pre><code> for (int i = 0; i &lt; n; i++ ){\n        printf(\"Enter mark: \");\n        scanf(\"%d\",&amp;(*marks).x);\n    }\n</code></pre>\n\n<p>You are always assigning mark to 1st array element.</p>\n\n<p>Inside <code>fun</code> in this piece of code:</p>\n\n<pre><code>for (i = 0; i &lt; n; i++ ){\n        sum= sum+(*marks).x;\n    }\n</code></pre>\n\n<p>you are not iterating over the marks array, but instead always reading 1st array value.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": true, "score": 2, "last_activity_date": 1454487522, "creation_date": 1454487522, "answer_id": 35171779, "question_id": 35171556, "link": "https://stackoverflow.com/questions/35171556/struct-and-values-entered-in-c/35171779#35171779", "title": "struct and values entered in C", "body": "<pre><code>    scanf(\"%d\",&amp;(*marks).x);\n</code></pre>\n\n<p>Means you are reading into the first <code>mark</code> in <code>marks</code>.</p>\n\n<p>You already have a for loop and a counter variable for reading into it, so use it. change </p>\n\n<pre><code>sum= sum+(*marks).x;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>sum= sum+marks[i].x;\n</code></pre>\n\n<p>which is also equivalent to</p>\n\n<pre><code>sum = sum+(*marks+i).x;\n</code></pre>\n\n<p>Do the same for</p>\n\n<pre><code>scanf(\"%d\",&amp;(*marks).x);\n</code></pre>\n\n<p>change it to</p>\n\n<pre><code>scanf(\"%d\",&amp;marks[i].x);\n</code></pre>\n\n<p>again, </p>\n\n<p><code>marks[i].x</code> is equivalent to <code>(*marks+i).x</code></p>\n\n<p>The point is that you want to access the second <code>mark</code> in <code>marks</code> in your second iteration of your for loop. Also, don't forget to <code>free()</code> your <code>marks</code> when your program is done.</p>\n"}], "owner": {"reputation": 642, "user_id": 4020747, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/226c7273276a55563b79976f62bb275f?s=128&d=identicon&r=PG&f=1", "display_name": "boudi", "link": "https://stackoverflow.com/users/4020747/boudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 35171779, "answer_count": 3, "score": 1, "last_activity_date": 1454487522, "creation_date": 1454486785, "last_edit_date": 1454487291, "question_id": 35171556, "link": "https://stackoverflow.com/questions/35171556/struct-and-values-entered-in-c", "title": "struct and values entered in C", "body": "<p>I have a program that does not work. The problem for example is:</p>\n\n<p>You input 2 for students, then enter mark 5 for the first student and then  10 for second student.</p>\n\n<p>The output sum in the <code>fun()</code> function should return 15 . But instead, it returns 20. </p>\n\n<p>This is my code so far:</p>\n\n<pre><code>struct mark{\n   int x;   \n};\n\nint main(){\n    int n;\n    printf(\"Enter the number of student: \");\n    scanf(\"%d\",&amp;n);\n\n    struct mark *marks= malloc(n * sizeof(struct mark)); ;\n\n    for (int i = 0; i &lt; n; i++ ){\n        printf(\"Enter mark: \");\n        scanf(\"%d\",&amp;(*marks).x);\n    }\n\n   fun(marks,n);\n\n    free(marks);\n    return 0;\n}\n\nvoid fun(struct mark *marks, int n){\n    int sum =0,i;\n    for (i = 0; i &lt; n; i++ ){\n        sum= sum+(*marks).x;\n\n    }\n    printf(\"Sum: %d \\n\",sum);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1454487057, "creation_date": 1454487057, "answer_id": 35171629, "question_id": 35171521, "link": "https://stackoverflow.com/questions/35171521/what-does-the-following-c-code-do/35171629#35171629", "title": "What does the following c code do?", "body": "<p>The macro, when expanded by the preprocessor, cast the integer literal as an address, a pointer to <code>Ifx_SRC_SRCR</code>, then dereferences the pointer so you can get or set the value of the memory stored at that specific address.</p>\n\n<p>So you could write e.g.</p>\n\n<pre><code>Ifx_SRC_SRCR value = SRC_ASCLIN_ASCLIN0_RX;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>SRC_ASCLIN_ASCLIN0_RX = some_other_value;\n</code></pre>\n\n<p>It basically equivalent to doing e.g.</p>\n\n<pre><code>int an_integer = 6;\nint *pointer_to_an_integer = &amp;an_integer;\n\n*pointer_to_an_integer = 10;  // Equivalent to SRC_ASCLIN_ASCLIN0_RX = some_other_value above\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5876673, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CQuH7iJy8OY/AAAAAAAAAAI/AAAAAAAAAco/SQFFJR6CPbU/photo.jpg?sz=128", "display_name": "K.Patil", "link": "https://stackoverflow.com/users/5876673/k-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1454499460, "answer_count": 1, "score": -1, "last_activity_date": 1454487057, "creation_date": 1454486640, "last_edit_date": 1454486991, "question_id": 35171521, "link": "https://stackoverflow.com/questions/35171521/what-does-the-following-c-code-do", "closed_reason": "Needs more focus", "title": "What does the following c code do?", "body": "<pre><code>#define SRC_ASCLIN_ASCLIN0_RX (*(volatile Ifx_SRC_SRCR*)0xF0038084u)\n</code></pre>\n\n<p>Here <code>SRC_ASCLIN_ASCLIN0_RX</code>  means ASCLIN(Async/Sync serial LIN Comm) Receive Service Request.</p>\n\n<p>I know that the macro is used to point at the address <code>0xF0038084u</code>. But I want real time examples.</p>\n\n<p>Am working on UART development on Infineon microcontroller.</p>\n"}, {"tags": ["c", "driver", "memory-address", "dma", "rtems"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 3704441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4402f9cce0cb5412ea2819b1bf8fe1ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/3704441/ivan"}, "edited": false, "score": 0, "creation_date": 1456731667, "post_id": 35688356, "comment_id": 59065333, "body": "Hi, thank you for response. I&#39;m not sure if I understood your answer. Basically, PCI ethernet card has it&#39;s own DMA controller(s), and I initiate transfer by writing to it&#39;s memory mapped registers. For (simplified) example, I give it pointer to the buffer that needs to be sent, buffer length and some more control parameters and it should initiate and handle DMA. Question is, does PCI card sees entire RAM and is the address of the buffer that I give to the card same address that I got from malloc(), or does this address need to be translated somehow so the card can see it?"}, {"owner": {"reputation": 94, "user_id": 5119903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tGZWOBYlj2o/AAAAAAAAAAI/AAAAAAAAABY/B9JW5dpWBkY/photo.jpg?sz=128", "display_name": "Kons", "link": "https://stackoverflow.com/users/5119903/kons"}, "reply_to_user": {"reputation": 61, "user_id": 3704441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4402f9cce0cb5412ea2819b1bf8fe1ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/3704441/ivan"}, "edited": false, "score": 0, "creation_date": 1456867358, "post_id": 35688356, "comment_id": 59141964, "body": "how is it the ethernet card connected to the LEON 3? (I got the question wrong btw :) )"}, {"owner": {"reputation": 61, "user_id": 3704441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4402f9cce0cb5412ea2819b1bf8fe1ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/3704441/ivan"}, "edited": false, "score": 0, "creation_date": 1457004866, "post_id": 35688356, "comment_id": 59213491, "body": "Card is connected via PCI Express bus and it&#39;s mapped to memory so I can read it&#39;s registers. I think only question I have is whether there is any address translation between PCI bus and LEON3, or, how can I determine it. I use RTEMS OS, which has flat memory model (ie, no virtual addresses), but I&#39;m still not clear if card can access the memory address that I got via malloc(), or do I have to translate this somehow so cards DMA controller can access it?"}], "tags": [], "owner": {"reputation": 94, "user_id": 5119903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tGZWOBYlj2o/AAAAAAAAAAI/AAAAAAAAABY/B9JW5dpWBkY/photo.jpg?sz=128", "display_name": "Kons", "link": "https://stackoverflow.com/users/5119903/kons"}, "is_accepted": false, "score": 0, "last_activity_date": 1456694091, "creation_date": 1456694091, "answer_id": 35688356, "question_id": 35171273, "link": "https://stackoverflow.com/questions/35171273/rtems-howto-get-dma-accessible-memory/35688356#35688356", "title": "RTEMS howto get DMA accessible memory", "body": "<p>I'm not sure I got the question right but anyway:</p>\n\n<p>RTEMS does not implements an handler for the LEON family DMA.\nTo use the DMA you need to exploit the LEON structure you can find in leon.h header file.\nThat structure is linked to the memory addresses of the LEON3 processor.\nAlternatively you can address the registers directly.</p>\n\n<p>After that you need to go to <a href=\"http://www.gaisler.com/index.php/products/components/ut699\" rel=\"nofollow\">http://www.gaisler.com/index.php/products/components/ut699</a>\nand download the functional manual of the UT699 (or search for the SoC you are using :) )</p>\n\n<p>There you will find how to write the registries in the correct order to initiate a DMA transfer from/to PCI target.</p>\n\n<p>Cheers</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 3704441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4402f9cce0cb5412ea2819b1bf8fe1ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/3704441/ivan"}, "is_accepted": false, "score": 3, "last_activity_date": 1461588996, "creation_date": 1461588996, "answer_id": 36841266, "question_id": 35171273, "link": "https://stackoverflow.com/questions/35171273/rtems-howto-get-dma-accessible-memory/36841266#36841266", "title": "RTEMS howto get DMA accessible memory", "body": "<p>Ok basically I got this figured out. </p>\n\n<p>First, RTEMS has flat memory model, so address that malloc() returns is actual physical address in memory. That means I don't need dma_alloc_coherent() as malloc() is already doing same thing. For aligned memory, I used posix_memalign() which is also supported. </p>\n\n<p>Second, I needed to see is there any address translation between the card and memory. This is not related to RTEMS, but rather to the system architecture, so after looking into GRLIB user manual and looking at RTEMS initialization code for grpci2 core, I found that there is no memory translation (it's set 1:1).</p>\n\n<p>Bottom line is that if I allocate buffer with simple malloc and give that address to PCI card, it will be able to access (read/write) this buffer.</p>\n\n<p>These were all assumptions that I started with, but in the end my problems were in faulty DMA chip. :)</p>\n"}], "owner": {"reputation": 61, "user_id": 3704441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4402f9cce0cb5412ea2819b1bf8fe1ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/3704441/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1461588996, "creation_date": 1454485767, "question_id": 35171273, "link": "https://stackoverflow.com/questions/35171273/rtems-howto-get-dma-accessible-memory", "title": "RTEMS howto get DMA accessible memory", "body": "<p>I'm implementing RTEMS driver for Ethernet card by porting it from Linux. Much of the work is done, processor IO mode is working ok, as well as interrupt handling. Now I'm having problems implementing DMA. </p>\n\n<p>Specifically, in Linux driver I use as a base, function dma_alloc_coherent() is used. This function will return two different addresses: one is address that driver code (host CPU) will see, and other one is the address that card will use to access same memory region via PCI during DMA.</p>\n\n<p>I'm having problems finding appropriate replacement function. First I thought of using malloc() and then pci_pci2cpu to translate this address to the one one card can access, however, pci_pci2cpu returns 0xFFFFFFFF for IO and 0x0 for remaining two modes. </p>\n\n<p>Second approach I considered is using dual ported memory manager, but I'm not finding useful examples of it's usage. For example, rtems_port_create() function requires pointers *internal_start and *external_start to be provided, but I'm not sure where are this pointers comming from?</p>\n\n<p>I use Gaisler RTEMS version 4.11 and Sparc architecture (LEON3 cpu).</p>\n\n<p>Best,\nIvan</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1454486025, "post_id": 35171139, "comment_id": 58060136, "body": "Find existing programs that provide that info and extract means to determine the values from their sourcecode or by reverse engineering. Which of these is giving you problems, btw? That said, some strategic advise: Find a job that doesn&#39;t make you unhappy."}, {"owner": {"reputation": 61, "user_id": 5693839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0420e915f1ed275d49545858b4d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/5693839/zim"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1454489306, "post_id": 35171139, "comment_id": 58061934, "body": "@UlrichEckhardt I am considering your strategic suggestion :)"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5693839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0420e915f1ed275d49545858b4d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/5693839/zim"}, "edited": false, "score": 0, "creation_date": 1454489186, "post_id": 35171243, "comment_id": 58061851, "body": "technically POSIX API should be better. syscalls via shell into C is not really a good programming exercise."}, {"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "reply_to_user": {"reputation": 61, "user_id": 5693839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0420e915f1ed275d49545858b4d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/5693839/zim"}, "edited": false, "score": 0, "creation_date": 1454489681, "post_id": 35171243, "comment_id": 58062195, "body": "syscalls via shell into C? do you mean C into shell?"}, {"owner": {"reputation": 61, "user_id": 5693839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0420e915f1ed275d49545858b4d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/5693839/zim"}, "edited": false, "score": 0, "creation_date": 1454491762, "post_id": 35171243, "comment_id": 58063601, "body": "I mean system calls from C like cat /proc/cpuinfo, calling this from C is not a good practice"}], "tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": false, "score": 1, "last_activity_date": 1454485687, "creation_date": 1454485687, "answer_id": 35171243, "question_id": 35171139, "link": "https://stackoverflow.com/questions/35171139/programmatically-getting-linux-device-resource-info/35171243#35171243", "title": "Programmatically getting Linux device resource info", "body": "<p>Some suggestions:</p>\n\n<ol>\n<li><p>Find tools that dump/use the info you are looking for and <code>strace</code>\nthem to get an idea on where to look for this info</p></li>\n<li><p>Find opensource tools that dump/use the info you are looking for and\nread the code</p></li>\n<li><p>Look into <code>/proc</code>, for example <code>cpuinfo</code></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5693839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0420e915f1ed275d49545858b4d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/5693839/zim"}, "edited": false, "score": 0, "creation_date": 1454489244, "post_id": 35171470, "comment_id": 58061895, "body": "That&#39;s what, correctly said. But you know some people are like that. Hard to deal with some people."}], "tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1454487305, "last_edit_date": 1454487305, "creation_date": 1454486495, "answer_id": 35171470, "question_id": 35171139, "link": "https://stackoverflow.com/questions/35171139/programmatically-getting-linux-device-resource-info/35171470#35171470", "title": "Programmatically getting Linux device resource info", "body": "<p>It also depends on what are the types of the devices you're interesting (network adaptor, block device etc). For many of them the usual way to get some info can be the <code>sysctl</code> which provides you a native C API which means the solution is supposed to be portable between all platforms supporting this device. So, what you may do is to search what exact driver handles your device and see what sysctls it supports. For this you need either read its header file[s], or its implementation or its doc if present. <code>man sysctl</code> for reference. However I don't know any kind of a \"generic\" way to get info of a random device.</p>\n"}], "owner": {"reputation": 61, "user_id": 5693839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0420e915f1ed275d49545858b4d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "Zim", "link": "https://stackoverflow.com/users/5693839/zim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1454502160, "answer_count": 2, "score": 3, "last_activity_date": 1454487305, "creation_date": 1454485299, "last_edit_date": 1454486228, "question_id": 35171139, "link": "https://stackoverflow.com/questions/35171139/programmatically-getting-linux-device-resource-info", "closed_reason": "Needs more focus", "title": "Programmatically getting Linux device resource info", "body": "<p>I was given some resource list to get value of them programmatically in C. Although I know these are too specific and is not really important or generic, still due to my intelligent boss, I just wanted to have opinion about the list. Remember it may run in any type of Linux based device , may be desktop, laptop even in embedded devices like rpi or edison, gallileo</p>\n\n<pre><code>SERIAL_NO /*vendor specific*/\nBATTERY_LEVEL /*not generic*/\nHEAP /*only program specific*/\nCPU_FREQUENCY /*vendor specific register*/\nPROCESSOR_TYPE /*vendor specific register*/\nPROCESSOR_SPEED /*vendor specific register*/\nSTORAGE /*I am not really sure*/\nMODEL /*vendor specific register*/\nIMEI /*vendor specific driver, not generic*/\nDEVICE_TYPE /*vendor specific register*/\nALTITUDE /*vendor specific sensor, not generic*/\nSPEED /*vendor specific sensor*/\nBEARING /*vendor specific*/\n</code></pre>\n\n<p>If anyone have any suggestion, be it technical or strategic, please advice me. Tired of such illogical requirements. Sorry if anyway I violated SO rules.</p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1454483002, "post_id": 35170428, "comment_id": 58058655, "body": "<i>&quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it&quot;</i>"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1454483126, "post_id": 35170428, "comment_id": 58058709, "body": "Which OS? compiler? gcc offers <i>random()</i> from stdlib (BSD, POSIX).."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454483154, "post_id": 35170428, "comment_id": 58058719, "body": "POSIX provides the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/drand48.html\" rel=\"nofollow noreferrer\"><code>drand48()</code></a> family of random number functions, but there isn&#39;t anything else in Standard C \u2014 the alternatives are all somewhat platform specific. Some platforms provide <code>&#47;dev&#47;urandom</code> and <code>&#47;dev&#47;random</code>, for example; reading from those gives you high quality random data. One advantage of <code>drand48()</code> (and <code>rand()</code>) is that you can guarantee repeatability when you want it (as well as randomness when you want it). <code>&#47;dev&#47;random</code> won&#39;t give you that. What do you need it for? Cryptography is another game\u2026"}, {"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1454483267, "post_id": 35170428, "comment_id": 58058764, "body": "In standard C, no, as a compiler or third party library/extension, probably hundreds of varying quality."}], "answers": [{"tags": [], "owner": {"reputation": 3248, "user_id": 583978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b92839c4b0a6541c3959421df2b37ba?s=128&d=identicon&r=PG", "display_name": "Crazy Developer", "link": "https://stackoverflow.com/users/583978/crazy-developer"}, "is_accepted": false, "score": 1, "last_activity_date": 1454482792, "creation_date": 1454482792, "answer_id": 35170460, "question_id": 35170428, "link": "https://stackoverflow.com/questions/35170428/is-there-any-random-number-generator-in-c-other-than-rand/35170460#35170460", "title": "Is there any random number generator in C other than rand()?", "body": "<p>yes </p>\n\n<p>you can use <code>arc4random()</code>. This will give you more random number than <code>rand()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1454483248, "post_id": 35170493, "comment_id": 58058758, "body": "Mersenne Twister has nice properties, but randomness (defined as: lack of predictability) isn&#39;t one of them. And the question asked for &quot;extremely random&quot;."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1454483586, "post_id": 35170493, "comment_id": 58058907, "body": "@Art: Would you care to elaborate on that?  Wikipedia on <a href=\"https://en.wikipedia.org/wiki/Mersenne_Twister\" rel=\"nofollow noreferrer\">Mersenne Twister</a> seems to contradict what you said."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454486423, "post_id": 35170493, "comment_id": 58060328, "body": "@JonathanLeffler Read the wikipedia article a bit more carefully. &quot;observing a sufficient number of iterations (624 in the case of MT19937, since this is the size of the state vector from which future iterations are produced) allows one to predict all future iterations.&quot;."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1454486823, "post_id": 35170493, "comment_id": 58060537, "body": "Personal rant: I guess it is &quot;random&quot; in the modern, computer science definition of the word &quot;random&quot;. Because for some reason computer science has decided that the word &quot;random&quot; should mean &quot;perfectly predictable&quot;, with the added requirement that &quot;each run of a program should produce the exact same sequence unless you do some badly defined operation that doesn&#39;t help much&quot; and preferably also: &quot;forked child processes should duplicate their sequences&quot;. So yes, it is &quot;random&quot; in that sense."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454486832, "post_id": 35170493, "comment_id": 58060542, "body": "If you mean &quot;it isn&#39;t a cryptographic PRNG&quot;, then say so (like Wikipedia does)."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1454486949, "post_id": 35170493, "comment_id": 58060604, "body": "No, I mean it isn&#39;t random. It&#39;s maybe &quot;computer science random&quot;, but the word random outside of programming is usually defined as &quot;lacking predictability and patterns&quot;."}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1454490551, "post_id": 35170493, "comment_id": 58062765, "body": "@art Yes it&#39;s predictable thats why it cant be used for encryption but, let&#39;s say, the randomn distribution of numbers it generates is pretty good. but it will always be pseudo random, true"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454491043, "post_id": 35170493, "comment_id": 58063095, "body": "Nice discussion, now to find a nice question in which to put it."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1454492508, "post_id": 35170493, "comment_id": 58064128, "body": "@Serv&#233;Laurijssen I wouldn&#39;t say &quot;can&#39;t be used for encryption&quot;. Judging from the never ending stream of screwups people have with bad random I would say &quot;can&#39;t be used for anything unless proven otherwise&quot;. The attitude that we should use bad PRNGs except for crypto inevitably leads to situations where they are woefully inadequate (because gambling or sessions identifiers aren&#39;t &quot;crypto&quot;). We should stop calling non-random things &quot;random&quot;. Pick a different word. Especially since there are great CSPRNGs that are within 50% of the performance of the fastest PRNGS."}], "tags": [], "owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "is_accepted": false, "score": 1, "last_activity_date": 1454482922, "creation_date": 1454482922, "answer_id": 35170493, "question_id": 35170428, "link": "https://stackoverflow.com/questions/35170428/is-there-any-random-number-generator-in-c-other-than-rand/35170493#35170493", "title": "Is there any random number generator in C other than rand()?", "body": "<p>The mersenne twister is considered a good RNG. Good randomness, fast but it can be predictable if you don't take steps.</p>\n\n<p>Here you can find some versions:</p>\n\n<p><a href=\"http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/C-LANG/c-lang.html\" rel=\"nofollow\">http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/C-LANG/c-lang.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1454483247, "last_edit_date": 1454483247, "creation_date": 1454482934, "answer_id": 35170495, "question_id": 35170428, "link": "https://stackoverflow.com/questions/35170428/is-there-any-random-number-generator-in-c-other-than-rand/35170495#35170495", "title": "Is there any random number generator in C other than rand()?", "body": "<p>No. There is no other function in standard C to generate random number other than <code>rand()</code>. GCC provide <a href=\"http://www.gnu.org/software/libc/manual/html_node/ISO-Random.html\" rel=\"nofollow\"><code>rand_r()</code></a> function as an extension.</p>\n"}], "owner": {"reputation": 193, "user_id": 5173053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0dcd00b53fa04540b2d96d88d0c871a0?s=128&d=identicon&r=PG&f=1", "display_name": "LSG", "link": "https://stackoverflow.com/users/5173053/lsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "closed_date": 1454483409, "answer_count": 3, "score": -2, "last_activity_date": 1454599574, "creation_date": 1454482650, "last_edit_date": 1454599574, "question_id": 35170428, "link": "https://stackoverflow.com/questions/35170428/is-there-any-random-number-generator-in-c-other-than-rand", "closed_reason": "Not suitable for this site", "title": "Is there any random number generator in C other than rand()?", "body": "<p>I want to generate random numbers in C which are extremely random. Is there any other function than rand()? I am using windows and gcc compiler. If it is from any other library, please mention the header file.</p>\n"}, {"tags": ["c", "icap"], "comments": [{"owner": {"reputation": 288, "user_id": 4030580, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9180b9eb22269ef014d6563e68035344?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Shahid", "link": "https://stackoverflow.com/users/4030580/ahmed-shahid"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1454484878, "post_id": 35169923, "comment_id": 58059549, "body": "I am not looking for a software recommendation. Perhaps i should have been more clear. I am asking if there is a way of doing something like this with c-icap."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1454484925, "post_id": 35169923, "comment_id": 58059572, "body": "Alright, sorry about that. I retracted my CV"}], "answers": [{"tags": [], "owner": {"reputation": 288, "user_id": 4030580, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9180b9eb22269ef014d6563e68035344?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Shahid", "link": "https://stackoverflow.com/users/4030580/ahmed-shahid"}, "is_accepted": false, "score": 0, "last_activity_date": 1454582561, "creation_date": 1454582561, "answer_id": 35198869, "question_id": 35169923, "link": "https://stackoverflow.com/questions/35169923/drop-a-request-using-c-icap/35198869#35198869", "title": "Drop a request Using C-icap", "body": "<p>I found my answer. It turns out that if I use ci_http_response_create(), without adding any header's the request gets blocked from getting to the server. </p>\n"}], "owner": {"reputation": 288, "user_id": 4030580, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9180b9eb22269ef014d6563e68035344?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Shahid", "link": "https://stackoverflow.com/users/4030580/ahmed-shahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454582561, "creation_date": 1454480669, "last_edit_date": 1454483612, "question_id": 35169923, "link": "https://stackoverflow.com/questions/35169923/drop-a-request-using-c-icap", "title": "Drop a request Using C-icap", "body": "<p>I am using the open source <code>c-icap</code> for modifying HTTP transaction, between a client and a server.  </p>\n\n<p><a href=\"http://www.firefly.kutc.kansai-u.ac.jp/~k843966/c-icap/doc/structci__service__module.html\" rel=\"nofollow\">http://www.firefly.kutc.kansai-u.ac.jp/~k843966/c-icap/doc/structci__service__module.html</a></p>\n\n<p>Is it possible to drop a request completely? I want to be able to stop a request from ever getting to the server. I know it is possible to send a customized response using.</p>\n\n<pre><code>int     ci_http_response_create (ci_request_t *req, int has_reshdr, int has_body)\n</code></pre>\n\n<p>I want to be able to just drop the request completely. </p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 746, "user_id": 3162146, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4746642a3bfbcb4833362d14f14d9fed?s=128&d=identicon&r=PG", "display_name": "coolgoose", "link": "https://stackoverflow.com/users/3162146/coolgoose"}, "is_accepted": false, "score": 2, "last_activity_date": 1454480960, "creation_date": 1454480960, "answer_id": 35170006, "question_id": 35169877, "link": "https://stackoverflow.com/questions/35169877/the-difference-between-segment-fault-and-stack-smashing-detected/35170006#35170006", "title": "the difference between segment fault and Stack smashing detected", "body": "<p>Segmentation fault is a fault raised by hardware with memory protection, notifying an operating system (OS) about a memory access violation. Stack smashing is reported when there is overflow of data in your program's call stack. Generally program's call stack is of fixed length.</p>\n"}, {"comments": [{"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1454485052, "post_id": 35170007, "comment_id": 58059648, "body": "Isn&#39;t stack smashing detected using a canary?"}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 8, "last_activity_date": 1454481114, "last_edit_date": 1454481114, "creation_date": 1454480963, "answer_id": 35170007, "question_id": 35169877, "link": "https://stackoverflow.com/questions/35169877/the-difference-between-segment-fault-and-stack-smashing-detected/35170007#35170007", "title": "the difference between segment fault and Stack smashing detected", "body": "<p>This is typically Undefined behavior.</p>\n\n<ul>\n<li><p><strong>Segmentation fault</strong> is typically when your process is accessing memory location to which it doesn't have permission to access, or that location does not exist.</p></li>\n<li><p><strong>Stack smashing</strong> is an alert (generated by gcc for instance) that warns about an access out of bounds, for instance, on the stack. Typically that happens when the stack is written to where it shouldn't - like a local array written to at an index out of bounds.</p></li>\n</ul>\n\n<p>There is a problem in your code that produces undefined behavior. Maybe you could share it with us so that we can help you.</p>\n\n<p>Check in particular:</p>\n\n<ul>\n<li>out of array bounds accesses</li>\n<li>NULL pointers</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 599, "user_id": 5835582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3a6040e07a631ce924b92f40823291b?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh K", "link": "https://stackoverflow.com/users/5835582/ganesh-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1454481144, "creation_date": 1454481144, "answer_id": 35170051, "question_id": 35169877, "link": "https://stackoverflow.com/questions/35169877/the-difference-between-segment-fault-and-stack-smashing-detected/35170051#35170051", "title": "the difference between segment fault and Stack smashing detected", "body": "<p>stack overflow and stack smashing both problems are related to faulty code or value found in the variables.\nFor example when a loop run as that it run over extras index of the array and \noverwrite the value of another variable of the code then , it become problem\nto the function prolog and epilog to continue to next function hence the current function become unable to return to calle function because overrun of llop has just overwrite the return address of calle instruction and hence EIP pointing to somewhere it not allowed to fetch instruction .All codes into OS are run in memory protection schems , hence you get stack overrun or stack smashing .\nSegmentation fault is problems is normal situation when dealing with array and pointer in Linux OS . \nTry this <a href=\"http://www.drdobbs.com/security/anatomy-of-a-stack-smashing-attack-and-h/240001832\" rel=\"nofollow\">http://www.drdobbs.com/security/anatomy-of-a-stack-smashing-attack-and-h/240001832</a> </p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 3650990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aqZki.jpg?s=128&g=1", "display_name": "LKW", "link": "https://stackoverflow.com/users/3650990/lkw"}, "is_accepted": false, "score": 1, "last_activity_date": 1454484984, "last_edit_date": 1495541330, "creation_date": 1454484984, "answer_id": 35171051, "question_id": 35169877, "link": "https://stackoverflow.com/questions/35169877/the-difference-between-segment-fault-and-stack-smashing-detected/35171051#35171051", "title": "the difference between segment fault and Stack smashing detected", "body": "<p>Both are memory access violation.\nSegmentation fault is more general, means you are accessing something you are not allowed to.\nstack smashing is more specific, means something wrong in your stack. \nActually, stack smashing can cause segmentation fault.\nyou can refer to:\n<a href=\"https://en.wikipedia.org/wiki/Segmentation_fault\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Segmentation_fault</a>\nor \n<a href=\"https://stackoverflow.com/questions/1345670/stack-smashing-detected\">Stack smashing detected</a></p>\n"}], "owner": {"reputation": 410, "user_id": 4041114, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b2b3d9110ecf4739e7be02ee1930b38d?s=128&d=identicon&r=PG&f=1", "display_name": "shengfu zou", "link": "https://stackoverflow.com/users/4041114/shengfu-zou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1807, "favorite_count": 2, "answer_count": 4, "score": 6, "last_activity_date": 1454484984, "creation_date": 1454480523, "question_id": 35169877, "link": "https://stackoverflow.com/questions/35169877/the-difference-between-segment-fault-and-stack-smashing-detected", "title": "the difference between segment fault and Stack smashing detected", "body": "<p>I have experienced two kind of error,one is segmentation fault, another is Stack smashing detected. I want to know what different between them and the different reasons caused them.  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14944, "user_id": 433373, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e191cfc8eb0f9986e30461621be1d0f5?s=128&d=identicon&r=PG", "display_name": "Nicolas Miari", "link": "https://stackoverflow.com/users/433373/nicolas-miari"}, "edited": false, "score": 0, "creation_date": 1454479711, "post_id": 35169250, "comment_id": 58057230, "body": "It&#39;s great that there&#39;s still people out there learning to code graphics in C. Up you go!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454516583, "post_id": 35169250, "comment_id": 58081583, "body": "1) when calling any of the memory allocation functions, always check (!=NULL) the returned value to assure the operation was successful.  2) for ease of understanding and readability by us humans, please follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i> 3) never access argv[] beyond argv[0] without first checking that <code>argc</code> indicates such a command line parameter exists."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454516728, "post_id": 35169250, "comment_id": 58081717, "body": "when compiling, always enable all the warnings, then fix those warnings. (for <code>gcc</code>, at a minimum use: ``-Wall -Wextra -pedantic` (I also use: <code>-Wconversion -std=gnu99</code>) )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454516949, "post_id": 35169250, "comment_id": 58081901, "body": "the posted code contains several &#39;magic&#39; numbers. &#39;magic&#39; numbers make the code much more difficult to understand, debug, maintian. &#39;magic&#39; numbers like: 100, 255, 800.  Suggest: use <code>#define</code>s or an <code>enum</code> to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1454518473, "post_id": 35169250, "comment_id": 58083062, "body": "per this web page: <code>http:&#47;&#47;netpbm.sourceforge.net&#47;doc&#47;pgm.html</code> the magic numbers for .pgm (gray scale) images is <code>P5</code> not <code>P2</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454518674, "post_id": 35169250, "comment_id": 58083209, "body": "regarding these two lines: <code>for (row = 0;row &lt;= iBoardSize; row++)     {         for (col = 0;col &lt;= iBoardSize; col++)</code>.  in C, offsets into an array start with 0 and proceed to (number of elements in array -1).  Suggest: <code>for (row = 0; row &lt; iBoardSize; row++)     {         for (col = 0; col &lt;  iBoardSize; col++)</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454518836, "post_id": 35169250, "comment_id": 58083340, "body": "per <code>http:&#47;&#47;netpbm.sourceforge.net&#47;doc&#47;pgm.html</code> the format of a grayscale image (.pgm) does not have a other characters in the image but the gray scale values,  I.E. not &#39;\\n&#39; at the end of each row."}], "answers": [{"comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1454479244, "post_id": 35169546, "comment_id": 58057015, "body": "Correct, except the inner loop is obviously intended to be <code>&lt;=</code> because of the branchy test for writing newline.  This could have been achieved better by writing the newline <i>after</i> the inner loop."}, {"owner": {"reputation": 395, "user_id": 3441009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e4b9e08f58fc2b6cdc7c963a3b8497?s=128&d=identicon&r=PG&f=1", "display_name": "Ryzhehvost", "link": "https://stackoverflow.com/users/3441009/ryzhehvost"}, "edited": false, "score": 0, "creation_date": 1454491338, "post_id": 35169546, "comment_id": 58063308, "body": "I think main problem in question is mentioned <code>fwrite</code> call. There should be either a separate call for every image row, or the image in memory should be stored in single-dimension array."}, {"owner": {"reputation": 61, "user_id": 2839641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1177877724/picture?type=large", "display_name": "Blair McKinney", "link": "https://stackoverflow.com/users/2839641/blair-mckinney"}, "edited": false, "score": 0, "creation_date": 1454516006, "post_id": 35169546, "comment_id": 58081122, "body": "Thanks for the help! Paddy is correct in that my intention was to use basically iBoardSize+1 to send a new line, I note that what you suggested also accomplishes this.  Also regarding memory allocation and freeing, would using talloc work better here? I came across it while searching and it seems like:   <code>#define talloc(type, num) (type *) malloc(sizeof(type)*(num))</code>  would allow for later using:  <code>iPgmData = talloc(int *, row);     for (i = 0; i &lt; row;i++)         iPgmData[i] = talloc(int, col);  free(iPgmData);</code>  I might not understanding the formatting associated with talloc."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 61, "user_id": 2839641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1177877724/picture?type=large", "display_name": "Blair McKinney", "link": "https://stackoverflow.com/users/2839641/blair-mckinney"}, "edited": false, "score": 0, "creation_date": 1454525786, "post_id": 35169546, "comment_id": 58087685, "body": "@BlairMcKinney, whether you use <code>malloc</code> or <code>talloc</code>, you&#39;ll still have to call <code>free</code> like I suggested."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 6, "last_activity_date": 1454479428, "last_edit_date": 1454479428, "creation_date": 1454479119, "answer_id": 35169546, "question_id": 35169250, "link": "https://stackoverflow.com/questions/35169250/im-attempting-to-create-an-8x8-checkerboard-pgm-in-c/35169546#35169546", "title": "I&#39;m attempting to create an 8x8 checkerboard PGM in C", "body": "<p>Problems I see:</p>\n\n<p><strong>Using out of bounds array index</strong></p>\n\n<pre><code>for (row = 0;row &lt;= iBoardSize; row++){\n             ^^^^^^^^^^^^^^^^ Wrong. Should be row &lt; iBoardSize\n   for (col = 0;col &lt;= iBoardSize; col++){\n                ^^^^^^^^^^^^^^^^ Wrong. Should be col &lt; iBoardSize\n      if (col &lt; iBoardSize)\n         fprintf(image, \"%d \", iPgmData[row][col]);\n      else\n         fprintf(image, \"\\n\");\n   }\n}\n</code></pre>\n\n<p>That block can be simplified to:</p>\n\n<pre><code>for (row = 0;row &lt; iBoardSize; row++){\n   for (col = 0;col &lt; iBoardSize; col++){\n      fprintf(image, \"%d \", iPgmData[row][col]);\n   }\n   fprintf(image, \"\\n\");\n}\n</code></pre>\n\n<p><strong>Call to <code>fwrite</code></strong></p>\n\n<pre><code>fwrite(iPgmData, 1, iBoardSize*iBoardSize*sizeof(int *), image);\n</code></pre>\n\n<p>You can use <code>fwrite</code> only if you have contiguous data. In your case, you don't. It's not clear to me what you hoped to accomplish from that call. I removed the call and the output file is a valid PGM file.</p>\n\n<p><strong>Not <code>free</code>ing the allocated memory correctly</strong></p>\n\n<p>You have</p>\n\n<pre><code>free(iPgmData);\n</code></pre>\n\n<p>That only deallocates the memory allocated for the pointers. It does not deallocated the memory the pointers point to. You need to use:</p>\n\n<pre><code>for (i = 0; i &lt; row;i++)\n   free(iPgmData[i]);\n\nfree(iPgmData);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1454524222, "post_id": 35184158, "comment_id": 58086791, "body": "Nice and straightforward, but why do you have a habit of adding parentheses around your <code>#define</code>d constants? It&#39;s not as if that would help with a malformed expression such as  <code>x = MAX_ROWS123;</code> (just curious where you picked that up)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1454526875, "post_id": 35184158, "comment_id": 58088374, "body": "@Jongware,  The reason for adding parens around the body of a #define is because the <code>text replacement</code> operation, performed by the preprocessor step of the compiler does not understand all the ramifications of the context where that #define is invoked.  Therefore, the resulting code can <code>run together</code> with the surrounding environment, resulting in something other than what the programmer intended.   The preprocessor concatenation operator (##) will cause issues.  Same for stringization (#)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1454527017, "post_id": 35184158, "comment_id": 58088456, "body": "@Jongware, the following code displays incorrect output due to the incorrect definition (no parens around each of the parameter usages) of the #define:  <code>#define SQR(x) (x*x) int main() {     int a, b=3;     a = SQR(b+5);        printf(&quot;%d\\n&quot;,a);     return 0; }</code>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1454527058, "post_id": 35184158, "comment_id": 58088476, "body": "Thanks! You indeed refer to 2 relatively new (from my point of view \ud83d\ude00) uses of macros, which I am not (yet) comfortable to use - and so it explains I&#39;ve never encountered a problem with missen parens. I guess I&#39;ll have to keep an eye out for this when I start using such syntax. (Your 2nd example is one I am dearly familiar with - and it&#39;s something else than your constants.)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1454527147, "post_id": 35184158, "comment_id": 58088535, "body": "@Jongware, you might want to look at: <code>http:&#47;&#47;stackoverflow.com&#47;questions&#47;7186504&#47;c-macros-and-use-&zwnj;&#8203;of-arguments-in-pare&zwnj;&#8203;ntheses&#47;7186517#7186&zwnj;&#8203;517</code> for a more mundane example."}, {"owner": {"reputation": 61, "user_id": 2839641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1177877724/picture?type=large", "display_name": "Blair McKinney", "link": "https://stackoverflow.com/users/2839641/blair-mckinney"}, "edited": false, "score": 0, "creation_date": 1454732727, "post_id": 35184158, "comment_id": 58189039, "body": "Awesome and thorough answer. One question: You referred to &quot;magic numbers&quot; in a previous comment, in your provided example would the 0 and 255 still qualify as magic numbers that should be given more meaningful names? The current version I have locally I created iBlack with a value of 0 and iWhite with a value 255 based on your earlier feedback."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454738449, "post_id": 35184158, "comment_id": 58190121, "body": "usually numbers 0 and 1 are not considered &#39;magic&#39; (hardcoded) numbers.  Almost all other hardcoded numbers should be given meaningful names,  Yes, I should have provided a #define meaningful name for the 255.  My sloppy coding to have not done so."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454738643, "post_id": 35184158, "comment_id": 58190171, "body": "Yes, you should keep the #defines for black and white"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1454522658, "last_edit_date": 1454522658, "creation_date": 1454521834, "answer_id": 35184158, "question_id": 35169250, "link": "https://stackoverflow.com/questions/35169250/im-attempting-to-create-an-8x8-checkerboard-pgm-in-c/35184158#35184158", "title": "I&#39;m attempting to create an 8x8 checkerboard PGM in C", "body": "<p>the posted program is way over complex and contains several problems regarding indexing into arrays and how the data is being written to the output file.</p>\n\n<p>The following code incorporates the comments, performs appropriate error checking and produces the desired image file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;  // fopen(), fclose(), fprintf(), FILE\n#include &lt;stdlib.h&gt;\n\n#include &lt;errno.h&gt;  // errno\n#include &lt;string.h&gt; // strerror()\n\n#define MAX_ROWS    (800)\n#define MAX_COLS    (800)\n#define BOARD_SIZE  (800)\n#define SQUARE_SIZE (100)\n\nint main (int argc, char* argv[])\n{\n    int row; // image row index\n    int col; // image column index\n\n\n    if( 2 != argc )\n    { // then required command line parameter missing\n        fprintf( stderr, \"USAGE: %s &lt;PGM_filename&gt;\\n\", argv[0]);\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, correct number of command line parameters\n\n    /* Open the PGM file */\n    FILE* image = fopen(argv[1], \"wb\");\n    if (!image)\n    {\n      fprintf(stderr, \"Can't open output file %s for write, due to: %s\\n\", argv[1], strerror( errno ) );\n      exit( EXIT_FAILURE);\n    }\n\n    /*Write the header*/\n    fprintf(image, \"P5\\n%d %d\\n255\\n\", BOARD_SIZE, BOARD_SIZE);\n\n    /* write the gray scale image */\n    for (row = 0;row &lt; BOARD_SIZE; row++)\n    {\n        for (col = 0;col &lt; BOARD_SIZE; col++)\n        {\n\n            if( (row/SQUARE_SIZE)%2 == 0 )\n            {\n                if( (col/SQUARE_SIZE)%2 == 0 )\n                {\n                    fprintf( image, \"%c\", 255 );\n                }\n\n                else\n                {\n                    fprintf( image, \"%c\", 0 );\n                }\n            }\n\n            else\n            {\n                if( (col/SQUARE_SIZE)%2 == 0 )\n                {\n                    fprintf( image, \"%c\", 0 );\n                }\n\n                else\n                {\n                    fprintf( image, \"%c\", 255 );\n                }\n            }\n        }\n    }\n\n    fclose(image);\n\n    return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2839641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1177877724/picture?type=large", "display_name": "Blair McKinney", "link": "https://stackoverflow.com/users/2839641/blair-mckinney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 35184158, "answer_count": 2, "score": 4, "last_activity_date": 1486607826, "creation_date": 1454477742, "question_id": 35169250, "link": "https://stackoverflow.com/questions/35169250/im-attempting-to-create-an-8x8-checkerboard-pgm-in-c", "title": "I&#39;m attempting to create an 8x8 checkerboard PGM in C", "body": "<p>Hello I attempting to write a C program that creates an 800x800 pixel PGM file and then populates the file with 100x100 pixel alternating black and white squares. It compiles fine, freezes when executing, and the resulting PGM file appears to only be a thin alternating black and white line.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (int argc, char* argv[])\n{\n    /*Declaring variables for rows, columns, boardsize, squaresize and pgmData \n    array*/\n    int row, col,i,j;\n    int iBoardSize = 800, iSquareSize = 100;\n    int **iPgmData;\n\n    /*Allocate memory for the data*/\n    row = 800;\n    col = 800;\n\n    iPgmData = malloc(row * sizeof(int *));\n    for (i = 0; i &lt; row;i++)\n        iPgmData[i] = malloc(col * sizeof(int));\n\n    /*Assign data to the array the desired result is an 8x8 checkboard of 100x100\n    pixel squares of alternating black and white.*/\n    for (row = 0; row &lt; iBoardSize; row++){\n        for (col = 0; col &lt; iBoardSize; col++){\n            if ((row / iSquareSize + col / iSquareSize ) %2 == 0)\n                iPgmData[row][col] = 0;\n            else\n                iPgmData[row][col] = 255;\n\n        }\n    }\n\n    /* Open the PGM file */\n    FILE* image = fopen(argv[1], \"wb\");\n    if (image == NULL){\n      fprintf(stderr, \"Can't open output file %s!\\n\", argv[1]);\n      exit(1);\n    }\n\n    /*Write the header*/\n    fprintf(image, \"P2\\n%d %d\\n255\\n\", iBoardSize, iBoardSize);\n\n    for (row = 0;row &lt;= iBoardSize; row++){\n        for (col = 0;col &lt;= iBoardSize; col++){\n            if (col &lt; iBoardSize)\n                fprintf(image, \"%d \", iPgmData[row][col]);\n            else\n                fprintf(image, \"\\n\");\n        }\n    }\n\n    /*Write pgmData*/\n    fwrite(iPgmData, 1, iBoardSize*iBoardSize*sizeof(int *), image);\n\n    /*Close the PGM*/\n    fclose(image);\n\n    /*Free allocated memory*/\n    free(iPgmData);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "operating-system"], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454477424, "post_id": 35169144, "comment_id": 58056316, "body": "By default, the child&#39;s environment is a copy of the parent&#39;s \u2014 unless the <code>execve()</code> system call was used to specify an alternative environment."}, {"owner": {"reputation": 13, "user_id": 2400257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a3d40d57ec8fe2aaf5aff6278fca8e?s=128&d=identicon&r=PG", "display_name": "DBlearner", "link": "https://stackoverflow.com/users/2400257/dblearner"}, "edited": false, "score": 0, "creation_date": 1454488530, "post_id": 35169144, "comment_id": 58061458, "body": "Question was asked  creating main(parent) and child . The parent and child should take turns to count down the environment var DOLP. To achieve this output, you will synchronize Parent, Child to repeatedly sleep (sleep() call), awaken, print, and flush the printed line (fflush() call). And my doubt is if this is possible."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 4, "last_activity_date": 1454477586, "last_edit_date": 1454477586, "creation_date": 1454477204, "answer_id": 35169144, "question_id": 35169038, "link": "https://stackoverflow.com/questions/35169038/how-pass-an-environment-var-from-child-to-parent/35169144#35169144", "title": "How pass an environment var from child to parent?", "body": "<p>You can't, not directly. Parents and children are different processes with separate environments. Setting an environment variable in the child has no effect on the parent and vice versa.</p>\n\n<p>The exception to this is when a child process is first created. Its initial environment is a copy of the parent's environment. But after the child is created it is completely separate.</p>\n\n<p>If you want one process to change the environment of another you'll need to set up explicit communication between the two and have the child send a message to the parent telling it to change its environment. This could be via a pipe, socket, shared memory, or other interprocess communication mechanism.</p>\n"}], "owner": {"reputation": 13, "user_id": 2400257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a3d40d57ec8fe2aaf5aff6278fca8e?s=128&d=identicon&r=PG", "display_name": "DBlearner", "link": "https://stackoverflow.com/users/2400257/dblearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454484664, "creation_date": 1454476675, "last_edit_date": 1454484664, "question_id": 35169038, "link": "https://stackoverflow.com/questions/35169038/how-pass-an-environment-var-from-child-to-parent", "title": "How pass an environment var from child to parent?", "body": "<p>To update an environment var called DOLP in child process and this change should be visible in the parent process.\nThe code is as follows:</p>\n\n<pre><code>    int main(void) {\n        int cid1 ,i;\n        char ear[20]=\"DOLP=7\";\n        putenv(ear);\n\n        printf(\"parent(main) process %d, ppid is %d  t %d \\n\",getpid(),\n                getppid(),atoi(getenv(\"DOLP\")));\n        fflush(stdout);\n        cid1=fork();\n\n        if ((cid1 == 0)) {\n          //child process ...\n          int sd =atoi(getenv(\"DOLP\")) -1;\n          char v[10];\n          sprintf(v,\"%d\",sd);\n          setenv(\"DOLP\",v,1);\n          sleep(2);\n          printf(\"c process pid %d, ppid is %d sd value: %d\\n\", getpid(),\n                  getppid(),atoi(getenv(\"DOLP\")));\n          fflush(stdout);\n          sleep(1);\n          } \n      else{\n           sleep(2);\n           //parent process...\n           int sd =atoi(getenv(\"DOLP\")) -1;\n           sprintf(ear,\"DOLP=%d\",sd);\n           putenv(ear);\n           sleep(1);\n           printf(\"parent(main) process %d, ppid is %d sd value %d\\n\",\n                    getpid(),getppid(),atoi(getenv(\"DOLP\")));\n           fflush(stdout);\n           }\n    return 0;\n}\n</code></pre>\n\n<p>The output I get as follows:</p>\n\n<pre><code>parent(main) process 25958, ppid is 25955  t 7 \nc process pid 25968, ppid is 25958 sd value: 6\nparent(main) process 25958, ppid is 25955 sd value 6\n</code></pre>\n\n<p>actually i want the parent to print 5 for sd value.\nNow how to make the child updates on DOLP be visible in parent process.</p>\n"}, {"tags": ["c", "pointers", "struct", "malloc", "typedef"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 2, "creation_date": 1454475609, "post_id": 35168807, "comment_id": 58055699, "body": "can you show us the <code>Whiskey</code> structure definition."}, {"owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "edited": false, "score": 1, "creation_date": 1454475698, "post_id": 35168807, "comment_id": 58055722, "body": "Please update whole code"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1454475950, "post_id": 35168807, "comment_id": 58055814, "body": "Assuming the data struct is &quot;the obvious&quot;, then apart from not null checking the malloc results it looks ok. Have you tried a debugger or prints to narrow down the crash location?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1454476189, "post_id": 35168807, "comment_id": 58055898, "body": "When you post code please make sure you post complete with the definition and declaration ."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1454476264, "post_id": 35168807, "comment_id": 58055925, "body": "I assume you included <code>&lt;string.h&gt;</code> right?  And <code>&lt;stdlib.h&gt;</code>?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1454476333, "post_id": 35168807, "comment_id": 58055944, "body": "BTW it&#39;s &quot;bourbon&quot;, not &quot;burbon&quot;."}, {"owner": {"reputation": 107, "user_id": 950575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794299f36d2f8f12f68395b2124fad73?s=128&d=identicon&r=PG", "display_name": "bpm", "link": "https://stackoverflow.com/users/950575/bpm"}, "edited": false, "score": 1, "creation_date": 1454476521, "post_id": 35168807, "comment_id": 58055998, "body": "I love Maker&#39;s Mark. Oh, and your code segment here compiles fine, assuming the struct definition (int, double, char *) I came up with is correct. You need to post all relevant code."}, {"owner": {"reputation": 11, "user_id": 5876089, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yj8YkqT8uog/AAAAAAAAAAI/AAAAAAAAABE/M-pxDQH1xFU/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5876089/alex"}, "edited": false, "score": 0, "creation_date": 1454477573, "post_id": 35168807, "comment_id": 58056361, "body": "Yes I have all the needed include statements. Here is the declaration.  typedef struct{     int age;     double proof;     char* name; }Whiskey; It looks fine and from your comments it seems like everything should work smoothly but it just outputs seg fault. Ive tried this code with taking out the char* and creating with just the age and proof and it will run fine so I know its a problem with the char*"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1454477952, "post_id": 35168807, "comment_id": 58056470, "body": "Assuming <code>malloc</code> is properly declared (via <code>&lt;stdlib.h&gt;</code>), and assuming <code>strcpy</code> is properly declared (via <code>&lt;string.h&gt;</code>), I can&#39;t see why this wouldn&#39;t work.  I tried it on my computer, along with the definition of <code>Whiskey</code> given in the comment, and it worked fine for me."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1454477992, "post_id": 35168807, "comment_id": 58056485, "body": "@Alex - don&#39;t add code in a comment. Edit the question instead. Don&#39;t you miss a <code>free( burbon-&gt;name);</code> ? Besides that the code is fine so your problem is not what you think it is."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1454478630, "post_id": 35168807, "comment_id": 58056734, "body": "I would suggest just to use <code>strdup</code> for duplicating the parameter &#39;n&#39;. Nevertheless you should first free burbon-&gt;name(like @4386427 already mentioned) and then free the burbon pointer."}, {"owner": {"reputation": 11, "user_id": 5876089, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yj8YkqT8uog/AAAAAAAAAAI/AAAAAAAAABE/M-pxDQH1xFU/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5876089/alex"}, "edited": false, "score": 0, "creation_date": 1454478958, "post_id": 35168807, "comment_id": 58056884, "body": "I just double checked the program by running it on my ubuntu computer and it ran fine just like you said. So I am truly lost now because I was using a raspberry pi before to run it and don&#39;t think there&#39;s a difference since I am using gcc to compile on both. Thank you for your help though. now I know that the program is fine."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1454479156, "post_id": 35168807, "comment_id": 58056962, "body": "@Alex - I think you should add some check to your code: 1) Does <code>malloc</code> return a null pointer. 2) Check <code>strlen(n)</code> before calling <code>malloc</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1454481349, "post_id": 35168807, "comment_id": 58057913, "body": "Why didn&#39;t you show a complete program?"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1454479846, "creation_date": 1454479846, "answer_id": 35169715, "question_id": 35168807, "link": "https://stackoverflow.com/questions/35168807/seg-fault-malloc-char-pointers/35169715#35169715", "title": "Seg Fault, malloc char pointers", "body": "<p>As discussed in comments the program shown is fine.</p>\n\n<p>However, you should add some checks to avoid problems. Something like:</p>\n\n<pre><code>typedef struct{ int age; double proof; char* name; } Whiskey;\n\nWhiskey* createWhiskey(int a, double p, char* n){\n    Whiskey* whiskey = malloc(sizeof(Whiskey));\n    if (whiskey) \n    {\n        whiskey-&gt;age = a;\n        whiskey-&gt;proof = p;\n        if (strlen(n) &gt; SOME_MAXIMUM)\n        {\n            free(whiskey);\n            printf(\"Some error... maybe\\n\");\n            return NULL;\n        }\n        whiskey-&gt;name = malloc((strlen(n)+1) * sizeof(char));\n        if (whiskey-&gt;name)\n        {\n            strcpy(whiskey-&gt;name, n);\n        }\n        else\n        {\n            free(whiskey);\n            printf(\"Some error... \\n\");\n            return NULL;\n        }\n    }\n    return whiskey;\n}\n\nint main(){\n\n    Whiskey* burbon;\n    burbon = createWhiskey(12, 90.0, \"MakersMark\");\n    if (!burbon)\n    {\n        printf(\"Some error... \\n\");\n    }    \n\n    // code....\n\n    if (burbon)\n    {\n        free( burbon-&gt;name);\n        free(burbon);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 746, "user_id": 3162146, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4746642a3bfbcb4833362d14f14d9fed?s=128&d=identicon&r=PG", "display_name": "coolgoose", "link": "https://stackoverflow.com/users/3162146/coolgoose"}, "is_accepted": false, "score": 1, "last_activity_date": 1454480295, "creation_date": 1454480295, "answer_id": 35169824, "question_id": 35168807, "link": "https://stackoverflow.com/questions/35168807/seg-fault-malloc-char-pointers/35169824#35169824", "title": "Seg Fault, malloc char pointers", "body": "<p>I hope definition of your Whiskey structure is fine. Following code works fine for me:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\ntypedef struct Whisk {\n        int age;\n        double proof;\n        char *name;\n} Whiskey;\nWhiskey* createWhiskey(int a, double p, char* n){\n\n    Whiskey* whiskey = malloc(sizeof(Whiskey));\n    whiskey-&gt;age = a;\n    whiskey-&gt;proof = p;\n    whiskey-&gt;name = malloc((strlen(n)+1) * sizeof(char));\n    strcpy(whiskey-&gt;name, n);\n    return whiskey;\n}\n\nint main(){\n\n    Whiskey* burbon;\n    burbon = createWhiskey(12, 90.0, \"MakersMark\");\n    if (!burbon)\n    {\n        printf(\"Some error... \\n\");\n    }\n\n    // code....\n\n    if (burbon)\n    {\n        free( burbon-&gt;name);\n        free(burbon);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1454525557, "creation_date": 1454525557, "answer_id": 35185294, "question_id": 35168807, "link": "https://stackoverflow.com/questions/35168807/seg-fault-malloc-char-pointers/35185294#35185294", "title": "Seg Fault, malloc char pointers", "body": "<p>the following code</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>performs appropriate error checking</li>\n<li>does not seg fault when run</li>\n<li>performs the desired function</li>\n<li>cleans up properly by passing both allocated memory pointers to <code>free()</code></li>\n<li>uses meaningful names for the passed parameters</li>\n</ol>\n\n<p>the code:</p>\n\n<pre><code>#include &lt;string.h&gt;  // malloc()\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE\n#include &lt;stdio.h&gt;   // perror()\n\ntypedef struct\n{\n    int age;\n    double proof;\n    char* name;\n} Whiskey;\n\nWhiskey* createWhiskey(int age, double proof, char* name)\n{\n\n    Whiskey* whiskey = NULL;\n    if( NULL == (whiskey = malloc(sizeof(Whiskey)) ) )\n    { // then, malloc failed\n        perror( \"malloc for Whiskey failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n    whiskey-&gt;age = age;\n    whiskey-&gt;proof = proof;\n    whiskey-&gt;name = NULL;\n\n    if( NULL == (whiskey-&gt;name = malloc( strlen(name)+1) ) )\n    { // then malloc failed\n        perror( \"malloc for name field failed\" );\n        free( whiskey );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n    strcpy(whiskey-&gt;name, name);\n    return whiskey;\n} // end function: createWhiskey\n\n\nint main( void )\n{\n\n    Whiskey* burbon;\n    burbon = createWhiskey(12, 90.0, \"MakersMark\");\n\n    free( burbon-&gt;name );\n    free( burbon );\n\n    return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5876089, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yj8YkqT8uog/AAAAAAAAAAI/AAAAAAAAABE/M-pxDQH1xFU/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/5876089/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1454525557, "creation_date": 1454475443, "last_edit_date": 1454478372, "question_id": 35168807, "link": "https://stackoverflow.com/questions/35168807/seg-fault-malloc-char-pointers", "title": "Seg Fault, malloc char pointers", "body": "<p>I keep getting a segmentation fault and i know its from the char pointer. But I cant figure out why?</p>\n\n<pre><code>Whiskey* createWhiskey(int a, double p, char* n){\n\n    Whiskey* whiskey = malloc(sizeof(Whiskey));\n    whiskey-&gt;age = a;\n    whiskey-&gt;proof = p;\n    whiskey-&gt;name = malloc((strlen(n)+1) * sizeof(char));\n    strcpy(whiskey-&gt;name, n);\n    return whiskey;\n}\nint main(){\n\n    Whiskey* burbon;\n    burbon = createWhiskey(12, 90.0, \"MakersMark\");\n\n    free(burbon);\n\n    return 0;\n}\n</code></pre>\n\n<p>In a comment from Alex (see below) the following information is added:</p>\n\n<pre><code>typedef struct{ int age; double proof; char* name; }Whiskey;\n</code></pre>\n"}, {"tags": ["java", "c#", "c++", "c", "terminology"], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 5697616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0DSar.png?s=128&g=1", "display_name": "Gabe", "link": "https://stackoverflow.com/users/5697616/gabe"}, "is_accepted": false, "score": 1, "last_activity_date": 1454484916, "last_edit_date": 1454484916, "creation_date": 1454479180, "answer_id": 35169559, "question_id": 35168791, "link": "https://stackoverflow.com/questions/35168791/binding-glue-code-and-wrapper-library/35169559#35169559", "title": "Binding, glue code and wrapper library", "body": "<p><code>binding</code>, <code>wrapper</code> and <code>glue</code> are - in this context specifically - are all <em>sort of</em> synonyms of each other and can <em>sort of</em> be used interchangeably..</p>\n\n<p><code>bind</code>, <code>wrap</code> and <code>glue</code> are all verbs which mean they're a word to describe an action, state or occurrence; even more-so they all revolve contextually around attachment. So yes - they are synonyms as far as the english language is concerned. However, concerning programming and the written paradigms used to describe ones actions within it may become more 'grey'.</p>\n\n<p>Let us use an example. Directx and c#:</p>\n\n<p><code>binding</code> by definition is to \"tie or fasten\" something to something else, as is <code>glue</code> and to a lesser (but still valid) extent <code>wrap</code>. Which makes sense in this example as dx is is written and designed for <code>c++</code>, but there are libraries that <code>wrap</code> the <code>c++</code> code providing a useable library for c# programmers to use; inside which, the code <code>binds or glues</code> the original <code>c++</code> code to the <code>c#</code> equivalent - and vice versa - allowing these two (originally incompatible) sources to communicate. </p>\n\n<p>So in using the <code>c#</code> alternative allows us access to the - if fully featured - functionality of the original <code>c++</code> version.</p>\n\n<p>So when talking about a <code>wrapper</code> one can refer to the base as <code>binding</code> or <code>glue</code> code. However - in my opinion - <code>wrapper</code> is a much broader term contextually, of which contains the actions of <code>binding</code> and <code>'gluing'</code>.</p>\n\n<p>This is my understanding - if somebody believes me mistaken, please don't hesitate to correct me.</p>\n"}], "owner": {"reputation": 2218, "user_id": 2274492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/On2uu.png?s=128&g=1", "display_name": "konstantin_doncov", "link": "https://stackoverflow.com/users/2274492/konstantin-doncov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 1, "closed_date": 1454488236, "answer_count": 1, "score": 2, "last_activity_date": 1454484916, "creation_date": 1454475365, "question_id": 35168791, "link": "https://stackoverflow.com/questions/35168791/binding-glue-code-and-wrapper-library", "closed_reason": "Needs more focus", "title": "Binding, glue code and wrapper library", "body": "<p>I many times saw terms <code>binding</code>, <code>glue</code>, and <code>wrapper</code> in a similar context and meaning(if we are talking about some \"adapter code\"). So what exactly means each of these terms? Is it a synonyms? Or what is the difference?</p>\n"}, {"tags": ["c", "xcode", "gcc", "homebrew", "osx-elcapitan"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3432164"}, "is_accepted": false, "score": 0, "last_activity_date": 1454476639, "creation_date": 1454476639, "answer_id": 35169032, "question_id": 35168582, "link": "https://stackoverflow.com/questions/35168582/library-not-found-when-compiling-with-gcc-on-macos-el-capitan/35169032#35169032", "title": "library not found when compiling with gcc on MacOS El capitan", "body": "<p>I was able to solve the same problem with the following code.</p>\n\n<p>Add this to the Library Search Paths in Build Settings and make sure you select recursive, delete other library paths which might be absolute paths.</p>\n\n<pre><code>$(PROJECT_DIR) \n</code></pre>\n\n<p>May be it will help you.</p>\n"}], "owner": {"reputation": 1, "user_id": 5875995, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208690849815349/picture?type=large", "display_name": "Pradipto", "link": "https://stackoverflow.com/users/5875995/pradipto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454649848, "creation_date": 1454474029, "last_edit_date": 1454649848, "question_id": 35168582, "link": "https://stackoverflow.com/questions/35168582/library-not-found-when-compiling-with-gcc-on-macos-el-capitan", "title": "library not found when compiling with gcc on MacOS El capitan", "body": "<p>I have this problem when compiling with GCC on MacOSX El Capitan. I've already reinstall the Homebrew and GCC but I still can't compile even the simplest program. I have got no idea what is really happening in here:</p>\n\n<pre><code> Koplo$ gcc test.c -o test\n ld: library not found for -lgcc\n collect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c", "unix", "struct", "deep-copy"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1454473286, "post_id": 35168394, "comment_id": 58054984, "body": "It needs to be <i>serialized</i>.  That means you create a format by which the data can be completely recovered.  With this structure there is no reason why you would need to fill a buffer before sending.  You could just deliver chunks on-the-fly while doing a depth-first traversal of the structure.  I am struggling to understand how you are having trouble with this idea when you can happily code networking logic in C."}, {"owner": {"reputation": 259, "user_id": 1480614, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c4fa55f4ee331f37df7ad7281b67cc27?s=128&d=identicon&r=PG", "display_name": "MaxSteel", "link": "https://stackoverflow.com/users/1480614/maxsteel"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1454473404, "post_id": 35168394, "comment_id": 58055015, "body": "Well, I&#39;ve a framework in place to send and recv data. I am having difficulty in trying to understand how to deserialze data on the receiving end."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 4, "creation_date": 1454473507, "post_id": 35168394, "comment_id": 58055054, "body": "You do the opposite of serializing, of course.  If you have serialized your data, then perhaps you should show how you have done it."}, {"owner": {"reputation": 2628, "user_id": 1356458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247822f2ce59d6022b4490b211f78127?s=128&d=identicon&r=PG", "display_name": "engineerC", "link": "https://stackoverflow.com/users/1356458/engineerc"}, "edited": false, "score": 2, "creation_date": 1454474932, "post_id": 35168394, "comment_id": 58055513, "body": "<a href=\"https://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats\" rel=\"nofollow noreferrer\">No need to invent it yourself</a>, try protocol buffers or avro."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454476243, "post_id": 35168394, "comment_id": 58055918, "body": "It&#39;s curious that you have <code>int *name</code>.  You&#39;ll need to know how long that array is, and send it over the wire one item at a time, with either a length before or an end indication after the data.  (Note that C strings use an end indicator \u2014 a null byte.)  The acronym that&#39;s often used TLV: type, length, value.  Similarly with your matrix of directories \u2014 if that&#39;s what the <code>dir **subdir</code> represents; you&#39;ll need to encode the type of data that follows, with some way to tell when you&#39;ve sent it all (either an up-front count or an end-of-data marker).  Pointers can&#39;t usefully be sent directly."}], "answers": [{"tags": [], "owner": {"reputation": 398, "user_id": 5871187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hu64h.jpg?s=128&g=1", "display_name": "S Dao", "link": "https://stackoverflow.com/users/5871187/s-dao"}, "is_accepted": false, "score": 1, "last_activity_date": 1454483901, "last_edit_date": 1454483901, "creation_date": 1454476077, "answer_id": 35168909, "question_id": 35168394, "link": "https://stackoverflow.com/questions/35168394/send-struct-with-double-pointer-to-struct-over-network/35168909#35168909", "title": "Send struct with double pointer to struct over network", "body": "<p>You can not send a pointer over the network because it is not real data. You need to send the real data that the pointer points to. On the sender's computer, you need a serialization method that converts the whole struct to a byte array and passes this byte array to the transmission framework (or TCP/IP stack). </p>\n\n<p>On the other side (the receiver's computer), you need a de-serialization method that converts the received byte array to the original struct. In your case, I suggest that you study <code>json-c</code>, it will help. Serialize the whole struct by looping over every entry in <code>dir</code> and convert into a JSON string. It's quite easy because <code>json-c</code> will do the whole thing for you.</p>\n"}], "owner": {"reputation": 259, "user_id": 1480614, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c4fa55f4ee331f37df7ad7281b67cc27?s=128&d=identicon&r=PG", "display_name": "MaxSteel", "link": "https://stackoverflow.com/users/1480614/maxsteel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1454525096, "creation_date": 1454472879, "last_edit_date": 1454525096, "question_id": 35168394, "link": "https://stackoverflow.com/questions/35168394/send-struct-with-double-pointer-to-struct-over-network", "title": "Send struct with double pointer to struct over network", "body": "<p>Send struct with double pointer to struct over networkI have to send this huge structure that represents the directory structure over network. It looks like this:</p>\n\n<pre><code>typedef struct{\n    char *name;\n    int count;\n    dir **subdir;\n}dir;\n</code></pre>\n\n<p>I have to send this over network, which means I need to make a deep copy of this in a buffer and send it over TCP. I am pretty new to c and do not know how to make the copy of this whole hierarchy and especially how to reconstruct this on the other end. I am clear on how to handle network part. Please help. <br/></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1454472776, "post_id": 35168353, "comment_id": 58054846, "body": "<code>c != &#39; &#39; || c != &#39;\\n&#39; || c != &#39;\\t&#39;</code> is always true, regardless of <code>c</code>."}, {"owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1454472837, "post_id": 35168353, "comment_id": 58054860, "body": "gah!  I need to step away from my pc.  You&#39;re right.  I should have done AND.  Thank you"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454473237, "post_id": 35168353, "comment_id": 58054971, "body": "Your first trip through the loop <code>c</code> is uninitialized and you must protect against writing beyond the end of <code>count</code>. Use <code>while (i &lt; 3 &amp;&amp; (c = fgetc(fp)) != &#39; &#39; &amp;&amp; c != &#39;\\n&#39; &amp;&amp; c != &#39;\\t&#39;)</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454473284, "post_id": 35168353, "comment_id": 58054983, "body": "Suppose the character is a space. Then <code>c != &#39; &#39;</code> is false, and <code>c != &#39;\\n&#39;</code> is true, and <code>c != &#39;\\t&#39;</code> is true, and <code>false || true || true</code> is true, so the loop keeps going."}, {"owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454473343, "post_id": 35168353, "comment_id": 58055003, "body": "Thanks guys for the tips!   Yeah, I get it now.  It just wasn&#39;t clicking before so I should have stepped away for a moment and think about it"}], "answers": [{"comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1454473759, "post_id": 35168480, "comment_id": 58055125, "body": "It might also be worthwhile to consider using <a href=\"http://en.cppreference.com/w/c/string/byte/isspace\" rel=\"nofollow noreferrer\"><code>isspace</code></a> from <code>&lt;ctype.h&gt;</code>."}, {"owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 0, "creation_date": 1454474353, "post_id": 35168480, "comment_id": 58055339, "body": "Got it thanks.  I realized it after the first comment - just didn&#39;t click before."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "edited": false, "score": 1, "creation_date": 1454474502, "post_id": 35168480, "comment_id": 58055391, "body": "@cpd1, you are welcome. I bet you will see this error next time rather easily :) Happy programming."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1454473919, "last_edit_date": 1454473919, "creation_date": 1454473398, "answer_id": 35168480, "question_id": 35168353, "link": "https://stackoverflow.com/questions/35168353/parsing-a-text-file-any-reason-why-space-new-line-would-be-ignored/35168480#35168480", "title": "Parsing a text file - any reason why space / new line would be ignored?", "body": "<p>The logic in the conditional is not right. It will evaluate to <code>true</code> all the time.</p>\n\n<pre><code>while( c != ' ' || c != '\\n' || c != '\\t' )\n</code></pre>\n\n<p>If <code>c</code> is equal to <code>' '</code> it is not equal to <code>'\\n'</code> or <code>'\\t'</code>.</p>\n\n<p>What you probably need is:</p>\n\n<pre><code>while( c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t' )\n</code></pre>\n\n<p>And for good measure, I would also add <code>c != EOF</code>.</p>\n\n<pre><code>while( c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t' &amp;&amp; c != EOF )\n</code></pre>\n\n<p>It might be simpler to use:</p>\n\n<pre><code>while( !isspace(c) &amp;&amp; c != EOF )\n</code></pre>\n"}], "owner": {"reputation": 705, "user_id": 2929998, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6448377797fc08ab6b71398cc11ba0b?s=128&d=identicon&r=PG&f=1", "display_name": "cpd1", "link": "https://stackoverflow.com/users/2929998/cpd1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 35168480, "answer_count": 1, "score": 0, "last_activity_date": 1454473919, "creation_date": 1454472641, "question_id": 35168353, "link": "https://stackoverflow.com/questions/35168353/parsing-a-text-file-any-reason-why-space-new-line-would-be-ignored", "title": "Parsing a text file - any reason why space / new line would be ignored?", "body": "<p>I have this while loop...</p>\n\n<pre><code>char count[3] = {0};\nint i = 0;\n\nwhile( c != ' ' || c != '\\n' || c != '\\t' ) {\n    count[i] = c;\n    c = fgetc(fp);\n    i++;    \n}\n</code></pre>\n\n<p>And even though I see while debugging that space and newline are the right ASCII numbers, the while loop does not exit.  Anyone know what could be causing this?</p>\n"}, {"tags": ["c", "linux", "windows", "gcc"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1454473597, "post_id": 35168326, "comment_id": 58055082, "body": "Did you know that you can call functions without declaring them in C?"}, {"owner": {"reputation": 447, "user_id": 4900256, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ca2eb3e8c80f260b2e2fa27ddf0e8203?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Watmough", "link": "https://stackoverflow.com/users/4900256/mason-watmough"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454473747, "post_id": 35168326, "comment_id": 58055121, "body": "@immibis I do. But what I&#39;m asking is how and why GCC of all compilers interprets that <code>getch</code> call and knows what to do with it without any guidance whatsoever,."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1454477068, "post_id": 35168326, "comment_id": 58056184, "body": "<code>conio.h</code> is a header, not a library. It declares functions (and defines types, etc). You&#39;re not compiling with any warning options worth mentioning because if you were, the compiler would complain that you&#39;ve not declared <code>getch()</code> before you used it (and it would complain about the missing argument in the <code>scanf(&quot;%c&quot;)</code> call in the first program). The MinGW compiler links with the local C library \u2014 it is a Minimal GNU environment for Windows, so it links with the MS C runtime library (libraries) which include <code>getch()</code>.  If you compile in C99 or C11 mode, you have to declare functions first."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454477106, "post_id": 35168326, "comment_id": 58056200, "body": "Also, the line ending sequence on Windows is <code>\\r\\n</code> and not <code>\\n\\r</code>.  Further complicating things is that text mode input operations will translate the native <code>\\r\\n</code> to just <code>\\n</code> and the output operations will translate <code>\\n</code> to <code>\\r\\n</code>.  This transform does not occur with binary mode I/O."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454486939, "post_id": 35168326, "comment_id": 58060599, "body": "@MasonWatmough Same way it knows how to call <code>printf</code> when you call <code>printf</code>."}, {"owner": {"reputation": 447, "user_id": 4900256, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ca2eb3e8c80f260b2e2fa27ddf0e8203?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Watmough", "link": "https://stackoverflow.com/users/4900256/mason-watmough"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454553125, "post_id": 35168326, "comment_id": 58100028, "body": "@immibis That&#39;s not what I mean. <code>printf</code> is included and linked because it&#39;s part of the standard library. <code>getch</code> is not."}, {"owner": {"reputation": 447, "user_id": 4900256, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ca2eb3e8c80f260b2e2fa27ddf0e8203?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Watmough", "link": "https://stackoverflow.com/users/4900256/mason-watmough"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454553317, "post_id": 35168326, "comment_id": 58100080, "body": "@JonathanLeffler That makes more sense. I was not aware that <code>mingw-gcc</code> was treating Windows C and its parts as standard, because according to Windows, I suppose it would be."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1454553593, "post_id": 35168326, "comment_id": 58100154, "body": "@MasonWatmough <code>getch</code> is part of the standard library on Windows."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454641558, "post_id": 35168326, "comment_id": 58146431, "body": "in the &#39;original&#39; code, the <code>scanf(&quot;%c&quot;);</code> raises a warning because no parameter containing address of a char for the format specifier &#39;%c&#39; to input to.  This needs correction"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454641712, "post_id": 35168326, "comment_id": 58146464, "body": "in the &#39;windows&#39; version of the posted code, the compiler will raise the warning: &quot;warning: implicit declaration of function &#39;getch&#39; [-Wimplicit-function-declaration]&quot;.    Save your self lots of aggravation and use <code>getchar()</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1454642568, "post_id": 35168326, "comment_id": 58146708, "body": "Try invoking the compiler in standard mode.  It defaults to &quot;useful mode&quot; . E.g. use switches <code>-std=c11 -pedantic</code>. You should get messages from the compiler for your last example, even in the default mode."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454719103, "post_id": 35168326, "comment_id": 58186432, "body": "Not <i>directly</i> relevant, but you should note that MinGW is using the C runtime shipped with Windows, which is designed only for two uses: use by Windows itself, and use by programs compiled in Visual Studio 6, circa 1998.  So as standard libraries go, it isn&#39;t very. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1454642712, "post_id": 35215671, "comment_id": 58146742, "body": "In the absence of a prototype, the compiler does <i>not</i> assume that the parameters are all <code>int</code>; it applies the default promotions (shorter than <code>int</code> to <code>int</code>; <code>float</code> to <code>double</code>) and makes no assumptions about the number of arguments or the types (except that it knows the function is not a variadic function with <code>...</code> at the end of its argument list \u2014 such functions must always be properly declared, even in C89/C90)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454643326, "post_id": 35215671, "comment_id": 58146880, "body": "&#39;modern&#39; compilers don&#39;t make the assumption, however, Visual Studio is way behind and still makes the assumption.  Also, the discussion is not about a variadic function."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454643566, "post_id": 35215671, "comment_id": 58146941, "body": "Ancient compilers don&#39;t make the assumption that the parameters are all <code>int</code> either.  To think otherwise is a nonsense \u2014 you&#39;d never be able to pass a <code>double</code> or a pointer to any function if what you said were true.  Granted, the discussion is not about variadic functions; they are marginally relevant since the requirements on using them is different from the requirements on using non-variadic (fixed argument) functions."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454718630, "post_id": 35215671, "comment_id": 58186319, "body": "Note that the OP isn&#39;t using VS anyway."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": -1, "last_activity_date": 1454642581, "last_edit_date": 1454642581, "creation_date": 1454641886, "answer_id": 35215671, "question_id": 35168326, "link": "https://stackoverflow.com/questions/35168326/why-does-mingw-gcc-allow-getch-to-be-used-unconditionally/35215671#35215671", "title": "Why does mingw-gcc allow getch() to be used unconditionally?", "body": "<p>The compile step will probably 'work' because compilers (at least older versions of compilers \u2014 we know that Visual Studio is not up to date with the latest C standards) will assume the return type and the parameters are all <code>int</code>.</p>\n\n<p>The link step will need the appropriate library linked in.</p>\n"}, {"tags": [], "owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "is_accepted": true, "score": 1, "last_activity_date": 1454719958, "last_edit_date": 1495541260, "creation_date": 1454719958, "answer_id": 35235993, "question_id": 35168326, "link": "https://stackoverflow.com/questions/35168326/why-does-mingw-gcc-allow-getch-to-be-used-unconditionally/35235993#35235993", "title": "Why does mingw-gcc allow getch() to be used unconditionally?", "body": "<p>The compilation step works (though it should produce a warning) because, traditionally, C allows you to call functions that haven't been declared, <a href=\"https://stackoverflow.com/a/9182835/886887\">provided that they return an int</a> which getch() does.</p>\n\n<p>The linking step works because the C runtime library that MinGW uses is a single library, i.e., it provides all the Visual C runtime library functions, including the non-standard ones.  MinGW presumably links with it by default because (apart from very rare edge cases) it is always needed, even if all you want is a main() function that does nothing. :-)</p>\n\n<hr>\n\n<p>It should also be mentioned that the library in question does not officially support third-party use, except by applications built in Visual Studio 6.  The more modern runtimes have deprecated <code>getch</code> in favour of the equivalent but standards compliant <code>_getch</code>, but VS6 predates that change.</p>\n"}], "owner": {"reputation": 447, "user_id": 4900256, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ca2eb3e8c80f260b2e2fa27ddf0e8203?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Watmough", "link": "https://stackoverflow.com/users/4900256/mason-watmough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1160, "favorite_count": 1, "accepted_answer_id": 35235993, "answer_count": 2, "score": 1, "last_activity_date": 1454719958, "creation_date": 1454472451, "question_id": 35168326, "link": "https://stackoverflow.com/questions/35168326/why-does-mingw-gcc-allow-getch-to-be-used-unconditionally", "title": "Why does mingw-gcc allow getch() to be used unconditionally?", "body": "<p>I recently started porting a TON of my C programs to a Windows environment, from my previous Linux development PC. I noticed something a bit off about <code>mingw</code>'s Windows GCC implementation.</p>\n\n<p>In Windows, I found a lovely function called <code>getch</code>. It's easy, it's immediate... and it's also non-standard.</p>\n\n<p>I'd like to focus of the \"non-standard\" part of it. Specifically, I want to know why <code>mingw-gcc</code> allows me to use it, without using anything but the standard libraries.</p>\n\n<p>Assume we have a program that prints \"Hello, World!\", a NL and CR, and then waits for a key and a return:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n    char str[14] = \"Hello, World!\"; //13 characters and a terminator\n    printf(\"%s\\n\\r\", str);\n    scanf(\"%c\");\n    return 0;\n}\n</code></pre>\n\n<p>Now, let's change a bit of that program to use <code>getch</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n    char str[14] = \"Hello, World!\"; //Again, 13 characters and a terminator\n    printf(\"%s\\n\\r\", str);\n    getch(); //See? now it uses getch.\n    return 0;\n}\n</code></pre>\n\n<p>The interesting part is, Isn't <code>getch</code> a call made by the <code>conio.h</code> library for old DOS/Win32 environments? The compiler doesn't even give a warning. Why does this work?</p>\n\n<p>Here's something I find even a bit more unsettling:</p>\n\n<pre><code>int main(void) //literally NOTHING included\n{\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>What on earth? I know for a fact that <code>getch</code> does not exist on Linux environments (natively, anyways). So, where is the compiler getting this call from? </p>\n\n<p>My best guess (please correct me if I am wrong) is that the decision to link whatever has <code>getch</code> is made at <em>link</em> time, not compile time.</p>\n\n<p>In any case, this seems a little odd to me. Why does an implementation of GCC automatically include <em>clearly</em> non-standard capability on Windows?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 107, "user_id": 950575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794299f36d2f8f12f68395b2124fad73?s=128&d=identicon&r=PG", "display_name": "bpm", "link": "https://stackoverflow.com/users/950575/bpm"}, "edited": false, "score": 0, "creation_date": 1454472707, "post_id": 35168319, "comment_id": 58054826, "body": "argv[0] = &#39;/a.out&#39;, and argv[1] would be &quot;hello&quot;. When you run it without the &#39;hello&#39;, you&#39;ll get the error."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4646643, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0fc8d7c45d136d2b74c52c430d290896?s=128&d=identicon&r=PG&f=1", "display_name": "Xirol", "link": "https://stackoverflow.com/users/4646643/xirol"}, "edited": false, "score": 0, "creation_date": 1454473243, "post_id": 35168343, "comment_id": 58054975, "body": "So in this case, I should be using an if statement or something of the sort to fix that right?"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1454474396, "post_id": 35168343, "comment_id": 58055351, "body": "Yes thats right, as <b>christutty</b> suggested in the code he gave."}, {"owner": {"reputation": 962, "user_id": 2381157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f90879dde8437bd15c8866d3dec577?s=128&d=identicon&r=PG", "display_name": "christutty", "link": "https://stackoverflow.com/users/2381157/christutty"}, "reply_to_user": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1454474647, "post_id": 35168343, "comment_id": 58055432, "body": "@AhmedAkhtar - I edited my answer in response to the first comment so the code you&#39;re referring to didn&#39;t exist when that comment was posted.  That&#39;s a source of frequent confusion at SO so remember that comments don&#39;t always relate to the current version of the answer."}], "tags": [], "owner": {"reputation": 962, "user_id": 2381157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f90879dde8437bd15c8866d3dec577?s=128&d=identicon&r=PG", "display_name": "christutty", "link": "https://stackoverflow.com/users/2381157/christutty"}, "is_accepted": true, "score": 8, "last_activity_date": 1454474086, "last_edit_date": 1495540346, "creation_date": 1454472595, "answer_id": 35168343, "question_id": 35168319, "link": "https://stackoverflow.com/questions/35168319/segmentation-fault-core-dumped-printing-string-from-argv/35168343#35168343", "title": "Segmentation Fault (core dumped) printing string from argv", "body": "<p>You're not checking the length of argv before dereferencing the second argument.  If argv only has one element argv[1] is a null reference, which causes your fault.</p>\n\n<p>With C <em>everything</em> needs to be done carefully.  To answer your question, yes, an if statement is the right approach if you want to handle the command line yourself.  The argc parameter to main() is provided for exactly this purpose.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char * argv[]){\n  printf(\"Test\");\n  if (argc &gt; 0) {\n      printf(\"\\n%s\", argv[0]);\n      if (argc &gt; 1) {\n          printf(\"\\n%s\", argv[1]);\n      }\n  }\nreturn 0; \n}\n</code></pre>\n\n<p>Theoretically argv[0] is always populated with the application name so the first if is redundant but with C caution is your friend.</p>\n\n<p>However, don't take this path.  For everything except trivial applications you should use a parameter parsing library such as <a href=\"http://www.gnu.org/software/libc/manual/html_node/Getopt.html\" rel=\"nofollow noreferrer\">http://www.gnu.org/software/libc/manual/html_node/Getopt.html</a>, check Christian's excellent answer here <a href=\"https://stackoverflow.com/a/24479532/2381157\">https://stackoverflow.com/a/24479532/2381157</a> for more options.</p>\n"}], "owner": {"reputation": 193, "user_id": 4646643, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0fc8d7c45d136d2b74c52c430d290896?s=128&d=identicon&r=PG&f=1", "display_name": "Xirol", "link": "https://stackoverflow.com/users/4646643/xirol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2238, "favorite_count": 0, "accepted_answer_id": 35168343, "answer_count": 1, "score": 0, "last_activity_date": 1454474086, "creation_date": 1454472413, "question_id": 35168319, "link": "https://stackoverflow.com/questions/35168319/segmentation-fault-core-dumped-printing-string-from-argv", "title": "Segmentation Fault (core dumped) printing string from argv", "body": "<p>I'm just trying to check the commandline arguments and see if it works in the command line. It works fine if I execute './a.out hello' but when I do './a.out' I get the error.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char * argv[]){\n   printf(\"Test\");\n   printf(\"\\n%s\",argv[0]);\n   printf(\"\\n%s\",argv[1]);\nreturn 0;\n}\n</code></pre>\n\n<p>The reason why I'm doing this is because I'm going to take that string and compare it later on.  I don't understand why something this simple is causing an error.</p>\n"}, {"tags": ["c", "floating-point", "precision", "unsigned"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1454472598, "post_id": 35168306, "comment_id": 58054787, "body": "Aside from sub-normals and near infinity, code only needs to increase the exponent by 2."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1454472616, "post_id": 35168306, "comment_id": 58054796, "body": "You cannot manipulate floating point numbers this way. Also, <code>4x</code> is not a legal function name."}, {"owner": {"reputation": 121, "user_id": 5004050, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9e4e7cde021da3628b4c88e36ffd893b?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/5004050/sam"}, "edited": false, "score": 0, "creation_date": 1454472806, "post_id": 35168306, "comment_id": 58054855, "body": "both comments appreciated"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454475390, "post_id": 35168306, "comment_id": 58055646, "body": "You have 2 basic options. The first being a union containing an <code>unsigned</code> and <code>float</code> value which will allow you to avoid violating the spirit of <i>strict aliasing</i> by operating on the <code>unsigned</code> representation. The next being the technical violation by declaring a <i>pointer to unsigned</i> pointing at the float address. If you are allowed to use a union, that is the way to go."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1454476537, "post_id": 35168306, "comment_id": 58056004, "body": "Your title says you want <code>4 * x</code>; your example says you want 4.4 * 4 = 17.6, give or take some fractions; your commentary suggests you want <code>x * x * x * x</code> (aka <code>x ** 4</code>where <code>**</code> is a pseudo-exponentiation operator borrowed from Fortran).  Did you mean <code>x + x + x + x</code>?  Please be clear about what you want \u2014 contradictory information makes it hard to give a good answer."}, {"owner": {"reputation": 121, "user_id": 5004050, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9e4e7cde021da3628b4c88e36ffd893b?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/5004050/sam"}, "edited": false, "score": 0, "creation_date": 1454476870, "post_id": 35168306, "comment_id": 58056121, "body": "good catch Jonathan... I cant use pointers. I will need to use unions."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454489272, "post_id": 35168306, "comment_id": 58061914, "body": "@DavidC.Rankin Or 3rd option: Copy <code>float</code> to <code>unsigned</code> with <code>memcpy</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454491027, "post_id": 35168306, "comment_id": 58063084, "body": "Yes, or if the OP did not have the requirement to pass <i>floating point argument f</i>, a function that takes a <code>void *</code> argument which can then be cast/dereferenced as needed to extract/increment the existing exponent value, zero existing bits 24-31 and then replace with the new exponent value is about all that is required (along with a few sanity checks to insure the increment by 2 doesn&#39;t overflow the exponent byte, etc.)."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1454494512, "post_id": 35168306, "comment_id": 58065567, "body": "Are you targetting a low-end CPU with no floating point support ? If not then  I would expect that using 2 x floating point add instructions will be much quicker than any bit twiddling solution that you can come up with."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454530303, "post_id": 35168306, "comment_id": 58090508, "body": "What I got from the question was it was either for a homework to familiarize with IEEE-754 format, or for personal curiosity. I don&#39;t think the bitwise quadruple was a necessity for actually quadrupling the float."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1454934769, "post_id": 35168306, "comment_id": 58250666, "body": "It&#39;s homework for sure, but at least this poster seems to have made some effort, unlike the deadbeats that are the other two."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1454959599, "post_id": 35168306, "comment_id": 58266763, "body": "The code in this post is the same as in <a href=\"http://stackoverflow.com/questions/35276670/floating-point-multiplication-using-bit-manipulation\" title=\"floating point multiplication using bit manipulation\">stackoverflow.com/questions/35276670/&hellip;</a>, mod a,b,c has changed to expn, sign, frac.   I don&#39;t know who is copying from who, but it&#39;s plain that your class is abusing SO contributors since this question has now been posted four times, (including this one).   Im sorry if you were copied-from, rather than being a copier, but have a down and close vote anyway:("}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1454962176, "post_id": 35168306, "comment_id": 58268278, "body": "I&#39;m voting to close this question as off-topic because it&#39;s a copy-and-paste of a homework assignment."}], "answers": [{"tags": [], "owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "is_accepted": false, "score": 3, "last_activity_date": 1454472966, "creation_date": 1454472966, "answer_id": 35168407, "question_id": 35168306, "link": "https://stackoverflow.com/questions/35168306/how-to-quadruple-an-unsigned-number-using-bit-wise-and-logic-operator-in-c/35168407#35168407", "title": "How to quadruple an unsigned number using bit-wise and logic operator in C", "body": "<p>Note that</p>\n\n<pre><code>expn &lt;&lt; 2;\n</code></pre>\n\n<p>does not modify <code>expn</code>. You probably want</p>\n\n<pre><code>expn &lt;&lt;= 2;\n</code></pre>\n\n<p>Ditto for </p>\n\n<pre><code>frac &gt;&gt; 2;\nexpn &lt;&lt; 2;\n</code></pre>\n\n<p>However, as @chux pointed out, you only need to increase add 2 to the exponent, not multiply the exponent by 4.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1454493917, "creation_date": 1454493917, "answer_id": 35173888, "question_id": 35168306, "link": "https://stackoverflow.com/questions/35168306/how-to-quadruple-an-unsigned-number-using-bit-wise-and-logic-operator-in-c/35173888#35173888", "title": "How to quadruple an unsigned number using bit-wise and logic operator in C", "body": "<p>Some untested code - leave that for OP.  (GTG)</p>\n\n<p>The tricky bit is dealing with sub-normal numbers that when *4 become normal.  Also watch for large values that overflow to infinity.  If you want to ignore sub-normals, just <code>expn += 2</code> and check for overflow.</p>\n\n<p>Another approach would <code>expn += 2</code> for normal numbers.  For sub-normals, shift the <code>frac &lt;&lt;= 2</code> and handle cases that become normal.</p>\n\n<p>Code is about 30 ops.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nfloat x4(float x) {\n  // Use union to access the bits.  Leap-of-faith here (float is 32 bits, endian)\n  union {\n    float f;\n    uint32_t u32;\n  } u;\n  u.f = x;\n  uint32_t expn = (u.u32 &gt;&gt; 23) &amp; 0xFF;\n  uint32_t sign = u.u32 &amp; 0x80000000;\n  uint32_t frac = u.u32 &amp; 0x007FFFFF;\n\n  // Nan Inf\n  if (expn == 255) return u.f;\n\n  if (expn == 0) {\n    expn++;  // Bring sub-normal into normal expo range\n  } else {\n    frac += 0x800000; // restore implied bit\n  }\n\n  // *4\n  frac &lt;&lt;= 2;\n\n  // normalize - this usually iterates twice, less for sub-normals\n  while (frac &gt; 0xFFFFFF) {\n    expn++;\n    frac &gt;&gt;= 1; // 1's will not be shifted out as 2 LSB are 0 so no later rounding\n  }\n\n  // overflow to inf\n  if (expn &gt;= 255) {\n    expn = 255;\n    frac = 0;\n  } else if (frac &amp; 0x800000) {\n    frac ^= 0x800000; // clear implied bit\n  } else {\n    // still sub-normal\n    expn--;  // should now be 0\n  }\n\n  u.u32 = sign | (expn &lt;&lt; 23) | frac;\n  return u.f;   \n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 5004050, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9e4e7cde021da3628b4c88e36ffd893b?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/5004050/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 2, "accepted_answer_id": 35173888, "answer_count": 2, "score": -3, "last_activity_date": 1454493917, "creation_date": 1454472323, "last_edit_date": 1454476825, "question_id": 35168306, "link": "https://stackoverflow.com/questions/35168306/how-to-quadruple-an-unsigned-number-using-bit-wise-and-logic-operator-in-c", "title": "How to quadruple an unsigned number using bit-wise and logic operator in C", "body": "<p>Goal:</p>\n\n<pre><code>4x ( 4.400000095 ) = 17.60000038\n</code></pre>\n\n<blockquote>\n  <ul>\n  <li>Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</li>\n  <li>Max ops: 30</li>\n  <li>Return bit-level equivalent of expression x + x + x + x for</li>\n  <li>floating point argument f.</li>\n  </ul>\n</blockquote>\n\n<p>My code:</p>\n\n<pre><code>unsigned 4x(unsigned uf) {\nunsigned expn = (uf &gt;&gt; 23) &amp; 0xFF;\nunsigned sign = uf &amp; 0x80000000;\nunsigned frac = uf &amp; 0x007FFFFF;\nif (expn == 255 || (expn == 0 &amp;&amp; frac == 0))  \n    return uf;\nif (expn) {\n    expn &lt;&lt; 2;\n} else if (frac == 0x7FFFFF) {\n    frac &gt;&gt; 2;\n    expn &lt;&lt; 2;\n} else {\n    frac &lt;&lt;= 2;\n}\n\nreturn (sign) | (expn &lt;&lt; 23) | (frac);\n</code></pre>\n\n<p>}</p>\n\n<p>As you can guess, my code does not work. Instead of quadrupling the input, the input is doubled. I don't know why since the fraction and exponent are   always being right / left shifted by 2 instead of 1. Im working with single precision floating point values in 32 bit machines.</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1454472532, "post_id": 35168231, "comment_id": 58054765, "body": "It&#39;s not exactly clear how the program is structured.  Is each file looped over the same number of times as every other file?"}, {"owner": {"reputation": 467, "user_id": 4863925, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ad7a7d518b3650b4c55bc57376160c4b?s=128&d=identicon&r=PG&f=1", "display_name": "john smith", "link": "https://stackoverflow.com/users/4863925/john-smith"}, "reply_to_user": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1454473096, "post_id": 35168231, "comment_id": 58054930, "body": "question edited to reflect clear idea"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1454474494, "post_id": 35168231, "comment_id": 58055388, "body": "This source is difficult to understand with many details left out which are not explained in the text of your question. What is stopping both threads from reaching the <code>pthread_barrier_wait()</code>? The actual structure of the program is not clear. I am not sure why there is a loop in <code>doWork()</code> nor the <code>pthread_barrier_wait()</code> as I would expect that each worker thread would call the <code>doWork()</code> function when it needs to execute to the task which requires the shared variable. So shouldn&#39;t the <code>doWork()</code> function do something like: check the shared variable, open the file specified, do stuff, return?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1454474834, "post_id": 35168231, "comment_id": 58055490, "body": "As for changing the barrier count you would use <code>pthread_barrier_init()</code> to initialize the barrier, <code>pthread_barrier_wait()</code> to wait for all threads to arrive at the barrier, and then <code>pthread_barrier_destroy()</code> to destroy the barrier after use. Then just create a new one.  See <a href=\"http://linux.die.net/man/3/pthread_barrier_init\" rel=\"nofollow noreferrer\">pthread_barrier_init(3) - Linux man page</a>. See also <a href=\"http://docs.oracle.com/cd/E19253-01/816-5137/gfwek/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19253-01/816-5137/gfwek/index.html</a> and for a sample see <a href=\"http://man7.org/tlpi/code/online/book/threads/pthread_barrier_demo.c.html\" rel=\"nofollow noreferrer\">threads/pthread_barrier_demo.c</a>."}, {"owner": {"reputation": 814, "user_id": 3574571, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1CulI.jpg?s=128&g=1", "display_name": "Mquinteiro", "link": "https://stackoverflow.com/users/3574571/mquinteiro"}, "edited": false, "score": 0, "creation_date": 1454474924, "post_id": 35168231, "comment_id": 58055508, "body": "I&#39;m not sure  about the exact purpose of barrier here but for your comments you have consider use a semaphore instead of barrier?"}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 4863925, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ad7a7d518b3650b4c55bc57376160c4b?s=128&d=identicon&r=PG&f=1", "display_name": "john smith", "link": "https://stackoverflow.com/users/4863925/john-smith"}, "edited": false, "score": 0, "creation_date": 1454509215, "post_id": 35169422, "comment_id": 58075979, "body": "I come to the same conclusion, however this seems like simply wasting cpu cycles, hence was looking for something more efficient"}], "tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 2, "last_activity_date": 1454478507, "creation_date": 1454478507, "answer_id": 35169422, "question_id": 35168231, "link": "https://stackoverflow.com/questions/35168231/how-to-decrement-count-of-barrier-on-thread-completion-using-pthreads-in-c/35169422#35169422", "title": "How to decrement count of barrier on thread completion using pthreads in C", "body": "<p>You can't really change the barrier count while the barrier is in use like that.</p>\n\n<p>Presumably the problem is that the condition that is tested to break out of the loop is not true for all files at the same time - ie, each thread might execute a different number of loops.</p>\n\n<p>If this is the case, one solution is to have each thread that finishes early continue to loop around, but do nothing but wait on the barrier in each loop.  Then arrange for the threads to all exit together - something like this:</p>\n\n<pre><code>void* doWork(void* arg)\n{\n    const char* file = arg;\n    int work_done = 0;\n\n    while(1) {\n        if (work_done)\n        {\n            if (all_threads_done)\n                break;\n\n            pthread_barrier_wait(&amp;b1);\n            continue;\n        }\n\n        pthread_mutex_lock(&amp;m1);\n        // Modify shared variable\n        pthread_mutex_unlock(&amp;m1);\n        // Wait for all threads to finish modifying shared variable\n        pthread_barrier_wait(&amp;b1);\n        // Once all threads reach barrier check state of shared variable and do some task based on state\n        if (finish_condition)\n            work_done = 1;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 467, "user_id": 4863925, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ad7a7d518b3650b4c55bc57376160c4b?s=128&d=identicon&r=PG&f=1", "display_name": "john smith", "link": "https://stackoverflow.com/users/4863925/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 0, "accepted_answer_id": 35169422, "answer_count": 1, "score": 1, "last_activity_date": 1454478507, "creation_date": 1454471784, "last_edit_date": 1454475100, "question_id": 35168231, "link": "https://stackoverflow.com/questions/35168231/how-to-decrement-count-of-barrier-on-thread-completion-using-pthreads-in-c", "title": "How to decrement count of barrier on thread completion using pthreads in C", "body": "<p>I have a function: createrWorkerPool which will spawn \"n\" worker threads and each of them will take input as file specified in the args for pthread_create, read the file modify a shared variable by using a mutex around it and wait at a barrier until all threads have done modifying their shared variable. This operation happens in a loop a large number of times.</p>\n\n<p>The problem I am facing is that lets consider there are two files file1 and file2 and file2 is much bigger in size than file1. The barrier synchronization works till completion of file1- but since it finishes execution it no longer reaches the barrier and file2 is stuck in the barrier forever.</p>\n\n<p>My question is that is there a way to dynamically change the count of the number of threads the barrier is waiting on when a thread exits. so in the above case if file1 finishes early it decrements the barrier count from 2 to 1 so file1 can proceed with its execution. I tried looking at the man page but don't see any function.Example code</p>\n\n<pre><code>pthread_mutex_t m1;\npthread_barrier_t b1;\n//common function executed by each worker thread\nvoid* doWork(void* arg) {\n    const char* file = arg;\n    while(1) {\n        pthread_mutex_lock(&amp;m1);\n        // Modify shared variable\n        pthread_mutex_unlock(&amp;m1);\n        // Wait for all threads to finish modifying shared variable\n        pthread_barrier_wait(&amp;b1);\n        // Once all threads reach barrier check state of shared variable and do some task based on state\n        // check for condition if true break out of loop\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>So basically thread1 manipulating file1 finishes before and thread2 is stuck at the barrier forever</p>\n"}, {"tags": ["c", "string", "int", "character", "scanf"], "comments": [{"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 0, "creation_date": 1454471902, "post_id": 35168185, "comment_id": 58054575, "body": "Did you forget a <code>%d</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "edited": false, "score": 0, "creation_date": 1454472324, "post_id": 35168258, "comment_id": 58054691, "body": "I appreciate the brevity. Thank you!"}], "tags": [], "owner": {"reputation": 4887, "user_id": 897295, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kql9J.png?s=128&g=1", "display_name": "mauro", "link": "https://stackoverflow.com/users/897295/mauro"}, "is_accepted": false, "score": 1, "last_activity_date": 1454472000, "creation_date": 1454472000, "answer_id": 35168258, "question_id": 35168185, "link": "https://stackoverflow.com/questions/35168185/using-sscanf-to-extract-integers-embedded-in-parenthesis/35168258#35168258", "title": "Using sscanf to extract integers embedded in parenthesis", "body": "<p>I would change your sscanf line this way:</p>\n\n<pre><code>sscanf(buf, \"(%d)%s\",&amp;a, reg);\n</code></pre>\n\n<p>Please note: you have to pass the pointer of your integer to sscanf()...</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1454472083, "creation_date": 1454472083, "answer_id": 35168276, "question_id": 35168185, "link": "https://stackoverflow.com/questions/35168185/using-sscanf-to-extract-integers-embedded-in-parenthesis/35168276#35168276", "title": "Using sscanf to extract integers embedded in parenthesis", "body": "<p>Your format specifier is wrong. You should turn the warning level higher to get useful feedback from your compiler. When I compile your program using <code>gcc -Wall</code>, I get:</p>\n\n<pre><code>soc.c: In function \u2018main\u2019:\nsoc.c:7:4: warning: format \u2018%[^')'\u2019 expects argument of type \u2018char *\u2019, but argument 3 has type \u2018int\u2019 [-Wformat=]\n    sscanf(buf, \"([^'(']%[^')']) %s\",a, reg);\n    ^\nsoc.c:7:10: warning: \u2018a\u2019 is used uninitialized in this function [-Wuninitialized]\n    sscanf(buf, \"([^'(']%[^')']) %s\",a, reg);\n</code></pre>\n\n<p>I am not sure what you expected that format string to do but it's not going to do what you want it to. You can use a much simpler format.</p>\n\n<p>Other points:</p>\n\n<p>Passing <code>a</code> to <code>scanf</code> family of functions will not work. You will need to pass <code>&amp;a</code>.</p>\n\n<p>Always check the return value of <code>scanf</code> family of functions to make sure that input was successful.</p>\n\n<p>Here's an improved version of <code>main</code> that should work. It works for me.</p>\n\n<pre><code>int main(){\n   char buf[128] = \"(10)foo\",\n        reg[4]; \n   int a;\n   int n = sscanf(buf, \"(%d) %s\", &amp;a, reg);\n   if ( n != 2 )\n   {\n      printf(\"Problem in sscanf\\n\");\n   }\n   else\n   {\n      printf(\"a value = %d\\nReg value = %s\\n\", a, reg);\n   }\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 35168276, "answer_count": 2, "score": 0, "last_activity_date": 1454472083, "creation_date": 1454471523, "question_id": 35168185, "link": "https://stackoverflow.com/questions/35168185/using-sscanf-to-extract-integers-embedded-in-parenthesis", "title": "Using sscanf to extract integers embedded in parenthesis", "body": "<p>I want to extract from a string in c using sscanf. I have a have a sting that will always have the form <code>(int)string</code> i.e. <code>(10)foo</code>. I have tried this approach with no luck:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    char buf[128] = \"(10)foo\",\n         reg[4]; \n    int a;\n    sscanf(buf, \"([^'(']%[^')']) %s\",a, reg);\n    printf(\"a value = %d\\nReg value = %s\\n\", a, reg);\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>a value = 0\nReg value = \n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 4, "creation_date": 1454471549, "post_id": 35168107, "comment_id": 58054469, "body": "When you get an error on <code>free</code>, the problem has usually occurred much earlier than that. Run valgrind to find out when it actually happens."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1454471976, "post_id": 35168107, "comment_id": 58054596, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1454473486, "post_id": 35168107, "comment_id": 58055047, "body": "Free exactly what is returned by malloc - nothing more and nothing less.  Also make sure not to corrupt memory by writing after or before the area returned by malloc.  To see what&#39;s actually happening, try making your own functions (or macros if you prefer) that print the call and, in the case of malloc, the returned pointer.  Check that every malloc pointer returned hits free once and only once, and that nothing else goes to free."}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1454471908, "creation_date": 1454471908, "answer_id": 35168244, "question_id": 35168107, "link": "https://stackoverflow.com/questions/35168107/why-is-this-free-statement-causing-a-heap-corruption-error/35168244#35168244", "title": "Why is this free statement causing a heap corruption error?", "body": "<p>I expect the problem is here, where you don't allocate enough memory and then later write off the end of the block, invoking undefined behaviour:</p>\n\n<pre><code>assembledAry = (int*)malloc(uncommonCount * sizeof(int) + 1);\n</code></pre>\n\n<p>You actually want <code>(uncommonCount + 1) * sizeof(int)</code> bytes.</p>\n\n<p>Unrelated, but you also have a leak when freeing <code>digitInfoAry</code> (because you don't free all the allocated pointers it contains), and you are double-freeing <code>userAry</code> just before leaving <code>main</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 5768168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50991676cc26ba65788800fbac5abac?s=128&d=identicon&r=PG&f=1", "display_name": "bgarcia", "link": "https://stackoverflow.com/users/5768168/bgarcia"}, "edited": false, "score": 0, "creation_date": 1454472947, "post_id": 35168379, "comment_id": 58054895, "body": "the problems I mentioned are immediately visible with the trimmed down version of your code as I provided it. I did not examine your code for other faults beyond these 3"}], "tags": [], "owner": {"reputation": 144, "user_id": 5768168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50991676cc26ba65788800fbac5abac?s=128&d=identicon&r=PG&f=1", "display_name": "bgarcia", "link": "https://stackoverflow.com/users/5768168/bgarcia"}, "is_accepted": false, "score": 0, "last_activity_date": 1454473259, "last_edit_date": 1454473259, "creation_date": 1454472834, "answer_id": 35168379, "question_id": 35168107, "link": "https://stackoverflow.com/questions/35168107/why-is-this-free-statement-causing-a-heap-corruption-error/35168379#35168379", "title": "Why is this free statement causing a heap corruption error?", "body": "<p>If the user inputs a '1' more than once, memory leaks occur</p>\n\n<p>If the user inputs a '2' after previously entering '1', one ERROR occurs</p>\n\n<p>If the user inputs a '2' without having previously entered '1', two ERRORS occur</p>\n\n<pre><code>do {\n    switch (menuOption) {\n    case 1:\n        userAry = (int*)malloc(...);    //may not get executed\n        returnedAry = extractUncommonDigit(...); //may not get executed\n        break;\n    case 2:\n        free(userAry);    //can produce ERROR\n        free(returnedAry);//can produce ERROR\n        break;\n    default:\n        break;\n    }\n} while (menuOption != 2);\nfree(userAry);            //ERROR, tried to free 'userAry' twice\n</code></pre>\n\n<p>and the function called:</p>\n\n<pre><code>int* extractUncommonDigit(...) {...}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5269778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4758b163d356328ad3fe6cf91365732?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/5269778/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454473259, "creation_date": 1454471073, "question_id": 35168107, "link": "https://stackoverflow.com/questions/35168107/why-is-this-free-statement-causing-a-heap-corruption-error", "title": "Why is this free statement causing a heap corruption error?", "body": "<p>I wrote some code but am not sure how to properly free memory dynamically allocated inside of a function.</p>\n\n<p>What is the proper way to free memory without causing a heap corruption, or better yet, what is causing the corruption when trying to free `returnedAry``</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX_NUM_DIGITS 10\n\nvoid displayMainMenu(void);\nint* extractUncommonDigit(int*, int);\n\nint main() {\n    displayMainMenu();\n\n    return 0;\n}\n\nvoid displayMainMenu() {\n    int* userAry = NULL;\n    int* returnedAry = NULL;\n    int menuOption;\n    int numOfInts;\n    int i;\n\n    do {\n        printf(\"\\n\\n*********************************************\\n\"\n            \"*                     MENU                  *\\n\"\n            \"* 1. Calling extractUncommonDigit()         *\\n\"\n            \"* 2. Quit                                   *\\n\"\n            \"*********************************************\\n\"\n            \"Select an option (1 or 2): \");\n        scanf_s(\"%d\", &amp;menuOption);\n\n        switch (menuOption) {\n        case 1:\n            printf(\"\\n  How many integers? \");\n            scanf_s(\"%d\", &amp;numOfInts);\n            userAry = (int*)malloc(numOfInts * sizeof(int));\n\n            for (i = 0; i &lt; numOfInts; i++) {\n                printf(\"    Enter integer #%d: \", i + 1);\n                scanf_s(\"%d\", &amp;userAry[i]);\n            }\n\n            printf(\"\\n  The original array: \\n\");\n            for (i = 0; i &lt; numOfInts; i++) {\n                printf(\"    %d\\n\", userAry[i]);\n            }\n\n            printf(\"\\n  Calling extractUncommonDigit() -\\n\");\n            returnedAry = extractUncommonDigit(userAry, numOfInts);\n            printf(\"\\n  Displaying after returning the array\"\n                \" -- The uncommon digits: \");\n\n            if (returnedAry[0] != 0) {\n                printf(\"\\n    There is/are %d uncommon digit(s)\", returnedAry[0]);\n                for (int i = 1; i &lt; returnedAry[0] + 1; i++) {\n                    printf(\"\\n      %d\", *(returnedAry + i));\n                }\n            } else {\n                printf(\"\\n   There is/are no uncommon digit(s)\");\n            }\n            break;\n        case 2:\n            free(userAry);\n            /* This line causes heap corruption error\n            -----------------------------------------\n            free(returnedAry);\n            -----------------------------------------\n            */\n            printf(\"\\n  Fun Excercise ...\");\n            break;\n        default:\n            printf(\"\\n  WRONG OPTION!\");\n            break;\n        }\n    } while (menuOption != 2);\n\n    free(userAry);\n\n    return;\n}\n\nint* extractUncommonDigit(int* ary, int size) {\n    int* assembledAry = 0;\n    int tmp;\n    int** digitInfoAry = (int**)malloc(size * sizeof(int*));\n    int i, j;\n    int digitAry[10] = { 0 };\n    int uncommonCount = 0;\n\n    for (i = 0; i &lt; size; i++) {\n        *(digitInfoAry + i) = (int*)calloc(MAX_NUM_DIGITS, sizeof(int));\n    }\n\n    for (i = 0; i &lt; size; i++) {\n        tmp = *(ary + i) &lt; 0 ? -(*(ary + i)) : *(ary + i);\n\n        do {\n            *(*(digitInfoAry + i) + tmp % 10) = 1;\n            tmp /= 10;\n        } while (tmp != 0);\n    }\n\n    for (i = 0; i &lt; MAX_NUM_DIGITS; i++) {\n        for (j = 0; j &lt; size; j++) {\n            digitAry[i] += *(*(digitInfoAry + j) + i);\n        }\n    }\n\n    for (i = 0; i &lt; MAX_NUM_DIGITS; i++) {\n        if (digitAry[i] == 1) {\n            uncommonCount++;\n        }\n    }\n\n    assembledAry = (int*)malloc(uncommonCount * sizeof(int) + 1);\n    *assembledAry = uncommonCount;\n\n    if (uncommonCount != 0) {\n        for (i = 0, j = 1; i &lt; MAX_NUM_DIGITS; i+=2) {\n            if (digitAry[i] == 1) {\n                assembledAry[j] = i;\n                j++;\n            }\n        }\n        for (i = 1; i &lt; MAX_NUM_DIGITS; i+=2) {\n            if (digitAry[i] == 1) {\n                assembledAry[j] = i;\n                j++;\n            }\n        }\n    }\n\n    free(digitInfoAry);\n\n    return assembledAry;\n}\n</code></pre>\n\n<p>The commented text displays where the program crashes after running the debugger.\nWhat am i doing wrong?</p>\n"}, {"tags": ["c", "windows", "winapi", "driver", "wdk"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454471261, "post_id": 35168000, "comment_id": 58054390, "body": "Looks like the right approach to me."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454471648, "post_id": 35168000, "comment_id": 58054494, "body": "@HarryJohnston: Thanks. Do you know of any way to make it work under Windows XP as well? (PS. I realize that it&#39;s a discontinued OS, but we still have many clients that run XP on their workstations.)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1454472531, "post_id": 35168000, "comment_id": 58054764, "body": "I <i>think</i> the traditional approach was to install a kernel-mode hook on NtCreateProcess."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454474260, "post_id": 35168000, "comment_id": 58055309, "body": "@HarryJohnston: Hmm. After your suggestion I found this article from 2005: <a href=\"http://www.codeproject.com/Articles/11985/Hooking-the-native-API-and-controlling-process-cre\" rel=\"nofollow noreferrer\">codeproject.com/Articles/11985/&hellip;</a> where the author claims that hooking <code>NtCreateProcess</code> is not a correct approach and instead hooks to <code>NtCreateSection</code>. The issue is that what he does to accomplish it seems like a &quot;hack&quot; to me, since he is doing a lot of x86 asm injections in the target API to hook to it, which will obviously not work under x64. Such approach may also be &quot;flagged&quot; by an installed AVP."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454474420, "post_id": 35168000, "comment_id": 58055359, "body": "I found an older article that shows how to use <code>PsSetCreateProcessNotifyRoutine</code>, which works under XP but unfortunately will not allow to block process creation: <a href=\"http://www.codeproject.com/Articles/2018/Detecting-Windows-NT-2K-process-execution\" rel=\"nofollow noreferrer\">codeproject.com/Articles/2018/&hellip;</a>"}, {"owner": {"reputation": 2747, "user_id": 220594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2471c61947385b1d7c0be89482373c26?s=128&d=identicon&r=PG", "display_name": "Pyjong", "link": "https://stackoverflow.com/users/220594/pyjong"}, "edited": false, "score": 0, "creation_date": 1454490711, "post_id": 35168000, "comment_id": 58062872, "body": "@c00000fd I think hooking the NtCreateProcess can be done after ntoskrnl.exe has been loaded so you don&#39;t have to alter the file. You will need to make a driver to edit ntoskrnl exports via some ioctl. Not an easy task, but it should be possible."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 2747, "user_id": 220594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2471c61947385b1d7c0be89482373c26?s=128&d=identicon&r=PG", "display_name": "Pyjong", "link": "https://stackoverflow.com/users/220594/pyjong"}, "edited": false, "score": 0, "creation_date": 1454496269, "post_id": 35168000, "comment_id": 58066766, "body": "@Pyjong: Do you guys know of any C sample that shows this <i>driver manipulation</i>. (Especially stuff that can run in post-XP era, and x64 OS.)"}, {"owner": {"reputation": 2747, "user_id": 220594, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2471c61947385b1d7c0be89482373c26?s=128&d=identicon&r=PG", "display_name": "Pyjong", "link": "https://stackoverflow.com/users/220594/pyjong"}, "edited": false, "score": 1, "creation_date": 1454498520, "post_id": 35168000, "comment_id": 58068360, "body": "@c00000fd Specificaly for your purpose no. As for driver writing: this <a href=\"http://www.codeproject.com/Articles/9504/Driver-Development-Part-Introduction-to-Drivers\" rel=\"nofollow noreferrer\">codeproject.com/Articles/9504/&hellip;</a> is the best on CP I think, but beware driver writing is way harder than user space programming, don&#39;t expect you read an article and you can start with drivers right away. There are also several  books ca. 800 pages each :) . And as for PE hackery I would recommend starting with legendary Matt Pietrek&#39;s Peering inside portable executable <a href=\"https://msdn.microsoft.com/en-us/library/ms809762.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms809762.aspx</a>"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1454720195, "post_id": 35168000, "comment_id": 58186666, "body": "Kernel hooking won&#39;t work on Vista or later, that&#39;s one of the reasons CreateProcessNotifyEx and various other routines were added, so that there would be other ways to do things that used to be done via hooking.  So I would expect you to use CreateProcessNotifyEx on Vista and later and hooking on 32-bit XP.  I&#39;m not sure where 64-bit XP/2003 fits in."}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1454471313, "creation_date": 1454470373, "last_edit_date": 1454471313, "question_id": 35168000, "link": "https://stackoverflow.com/questions/35168000/how-to-intercept-and-possibly-block-process-creation-system-wide", "title": "How to intercept and possibly block process creation, system-wide?", "body": "<p>I'm trying to make an <a href=\"https://technet.microsoft.com/en-us/library/ee424367.aspx\" rel=\"nofollow\">AppLocker</a>-like service that should intercept creation of processes based on certain restrictions set by an administrator.</p>\n\n<p><em>(For those who are wondering why I can't simply use Microsoft's AppLocker, the answer is that it is available only on the Server, Enterprise and Ultimate versions of Windows 7 and up.)</em></p>\n\n<p>So I did some research and found the <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff542860(v=vs.85).aspx\" rel=\"nofollow\">CreateProcessNotifyEx</a> routine that can be called before each process is started/ended.</p>\n\n<p>I don't have a big experience writing Windows Kernel drivers. And thus I'm curious if this is the correct approach to do what I described above? Or maybe there's just a user-mode WinAPI that I'm not aware of?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23, "user_id": 5875827, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e75iX.jpg?s=128&g=1", "display_name": "RTriplett", "link": "https://stackoverflow.com/users/5875827/rtriplett"}, "edited": false, "score": 0, "creation_date": 1454469754, "post_id": 35167905, "comment_id": 58053990, "body": "I&#39;m a college student trying to learn more code."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1454469817, "post_id": 35167905, "comment_id": 58054005, "body": "You&#39;ve written that <code>validInput</code> takes one argument. But then when you try to call it, you&#39;re not giving it an argument?"}, {"owner": {"reputation": 468, "user_id": 4734402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259b3fc3f2c46196b6f66f6ae9f84b70?s=128&d=identicon&r=PG", "display_name": "Ben Love", "link": "https://stackoverflow.com/users/4734402/ben-love"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454470385, "post_id": 35167905, "comment_id": 58054145, "body": "To @immibis &#39;s point, in your main function you are calling your validInput function. Below, you define that function as needing some kind of argument. Also, regarding your validInput function, I wonder what is being returned. <code>check</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5875827, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e75iX.jpg?s=128&g=1", "display_name": "RTriplett", "link": "https://stackoverflow.com/users/5875827/rtriplett"}, "edited": false, "score": 0, "creation_date": 1454470761, "post_id": 35167987, "comment_id": 58054239, "body": "Thank you so much that fixed it. I will fix the format on my post++."}], "tags": [], "owner": {"reputation": 4887, "user_id": 897295, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kql9J.png?s=128&g=1", "display_name": "mauro", "link": "https://stackoverflow.com/users/897295/mauro"}, "is_accepted": false, "score": 1, "last_activity_date": 1454470302, "creation_date": 1454470302, "answer_id": 35167987, "question_id": 35167905, "link": "https://stackoverflow.com/questions/35167905/making-a-validation-function-to-tell-if-the-number-entered-is-positve/35167987#35167987", "title": "Making a validation function to tell if the number entered is positve", "body": "<p>First... you didn't pass any value to validInput(). I guess your code here above won't even compile...</p>\n\n<p>You should change this line:</p>\n\n<pre><code>check = validInput();\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>check = validInput(len);\n</code></pre>\n\n<p>Also consider that variable \"check\" returned by your function is neither initialised nor set...</p>\n\n<p>P.S. please indent your code...</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 1, "last_activity_date": 1454528758, "creation_date": 1454528758, "answer_id": 35186265, "question_id": 35167905, "link": "https://stackoverflow.com/questions/35167905/making-a-validation-function-to-tell-if-the-number-entered-is-positve/35186265#35186265", "title": "Making a validation function to tell if the number entered is positve", "body": "<p>this line: </p>\n\n<pre><code>check = validInput();\n</code></pre>\n\n<p>is missing the parameter.  Suggest:</p>\n\n<pre><code>check = validInput( len );\n</code></pre>\n\n<p>Of course, the code should check the returned value, not the parameter value, from the call to <code>scanf()</code> to assure the operation was successful.  In this case, the returned value should be 1.  any other returned value would indicate an error occurred.</p>\n\n<p>regarding the <code>validInput()</code> function:</p>\n\n<p>the variable <code>check</code> is never initialized to any specific value.  Suggest:</p>\n\n<pre><code>int validInput(double len)\n{\n    int check = 1; // indicate valid\n\n    if (len &lt;= 0 )\n    {\n        check = 0; // indicate not valid\n        printf(\"\\nNumbers entered must be positive.\\n\");\n    }\n\n    return check;\n}\n</code></pre>\n\n<p>Note: the trailing <code>\\n</code> on the call to <code>printf()</code> is to force the text to be output immediately rather than setting in the internal <code>stdout</code> buffer until the program exits, at which time it would be output.</p>\n\n<p>incorporating appropriate error checking into the <code>main()</code> function results in:</p>\n\n<pre><code>#include &lt;stdio.h&gt;   // scanf(), printf()\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE\n\nint validInput(double len);\n\nint main(void)\n{\n    double len ;\n    int check;\n\n    printf(\"\\nEnter length of room in feet:\");\n    if( 1 != scanf(\"%lf\", &amp;len) )\n    { // then scanf failed\n        perror( \"scanf for length of room, in feet, failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, scanf successful\n\n    check = validInput( len );\n\n    printf( \"the user input was %s\\n\", (check)? \"valid\" : \"not valid\");\n\n    return 0;\n\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5875827, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e75iX.jpg?s=128&g=1", "display_name": "RTriplett", "link": "https://stackoverflow.com/users/5875827/rtriplett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 35186265, "answer_count": 2, "score": 0, "last_activity_date": 1454528758, "creation_date": 1454469621, "question_id": 35167905, "link": "https://stackoverflow.com/questions/35167905/making-a-validation-function-to-tell-if-the-number-entered-is-positve", "title": "Making a validation function to tell if the number entered is positve", "body": "<p>/* this is just a function I'm trying to make for a bigger program that calcs the area of a room. When the answer &lt;= 0 I want to get the function to take over, but I keep getting to few arguments error when I compile it. Any help will be gladly appreciated.*/</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint validInput(double len);\nint main(void)\n{\ndouble len ;\nint check;\nprintf(\"\\nEnter length of room in feet:\");\n        scanf(\"%lf\", &amp;len);\ncheck = validInput();\n\nreturn 0;\n\n}\n\nint validInput(double len)\n{\nint check;\nif (len &lt;= 0 )\nprintf(\"\\nNumbers entered must be positive.\");\nreturn check;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1454470586, "post_id": 35167897, "comment_id": 58054188, "body": "Well <code>num &amp;&amp; 1</code> is always going to be non-zero , so the logical inverse will always be zero.  Not very useful.  Why not just use <code>~num != 0</code>.  If you don&#39;t want to use <code>!=</code> then you can use <code>!!~num</code> instead."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1454470613, "post_id": 35167897, "comment_id": 58054194, "body": "!!~num uses only those ops"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454470721, "post_id": 35167897, "comment_id": 58054228, "body": "To clarify, you&#39;re looking for a 0 <i>bit</i>, right? Not a decimal digit like Keno&#39;s answer is about?"}, {"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 0, "creation_date": 1454470794, "post_id": 35167897, "comment_id": 58054245, "body": "Could you please elaborate on what you mean by &quot;has a zero in it&quot;?  Give some examples of numbers that satisfy this property, and some that don&#39;t. You have written <code>&amp;&amp; 1</code> (meaning &quot;...and true&quot;) which is not a bitwise operation.  Think about what you are trying to test, and how you would test for it in real life."}], "answers": [{"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1454470639, "post_id": 35168032, "comment_id": 58054202, "body": "I think OP is looking for a 0 bit in the entire <code>int</code>, so this answer won&#39;t help."}, {"owner": {"reputation": 1640, "user_id": 3550662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hlaxt.png?s=128&g=1", "display_name": "Keno Clayton", "link": "https://stackoverflow.com/users/3550662/keno-clayton"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1454470842, "post_id": 35168032, "comment_id": 58054262, "body": "@Tom Oh, well I guess I didn&#39;t fully understand his question."}], "tags": [], "owner": {"reputation": 1640, "user_id": 3550662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hlaxt.png?s=128&g=1", "display_name": "Keno Clayton", "link": "https://stackoverflow.com/users/3550662/keno-clayton"}, "is_accepted": false, "score": 1, "last_activity_date": 1454470572, "creation_date": 1454470572, "answer_id": 35168032, "question_id": 35167897, "link": "https://stackoverflow.com/questions/35167897/at-least-one-bit-in-int-num-is-0/35168032#35168032", "title": "At Least One bit in int num is 0", "body": "<p>If I am understanding your question correctly, you want to check if there is a zero in a whole integer or 'string' of numbers? E.g. 13590 &lt;-- 0 at the end.</p>\n\n<p>To do this, you need to check each digit using a loop and see if that digit is equal to zero. Here's one way of doing it.</p>\n\n<pre><code>int hasAZero(int num) {\n    int val = num;\n\n    while (val &gt;= 10) {\n        if ((val % 10) == 0) {\n            return 1;\n        }\n        val = val / 10;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454472150, "post_id": 35168057, "comment_id": 58054646, "body": "Negative values would seem to pose problems. Should the bitwise operations not be limited to unsigned values?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454475912, "post_id": 35168057, "comment_id": 58055801, "body": "@David Unsigned would probably be preferable, but I think bitwise complement should work on signed integers as well.  The only time this function should return false is if <code>num</code> is all <code>1</code>s, i.e. <code>-1</code> (or, for unsigned, it would be <code>0xffff....</code>).  I guess you could refer to it as <code>~0</code>."}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 3, "last_activity_date": 1454470737, "creation_date": 1454470737, "answer_id": 35168057, "question_id": 35167897, "link": "https://stackoverflow.com/questions/35167897/at-least-one-bit-in-int-num-is-0/35168057#35168057", "title": "At Least One bit in int num is 0", "body": "<p>Try this:</p>\n\n<pre><code>int hasAZero(int num) {\n    return ~num != 0;\n}\n</code></pre>\n\n<p>If <code>num</code> contains a zero bit, then its bitwise complement will contain a <code>1</code> bit and will be non-zero.  If it does not contain a zero bit, then its complement will be zero.</p>\n\n<p>If you don't want to use <code>!=</code> then you can use <code>!!~num</code> instead as rpattiso pointed out (I wasn't clear is comparisons were allowed), i.e.:</p>\n\n<pre><code>int hasAZero(int num) {\n    return !!~num;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5875820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a5091f7b6506697f330498834bd728?s=128&d=identicon&r=PG&f=1", "display_name": "user5875820", "link": "https://stackoverflow.com/users/5875820/user5875820"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1151, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1454470737, "creation_date": 1454469546, "question_id": 35167897, "link": "https://stackoverflow.com/questions/35167897/at-least-one-bit-in-int-num-is-0", "title": "At Least One bit in int num is 0", "body": "<p>Trying to create a method that returns a 1 if the input int num has a zero in it using C without using if-else statements and using the bottom bitwise and boolean operators.</p>\n\n<p>i tried this so far:</p>\n\n<pre><code>int hasAZero(int num){\n return !(num &amp;&amp; 1);\n}\n\nBitwise AND (c = a &amp; b) \u2013 c has 1s in the places where both of the    corresponding bits in a and b are 1.\nBitwise OR (c = a | b) \u2013 c has 1s wherever at least one of the corresponding bits in a and b is 1.\nBitwise XOR (c = a ^ b) \u2013 c has 1s wherever one and only one of the corresponding bits in a and b is 1.\nBitwise NOT (c = ~a) \u2013 c is a, with each bit inverted, else c is 0.\nRight shift (c = a &gt;&gt; b) \u2013 c is a, with each bit moved lower b places.\nLeft shift (c = a &lt;&lt; b) \u2013 c is a, with each bit moved higher b places.\nBoolean AND (c = a &amp;&amp; b) \u2013 c is 1 if both a and b are non-zero.\nBoolean OR (c = a || b) \u2013 c is 1 if either a and b are non-zero.\nBoolean NOT (c = !a) \u2013 c is 1 only if a is 0.\n</code></pre>\n"}, {"tags": ["c", "strdup"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454469396, "post_id": 35167841, "comment_id": 58053879, "body": "I don&#39;t think <code>strdup</code> requires <code>_BSD_SOURCE</code>, does it?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454470188, "post_id": 35167841, "comment_id": 58054100, "body": "@immibis: It requires <i>some</i> feature test macro. It&#39;s not defined by ISO C. The man page on my system lists half a dozen relevant macros."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454472899, "post_id": 35167841, "comment_id": 58054883, "body": "In many ways, you&#39;re not giving us very much context to work with.  What platform are you on?  Which compiler are you using?  Which options (other than <code>-D_BSD_SOURCE</code>) are you using?  Since <code>strdup()</code> is part of POSIX, you can often get what you want by <code>-D_XOPEN_SOURCE=700</code> or something similar, or the equivalent in a header file.  You can often avoid the problem by compiling with GCC (or clang) and <code>-std=gnu11</code> instead of <code>-std=c11</code>. I use a header <code>posixver.h</code> which defines <code>_XOPEN_SOURCE</code> and include that first. YMMV \u2014 but we&#39;d be able to help you better if you gave us more information."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1454472998, "post_id": 35167841, "comment_id": 58054909, "body": "Note that on some platforms, <code>-D_GNU_SOURCE</code> will work as well."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "edited": false, "score": 0, "creation_date": 1454469498, "post_id": 35167857, "comment_id": 58053917, "body": "Wierd, but I am still getting the implicit declaration warnings."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1454469679, "post_id": 35167857, "comment_id": 58053972, "body": "<b>before</b> includes, i think"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1454469713, "post_id": 35167857, "comment_id": 58053980, "body": "This gets more complicated if precompiled headers are in use"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1454469872, "last_edit_date": 1454469872, "creation_date": 1454469218, "answer_id": 35167857, "question_id": 35167841, "link": "https://stackoverflow.com/questions/35167841/how-to-avoid-including-d-bsd-source-in-compile-statement-every-time-the-code/35167857#35167857", "title": "How to avoid including &quot;-D_BSD_SOURCE&quot; in compile statement every time the code is compiled?", "body": "<p>At the top of your .c file, <em>before</em> the includes, put this:</p>\n\n<pre><code>#define _BSD_SOURCE\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 35167857, "answer_count": 1, "score": 0, "last_activity_date": 1454472684, "creation_date": 1454469139, "last_edit_date": 1454472684, "question_id": 35167841, "link": "https://stackoverflow.com/questions/35167841/how-to-avoid-including-d-bsd-source-in-compile-statement-every-time-the-code", "title": "How to avoid including &quot;-D_BSD_SOURCE&quot; in compile statement every time the code is compiled?", "body": "<p>To avoid a whole bunch of <code>strdup</code> errors, I have to always include <code>-D_BSD_SOURCE</code> in my compile statement. Is there a way I can somehow include this in my <code>.c</code> file and never include it in my compile statement again.</p>\n"}, {"tags": ["c", "c99"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1454469070, "post_id": 35167825, "comment_id": 58053791, "body": "Yes, just remove the last <code>n</code>. VLA dimensions aren&#39;t checked at compile time anyway so you aren&#39;t losing any safety (i.e. it was somewhat unsafe with to begin with)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1454469451, "post_id": 35167825, "comment_id": 58053897, "body": "@M.M How could they &quot;not be checked at compile time&quot;? The compiler needs to know the size to compute (or emit code that computes) the addresses of the elements!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1454469514, "post_id": 35167825, "comment_id": 58053920, "body": "@immibis <code>n</code> might not be known at compile-time anyway, obviously it cannot be checked. The size computation you mention occurs at runtime. <code>n</code> could be resulting from user input.  example , <code>float (*p)[m] = matrix_transpose(3, mat);</code>  - this is correct if and only if <code>m == 3</code> but this can&#39;t be checked at compile-time because <code>m</code> is not known. It just causes silent UB if <code>m</code> does not happen to be <code>3</code> when executed."}, {"owner": {"reputation": 4281, "user_id": 100089, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e6f30238c63fb78843060050ec3a8dba?s=128&d=identicon&r=PG", "display_name": "Samuel Danielson", "link": "https://stackoverflow.com/users/100089/samuel-danielson"}, "edited": false, "score": 0, "creation_date": 1454469852, "post_id": 35167825, "comment_id": 58054019, "body": "immibis is saying that if I had e.g. (matrix_transpose(2, (float[2][2]){{1,2}{3,4}}))[1][0], the compiler needs to know how much to offset to multiply by 1. It needs to know the size of the minor array dimension."}, {"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1552665350, "post_id": 35167825, "comment_id": 97110747, "body": "The return type is in fact a pointer to a variable length array, not a pointer to an array of VLAs. The latter would be <code>float (*foo(float input[4][4]))[4][n];</code>. Note that in that case you have to either use a constant expression or a global variable for the non-VLA array size."}], "owner": {"reputation": 4281, "user_id": 100089, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e6f30238c63fb78843060050ec3a8dba?s=128&d=identicon&r=PG", "display_name": "Samuel Danielson", "link": "https://stackoverflow.com/users/100089/samuel-danielson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1454469003, "creation_date": 1454469003, "question_id": 35167825, "link": "https://stackoverflow.com/questions/35167825/can-a-function-return-a-pointer-to-an-array-of-variable-length-arrays", "title": "Can a function return a pointer to an array of variable length arrays?", "body": "<p>I tried to define the transpose of a square matrix but I'm hung up on the function's type signature. I'm trying to generalize from this (which works):</p>\n\n<pre><code>float (*matrix_transpose (float matrix[4][4]))[4];\n</code></pre>\n\n<p>To this (which doesn't):</p>\n\n<pre><code>float (*matrix_transpose (int n, float matrix[n][n]))[n];\n</code></pre>\n\n<p>GCC says this:</p>\n\n<pre><code>error: 'n' undeclared here (not in a function)\n float (*matrix_transpose (int n, float matrix[n][n]))[n];\n                                                       ^\n</code></pre>\n\n<p>Is there a correct way or write what I want or is it perhaps not possible in the language, or a standards oversight, or a GCC bug?</p>\n"}, {"tags": ["c", "arrays", "binary", "hex"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454468258, "post_id": 35167638, "comment_id": 58053577, "body": "A &quot;32 bit binary array&quot; is not possible in C. But you can use some &quot;packed&quot; version of that, which can is called <code>uint32_t</code> in general in C. On a typical PC-OS <code>unsigned int</code> would also be possible. All current digital computers only know binary data."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454468321, "post_id": 35167638, "comment_id": 58053598, "body": "Your <code>binaryNum[32]</code> array holds the ASCII character values of  <code>&#39;0&#39;</code> and <code>&#39;1&#39;</code>, not <code>0&#39;s</code> and <code>1&#39;s</code>..."}, {"owner": {"reputation": 47, "user_id": 5012820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/25ab0b696704afb1b0954fa8cdfa1ae0?s=128&d=identicon&r=PG&f=1", "display_name": "luvAtime41", "link": "https://stackoverflow.com/users/5012820/luvatime41"}, "edited": false, "score": 0, "creation_date": 1454468921, "post_id": 35167638, "comment_id": 58053750, "body": "I can get the 4 &quot;bit&quot; blocks, for example, the first one I&#39;d get is 0010, but It displays as &quot;10&quot; and I dont know how to compare that with the binaryDigits"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454470581, "post_id": 35167638, "comment_id": 58054187, "body": "Again, this is where there is ambiguity. Your 4 &quot;bit&quot; blocks (<code>char *binaryDigits[16]</code>) is actually an array of <code>16</code> <i>character pointers</i> to <code>5-character string literals</code> (including the <i>nul-terminating</i> character). Each <i>character</i> is a <code>byte</code> (<code>8-bits</code>). You can get a binary number from the strings by comparing <code>binaryDigits[0-15][0-4]</code> against <code>&#39;0&#39;</code> and <code>&#39;1&#39;</code> and then left-shifting <code>&lt;&lt;</code> the number of positions required. But like I say, there are a lot of gymnastics involved."}], "answers": [{"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1454469833, "creation_date": 1454469833, "answer_id": 35167926, "question_id": 35167638, "link": "https://stackoverflow.com/questions/35167638/how-to-convert-binary-int-array-to-hex-char-array/35167926#35167926", "title": "How to convert binary int array to hex char array?", "body": "<p>I apologize if this isn't the crux of your issue, but you say</p>\n\n<blockquote>\n  <p>I have a 32 <code>bit</code> long array of 32 binary digits</p>\n</blockquote>\n\n<p>However, <code>int binaryNum[32]</code> is a <code>32-integer</code> long array (<code>4 bytes</code> per <code>int</code>, <code>8 bits</code> per <code>byte</code> = <code>4 * 8 * 32</code> which is (<code>1024</code> bits)). That is what is making things unclear. </p>\n\n<p>Further, you are assigning the <em>ASCII character values</em> <code>'0'</code> (which is <code>0x30</code> hex or <code>48</code> decimal) and <code>'1'</code> (<code>0x31</code>, <code>49</code>) to each location in <code>binaryNum</code>. You can do it, and do the gymnastics to compare each value to actually form a </p>\n\n<blockquote>\n  <p>32 <code>bit</code> long array of 32 binary digits</p>\n</blockquote>\n\n<p>but if that is what you have, why not just write it that way? (as a <em>binary constant</em>). That will give you your <code>32-bit</code> binary value. For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    unsigned binaryNum = 0b00100001000010010000000000001010;\n\n    printf (\"\\n binaryNum : 0x%8x  (%u decimal)\\n\\n\", binaryNum, binaryNum);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/binum32\n\n binaryNum : 0x2109000a  (554237962 decimal)\n</code></pre>\n\n<p>If this is not where your difficulty lies, please explain further, or again, just what you are trying to accomplish.</p>\n"}], "owner": {"reputation": 47, "user_id": 5012820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/25ab0b696704afb1b0954fa8cdfa1ae0?s=128&d=identicon&r=PG&f=1", "display_name": "luvAtime41", "link": "https://stackoverflow.com/users/5012820/luvatime41"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "accepted_answer_id": 35167926, "answer_count": 1, "score": -1, "last_activity_date": 1454469833, "creation_date": 1454467827, "last_edit_date": 1454467990, "question_id": 35167638, "link": "https://stackoverflow.com/questions/35167638/how-to-convert-binary-int-array-to-hex-char-array", "title": "How to convert binary int array to hex char array?", "body": "<p>Say I have a 32 bit long array of 32 binary digits and I want to output that in Hex form. How would I do that? this is what I have right now but it is too long and I don't know how to compare the 4 binary digits to the corresponding hex number</p>\n\n<p>This is what I have right now where I break up the 32 bit number into 4 bit binary and try to find the matching number in binaryDigits</p>\n\n<pre><code>char hexChars[16] ={'0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'};\nchar * binaryDigits[16] = {\"0000\",\"0001\",\"0010\",\"0011\",\"0100\",\"0101\",\"0110\",\"0111\",\"1000\",\"1001\",\"1010\",\"1011\",\"1100\",\"1101\",\"1110\",\"1111\"};\n\nint binaryNum[32]= {'0','0','1','0','0','0','0','1','0','0','0','0','1','0','0','1','0','0','0','0','0','0','0','0','0','0','0','0','1','0','1','0'};\nint currentBlock, hexDigit;\nint a=0, b=1, i=0;\nwhile (a&lt;32)\n{\n    for(a=i+3;a&gt;=i;a--)\n    {\n        current=binaryNum[a];\n        temp=current*b;\n        currentBlock=currentBlock+temp;\n        b*=10;\n    }\n    i=a;\n\n    while(match==0)\n    {\n        if(currentBlock != binaryDigits[y])\n            y++;\n        else\n        {\n            match=1;\n            hexDigit=binaryDigits[y];\n            y=0;\n            printf(\"%d\",hexDigit);\n        }\n    }\n}\n\nprintf(\"\\n%d\",currentBlock);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1454467797, "post_id": 35167614, "comment_id": 58053439, "body": "Apart from lack of error checking, you also have undefined behaviour reading data into arbitrary memory via uninitialised pointers."}, {"owner": {"reputation": 4158, "user_id": 1228449, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03c6c1563ed94f735579a66abd200ebb?s=128&d=identicon&r=PG", "display_name": "Johannes S.", "link": "https://stackoverflow.com/users/1228449/johannes-s"}, "edited": false, "score": 0, "creation_date": 1454483201, "post_id": 35167614, "comment_id": 58058736, "body": "Except for the output stream, this is just C...."}], "answers": [{"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454470133, "post_id": 35167933, "comment_id": 58054083, "body": "What if I don&#39;t know how many bytes the words will need? How can I look at each word, see how many bytes it needs, and then allocate that many bytes? Would I use a temp variable?"}, {"owner": {"reputation": 2571, "user_id": 2716578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ofPGo.png?s=128&g=1", "display_name": "F&#225;bio Junqueira", "link": "https://stackoverflow.com/users/2716578/f%c3%a1bio-junqueira"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454501808, "post_id": 35167933, "comment_id": 58070601, "body": "To figure out how big the line you are reading is, you must read it until you reach the line terminator. One way of doing this is by allocating a large memory buffer, reading the data into it, and checking if the line terminator was found. If it wasn&#39;t, realloc a larger buffer, read more data into it, and check again. Here is a example: <a href=\"http://stackoverflow.com/questions/2532425/read-line-from-file-without-knowing-the-line-length\" title=\"read line from file without knowing the line length\">stackoverflow.com/questions/2532425/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2571, "user_id": 2716578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ofPGo.png?s=128&g=1", "display_name": "F&#225;bio Junqueira", "link": "https://stackoverflow.com/users/2716578/f%c3%a1bio-junqueira"}, "is_accepted": false, "score": 2, "last_activity_date": 1454469889, "creation_date": 1454469889, "answer_id": 35167933, "question_id": 35167614, "link": "https://stackoverflow.com/questions/35167614/fscanf-not-reading-strings-into-array/35167933#35167933", "title": "fscanf not reading strings into array", "body": "<p><code>words[i]</code> is a pointer that points to a random memory location. Make sure to make it point to allocated memory.</p>\n\n<pre><code>//Now words[i] points to the 1000 bytes allocated with the new keyword\nwords[i] = new char[1000];\n//fscan will write the input to those bytes\nfscanf(file, \"%s \", words[i]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454470962, "post_id": 35168035, "comment_id": 58054289, "body": "What if I don&#39;t know how many bytes the words will need? How can I look at each word, see how many bytes it needs, and then allocate that many bytes? Would I use a temp variable?"}, {"owner": {"reputation": 6849, "user_id": 1046738, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fad002f88c1fc7c38c3154d3970f1ad2?s=128&d=identicon&r=PG", "display_name": "jfly", "link": "https://stackoverflow.com/users/1046738/jfly"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454471248, "post_id": 35168035, "comment_id": 58054385, "body": "If you don&#39;t read the string, how can you know the length of the string? But you need allocate enough memory when you read the string:)"}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454471596, "post_id": 35168035, "comment_id": 58054484, "body": "So I would read it into a temp variable, then look at the length of the string in the temp variable, then copy it into the array?"}, {"owner": {"reputation": 6849, "user_id": 1046738, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fad002f88c1fc7c38c3154d3970f1ad2?s=128&d=identicon&r=PG", "display_name": "jfly", "link": "https://stackoverflow.com/users/1046738/jfly"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454471853, "post_id": 35168035, "comment_id": 58054555, "body": "Yes, you can use a <code>char[your_max_string_len]</code> as a temp variable to read the string ,the <code>strcpy</code> to the allocated memory."}, {"owner": {"reputation": 6849, "user_id": 1046738, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fad002f88c1fc7c38c3154d3970f1ad2?s=128&d=identicon&r=PG", "display_name": "jfly", "link": "https://stackoverflow.com/users/1046738/jfly"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 1, "creation_date": 1454472054, "post_id": 35168035, "comment_id": 58054619, "body": "Optionally you can use <code>getline</code> <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">extension of GNU</a> to do what you want: <code>read = getline(&amp;words[i], &amp;len, stdin)</code>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454473481, "post_id": 35168035, "comment_id": 58055044, "body": "@Ren&#233;G You should be using <code>std::string</code> and <code>getline</code>so you don&#39;t need to be allocating memory or worrying about buffer sizes."}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1454478382, "post_id": 35168035, "comment_id": 58056620, "body": "@crashmstr The class uses C++, but we haven&#39;t learned any actual C++ yet, we&#39;re basically just using the C subset for now. Except for the streams."}], "tags": [], "owner": {"reputation": 6849, "user_id": 1046738, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fad002f88c1fc7c38c3154d3970f1ad2?s=128&d=identicon&r=PG", "display_name": "jfly", "link": "https://stackoverflow.com/users/1046738/jfly"}, "is_accepted": true, "score": 2, "last_activity_date": 1454481549, "last_edit_date": 1454481549, "creation_date": 1454470597, "answer_id": 35168035, "question_id": 35167614, "link": "https://stackoverflow.com/questions/35167614/fscanf-not-reading-strings-into-array/35168035#35168035", "title": "fscanf not reading strings into array", "body": "<p><code>char **words = new char*[n];</code>\nwill allocate a buffer to hold n pointers to char, <code>words</code> is just a pointer to an array of pointers. You need allocate enough memory for <code>words[i]</code>(the pointer to ) to hold the string:</p>\n\n<pre><code>for (i=0; i &lt; n; ++i ) {\n    words[i] = new char[your_max_string_len];\n}\n</code></pre>\n\n<p>Optionally you can use <code>getline</code> <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow\">extension of GNU</a>(if you use gcc) to do what you want:</p>\n\n<pre><code>size_t len = 0;\nssize_t read;\nread = getline(&amp;words[i], &amp;len, stdin);\n...\nfree(words[i]);\n</code></pre>\n\n<p>Actually, there is no magic in this function, it just does the memory allocation under the hood to save yours, and it's your responsibility to free it.</p>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 35168035, "answer_count": 2, "score": 0, "last_activity_date": 1454506692, "creation_date": 1454467648, "last_edit_date": 1454506692, "question_id": 35167614, "link": "https://stackoverflow.com/questions/35167614/fscanf-not-reading-strings-into-array", "title": "fscanf not reading strings into array", "body": "<p>Why doesn't this main print anything? It should print the first word in the file.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n  FILE *file = fopen(argv[1], \"r\");\n  int n = atoi(argv[2]);\n\n  char **words = new char*[n];\n  for(int i = 0; i &lt; n; i++)\n    {\n      fscanf(file, \"%s \", words[i]);\n    }\n  cout &lt;&lt; words[0] &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi", "opengl"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454466514, "post_id": 35167336, "comment_id": 58053129, "body": "I&#39;ve tried to remove a lot of the repetition from this question. Since that was a relatively big edit, I&#39;ll remind you that just because I have a big number next to my name doesn&#39;t mean I know any better than you, and it doesn&#39;t mean I have any authority, and if you disagree with my edit you&#39;re free to undo it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454467694, "post_id": 35167336, "comment_id": 58053407, "body": "@immibis: Too bad the question still is off-topic. It is either - asking for off-site resources/a tutorial or too broad."}, {"owner": {"reputation": 17, "user_id": 5501658, "user_type": "registered", "profile_image": "https://graph.facebook.com/778712108907012/picture?type=large", "display_name": "Fukzito Fukzi", "link": "https://stackoverflow.com/users/5501658/fukzito-fukzi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1454471090, "post_id": 35167336, "comment_id": 58054335, "body": "@Olaf No, I&#39;m not asking for a tutorial, I&#39;m asking for WHAT do I need to use OpenGL in WINAPI."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454473241, "post_id": 35167336, "comment_id": 58054972, "body": "What are you getting undefined references to, when you use <code>-lopengl32</code> and <code>-lglu32</code>?"}, {"owner": {"reputation": 17, "user_id": 5501658, "user_type": "registered", "profile_image": "https://graph.facebook.com/778712108907012/picture?type=large", "display_name": "Fukzito Fukzi", "link": "https://stackoverflow.com/users/5501658/fukzito-fukzi"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454476693, "post_id": 35167336, "comment_id": 58056055, "body": "@immibis Almost any gl.h and glu.h functions lol glBegin, glEnd, color, vertex functions, etc. According to what I&#39;ve found, it&#39;s because I&#39;m using a different (Newer or older) header than the .lib and DLL in system. My question is, where can I find what I need to build OpenGL projects? I already tried in opengl wiki, but oficial link is fallen lel I tried searching the file name from the wiki on internet, found it but not working either with headers, libs and dlls."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5501658, "user_type": "registered", "profile_image": "https://graph.facebook.com/778712108907012/picture?type=large", "display_name": "Fukzito Fukzi", "link": "https://stackoverflow.com/users/5501658/fukzito-fukzi"}, "edited": false, "score": 0, "creation_date": 1454634488, "post_id": 35172726, "comment_id": 58144628, "body": "Yup! Looks like there&#39;s something weird with MinGW 4.9.2; Just made a clean install from MinGW 5.3 and everything&#39;s ok. Thanks =^^="}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 0, "last_activity_date": 1454490757, "creation_date": 1454490757, "answer_id": 35172726, "question_id": 35167336, "link": "https://stackoverflow.com/questions/35167336/setup-mingw-for-creating-opengl-context-in-winapi/35172726#35172726", "title": "Setup MinGW for creating OpenGL context in WINAPI?", "body": "<blockquote>\n  <p>What do I need to get, download or set up to create OpenGL projects with C and WINAPI?</p>\n</blockquote>\n\n<p>In theory: <em>nothing!</em></p>\n\n<p>OpenGL-1.1 is part of the Win32 ABI, i.e. the contract between the OS and compilers how things work together and what must be supported at a minimum for a development environment to be a fully suitable platform SDK.</p>\n\n<p>MinGW normally brings the necessary development resources (headers, libraries, linker definition files) by default. So I'd start by double checking, that the compiler is installed properly. Most likely your MinGW installation is damaged and I suggest reinstalling it. Preferably through a package manager.</p>\n\n<p>My personal go-to solution for installing MinGW is through MSys2 which uses the Pacman package manager (courtesy of Arch Linux); <a href=\"https://msys2.github.io/\" rel=\"nofollow\">https://msys2.github.io/</a></p>\n"}], "owner": {"reputation": 17, "user_id": 5501658, "user_type": "registered", "profile_image": "https://graph.facebook.com/778712108907012/picture?type=large", "display_name": "Fukzito Fukzi", "link": "https://stackoverflow.com/users/5501658/fukzito-fukzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 35172726, "answer_count": 1, "score": 0, "last_activity_date": 1454490757, "creation_date": 1454465526, "last_edit_date": 1454466464, "question_id": 35167336, "link": "https://stackoverflow.com/questions/35167336/setup-mingw-for-creating-opengl-context-in-winapi", "title": "Setup MinGW for creating OpenGL context in WINAPI?", "body": "<p>I've been trying to setup MinGW to work with C and WINAPI to create OpenGL projects. How to I download, or otherwise get, the OpenGL headers and libraries?</p>\n\n<p>I've already read that I can use <code>#include &lt;gl/glu.h&gt;</code>. I tried that and got some errors like <code>\"include glu.h\" not found</code>, and so on. I tried downloading these .h files and putting them inside the Include/GL folder, but now I get errors like <code>Undefined reference to... bla bla</code> when I link, even when I add linker options like <code>-lopengl32 -lglu32</code>, etc.</p>\n\n<p>How can I start with C, WINAPI and OpenGL environment?</p>\n\n<p>What do I need to get, download or set up to create OpenGL projects with C and WINAPI?</p>\n\n<p>My OS is Windows 10 64 bit.\nMy MinGW version is 4.9.2-tdm64-3/4.9.2-tdm3</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454463625, "post_id": 35166989, "comment_id": 58052299, "body": "&quot;I understand that in reality it&#39;s not rows and columns but a continuous block of memory&quot; - That applies to quite everything in a computer. Modern (and most older) CPUs don&#39;t have an idea about structured datatypes."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1454465513, "post_id": 35167175, "comment_id": 58052840, "body": "Dang  you type fast Tom! I&#39;ll throw you the vote for that."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454466052, "post_id": 35167175, "comment_id": 58052985, "body": "Just to add that passing variadic argument with the wrong type is not just &quot;not really correct&quot;, but undefined behaviour per-se. So using the wrong format-specifier is actually not just a flaw, but allows your computer jump out of the window once invoked or nasal daemons to appear."}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 1, "last_activity_date": 1454464624, "creation_date": 1454464624, "answer_id": 35167175, "question_id": 35166989, "link": "https://stackoverflow.com/questions/35166989/static-mutlidimensional-arrays-in-c-vs-pointers-and-addresses/35167175#35167175", "title": "Static mutlidimensional arrays in C vs pointers and addresses", "body": "<p>You're pretty much correct about this.  And remember, <code>a[b]</code> is equivalent to <code>*(a+b)</code>, and <code>&amp;*x</code> is equivalent to <code>x</code> (assuming <code>x</code> appears in an expression context), so <code>&amp;a[b]</code> is equivalent to <code>&amp;*(a+b)</code> which is just <code>a+b</code>, so <code>&amp;a[0]</code> is just <code>a</code> (again, in an expression context).</p>\n\n<p>In your case, <code>int a[NUM_ROWS][NUM_COLS]</code> is a block of <code>NUM_ROWS*NUM_COLS</code> elements of type <code>int</code>.  They are grouped into <code>NUM_ROWS</code> blocks (rows) of <code>NUM_COLS</code> <code>int</code> elements.  If you write <code>a[i][j]</code> it's equivalent to <code>*(*(a + i) + j)</code>.  The inner dereference doesn't actually perform a memory access, but rather it removes a level of dereference from the data type.  You can think of it as a type cast.</p>\n\n<p>When used in an expression context, <code>a</code> becomes an <code>int (*)[NUM_COLS]</code> pointer which points to the first row of <code>a</code>.  Pointer addition scales by the size of an element of <code>a</code>, which is <code>sizeof(int [NUM_COLS])</code> which is <code>NUM_COLS*sizeof(int)</code>.</p>\n\n<p>You will commonly see people talk of array names \"decaying\" into pointers when used in an expression context.  In the one-dimensional case, if you have <code>int b[DIM]</code>, it \"decays\" into an <code>int *</code> whose value is the address of <code>b</code>.  For instance, when passed as an argument to a function, the array isn't passed, but instead its address is passed.</p>\n\n<p>In the two-dimensional case, if you have <code>int a[NUM_ROWS][NUM_COLS]</code>, it \"decays\" into an <code>int (*)[NUM_COLS]</code> pointer, which is a pointer to an array of <code>NUM_COLS</code> <code>int</code> elements.</p>\n\n<p>In your example, you pass following to printf:</p>\n\n<ol>\n<li><code>a</code> (decays to <code>int (*)[NUM_COLS]</code>)</li>\n<li><code>a[0]</code>  (decays to <code>int *</code>)</li>\n<li><code>&amp;a[0]</code>  (this is just <code>&amp;*(a + 0)</code> or <code>a</code>, decayed to <code>int (*)[NUM_COLS]</code>)</li>\n</ol>\n\n<p>The first and last cases are basically the same.  The second case differs only in data type.  Note that the data type affects pointer addition.  When adding an <code>int</code> to a pointer, the <code>int</code> is scaled by the size of whatever the pointer points to.</p>\n\n<p>Also note that your <code>printf</code> formats aren't really correct, since you're passing pointer values where <code>int</code> values are expected.  That won't work on all platforms, and most compilers will warn about bad data types for the format string.</p>\n\n<p>The safe way to format an address with <code>printf</code> is with <code>%p</code>.  This expects a pointer, so you will be safe if a pointer and an <code>int</code> don't have the same size.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1454467911, "last_edit_date": 1454467911, "creation_date": 1454465396, "answer_id": 35167313, "question_id": 35166989, "link": "https://stackoverflow.com/questions/35166989/static-mutlidimensional-arrays-in-c-vs-pointers-and-addresses/35167313#35167313", "title": "Static mutlidimensional arrays in C vs pointers and addresses", "body": "<blockquote>\n  <p>I'm learning C and got stuck on the following piece of code:</p>\n</blockquote>\n\n<p>Break down each part of the declaration and loop:</p>\n\n<pre><code>int a[NUM_ROWS][NUM_COLS], /* declare an array of int, size NUM_ROWS * NUM_COLS */ \n(*p)[NUM_COLS],            /* delcare pointer to array of int NUM_COLS          */\ni;                         /* declare a single int           */\nfor (p = &amp;a[0];            /* assign 'p' the address of 'a'  */\np &lt; &amp;a[NUM_ROWS];          /* while address 'p' &lt; address a[NUM_ROWS] */\np++) {                     /* advance to next pointer 'p'    */\n    (*p)[i] = 0;           /* set value at 'p[i]' = 0        */\n}\n</code></pre>\n\n<p>So you will set the value of the <code>i'th</code> column (or element) in each array of <code>NUM_COLS</code> ints to <code>0</code>. You need to initialize <code>0 &lt; i &lt; NUM_COLS</code> or the behavior will be undefined as <code>i</code> is uninitialized.</p>\n\n<p>A working example may help you step through what is taking place. Basically, your example code is simply providing a way to step through a 2D array using a <em>pointer</em> and a <em>single integer</em> to isolate a column value rather than the more common use of two integers. Using two integers (using <code>i</code> as the column value to set the second column to <code>0</code> in each of the rows) you would see: </p>\n\n<pre><code>i = 1;\nfor (j = 0; j &lt; NUM_ROWS; j++)\n    a[j][i] = 0;\n</code></pre>\n\n<p>Both the code snippet above and your code snippet will accomplish the same thing, the difference being <code>p</code> points (holds the pointer value to) an array of 3 <code>int</code> values. You dereference <code>p</code> (e.g. <code>*p</code>) to get the beginning address of any individual row. You must surround the dereferenced <code>p</code> with parenthesis in order to index any individual <em>value</em> in the row because in C <em>operator precedence</em> the <code>[]</code> operator has higher precedence than the <code>'*'</code> operator. (e.g. you need <code>(*p)[x]</code> instead of <code>*p[x]</code>).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define NUM_COLS 3\n\nint main (void) {\n\n    int a[][NUM_COLS] = {{1,2,3},\n                         {4,5,6},\n                         {7,8,9}};\n    int (*p)[NUM_COLS];\n    int i;\n    int NUM_ROWS = sizeof a/sizeof *a;\n\n    printf (\"\\noriginal array:\\n\\n\");\n    for (p = a; p &lt; &amp;a[NUM_ROWS]; p++) {\n        for (i = 0; i &lt; NUM_COLS; i++)\n            printf (\" %2d\", (*p)[i]);\n        putchar ('\\n');\n    }\n\n    /* set col 1 (2nd col) to zero */\n    i = 1;\n    for (p = a; p &lt; &amp;a[NUM_ROWS]; p++) {\n        (*p)[i] = 0;\n    }\n\n    printf (\"\\nmodified array:\\n\\n\");\n    for (p = a; p &lt; &amp;a[NUM_ROWS]; p++) {\n        for (i = 0; i &lt; NUM_COLS; i++)\n            printf (\" %2d\", (*p)[i]);\n        putchar ('\\n');\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/array_decl\n\noriginal array:\n\n  1  2  3\n  4  5  6\n  7  8  9\n\nmodified array:\n\n  1  0  3\n  4  0  6\n  7  0  9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5875552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48c3abcb6915a242e8001c6167c6bb7?s=128&d=identicon&r=PG&f=1", "display_name": "user5875552", "link": "https://stackoverflow.com/users/5875552/user5875552"}, "edited": false, "score": 0, "creation_date": 1454623028, "post_id": 35167608, "comment_id": 58140062, "body": "Thanks a lot guys. It&#39;s a bit clearer now, although even here in these few answers I see something strange - Tom wrote &amp;a[0] decays to a pointer to an array of NUM_COL integers. M.M said &amp;a[0] gives me the address of the entire array a[0]. Is that somehow equivalent? Pointers and addresses?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1, "user_id": 5875552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48c3abcb6915a242e8001c6167c6bb7?s=128&d=identicon&r=PG&f=1", "display_name": "user5875552", "link": "https://stackoverflow.com/users/5875552/user5875552"}, "edited": false, "score": 0, "creation_date": 1454623404, "post_id": 35167608, "comment_id": 58140237, "body": "@user5875552 Tom didn&#39;t say that <code>&amp;a[0]</code> decays.  He was saying that <code>&amp;a[0]</code> is the <i>result of</i> <code>a</code> decaying.   Technically <code>a[0]</code> is defined as <code>*(a + 0)</code> , where <code>a</code> decays (since it is the operand of <code>+</code>).  The type of <code>*(a+0)</code> is <code>int[NUM_COLS]</code>, which is an array type, but this does not decay because we are using it as the operand of <code>&amp;</code> ."}, {"owner": {"reputation": 1, "user_id": 5875552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48c3abcb6915a242e8001c6167c6bb7?s=128&d=identicon&r=PG&f=1", "display_name": "user5875552", "link": "https://stackoverflow.com/users/5875552/user5875552"}, "edited": false, "score": 0, "creation_date": 1454626192, "post_id": 35167608, "comment_id": 58141566, "body": "Ohh, ok. Another piece of the puzzle - &quot;a&quot; decays because it&#39;s the operand of &quot;+&quot;. Thanks :) Can you also tell me what is this though? A pointer or an address? Or are those equivalent?"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1454467610, "creation_date": 1454467610, "answer_id": 35167608, "question_id": 35166989, "link": "https://stackoverflow.com/questions/35166989/static-mutlidimensional-arrays-in-c-vs-pointers-and-addresses/35167608#35167608", "title": "Static mutlidimensional arrays in C vs pointers and addresses", "body": "<blockquote>\n  <p>array name is an equivalent of address of the first element of the array</p>\n</blockquote>\n\n<p>This is not correct, although it is commonly stated. In fact, just like any other designator, <code>a[0]</code> designates an array of type <code>int[NUM_COLS]</code>.</p>\n\n<p>The correct version of the rule is that that the array name expession <em>may be converted to</em> a pointer holding the address of the first element.  This happens implicitly in many uses of the array name in an expression, but there are some expressions where it does not happen.</p>\n\n<p><code>&amp;a[0]</code> is an example of an expression where this conversion does not happen.  It gives you the address of the entire array <code>a[0]</code>  , in the same way that after <code>int x;</code> then <code>&amp;x</code> gives the address of the <code>int</code>.</p>\n\n<p>The conversion does not happen when the array expression is the operand of <code>&amp;</code>, <code>sizeof</code>, or an increment operator.</p>\n\n<p>In your <code>printf</code> lines, the conversion does happen in the first two, but not the third. Also, they all cause undefined behaviour due to using the wrong format specifier.  Supposing you fix this, remember that when you output a pointer like this, you are only outputting part of the story; there's no indicator of the <em>type</em> of the pointer in the output.  Although the first two cases are different pointers, they generate the same output in printf.</p>\n"}], "owner": {"reputation": 1, "user_id": 5875552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48c3abcb6915a242e8001c6167c6bb7?s=128&d=identicon&r=PG&f=1", "display_name": "user5875552", "link": "https://stackoverflow.com/users/5875552/user5875552"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1454467911, "creation_date": 1454463300, "question_id": 35166989, "link": "https://stackoverflow.com/questions/35166989/static-mutlidimensional-arrays-in-c-vs-pointers-and-addresses", "title": "Static mutlidimensional arrays in C vs pointers and addresses", "body": "<p>I'm learning C and got stuck on the following piece of code:</p>\n\n<pre><code>int a[NUM_ROWS][NUM_COLS], (*p)[NUM_COLS], i;\nfor (p = &amp;a[0]; p &lt; &amp;a[NUM_ROWS]; p++) {\n    (*p)[i] = 0;\n}\n</code></pre>\n\n<p>According to the author this is supposed to assign 0 to i-th column of a 2d array.</p>\n\n<p>I understand that in reality it's not rows and columns but a continuous block of memory - pretty much a 1d array where each element is a 1d array. Also: array name is an equivalent of address of the first element of the array (according to the book I'm reading). For 1d arrays it makes sense to me, 1st element can be an int or char or whatever. In 2d arrays however, each element is an array, so again an address of the first element of the array - this time the \"inner\" one? Does that mean \"a[0]\" gives the address of the 1st element of an array, and then we use the \"&amp;\" operator on it? What does that give me, an address of an address? :/</p>\n\n<p>Could someone please explain what's happening here, step-by-step? What's an address here, what's a pointer, etc. I went over a number of chapters on pointers in various C books to compare how authors explain this, but it looks like they use \"pointer\" and \"address\" interchangeably.</p>\n\n<p>I tried comparing the contents of all 3, like so:</p>\n\n<pre><code>printf(\"%d \", a);\nprintf(\"%d \", a[0]);\nprintf(\"%d \", &amp;a[0]);\n</code></pre>\n\n<p>but it all had the same value :/</p>\n"}, {"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454462604, "post_id": 35166854, "comment_id": 58052014, "body": "Why not look at the source code?"}, {"owner": {"reputation": 5304, "user_id": 2387673, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zcS8b.png?s=128&g=1", "display_name": "keelar", "link": "https://stackoverflow.com/users/2387673/keelar"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454462830, "post_id": 35166854, "comment_id": 58052075, "body": "But different versions might have different implementations?  Just want to know the whether one is always preferred than the other."}, {"owner": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "edited": false, "score": 2, "creation_date": 1454463898, "post_id": 35166854, "comment_id": 58052383, "body": "A suggestion.. the pointer returned from <code>lua_tostring</code> is not guaranteed to be valid after popping it from the stack. See <a href=\"http://www.lua.org/manual/5.3/manual.html#lua_tolstring\" rel=\"nofollow noreferrer\">lua_tolstring</a> in the manual. Make a copy if you need to keep a string value."}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454462901, "post_id": 35166915, "comment_id": 58052092, "body": "This answer seems to make no sense whatsoever. The question is whether accessing element -3 is slower than accessing element -1. The question isn&#39;t even about <code>lua_pop</code>! And even if it was, your answer doesn&#39;t tell us anything about the speed of <code>lua_pop</code>."}, {"owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454463240, "post_id": 35166915, "comment_id": 58052180, "body": "@immibis, sorry, I posted before completing the response. Hopefully it&#39;s more clear now."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1454463278, "post_id": 35166915, "comment_id": 58052194, "body": "Still, the question is not asking about the performance of <code>lua_pop</code>, but about the performance of other functions that access the stack."}, {"owner": {"reputation": 5304, "user_id": 2387673, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zcS8b.png?s=128&g=1", "display_name": "keelar", "link": "https://stackoverflow.com/users/2387673/keelar"}, "edited": false, "score": 0, "creation_date": 1454463359, "post_id": 35166915, "comment_id": 58052219, "body": "Thank you for your answer.  About &quot;You can read each value in O(1)&quot;, do you happen to have a reference to justify this part?"}, {"owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "edited": false, "score": 0, "creation_date": 1454463361, "post_id": 35166915, "comment_id": 58052220, "body": "Right, but the <code>lua_pop</code> is actually the dominant operation at O(N)."}, {"owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "reply_to_user": {"reputation": 5304, "user_id": 2387673, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zcS8b.png?s=128&g=1", "display_name": "keelar", "link": "https://stackoverflow.com/users/2387673/keelar"}, "edited": false, "score": 1, "creation_date": 1454463764, "post_id": 35166915, "comment_id": 58052339, "body": "@keelar, see my addendum on <code>index2addr</code>"}], "tags": [], "owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "is_accepted": true, "score": 1, "last_activity_date": 1454463563, "last_edit_date": 1454463563, "creation_date": 1454462822, "answer_id": 35166915, "question_id": 35166854, "link": "https://stackoverflow.com/questions/35166854/complexity-of-lua-stack-operations-lua-c-api/35166915#35166915", "title": "Complexity of Lua stack operations (Lua C API)", "body": "<p><a href=\"http://www.lua.org/source/5.3/lua.h.html\" rel=\"nofollow\">Lua 5.3 defines</a> <code>lua_pop</code> as</p>\n\n<pre><code>#define lua_pop(L,n)            lua_settop(L, -(n)-1)\n</code></pre>\n\n<p>and <code>lua_settop</code> can be seen <a href=\"http://www.lua.org/source/5.3/lapi.c.html\" rel=\"nofollow\">here</a>; it will fill the stack slots with <code>nil</code> so the values can be gc'd. So it's O(1) with arg <code>1</code>.</p>\n\n<p>You can read each value in O(1), and the pop of N values is O(N).</p>\n\n<p>So, your two approaches should be roughly equivalent.</p>\n\n<p>Re: reading values in O(1), the function <a href=\"http://www.lua.org/source/5.3/lapi.c.html#index2addr\" rel=\"nofollow\">index2addr</a> is what translates a stack offset to an address.</p>\n"}], "owner": {"reputation": 5304, "user_id": 2387673, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zcS8b.png?s=128&g=1", "display_name": "keelar", "link": "https://stackoverflow.com/users/2387673/keelar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 35166915, "answer_count": 1, "score": 3, "last_activity_date": 1454475220, "creation_date": 1454462404, "last_edit_date": 1454475220, "question_id": 35166854, "link": "https://stackoverflow.com/questions/35166854/complexity-of-lua-stack-operations-lua-c-api", "title": "Complexity of Lua stack operations (Lua C API)", "body": "<p>In the Lua C API, it offers couple stack operation functions as mentioned in <a href=\"http://www.lua.org/pil/24.2.3.html\" rel=\"nofollow\">Lua's document</a></p>\n\n<pre><code>int   lua_gettop (lua_State *L);\nvoid  lua_settop (lua_State *L, int index);\nvoid  lua_pushvalue (lua_State *L, int index);\nvoid  lua_remove (lua_State *L, int index);\nvoid  lua_insert (lua_State *L, int index);\nvoid  lua_replace (lua_State *L, int index);\n</code></pre>\n\n<p>My first question is, what is the complexity of these function?  Is it O(1) or O(|index|)?  I checked the <a href=\"http://www.lua.org/doc/jucs05.pdf\" rel=\"nofollow\">Lua manual</a> and it seems Lua has two different implementations of stack (stack based and register based).</p>\n\n<p>More specifically, if I would like to read and pop the top three elements from the lua stack, I can think of the following two implementations, can I know which one is more performant / suggested way?</p>\n\n<p>Solution 1 -- read and pop for each value:</p>\n\n<pre><code>for (int i = 0; i &lt; 3; ++i) {\n  values[i] = lua_tostring(lua_state, -1);\n  ...\n  lua_pop(lua_state, 1);\n}\n</code></pre>\n\n<p>Solution 2 -- read all and then pop all:</p>\n\n<pre><code>for (int i = 0; i &lt; 3; ++i) {\n  values[i] = lua_tostring(lua_state, -1 - i);\n}\n...\nlua_pop(lua_state, 3);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1454462631, "post_id": 35166819, "comment_id": 58052022, "body": "What do you think <code>&amp;words[i]</code> is?"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454465286, "post_id": 35166917, "comment_id": 58052773, "body": "Indeed you should do char <code>**words = new char[n][m];</code>, where m is the max length you will input."}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 1, "creation_date": 1454465911, "post_id": 35166917, "comment_id": 58052948, "body": "I tried with <code>m=20</code> and got <code>error: cannot convert \u2018char (*)[20]\u2019 to \u2018char**\u2019 in initialization</code>."}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454468713, "post_id": 35166917, "comment_id": 58053689, "body": "My fault. It should be 1. <code>char words[n][m];</code> 2. <code>char *words[n] = new char[n][m];</code> 3. <code>char *words[n]; for(int i=0; i&lt;n; ++i) words[i] = new char();</code>"}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1454468920, "post_id": 35166917, "comment_id": 58053749, "body": "WHY IS THERE NO SYNTACTIC SUGAR FOR THAT??? When I program in Haskell or python the code flows like honey from my fingers. When I program in C++ everything is a clusterf***."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1454469771, "post_id": 35166917, "comment_id": 58053995, "body": "<code>new char</code> is not legal in C"}, {"owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "edited": false, "score": 0, "creation_date": 1454470119, "post_id": 35166917, "comment_id": 58054079, "body": "The author said he used the <code>new</code> so I think he is using c++ in fact."}], "tags": [], "owner": {"reputation": 93, "user_id": 5813282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98459f63ff6186c4df45040bab6a296?s=128&d=identicon&r=PG&f=1", "display_name": "Holsety", "link": "https://stackoverflow.com/users/5813282/holsety"}, "is_accepted": true, "score": 1, "last_activity_date": 1454462825, "creation_date": 1454462825, "answer_id": 35166917, "question_id": 35166819, "link": "https://stackoverflow.com/questions/35166819/fscanf-segfault-reading-into-an-array/35166917#35166917", "title": "fscanf segfault reading into an array", "body": "<p>Because you didn't allocate memory for your words[i]. They are just pointers point to random memory addresses.</p>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 35166917, "answer_count": 1, "score": 1, "last_activity_date": 1454467717, "creation_date": 1454462176, "last_edit_date": 1454467717, "question_id": 35166819, "link": "https://stackoverflow.com/questions/35166819/fscanf-segfault-reading-into-an-array", "title": "fscanf segfault reading into an array", "body": "<p>Why is fscanf in this code giving me a segfault?</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n  FILE *file = fopen(argv[1], \"r\");\n  int n = atoi(argv[2]);\n\n  char *words[n]; int i=0;\n  while ((fscanf(file, \"%s \", &amp;words[i])) != EOF) i++;\n}\n</code></pre>\n"}]